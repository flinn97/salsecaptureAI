var QT=Object.defineProperty;var YT=(r,e,t)=>e in r?QT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var le=(r,e,t)=>YT(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Up={exports:{}},nu={},Vp={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function XT(){if(f_)return ft;f_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function p(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function E(B,U,H){this.props=B,this.context=U,this.refs=x,this.updater=H||y}E.prototype.isReactComponent={},E.prototype.setState=function(B,U){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,U,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function w(){}w.prototype=E.prototype;function C(B,U,H){this.props=B,this.context=U,this.refs=x,this.updater=H||y}var P=C.prototype=new w;P.constructor=C,b(P,E.prototype),P.isPureReactComponent=!0;var S=Array.isArray,O=Object.prototype.hasOwnProperty,M={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function A(B,U,H){var ne,ee={},$=null,Y=null;if(U!=null)for(ne in U.ref!==void 0&&(Y=U.ref),U.key!==void 0&&($=""+U.key),U)O.call(U,ne)&&!R.hasOwnProperty(ne)&&(ee[ne]=U[ne]);var Q=arguments.length-2;if(Q===1)ee.children=H;else if(1<Q){for(var te=Array(Q),ae=0;ae<Q;ae++)te[ae]=arguments[ae+2];ee.children=te}if(B&&B.defaultProps)for(ne in Q=B.defaultProps,Q)ee[ne]===void 0&&(ee[ne]=Q[ne]);return{$$typeof:r,type:B,key:$,ref:Y,props:ee,_owner:M.current}}function T(B,U){return{$$typeof:r,type:B.type,key:U,ref:B.ref,props:B.props,_owner:B._owner}}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function D(B){var U={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(H){return U[H]})}var N=/\/+/g;function L(B,U){return typeof B=="object"&&B!==null&&B.key!=null?D(""+B.key):U.toString(36)}function V(B,U,H,ne,ee){var $=typeof B;($==="undefined"||$==="boolean")&&(B=null);var Y=!1;if(B===null)Y=!0;else switch($){case"string":case"number":Y=!0;break;case"object":switch(B.$$typeof){case r:case e:Y=!0}}if(Y)return Y=B,ee=ee(Y),B=ne===""?"."+L(Y,0):ne,S(ee)?(H="",B!=null&&(H=B.replace(N,"$&/")+"/"),V(ee,U,H,"",function(ae){return ae})):ee!=null&&(I(ee)&&(ee=T(ee,H+(!ee.key||Y&&Y.key===ee.key?"":(""+ee.key).replace(N,"$&/")+"/")+B)),U.push(ee)),1;if(Y=0,ne=ne===""?".":ne+":",S(B))for(var Q=0;Q<B.length;Q++){$=B[Q];var te=ne+L($,Q);Y+=V($,U,H,te,ee)}else if(te=p(B),typeof te=="function")for(B=te.call(B),Q=0;!($=B.next()).done;)$=$.value,te=ne+L($,Q++),Y+=V($,U,H,te,ee);else if($==="object")throw U=String(B),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Y}function J(B,U,H){if(B==null)return B;var ne=[],ee=0;return V(B,ne,"","",function($){return U.call(H,$,ee++)}),ne}function re(B){if(B._status===-1){var U=B._result;U=U(),U.then(function(H){(B._status===0||B._status===-1)&&(B._status=1,B._result=H)},function(H){(B._status===0||B._status===-1)&&(B._status=2,B._result=H)}),B._status===-1&&(B._status=0,B._result=U)}if(B._status===1)return B._result.default;throw B._result}var Z={current:null},ie={transition:null},G={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:ie,ReactCurrentOwner:M};function W(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:J,forEach:function(B,U,H){J(B,function(){U.apply(this,arguments)},H)},count:function(B){var U=0;return J(B,function(){U++}),U},toArray:function(B){return J(B,function(U){return U})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ft.Component=E,ft.Fragment=t,ft.Profiler=i,ft.PureComponent=C,ft.StrictMode=n,ft.Suspense=h,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ft.act=W,ft.cloneElement=function(B,U,H){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ne=b({},B.props),ee=B.key,$=B.ref,Y=B._owner;if(U!=null){if(U.ref!==void 0&&($=U.ref,Y=M.current),U.key!==void 0&&(ee=""+U.key),B.type&&B.type.defaultProps)var Q=B.type.defaultProps;for(te in U)O.call(U,te)&&!R.hasOwnProperty(te)&&(ne[te]=U[te]===void 0&&Q!==void 0?Q[te]:U[te])}var te=arguments.length-2;if(te===1)ne.children=H;else if(1<te){Q=Array(te);for(var ae=0;ae<te;ae++)Q[ae]=arguments[ae+2];ne.children=Q}return{$$typeof:r,type:B.type,key:ee,ref:$,props:ne,_owner:Y}},ft.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},ft.createElement=A,ft.createFactory=function(B){var U=A.bind(null,B);return U.type=B,U},ft.createRef=function(){return{current:null}},ft.forwardRef=function(B){return{$$typeof:u,render:B}},ft.isValidElement=I,ft.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:re}},ft.memo=function(B,U){return{$$typeof:d,type:B,compare:U===void 0?null:U}},ft.startTransition=function(B){var U=ie.transition;ie.transition={};try{B()}finally{ie.transition=U}},ft.unstable_act=W,ft.useCallback=function(B,U){return Z.current.useCallback(B,U)},ft.useContext=function(B){return Z.current.useContext(B)},ft.useDebugValue=function(){},ft.useDeferredValue=function(B){return Z.current.useDeferredValue(B)},ft.useEffect=function(B,U){return Z.current.useEffect(B,U)},ft.useId=function(){return Z.current.useId()},ft.useImperativeHandle=function(B,U,H){return Z.current.useImperativeHandle(B,U,H)},ft.useInsertionEffect=function(B,U){return Z.current.useInsertionEffect(B,U)},ft.useLayoutEffect=function(B,U){return Z.current.useLayoutEffect(B,U)},ft.useMemo=function(B,U){return Z.current.useMemo(B,U)},ft.useReducer=function(B,U,H){return Z.current.useReducer(B,U,H)},ft.useRef=function(B){return Z.current.useRef(B)},ft.useState=function(B){return Z.current.useState(B)},ft.useSyncExternalStore=function(B,U,H){return Z.current.useSyncExternalStore(B,U,H)},ft.useTransition=function(){return Z.current.useTransition()},ft.version="18.3.1",ft}var p_;function Cd(){return p_||(p_=1,Vp.exports=XT()),Vp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function ZT(){if(m_)return nu;m_=1;var r=Cd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var g,m={},p=null,y=null;d!==void 0&&(p=""+d),h.key!==void 0&&(p=""+h.key),h.ref!==void 0&&(y=h.ref);for(g in h)n.call(h,g)&&!o.hasOwnProperty(g)&&(m[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)m[g]===void 0&&(m[g]=h[g]);return{$$typeof:e,type:u,key:p,ref:y,props:m,_owner:i.current}}return nu.Fragment=t,nu.jsx=l,nu.jsxs=l,nu}var g_;function eI(){return g_||(g_=1,Up.exports=ZT()),Up.exports}var _=eI(),ve=Cd();const qe=qu(ve);var vh={},zp={exports:{}},tr={},Hp={exports:{}},Wp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function tI(){return y_||(y_=1,function(r){function e(ie,G){var W=ie.length;ie.push(G);e:for(;0<W;){var B=W-1>>>1,U=ie[B];if(0<i(U,G))ie[B]=G,ie[W]=U,W=B;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var G=ie[0],W=ie.pop();if(W!==G){ie[0]=W;e:for(var B=0,U=ie.length,H=U>>>1;B<H;){var ne=2*(B+1)-1,ee=ie[ne],$=ne+1,Y=ie[$];if(0>i(ee,W))$<U&&0>i(Y,ee)?(ie[B]=Y,ie[$]=W,B=$):(ie[B]=ee,ie[ne]=W,B=ne);else if($<U&&0>i(Y,W))ie[B]=Y,ie[$]=W,B=$;else break e}}return G}function i(ie,G){var W=ie.sortIndex-G.sortIndex;return W!==0?W:ie.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],d=[],g=1,m=null,p=3,y=!1,b=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ie){for(var G=t(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=ie)n(d),G.sortIndex=G.expirationTime,e(h,G);else break;G=t(d)}}function S(ie){if(x=!1,P(ie),!b)if(t(h)!==null)b=!0,re(O);else{var G=t(d);G!==null&&Z(S,G.startTime-ie)}}function O(ie,G){b=!1,x&&(x=!1,w(A),A=-1),y=!0;var W=p;try{for(P(G),m=t(h);m!==null&&(!(m.expirationTime>G)||ie&&!D());){var B=m.callback;if(typeof B=="function"){m.callback=null,p=m.priorityLevel;var U=B(m.expirationTime<=G);G=r.unstable_now(),typeof U=="function"?m.callback=U:m===t(h)&&n(h),P(G)}else n(h);m=t(h)}if(m!==null)var H=!0;else{var ne=t(d);ne!==null&&Z(S,ne.startTime-G),H=!1}return H}finally{m=null,p=W,y=!1}}var M=!1,R=null,A=-1,T=5,I=-1;function D(){return!(r.unstable_now()-I<T)}function N(){if(R!==null){var ie=r.unstable_now();I=ie;var G=!0;try{G=R(!0,ie)}finally{G?L():(M=!1,R=null)}}else M=!1}var L;if(typeof C=="function")L=function(){C(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,J=V.port2;V.port1.onmessage=N,L=function(){J.postMessage(null)}}else L=function(){E(N,0)};function re(ie){R=ie,M||(M=!0,L())}function Z(ie,G){A=E(function(){ie(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){b||y||(b=!0,re(O))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(ie){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var W=p;p=G;try{return ie()}finally{p=W}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,G){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var W=p;p=ie;try{return G()}finally{p=W}},r.unstable_scheduleCallback=function(ie,G,W){var B=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?B+W:B):W=B,ie){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=W+U,ie={id:g++,callback:G,priorityLevel:ie,startTime:W,expirationTime:U,sortIndex:-1},W>B?(ie.sortIndex=W,e(d,ie),t(h)===null&&ie===t(d)&&(x?(w(A),A=-1):x=!0,Z(S,W-B))):(ie.sortIndex=U,e(h,ie),b||y||(b=!0,re(O))),ie},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(ie){var G=p;return function(){var W=p;p=G;try{return ie.apply(this,arguments)}finally{p=W}}}}(Wp)),Wp}var v_;function nI(){return v_||(v_=1,Hp.exports=tI()),Hp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function rI(){if(__)return tr;__=1;var r=Cd(),e=nI();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)n.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function p(s){return h.call(m,s)?!0:h.call(g,s)?!1:d.test(s)?m[s]=!0:(g[s]=!0,!1)}function y(s,a,c,v){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return v?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,c,v){if(a===null||typeof a>"u"||y(s,a,c,v))return!0;if(v)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(s,a,c,v,k,j,z){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=v,this.attributeNamespace=k,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=j,this.removeEmptyString=z}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];E[a]=new x(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function C(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(w,C);E[a]=new x(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(w,C);E[a]=new x(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(w,C);E[a]=new x(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,a,c,v){var k=E.hasOwnProperty(a)?E[a]:null;(k!==null?k.type!==0:v||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,c,k,v)&&(c=null),v||k===null?p(a)&&(c===null?s.removeAttribute(a):s.setAttribute(a,""+c)):k.mustUseProperty?s[k.propertyName]=c===null?k.type===3?!1:"":c:(a=k.attributeName,v=k.attributeNamespace,c===null?s.removeAttribute(a):(k=k.type,c=k===3||k===4&&c===!0?"":""+c,v?s.setAttributeNS(v,a,c):s.setAttribute(a,c))))}var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),M=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),ie=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var W=Object.assign,B;function U(s){if(B===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+s}var H=!1;function ne(s,a){if(!s||H)return"";H=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(pe){var v=pe}Reflect.construct(s,[],a)}else{try{a.call()}catch(pe){v=pe}s.call(a.prototype)}else{try{throw Error()}catch(pe){v=pe}s()}}catch(pe){if(pe&&v&&typeof pe.stack=="string"){for(var k=pe.stack.split(`
`),j=v.stack.split(`
`),z=k.length-1,X=j.length-1;1<=z&&0<=X&&k[z]!==j[X];)X--;for(;1<=z&&0<=X;z--,X--)if(k[z]!==j[X]){if(z!==1||X!==1)do if(z--,X--,0>X||k[z]!==j[X]){var se=`
`+k[z].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=z&&0<=X);break}}}finally{H=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?U(s):""}function ee(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function $(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case M:return"Portal";case T:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case V:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case I:return(s._context.displayName||"Context")+".Provider";case N:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case J:return a=s.displayName||null,a!==null?a:$(s.type)||"Memo";case re:a=s._payload,s=s._init;try{return $(s(a))}catch{}}return null}function Y(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Q(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function te(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ae(s){var a=te(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),v=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var k=c.get,j=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return k.call(this)},set:function(z){v=""+z,j.call(this,z)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return v},setValue:function(z){v=""+z},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ge(s){s._valueTracker||(s._valueTracker=ae(s))}function Ce(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),v="";return s&&(v=te(s)?s.checked?"true":"false":s.value),s=v,s!==c?(a.setValue(s),!0):!1}function Re(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Pe(s,a){var c=a.checked;return W({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Ne(s,a){var c=a.defaultValue==null?"":a.defaultValue,v=a.checked!=null?a.checked:a.defaultChecked;c=Q(a.value!=null?a.value:c),s._wrapperState={initialChecked:v,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Fe(s,a){a=a.checked,a!=null&&P(s,"checked",a,!1)}function Ze(s,a){Fe(s,a);var c=Q(a.value),v=a.type;if(c!=null)v==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(v==="submit"||v==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?fe(s,a.type,c):a.hasOwnProperty("defaultValue")&&fe(s,a.type,Q(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ue(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var v=a.type;if(!(v!=="submit"&&v!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function fe(s,a,c){(a!=="number"||Re(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Ee=Array.isArray;function Te(s,a,c,v){if(s=s.options,a){a={};for(var k=0;k<c.length;k++)a["$"+c[k]]=!0;for(c=0;c<s.length;c++)k=a.hasOwnProperty("$"+s[c].value),s[c].selected!==k&&(s[c].selected=k),k&&v&&(s[c].defaultSelected=!0)}else{for(c=""+Q(c),a=null,k=0;k<s.length;k++){if(s[k].value===c){s[k].selected=!0,v&&(s[k].defaultSelected=!0);return}a!==null||s[k].disabled||(a=s[k])}a!==null&&(a.selected=!0)}}function ye(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $e(s,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(Ee(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}s._wrapperState={initialValue:Q(c)}}function Le(s,a){var c=Q(a.value),v=Q(a.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),a.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),v!=null&&(s.defaultValue=""+v)}function ze(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Ke(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Ke(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var it,Gn=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,v,k){MSApp.execUnsafeLocalFunction(function(){return s(a,c,v,k)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(it=it||document.createElement("div"),it.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=it.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function vt(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];Object.keys(kt).forEach(function(s){Zt.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),kt[a]=kt[s]})});function kr(s,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||kt.hasOwnProperty(s)&&kt[s]?(""+a).trim():a+"px"}function rs(s,a){s=s.style;for(var c in a)if(a.hasOwnProperty(c)){var v=c.indexOf("--")===0,k=kr(c,a[c],v);c==="float"&&(c="cssFloat"),v?s.setProperty(c,k):s[c]=k}}var ml=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gl(s,a){if(a){if(ml[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function yl(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var io=null;function Ko(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Jo=null,yr=null,Zr=null;function Qo(s){if(s=Ul(s)){if(typeof Jo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Nc(a),Jo(s.stateNode,s.type,a))}}function ei(s){yr?Zr?Zr.push(s):Zr=[s]:yr=s}function vl(){if(yr){var s=yr,a=Zr;if(Zr=yr=null,Qo(s),a)for(s=0;s<a.length;s++)Qo(a[s])}}function so(s,a){return s(a)}function _l(){}var Ii=!1;function wl(s,a,c){if(Ii)return s(a,c);Ii=!0;try{return so(s,a,c)}finally{Ii=!1,(yr!==null||Zr!==null)&&(_l(),vl())}}function Qt(s,a){var c=s.stateNode;if(c===null)return null;var v=Nc(c);if(v===null)return null;c=v[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Yo=!1;if(u)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{Yo=!1}function oo(s,a,c,v,k,j,z,X,se){var pe=Array.prototype.slice.call(arguments,3);try{a.apply(c,pe)}catch(be){this.onError(be)}}var ao=!1,Xo=null,Pr=!1,El=null,mf={onError:function(s){ao=!0,Xo=s}};function Zo(s,a,c,v,k,j,z,X,se){ao=!1,Xo=null,oo.apply(mf,arguments)}function ic(s,a,c,v,k,j,z,X,se){if(Zo.apply(this,arguments),ao){if(ao){var pe=Xo;ao=!1,Xo=null}else throw Error(t(198));Pr||(Pr=!0,El=pe)}}function Nr(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function lo(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Or(s){if(Nr(s)!==s)throw Error(t(188))}function sc(s){var a=s.alternate;if(!a){if(a=Nr(s),a===null)throw Error(t(188));return a!==s?null:s}for(var c=s,v=a;;){var k=c.return;if(k===null)break;var j=k.alternate;if(j===null){if(v=k.return,v!==null){c=v;continue}break}if(k.child===j.child){for(j=k.child;j;){if(j===c)return Or(k),s;if(j===v)return Or(k),a;j=j.sibling}throw Error(t(188))}if(c.return!==v.return)c=k,v=j;else{for(var z=!1,X=k.child;X;){if(X===c){z=!0,c=k,v=j;break}if(X===v){z=!0,v=k,c=j;break}X=X.sibling}if(!z){for(X=j.child;X;){if(X===c){z=!0,c=j,v=k;break}if(X===v){z=!0,v=j,c=k;break}X=X.sibling}if(!z)throw Error(t(189))}}if(c.alternate!==v)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:a}function Cl(s){return s=sc(s),s!==null?ea(s):null}function ea(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=ea(s);if(a!==null)return a;s=s.sibling}return null}var ta=e.unstable_scheduleCallback,Al=e.unstable_cancelCallback,oc=e.unstable_shouldYield,gf=e.unstable_requestPaint,Rt=e.unstable_now,ac=e.unstable_getCurrentPriorityLevel,uo=e.unstable_ImmediatePriority,is=e.unstable_UserBlockingPriority,vr=e.unstable_NormalPriority,bl=e.unstable_LowPriority,lc=e.unstable_IdlePriority,co=null,sr=null;function uc(s){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(co,s,void 0,(s.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:hc,xl=Math.log,cc=Math.LN2;function hc(s){return s>>>=0,s===0?32:31-(xl(s)/cc|0)|0}var na=64,ra=4194304;function ss(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ho(s,a){var c=s.pendingLanes;if(c===0)return 0;var v=0,k=s.suspendedLanes,j=s.pingedLanes,z=c&268435455;if(z!==0){var X=z&~k;X!==0?v=ss(X):(j&=z,j!==0&&(v=ss(j)))}else z=c&~k,z!==0?v=ss(z):j!==0&&(v=ss(j));if(v===0)return 0;if(a!==0&&a!==v&&(a&k)===0&&(k=v&-v,j=a&-a,k>=j||k===16&&(j&4194240)!==0))return a;if((v&4)!==0&&(v|=c&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=v;0<a;)c=31-Bn(a),k=1<<c,v|=s[c],a&=~k;return v}function yf(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(s,a){for(var c=s.suspendedLanes,v=s.pingedLanes,k=s.expirationTimes,j=s.pendingLanes;0<j;){var z=31-Bn(j),X=1<<z,se=k[z];se===-1?((X&c)===0||(X&v)!==0)&&(k[z]=yf(X,a)):se<=a&&(s.expiredLanes|=X),j&=~X}}function or(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function fo(){var s=na;return na<<=1,(na&4194240)===0&&(na=64),s}function os(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function as(s,a,c){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Bn(a),s[a]=c}function It(s,a){var c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var v=s.eventTimes;for(s=s.expirationTimes;0<c;){var k=31-Bn(c),j=1<<k;a[k]=0,v[k]=-1,s[k]=-1,c&=~j}}function ls(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var v=31-Bn(c),k=1<<v;k&a|s[v]&a&&(s[v]|=a),c&=~k}}var yt=0;function us(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var dc,ia,fc,pc,mc,Sl=!1,ti=[],wn=null,Lr=null,Fr=null,cs=new Map,_r=new Map,ni=[],vf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gc(s,a){switch(s){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":cs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(a.pointerId)}}function Kn(s,a,c,v,k,j){return s===null||s.nativeEvent!==j?(s={blockedOn:a,domEventName:c,eventSystemFlags:v,nativeEvent:j,targetContainers:[k]},a!==null&&(a=Ul(a),a!==null&&ia(a)),s):(s.eventSystemFlags|=v,a=s.targetContainers,k!==null&&a.indexOf(k)===-1&&a.push(k),s)}function _f(s,a,c,v,k){switch(a){case"focusin":return wn=Kn(wn,s,a,c,v,k),!0;case"dragenter":return Lr=Kn(Lr,s,a,c,v,k),!0;case"mouseover":return Fr=Kn(Fr,s,a,c,v,k),!0;case"pointerover":var j=k.pointerId;return cs.set(j,Kn(cs.get(j)||null,s,a,c,v,k)),!0;case"gotpointercapture":return j=k.pointerId,_r.set(j,Kn(_r.get(j)||null,s,a,c,v,k)),!0}return!1}function yc(s){var a=vo(s.target);if(a!==null){var c=Nr(a);if(c!==null){if(a=c.tag,a===13){if(a=lo(c),a!==null){s.blockedOn=a,mc(s.priority,function(){fc(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ki(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=sa(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var v=new c.constructor(c.type,c);io=v,c.target.dispatchEvent(v),io=null}else return a=Ul(c),a!==null&&ia(a),s.blockedOn=c,!1;a.shift()}return!0}function po(s,a,c){ki(s)&&c.delete(a)}function vc(){Sl=!1,wn!==null&&ki(wn)&&(wn=null),Lr!==null&&ki(Lr)&&(Lr=null),Fr!==null&&ki(Fr)&&(Fr=null),cs.forEach(po),_r.forEach(po)}function jr(s,a){s.blockedOn===a&&(s.blockedOn=null,Sl||(Sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vc)))}function Br(s){function a(k){return jr(k,s)}if(0<ti.length){jr(ti[0],s);for(var c=1;c<ti.length;c++){var v=ti[c];v.blockedOn===s&&(v.blockedOn=null)}}for(wn!==null&&jr(wn,s),Lr!==null&&jr(Lr,s),Fr!==null&&jr(Fr,s),cs.forEach(a),_r.forEach(a),c=0;c<ni.length;c++)v=ni[c],v.blockedOn===s&&(v.blockedOn=null);for(;0<ni.length&&(c=ni[0],c.blockedOn===null);)yc(c),c.blockedOn===null&&ni.shift()}var Ri=S.ReactCurrentBatchConfig,hs=!0;function qt(s,a,c,v){var k=yt,j=Ri.transition;Ri.transition=null;try{yt=1,Tl(s,a,c,v)}finally{yt=k,Ri.transition=j}}function wf(s,a,c,v){var k=yt,j=Ri.transition;Ri.transition=null;try{yt=4,Tl(s,a,c,v)}finally{yt=k,Ri.transition=j}}function Tl(s,a,c,v){if(hs){var k=sa(s,a,c,v);if(k===null)Rf(s,a,v,mo,c),gc(s,v);else if(_f(k,s,a,c,v))v.stopPropagation();else if(gc(s,v),a&4&&-1<vf.indexOf(s)){for(;k!==null;){var j=Ul(k);if(j!==null&&dc(j),j=sa(s,a,c,v),j===null&&Rf(s,a,v,mo,c),j===k)break;k=j}k!==null&&v.stopPropagation()}else Rf(s,a,v,null,c)}}var mo=null;function sa(s,a,c,v){if(mo=null,s=Ko(v),s=vo(s),s!==null)if(a=Nr(s),a===null)s=null;else if(c=a.tag,c===13){if(s=lo(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return mo=s,null}function Il(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ac()){case uo:return 1;case is:return 4;case vr:case bl:return 16;case lc:return 536870912;default:return 16}default:return 16}}var ar=null,oa=null,Jn=null;function Dl(){if(Jn)return Jn;var s,a=oa,c=a.length,v,k="value"in ar?ar.value:ar.textContent,j=k.length;for(s=0;s<c&&a[s]===k[s];s++);var z=c-s;for(v=1;v<=z&&a[c-v]===k[j-v];v++);return Jn=k.slice(s,1<v?1-v:void 0)}function aa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ri(){return!0}function kl(){return!1}function En(s){function a(c,v,k,j,z){this._reactName=c,this._targetInst=k,this.type=v,this.nativeEvent=j,this.target=z,this.currentTarget=null;for(var X in s)s.hasOwnProperty(X)&&(c=s[X],this[X]=c?c(j):j[X]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ri:kl,this.isPropagationStopped=kl,this}return W(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),a}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=En(Mr),ii=W({},Mr,{view:0,detail:0}),Ef=En(ii),ua,Pi,ds,go=W({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ds&&(ds&&s.type==="mousemove"?(ua=s.screenX-ds.screenX,Pi=s.screenY-ds.screenY):Pi=ua=0,ds=s),ua)},movementY:function(s){return"movementY"in s?s.movementY:Pi}}),ca=En(go),Rl=W({},go,{dataTransfer:0}),_c=En(Rl),ha=W({},ii,{relatedTarget:0}),da=En(ha),wc=W({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ni=En(wc),Ec=W({},Mr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Cc=En(Ec),Ac=W({},Mr,{data:0}),Pl=En(Ac),fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xc(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=bc[s])?!!a[s]:!1}function si(){return xc}var f=W({},ii,{key:function(s){if(s.key){var a=fa[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=aa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Mn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(s){return s.type==="keypress"?aa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?aa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),F=En(f),q=W({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=En(q),ce=W({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),me=En(ce),ke=W({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),St=En(ke),on=W({},go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),_t=En(on),pn=[9,13,27,32],en=u&&"CompositionEvent"in window,wr=null;u&&"documentMode"in document&&(wr=document.documentMode);var lr=u&&"TextEvent"in window&&!wr,yo=u&&(!en||wr&&8<wr&&11>=wr),pa=" ",a0=!1;function l0(s,a){switch(s){case"keyup":return pn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ma=!1;function GS(s,a){switch(s){case"compositionend":return u0(a);case"keypress":return a.which!==32?null:(a0=!0,pa);case"textInput":return s=a.data,s===pa&&a0?null:s;default:return null}}function KS(s,a){if(ma)return s==="compositionend"||!en&&l0(s,a)?(s=Dl(),Jn=oa=ar=null,ma=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yo&&a.locale!=="ko"?null:a.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!JS[s.type]:a==="textarea"}function h0(s,a,c,v){ei(v),a=kc(a,"onChange"),0<a.length&&(c=new la("onChange","change",null,c,v),s.push({event:c,listeners:a}))}var Nl=null,Ol=null;function QS(s){D0(s,0)}function Sc(s){var a=wa(s);if(Ce(a))return s}function YS(s,a){if(s==="change")return a}var d0=!1;if(u){var Cf;if(u){var Af="oninput"in document;if(!Af){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),Af=typeof f0.oninput=="function"}Cf=Af}else Cf=!1;d0=Cf&&(!document.documentMode||9<document.documentMode)}function p0(){Nl&&(Nl.detachEvent("onpropertychange",m0),Ol=Nl=null)}function m0(s){if(s.propertyName==="value"&&Sc(Ol)){var a=[];h0(a,Ol,s,Ko(s)),wl(QS,a)}}function XS(s,a,c){s==="focusin"?(p0(),Nl=a,Ol=c,Nl.attachEvent("onpropertychange",m0)):s==="focusout"&&p0()}function ZS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Sc(Ol)}function eT(s,a){if(s==="click")return Sc(a)}function tT(s,a){if(s==="input"||s==="change")return Sc(a)}function nT(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var qr=typeof Object.is=="function"?Object.is:nT;function Ll(s,a){if(qr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),v=Object.keys(a);if(c.length!==v.length)return!1;for(v=0;v<c.length;v++){var k=c[v];if(!h.call(a,k)||!qr(s[k],a[k]))return!1}return!0}function g0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function y0(s,a){var c=g0(s);s=0;for(var v;c;){if(c.nodeType===3){if(v=s+c.textContent.length,s<=a&&v>=a)return{node:c,offset:a-s};s=v}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=g0(c)}}function v0(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?v0(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function _0(){for(var s=window,a=Re();a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=Re(s.document)}return a}function bf(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function rT(s){var a=_0(),c=s.focusedElem,v=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&v0(c.ownerDocument.documentElement,c)){if(v!==null&&bf(c)){if(a=v.start,s=v.end,s===void 0&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if(s=(a=c.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var k=c.textContent.length,j=Math.min(v.start,k);v=v.end===void 0?j:Math.min(v.end,k),!s.extend&&j>v&&(k=v,v=j,j=k),k=y0(c,j);var z=y0(c,v);k&&z&&(s.rangeCount!==1||s.anchorNode!==k.node||s.anchorOffset!==k.offset||s.focusNode!==z.node||s.focusOffset!==z.offset)&&(a=a.createRange(),a.setStart(k.node,k.offset),s.removeAllRanges(),j>v?(s.addRange(a),s.extend(z.node,z.offset)):(a.setEnd(z.node,z.offset),s.addRange(a)))}}for(a=[],s=c;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)s=a[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var iT=u&&"documentMode"in document&&11>=document.documentMode,ga=null,xf=null,Fl=null,Sf=!1;function w0(s,a,c){var v=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Sf||ga==null||ga!==Re(v)||(v=ga,"selectionStart"in v&&bf(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Fl&&Ll(Fl,v)||(Fl=v,v=kc(xf,"onSelect"),0<v.length&&(a=new la("onSelect","select",null,a,c),s.push({event:a,listeners:v}),a.target=ga)))}function Tc(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var ya={animationend:Tc("Animation","AnimationEnd"),animationiteration:Tc("Animation","AnimationIteration"),animationstart:Tc("Animation","AnimationStart"),transitionend:Tc("Transition","TransitionEnd")},Tf={},E0={};u&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Ic(s){if(Tf[s])return Tf[s];if(!ya[s])return s;var a=ya[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in E0)return Tf[s]=a[c];return s}var C0=Ic("animationend"),A0=Ic("animationiteration"),b0=Ic("animationstart"),x0=Ic("transitionend"),S0=new Map,T0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(s,a){S0.set(s,a),o(a,[s])}for(var If=0;If<T0.length;If++){var Df=T0[If],sT=Df.toLowerCase(),oT=Df[0].toUpperCase()+Df.slice(1);fs(sT,"on"+oT)}fs(C0,"onAnimationEnd"),fs(A0,"onAnimationIteration"),fs(b0,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(x0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aT=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function I0(s,a,c){var v=s.type||"unknown-event";s.currentTarget=c,ic(v,a,void 0,s),s.currentTarget=null}function D0(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var v=s[c],k=v.event;v=v.listeners;e:{var j=void 0;if(a)for(var z=v.length-1;0<=z;z--){var X=v[z],se=X.instance,pe=X.currentTarget;if(X=X.listener,se!==j&&k.isPropagationStopped())break e;I0(k,X,pe),j=se}else for(z=0;z<v.length;z++){if(X=v[z],se=X.instance,pe=X.currentTarget,X=X.listener,se!==j&&k.isPropagationStopped())break e;I0(k,X,pe),j=se}}}if(Pr)throw s=El,Pr=!1,El=null,s}function Ot(s,a){var c=a[jf];c===void 0&&(c=a[jf]=new Set);var v=s+"__bubble";c.has(v)||(k0(a,s,2,!1),c.add(v))}function kf(s,a,c){var v=0;a&&(v|=4),k0(c,s,v,a)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Bl(s){if(!s[Dc]){s[Dc]=!0,n.forEach(function(c){c!=="selectionchange"&&(aT.has(c)||kf(c,!1,s),kf(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Dc]||(a[Dc]=!0,kf("selectionchange",!1,a))}}function k0(s,a,c,v){switch(Il(a)){case 1:var k=qt;break;case 4:k=wf;break;default:k=Tl}c=k.bind(null,a,c,s),k=void 0,!Yo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(k=!0),v?k!==void 0?s.addEventListener(a,c,{capture:!0,passive:k}):s.addEventListener(a,c,!0):k!==void 0?s.addEventListener(a,c,{passive:k}):s.addEventListener(a,c,!1)}function Rf(s,a,c,v,k){var j=v;if((a&1)===0&&(a&2)===0&&v!==null)e:for(;;){if(v===null)return;var z=v.tag;if(z===3||z===4){var X=v.stateNode.containerInfo;if(X===k||X.nodeType===8&&X.parentNode===k)break;if(z===4)for(z=v.return;z!==null;){var se=z.tag;if((se===3||se===4)&&(se=z.stateNode.containerInfo,se===k||se.nodeType===8&&se.parentNode===k))return;z=z.return}for(;X!==null;){if(z=vo(X),z===null)return;if(se=z.tag,se===5||se===6){v=j=z;continue e}X=X.parentNode}}v=v.return}wl(function(){var pe=j,be=Ko(c),xe=[];e:{var Ae=S0.get(s);if(Ae!==void 0){var Oe=la,Ve=s;switch(s){case"keypress":if(aa(c)===0)break e;case"keydown":case"keyup":Oe=F;break;case"focusin":Ve="focus",Oe=da;break;case"focusout":Ve="blur",Oe=da;break;case"beforeblur":case"afterblur":Oe=da;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=_c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=me;break;case C0:case A0:case b0:Oe=Ni;break;case x0:Oe=St;break;case"scroll":Oe=Ef;break;case"wheel":Oe=_t;break;case"copy":case"cut":case"paste":Oe=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=K}var He=(a&4)!==0,Yt=!He&&s==="scroll",he=He?Ae!==null?Ae+"Capture":null:Ae;He=[];for(var oe=pe,de;oe!==null;){de=oe;var Ie=de.stateNode;if(de.tag===5&&Ie!==null&&(de=Ie,he!==null&&(Ie=Qt(oe,he),Ie!=null&&He.push(Ml(oe,Ie,de)))),Yt)break;oe=oe.return}0<He.length&&(Ae=new Oe(Ae,Ve,null,c,be),xe.push({event:Ae,listeners:He}))}}if((a&7)===0){e:{if(Ae=s==="mouseover"||s==="pointerover",Oe=s==="mouseout"||s==="pointerout",Ae&&c!==io&&(Ve=c.relatedTarget||c.fromElement)&&(vo(Ve)||Ve[Oi]))break e;if((Oe||Ae)&&(Ae=be.window===be?be:(Ae=be.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Oe?(Ve=c.relatedTarget||c.toElement,Oe=pe,Ve=Ve?vo(Ve):null,Ve!==null&&(Yt=Nr(Ve),Ve!==Yt||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Oe=null,Ve=pe),Oe!==Ve)){if(He=ca,Ie="onMouseLeave",he="onMouseEnter",oe="mouse",(s==="pointerout"||s==="pointerover")&&(He=K,Ie="onPointerLeave",he="onPointerEnter",oe="pointer"),Yt=Oe==null?Ae:wa(Oe),de=Ve==null?Ae:wa(Ve),Ae=new He(Ie,oe+"leave",Oe,c,be),Ae.target=Yt,Ae.relatedTarget=de,Ie=null,vo(be)===pe&&(He=new He(he,oe+"enter",Ve,c,be),He.target=de,He.relatedTarget=Yt,Ie=He),Yt=Ie,Oe&&Ve)t:{for(He=Oe,he=Ve,oe=0,de=He;de;de=va(de))oe++;for(de=0,Ie=he;Ie;Ie=va(Ie))de++;for(;0<oe-de;)He=va(He),oe--;for(;0<de-oe;)he=va(he),de--;for(;oe--;){if(He===he||he!==null&&He===he.alternate)break t;He=va(He),he=va(he)}He=null}else He=null;Oe!==null&&R0(xe,Ae,Oe,He,!1),Ve!==null&&Yt!==null&&R0(xe,Yt,Ve,He,!0)}}e:{if(Ae=pe?wa(pe):window,Oe=Ae.nodeName&&Ae.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Ae.type==="file")var We=YS;else if(c0(Ae))if(d0)We=tT;else{We=ZS;var Ye=XS}else(Oe=Ae.nodeName)&&Oe.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(We=eT);if(We&&(We=We(s,pe))){h0(xe,We,c,be);break e}Ye&&Ye(s,Ae,pe),s==="focusout"&&(Ye=Ae._wrapperState)&&Ye.controlled&&Ae.type==="number"&&fe(Ae,"number",Ae.value)}switch(Ye=pe?wa(pe):window,s){case"focusin":(c0(Ye)||Ye.contentEditable==="true")&&(ga=Ye,xf=pe,Fl=null);break;case"focusout":Fl=xf=ga=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,w0(xe,c,be);break;case"selectionchange":if(iT)break;case"keydown":case"keyup":w0(xe,c,be)}var Xe;if(en)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else ma?l0(s,c)&&(rt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(rt="onCompositionStart");rt&&(yo&&c.locale!=="ko"&&(ma||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&ma&&(Xe=Dl()):(ar=be,oa="value"in ar?ar.value:ar.textContent,ma=!0)),Ye=kc(pe,rt),0<Ye.length&&(rt=new Pl(rt,s,null,c,be),xe.push({event:rt,listeners:Ye}),Xe?rt.data=Xe:(Xe=u0(c),Xe!==null&&(rt.data=Xe)))),(Xe=lr?GS(s,c):KS(s,c))&&(pe=kc(pe,"onBeforeInput"),0<pe.length&&(be=new Pl("onBeforeInput","beforeinput",null,c,be),xe.push({event:be,listeners:pe}),be.data=Xe))}D0(xe,a)})}function Ml(s,a,c){return{instance:s,listener:a,currentTarget:c}}function kc(s,a){for(var c=a+"Capture",v=[];s!==null;){var k=s,j=k.stateNode;k.tag===5&&j!==null&&(k=j,j=Qt(s,c),j!=null&&v.unshift(Ml(s,j,k)),j=Qt(s,a),j!=null&&v.push(Ml(s,j,k))),s=s.return}return v}function va(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function R0(s,a,c,v,k){for(var j=a._reactName,z=[];c!==null&&c!==v;){var X=c,se=X.alternate,pe=X.stateNode;if(se!==null&&se===v)break;X.tag===5&&pe!==null&&(X=pe,k?(se=Qt(c,j),se!=null&&z.unshift(Ml(c,se,X))):k||(se=Qt(c,j),se!=null&&z.push(Ml(c,se,X)))),c=c.return}z.length!==0&&s.push({event:a,listeners:z})}var lT=/\r\n?/g,uT=/\u0000|\uFFFD/g;function P0(s){return(typeof s=="string"?s:""+s).replace(lT,`
`).replace(uT,"")}function Rc(s,a,c){if(a=P0(a),P0(s)!==a&&c)throw Error(t(425))}function Pc(){}var Pf=null,Nf=null;function Of(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,cT=typeof clearTimeout=="function"?clearTimeout:void 0,N0=typeof Promise=="function"?Promise:void 0,hT=typeof queueMicrotask=="function"?queueMicrotask:typeof N0<"u"?function(s){return N0.resolve(null).then(s).catch(dT)}:Lf;function dT(s){setTimeout(function(){throw s})}function Ff(s,a){var c=a,v=0;do{var k=c.nextSibling;if(s.removeChild(c),k&&k.nodeType===8)if(c=k.data,c==="/$"){if(v===0){s.removeChild(k),Br(a);return}v--}else c!=="$"&&c!=="$?"&&c!=="$!"||v++;c=k}while(c);Br(a)}function ps(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function O0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}var _a=Math.random().toString(36).slice(2),oi="__reactFiber$"+_a,ql="__reactProps$"+_a,Oi="__reactContainer$"+_a,jf="__reactEvents$"+_a,fT="__reactListeners$"+_a,pT="__reactHandles$"+_a;function vo(s){var a=s[oi];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Oi]||c[oi]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=O0(s);s!==null;){if(c=s[oi])return c;s=O0(s)}return a}s=c,c=s.parentNode}return null}function Ul(s){return s=s[oi]||s[Oi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function wa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Nc(s){return s[ql]||null}var Bf=[],Ea=-1;function ms(s){return{current:s}}function Lt(s){0>Ea||(s.current=Bf[Ea],Bf[Ea]=null,Ea--)}function Pt(s,a){Ea++,Bf[Ea]=s.current,s.current=a}var gs={},Dn=ms(gs),Qn=ms(!1),_o=gs;function Ca(s,a){var c=s.type.contextTypes;if(!c)return gs;var v=s.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===a)return v.__reactInternalMemoizedMaskedChildContext;var k={},j;for(j in c)k[j]=a[j];return v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=k),k}function Yn(s){return s=s.childContextTypes,s!=null}function Oc(){Lt(Qn),Lt(Dn)}function L0(s,a,c){if(Dn.current!==gs)throw Error(t(168));Pt(Dn,a),Pt(Qn,c)}function F0(s,a,c){var v=s.stateNode;if(a=a.childContextTypes,typeof v.getChildContext!="function")return c;v=v.getChildContext();for(var k in v)if(!(k in a))throw Error(t(108,Y(s)||"Unknown",k));return W({},c,v)}function Lc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||gs,_o=Dn.current,Pt(Dn,s),Pt(Qn,Qn.current),!0}function j0(s,a,c){var v=s.stateNode;if(!v)throw Error(t(169));c?(s=F0(s,a,_o),v.__reactInternalMemoizedMergedChildContext=s,Lt(Qn),Lt(Dn),Pt(Dn,s)):Lt(Qn),Pt(Qn,c)}var Li=null,Fc=!1,Mf=!1;function B0(s){Li===null?Li=[s]:Li.push(s)}function mT(s){Fc=!0,B0(s)}function ys(){if(!Mf&&Li!==null){Mf=!0;var s=0,a=yt;try{var c=Li;for(yt=1;s<c.length;s++){var v=c[s];do v=v(!0);while(v!==null)}Li=null,Fc=!1}catch(k){throw Li!==null&&(Li=Li.slice(s+1)),ta(uo,ys),k}finally{yt=a,Mf=!1}}return null}var Aa=[],ba=0,jc=null,Bc=0,Er=[],Cr=0,wo=null,Fi=1,ji="";function Eo(s,a){Aa[ba++]=Bc,Aa[ba++]=jc,jc=s,Bc=a}function M0(s,a,c){Er[Cr++]=Fi,Er[Cr++]=ji,Er[Cr++]=wo,wo=s;var v=Fi;s=ji;var k=32-Bn(v)-1;v&=~(1<<k),c+=1;var j=32-Bn(a)+k;if(30<j){var z=k-k%5;j=(v&(1<<z)-1).toString(32),v>>=z,k-=z,Fi=1<<32-Bn(a)+k|c<<k|v,ji=j+s}else Fi=1<<j|c<<k|v,ji=s}function qf(s){s.return!==null&&(Eo(s,1),M0(s,1,0))}function Uf(s){for(;s===jc;)jc=Aa[--ba],Aa[ba]=null,Bc=Aa[--ba],Aa[ba]=null;for(;s===wo;)wo=Er[--Cr],Er[Cr]=null,ji=Er[--Cr],Er[Cr]=null,Fi=Er[--Cr],Er[Cr]=null}var ur=null,cr=null,Ut=!1,Ur=null;function q0(s,a){var c=Sr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,a=s.deletions,a===null?(s.deletions=[c],s.flags|=16):a.push(c)}function U0(s,a){switch(s.tag){case 5:var c=s.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,ur=s,cr=ps(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,ur=s,cr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=wo!==null?{id:Fi,overflow:ji}:null,s.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Sr(18,null,null,0),c.stateNode=a,c.return=s,s.child=c,ur=s,cr=null,!0):!1;default:return!1}}function Vf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function zf(s){if(Ut){var a=cr;if(a){var c=a;if(!U0(s,a)){if(Vf(s))throw Error(t(418));a=ps(c.nextSibling);var v=ur;a&&U0(s,a)?q0(v,c):(s.flags=s.flags&-4097|2,Ut=!1,ur=s)}}else{if(Vf(s))throw Error(t(418));s.flags=s.flags&-4097|2,Ut=!1,ur=s}}}function V0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;ur=s}function Mc(s){if(s!==ur)return!1;if(!Ut)return V0(s),Ut=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Of(s.type,s.memoizedProps)),a&&(a=cr)){if(Vf(s))throw z0(),Error(t(418));for(;a;)q0(s,a),a=ps(a.nextSibling)}if(V0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(a===0){cr=ps(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}s=s.nextSibling}cr=null}}else cr=ur?ps(s.stateNode.nextSibling):null;return!0}function z0(){for(var s=cr;s;)s=ps(s.nextSibling)}function xa(){cr=ur=null,Ut=!1}function Hf(s){Ur===null?Ur=[s]:Ur.push(s)}var gT=S.ReactCurrentBatchConfig;function Vl(s,a,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var v=c.stateNode}if(!v)throw Error(t(147,s));var k=v,j=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===j?a.ref:(a=function(z){var X=k.refs;z===null?delete X[j]:X[j]=z},a._stringRef=j,a)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function qc(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function H0(s){var a=s._init;return a(s._payload)}function W0(s){function a(he,oe){if(s){var de=he.deletions;de===null?(he.deletions=[oe],he.flags|=16):de.push(oe)}}function c(he,oe){if(!s)return null;for(;oe!==null;)a(he,oe),oe=oe.sibling;return null}function v(he,oe){for(he=new Map;oe!==null;)oe.key!==null?he.set(oe.key,oe):he.set(oe.index,oe),oe=oe.sibling;return he}function k(he,oe){return he=xs(he,oe),he.index=0,he.sibling=null,he}function j(he,oe,de){return he.index=de,s?(de=he.alternate,de!==null?(de=de.index,de<oe?(he.flags|=2,oe):de):(he.flags|=2,oe)):(he.flags|=1048576,oe)}function z(he){return s&&he.alternate===null&&(he.flags|=2),he}function X(he,oe,de,Ie){return oe===null||oe.tag!==6?(oe=Lp(de,he.mode,Ie),oe.return=he,oe):(oe=k(oe,de),oe.return=he,oe)}function se(he,oe,de,Ie){var We=de.type;return We===R?be(he,oe,de.props.children,Ie,de.key):oe!==null&&(oe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===re&&H0(We)===oe.type)?(Ie=k(oe,de.props),Ie.ref=Vl(he,oe,de),Ie.return=he,Ie):(Ie=ch(de.type,de.key,de.props,null,he.mode,Ie),Ie.ref=Vl(he,oe,de),Ie.return=he,Ie)}function pe(he,oe,de,Ie){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==de.containerInfo||oe.stateNode.implementation!==de.implementation?(oe=Fp(de,he.mode,Ie),oe.return=he,oe):(oe=k(oe,de.children||[]),oe.return=he,oe)}function be(he,oe,de,Ie,We){return oe===null||oe.tag!==7?(oe=Do(de,he.mode,Ie,We),oe.return=he,oe):(oe=k(oe,de),oe.return=he,oe)}function xe(he,oe,de){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Lp(""+oe,he.mode,de),oe.return=he,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return de=ch(oe.type,oe.key,oe.props,null,he.mode,de),de.ref=Vl(he,null,oe),de.return=he,de;case M:return oe=Fp(oe,he.mode,de),oe.return=he,oe;case re:var Ie=oe._init;return xe(he,Ie(oe._payload),de)}if(Ee(oe)||G(oe))return oe=Do(oe,he.mode,de,null),oe.return=he,oe;qc(he,oe)}return null}function Ae(he,oe,de,Ie){var We=oe!==null?oe.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return We!==null?null:X(he,oe,""+de,Ie);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case O:return de.key===We?se(he,oe,de,Ie):null;case M:return de.key===We?pe(he,oe,de,Ie):null;case re:return We=de._init,Ae(he,oe,We(de._payload),Ie)}if(Ee(de)||G(de))return We!==null?null:be(he,oe,de,Ie,null);qc(he,de)}return null}function Oe(he,oe,de,Ie,We){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return he=he.get(de)||null,X(oe,he,""+Ie,We);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case O:return he=he.get(Ie.key===null?de:Ie.key)||null,se(oe,he,Ie,We);case M:return he=he.get(Ie.key===null?de:Ie.key)||null,pe(oe,he,Ie,We);case re:var Ye=Ie._init;return Oe(he,oe,de,Ye(Ie._payload),We)}if(Ee(Ie)||G(Ie))return he=he.get(de)||null,be(oe,he,Ie,We,null);qc(oe,Ie)}return null}function Ve(he,oe,de,Ie){for(var We=null,Ye=null,Xe=oe,rt=oe=0,yn=null;Xe!==null&&rt<de.length;rt++){Xe.index>rt?(yn=Xe,Xe=null):yn=Xe.sibling;var At=Ae(he,Xe,de[rt],Ie);if(At===null){Xe===null&&(Xe=yn);break}s&&Xe&&At.alternate===null&&a(he,Xe),oe=j(At,oe,rt),Ye===null?We=At:Ye.sibling=At,Ye=At,Xe=yn}if(rt===de.length)return c(he,Xe),Ut&&Eo(he,rt),We;if(Xe===null){for(;rt<de.length;rt++)Xe=xe(he,de[rt],Ie),Xe!==null&&(oe=j(Xe,oe,rt),Ye===null?We=Xe:Ye.sibling=Xe,Ye=Xe);return Ut&&Eo(he,rt),We}for(Xe=v(he,Xe);rt<de.length;rt++)yn=Oe(Xe,he,rt,de[rt],Ie),yn!==null&&(s&&yn.alternate!==null&&Xe.delete(yn.key===null?rt:yn.key),oe=j(yn,oe,rt),Ye===null?We=yn:Ye.sibling=yn,Ye=yn);return s&&Xe.forEach(function(Ss){return a(he,Ss)}),Ut&&Eo(he,rt),We}function He(he,oe,de,Ie){var We=G(de);if(typeof We!="function")throw Error(t(150));if(de=We.call(de),de==null)throw Error(t(151));for(var Ye=We=null,Xe=oe,rt=oe=0,yn=null,At=de.next();Xe!==null&&!At.done;rt++,At=de.next()){Xe.index>rt?(yn=Xe,Xe=null):yn=Xe.sibling;var Ss=Ae(he,Xe,At.value,Ie);if(Ss===null){Xe===null&&(Xe=yn);break}s&&Xe&&Ss.alternate===null&&a(he,Xe),oe=j(Ss,oe,rt),Ye===null?We=Ss:Ye.sibling=Ss,Ye=Ss,Xe=yn}if(At.done)return c(he,Xe),Ut&&Eo(he,rt),We;if(Xe===null){for(;!At.done;rt++,At=de.next())At=xe(he,At.value,Ie),At!==null&&(oe=j(At,oe,rt),Ye===null?We=At:Ye.sibling=At,Ye=At);return Ut&&Eo(he,rt),We}for(Xe=v(he,Xe);!At.done;rt++,At=de.next())At=Oe(Xe,he,rt,At.value,Ie),At!==null&&(s&&At.alternate!==null&&Xe.delete(At.key===null?rt:At.key),oe=j(At,oe,rt),Ye===null?We=At:Ye.sibling=At,Ye=At);return s&&Xe.forEach(function(JT){return a(he,JT)}),Ut&&Eo(he,rt),We}function Yt(he,oe,de,Ie){if(typeof de=="object"&&de!==null&&de.type===R&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case O:e:{for(var We=de.key,Ye=oe;Ye!==null;){if(Ye.key===We){if(We=de.type,We===R){if(Ye.tag===7){c(he,Ye.sibling),oe=k(Ye,de.props.children),oe.return=he,he=oe;break e}}else if(Ye.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===re&&H0(We)===Ye.type){c(he,Ye.sibling),oe=k(Ye,de.props),oe.ref=Vl(he,Ye,de),oe.return=he,he=oe;break e}c(he,Ye);break}else a(he,Ye);Ye=Ye.sibling}de.type===R?(oe=Do(de.props.children,he.mode,Ie,de.key),oe.return=he,he=oe):(Ie=ch(de.type,de.key,de.props,null,he.mode,Ie),Ie.ref=Vl(he,oe,de),Ie.return=he,he=Ie)}return z(he);case M:e:{for(Ye=de.key;oe!==null;){if(oe.key===Ye)if(oe.tag===4&&oe.stateNode.containerInfo===de.containerInfo&&oe.stateNode.implementation===de.implementation){c(he,oe.sibling),oe=k(oe,de.children||[]),oe.return=he,he=oe;break e}else{c(he,oe);break}else a(he,oe);oe=oe.sibling}oe=Fp(de,he.mode,Ie),oe.return=he,he=oe}return z(he);case re:return Ye=de._init,Yt(he,oe,Ye(de._payload),Ie)}if(Ee(de))return Ve(he,oe,de,Ie);if(G(de))return He(he,oe,de,Ie);qc(he,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,oe!==null&&oe.tag===6?(c(he,oe.sibling),oe=k(oe,de),oe.return=he,he=oe):(c(he,oe),oe=Lp(de,he.mode,Ie),oe.return=he,he=oe),z(he)):c(he,oe)}return Yt}var Sa=W0(!0),$0=W0(!1),Uc=ms(null),Vc=null,Ta=null,Wf=null;function $f(){Wf=Ta=Vc=null}function Gf(s){var a=Uc.current;Lt(Uc),s._currentValue=a}function Kf(s,a,c){for(;s!==null;){var v=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,v!==null&&(v.childLanes|=a)):v!==null&&(v.childLanes&a)!==a&&(v.childLanes|=a),s===c)break;s=s.return}}function Ia(s,a){Vc=s,Wf=Ta=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Xn=!0),s.firstContext=null)}function Ar(s){var a=s._currentValue;if(Wf!==s)if(s={context:s,memoizedValue:a,next:null},Ta===null){if(Vc===null)throw Error(t(308));Ta=s,Vc.dependencies={lanes:0,firstContext:s}}else Ta=Ta.next=s;return a}var Co=null;function Jf(s){Co===null?Co=[s]:Co.push(s)}function G0(s,a,c,v){var k=a.interleaved;return k===null?(c.next=c,Jf(a)):(c.next=k.next,k.next=c),a.interleaved=c,Bi(s,v)}function Bi(s,a){s.lanes|=a;var c=s.alternate;for(c!==null&&(c.lanes|=a),c=s,s=s.return;s!==null;)s.childLanes|=a,c=s.alternate,c!==null&&(c.childLanes|=a),c=s,s=s.return;return c.tag===3?c.stateNode:null}var vs=!1;function Qf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Mi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function _s(s,a,c){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Ct&2)!==0){var k=v.pending;return k===null?a.next=a:(a.next=k.next,k.next=a),v.pending=a,Bi(s,c)}return k=v.interleaved,k===null?(a.next=a,Jf(v)):(a.next=k.next,k.next=a),v.interleaved=a,Bi(s,c)}function zc(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var v=a.lanes;v&=s.pendingLanes,c|=v,a.lanes=c,ls(s,c)}}function J0(s,a){var c=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,c===v)){var k=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var z={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};j===null?k=j=z:j=j.next=z,c=c.next}while(c!==null);j===null?k=j=a:j=j.next=a}else k=j=a;c={baseState:v.baseState,firstBaseUpdate:k,lastBaseUpdate:j,shared:v.shared,effects:v.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}function Hc(s,a,c,v){var k=s.updateQueue;vs=!1;var j=k.firstBaseUpdate,z=k.lastBaseUpdate,X=k.shared.pending;if(X!==null){k.shared.pending=null;var se=X,pe=se.next;se.next=null,z===null?j=pe:z.next=pe,z=se;var be=s.alternate;be!==null&&(be=be.updateQueue,X=be.lastBaseUpdate,X!==z&&(X===null?be.firstBaseUpdate=pe:X.next=pe,be.lastBaseUpdate=se))}if(j!==null){var xe=k.baseState;z=0,be=pe=se=null,X=j;do{var Ae=X.lane,Oe=X.eventTime;if((v&Ae)===Ae){be!==null&&(be=be.next={eventTime:Oe,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var Ve=s,He=X;switch(Ae=a,Oe=c,He.tag){case 1:if(Ve=He.payload,typeof Ve=="function"){xe=Ve.call(Oe,xe,Ae);break e}xe=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=He.payload,Ae=typeof Ve=="function"?Ve.call(Oe,xe,Ae):Ve,Ae==null)break e;xe=W({},xe,Ae);break e;case 2:vs=!0}}X.callback!==null&&X.lane!==0&&(s.flags|=64,Ae=k.effects,Ae===null?k.effects=[X]:Ae.push(X))}else Oe={eventTime:Oe,lane:Ae,tag:X.tag,payload:X.payload,callback:X.callback,next:null},be===null?(pe=be=Oe,se=xe):be=be.next=Oe,z|=Ae;if(X=X.next,X===null){if(X=k.shared.pending,X===null)break;Ae=X,X=Ae.next,Ae.next=null,k.lastBaseUpdate=Ae,k.shared.pending=null}}while(!0);if(be===null&&(se=xe),k.baseState=se,k.firstBaseUpdate=pe,k.lastBaseUpdate=be,a=k.shared.interleaved,a!==null){k=a;do z|=k.lane,k=k.next;while(k!==a)}else j===null&&(k.shared.lanes=0);xo|=z,s.lanes=z,s.memoizedState=xe}}function Q0(s,a,c){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var v=s[a],k=v.callback;if(k!==null){if(v.callback=null,v=c,typeof k!="function")throw Error(t(191,k));k.call(v)}}}var zl={},ai=ms(zl),Hl=ms(zl),Wl=ms(zl);function Ao(s){if(s===zl)throw Error(t(174));return s}function Yf(s,a){switch(Pt(Wl,a),Pt(Hl,s),Pt(ai,zl),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:nt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=nt(a,s)}Lt(ai),Pt(ai,a)}function Da(){Lt(ai),Lt(Hl),Lt(Wl)}function Y0(s){Ao(Wl.current);var a=Ao(ai.current),c=nt(a,s.type);a!==c&&(Pt(Hl,s),Pt(ai,c))}function Xf(s){Hl.current===s&&(Lt(ai),Lt(Hl))}var zt=ms(0);function Wc(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zf=[];function ep(){for(var s=0;s<Zf.length;s++)Zf[s]._workInProgressVersionPrimary=null;Zf.length=0}var $c=S.ReactCurrentDispatcher,tp=S.ReactCurrentBatchConfig,bo=0,Ht=null,an=null,mn=null,Gc=!1,$l=!1,Gl=0,yT=0;function kn(){throw Error(t(321))}function np(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!qr(s[c],a[c]))return!1;return!0}function rp(s,a,c,v,k,j){if(bo=j,Ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$c.current=s===null||s.memoizedState===null?ET:CT,s=c(v,k),$l){j=0;do{if($l=!1,Gl=0,25<=j)throw Error(t(301));j+=1,mn=an=null,a.updateQueue=null,$c.current=AT,s=c(v,k)}while($l)}if($c.current=Qc,a=an!==null&&an.next!==null,bo=0,mn=an=Ht=null,Gc=!1,a)throw Error(t(300));return s}function ip(){var s=Gl!==0;return Gl=0,s}function li(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Ht.memoizedState=mn=s:mn=mn.next=s,mn}function br(){if(an===null){var s=Ht.alternate;s=s!==null?s.memoizedState:null}else s=an.next;var a=mn===null?Ht.memoizedState:mn.next;if(a!==null)mn=a,an=s;else{if(s===null)throw Error(t(310));an=s,s={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},mn===null?Ht.memoizedState=mn=s:mn=mn.next=s}return mn}function Kl(s,a){return typeof a=="function"?a(s):a}function sp(s){var a=br(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var v=an,k=v.baseQueue,j=c.pending;if(j!==null){if(k!==null){var z=k.next;k.next=j.next,j.next=z}v.baseQueue=k=j,c.pending=null}if(k!==null){j=k.next,v=v.baseState;var X=z=null,se=null,pe=j;do{var be=pe.lane;if((bo&be)===be)se!==null&&(se=se.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),v=pe.hasEagerState?pe.eagerState:s(v,pe.action);else{var xe={lane:be,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};se===null?(X=se=xe,z=v):se=se.next=xe,Ht.lanes|=be,xo|=be}pe=pe.next}while(pe!==null&&pe!==j);se===null?z=v:se.next=X,qr(v,a.memoizedState)||(Xn=!0),a.memoizedState=v,a.baseState=z,a.baseQueue=se,c.lastRenderedState=v}if(s=c.interleaved,s!==null){k=s;do j=k.lane,Ht.lanes|=j,xo|=j,k=k.next;while(k!==s)}else k===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function op(s){var a=br(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var v=c.dispatch,k=c.pending,j=a.memoizedState;if(k!==null){c.pending=null;var z=k=k.next;do j=s(j,z.action),z=z.next;while(z!==k);qr(j,a.memoizedState)||(Xn=!0),a.memoizedState=j,a.baseQueue===null&&(a.baseState=j),c.lastRenderedState=j}return[j,v]}function X0(){}function Z0(s,a){var c=Ht,v=br(),k=a(),j=!qr(v.memoizedState,k);if(j&&(v.memoizedState=k,Xn=!0),v=v.queue,ap(n2.bind(null,c,v,s),[s]),v.getSnapshot!==a||j||mn!==null&&mn.memoizedState.tag&1){if(c.flags|=2048,Jl(9,t2.bind(null,c,v,k,a),void 0,null),gn===null)throw Error(t(349));(bo&30)!==0||e2(c,a,k)}return k}function e2(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function t2(s,a,c,v){a.value=c,a.getSnapshot=v,r2(a)&&i2(s)}function n2(s,a,c){return c(function(){r2(a)&&i2(s)})}function r2(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!qr(s,c)}catch{return!0}}function i2(s){var a=Bi(s,1);a!==null&&Wr(a,s,1,-1)}function s2(s){var a=li();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:s},a.queue=s,s=s.dispatch=wT.bind(null,Ht,s),[a.memoizedState,s]}function Jl(s,a,c,v){return s={tag:s,create:a,destroy:c,deps:v,next:null},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.lastEffect=s.next=s):(c=a.lastEffect,c===null?a.lastEffect=s.next=s:(v=c.next,c.next=s,s.next=v,a.lastEffect=s)),s}function o2(){return br().memoizedState}function Kc(s,a,c,v){var k=li();Ht.flags|=s,k.memoizedState=Jl(1|a,c,void 0,v===void 0?null:v)}function Jc(s,a,c,v){var k=br();v=v===void 0?null:v;var j=void 0;if(an!==null){var z=an.memoizedState;if(j=z.destroy,v!==null&&np(v,z.deps)){k.memoizedState=Jl(a,c,j,v);return}}Ht.flags|=s,k.memoizedState=Jl(1|a,c,j,v)}function a2(s,a){return Kc(8390656,8,s,a)}function ap(s,a){return Jc(2048,8,s,a)}function l2(s,a){return Jc(4,2,s,a)}function u2(s,a){return Jc(4,4,s,a)}function c2(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function h2(s,a,c){return c=c!=null?c.concat([s]):null,Jc(4,4,c2.bind(null,a,s),c)}function lp(){}function d2(s,a){var c=br();a=a===void 0?null:a;var v=c.memoizedState;return v!==null&&a!==null&&np(a,v[1])?v[0]:(c.memoizedState=[s,a],s)}function f2(s,a){var c=br();a=a===void 0?null:a;var v=c.memoizedState;return v!==null&&a!==null&&np(a,v[1])?v[0]:(s=s(),c.memoizedState=[s,a],s)}function p2(s,a,c){return(bo&21)===0?(s.baseState&&(s.baseState=!1,Xn=!0),s.memoizedState=c):(qr(c,a)||(c=fo(),Ht.lanes|=c,xo|=c,s.baseState=!0),a)}function vT(s,a){var c=yt;yt=c!==0&&4>c?c:4,s(!0);var v=tp.transition;tp.transition={};try{s(!1),a()}finally{yt=c,tp.transition=v}}function m2(){return br().memoizedState}function _T(s,a,c){var v=As(s);if(c={lane:v,action:c,hasEagerState:!1,eagerState:null,next:null},g2(s))y2(a,c);else if(c=G0(s,a,c,v),c!==null){var k=Un();Wr(c,s,v,k),v2(c,a,v)}}function wT(s,a,c){var v=As(s),k={lane:v,action:c,hasEagerState:!1,eagerState:null,next:null};if(g2(s))y2(a,k);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=a.lastRenderedReducer,j!==null))try{var z=a.lastRenderedState,X=j(z,c);if(k.hasEagerState=!0,k.eagerState=X,qr(X,z)){var se=a.interleaved;se===null?(k.next=k,Jf(a)):(k.next=se.next,se.next=k),a.interleaved=k;return}}catch{}finally{}c=G0(s,a,k,v),c!==null&&(k=Un(),Wr(c,s,v,k),v2(c,a,v))}}function g2(s){var a=s.alternate;return s===Ht||a!==null&&a===Ht}function y2(s,a){$l=Gc=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function v2(s,a,c){if((c&4194240)!==0){var v=a.lanes;v&=s.pendingLanes,c|=v,a.lanes=c,ls(s,c)}}var Qc={readContext:Ar,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},ET={readContext:Ar,useCallback:function(s,a){return li().memoizedState=[s,a===void 0?null:a],s},useContext:Ar,useEffect:a2,useImperativeHandle:function(s,a,c){return c=c!=null?c.concat([s]):null,Kc(4194308,4,c2.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Kc(4194308,4,s,a)},useInsertionEffect:function(s,a){return Kc(4,2,s,a)},useMemo:function(s,a){var c=li();return a=a===void 0?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var v=li();return a=c!==void 0?c(a):a,v.memoizedState=v.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},v.queue=s,s=s.dispatch=_T.bind(null,Ht,s),[v.memoizedState,s]},useRef:function(s){var a=li();return s={current:s},a.memoizedState=s},useState:s2,useDebugValue:lp,useDeferredValue:function(s){return li().memoizedState=s},useTransition:function(){var s=s2(!1),a=s[0];return s=vT.bind(null,s[1]),li().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var v=Ht,k=li();if(Ut){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),gn===null)throw Error(t(349));(bo&30)!==0||e2(v,a,c)}k.memoizedState=c;var j={value:c,getSnapshot:a};return k.queue=j,a2(n2.bind(null,v,j,s),[s]),v.flags|=2048,Jl(9,t2.bind(null,v,j,c,a),void 0,null),c},useId:function(){var s=li(),a=gn.identifierPrefix;if(Ut){var c=ji,v=Fi;c=(v&~(1<<32-Bn(v)-1)).toString(32)+c,a=":"+a+"R"+c,c=Gl++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=yT++,a=":"+a+"r"+c.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},CT={readContext:Ar,useCallback:d2,useContext:Ar,useEffect:ap,useImperativeHandle:h2,useInsertionEffect:l2,useLayoutEffect:u2,useMemo:f2,useReducer:sp,useRef:o2,useState:function(){return sp(Kl)},useDebugValue:lp,useDeferredValue:function(s){var a=br();return p2(a,an.memoizedState,s)},useTransition:function(){var s=sp(Kl)[0],a=br().memoizedState;return[s,a]},useMutableSource:X0,useSyncExternalStore:Z0,useId:m2,unstable_isNewReconciler:!1},AT={readContext:Ar,useCallback:d2,useContext:Ar,useEffect:ap,useImperativeHandle:h2,useInsertionEffect:l2,useLayoutEffect:u2,useMemo:f2,useReducer:op,useRef:o2,useState:function(){return op(Kl)},useDebugValue:lp,useDeferredValue:function(s){var a=br();return an===null?a.memoizedState=s:p2(a,an.memoizedState,s)},useTransition:function(){var s=op(Kl)[0],a=br().memoizedState;return[s,a]},useMutableSource:X0,useSyncExternalStore:Z0,useId:m2,unstable_isNewReconciler:!1};function Vr(s,a){if(s&&s.defaultProps){a=W({},a),s=s.defaultProps;for(var c in s)a[c]===void 0&&(a[c]=s[c]);return a}return a}function up(s,a,c,v){a=s.memoizedState,c=c(v,a),c=c==null?a:W({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Yc={isMounted:function(s){return(s=s._reactInternals)?Nr(s)===s:!1},enqueueSetState:function(s,a,c){s=s._reactInternals;var v=Un(),k=As(s),j=Mi(v,k);j.payload=a,c!=null&&(j.callback=c),a=_s(s,j,k),a!==null&&(Wr(a,s,k,v),zc(a,s,k))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var v=Un(),k=As(s),j=Mi(v,k);j.tag=1,j.payload=a,c!=null&&(j.callback=c),a=_s(s,j,k),a!==null&&(Wr(a,s,k,v),zc(a,s,k))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Un(),v=As(s),k=Mi(c,v);k.tag=2,a!=null&&(k.callback=a),a=_s(s,k,v),a!==null&&(Wr(a,s,v,c),zc(a,s,v))}};function _2(s,a,c,v,k,j,z){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,j,z):a.prototype&&a.prototype.isPureReactComponent?!Ll(c,v)||!Ll(k,j):!0}function w2(s,a,c){var v=!1,k=gs,j=a.contextType;return typeof j=="object"&&j!==null?j=Ar(j):(k=Yn(a)?_o:Dn.current,v=a.contextTypes,j=(v=v!=null)?Ca(s,k):gs),a=new a(c,j),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Yc,s.stateNode=a,a._reactInternals=s,v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=k,s.__reactInternalMemoizedMaskedChildContext=j),a}function E2(s,a,c,v){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,v),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,v),a.state!==s&&Yc.enqueueReplaceState(a,a.state,null)}function cp(s,a,c,v){var k=s.stateNode;k.props=c,k.state=s.memoizedState,k.refs={},Qf(s);var j=a.contextType;typeof j=="object"&&j!==null?k.context=Ar(j):(j=Yn(a)?_o:Dn.current,k.context=Ca(s,j)),k.state=s.memoizedState,j=a.getDerivedStateFromProps,typeof j=="function"&&(up(s,a,j,c),k.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(a=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),a!==k.state&&Yc.enqueueReplaceState(k,k.state,null),Hc(s,c,k,v),k.state=s.memoizedState),typeof k.componentDidMount=="function"&&(s.flags|=4194308)}function ka(s,a){try{var c="",v=a;do c+=ee(v),v=v.return;while(v);var k=c}catch(j){k=`
Error generating stack: `+j.message+`
`+j.stack}return{value:s,source:a,stack:k,digest:null}}function hp(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}function dp(s,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var bT=typeof WeakMap=="function"?WeakMap:Map;function C2(s,a,c){c=Mi(-1,c),c.tag=3,c.payload={element:null};var v=a.value;return c.callback=function(){ih||(ih=!0,Tp=v),dp(s,a)},c}function A2(s,a,c){c=Mi(-1,c),c.tag=3;var v=s.type.getDerivedStateFromError;if(typeof v=="function"){var k=a.value;c.payload=function(){return v(k)},c.callback=function(){dp(s,a)}}var j=s.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(c.callback=function(){dp(s,a),typeof v!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var z=a.stack;this.componentDidCatch(a.value,{componentStack:z!==null?z:""})}),c}function b2(s,a,c){var v=s.pingCache;if(v===null){v=s.pingCache=new bT;var k=new Set;v.set(a,k)}else k=v.get(a),k===void 0&&(k=new Set,v.set(a,k));k.has(c)||(k.add(c),s=BT.bind(null,s,a,c),a.then(s,s))}function x2(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function S2(s,a,c,v,k){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Mi(-1,1),a.tag=2,_s(c,a,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=k,s)}var xT=S.ReactCurrentOwner,Xn=!1;function qn(s,a,c,v){a.child=s===null?$0(a,null,c,v):Sa(a,s.child,c,v)}function T2(s,a,c,v,k){c=c.render;var j=a.ref;return Ia(a,k),v=rp(s,a,c,v,j,k),c=ip(),s!==null&&!Xn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~k,qi(s,a,k)):(Ut&&c&&qf(a),a.flags|=1,qn(s,a,v,k),a.child)}function I2(s,a,c,v,k){if(s===null){var j=c.type;return typeof j=="function"&&!Op(j)&&j.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=j,D2(s,a,j,v,k)):(s=ch(c.type,null,v,a,a.mode,k),s.ref=a.ref,s.return=a,a.child=s)}if(j=s.child,(s.lanes&k)===0){var z=j.memoizedProps;if(c=c.compare,c=c!==null?c:Ll,c(z,v)&&s.ref===a.ref)return qi(s,a,k)}return a.flags|=1,s=xs(j,v),s.ref=a.ref,s.return=a,a.child=s}function D2(s,a,c,v,k){if(s!==null){var j=s.memoizedProps;if(Ll(j,v)&&s.ref===a.ref)if(Xn=!1,a.pendingProps=v=j,(s.lanes&k)!==0)(s.flags&131072)!==0&&(Xn=!0);else return a.lanes=s.lanes,qi(s,a,k)}return fp(s,a,c,v,k)}function k2(s,a,c){var v=a.pendingProps,k=v.children,j=s!==null?s.memoizedState:null;if(v.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Pa,hr),hr|=c;else{if((c&1073741824)===0)return s=j!==null?j.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Pt(Pa,hr),hr|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=j!==null?j.baseLanes:c,Pt(Pa,hr),hr|=v}else j!==null?(v=j.baseLanes|c,a.memoizedState=null):v=c,Pt(Pa,hr),hr|=v;return qn(s,a,k,c),a.child}function R2(s,a){var c=a.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function fp(s,a,c,v,k){var j=Yn(c)?_o:Dn.current;return j=Ca(a,j),Ia(a,k),c=rp(s,a,c,v,j,k),v=ip(),s!==null&&!Xn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~k,qi(s,a,k)):(Ut&&v&&qf(a),a.flags|=1,qn(s,a,c,k),a.child)}function P2(s,a,c,v,k){if(Yn(c)){var j=!0;Lc(a)}else j=!1;if(Ia(a,k),a.stateNode===null)Zc(s,a),w2(a,c,v),cp(a,c,v,k),v=!0;else if(s===null){var z=a.stateNode,X=a.memoizedProps;z.props=X;var se=z.context,pe=c.contextType;typeof pe=="object"&&pe!==null?pe=Ar(pe):(pe=Yn(c)?_o:Dn.current,pe=Ca(a,pe));var be=c.getDerivedStateFromProps,xe=typeof be=="function"||typeof z.getSnapshotBeforeUpdate=="function";xe||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(X!==v||se!==pe)&&E2(a,z,v,pe),vs=!1;var Ae=a.memoizedState;z.state=Ae,Hc(a,v,z,k),se=a.memoizedState,X!==v||Ae!==se||Qn.current||vs?(typeof be=="function"&&(up(a,c,be,v),se=a.memoizedState),(X=vs||_2(a,c,X,v,Ae,se,pe))?(xe||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(a.flags|=4194308)):(typeof z.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=v,a.memoizedState=se),z.props=v,z.state=se,z.context=pe,v=X):(typeof z.componentDidMount=="function"&&(a.flags|=4194308),v=!1)}else{z=a.stateNode,K0(s,a),X=a.memoizedProps,pe=a.type===a.elementType?X:Vr(a.type,X),z.props=pe,xe=a.pendingProps,Ae=z.context,se=c.contextType,typeof se=="object"&&se!==null?se=Ar(se):(se=Yn(c)?_o:Dn.current,se=Ca(a,se));var Oe=c.getDerivedStateFromProps;(be=typeof Oe=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(X!==xe||Ae!==se)&&E2(a,z,v,se),vs=!1,Ae=a.memoizedState,z.state=Ae,Hc(a,v,z,k);var Ve=a.memoizedState;X!==xe||Ae!==Ve||Qn.current||vs?(typeof Oe=="function"&&(up(a,c,Oe,v),Ve=a.memoizedState),(pe=vs||_2(a,c,pe,v,Ae,Ve,se)||!1)?(be||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(v,Ve,se),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(v,Ve,se)),typeof z.componentDidUpdate=="function"&&(a.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof z.componentDidUpdate!="function"||X===s.memoizedProps&&Ae===s.memoizedState||(a.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||X===s.memoizedProps&&Ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=v,a.memoizedState=Ve),z.props=v,z.state=Ve,z.context=se,v=pe):(typeof z.componentDidUpdate!="function"||X===s.memoizedProps&&Ae===s.memoizedState||(a.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||X===s.memoizedProps&&Ae===s.memoizedState||(a.flags|=1024),v=!1)}return pp(s,a,c,v,j,k)}function pp(s,a,c,v,k,j){R2(s,a);var z=(a.flags&128)!==0;if(!v&&!z)return k&&j0(a,c,!1),qi(s,a,j);v=a.stateNode,xT.current=a;var X=z&&typeof c.getDerivedStateFromError!="function"?null:v.render();return a.flags|=1,s!==null&&z?(a.child=Sa(a,s.child,null,j),a.child=Sa(a,null,X,j)):qn(s,a,X,j),a.memoizedState=v.state,k&&j0(a,c,!0),a.child}function N2(s){var a=s.stateNode;a.pendingContext?L0(s,a.pendingContext,a.pendingContext!==a.context):a.context&&L0(s,a.context,!1),Yf(s,a.containerInfo)}function O2(s,a,c,v,k){return xa(),Hf(k),a.flags|=256,qn(s,a,c,v),a.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function gp(s){return{baseLanes:s,cachePool:null,transitions:null}}function L2(s,a,c){var v=a.pendingProps,k=zt.current,j=!1,z=(a.flags&128)!==0,X;if((X=z)||(X=s!==null&&s.memoizedState===null?!1:(k&2)!==0),X?(j=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(k|=1),Pt(zt,k&1),s===null)return zf(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(z=v.children,s=v.fallback,j?(v=a.mode,j=a.child,z={mode:"hidden",children:z},(v&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=z):j=hh(z,v,0,null),s=Do(s,v,c,null),j.return=a,s.return=a,j.sibling=s,a.child=j,a.child.memoizedState=gp(c),a.memoizedState=mp,s):yp(a,z));if(k=s.memoizedState,k!==null&&(X=k.dehydrated,X!==null))return ST(s,a,z,v,X,k,c);if(j){j=v.fallback,z=a.mode,k=s.child,X=k.sibling;var se={mode:"hidden",children:v.children};return(z&1)===0&&a.child!==k?(v=a.child,v.childLanes=0,v.pendingProps=se,a.deletions=null):(v=xs(k,se),v.subtreeFlags=k.subtreeFlags&14680064),X!==null?j=xs(X,j):(j=Do(j,z,c,null),j.flags|=2),j.return=a,v.return=a,v.sibling=j,a.child=v,v=j,j=a.child,z=s.child.memoizedState,z=z===null?gp(c):{baseLanes:z.baseLanes|c,cachePool:null,transitions:z.transitions},j.memoizedState=z,j.childLanes=s.childLanes&~c,a.memoizedState=mp,v}return j=s.child,s=j.sibling,v=xs(j,{mode:"visible",children:v.children}),(a.mode&1)===0&&(v.lanes=c),v.return=a,v.sibling=null,s!==null&&(c=a.deletions,c===null?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=v,a.memoizedState=null,v}function yp(s,a){return a=hh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Xc(s,a,c,v){return v!==null&&Hf(v),Sa(a,s.child,null,c),s=yp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function ST(s,a,c,v,k,j,z){if(c)return a.flags&256?(a.flags&=-257,v=hp(Error(t(422))),Xc(s,a,z,v)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(j=v.fallback,k=a.mode,v=hh({mode:"visible",children:v.children},k,0,null),j=Do(j,k,z,null),j.flags|=2,v.return=a,j.return=a,v.sibling=j,a.child=v,(a.mode&1)!==0&&Sa(a,s.child,null,z),a.child.memoizedState=gp(z),a.memoizedState=mp,j);if((a.mode&1)===0)return Xc(s,a,z,null);if(k.data==="$!"){if(v=k.nextSibling&&k.nextSibling.dataset,v)var X=v.dgst;return v=X,j=Error(t(419)),v=hp(j,v,void 0),Xc(s,a,z,v)}if(X=(z&s.childLanes)!==0,Xn||X){if(v=gn,v!==null){switch(z&-z){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(v.suspendedLanes|z))!==0?0:k,k!==0&&k!==j.retryLane&&(j.retryLane=k,Bi(s,k),Wr(v,s,k,-1))}return Np(),v=hp(Error(t(421))),Xc(s,a,z,v)}return k.data==="$?"?(a.flags|=128,a.child=s.child,a=MT.bind(null,s),k._reactRetry=a,null):(s=j.treeContext,cr=ps(k.nextSibling),ur=a,Ut=!0,Ur=null,s!==null&&(Er[Cr++]=Fi,Er[Cr++]=ji,Er[Cr++]=wo,Fi=s.id,ji=s.overflow,wo=a),a=yp(a,v.children),a.flags|=4096,a)}function F2(s,a,c){s.lanes|=a;var v=s.alternate;v!==null&&(v.lanes|=a),Kf(s.return,a,c)}function vp(s,a,c,v,k){var j=s.memoizedState;j===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:v,tail:c,tailMode:k}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=v,j.tail=c,j.tailMode=k)}function j2(s,a,c){var v=a.pendingProps,k=v.revealOrder,j=v.tail;if(qn(s,a,v.children,c),v=zt.current,(v&2)!==0)v=v&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&F2(s,c,a);else if(s.tag===19)F2(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}if(Pt(zt,v),(a.mode&1)===0)a.memoizedState=null;else switch(k){case"forwards":for(c=a.child,k=null;c!==null;)s=c.alternate,s!==null&&Wc(s)===null&&(k=c),c=c.sibling;c=k,c===null?(k=a.child,a.child=null):(k=c.sibling,c.sibling=null),vp(a,!1,k,c,j);break;case"backwards":for(c=null,k=a.child,a.child=null;k!==null;){if(s=k.alternate,s!==null&&Wc(s)===null){a.child=k;break}s=k.sibling,k.sibling=c,c=k,k=s}vp(a,!0,c,null,j);break;case"together":vp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Zc(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function qi(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),xo|=a.lanes,(c&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,c=xs(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=xs(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function TT(s,a,c){switch(a.tag){case 3:N2(a),xa();break;case 5:Y0(a);break;case 1:Yn(a.type)&&Lc(a);break;case 4:Yf(a,a.stateNode.containerInfo);break;case 10:var v=a.type._context,k=a.memoizedProps.value;Pt(Uc,v._currentValue),v._currentValue=k;break;case 13:if(v=a.memoizedState,v!==null)return v.dehydrated!==null?(Pt(zt,zt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?L2(s,a,c):(Pt(zt,zt.current&1),s=qi(s,a,c),s!==null?s.sibling:null);Pt(zt,zt.current&1);break;case 19:if(v=(c&a.childLanes)!==0,(s.flags&128)!==0){if(v)return j2(s,a,c);a.flags|=128}if(k=a.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Pt(zt,zt.current),v)break;return null;case 22:case 23:return a.lanes=0,k2(s,a,c)}return qi(s,a,c)}var B2,_p,M2,q2;B2=function(s,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},_p=function(){},M2=function(s,a,c,v){var k=s.memoizedProps;if(k!==v){s=a.stateNode,Ao(ai.current);var j=null;switch(c){case"input":k=Pe(s,k),v=Pe(s,v),j=[];break;case"select":k=W({},k,{value:void 0}),v=W({},v,{value:void 0}),j=[];break;case"textarea":k=ye(s,k),v=ye(s,v),j=[];break;default:typeof k.onClick!="function"&&typeof v.onClick=="function"&&(s.onclick=Pc)}gl(c,v);var z;c=null;for(pe in k)if(!v.hasOwnProperty(pe)&&k.hasOwnProperty(pe)&&k[pe]!=null)if(pe==="style"){var X=k[pe];for(z in X)X.hasOwnProperty(z)&&(c||(c={}),c[z]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?j||(j=[]):(j=j||[]).push(pe,null));for(pe in v){var se=v[pe];if(X=k!=null?k[pe]:void 0,v.hasOwnProperty(pe)&&se!==X&&(se!=null||X!=null))if(pe==="style")if(X){for(z in X)!X.hasOwnProperty(z)||se&&se.hasOwnProperty(z)||(c||(c={}),c[z]="");for(z in se)se.hasOwnProperty(z)&&X[z]!==se[z]&&(c||(c={}),c[z]=se[z])}else c||(j||(j=[]),j.push(pe,c)),c=se;else pe==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,X=X?X.__html:void 0,se!=null&&X!==se&&(j=j||[]).push(pe,se)):pe==="children"?typeof se!="string"&&typeof se!="number"||(j=j||[]).push(pe,""+se):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(se!=null&&pe==="onScroll"&&Ot("scroll",s),j||X===se||(j=[])):(j=j||[]).push(pe,se))}c&&(j=j||[]).push("style",c);var pe=j;(a.updateQueue=pe)&&(a.flags|=4)}},q2=function(s,a,c,v){c!==v&&(a.flags|=4)};function Ql(s,a){if(!Ut)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Rn(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,v=0;if(a)for(var k=s.child;k!==null;)c|=k.lanes|k.childLanes,v|=k.subtreeFlags&14680064,v|=k.flags&14680064,k.return=s,k=k.sibling;else for(k=s.child;k!==null;)c|=k.lanes|k.childLanes,v|=k.subtreeFlags,v|=k.flags,k.return=s,k=k.sibling;return s.subtreeFlags|=v,s.childLanes=c,a}function IT(s,a,c){var v=a.pendingProps;switch(Uf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(a),null;case 1:return Yn(a.type)&&Oc(),Rn(a),null;case 3:return v=a.stateNode,Da(),Lt(Qn),Lt(Dn),ep(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(s===null||s.child===null)&&(Mc(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ur!==null&&(kp(Ur),Ur=null))),_p(s,a),Rn(a),null;case 5:Xf(a);var k=Ao(Wl.current);if(c=a.type,s!==null&&a.stateNode!=null)M2(s,a,c,v,k),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!v){if(a.stateNode===null)throw Error(t(166));return Rn(a),null}if(s=Ao(ai.current),Mc(a)){v=a.stateNode,c=a.type;var j=a.memoizedProps;switch(v[oi]=a,v[ql]=j,s=(a.mode&1)!==0,c){case"dialog":Ot("cancel",v),Ot("close",v);break;case"iframe":case"object":case"embed":Ot("load",v);break;case"video":case"audio":for(k=0;k<jl.length;k++)Ot(jl[k],v);break;case"source":Ot("error",v);break;case"img":case"image":case"link":Ot("error",v),Ot("load",v);break;case"details":Ot("toggle",v);break;case"input":Ne(v,j),Ot("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!j.multiple},Ot("invalid",v);break;case"textarea":$e(v,j),Ot("invalid",v)}gl(c,j),k=null;for(var z in j)if(j.hasOwnProperty(z)){var X=j[z];z==="children"?typeof X=="string"?v.textContent!==X&&(j.suppressHydrationWarning!==!0&&Rc(v.textContent,X,s),k=["children",X]):typeof X=="number"&&v.textContent!==""+X&&(j.suppressHydrationWarning!==!0&&Rc(v.textContent,X,s),k=["children",""+X]):i.hasOwnProperty(z)&&X!=null&&z==="onScroll"&&Ot("scroll",v)}switch(c){case"input":ge(v),ue(v,j,!0);break;case"textarea":ge(v),ze(v);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(v.onclick=Pc)}v=k,a.updateQueue=v,v!==null&&(a.flags|=4)}else{z=k.nodeType===9?k:k.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ke(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=z.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof v.is=="string"?s=z.createElement(c,{is:v.is}):(s=z.createElement(c),c==="select"&&(z=s,v.multiple?z.multiple=!0:v.size&&(z.size=v.size))):s=z.createElementNS(s,c),s[oi]=a,s[ql]=v,B2(s,a,!1,!1),a.stateNode=s;e:{switch(z=yl(c,v),c){case"dialog":Ot("cancel",s),Ot("close",s),k=v;break;case"iframe":case"object":case"embed":Ot("load",s),k=v;break;case"video":case"audio":for(k=0;k<jl.length;k++)Ot(jl[k],s);k=v;break;case"source":Ot("error",s),k=v;break;case"img":case"image":case"link":Ot("error",s),Ot("load",s),k=v;break;case"details":Ot("toggle",s),k=v;break;case"input":Ne(s,v),k=Pe(s,v),Ot("invalid",s);break;case"option":k=v;break;case"select":s._wrapperState={wasMultiple:!!v.multiple},k=W({},v,{value:void 0}),Ot("invalid",s);break;case"textarea":$e(s,v),k=ye(s,v),Ot("invalid",s);break;default:k=v}gl(c,k),X=k;for(j in X)if(X.hasOwnProperty(j)){var se=X[j];j==="style"?rs(s,se):j==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&Gn(s,se)):j==="children"?typeof se=="string"?(c!=="textarea"||se!=="")&&vt(s,se):typeof se=="number"&&vt(s,""+se):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?se!=null&&j==="onScroll"&&Ot("scroll",s):se!=null&&P(s,j,se,z))}switch(c){case"input":ge(s),ue(s,v,!1);break;case"textarea":ge(s),ze(s);break;case"option":v.value!=null&&s.setAttribute("value",""+Q(v.value));break;case"select":s.multiple=!!v.multiple,j=v.value,j!=null?Te(s,!!v.multiple,j,!1):v.defaultValue!=null&&Te(s,!!v.multiple,v.defaultValue,!0);break;default:typeof k.onClick=="function"&&(s.onclick=Pc)}switch(c){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Rn(a),null;case 6:if(s&&a.stateNode!=null)q2(s,a,s.memoizedProps,v);else{if(typeof v!="string"&&a.stateNode===null)throw Error(t(166));if(c=Ao(Wl.current),Ao(ai.current),Mc(a)){if(v=a.stateNode,c=a.memoizedProps,v[oi]=a,(j=v.nodeValue!==c)&&(s=ur,s!==null))switch(s.tag){case 3:Rc(v.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Rc(v.nodeValue,c,(s.mode&1)!==0)}j&&(a.flags|=4)}else v=(c.nodeType===9?c:c.ownerDocument).createTextNode(v),v[oi]=a,a.stateNode=v}return Rn(a),null;case 13:if(Lt(zt),v=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ut&&cr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)z0(),xa(),a.flags|=98560,j=!1;else if(j=Mc(a),v!==null&&v.dehydrated!==null){if(s===null){if(!j)throw Error(t(318));if(j=a.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[oi]=a}else xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rn(a),j=!1}else Ur!==null&&(kp(Ur),Ur=null),j=!0;if(!j)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(v=v!==null,v!==(s!==null&&s.memoizedState!==null)&&v&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(zt.current&1)!==0?ln===0&&(ln=3):Np())),a.updateQueue!==null&&(a.flags|=4),Rn(a),null);case 4:return Da(),_p(s,a),s===null&&Bl(a.stateNode.containerInfo),Rn(a),null;case 10:return Gf(a.type._context),Rn(a),null;case 17:return Yn(a.type)&&Oc(),Rn(a),null;case 19:if(Lt(zt),j=a.memoizedState,j===null)return Rn(a),null;if(v=(a.flags&128)!==0,z=j.rendering,z===null)if(v)Ql(j,!1);else{if(ln!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(z=Wc(s),z!==null){for(a.flags|=128,Ql(j,!1),v=z.updateQueue,v!==null&&(a.updateQueue=v,a.flags|=4),a.subtreeFlags=0,v=c,c=a.child;c!==null;)j=c,s=v,j.flags&=14680066,z=j.alternate,z===null?(j.childLanes=0,j.lanes=s,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=z.childLanes,j.lanes=z.lanes,j.child=z.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=z.memoizedProps,j.memoizedState=z.memoizedState,j.updateQueue=z.updateQueue,j.type=z.type,s=z.dependencies,j.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Pt(zt,zt.current&1|2),a.child}s=s.sibling}j.tail!==null&&Rt()>Na&&(a.flags|=128,v=!0,Ql(j,!1),a.lanes=4194304)}else{if(!v)if(s=Wc(z),s!==null){if(a.flags|=128,v=!0,c=s.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Ql(j,!0),j.tail===null&&j.tailMode==="hidden"&&!z.alternate&&!Ut)return Rn(a),null}else 2*Rt()-j.renderingStartTime>Na&&c!==1073741824&&(a.flags|=128,v=!0,Ql(j,!1),a.lanes=4194304);j.isBackwards?(z.sibling=a.child,a.child=z):(c=j.last,c!==null?c.sibling=z:a.child=z,j.last=z)}return j.tail!==null?(a=j.tail,j.rendering=a,j.tail=a.sibling,j.renderingStartTime=Rt(),a.sibling=null,c=zt.current,Pt(zt,v?c&1|2:c&1),a):(Rn(a),null);case 22:case 23:return Pp(),v=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==v&&(a.flags|=8192),v&&(a.mode&1)!==0?(hr&1073741824)!==0&&(Rn(a),a.subtreeFlags&6&&(a.flags|=8192)):Rn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function DT(s,a){switch(Uf(a),a.tag){case 1:return Yn(a.type)&&Oc(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Da(),Lt(Qn),Lt(Dn),ep(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Xf(a),null;case 13:if(Lt(zt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));xa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Lt(zt),null;case 4:return Da(),null;case 10:return Gf(a.type._context),null;case 22:case 23:return Pp(),null;case 24:return null;default:return null}}var eh=!1,Pn=!1,kT=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ra(s,a){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(v){Gt(s,a,v)}else c.current=null}function wp(s,a,c){try{c()}catch(v){Gt(s,a,v)}}var U2=!1;function RT(s,a){if(Pf=hs,s=_0(),bf(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var v=c.getSelection&&c.getSelection();if(v&&v.rangeCount!==0){c=v.anchorNode;var k=v.anchorOffset,j=v.focusNode;v=v.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var z=0,X=-1,se=-1,pe=0,be=0,xe=s,Ae=null;t:for(;;){for(var Oe;xe!==c||k!==0&&xe.nodeType!==3||(X=z+k),xe!==j||v!==0&&xe.nodeType!==3||(se=z+v),xe.nodeType===3&&(z+=xe.nodeValue.length),(Oe=xe.firstChild)!==null;)Ae=xe,xe=Oe;for(;;){if(xe===s)break t;if(Ae===c&&++pe===k&&(X=z),Ae===j&&++be===v&&(se=z),(Oe=xe.nextSibling)!==null)break;xe=Ae,Ae=xe.parentNode}xe=Oe}c=X===-1||se===-1?null:{start:X,end:se}}else c=null}c=c||{start:0,end:0}}else c=null;for(Nf={focusedElem:s,selectionRange:c},hs=!1,Me=a;Me!==null;)if(a=Me,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Me=s;else for(;Me!==null;){a=Me;try{var Ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var He=Ve.memoizedProps,Yt=Ve.memoizedState,he=a.stateNode,oe=he.getSnapshotBeforeUpdate(a.elementType===a.type?He:Vr(a.type,He),Yt);he.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var de=a.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ie){Gt(a,a.return,Ie)}if(s=a.sibling,s!==null){s.return=a.return,Me=s;break}Me=a.return}return Ve=U2,U2=!1,Ve}function Yl(s,a,c){var v=a.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var k=v=v.next;do{if((k.tag&s)===s){var j=k.destroy;k.destroy=void 0,j!==void 0&&wp(a,c,j)}k=k.next}while(k!==v)}}function th(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&s)===s){var v=c.create;c.destroy=v()}c=c.next}while(c!==a)}}function Ep(s){var a=s.ref;if(a!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof a=="function"?a(s):a.current=s}}function V2(s){var a=s.alternate;a!==null&&(s.alternate=null,V2(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[oi],delete a[ql],delete a[jf],delete a[fT],delete a[pT])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function z2(s){return s.tag===5||s.tag===3||s.tag===4}function H2(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||z2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cp(s,a,c){var v=s.tag;if(v===5||v===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(s,c)):(a=c,a.appendChild(s)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Pc));else if(v!==4&&(s=s.child,s!==null))for(Cp(s,a,c),s=s.sibling;s!==null;)Cp(s,a,c),s=s.sibling}function Ap(s,a,c){var v=s.tag;if(v===5||v===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(v!==4&&(s=s.child,s!==null))for(Ap(s,a,c),s=s.sibling;s!==null;)Ap(s,a,c),s=s.sibling}var Cn=null,zr=!1;function ws(s,a,c){for(c=c.child;c!==null;)W2(s,a,c),c=c.sibling}function W2(s,a,c){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(co,c)}catch{}switch(c.tag){case 5:Pn||Ra(c,a);case 6:var v=Cn,k=zr;Cn=null,ws(s,a,c),Cn=v,zr=k,Cn!==null&&(zr?(s=Cn,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Cn.removeChild(c.stateNode));break;case 18:Cn!==null&&(zr?(s=Cn,c=c.stateNode,s.nodeType===8?Ff(s.parentNode,c):s.nodeType===1&&Ff(s,c),Br(s)):Ff(Cn,c.stateNode));break;case 4:v=Cn,k=zr,Cn=c.stateNode.containerInfo,zr=!0,ws(s,a,c),Cn=v,zr=k;break;case 0:case 11:case 14:case 15:if(!Pn&&(v=c.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){k=v=v.next;do{var j=k,z=j.destroy;j=j.tag,z!==void 0&&((j&2)!==0||(j&4)!==0)&&wp(c,a,z),k=k.next}while(k!==v)}ws(s,a,c);break;case 1:if(!Pn&&(Ra(c,a),v=c.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=c.memoizedProps,v.state=c.memoizedState,v.componentWillUnmount()}catch(X){Gt(c,a,X)}ws(s,a,c);break;case 21:ws(s,a,c);break;case 22:c.mode&1?(Pn=(v=Pn)||c.memoizedState!==null,ws(s,a,c),Pn=v):ws(s,a,c);break;default:ws(s,a,c)}}function $2(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new kT),a.forEach(function(v){var k=qT.bind(null,s,v);c.has(v)||(c.add(v),v.then(k,k))})}}function Hr(s,a){var c=a.deletions;if(c!==null)for(var v=0;v<c.length;v++){var k=c[v];try{var j=s,z=a,X=z;e:for(;X!==null;){switch(X.tag){case 5:Cn=X.stateNode,zr=!1;break e;case 3:Cn=X.stateNode.containerInfo,zr=!0;break e;case 4:Cn=X.stateNode.containerInfo,zr=!0;break e}X=X.return}if(Cn===null)throw Error(t(160));W2(j,z,k),Cn=null,zr=!1;var se=k.alternate;se!==null&&(se.return=null),k.return=null}catch(pe){Gt(k,a,pe)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)G2(a,s),a=a.sibling}function G2(s,a){var c=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Hr(a,s),ui(s),v&4){try{Yl(3,s,s.return),th(3,s)}catch(He){Gt(s,s.return,He)}try{Yl(5,s,s.return)}catch(He){Gt(s,s.return,He)}}break;case 1:Hr(a,s),ui(s),v&512&&c!==null&&Ra(c,c.return);break;case 5:if(Hr(a,s),ui(s),v&512&&c!==null&&Ra(c,c.return),s.flags&32){var k=s.stateNode;try{vt(k,"")}catch(He){Gt(s,s.return,He)}}if(v&4&&(k=s.stateNode,k!=null)){var j=s.memoizedProps,z=c!==null?c.memoizedProps:j,X=s.type,se=s.updateQueue;if(s.updateQueue=null,se!==null)try{X==="input"&&j.type==="radio"&&j.name!=null&&Fe(k,j),yl(X,z);var pe=yl(X,j);for(z=0;z<se.length;z+=2){var be=se[z],xe=se[z+1];be==="style"?rs(k,xe):be==="dangerouslySetInnerHTML"?Gn(k,xe):be==="children"?vt(k,xe):P(k,be,xe,pe)}switch(X){case"input":Ze(k,j);break;case"textarea":Le(k,j);break;case"select":var Ae=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!j.multiple;var Oe=j.value;Oe!=null?Te(k,!!j.multiple,Oe,!1):Ae!==!!j.multiple&&(j.defaultValue!=null?Te(k,!!j.multiple,j.defaultValue,!0):Te(k,!!j.multiple,j.multiple?[]:"",!1))}k[ql]=j}catch(He){Gt(s,s.return,He)}}break;case 6:if(Hr(a,s),ui(s),v&4){if(s.stateNode===null)throw Error(t(162));k=s.stateNode,j=s.memoizedProps;try{k.nodeValue=j}catch(He){Gt(s,s.return,He)}}break;case 3:if(Hr(a,s),ui(s),v&4&&c!==null&&c.memoizedState.isDehydrated)try{Br(a.containerInfo)}catch(He){Gt(s,s.return,He)}break;case 4:Hr(a,s),ui(s);break;case 13:Hr(a,s),ui(s),k=s.child,k.flags&8192&&(j=k.memoizedState!==null,k.stateNode.isHidden=j,!j||k.alternate!==null&&k.alternate.memoizedState!==null||(Sp=Rt())),v&4&&$2(s);break;case 22:if(be=c!==null&&c.memoizedState!==null,s.mode&1?(Pn=(pe=Pn)||be,Hr(a,s),Pn=pe):Hr(a,s),ui(s),v&8192){if(pe=s.memoizedState!==null,(s.stateNode.isHidden=pe)&&!be&&(s.mode&1)!==0)for(Me=s,be=s.child;be!==null;){for(xe=Me=be;Me!==null;){switch(Ae=Me,Oe=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:Yl(4,Ae,Ae.return);break;case 1:Ra(Ae,Ae.return);var Ve=Ae.stateNode;if(typeof Ve.componentWillUnmount=="function"){v=Ae,c=Ae.return;try{a=v,Ve.props=a.memoizedProps,Ve.state=a.memoizedState,Ve.componentWillUnmount()}catch(He){Gt(v,c,He)}}break;case 5:Ra(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){Q2(xe);continue}}Oe!==null?(Oe.return=Ae,Me=Oe):Q2(xe)}be=be.sibling}e:for(be=null,xe=s;;){if(xe.tag===5){if(be===null){be=xe;try{k=xe.stateNode,pe?(j=k.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(X=xe.stateNode,se=xe.memoizedProps.style,z=se!=null&&se.hasOwnProperty("display")?se.display:null,X.style.display=kr("display",z))}catch(He){Gt(s,s.return,He)}}}else if(xe.tag===6){if(be===null)try{xe.stateNode.nodeValue=pe?"":xe.memoizedProps}catch(He){Gt(s,s.return,He)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===s)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===s)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===s)break e;be===xe&&(be=null),xe=xe.return}be===xe&&(be=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:Hr(a,s),ui(s),v&4&&$2(s);break;case 21:break;default:Hr(a,s),ui(s)}}function ui(s){var a=s.flags;if(a&2){try{e:{for(var c=s.return;c!==null;){if(z2(c)){var v=c;break e}c=c.return}throw Error(t(160))}switch(v.tag){case 5:var k=v.stateNode;v.flags&32&&(vt(k,""),v.flags&=-33);var j=H2(s);Ap(s,j,k);break;case 3:case 4:var z=v.stateNode.containerInfo,X=H2(s);Cp(s,X,z);break;default:throw Error(t(161))}}catch(se){Gt(s,s.return,se)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function PT(s,a,c){Me=s,K2(s)}function K2(s,a,c){for(var v=(s.mode&1)!==0;Me!==null;){var k=Me,j=k.child;if(k.tag===22&&v){var z=k.memoizedState!==null||eh;if(!z){var X=k.alternate,se=X!==null&&X.memoizedState!==null||Pn;X=eh;var pe=Pn;if(eh=z,(Pn=se)&&!pe)for(Me=k;Me!==null;)z=Me,se=z.child,z.tag===22&&z.memoizedState!==null?Y2(k):se!==null?(se.return=z,Me=se):Y2(k);for(;j!==null;)Me=j,K2(j),j=j.sibling;Me=k,eh=X,Pn=pe}J2(s)}else(k.subtreeFlags&8772)!==0&&j!==null?(j.return=k,Me=j):J2(s)}}function J2(s){for(;Me!==null;){var a=Me;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Pn||th(5,a);break;case 1:var v=a.stateNode;if(a.flags&4&&!Pn)if(c===null)v.componentDidMount();else{var k=a.elementType===a.type?c.memoizedProps:Vr(a.type,c.memoizedProps);v.componentDidUpdate(k,c.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var j=a.updateQueue;j!==null&&Q0(a,j,v);break;case 3:var z=a.updateQueue;if(z!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}Q0(a,z,c)}break;case 5:var X=a.stateNode;if(c===null&&a.flags&4){c=X;var se=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&c.focus();break;case"img":se.src&&(c.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var pe=a.alternate;if(pe!==null){var be=pe.memoizedState;if(be!==null){var xe=be.dehydrated;xe!==null&&Br(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pn||a.flags&512&&Ep(a)}catch(Ae){Gt(a,a.return,Ae)}}if(a===s){Me=null;break}if(c=a.sibling,c!==null){c.return=a.return,Me=c;break}Me=a.return}}function Q2(s){for(;Me!==null;){var a=Me;if(a===s){Me=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Me=c;break}Me=a.return}}function Y2(s){for(;Me!==null;){var a=Me;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{th(4,a)}catch(se){Gt(a,c,se)}break;case 1:var v=a.stateNode;if(typeof v.componentDidMount=="function"){var k=a.return;try{v.componentDidMount()}catch(se){Gt(a,k,se)}}var j=a.return;try{Ep(a)}catch(se){Gt(a,j,se)}break;case 5:var z=a.return;try{Ep(a)}catch(se){Gt(a,z,se)}}}catch(se){Gt(a,a.return,se)}if(a===s){Me=null;break}var X=a.sibling;if(X!==null){X.return=a.return,Me=X;break}Me=a.return}}var NT=Math.ceil,nh=S.ReactCurrentDispatcher,bp=S.ReactCurrentOwner,xr=S.ReactCurrentBatchConfig,Ct=0,gn=null,tn=null,An=0,hr=0,Pa=ms(0),ln=0,Xl=null,xo=0,rh=0,xp=0,Zl=null,Zn=null,Sp=0,Na=1/0,Ui=null,ih=!1,Tp=null,Es=null,sh=!1,Cs=null,oh=0,eu=0,Ip=null,ah=-1,lh=0;function Un(){return(Ct&6)!==0?Rt():ah!==-1?ah:ah=Rt()}function As(s){return(s.mode&1)===0?1:(Ct&2)!==0&&An!==0?An&-An:gT.transition!==null?(lh===0&&(lh=fo()),lh):(s=yt,s!==0||(s=window.event,s=s===void 0?16:Il(s.type)),s)}function Wr(s,a,c,v){if(50<eu)throw eu=0,Ip=null,Error(t(185));as(s,c,v),((Ct&2)===0||s!==gn)&&(s===gn&&((Ct&2)===0&&(rh|=c),ln===4&&bs(s,An)),er(s,v),c===1&&Ct===0&&(a.mode&1)===0&&(Na=Rt()+500,Fc&&ys()))}function er(s,a){var c=s.callbackNode;Di(s,a);var v=ho(s,s===gn?An:0);if(v===0)c!==null&&Al(c),s.callbackNode=null,s.callbackPriority=0;else if(a=v&-v,s.callbackPriority!==a){if(c!=null&&Al(c),a===1)s.tag===0?mT(Z2.bind(null,s)):B0(Z2.bind(null,s)),hT(function(){(Ct&6)===0&&ys()}),c=null;else{switch(us(v)){case 1:c=uo;break;case 4:c=is;break;case 16:c=vr;break;case 536870912:c=lc;break;default:c=vr}c=a_(c,X2.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function X2(s,a){if(ah=-1,lh=0,(Ct&6)!==0)throw Error(t(327));var c=s.callbackNode;if(Oa()&&s.callbackNode!==c)return null;var v=ho(s,s===gn?An:0);if(v===0)return null;if((v&30)!==0||(v&s.expiredLanes)!==0||a)a=uh(s,v);else{a=v;var k=Ct;Ct|=2;var j=t_();(gn!==s||An!==a)&&(Ui=null,Na=Rt()+500,To(s,a));do try{FT();break}catch(X){e_(s,X)}while(!0);$f(),nh.current=j,Ct=k,tn!==null?a=0:(gn=null,An=0,a=ln)}if(a!==0){if(a===2&&(k=or(s),k!==0&&(v=k,a=Dp(s,k))),a===1)throw c=Xl,To(s,0),bs(s,v),er(s,Rt()),c;if(a===6)bs(s,v);else{if(k=s.current.alternate,(v&30)===0&&!OT(k)&&(a=uh(s,v),a===2&&(j=or(s),j!==0&&(v=j,a=Dp(s,j))),a===1))throw c=Xl,To(s,0),bs(s,v),er(s,Rt()),c;switch(s.finishedWork=k,s.finishedLanes=v,a){case 0:case 1:throw Error(t(345));case 2:Io(s,Zn,Ui);break;case 3:if(bs(s,v),(v&130023424)===v&&(a=Sp+500-Rt(),10<a)){if(ho(s,0)!==0)break;if(k=s.suspendedLanes,(k&v)!==v){Un(),s.pingedLanes|=s.suspendedLanes&k;break}s.timeoutHandle=Lf(Io.bind(null,s,Zn,Ui),a);break}Io(s,Zn,Ui);break;case 4:if(bs(s,v),(v&4194240)===v)break;for(a=s.eventTimes,k=-1;0<v;){var z=31-Bn(v);j=1<<z,z=a[z],z>k&&(k=z),v&=~j}if(v=k,v=Rt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*NT(v/1960))-v,10<v){s.timeoutHandle=Lf(Io.bind(null,s,Zn,Ui),v);break}Io(s,Zn,Ui);break;case 5:Io(s,Zn,Ui);break;default:throw Error(t(329))}}}return er(s,Rt()),s.callbackNode===c?X2.bind(null,s):null}function Dp(s,a){var c=Zl;return s.current.memoizedState.isDehydrated&&(To(s,a).flags|=256),s=uh(s,a),s!==2&&(a=Zn,Zn=c,a!==null&&kp(a)),s}function kp(s){Zn===null?Zn=s:Zn.push.apply(Zn,s)}function OT(s){for(var a=s;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var v=0;v<c.length;v++){var k=c[v],j=k.getSnapshot;k=k.value;try{if(!qr(j(),k))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function bs(s,a){for(a&=~xp,a&=~rh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-Bn(a),v=1<<c;s[c]=-1,a&=~v}}function Z2(s){if((Ct&6)!==0)throw Error(t(327));Oa();var a=ho(s,0);if((a&1)===0)return er(s,Rt()),null;var c=uh(s,a);if(s.tag!==0&&c===2){var v=or(s);v!==0&&(a=v,c=Dp(s,v))}if(c===1)throw c=Xl,To(s,0),bs(s,a),er(s,Rt()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Io(s,Zn,Ui),er(s,Rt()),null}function Rp(s,a){var c=Ct;Ct|=1;try{return s(a)}finally{Ct=c,Ct===0&&(Na=Rt()+500,Fc&&ys())}}function So(s){Cs!==null&&Cs.tag===0&&(Ct&6)===0&&Oa();var a=Ct;Ct|=1;var c=xr.transition,v=yt;try{if(xr.transition=null,yt=1,s)return s()}finally{yt=v,xr.transition=c,Ct=a,(Ct&6)===0&&ys()}}function Pp(){hr=Pa.current,Lt(Pa)}function To(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,cT(c)),tn!==null)for(c=tn.return;c!==null;){var v=c;switch(Uf(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Oc();break;case 3:Da(),Lt(Qn),Lt(Dn),ep();break;case 5:Xf(v);break;case 4:Da();break;case 13:Lt(zt);break;case 19:Lt(zt);break;case 10:Gf(v.type._context);break;case 22:case 23:Pp()}c=c.return}if(gn=s,tn=s=xs(s.current,null),An=hr=a,ln=0,Xl=null,xp=rh=xo=0,Zn=Zl=null,Co!==null){for(a=0;a<Co.length;a++)if(c=Co[a],v=c.interleaved,v!==null){c.interleaved=null;var k=v.next,j=c.pending;if(j!==null){var z=j.next;j.next=k,v.next=z}c.pending=v}Co=null}return s}function e_(s,a){do{var c=tn;try{if($f(),$c.current=Qc,Gc){for(var v=Ht.memoizedState;v!==null;){var k=v.queue;k!==null&&(k.pending=null),v=v.next}Gc=!1}if(bo=0,mn=an=Ht=null,$l=!1,Gl=0,bp.current=null,c===null||c.return===null){ln=1,Xl=a,tn=null;break}e:{var j=s,z=c.return,X=c,se=a;if(a=An,X.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var pe=se,be=X,xe=be.tag;if((be.mode&1)===0&&(xe===0||xe===11||xe===15)){var Ae=be.alternate;Ae?(be.updateQueue=Ae.updateQueue,be.memoizedState=Ae.memoizedState,be.lanes=Ae.lanes):(be.updateQueue=null,be.memoizedState=null)}var Oe=x2(z);if(Oe!==null){Oe.flags&=-257,S2(Oe,z,X,j,a),Oe.mode&1&&b2(j,pe,a),a=Oe,se=pe;var Ve=a.updateQueue;if(Ve===null){var He=new Set;He.add(se),a.updateQueue=He}else Ve.add(se);break e}else{if((a&1)===0){b2(j,pe,a),Np();break e}se=Error(t(426))}}else if(Ut&&X.mode&1){var Yt=x2(z);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),S2(Yt,z,X,j,a),Hf(ka(se,X));break e}}j=se=ka(se,X),ln!==4&&(ln=2),Zl===null?Zl=[j]:Zl.push(j),j=z;do{switch(j.tag){case 3:j.flags|=65536,a&=-a,j.lanes|=a;var he=C2(j,se,a);J0(j,he);break e;case 1:X=se;var oe=j.type,de=j.stateNode;if((j.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Es===null||!Es.has(de)))){j.flags|=65536,a&=-a,j.lanes|=a;var Ie=A2(j,X,a);J0(j,Ie);break e}}j=j.return}while(j!==null)}r_(c)}catch(We){a=We,tn===c&&c!==null&&(tn=c=c.return);continue}break}while(!0)}function t_(){var s=nh.current;return nh.current=Qc,s===null?Qc:s}function Np(){(ln===0||ln===3||ln===2)&&(ln=4),gn===null||(xo&268435455)===0&&(rh&268435455)===0||bs(gn,An)}function uh(s,a){var c=Ct;Ct|=2;var v=t_();(gn!==s||An!==a)&&(Ui=null,To(s,a));do try{LT();break}catch(k){e_(s,k)}while(!0);if($f(),Ct=c,nh.current=v,tn!==null)throw Error(t(261));return gn=null,An=0,ln}function LT(){for(;tn!==null;)n_(tn)}function FT(){for(;tn!==null&&!oc();)n_(tn)}function n_(s){var a=o_(s.alternate,s,hr);s.memoizedProps=s.pendingProps,a===null?r_(s):tn=a,bp.current=null}function r_(s){var a=s;do{var c=a.alternate;if(s=a.return,(a.flags&32768)===0){if(c=IT(c,a,hr),c!==null){tn=c;return}}else{if(c=DT(c,a),c!==null){c.flags&=32767,tn=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ln=6,tn=null;return}}if(a=a.sibling,a!==null){tn=a;return}tn=a=s}while(a!==null);ln===0&&(ln=5)}function Io(s,a,c){var v=yt,k=xr.transition;try{xr.transition=null,yt=1,jT(s,a,c,v)}finally{xr.transition=k,yt=v}return null}function jT(s,a,c,v){do Oa();while(Cs!==null);if((Ct&6)!==0)throw Error(t(327));c=s.finishedWork;var k=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var j=c.lanes|c.childLanes;if(It(s,j),s===gn&&(tn=gn=null,An=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||sh||(sh=!0,a_(vr,function(){return Oa(),null})),j=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||j){j=xr.transition,xr.transition=null;var z=yt;yt=1;var X=Ct;Ct|=4,bp.current=null,RT(s,c),G2(c,s),rT(Nf),hs=!!Pf,Nf=Pf=null,s.current=c,PT(c),gf(),Ct=X,yt=z,xr.transition=j}else s.current=c;if(sh&&(sh=!1,Cs=s,oh=k),j=s.pendingLanes,j===0&&(Es=null),uc(c.stateNode),er(s,Rt()),a!==null)for(v=s.onRecoverableError,c=0;c<a.length;c++)k=a[c],v(k.value,{componentStack:k.stack,digest:k.digest});if(ih)throw ih=!1,s=Tp,Tp=null,s;return(oh&1)!==0&&s.tag!==0&&Oa(),j=s.pendingLanes,(j&1)!==0?s===Ip?eu++:(eu=0,Ip=s):eu=0,ys(),null}function Oa(){if(Cs!==null){var s=us(oh),a=xr.transition,c=yt;try{if(xr.transition=null,yt=16>s?16:s,Cs===null)var v=!1;else{if(s=Cs,Cs=null,oh=0,(Ct&6)!==0)throw Error(t(331));var k=Ct;for(Ct|=4,Me=s.current;Me!==null;){var j=Me,z=j.child;if((Me.flags&16)!==0){var X=j.deletions;if(X!==null){for(var se=0;se<X.length;se++){var pe=X[se];for(Me=pe;Me!==null;){var be=Me;switch(be.tag){case 0:case 11:case 15:Yl(8,be,j)}var xe=be.child;if(xe!==null)xe.return=be,Me=xe;else for(;Me!==null;){be=Me;var Ae=be.sibling,Oe=be.return;if(V2(be),be===pe){Me=null;break}if(Ae!==null){Ae.return=Oe,Me=Ae;break}Me=Oe}}}var Ve=j.alternate;if(Ve!==null){var He=Ve.child;if(He!==null){Ve.child=null;do{var Yt=He.sibling;He.sibling=null,He=Yt}while(He!==null)}}Me=j}}if((j.subtreeFlags&2064)!==0&&z!==null)z.return=j,Me=z;else e:for(;Me!==null;){if(j=Me,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Yl(9,j,j.return)}var he=j.sibling;if(he!==null){he.return=j.return,Me=he;break e}Me=j.return}}var oe=s.current;for(Me=oe;Me!==null;){z=Me;var de=z.child;if((z.subtreeFlags&2064)!==0&&de!==null)de.return=z,Me=de;else e:for(z=oe;Me!==null;){if(X=Me,(X.flags&2048)!==0)try{switch(X.tag){case 0:case 11:case 15:th(9,X)}}catch(We){Gt(X,X.return,We)}if(X===z){Me=null;break e}var Ie=X.sibling;if(Ie!==null){Ie.return=X.return,Me=Ie;break e}Me=X.return}}if(Ct=k,ys(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(co,s)}catch{}v=!0}return v}finally{yt=c,xr.transition=a}}return!1}function i_(s,a,c){a=ka(c,a),a=C2(s,a,1),s=_s(s,a,1),a=Un(),s!==null&&(as(s,1,a),er(s,a))}function Gt(s,a,c){if(s.tag===3)i_(s,s,c);else for(;a!==null;){if(a.tag===3){i_(a,s,c);break}else if(a.tag===1){var v=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Es===null||!Es.has(v))){s=ka(c,s),s=A2(a,s,1),a=_s(a,s,1),s=Un(),a!==null&&(as(a,1,s),er(a,s));break}}a=a.return}}function BT(s,a,c){var v=s.pingCache;v!==null&&v.delete(a),a=Un(),s.pingedLanes|=s.suspendedLanes&c,gn===s&&(An&c)===c&&(ln===4||ln===3&&(An&130023424)===An&&500>Rt()-Sp?To(s,0):xp|=c),er(s,a)}function s_(s,a){a===0&&((s.mode&1)===0?a=1:(a=ra,ra<<=1,(ra&130023424)===0&&(ra=4194304)));var c=Un();s=Bi(s,a),s!==null&&(as(s,a,c),er(s,c))}function MT(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),s_(s,c)}function qT(s,a){var c=0;switch(s.tag){case 13:var v=s.stateNode,k=s.memoizedState;k!==null&&(c=k.retryLane);break;case 19:v=s.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(a),s_(s,c)}var o_;o_=function(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps||Qn.current)Xn=!0;else{if((s.lanes&c)===0&&(a.flags&128)===0)return Xn=!1,TT(s,a,c);Xn=(s.flags&131072)!==0}else Xn=!1,Ut&&(a.flags&1048576)!==0&&M0(a,Bc,a.index);switch(a.lanes=0,a.tag){case 2:var v=a.type;Zc(s,a),s=a.pendingProps;var k=Ca(a,Dn.current);Ia(a,c),k=rp(null,a,v,s,k,c);var j=ip();return a.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Yn(v)?(j=!0,Lc(a)):j=!1,a.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Qf(a),k.updater=Yc,a.stateNode=k,k._reactInternals=a,cp(a,v,s,c),a=pp(null,a,v,!0,j,c)):(a.tag=0,Ut&&j&&qf(a),qn(null,a,k,c),a=a.child),a;case 16:v=a.elementType;e:{switch(Zc(s,a),s=a.pendingProps,k=v._init,v=k(v._payload),a.type=v,k=a.tag=VT(v),s=Vr(v,s),k){case 0:a=fp(null,a,v,s,c);break e;case 1:a=P2(null,a,v,s,c);break e;case 11:a=T2(null,a,v,s,c);break e;case 14:a=I2(null,a,v,Vr(v.type,s),c);break e}throw Error(t(306,v,""))}return a;case 0:return v=a.type,k=a.pendingProps,k=a.elementType===v?k:Vr(v,k),fp(s,a,v,k,c);case 1:return v=a.type,k=a.pendingProps,k=a.elementType===v?k:Vr(v,k),P2(s,a,v,k,c);case 3:e:{if(N2(a),s===null)throw Error(t(387));v=a.pendingProps,j=a.memoizedState,k=j.element,K0(s,a),Hc(a,v,null,c);var z=a.memoizedState;if(v=z.element,j.isDehydrated)if(j={element:v,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},a.updateQueue.baseState=j,a.memoizedState=j,a.flags&256){k=ka(Error(t(423)),a),a=O2(s,a,v,c,k);break e}else if(v!==k){k=ka(Error(t(424)),a),a=O2(s,a,v,c,k);break e}else for(cr=ps(a.stateNode.containerInfo.firstChild),ur=a,Ut=!0,Ur=null,c=$0(a,null,v,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(xa(),v===k){a=qi(s,a,c);break e}qn(s,a,v,c)}a=a.child}return a;case 5:return Y0(a),s===null&&zf(a),v=a.type,k=a.pendingProps,j=s!==null?s.memoizedProps:null,z=k.children,Of(v,k)?z=null:j!==null&&Of(v,j)&&(a.flags|=32),R2(s,a),qn(s,a,z,c),a.child;case 6:return s===null&&zf(a),null;case 13:return L2(s,a,c);case 4:return Yf(a,a.stateNode.containerInfo),v=a.pendingProps,s===null?a.child=Sa(a,null,v,c):qn(s,a,v,c),a.child;case 11:return v=a.type,k=a.pendingProps,k=a.elementType===v?k:Vr(v,k),T2(s,a,v,k,c);case 7:return qn(s,a,a.pendingProps,c),a.child;case 8:return qn(s,a,a.pendingProps.children,c),a.child;case 12:return qn(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(v=a.type._context,k=a.pendingProps,j=a.memoizedProps,z=k.value,Pt(Uc,v._currentValue),v._currentValue=z,j!==null)if(qr(j.value,z)){if(j.children===k.children&&!Qn.current){a=qi(s,a,c);break e}}else for(j=a.child,j!==null&&(j.return=a);j!==null;){var X=j.dependencies;if(X!==null){z=j.child;for(var se=X.firstContext;se!==null;){if(se.context===v){if(j.tag===1){se=Mi(-1,c&-c),se.tag=2;var pe=j.updateQueue;if(pe!==null){pe=pe.shared;var be=pe.pending;be===null?se.next=se:(se.next=be.next,be.next=se),pe.pending=se}}j.lanes|=c,se=j.alternate,se!==null&&(se.lanes|=c),Kf(j.return,c,a),X.lanes|=c;break}se=se.next}}else if(j.tag===10)z=j.type===a.type?null:j.child;else if(j.tag===18){if(z=j.return,z===null)throw Error(t(341));z.lanes|=c,X=z.alternate,X!==null&&(X.lanes|=c),Kf(z,c,a),z=j.sibling}else z=j.child;if(z!==null)z.return=j;else for(z=j;z!==null;){if(z===a){z=null;break}if(j=z.sibling,j!==null){j.return=z.return,z=j;break}z=z.return}j=z}qn(s,a,k.children,c),a=a.child}return a;case 9:return k=a.type,v=a.pendingProps.children,Ia(a,c),k=Ar(k),v=v(k),a.flags|=1,qn(s,a,v,c),a.child;case 14:return v=a.type,k=Vr(v,a.pendingProps),k=Vr(v.type,k),I2(s,a,v,k,c);case 15:return D2(s,a,a.type,a.pendingProps,c);case 17:return v=a.type,k=a.pendingProps,k=a.elementType===v?k:Vr(v,k),Zc(s,a),a.tag=1,Yn(v)?(s=!0,Lc(a)):s=!1,Ia(a,c),w2(a,v,k),cp(a,v,k,c),pp(null,a,v,!0,s,c);case 19:return j2(s,a,c);case 22:return k2(s,a,c)}throw Error(t(156,a.tag))};function a_(s,a){return ta(s,a)}function UT(s,a,c,v){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(s,a,c,v){return new UT(s,a,c,v)}function Op(s){return s=s.prototype,!(!s||!s.isReactComponent)}function VT(s){if(typeof s=="function")return Op(s)?1:0;if(s!=null){if(s=s.$$typeof,s===N)return 11;if(s===J)return 14}return 2}function xs(s,a){var c=s.alternate;return c===null?(c=Sr(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function ch(s,a,c,v,k,j){var z=2;if(v=s,typeof s=="function")Op(s)&&(z=1);else if(typeof s=="string")z=5;else e:switch(s){case R:return Do(c.children,k,j,a);case A:z=8,k|=8;break;case T:return s=Sr(12,c,a,k|2),s.elementType=T,s.lanes=j,s;case L:return s=Sr(13,c,a,k),s.elementType=L,s.lanes=j,s;case V:return s=Sr(19,c,a,k),s.elementType=V,s.lanes=j,s;case Z:return hh(c,k,j,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:z=10;break e;case D:z=9;break e;case N:z=11;break e;case J:z=14;break e;case re:z=16,v=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Sr(z,c,a,k),a.elementType=s,a.type=v,a.lanes=j,a}function Do(s,a,c,v){return s=Sr(7,s,v,a),s.lanes=c,s}function hh(s,a,c,v){return s=Sr(22,s,v,a),s.elementType=Z,s.lanes=c,s.stateNode={isHidden:!1},s}function Lp(s,a,c){return s=Sr(6,s,null,a),s.lanes=c,s}function Fp(s,a,c){return a=Sr(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function zT(s,a,c,v,k){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=os(0),this.expirationTimes=os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.identifierPrefix=v,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function jp(s,a,c,v,k,j,z,X,se){return s=new zT(s,a,c,X,se),a===1?(a=1,j===!0&&(a|=8)):a=0,j=Sr(3,null,null,a),s.current=j,j.stateNode=s,j.memoizedState={element:v,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(j),s}function HT(s,a,c){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:v==null?null:""+v,children:s,containerInfo:a,implementation:c}}function l_(s){if(!s)return gs;s=s._reactInternals;e:{if(Nr(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Yn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(Yn(c))return F0(s,c,a)}return a}function u_(s,a,c,v,k,j,z,X,se){return s=jp(c,v,!0,s,k,j,z,X,se),s.context=l_(null),c=s.current,v=Un(),k=As(c),j=Mi(v,k),j.callback=a??null,_s(c,j,k),s.current.lanes=k,as(s,k,v),er(s,v),s}function dh(s,a,c,v){var k=a.current,j=Un(),z=As(k);return c=l_(c),a.context===null?a.context=c:a.pendingContext=c,a=Mi(j,z),a.payload={element:s},v=v===void 0?null:v,v!==null&&(a.callback=v),s=_s(k,a,z),s!==null&&(Wr(s,k,z,j),zc(s,k,z)),z}function fh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function c_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Bp(s,a){c_(s,a),(s=s.alternate)&&c_(s,a)}function WT(){return null}var h_=typeof reportError=="function"?reportError:function(s){console.error(s)};function Mp(s){this._internalRoot=s}ph.prototype.render=Mp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));dh(s,a,null,null)},ph.prototype.unmount=Mp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;So(function(){dh(null,s,null,null)}),a[Oi]=null}};function ph(s){this._internalRoot=s}ph.prototype.unstable_scheduleHydration=function(s){if(s){var a=pc();s={blockedOn:null,target:s,priority:a};for(var c=0;c<ni.length&&a!==0&&a<ni[c].priority;c++);ni.splice(c,0,s),c===0&&yc(s)}};function qp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function mh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function d_(){}function $T(s,a,c,v,k){if(k){if(typeof v=="function"){var j=v;v=function(){var pe=fh(z);j.call(pe)}}var z=u_(a,v,s,0,null,!1,!1,"",d_);return s._reactRootContainer=z,s[Oi]=z.current,Bl(s.nodeType===8?s.parentNode:s),So(),z}for(;k=s.lastChild;)s.removeChild(k);if(typeof v=="function"){var X=v;v=function(){var pe=fh(se);X.call(pe)}}var se=jp(s,0,!1,null,null,!1,!1,"",d_);return s._reactRootContainer=se,s[Oi]=se.current,Bl(s.nodeType===8?s.parentNode:s),So(function(){dh(a,se,c,v)}),se}function gh(s,a,c,v,k){var j=c._reactRootContainer;if(j){var z=j;if(typeof k=="function"){var X=k;k=function(){var se=fh(z);X.call(se)}}dh(a,z,s,k)}else z=$T(c,a,s,k,v);return fh(z)}dc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=ss(a.pendingLanes);c!==0&&(ls(a,c|1),er(a,Rt()),(Ct&6)===0&&(Na=Rt()+500,ys()))}break;case 13:So(function(){var v=Bi(s,1);if(v!==null){var k=Un();Wr(v,s,1,k)}}),Bp(s,1)}},ia=function(s){if(s.tag===13){var a=Bi(s,134217728);if(a!==null){var c=Un();Wr(a,s,134217728,c)}Bp(s,134217728)}},fc=function(s){if(s.tag===13){var a=As(s),c=Bi(s,a);if(c!==null){var v=Un();Wr(c,s,a,v)}Bp(s,a)}},pc=function(){return yt},mc=function(s,a){var c=yt;try{return yt=s,a()}finally{yt=c}},Jo=function(s,a,c){switch(a){case"input":if(Ze(s,c),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var v=c[a];if(v!==s&&v.form===s.form){var k=Nc(v);if(!k)throw Error(t(90));Ce(v),Ze(v,k)}}}break;case"textarea":Le(s,c);break;case"select":a=c.value,a!=null&&Te(s,!!c.multiple,a,!1)}},so=Rp,_l=So;var GT={usingClientEntryPoint:!1,Events:[Ul,wa,Nc,ei,vl,Rp]},tu={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KT={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Cl(s),s===null?null:s.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{co=yh.inject(KT),sr=yh}catch{}}return tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GT,tr.createPortal=function(s,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qp(a))throw Error(t(200));return HT(s,a,null,c)},tr.createRoot=function(s,a){if(!qp(s))throw Error(t(299));var c=!1,v="",k=h_;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(k=a.onRecoverableError)),a=jp(s,1,!1,null,null,c,!1,v,k),s[Oi]=a.current,Bl(s.nodeType===8?s.parentNode:s),new Mp(a)},tr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Cl(a),s=s===null?null:s.stateNode,s},tr.flushSync=function(s){return So(s)},tr.hydrate=function(s,a,c){if(!mh(a))throw Error(t(200));return gh(null,s,a,!0,c)},tr.hydrateRoot=function(s,a,c){if(!qp(s))throw Error(t(405));var v=c!=null&&c.hydratedSources||null,k=!1,j="",z=h_;if(c!=null&&(c.unstable_strictMode===!0&&(k=!0),c.identifierPrefix!==void 0&&(j=c.identifierPrefix),c.onRecoverableError!==void 0&&(z=c.onRecoverableError)),a=u_(a,null,s,1,c??null,k,!1,j,z),s[Oi]=a.current,Bl(s),v)for(s=0;s<v.length;s++)c=v[s],k=c._getVersion,k=k(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,k]:a.mutableSourceEagerHydrationData.push(c,k);return new ph(a)},tr.render=function(s,a,c){if(!mh(a))throw Error(t(200));return gh(null,s,a,!1,c)},tr.unmountComponentAtNode=function(s){if(!mh(s))throw Error(t(40));return s._reactRootContainer?(So(function(){gh(null,null,s,!1,function(){s._reactRootContainer=null,s[Oi]=null})}),!0):!1},tr.unstable_batchedUpdates=Rp,tr.unstable_renderSubtreeIntoContainer=function(s,a,c,v){if(!mh(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return gh(s,a,c,!1,v)},tr.version="18.3.1-next-f1338f8080-20240426",tr}var w_;function Ty(){if(w_)return zp.exports;w_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zp.exports=rI(),zp.exports}var E_;function iI(){if(E_)return vh;E_=1;var r=Ty();return vh.createRoot=r.createRoot,vh.hydrateRoot=r.hydrateRoot,vh}var sI=iI();const oI=()=>{};var C_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aI=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=r[t++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=r[t++],l=r[t++],u=r[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},OC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const o=r[i],l=i+1<r.length,u=l?r[i+1]:0,h=i+2<r.length,d=h?r[i+2]:0,g=o>>2,m=(o&3)<<4|u>>4;let p=(u&15)<<2|d>>6,y=d&63;h||(y=64,l||(p=64)),n.push(t[g],t[m],t[p],t[y])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(NC(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):aI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const o=t[r.charAt(i++)],u=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const m=i<r.length?t[r.charAt(i)]:64;if(++i,o==null||u==null||d==null||m==null)throw new lI;const p=o<<2|u>>4;if(n.push(p),d!==64){const y=u<<4&240|d>>2;if(n.push(y),m!==64){const b=d<<6&192|m;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class lI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uI=function(r){const e=NC(r);return OC.encodeByteArray(e,!0)},Jh=function(r){return uI(r).replace(/\./g,"")},LC=function(r){try{return OC.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=()=>cI().__FIREBASE_DEFAULTS__,dI=()=>{if(typeof process>"u"||typeof C_>"u")return;const r=C_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},fI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&LC(r[1]);return e&&JSON.parse(e)},Ad=()=>{try{return oI()||hI()||dI()||fI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},FC=r=>{var e,t;return(t=(e=Ad())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},jC=r=>{const e=FC(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},BC=()=>{var r;return(r=Ad())===null||r===void 0?void 0:r.config},MC=r=>{var e;return(e=Ad())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Jh(JSON.stringify(t)),Jh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function gI(){var r;const e=(r=Ad())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _I(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wI(){const r=jn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function EI(){return!gI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CI(){try{return typeof indexedDB=="object"}catch{return!1}}function AI(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="FirebaseError";class Ai extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=bI,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?xI(o,n):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Ai(i,u,n)}}function xI(r,e){return r.replace(SI,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const SI=/\{\$([^}]+)}/g;function TI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Oo(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const o=r[i],l=e[i];if(A_(o)&&A_(l)){if(!Oo(o,l))return!1}else if(o!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function A_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ou(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function au(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function II(r,e){const t=new DI(r,e);return t.subscribe.bind(t)}class DI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");kI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=$p),i.error===void 0&&(i.error=$p),i.complete===void 0&&(i.complete=$p);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(r){return r&&r._delegate?r._delegate:r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){return r.endsWith(".cloudworkstations.dev")}async function Iy(r){return(await fetch(r,{credentials:"include"})).ok}class Us{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new pI;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NI(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&l.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(r){return r===ko?void 0:r}function NI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(mt||(mt={}));const LI={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},FI=mt.INFO,jI={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},BI=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=jI[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dy{constructor(e){this.name=e,this._logLevel=FI,this._logHandler=BI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const MI=(r,e)=>e.some(t=>r instanceof t);let b_,x_;function qI(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UI(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UC=new WeakMap,Gg=new WeakMap,VC=new WeakMap,Gp=new WeakMap,ky=new WeakMap;function VI(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",o),r.removeEventListener("error",l)},o=()=>{t(js(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",o),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&UC.set(t,r)}).catch(()=>{}),ky.set(e,r),e}function zI(r){if(Gg.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",l),r.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",o),r.addEventListener("error",l),r.addEventListener("abort",l)});Gg.set(r,e)}let Kg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Gg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||VC.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return js(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function HI(r){Kg=r(Kg)}function WI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Kp(this),e,...t);return VC.set(n,e.sort?e.sort():[e]),js(n)}:UI().includes(r)?function(...e){return r.apply(Kp(this),e),js(UC.get(this))}:function(...e){return js(r.apply(Kp(this),e))}}function $I(r){return typeof r=="function"?WI(r):(r instanceof IDBTransaction&&zI(r),MI(r,qI())?new Proxy(r,Kg):r)}function js(r){if(r instanceof IDBRequest)return VI(r);if(Gp.has(r))return Gp.get(r);const e=$I(r);return e!==r&&(Gp.set(r,e),ky.set(e,r)),e}const Kp=r=>ky.get(r);function GI(r,e,{blocked:t,upgrade:n,blocking:i,terminated:o}={}){const l=indexedDB.open(r,e),u=js(l);return n&&l.addEventListener("upgradeneeded",h=>{n(js(l.result),h.oldVersion,h.newVersion,js(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const KI=["get","getKey","getAll","getAllKeys","count"],JI=["put","add","delete","clear"],Jp=new Map;function S_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=JI.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||KI.includes(t)))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),i&&h.done]))[0]};return Jp.set(e,o),o}HI(r=>({...r,get:(e,t,n)=>S_(e,t)||r.get(e,t,n),has:(e,t)=>!!S_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YI(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function YI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jg="@firebase/app",T_="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Dy("@firebase/app"),XI="@firebase/app-compat",ZI="@firebase/analytics-compat",eD="@firebase/analytics",tD="@firebase/app-check-compat",nD="@firebase/app-check",rD="@firebase/auth",iD="@firebase/auth-compat",sD="@firebase/database",oD="@firebase/data-connect",aD="@firebase/database-compat",lD="@firebase/functions",uD="@firebase/functions-compat",cD="@firebase/installations",hD="@firebase/installations-compat",dD="@firebase/messaging",fD="@firebase/messaging-compat",pD="@firebase/performance",mD="@firebase/performance-compat",gD="@firebase/remote-config",yD="@firebase/remote-config-compat",vD="@firebase/storage",_D="@firebase/storage-compat",wD="@firebase/firestore",ED="@firebase/vertexai",CD="@firebase/firestore-compat",AD="firebase",bD="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="[DEFAULT]",xD={[Jg]:"fire-core",[XI]:"fire-core-compat",[eD]:"fire-analytics",[ZI]:"fire-analytics-compat",[nD]:"fire-app-check",[tD]:"fire-app-check-compat",[rD]:"fire-auth",[iD]:"fire-auth-compat",[sD]:"fire-rtdb",[oD]:"fire-data-connect",[aD]:"fire-rtdb-compat",[lD]:"fire-fn",[uD]:"fire-fn-compat",[cD]:"fire-iid",[hD]:"fire-iid-compat",[dD]:"fire-fcm",[fD]:"fire-fcm-compat",[pD]:"fire-perf",[mD]:"fire-perf-compat",[gD]:"fire-rc",[yD]:"fire-rc-compat",[vD]:"fire-gcs",[_D]:"fire-gcs-compat",[wD]:"fire-fst",[CD]:"fire-fst-compat",[ED]:"fire-vertex","fire-js":"fire-js",[AD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new Map,SD=new Map,Yg=new Map;function I_(r,e){try{r.container.addComponent(e)}catch(t){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Lo(r){const e=r.name;if(Yg.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,r);for(const t of Qh.values())I_(t,r);for(const t of SD.values())I_(t,r);return!0}function bd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function dr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new Uu("app","Firebase",TD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=bD;function zC(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Qg,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Bs.create("bad-app-name",{appName:String(i)});if(t||(t=BC()),!t)throw Bs.create("no-options");const o=Qh.get(i);if(o){if(Oo(t,o.options)&&Oo(n,o.config))return o;throw Bs.create("duplicate-app",{appName:i})}const l=new OI(i);for(const h of Yg.values())l.addComponent(h);const u=new ID(t,n,l);return Qh.set(i,u),u}function Ry(r=Qg){const e=Qh.get(r);if(!e&&r===Qg&&BC())return zC();if(!e)throw Bs.create("no-app",{appName:r});return e}function pi(r,e,t){var n;let i=(n=xD[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(u.join(" "));return}Lo(new Us(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="firebase-heartbeat-database",kD=1,Au="firebase-heartbeat-store";let Qp=null;function HC(){return Qp||(Qp=GI(DD,kD,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Au)}catch(t){console.warn(t)}}}}).catch(r=>{throw Bs.create("idb-open",{originalErrorMessage:r.message})})),Qp}async function RD(r){try{const t=(await HC()).transaction(Au),n=await t.objectStore(Au).get(WC(r));return await t.done,n}catch(e){if(e instanceof Ai)Ki.warn(e.message);else{const t=Bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ki.warn(t.message)}}}async function D_(r,e){try{const n=(await HC()).transaction(Au,"readwrite");await n.objectStore(Au).put(e,WC(r)),await n.done}catch(t){if(t instanceof Ai)Ki.warn(t.message);else{const n=Bs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ki.warn(n.message)}}}function WC(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=1024,ND=30;class OD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FD(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=k_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>ND){const l=jD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ki.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=k_(),{heartbeatsToSend:n,unsentEntries:i}=LD(this._heartbeatsCache.heartbeats),o=Jh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ki.warn(t),""}}}function k_(){return new Date().toISOString().substring(0,10)}function LD(r,e=PD){const t=[];let n=r.slice();for(const i of r){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),R_(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),R_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class FD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CI()?AI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return D_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return D_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function R_(r){return Jh(JSON.stringify({version:2,heartbeats:r})).length}function jD(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(r){Lo(new Us("platform-logger",e=>new QI(e),"PRIVATE")),Lo(new Us("heartbeat",e=>new OD(e),"PRIVATE")),pi(Jg,T_,r),pi(Jg,T_,"esm2017"),pi("fire-js","")}BD("");var MD="firebase",qD="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(MD,qD,"app");var P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,$C;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function T(){}T.prototype=A.prototype,R.D=A.prototype,R.prototype=new T,R.prototype.constructor=R,R.C=function(I,D,N){for(var L=Array(arguments.length-2),V=2;V<arguments.length;V++)L[V-2]=arguments[V];return A.prototype[D].apply(I,L)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,A,T){T||(T=0);var I=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)I[D]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(D=0;16>D;++D)I[D]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=R.g[0],T=R.g[1],D=R.g[2];var N=R.g[3],L=A+(N^T&(D^N))+I[0]+3614090360&4294967295;A=T+(L<<7&4294967295|L>>>25),L=N+(D^A&(T^D))+I[1]+3905402710&4294967295,N=A+(L<<12&4294967295|L>>>20),L=D+(T^N&(A^T))+I[2]+606105819&4294967295,D=N+(L<<17&4294967295|L>>>15),L=T+(A^D&(N^A))+I[3]+3250441966&4294967295,T=D+(L<<22&4294967295|L>>>10),L=A+(N^T&(D^N))+I[4]+4118548399&4294967295,A=T+(L<<7&4294967295|L>>>25),L=N+(D^A&(T^D))+I[5]+1200080426&4294967295,N=A+(L<<12&4294967295|L>>>20),L=D+(T^N&(A^T))+I[6]+2821735955&4294967295,D=N+(L<<17&4294967295|L>>>15),L=T+(A^D&(N^A))+I[7]+4249261313&4294967295,T=D+(L<<22&4294967295|L>>>10),L=A+(N^T&(D^N))+I[8]+1770035416&4294967295,A=T+(L<<7&4294967295|L>>>25),L=N+(D^A&(T^D))+I[9]+2336552879&4294967295,N=A+(L<<12&4294967295|L>>>20),L=D+(T^N&(A^T))+I[10]+4294925233&4294967295,D=N+(L<<17&4294967295|L>>>15),L=T+(A^D&(N^A))+I[11]+2304563134&4294967295,T=D+(L<<22&4294967295|L>>>10),L=A+(N^T&(D^N))+I[12]+1804603682&4294967295,A=T+(L<<7&4294967295|L>>>25),L=N+(D^A&(T^D))+I[13]+4254626195&4294967295,N=A+(L<<12&4294967295|L>>>20),L=D+(T^N&(A^T))+I[14]+2792965006&4294967295,D=N+(L<<17&4294967295|L>>>15),L=T+(A^D&(N^A))+I[15]+1236535329&4294967295,T=D+(L<<22&4294967295|L>>>10),L=A+(D^N&(T^D))+I[1]+4129170786&4294967295,A=T+(L<<5&4294967295|L>>>27),L=N+(T^D&(A^T))+I[6]+3225465664&4294967295,N=A+(L<<9&4294967295|L>>>23),L=D+(A^T&(N^A))+I[11]+643717713&4294967295,D=N+(L<<14&4294967295|L>>>18),L=T+(N^A&(D^N))+I[0]+3921069994&4294967295,T=D+(L<<20&4294967295|L>>>12),L=A+(D^N&(T^D))+I[5]+3593408605&4294967295,A=T+(L<<5&4294967295|L>>>27),L=N+(T^D&(A^T))+I[10]+38016083&4294967295,N=A+(L<<9&4294967295|L>>>23),L=D+(A^T&(N^A))+I[15]+3634488961&4294967295,D=N+(L<<14&4294967295|L>>>18),L=T+(N^A&(D^N))+I[4]+3889429448&4294967295,T=D+(L<<20&4294967295|L>>>12),L=A+(D^N&(T^D))+I[9]+568446438&4294967295,A=T+(L<<5&4294967295|L>>>27),L=N+(T^D&(A^T))+I[14]+3275163606&4294967295,N=A+(L<<9&4294967295|L>>>23),L=D+(A^T&(N^A))+I[3]+4107603335&4294967295,D=N+(L<<14&4294967295|L>>>18),L=T+(N^A&(D^N))+I[8]+1163531501&4294967295,T=D+(L<<20&4294967295|L>>>12),L=A+(D^N&(T^D))+I[13]+2850285829&4294967295,A=T+(L<<5&4294967295|L>>>27),L=N+(T^D&(A^T))+I[2]+4243563512&4294967295,N=A+(L<<9&4294967295|L>>>23),L=D+(A^T&(N^A))+I[7]+1735328473&4294967295,D=N+(L<<14&4294967295|L>>>18),L=T+(N^A&(D^N))+I[12]+2368359562&4294967295,T=D+(L<<20&4294967295|L>>>12),L=A+(T^D^N)+I[5]+4294588738&4294967295,A=T+(L<<4&4294967295|L>>>28),L=N+(A^T^D)+I[8]+2272392833&4294967295,N=A+(L<<11&4294967295|L>>>21),L=D+(N^A^T)+I[11]+1839030562&4294967295,D=N+(L<<16&4294967295|L>>>16),L=T+(D^N^A)+I[14]+4259657740&4294967295,T=D+(L<<23&4294967295|L>>>9),L=A+(T^D^N)+I[1]+2763975236&4294967295,A=T+(L<<4&4294967295|L>>>28),L=N+(A^T^D)+I[4]+1272893353&4294967295,N=A+(L<<11&4294967295|L>>>21),L=D+(N^A^T)+I[7]+4139469664&4294967295,D=N+(L<<16&4294967295|L>>>16),L=T+(D^N^A)+I[10]+3200236656&4294967295,T=D+(L<<23&4294967295|L>>>9),L=A+(T^D^N)+I[13]+681279174&4294967295,A=T+(L<<4&4294967295|L>>>28),L=N+(A^T^D)+I[0]+3936430074&4294967295,N=A+(L<<11&4294967295|L>>>21),L=D+(N^A^T)+I[3]+3572445317&4294967295,D=N+(L<<16&4294967295|L>>>16),L=T+(D^N^A)+I[6]+76029189&4294967295,T=D+(L<<23&4294967295|L>>>9),L=A+(T^D^N)+I[9]+3654602809&4294967295,A=T+(L<<4&4294967295|L>>>28),L=N+(A^T^D)+I[12]+3873151461&4294967295,N=A+(L<<11&4294967295|L>>>21),L=D+(N^A^T)+I[15]+530742520&4294967295,D=N+(L<<16&4294967295|L>>>16),L=T+(D^N^A)+I[2]+3299628645&4294967295,T=D+(L<<23&4294967295|L>>>9),L=A+(D^(T|~N))+I[0]+4096336452&4294967295,A=T+(L<<6&4294967295|L>>>26),L=N+(T^(A|~D))+I[7]+1126891415&4294967295,N=A+(L<<10&4294967295|L>>>22),L=D+(A^(N|~T))+I[14]+2878612391&4294967295,D=N+(L<<15&4294967295|L>>>17),L=T+(N^(D|~A))+I[5]+4237533241&4294967295,T=D+(L<<21&4294967295|L>>>11),L=A+(D^(T|~N))+I[12]+1700485571&4294967295,A=T+(L<<6&4294967295|L>>>26),L=N+(T^(A|~D))+I[3]+2399980690&4294967295,N=A+(L<<10&4294967295|L>>>22),L=D+(A^(N|~T))+I[10]+4293915773&4294967295,D=N+(L<<15&4294967295|L>>>17),L=T+(N^(D|~A))+I[1]+2240044497&4294967295,T=D+(L<<21&4294967295|L>>>11),L=A+(D^(T|~N))+I[8]+1873313359&4294967295,A=T+(L<<6&4294967295|L>>>26),L=N+(T^(A|~D))+I[15]+4264355552&4294967295,N=A+(L<<10&4294967295|L>>>22),L=D+(A^(N|~T))+I[6]+2734768916&4294967295,D=N+(L<<15&4294967295|L>>>17),L=T+(N^(D|~A))+I[13]+1309151649&4294967295,T=D+(L<<21&4294967295|L>>>11),L=A+(D^(T|~N))+I[4]+4149444226&4294967295,A=T+(L<<6&4294967295|L>>>26),L=N+(T^(A|~D))+I[11]+3174756917&4294967295,N=A+(L<<10&4294967295|L>>>22),L=D+(A^(N|~T))+I[2]+718787259&4294967295,D=N+(L<<15&4294967295|L>>>17),L=T+(N^(D|~A))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(D+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+N&4294967295}n.prototype.u=function(R,A){A===void 0&&(A=R.length);for(var T=A-this.blockSize,I=this.B,D=this.h,N=0;N<A;){if(D==0)for(;N<=T;)i(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<A;)if(I[D++]=R.charCodeAt(N++),D==this.blockSize){i(this,I),D=0;break}}else for(;N<A;)if(I[D++]=R[N++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=A},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;var T=8*this.o;for(A=R.length-8;A<R.length;++A)R[A]=T&255,T/=256;for(this.u(R),R=Array(16),A=T=0;4>A;++A)for(var I=0;32>I;I+=8)R[T++]=this.g[A]>>>I&255;return R};function o(R,A){var T=u;return Object.prototype.hasOwnProperty.call(T,R)?T[R]:T[R]=A(R)}function l(R,A){this.h=A;for(var T=[],I=!0,D=R.length-1;0<=D;D--){var N=R[D]|0;I&&N==A||(T[D]=N,I=!1)}this.g=T}var u={};function h(R){return-128<=R&&128>R?o(R,function(A){return new l([A|0],0>A?-1:0)}):new l([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return m;if(0>R)return E(d(-R));for(var A=[],T=1,I=0;R>=T;I++)A[I]=R/T|0,T*=4294967296;return new l(A,0)}function g(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return E(g(R.substring(1),A));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(A,8)),I=m,D=0;D<R.length;D+=8){var N=Math.min(8,R.length-D),L=parseInt(R.substring(D,D+N),A);8>N?(N=d(Math.pow(A,N)),I=I.j(N).add(d(L))):(I=I.j(T),I=I.add(d(L)))}return I}var m=h(0),p=h(1),y=h(16777216);r=l.prototype,r.m=function(){if(x(this))return-E(this).m();for(var R=0,A=1,T=0;T<this.g.length;T++){var I=this.i(T);R+=(0<=I?I:4294967296+I)*A,A*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(x(this))return"-"+E(this).toString(R);for(var A=d(Math.pow(R,6)),T=this,I="";;){var D=S(T,A).g;T=w(T,D.j(A));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(R);if(T=D,b(T))return N+I;for(;6>N.length;)N="0"+N;I=N+I}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(var A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function x(R){return R.h==-1}r.l=function(R){return R=w(this,R),x(R)?-1:b(R)?0:1};function E(R){for(var A=R.g.length,T=[],I=0;I<A;I++)T[I]=~R.g[I];return new l(T,~R.h).add(p)}r.abs=function(){return x(this)?E(this):this},r.add=function(R){for(var A=Math.max(this.g.length,R.g.length),T=[],I=0,D=0;D<=A;D++){var N=I+(this.i(D)&65535)+(R.i(D)&65535),L=(N>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);I=L>>>16,N&=65535,L&=65535,T[D]=L<<16|N}return new l(T,T[T.length-1]&-2147483648?-1:0)};function w(R,A){return R.add(E(A))}r.j=function(R){if(b(this)||b(R))return m;if(x(this))return x(R)?E(this).j(E(R)):E(E(this).j(R));if(x(R))return E(this.j(E(R)));if(0>this.l(y)&&0>R.l(y))return d(this.m()*R.m());for(var A=this.g.length+R.g.length,T=[],I=0;I<2*A;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<R.g.length;D++){var N=this.i(I)>>>16,L=this.i(I)&65535,V=R.i(D)>>>16,J=R.i(D)&65535;T[2*I+2*D]+=L*J,C(T,2*I+2*D),T[2*I+2*D+1]+=N*J,C(T,2*I+2*D+1),T[2*I+2*D+1]+=L*V,C(T,2*I+2*D+1),T[2*I+2*D+2]+=N*V,C(T,2*I+2*D+2)}for(I=0;I<A;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=A;I<2*A;I++)T[I]=0;return new l(T,0)};function C(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function P(R,A){this.g=R,this.h=A}function S(R,A){if(b(A))throw Error("division by zero");if(b(R))return new P(m,m);if(x(R))return A=S(E(R),A),new P(E(A.g),E(A.h));if(x(A))return A=S(R,E(A)),new P(E(A.g),A.h);if(30<R.g.length){if(x(R)||x(A))throw Error("slowDivide_ only works with positive integers.");for(var T=p,I=A;0>=I.l(R);)T=O(T),I=O(I);var D=M(T,1),N=M(I,1);for(I=M(I,2),T=M(T,2);!b(I);){var L=N.add(I);0>=L.l(R)&&(D=D.add(T),N=L),I=M(I,1),T=M(T,1)}return A=w(R,D.j(A)),new P(D,A)}for(D=m;0<=R.l(A);){for(T=Math.max(1,Math.floor(R.m()/A.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),N=d(T),L=N.j(A);x(L)||0<L.l(R);)T-=I,N=d(T),L=N.j(A);b(N)&&(N=p),D=D.add(N),R=w(R,L)}return new P(D,R)}r.A=function(R){return S(this,R).h},r.and=function(R){for(var A=Math.max(this.g.length,R.g.length),T=[],I=0;I<A;I++)T[I]=this.i(I)&R.i(I);return new l(T,this.h&R.h)},r.or=function(R){for(var A=Math.max(this.g.length,R.g.length),T=[],I=0;I<A;I++)T[I]=this.i(I)|R.i(I);return new l(T,this.h|R.h)},r.xor=function(R){for(var A=Math.max(this.g.length,R.g.length),T=[],I=0;I<A;I++)T[I]=this.i(I)^R.i(I);return new l(T,this.h^R.h)};function O(R){for(var A=R.g.length+1,T=[],I=0;I<A;I++)T[I]=R.i(I)<<1|R.i(I-1)>>>31;return new l(T,R.h)}function M(R,A){var T=A>>5;A%=32;for(var I=R.g.length-T,D=[],N=0;N<I;N++)D[N]=0<A?R.i(N+T)>>>A|R.i(N+T+1)<<32-A:R.i(N+T);return new l(D,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,$C=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,Ms=l}).apply(typeof P_<"u"?P_:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GC,lu,KC,Ph,Xg,JC,QC,YC;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,F,q){return f==Array.prototype||f==Object.prototype||(f[F]=q.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var F=0;F<f.length;++F){var q=f[F];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var n=t(this);function i(f,F){if(F)e:{var q=n;f=f.split(".");for(var K=0;K<f.length-1;K++){var ce=f[K];if(!(ce in q))break e;q=q[ce]}f=f[f.length-1],K=q[f],F=F(K),F!=K&&F!=null&&e(q,f,{configurable:!0,writable:!0,value:F})}}function o(f,F){f instanceof String&&(f+="");var q=0,K=!1,ce={next:function(){if(!K&&q<f.length){var me=q++;return{value:F(me,f[me]),done:!1}}return K=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}i("Array.prototype.values",function(f){return f||function(){return o(this,function(F,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(f){var F=typeof f;return F=F!="object"?F:f?Array.isArray(f)?"array":F:"null",F=="array"||F=="object"&&typeof f.length=="number"}function d(f){var F=typeof f;return F=="object"&&f!=null||F=="function"}function g(f,F,q){return f.call.apply(f.bind,arguments)}function m(f,F,q){if(!f)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,K),f.apply(F,ce)}}return function(){return f.apply(F,arguments)}}function p(f,F,q){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:m,p.apply(null,arguments)}function y(f,F){var q=Array.prototype.slice.call(arguments,1);return function(){var K=q.slice();return K.push.apply(K,arguments),f.apply(this,K)}}function b(f,F){function q(){}q.prototype=F.prototype,f.aa=F.prototype,f.prototype=new q,f.prototype.constructor=f,f.Qb=function(K,ce,me){for(var ke=Array(arguments.length-2),St=2;St<arguments.length;St++)ke[St-2]=arguments[St];return F.prototype[ce].apply(K,ke)}}function x(f){const F=f.length;if(0<F){const q=Array(F);for(let K=0;K<F;K++)q[K]=f[K];return q}return[]}function E(f,F){for(let q=1;q<arguments.length;q++){const K=arguments[q];if(h(K)){const ce=f.length||0,me=K.length||0;f.length=ce+me;for(let ke=0;ke<me;ke++)f[ce+ke]=K[ke]}else f.push(K)}}class w{constructor(F,q){this.i=F,this.j=q,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function C(f){return/^[\s\xa0]*$/.test(f)}function P(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function S(f){return S[" "](f),f}S[" "]=function(){};var O=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function M(f,F,q){for(const K in f)F.call(q,f[K],K,f)}function R(f,F){for(const q in f)F.call(void 0,f[q],q,f)}function A(f){const F={};for(const q in f)F[q]=f[q];return F}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(f,F){let q,K;for(let ce=1;ce<arguments.length;ce++){K=arguments[ce];for(q in K)f[q]=K[q];for(let me=0;me<T.length;me++)q=T[me],Object.prototype.hasOwnProperty.call(K,q)&&(f[q]=K[q])}}function D(f){var F=1;f=f.split(":");const q=[];for(;0<F&&f.length;)q.push(f.shift()),F--;return f.length&&q.push(f.join(":")),q}function N(f){u.setTimeout(()=>{throw f},0)}function L(){var f=G;let F=null;return f.g&&(F=f.g,f.g=f.g.next,f.g||(f.h=null),F.next=null),F}class V{constructor(){this.h=this.g=null}add(F,q){const K=J.get();K.set(F,q),this.h?this.h.next=K:this.g=K,this.h=K}}var J=new w(()=>new re,f=>f.reset());class re{constructor(){this.next=this.g=this.h=null}set(F,q){this.h=F,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ie=!1,G=new V,W=()=>{const f=u.Promise.resolve(void 0);Z=()=>{f.then(B)}};var B=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(q){N(q)}var F=J;F.j(f),100>F.h&&(F.h++,f.next=F.g,F.g=f)}ie=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(f,F){this.type=f,this.g=this.target=F,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,F=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const q=()=>{};u.addEventListener("test",q,F),u.removeEventListener("test",q,F)}catch{}return f}();function ee(f,F){if(H.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var q=this.type=f.type,K=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=F,F=f.relatedTarget){if(O){e:{try{S(F.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(F=null)}}else q=="mouseover"?F=f.fromElement:q=="mouseout"&&(F=f.toElement);this.relatedTarget=F,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:$[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ee.aa.h.call(this)}}b(ee,H);var $={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),Q=0;function te(f,F,q,K,ce){this.listener=f,this.proxy=null,this.src=F,this.type=q,this.capture=!!K,this.ha=ce,this.key=++Q,this.da=this.fa=!1}function ae(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ge(f){this.src=f,this.g={},this.h=0}ge.prototype.add=function(f,F,q,K,ce){var me=f.toString();f=this.g[me],f||(f=this.g[me]=[],this.h++);var ke=Re(f,F,K,ce);return-1<ke?(F=f[ke],q||(F.fa=!1)):(F=new te(F,this.src,me,!!K,ce),F.fa=q,f.push(F)),F};function Ce(f,F){var q=F.type;if(q in f.g){var K=f.g[q],ce=Array.prototype.indexOf.call(K,F,void 0),me;(me=0<=ce)&&Array.prototype.splice.call(K,ce,1),me&&(ae(F),f.g[q].length==0&&(delete f.g[q],f.h--))}}function Re(f,F,q,K){for(var ce=0;ce<f.length;++ce){var me=f[ce];if(!me.da&&me.listener==F&&me.capture==!!q&&me.ha==K)return ce}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),Ne={};function Fe(f,F,q,K,ce){if(Array.isArray(F)){for(var me=0;me<F.length;me++)Fe(f,F[me],q,K,ce);return null}return q=ze(q),f&&f[Y]?f.K(F,q,d(K)?!!K.capture:!1,ce):Ze(f,F,q,!1,K,ce)}function Ze(f,F,q,K,ce,me){if(!F)throw Error("Invalid event type");var ke=d(ce)?!!ce.capture:!!ce,St=$e(f);if(St||(f[Pe]=St=new ge(f)),q=St.add(F,q,K,ke,me),q.proxy)return q;if(K=ue(),q.proxy=K,K.src=f,K.listener=q,f.addEventListener)ne||(ce=ke),ce===void 0&&(ce=!1),f.addEventListener(F.toString(),K,ce);else if(f.attachEvent)f.attachEvent(Te(F.toString()),K);else if(f.addListener&&f.removeListener)f.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return q}function ue(){function f(q){return F.call(f.src,f.listener,q)}const F=ye;return f}function fe(f,F,q,K,ce){if(Array.isArray(F))for(var me=0;me<F.length;me++)fe(f,F[me],q,K,ce);else K=d(K)?!!K.capture:!!K,q=ze(q),f&&f[Y]?(f=f.i,F=String(F).toString(),F in f.g&&(me=f.g[F],q=Re(me,q,K,ce),-1<q&&(ae(me[q]),Array.prototype.splice.call(me,q,1),me.length==0&&(delete f.g[F],f.h--)))):f&&(f=$e(f))&&(F=f.g[F.toString()],f=-1,F&&(f=Re(F,q,K,ce)),(q=-1<f?F[f]:null)&&Ee(q))}function Ee(f){if(typeof f!="number"&&f&&!f.da){var F=f.src;if(F&&F[Y])Ce(F.i,f);else{var q=f.type,K=f.proxy;F.removeEventListener?F.removeEventListener(q,K,f.capture):F.detachEvent?F.detachEvent(Te(q),K):F.addListener&&F.removeListener&&F.removeListener(K),(q=$e(F))?(Ce(q,f),q.h==0&&(q.src=null,F[Pe]=null)):ae(f)}}}function Te(f){return f in Ne?Ne[f]:Ne[f]="on"+f}function ye(f,F){if(f.da)f=!0;else{F=new ee(F,this);var q=f.listener,K=f.ha||f.src;f.fa&&Ee(f),f=q.call(K,F)}return f}function $e(f){return f=f[Pe],f instanceof ge?f:null}var Le="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(f){return typeof f=="function"?f:(f[Le]||(f[Le]=function(F){return f.handleEvent(F)}),f[Le])}function Ke(){U.call(this),this.i=new ge(this),this.M=this,this.F=null}b(Ke,U),Ke.prototype[Y]=!0,Ke.prototype.removeEventListener=function(f,F,q,K){fe(this,f,F,q,K)};function nt(f,F){var q,K=f.F;if(K)for(q=[];K;K=K.F)q.push(K);if(f=f.M,K=F.type||F,typeof F=="string")F=new H(F,f);else if(F instanceof H)F.target=F.target||f;else{var ce=F;F=new H(K,f),I(F,ce)}if(ce=!0,q)for(var me=q.length-1;0<=me;me--){var ke=F.g=q[me];ce=it(ke,K,!0,F)&&ce}if(ke=F.g=f,ce=it(ke,K,!0,F)&&ce,ce=it(ke,K,!1,F)&&ce,q)for(me=0;me<q.length;me++)ke=F.g=q[me],ce=it(ke,K,!1,F)&&ce}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var f=this.i,F;for(F in f.g){for(var q=f.g[F],K=0;K<q.length;K++)ae(q[K]);delete f.g[F],f.h--}}this.F=null},Ke.prototype.K=function(f,F,q,K){return this.i.add(String(f),F,!1,q,K)},Ke.prototype.L=function(f,F,q,K){return this.i.add(String(f),F,!0,q,K)};function it(f,F,q,K){if(F=f.i.g[String(F)],!F)return!0;F=F.concat();for(var ce=!0,me=0;me<F.length;++me){var ke=F[me];if(ke&&!ke.da&&ke.capture==q){var St=ke.listener,on=ke.ha||ke.src;ke.fa&&Ce(f.i,ke),ce=St.call(on,K)!==!1&&ce}}return ce&&!K.defaultPrevented}function Gn(f,F,q){if(typeof f=="function")q&&(f=p(f,q));else if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:u.setTimeout(f,F||0)}function vt(f){f.g=Gn(()=>{f.g=null,f.i&&(f.i=!1,vt(f))},f.l);const F=f.h;f.h=null,f.m.apply(null,F)}class kt extends U{constructor(F,q){super(),this.m=F,this.l=q,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(f){U.call(this),this.h=f,this.g={}}b(Zt,U);var kr=[];function rs(f){M(f.g,function(F,q){this.g.hasOwnProperty(q)&&Ee(F)},f),f.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),rs(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ml=u.JSON.stringify,gl=u.JSON.parse,yl=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function io(){}io.prototype.h=null;function Ko(f){return f.h||(f.h=f.i())}function Jo(){}var yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){H.call(this,"d")}b(Zr,H);function Qo(){H.call(this,"c")}b(Qo,H);var ei={},vl=null;function so(){return vl=vl||new Ke}ei.La="serverreachability";function _l(f){H.call(this,ei.La,f)}b(_l,H);function Ii(f){const F=so();nt(F,new _l(F))}ei.STAT_EVENT="statevent";function wl(f,F){H.call(this,ei.STAT_EVENT,f),this.stat=F}b(wl,H);function Qt(f){const F=so();nt(F,new wl(F,f))}ei.Ma="timingevent";function Yo(f,F){H.call(this,ei.Ma,f),this.size=F}b(Yo,H);function Rr(f,F){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},F)}function oo(){this.g=!0}oo.prototype.xa=function(){this.g=!1};function ao(f,F,q,K,ce,me){f.info(function(){if(f.g)if(me)for(var ke="",St=me.split("&"),on=0;on<St.length;on++){var _t=St[on].split("=");if(1<_t.length){var pn=_t[0];_t=_t[1];var en=pn.split("_");ke=2<=en.length&&en[1]=="type"?ke+(pn+"="+_t+"&"):ke+(pn+"=redacted&")}}else ke=null;else ke=me;return"XMLHTTP REQ ("+K+") [attempt "+ce+"]: "+F+`
`+q+`
`+ke})}function Xo(f,F,q,K,ce,me,ke){f.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+ce+"]: "+F+`
`+q+`
`+me+" "+ke})}function Pr(f,F,q,K){f.info(function(){return"XMLHTTP TEXT ("+F+"): "+mf(f,q)+(K?" "+K:"")})}function El(f,F){f.info(function(){return"TIMEOUT: "+F})}oo.prototype.info=function(){};function mf(f,F){if(!f.g)return F;if(!F)return null;try{var q=JSON.parse(F);if(q){for(f=0;f<q.length;f++)if(Array.isArray(q[f])){var K=q[f];if(!(2>K.length)){var ce=K[1];if(Array.isArray(ce)&&!(1>ce.length)){var me=ce[0];if(me!="noop"&&me!="stop"&&me!="close")for(var ke=1;ke<ce.length;ke++)ce[ke]=""}}}}return ml(q)}catch{return F}}var Zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nr;function lo(){}b(lo,io),lo.prototype.g=function(){return new XMLHttpRequest},lo.prototype.i=function(){return{}},Nr=new lo;function Or(f,F,q,K){this.j=f,this.i=F,this.l=q,this.R=K||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sc}function sc(){this.i=null,this.g="",this.h=!1}var Cl={},ea={};function ta(f,F,q){f.L=1,f.v=ls(or(F)),f.m=q,f.P=!0,Al(f,null)}function Al(f,F){f.F=Date.now(),Rt(f),f.A=or(f.v);var q=f.A,K=f.R;Array.isArray(K)||(K=[String(K)]),cs(q.i,"t",K),f.C=0,q=f.j.J,f.h=new sc,f.g=Ac(f.j,q?F:null,!f.m),0<f.O&&(f.M=new kt(p(f.Y,f,f.g),f.O)),F=f.U,q=f.g,K=f.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(kr[0]=ce.toString()),ce=kr);for(var me=0;me<ce.length;me++){var ke=Fe(q,ce[me],K||F.handleEvent,!1,F.h||F);if(!ke)break;F.g[ke.key]=ke}F=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,F)):(f.u="GET",f.g.ea(f.A,f.u,null,F)),Ii(),ao(f.i,f.u,f.A,f.l,f.R,f.m)}Or.prototype.ca=function(f){f=f.target;const F=this.M;F&&Jn(f)==3?F.j():this.Y(f)},Or.prototype.Y=function(f){try{if(f==this.g)e:{const en=Jn(this.g);var F=this.g.Ba();const wr=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||Dl(this.g)))){this.J||en!=4||F==7||(F==8||0>=wr?Ii(3):Ii(2)),uo(this);var q=this.g.Z();this.X=q;t:if(oc(this)){var K=Dl(this.g);f="";var ce=K.length,me=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vr(this),is(this);var ke="";break t}this.h.i=new u.TextDecoder}for(F=0;F<ce;F++)this.h.h=!0,f+=this.h.i.decode(K[F],{stream:!(me&&F==ce-1)});K.length=0,this.h.g+=f,this.C=0,ke=this.h.g}else ke=this.g.oa();if(this.o=q==200,Xo(this.i,this.u,this.A,this.l,this.R,en,q),this.o){if(this.T&&!this.K){t:{if(this.g){var St,on=this.g;if((St=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(St)){var _t=St;break t}}_t=null}if(q=_t)Pr(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bl(this,q);else{this.o=!1,this.s=3,Qt(12),vr(this),is(this);break e}}if(this.P){q=!0;let lr;for(;!this.J&&this.C<ke.length;)if(lr=gf(this,ke),lr==ea){en==4&&(this.s=4,Qt(14),q=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==Cl){this.s=4,Qt(15),Pr(this.i,this.l,ke,"[Invalid Chunk]"),q=!1;break}else Pr(this.i,this.l,lr,null),bl(this,lr);if(oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||ke.length!=0||this.h.h||(this.s=1,Qt(16),q=!1),this.o=this.o&&q,!q)Pr(this.i,this.l,ke,"[Invalid Chunked Response]"),vr(this),is(this);else if(0<ke.length&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.ba&&!pn.M&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+ke.length),Rl(pn),pn.M=!0,Qt(11))}}else Pr(this.i,this.l,ke,null),bl(this,ke);en==4&&vr(this),this.o&&!this.J&&(en==4?da(this.j,this):(this.o=!1,Rt(this)))}else aa(this.g),q==400&&0<ke.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),vr(this),is(this)}}}catch{}finally{}};function oc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function gf(f,F){var q=f.C,K=F.indexOf(`
`,q);return K==-1?ea:(q=Number(F.substring(q,K)),isNaN(q)?Cl:(K+=1,K+q>F.length?ea:(F=F.slice(K,K+q),f.C=K+q,F)))}Or.prototype.cancel=function(){this.J=!0,vr(this)};function Rt(f){f.S=Date.now()+f.I,ac(f,f.I)}function ac(f,F){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Rr(p(f.ba,f),F)}function uo(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Or.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(El(this.i,this.A),this.L!=2&&(Ii(),Qt(17)),vr(this),this.s=2,is(this)):ac(this,this.S-f)};function is(f){f.j.G==0||f.J||da(f.j,f)}function vr(f){uo(f);var F=f.M;F&&typeof F.ma=="function"&&F.ma(),f.M=null,rs(f.U),f.g&&(F=f.g,f.g=null,F.abort(),F.ma())}function bl(f,F){try{var q=f.j;if(q.G!=0&&(q.g==f||Bn(q.h,f))){if(!f.K&&Bn(q.h,f)&&q.G==3){try{var K=q.Da.g.parse(F)}catch{K=null}if(Array.isArray(K)&&K.length==3){var ce=K;if(ce[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<f.F)ha(q),Mr(q);else break e;ca(q),Qt(18)}}else q.za=ce[1],0<q.za-q.T&&37500>ce[2]&&q.F&&q.v==0&&!q.C&&(q.C=Rr(p(q.Za,q),6e3));if(1>=uc(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else Ni(q,11)}else if((f.K||q.g==f)&&ha(q),!C(F))for(ce=q.Da.g.parse(F),F=0;F<ce.length;F++){let _t=ce[F];if(q.T=_t[0],_t=_t[1],q.G==2)if(_t[0]=="c"){q.K=_t[1],q.ia=_t[2];const pn=_t[3];pn!=null&&(q.la=pn,q.j.info("VER="+q.la));const en=_t[4];en!=null&&(q.Aa=en,q.j.info("SVER="+q.Aa));const wr=_t[5];wr!=null&&typeof wr=="number"&&0<wr&&(K=1.5*wr,q.L=K,q.j.info("backChannelRequestTimeoutMs_="+K)),K=q;const lr=f.g;if(lr){const yo=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var me=K.h;me.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(xl(me,me.h),me.h=null))}if(K.D){const pa=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;pa&&(K.ya=pa,It(K.I,K.D,pa))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-f.F,q.j.info("Handshake RTT: "+q.R+"ms")),K=q;var ke=f;if(K.qa=Cc(K,K.J?K.ia:null,K.W),ke.K){cc(K.h,ke);var St=ke,on=K.L;on&&(St.I=on),St.B&&(uo(St),Rt(St)),K.g=ke}else go(K);0<q.i.length&&ii(q)}else _t[0]!="stop"&&_t[0]!="close"||Ni(q,7);else q.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Ni(q,7):En(q):_t[0]!="noop"&&q.l&&q.l.ta(_t),q.v=0)}}Ii(4)}catch{}}var lc=class{constructor(f,F){this.g=f,this.map=F}};function co(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function uc(f){return f.h?1:f.g?f.g.size:0}function Bn(f,F){return f.h?f.h==F:f.g?f.g.has(F):!1}function xl(f,F){f.g?f.g.add(F):f.h=F}function cc(f,F){f.h&&f.h==F?f.h=null:f.g&&f.g.has(F)&&f.g.delete(F)}co.prototype.cancel=function(){if(this.i=hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function hc(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let F=f.i;for(const q of f.g.values())F=F.concat(q.D);return F}return x(f.i)}function na(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var F=[],q=f.length,K=0;K<q;K++)F.push(f[K]);return F}F=[],q=0;for(K in f)F[q++]=f[K];return F}function ra(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var F=[];f=f.length;for(var q=0;q<f;q++)F.push(q);return F}F=[],q=0;for(const K in f)F[q++]=K;return F}}}function ss(f,F){if(f.forEach&&typeof f.forEach=="function")f.forEach(F,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,F,void 0);else for(var q=ra(f),K=na(f),ce=K.length,me=0;me<ce;me++)F.call(void 0,K[me],q&&q[me],f)}var ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yf(f,F){if(f){f=f.split("&");for(var q=0;q<f.length;q++){var K=f[q].indexOf("="),ce=null;if(0<=K){var me=f[q].substring(0,K);ce=f[q].substring(K+1)}else me=f[q];F(me,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Di(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Di){this.h=f.h,fo(this,f.j),this.o=f.o,this.g=f.g,os(this,f.s),this.l=f.l;var F=f.i,q=new ti;q.i=F.i,F.g&&(q.g=new Map(F.g),q.h=F.h),as(this,q),this.m=f.m}else f&&(F=String(f).match(ho))?(this.h=!1,fo(this,F[1]||"",!0),this.o=yt(F[2]||""),this.g=yt(F[3]||"",!0),os(this,F[4]),this.l=yt(F[5]||"",!0),as(this,F[6]||"",!0),this.m=yt(F[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Di.prototype.toString=function(){var f=[],F=this.j;F&&f.push(us(F,ia,!0),":");var q=this.g;return(q||F=="file")&&(f.push("//"),(F=this.o)&&f.push(us(F,ia,!0),"@"),f.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&f.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&f.push("/"),f.push(us(q,q.charAt(0)=="/"?pc:fc,!0))),(q=this.i.toString())&&f.push("?",q),(q=this.m)&&f.push("#",us(q,Sl)),f.join("")};function or(f){return new Di(f)}function fo(f,F,q){f.j=q?yt(F,!0):F,f.j&&(f.j=f.j.replace(/:$/,""))}function os(f,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);f.s=F}else f.s=null}function as(f,F,q){F instanceof ti?(f.i=F,ni(f.i,f.h)):(q||(F=us(F,mc)),f.i=new ti(F,f.h))}function It(f,F,q){f.i.set(F,q)}function ls(f){return It(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function yt(f,F){return f?F?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function us(f,F,q){return typeof f=="string"?(f=encodeURI(f).replace(F,dc),q&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function dc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ia=/[#\/\?@]/g,fc=/[#\?:]/g,pc=/[#\?]/g,mc=/[#\?@]/g,Sl=/#/g;function ti(f,F){this.h=this.g=null,this.i=f||null,this.j=!!F}function wn(f){f.g||(f.g=new Map,f.h=0,f.i&&yf(f.i,function(F,q){f.add(decodeURIComponent(F.replace(/\+/g," ")),q)}))}r=ti.prototype,r.add=function(f,F){wn(this),this.i=null,f=_r(this,f);var q=this.g.get(f);return q||this.g.set(f,q=[]),q.push(F),this.h+=1,this};function Lr(f,F){wn(f),F=_r(f,F),f.g.has(F)&&(f.i=null,f.h-=f.g.get(F).length,f.g.delete(F))}function Fr(f,F){return wn(f),F=_r(f,F),f.g.has(F)}r.forEach=function(f,F){wn(this),this.g.forEach(function(q,K){q.forEach(function(ce){f.call(F,ce,K,this)},this)},this)},r.na=function(){wn(this);const f=Array.from(this.g.values()),F=Array.from(this.g.keys()),q=[];for(let K=0;K<F.length;K++){const ce=f[K];for(let me=0;me<ce.length;me++)q.push(F[K])}return q},r.V=function(f){wn(this);let F=[];if(typeof f=="string")Fr(this,f)&&(F=F.concat(this.g.get(_r(this,f))));else{f=Array.from(this.g.values());for(let q=0;q<f.length;q++)F=F.concat(f[q])}return F},r.set=function(f,F){return wn(this),this.i=null,f=_r(this,f),Fr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[F]),this.h+=1,this},r.get=function(f,F){return f?(f=this.V(f),0<f.length?String(f[0]):F):F};function cs(f,F,q){Lr(f,F),0<q.length&&(f.i=null,f.g.set(_r(f,F),x(q)),f.h+=q.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],F=Array.from(this.g.keys());for(var q=0;q<F.length;q++){var K=F[q];const me=encodeURIComponent(String(K)),ke=this.V(K);for(K=0;K<ke.length;K++){var ce=me;ke[K]!==""&&(ce+="="+encodeURIComponent(String(ke[K]))),f.push(ce)}}return this.i=f.join("&")};function _r(f,F){return F=String(F),f.j&&(F=F.toLowerCase()),F}function ni(f,F){F&&!f.j&&(wn(f),f.i=null,f.g.forEach(function(q,K){var ce=K.toLowerCase();K!=ce&&(Lr(this,K),cs(this,ce,q))},f)),f.j=F}function vf(f,F){const q=new oo;if(u.Image){const K=new Image;K.onload=y(Kn,q,"TestLoadImage: loaded",!0,F,K),K.onerror=y(Kn,q,"TestLoadImage: error",!1,F,K),K.onabort=y(Kn,q,"TestLoadImage: abort",!1,F,K),K.ontimeout=y(Kn,q,"TestLoadImage: timeout",!1,F,K),u.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=f}else F(!1)}function gc(f,F){const q=new oo,K=new AbortController,ce=setTimeout(()=>{K.abort(),Kn(q,"TestPingServer: timeout",!1,F)},1e4);fetch(f,{signal:K.signal}).then(me=>{clearTimeout(ce),me.ok?Kn(q,"TestPingServer: ok",!0,F):Kn(q,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(ce),Kn(q,"TestPingServer: error",!1,F)})}function Kn(f,F,q,K,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),K(q)}catch{}}function _f(){this.g=new yl}function yc(f,F,q){const K=q||"";try{ss(f,function(ce,me){let ke=ce;d(ce)&&(ke=ml(ce)),F.push(K+me+"="+encodeURIComponent(ke))})}catch(ce){throw F.push(K+"type="+encodeURIComponent("_badmap")),ce}}function ki(f){this.l=f.Ub||null,this.j=f.eb||!1}b(ki,io),ki.prototype.g=function(){return new po(this.l,this.j)},ki.prototype.i=function(f){return function(){return f}}({});function po(f,F){Ke.call(this),this.D=f,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(po,Ke),r=po.prototype,r.open=function(f,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=F,this.readyState=1,Br(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(F.body=f),(this.D||u).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function vc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var F=f.value?f.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!f.done}))&&(this.response=this.responseText+=F)}f.done?jr(this):Br(this),this.readyState==3&&vc(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,jr(this))},r.Qa=function(f){this.g&&(this.response=f,jr(this))},r.ga=function(){this.g&&jr(this)};function jr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Br(f)}r.setRequestHeader=function(f,F){this.u.append(f,F)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],F=this.h.entries();for(var q=F.next();!q.done;)q=q.value,f.push(q[0]+": "+q[1]),q=F.next();return f.join(`\r
`)};function Br(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ri(f){let F="";return M(f,function(q,K){F+=K,F+=":",F+=q,F+=`\r
`}),F}function hs(f,F,q){e:{for(K in q){var K=!1;break e}K=!0}K||(q=Ri(q),typeof f=="string"?q!=null&&encodeURIComponent(String(q)):It(f,F,q))}function qt(f){Ke.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(qt,Ke);var wf=/^https?$/i,Tl=["POST","PUT"];r=qt.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,F,q,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);F=F?F.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nr.g(),this.v=this.o?Ko(this.o):Ko(Nr),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(F,String(f),!0),this.B=!1}catch(me){mo(this,me);return}if(f=q||"",q=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var ce in K)q.set(ce,K[ce]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const me of K.keys())q.set(me,K.get(me));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(q.keys()).find(me=>me.toLowerCase()=="content-type"),ce=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Tl,F,void 0))||K||ce||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,ke]of q)this.g.setRequestHeader(me,ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oa(this),this.u=!0,this.g.send(f),this.u=!1}catch(me){mo(this,me)}};function mo(f,F){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=F,f.m=5,sa(f),ar(f)}function sa(f){f.A||(f.A=!0,nt(f,"complete"),nt(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,nt(this,"complete"),nt(this,"abort"),ar(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),qt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Il(this):this.bb())},r.bb=function(){Il(this)};function Il(f){if(f.h&&typeof l<"u"&&(!f.v[1]||Jn(f)!=4||f.Z()!=2)){if(f.u&&Jn(f)==4)Gn(f.Ea,0,f);else if(nt(f,"readystatechange"),Jn(f)==4){f.h=!1;try{const ke=f.Z();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var q;if(!(q=F)){var K;if(K=ke===0){var ce=String(f.D).match(ho)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),K=!wf.test(ce?ce.toLowerCase():"")}q=K}if(q)nt(f,"complete"),nt(f,"success");else{f.m=6;try{var me=2<Jn(f)?f.g.statusText:""}catch{me=""}f.l=me+" ["+f.Z()+"]",sa(f)}}finally{ar(f)}}}}function ar(f,F){if(f.g){oa(f);const q=f.g,K=f.v[0]?()=>{}:null;f.g=null,f.v=null,F||nt(f,"ready");try{q.onreadystatechange=K}catch{}}}function oa(f){f.I&&(u.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function Jn(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var F=this.g.responseText;return f&&F.indexOf(f)==0&&(F=F.substring(f.length)),gl(F)}};function Dl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(f){const F={};f=(f.g&&2<=Jn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<f.length;K++){if(C(f[K]))continue;var q=D(f[K]);const ce=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const me=F[ce]||[];F[ce]=me,me.push(q)}R(F,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ri(f,F,q){return q&&q.internalChannelParams&&q.internalChannelParams[f]||F}function kl(f){this.Aa=0,this.i=[],this.j=new oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ri("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ri("baseRetryDelayMs",5e3,f),this.cb=ri("retryDelaySeedMs",1e4,f),this.Wa=ri("forwardChannelMaxRetries",2,f),this.wa=ri("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new co(f&&f.concurrentRequestLimit),this.Da=new _f,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=kl.prototype,r.la=8,r.G=1,r.connect=function(f,F,q,K){Qt(0),this.W=f,this.H=F||{},q&&K!==void 0&&(this.H.OSID=q,this.H.OAID=K),this.F=this.X,this.I=Cc(this,null,this.W),ii(this)};function En(f){if(la(f),f.G==3){var F=f.U++,q=or(f.I);if(It(q,"SID",f.K),It(q,"RID",F),It(q,"TYPE","terminate"),Pi(f,q),F=new Or(f,f.j,F),F.L=2,F.v=ls(or(q)),q=!1,u.navigator&&u.navigator.sendBeacon)try{q=u.navigator.sendBeacon(F.v.toString(),"")}catch{}!q&&u.Image&&(new Image().src=F.v,q=!0),q||(F.g=Ac(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Rt(F)}Ec(f)}function Mr(f){f.g&&(Rl(f),f.g.cancel(),f.g=null)}function la(f){Mr(f),f.u&&(u.clearTimeout(f.u),f.u=null),ha(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function ii(f){if(!sr(f.h)&&!f.s){f.s=!0;var F=f.Ga;Z||W(),ie||(Z(),ie=!0),G.add(F,f),f.B=0}}function Ef(f,F){return uc(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=F.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Rr(p(f.Ga,f,F),wc(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ce=new Or(this,this.j,f);let me=this.o;if(this.S&&(me?(me=A(me),I(me,this.S)):me=this.S),this.m!==null||this.O||(ce.H=me,me=null),this.P)e:{for(var F=0,q=0;q<this.i.length;q++){t:{var K=this.i[q];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(F+=K,4096<F){F=q;break e}if(F===4096||q===this.i.length-1){F=q+1;break e}}F=1e3}else F=1e3;F=ds(this,ce,F),q=or(this.I),It(q,"RID",f),It(q,"CVER",22),this.D&&It(q,"X-HTTP-Session-Id",this.D),Pi(this,q),me&&(this.O?F="headers="+encodeURIComponent(String(Ri(me)))+"&"+F:this.m&&hs(q,this.m,me)),xl(this.h,ce),this.Ua&&It(q,"TYPE","init"),this.P?(It(q,"$req",F),It(q,"SID","null"),ce.T=!0,ta(ce,q,null)):ta(ce,q,F),this.G=2}}else this.G==3&&(f?ua(this,f):this.i.length==0||sr(this.h)||ua(this))};function ua(f,F){var q;F?q=F.l:q=f.U++;const K=or(f.I);It(K,"SID",f.K),It(K,"RID",q),It(K,"AID",f.T),Pi(f,K),f.m&&f.o&&hs(K,f.m,f.o),q=new Or(f,f.j,q,f.B+1),f.m===null&&(q.H=f.o),F&&(f.i=F.D.concat(f.i)),F=ds(f,q,1e3),q.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),xl(f.h,q),ta(q,K,F)}function Pi(f,F){f.H&&M(f.H,function(q,K){It(F,K,q)}),f.l&&ss({},function(q,K){It(F,K,q)})}function ds(f,F,q){q=Math.min(f.i.length,q);var K=f.l?p(f.l.Na,f.l,f):null;e:{var ce=f.i;let me=-1;for(;;){const ke=["count="+q];me==-1?0<q?(me=ce[0].g,ke.push("ofs="+me)):me=0:ke.push("ofs="+me);let St=!0;for(let on=0;on<q;on++){let _t=ce[on].g;const pn=ce[on].map;if(_t-=me,0>_t)me=Math.max(0,ce[on].g-100),St=!1;else try{yc(pn,ke,"req"+_t+"_")}catch{K&&K(pn)}}if(St){K=ke.join("&");break e}}}return f=f.i.splice(0,q),F.D=f,K}function go(f){if(!f.g&&!f.u){f.Y=1;var F=f.Fa;Z||W(),ie||(Z(),ie=!0),G.add(F,f),f.v=0}}function ca(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Rr(p(f.Fa,f),wc(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,_c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Rr(p(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),Mr(this),_c(this))};function Rl(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function _c(f){f.g=new Or(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var F=or(f.qa);It(F,"RID","rpc"),It(F,"SID",f.K),It(F,"AID",f.T),It(F,"CI",f.F?"0":"1"),!f.F&&f.ja&&It(F,"TO",f.ja),It(F,"TYPE","xmlhttp"),Pi(f,F),f.m&&f.o&&hs(F,f.m,f.o),f.L&&(f.g.I=f.L);var q=f.g;f=f.ia,q.L=1,q.v=ls(or(F)),q.m=null,q.P=!0,Al(q,f)}r.Za=function(){this.C!=null&&(this.C=null,Mr(this),ca(this),Qt(19))};function ha(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function da(f,F){var q=null;if(f.g==F){ha(f),Rl(f),f.g=null;var K=2}else if(Bn(f.h,F))q=F.D,cc(f.h,F),K=1;else return;if(f.G!=0){if(F.o)if(K==1){q=F.m?F.m.length:0,F=Date.now()-F.F;var ce=f.B;K=so(),nt(K,new Yo(K,q)),ii(f)}else go(f);else if(ce=F.s,ce==3||ce==0&&0<F.X||!(K==1&&Ef(f,F)||K==2&&ca(f)))switch(q&&0<q.length&&(F=f.h,F.i=F.i.concat(q)),ce){case 1:Ni(f,5);break;case 4:Ni(f,10);break;case 3:Ni(f,6);break;default:Ni(f,2)}}}function wc(f,F){let q=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(q*=2),q*F}function Ni(f,F){if(f.j.info("Error code "+F),F==2){var q=p(f.fb,f),K=f.Xa;const ce=!K;K=new Di(K||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||fo(K,"https"),ls(K),ce?vf(K.toString(),q):gc(K.toString(),q)}else Qt(2);f.G=0,f.l&&f.l.sa(F),Ec(f),la(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Ec(f){if(f.G=0,f.ka=[],f.l){const F=hc(f.h);(F.length!=0||f.i.length!=0)&&(E(f.ka,F),E(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function Cc(f,F,q){var K=q instanceof Di?or(q):new Di(q);if(K.g!="")F&&(K.g=F+"."+K.g),os(K,K.s);else{var ce=u.location;K=ce.protocol,F=F?F+"."+ce.hostname:ce.hostname,ce=+ce.port;var me=new Di(null);K&&fo(me,K),F&&(me.g=F),ce&&os(me,ce),q&&(me.l=q),K=me}return q=f.D,F=f.ya,q&&F&&It(K,q,F),It(K,"VER",f.la),Pi(f,K),K}function Ac(f,F,q){if(F&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=f.Ca&&!f.pa?new qt(new ki({eb:q})):new qt(f.pa),F.Ha(f.J),F}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pl(){}r=Pl.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function fa(){}fa.prototype.g=function(f,F){return new Mn(f,F)};function Mn(f,F){Ke.call(this),this.g=new kl(F),this.l=f,this.h=F&&F.messageUrlParams||null,f=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(f?f["X-WebChannel-Content-Type"]=F.messageContentType:f={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(f?f["X-WebChannel-Client-Profile"]=F.va:f={"X-WebChannel-Client-Profile":F.va}),this.g.S=f,(f=F&&F.Sb)&&!C(f)&&(this.g.m=f),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!C(F)&&(this.g.D=F,f=this.h,f!==null&&F in f&&(f=this.h,F in f&&delete f[F])),this.j=new si(this)}b(Mn,Ke),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){En(this.g)},Mn.prototype.o=function(f){var F=this.g;if(typeof f=="string"){var q={};q.__data__=f,f=q}else this.u&&(q={},q.__data__=ml(f),f=q);F.i.push(new lc(F.Ya++,f)),F.G==3&&ii(F)},Mn.prototype.N=function(){this.g.l=null,delete this.j,En(this.g),delete this.g,Mn.aa.N.call(this)};function bc(f){Zr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var F=f.__sm__;if(F){e:{for(const q in F){f=q;break e}f=void 0}(this.i=f)&&(f=this.i,F=F!==null&&f in F?F[f]:void 0),this.data=F}else this.data=f}b(bc,Zr);function xc(){Qo.call(this),this.status=1}b(xc,Qo);function si(f){this.g=f}b(si,Pl),si.prototype.ua=function(){nt(this.g,"a")},si.prototype.ta=function(f){nt(this.g,new bc(f))},si.prototype.sa=function(f){nt(this.g,new xc)},si.prototype.ra=function(){nt(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,YC=function(){return new fa},QC=function(){return so()},JC=ei,Xg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zo.NO_ERROR=0,Zo.TIMEOUT=8,Zo.HTTP_ERROR=6,Ph=Zo,ic.COMPLETE="complete",KC=ic,Jo.EventType=yr,yr.OPEN="a",yr.CLOSE="b",yr.ERROR="c",yr.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,lu=Jo,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,GC=qt}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const N_="@firebase/firestore",O_="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Dy("@firebase/firestore");function La(){return Fo.logLevel}function je(r,...e){if(Fo.logLevel<=mt.DEBUG){const t=e.map(Py);Fo.debug(`Firestore (${nl}): ${r}`,...t)}}function Ji(r,...e){if(Fo.logLevel<=mt.ERROR){const t=e.map(Py);Fo.error(`Firestore (${nl}): ${r}`,...t)}}function $a(r,...e){if(Fo.logLevel<=mt.WARN){const t=e.map(Py);Fo.warn(`Firestore (${nl}): ${r}`,...t)}}function Py(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,XC(r,n,t)}function XC(r,e,t){let n=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Ji(n),new Error(n)}function bt(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||XC(e,i,n)}function ot(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(On.UNAUTHENTICATED))}shutdown(){}}class VD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zD{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let o=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Hi,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Hi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(bt(typeof n.accessToken=="string",31837,{l:n}),new ZC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class HD{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WD{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new HD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $D{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const n=o=>{o.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new L_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new L_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=GD(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<t&&(n+=e.charAt(i[o]%62))}return n}}function dt(r,e){return r<e?-1:r>e?1:0}function Zg(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),i=e.codePointAt(t);if(n!==i){if(n<128&&i<128)return dt(n,i);{const o=eA(),l=KD(o.encode(F_(r,t)),o.encode(F_(e,t)));return l!==0?l:dt(n,i)}}t+=n>65535?2:1}return dt(r.length,e.length)}function F_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function KD(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return dt(r[t],e[t]);return dt(r.length,e.length)}function Ga(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=-62135596800,B_=1e6;class sn{static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*B_);return new sn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<j_)throw new Be(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B_}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-j_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new sn(0,0))}static max(){return new ut(new sn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="__name__";class ci{constructor(e,t,n){t===void 0?t=0:t>e.length&&tt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&tt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const o=ci.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return dt(e.length,t.length)}static compareSegments(e,t){const n=ci.isNumericId(e),i=ci.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?ci.extractNumericId(e).compare(ci.extractNumericId(t)):Zg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class Ft extends ci{construct(e,t,n){return new Ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Be(_e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Ft(t)}static emptyPath(){return new Ft([])}}const JD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends ci{construct(e,t,n){return new xn(e,t,n)}static isValidIdentifier(e){return JD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M_}static keyField(){return new xn([M_])}static fromServerFormat(e){const t=[];let n="",i=0;const o=()=>{if(n.length===0)throw new Be(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Be(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Be(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(n+=u,i++):(o(),i++)}if(o(),l)throw new Be(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Ft.fromString(e))}static fromName(e){return new Qe(Ft.fromString(e).popFirst(5))}static empty(){return new Qe(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=-1;function QD(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(n===1e9?new sn(t+1,0):new sn(t,n));return new Vs(i,Qe.empty(),e)}function YD(r){return new Vs(r.readTime,r.key,bu)}class Vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vs(ut.min(),Qe.empty(),bu)}static max(){return new Vs(ut.max(),Qe.empty(),bu)}}function XD(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Qe.comparator(r.documentKey,e.documentKey),t!==0?t:dt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(r){if(r.code!==_e.FAILED_PRECONDITION||r.message!==ZD)throw r;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):we.reject(t)}static resolve(e){return new we((t,n)=>{t(e)})}static reject(e){return new we((t,n)=>{n(e)})}static waitFor(e){return new we((t,n)=>{let i=0,o=0,l=!1;e.forEach(u=>{++i,u.next(()=>{++o,l&&o===i&&t()},h=>n(h))}),l=!0,o===i&&t()})}static or(e){let t=we.resolve(!1);for(const n of e)t=t.next(i=>i?we.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,o)=>{n.push(t.call(this,i,o))}),this.waitFor(n)}static mapArray(e,t){return new we((n,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const d=h;t(e[d]).next(g=>{l[d]=g,++u,u===o&&n(l)},g=>i(g))}})}static doWhile(e,t){return new we((n,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):n()};o()})}}function tk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function il(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>t.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}xd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=-1;function Sd(r){return r==null}function Yh(r){return r===0&&1/r==-1/0}function nk(r){return typeof r=="number"&&Number.isInteger(r)&&!Yh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="";function rk(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=q_(e)),e=ik(r.get(t),e);return q_(e)}function ik(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const o=r.charAt(i);switch(o){case"\0":t+="";break;case nA:t+="";break;default:t+=o}}return t}function q_(r){return r+nA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ys(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function sk(r,e){const t=[];for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.push(e(r[n],n,r));return t}function rA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new $t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,n,i,o){this.key=e,this.value=t,this.color=n??bn.RED,this.left=i??bn.EMPTY,this.right=o??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,o){return new bn(e??this.key,t??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,n),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return bn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,t,n,i,o){return this}insert(e,t,n){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new V_(this.data.getIterator())}getIteratorFrom(e){return new V_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class V_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new pr([])}unionWith(e){let t=new hn(xn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iA("Invalid base64 string: "+o):o}}(e);return new Tn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const ok=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(r){if(bt(!!r,39018),typeof r=="string"){let e=0;const t=ok.exec(r);if(bt(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Xt(r.seconds),nanos:Xt(r.nanos)}}function Xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Hs(r){return typeof r=="string"?Tn.fromBase64String(r):Tn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="server_timestamp",oA="__type__",aA="__previous_value__",lA="__local_write_time__";function Oy(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[oA])===null||t===void 0?void 0:t.stringValue)===sA}function Td(r){const e=r.mapValue.fields[aA];return Oy(e)?Td(e):e}function xu(r){const e=zs(r.mapValue.fields[lA].timestampValue);return new sn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t,n,i,o,l,u,h,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=g}}const Xh="(default)";class Su{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="__type__",lk="__max__",Eh={mapValue:{}},cA="__vector__",Zh="value";function Ws(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Oy(r)?4:ck(r)?9007199254740991:uk(r)?10:11:tt(28295,{value:r})}function wi(r,e){if(r===e)return!0;const t=Ws(r);if(t!==Ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xu(r).isEqual(xu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=zs(i.timestampValue),u=zs(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,o){return Hs(i.bytesValue).isEqual(Hs(o.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,o){return Xt(i.geoPointValue.latitude)===Xt(o.geoPointValue.latitude)&&Xt(i.geoPointValue.longitude)===Xt(o.geoPointValue.longitude)}(r,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Xt(i.integerValue)===Xt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Xt(i.doubleValue),u=Xt(o.doubleValue);return l===u?Yh(l)===Yh(u):isNaN(l)&&isNaN(u)}return!1}(r,e);case 9:return Ga(r.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(U_(l)!==U_(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!wi(l[h],u[h])))return!1;return!0}(r,e);default:return tt(52216,{left:r})}}function Tu(r,e){return(r.values||[]).find(t=>wi(t,e))!==void 0}function Ka(r,e){if(r===e)return 0;const t=Ws(r),n=Ws(e);if(t!==n)return dt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(r.booleanValue,e.booleanValue);case 2:return function(o,l){const u=Xt(o.integerValue||o.doubleValue),h=Xt(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(r,e);case 3:return z_(r.timestampValue,e.timestampValue);case 4:return z_(xu(r),xu(e));case 5:return Zg(r.stringValue,e.stringValue);case 6:return function(o,l){const u=Hs(o),h=Hs(l);return u.compareTo(h)}(r.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),h=l.split("/");for(let d=0;d<u.length&&d<h.length;d++){const g=dt(u[d],h[d]);if(g!==0)return g}return dt(u.length,h.length)}(r.referenceValue,e.referenceValue);case 8:return function(o,l){const u=dt(Xt(o.latitude),Xt(l.latitude));return u!==0?u:dt(Xt(o.longitude),Xt(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return H_(r.arrayValue,e.arrayValue);case 10:return function(o,l){var u,h,d,g;const m=o.fields||{},p=l.fields||{},y=(u=m[Zh])===null||u===void 0?void 0:u.arrayValue,b=(h=p[Zh])===null||h===void 0?void 0:h.arrayValue,x=dt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((g=b==null?void 0:b.values)===null||g===void 0?void 0:g.length)||0);return x!==0?x:H_(y,b)}(r.mapValue,e.mapValue);case 11:return function(o,l){if(o===Eh.mapValue&&l===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(l===Eh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),d=l.fields||{},g=Object.keys(d);h.sort(),g.sort();for(let m=0;m<h.length&&m<g.length;++m){const p=Zg(h[m],g[m]);if(p!==0)return p;const y=Ka(u[h[m]],d[g[m]]);if(y!==0)return y}return dt(h.length,g.length)}(r.mapValue,e.mapValue);default:throw tt(23264,{Pe:t})}}function z_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return dt(r,e);const t=zs(r),n=zs(e),i=dt(t.seconds,n.seconds);return i!==0?i:dt(t.nanos,n.nanos)}function H_(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const o=Ka(t[i],n[i]);if(o)return o}return dt(t.length,n.length)}function Ja(r){return ey(r)}function ey(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=zs(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Hs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Qe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const o of t.values||[])i?i=!1:n+=",",n+=ey(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of n)o?o=!1:i+=",",i+=`${l}:${ey(t.fields[l])}`;return i+"}"}(r.mapValue):tt(61005,{value:r})}function Nh(r){switch(Ws(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Td(r);return e?16+Nh(e):16;case 5:return 2*r.stringValue.length;case 6:return Hs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,o)=>i+Nh(o),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return Ys(n.fields,(o,l)=>{i+=o.length+Nh(l)}),i}(r.mapValue);default:throw tt(13486,{value:r})}}function W_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ty(r){return!!r&&"integerValue"in r}function Ly(r){return!!r&&"arrayValue"in r}function $_(r){return!!r&&"nullValue"in r}function G_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Oh(r){return!!r&&"mapValue"in r}function uk(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[uA])===null||t===void 0?void 0:t.stringValue)===cA}function mu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ys(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=mu(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function ck(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===lk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.value=e}static empty(){return new rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=xn.emptyPath(),n={},i=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,n,i),n={},i=[],t=u.popLast()}l?n[u.lastSegment()]=mu(l):i.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,i)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Ys(t,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new rr(mu(this.value))}}function hA(r){const e=[];return Ys(r.fields,(t,n)=>{const i=new xn([t]);if(Oh(n)){const o=hA(n.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,n,i,o,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Ln(e,0,ut.min(),ut.min(),ut.min(),rr.empty(),0)}static newFoundDocument(e,t,n,i){return new Ln(e,1,t,ut.min(),n,i,0)}static newNoDocument(e,t){return new Ln(e,2,t,ut.min(),ut.min(),rr.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,ut.min(),ut.min(),rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t){this.position=e,this.inclusive=t}}function K_(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const o=e[i],l=r.position[i];if(o.field.isKeyField()?n=Qe.comparator(Qe.fromName(l.referenceValue),t.key):n=Ka(l,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function J_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!wi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function hk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{}class rn extends dA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new fk(e,t,n):t==="array-contains"?new gk(e,n):t==="in"?new yk(e,n):t==="not-in"?new vk(e,n):t==="array-contains-any"?new _k(e,n):new rn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new pk(e,n):new mk(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ka(t,this.value)):t!==null&&Ws(this.value)===Ws(t)&&this.matchesComparison(Ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends dA{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Jr(e,t)}matches(e){return fA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function fA(r){return r.op==="and"}function pA(r){return dk(r)&&fA(r)}function dk(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function ny(r){if(r instanceof rn)return r.field.canonicalString()+r.op.toString()+Ja(r.value);if(pA(r))return r.filters.map(e=>ny(e)).join(",");{const e=r.filters.map(t=>ny(t)).join(",");return`${r.op}(${e})`}}function mA(r,e){return r instanceof rn?function(n,i){return i instanceof rn&&n.op===i.op&&n.field.isEqual(i.field)&&wi(n.value,i.value)}(r,e):r instanceof Jr?function(n,i){return i instanceof Jr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,l,u)=>o&&mA(l,i.filters[u]),!0):!1}(r,e):void tt(19439)}function gA(r){return r instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`}(r):r instanceof Jr?function(t){return t.op.toString()+" {"+t.getFilters().map(gA).join(" ,")+"}"}(r):"Filter"}class fk extends rn{constructor(e,t,n){super(e,t,n),this.key=Qe.fromName(n.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class pk extends rn{constructor(e,t){super(e,"in",t),this.keys=yA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mk extends rn{constructor(e,t){super(e,"not-in",t),this.keys=yA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yA(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>Qe.fromName(n.referenceValue))}class gk extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ly(t)&&Tu(t.arrayValue,this.value)}}class yk extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class vk extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tu(this.value.arrayValue,t)}}class _k extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ly(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Tu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t=null,n=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Ie=null}}function Q_(r,e=null,t=[],n=[],i=null,o=null,l=null){return new wk(r,e,t,n,i,o,l)}function Fy(r){const e=ot(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>ny(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Ja(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Ja(n)).join(",")),e.Ie=t}return e.Ie}function jy(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!hk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!mA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!J_(r.startAt,e.startAt)&&J_(r.endAt,e.endAt)}function ry(r){return Qe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t=null,n=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Ek(r,e,t,n,i,o,l,u){return new sl(r,e,t,n,i,o,l,u)}function By(r){return new sl(r)}function Y_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vA(r){return r.collectionGroup!==null}function gu(r){const e=ot(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new hn(xn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Iu(o,n))}),t.has(xn.keyField().canonicalString())||e.Ee.push(new Iu(xn.keyField(),n))}return e.Ee}function mi(r){const e=ot(r);return e.de||(e.de=_A(e,gu(r))),e.de}function Ck(r){const e=ot(r);return e.Ae||(e.Ae=_A(e,r.explicitOrderBy)),e.Ae}function _A(r,e){if(r.limitType==="F")return Q_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Iu(i.field,o)});const t=r.endAt?new ed(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new ed(r.startAt.position,r.startAt.inclusive):null;return Q_(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function iy(r,e){const t=r.filters.concat([e]);return new sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function td(r,e,t){return new sl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Id(r,e){return jy(mi(r),mi(e))&&r.limitType===e.limitType}function wA(r){return`${Fy(mi(r))}|lt:${r.limitType}`}function Fa(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>gA(i)).join(", ")}]`),Sd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Ja(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Ja(i)).join(",")),`Target(${n})`}(mi(r))}; limitType=${r.limitType})`}function Dd(r,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):Qe.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(r,e)&&function(n,i){for(const o of gu(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(l,u,h){const d=K_(l,u,h);return l.inclusive?d<=0:d<0}(n.startAt,gu(n),i)||n.endAt&&!function(l,u,h){const d=K_(l,u,h);return l.inclusive?d>=0:d>0}(n.endAt,gu(n),i))}(r,e)}function Ak(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function EA(r){return(e,t)=>{let n=!1;for(const i of gu(r)){const o=bk(i,e,t);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function bk(r,e,t){const n=r.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,l,u){const h=l.data.field(o),d=u.data.field(o);return h!==null&&d!==null?Ka(h,d):tt(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return tt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(t,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return rA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new $t(Qe.comparator);function Qi(){return xk}const CA=new $t(Qe.comparator);function uu(...r){let e=CA;for(const t of r)e=e.insert(t.key,t);return e}function AA(r){let e=CA;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Ro(){return yu()}function bA(){return yu()}function yu(){return new Vo(r=>r.toString(),(r,e)=>r.isEqual(e))}const Sk=new $t(Qe.comparator),Tk=new hn(Qe.comparator);function gt(...r){let e=Tk;for(const t of r)e=e.add(t);return e}const Ik=new hn(dt);function Dk(){return Ik}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function xA(r){return{integerValue:""+r}}function kk(r,e){return nk(e)?xA(e):My(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function Rk(r,e,t){return r instanceof Du?function(i,o){const l={fields:{[oA]:{stringValue:sA},[lA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Oy(o)&&(o=Td(o)),o&&(l.fields[aA]=o),{mapValue:l}}(t,e):r instanceof ku?TA(r,e):r instanceof Ru?IA(r,e):function(i,o){const l=SA(i,o),u=X_(l)+X_(i.Re);return ty(l)&&ty(i.Re)?xA(u):My(i.serializer,u)}(r,e)}function Pk(r,e,t){return r instanceof ku?TA(r,e):r instanceof Ru?IA(r,e):t}function SA(r,e){return r instanceof nd?function(n){return ty(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class Du extends kd{}class ku extends kd{constructor(e){super(),this.elements=e}}function TA(r,e){const t=DA(e);for(const n of r.elements)t.some(i=>wi(i,n))||t.push(n);return{arrayValue:{values:t}}}class Ru extends kd{constructor(e){super(),this.elements=e}}function IA(r,e){let t=DA(e);for(const n of r.elements)t=t.filter(i=>!wi(i,n));return{arrayValue:{values:t}}}class nd extends kd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function X_(r){return Xt(r.integerValue||r.doubleValue)}function DA(r){return Ly(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t){this.field=e,this.transform=t}}function Ok(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof ku&&i instanceof ku||n instanceof Ru&&i instanceof Ru?Ga(n.elements,i.elements,wi):n instanceof nd&&i instanceof nd?wi(n.Re,i.Re):n instanceof Du&&i instanceof Du}(r.transform,e.transform)}class Lk{constructor(e,t){this.version=e,this.transformResults=t}}class Kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kr}static exists(e){return new Kr(void 0,e)}static updateTime(e){return new Kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Rd{}function kA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qy(r.key,Kr.none()):new zu(r.key,r.data,Kr.none());{const t=r.data,n=rr.empty();let i=new hn(xn.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?n.delete(o):n.set(o,l),i=i.add(o)}return new Xs(r.key,n,new pr(i.toArray()),Kr.none())}}function Fk(r,e,t){r instanceof zu?function(i,o,l){const u=i.value.clone(),h=e1(i.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(r,e,t):r instanceof Xs?function(i,o,l){if(!Lh(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=e1(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(RA(i)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(r,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function vu(r,e,t,n){return r instanceof zu?function(o,l,u,h){if(!Lh(o.precondition,l))return u;const d=o.value.clone(),g=t1(o.fieldTransforms,h,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(r,e,t,n):r instanceof Xs?function(o,l,u,h){if(!Lh(o.precondition,l))return u;const d=t1(o.fieldTransforms,h,l),g=l.data;return g.setAll(RA(o)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(r,e,t,n):function(o,l,u){return Lh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(r,e,t)}function jk(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),o=SA(n.transform,i||null);o!=null&&(t===null&&(t=rr.empty()),t.set(n.field,o))}return t||null}function Z_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ga(n,i,(o,l)=>Ok(o,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class zu extends Rd{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends Rd{constructor(e,t,n,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RA(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function e1(r,e,t){const n=new Map;bt(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let i=0;i<t.length;i++){const o=r[i],l=o.transform,u=e.data.field(o.field);n.set(o.field,Pk(l,u,t[i]))}return n}function t1(r,e,t){const n=new Map;for(const i of r){const o=i.transform,l=t.data.field(i.field);n.set(i.field,Rk(o,l,e))}return n}class qy extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk extends Rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Fk(o,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=bA();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const h=kA(l,u);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(ut.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gt())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,(t,n)=>Z_(t,n))&&Ga(this.baseMutations,e.baseMutations,(t,n)=>Z_(t,n))}}class Uy{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){bt(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let i=function(){return Sk}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,n[l].version);return new Uy(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,wt;function zk(r){switch(r){case _e.OK:return tt(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return tt(15467,{code:r})}}function PA(r){if(r===void 0)return Ji("GRPC error has no .code"),_e.UNKNOWN;switch(r){case nn.OK:return _e.OK;case nn.CANCELLED:return _e.CANCELLED;case nn.UNKNOWN:return _e.UNKNOWN;case nn.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case nn.INTERNAL:return _e.INTERNAL;case nn.UNAVAILABLE:return _e.UNAVAILABLE;case nn.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case nn.NOT_FOUND:return _e.NOT_FOUND;case nn.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case nn.ABORTED:return _e.ABORTED;case nn.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case nn.DATA_LOSS:return _e.DATA_LOSS;default:return tt(39323,{code:r})}}(wt=nn||(nn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new Ms([4294967295,4294967295],0);function n1(r){const e=eA().encode(r),t=new $C;return t.update(e),new Uint8Array(t.digest())}function r1(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ms([t,n],0),new Ms([i,o],0)]}class Vy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cu(`Invalid padding: ${t}`);if(n<0)throw new cu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new cu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ms.fromNumber(this.pe)}we(e,t,n){let i=e.add(t.multiply(Ms.fromNumber(n)));return i.compare(Hk)===1&&(i=new Ms([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=n1(e),[n,i]=r1(t);for(let o=0;o<this.hashCount;o++){const l=this.we(n,i,o);if(!this.be(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Vy(o,i,t);return n.forEach(u=>l.insert(u)),l}insert(e){if(this.pe===0)return;const t=n1(e),[n,i]=r1(t);for(let o=0;o<this.hashCount;o++){const l=this.we(n,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t,n,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Pd(ut.min(),i,new $t(dt),Qi(),gt())}}class Hu{constructor(e,t,n,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hu(n,t,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,n,i){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=i}}class NA{constructor(e,t){this.targetId=e,this.Ce=t}}class OA{constructor(e,t,n=Tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class i1{constructor(){this.Fe=0,this.Me=s1(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=gt(),t=gt(),n=gt();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:tt(38017,{changeType:o})}}),new Hu(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=s1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,bt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Wk{constructor(e){this.ze=e,this.je=new Map,this.He=Qi(),this.Je=Ch(),this.Ye=Ch(),this.Ze=new $t(dt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((n,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,n=e.Ce.count,i=this._t(t);if(i){const o=i.target;if(ry(o))if(n===0){const l=new Qe(o.path);this.tt(t,l,Ln.newNoDocument(l,ut.min()))}else bt(n===1,20013,{expectedCount:n});else{const l=this.ut(t);if(l!==n){const u=this.ct(e),h=u?this.lt(u,e,l):1;if(h!==0){this.st(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=Hs(n).toUint8Array()}catch(h){if(h instanceof iA)return $a("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Vy(l,i,o)}catch(h){return $a(h instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.pe===0?null:u}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let i=0;return n.forEach(o=>{const l=this.ze.Pt(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,o,null),i++)}),i}It(e){const t=new Map;this.je.forEach((o,l)=>{const u=this._t(l);if(u){if(o.current&&ry(u.target)){const h=new Qe(u.target.path);this.Et(h).has(l)||this.dt(l,h)||this.tt(l,h,Ln.newNoDocument(h,e))}o.Le&&(t.set(l,o.qe()),o.Qe())}});let n=gt();this.Ye.forEach((o,l)=>{let u=!0;l.forEachWhile(h=>{const d=this._t(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const i=new Pd(e,t,this.Ze,this.He,n);return this.He=Qi(),this.Je=Ch(),this.Ye=Ch(),this.Ze=new $t(dt),i}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new i1,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new hn(dt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new hn(dt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||je("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new i1),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ch(){return new $t(Qe.comparator)}function s1(){return new $t(Qe.comparator)}const $k={asc:"ASCENDING",desc:"DESCENDING"},Gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"};class Jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sy(r,e){return r.useProto3Json||Sd(e)?e:{value:e}}function rd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Qk(r,e){return rd(r,e.toTimestamp())}function gi(r){return bt(!!r,49232),ut.fromTimestamp(function(t){const n=zs(t);return new sn(n.seconds,n.nanos)}(r))}function zy(r,e){return oy(r,e).canonicalString()}function oy(r,e){const t=function(i){return new Ft(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function FA(r){const e=Ft.fromString(r);return bt(VA(e),10190,{key:e.toString()}),e}function ay(r,e){return zy(r.databaseId,e.path)}function Yp(r,e){const t=FA(e);if(t.get(1)!==r.databaseId.projectId)throw new Be(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Be(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Qe(BA(t))}function jA(r,e){return zy(r.databaseId,e)}function Yk(r){const e=FA(r);return e.length===4?Ft.emptyPath():BA(e)}function ly(r){return new Ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function BA(r){return bt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function o1(r,e,t){return{name:ay(r,e),fields:t.value.mapValue.fields}}function Xk(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:tt(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,g){return d.useProto3Json?(bt(g===void 0||typeof g=="string",58123),Tn.fromBase64String(g||"")):(bt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Tn.fromUint8Array(g||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(d){const g=d.code===void 0?_e.UNKNOWN:PA(d.code);return new Be(g,d.message||"")}(l);t=new OA(n,i,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Yp(r,n.document.name),o=gi(n.document.updateTime),l=n.document.createTime?gi(n.document.createTime):ut.min(),u=new rr({mapValue:{fields:n.document.fields}}),h=Ln.newFoundDocument(i,o,l,u),d=n.targetIds||[],g=n.removedTargetIds||[];t=new Fh(d,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Yp(r,n.document),o=n.readTime?gi(n.readTime):ut.min(),l=Ln.newNoDocument(i,o),u=n.removedTargetIds||[];t=new Fh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Yp(r,n.document),o=n.removedTargetIds||[];t=new Fh([],o,i,null)}else{if(!("filter"in e))return tt(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,l=new Vk(i,o),u=n.targetId;t=new NA(u,l)}}return t}function Zk(r,e){let t;if(e instanceof zu)t={update:o1(r,e.key,e.value)};else if(e instanceof qy)t={delete:ay(r,e.key)};else if(e instanceof Xs)t={update:o1(r,e.key,e.data),updateMask:lR(e.fieldMask)};else{if(!(e instanceof Bk))return tt(16599,{ft:e.type});t={verify:ay(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(o,l){const u=l.transform;if(u instanceof Du)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ku)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ru)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof nd)return{fieldPath:l.field.canonicalString(),increment:u.Re};throw tt(20930,{transform:l.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Qk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:tt(27497)}(r,e.precondition)),t}function eR(r,e){return r&&r.length>0?(bt(e!==void 0,14353),r.map(t=>function(i,o){let l=i.updateTime?gi(i.updateTime):gi(o);return l.isEqual(ut.min())&&(l=gi(o)),new Lk(l,i.transformResults||[])}(t,e))):[]}function tR(r,e){return{documents:[jA(r,e.path)]}}function MA(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=jA(r,i);const o=function(d){if(d.length!==0)return UA(Jr.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(d){if(d.length!==0)return d.map(g=>function(p){return{field:Ds(p.field),direction:sR(p.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=sy(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function nR(r,e,t,n){const{gt:i,parent:o}=MA(r,e),l={},u=[];let h=0;return t.forEach(d=>{const g="aggregate_"+h++;l[g]=d.alias,d.aggregateType==="count"?u.push({alias:g,count:{}}):d.aggregateType==="avg"?u.push({alias:g,avg:{field:Ds(d.fieldPath)}}):d.aggregateType==="sum"&&u.push({alias:g,sum:{field:Ds(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:i.structuredQuery},parent:i.parent},yt:l,parent:o}}function rR(r){let e=Yk(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){bt(n===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(m){const p=qA(m);return p instanceof Jr&&pA(p)?p.getFilters():[p]}(t.where));let l=[];t.orderBy&&(l=function(m){return m.map(p=>function(b){return new Iu(ja(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(t.orderBy));let u=null;t.limit&&(u=function(m){let p;return p=typeof m=="object"?m.value:m,Sd(p)?null:p}(t.limit));let h=null;t.startAt&&(h=function(m){const p=!!m.before,y=m.values||[];return new ed(y,p)}(t.startAt));let d=null;return t.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new ed(y,p)}(t.endAt)),Ek(e,i,l,o,u,"F",h,d)}function iR(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qA(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=ja(t.unaryFilter.field);return rn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=ja(t.unaryFilter.field);return rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ja(t.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ja(t.unaryFilter.field);return rn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(r):r.fieldFilter!==void 0?function(t){return rn.create(ja(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Jr.create(t.compositeFilter.filters.map(n=>qA(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(t.compositeFilter.op))}(r):tt(30097,{filter:r})}function sR(r){return $k[r]}function oR(r){return Gk[r]}function aR(r){return Kk[r]}function Ds(r){return{fieldPath:r.canonicalString()}}function ja(r){return xn.fromServerFormat(r.fieldPath)}function UA(r){return r instanceof rn?function(t){if(t.op==="=="){if(G_(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NAN"}};if($_(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(G_(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NOT_NAN"}};if($_(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(t.field),op:oR(t.op),value:t.value}}}(r):r instanceof Jr?function(t){const n=t.getFilters().map(i=>UA(i));return n.length===1?n[0]:{compositeFilter:{op:aR(t.op),filters:n}}}(r):tt(54877,{filter:r})}function lR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,n,i,o=ut.min(),l=ut.min(),u=Tn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.wt=e}}function cR(r){const e=rR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?td(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.yn=new dR}addToCollectionParentIndex(e,t){return this.yn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(Vs.min())}updateCollectionGroup(e,t,n){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class dR{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new hn(Ft.comparator),o=!i.has(n);return this.index[t]=i.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new hn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040;class nr{static withCacheSize(e){return new nr(e,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(zA,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Qa(0)}static ir(){return new Qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="LruGarbageCollector",fR=1048576;function u1([r,e],[t,n]){const i=dt(r,t);return i===0?dt(e,n):i}class pR{constructor(e){this.cr=e,this.buffer=new hn(u1),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();u1(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mR{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){je(l1,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){il(t)?je(l1,"Ignoring IndexedDB error during garbage collection: ",t):await rl(t)}await this.Ir(3e5)})}}class gR{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return we.resolve(xd.le);const n=new pR(t);return this.Er.forEachTarget(e,i=>n.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>n.Pr(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(a1)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a1):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,i,o,l,u,h,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,l=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(n=m,u=Date.now(),this.removeTargets(e,n,t))).next(m=>(o=m,h=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(d=Date.now(),La()<=mt.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${m} documents in `+(d-h)+`ms
Total Duration: ${d-g}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}function yR(r,e){return new gR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?we.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&vu(n.mutation,i,pr.empty(),sn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,gt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=gt()){const i=Ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(o=>{let l=uu();return o.forEach((u,h)=>{l=l.insert(u,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=Ro();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,gt()))}populateOverlays(e,t,n){const i=[];return n.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,n,i){let o=Qi();const l=yu(),u=function(){return yu()}();return t.forEach((h,d)=>{const g=n.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Xs)?o=o.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),vu(g.mutation,d,g.mutation.getFieldMask(),sn.now())):l.set(d.key,pr.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((d,g)=>l.set(d,g)),t.forEach((d,g)=>{var m;return u.set(d,new _R(g,(m=l.get(d))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,t){const n=yu();let i=new $t((l,u)=>l-u),o=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let g=n.get(h)||pr.empty();g=u.applyToLocalView(d,g),n.set(h,g);const m=(i.get(u.batchId)||gt()).add(h);i=i.insert(u.batchId,m)})}).next(()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,g=h.value,m=bA();g.forEach(p=>{if(!o.has(p)){const y=kA(t.get(p),n.get(p));y!==null&&m.set(p,y),o=o.add(p)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,m))}return we.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(l){return Qe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-o.size):we.resolve(Ro());let u=bu,h=o;return l.next(d=>we.forEach(d,(g,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),o.get(g)?we.resolve():this.remoteDocumentCache.getEntry(e,g).next(p=>{h=h.insert(g,p)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,h,d,gt())).next(g=>({batchId:u,changes:AA(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(n=>{let i=uu();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const o=t.collectionGroup;let l=uu();return this.indexManager.getCollectionParents(e,o).next(u=>we.forEach(u,h=>{const d=function(m,p){return new sl(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(g=>{g.forEach((m,p)=>{l=l.insert(m,p)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,i))).next(l=>{o.forEach((h,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Ln.newInvalidDocument(g)))});let u=uu();return l.forEach((h,d)=>{const g=o.get(h);g!==void 0&&vu(g.mutation,d,pr.empty(),sn.now()),Dd(t,d)&&(u=u.insert(h,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return we.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gi(i.createTime)}}(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:cR(i.bundledQuery),readTime:gi(i.readTime)}}(t)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.overlays=new $t(Qe.comparator),this.Or=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ro();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,o)=>{this.St(e,t,o)}),we.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Or.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(n)),we.resolve()}getOverlaysForCollection(e,t,n){const i=Ro(),o=t.length+1,l=new Qe(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>n&&i.set(h.getKey(),h)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let o=new $t((d,g)=>d-g);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let g=o.get(d.largestBatchId);g===null&&(g=Ro(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=Ro(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,g)=>u.set(d,g)),!(u.size()>=i)););return we.resolve(u)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.Or.get(i.largestBatchId).delete(n.key);this.Or.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new qk(t,n));let o=this.Or.get(t);o===void 0&&(o=gt(),this.Or.set(t,o)),this.Or.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.Nr=new hn(vn.Br),this.Lr=new hn(vn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new vn(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Qr(new vn(e,t))}$r(e,t){e.forEach(n=>this.removeReference(n,t))}Ur(e){const t=new Qe(new Ft([])),n=new vn(t,e),i=new vn(t,e+1),o=[];return this.Lr.forEachInRange([n,i],l=>{this.Qr(l),o.push(l.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Qe(new Ft([])),n=new vn(t,e),i=new vn(t,e+1);let o=gt();return this.Lr.forEachInRange([n,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new vn(e,0),n=this.Nr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class vn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Qe.comparator(e.key,t.key)||dt(e.Gr,t.Gr)}static kr(e,t){return dt(e.Gr,t.Gr)||Qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new hn(vn.Br)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Mk(o,t,n,i);this.mutationQueue.push(l);for(const u of i)this.zr=this.zr.add(new vn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return we.resolve(l)}lookupMutationBatch(e,t){return we.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Hr(n),o=i<0?0:i;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Ny:this.Jn-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vn(t,0),i=new vn(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([n,i],l=>{const u=this.jr(l.Gr);o.push(u)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hn(dt);return t.forEach(i=>{const o=new vn(i,0),l=new vn(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,l],u=>{n=n.add(u.Gr)})}),we.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let o=n;Qe.isDocumentKey(o)||(o=o.child(""));const l=new vn(new Qe(o),0);let u=new hn(dt);return this.zr.forEachWhile(h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Gr)),!0)},l),we.resolve(this.Jr(u))}Jr(e){const t=[];return e.forEach(n=>{const i=this.jr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.zr;return we.forEach(t.mutations,i=>{const o=new vn(i.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=n})}Xn(e){}containsKey(e,t){const n=new vn(t,0),i=this.zr.firstAfterOrEqual(n);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.Zr=e,this.docs=function(){return new $t(Qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),o=i?i.size:0,l=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return we.resolve(n?n.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let n=Qi();return t.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Ln.newInvalidDocument(i))}),we.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let o=Qi();const l=t.path,u=new Qe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:g}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||XD(YD(g),n)<=0||(i.has(g.key)||Dd(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,t,n,i){tt(9500)}Xr(e,t){return we.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new SR(this)}getSize(e){return we.resolve(this.size)}}class SR extends vR{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(n)}),we.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.persistence=e,this.ei=new Vo(t=>Fy(t),jy),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ti=0,this.ni=new Hy,this.targetCount=0,this.ri=Qa.rr()}forEachTarget(e,t){return this.ei.forEach((n,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),we.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Qa(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.ar(t),we.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,n){let i=0;const o=[];return this.ei.forEach((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.ei.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),we.waitFor(o).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return we.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),we.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),we.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return we.resolve(n)}containsKey(e,t){return we.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t){this.ii={},this.overlays={},this.si=new xd(0),this.oi=!1,this.oi=!0,this._i=new AR,this.referenceDelegate=e(this),this.ai=new TR(this),this.indexManager=new hR,this.remoteDocumentCache=function(i){return new xR(i)}(n=>this.referenceDelegate.ui(n)),this.serializer=new uR(t),this.ci=new ER(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new bR(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){je("MemoryPersistence","Starting transaction:",e);const i=new IR(this.si.next());return this.referenceDelegate.li(),n(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return we.or(Object.values(this.ii).map(n=>()=>n.containsKey(e,t)))}}class IR extends ek{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Ti=new Hy,this.Ii=null}static Ei(e){return new Wy(e)}get di(){if(this.Ii)return this.Ii;throw tt(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),we.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>n.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.di,n=>{const i=Qe.fromPath(n);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,ut.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return we.or([()=>we.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class id{constructor(e,t){this.persistence=e,this.Ri=new Vo(n=>rk(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=yR(this,t)}static Ei(e,t){return new id(e,t)}li(){}hi(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}Vr(e){let t=0;return this.Ar(e,n=>{t++}).next(()=>t)}Ar(e,t){return we.forEach(this.Ri,(n,i)=>this.gr(e,n,i).next(o=>o?we.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,l=>this.gr(e,l,t).next(u=>{u||(n++,o.removeEntry(l,ut.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),we.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),we.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}gr(e,t,n){return we.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return we.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=i}static Ps(e,t){let n=gt(),i=gt();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new $y(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return EI()?8:tk(jn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,i){const o={result:null};return this.Rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Vs(e,t,i,n).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new DR;return this.fs(e,t,l).next(u=>{if(o.result=u,this.Is)return this.gs(e,t,l,u.size)})}).next(()=>o.result)}gs(e,t,n,i){return n.documentReadCount<this.Es?(La()<=mt.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",Fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),we.resolve()):(La()<=mt.DEBUG&&je("QueryEngine","Query:",Fa(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ds*i?(La()<=mt.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",Fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):we.resolve())}Rs(e,t){if(Y_(t))return we.resolve(null);let n=mi(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=td(t,null,"F"),n=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const l=gt(...o);return this.As.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,n).next(h=>{const d=this.ps(t,u);return this.ys(t,d,l,h.readTime)?this.Rs(e,td(t,null,"F")):this.ws(e,d,t,h)}))})))}Vs(e,t,n,i){return Y_(t)||i.isEqual(ut.min())?we.resolve(null):this.As.getDocuments(e,n).next(o=>{const l=this.ps(t,o);return this.ys(t,l,n,i)?we.resolve(null):(La()<=mt.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fa(t)),this.ws(e,l,t,QD(i,bu)).next(u=>u))})}ps(e,t){let n=new hn(EA(e));return t.forEach((i,o)=>{Dd(e,o)&&(n=n.add(o))}),n}ys(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,n){return La()<=mt.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Fa(t)),this.As.getDocumentsMatchingQuery(e,t,Vs.min(),n)}ws(e,t,n,i){return this.As.getDocumentsMatchingQuery(e,n,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LocalStore",RR=3e8;class PR{constructor(e,t,n,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new $t(dt),this.Ds=new Vo(o=>Fy(o),jy),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wR(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function NR(r,e,t,n){return new PR(r,e,t,n)}async function WA(r,e){const t=ot(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(n))).next(o=>{const l=[],u=[];let h=gt();for(const d of i){l.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of o){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(n,h).next(d=>({Ms:d,removedBatchIds:l,addedBatchIds:u}))})})}function OR(r,e){const t=ot(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(u,h,d,g){const m=d.batch,p=m.keys();let y=we.resolve();return p.forEach(b=>{y=y.next(()=>g.getEntry(h,b)).next(x=>{const E=d.docVersions.get(b);bt(E!==null,48541),x.version.compareTo(E)<0&&(m.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),g.addEntry(x)))})}),y.next(()=>u.mutationQueue.removeMutationBatch(h,m))}(t,n,e,o).next(()=>o.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let h=gt();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function $A(r){const e=ot(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function LR(r,e){const t=ot(r),n=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const u=[];e.targetChanges.forEach((g,m)=>{const p=i.get(m);if(!p)return;u.push(t.ai.removeMatchingKeys(o,g.removedDocuments,m).next(()=>t.ai.addMatchingKeys(o,g.addedDocuments,m)));let y=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Tn.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):g.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(g.resumeToken,n)),i=i.insert(m,y),function(x,E,w){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=RR?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,y,g)&&u.push(t.ai.updateTargetData(o,y))});let h=Qi(),d=gt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(FR(o,l,e.documentUpdates).next(g=>{h=g.xs,d=g.Os})),!n.isEqual(ut.min())){const g=t.ai.getLastRemoteSnapshotVersion(o).next(m=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,n));u.push(g)}return we.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,d)).next(()=>h)}).then(o=>(t.Ss=i,o))}function FR(r,e,t){let n=gt(),i=gt();return t.forEach(o=>n=n.add(o)),e.getEntries(r,n).next(o=>{let l=Qi();return t.forEach((u,h)=>{const d=o.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(ut.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):je(Gy,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)}),{xs:l,Os:i}})}function jR(r,e){const t=ot(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Ny),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function BR(r,e){const t=ot(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.ai.getTargetData(n,e).next(o=>o?(i=o,we.resolve(i)):t.ai.allocateTargetId(n).next(l=>(i=new Ls(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.ai.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ss.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(n.targetId,n),t.Ds.set(e,n.targetId)),n})}async function uy(r,e,t){const n=ot(r),i=n.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,l=>n.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!il(l))throw l;je(Gy,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ss=n.Ss.remove(e),n.Ds.delete(i.target)}function c1(r,e,t){const n=ot(r);let i=ut.min(),o=gt();return n.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,g){const m=ot(h),p=m.Ds.get(g);return p!==void 0?we.resolve(m.Ss.get(p)):m.ai.getTargetData(d,g)}(n,l,mi(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,n.ai.getMatchingKeysForTargetId(l,u.targetId).next(h=>{o=h})}).next(()=>n.bs.getDocumentsMatchingQuery(l,e,t?i:ut.min(),t?o:gt())).next(u=>(MR(n,Ak(e),u),{documents:u,Ns:o})))}function MR(r,e,t){let n=r.vs.get(e)||ut.min();t.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),r.vs.set(e,n)}class h1{constructor(){this.activeTargetIds=Dk()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qR{constructor(){this.So=new h1,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new h1,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="ConnectivityMonitor";class f1{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){je(d1,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){je(d1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;function cy(){return Ah===null?Ah=function(){return 268435456+Math.round(2147483648*Math.random())}():Ah++,"0x"+Ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="RestConnection",VR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zR{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${i}`,this.qo=this.databaseId.database===Xh?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Qo(e,t,n,i,o){const l=cy(),u=this.$o(e,t.toUriEncodedString());je(Xp,`Sending RPC '${e}' ${l}:`,u,n);const h={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(h,i,o);const{host:d}=new URL(u),g=tl(d);return this.Ko(e,u,h,n,g).then(m=>(je(Xp,`Received RPC '${e}' ${l}: `,m),m),m=>{throw $a(Xp,`RPC '${e}' ${l} failed with error: `,m,"url: ",u,"request:",n),m})}Wo(e,t,n,i,o,l){return this.Qo(e,t,n,i,o)}Uo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),n&&n.headers.forEach((i,o)=>e[o]=i)}$o(e,t){const n=VR[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class WR extends zR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,i,o){const l=cy();return new Promise((u,h)=>{const d=new GC;d.setWithCredentials(!0),d.listenOnce(KC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ph.NO_ERROR:const m=d.getResponseJson();je(Nn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(m)),u(m);break;case Ph.TIMEOUT:je(Nn,`RPC '${e}' ${l} timed out`),h(new Be(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:const p=d.getStatus();if(je(Nn,`RPC '${e}' ${l} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const x=function(w){const C=w.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(C)>=0?C:_e.UNKNOWN}(b.status);h(new Be(x,b.message))}else h(new Be(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new Be(_e.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{s_:e,streamId:l,o_:d.getLastErrorCode(),__:d.getLastError()})}}finally{je(Nn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);je(Nn,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",g,n,15)})}a_(e,t,n){const i=cy(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=YC(),u=QC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Uo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const g=o.join("");je(Nn,`Creating RPC '${e}' stream ${i}: ${g}`,h);const m=l.createWebChannel(g,h);let p=!1,y=!1;const b=new HR({Go:E=>{y?je(Nn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(je(Nn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),je(Nn,`RPC '${e}' stream ${i} sending:`,E),m.send(E))},zo:()=>m.close()}),x=(E,w,C)=>{E.listen(w,P=>{try{C(P)}catch(S){setTimeout(()=>{throw S},0)}})};return x(m,lu.EventType.OPEN,()=>{y||(je(Nn,`RPC '${e}' stream ${i} transport opened.`),b.t_())}),x(m,lu.EventType.CLOSE,()=>{y||(y=!0,je(Nn,`RPC '${e}' stream ${i} transport closed`),b.r_())}),x(m,lu.EventType.ERROR,E=>{y||(y=!0,$a(Nn,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),b.r_(new Be(_e.UNAVAILABLE,"The operation could not be completed")))}),x(m,lu.EventType.MESSAGE,E=>{var w;if(!y){const C=E.data[0];bt(!!C,16349);const P=C,S=(P==null?void 0:P.error)||((w=P[0])===null||w===void 0?void 0:w.error);if(S){je(Nn,`RPC '${e}' stream ${i} received error:`,S);const O=S.status;let M=function(T){const I=nn[T];if(I!==void 0)return PA(I)}(O),R=S.message;M===void 0&&(M=_e.INTERNAL,R="Unknown error status: "+O+" with message "+S.message),y=!0,b.r_(new Be(M,R)),m.close()}else je(Nn,`RPC '${e}' stream ${i} received:`,C),b.i_(C)}}),x(u,JC.STAT_EVENT,E=>{E.stat===Xg.PROXY?je(Nn,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Xg.NOPROXY&&je(Nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.n_()},0),b}}function Zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(r){return new Jk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t,n=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=n,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-n);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="PersistentStream";class KA{constructor(e,t,n,i,o,l,u,h){this.bi=e,this.R_=n,this.V_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new GA(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.m_===t&&this.B_(n,i)},n=>{e(()=>{const i=new Be(_e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.L_(i)})})}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{n(()=>this.listener.jo())}),this.stream.Jo(()=>{n(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{n(()=>this.L_(i))}),this.stream.onMessage(i=>{n(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return je(p1,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(je(p1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $R extends KA{constructor(e,t,n,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=Xk(this.serializer,e),n=function(o){if(!("targetChange"in o))return ut.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ut.min():l.readTime?gi(l.readTime):ut.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=ly(this.serializer),t.addTarget=function(o,l){let u;const h=l.target;if(u=ry(h)?{documents:tR(o,h)}:{query:MA(o,h).gt},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=LA(o,l.resumeToken);const d=sy(o,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(ut.min())>0){u.readTime=rd(o,l.snapshotVersion.toTimestamp());const d=sy(o,l.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const n=iR(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=ly(this.serializer),t.removeTarget=e,this.F_(t)}}class GR extends KA{constructor(e,t,n,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=eR(e.writeResults,e.commitTime),n=gi(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=ly(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>Zk(this.serializer,n))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{}class JR extends KR{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Be(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Qo(e,oy(t,n),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(_e.UNKNOWN,o.toString())})}Wo(e,t,n,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Wo(e,oy(t,n),i,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Be(_e.UNKNOWN,l.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class QR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ji(t),this.ea=!1):je("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class YR{constructor(e,t,n,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(l=>{n.enqueueAndForget(async()=>{zo(this)&&(je(jo,"Restarting streams for network reachability change."),await async function(h){const d=ot(h);d.aa.add(4),await Wu(d),d.la.set("Unknown"),d.aa.delete(4),await Od(d)}(this))})}),this.la=new QR(n,i)}}async function Od(r){if(zo(r))for(const e of r.ua)await e(!0)}async function Wu(r){for(const e of r.ua)await e(!1)}function JA(r,e){const t=ot(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Yy(t)?Qy(t):ol(t).b_()&&Jy(t,e))}function Ky(r,e){const t=ot(r),n=ol(t);t._a.delete(e),n.b_()&&QA(t,e),t._a.size===0&&(n.b_()?n.v_():zo(t)&&t.la.set("Unknown"))}function Jy(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ol(r).U_(e)}function QA(r,e){r.ha.Ke(e),ol(r).K_(e)}function Qy(r){r.ha=new Wk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ol(r).start(),r.la.ta()}function Yy(r){return zo(r)&&!ol(r).w_()&&r._a.size>0}function zo(r){return ot(r).aa.size===0}function YA(r){r.ha=void 0}async function XR(r){r.la.set("Online")}async function ZR(r){r._a.forEach((e,t)=>{Jy(r,e)})}async function eP(r,e){YA(r),Yy(r)?(r.la.ia(e),Qy(r)):r.la.set("Unknown")}async function tP(r,e,t){if(r.la.set("Online"),e instanceof OA&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const u of o.targetIds)i._a.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i._a.delete(u),i.ha.removeTarget(u))}(r,e)}catch(n){je(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sd(r,n)}else if(e instanceof Fh?r.ha.Xe(e):e instanceof NA?r.ha.ot(e):r.ha.nt(e),!t.isEqual(ut.min()))try{const n=await $A(r.localStore);t.compareTo(n)>=0&&await function(o,l){const u=o.ha.It(l);return u.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const g=o._a.get(d);g&&o._a.set(d,g.withResumeToken(h.resumeToken,l))}}),u.targetMismatches.forEach((h,d)=>{const g=o._a.get(h);if(!g)return;o._a.set(h,g.withResumeToken(Tn.EMPTY_BYTE_STRING,g.snapshotVersion)),QA(o,h);const m=new Ls(g.target,h,d,g.sequenceNumber);Jy(o,m)}),o.remoteSyncer.applyRemoteEvent(u)}(r,t)}catch(n){je(jo,"Failed to raise snapshot:",n),await sd(r,n)}}async function sd(r,e,t){if(!il(e))throw e;r.aa.add(1),await Wu(r),r.la.set("Offline"),t||(t=()=>$A(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{je(jo,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await Od(r)})}function XA(r,e){return e().catch(t=>sd(r,t,e))}async function Ld(r){const e=ot(r),t=$s(e);let n=e.oa.length>0?e.oa[e.oa.length-1].batchId:Ny;for(;nP(e);)try{const i=await jR(e.localStore,n);if(i===null){e.oa.length===0&&t.v_();break}n=i.batchId,rP(e,i)}catch(i){await sd(e,i)}ZA(e)&&eb(e)}function nP(r){return zo(r)&&r.oa.length<10}function rP(r,e){r.oa.push(e);const t=$s(r);t.b_()&&t.W_&&t.G_(e.mutations)}function ZA(r){return zo(r)&&!$s(r).w_()&&r.oa.length>0}function eb(r){$s(r).start()}async function iP(r){$s(r).H_()}async function sP(r){const e=$s(r);for(const t of r.oa)e.G_(t.mutations)}async function oP(r,e,t){const n=r.oa.shift(),i=Uy.from(n,e,t);await XA(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await Ld(r)}async function aP(r,e){e&&$s(r).W_&&await async function(n,i){if(function(l){return zk(l)&&l!==_e.ABORTED}(i.code)){const o=n.oa.shift();$s(n).D_(),await XA(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ld(n)}}(r,e),ZA(r)&&eb(r)}async function m1(r,e){const t=ot(r);t.asyncQueue.verifyOperationInProgress(),je(jo,"RemoteStore received new credentials");const n=zo(t);t.aa.add(3),await Wu(t),n&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Od(t)}async function lP(r,e){const t=ot(r);e?(t.aa.delete(2),await Od(t)):e||(t.aa.add(2),await Wu(t),t.la.set("Unknown"))}function ol(r){return r.Pa||(r.Pa=function(t,n,i){const o=ot(t);return o.Y_(),new $R(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(r.datastore,r.asyncQueue,{jo:XR.bind(null,r),Jo:ZR.bind(null,r),Zo:eP.bind(null,r),Q_:tP.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),Yy(r)?Qy(r):r.la.set("Unknown")):(await r.Pa.stop(),YA(r))})),r.Pa}function $s(r){return r.Ta||(r.Ta=function(t,n,i){const o=ot(t);return o.Y_(),new GR(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:iP.bind(null,r),Zo:aP.bind(null,r),z_:sP.bind(null,r),j_:oP.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await Ld(r)):(await r.Ta.stop(),r.oa.length>0&&(je(jo,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t,n,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,o){const l=Date.now()+n,u=new Xy(e,t,l,i,o);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(r,e){if(Ji("AsyncQueue",`${e}: ${r}`),il(r))return new Be(_e.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(e){return new qa(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Qe.comparator(t.key,n.key):(t,n)=>Qe.comparator(t.key,n.key),this.keyedMap=uu(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new qa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.Ia=new $t(Qe.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?e.type!==0&&n.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&n.type!==1?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Ia=this.Ia.remove(t):e.type===1&&n.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):tt(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ya{constructor(e,t,n,i,o,l,u,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Ya(e,t,qa.emptySet(t),l,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class cP{constructor(){this.queries=y1(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,n){const i=ot(t),o=i.queries;i.queries=y1(),o.forEach((l,u)=>{for(const h of u.Ra)h.onError(n)})})(this,new Be(_e.ABORTED,"Firestore shutting down"))}}function y1(){return new Vo(r=>wA(r),Id)}async function tb(r,e){const t=ot(r);let n=3;const i=e.query;let o=t.queries.get(i);o?!o.Va()&&e.ma()&&(n=2):(o=new uP,n=e.ma()?0:1);try{switch(n){case 0:o.Aa=await t.onListen(i,!0);break;case 1:o.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=Zy(l,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&ev(t)}async function nb(r,e){const t=ot(r),n=e.query;let i=3;const o=t.queries.get(n);if(o){const l=o.Ra.indexOf(e);l>=0&&(o.Ra.splice(l,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function hP(r,e){const t=ot(r);let n=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.Ra)u.pa(i)&&(n=!0);l.Aa=i}}n&&ev(t)}function dP(r,e,t){const n=ot(r),i=n.queries.get(e);if(i)for(const o of i.Ra)o.onError(t);n.queries.delete(e)}function ev(r){r.fa.forEach(e=>{e.next()})}var hy,v1;(v1=hy||(hy={})).ya="default",v1.Cache="cache";class rb{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Ya(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const n=t!=="Offline";return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==hy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.key=e}}class sb{constructor(e){this.key=e}}class fP{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=gt(),this.mutatedKeys=gt(),this.Ua=EA(e),this.Ka=new qa(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new g1,i=t?t.Ka:this.Ka;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const p=i.get(g),y=Dd(this.query,m)?m:null,b=!!p&&this.mutatedKeys.has(p.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;p&&y?p.data.isEqual(y.data)?b!==x&&(n.track({type:3,doc:y}),E=!0):this.ja(p,y)||(n.track({type:2,doc:y}),E=!0,(h&&this.Ua(y,h)>0||d&&this.Ua(y,d)<0)&&(u=!0)):!p&&y?(n.track({type:0,doc:y}),E=!0):p&&!y&&(n.track({type:1,doc:p}),E=!0,(h||d)&&(u=!0)),E&&(y?(l=l.add(y),o=x?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{Ka:l,za:n,ys:u,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const l=e.za.da();l.sort((g,m)=>function(y,b){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Vt:E})}};return x(y)-x(b)}(g.type,m.type)||this.Ua(g.doc,m.doc)),this.Ha(n),i=i!=null&&i;const u=t&&!i?this.Ja():[],h=this.$a.size===0&&this.current&&!i?1:0,d=h!==this.Qa;return this.Qa=h,l.length!==0||d?{snapshot:new Ya(this.query,e.Ka,o,l,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new g1,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=gt(),this.Ka.forEach(n=>{this.Za(n.key)&&(this.$a=this.$a.add(n.key))});const t=[];return e.forEach(n=>{this.$a.has(n)||t.push(new sb(n))}),this.$a.forEach(n=>{e.has(n)||t.push(new ib(n))}),t}Xa(e){this.qa=e.Ns,this.$a=gt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ya.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const tv="SyncEngine";class pP{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class mP{constructor(e){this.key=e,this.tu=!1}}class gP{constructor(e,t,n,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.nu={},this.ru=new Vo(u=>wA(u),Id),this.iu=new Map,this.su=new Set,this.ou=new $t(Qe.comparator),this._u=new Map,this.au=new Hy,this.uu={},this.cu=new Map,this.lu=Qa.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function yP(r,e,t=!0){const n=hb(r);let i;const o=n.ru.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=await ob(n,e,t,!0),i}async function vP(r,e){const t=hb(r);await ob(t,e,!0,!1)}async function ob(r,e,t,n){const i=await BR(r.localStore,mi(e)),o=i.targetId,l=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await _P(r,e,o,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&JA(r.remoteStore,i),u}async function _P(r,e,t,n,i){r.Pu=(m,p,y)=>async function(x,E,w,C){let P=E.view.Ga(w);P.ys&&(P=await c1(x.localStore,E.query,!1).then(({documents:R})=>E.view.Ga(R,P)));const S=C&&C.targetChanges.get(E.targetId),O=C&&C.targetMismatches.get(E.targetId)!=null,M=E.view.applyChanges(P,x.isPrimaryClient,S,O);return w1(x,E.targetId,M.Ya),M.snapshot}(r,m,p,y);const o=await c1(r.localStore,e,!0),l=new fP(e,o.Ns),u=l.Ga(o.documents),h=Hu.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(u,r.isPrimaryClient,h);w1(r,t,d.Ya);const g=new pP(e,t,l);return r.ru.set(e,g),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),d.snapshot}async function wP(r,e,t){const n=ot(r),i=n.ru.get(e),o=n.iu.get(i.targetId);if(o.length>1)return n.iu.set(i.targetId,o.filter(l=>!Id(l,e))),void n.ru.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await uy(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Ky(n.remoteStore,i.targetId),dy(n,i.targetId)}).catch(rl)):(dy(n,i.targetId),await uy(n.localStore,i.targetId,!0))}async function EP(r,e){const t=ot(r),n=t.ru.get(e),i=t.iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Ky(t.remoteStore,n.targetId))}async function CP(r,e,t){const n=DP(r);try{const i=await function(l,u){const h=ot(l),d=sn.now(),g=u.reduce((y,b)=>y.add(b.key),gt());let m,p;return h.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Qi(),x=gt();return h.Cs.getEntries(y,g).next(E=>{b=E,b.forEach((w,C)=>{C.isValidDocument()||(x=x.add(w))})}).next(()=>h.localDocuments.getOverlayedDocuments(y,b)).next(E=>{m=E;const w=[];for(const C of u){const P=jk(C,m.get(C.key).overlayedDocument);P!=null&&w.push(new Xs(C.key,P,hA(P.value.mapValue),Kr.exists(!0)))}return h.mutationQueue.addMutationBatch(y,d,w,u)}).next(E=>{p=E;const w=E.applyToLocalDocumentSet(m,x);return h.documentOverlayCache.saveOverlays(y,E.batchId,w)})}).then(()=>({batchId:p.batchId,changes:AA(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(l,u,h){let d=l.uu[l.currentUser.toKey()];d||(d=new $t(dt)),d=d.insert(u,h),l.uu[l.currentUser.toKey()]=d}(n,i.batchId,t),await $u(n,i.changes),await Ld(n.remoteStore)}catch(i){const o=Zy(i,"Failed to persist write");t.reject(o)}}async function ab(r,e){const t=ot(r);try{const n=await LR(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t._u.get(o);l&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.tu=!0:i.modifiedDocuments.size>0?bt(l.tu,14607):i.removedDocuments.size>0&&(bt(l.tu,42227),l.tu=!1))}),await $u(t,n,e)}catch(n){await rl(n)}}function _1(r,e,t){const n=ot(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ru.forEach((o,l)=>{const u=l.view.ga(e);u.snapshot&&i.push(u.snapshot)}),function(l,u){const h=ot(l);h.onlineState=u;let d=!1;h.queries.forEach((g,m)=>{for(const p of m.Ra)p.ga(u)&&(d=!0)}),d&&ev(h)}(n.eventManager,e),i.length&&n.nu.Q_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function AP(r,e,t){const n=ot(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n._u.get(e),o=i&&i.key;if(o){let l=new $t(Qe.comparator);l=l.insert(o,Ln.newNoDocument(o,ut.min()));const u=gt().add(o),h=new Pd(ut.min(),new Map,new $t(dt),l,u);await ab(n,h),n.ou=n.ou.remove(o),n._u.delete(e),nv(n)}else await uy(n.localStore,e,!1).then(()=>dy(n,e,t)).catch(rl)}async function bP(r,e){const t=ot(r),n=e.batch.batchId;try{const i=await OR(t.localStore,e);ub(t,n,null),lb(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await $u(t,i)}catch(i){await rl(i)}}async function xP(r,e,t){const n=ot(r);try{const i=await function(l,u){const h=ot(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return h.mutationQueue.lookupMutationBatch(d,u).next(m=>(bt(m!==null,37113),g=m.keys(),h.mutationQueue.removeMutationBatch(d,m))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>h.localDocuments.getDocuments(d,g))})}(n.localStore,e);ub(n,e,t),lb(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await $u(n,i)}catch(i){await rl(i)}}function lb(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function ub(r,e,t){const n=ot(r);let i=n.uu[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),n.uu[n.currentUser.toKey()]=i}}function dy(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.iu.get(e))r.ru.delete(n),t&&r.nu.Tu(n,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(n=>{r.au.containsKey(n)||cb(r,n)})}function cb(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(Ky(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),nv(r))}function w1(r,e,t){for(const n of t)n instanceof ib?(r.au.addReference(n.key,e),SP(r,n)):n instanceof sb?(je(tv,"Document no longer in limbo: "+n.key),r.au.removeReference(n.key,e),r.au.containsKey(n.key)||cb(r,n.key)):tt(19791,{Iu:n})}function SP(r,e){const t=e.key,n=t.path.canonicalString();r.ou.get(t)||r.su.has(n)||(je(tv,"New document in limbo: "+t),r.su.add(n),nv(r))}function nv(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new Qe(Ft.fromString(e)),n=r.lu.next();r._u.set(n,new mP(t)),r.ou=r.ou.insert(t,n),JA(r.remoteStore,new Ls(mi(By(t.path)),n,"TargetPurposeLimboResolution",xd.le))}}async function $u(r,e,t){const n=ot(r),i=[],o=[],l=[];n.ru.isEmpty()||(n.ru.forEach((u,h)=>{l.push(n.Pu(h,e,t).then(d=>{var g;if((d||t)&&n.isPrimaryClient){const m=d?!d.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;n.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(d){i.push(d);const m=$y.Ps(h.targetId,d);o.push(m)}}))}),await Promise.all(l),n.nu.Q_(i),await async function(h,d){const g=ot(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>we.forEach(d,p=>we.forEach(p.ls,y=>g.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>we.forEach(p.hs,y=>g.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!il(m))throw m;je(Gy,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=g.Ss.get(p),b=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(b);g.Ss=g.Ss.insert(p,x)}}}(n.localStore,o))}async function TP(r,e){const t=ot(r);if(!t.currentUser.isEqual(e)){je(tv,"User change. New user:",e.toKey());const n=await WA(t.localStore,e);t.currentUser=e,function(o,l){o.cu.forEach(u=>{u.forEach(h=>{h.reject(new Be(_e.CANCELLED,l))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $u(t,n.Ms)}}function IP(r,e){const t=ot(r),n=t._u.get(e);if(n&&n.tu)return gt().add(n.key);{let i=gt();const o=t.iu.get(e);if(!o)return i;for(const l of o){const u=t.ru.get(l);i=i.unionWith(u.view.Wa)}return i}}function hb(r){const e=ot(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ab.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AP.bind(null,e),e.nu.Q_=hP.bind(null,e.eventManager),e.nu.Tu=dP.bind(null,e.eventManager),e}function DP(r){const e=ot(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return NR(this.persistence,new kR,e.initialUser,this.serializer)}Ru(e){return new HA(Wy.Ei,this.serializer)}Au(e){return new qR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class kP extends od{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){bt(this.persistence.referenceDelegate instanceof id,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new mR(n,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new HA(n=>id.Ei(n,t),this.serializer)}}class fy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>_1(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=TP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cP}()}createDatastore(e){const t=Nd(e.databaseInfo.databaseId),n=function(o){return new WR(o)}(e.databaseInfo);return function(o,l,u,h){return new JR(o,l,u,h)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,o,l,u){return new YR(n,i,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>_1(this.syncEngine,t,0),function(){return f1.C()?new f1:new UR}())}createSyncEngine(e,t){return function(i,o,l,u,h,d,g){const m=new gP(i,o,l,u,h,d);return g&&(m.hu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=ot(i);je(jo,"RemoteStore shutting down."),o.aa.add(5),await Wu(o),o.ca.shutdown(),o.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fy.provider={build:()=>new fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class RP{constructor(e,t,n,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=tA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async l=>{je(Gs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(je(Gs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Zy(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function em(r,e){r.asyncQueue.verifyOperationInProgress(),je(Gs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await WA(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function E1(r,e){r.asyncQueue.verifyOperationInProgress();const t=await PP(r);je(Gs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>m1(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>m1(e.remoteStore,i)),r._onlineComponents=e}async function PP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){je(Gs,"Using user provided OfflineComponentProvider");try{await em(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),await em(r,new od)}}else je(Gs,"Using default OfflineComponentProvider"),await em(r,new kP(void 0));return r._offlineComponents}async function rv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(je(Gs,"Using user provided OnlineComponentProvider"),await E1(r,r._uninitializedComponentsProvider._online)):(je(Gs,"Using default OnlineComponentProvider"),await E1(r,new fy))),r._onlineComponents}function NP(r){return rv(r).then(e=>e.syncEngine)}function OP(r){return rv(r).then(e=>e.datastore)}async function py(r){const e=await rv(r),t=e.eventManager;return t.onListen=yP.bind(null,e.syncEngine),t.onUnlisten=wP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=EP.bind(null,e.syncEngine),t}function LP(r,e,t={}){const n=new Hi;return r.asyncQueue.enqueueAndForget(async()=>function(o,l,u,h,d){const g=new db({next:p=>{g.yu(),l.enqueueAndForget(()=>nb(o,m)),p.fromCache&&h.source==="server"?d.reject(new Be(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new rb(u,g,{includeMetadataChanges:!0,Fa:!0});return tb(o,m)}(await py(r),r.asyncQueue,e,t,n)),n.promise}function FP(r,e,t){const n=new Hi;return r.asyncQueue.enqueueAndForget(async()=>{try{const i=await OP(r);n.resolve(async function(l,u,h){var d;const g=ot(l),{request:m,yt:p,parent:y}=nR(g.serializer,Ck(u),h);g.connection.Bo||delete m.parent;const b=(await g.Wo("RunAggregationQuery",g.serializer.databaseId,y,m,1)).filter(E=>!!E.result);bt(b.length===1,64727);const x=(d=b[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(x).reduce((E,w)=>(E[p[w]]=x[w],E),{})}(i,e,t))}catch(i){n.reject(i)}}),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r,e,t){if(!t)throw new Be(_e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function jP(r,e,t,n){if(e===!0&&n===!0)throw new Be(_e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function A1(r){if(!Qe.isDocumentKey(r))throw new Be(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function b1(r){if(Qe.isDocumentKey(r))throw new Be(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Fd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":tt(12329,{type:typeof r})}function Dr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Be(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fd(r);throw new Be(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function BP(r,e){if(e<=0)throw new Be(_e.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firestore.googleapis.com",x1=!0;class S1{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mb,this.ssl=x1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:x1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fR)throw new Be(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fb((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Be(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Be(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Be(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new UD;switch(n.type){case"firstParty":return new WD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Be(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=C1.get(t);n&&(je("ComponentProvider","Removing Datastore"),C1.delete(t),n.terminate())}(this),Promise.resolve()}}function MP(r,e,t,n={}){var i;r=Dr(r,jd);const o=tl(e),l=r._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:r._getEmulatorOptions()}),h=`${e}:${t}`;o&&Iy(`https://${h}`),l.host!==mb&&l.host!==h&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:h,ssl:o,emulatorOptions:n});if(!Oo(d,u)&&(r._setSettings(d),n.mockUserToken)){let g,m;if(typeof n.mockUserToken=="string")g=n.mockUserToken,m=On.MOCK_USER;else{g=qC(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new Be(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new On(p)}r._authCredentials=new VD(new ZC(g,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class zn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class qs extends Zi{constructor(e,t,n){super(e,t,By(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Qe(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function qP(r,e,...t){if(r=Nt(r),pb("collection","path",e),r instanceof jd){const n=Ft.fromString(e,...t);return b1(n),new qs(r,null,n)}{if(!(r instanceof zn||r instanceof qs))throw new Be(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Ft.fromString(e,...t));return b1(n),new qs(r.firestore,null,n)}}function UP(r,e,...t){if(r=Nt(r),arguments.length===1&&(e=tA.newId()),pb("doc","path",e),r instanceof jd){const n=Ft.fromString(e,...t);return A1(n),new zn(r,null,new Qe(n))}{if(!(r instanceof zn||r instanceof qs))throw new Be(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Ft.fromString(e,...t));return A1(n),new zn(r.firestore,r instanceof qs?r.converter:null,new Qe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="AsyncQueue";class I1{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new GA(this,"async_queue_retry"),this.ju=()=>{const n=Zp();n&&je(T1,"Visibility state changed to "+n.visibilityState),this.y_.A_()},this.Hu=e;const t=Zp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Zp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Hi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!il(e))throw e;je(T1,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(n=>{throw this.Ku=n,this.Wu=!1,Ji("INTERNAL UNHANDLED ERROR: ",D1(n)),n}).then(n=>(this.Wu=!1,n))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=Xy.createAndSchedule(this,e,t,n,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&tt(47125,{ec:D1(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function D1(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of n)if(o in i&&typeof i[o]=="function")return!0;return!1}(r,["next","error","complete"])}class Ks extends jd{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new I1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I1(e),this._firestoreClient=void 0,await e}}}function VP(r,e){const t=typeof r=="object"?r:Ry(),n=typeof r=="string"?r:Xh,i=bd(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=jC("firestore");o&&MP(i,...o)}return i}function Bd(r){if(r._terminated)throw new Be(_e.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||zP(r),r._firestoreClient}function zP(r){var e,t,n;const i=r._freezeSettings(),o=function(u,h,d,g){return new ak(u,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,fb(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new RP(r._authCredentials,r._appCheckCredentials,r._queue,o,r._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class WP{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xa(Tn.fromBase64String(e))}catch(t){throw new Be(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xa(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Be(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=/^__.*__$/;class GP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new zu(e,this.data,t,this.fieldTransforms)}}class gb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{oc:r})}}class ov{constructor(e,t,n,i,o,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new ov(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:n,cc:!1});return i.lc(e),i}hc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:n,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return ad(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(yb(this.oc)&&$P.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class KP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Nd(e)}dc(e,t,n,i=!1){return new ov({oc:e,methodName:t,Ec:n,path:xn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function av(r){const e=r._freezeSettings(),t=Nd(r._databaseId);return new KP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function JP(r,e,t,n,i,o={}){const l=r.dc(o.merge||o.mergeFields?2:0,e,t,i);uv("Data must be an object, but it was:",l,n);const u=vb(n,l);let h,d;if(o.merge)h=new pr(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const m of o.mergeFields){const p=my(e,m,t);if(!l.contains(p))throw new Be(_e.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);wb(g,p)||g.push(p)}h=new pr(g),d=l.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,d=l.fieldTransforms;return new GP(new rr(u),h,d)}class Ud extends qd{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ud}}class lv extends qd{_toFieldTransform(e){return new Nk(e.path,new Du)}isEqual(e){return e instanceof lv}}function QP(r,e,t,n){const i=r.dc(1,e,t);uv("Data must be an object, but it was:",i,n);const o=[],l=rr.empty();Ys(n,(h,d)=>{const g=cv(e,h,t);d=Nt(d);const m=i.hc(g);if(d instanceof Ud)o.push(g);else{const p=Gu(d,m);p!=null&&(o.push(g),l.set(g,p))}});const u=new pr(o);return new gb(l,u,i.fieldTransforms)}function YP(r,e,t,n,i,o){const l=r.dc(1,e,t),u=[my(e,n,t)],h=[i];if(o.length%2!=0)throw new Be(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)u.push(my(e,o[p])),h.push(o[p+1]);const d=[],g=rr.empty();for(let p=u.length-1;p>=0;--p)if(!wb(d,u[p])){const y=u[p];let b=h[p];b=Nt(b);const x=l.hc(y);if(b instanceof Ud)d.push(y);else{const E=Gu(b,x);E!=null&&(d.push(y),g.set(y,E))}}const m=new pr(d);return new gb(g,m,l.fieldTransforms)}function XP(r,e,t,n=!1){return Gu(t,r.dc(n?4:3,e))}function Gu(r,e){if(_b(r=Nt(r)))return uv("Unsupported field value:",e,r),vb(r,e);if(r instanceof qd)return function(n,i){if(!yb(i.oc))throw i.Tc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(n,i){const o=[];let l=0;for(const u of n){let h=Gu(u,i.Pc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(r,e)}return function(n,i){if((n=Nt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return kk(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=sn.fromDate(n);return{timestampValue:rd(i.serializer,o)}}if(n instanceof sn){const o=new sn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:rd(i.serializer,o)}}if(n instanceof iv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xa)return{bytesValue:LA(i.serializer,n._byteString)};if(n instanceof zn){const o=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(o))throw i.Tc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zy(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof sv)return function(l,u){return{mapValue:{fields:{[uA]:{stringValue:cA},[Zh]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw u.Tc("VectorValues must only contain numeric values.");return My(u.serializer,d)})}}}}}}(n,i);throw i.Tc(`Unsupported field value: ${Fd(n)}`)}(r,e)}function vb(r,e){const t={};return rA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(r,(n,i)=>{const o=Gu(i,e.uc(n));o!=null&&(t[n]=o)}),{mapValue:{fields:t}}}function _b(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof sn||r instanceof iv||r instanceof Xa||r instanceof zn||r instanceof qd||r instanceof sv)}function uv(r,e,t){if(!_b(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=Fd(t);throw n==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+n)}}function my(r,e,t){if((e=Nt(e))instanceof Md)return e._internalPath;if(typeof e=="string")return cv(r,e);throw ad("Field path arguments must be of type string or ",r,!1,void 0,t)}const ZP=new RegExp("[~\\*/\\[\\]]");function cv(r,e,t){if(e.search(ZP)>=0)throw ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Md(...e.split("."))._internalPath}catch{throw ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ad(r,e,t,n,i){const o=n&&!n.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new Be(_e.INVALID_ARGUMENT,u+r+h)}function wb(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t,n,i,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eN extends Eb{data(){return super.data()}}function Vd(r,e){return typeof e=="string"?cv(r,e):e instanceof Md?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Be(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hv{}class dv extends hv{}function tN(r,e,...t){let n=[];e instanceof hv&&n.push(e),n=n.concat(t),function(o){const l=o.filter(h=>h instanceof fv).length,u=o.filter(h=>h instanceof zd).length;if(l>1||l>0&&u>0)throw new Be(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class zd extends dv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zd(e,t,n)}_apply(e){const t=this._parse(e);return Ab(e._query,t),new Zi(e.firestore,e.converter,iy(e._query,t))}_parse(e){const t=av(e.firestore);return function(o,l,u,h,d,g,m){let p;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Be(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){N1(m,g);const b=[];for(const x of m)b.push(P1(h,o,x));p={arrayValue:{values:b}}}else p=P1(h,o,m)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||N1(m,g),p=XP(u,l,m,g==="in"||g==="not-in");return rn.create(d,g,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function R1(r,e,t){const n=e,i=Vd("where",r);return zd._create(i,n,t)}class fv extends hv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fv(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const u=o.getFlattenedFilters();for(const h of u)Ab(l,h),l=iy(l,h)}(e._query,t),new Zi(e.firestore,e.converter,iy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pv extends dv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pv(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new Be(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Be(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iu(o,l)}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new sl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function nN(r,e="asc"){const t=e,n=Vd("orderBy",r);return pv._create(n,t)}class mv extends dv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new mv(e,t,n)}_apply(e){return new Zi(e.firestore,e.converter,td(e._query,this._limit,this._limitType))}}function rN(r){return BP("limit",r),mv._create("limit",r,"F")}function P1(r,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new Be(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vA(e)&&t.indexOf("/")!==-1)throw new Be(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Ft.fromString(t));if(!Qe.isDocumentKey(n))throw new Be(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return W_(r,new Qe(n))}if(t instanceof zn)return W_(r,t._key);throw new Be(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(t)}.`)}function N1(r,e){if(!Array.isArray(r)||r.length===0)throw new Be(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ab(r,e){const t=function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Be(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class iN{convertValue(e,t="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ys(e,(i,o)=>{n[i]=this.convertValue(o,t)}),n}convertVectorValue(e){var t,n,i;const o=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[Zh].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(l=>Xt(l.doubleValue));return new sv(o)}convertGeoPoint(e){return new iv(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Td(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=zs(e);return new sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ft.fromString(e);bt(VA(n),9688,{name:e});const i=new Su(n.get(1),n.get(3)),o=new Qe(n.popFirst(5));return i.isEqual(t)||Ji(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}function oN(){return new HP("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bb extends Eb{constructor(e,t,n,i,o,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class jh extends bb{data(e={}){return super.data(e)}}class xb{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hu(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new jh(this._firestore,this._userDataWriter,n.key,n,new hu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>{const h=new jh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new hu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new jh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new hu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:aN(u.type),doc:h,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function aN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:r})}}class Hd extends iN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function lN(r){r=Dr(r,Zi);const e=Dr(r.firestore,Ks),t=Bd(e),n=new Hd(e);return Cb(r._query),LP(t,r._query).then(i=>new xb(e,n,r,i))}function uN(r,e,t){r=Dr(r,zn);const n=Dr(r.firestore,Ks),i=sN(r.converter,e,t);return gv(n,[JP(av(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Kr.none())])}function cN(r,e,t,...n){r=Dr(r,zn);const i=Dr(r.firestore,Ks),o=av(i);let l;return l=typeof(e=Nt(e))=="string"||e instanceof Md?YP(o,"updateDoc",r._key,e,t,n):QP(o,"updateDoc",r._key,e),gv(i,[l.toMutation(r._key,Kr.exists(!0))])}function O1(r){return gv(Dr(r.firestore,Ks),[new qy(r._key,Kr.none())])}function hN(r,...e){var t,n,i;r=Nt(r);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||k1(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(k1(e[l])){const m=e[l];e[l]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[l+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[l+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let h,d,g;if(r instanceof zn)d=Dr(r.firestore,Ks),g=By(r._key.path),h={next:m=>{e[l]&&e[l](dN(d,r,m))},error:e[l+1],complete:e[l+2]};else{const m=Dr(r,Zi);d=Dr(m.firestore,Ks),g=m._query;const p=new Hd(d);h={next:y=>{e[l]&&e[l](new xb(d,p,m,y))},error:e[l+1],complete:e[l+2]},Cb(r._query)}return function(p,y,b,x){const E=new db(x),w=new rb(y,E,b);return p.asyncQueue.enqueueAndForget(async()=>tb(await py(p),w)),()=>{E.yu(),p.asyncQueue.enqueueAndForget(async()=>nb(await py(p),w))}}(Bd(d),g,u,h)}function gv(r,e){return function(n,i){const o=new Hi;return n.asyncQueue.enqueueAndForget(async()=>CP(await NP(n),i,o)),o.promise}(Bd(r),e)}function dN(r,e,t){const n=t.docs.get(e._key),i=new Hd(r);return new bb(r,i,e._key,n,new hu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r){return pN(r,{count:oN()})}function pN(r,e){const t=Dr(r.firestore,Ks),n=Bd(t),i=sk(e,(o,l)=>new Uk(l,o.aggregateType,o._internalFieldPath));return FP(n,r._query,i).then(o=>function(u,h,d){const g=new Hd(u);return new WP(h,g,d)}(t,r,o))}function mN(){return new lv("serverTimestamp")}(function(e,t=!0){(function(i){nl=i})(Uo),Lo(new Us("firestore",(n,{instanceIdentifier:i,options:o})=>{const l=n.getProvider("app").getImmediate(),u=new Ks(new zD(n.getProvider("auth-internal")),new $D(l,n.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Be(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(d.options.projectId,g)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),pi(N_,O_,e),pi(N_,O_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="firebasestorage.googleapis.com",Tb="storageBucket",gN=2*60*1e3,yN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends Ai{constructor(e,t,n=0){super(tm(e),`Firebase Storage: ${t} (${tm(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function tm(r){return"storage/"+r}function yv(){const r="An unknown error occurred, please check the error payload for server response.";return new Jt(Kt.UNKNOWN,r)}function vN(r){return new Jt(Kt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function _N(r){return new Jt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wN(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Kt.UNAUTHENTICATED,r)}function EN(){return new Jt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CN(r){return new Jt(Kt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function AN(){return new Jt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bN(){return new Jt(Kt.CANCELED,"User canceled the upload/download.")}function xN(r){return new Jt(Kt.INVALID_URL,"Invalid URL '"+r+"'.")}function SN(r){return new Jt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function TN(){return new Jt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Tb+"' property when initializing the app?")}function IN(){return new Jt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DN(){return new Jt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kN(r){return new Jt(Kt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gy(r){return new Jt(Kt.INVALID_ARGUMENT,r)}function Ib(){return new Jt(Kt.APP_DELETED,"The Firebase app was deleted.")}function RN(r){return new Jt(Kt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _u(r,e){return new Jt(Kt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function ru(r){throw new Jt(Kt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=mr.makeFromUrl(e,t)}catch{return new mr(e,"")}if(n.path==="")return n;throw SN(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function d(S){S.path_=decodeURIComponent(S.path)}const g="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${g}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},x=t===Sb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",w=new RegExp(`^https?://${x}/${i}/${E}`,"i"),P=[{regex:u,indices:h,postModify:o},{regex:y,indices:b,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let S=0;S<P.length;S++){const O=P[S],M=O.regex.exec(e);if(M){const R=M[O.indices.bucket];let A=M[O.indices.path];A||(A=""),n=new mr(R,A),O.postModify(n);break}}if(n==null)throw xN(e);return n}}class PN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r,e,t){let n=1,i=null,o=null,l=!1,u=0;function h(){return u===2}let d=!1;function g(...E){d||(d=!0,e.apply(null,E))}function m(E){i=setTimeout(()=>{i=null,r(y,h())},E)}function p(){o&&clearTimeout(o)}function y(E,...w){if(d){p();return}if(E){p(),g.call(null,E,...w);return}if(h()||l){p(),g.call(null,E,...w);return}n<64&&(n*=2);let P;u===1?(u=2,P=0):P=(n+Math.random())*1e3,m(P)}let b=!1;function x(E){b||(b=!0,p(),!d&&(i!==null?(E||(u=2),clearTimeout(i),m(0)):E||(u=1)))}return m(0),o=setTimeout(()=>{l=!0,x(!0)},t),x}function ON(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(r){return r!==void 0}function FN(r){return typeof r=="object"&&!Array.isArray(r)}function vv(r){return typeof r=="string"||r instanceof String}function L1(r){return _v()&&r instanceof Blob}function _v(){return typeof Blob<"u"}function F1(r,e,t,n){if(n<e)throw gy(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw gy(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function Db(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var No;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(No||(No={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,n,i,o,l,u,h,d,g,m,p=!0,y=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=g,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,x)=>{this.resolve_=b,this.reject_=x,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new bh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const h=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===No.NO_ERROR,h=o.getStatus();if(!u||jN(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===No.ABORT;n(!1,new bh(!1,null,g));return}const d=this.successCodes_.indexOf(h)!==-1;n(!0,new bh(d,o))})},t=(n,i)=>{const o=this.resolve_,l=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());LN(h)?o(h):o()}catch(h){l(h)}else if(u!==null){const h=yv();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(i.canceled){const h=this.appDelete_?Ib():bN();l(h)}else{const h=AN();l(h)}};this.canceled_?t(!1,new bh(!1,null,!0)):this.backoffId_=NN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ON(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bh{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function MN(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function qN(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UN(r,e){e&&(r["X-Firebase-GMPID"]=e)}function VN(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function zN(r,e,t,n,i,o,l=!0,u=!1){const h=Db(r.urlParams),d=r.url+h,g=Object.assign({},r.headers);return UN(g,e),MN(g,t),qN(g,o),VN(g,n),new BN(d,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WN(...r){const e=HN();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(_v())return new Blob(r);throw new Jt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $N(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){if(typeof atob>"u")throw kN("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nm{constructor(e,t){this.data=e,this.contentType=t||null}}function KN(r,e){switch(r){case di.RAW:return new nm(kb(e));case di.BASE64:case di.BASE64URL:return new nm(Rb(r,e));case di.DATA_URL:return new nm(QN(e),YN(e))}throw yv()}function kb(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=n,l=r.charCodeAt(++t);n=65536|(o&1023)<<10|l&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function JN(r){let e;try{e=decodeURIComponent(r)}catch{throw _u(di.DATA_URL,"Malformed data URL.")}return kb(e)}function Rb(r,e){switch(r){case di.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw _u(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case di.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw _u(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=GN(e)}catch(i){throw i.message.includes("polyfill")?i:_u(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class Pb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw _u(di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=XN(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function QN(r){const e=new Pb(r);return e.base64?Rb(di.BASE64,e.rest):JN(e.rest)}function YN(r){return new Pb(r).contentType}function XN(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){let n=0,i="";L1(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(L1(this.data_)){const n=this.data_,i=$N(n,e,t);return i===null?null:new ks(i)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new ks(n,!0)}}static getBlob(...e){if(_v()){const t=e.map(n=>n instanceof ks?n.data_:n);return new ks(WN.apply(null,t))}else{const t=e.map(l=>vv(l)?KN(di.RAW,l).data:l.data_);let n=0;t.forEach(l=>{n+=l.byteLength});const i=new Uint8Array(n);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)i[o++]=l[u]}),new ks(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(r){let e;try{e=JSON.parse(r)}catch{return null}return FN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function eO(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function Ob(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(r,e){return e}class Vn{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||tO}}let xh=null;function nO(r){return!vv(r)||r.length<2?r:Ob(r)}function Lb(){if(xh)return xh;const r=[];r.push(new Vn("bucket")),r.push(new Vn("generation")),r.push(new Vn("metageneration")),r.push(new Vn("name","fullPath",!0));function e(o,l){return nO(l)}const t=new Vn("name");t.xform=e,r.push(t);function n(o,l){return l!==void 0?Number(l):l}const i=new Vn("size");return i.xform=n,r.push(i),r.push(new Vn("timeCreated")),r.push(new Vn("updated")),r.push(new Vn("md5Hash",null,!0)),r.push(new Vn("cacheControl",null,!0)),r.push(new Vn("contentDisposition",null,!0)),r.push(new Vn("contentEncoding",null,!0)),r.push(new Vn("contentLanguage",null,!0)),r.push(new Vn("contentType",null,!0)),r.push(new Vn("metadata","customMetadata",!0)),xh=r,xh}function rO(r,e){function t(){const n=r.bucket,i=r.fullPath,o=new mr(n,i);return e._makeStorageReference(o)}Object.defineProperty(r,"ref",{get:t})}function iO(r,e,t){const n={};n.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];n[l.local]=l.xform(n,e[l.server])}return rO(n,r),n}function Fb(r,e,t){const n=Nb(e);return n===null?null:iO(r,n,t)}function sO(r,e,t,n){const i=Nb(e);if(i===null||!vv(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(d=>{const g=r.bucket,m=r.fullPath,p="/b/"+l(g)+"/o/"+l(m),y=Wd(p,t,n),b=Db({alt:"media",token:d});return y+b})[0]}function oO(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const o=e[i];o.writable&&(t[o.server]=r[o.local])}return JSON.stringify(t)}class wv{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(r){if(!r)throw yv()}function aO(r,e){function t(n,i){const o=Fb(r,i,e);return jb(o!==null),o}return t}function lO(r,e){function t(n,i){const o=Fb(r,i,e);return jb(o!==null),sO(o,i,r.host,r._protocol)}return t}function Bb(r){function e(t,n){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=EN():i=wN():t.getStatus()===402?i=_N(r.bucket):t.getStatus()===403?i=CN(r.path):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}return e}function Mb(r){const e=Bb(r);function t(n,i){let o=e(n,i);return n.getStatus()===404&&(o=vN(r.path)),o.serverResponse=i.serverResponse,o}return t}function uO(r,e,t){const n=e.fullServerUrl(),i=Wd(n,r.host,r._protocol),o="GET",l=r.maxOperationRetryTime,u=new wv(i,o,lO(r,t),l);return u.errorHandler=Mb(e),u}function cO(r,e){const t=e.fullServerUrl(),n=Wd(t,r.host,r._protocol),i="DELETE",o=r.maxOperationRetryTime;function l(h,d){}const u=new wv(n,i,l,o);return u.successCodes=[200,204],u.errorHandler=Mb(e),u}function hO(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function dO(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=hO(null,e)),n}function fO(r,e,t,n,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let P="";for(let S=0;S<2;S++)P=P+Math.random().toString().slice(2);return P}const h=u();l["Content-Type"]="multipart/related; boundary="+h;const d=dO(e,n,i),g=oO(d,t),m="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+h+"--",y=ks.getBlob(m,n,p);if(y===null)throw IN();const b={name:d.fullPath},x=Wd(o,r.host,r._protocol),E="POST",w=r.maxUploadRetryTime,C=new wv(x,E,aO(r,t),w);return C.urlParams=b,C.headers=l,C.body=y.uploadData(),C.errorHandler=Bb(e),C}class pO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=No.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=No.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=No.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i,o){if(this.sent_)throw ru("cannot .send() more than once");if(tl(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ru("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ru("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ru("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ru("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mO extends pO{initXhr(){this.xhr_.responseType="text"}}function Ev(){return new mO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this._service=e,t instanceof mr?this._location=t:this._location=mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bo(e,t)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ob(this._location.path)}get storage(){return this._service}get parent(){const e=ZN(this._location.path);if(e===null)return null;const t=new mr(this._location.bucket,e);return new Bo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RN(e)}}function gO(r,e,t){r._throwIfRoot("uploadBytes");const n=fO(r.storage,r._location,Lb(),new ks(e,!0),t);return r.storage.makeRequestWithTokens(n,Ev).then(i=>({metadata:i,ref:r}))}function yO(r){r._throwIfRoot("getDownloadURL");const e=uO(r.storage,r._location,Lb());return r.storage.makeRequestWithTokens(e,Ev).then(t=>{if(t===null)throw DN();return t})}function vO(r){r._throwIfRoot("deleteObject");const e=cO(r.storage,r._location);return r.storage.makeRequestWithTokens(e,Ev)}function _O(r,e){const t=eO(r._location.path,e),n=new mr(r._location.bucket,t);return new Bo(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(r){return/^[A-Za-z]+:\/\//.test(r)}function EO(r,e){return new Bo(r,e)}function qb(r,e){if(r instanceof Cv){const t=r;if(t._bucket==null)throw TN();const n=new Bo(t,t._bucket);return e!=null?qb(n,e):n}else return e!==void 0?_O(r,e):r}function CO(r,e){if(e&&wO(e)){if(r instanceof Cv)return EO(r,e);throw gy("To use ref(service, url), the first argument must be a Storage instance.")}else return qb(r,e)}function j1(r,e){const t=e==null?void 0:e[Tb];return t==null?null:mr.makeFromBucketSpec(t,r)}function AO(r,e,t,n={}){r.host=`${e}:${t}`;const i=tl(e);i&&Iy(`https://${r.host}`),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:qC(o,r.app.options.projectId))}class Cv{constructor(e,t,n,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=Sb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gN,this._maxUploadRetryTime=yN,this._requests=new Set,i!=null?this._bucket=mr.makeFromBucketSpec(i,this._host):this._bucket=j1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mr.makeFromBucketSpec(this._url,e):this._bucket=j1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bo(this,e)}_makeRequest(e,t,n,i,o=!0){if(this._deleted)return new PN(Ib());{const l=zN(e,this._appId,n,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const B1="@firebase/storage",M1="0.13.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="storage";function bO(r,e,t){return r=Nt(r),gO(r,e,t)}function xO(r){return r=Nt(r),yO(r)}function SO(r){return r=Nt(r),vO(r)}function rm(r,e){return r=Nt(r),CO(r,e)}function TO(r=Ry(),e){r=Nt(r);const n=bd(r,Ub).getImmediate({identifier:e}),i=jC("storage");return i&&IO(n,...i),n}function IO(r,e,t,n={}){AO(r,e,t,n)}function DO(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Cv(t,n,i,e,Uo)}function kO(){Lo(new Us(Ub,DO,"PUBLIC").setMultipleInstances(!0)),pi(B1,M1,""),pi(B1,M1,"esm2017")}kO();function Av(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RO=Vb,zb=new Uu("auth","Firebase",Vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Dy("@firebase/auth");function PO(r,...e){ld.logLevel<=mt.WARN&&ld.warn(`Auth (${Uo}): ${r}`,...e)}function Bh(r,...e){ld.logLevel<=mt.ERROR&&ld.error(`Auth (${Uo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(r,...e){throw bv(r,...e)}function yi(r,...e){return bv(r,...e)}function Hb(r,e,t){const n=Object.assign(Object.assign({},RO()),{[e]:t});return new Uu("auth","Firebase",n).create(e,{appName:r.name})}function Wi(r){return Hb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bv(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return zb.create(r,...e)}function et(r,e,...t){if(!r)throw bv(e,...t)}function Vi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Bh(e),new Error(e)}function Yi(r,e){r||Vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function NO(){return q1()==="http:"||q1()==="https:"}function q1(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NO()||vI()||"connection"in navigator)?navigator.onLine:!0}function LO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yi(t>e,"Short delay should be less than long delay!"),this.isMobile=mI()||_I()}get(){return OO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(r,e){Yi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BO=new Ku(3e4,6e4);function es(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function bi(r,e,t,n,i={}){return $b(r,i,async()=>{let o={},l={};n&&(e==="GET"?l=n:o={body:JSON.stringify(n)});const u=Vu(Object.assign({key:r.config.apiKey},l)).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:h},o);return yI()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&tl(r.emulatorConfig.host)&&(d.credentials="include"),Wb.fetch()(await Gb(r,r.config.apiHost,t,u),d)})}async function $b(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},FO),e);try{const i=new qO(r),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Sh(r,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Sh(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw Sh(r,"user-disabled",l);const g=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Hb(r,g,d);Qr(r,g)}}catch(i){if(i instanceof Ai)throw i;Qr(r,"network-request-failed",{message:String(i)})}}async function Ju(r,e,t,n,i={}){const o=await bi(r,e,t,n,i);return"mfaPendingCredential"in o&&Qr(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function Gb(r,e,t,n){const i=`${e}${t}?${n}`,o=r,l=o.config.emulator?xv(r.config,i):`${r.config.apiScheme}://${i}`;return jO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function MO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(yi(this.auth,"network-request-failed")),BO.get())})}}function Sh(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=yi(r,e,n);return i.customData._tokenResponse=t,i}function U1(r){return r!==void 0&&r.enterprise!==void 0}class UO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VO(r,e){return bi(r,"GET","/v2/recaptchaConfig",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(r,e){return bi(r,"POST","/v1/accounts:delete",e)}async function ud(r,e){return bi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HO(r,e=!1){const t=Nt(r),n=await t.getIdToken(e),i=Sv(n);et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:wu(im(i.auth_time)),issuedAtTime:wu(im(i.iat)),expirationTime:wu(im(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function im(r){return Number(r)*1e3}function Sv(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=LC(t);return i?JSON.parse(i):(Bh("Failed to decode base64 JWT payload"),null)}catch(i){return Bh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function V1(r){const e=Sv(r);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Ai&&WO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function WO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(r){var e;const t=r.auth,n=await r.getIdToken(),i=await Za(r,ud(t,{idToken:n}));et(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Kb(o.providerUserInfo):[],u=KO(r.providerData,l),h=r.isAnonymous,d=!(r.email&&o.passwordHash)&&!(u!=null&&u.length),g=h?d:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vy(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,m)}async function GO(r){const e=Nt(r);await cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KO(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Kb(r){return r.map(e=>{var{providerId:t}=e,n=Av(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(r,e){const t=await $b(r,{},async()=>{const n=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=r.config,l=await Gb(r,i,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Wb.fetch()(l,{method:"POST",headers:u,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QO(r,e){return bi(r,"POST","/v2/accounts:revokeToken",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){et(e.length!==0,"internal-error");const t=V1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await JO(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:o}=t,l=new Ua;return n&&(et(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(et(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(et(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(r,e){et(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Gr{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,o=Av(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $O(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Za(this,this.stsTokenManager.getToken(this.auth,e));return et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return HO(this,e)}reload(){return GO(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await cd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await Za(this,zO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,o,l,u,h,d,g;const m=(n=t.displayName)!==null&&n!==void 0?n:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(l=t.photoURL)!==null&&l!==void 0?l:void 0,x=(u=t.tenantId)!==null&&u!==void 0?u:void 0,E=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,w=(d=t.createdAt)!==null&&d!==void 0?d:void 0,C=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:P,emailVerified:S,isAnonymous:O,providerData:M,stsTokenManager:R}=t;et(P&&R,e,"internal-error");const A=Ua.fromJSON(this.name,R);et(typeof P=="string",e,"internal-error"),Ts(m,e.name),Ts(p,e.name),et(typeof S=="boolean",e,"internal-error"),et(typeof O=="boolean",e,"internal-error"),Ts(y,e.name),Ts(b,e.name),Ts(x,e.name),Ts(E,e.name),Ts(w,e.name),Ts(C,e.name);const T=new Gr({uid:P,auth:e,email:p,emailVerified:S,displayName:m,isAnonymous:O,photoURL:b,phoneNumber:y,tenantId:x,stsTokenManager:A,createdAt:w,lastLoginAt:C});return M&&Array.isArray(M)&&(T.providerData=M.map(I=>Object.assign({},I))),E&&(T._redirectEventId=E),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new Ua;i.updateFromServerResponse(t);const o=new Gr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await cd(o),o}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];et(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Kb(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Ua;u.updateFromIdToken(n);const h=new Gr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new vy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;function zi(r){Yi(r instanceof Function,"Expected a class definition");let e=z1.get(r);return e?(Yi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,z1.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jb.type="NONE";const H1=Jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(r,e,t){return`firebase:${r}:${e}:${t}`}class Va{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=Mh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Mh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ud(this.auth,{idToken:e}).catch(()=>{});return t?Gr._fromGetAccountInfoResponse(this.auth,t,e):null}return Gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Va(zi(H1),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||zi(H1);const l=Mh(n,e.config.apiKey,e.name);let u=null;for(const d of t)try{const g=await d._get(l);if(g){let m;if(typeof g=="string"){const p=await ud(e,{idToken:g}).catch(()=>{});if(!p)break;m=await Gr._fromGetAccountInfoResponse(e,p,g)}else m=Gr._fromJSON(e,g);d!==o&&(u=m),o=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Va(o,e,n):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Va(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tx(e))return"Blackberry";if(nx(e))return"Webos";if(Yb(e))return"Safari";if((e.includes("chrome/")||Xb(e))&&!e.includes("edge/"))return"Chrome";if(ex(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Qb(r=jn()){return/firefox\//i.test(r)}function Yb(r=jn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xb(r=jn()){return/crios\//i.test(r)}function Zb(r=jn()){return/iemobile/i.test(r)}function ex(r=jn()){return/android/i.test(r)}function tx(r=jn()){return/blackberry/i.test(r)}function nx(r=jn()){return/webos/i.test(r)}function Tv(r=jn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function YO(r=jn()){var e;return Tv(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XO(){return wI()&&document.documentMode===10}function rx(r=jn()){return Tv(r)||ex(r)||nx(r)||tx(r)||/windows phone/i.test(r)||Zb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(r,e=[]){let t;switch(r){case"Browser":t=W1(jn());break;case"Worker":t=`${W1(jn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(r,e={}){return bi(r,"GET","/v2/passwordPolicy",es(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=6;class n3{constructor(e){var t,n,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:t3,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,o,l,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(n=h.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $1(this),this.idTokenSubscription=new $1(this),this.beforeStateQueue=new ZO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(async()=>{var n,i,o;if(!this._deleted&&(this.persistenceManager=await Va.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ud(this,{idToken:e}),n=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(Wi(this));const t=e?Nt(e):null;return t&&et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e3(this),t=new n3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await QO(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zi(e)||this._popupRedirectResolver;et(t,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ix(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&PO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Zs(r){return Nt(r)}class $1{constructor(e){this.auth=e,this.observer=null,this.addObserver=II(t=>this.observer=t)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i3(r){$d=r}function sx(r){return $d.loadJS(r)}function s3(){return $d.recaptchaEnterpriseScript}function o3(){return $d.gapiScript}function a3(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class l3{constructor(){this.enterprise=new u3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class u3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c3="recaptcha-enterprise",ox="NO_RECAPTCHA";class h3{constructor(e){this.type=c3,this.auth=Zs(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{VO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new UO(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(h=>{u(h)})})}function i(o,l,u){const h=window.grecaptcha;U1(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(ox)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l3().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{n(this.auth).then(u=>{if(!t&&U1(window.grecaptcha))i(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=s3();h.length!==0&&(h+=u),sx(h).then(()=>{i(u,o,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function G1(r,e,t,n=!1,i=!1){const o=new h3(r);let l;if(i)l=ox;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function hd(r,e,t,n,i){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await G1(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await G1(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(r,e){const t=bd(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Oo(o,e??{}))return i;Qr(i,"already-initialized")}return t.initialize({options:e})}function f3(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(zi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function p3(r,e,t){const n=Zs(r);et(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=ax(e),{host:l,port:u}=m3(e),h=u===null?"":`:${u}`,d={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){et(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),et(Oo(d,n.config.emulator)&&Oo(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,g3(),tl(l)&&Iy(`${o}//${l}${h}`)}function ax(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function m3(r){const e=ax(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:K1(n.substr(o.length+1))}}else{const[o,l]=n.split(":");return{host:o,port:K1(l)}}}function K1(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function g3(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,t){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}async function y3(r,e){return bi(r,"POST","/v1/accounts:update",e)}async function v3(r,e){return bi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(r,e){return Ju(r,"POST","/v1/accounts:signInWithPassword",es(r,e))}async function w3(r,e){return bi(r,"POST","/v1/accounts:sendOobCode",es(r,e))}async function E3(r,e){return w3(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(r,e){return Ju(r,"POST","/v1/accounts:signInWithEmailLink",es(r,e))}async function A3(r,e){return Ju(r,"POST","/v1/accounts:signInWithEmailLink",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Iv{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Pu(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Pu(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hd(e,t,"signInWithPassword",_3);case"emailLink":return C3(e,{email:this._email,oobCode:this._password});default:Qr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hd(e,n,"signUpPassword",v3);case"emailLink":return A3(e,{idToken:t,email:this._email,oobCode:this._password});default:Qr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(r,e){return Ju(r,"POST","/v1/accounts:signInWithIdp",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="http://localhost";class Mo extends Iv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,o=Av(t,["providerId","signInMethod"]);if(!n||!i)return null;const l=new Mo(n,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return za(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,za(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,za(e,t)}buildRequest(){const e={requestUri:b3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S3(r){const e=ou(au(r)).link,t=e?ou(au(e)).deep_link_id:null,n=ou(au(r)).deep_link_id;return(n?ou(au(n)).link:null)||n||t||e||r}class Dv{constructor(e){var t,n,i,o,l,u;const h=ou(au(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(n=h.oobCode)!==null&&n!==void 0?n:null,m=x3((i=h.mode)!==null&&i!==void 0?i:null);et(d&&g&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.lang)!==null&&l!==void 0?l:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=S3(e);try{return new Dv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,t){return Pu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Dv.parseLink(t);return et(n,"argument-error"),Pu._fromEmailAndCode(e,n.code,n.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends lx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Qu{constructor(){super("facebook.com")}static credential(e){return Mo._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ps.credential(t,n)}catch{return null}}}Ps.GOOGLE_SIGN_IN_METHOD="google.com";Ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Qu{constructor(){super("github.com")}static credential(e){return Mo._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Qu{constructor(){super("twitter.com")}static credential(e,t){return Mo._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Os.credential(t,n)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(r,e){return Ju(r,"POST","/v1/accounts:signUp",es(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const o=await Gr._fromIdTokenResponse(e,n,i),l=J1(n);return new qo({user:o,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=J1(n);return new qo({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function J1(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends Ai{constructor(e,t,n,i){var o;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,dd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new dd(e,t,n,i)}}function ux(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?dd._fromErrorAndOperation(r,o,e,n):o})}async function I3(r,e,t=!1){const n=await Za(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return qo._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3(r,e,t=!1){const{auth:n}=r;if(dr(n.app))return Promise.reject(Wi(n));const i="reauthenticate";try{const o=await Za(r,ux(n,i,e,r),t);et(o.idToken,n,"internal-error");const l=Sv(o.idToken);et(l,n,"internal-error");const{sub:u}=l;return et(r.uid===u,n,"user-mismatch"),qo._forOperation(r,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Qr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(r,e,t=!1){if(dr(r.app))return Promise.reject(Wi(r));const n="signIn",i=await ux(r,n,e),o=await qo._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(o.user),o}async function k3(r,e){return cx(Zs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(r){const e=Zs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function R3(r,e,t){const n=Zs(r);await hd(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",E3)}async function P3(r,e,t){if(dr(r.app))return Promise.reject(Wi(r));const n=Zs(r),l=await hd(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T3).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&hx(r),h}),u=await qo._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(u.user),u}function Q1(r,e,t){return dr(r.app)?Promise.reject(Wi(r)):k3(Nt(r),al.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&hx(r),n})}function N3(r,e){return O3(Nt(r),null,e)}async function O3(r,e,t){const{auth:n}=r,o={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(o.password=t);const l=await Za(r,y3(n,o));await r._updateTokensIfNecessary(l,!0)}function L3(r,e,t,n){return Nt(r).onIdTokenChanged(e,t,n)}function F3(r,e,t){return Nt(r).beforeAuthStateChanged(e,t)}function sm(r,e,t,n){return Nt(r).onAuthStateChanged(e,t,n)}function Y1(r){return Nt(r).signOut()}async function j3(r){return Nt(r).delete()}const fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=1e3,M3=10;class fx extends dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},o=this.storage.getItem(n);XO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,M3):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},B3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fx.type="LOCAL";const q3=fx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}px.type="SESSION";const mx=px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Gd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const u=Array.from(l).map(async d=>d(t.origin,o)),h=await U3(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const d=kv("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(p.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function z3(r){vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function H3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W3(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function $3(){return gx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="firebaseLocalStorageDb",G3=1,pd="firebaseLocalStorage",vx="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kd(r,e){return r.transaction([pd],e?"readwrite":"readonly").objectStore(pd)}function K3(){const r=indexedDB.deleteDatabase(yx);return new Yu(r).toPromise()}function _y(){const r=indexedDB.open(yx,G3);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(pd,{keyPath:vx})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(pd)?e(n):(n.close(),await K3(),e(await _y()))})})}async function X1(r,e,t){const n=Kd(r,!0).put({[vx]:e,value:t});return new Yu(n).toPromise()}async function J3(r,e){const t=Kd(r,!1).get(e),n=await new Yu(t).toPromise();return n===void 0?null:n.value}function Z1(r,e){const t=Kd(r,!0).delete(e);return new Yu(t).toPromise()}const Q3=800,Y3=3;class _x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Y3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gd._getInstance($3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await H3(),!this.activeServiceWorker)return;this.sender=new V3(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _y();return await X1(e,fd,"1"),await Z1(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>X1(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>J3(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Z1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Kd(i,!1).getAll();return new Yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_x.type="LOCAL";const X3=_x;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(r,e){return e?zi(e):(et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv extends Iv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eL(r){return cx(r.auth,new Rv(r),r.bypassAuthState)}function tL(r){const{auth:e,user:t}=r;return et(t,e,"internal-error"),D3(t,new Rv(r),r.bypassAuthState)}async function nL(r){const{auth:e,user:t}=r;return et(t,e,"internal-error"),I3(t,new Rv(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eL;case"linkViaPopup":case"linkViaRedirect":return nL;case"reauthViaPopup":case"reauthViaRedirect":return tL;default:Qr(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new Ku(2e3,1e4);class Ma extends wx{constructor(e,t,n,i,o){super(e,t,i,o),this.provider=n,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const e=kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rL.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="pendingRedirect",qh=new Map;class sL extends wx{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const n=await oL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oL(r,e){const t=uL(e),n=lL(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function aL(r,e){qh.set(r._key(),e)}function lL(r){return zi(r._redirectPersistence)}function uL(r){return Mh(iL,r.config.apiKey,r.name)}async function cL(r,e,t=!1){if(dr(r.app))return Promise.reject(Wi(r));const n=Zs(r),i=Z3(n,e),l=await new sL(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=10*60*1e3;class dL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ex(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hL&&this.cachedEventUids.clear(),this.cachedEventUids.has(ew(e))}saveEventToCache(e){this.cachedEventUids.add(ew(e)),this.lastProcessedEventTime=Date.now()}}function ew(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ex({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fL(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ex(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(r,e={}){return bi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gL=/^https?/;async function yL(r){if(r.config.emulator)return;const{authorizedDomains:e}=await pL(r);for(const t of e)try{if(vL(t))return}catch{}Qr(r,"unauthorized-domain")}function vL(r){const e=yy(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!gL.test(t))return!1;if(mL.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new Ku(3e4,6e4);function tw(){const r=vi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function wL(r){return new Promise((e,t)=>{var n,i,o;function l(){tw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tw(),t(yi(r,"network-request-failed"))},timeout:_L.get()})}if(!((i=(n=vi().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=vi().gapi)===null||o===void 0)&&o.load)l();else{const u=a3("iframefcb");return vi()[u]=()=>{gapi.load?l():t(yi(r,"network-request-failed"))},sx(`${o3()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function EL(r){return Uh=Uh||wL(r),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new Ku(5e3,15e3),AL="__/auth/iframe",bL="emulator/auth/iframe",xL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TL(r){const e=r.config;et(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?xv(e,bL):`https://${r.config.authDomain}/${AL}`,n={apiKey:e.apiKey,appName:r.name,v:Uo},i=SL.get(r.config.apiHost);i&&(n.eid=i);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Vu(n).slice(1)}`}async function IL(r){const e=await EL(r),t=vi().gapi;return et(t,r,"internal-error"),e.open({where:document.body,url:TL(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xL,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const l=yi(r,"network-request-failed"),u=vi().setTimeout(()=>{o(l)},CL.get());function h(){vi().clearTimeout(u),i(n)}n.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kL=500,RL=600,PL="_blank",NL="http://localhost";class nw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OL(r,e,t,n=kL,i=RL){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const h=Object.assign(Object.assign({},DL),{width:n.toString(),height:i.toString(),top:o,left:l}),d=jn().toLowerCase();t&&(u=Xb(d)?PL:t),Qb(d)&&(e=e||NL,h.scrollbars="yes");const g=Object.entries(h).reduce((p,[y,b])=>`${p}${y}=${b},`,"");if(YO(d)&&u!=="_self")return LL(e||"",u),new nw(null);const m=window.open(e||"",u,g);et(m,r,"popup-blocked");try{m.focus()}catch{}return new nw(m)}function LL(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="__/auth/handler",jL="emulator/auth/handler",BL=encodeURIComponent("fac");async function rw(r,e,t,n,i,o){et(r.config.authDomain,r,"auth-domain-config-required"),et(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Uo,eventId:i};if(e instanceof lx){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",TI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries({}))l[g]=m}if(e instanceof Qu){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(l.scopes=g.join(","))}r.tenantId&&(l.tid=r.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await r._getAppCheckToken(),d=h?`#${BL}=${encodeURIComponent(h)}`:"";return`${ML(r)}?${Vu(u).slice(1)}${d}`}function ML({config:r}){return r.emulator?xv(r,jL):`https://${r.authDomain}/${FL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="webStorageSupport";class qL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mx,this._completeRedirectFn=cL,this._overrideRedirectResult=aL}async _openPopup(e,t,n,i){var o;Yi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await rw(e,t,n,yy(),i);return OL(e,l,kv())}async _openRedirect(e,t,n,i){await this._originValidation(e);const o=await rw(e,t,n,yy(),i);return z3(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Yi(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await IL(e),n=new dL(e);return t.register("authEvent",i=>(et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(om,{type:om},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[om];l!==void 0&&t(!!l),Qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rx()||Yb()||Tv()}}const UL=qL;var iw="@firebase/auth",sw="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HL(r){Lo(new Us("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=n.options;et(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ix(r)},d=new r3(n,i,o,h);return f3(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Lo(new Us("auth-internal",e=>{const t=Zs(e.getProvider("auth").getImmediate());return(n=>new VL(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(iw,sw,zL(r)),pi(iw,sw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=5*60,$L=MC("authIdTokenMaxAge")||WL;let ow=null;const GL=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>$L)return;const i=t==null?void 0:t.token;ow!==i&&(ow=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Vh(r=Ry()){const e=bd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=d3(r,{popupRedirectResolver:UL,persistence:[X3,q3,mx]}),n=MC("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const l=GL(o.toString());F3(t,l,()=>l(t.currentUser)),L3(t,u=>l(u))}}const i=FC("auth");return i&&p3(t,`http://${i}`),t}function KL(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}i3({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const o=yi("internal-error");o.customData=i,t(o)},n.type="text/javascript",n.charset="UTF-8",KL().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HL("Browser");const JL={apiKey:"AIzaSyC1ejMnWWe98bFa29RwIiBBB7UndNdJ1cA",authDomain:"salescaptureai.firebaseapp.com",projectId:"salescaptureai",storageBucket:"salescaptureai.firebasestorage.app",messagingSenderId:"392166418592",appId:"1:392166418592:web:7807d9aafec37b8c0581c5",measurementId:"G-BTPP6403LT"},Cx=zC(JL),QL=TO(),YL=VP(Cx),XL=Vh(Cx);class ZL{constructor(){le(this,"doNotInclude",["render","forceUpdate","setState"])}bind(e){var n;let t=Object.getPrototypeOf(e);for(;t&&t!==Object.prototype;){const i=Object.getOwnPropertyNames(t).filter(o=>typeof t[o]=="function"&&o!=="constructor");for(let o of i)this.doNotInclude.includes(o)||(e[o]=(n=e[o])==null?void 0:n.bind(e));t=Object.getPrototypeOf(t)}}setDoNotIncludeList(e){this.doNotInclude=e}leaveOut(e){this.doNotInclude.push(e)}include(e){this.doNotInclude=this.doNotInclude.filter(t=>t!==e)}}let Hn=new ZL;class $i{constructor(){le(this,"list",[]);Hn.bind(this)}setList(e){e=e.filter(t=>t!==void 0),this.list=e}getList(){return this.list}subscribe(e){e&&this.list.push(e)}unsubscribe(e){this.list=this.list.filter(t=>t!==e)}run(...e){for(let t of this.list)t&&t(...e)}}var iu={},aw;function e5(){if(aw)return iu;aw=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.parse=l,iu.serialize=d;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function l(p,y){const b=new o,x=p.length;if(x<2)return b;const E=(y==null?void 0:y.decode)||g;let w=0;do{const C=p.indexOf("=",w);if(C===-1)break;const P=p.indexOf(";",w),S=P===-1?x:P;if(C>S){w=p.lastIndexOf(";",C-1)+1;continue}const O=u(p,w,C),M=h(p,C,O),R=p.slice(O,M);if(b[R]===void 0){let A=u(p,C+1,S),T=h(p,S,A);const I=E(p.slice(A,T));b[R]=I}w=S+1}while(w<x);return b}function u(p,y,b){do{const x=p.charCodeAt(y);if(x!==32&&x!==9)return y}while(++y<b);return b}function h(p,y,b){for(;y>b;){const x=p.charCodeAt(--y);if(x!==32&&x!==9)return y+1}return b}function d(p,y,b){const x=(b==null?void 0:b.encode)||encodeURIComponent;if(!r.test(p))throw new TypeError(`argument name is invalid: ${p}`);const E=x(y);if(!e.test(E))throw new TypeError(`argument val is invalid: ${y}`);let w=p+"="+E;if(!b)return w;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);w+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);w+="; Domain="+b.domain}if(b.path){if(!n.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);w+="; Path="+b.path}if(b.expires){if(!m(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);w+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(w+="; HttpOnly"),b.secure&&(w+="; Secure"),b.partitioned&&(w+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return w}function g(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return i.call(p)==="[object Date]"}return iu}e5();var lw="popstate";function t5(r={}){function e(n,i){let{pathname:o,search:l,hash:u}=n.location;return wy("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Nu(i)}return r5(e,t,null,r)}function Wt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ei(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function n5(){return Math.random().toString(36).substring(2,10)}function uw(r,e){return{usr:r.state,key:r.key,idx:e}}function wy(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ll(e):e,state:t,key:e&&e.key||n||n5()}}function Nu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ll(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function r5(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,l=i.history,u="POP",h=null,d=g();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function g(){return(l.state||{idx:null}).idx}function m(){u="POP";let E=g(),w=E==null?null:E-d;d=E,h&&h({action:u,location:x.location,delta:w})}function p(E,w){u="PUSH";let C=wy(x.location,E,w);d=g()+1;let P=uw(C,d),S=x.createHref(C);try{l.pushState(P,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(S)}o&&h&&h({action:u,location:x.location,delta:1})}function y(E,w){u="REPLACE";let C=wy(x.location,E,w);d=g();let P=uw(C,d),S=x.createHref(C);l.replaceState(P,"",S),o&&h&&h({action:u,location:x.location,delta:0})}function b(E){let w=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof E=="string"?E:Nu(E);return C=C.replace(/ $/,"%20"),Wt(w,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,w)}let x={get action(){return u},get location(){return r(i,l)},listen(E){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(lw,m),h=E,()=>{i.removeEventListener(lw,m),h=null}},createHref(E){return e(i,E)},createURL:b,encodeLocation(E){let w=b(E);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:y,go(E){return l.go(E)}};return x}function Ax(r,e,t="/"){return i5(r,e,t,!1)}function i5(r,e,t,n){let i=typeof e=="string"?ll(e):e,o=Xi(i.pathname||"/",t);if(o==null)return null;let l=bx(r);s5(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let d=g5(o);u=p5(l[h],d,n)}return u}function bx(r,e=[],t=[],n=""){let i=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Wt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let d=Gi([n,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(Wt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),bx(o.children,e,g,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:d5(d,o.index),routesMeta:g})};return r.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let h of xx(o.path))i(o,l,h)}),e}function xx(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let l=xx(n.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...l),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function s5(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:f5(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var o5=/^:[\w-]+$/,a5=3,l5=2,u5=1,c5=10,h5=-2,cw=r=>r==="*";function d5(r,e){let t=r.split("/"),n=t.length;return t.some(cw)&&(n+=h5),e&&(n+=l5),t.filter(i=>!cw(i)).reduce((i,o)=>i+(o5.test(o)?a5:o===""?u5:c5),n)}function f5(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function p5(r,e,t=!1){let{routesMeta:n}=r,i={},o="/",l=[];for(let u=0;u<n.length;++u){let h=n[u],d=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",m=md({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},g),p=h.route;if(!m&&d&&t&&!n[n.length-1].route.index&&(m=md({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Gi([o,m.pathname]),pathnameBase:w5(Gi([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=Gi([o,m.pathnameBase]))}return l}function md(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=m5(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((d,{paramName:g,isOptional:m},p)=>{if(g==="*"){let b=u[p]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=u[p];return m&&!y?d[g]=void 0:d[g]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:r}}function m5(r,e=!1,t=!0){Ei(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function g5(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Xi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function y5(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?ll(r):r;return{pathname:t?t.startsWith("/")?t:v5(t,e):e,search:E5(n),hash:C5(i)}}function v5(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function am(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _5(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sx(r){let e=_5(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Tx(r,e,t,n=!1){let i;typeof r=="string"?i=ll(r):(i={...r},Wt(!i.pathname||!i.pathname.includes("?"),am("?","pathname","search",i)),Wt(!i.pathname||!i.pathname.includes("#"),am("#","pathname","hash",i)),Wt(!i.search||!i.search.includes("#"),am("#","search","hash",i)));let o=r===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=t;else{let m=e.length-1;if(!n&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}u=m>=0?e[m]:"/"}let h=y5(i,u),d=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||g)&&(h.pathname+="/"),h}var Gi=r=>r.join("/").replace(/\/\/+/g,"/"),w5=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),E5=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,C5=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function A5(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Ix=["POST","PUT","PATCH","DELETE"];new Set(Ix);var b5=["GET",...Ix];new Set(b5);var ul=ve.createContext(null);ul.displayName="DataRouter";var Jd=ve.createContext(null);Jd.displayName="DataRouterState";var Dx=ve.createContext({isTransitioning:!1});Dx.displayName="ViewTransition";var x5=ve.createContext(new Map);x5.displayName="Fetchers";var S5=ve.createContext(null);S5.displayName="Await";var xi=ve.createContext(null);xi.displayName="Navigation";var Xu=ve.createContext(null);Xu.displayName="Location";var ts=ve.createContext({outlet:null,matches:[],isDataRoute:!1});ts.displayName="Route";var Pv=ve.createContext(null);Pv.displayName="RouteError";function T5(r,{relative:e}={}){Wt(Zu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ve.useContext(xi),{hash:i,pathname:o,search:l}=ec(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Gi([t,o])),n.createHref({pathname:u,search:l,hash:i})}function Zu(){return ve.useContext(Xu)!=null}function Ho(){return Wt(Zu(),"useLocation() may be used only in the context of a <Router> component."),ve.useContext(Xu).location}var kx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rx(r){ve.useContext(xi).static||ve.useLayoutEffect(r)}function I5(){let{isDataRoute:r}=ve.useContext(ts);return r?U5():D5()}function D5(){Wt(Zu(),"useNavigate() may be used only in the context of a <Router> component.");let r=ve.useContext(ul),{basename:e,navigator:t}=ve.useContext(xi),{matches:n}=ve.useContext(ts),{pathname:i}=Ho(),o=JSON.stringify(Sx(n)),l=ve.useRef(!1);return Rx(()=>{l.current=!0}),ve.useCallback((h,d={})=>{if(Ei(l.current,kx),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=Tx(h,JSON.parse(o),i,d.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Gi([e,g.pathname])),(d.replace?t.replace:t.push)(g,d.state,d)},[e,t,o,i,r])}ve.createContext(null);function ec(r,{relative:e}={}){let{matches:t}=ve.useContext(ts),{pathname:n}=Ho(),i=JSON.stringify(Sx(t));return ve.useMemo(()=>Tx(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function k5(r,e){return Px(r,e)}function Px(r,e,t,n){var C;Wt(Zu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=ve.useContext(xi),{matches:l}=ve.useContext(ts),u=l[l.length-1],h=u?u.params:{},d=u?u.pathname:"/",g=u?u.pathnameBase:"/",m=u&&u.route;{let P=m&&m.path||"";Nx(d,!m||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let p=Ho(),y;if(e){let P=typeof e=="string"?ll(e):e;Wt(g==="/"||((C=P.pathname)==null?void 0:C.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${P.pathname}" was given in the \`location\` prop.`),y=P}else y=p;let b=y.pathname||"/",x=b;if(g!=="/"){let P=g.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=!o&&t&&t.matches&&t.matches.length>0?t.matches:Ax(r,{pathname:x});Ei(m||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Ei(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=L5(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},h,P.params),pathname:Gi([g,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:Gi([g,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),l,t,n);return e&&w?ve.createElement(Xu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},w):w}function R5(){let r=q5(),e=A5(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=ve.createElement(ve.Fragment,null,ve.createElement("p",null," Hey developer "),ve.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ve.createElement("code",{style:o},"ErrorBoundary")," or"," ",ve.createElement("code",{style:o},"errorElement")," prop on your route.")),ve.createElement(ve.Fragment,null,ve.createElement("h2",null,"Unexpected Application Error!"),ve.createElement("h3",{style:{fontStyle:"italic"}},e),t?ve.createElement("pre",{style:i},t):null,l)}var P5=ve.createElement(R5,null),N5=class extends ve.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?ve.createElement(ts.Provider,{value:this.props.routeContext},ve.createElement(Pv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function O5({routeContext:r,match:e,children:t}){let n=ve.useContext(ul);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ve.createElement(ts.Provider,{value:r},t)}function L5(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,o=t==null?void 0:t.errors;if(o!=null){let h=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Wt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,u=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:g,errors:m}=t,p=d.route.loader&&!g.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,d,g)=>{let m,p=!1,y=null,b=null;t&&(m=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||P5,l&&(u<0&&g===0?(Nx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,b=null):u===g&&(p=!0,b=d.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,g+1)),E=()=>{let w;return m?w=y:p?w=b:d.route.Component?w=ve.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,ve.createElement(O5,{match:d,routeContext:{outlet:h,matches:x,isDataRoute:t!=null},children:w})};return t&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?ve.createElement(N5,{location:t.location,revalidation:t.revalidation,component:y,error:m,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):E()},null)}function Nv(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F5(r){let e=ve.useContext(ul);return Wt(e,Nv(r)),e}function j5(r){let e=ve.useContext(Jd);return Wt(e,Nv(r)),e}function B5(r){let e=ve.useContext(ts);return Wt(e,Nv(r)),e}function Ov(r){let e=B5(r),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function M5(){return Ov("useRouteId")}function q5(){var n;let r=ve.useContext(Pv),e=j5("useRouteError"),t=Ov("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function U5(){let{router:r}=F5("useNavigate"),e=Ov("useNavigate"),t=ve.useRef(!1);return Rx(()=>{t.current=!0}),ve.useCallback(async(i,o={})=>{Ei(t.current,kx),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...o}))},[r,e])}var hw={};function Nx(r,e,t){!e&&!hw[r]&&(hw[r]=!0,Ei(!1,t))}ve.memo(V5);function V5({routes:r,future:e,state:t}){return Px(r,void 0,t,e)}function Is(r){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z5({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:o=!1}){Wt(!Zu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),u=ve.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof t=="string"&&(t=ll(t));let{pathname:h="/",search:d="",hash:g="",state:m=null,key:p="default"}=t,y=ve.useMemo(()=>{let b=Xi(h,l);return b==null?null:{location:{pathname:b,search:d,hash:g,state:m,key:p},navigationType:n}},[l,h,d,g,m,p,n]);return Ei(y!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:ve.createElement(xi.Provider,{value:u},ve.createElement(Xu.Provider,{children:e,value:y}))}function dw({children:r,location:e}){return k5(Ey(r),e)}function Ey(r,e=[]){let t=[];return ve.Children.forEach(r,(n,i)=>{if(!ve.isValidElement(n))return;let o=[...e,i];if(n.type===ve.Fragment){t.push.apply(t,Ey(n.props.children,o));return}Wt(n.type===Is,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ey(n.props.children,o)),t.push(l)}),t}var zh="get",Hh="application/x-www-form-urlencoded";function Qd(r){return r!=null&&typeof r.tagName=="string"}function H5(r){return Qd(r)&&r.tagName.toLowerCase()==="button"}function W5(r){return Qd(r)&&r.tagName.toLowerCase()==="form"}function $5(r){return Qd(r)&&r.tagName.toLowerCase()==="input"}function G5(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function K5(r,e){return r.button===0&&(!e||e==="_self")&&!G5(r)}var Th=null;function J5(){if(Th===null)try{new FormData(document.createElement("form"),0),Th=!1}catch{Th=!0}return Th}var Q5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lm(r){return r!=null&&!Q5.has(r)?(Ei(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hh}"`),null):r}function Y5(r,e){let t,n,i,o,l;if(W5(r)){let u=r.getAttribute("action");n=u?Xi(u,e):null,t=r.getAttribute("method")||zh,i=lm(r.getAttribute("enctype"))||Hh,o=new FormData(r)}else if(H5(r)||$5(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||u.getAttribute("action");if(n=h?Xi(h,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||zh,i=lm(r.getAttribute("formenctype"))||lm(u.getAttribute("enctype"))||Hh,o=new FormData(u,r),!J5()){let{name:d,type:g,value:m}=r;if(g==="image"){let p=d?`${d}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else d&&o.append(d,m)}}else{if(Qd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zh,n=null,i=Hh,l=r}return o&&i==="text/plain"&&(l=o,o=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:o,body:l}}function Lv(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function X5(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z5(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function eF(r,e,t){let n=await Promise.all(r.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await X5(o,t);return l.links?l.links():[]}return[]}));return iF(n.flat(1).filter(Z5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function fw(r,e,t,n,i,o){let l=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,u=(h,d)=>{var g;return t[d].pathname!==h.pathname||((g=t[d].route.path)==null?void 0:g.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,d)=>l(h,d)||u(h,d)):o==="data"?e.filter((h,d)=>{var m;let g=n.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,d)||u(h,d))return!0;if(h.route.shouldRevalidate){let p=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function tF(r,e,{includeHydrateFallback:t}={}){return nF(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function nF(r){return[...new Set(r)]}function rF(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function iF(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let o=JSON.stringify(rF(i));return t.has(o)||(t.add(o),n.push({key:o,link:i})),n},[])}var sF=new Set([100,101,204,205]);function oF(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Xi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Ox(){let r=ve.useContext(ul);return Lv(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function aF(){let r=ve.useContext(Jd);return Lv(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Fv=ve.createContext(void 0);Fv.displayName="FrameworkContext";function Lx(){let r=ve.useContext(Fv);return Lv(r,"You must render this element inside a <HydratedRouter> element"),r}function lF(r,e){let t=ve.useContext(Fv),[n,i]=ve.useState(!1),[o,l]=ve.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:d,onMouseLeave:g,onTouchStart:m}=e,p=ve.useRef(null);ve.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let x=w=>{w.forEach(C=>{l(C.isIntersecting)})},E=new IntersectionObserver(x,{threshold:.5});return p.current&&E.observe(p.current),()=>{E.disconnect()}}},[r]),ve.useEffect(()=>{if(n){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[n]);let y=()=>{i(!0)},b=()=>{i(!1),l(!1)};return t?r!=="intent"?[o,p,{}]:[o,p,{onFocus:su(u,y),onBlur:su(h,b),onMouseEnter:su(d,y),onMouseLeave:su(g,b),onTouchStart:su(m,y)}]:[!1,p,{}]}function su(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function uF({page:r,...e}){let{router:t}=Ox(),n=ve.useMemo(()=>Ax(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?ve.createElement(hF,{page:r,matches:n,...e}):null}function cF(r){let{manifest:e,routeModules:t}=Lx(),[n,i]=ve.useState([]);return ve.useEffect(()=>{let o=!1;return eF(r,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[r,e,t]),n}function hF({page:r,matches:e,...t}){let n=Ho(),{manifest:i,routeModules:o}=Lx(),{basename:l}=Ox(),{loaderData:u,matches:h}=aF(),d=ve.useMemo(()=>fw(r,e,h,i,n,"data"),[r,e,h,i,n]),g=ve.useMemo(()=>fw(r,e,h,i,n,"assets"),[r,e,h,i,n]),m=ve.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let b=new Set,x=!1;if(e.forEach(w=>{var P;let C=i.routes[w.route.id];!C||!C.hasLoader||(!d.some(S=>S.route.id===w.route.id)&&w.route.id in u&&((P=o[w.route.id])!=null&&P.shouldRevalidate)||C.hasClientLoader?x=!0:b.add(w.route.id))}),b.size===0)return[];let E=oF(r,l);return x&&b.size>0&&E.searchParams.set("_routes",e.filter(w=>b.has(w.route.id)).map(w=>w.route.id).join(",")),[E.pathname+E.search]},[l,u,n,i,d,e,r,o]),p=ve.useMemo(()=>tF(g,i),[g,i]),y=cF(g);return ve.createElement(ve.Fragment,null,m.map(b=>ve.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),p.map(b=>ve.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),y.map(({key:b,link:x})=>ve.createElement("link",{key:b,...x})))}function dF(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fx&&(window.__reactRouterVersion="7.5.3")}catch{}function fF({basename:r,children:e,window:t}){let n=ve.useRef();n.current==null&&(n.current=t5({window:t,v5Compat:!0}));let i=n.current,[o,l]=ve.useState({action:i.action,location:i.location}),u=ve.useCallback(h=>{ve.startTransition(()=>l(h))},[l]);return ve.useLayoutEffect(()=>i.listen(u),[i,u]),ve.createElement(z5,{basename:r,children:e,location:o.location,navigationType:o.action,navigator:i})}var jx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bt=ve.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:o,replace:l,state:u,target:h,to:d,preventScrollReset:g,viewTransition:m,...p},y){let{basename:b}=ve.useContext(xi),x=typeof d=="string"&&jx.test(d),E,w=!1;if(typeof d=="string"&&x&&(E=d,Fx))try{let T=new URL(window.location.href),I=d.startsWith("//")?new URL(T.protocol+d):new URL(d),D=Xi(I.pathname,b);I.origin===T.origin&&D!=null?d=D+I.search+I.hash:w=!0}catch{Ei(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=T5(d,{relative:i}),[P,S,O]=lF(n,p),M=yF(d,{replace:l,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:m});function R(T){e&&e(T),T.defaultPrevented||M(T)}let A=ve.createElement("a",{...p,...O,href:E||C,onClick:w||o?e:R,ref:dF(y,S),target:h,"data-discover":!x&&t==="render"?"true":void 0});return P&&!x?ve.createElement(ve.Fragment,null,A,ve.createElement(uF,{page:C})):A});Bt.displayName="Link";var pF=ve.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:o,to:l,viewTransition:u,children:h,...d},g){let m=ec(l,{relative:d.relative}),p=Ho(),y=ve.useContext(Jd),{navigator:b,basename:x}=ve.useContext(xi),E=y!=null&&CF(m)&&u===!0,w=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,C=p.pathname,P=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(C=C.toLowerCase(),P=P?P.toLowerCase():null,w=w.toLowerCase()),P&&x&&(P=Xi(P,x)||P);const S=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let O=C===w||!i&&C.startsWith(w)&&C.charAt(S)==="/",M=P!=null&&(P===w||!i&&P.startsWith(w)&&P.charAt(w.length)==="/"),R={isActive:O,isPending:M,isTransitioning:E},A=O?e:void 0,T;typeof n=="function"?T=n(R):T=[n,O?"active":null,M?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(R):o;return ve.createElement(Bt,{...d,"aria-current":A,className:T,ref:g,style:I,to:l,viewTransition:u},typeof h=="function"?h(R):h)});pF.displayName="NavLink";var mF=ve.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:o,method:l=zh,action:u,onSubmit:h,relative:d,preventScrollReset:g,viewTransition:m,...p},y)=>{let b=wF(),x=EF(u,{relative:d}),E=l.toLowerCase()==="get"?"get":"post",w=typeof u=="string"&&jx.test(u),C=P=>{if(h&&h(P),P.defaultPrevented)return;P.preventDefault();let S=P.nativeEvent.submitter,O=(S==null?void 0:S.getAttribute("formmethod"))||l;b(S||P.currentTarget,{fetcherKey:e,method:O,navigate:t,replace:i,state:o,relative:d,preventScrollReset:g,viewTransition:m})};return ve.createElement("form",{ref:y,method:E,action:x,onSubmit:n?h:C,...p,"data-discover":!w&&r==="render"?"true":void 0})});mF.displayName="Form";function gF(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bx(r){let e=ve.useContext(ul);return Wt(e,gF(r)),e}function yF(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:o,viewTransition:l}={}){let u=I5(),h=Ho(),d=ec(r,{relative:o});return ve.useCallback(g=>{if(K5(g,e)){g.preventDefault();let m=t!==void 0?t:Nu(h)===Nu(d);u(r,{replace:m,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,d,t,n,e,r,i,o,l])}var vF=0,_F=()=>`__${String(++vF)}__`;function wF(){let{router:r}=Bx("useSubmit"),{basename:e}=ve.useContext(xi),t=M5();return ve.useCallback(async(n,i={})=>{let{action:o,method:l,encType:u,formData:h,body:d}=Y5(n,e);if(i.navigate===!1){let g=i.fetcherKey||_F();await r.fetch(g,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||u,flushSync:i.flushSync})}else await r.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function EF(r,{relative:e}={}){let{basename:t}=ve.useContext(xi),n=ve.useContext(ts);Wt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...ec(r||".",{relative:e})},l=Ho();if(r==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Gi([t,o.pathname])),Nu(o)}function CF(r,e={}){let t=ve.useContext(Dx);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Bx("useViewTransitionState"),i=ec(r,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Xi(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=Xi(t.nextLocation.pathname,n)||t.nextLocation.pathname;return md(i.pathname,l)!=null||md(i.pathname,o)!=null}new TextEncoder;[...sF];var AF=Ty();const bF=qu(AF);class xF{constructor(e){Hn.bind(this),this.props={...e},this.content=e.content||"",this.type="div"}setHtmlType(e){this.type=e}getHtmlType(){return this.type}setProp(e,t){this.props[e]=t}setProps(e){this.props={...e},e.content&&(this.content=e.content)}updateProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}addProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}getProps(){return this.props}getProp(e){return this.props[e]}setStyle(e){this.props.style=e}updateStyle(e){this.props.style={...this.props.style,...e}}getStyle(){return this.props.style}setClass(e){this.props.className=e}getClass(){return this.props.className}setOnChange(e){this.props.onChange=e}setOnClick(e){this.props.onClick=e}getOnClick(){return this.props.onClick}setContent(e){this.content=e}getContent(){return this.content}getHtml(e){let{content:t,props:n}=e,i=e==null?void 0:e.type;t&&(this.content=t),n={...this.props,...n};const o={a:_.jsx("a",{...n,children:this.content}),button:_.jsx("button",{...n,children:this.content}),div:_.jsx("div",{...n,children:this.content}),h1:_.jsx("h1",{...n,children:this.content}),h2:_.jsx("h2",{...n,children:this.content}),h3:_.jsx("h3",{...n,children:this.content}),h4:_.jsx("h4",{...n,children:this.content}),h5:_.jsx("h5",{...n,children:this.content}),h6:_.jsx("h6",{...n,children:this.content}),img:_.jsx("img",{...n}),input:_.jsx("input",{...n}),p:_.jsx("p",{...n,children:this.content}),span:_.jsx("span",{...n,children:this.content}),table:_.jsx("table",{...n,children:this.content}),tr:_.jsx("tr",{...n,children:this.content}),td:_.jsx("td",{...n,children:this.content}),th:_.jsx("th",{...n,children:this.content}),ul:_.jsx("ul",{...n,children:this.content}),li:_.jsx("li",{...n,children:this.content}),ol:_.jsx("ol",{...n,children:this.content}),form:_.jsx("form",{...n,children:this.content}),textarea:_.jsx("textarea",{...n,children:this.content}),select:_.jsx("select",{...n,children:this.content}),option:_.jsx("option",{...n,children:this.content}),label:_.jsx("label",{...n,children:this.content}),nav:_.jsx("nav",{...n,children:this.content}),footer:_.jsx("footer",{...n,children:this.content}),header:_.jsx("header",{...n,children:this.content}),article:_.jsx("article",{...n,children:this.content}),section:_.jsx("section",{...n,children:this.content}),aside:_.jsx("aside",{...n,children:this.content}),main:_.jsx("main",{...n,children:this.content}),video:_.jsx("video",{...n,children:this.content}),audio:_.jsx("audio",{...n,children:this.content}),iframe:_.jsx("iframe",{...n,children:this.content}),canvas:_.jsx("canvas",{...n,children:this.content}),content:_.jsx(_.Fragment,{}),fragment:_.jsx(_.Fragment,{children:this.content}),link:_.jsx(Bt,{...n,children:this.content})};if(i==="content"||this.type==="conent"){let u=this.content;o.content=_.jsx(u,{...n})}return i?o[i]:o[this.type]}}class SF extends $i{constructor(){super(...arguments);le(this,"component");le(this,"setAttribute")}setObserverFunction(t){this.setAttribute=t}setComponent(t){this.component=t}getComponent(){return this.component}run(){for(let t of this.list)this.setAttribute(t.name,new xF(t))}}class cl{constructor(){le(this,"factory");le(this,"componentList");le(this,"themeFactory");le(this,"appComponent");le(this,"mainFunc");le(this,"appObserver",new $i);Hn.bind(this),this.getFactory(),this.getThemeFactory()}subscribeToAppObserver(e){this.appObserver.subscribe(e)}getMainFunc(){return this.mainFunc}getFactory(){}getThemeFactory(){}getAppComponent(){return this.appComponent}setAppComponent(e){this.appComponent=e,this.appObserver.run(e)}getComponentList(){var e,t;return this.componentList||(this.componentList=(t=(e=this.appComponent)==null?void 0:e.state)==null?void 0:t.componentList),this.componentList}}class TF extends cl{constructor(){super(...arguments);le(this,"type","appInterface")}}const Mx=new TF;class at extends ve.Component{constructor(t){super(t);le(this,"resize");Hn.bind(this),this.initialBuilderSetupFunctions=[],this.setInterface(),this.setInitialApp(),this.initialPropsSetupFunctions=[this.setInterface,this.setAppOnInterace,this.setInitialApp,this.setObj,this.setThemeFactory,this.setTheme,this.createReactRefsForComponents],this.setupObserver=new $i,this.builderObserver=new SF,this.ObserverForSetupFunction=new $i,this.builderObserver.setComponent(this),this.builderObserver.setObserverFunction(this.setHtmlBuilderSingleton),this.initialSetupFunctions=[this.builderObserver.run,this.additionalSetup],this.components=[]}setInitialApp(){var n,i,o,l,u,h;this.interface||(this.app=(n=this.props)==null?void 0:n.app);let t=this.interface.getAppComponent();t&&(this.app=t),this.app&&(this.propsState=(i=this.app)==null?void 0:i.state,this.dispatch=(o=this.app)==null?void 0:o.dispatch,this.componentList=(l=this.propsState)==null?void 0:l.componentList,this.APIService=(u=this.componentList)==null?void 0:u.getAPIService(),this.operationsFactory=(h=this.componentList)==null?void 0:h.getOperationsFactory())}setInterface(t){var n;this.interface=t||((n=this.props)==null?void 0:n.interface)||this.interface||Mx,this.interface.type==="appInterface"&&this.subscribeToAppObserverBool===void 0&&(this.subscribeToAppObserverBool=!0,this.interface.subscribeToAppObserver(this.setInitialApp))}setAppOnInterace(){this.interface&&(this.props.app&&this.interface.setAppComponent(this.props.app),this.app=this.interface.getAppComponent())}setComponents(t){this.components=t}getComponents(){return this.components}createReactRefsForComponents(){for(let t of this.components)this[t+"Ref"]||(this[t+"Ref"]=qe.createRef())}createPropObj(t,n){n=n||this.state.propType;let i,o=this[n||"props"][t+"Class"];return o||(o=this.theme&&typeof this.theme!="string"?this.theme[this.state[t+"Class"]]:this["default"+t+"Class"]||""),i={name:t,ref:this[t+"Ref"],style:this[t+"Click"]?{...this[n||"props"][t+"Style"],cursor:"pointer"}:this[n||"props"][t+"Style"],className:o,content:this[n||"props"][t],onClick:this[n||"props"][t+"Click"]||this[t+"Click"],obj:this.obj},i.onClick&&(i.onClick=i.onClick.bind(this,this.obj)),i}builderPropsSubscribe(t){this[t+"Props"]=this.createPropObj(t),this.builderObserver.subscribe(this[t+"Props"])}setInitialBuilderPropFunctions(){for(let t of this.components)this["set"+t+"props"]||(this["set"+t+"props"]=this.builderPropsSubscribe(t)),this.initialBuilderSetupFunctions.push(this["set"+t+"props"]);return this.initialBuilderSetupFunctions}loadObserver(){this.setupObserver.setList(this.initialSetupFunctions)}setInitialSetupFunctions(){const t=[...this.initialPropsSetupFunctions,...this.initialBuilderSetupFunctions,...this.initialSetupFunctions,this.additionalPostSetup],n=[...new Set(t)];return this.initialSetupFunctions=n,this.initialSetupFunctions}runInitialPropsSetup(){for(let t of this.initialPropsSetupFunctions)t&&t()}isArray(t){return Array.isArray(t)?t:[t]}setObj(){this.obj=this.props.obj}setThemeFactory(){this.interface!==void 0&&(this.themeFactory=this.interface.getThemeFactory())}setTheme(){var t,n;this.themeFactory&&(this.theme=this.themeFactory.getComponent(((t=this.props)==null?void 0:t.theme)||((n=this.state)==null?void 0:n.defaultTheme)||"default"))}clearLists(){this.setupObserver.setList([]),this.builderObserver.setList([])}setupItem(...t){this.clearLists(),this.preSetup(),this.runInitialPropsSetup(),this.setInitialBuilderPropFunctions(),this.setInitialSetupFunctions(),this.loadObserver(),this.setupObserver.run(...t)}preSetup(){}setAttribute(t,n){this[t]=n}setHtmlBuilderSingleton(t,n){this[t]||(this[t]=n)}getInnerContent(){return this.innerContent}getAdditionalInnerContent(){return this.innerContent}mapList(t){return _.jsx(_.Fragment,{children:t.filter(n=>n!==void 0&&n!==!1).map(n=>n)})}additionalSetup(){}additionalPostSetup(){}mapInnerContent(){return this.getInnerContent(),this.getAdditionalInnerContent(),this.innerContent=this.mapList(this.innerContent),this.innerContent}getHtml(){return this.html}getFactoryTypeString(t){let n=this.propsState.componentListInterface.getFactory().getRegistry(),i=n.find(o=>t.toLowerCase()===o);return i=i||n.find(o=>t.toLowerCase().includes(o)),i}getCapitalFirstLetter(t){var n;return((n=t==null?void 0:t.charAt(0))==null?void 0:n.toUpperCase())+(t==null?void 0:t.slice(1))}classNameToString(t){let n=t.name;return n.charAt(0).toLowerCase()+n.slice(1)}render(){return this.setupItem(),this.html=this.getHtml(),this.html}}class IF extends cl{}const qx=new IF;class dn extends at{constructor(t){super(t);le(this,"type");le(this,"theme");le(this,"interface");this.wrapperRef=qe.createRef(),this.setWrapperRef=this.setWrapperRef,this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setApp,this.setType,this.setClassStr],this.state={defaultType:this.props.type?this.props.type:"fit",defaultTheme:this.props.theme?this.props.theme:"Default",typeKey:"type",themeKey:"theme"},this.interface=qx}componentDidMount(){this.props.popup&&document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){this.props.popup&&document.removeEventListener("mousedown",this.handleClickOutside)}handleClickOutside(t){this.wrapperRef&&!this.wrapperRef.current.contains(t.target)&&this.props.handleClose&&this.props.handleClose()}isPopup(t){if(this.props.popup){let n=this.closePopup.getHtml({content:this.props.closeUI||_.jsx(_.Fragment,{children:"X"}),props:{onClick:()=>{this.props.handleClose&&this.props.handleClose()}}}),i=this.popupContent.getHtml({content:_.jsxs(_.Fragment,{children:[n,t]}),props:{ref:this.wrapperRef}});t=this.backDrop.getHtml({content:i})}return t}setTheme(){this.theme=this.props[this.state.themeKey]?this.props[this.state.themeKey]:this.state.defaultTheme}setType(){this.type=this.props[this.state.typeKey]?this.props[this.state.typeKey]:this.state.defaultType}setClassStr(){this.defaultcardClass=this.type+this.theme+" scroller",this.defaultcardClass=this.props.popup?this.defaultcardClass+" cardPopup":this.defaultcardClass,this.props.popup&&(this.defaultbackDropClass="backDropPopup",this.defaultpopupContentClass="popupContent",this.defaultclosePopupClass="closePopup")}getHtml(){let t=this.getContent();return this.html=this.card.getHtml({content:t}),this.html=this.isPopup(this.html),this.html}getContent(){return this.content=this.props.content,this.content}preSetup(){let t=["card"];this.props.popup&&(t=[...t,"backDrop","popupContent","closePopup"]),this.setComponents(t)}}let DF=class{constructor(e){le(this,"operationsFactory");le(this,"dispatch");le(this,"json",{_id:"",backendKeys:[],backendAttributes:[],backendFilterKeys:[],orderMatters:!1,orderFilterKey:"",filterKey:"",removeOwnerQuery:[]});le(this,"componentList");le(this,"APIService");Hn.bind(this),this.operationsFactory=e,this.json._id=this.createId()}getAssociatedItemsHelper(e){let t=this.json._id,n=this.json.type+"Id";return this.json.backendAttributes.length>0&&(t=this.json[this.json.backendAttributes[e]]),this.json.backendFilterKeys.length>0&&(n=this.json.backendFilterKeys[e]),{attribute:t,filterKey:n}}async getAssociatedItems(e){e=e||this.json.backendKeys;const t=e==null?void 0:e.map((n,i)=>{let{attribute:o,filterKey:l}=this.getAssociatedItemsHelper(i);return this.componentList.getList(n,o,l)});return await Promise.all(t)}async getAssociatedItemsFromBackend(e,t){e=e||this.json.backendKeys;let n=!0;const i=e==null?void 0:e.map((o,l)=>{this.json.removeOwnerQuery.includes(o)&&(n=!1);let{attribute:u,filterKey:h}=this.getAssociatedItemsHelper(l);return this.componentList.getComponentsFromBackend({type:o,ids:u,filterKeys:h,owner:n,...t})});return await Promise.all(i)}setComponentList(e){this.componentList=e,this.componentList.getAPIService&&this.setAPIService(this.componentList.getAPIService()),this.componentList.getDispatch&&this.setDispatch(this.componentList.getDispatch())}setDispatch(e){this.dispatch=e}getDispatch(){return this.dispatch}getComponentList(){return this.componentList}setAPIService(e){this.APIService=e}getAPIService(){return this.APIService}update(...e){this.APIService&&this.APIService.update([this],...e)}del(...e){this.componentList.del(this,{...e})}updateOrder(e,t){e=e||-1,e===!0&&(e=1);let n=this.componentList.getList(this.json.type,this.json[this.json.orderFilterKey],this.json.orderFilterKey);t=t||(this.json.orderKey?this.json[this.json.orderKey]:"order");let i=n.indexOf(this),o;e<0&&i===0?this.json[t]=n.length:e>0&&i===n.length-1?(this.json[t]=0,this.componentList.shiftOrderedList(this,t)):(o=n[i+e],o.setCompState({[t]:i},{run:!0,clean:!0}),this.json[t]=i+e),this.componentList.sortSelectedList(this.json.type,this.json.orderKey||"order"),this.componentList.resetOrder(this,t),this.update()}prepare(){this.operationsFactory.prepare({prepare:this})}setAttribute(e,t){this[e]=t}setAttributes(e){for(let t in e)this[t]=e[t]}getAttribute(e){return this[e]}getJsonAttribute(e){return this.json[e]}setCompState(e,t,n,i){this.subscribeToOperations(t),this.json={...this.json,...e},n&&this.dispatch({updated:this}),i&&i(e),t!=null&&t.run&&this.operationsFactory.runOperations()}getOperationsFactory(){return this.operationsFactory}setJson(e,t,n,i){this.subscribeToOperations(t),this.json=e,n&&this.dispatch({updated:this}),i&&i(this),t!=null&&t.run&&this.operationsFactory.runOperations()}getJson(){return this.json}subscribeToOperations(e){e&&this.operationsFactory.subscribeToOperations(e.operation||this.update,e.clean)}copyJson(e){return{...this.json,_id:"",...e}}copy(e){let t=this.copyJson(e);this.componentList.addComponents(t)}updateObjInsideJson(e,t){this.json[e]={...this.json[e],...t}}removeObjInsideJson(e,t){let n={};for(const i in this.json[e])t.includes(i)||(n[i]=this.json[e][i]);this.json[e]=n}randomFiveDigitNumber(){let e=Math.floor(Math.random()*9e4)+1e4;e=e.toString();let t=String.fromCharCode(97+Math.floor(Math.random()*26)),n=Math.floor(Math.random()*5);if(e=e.substring(0,n)+t+e.substring(n+1),Math.floor(Math.random()*2)===1){let o=String.fromCharCode(97+Math.floor(Math.random()*26)),l;do l=Math.floor(Math.random()*5);while(l===n);e=e.substring(0,l)+o+e.substring(l+1)}return e}createId(){const e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=e.getFullYear().toString().slice(-2);return this.randomFiveDigitNumber().toString()+t+n+i}createUUID(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789",i=n.length;for(let o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*i));return t}};class kF{constructor(){le(this,"operationsFactory");le(this,"factory",{})}registerComponents(e){this.factory[e.name]=e.component}setOperationsFactory(e){this.operationsFactory=e}getRegistry(){return Object.keys(this.factory)}async getComponent(e){if(Object.keys(this.factory).includes(e.type)){let t=e.type,n=new this.factory[t](this.operationsFactory);return[void 0,"",!1].includes(e._id)&&(e._id=n.getJson()._id),n.setCompState({...e}),n}}}class RF extends $i{clear(){this.list=[]}cleanSubscibe(e){this.clear(),this.subscribe(e)}run(...e){for(let t of this.list)t&&t(...e);this.clear()}}class pw{constructor(e){le(this,"register");le(this,"factory");le(this,"operationsObserver");Hn.bind(this),this.add=[],this.lastChange=[],this.factory=e.getFactory(),this.operationsObserver=new RF}removeFromList(e){this.add=this.add.filter(t=>t!==e)}getOperationsObserver(){return this.operationsObserver}setOperationsObserver(e){this.operationsObserver=e}subscribeToOperations(e,t){t&&this.operationsObserver.clear(),this.operationsObserver.subscribe(e)}runOperations(...e){this.operationsObserver.run(...e)}setAddList(e){this.add=[...e],this.lastChange=[...this.add]}getAddList(){return this.add}getLastPrepare(){return this.lastChange}async prepare(e,t){let{prepare:n,amount:i,clean:o}=e;i=i||1;let l=Array.isArray(n)?n:[n];l=l.flatMap(h=>Array(i).fill(h));let u=[];for(let h of l){let d=await this.factory.getComponent({...h});u.push(d)}return l=[...u],this.setAddList(o?[...l]:[...this.add,...l]),t&&t(this.add),e.run&&await this.addToComponentList(),this.add}clear(){this.setAddList([])}removeFromRegister(e){this.setAddList(this.add.filter(t=>t!==e))}run(e){this.addToComponentList(e)}addToComponentList(e){let t=[...this.add];return this.clear(),this.register(t,{skipBackendUpdate:e}),t}setRegister(e){this.register=e}}class PF{constructor(e){le(this,"components",[]);le(this,"dispatch");le(this,"backArray",{});le(this,"operationsFactory");le(this,"componentListInterface");le(this,"componentsList",{});le(this,"completionObserver",new $i);le(this,"factory");le(this,"APIService");Hn.bind(this),this.operationsFactory=e.getOperationsFactory(),this.operationsFactory.setRegister(this.add),this.componentListInterface=e,this.factory=e.getFactory(),this.dispatch=e.dispatch,this.APIService=e.getAPIService(),this.APIService.setComponentList(this),this.completionObserver.subscribe(this.setComponentsList),this.completionObserver.subscribe(this.setOrderAfterAddorDel)}getFactory(){return this.factory}getDispatch(){return this.dispatch}setDispatch(e){this.dispatch=e}getCompletionObserver(){return this.completionObserver}setCompoletionObserver(e){this.completionObserver=e}subscribeToOperationCompletion(e){this.completionObserver.subscribe(e)}getAPIService(){return this.APIService}setAPIService(e){this.APIService=e}getComponents(){return this.components}filterOutErrors(e){let t=this.components.map(i=>i.getJson()._id);e=e.filter(i=>i!==void 0),e=e.map(i=>{if(i!==void 0&&t.includes(i.getJson()._id)){let o=this.components.find(l=>l.getJson()._id===i.getJson()._id);i.setJson({...o.getJson(),...i.getJson()})}return i}),e=e.filter(i=>!t.includes(i.getJson()._id));let n=this.factory.getRegistry();return e=e.filter(i=>n.includes(i.getJson().type)),e}add(e,t){return e=Array.isArray(e)?e:[e],e=this.filterOutErrors(e),e.forEach(n=>{n.setComponentList(this)}),this.components=[...this.components,...e],this.operationComplete(e,"add",t)}setComponentsList(){let e={};this.componentListInterface.getFactory().getRegistry().forEach(n=>{e[n]=[]});for(let n of this.components){let i=n.getJson().type;e[i].push(n)}this.componentsList=e}async addComponents(e,t){e.prepare||(e={prepare:Array.isArray(e)?e:[e]}),await this.operationsFactory.prepare({...e}),this.operationsFactory.addToComponentList(t);let n=e==null?void 0:e.prepare.map(o=>o._id);return await this.components.filter(o=>n.includes(o.getJson()._id))}del(e,t){return e=Array.isArray(e)?e:[e],this.components=this.components.filter(n=>!e.includes(n)),this.operationComplete(e,"del",t)}setOrderAfterAddorDel(e){for(let t of e){let n=t.getJson();if(n.orderMatters){let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey),o=n.orderKey?n[n.orderKey]:"order",l=t.getJson()[o],h=i.filter(g=>{let m=parseInt(g.getJson()[o]);return l=parseInt(l),m===l}).find(g=>!e.includes(g)),d=i.indexOf(t);h&&h!==t&&t.setCompState({[o]:d}),this.sortSelectedList(n.type,n.orderKey||"order"),this.resetOrder(t,o)}}}shiftOrderedList(e,t){let n=e.getJson();this.sortSelectedList(n.type,n.orderKey||"order");let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);t=t||(n.orderKey?n[n.orderKey]:"order"),i=i.filter(o=>o!==e);for(let o=1;o<i.length;o++)i[o-1].setCompState({[t]:o},{run:!0,clean:!0})}resetOrder(e,t){let n=e.getJson();t=t||(n.orderKey?n[n.orderKey]:n.order);let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);for(let o=0;o<i.length;o++)i[o][t]!==o&&(i[o].setCompState({[t]:o}),i[o]!==e&&i[o].update())}operationComplete(e,t,n){return this.completionObserver.run(e,t,n),this.backArray={[t]:e},n.skipBackendUpdate||this.updateBackend(e,t,n),e}updateBackend(e,t,n){this.dispatch({backend:!0,backendUpdate:{...this.backArray}});let i=[n.path,n.dispatchKey];t==="add"&&i.push(n.timeKey),this.APIService[t](e,...i),this.backArray={}}getOperationsFactory(){return this.operationsFactory}createQueryJson(e,t,n,i,o="type"){i=i||{},n===void 0&&t&&(n="_id"),t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];let l={where:[{attribute:o,val:e}],...i};return t.length>0&&t[0]!==void 0&&(l.where=[...l.where,...t.map((u,h)=>({attribute:n[h]||n[0],val:u}))]),l}async getComponentsFromBackend(e,t){typeof e=="string"&&(e={type:e,owner:t===!1?t:!0});let n=await this.createQueryJson(e.type,e.ids,e.filterKeys,e.obj,e.typeAttribute);return await this.APIService[e.snapshot?"firebaseGetterSnapshot":"firebaseGetter"](n,e.path,e.owner)}async getComponentFromBackend(e){return(await this.getComponentsFromBackend(e))[0]}getList(e,t,n){n=n||"owner",e=Array.isArray(e)?e:[e];let i=[];for(let o of e){let l=this.componentsList[o]||[];i=[...i,...l]}return Array.isArray(t)||(t=t?[t]:[]),Array.isArray(n)||(n=[n]),t.length>0&&(i=i.filter(o=>n.some((l,u)=>{var g;const h=(g=o.getJson())==null?void 0:g[l],d=t[u]||t[0];return typeof h=="object"?Object.keys(h).includes(d):h===d}))),i}getComponent(e,t,n){return this.getList(e,t,n||"_id")[0]}clearList(){this.components=[],this.componentsList={}}clearSelectedList(e,t){let n=[...this.components],i=[];for(const o in n)n[o].getJson()[t]!==e&&i.push(n[o]);this.components=[...i],this.setComponentsList()}setComponentList(e){this.componentsList=e}setSelectedList(e,t){this.componentsList[e]=t}sortSelectedList(e,t,n){if(t&&this.componentsList[e]){let i=[...this.componentsList[e]];i=i.sort(function(o,l){const u=o.getJson()[t],h=l.getJson()[t],d=isNaN(Number(u))?u:Number(u),g=isNaN(Number(h))?h:Number(h);return typeof d=="number"&&typeof g=="number"?n?g-d:d-g:n?(""+g).localeCompare(""+d):(""+d).localeCompare(""+g)}),this.setSelectedList(e,i)}}sortSelectedListbyFirebaseDate(e,t){if(this.componentsList[e]){let n=[...this.componentsList[e]];n=n.sort(function(i,o){var h,d;let l=i.getJson().date||i.getJson().date!==""?(h=i.getJson().date)==null?void 0:h.seconds:new Date(0),u=o.getJson().date||o.getJson().date!==""?(d=o.getJson().date)==null?void 0:d.seconds:new Date(0);return t?u-l:l-u}),this.setSelectedList(e,n)}}}class NF{constructor(e,t){le(this,"DB");le(this,"url");le(this,"path",[]);le(this,"orderStr","date");Hn.bind(this),this.setDB(e),this.setUrl(t),this.path=[this.DB,this.url+"users",this.url+"APP","components"]}setDB(e){this.DB=e}setUrl(e){this.url=e}setPath(e){this.path=e}setOrderStr(e){this.orderStr=e}async generateQueary(e,t,n){let i=e.where.map(h=>{if(h.attribute!==void 0)return R1(h.attribute,h.type||"==",h.val)}).filter(h=>h!==void 0);n&&i.push(R1("owner","==",n)),t=t||this.path;let o=[...i],l=e.order||this.orderStr;return l!=="noOrder"&&l!==void 0&&o.push(nN(l)),e.limit&&o.push(rN(e.limit)),tN(qP(...t),...o)}}class OF{constructor(e,t,n,i,o){le(this,"urlEndpoint","");le(this,"dispatch");le(this,"componentList");le(this,"userStr","flinnappsUser");le(this,"QuearyGenerator");le(this,"DB");le(this,"storage");le(this,"auth");le(this,"userEmail");le(this,"path",[]);le(this,"postObserver",new $i);le(this,"dispatchObserver",new $i);le(this,"readObserver",new $i);Hn.bind(this),this.urlEndpoint=e,this.DB=t,this.storage=n,this.auth=i,this.dispatch=o,this.path=[this.DB,`${this.urlEndpoint}users`,`${this.urlEndpoint}APP`,"components"],this.QuearyGenerator=new NF(this.DB,this.urlEndpoint)}setAuth(e){this.auth=e}setStorage(e){this.storage=e}setPath(e){this.path=e}setDB(e){this.DB=e,this.QuearyGenerator.setDB(e)}setDispatch(e){this.dispatch=e}setComponentList(e){this.componentList=e}setUserStr(e){this.userStr=e,this.QuearyGenerator.setUrl(e)}getPostObserver(){return this.postObserver}setPostObserver(e){this.postObserver=e}subscribeToPostObserver(e){this.postObserver.subscribe(e)}getReadObserver(){return this.readObserver}setReadObserver(e){this.readObserver=e}subscribeToReadObserver(e){this.readObserver.subscribe(e)}getPath(){return this.path}getDispatchObserver(){return this.dispatchObserver}setDispatchObserver(e){this.dispatchObserver=e}subscribeToDispatchObserver(e){this.dispatchObserver.subscribe(e)}getQueryGenerator(){return this.QuearyGenerator}setQueryGenerator(e){this.QuearyGenerator=e}async login(e,t){let n,i;if(await Q1(this.auth,e,t).then(o=>{n=o.user}).catch(o=>{const l=o.message;i={error:l.slice(9,l.length-1)},console.log(i)}),n){let o=n;this.dispatch({login:!0}),await localStorage.setItem(this.userStr,JSON.stringify(o)),this.componentList!==void 0&&this.dispatch!==void 0&&(n=await this.getuser(e))}else n=i;return n}async register(e,t,n){let i;return await P3(this.auth,e,t).then(o=>{i=o.user}).catch(o=>{o.code;let l=o.message,u=l.length-1;i={error:l.slice(9,u)}}),i.error||(this.userEmail=i.email,localStorage.setItem(this.userStr,JSON.stringify(i))),i}async logout(){await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let e;await sm(this.auth,t=>{t&&(e=t.uid)}),e&&await Y1(this.auth),await localStorage.setItem(this.userStr,null),window.location.href="/"}sendForgotPasswordChange(e){const t=Vh();R3(t,e).then(()=>{}).catch(n=>{n.code,n.message})}async checkIfLoggedIn(){return new Promise((e,t)=>{sm(this.auth,async n=>{if(n)e(n);else{await localStorage.setItem(this.userStr,null),await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let i;await sm(this.auth,o=>{o&&(i=o.uid)}),i&&await Y1(this.auth),await window.location.reload()}})})}async getCurrentUser(){let e=await localStorage.getItem(this.userStr);return e=await JSON.parse(e),e}async setCurrentUser(e){await localStorage.setItem(this.userStr,JSON.stringify(e))}async loginToDel(e,t){await Q1(this.auth,e,t).then(n=>{}).catch(n=>{n.code,n.message})}async delAccount(){const t=Vh().currentUser;await j3(t).then(()=>{}).catch(n=>{})}async notify(e,t){fetch(t,{method:"POST",mode:"no-cors",body:JSON.stringify(e),headers:{"Conent-Type":"application/json"}})}async changePassword(e){const n=Vh().currentUser;return await N3(n,e).then(()=>{}).catch(o=>{}),!0}async firebaseGetterSnapshot(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),o=[];return await hN(i,async l=>{o=await this.getRawData(l)}),o}async firebaseGetter(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),o=await lN(i);return await this.getRawData(o)}async getRawData(e){let t=[];for(const i in e.docs){let o=e.docs[i].data();t.push(o)}let n=await this.componentList.addComponents(t,!0);return this.dispatch&&await this.dispatch({snapShot:{dataRetrieved:n}}),this.readObserver.run(n,t),n}async getCount(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n);return(await fN(i)).data().count}async getuser(e){this.userEmail=e;let t=await this.componentList.getComponentFromBackend({type:"user",ids:e});return t&&this.dispatch({currentUser:t,email:e,gotUser:!0}),t}async GetAllData(e,t){t=t||[this.db,this.urlEndpoint+"users"],this.firebaseGetter(e,t)}async uploadPics(e,t){const n=rm(this.storage,t);await bO(n,e).then(i=>{console.log("Uploaded a file!")})}async downloadPics(e){let t;return await xO(rm(this.storage,e)).then(n=>{t=n}),t}deletePics(e){const t=rm(this.storage,e);SO(t).then(()=>{}).catch(n=>{})}prep(e){return e=Array.isArray(e)?e:[e],e=e.map(t=>{let n=t;return t.getJson&&(n=t.getJson()),n}),e=e.filter(t=>t!==void 0),e}async add(e,t,n,i){return e=await e.map(o=>((o.getJson().owner===""||o.getJson().owner===void 0)&&o.setCompState({owner:this.userEmail}),o)),await this.operate(e,uN,t,n||"added",i||"date")}async update(e,t,n,i){return await this.operate(e,cN,t,i||"updated",n||"lastUpdated")}async del(e,t,n){return await this.operate(e,O1,t,n||"deleted")}async operate(e,t,n,i,o){try{e=await this.prep(e),n=n||this.path;for(let l of e){o&&(l[o]=await mN()),await this.postObserver.run([l]);let u=[UP(...n,l._id)];t!==O1&&u.push(l),await t(...u)}return this.dispatch&&this.dispatch({[i]:e,dispatchComplete:!0}),this.dispatchObserver.run([{[i]:e}]),e}catch(l){console.log(l),console.error(e,"something went wrong with this operation")}}}class LF{constructor(e,t,n,i,o){le(this,"factory");le(this,"updater");le(this,"operationsFactory");le(this,"dispatch");le(this,"APIService");Hn.bind(this),this.dispatch=e,this.getFactory(),this.getAPIService(t,n,i,o,e)}getFactory(){return this.factory===void 0&&(this.factory=new kF(this)),this.factory}getAPIService(e,t,n,i,o){return this.APIService===void 0&&(this.APIService=new OF(e,t,n,i,o)),this.APIService}createComponentList(){return new PF(this)}getOperationsFactory(){return this.operationsFactory===void 0&&(this.operationsFactory=new pw(this),this.factory.setOperationsFactory(this.operationsFactory)),this.operationsFactory}getNewOperationsFactory(){return new pw(this)}}class Ha extends at{constructor(e){super(e),this.domList=["a","button","div","h1","h2","h3","h4","h5","h6","img","input","p","span","table","tr","td","th","ul","li","ol","form","textarea","select","option","label","nav","footer","header","article","section","aside","main","video","audio","iframe","canvas"],this.state={...this.state,wrapperClass:"FCWrapper",formClass:"FCInputForm",labelClass:"defaultLabel",errorClass:"defaultErrorMessage",interface:"form"}}setObj(){var e,t;if(!this.props.prepareOnClick){let n=this.props.obj||(this.props.inPopup?(e=this.propsState)==null?void 0:e.currentPopupComponent:(t=this.propsState)==null?void 0:t.currentComponent);this.obj=this.isArray(n)}}preSetup(){this.setComponents(["wrapper","form","label","error"])}getInnerContent(){return this.innerContent=[this.props.label&&this.label.getHtml(),this.getFormHtml(),this.props.errorText&&this.error.getHtml()],this.innerContent}getHtml(){this.mapInnerContent();let e=this.wrapper.getHtml({type:"div",content:this.innerContent});return this.html=_.jsx(_.Fragment,{children:e}),this.html}getFormHtml(){const e=this.props.type||"input";return e==="select"&&(this.content=this.generateSelectOptions()),this.getInputProps(e),this.additionalPropsSetup(),this.form.getHtml({type:e,content:this.content,props:this.inputProps})}additionalPropsSetup(){}handleChange(e){let{name:t,value:n}=e.target;for(let i of this.obj){if(this.props.isPropArray){let o=i.getJson()[this.props.name]||[];Array.isArray(o)||(o=[o]),Array.isArray(o[0])||(o[0]=[o[0]]),o[0]=n,n=o}i.setCompState({[this.props.name]:n})}this.afterChange(e)}afterChange(e){if(this.props.update)for(let t of this.obj){let n=this.props.update===!0?void 0:{...this.props.update};t==null||t.update(n)}this.props.sendUpdate&&this.props.app&&this.app.dispatch({formUpdate:this.props.type}),this.props.callbackFunc&&this.props.callbackFunc(this.obj),this.additionalChanges(e),this.setState({})}additionalChanges(e){}async prepareOnClick(){var e;if(this.props.prepareOnClick&&this.props.app){let t=this.props.obj;t&&(t=this.isArray(t)),t=await((e=this.props.app)==null?void 0:e.state.componentList.getOperationsFactory().prepare({...t})),t&&(t=this.isArray(t)),this.obj=t}}objDispatch(e){for(let t of this.obj)t.setCompState({[this.props.name]:e});this.afterChange()}handleChangeWithoutEvent(e){for(let t in this.obj)t.setCompState({[e.name]:e.value});this.afterChange()}generateSelectOptions(){const{selectOptions:e,textOptions:t,useIndexForValue:n}=this.props;return Array.isArray(e)?t&&(!Array.isArray(t)||e.length!==t.length)?(console.error("'selectOptions' and 'textOptions' must be arrays of the same length."),null):e.map((i,o)=>{var h;const l=t?t[o]:i;let u=t?n?o:(h=i==null?void 0:i.getJson)==null?void 0:h.call(i)._id:i;return u===void 0?(console.warn(`Could not determine a value for the option at index ${o}.`),null):_.jsx("option",{value:u,children:l},u)}):null}getInputProps(e){var t;return this.inputProps={onChange:this.props.handleChange?n=>{this.props.handleChange(n,this.obj)}:this.handleChange,value:this.obj[0]?(t=this.obj[0])==null?void 0:t.getJson()[this.props.name]:this.props.value,type:this.props.inputType||this.props.type,onFocus:this.props.onFocus||this.onFocus,placeholder:this.props.placeholder,name:this.props.name,min:this.props.min,max:this.props.max,cols:this.props.cols||"",rows:this.props.rows||5,resize:this.props.resize||"true",autoComplete:this.props.autoComplete?this.props.autoComplete:"off",id:this.props.id,checked:this.props.checked,spellCheck:this.props.type==="password"||this.props.spellCheck===void 0?!1:this.props.spellCheck,minLength:this.props.minLength,maxLength:this.props.maxLength},this.domList.includes(e)||(this.inputProps.handleChangeWithoutEvent=this.props.update?()=>{console.log("")}:this.props.handleChangeWithoutEvent?this.props.handleChangeWithoutEvent:this.handleChangeWithoutEvent,this.inputProps.selectOptions=this.props.selectOptions,this.inputProps.textOptions=this.props.textOptions,this.inputProps.unit=this.props.unit?this.props.unit:"$",this.inputProps.tickClass=this.props.tickClass,this.inputProps.handleHTMLChange=this.props.handleHTMLChange||this.objDispatch,this.inputProps.doesMath=this.props.doesMath,this.inputProps.objDispatch=this.objDispatch,this.inputProps.emitClickedOutside=this.props.emitClickedOutside,this.inputProps.updateOnClickOutside=this.props.updateOnClickOutside),this.props.required&&(this.inputProps.required=!0),this.props.disabled&&(this.inputProps.disabled=!0),this.inputProps}}class eo extends Ha{constructor(e){super(e),this.state.formClass="FCDefaultButton"}buttonClick(){this.props.buttonClick?this.props.buttonClick(this.obj):this.buttonClickFunc(),this.props.callbackFunc&&this.props.callbackFunc(this.obj)}buttonClickFunc(){}additionalSetup(){this.form.setOnClick(this.buttonClick)}getFormHtml(){return this.form.setStyle({cursor:"pointer"}),this.content=this.props.content||this.content||_.jsx(_.Fragment,{children:"button"}),this.form.getHtml({type:"div",content:this.content})}}let Ux=class{constructor(){le(this,"FCInputForm","defaultInputForm");le(this,"FCWrapper","defaultWrapper");le(this,"FCError","defaultErrorMessage");le(this,"FCLabel","defaultLabel");le(this,"FCDefaultButton","defaultButton");le(this,"FCDefaultDelButton","delButton");le(this,"FCImgButton","imgButton")}};const FF=Object.freeze(Object.defineProperty({__proto__:null,DefaultRegistry:Ux},Symbol.toStringTag,{value:"Module"}));class jv{constructor(e){le(this,"factory",{});Hn.bind(this),e&&(this.registry=e,this.registerListWithFactory())}registerListWithFactory(){for(const e in this.registry)if(Object.prototype.hasOwnProperty.call(this.registry,e)){const t=e.charAt(0).toLowerCase()+e.slice(1);this.factory[t]=this.registry[e]}}getComponent(e){let t;return this.factory[e]&&(t=new this.factory[e]),t}registerComponent(e,t){this.factory[e]=t}}let jF=class extends jv{constructor(){super(FF),this.factory.default=Ux}};class Vx{constructor(){le(this,"factory",{})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),_.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class BF extends eo{buttonClickFunc(){let e=this.props.add;this.componentList.addComponents(e)}}class MF{constructor(){Hn.bind(this)}doMath(e){e=e.replace(/\s+/g,"");const t=/(\d+)([+\-*/])(\d+)/,n=e.match(t);if(!n)throw new Error("Invalid input");const i=parseFloat(n[1]),o=n[2],l=parseFloat(n[3]);return{"+":i+l,"-":i-l,"*":i*l,"/":i/l}[o]}}let qF=new MF;class UF extends Ha{constructor(e){super(e)}componentDidMount(){document.addEventListener("keyup",this.doMath)}componentWillUnmount(){document.removeEventListener("keyup",this.doMath)}additionalChanges(e){let{name:t,value:n}=e.target;this.setState({val:n})}async doMath(e){if(e.key==="Enter"&&this.state.val!==void 0){let t=this.obj[0],n=await qF.doMath(this.state.val).toString();await t.setCompState({[this.props.name]:n}),t.update(),await this.setState({val:void 0})}}}let VF=class extends eo{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...i})}},zF=class extends eo{buttonClickFunc(){for(let e of this.obj)e.update(this.props.updateParams);this.props.isPopup&&this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}},HF=class extends eo{buttonClickFunc(){let e=this.operationsFactory.addToComponentList(this.props.skipBackendUpdate),t=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(e[0].getJson().type)]:e[0]},n={};this.props.isPopup&&(n={popupSwitch:"",currentPopupComponent:void 0}),this.dispatch({...n,...t})}};var um,mw;function WF(){if(mw)return um;mw=1;function r(){this.__data__=[],this.size=0}return um=r,um}var cm,gw;function zx(){if(gw)return cm;gw=1;function r(e,t){return e===t||e!==e&&t!==t}return cm=r,cm}var hm,yw;function Yd(){if(yw)return hm;yw=1;var r=zx();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return hm=e,hm}var dm,vw;function $F(){if(vw)return dm;vw=1;var r=Yd(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,l=r(o,i);if(l<0)return!1;var u=o.length-1;return l==u?o.pop():t.call(o,l,1),--this.size,!0}return dm=n,dm}var fm,_w;function GF(){if(_w)return fm;_w=1;var r=Yd();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return fm=e,fm}var pm,ww;function KF(){if(ww)return pm;ww=1;var r=Yd();function e(t){return r(this.__data__,t)>-1}return pm=e,pm}var mm,Ew;function JF(){if(Ew)return mm;Ew=1;var r=Yd();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return mm=e,mm}var gm,Cw;function Xd(){if(Cw)return gm;Cw=1;var r=WF(),e=$F(),t=GF(),n=KF(),i=JF();function o(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var d=l[u];this.set(d[0],d[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,gm=o,gm}var ym,Aw;function QF(){if(Aw)return ym;Aw=1;var r=Xd();function e(){this.__data__=new r,this.size=0}return ym=e,ym}var vm,bw;function YF(){if(bw)return vm;bw=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return vm=r,vm}var _m,xw;function XF(){if(xw)return _m;xw=1;function r(e){return this.__data__.get(e)}return _m=r,_m}var wm,Sw;function ZF(){if(Sw)return wm;Sw=1;function r(e){return this.__data__.has(e)}return wm=r,wm}var Em,Tw;function Hx(){if(Tw)return Em;Tw=1;var r=typeof Ba=="object"&&Ba&&Ba.Object===Object&&Ba;return Em=r,Em}var Cm,Iw;function ns(){if(Iw)return Cm;Iw=1;var r=Hx(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Cm=t,Cm}var Am,Dw;function Bv(){if(Dw)return Am;Dw=1;var r=ns(),e=r.Symbol;return Am=e,Am}var bm,kw;function e4(){if(kw)return bm;kw=1;var r=Bv(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(l){var u=t.call(l,i),h=l[i];try{l[i]=void 0;var d=!0}catch{}var g=n.call(l);return d&&(u?l[i]=h:delete l[i]),g}return bm=o,bm}var xm,Rw;function t4(){if(Rw)return xm;Rw=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return xm=t,xm}var Sm,Pw;function Zd(){if(Pw)return Sm;Pw=1;var r=Bv(),e=e4(),t=t4(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function l(u){return u==null?u===void 0?i:n:o&&o in Object(u)?e(u):t(u)}return Sm=l,Sm}var Tm,Nw;function Wx(){if(Nw)return Tm;Nw=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Tm=r,Tm}var Im,Ow;function $x(){if(Ow)return Im;Ow=1;var r=Zd(),e=Wx(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function l(u){if(!e(u))return!1;var h=r(u);return h==n||h==i||h==t||h==o}return Im=l,Im}var Dm,Lw;function n4(){if(Lw)return Dm;Lw=1;var r=ns(),e=r["__core-js_shared__"];return Dm=e,Dm}var km,Fw;function r4(){if(Fw)return km;Fw=1;var r=n4(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return km=t,km}var Rm,jw;function Gx(){if(jw)return Rm;jw=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Rm=t,Rm}var Pm,Bw;function i4(){if(Bw)return Pm;Bw=1;var r=$x(),e=r4(),t=Wx(),n=Gx(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,h=l.toString,d=u.hasOwnProperty,g=RegExp("^"+h.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!t(p)||e(p))return!1;var y=r(p)?g:o;return y.test(n(p))}return Pm=m,Pm}var Nm,Mw;function s4(){if(Mw)return Nm;Mw=1;function r(e,t){return e==null?void 0:e[t]}return Nm=r,Nm}var Om,qw;function hl(){if(qw)return Om;qw=1;var r=i4(),e=s4();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return Om=t,Om}var Lm,Uw;function Mv(){if(Uw)return Lm;Uw=1;var r=hl(),e=ns(),t=r(e,"Map");return Lm=t,Lm}var Fm,Vw;function ef(){if(Vw)return Fm;Vw=1;var r=hl(),e=r(Object,"create");return Fm=e,Fm}var jm,zw;function o4(){if(zw)return jm;zw=1;var r=ef();function e(){this.__data__=r?r(null):{},this.size=0}return jm=e,jm}var Bm,Hw;function a4(){if(Hw)return Bm;Hw=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Bm=r,Bm}var Mm,Ww;function l4(){if(Ww)return Mm;Ww=1;var r=ef(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var l=this.__data__;if(r){var u=l[o];return u===e?void 0:u}return n.call(l,o)?l[o]:void 0}return Mm=i,Mm}var qm,$w;function u4(){if($w)return qm;$w=1;var r=ef(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return qm=n,qm}var Um,Gw;function c4(){if(Gw)return Um;Gw=1;var r=ef(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return Um=t,Um}var Vm,Kw;function h4(){if(Kw)return Vm;Kw=1;var r=o4(),e=a4(),t=l4(),n=u4(),i=c4();function o(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var d=l[u];this.set(d[0],d[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Vm=o,Vm}var zm,Jw;function d4(){if(Jw)return zm;Jw=1;var r=h4(),e=Xd(),t=Mv();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return zm=n,zm}var Hm,Qw;function f4(){if(Qw)return Hm;Qw=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Hm=r,Hm}var Wm,Yw;function tf(){if(Yw)return Wm;Yw=1;var r=f4();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Wm=e,Wm}var $m,Xw;function p4(){if(Xw)return $m;Xw=1;var r=tf();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return $m=e,$m}var Gm,Zw;function m4(){if(Zw)return Gm;Zw=1;var r=tf();function e(t){return r(this,t).get(t)}return Gm=e,Gm}var Km,eE;function g4(){if(eE)return Km;eE=1;var r=tf();function e(t){return r(this,t).has(t)}return Km=e,Km}var Jm,tE;function y4(){if(tE)return Jm;tE=1;var r=tf();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return Jm=e,Jm}var Qm,nE;function Kx(){if(nE)return Qm;nE=1;var r=d4(),e=p4(),t=m4(),n=g4(),i=y4();function o(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var d=l[u];this.set(d[0],d[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Qm=o,Qm}var Ym,rE;function v4(){if(rE)return Ym;rE=1;var r=Xd(),e=Mv(),t=Kx(),n=200;function i(o,l){var u=this.__data__;if(u instanceof r){var h=u.__data__;if(!e||h.length<n-1)return h.push([o,l]),this.size=++u.size,this;u=this.__data__=new t(h)}return u.set(o,l),this.size=u.size,this}return Ym=i,Ym}var Xm,iE;function _4(){if(iE)return Xm;iE=1;var r=Xd(),e=QF(),t=YF(),n=XF(),i=ZF(),o=v4();function l(u){var h=this.__data__=new r(u);this.size=h.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,Xm=l,Xm}var Zm,sE;function w4(){if(sE)return Zm;sE=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Zm=e,Zm}var eg,oE;function E4(){if(oE)return eg;oE=1;function r(e){return this.__data__.has(e)}return eg=r,eg}var tg,aE;function C4(){if(aE)return tg;aE=1;var r=Kx(),e=w4(),t=E4();function n(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new r;++o<l;)this.add(i[o])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,tg=n,tg}var ng,lE;function A4(){if(lE)return ng;lE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return ng=r,ng}var rg,uE;function b4(){if(uE)return rg;uE=1;function r(e,t){return e.has(t)}return rg=r,rg}var ig,cE;function Jx(){if(cE)return ig;cE=1;var r=C4(),e=A4(),t=b4(),n=1,i=2;function o(l,u,h,d,g,m){var p=h&n,y=l.length,b=u.length;if(y!=b&&!(p&&b>y))return!1;var x=m.get(l),E=m.get(u);if(x&&E)return x==u&&E==l;var w=-1,C=!0,P=h&i?new r:void 0;for(m.set(l,u),m.set(u,l);++w<y;){var S=l[w],O=u[w];if(d)var M=p?d(O,S,w,u,l,m):d(S,O,w,l,u,m);if(M!==void 0){if(M)continue;C=!1;break}if(P){if(!e(u,function(R,A){if(!t(P,A)&&(S===R||g(S,R,h,d,m)))return P.push(A)})){C=!1;break}}else if(!(S===O||g(S,O,h,d,m))){C=!1;break}}return m.delete(l),m.delete(u),C}return ig=o,ig}var sg,hE;function x4(){if(hE)return sg;hE=1;var r=ns(),e=r.Uint8Array;return sg=e,sg}var og,dE;function S4(){if(dE)return og;dE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,o){n[++t]=[o,i]}),n}return og=r,og}var ag,fE;function T4(){if(fE)return ag;fE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return ag=r,ag}var lg,pE;function I4(){if(pE)return lg;pE=1;var r=Bv(),e=x4(),t=zx(),n=Jx(),i=S4(),o=T4(),l=1,u=2,h="[object Boolean]",d="[object Date]",g="[object Error]",m="[object Map]",p="[object Number]",y="[object RegExp]",b="[object Set]",x="[object String]",E="[object Symbol]",w="[object ArrayBuffer]",C="[object DataView]",P=r?r.prototype:void 0,S=P?P.valueOf:void 0;function O(M,R,A,T,I,D,N){switch(A){case C:if(M.byteLength!=R.byteLength||M.byteOffset!=R.byteOffset)return!1;M=M.buffer,R=R.buffer;case w:return!(M.byteLength!=R.byteLength||!D(new e(M),new e(R)));case h:case d:case p:return t(+M,+R);case g:return M.name==R.name&&M.message==R.message;case y:case x:return M==R+"";case m:var L=i;case b:var V=T&l;if(L||(L=o),M.size!=R.size&&!V)return!1;var J=N.get(M);if(J)return J==R;T|=u,N.set(M,R);var re=n(L(M),L(R),T,I,D,N);return N.delete(M),re;case E:if(S)return S.call(M)==S.call(R)}return!1}return lg=O,lg}var ug,mE;function D4(){if(mE)return ug;mE=1;function r(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}return ug=r,ug}var cg,gE;function qv(){if(gE)return cg;gE=1;var r=Array.isArray;return cg=r,cg}var hg,yE;function k4(){if(yE)return hg;yE=1;var r=D4(),e=qv();function t(n,i,o){var l=i(n);return e(n)?l:r(l,o(n))}return hg=t,hg}var dg,vE;function R4(){if(vE)return dg;vE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=0,l=[];++n<i;){var u=e[n];t(u,n,e)&&(l[o++]=u)}return l}return dg=r,dg}var fg,_E;function P4(){if(_E)return fg;_E=1;function r(){return[]}return fg=r,fg}var pg,wE;function N4(){if(wE)return pg;wE=1;var r=R4(),e=P4(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(l){return l==null?[]:(l=Object(l),r(i(l),function(u){return n.call(l,u)}))}:e;return pg=o,pg}var mg,EE;function O4(){if(EE)return mg;EE=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return mg=r,mg}var gg,CE;function nf(){if(CE)return gg;CE=1;function r(e){return e!=null&&typeof e=="object"}return gg=r,gg}var yg,AE;function L4(){if(AE)return yg;AE=1;var r=Zd(),e=nf(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return yg=n,yg}var vg,bE;function F4(){if(bE)return vg;bE=1;var r=L4(),e=nf(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,o=r(function(){return arguments}())?r:function(l){return e(l)&&n.call(l,"callee")&&!i.call(l,"callee")};return vg=o,vg}var du={exports:{}},_g,xE;function j4(){if(xE)return _g;xE=1;function r(){return!1}return _g=r,_g}du.exports;var SE;function Qx(){return SE||(SE=1,function(r,e){var t=ns(),n=j4(),i=e&&!e.nodeType&&e,o=i&&!0&&r&&!r.nodeType&&r,l=o&&o.exports===i,u=l?t.Buffer:void 0,h=u?u.isBuffer:void 0,d=h||n;r.exports=d}(du,du.exports)),du.exports}var wg,TE;function B4(){if(TE)return wg;TE=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return wg=t,wg}var Eg,IE;function Yx(){if(IE)return Eg;IE=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Eg=e,Eg}var Cg,DE;function M4(){if(DE)return Cg;DE=1;var r=Zd(),e=Yx(),t=nf(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",l="[object Date]",u="[object Error]",h="[object Function]",d="[object Map]",g="[object Number]",m="[object Object]",p="[object RegExp]",y="[object Set]",b="[object String]",x="[object WeakMap]",E="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",P="[object Float64Array]",S="[object Int8Array]",O="[object Int16Array]",M="[object Int32Array]",R="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",D={};D[C]=D[P]=D[S]=D[O]=D[M]=D[R]=D[A]=D[T]=D[I]=!0,D[n]=D[i]=D[E]=D[o]=D[w]=D[l]=D[u]=D[h]=D[d]=D[g]=D[m]=D[p]=D[y]=D[b]=D[x]=!1;function N(L){return t(L)&&e(L.length)&&!!D[r(L)]}return Cg=N,Cg}var Ag,kE;function q4(){if(kE)return Ag;kE=1;function r(e){return function(t){return e(t)}}return Ag=r,Ag}var fu={exports:{}};fu.exports;var RE;function U4(){return RE||(RE=1,function(r,e){var t=Hx(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,l=o&&t.process,u=function(){try{var h=i&&i.require&&i.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}}();r.exports=u}(fu,fu.exports)),fu.exports}var bg,PE;function Xx(){if(PE)return bg;PE=1;var r=M4(),e=q4(),t=U4(),n=t&&t.isTypedArray,i=n?e(n):r;return bg=i,bg}var xg,NE;function V4(){if(NE)return xg;NE=1;var r=O4(),e=F4(),t=qv(),n=Qx(),i=B4(),o=Xx(),l=Object.prototype,u=l.hasOwnProperty;function h(d,g){var m=t(d),p=!m&&e(d),y=!m&&!p&&n(d),b=!m&&!p&&!y&&o(d),x=m||p||y||b,E=x?r(d.length,String):[],w=E.length;for(var C in d)(g||u.call(d,C))&&!(x&&(C=="length"||y&&(C=="offset"||C=="parent")||b&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||i(C,w)))&&E.push(C);return E}return xg=h,xg}var Sg,OE;function z4(){if(OE)return Sg;OE=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return Sg=e,Sg}var Tg,LE;function H4(){if(LE)return Tg;LE=1;function r(e,t){return function(n){return e(t(n))}}return Tg=r,Tg}var Ig,FE;function W4(){if(FE)return Ig;FE=1;var r=H4(),e=r(Object.keys,Object);return Ig=e,Ig}var Dg,jE;function $4(){if(jE)return Dg;jE=1;var r=z4(),e=W4(),t=Object.prototype,n=t.hasOwnProperty;function i(o){if(!r(o))return e(o);var l=[];for(var u in Object(o))n.call(o,u)&&u!="constructor"&&l.push(u);return l}return Dg=i,Dg}var kg,BE;function G4(){if(BE)return kg;BE=1;var r=$x(),e=Yx();function t(n){return n!=null&&e(n.length)&&!r(n)}return kg=t,kg}var Rg,ME;function K4(){if(ME)return Rg;ME=1;var r=V4(),e=$4(),t=G4();function n(i){return t(i)?r(i):e(i)}return Rg=n,Rg}var Pg,qE;function J4(){if(qE)return Pg;qE=1;var r=k4(),e=N4(),t=K4();function n(i){return r(i,t,e)}return Pg=n,Pg}var Ng,UE;function Q4(){if(UE)return Ng;UE=1;var r=J4(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(o,l,u,h,d,g){var m=u&e,p=r(o),y=p.length,b=r(l),x=b.length;if(y!=x&&!m)return!1;for(var E=y;E--;){var w=p[E];if(!(m?w in l:n.call(l,w)))return!1}var C=g.get(o),P=g.get(l);if(C&&P)return C==l&&P==o;var S=!0;g.set(o,l),g.set(l,o);for(var O=m;++E<y;){w=p[E];var M=o[w],R=l[w];if(h)var A=m?h(R,M,w,l,o,g):h(M,R,w,o,l,g);if(!(A===void 0?M===R||d(M,R,u,h,g):A)){S=!1;break}O||(O=w=="constructor")}if(S&&!O){var T=o.constructor,I=l.constructor;T!=I&&"constructor"in o&&"constructor"in l&&!(typeof T=="function"&&T instanceof T&&typeof I=="function"&&I instanceof I)&&(S=!1)}return g.delete(o),g.delete(l),S}return Ng=i,Ng}var Og,VE;function Y4(){if(VE)return Og;VE=1;var r=hl(),e=ns(),t=r(e,"DataView");return Og=t,Og}var Lg,zE;function X4(){if(zE)return Lg;zE=1;var r=hl(),e=ns(),t=r(e,"Promise");return Lg=t,Lg}var Fg,HE;function Z4(){if(HE)return Fg;HE=1;var r=hl(),e=ns(),t=r(e,"Set");return Fg=t,Fg}var jg,WE;function ej(){if(WE)return jg;WE=1;var r=hl(),e=ns(),t=r(e,"WeakMap");return jg=t,jg}var Bg,$E;function tj(){if($E)return Bg;$E=1;var r=Y4(),e=Mv(),t=X4(),n=Z4(),i=ej(),o=Zd(),l=Gx(),u="[object Map]",h="[object Object]",d="[object Promise]",g="[object Set]",m="[object WeakMap]",p="[object DataView]",y=l(r),b=l(e),x=l(t),E=l(n),w=l(i),C=o;return(r&&C(new r(new ArrayBuffer(1)))!=p||e&&C(new e)!=u||t&&C(t.resolve())!=d||n&&C(new n)!=g||i&&C(new i)!=m)&&(C=function(P){var S=o(P),O=S==h?P.constructor:void 0,M=O?l(O):"";if(M)switch(M){case y:return p;case b:return u;case x:return d;case E:return g;case w:return m}return S}),Bg=C,Bg}var Mg,GE;function nj(){if(GE)return Mg;GE=1;var r=_4(),e=Jx(),t=I4(),n=Q4(),i=tj(),o=qv(),l=Qx(),u=Xx(),h=1,d="[object Arguments]",g="[object Array]",m="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function b(x,E,w,C,P,S){var O=o(x),M=o(E),R=O?g:i(x),A=M?g:i(E);R=R==d?m:R,A=A==d?m:A;var T=R==m,I=A==m,D=R==A;if(D&&l(x)){if(!l(E))return!1;O=!0,T=!1}if(D&&!T)return S||(S=new r),O||u(x)?e(x,E,w,C,P,S):t(x,E,R,w,C,P,S);if(!(w&h)){var N=T&&y.call(x,"__wrapped__"),L=I&&y.call(E,"__wrapped__");if(N||L){var V=N?x.value():x,J=L?E.value():E;return S||(S=new r),P(V,J,w,C,S)}}return D?(S||(S=new r),n(x,E,w,C,P,S)):!1}return Mg=b,Mg}var qg,KE;function rj(){if(KE)return qg;KE=1;var r=nj(),e=nf();function t(n,i,o,l,u){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,o,l,t,u)}return qg=t,qg}var Ug,JE;function ij(){if(JE)return Ug;JE=1;var r=rj();function e(t,n){return r(t,n)}return Ug=e,Ug}var Wh={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var sj=Wh.exports,QE;function oj(){return QE||(QE=1,function(r,e){(function(n,i){r.exports=i()})(typeof self<"u"?self:sj,function(){return function(t){var n={};function i(o){if(n[o])return n[o].exports;var l=n[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=n,i.d=function(o,l,u){i.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:u})},i.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(l,"a",l),l},i.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},i.p="",i(i.s=109)}([function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(17),l=i(18),u=i(19),h=i(45),d=i(46),g=i(47),m=i(48),p=i(49),y=i(12),b=i(32),x=i(33),E=i(31),w=i(1),C={Scope:w.Scope,create:w.create,find:w.find,query:w.query,register:w.register,Container:o.default,Format:l.default,Leaf:u.default,Embed:m.default,Scroll:h.default,Block:g.default,Inline:d.default,Text:p.default,Attributor:{Attribute:y.default,Class:b.default,Style:x.default,Store:E.default}};n.default=C},function(t,n,i){var o=this&&this.__extends||function(){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var P in C)C.hasOwnProperty(P)&&(w[P]=C[P])};return function(w,C){E(w,C);function P(){this.constructor=w}w.prototype=C===null?Object.create(C):(P.prototype=C.prototype,new P)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=function(E){o(w,E);function w(C){var P=this;return C="[Parchment] "+C,P=E.call(this,C)||this,P.message=C,P.name=P.constructor.name,P}return w}(Error);n.ParchmentError=l;var u={},h={},d={},g={};n.DATA_KEY="__blot";var m;(function(E){E[E.TYPE=3]="TYPE",E[E.LEVEL=12]="LEVEL",E[E.ATTRIBUTE=13]="ATTRIBUTE",E[E.BLOT=14]="BLOT",E[E.INLINE=7]="INLINE",E[E.BLOCK=11]="BLOCK",E[E.BLOCK_BLOT=10]="BLOCK_BLOT",E[E.INLINE_BLOT=6]="INLINE_BLOT",E[E.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",E[E.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",E[E.ANY=15]="ANY"})(m=n.Scope||(n.Scope={}));function p(E,w){var C=b(E);if(C==null)throw new l("Unable to create "+E+" blot");var P=C,S=E instanceof Node||E.nodeType===Node.TEXT_NODE?E:P.create(w);return new P(S,w)}n.create=p;function y(E,w){return w===void 0&&(w=!1),E==null?null:E[n.DATA_KEY]!=null?E[n.DATA_KEY].blot:w?y(E.parentNode,w):null}n.find=y;function b(E,w){w===void 0&&(w=m.ANY);var C;if(typeof E=="string")C=g[E]||u[E];else if(E instanceof Text||E.nodeType===Node.TEXT_NODE)C=g.text;else if(typeof E=="number")E&m.LEVEL&m.BLOCK?C=g.block:E&m.LEVEL&m.INLINE&&(C=g.inline);else if(E instanceof HTMLElement){var P=(E.getAttribute("class")||"").split(/\s+/);for(var S in P)if(C=h[P[S]],C)break;C=C||d[E.tagName]}return C==null?null:w&m.LEVEL&C.scope&&w&m.TYPE&C.scope?C:null}n.query=b;function x(){for(var E=[],w=0;w<arguments.length;w++)E[w]=arguments[w];if(E.length>1)return E.map(function(S){return x(S)});var C=E[0];if(typeof C.blotName!="string"&&typeof C.attrName!="string")throw new l("Invalid definition");if(C.blotName==="abstract")throw new l("Cannot register abstract class");if(g[C.blotName||C.attrName]=C,typeof C.keyName=="string")u[C.keyName]=C;else if(C.className!=null&&(h[C.className]=C),C.tagName!=null){Array.isArray(C.tagName)?C.tagName=C.tagName.map(function(S){return S.toUpperCase()}):C.tagName=C.tagName.toUpperCase();var P=Array.isArray(C.tagName)?C.tagName:[C.tagName];P.forEach(function(S){(d[S]==null||C.className==null)&&(d[S]=C)})}return C}n.register=x},function(t,n,i){var o=i(51),l=i(11),u=i(3),h=i(20),d="\0",g=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};g.prototype.insert=function(m,p){var y={};return m.length===0?this:(y.insert=m,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y))},g.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},g.prototype.retain=function(m,p){if(m<=0)return this;var y={retain:m};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y)},g.prototype.push=function(m){var p=this.ops.length,y=this.ops[p-1];if(m=u(!0,{},m),typeof y=="object"){if(typeof m.delete=="number"&&typeof y.delete=="number")return this.ops[p-1]={delete:y.delete+m.delete},this;if(typeof y.delete=="number"&&m.insert!=null&&(p-=1,y=this.ops[p-1],typeof y!="object"))return this.ops.unshift(m),this;if(l(m.attributes,y.attributes)){if(typeof m.insert=="string"&&typeof y.insert=="string")return this.ops[p-1]={insert:y.insert+m.insert},typeof m.attributes=="object"&&(this.ops[p-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof y.retain=="number")return this.ops[p-1]={retain:y.retain+m.retain},typeof m.attributes=="object"&&(this.ops[p-1].attributes=m.attributes),this}}return p===this.ops.length?this.ops.push(m):this.ops.splice(p,0,m),this},g.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},g.prototype.filter=function(m){return this.ops.filter(m)},g.prototype.forEach=function(m){this.ops.forEach(m)},g.prototype.map=function(m){return this.ops.map(m)},g.prototype.partition=function(m){var p=[],y=[];return this.forEach(function(b){var x=m(b)?p:y;x.push(b)}),[p,y]},g.prototype.reduce=function(m,p){return this.ops.reduce(m,p)},g.prototype.changeLength=function(){return this.reduce(function(m,p){return p.insert?m+h.length(p):p.delete?m-p.delete:m},0)},g.prototype.length=function(){return this.reduce(function(m,p){return m+h.length(p)},0)},g.prototype.slice=function(m,p){m=m||0,typeof p!="number"&&(p=1/0);for(var y=[],b=h.iterator(this.ops),x=0;x<p&&b.hasNext();){var E;x<m?E=b.next(m-x):(E=b.next(p-x),y.push(E)),x+=h.length(E)}return new g(y)},g.prototype.compose=function(m){var p=h.iterator(this.ops),y=h.iterator(m.ops),b=[],x=y.peek();if(x!=null&&typeof x.retain=="number"&&x.attributes==null){for(var E=x.retain;p.peekType()==="insert"&&p.peekLength()<=E;)E-=p.peekLength(),b.push(p.next());x.retain-E>0&&y.next(x.retain-E)}for(var w=new g(b);p.hasNext()||y.hasNext();)if(y.peekType()==="insert")w.push(y.next());else if(p.peekType()==="delete")w.push(p.next());else{var C=Math.min(p.peekLength(),y.peekLength()),P=p.next(C),S=y.next(C);if(typeof S.retain=="number"){var O={};typeof P.retain=="number"?O.retain=C:O.insert=P.insert;var M=h.attributes.compose(P.attributes,S.attributes,typeof P.retain=="number");if(M&&(O.attributes=M),w.push(O),!y.hasNext()&&l(w.ops[w.ops.length-1],O)){var R=new g(p.rest());return w.concat(R).chop()}}else typeof S.delete=="number"&&typeof P.retain=="number"&&w.push(S)}return w.chop()},g.prototype.concat=function(m){var p=new g(this.ops.slice());return m.ops.length>0&&(p.push(m.ops[0]),p.ops=p.ops.concat(m.ops.slice(1))),p},g.prototype.diff=function(m,p){if(this.ops===m.ops)return new g;var y=[this,m].map(function(C){return C.map(function(P){if(P.insert!=null)return typeof P.insert=="string"?P.insert:d;var S=C===m?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),b=new g,x=o(y[0],y[1],p),E=h.iterator(this.ops),w=h.iterator(m.ops);return x.forEach(function(C){for(var P=C[1].length;P>0;){var S=0;switch(C[0]){case o.INSERT:S=Math.min(w.peekLength(),P),b.push(w.next(S));break;case o.DELETE:S=Math.min(P,E.peekLength()),E.next(S),b.delete(S);break;case o.EQUAL:S=Math.min(E.peekLength(),w.peekLength(),P);var O=E.next(S),M=w.next(S);l(O.insert,M.insert)?b.retain(S,h.attributes.diff(O.attributes,M.attributes)):b.push(M).delete(S);break}P-=S}}),b.chop()},g.prototype.eachLine=function(m,p){p=p||`
`;for(var y=h.iterator(this.ops),b=new g,x=0;y.hasNext();){if(y.peekType()!=="insert")return;var E=y.peek(),w=h.length(E)-y.peekLength(),C=typeof E.insert=="string"?E.insert.indexOf(p,w)-w:-1;if(C<0)b.push(y.next());else if(C>0)b.push(y.next(C));else{if(m(b,y.next(1).attributes||{},x)===!1)return;x+=1,b=new g}}b.length()>0&&m(b,{},x)},g.prototype.transform=function(m,p){if(p=!!p,typeof m=="number")return this.transformPosition(m,p);for(var y=h.iterator(this.ops),b=h.iterator(m.ops),x=new g;y.hasNext()||b.hasNext();)if(y.peekType()==="insert"&&(p||b.peekType()!=="insert"))x.retain(h.length(y.next()));else if(b.peekType()==="insert")x.push(b.next());else{var E=Math.min(y.peekLength(),b.peekLength()),w=y.next(E),C=b.next(E);if(w.delete)continue;C.delete?x.push(C):x.retain(E,h.attributes.transform(w.attributes,C.attributes,p))}return x.chop()},g.prototype.transformPosition=function(m,p){p=!!p;for(var y=h.iterator(this.ops),b=0;y.hasNext()&&b<=m;){var x=y.peekLength(),E=y.peekType();if(y.next(),E==="delete"){m-=Math.min(x,m-b);continue}else E==="insert"&&(b<m||!p)&&(m+=x);b+=x}return m},t.exports=g},function(t,n){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h=function(y){return typeof Array.isArray=="function"?Array.isArray(y):o.call(y)==="[object Array]"},d=function(y){if(!y||o.call(y)!=="[object Object]")return!1;var b=i.call(y,"constructor"),x=y.constructor&&y.constructor.prototype&&i.call(y.constructor.prototype,"isPrototypeOf");if(y.constructor&&!b&&!x)return!1;var E;for(E in y);return typeof E>"u"||i.call(y,E)},g=function(y,b){l&&b.name==="__proto__"?l(y,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):y[b.name]=b.newValue},m=function(y,b){if(b==="__proto__")if(i.call(y,b)){if(u)return u(y,b).value}else return;return y[b]};t.exports=function p(){var y,b,x,E,w,C,P=arguments[0],S=1,O=arguments.length,M=!1;for(typeof P=="boolean"&&(M=P,P=arguments[1]||{},S=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});S<O;++S)if(y=arguments[S],y!=null)for(b in y)x=m(P,b),E=m(y,b),P!==E&&(M&&E&&(d(E)||(w=h(E)))?(w?(w=!1,C=x&&h(x)?x:[]):C=x&&d(x)?x:{},g(P,{name:b,newValue:p(M,C,E)})):typeof E<"u"&&g(P,{name:b,newValue:E}));return P}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var o=function(){function D(N,L){for(var V=0;V<L.length;V++){var J=L[V];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,J.key,J)}}return function(N,L,V){return L&&D(N.prototype,L),V&&D(N,V),N}}(),l=function D(N,L,V){N===null&&(N=Function.prototype);var J=Object.getOwnPropertyDescriptor(N,L);if(J===void 0){var re=Object.getPrototypeOf(N);return re===null?void 0:D(re,L,V)}else{if("value"in J)return J.value;var Z=J.get;return Z===void 0?void 0:Z.call(V)}},u=i(3),h=P(u),d=i(2),g=P(d),m=i(0),p=P(m),y=i(16),b=P(y),x=i(6),E=P(x),w=i(7),C=P(w);function P(D){return D&&D.__esModule?D:{default:D}}function S(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function O(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:D}function M(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}var R=1,A=function(D){M(N,D);function N(){return S(this,N),O(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return o(N,[{key:"attach",value:function(){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new g.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(V,J){var re=p.default.query(V,p.default.Scope.BLOCK_ATTRIBUTE);re!=null&&this.attributes.attribute(re,J)}},{key:"formatAt",value:function(V,J,re,Z){this.format(re,Z)}},{key:"insertAt",value:function(V,J,re){if(typeof J=="string"&&J.endsWith(`
`)){var Z=p.default.create(T.blotName);this.parent.insertBefore(Z,V===0?this:this.next),Z.insertAt(0,J.slice(0,-1))}else l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,V,J,re)}}]),N}(p.default.Embed);A.scope=p.default.Scope.BLOCK_BLOT;var T=function(D){M(N,D);function N(L){S(this,N);var V=O(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L));return V.cache={},V}return o(N,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(V,J){return J.length()===0?V:V.insert(J.value(),I(J))},new g.default).insert(`
`,I(this))),this.cache.delta}},{key:"deleteAt",value:function(V,J){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,V,J),this.cache={}}},{key:"formatAt",value:function(V,J,re,Z){J<=0||(p.default.query(re,p.default.Scope.BLOCK)?V+J===this.length()&&this.format(re,Z):l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,V,Math.min(J,this.length()-V-1),re,Z),this.cache={})}},{key:"insertAt",value:function(V,J,re){if(re!=null)return l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,V,J,re);if(J.length!==0){var Z=J.split(`
`),ie=Z.shift();ie.length>0&&(V<this.length()-1||this.children.tail==null?l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,Math.min(V,this.length()-1),ie):this.children.tail.insertAt(this.children.tail.length(),ie),this.cache={});var G=this;Z.reduce(function(W,B){return G=G.split(W,!0),G.insertAt(0,B),B.length},V+ie.length)}}},{key:"insertBefore",value:function(V,J){var re=this.children.head;l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,V,J),re instanceof b.default&&re.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"length",this).call(this)+R),this.cache.length}},{key:"moveChildren",value:function(V,J){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"moveChildren",this).call(this,V,J),this.cache={}}},{key:"optimize",value:function(V){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,V),this.cache={}}},{key:"path",value:function(V){return l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,V,!0)}},{key:"removeChild",value:function(V){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"removeChild",this).call(this,V),this.cache={}}},{key:"split",value:function(V){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(J&&(V===0||V>=this.length()-R)){var re=this.clone();return V===0?(this.parent.insertBefore(re,this),this):(this.parent.insertBefore(re,this.next),re)}else{var Z=l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"split",this).call(this,V,J);return this.cache={},Z}}}]),N}(p.default.Block);T.blotName="block",T.tagName="P",T.defaultChild="break",T.allowedChildren=[E.default,p.default.Embed,C.default];function I(D){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D==null||(typeof D.formats=="function"&&(N=(0,h.default)(N,D.formats())),D.parent==null||D.parent.blotName=="scroll"||D.parent.statics.scope!==D.statics.scope)?N:I(D.parent,N)}n.bubbleFormats=I,n.BlockEmbed=A,n.default=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,B){var U=[],H=!0,ne=!1,ee=void 0;try{for(var $=W[Symbol.iterator](),Y;!(H=(Y=$.next()).done)&&(U.push(Y.value),!(B&&U.length===B));H=!0);}catch(Q){ne=!0,ee=Q}finally{try{!H&&$.return&&$.return()}finally{if(ne)throw ee}}return U}return function(W,B){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function G(W,B){for(var U=0;U<B.length;U++){var H=B[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(W,H.key,H)}}return function(W,B,U){return B&&G(W.prototype,B),U&&G(W,U),W}}();i(50);var h=i(2),d=I(h),g=i(14),m=I(g),p=i(8),y=I(p),b=i(9),x=I(b),E=i(0),w=I(E),C=i(15),P=I(C),S=i(3),O=I(S),M=i(10),R=I(M),A=i(34),T=I(A);function I(G){return G&&G.__esModule?G:{default:G}}function D(G,W,B){return W in G?Object.defineProperty(G,W,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[W]=B,G}function N(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var L=(0,R.default)("quill"),V=function(){u(G,null,[{key:"debug",value:function(B){B===!0&&(B="log"),R.default.level(B)}},{key:"find",value:function(B){return B.__quill||w.default.find(B)}},{key:"import",value:function(B){return this.imports[B]==null&&L.error("Cannot import "+B+". Are you sure it was registered?"),this.imports[B]}},{key:"register",value:function(B,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof B!="string"){var ee=B.attrName||B.blotName;typeof ee=="string"?this.register("formats/"+ee,B,U):Object.keys(B).forEach(function($){H.register($,B[$],U)})}else this.imports[B]!=null&&!ne&&L.warn("Overwriting "+B+" with",U),this.imports[B]=U,(B.startsWith("blots/")||B.startsWith("formats/"))&&U.blotName!=="abstract"?w.default.register(U):B.startsWith("modules")&&typeof U.register=="function"&&U.register()}}]);function G(W){var B=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,G),this.options=J(W,U),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",W);this.options.debug&&G.debug(this.options.debug);var H=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new y.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new P.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(y.default.events.EDITOR_CHANGE,function(ee){ee===y.default.events.TEXT_CHANGE&&B.root.classList.toggle("ql-blank",B.editor.isBlank())}),this.emitter.on(y.default.events.SCROLL_UPDATE,function(ee,$){var Y=B.selection.lastRange,Q=Y&&Y.length===0?Y.index:void 0;re.call(B,function(){return B.editor.update(null,$,Q)},ee)});var ne=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+H+"<p><br></p></div>");this.setContents(ne),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return u(G,[{key:"addContainer",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof B=="string"){var H=B;B=document.createElement("div"),B.classList.add(H)}return this.container.insertBefore(B,U),B}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(B,U,H){var ne=this,ee=Z(B,U,H),$=l(ee,4);return B=$[0],U=$[1],H=$[3],re.call(this,function(){return ne.editor.deleteText(B,U)},H,B,-1*U)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(B),this.container.classList.toggle("ql-disabled",!B)}},{key:"focus",value:function(){var B=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=B,this.scrollIntoView()}},{key:"format",value:function(B,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;return re.call(this,function(){var ee=H.getSelection(!0),$=new d.default;if(ee==null)return $;if(w.default.query(B,w.default.Scope.BLOCK))$=H.editor.formatLine(ee.index,ee.length,D({},B,U));else{if(ee.length===0)return H.selection.format(B,U),$;$=H.editor.formatText(ee.index,ee.length,D({},B,U))}return H.setSelection(ee,y.default.sources.SILENT),$},ne)}},{key:"formatLine",value:function(B,U,H,ne,ee){var $=this,Y=void 0,Q=Z(B,U,H,ne,ee),te=l(Q,4);return B=te[0],U=te[1],Y=te[2],ee=te[3],re.call(this,function(){return $.editor.formatLine(B,U,Y)},ee,B,0)}},{key:"formatText",value:function(B,U,H,ne,ee){var $=this,Y=void 0,Q=Z(B,U,H,ne,ee),te=l(Q,4);return B=te[0],U=te[1],Y=te[2],ee=te[3],re.call(this,function(){return $.editor.formatText(B,U,Y)},ee,B,0)}},{key:"getBounds",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=void 0;typeof B=="number"?H=this.selection.getBounds(B,U):H=this.selection.getBounds(B.index,B.length);var ne=this.container.getBoundingClientRect();return{bottom:H.bottom-ne.top,height:H.height,left:H.left-ne.left,right:H.right-ne.left,top:H.top-ne.top,width:H.width}}},{key:"getContents",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,H=Z(B,U),ne=l(H,2);return B=ne[0],U=ne[1],this.editor.getContents(B,U)}},{key:"getFormat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof B=="number"?this.editor.getFormat(B,U):this.editor.getFormat(B.index,B.length)}},{key:"getIndex",value:function(B){return B.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(B){return this.scroll.leaf(B)}},{key:"getLine",value:function(B){return this.scroll.line(B)}},{key:"getLines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof B!="number"?this.scroll.lines(B.index,B.length):this.scroll.lines(B,U)}},{key:"getModule",value:function(B){return this.theme.modules[B]}},{key:"getSelection",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return B&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,H=Z(B,U),ne=l(H,2);return B=ne[0],U=ne[1],this.editor.getText(B,U)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(B,U,H){var ne=this,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G.sources.API;return re.call(this,function(){return ne.editor.insertEmbed(B,U,H)},ee,B)}},{key:"insertText",value:function(B,U,H,ne,ee){var $=this,Y=void 0,Q=Z(B,0,H,ne,ee),te=l(Q,4);return B=te[0],Y=te[2],ee=te[3],re.call(this,function(){return $.editor.insertText(B,U,Y)},ee,B,U.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(B,U,H){this.clipboard.dangerouslyPasteHTML(B,U,H)}},{key:"removeFormat",value:function(B,U,H){var ne=this,ee=Z(B,U,H),$=l(ee,4);return B=$[0],U=$[1],H=$[3],re.call(this,function(){return ne.editor.removeFormat(B,U)},H,B)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(B){var U=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return re.call(this,function(){B=new d.default(B);var ne=U.getLength(),ee=U.editor.deleteText(0,ne),$=U.editor.applyDelta(B),Y=$.ops[$.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(U.editor.deleteText(U.getLength()-1,1),$.delete(1));var Q=ee.compose($);return Q},H)}},{key:"setSelection",value:function(B,U,H){if(B==null)this.selection.setRange(null,U||G.sources.API);else{var ne=Z(B,U,H),ee=l(ne,4);B=ee[0],U=ee[1],H=ee[3],this.selection.setRange(new C.Range(B,U),H),H!==y.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API,H=new d.default().insert(B);return this.setContents(H,U)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,U=this.scroll.update(B);return this.selection.update(B),U}},{key:"updateContents",value:function(B){var U=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return re.call(this,function(){return B=new d.default(B),U.editor.applyDelta(B,H)},H,!0)}}]),G}();V.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},V.events=y.default.events,V.sources=y.default.sources,V.version="1.3.7",V.imports={delta:d.default,parchment:w.default,"core/module":x.default,"core/theme":T.default};function J(G,W){if(W=(0,O.default)(!0,{container:G,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===V.DEFAULTS.theme)W.theme=T.default;else if(W.theme=V.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var B=(0,O.default)(!0,{},W.theme.DEFAULTS);[B,W].forEach(function(ne){ne.modules=ne.modules||{},Object.keys(ne.modules).forEach(function(ee){ne.modules[ee]===!0&&(ne.modules[ee]={})})});var U=Object.keys(B.modules).concat(Object.keys(W.modules)),H=U.reduce(function(ne,ee){var $=V.import("modules/"+ee);return $==null?L.error("Cannot load "+ee+" module. Are you sure you registered it?"):ne[ee]=$.DEFAULTS||{},ne},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,O.default)(!0,{},V.DEFAULTS,{modules:H},B,W),["bounds","container","scrollingContainer"].forEach(function(ne){typeof W[ne]=="string"&&(W[ne]=document.querySelector(W[ne]))}),W.modules=Object.keys(W.modules).reduce(function(ne,ee){return W.modules[ee]&&(ne[ee]=W.modules[ee]),ne},{}),W}function re(G,W,B,U){if(this.options.strict&&!this.isEnabled()&&W===y.default.sources.USER)return new d.default;var H=B==null?null:this.getSelection(),ne=this.editor.delta,ee=G();if(H!=null&&(B===!0&&(B=H.index),U==null?H=ie(H,ee,W):U!==0&&(H=ie(H,B,U,W)),this.setSelection(H,y.default.sources.SILENT)),ee.length()>0){var $,Y=[y.default.events.TEXT_CHANGE,ee,ne,W];if(($=this.emitter).emit.apply($,[y.default.events.EDITOR_CHANGE].concat(Y)),W!==y.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,Y)}}return ee}function Z(G,W,B,U,H){var ne={};return typeof G.index=="number"&&typeof G.length=="number"?typeof W!="number"?(H=U,U=B,B=W,W=G.length,G=G.index):(W=G.length,G=G.index):typeof W!="number"&&(H=U,U=B,B=W,W=0),(typeof B>"u"?"undefined":o(B))==="object"?(ne=B,H=U):typeof B=="string"&&(U!=null?ne[B]=U:H=B),H=H||y.default.sources.API,[G,W,ne,H]}function ie(G,W,B,U){if(G==null)return null;var H=void 0,ne=void 0;if(W instanceof d.default){var ee=[G.index,G.index+G.length].map(function(te){return W.transformPosition(te,U!==y.default.sources.USER)}),$=l(ee,2);H=$[0],ne=$[1]}else{var Y=[G.index,G.index+G.length].map(function(te){return te<W||te===W&&U===y.default.sources.USER?te:B>=0?te+B:Math.max(W,te+B)}),Q=l(Y,2);H=Q[0],ne=Q[1]}return new C.Range(H,ne-H)}n.expandConfig=J,n.overload=Z,n.default=V},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function E(w,C){for(var P=0;P<C.length;P++){var S=C[P];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,P){return C&&E(w.prototype,C),P&&E(w,P),w}}(),l=function E(w,C,P){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,C);if(S===void 0){var O=Object.getPrototypeOf(w);return O===null?void 0:E(O,C,P)}else{if("value"in S)return S.value;var M=S.get;return M===void 0?void 0:M.call(P)}},u=i(7),h=m(u),d=i(0),g=m(d);function m(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function y(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function b(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){b(w,E);function w(){return p(this,w),y(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"formatAt",value:function(P,S,O,M){if(w.compare(this.statics.blotName,O)<0&&g.default.query(O,g.default.Scope.BLOT)){var R=this.isolate(P,S);M&&R.wrap(O,M)}else l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,P,S,O,M)}},{key:"optimize",value:function(P){if(l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,P),this.parent instanceof w&&w.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(P,S){var O=w.order.indexOf(P),M=w.order.indexOf(S);return O>=0||M>=0?O-M:P===S?0:P<S?-1:1}}]),w}(g.default.Inline);x.allowedChildren=[x,g.default.Embed,h.default],x.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=x},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function g(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=function(p){g(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default.Text);n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function C(P,S){for(var O=0;O<S.length;O++){var M=S[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(P,M.key,M)}}return function(P,S,O){return S&&C(P.prototype,S),O&&C(P,O),P}}(),l=function C(P,S,O){P===null&&(P=Function.prototype);var M=Object.getOwnPropertyDescriptor(P,S);if(M===void 0){var R=Object.getPrototypeOf(P);return R===null?void 0:C(R,S,O)}else{if("value"in M)return M.value;var A=M.get;return A===void 0?void 0:A.call(O)}},u=i(54),h=m(u),d=i(10),g=m(d);function m(C){return C&&C.__esModule?C:{default:C}}function p(C,P){if(!(C instanceof P))throw new TypeError("Cannot call a class as a function")}function y(C,P){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:C}function b(C,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);C.prototype=Object.create(P&&P.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(C,P):C.__proto__=P)}var x=(0,g.default)("quill:events"),E=["selectionchange","mousedown","mouseup","click"];E.forEach(function(C){document.addEventListener(C,function(){for(var P=arguments.length,S=Array(P),O=0;O<P;O++)S[O]=arguments[O];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(M){if(M.__quill&&M.__quill.emitter){var R;(R=M.__quill.emitter).handleDOM.apply(R,S)}})})});var w=function(C){b(P,C);function P(){p(this,P);var S=y(this,(P.__proto__||Object.getPrototypeOf(P)).call(this));return S.listeners={},S.on("error",x.error),S}return o(P,[{key:"emit",value:function(){x.log.apply(x,arguments),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(O){for(var M=arguments.length,R=Array(M>1?M-1:0),A=1;A<M;A++)R[A-1]=arguments[A];(this.listeners[O.type]||[]).forEach(function(T){var I=T.node,D=T.handler;(O.target===I||I.contains(O.target))&&D.apply(void 0,[O].concat(R))})}},{key:"listenDOM",value:function(O,M,R){this.listeners[O]||(this.listeners[O]=[]),this.listeners[O].push({node:M,handler:R})}}]),P}(h.default);w.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},w.sources={API:"api",SILENT:"silent",USER:"user"},n.default=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});function o(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function u(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,u),this.quill=h,this.options=d};l.DEFAULTS={},n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=["error","warn","log","info"],l="warn";function u(d){if(o.indexOf(d)<=o.indexOf(l)){for(var g,m=arguments.length,p=Array(m>1?m-1:0),y=1;y<m;y++)p[y-1]=arguments[y];(g=console)[d].apply(g,p)}}function h(d){return o.reduce(function(g,m){return g[m]=u.bind(console,m,d),g},{})}u.level=h.level=function(d){l=d},n.default=h},function(t,n,i){var o=Array.prototype.slice,l=i(52),u=i(53),h=t.exports=function(p,y,b){return b||(b={}),p===y?!0:p instanceof Date&&y instanceof Date?p.getTime()===y.getTime():!p||!y||typeof p!="object"&&typeof y!="object"?b.strict?p===y:p==y:m(p,y,b)};function d(p){return p==null}function g(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function m(p,y,b){var x,E;if(d(p)||d(y)||p.prototype!==y.prototype)return!1;if(u(p))return u(y)?(p=o.call(p),y=o.call(y),h(p,y,b)):!1;if(g(p)){if(!g(y)||p.length!==y.length)return!1;for(x=0;x<p.length;x++)if(p[x]!==y[x])return!1;return!0}try{var w=l(p),C=l(y)}catch{return!1}if(w.length!=C.length)return!1;for(w.sort(),C.sort(),x=w.length-1;x>=0;x--)if(w[x]!=C[x])return!1;for(x=w.length-1;x>=0;x--)if(E=w[x],!h(p[E],y[E],b))return!1;return typeof p==typeof y}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),l=function(){function u(h,d,g){g===void 0&&(g={}),this.attrName=h,this.keyName=d;var m=o.Scope.TYPE&o.Scope.ATTRIBUTE;g.scope!=null?this.scope=g.scope&o.Scope.LEVEL|m:this.scope=o.Scope.ATTRIBUTE,g.whitelist!=null&&(this.whitelist=g.whitelist)}return u.keys=function(h){return[].map.call(h.attributes,function(d){return d.name})},u.prototype.add=function(h,d){return this.canAdd(h,d)?(h.setAttribute(this.keyName,d),!0):!1},u.prototype.canAdd=function(h,d){var g=o.query(h,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return g==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},u.prototype.remove=function(h){h.removeAttribute(this.keyName)},u.prototype.value=function(h){var d=h.getAttribute(this.keyName);return this.canAdd(h,d)&&d?d:""},u}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var o=function(){function A(T,I){var D=[],N=!0,L=!1,V=void 0;try{for(var J=T[Symbol.iterator](),re;!(N=(re=J.next()).done)&&(D.push(re.value),!(I&&D.length===I));N=!0);}catch(Z){L=!0,V=Z}finally{try{!N&&J.return&&J.return()}finally{if(L)throw V}}return D}return function(T,I){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return A(T,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(T,I){for(var D=0;D<I.length;D++){var N=I[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(T,N.key,N)}}return function(T,I,D){return I&&A(T.prototype,I),D&&A(T,D),T}}(),u=function A(T,I,D){T===null&&(T=Function.prototype);var N=Object.getOwnPropertyDescriptor(T,I);if(N===void 0){var L=Object.getPrototypeOf(T);return L===null?void 0:A(L,I,D)}else{if("value"in N)return N.value;var V=N.get;return V===void 0?void 0:V.call(D)}},h=i(2),d=C(h),g=i(0),m=C(g),p=i(4),y=C(p),b=i(6),x=C(b),E=i(7),w=C(E);function C(A){return A&&A.__esModule?A:{default:A}}function P(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}function S(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:A}function O(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);A.prototype=Object.create(T&&T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(A,T):A.__proto__=T)}var M=function(A){O(T,A);function T(){return P(this,T),S(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(x.default);M.blotName="code",M.tagName="CODE";var R=function(A){O(T,A);function T(){return P(this,T),S(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return l(T,[{key:"delta",value:function(){var D=this,N=this.domNode.textContent;return N.endsWith(`
`)&&(N=N.slice(0,-1)),N.split(`
`).reduce(function(L,V){return L.insert(V).insert(`
`,D.formats())},new d.default)}},{key:"format",value:function(D,N){if(!(D===this.statics.blotName&&N)){var L=this.descendant(w.default,this.length()-1),V=o(L,1),J=V[0];J!=null&&J.deleteAt(J.length()-1,1),u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,D,N)}}},{key:"formatAt",value:function(D,N,L,V){if(N!==0&&!(m.default.query(L,m.default.Scope.BLOCK)==null||L===this.statics.blotName&&V===this.statics.formats(this.domNode))){var J=this.newlineIndex(D);if(!(J<0||J>=D+N)){var re=this.newlineIndex(D,!0)+1,Z=J-re+1,ie=this.isolate(re,Z),G=ie.next;ie.format(L,V),G instanceof T&&G.formatAt(0,D-re+N-Z,L,V)}}}},{key:"insertAt",value:function(D,N,L){if(L==null){var V=this.descendant(w.default,D),J=o(V,2),re=J[0],Z=J[1];re.insertAt(Z,N)}}},{key:"length",value:function(){var D=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?D:D+1}},{key:"newlineIndex",value:function(D){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N)return this.domNode.textContent.slice(0,D).lastIndexOf(`
`);var L=this.domNode.textContent.slice(D).indexOf(`
`);return L>-1?D+L:-1}},{key:"optimize",value:function(D){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,D);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===N.statics.formats(N.domNode)&&(N.optimize(D),N.moveChildren(this),N.remove())}},{key:"replace",value:function(D){u(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,D),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(N){var L=m.default.find(N);L==null?N.parentNode.removeChild(N):L instanceof m.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(D){var N=u(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,D);return N.setAttribute("spellcheck",!1),N}},{key:"formats",value:function(){return!0}}]),T}(y.default);R.blotName="code-block",R.tagName="PRE",R.TAB="  ",n.Code=M,n.default=R},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,B){var U=[],H=!0,ne=!1,ee=void 0;try{for(var $=W[Symbol.iterator](),Y;!(H=(Y=$.next()).done)&&(U.push(Y.value),!(B&&U.length===B));H=!0);}catch(Q){ne=!0,ee=Q}finally{try{!H&&$.return&&$.return()}finally{if(ne)throw ee}}return U}return function(W,B){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function G(W,B){for(var U=0;U<B.length;U++){var H=B[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(W,H.key,H)}}return function(W,B,U){return B&&G(W.prototype,B),U&&G(W,U),W}}(),h=i(2),d=N(h),g=i(20),m=N(g),p=i(0),y=N(p),b=i(13),x=N(b),E=i(24),w=N(E),C=i(4),P=N(C),S=i(16),O=N(S),M=i(21),R=N(M),A=i(11),T=N(A),I=i(3),D=N(I);function N(G){return G&&G.__esModule?G:{default:G}}function L(G,W,B){return W in G?Object.defineProperty(G,W,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[W]=B,G}function V(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var J=/^[ -~]*$/,re=function(){function G(W){V(this,G),this.scroll=W,this.delta=this.getDelta()}return u(G,[{key:"applyDelta",value:function(B){var U=this,H=!1;this.scroll.update();var ne=this.scroll.length();return this.scroll.batchStart(),B=ie(B),B.reduce(function(ee,$){var Y=$.retain||$.delete||$.insert.length||1,Q=$.attributes||{};if($.insert!=null){if(typeof $.insert=="string"){var te=$.insert;te.endsWith(`
`)&&H&&(H=!1,te=te.slice(0,-1)),ee>=ne&&!te.endsWith(`
`)&&(H=!0),U.scroll.insertAt(ee,te);var ae=U.scroll.line(ee),ge=l(ae,2),Ce=ge[0],Re=ge[1],Pe=(0,D.default)({},(0,C.bubbleFormats)(Ce));if(Ce instanceof P.default){var Ne=Ce.descendant(y.default.Leaf,Re),Fe=l(Ne,1),Ze=Fe[0];Pe=(0,D.default)(Pe,(0,C.bubbleFormats)(Ze))}Q=m.default.attributes.diff(Pe,Q)||{}}else if(o($.insert)==="object"){var ue=Object.keys($.insert)[0];if(ue==null)return ee;U.scroll.insertAt(ee,ue,$.insert[ue])}ne+=Y}return Object.keys(Q).forEach(function(fe){U.scroll.formatAt(ee,Y,fe,Q[fe])}),ee+Y},0),B.reduce(function(ee,$){return typeof $.delete=="number"?(U.scroll.deleteAt(ee,$.delete),ee):ee+($.retain||$.insert.length||1)},0),this.scroll.batchEnd(),this.update(B)}},{key:"deleteText",value:function(B,U){return this.scroll.deleteAt(B,U),this.update(new d.default().retain(B).delete(U))}},{key:"formatLine",value:function(B,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ne).forEach(function(ee){if(!(H.scroll.whitelist!=null&&!H.scroll.whitelist[ee])){var $=H.scroll.lines(B,Math.max(U,1)),Y=U;$.forEach(function(Q){var te=Q.length();if(!(Q instanceof x.default))Q.format(ee,ne[ee]);else{var ae=B-Q.offset(H.scroll),ge=Q.newlineIndex(ae+Y)-ae+1;Q.formatAt(ae,ge,ee,ne[ee])}Y-=te})}}),this.scroll.optimize(),this.update(new d.default().retain(B).retain(U,(0,R.default)(ne)))}},{key:"formatText",value:function(B,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ne).forEach(function(ee){H.scroll.formatAt(B,U,ee,ne[ee])}),this.update(new d.default().retain(B).retain(U,(0,R.default)(ne)))}},{key:"getContents",value:function(B,U){return this.delta.slice(B,B+U)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(B,U){return B.concat(U.delta())},new d.default)}},{key:"getFormat",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],ne=[];U===0?this.scroll.path(B).forEach(function($){var Y=l($,1),Q=Y[0];Q instanceof P.default?H.push(Q):Q instanceof y.default.Leaf&&ne.push(Q)}):(H=this.scroll.lines(B,U),ne=this.scroll.descendants(y.default.Leaf,B,U));var ee=[H,ne].map(function($){if($.length===0)return{};for(var Y=(0,C.bubbleFormats)($.shift());Object.keys(Y).length>0;){var Q=$.shift();if(Q==null)return Y;Y=Z((0,C.bubbleFormats)(Q),Y)}return Y});return D.default.apply(D.default,ee)}},{key:"getText",value:function(B,U){return this.getContents(B,U).filter(function(H){return typeof H.insert=="string"}).map(function(H){return H.insert}).join("")}},{key:"insertEmbed",value:function(B,U,H){return this.scroll.insertAt(B,U,H),this.update(new d.default().retain(B).insert(L({},U,H)))}},{key:"insertText",value:function(B,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U=U.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(B,U),Object.keys(ne).forEach(function(ee){H.scroll.formatAt(B,U.length,ee,ne[ee])}),this.update(new d.default().retain(B).insert(U,(0,R.default)(ne)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var B=this.scroll.children.head;return B.statics.blotName!==P.default.blotName||B.children.length>1?!1:B.children.head instanceof O.default}},{key:"removeFormat",value:function(B,U){var H=this.getText(B,U),ne=this.scroll.line(B+U),ee=l(ne,2),$=ee[0],Y=ee[1],Q=0,te=new d.default;$!=null&&($ instanceof x.default?Q=$.newlineIndex(Y)-Y+1:Q=$.length()-Y,te=$.delta().slice(Y,Y+Q-1).insert(`
`));var ae=this.getContents(B,U+Q),ge=ae.diff(new d.default().insert(H).concat(te)),Ce=new d.default().retain(B).concat(ge);return this.applyDelta(Ce)}},{key:"update",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ne=this.delta;if(U.length===1&&U[0].type==="characterData"&&U[0].target.data.match(J)&&y.default.find(U[0].target)){var ee=y.default.find(U[0].target),$=(0,C.bubbleFormats)(ee),Y=ee.offset(this.scroll),Q=U[0].oldValue.replace(w.default.CONTENTS,""),te=new d.default().insert(Q),ae=new d.default().insert(ee.value()),ge=new d.default().retain(Y).concat(te.diff(ae,H));B=ge.reduce(function(Ce,Re){return Re.insert?Ce.insert(Re.insert,$):Ce.push(Re)},new d.default),this.delta=ne.compose(B)}else this.delta=this.getDelta(),(!B||!(0,T.default)(ne.compose(B),this.delta))&&(B=ne.diff(this.delta,H));return B}}]),G}();function Z(G,W){return Object.keys(W).reduce(function(B,U){return G[U]==null||(W[U]===G[U]?B[U]=W[U]:Array.isArray(W[U])?W[U].indexOf(G[U])<0&&(B[U]=W[U].concat([G[U]])):B[U]=[W[U],G[U]]),B},{})}function ie(G){return G.reduce(function(W,B){if(B.insert===1){var U=(0,R.default)(B.attributes);return delete U.image,W.insert({image:B.attributes.image},U)}if(B.attributes!=null&&(B.attributes.list===!0||B.attributes.bullet===!0)&&(B=(0,R.default)(B),B.attributes.list?B.attributes.list="ordered":(B.attributes.list="bullet",delete B.attributes.bullet)),typeof B.insert=="string"){var H=B.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(H,B.attributes)}return W.push(B)},new d.default)}n.default=re},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var o=function(){function A(T,I){var D=[],N=!0,L=!1,V=void 0;try{for(var J=T[Symbol.iterator](),re;!(N=(re=J.next()).done)&&(D.push(re.value),!(I&&D.length===I));N=!0);}catch(Z){L=!0,V=Z}finally{try{!N&&J.return&&J.return()}finally{if(L)throw V}}return D}return function(T,I){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return A(T,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(T,I){for(var D=0;D<I.length;D++){var N=I[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(T,N.key,N)}}return function(T,I,D){return I&&A(T.prototype,I),D&&A(T,D),T}}(),u=i(0),h=w(u),d=i(21),g=w(d),m=i(11),p=w(m),y=i(8),b=w(y),x=i(10),E=w(x);function w(A){return A&&A.__esModule?A:{default:A}}function C(A){if(Array.isArray(A)){for(var T=0,I=Array(A.length);T<A.length;T++)I[T]=A[T];return I}else return Array.from(A)}function P(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}var S=(0,E.default)("quill:selection"),O=function A(T){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;P(this,A),this.index=T,this.length=I},M=function(){function A(T,I){var D=this;P(this,A),this.emitter=I,this.scroll=T,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new O(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){D.mouseDown||setTimeout(D.update.bind(D,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(N,L){N===b.default.events.TEXT_CHANGE&&L.length()>0&&D.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(D.hasFocus()){var N=D.getNativeRange();N!=null&&N.start.node!==D.cursor.textNode&&D.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{D.setNativeRange(N.start.node,N.start.offset,N.end.node,N.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(N,L){if(L.range){var V=L.range,J=V.startNode,re=V.startOffset,Z=V.endNode,ie=V.endOffset;D.setNativeRange(J,re,Z,ie)}}),this.update(b.default.sources.SILENT)}return l(A,[{key:"handleComposition",value:function(){var I=this;this.root.addEventListener("compositionstart",function(){I.composing=!0}),this.root.addEventListener("compositionend",function(){if(I.composing=!1,I.cursor.parent){var D=I.cursor.restore();if(!D)return;setTimeout(function(){I.setNativeRange(D.startNode,D.startOffset,D.endNode,D.endOffset)},1)}})}},{key:"handleDragging",value:function(){var I=this;this.emitter.listenDOM("mousedown",document.body,function(){I.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){I.mouseDown=!1,I.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(I,D){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[I])){this.scroll.update();var N=this.getNativeRange();if(!(N==null||!N.native.collapsed||h.default.query(I,h.default.Scope.BLOCK))){if(N.start.node!==this.cursor.textNode){var L=h.default.find(N.start.node,!1);if(L==null)return;if(L instanceof h.default.Leaf){var V=L.split(N.start.offset);L.parent.insertBefore(this.cursor,V)}else L.insertBefore(this.cursor,N.start.node);this.cursor.attach()}this.cursor.format(I,D),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=this.scroll.length();I=Math.min(I,N-1),D=Math.min(I+D,N-1)-I;var L=void 0,V=this.scroll.leaf(I),J=o(V,2),re=J[0],Z=J[1];if(re==null)return null;var ie=re.position(Z,!0),G=o(ie,2);L=G[0],Z=G[1];var W=document.createRange();if(D>0){W.setStart(L,Z);var B=this.scroll.leaf(I+D),U=o(B,2);if(re=U[0],Z=U[1],re==null)return null;var H=re.position(Z,!0),ne=o(H,2);return L=ne[0],Z=ne[1],W.setEnd(L,Z),W.getBoundingClientRect()}else{var ee="left",$=void 0;return L instanceof Text?(Z<L.data.length?(W.setStart(L,Z),W.setEnd(L,Z+1)):(W.setStart(L,Z-1),W.setEnd(L,Z),ee="right"),$=W.getBoundingClientRect()):($=re.domNode.getBoundingClientRect(),Z>0&&(ee="right")),{bottom:$.top+$.height,height:$.height,left:$[ee],right:$[ee],top:$.top,width:0}}}},{key:"getNativeRange",value:function(){var I=document.getSelection();if(I==null||I.rangeCount<=0)return null;var D=I.getRangeAt(0);if(D==null)return null;var N=this.normalizeNative(D);return S.info("getNativeRange",N),N}},{key:"getRange",value:function(){var I=this.getNativeRange();if(I==null)return[null,null];var D=this.normalizedToRange(I);return[D,I]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(I){var D=this,N=[[I.start.node,I.start.offset]];I.native.collapsed||N.push([I.end.node,I.end.offset]);var L=N.map(function(re){var Z=o(re,2),ie=Z[0],G=Z[1],W=h.default.find(ie,!0),B=W.offset(D.scroll);return G===0?B:W instanceof h.default.Container?B+W.length():B+W.index(ie,G)}),V=Math.min(Math.max.apply(Math,C(L)),this.scroll.length()-1),J=Math.min.apply(Math,[V].concat(C(L)));return new O(J,V-J)}},{key:"normalizeNative",value:function(I){if(!R(this.root,I.startContainer)||!I.collapsed&&!R(this.root,I.endContainer))return null;var D={start:{node:I.startContainer,offset:I.startOffset},end:{node:I.endContainer,offset:I.endOffset},native:I};return[D.start,D.end].forEach(function(N){for(var L=N.node,V=N.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>V)L=L.childNodes[V],V=0;else if(L.childNodes.length===V)L=L.lastChild,V=L instanceof Text?L.data.length:L.childNodes.length+1;else break;N.node=L,N.offset=V}),D}},{key:"rangeToNative",value:function(I){var D=this,N=I.collapsed?[I.index]:[I.index,I.index+I.length],L=[],V=this.scroll.length();return N.forEach(function(J,re){J=Math.min(V-1,J);var Z=void 0,ie=D.scroll.leaf(J),G=o(ie,2),W=G[0],B=G[1],U=W.position(B,re!==0),H=o(U,2);Z=H[0],B=H[1],L.push(Z,B)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(I){var D=this.lastRange;if(D!=null){var N=this.getBounds(D.index,D.length);if(N!=null){var L=this.scroll.length()-1,V=this.scroll.line(Math.min(D.index,L)),J=o(V,1),re=J[0],Z=re;if(D.length>0){var ie=this.scroll.line(Math.min(D.index+D.length,L)),G=o(ie,1);Z=G[0]}if(!(re==null||Z==null)){var W=I.getBoundingClientRect();N.top<W.top?I.scrollTop-=W.top-N.top:N.bottom>W.bottom&&(I.scrollTop+=N.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(I,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:I,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D,V=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",I,D,N,L),!(I!=null&&(this.root.parentNode==null||I.parentNode==null||N.parentNode==null))){var J=document.getSelection();if(J!=null)if(I!=null){this.hasFocus()||this.root.focus();var re=(this.getNativeRange()||{}).native;if(re==null||V||I!==re.startContainer||D!==re.startOffset||N!==re.endContainer||L!==re.endOffset){I.tagName=="BR"&&(D=[].indexOf.call(I.parentNode.childNodes,I),I=I.parentNode),N.tagName=="BR"&&(L=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode);var Z=document.createRange();Z.setStart(I,D),Z.setEnd(N,L),J.removeAllRanges(),J.addRange(Z)}}else J.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof D=="string"&&(N=D,D=!1),S.info("setRange",I),I!=null){var L=this.rangeToNative(I);this.setNativeRange.apply(this,C(L).concat([D]))}else this.setNativeRange(null);this.update(N)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,D=this.lastRange,N=this.getRange(),L=o(N,2),V=L[0],J=L[1];if(this.lastRange=V,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(D,this.lastRange)){var re;!this.composing&&J!=null&&J.native.collapsed&&J.start.node!==this.cursor.textNode&&this.cursor.restore();var Z=[b.default.events.SELECTION_CHANGE,(0,g.default)(this.lastRange),(0,g.default)(D),I];if((re=this.emitter).emit.apply(re,[b.default.events.EDITOR_CHANGE].concat(Z)),I!==b.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,Z)}}}}]),A}();function R(A,T){try{T.parentNode}catch{return!1}return T instanceof Text&&(T=T.parentNode),A.contains(T)}n.Range=O,n.default=M},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(x,E){for(var w=0;w<E.length;w++){var C=E[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,E,w){return E&&b(x.prototype,E),w&&b(x,w),x}}(),l=function b(x,E,w){x===null&&(x=Function.prototype);var C=Object.getOwnPropertyDescriptor(x,E);if(C===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:b(P,E,w)}else{if("value"in C)return C.value;var S=C.get;return S===void 0?void 0:S.call(w)}},u=i(0),h=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function p(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var y=function(b){p(x,b);function x(){return g(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"insertInto",value:function(w,C){w.children.length===0?l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertInto",this).call(this,w,C):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),x}(h.default.Embed);y.blotName="break",y.tagName="BR",n.default=y},function(t,n,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)y.hasOwnProperty(b)&&(p[b]=y[b])};return function(p,y){m(p,y);function b(){this.constructor=p}p.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(44),u=i(30),h=i(1),d=function(m){o(p,m);function p(y){var b=m.call(this,y)||this;return b.build(),b}return p.prototype.appendChild=function(y){this.insertBefore(y)},p.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(y){y.attach()})},p.prototype.build=function(){var y=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var x=g(b);y.insertBefore(x,y.children.head||void 0)}catch(E){if(E instanceof h.ParchmentError)return;throw E}})},p.prototype.deleteAt=function(y,b){if(y===0&&b===this.length())return this.remove();this.children.forEachAt(y,b,function(x,E,w){x.deleteAt(E,w)})},p.prototype.descendant=function(y,b){var x=this.children.find(b),E=x[0],w=x[1];return y.blotName==null&&y(E)||y.blotName!=null&&E instanceof y?[E,w]:E instanceof p?E.descendant(y,w):[null,-1]},p.prototype.descendants=function(y,b,x){b===void 0&&(b=0),x===void 0&&(x=Number.MAX_VALUE);var E=[],w=x;return this.children.forEachAt(b,x,function(C,P,S){(y.blotName==null&&y(C)||y.blotName!=null&&C instanceof y)&&E.push(C),C instanceof p&&(E=E.concat(C.descendants(y,P,w))),w-=S}),E},p.prototype.detach=function(){this.children.forEach(function(y){y.detach()}),m.prototype.detach.call(this)},p.prototype.formatAt=function(y,b,x,E){this.children.forEachAt(y,b,function(w,C,P){w.formatAt(C,P,x,E)})},p.prototype.insertAt=function(y,b,x){var E=this.children.find(y),w=E[0],C=E[1];if(w)w.insertAt(C,b,x);else{var P=x==null?h.create("text",b):h.create(b,x);this.appendChild(P)}},p.prototype.insertBefore=function(y,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(x){return y instanceof x}))throw new h.ParchmentError("Cannot insert "+y.statics.blotName+" into "+this.statics.blotName);y.insertInto(this,b)},p.prototype.length=function(){return this.children.reduce(function(y,b){return y+b.length()},0)},p.prototype.moveChildren=function(y,b){this.children.forEach(function(x){y.insertBefore(x,b)})},p.prototype.optimize=function(y){if(m.prototype.optimize.call(this,y),this.children.length===0)if(this.statics.defaultChild!=null){var b=h.create(this.statics.defaultChild);this.appendChild(b),b.optimize(y)}else this.remove()},p.prototype.path=function(y,b){b===void 0&&(b=!1);var x=this.children.find(y,b),E=x[0],w=x[1],C=[[this,y]];return E instanceof p?C.concat(E.path(w,b)):(E!=null&&C.push([E,w]),C)},p.prototype.removeChild=function(y){this.children.remove(y)},p.prototype.replace=function(y){y instanceof p&&y.moveChildren(this),m.prototype.replace.call(this,y)},p.prototype.split=function(y,b){if(b===void 0&&(b=!1),!b){if(y===0)return this;if(y===this.length())return this.next}var x=this.clone();return this.parent.insertBefore(x,this.next),this.children.forEachAt(y,this.length(),function(E,w,C){E=E.split(w,b),x.appendChild(E)}),x},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(y,b){var x=this,E=[],w=[];y.forEach(function(C){C.target===x.domNode&&C.type==="childList"&&(E.push.apply(E,C.addedNodes),w.push.apply(w,C.removedNodes))}),w.forEach(function(C){if(!(C.parentNode!=null&&C.tagName!=="IFRAME"&&document.body.compareDocumentPosition(C)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var P=h.find(C);P!=null&&(P.domNode.parentNode==null||P.domNode.parentNode===x.domNode)&&P.detach()}}),E.filter(function(C){return C.parentNode==x.domNode}).sort(function(C,P){return C===P?0:C.compareDocumentPosition(P)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(C){var P=null;C.nextSibling!=null&&(P=h.find(C.nextSibling));var S=g(C);(S.next!=P||S.next==null)&&(S.parent!=null&&S.parent.removeChild(x),x.insertBefore(S,P||void 0))})},p}(u.default);function g(m){var p=h.find(m);if(p==null)try{p=h.create(m)}catch{p=h.create(h.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(b){p.domNode.appendChild(b)}),m.parentNode&&m.parentNode.replaceChild(p.domNode,m),p.attach()}return p}n.default=d},function(t,n,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)y.hasOwnProperty(b)&&(p[b]=y[b])};return function(p,y){m(p,y);function b(){this.constructor=p}p.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12),u=i(31),h=i(17),d=i(1),g=function(m){o(p,m);function p(y){var b=m.call(this,y)||this;return b.attributes=new u.default(b.domNode),b}return p.formats=function(y){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return y.tagName.toLowerCase()},p.prototype.format=function(y,b){var x=d.query(y);x instanceof l.default?this.attributes.attribute(x,b):b&&x!=null&&(y!==this.statics.blotName||this.formats()[y]!==b)&&this.replaceWith(y,b)},p.prototype.formats=function(){var y=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(y[this.statics.blotName]=b),y},p.prototype.replaceWith=function(y,b){var x=m.prototype.replaceWith.call(this,y,b);return this.attributes.copy(x),x},p.prototype.update=function(y,b){var x=this;m.prototype.update.call(this,y,b),y.some(function(E){return E.target===x.domNode&&E.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(y,b){var x=m.prototype.wrap.call(this,y,b);return x instanceof p&&x.statics.scope===this.statics.scope&&this.attributes.move(x),x},p}(h.default);n.default=g},function(t,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var p in m)m.hasOwnProperty(p)&&(g[p]=m[p])};return function(g,m){d(g,m);function p(){this.constructor=g}g.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(30),u=i(1),h=function(d){o(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.value=function(m){return!0},g.prototype.index=function(m,p){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},g.prototype.position=function(m,p){var y=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(y+=1),[this.parent.domNode,y]},g.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},g.scope=u.Scope.INLINE_BLOT,g}(l.default);n.default=h},function(t,n,i){var o=i(11),l=i(3),u={attributes:{compose:function(d,g,m){typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var p=l(!0,{},g);m||(p=Object.keys(p).reduce(function(b,x){return p[x]!=null&&(b[x]=p[x]),b},{}));for(var y in d)d[y]!==void 0&&g[y]===void 0&&(p[y]=d[y]);return Object.keys(p).length>0?p:void 0},diff:function(d,g){typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var m=Object.keys(d).concat(Object.keys(g)).reduce(function(p,y){return o(d[y],g[y])||(p[y]=g[y]===void 0?null:g[y]),p},{});return Object.keys(m).length>0?m:void 0},transform:function(d,g,m){if(typeof d!="object")return g;if(typeof g=="object"){if(!m)return g;var p=Object.keys(g).reduce(function(y,b){return d[b]===void 0&&(y[b]=g[b]),y},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new h(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function h(d){this.ops=d,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(d){d||(d=1/0);var g=this.ops[this.index];if(g){var m=this.offset,p=u.length(g);if(d>=p-m?(d=p-m,this.index+=1,this.offset=0):this.offset+=d,typeof g.delete=="number")return{delete:d};var y={};return g.attributes&&(y.attributes=g.attributes),typeof g.retain=="number"?y.retain=d:typeof g.insert=="string"?y.insert=g.insert.substr(m,d):y.insert=g.insert,y}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?u.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,g=this.index,m=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=g,[m].concat(p)}else return[]},t.exports=u},function(t,n){var i=function(){function o(x,E){return E!=null&&x instanceof E}var l;try{l=Map}catch{l=function(){}}var u;try{u=Set}catch{u=function(){}}var h;try{h=Promise}catch{h=function(){}}function d(x,E,w,C,P){typeof E=="object"&&(w=E.depth,C=E.prototype,P=E.includeNonEnumerable,E=E.circular);var S=[],O=[],M=typeof Buffer<"u";typeof E>"u"&&(E=!0),typeof w>"u"&&(w=1/0);function R(A,T){if(A===null)return null;if(T===0)return A;var I,D;if(typeof A!="object")return A;if(o(A,l))I=new l;else if(o(A,u))I=new u;else if(o(A,h))I=new h(function(W,B){A.then(function(U){W(R(U,T-1))},function(U){B(R(U,T-1))})});else if(d.__isArray(A))I=[];else if(d.__isRegExp(A))I=new RegExp(A.source,b(A)),A.lastIndex&&(I.lastIndex=A.lastIndex);else if(d.__isDate(A))I=new Date(A.getTime());else{if(M&&Buffer.isBuffer(A))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(A.length):I=new Buffer(A.length),A.copy(I),I;o(A,Error)?I=Object.create(A):typeof C>"u"?(D=Object.getPrototypeOf(A),I=Object.create(D)):(I=Object.create(C),D=C)}if(E){var N=S.indexOf(A);if(N!=-1)return O[N];S.push(A),O.push(I)}o(A,l)&&A.forEach(function(W,B){var U=R(B,T-1),H=R(W,T-1);I.set(U,H)}),o(A,u)&&A.forEach(function(W){var B=R(W,T-1);I.add(B)});for(var L in A){var V;D&&(V=Object.getOwnPropertyDescriptor(D,L)),!(V&&V.set==null)&&(I[L]=R(A[L],T-1))}if(Object.getOwnPropertySymbols)for(var J=Object.getOwnPropertySymbols(A),L=0;L<J.length;L++){var re=J[L],Z=Object.getOwnPropertyDescriptor(A,re);Z&&!Z.enumerable&&!P||(I[re]=R(A[re],T-1),Z.enumerable||Object.defineProperty(I,re,{enumerable:!1}))}if(P)for(var ie=Object.getOwnPropertyNames(A),L=0;L<ie.length;L++){var G=ie[L],Z=Object.getOwnPropertyDescriptor(A,G);Z&&Z.enumerable||(I[G]=R(A[G],T-1),Object.defineProperty(I,G,{enumerable:!1}))}return I}return R(x,w)}d.clonePrototype=function(E){if(E===null)return null;var w=function(){};return w.prototype=E,new w};function g(x){return Object.prototype.toString.call(x)}d.__objToStr=g;function m(x){return typeof x=="object"&&g(x)==="[object Date]"}d.__isDate=m;function p(x){return typeof x=="object"&&g(x)==="[object Array]"}d.__isArray=p;function y(x){return typeof x=="object"&&g(x)==="[object RegExp]"}d.__isRegExp=y;function b(x){var E="";return x.global&&(E+="g"),x.ignoreCase&&(E+="i"),x.multiline&&(E+="m"),E}return d.__getRegExpFlags=b,d}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function I(D,N){var L=[],V=!0,J=!1,re=void 0;try{for(var Z=D[Symbol.iterator](),ie;!(V=(ie=Z.next()).done)&&(L.push(ie.value),!(N&&L.length===N));V=!0);}catch(G){J=!0,re=G}finally{try{!V&&Z.return&&Z.return()}finally{if(J)throw re}}return L}return function(D,N){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return I(D,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function I(D,N){for(var L=0;L<N.length;L++){var V=N[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,N,L){return N&&I(D.prototype,N),L&&I(D,L),D}}(),u=function I(D,N,L){D===null&&(D=Function.prototype);var V=Object.getOwnPropertyDescriptor(D,N);if(V===void 0){var J=Object.getPrototypeOf(D);return J===null?void 0:I(J,N,L)}else{if("value"in V)return V.value;var re=V.get;return re===void 0?void 0:re.call(L)}},h=i(0),d=S(h),g=i(8),m=S(g),p=i(4),y=S(p),b=i(16),x=S(b),E=i(13),w=S(E),C=i(25),P=S(C);function S(I){return I&&I.__esModule?I:{default:I}}function O(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function M(I,D){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:I}function R(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}function A(I){return I instanceof y.default||I instanceof p.BlockEmbed}var T=function(I){R(D,I);function D(N,L){O(this,D);var V=M(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N));return V.emitter=L.emitter,Array.isArray(L.whitelist)&&(V.whitelist=L.whitelist.reduce(function(J,re){return J[re]=!0,J},{})),V.domNode.addEventListener("DOMNodeInserted",function(){}),V.optimize(),V.enable(),V}return l(D,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,V){var J=this.line(L),re=o(J,2),Z=re[0],ie=re[1],G=this.line(L+V),W=o(G,1),B=W[0];if(u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,L,V),B!=null&&Z!==B&&ie>0){if(Z instanceof p.BlockEmbed||B instanceof p.BlockEmbed){this.optimize();return}if(Z instanceof w.default){var U=Z.newlineIndex(Z.length(),!0);if(U>-1&&(Z=Z.split(U+1),Z===B)){this.optimize();return}}else if(B instanceof w.default){var H=B.newlineIndex(0);H>-1&&B.split(H+1)}var ne=B.children.head instanceof x.default?null:B.children.head;Z.moveChildren(B,ne),Z.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,V,J,re){this.whitelist!=null&&!this.whitelist[J]||(u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,L,V,J,re),this.optimize())}},{key:"insertAt",value:function(L,V,J){if(!(J!=null&&this.whitelist!=null&&!this.whitelist[V])){if(L>=this.length())if(J==null||d.default.query(V,d.default.Scope.BLOCK)==null){var re=d.default.create(this.statics.defaultChild);this.appendChild(re),J==null&&V.endsWith(`
`)&&(V=V.slice(0,-1)),re.insertAt(0,V,J)}else{var Z=d.default.create(V,J);this.appendChild(Z)}else u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,L,V,J);this.optimize()}}},{key:"insertBefore",value:function(L,V){if(L.statics.scope===d.default.Scope.INLINE_BLOT){var J=d.default.create(this.statics.defaultChild);J.appendChild(L),L=J}u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,L,V)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(A,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,J=function re(Z,ie,G){var W=[],B=G;return Z.children.forEachAt(ie,G,function(U,H,ne){A(U)?W.push(U):U instanceof d.default.Container&&(W=W.concat(re(U,H,B))),B-=ne}),W};return J(this,L,V)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,L,V),L.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,L,V))}},{key:"path",value:function(L){return u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var V=m.default.sources.USER;typeof L=="string"&&(V=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,V,L),u(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,V,L)}}}]),D}(d.default.Scroll);T.blotName="scroll",T.className="ql-editor",T.tagName="DIV",T.defaultChild="block",T.allowedChildren=[y.default,p.BlockEmbed,P.default],n.default=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},l=function(){function $(Y,Q){var te=[],ae=!0,ge=!1,Ce=void 0;try{for(var Re=Y[Symbol.iterator](),Pe;!(ae=(Pe=Re.next()).done)&&(te.push(Pe.value),!(Q&&te.length===Q));ae=!0);}catch(Ne){ge=!0,Ce=Ne}finally{try{!ae&&Re.return&&Re.return()}finally{if(ge)throw Ce}}return te}return function(Y,Q){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return $(Y,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function $(Y,Q){for(var te=0;te<Q.length;te++){var ae=Q[te];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(Y,ae.key,ae)}}return function(Y,Q,te){return Q&&$(Y.prototype,Q),te&&$(Y,te),Y}}(),h=i(21),d=I(h),g=i(11),m=I(g),p=i(3),y=I(p),b=i(2),x=I(b),E=i(20),w=I(E),C=i(0),P=I(C),S=i(5),O=I(S),M=i(10),R=I(M),A=i(9),T=I(A);function I($){return $&&$.__esModule?$:{default:$}}function D($,Y,Q){return Y in $?Object.defineProperty($,Y,{value:Q,enumerable:!0,configurable:!0,writable:!0}):$[Y]=Q,$}function N($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")}function L($,Y){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:$}function V($,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);$.prototype=Object.create(Y&&Y.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf($,Y):$.__proto__=Y)}var J=(0,R.default)("quill:keyboard"),re=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Z=function($){V(Y,$),u(Y,null,[{key:"match",value:function(te,ae){return ae=ee(ae),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ge){return!!ae[ge]!==te[ge]&&ae[ge]!==null})?!1:ae.key===(te.which||te.keyCode)}}]);function Y(Q,te){N(this,Y);var ae=L(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,Q,te));return ae.bindings={},Object.keys(ae.options.bindings).forEach(function(ge){ge==="list autofill"&&Q.scroll.whitelist!=null&&!Q.scroll.whitelist.list||ae.options.bindings[ge]&&ae.addBinding(ae.options.bindings[ge])}),ae.addBinding({key:Y.keys.ENTER,shiftKey:null},U),ae.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ae.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},G),ae.addBinding({key:Y.keys.DELETE},{collapsed:!0},W)):(ae.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},G),ae.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),ae.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},B),ae.addBinding({key:Y.keys.DELETE},{collapsed:!1},B),ae.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},G),ae.listen(),ae}return u(Y,[{key:"addBinding",value:function(te){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=ee(te);if(Ce==null||Ce.key==null)return J.warn("Attempted to add invalid keyboard binding",Ce);typeof ae=="function"&&(ae={handler:ae}),typeof ge=="function"&&(ge={handler:ge}),Ce=(0,y.default)(Ce,ae,ge),this.bindings[Ce.key]=this.bindings[Ce.key]||[],this.bindings[Ce.key].push(Ce)}},{key:"listen",value:function(){var te=this;this.quill.root.addEventListener("keydown",function(ae){if(!ae.defaultPrevented){var ge=ae.which||ae.keyCode,Ce=(te.bindings[ge]||[]).filter(function(vt){return Y.match(ae,vt)});if(Ce.length!==0){var Re=te.quill.getSelection();if(!(Re==null||!te.quill.hasFocus())){var Pe=te.quill.getLine(Re.index),Ne=l(Pe,2),Fe=Ne[0],Ze=Ne[1],ue=te.quill.getLeaf(Re.index),fe=l(ue,2),Ee=fe[0],Te=fe[1],ye=Re.length===0?[Ee,Te]:te.quill.getLeaf(Re.index+Re.length),$e=l(ye,2),Le=$e[0],ze=$e[1],Ke=Ee instanceof P.default.Text?Ee.value().slice(0,Te):"",nt=Le instanceof P.default.Text?Le.value().slice(ze):"",it={collapsed:Re.length===0,empty:Re.length===0&&Fe.length()<=1,format:te.quill.getFormat(Re),offset:Ze,prefix:Ke,suffix:nt},Gn=Ce.some(function(vt){if(vt.collapsed!=null&&vt.collapsed!==it.collapsed||vt.empty!=null&&vt.empty!==it.empty||vt.offset!=null&&vt.offset!==it.offset)return!1;if(Array.isArray(vt.format)){if(vt.format.every(function(kt){return it.format[kt]==null}))return!1}else if(o(vt.format)==="object"&&!Object.keys(vt.format).every(function(kt){return vt.format[kt]===!0?it.format[kt]!=null:vt.format[kt]===!1?it.format[kt]==null:(0,m.default)(vt.format[kt],it.format[kt])}))return!1;return vt.prefix!=null&&!vt.prefix.test(it.prefix)||vt.suffix!=null&&!vt.suffix.test(it.suffix)?!1:vt.handler.call(te,Re,it)!==!0});Gn&&ae.preventDefault()}}}})}}]),Y}(T.default);Z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Z.DEFAULTS={bindings:{bold:ne("bold"),italic:ne("italic"),underline:ne("underline"),indent:{key:Z.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","+1",O.default.sources.USER)}},outdent:{key:Z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","-1",O.default.sources.USER)}},"outdent backspace":{key:Z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,Q){Q.format.indent!=null?this.quill.format("indent","-1",O.default.sources.USER):Q.format.list!=null&&this.quill.format("list",!1,O.default.sources.USER)}},"indent code-block":H(!0),"outdent code-block":H(!1),"remove tab":{key:Z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,O.default.sources.USER)}},tab:{key:Z.keys.TAB,handler:function(Y){this.quill.history.cutoff();var Q=new x.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(Q,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,O.default.sources.SILENT)}},"list empty enter":{key:Z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,Q){this.quill.format("list",!1,O.default.sources.USER),Q.format.indent&&this.quill.format("indent",!1,O.default.sources.USER)}},"checklist enter":{key:Z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var Q=this.quill.getLine(Y.index),te=l(Q,2),ae=te[0],ge=te[1],Ce=(0,y.default)({},ae.formats(),{list:"checked"}),Re=new x.default().retain(Y.index).insert(`
`,Ce).retain(ae.length()-ge-1).retain(1,{list:"unchecked"});this.quill.updateContents(Re,O.default.sources.USER),this.quill.setSelection(Y.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,Q){var te=this.quill.getLine(Y.index),ae=l(te,2),ge=ae[0],Ce=ae[1],Re=new x.default().retain(Y.index).insert(`
`,Q.format).retain(ge.length()-Ce-1).retain(1,{header:null});this.quill.updateContents(Re,O.default.sources.USER),this.quill.setSelection(Y.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,Q){var te=Q.prefix.length,ae=this.quill.getLine(Y.index),ge=l(ae,2),Ce=ge[0],Re=ge[1];if(Re>te)return!0;var Pe=void 0;switch(Q.prefix.trim()){case"[]":case"[ ]":Pe="unchecked";break;case"[x]":Pe="checked";break;case"-":case"*":Pe="bullet";break;default:Pe="ordered"}this.quill.insertText(Y.index," ",O.default.sources.USER),this.quill.history.cutoff();var Ne=new x.default().retain(Y.index-Re).delete(te+1).retain(Ce.length()-2-Re).retain(1,{list:Pe});this.quill.updateContents(Ne,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-te,O.default.sources.SILENT)}},"code exit":{key:Z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var Q=this.quill.getLine(Y.index),te=l(Q,2),ae=te[0],ge=te[1],Ce=new x.default().retain(Y.index+ae.length()-ge-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ce,O.default.sources.USER)}},"embed left":ie(Z.keys.LEFT,!1),"embed left shift":ie(Z.keys.LEFT,!0),"embed right":ie(Z.keys.RIGHT,!1),"embed right shift":ie(Z.keys.RIGHT,!0)}};function ie($,Y){var Q,te=$===Z.keys.LEFT?"prefix":"suffix";return Q={key:$,shiftKey:Y,altKey:null},D(Q,te,/^$/),D(Q,"handler",function(ge){var Ce=ge.index;$===Z.keys.RIGHT&&(Ce+=ge.length+1);var Re=this.quill.getLeaf(Ce),Pe=l(Re,1),Ne=Pe[0];return Ne instanceof P.default.Embed?($===Z.keys.LEFT?Y?this.quill.setSelection(ge.index-1,ge.length+1,O.default.sources.USER):this.quill.setSelection(ge.index-1,O.default.sources.USER):Y?this.quill.setSelection(ge.index,ge.length+1,O.default.sources.USER):this.quill.setSelection(ge.index+ge.length+1,O.default.sources.USER),!1):!0}),Q}function G($,Y){if(!($.index===0||this.quill.getLength()<=1)){var Q=this.quill.getLine($.index),te=l(Q,1),ae=te[0],ge={};if(Y.offset===0){var Ce=this.quill.getLine($.index-1),Re=l(Ce,1),Pe=Re[0];if(Pe!=null&&Pe.length()>1){var Ne=ae.formats(),Fe=this.quill.getFormat($.index-1,1);ge=w.default.attributes.diff(Ne,Fe)||{}}}var Ze=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText($.index-Ze,Ze,O.default.sources.USER),Object.keys(ge).length>0&&this.quill.formatLine($.index-Ze,Ze,ge,O.default.sources.USER),this.quill.focus()}}function W($,Y){var Q=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!($.index>=this.quill.getLength()-Q)){var te={},ae=0,ge=this.quill.getLine($.index),Ce=l(ge,1),Re=Ce[0];if(Y.offset>=Re.length()-1){var Pe=this.quill.getLine($.index+1),Ne=l(Pe,1),Fe=Ne[0];if(Fe){var Ze=Re.formats(),ue=this.quill.getFormat($.index,1);te=w.default.attributes.diff(Ze,ue)||{},ae=Fe.length()}}this.quill.deleteText($.index,Q,O.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine($.index+ae-1,Q,te,O.default.sources.USER)}}function B($){var Y=this.quill.getLines($),Q={};if(Y.length>1){var te=Y[0].formats(),ae=Y[Y.length-1].formats();Q=w.default.attributes.diff(ae,te)||{}}this.quill.deleteText($,O.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine($.index,1,Q,O.default.sources.USER),this.quill.setSelection($.index,O.default.sources.SILENT),this.quill.focus()}function U($,Y){var Q=this;$.length>0&&this.quill.scroll.deleteAt($.index,$.length);var te=Object.keys(Y.format).reduce(function(ae,ge){return P.default.query(ge,P.default.Scope.BLOCK)&&!Array.isArray(Y.format[ge])&&(ae[ge]=Y.format[ge]),ae},{});this.quill.insertText($.index,`
`,te,O.default.sources.USER),this.quill.setSelection($.index+1,O.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(ae){te[ae]==null&&(Array.isArray(Y.format[ae])||ae!=="link"&&Q.quill.format(ae,Y.format[ae],O.default.sources.USER))})}function H($){return{key:Z.keys.TAB,shiftKey:!$,format:{"code-block":!0},handler:function(Q){var te=P.default.query("code-block"),ae=Q.index,ge=Q.length,Ce=this.quill.scroll.descendant(te,ae),Re=l(Ce,2),Pe=Re[0],Ne=Re[1];if(Pe!=null){var Fe=this.quill.getIndex(Pe),Ze=Pe.newlineIndex(Ne,!0)+1,ue=Pe.newlineIndex(Fe+Ne+ge),fe=Pe.domNode.textContent.slice(Ze,ue).split(`
`);Ne=0,fe.forEach(function(Ee,Te){$?(Pe.insertAt(Ze+Ne,te.TAB),Ne+=te.TAB.length,Te===0?ae+=te.TAB.length:ge+=te.TAB.length):Ee.startsWith(te.TAB)&&(Pe.deleteAt(Ze+Ne,te.TAB.length),Ne-=te.TAB.length,Te===0?ae-=te.TAB.length:ge-=te.TAB.length),Ne+=Ee.length+1}),this.quill.update(O.default.sources.USER),this.quill.setSelection(ae,ge,O.default.sources.SILENT)}}}}function ne($){return{key:$[0].toUpperCase(),shortKey:!0,handler:function(Q,te){this.quill.format($,!te.format[$],O.default.sources.USER)}}}function ee($){if(typeof $=="string"||typeof $=="number")return ee({key:$});if((typeof $>"u"?"undefined":o($))==="object"&&($=(0,d.default)($,!1)),typeof $.key=="string")if(Z.keys[$.key.toUpperCase()]!=null)$.key=Z.keys[$.key.toUpperCase()];else if($.key.length===1)$.key=$.key.toUpperCase().charCodeAt(0);else return null;return $.shortKey&&($[re]=$.shortKey,delete $.shortKey),$}n.default=Z,n.SHORTKEY=re},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(C,P){var S=[],O=!0,M=!1,R=void 0;try{for(var A=C[Symbol.iterator](),T;!(O=(T=A.next()).done)&&(S.push(T.value),!(P&&S.length===P));O=!0);}catch(I){M=!0,R=I}finally{try{!O&&A.return&&A.return()}finally{if(M)throw R}}return S}return function(C,P){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return w(C,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function w(C,P,S){C===null&&(C=Function.prototype);var O=Object.getOwnPropertyDescriptor(C,P);if(O===void 0){var M=Object.getPrototypeOf(C);return M===null?void 0:w(M,P,S)}else{if("value"in O)return O.value;var R=O.get;return R===void 0?void 0:R.call(S)}},u=function(){function w(C,P){for(var S=0;S<P.length;S++){var O=P[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,P,S){return P&&w(C.prototype,P),S&&w(C,S),C}}(),h=i(0),d=p(h),g=i(7),m=p(g);function p(w){return w&&w.__esModule?w:{default:w}}function y(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")}function b(w,C){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:w}function x(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);w.prototype=Object.create(C&&C.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(w,C):w.__proto__=C)}var E=function(w){x(C,w),u(C,null,[{key:"value",value:function(){}}]);function C(P,S){y(this,C);var O=b(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,P));return O.selection=S,O.textNode=document.createTextNode(C.CONTENTS),O.domNode.appendChild(O.textNode),O._length=0,O}return u(C,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,O){if(this._length!==0)return l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,S,O);for(var M=this,R=0;M!=null&&M.statics.scope!==d.default.Scope.BLOCK_BLOT;)R+=M.offset(M.parent),M=M.parent;M!=null&&(this._length=C.CONTENTS.length,M.optimize(),M.formatAt(R,C.CONTENTS.length,S,O),this._length=0)}},{key:"index",value:function(S,O){return S===this.textNode?0:l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"index",this).call(this,S,O)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,O=this.selection.getNativeRange(),M=void 0,R=void 0,A=void 0;if(O!=null&&O.start.node===S&&O.end.node===S){var T=[S,O.start.offset,O.end.offset];M=T[0],R=T[1],A=T[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==C.CONTENTS){var I=this.textNode.data.split(C.CONTENTS).join("");this.next instanceof m.default?(M=this.next.domNode,this.next.insertAt(0,I),this.textNode.data=C.CONTENTS):(this.textNode.data=I,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(C.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),R!=null){var D=[R,A].map(function(L){return Math.max(0,Math.min(M.data.length,L-1))}),N=o(D,2);return R=N[0],A=N[1],{startNode:M,startOffset:R,endNode:M,endOffset:A}}}}},{key:"update",value:function(S,O){var M=this;if(S.some(function(A){return A.type==="characterData"&&A.target===M.textNode})){var R=this.restore();R&&(O.range=R)}}},{key:"value",value:function(){return""}}]),C}(d.default.Embed);E.blotName="cursor",E.className="ql-cursor",E.tagName="span",E.CONTENTS="\uFEFF",n.default=E},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),l=d(o),u=i(4),h=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function p(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var y=function(b){p(x,b);function x(){return g(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(l.default.Container);y.allowedChildren=[h.default,u.BlockEmbed,y],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var o=function(){function E(w,C){for(var P=0;P<C.length;P++){var S=C[P];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,P){return C&&E(w.prototype,C),P&&E(w,P),w}}(),l=function E(w,C,P){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,C);if(S===void 0){var O=Object.getPrototypeOf(w);return O===null?void 0:E(O,C,P)}else{if("value"in S)return S.value;var M=S.get;return M===void 0?void 0:M.call(P)}},u=i(0),h=d(u);function d(E){return E&&E.__esModule?E:{default:E}}function g(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function p(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var y=function(E){p(w,E);function w(){return g(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"value",value:function(P){var S=l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,P);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(O){return("00"+parseInt(O).toString(16)).slice(-2)}).join("")):S}}]),w}(h.default.Attributor.Style),b=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),x=new y("color","color",{scope:h.default.Scope.INLINE});n.ColorAttributor=y,n.ColorClass=b,n.ColorStyle=x},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var o=function(){function x(E,w){for(var C=0;C<w.length;C++){var P=w[C];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}return function(E,w,C){return w&&x(E.prototype,w),C&&x(E,C),E}}(),l=function x(E,w,C){E===null&&(E=Function.prototype);var P=Object.getOwnPropertyDescriptor(E,w);if(P===void 0){var S=Object.getPrototypeOf(E);return S===null?void 0:x(S,w,C)}else{if("value"in P)return P.value;var O=P.get;return O===void 0?void 0:O.call(C)}},u=i(6),h=d(u);function d(x){return x&&x.__esModule?x:{default:x}}function g(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function m(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function p(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var y=function(x){p(E,x);function E(){return g(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"format",value:function(C,P){if(C!==this.statics.blotName||!P)return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,C,P);P=this.constructor.sanitize(P),this.domNode.setAttribute("href",P)}}],[{key:"create",value:function(C){var P=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,C);return C=this.sanitize(C),P.setAttribute("href",C),P.setAttribute("rel","noopener noreferrer"),P.setAttribute("target","_blank"),P}},{key:"formats",value:function(C){return C.getAttribute("href")}},{key:"sanitize",value:function(C){return b(C,this.PROTOCOL_WHITELIST)?C:this.SANITIZED_URL}}]),E}(h.default);y.blotName="link",y.tagName="A",y.SANITIZED_URL="about:blank",y.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(x,E){var w=document.createElement("a");w.href=x;var C=w.href.slice(0,w.href.indexOf(":"));return E.indexOf(C)>-1}n.default=y,n.sanitize=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},l=function(){function E(w,C){for(var P=0;P<C.length;P++){var S=C[P];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,P){return C&&E(w.prototype,C),P&&E(w,P),w}}(),u=i(23),h=m(u),d=i(107),g=m(d);function m(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}var y=0;function b(E,w){E.setAttribute(w,E.getAttribute(w)!=="true")}var x=function(){function E(w){var C=this;p(this,E),this.select=w,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){C.togglePicker()}),this.label.addEventListener("keydown",function(P){switch(P.keyCode){case h.default.keys.ENTER:C.togglePicker();break;case h.default.keys.ESCAPE:C.escape(),P.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(E,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(C){var P=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),C.hasAttribute("value")&&S.setAttribute("data-value",C.getAttribute("value")),C.textContent&&S.setAttribute("data-label",C.textContent),S.addEventListener("click",function(){P.selectItem(S,!0)}),S.addEventListener("keydown",function(O){switch(O.keyCode){case h.default.keys.ENTER:P.selectItem(S,!0),O.preventDefault();break;case h.default.keys.ESCAPE:P.escape(),O.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var C=document.createElement("span");return C.classList.add("ql-picker-label"),C.innerHTML=g.default,C.tabIndex="0",C.setAttribute("role","button"),C.setAttribute("aria-expanded","false"),this.container.appendChild(C),C}},{key:"buildOptions",value:function(){var C=this,P=document.createElement("span");P.classList.add("ql-picker-options"),P.setAttribute("aria-hidden","true"),P.tabIndex="-1",P.id="ql-picker-options-"+y,y+=1,this.label.setAttribute("aria-controls",P.id),this.options=P,[].slice.call(this.select.options).forEach(function(S){var O=C.buildItem(S);P.appendChild(O),S.selected===!0&&C.selectItem(O)}),this.container.appendChild(P)}},{key:"buildPicker",value:function(){var C=this;[].slice.call(this.select.attributes).forEach(function(P){C.container.setAttribute(P.name,P.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var C=this;this.close(),setTimeout(function(){return C.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(C!==S&&(S!=null&&S.classList.remove("ql-selected"),C!=null&&(C.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(C.parentNode.children,C),C.hasAttribute("data-value")?this.label.setAttribute("data-value",C.getAttribute("data-value")):this.label.removeAttribute("data-value"),C.hasAttribute("data-label")?this.label.setAttribute("data-label",C.getAttribute("data-label")):this.label.removeAttribute("data-label"),P))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var O=document.createEvent("Event");O.initEvent("change",!0,!0),this.select.dispatchEvent(O)}this.close()}}},{key:"update",value:function(){var C=void 0;if(this.select.selectedIndex>-1){var P=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];C=this.select.options[this.select.selectedIndex],this.selectItem(P)}else this.selectItem(null);var S=C!=null&&C!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),E}();n.default=x},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),l=J(o),u=i(5),h=J(u),d=i(4),g=J(d),m=i(16),p=J(m),y=i(25),b=J(y),x=i(24),E=J(x),w=i(35),C=J(w),P=i(6),S=J(P),O=i(22),M=J(O),R=i(7),A=J(R),T=i(55),I=J(T),D=i(42),N=J(D),L=i(23),V=J(L);function J(re){return re&&re.__esModule?re:{default:re}}h.default.register({"blots/block":g.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":b.default,"blots/cursor":E.default,"blots/embed":C.default,"blots/inline":S.default,"blots/scroll":M.default,"blots/text":A.default,"modules/clipboard":I.default,"modules/history":N.default,"modules/keyboard":V.default}),l.default.register(g.default,p.default,E.default,S.default,M.default,A.default),n.default=h.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(1),l=function(){function u(h){this.domNode=h,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(u.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),u.create=function(h){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?d=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?d=document.createElement(h):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},u.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},u.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return o.create(h)},u.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},u.prototype.deleteAt=function(h,d){var g=this.isolate(h,d);g.remove()},u.prototype.formatAt=function(h,d,g,m){var p=this.isolate(h,d);if(o.query(g,o.Scope.BLOT)!=null&&m)p.wrap(g,m);else if(o.query(g,o.Scope.ATTRIBUTE)!=null){var y=o.create(this.statics.scope);p.wrap(y),y.format(g,m)}},u.prototype.insertAt=function(h,d,g){var m=g==null?o.create("text",d):o.create(d,g),p=this.split(h);this.parent.insertBefore(m,p)},u.prototype.insertInto=function(h,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var g=null;h.children.insertBefore(this,d),d!=null&&(g=d.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=g)&&h.domNode.insertBefore(this.domNode,g),this.parent=h,this.attach()},u.prototype.isolate=function(h,d){var g=this.split(h);return g.split(d),g},u.prototype.length=function(){return 1},u.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},u.prototype.optimize=function(h){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},u.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},u.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},u.prototype.replaceWith=function(h,d){var g=typeof h=="string"?o.create(h,d):h;return g.replace(this),g},u.prototype.split=function(h,d){return h===0?this:this.next},u.prototype.update=function(h,d){},u.prototype.wrap=function(h,d){var g=typeof h=="string"?o.create(h,d):h;return this.parent!=null&&this.parent.insertBefore(g,this.next),g.appendChild(this),g},u.blotName="abstract",u}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(12),l=i(32),u=i(33),h=i(1),d=function(){function g(m){this.attributes={},this.domNode=m,this.build()}return g.prototype.attribute=function(m,p){p?m.add(this.domNode,p)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},g.prototype.build=function(){var m=this;this.attributes={};var p=o.default.keys(this.domNode),y=l.default.keys(this.domNode),b=u.default.keys(this.domNode);p.concat(y).concat(b).forEach(function(x){var E=h.query(x,h.Scope.ATTRIBUTE);E instanceof o.default&&(m.attributes[E.attrName]=E)})},g.prototype.copy=function(m){var p=this;Object.keys(this.attributes).forEach(function(y){var b=p.attributes[y].value(p.domNode);m.format(y,b)})},g.prototype.move=function(m){var p=this;this.copy(m),Object.keys(this.attributes).forEach(function(y){p.attributes[y].remove(p.domNode)}),this.attributes={}},g.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(p,y){return p[y]=m.attributes[y].value(m.domNode),p},{})},g}();n.default=d},function(t,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var p in m)m.hasOwnProperty(p)&&(g[p]=m[p])};return function(g,m){d(g,m);function p(){this.constructor=g}g.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function u(d,g){var m=d.getAttribute("class")||"";return m.split(/\s+/).filter(function(p){return p.indexOf(g+"-")===0})}var h=function(d){o(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},g.prototype.add=function(m,p){return this.canAdd(m,p)?(this.remove(m),m.classList.add(this.keyName+"-"+p),!0):!1},g.prototype.remove=function(m){var p=u(m,this.keyName);p.forEach(function(y){m.classList.remove(y)}),m.classList.length===0&&m.removeAttribute("class")},g.prototype.value=function(m){var p=u(m,this.keyName)[0]||"",y=p.slice(this.keyName.length+1);return this.canAdd(m,y)?y:""},g}(l.default);n.default=h},function(t,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var p in m)m.hasOwnProperty(p)&&(g[p]=m[p])};return function(g,m){d(g,m);function p(){this.constructor=g}g.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function u(d){var g=d.split("-"),m=g.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return g[0]+m}var h=function(d){o(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(p){var y=p.split(":");return y[0].trim()})},g.prototype.add=function(m,p){return this.canAdd(m,p)?(m.style[u(this.keyName)]=p,!0):!1},g.prototype.remove=function(m){m.style[u(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},g.prototype.value=function(m){var p=m.style[u(this.keyName)];return this.canAdd(m,p)?p:""},g}(l.default);n.default=h},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function h(d,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,g,m){return g&&h(d.prototype,g),m&&h(d,m),d}}();function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(d,g){l(this,h),this.quill=d,this.options=g,this.modules={}}return o(h,[{key:"init",value:function(){var g=this;Object.keys(this.options.modules).forEach(function(m){g.modules[m]==null&&g.addModule(m)})}},{key:"addModule",value:function(g){var m=this.quill.constructor.import("modules/"+g);return this.modules[g]=new m(this.quill,this.options.modules[g]||{}),this.modules[g]}}]),h}();u.DEFAULTS={modules:{}},u.themes={default:u},n.default=u},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function w(C,P){for(var S=0;S<P.length;S++){var O=P[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,P,S){return P&&w(C.prototype,P),S&&w(C,S),C}}(),l=function w(C,P,S){C===null&&(C=Function.prototype);var O=Object.getOwnPropertyDescriptor(C,P);if(O===void 0){var M=Object.getPrototypeOf(C);return M===null?void 0:w(M,P,S)}else{if("value"in O)return O.value;var R=O.get;return R===void 0?void 0:R.call(S)}},u=i(0),h=m(u),d=i(7),g=m(d);function m(w){return w&&w.__esModule?w:{default:w}}function p(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")}function y(w,C){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:w}function b(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);w.prototype=Object.create(C&&C.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(w,C):w.__proto__=C)}var x="\uFEFF",E=function(w){b(C,w);function C(P){p(this,C);var S=y(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,P));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(O){S.contentNode.appendChild(O)}),S.leftGuard=document.createTextNode(x),S.rightGuard=document.createTextNode(x),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return o(C,[{key:"index",value:function(S,O){return S===this.leftGuard?0:S===this.rightGuard?1:l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"index",this).call(this,S,O)}},{key:"restore",value:function(S){var O=void 0,M=void 0,R=S.data.split(x).join("");if(S===this.leftGuard)if(this.prev instanceof g.default){var A=this.prev.length();this.prev.insertAt(A,R),O={startNode:this.prev.domNode,startOffset:A+R.length}}else M=document.createTextNode(R),this.parent.insertBefore(h.default.create(M),this),O={startNode:M,startOffset:R.length};else S===this.rightGuard&&(this.next instanceof g.default?(this.next.insertAt(0,R),O={startNode:this.next.domNode,startOffset:R.length}):(M=document.createTextNode(R),this.parent.insertBefore(h.default.create(M),this.next),O={startNode:M,startOffset:R.length}));return S.data=x,O}},{key:"update",value:function(S,O){var M=this;S.forEach(function(R){if(R.type==="characterData"&&(R.target===M.leftGuard||R.target===M.rightGuard)){var A=M.restore(R.target);A&&(O.range=A)}})}}]),C}(h.default.Embed);n.default=E},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var o=i(0),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}var h={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new l.default.Attributor.Attribute("align","align",h),g=new l.default.Attributor.Class("align","ql-align",h),m=new l.default.Attributor.Style("align","text-align",h);n.AlignAttribute=d,n.AlignClass=g,n.AlignStyle=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var o=i(0),l=h(o),u=i(26);function h(m){return m&&m.__esModule?m:{default:m}}var d=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),g=new u.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var o=i(0),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}var h={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},d=new l.default.Attributor.Attribute("direction","dir",h),g=new l.default.Attributor.Class("direction","ql-direction",h),m=new l.default.Attributor.Style("direction","direction",h);n.DirectionAttribute=d,n.DirectionClass=g,n.DirectionStyle=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var o=function(){function w(C,P){for(var S=0;S<P.length;S++){var O=P[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,P,S){return P&&w(C.prototype,P),S&&w(C,S),C}}(),l=function w(C,P,S){C===null&&(C=Function.prototype);var O=Object.getOwnPropertyDescriptor(C,P);if(O===void 0){var M=Object.getPrototypeOf(C);return M===null?void 0:w(M,P,S)}else{if("value"in O)return O.value;var R=O.get;return R===void 0?void 0:R.call(S)}},u=i(0),h=d(u);function d(w){return w&&w.__esModule?w:{default:w}}function g(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")}function m(w,C){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:w}function p(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);w.prototype=Object.create(C&&C.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(w,C):w.__proto__=C)}var y={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new h.default.Attributor.Class("font","ql-font",y),x=function(w){p(C,w);function C(){return g(this,C),m(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return o(C,[{key:"value",value:function(S){return l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),C}(h.default.Attributor.Style),E=new x("font","font-family",y);n.FontStyle=E,n.FontClass=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var o=i(0),l=u(o);function u(g){return g&&g.__esModule?g:{default:g}}var h=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=h,n.SizeStyle=d},function(t,n,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var o=function(){function P(S,O){for(var M=0;M<O.length;M++){var R=O[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(S,R.key,R)}}return function(S,O,M){return O&&P(S.prototype,O),M&&P(S,M),S}}(),l=i(0),u=p(l),h=i(5),d=p(h),g=i(9),m=p(g);function p(P){return P&&P.__esModule?P:{default:P}}function y(P,S){if(!(P instanceof S))throw new TypeError("Cannot call a class as a function")}function b(P,S){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:P}function x(P,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);P.prototype=Object.create(S&&S.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(P,S):P.__proto__=S)}var E=function(P){x(S,P);function S(O,M){y(this,S);var R=b(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,O,M));return R.lastRecorded=0,R.ignoreChange=!1,R.clear(),R.quill.on(d.default.events.EDITOR_CHANGE,function(A,T,I,D){A!==d.default.events.TEXT_CHANGE||R.ignoreChange||(!R.options.userOnly||D===d.default.sources.USER?R.record(T,I):R.transform(T))}),R.quill.keyboard.addBinding({key:"Z",shortKey:!0},R.undo.bind(R)),R.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},R.redo.bind(R)),/Win/i.test(navigator.platform)&&R.quill.keyboard.addBinding({key:"Y",shortKey:!0},R.redo.bind(R)),R}return o(S,[{key:"change",value:function(M,R){if(this.stack[M].length!==0){var A=this.stack[M].pop();this.stack[R].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[M],d.default.sources.USER),this.ignoreChange=!1;var T=C(A[M]);this.quill.setSelection(T)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(M,R){if(M.ops.length!==0){this.stack.redo=[];var A=this.quill.getContents().diff(R),T=Date.now();if(this.lastRecorded+this.options.delay>T&&this.stack.undo.length>0){var I=this.stack.undo.pop();A=A.compose(I.undo),M=I.redo.compose(M)}else this.lastRecorded=T;this.stack.undo.push({redo:M,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(M){this.stack.undo.forEach(function(R){R.undo=M.transform(R.undo,!0),R.redo=M.transform(R.redo,!0)}),this.stack.redo.forEach(function(R){R.undo=M.transform(R.undo,!0),R.redo=M.transform(R.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(m.default);E.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function w(P){var S=P.ops[P.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(O){return u.default.query(O,u.default.Scope.BLOCK)!=null}):!1}function C(P){var S=P.reduce(function(M,R){return M+=R.delete||0,M},0),O=P.length()-S;return w(P)&&(O-=1),O}n.default=E,n.getLastChangeIndex=C},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var o=function(){function U(H,ne){for(var ee=0;ee<ne.length;ee++){var $=ne[ee];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(H,$.key,$)}}return function(H,ne,ee){return ne&&U(H.prototype,ne),ee&&U(H,ee),H}}(),l=function U(H,ne,ee){H===null&&(H=Function.prototype);var $=Object.getOwnPropertyDescriptor(H,ne);if($===void 0){var Y=Object.getPrototypeOf(H);return Y===null?void 0:U(Y,ne,ee)}else{if("value"in $)return $.value;var Q=$.get;return Q===void 0?void 0:Q.call(ee)}},u=i(3),h=T(u),d=i(2),g=T(d),m=i(8),p=T(m),y=i(23),b=T(y),x=i(34),E=T(x),w=i(59),C=T(w),P=i(60),S=T(P),O=i(28),M=T(O),R=i(61),A=T(R);function T(U){return U&&U.__esModule?U:{default:U}}function I(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}function D(U,H){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:U}function N(U,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);U.prototype=Object.create(H&&H.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(U,H):U.__proto__=H)}var L=[!1,"center","right","justify"],V=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],J=[!1,"serif","monospace"],re=["1","2","3",!1],Z=["small",!1,"large","huge"],ie=function(U){N(H,U);function H(ne,ee){I(this,H);var $=D(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,ne,ee)),Y=function Q(te){if(!document.body.contains(ne.root))return document.body.removeEventListener("click",Q);$.tooltip!=null&&!$.tooltip.root.contains(te.target)&&document.activeElement!==$.tooltip.textbox&&!$.quill.hasFocus()&&$.tooltip.hide(),$.pickers!=null&&$.pickers.forEach(function(ae){ae.container.contains(te.target)||ae.close()})};return ne.emitter.listenDOM("click",document.body,Y),$}return o(H,[{key:"addModule",value:function(ee){var $=l(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"addModule",this).call(this,ee);return ee==="toolbar"&&this.extendToolbar($),$}},{key:"buildButtons",value:function(ee,$){ee.forEach(function(Y){var Q=Y.getAttribute("class")||"";Q.split(/\s+/).forEach(function(te){if(te.startsWith("ql-")&&(te=te.slice(3),$[te]!=null))if(te==="direction")Y.innerHTML=$[te][""]+$[te].rtl;else if(typeof $[te]=="string")Y.innerHTML=$[te];else{var ae=Y.value||"";ae!=null&&$[te][ae]&&(Y.innerHTML=$[te][ae])}})})}},{key:"buildPickers",value:function(ee,$){var Y=this;this.pickers=ee.map(function(te){if(te.classList.contains("ql-align"))return te.querySelector("option")==null&&B(te,L),new S.default(te,$.align);if(te.classList.contains("ql-background")||te.classList.contains("ql-color")){var ae=te.classList.contains("ql-background")?"background":"color";return te.querySelector("option")==null&&B(te,V,ae==="background"?"#ffffff":"#000000"),new C.default(te,$[ae])}else return te.querySelector("option")==null&&(te.classList.contains("ql-font")?B(te,J):te.classList.contains("ql-header")?B(te,re):te.classList.contains("ql-size")&&B(te,Z)),new M.default(te)});var Q=function(){Y.pickers.forEach(function(ae){ae.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,Q)}}]),H}(E.default);ie.DEFAULTS=(0,h.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var H=this,ne=this.container.querySelector("input.ql-image[type=file]");ne==null&&(ne=document.createElement("input"),ne.setAttribute("type","file"),ne.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ne.classList.add("ql-image"),ne.addEventListener("change",function(){if(ne.files!=null&&ne.files[0]!=null){var ee=new FileReader;ee.onload=function($){var Y=H.quill.getSelection(!0);H.quill.updateContents(new g.default().retain(Y.index).delete(Y.length).insert({image:$.target.result}),p.default.sources.USER),H.quill.setSelection(Y.index+1,p.default.sources.SILENT),ne.value=""},ee.readAsDataURL(ne.files[0])}}),this.container.appendChild(ne)),ne.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var G=function(U){N(H,U);function H(ne,ee){I(this,H);var $=D(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,ne,ee));return $.textbox=$.root.querySelector('input[type="text"]'),$.listen(),$}return o(H,[{key:"listen",value:function(){var ee=this;this.textbox.addEventListener("keydown",function($){b.default.match($,"enter")?(ee.save(),$.preventDefault()):b.default.match($,"escape")&&(ee.cancel(),$.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),$!=null?this.textbox.value=$:ee!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ee)||""),this.root.setAttribute("data-mode",ee)}},{key:"restoreFocus",value:function(){var ee=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ee}},{key:"save",value:function(){var ee=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var $=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ee,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ee,p.default.sources.USER)),this.quill.root.scrollTop=$;break}case"video":ee=W(ee);case"formula":{if(!ee)break;var Y=this.quill.getSelection(!0);if(Y!=null){var Q=Y.index+Y.length;this.quill.insertEmbed(Q,this.root.getAttribute("data-mode"),ee,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Q+1," ",p.default.sources.USER),this.quill.setSelection(Q+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),H}(A.default);function W(U){var H=U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return H?(H[1]||"https")+"://www.youtube.com/embed/"+H[2]+"?showinfo=0":(H=U.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(H[1]||"https")+"://player.vimeo.com/video/"+H[2]+"/":U}function B(U,H){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H.forEach(function(ee){var $=document.createElement("option");ee===ne?$.setAttribute("selected","selected"):$.setAttribute("value",ee),U.appendChild($)})}n.BaseTooltip=G,n.default=ie},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];this.insertBefore(u[0],null),u.length>1&&this.append.apply(this,u.slice(1))},l.prototype.contains=function(u){for(var h,d=this.iterator();h=d();)if(h===u)return!0;return!1},l.prototype.insertBefore=function(u,h){u&&(u.next=h,h!=null?(u.prev=h.prev,h.prev!=null&&(h.prev.next=u),h.prev=u,h===this.head&&(this.head=u)):this.tail!=null?(this.tail.next=u,u.prev=this.tail,this.tail=u):(u.prev=null,this.head=this.tail=u),this.length+=1)},l.prototype.offset=function(u){for(var h=0,d=this.head;d!=null;){if(d===u)return h;h+=d.length(),d=d.next}return-1},l.prototype.remove=function(u){this.contains(u)&&(u.prev!=null&&(u.prev.next=u.next),u.next!=null&&(u.next.prev=u.prev),u===this.head&&(this.head=u.next),u===this.tail&&(this.tail=u.prev),this.length-=1)},l.prototype.iterator=function(u){return u===void 0&&(u=this.head),function(){var h=u;return u!=null&&(u=u.next),h}},l.prototype.find=function(u,h){h===void 0&&(h=!1);for(var d,g=this.iterator();d=g();){var m=d.length();if(u<m||h&&u===m&&(d.next==null||d.next.length()!==0))return[d,u];u-=m}return[null,0]},l.prototype.forEach=function(u){for(var h,d=this.iterator();h=d();)u(h)},l.prototype.forEachAt=function(u,h,d){if(!(h<=0))for(var g=this.find(u),m=g[0],p=g[1],y,b=u-p,x=this.iterator(m);(y=x())&&b<u+h;){var E=y.length();u>b?d(y,u-b,Math.min(h,b+E-u)):d(y,0,Math.min(E,u+h-b)),b+=E}},l.prototype.map=function(u){return this.reduce(function(h,d){return h.push(u(d)),h},[])},l.prototype.reduce=function(u,h){for(var d,g=this.iterator();d=g();)h=u(h,d);return h},l}();n.default=o},function(t,n,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)y.hasOwnProperty(b)&&(p[b]=y[b])};return function(p,y){m(p,y);function b(){this.constructor=p}p.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(17),u=i(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,g=function(m){o(p,m);function p(y){var b=m.call(this,y)||this;return b.scroll=b,b.observer=new MutationObserver(function(x){b.update(x)}),b.observer.observe(b.domNode,h),b.attach(),b}return p.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(y,b){this.update(),y===0&&b===this.length()?this.children.forEach(function(x){x.remove()}):m.prototype.deleteAt.call(this,y,b)},p.prototype.formatAt=function(y,b,x,E){this.update(),m.prototype.formatAt.call(this,y,b,x,E)},p.prototype.insertAt=function(y,b,x){this.update(),m.prototype.insertAt.call(this,y,b,x)},p.prototype.optimize=function(y,b){var x=this;y===void 0&&(y=[]),b===void 0&&(b={}),m.prototype.optimize.call(this,b);for(var E=[].slice.call(this.observer.takeRecords());E.length>0;)y.push(E.pop());for(var w=function(O,M){M===void 0&&(M=!0),!(O==null||O===x)&&O.domNode.parentNode!=null&&(O.domNode[u.DATA_KEY].mutations==null&&(O.domNode[u.DATA_KEY].mutations=[]),M&&w(O.parent))},C=function(O){O.domNode[u.DATA_KEY]==null||O.domNode[u.DATA_KEY].mutations==null||(O instanceof l.default&&O.children.forEach(C),O.optimize(b))},P=y,S=0;P.length>0;S+=1){if(S>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(P.forEach(function(O){var M=u.find(O.target,!0);M!=null&&(M.domNode===O.target&&(O.type==="childList"?(w(u.find(O.previousSibling,!1)),[].forEach.call(O.addedNodes,function(R){var A=u.find(R,!1);w(A,!1),A instanceof l.default&&A.children.forEach(function(T){w(T,!1)})})):O.type==="attributes"&&w(M.prev)),w(M))}),this.children.forEach(C),P=[].slice.call(this.observer.takeRecords()),E=P.slice();E.length>0;)y.push(E.pop())}},p.prototype.update=function(y,b){var x=this;b===void 0&&(b={}),y=y||this.observer.takeRecords(),y.map(function(E){var w=u.find(E.target,!0);return w==null?null:w.domNode[u.DATA_KEY].mutations==null?(w.domNode[u.DATA_KEY].mutations=[E],w):(w.domNode[u.DATA_KEY].mutations.push(E),null)}).forEach(function(E){E==null||E===x||E.domNode[u.DATA_KEY]==null||E.update(E.domNode[u.DATA_KEY].mutations||[],b)}),this.domNode[u.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,b),this.optimize(y,b)},p.blotName="scroll",p.defaultChild="block",p.scope=u.Scope.BLOCK_BLOT,p.tagName="DIV",p}(l.default);n.default=g},function(t,n,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){g(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),u=i(1);function h(g,m){if(Object.keys(g).length!==Object.keys(m).length)return!1;for(var p in g)if(g[p]!==m[p])return!1;return!0}var d=function(g){o(m,g);function m(){return g!==null&&g.apply(this,arguments)||this}return m.formats=function(p){if(p.tagName!==m.tagName)return g.formats.call(this,p)},m.prototype.format=function(p,y){var b=this;p===this.statics.blotName&&!y?(this.children.forEach(function(x){x instanceof l.default||(x=x.wrap(m.blotName,!0)),b.attributes.copy(x)}),this.unwrap()):g.prototype.format.call(this,p,y)},m.prototype.formatAt=function(p,y,b,x){if(this.formats()[b]!=null||u.query(b,u.Scope.ATTRIBUTE)){var E=this.isolate(p,y);E.format(b,x)}else g.prototype.formatAt.call(this,p,y,b,x)},m.prototype.optimize=function(p){g.prototype.optimize.call(this,p);var y=this.formats();if(Object.keys(y).length===0)return this.unwrap();var b=this.next;b instanceof m&&b.prev===this&&h(y,b.formats())&&(b.moveChildren(this),b.remove())},m.blotName="inline",m.scope=u.Scope.INLINE_BLOT,m.tagName="SPAN",m}(l.default);n.default=d},function(t,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var p in m)m.hasOwnProperty(p)&&(g[p]=m[p])};return function(g,m){d(g,m);function p(){this.constructor=g}g.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),u=i(1),h=function(d){o(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.formats=function(m){var p=u.query(g.blotName).tagName;if(m.tagName!==p)return d.formats.call(this,m)},g.prototype.format=function(m,p){u.query(m,u.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!p?this.replaceWith(g.blotName):d.prototype.format.call(this,m,p))},g.prototype.formatAt=function(m,p,y,b){u.query(y,u.Scope.BLOCK)!=null?this.format(y,b):d.prototype.formatAt.call(this,m,p,y,b)},g.prototype.insertAt=function(m,p,y){if(y==null||u.query(p,u.Scope.INLINE)!=null)d.prototype.insertAt.call(this,m,p,y);else{var b=this.split(m),x=u.create(p,y);b.parent.insertBefore(x,b)}},g.prototype.update=function(m,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,m,p)},g.blotName="block",g.scope=u.Scope.BLOCK_BLOT,g.tagName="P",g}(l.default);n.default=h},function(t,n,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var m in g)g.hasOwnProperty(m)&&(d[m]=g[m])};return function(d,g){h(d,g);function m(){this.constructor=d}d.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),u=function(h){o(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.formats=function(g){},d.prototype.format=function(g,m){h.prototype.formatAt.call(this,0,this.length(),g,m)},d.prototype.formatAt=function(g,m,p,y){g===0&&m===this.length()?this.format(p,y):h.prototype.formatAt.call(this,g,m,p,y)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(l.default);n.default=u},function(t,n,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var p in m)m.hasOwnProperty(p)&&(g[p]=m[p])};return function(g,m){d(g,m);function p(){this.constructor=g}g.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),u=i(1),h=function(d){o(g,d);function g(m){var p=d.call(this,m)||this;return p.text=p.statics.value(p.domNode),p}return g.create=function(m){return document.createTextNode(m)},g.value=function(m){var p=m.data;return p.normalize&&(p=p.normalize()),p},g.prototype.deleteAt=function(m,p){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+p)},g.prototype.index=function(m,p){return this.domNode===m?p:-1},g.prototype.insertAt=function(m,p,y){y==null?(this.text=this.text.slice(0,m)+p+this.text.slice(m),this.domNode.data=this.text):d.prototype.insertAt.call(this,m,p,y)},g.prototype.length=function(){return this.text.length},g.prototype.optimize=function(m){d.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof g&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},g.prototype.position=function(m,p){return[this.domNode,m]},g.prototype.split=function(m,p){if(p===void 0&&(p=!1),!p){if(m===0)return this;if(m===this.length())return this.next}var y=u.create(this.domNode.splitText(m));return this.parent.insertBefore(y,this.next),this.text=this.statics.value(this.domNode),y},g.prototype.update=function(m,p){var y=this;m.some(function(b){return b.type==="characterData"&&b.target===y.domNode})&&(this.text=this.statics.value(this.domNode))},g.prototype.value=function(){return this.text},g.blotName="text",g.scope=u.Scope.INLINE_BLOT,g}(l.default);n.default=h},function(t,n,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(u,h){return arguments.length>1&&!this.contains(u)==!h?h:l.call(this,u)}}String.prototype.startsWith||(String.prototype.startsWith=function(u,h){return h=h||0,this.substr(h,u.length)===u}),String.prototype.endsWith||(String.prototype.endsWith=function(u,h){var d=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>d.length)&&(h=d.length),h-=u.length;var g=d.indexOf(u,h);return g!==-1&&g===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),g=d.length>>>0,m=arguments[1],p,y=0;y<g;y++)if(p=d[y],h.call(m,p,y,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var i=-1,o=1,l=0;function u(S,O,M){if(S==O)return S?[[l,S]]:[];(M<0||S.length<M)&&(M=null);var R=m(S,O),A=S.substring(0,R);S=S.substring(R),O=O.substring(R),R=p(S,O);var T=S.substring(S.length-R);S=S.substring(0,S.length-R),O=O.substring(0,O.length-R);var I=h(S,O);return A&&I.unshift([l,A]),T&&I.push([l,T]),b(I),M!=null&&(I=w(I,M)),I=C(I),I}function h(S,O){var M;if(!S)return[[o,O]];if(!O)return[[i,S]];var R=S.length>O.length?S:O,A=S.length>O.length?O:S,T=R.indexOf(A);if(T!=-1)return M=[[o,R.substring(0,T)],[l,A],[o,R.substring(T+A.length)]],S.length>O.length&&(M[0][0]=M[2][0]=i),M;if(A.length==1)return[[i,S],[o,O]];var I=y(S,O);if(I){var D=I[0],N=I[1],L=I[2],V=I[3],J=I[4],re=u(D,L),Z=u(N,V);return re.concat([[l,J]],Z)}return d(S,O)}function d(S,O){for(var M=S.length,R=O.length,A=Math.ceil((M+R)/2),T=A,I=2*A,D=new Array(I),N=new Array(I),L=0;L<I;L++)D[L]=-1,N[L]=-1;D[T+1]=0,N[T+1]=0;for(var V=M-R,J=V%2!=0,re=0,Z=0,ie=0,G=0,W=0;W<A;W++){for(var B=-W+re;B<=W-Z;B+=2){var U=T+B,H;B==-W||B!=W&&D[U-1]<D[U+1]?H=D[U+1]:H=D[U-1]+1;for(var ne=H-B;H<M&&ne<R&&S.charAt(H)==O.charAt(ne);)H++,ne++;if(D[U]=H,H>M)Z+=2;else if(ne>R)re+=2;else if(J){var ee=T+V-B;if(ee>=0&&ee<I&&N[ee]!=-1){var $=M-N[ee];if(H>=$)return g(S,O,H,ne)}}}for(var Y=-W+ie;Y<=W-G;Y+=2){var ee=T+Y,$;Y==-W||Y!=W&&N[ee-1]<N[ee+1]?$=N[ee+1]:$=N[ee-1]+1;for(var Q=$-Y;$<M&&Q<R&&S.charAt(M-$-1)==O.charAt(R-Q-1);)$++,Q++;if(N[ee]=$,$>M)G+=2;else if(Q>R)ie+=2;else if(!J){var U=T+V-Y;if(U>=0&&U<I&&D[U]!=-1){var H=D[U],ne=T+H-U;if($=M-$,H>=$)return g(S,O,H,ne)}}}}return[[i,S],[o,O]]}function g(S,O,M,R){var A=S.substring(0,M),T=O.substring(0,R),I=S.substring(M),D=O.substring(R),N=u(A,T),L=u(I,D);return N.concat(L)}function m(S,O){if(!S||!O||S.charAt(0)!=O.charAt(0))return 0;for(var M=0,R=Math.min(S.length,O.length),A=R,T=0;M<A;)S.substring(T,A)==O.substring(T,A)?(M=A,T=M):R=A,A=Math.floor((R-M)/2+M);return A}function p(S,O){if(!S||!O||S.charAt(S.length-1)!=O.charAt(O.length-1))return 0;for(var M=0,R=Math.min(S.length,O.length),A=R,T=0;M<A;)S.substring(S.length-A,S.length-T)==O.substring(O.length-A,O.length-T)?(M=A,T=M):R=A,A=Math.floor((R-M)/2+M);return A}function y(S,O){var M=S.length>O.length?S:O,R=S.length>O.length?O:S;if(M.length<4||R.length*2<M.length)return null;function A(Z,ie,G){for(var W=Z.substring(G,G+Math.floor(Z.length/4)),B=-1,U="",H,ne,ee,$;(B=ie.indexOf(W,B+1))!=-1;){var Y=m(Z.substring(G),ie.substring(B)),Q=p(Z.substring(0,G),ie.substring(0,B));U.length<Q+Y&&(U=ie.substring(B-Q,B)+ie.substring(B,B+Y),H=Z.substring(0,G-Q),ne=Z.substring(G+Y),ee=ie.substring(0,B-Q),$=ie.substring(B+Y))}return U.length*2>=Z.length?[H,ne,ee,$,U]:null}var T=A(M,R,Math.ceil(M.length/4)),I=A(M,R,Math.ceil(M.length/2)),D;if(!T&&!I)return null;I?T?D=T[4].length>I[4].length?T:I:D=I:D=T;var N,L,V,J;S.length>O.length?(N=D[0],L=D[1],V=D[2],J=D[3]):(V=D[0],J=D[1],N=D[2],L=D[3]);var re=D[4];return[N,L,V,J,re]}function b(S){S.push([l,""]);for(var O=0,M=0,R=0,A="",T="",I;O<S.length;)switch(S[O][0]){case o:R++,T+=S[O][1],O++;break;case i:M++,A+=S[O][1],O++;break;case l:M+R>1?(M!==0&&R!==0&&(I=m(T,A),I!==0&&(O-M-R>0&&S[O-M-R-1][0]==l?S[O-M-R-1][1]+=T.substring(0,I):(S.splice(0,0,[l,T.substring(0,I)]),O++),T=T.substring(I),A=A.substring(I)),I=p(T,A),I!==0&&(S[O][1]=T.substring(T.length-I)+S[O][1],T=T.substring(0,T.length-I),A=A.substring(0,A.length-I))),M===0?S.splice(O-R,M+R,[o,T]):R===0?S.splice(O-M,M+R,[i,A]):S.splice(O-M-R,M+R,[i,A],[o,T]),O=O-M-R+(M?1:0)+(R?1:0)+1):O!==0&&S[O-1][0]==l?(S[O-1][1]+=S[O][1],S.splice(O,1)):O++,R=0,M=0,A="",T="";break}S[S.length-1][1]===""&&S.pop();var D=!1;for(O=1;O<S.length-1;)S[O-1][0]==l&&S[O+1][0]==l&&(S[O][1].substring(S[O][1].length-S[O-1][1].length)==S[O-1][1]?(S[O][1]=S[O-1][1]+S[O][1].substring(0,S[O][1].length-S[O-1][1].length),S[O+1][1]=S[O-1][1]+S[O+1][1],S.splice(O-1,1),D=!0):S[O][1].substring(0,S[O+1][1].length)==S[O+1][1]&&(S[O-1][1]+=S[O+1][1],S[O][1]=S[O][1].substring(S[O+1][1].length)+S[O+1][1],S.splice(O+1,1),D=!0)),O++;D&&b(S)}var x=u;x.INSERT=o,x.DELETE=i,x.EQUAL=l,t.exports=x;function E(S,O){if(O===0)return[l,S];for(var M=0,R=0;R<S.length;R++){var A=S[R];if(A[0]===i||A[0]===l){var T=M+A[1].length;if(O===T)return[R+1,S];if(O<T){S=S.slice();var I=O-M,D=[A[0],A[1].slice(0,I)],N=[A[0],A[1].slice(I)];return S.splice(R,1,D,N),[R+1,S]}else M=T}}throw new Error("cursor_pos is out of bounds!")}function w(S,O){var M=E(S,O),R=M[1],A=M[0],T=R[A],I=R[A+1];if(T==null)return S;if(T[0]!==l)return S;if(I!=null&&T[1]+I[1]===I[1]+T[1])return R.splice(A,2,I,T),P(R,A,2);if(I!=null&&I[1].indexOf(T[1])===0){R.splice(A,2,[I[0],T[1]],[0,T[1]]);var D=I[1].slice(T[1].length);return D.length>0&&R.splice(A+2,0,[I[0],D]),P(R,A,3)}else return S}function C(S){for(var O=!1,M=function(I){return I.charCodeAt(0)>=56320&&I.charCodeAt(0)<=57343},R=function(I){return I.charCodeAt(I.length-1)>=55296&&I.charCodeAt(I.length-1)<=56319},A=2;A<S.length;A+=1)S[A-2][0]===l&&R(S[A-2][1])&&S[A-1][0]===i&&M(S[A-1][1])&&S[A][0]===o&&M(S[A][1])&&(O=!0,S[A-1][1]=S[A-2][1].slice(-1)+S[A-1][1],S[A][1]=S[A-2][1].slice(-1)+S[A][1],S[A-2][1]=S[A-2][1].slice(0,-1));if(!O)return S;for(var T=[],A=0;A<S.length;A+=1)S[A][1].length>0&&T.push(S[A]);return T}function P(S,O,M){for(var R=O+M-1;R>=0&&R>=O-1;R--)if(R+1<S.length){var A=S[R],T=S[R+1];A[0]===T[1]&&S.splice(R,2,[A[0],A[1]+T[1]])}return S}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(o){var l=[];for(var u in o)l.push(u);return l}},function(t,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=i?o:l,n.supported=o;function o(u){return Object.prototype.toString.call(u)=="[object Arguments]"}n.unsupported=l;function l(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Object.prototype.hasOwnProperty.call(u,"callee")&&!Object.prototype.propertyIsEnumerable.call(u,"callee")||!1}},function(t,n){var i=Object.prototype.hasOwnProperty,o="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(o=!1));function u(d,g,m){this.fn=d,this.context=g,this.once=m||!1}function h(){this._events=new l,this._eventsCount=0}h.prototype.eventNames=function(){var g=[],m,p;if(this._eventsCount===0)return g;for(p in m=this._events)i.call(m,p)&&g.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},h.prototype.listeners=function(g,m){var p=o?o+g:g,y=this._events[p];if(m)return!!y;if(!y)return[];if(y.fn)return[y.fn];for(var b=0,x=y.length,E=new Array(x);b<x;b++)E[b]=y[b].fn;return E},h.prototype.emit=function(g,m,p,y,b,x){var E=o?o+g:g;if(!this._events[E])return!1;var w=this._events[E],C=arguments.length,P,S;if(w.fn){switch(w.once&&this.removeListener(g,w.fn,void 0,!0),C){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,p),!0;case 4:return w.fn.call(w.context,m,p,y),!0;case 5:return w.fn.call(w.context,m,p,y,b),!0;case 6:return w.fn.call(w.context,m,p,y,b,x),!0}for(S=1,P=new Array(C-1);S<C;S++)P[S-1]=arguments[S];w.fn.apply(w.context,P)}else{var O=w.length,M;for(S=0;S<O;S++)switch(w[S].once&&this.removeListener(g,w[S].fn,void 0,!0),C){case 1:w[S].fn.call(w[S].context);break;case 2:w[S].fn.call(w[S].context,m);break;case 3:w[S].fn.call(w[S].context,m,p);break;case 4:w[S].fn.call(w[S].context,m,p,y);break;default:if(!P)for(M=1,P=new Array(C-1);M<C;M++)P[M-1]=arguments[M];w[S].fn.apply(w[S].context,P)}}return!0},h.prototype.on=function(g,m,p){var y=new u(m,p||this),b=o?o+g:g;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],y]:this._events[b].push(y):(this._events[b]=y,this._eventsCount++),this},h.prototype.once=function(g,m,p){var y=new u(m,p||this,!0),b=o?o+g:g;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],y]:this._events[b].push(y):(this._events[b]=y,this._eventsCount++),this},h.prototype.removeListener=function(g,m,p,y){var b=o?o+g:g;if(!this._events[b])return this;if(!m)return--this._eventsCount===0?this._events=new l:delete this._events[b],this;var x=this._events[b];if(x.fn)x.fn===m&&(!y||x.once)&&(!p||x.context===p)&&(--this._eventsCount===0?this._events=new l:delete this._events[b]);else{for(var E=0,w=[],C=x.length;E<C;E++)(x[E].fn!==m||y&&!x[E].once||p&&x[E].context!==p)&&w.push(x[E]);w.length?this._events[b]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new l:delete this._events[b]}return this},h.prototype.removeAllListeners=function(g){var m;return g?(m=o?o+g:g,this._events[m]&&(--this._eventsCount===0?this._events=new l:delete this._events[m])):(this._events=new l,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=o,h.EventEmitter=h,typeof t<"u"&&(t.exports=h)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},l=function(){function ue(fe,Ee){var Te=[],ye=!0,$e=!1,Le=void 0;try{for(var ze=fe[Symbol.iterator](),Ke;!(ye=(Ke=ze.next()).done)&&(Te.push(Ke.value),!(Ee&&Te.length===Ee));ye=!0);}catch(nt){$e=!0,Le=nt}finally{try{!ye&&ze.return&&ze.return()}finally{if($e)throw Le}}return Te}return function(fe,Ee){if(Array.isArray(fe))return fe;if(Symbol.iterator in Object(fe))return ue(fe,Ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function ue(fe,Ee){for(var Te=0;Te<Ee.length;Te++){var ye=Ee[Te];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(fe,ye.key,ye)}}return function(fe,Ee,Te){return Ee&&ue(fe.prototype,Ee),Te&&ue(fe,Te),fe}}(),h=i(3),d=N(h),g=i(2),m=N(g),p=i(0),y=N(p),b=i(5),x=N(b),E=i(10),w=N(E),C=i(9),P=N(C),S=i(36),O=i(37),M=i(13),R=N(M),A=i(26),T=i(38),I=i(39),D=i(40);function N(ue){return ue&&ue.__esModule?ue:{default:ue}}function L(ue,fe,Ee){return fe in ue?Object.defineProperty(ue,fe,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):ue[fe]=Ee,ue}function V(ue,fe){if(!(ue instanceof fe))throw new TypeError("Cannot call a class as a function")}function J(ue,fe){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:ue}function re(ue,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);ue.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,fe):ue.__proto__=fe)}var Z=(0,w.default)("quill:clipboard"),ie="__ql-matcher",G=[[Node.TEXT_NODE,Ze],[Node.TEXT_NODE,Pe],["br",ge],[Node.ELEMENT_NODE,Pe],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,Ne],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,Fe],["li",Re],["b",Q.bind(Q,"bold")],["i",Q.bind(Q,"italic")],["style",Ce]],W=[S.AlignAttribute,T.DirectionAttribute].reduce(function(ue,fe){return ue[fe.keyName]=fe,ue},{}),B=[S.AlignStyle,O.BackgroundStyle,A.ColorStyle,T.DirectionStyle,I.FontStyle,D.SizeStyle].reduce(function(ue,fe){return ue[fe.keyName]=fe,ue},{}),U=function(ue){re(fe,ue);function fe(Ee,Te){V(this,fe);var ye=J(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,Ee,Te));return ye.quill.root.addEventListener("paste",ye.onPaste.bind(ye)),ye.container=ye.quill.addContainer("ql-clipboard"),ye.container.setAttribute("contenteditable",!0),ye.container.setAttribute("tabindex",-1),ye.matchers=[],G.concat(ye.options.matchers).forEach(function($e){var Le=l($e,2),ze=Le[0],Ke=Le[1];!Te.matchVisual&&Ke===Ne||ye.addMatcher(ze,Ke)}),ye}return u(fe,[{key:"addMatcher",value:function(Te,ye){this.matchers.push([Te,ye])}},{key:"convert",value:function(Te){if(typeof Te=="string")return this.container.innerHTML=Te.replace(/\>\r?\n +\</g,"><"),this.convert();var ye=this.quill.getFormat(this.quill.selection.savedRange.index);if(ye[R.default.blotName]){var $e=this.container.innerText;return this.container.innerHTML="",new m.default().insert($e,L({},R.default.blotName,ye[R.default.blotName]))}var Le=this.prepareMatching(),ze=l(Le,2),Ke=ze[0],nt=ze[1],it=Y(this.container,Ke,nt);return ee(it,`
`)&&it.ops[it.ops.length-1].attributes==null&&(it=it.compose(new m.default().retain(it.length()-1).delete(1))),Z.log("convert",this.container.innerHTML,it),this.container.innerHTML="",it}},{key:"dangerouslyPasteHTML",value:function(Te,ye){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof Te=="string")this.quill.setContents(this.convert(Te),ye),this.quill.setSelection(0,x.default.sources.SILENT);else{var Le=this.convert(ye);this.quill.updateContents(new m.default().retain(Te).concat(Le),$e),this.quill.setSelection(Te+Le.length(),x.default.sources.SILENT)}}},{key:"onPaste",value:function(Te){var ye=this;if(!(Te.defaultPrevented||!this.quill.isEnabled())){var $e=this.quill.getSelection(),Le=new m.default().retain($e.index),ze=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(x.default.sources.SILENT),setTimeout(function(){Le=Le.concat(ye.convert()).delete($e.length),ye.quill.updateContents(Le,x.default.sources.USER),ye.quill.setSelection(Le.length()-$e.length,x.default.sources.SILENT),ye.quill.scrollingContainer.scrollTop=ze,ye.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Te=this,ye=[],$e=[];return this.matchers.forEach(function(Le){var ze=l(Le,2),Ke=ze[0],nt=ze[1];switch(Ke){case Node.TEXT_NODE:$e.push(nt);break;case Node.ELEMENT_NODE:ye.push(nt);break;default:[].forEach.call(Te.container.querySelectorAll(Ke),function(it){it[ie]=it[ie]||[],it[ie].push(nt)});break}}),[ye,$e]}}]),fe}(P.default);U.DEFAULTS={matchers:[],matchVisual:!0};function H(ue,fe,Ee){return(typeof fe>"u"?"undefined":o(fe))==="object"?Object.keys(fe).reduce(function(Te,ye){return H(Te,ye,fe[ye])},ue):ue.reduce(function(Te,ye){return ye.attributes&&ye.attributes[fe]?Te.push(ye):Te.insert(ye.insert,(0,d.default)({},L({},fe,Ee),ye.attributes))},new m.default)}function ne(ue){if(ue.nodeType!==Node.ELEMENT_NODE)return{};var fe="__ql-computed-style";return ue[fe]||(ue[fe]=window.getComputedStyle(ue))}function ee(ue,fe){for(var Ee="",Te=ue.ops.length-1;Te>=0&&Ee.length<fe.length;--Te){var ye=ue.ops[Te];if(typeof ye.insert!="string")break;Ee=ye.insert+Ee}return Ee.slice(-1*fe.length)===fe}function $(ue){if(ue.childNodes.length===0)return!1;var fe=ne(ue);return["block","list-item"].indexOf(fe.display)>-1}function Y(ue,fe,Ee){return ue.nodeType===ue.TEXT_NODE?Ee.reduce(function(Te,ye){return ye(ue,Te)},new m.default):ue.nodeType===ue.ELEMENT_NODE?[].reduce.call(ue.childNodes||[],function(Te,ye){var $e=Y(ye,fe,Ee);return ye.nodeType===ue.ELEMENT_NODE&&($e=fe.reduce(function(Le,ze){return ze(ye,Le)},$e),$e=(ye[ie]||[]).reduce(function(Le,ze){return ze(ye,Le)},$e)),Te.concat($e)},new m.default):new m.default}function Q(ue,fe,Ee){return H(Ee,ue,!0)}function te(ue,fe){var Ee=y.default.Attributor.Attribute.keys(ue),Te=y.default.Attributor.Class.keys(ue),ye=y.default.Attributor.Style.keys(ue),$e={};return Ee.concat(Te).concat(ye).forEach(function(Le){var ze=y.default.query(Le,y.default.Scope.ATTRIBUTE);ze!=null&&($e[ze.attrName]=ze.value(ue),$e[ze.attrName])||(ze=W[Le],ze!=null&&(ze.attrName===Le||ze.keyName===Le)&&($e[ze.attrName]=ze.value(ue)||void 0),ze=B[Le],ze!=null&&(ze.attrName===Le||ze.keyName===Le)&&(ze=B[Le],$e[ze.attrName]=ze.value(ue)||void 0))}),Object.keys($e).length>0&&(fe=H(fe,$e)),fe}function ae(ue,fe){var Ee=y.default.query(ue);if(Ee==null)return fe;if(Ee.prototype instanceof y.default.Embed){var Te={},ye=Ee.value(ue);ye!=null&&(Te[Ee.blotName]=ye,fe=new m.default().insert(Te,Ee.formats(ue)))}else typeof Ee.formats=="function"&&(fe=H(fe,Ee.blotName,Ee.formats(ue)));return fe}function ge(ue,fe){return ee(fe,`
`)||fe.insert(`
`),fe}function Ce(){return new m.default}function Re(ue,fe){var Ee=y.default.query(ue);if(Ee==null||Ee.blotName!=="list-item"||!ee(fe,`
`))return fe;for(var Te=-1,ye=ue.parentNode;!ye.classList.contains("ql-clipboard");)(y.default.query(ye)||{}).blotName==="list"&&(Te+=1),ye=ye.parentNode;return Te<=0?fe:fe.compose(new m.default().retain(fe.length()-1).retain(1,{indent:Te}))}function Pe(ue,fe){return ee(fe,`
`)||($(ue)||fe.length()>0&&ue.nextSibling&&$(ue.nextSibling))&&fe.insert(`
`),fe}function Ne(ue,fe){if($(ue)&&ue.nextElementSibling!=null&&!ee(fe,`

`)){var Ee=ue.offsetHeight+parseFloat(ne(ue).marginTop)+parseFloat(ne(ue).marginBottom);ue.nextElementSibling.offsetTop>ue.offsetTop+Ee*1.5&&fe.insert(`
`)}return fe}function Fe(ue,fe){var Ee={},Te=ue.style||{};return Te.fontStyle&&ne(ue).fontStyle==="italic"&&(Ee.italic=!0),Te.fontWeight&&(ne(ue).fontWeight.startsWith("bold")||parseInt(ne(ue).fontWeight)>=700)&&(Ee.bold=!0),Object.keys(Ee).length>0&&(fe=H(fe,Ee)),parseFloat(Te.textIndent||0)>0&&(fe=new m.default().insert("	").concat(fe)),fe}function Ze(ue,fe){var Ee=ue.data;if(ue.parentNode.tagName==="O:P")return fe.insert(Ee.trim());if(Ee.trim().length===0&&ue.parentNode.classList.contains("ql-clipboard"))return fe;if(!ne(ue.parentNode).whiteSpace.startsWith("pre")){var Te=function($e,Le){return Le=Le.replace(/[^\u00a0]/g,""),Le.length<1&&$e?" ":Le};Ee=Ee.replace(/\r\n/g," ").replace(/\n/g," "),Ee=Ee.replace(/\s\s+/g,Te.bind(Te,!0)),(ue.previousSibling==null&&$(ue.parentNode)||ue.previousSibling!=null&&$(ue.previousSibling))&&(Ee=Ee.replace(/^\s+/,Te.bind(Te,!1))),(ue.nextSibling==null&&$(ue.parentNode)||ue.nextSibling!=null&&$(ue.nextSibling))&&(Ee=Ee.replace(/\s+$/,Te.bind(Te,!1)))}return fe.insert(Ee)}n.default=U,n.matchAttributor=te,n.matchBlot=ae,n.matchNewline=Pe,n.matchSpacing=Ne,n.matchText=Ze},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(x,E){for(var w=0;w<E.length;w++){var C=E[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,E,w){return E&&b(x.prototype,E),w&&b(x,w),x}}(),l=function b(x,E,w){x===null&&(x=Function.prototype);var C=Object.getOwnPropertyDescriptor(x,E);if(C===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:b(P,E,w)}else{if("value"in C)return C.value;var S=C.get;return S===void 0?void 0:S.call(w)}},u=i(6),h=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function p(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var y=function(b){p(x,b);function x(){return g(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,[{key:"optimize",value:function(w){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,w),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),x}(h.default);y.blotName="bold",y.tagName=["STRONG","B"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var o=function(){function D(N,L){var V=[],J=!0,re=!1,Z=void 0;try{for(var ie=N[Symbol.iterator](),G;!(J=(G=ie.next()).done)&&(V.push(G.value),!(L&&V.length===L));J=!0);}catch(W){re=!0,Z=W}finally{try{!J&&ie.return&&ie.return()}finally{if(re)throw Z}}return V}return function(N,L){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return D(N,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function D(N,L){for(var V=0;V<L.length;V++){var J=L[V];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,J.key,J)}}return function(N,L,V){return L&&D(N.prototype,L),V&&D(N,V),N}}(),u=i(2),h=w(u),d=i(0),g=w(d),m=i(5),p=w(m),y=i(10),b=w(y),x=i(9),E=w(x);function w(D){return D&&D.__esModule?D:{default:D}}function C(D,N,L){return N in D?Object.defineProperty(D,N,{value:L,enumerable:!0,configurable:!0,writable:!0}):D[N]=L,D}function P(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function S(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:D}function O(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}var M=(0,b.default)("quill:toolbar"),R=function(D){O(N,D);function N(L,V){P(this,N);var J=S(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,V));if(Array.isArray(J.options.container)){var re=document.createElement("div");T(re,J.options.container),L.container.parentNode.insertBefore(re,L.container),J.container=re}else typeof J.options.container=="string"?J.container=document.querySelector(J.options.container):J.container=J.options.container;if(!(J.container instanceof HTMLElement)){var Z;return Z=M.error("Container required for toolbar",J.options),S(J,Z)}return J.container.classList.add("ql-toolbar"),J.controls=[],J.handlers={},Object.keys(J.options.handlers).forEach(function(ie){J.addHandler(ie,J.options.handlers[ie])}),[].forEach.call(J.container.querySelectorAll("button, select"),function(ie){J.attach(ie)}),J.quill.on(p.default.events.EDITOR_CHANGE,function(ie,G){ie===p.default.events.SELECTION_CHANGE&&J.update(G)}),J.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var ie=J.quill.selection.getRange(),G=o(ie,1),W=G[0];J.update(W)}),J}return l(N,[{key:"addHandler",value:function(V,J){this.handlers[V]=J}},{key:"attach",value:function(V){var J=this,re=[].find.call(V.classList,function(ie){return ie.indexOf("ql-")===0});if(re){if(re=re.slice(3),V.tagName==="BUTTON"&&V.setAttribute("type","button"),this.handlers[re]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[re]==null){M.warn("ignoring attaching to disabled format",re,V);return}if(g.default.query(re)==null){M.warn("ignoring attaching to nonexistent format",re,V);return}}var Z=V.tagName==="SELECT"?"change":"click";V.addEventListener(Z,function(ie){var G=void 0;if(V.tagName==="SELECT"){if(V.selectedIndex<0)return;var W=V.options[V.selectedIndex];W.hasAttribute("selected")?G=!1:G=W.value||!1}else V.classList.contains("ql-active")?G=!1:G=V.value||!V.hasAttribute("value"),ie.preventDefault();J.quill.focus();var B=J.quill.selection.getRange(),U=o(B,1),H=U[0];if(J.handlers[re]!=null)J.handlers[re].call(J,G);else if(g.default.query(re).prototype instanceof g.default.Embed){if(G=prompt("Enter "+re),!G)return;J.quill.updateContents(new h.default().retain(H.index).delete(H.length).insert(C({},re,G)),p.default.sources.USER)}else J.quill.format(re,G,p.default.sources.USER);J.update(H)}),this.controls.push([re,V])}}},{key:"update",value:function(V){var J=V==null?{}:this.quill.getFormat(V);this.controls.forEach(function(re){var Z=o(re,2),ie=Z[0],G=Z[1];if(G.tagName==="SELECT"){var W=void 0;if(V==null)W=null;else if(J[ie]==null)W=G.querySelector("option[selected]");else if(!Array.isArray(J[ie])){var B=J[ie];typeof B=="string"&&(B=B.replace(/\"/g,'\\"')),W=G.querySelector('option[value="'+B+'"]')}W==null?(G.value="",G.selectedIndex=-1):W.selected=!0}else if(V==null)G.classList.remove("ql-active");else if(G.hasAttribute("value")){var U=J[ie]===G.getAttribute("value")||J[ie]!=null&&J[ie].toString()===G.getAttribute("value")||J[ie]==null&&!G.getAttribute("value");G.classList.toggle("ql-active",U)}else G.classList.toggle("ql-active",J[ie]!=null)})}}]),N}(E.default);R.DEFAULTS={};function A(D,N,L){var V=document.createElement("button");V.setAttribute("type","button"),V.classList.add("ql-"+N),L!=null&&(V.value=L),D.appendChild(V)}function T(D,N){Array.isArray(N[0])||(N=[N]),N.forEach(function(L){var V=document.createElement("span");V.classList.add("ql-formats"),L.forEach(function(J){if(typeof J=="string")A(V,J);else{var re=Object.keys(J)[0],Z=J[re];Array.isArray(Z)?I(V,re,Z):A(V,re,Z)}}),D.appendChild(V)})}function I(D,N,L){var V=document.createElement("select");V.classList.add("ql-"+N),L.forEach(function(J){var re=document.createElement("option");J!==!1?re.setAttribute("value",J):re.setAttribute("selected","selected"),V.appendChild(re)}),D.appendChild(V)}R.DEFAULTS={container:null,handlers:{clean:function(){var N=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var V=this.quill.getFormat();Object.keys(V).forEach(function(J){g.default.query(J,g.default.Scope.INLINE)!=null&&N.quill.format(J,!1)})}else this.quill.removeFormat(L,p.default.sources.USER)},direction:function(N){var L=this.quill.getFormat().align;N==="rtl"&&L==null?this.quill.format("align","right",p.default.sources.USER):!N&&L==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",N,p.default.sources.USER)},indent:function(N){var L=this.quill.getSelection(),V=this.quill.getFormat(L),J=parseInt(V.indent||0);if(N==="+1"||N==="-1"){var re=N==="+1"?1:-1;V.direction==="rtl"&&(re*=-1),this.quill.format("indent",J+re,p.default.sources.USER)}},link:function(N){N===!0&&(N=prompt("Enter link URL:")),this.quill.format("link",N,p.default.sources.USER)},list:function(N){var L=this.quill.getSelection(),V=this.quill.getFormat(L);N==="check"?V.list==="checked"||V.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",N,p.default.sources.USER)}}},n.default=R,n.addControls=T},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(x,E){for(var w=0;w<E.length;w++){var C=E[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,E,w){return E&&b(x.prototype,E),w&&b(x,w),x}}(),l=function b(x,E,w){x===null&&(x=Function.prototype);var C=Object.getOwnPropertyDescriptor(x,E);if(C===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:b(P,E,w)}else{if("value"in C)return C.value;var S=C.get;return S===void 0?void 0:S.call(w)}},u=i(28),h=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function p(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var y=function(b){p(x,b);function x(E,w){g(this,x);var C=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,E));return C.label.innerHTML=w,C.container.classList.add("ql-color-picker"),[].slice.call(C.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(P){P.classList.add("ql-primary")}),C}return o(x,[{key:"buildItem",value:function(w){var C=l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"buildItem",this).call(this,w);return C.style.backgroundColor=w.getAttribute("value")||"",C}},{key:"selectItem",value:function(w,C){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,w,C);var P=this.label.querySelector(".ql-color-label"),S=w&&w.getAttribute("data-value")||"";P&&(P.tagName==="line"?P.style.stroke=S:P.style.fill=S)}}]),x}(h.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(x,E){for(var w=0;w<E.length;w++){var C=E[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,E,w){return E&&b(x.prototype,E),w&&b(x,w),x}}(),l=function b(x,E,w){x===null&&(x=Function.prototype);var C=Object.getOwnPropertyDescriptor(x,E);if(C===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:b(P,E,w)}else{if("value"in C)return C.value;var S=C.get;return S===void 0?void 0:S.call(w)}},u=i(28),h=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function p(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var y=function(b){p(x,b);function x(E,w){g(this,x);var C=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,E));return C.container.classList.add("ql-icon-picker"),[].forEach.call(C.container.querySelectorAll(".ql-picker-item"),function(P){P.innerHTML=w[P.getAttribute("data-value")||""]}),C.defaultItem=C.container.querySelector(".ql-selected"),C.selectItem(C.defaultItem),C}return o(x,[{key:"selectItem",value:function(w,C){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,w,C),w=w||this.defaultItem,this.label.innerHTML=w.innerHTML}}]),x}(h.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function h(d,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,g,m){return g&&h(d.prototype,g),m&&h(d,m),d}}();function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(d,g){var m=this;l(this,h),this.quill=d,this.boundsContainer=g||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return o(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(g){var m=g.left+g.width/2-this.root.offsetWidth/2,p=g.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var y=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),x=0;if(b.right>y.right&&(x=y.right-b.right,this.root.style.left=m+x+"px"),b.left<y.left&&(x=y.left-b.left,this.root.style.left=m+x+"px"),b.bottom>y.bottom){var E=b.bottom-b.top,w=g.bottom-g.top+E;this.root.style.top=p-w+"px",this.root.classList.add("ql-flip")}return x}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();n.default=u},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function I(D,N){var L=[],V=!0,J=!1,re=void 0;try{for(var Z=D[Symbol.iterator](),ie;!(V=(ie=Z.next()).done)&&(L.push(ie.value),!(N&&L.length===N));V=!0);}catch(G){J=!0,re=G}finally{try{!V&&Z.return&&Z.return()}finally{if(J)throw re}}return L}return function(D,N){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return I(D,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function I(D,N,L){D===null&&(D=Function.prototype);var V=Object.getOwnPropertyDescriptor(D,N);if(V===void 0){var J=Object.getPrototypeOf(D);return J===null?void 0:I(J,N,L)}else{if("value"in V)return V.value;var re=V.get;return re===void 0?void 0:re.call(L)}},u=function(){function I(D,N){for(var L=0;L<N.length;L++){var V=N[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}return function(D,N,L){return N&&I(D.prototype,N),L&&I(D,L),D}}(),h=i(3),d=P(h),g=i(8),m=P(g),p=i(43),y=P(p),b=i(27),x=P(b),E=i(15),w=i(41),C=P(w);function P(I){return I&&I.__esModule?I:{default:I}}function S(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function O(I,D){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:I}function M(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}var R=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=function(I){M(D,I);function D(N,L){S(this,D),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=R);var V=O(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N,L));return V.quill.container.classList.add("ql-snow"),V}return u(D,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),C.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),C.default),this.tooltip=new T(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(V,J){L.handlers.link.call(L,!J.format.link)})}}]),D}(y.default);A.DEFAULTS=(0,d.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(D){if(D){var N=this.quill.getSelection();if(N==null||N.length==0)return;var L=this.quill.getText(N);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var V=this.quill.theme.tooltip;V.edit("link",L)}else this.quill.format("link",!1)}}}}});var T=function(I){M(D,I);function D(N,L){S(this,D);var V=O(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N,L));return V.preview=V.root.querySelector("a.ql-preview"),V}return u(D,[{key:"listen",value:function(){var L=this;l(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(V){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),V.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(V){if(L.linkRange!=null){var J=L.linkRange;L.restoreFocus(),L.quill.formatText(J,"link",!1,m.default.sources.USER),delete L.linkRange}V.preventDefault(),L.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(V,J,re){if(V!=null){if(V.length===0&&re===m.default.sources.USER){var Z=L.quill.scroll.descendant(x.default,V.index),ie=o(Z,2),G=ie[0],W=ie[1];if(G!=null){L.linkRange=new E.Range(V.index-W,G.length());var B=x.default.formats(G.domNode);L.preview.textContent=B,L.preview.setAttribute("href",B),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){l(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),D}(p.BaseTooltip);T.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(29),l=ye(o),u=i(36),h=i(38),d=i(64),g=i(65),m=ye(g),p=i(66),y=ye(p),b=i(67),x=ye(b),E=i(37),w=i(26),C=i(39),P=i(40),S=i(56),O=ye(S),M=i(68),R=ye(M),A=i(27),T=ye(A),I=i(69),D=ye(I),N=i(70),L=ye(N),V=i(71),J=ye(V),re=i(72),Z=ye(re),ie=i(73),G=ye(ie),W=i(13),B=ye(W),U=i(74),H=ye(U),ne=i(75),ee=ye(ne),$=i(57),Y=ye($),Q=i(41),te=ye(Q),ae=i(28),ge=ye(ae),Ce=i(59),Re=ye(Ce),Pe=i(60),Ne=ye(Pe),Fe=i(61),Ze=ye(Fe),ue=i(108),fe=ye(ue),Ee=i(62),Te=ye(Ee);function ye($e){return $e&&$e.__esModule?$e:{default:$e}}l.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":u.AlignClass,"attributors/class/background":E.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":C.FontClass,"attributors/class/size":P.SizeClass,"attributors/style/align":u.AlignStyle,"attributors/style/background":E.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":C.FontStyle,"attributors/style/size":P.SizeStyle},!0),l.default.register({"formats/align":u.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":d.IndentClass,"formats/background":E.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":C.FontClass,"formats/size":P.SizeClass,"formats/blockquote":m.default,"formats/code-block":B.default,"formats/header":y.default,"formats/list":x.default,"formats/bold":O.default,"formats/code":W.Code,"formats/italic":R.default,"formats/link":T.default,"formats/script":D.default,"formats/strike":L.default,"formats/underline":J.default,"formats/image":Z.default,"formats/video":G.default,"formats/list/item":b.ListItem,"modules/formula":H.default,"modules/syntax":ee.default,"modules/toolbar":Y.default,"themes/bubble":fe.default,"themes/snow":Te.default,"ui/icons":te.default,"ui/picker":ge.default,"ui/icon-picker":Ne.default,"ui/color-picker":Re.default,"ui/tooltip":Ze.default},!0),n.default=l.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var o=function(){function x(E,w){for(var C=0;C<w.length;C++){var P=w[C];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(E,P.key,P)}}return function(E,w,C){return w&&x(E.prototype,w),C&&x(E,C),E}}(),l=function x(E,w,C){E===null&&(E=Function.prototype);var P=Object.getOwnPropertyDescriptor(E,w);if(P===void 0){var S=Object.getPrototypeOf(E);return S===null?void 0:x(S,w,C)}else{if("value"in P)return P.value;var O=P.get;return O===void 0?void 0:O.call(C)}},u=i(0),h=d(u);function d(x){return x&&x.__esModule?x:{default:x}}function g(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function m(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function p(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var y=function(x){p(E,x);function E(){return g(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"add",value:function(C,P){if(P==="+1"||P==="-1"){var S=this.value(C)||0;P=P==="+1"?S+1:S-1}return P===0?(this.remove(C),!0):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"add",this).call(this,C,P)}},{key:"canAdd",value:function(C,P){return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,C,P)||l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,C,parseInt(P))}},{key:"value",value:function(C){return parseInt(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,C))||void 0}}]),E}(h.default.Attributor.Class),b=new y("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(4),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function g(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=function(p){g(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);m.blotName="blockquote",m.tagName="blockquote",n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function y(b,x){for(var E=0;E<x.length;E++){var w=x[E];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,x,E){return x&&y(b.prototype,x),E&&y(b,E),b}}(),l=i(4),u=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function g(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var p=function(y){m(b,y);function b(){return d(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,null,[{key:"formats",value:function(E){return this.tagName.indexOf(E.tagName)+1}}]),b}(u.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var o=function(){function S(O,M){for(var R=0;R<M.length;R++){var A=M[R];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,M,R){return M&&S(O.prototype,M),R&&S(O,R),O}}(),l=function S(O,M,R){O===null&&(O=Function.prototype);var A=Object.getOwnPropertyDescriptor(O,M);if(A===void 0){var T=Object.getPrototypeOf(O);return T===null?void 0:S(T,M,R)}else{if("value"in A)return A.value;var I=A.get;return I===void 0?void 0:I.call(R)}},u=i(0),h=y(u),d=i(4),g=y(d),m=i(25),p=y(m);function y(S){return S&&S.__esModule?S:{default:S}}function b(S,O,M){return O in S?Object.defineProperty(S,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[O]=M,S}function x(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function E(S,O){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:S}function w(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(S,O):S.__proto__=O)}var C=function(S){w(O,S);function O(){return x(this,O),E(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"format",value:function(R,A){R===P.blotName&&!A?this.replaceWith(h.default.create(this.statics.scope)):l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,R,A)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(R,A){return this.parent.isolate(this.offset(this.parent),this.length()),R===this.parent.statics.blotName?(this.parent.replaceWith(R,A),this):(this.parent.unwrap(),l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,R,A))}}],[{key:"formats",value:function(R){return R.tagName===this.tagName?void 0:l(O.__proto__||Object.getPrototypeOf(O),"formats",this).call(this,R)}}]),O}(g.default);C.blotName="list-item",C.tagName="LI";var P=function(S){w(O,S),o(O,null,[{key:"create",value:function(R){var A=R==="ordered"?"OL":"UL",T=l(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,A);return(R==="checked"||R==="unchecked")&&T.setAttribute("data-checked",R==="checked"),T}},{key:"formats",value:function(R){if(R.tagName==="OL")return"ordered";if(R.tagName==="UL")return R.hasAttribute("data-checked")?R.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function O(M){x(this,O);var R=E(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M)),A=function(I){if(I.target.parentNode===M){var D=R.statics.formats(M),N=h.default.find(I.target);D==="checked"?N.format("list","unchecked"):D==="unchecked"&&N.format("list","checked")}};return M.addEventListener("touchstart",A),M.addEventListener("mousedown",A),R}return o(O,[{key:"format",value:function(R,A){this.children.length>0&&this.children.tail.format(R,A)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(R,A){if(R instanceof C)l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,R,A);else{var T=A==null?this.length():A.offset(this),I=this.split(T);I.parent.insertBefore(R,I)}}},{key:"optimize",value:function(R){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,R);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(R){if(R.statics.blotName!==this.statics.blotName){var A=h.default.create(this.statics.defaultChild);R.moveChildren(A),this.appendChild(A)}l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,R)}}]),O}(p.default);P.blotName="list",P.scope=h.default.Scope.BLOCK_BLOT,P.tagName=["OL","UL"],P.defaultChild="list-item",P.allowedChildren=[C],n.ListItem=C,n.default=P},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(56),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function g(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=function(p){g(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);m.blotName="italic",m.tagName=["EM","I"],n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function b(x,E){for(var w=0;w<E.length;w++){var C=E[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,C.key,C)}}return function(x,E,w){return E&&b(x.prototype,E),w&&b(x,w),x}}(),l=function b(x,E,w){x===null&&(x=Function.prototype);var C=Object.getOwnPropertyDescriptor(x,E);if(C===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:b(P,E,w)}else{if("value"in C)return C.value;var S=C.get;return S===void 0?void 0:S.call(w)}},u=i(6),h=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:b}function p(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(b,x):b.__proto__=x)}var y=function(b){p(x,b);function x(){return g(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return o(x,null,[{key:"create",value:function(w){return w==="super"?document.createElement("sup"):w==="sub"?document.createElement("sub"):l(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,w)}},{key:"formats",value:function(w){if(w.tagName==="SUB")return"sub";if(w.tagName==="SUP")return"super"}}]),x}(h.default);y.blotName="script",y.tagName=["SUB","SUP"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(6),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function g(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=function(p){g(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);m.blotName="strike",m.tagName="S",n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(6),l=u(o);function u(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function g(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=function(p){g(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);m.blotName="underline",m.tagName="U",n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function E(w,C){for(var P=0;P<C.length;P++){var S=C[P];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,P){return C&&E(w.prototype,C),P&&E(w,P),w}}(),l=function E(w,C,P){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,C);if(S===void 0){var O=Object.getPrototypeOf(w);return O===null?void 0:E(O,C,P)}else{if("value"in S)return S.value;var M=S.get;return M===void 0?void 0:M.call(P)}},u=i(0),h=g(u),d=i(27);function g(E){return E&&E.__esModule?E:{default:E}}function m(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function p(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function y(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var b=["alt","height","width"],x=function(E){y(w,E);function w(){return m(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"format",value:function(P,S){b.indexOf(P)>-1?S?this.domNode.setAttribute(P,S):this.domNode.removeAttribute(P):l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,P,S)}}],[{key:"create",value:function(P){var S=l(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,P);return typeof P=="string"&&S.setAttribute("src",this.sanitize(P)),S}},{key:"formats",value:function(P){return b.reduce(function(S,O){return P.hasAttribute(O)&&(S[O]=P.getAttribute(O)),S},{})}},{key:"match",value:function(P){return/\.(jpe?g|gif|png)$/.test(P)||/^data:image\/.+;base64/.test(P)}},{key:"sanitize",value:function(P){return(0,d.sanitize)(P,["http","https","data"])?P:"//:0"}},{key:"value",value:function(P){return P.getAttribute("src")}}]),w}(h.default.Embed);x.blotName="image",x.tagName="IMG",n.default=x},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function E(w,C){for(var P=0;P<C.length;P++){var S=C[P];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,C,P){return C&&E(w.prototype,C),P&&E(w,P),w}}(),l=function E(w,C,P){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,C);if(S===void 0){var O=Object.getPrototypeOf(w);return O===null?void 0:E(O,C,P)}else{if("value"in S)return S.value;var M=S.get;return M===void 0?void 0:M.call(P)}},u=i(4),h=i(27),d=g(h);function g(E){return E&&E.__esModule?E:{default:E}}function m(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function p(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function y(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var b=["height","width"],x=function(E){y(w,E);function w(){return m(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"format",value:function(P,S){b.indexOf(P)>-1?S?this.domNode.setAttribute(P,S):this.domNode.removeAttribute(P):l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,P,S)}}],[{key:"create",value:function(P){var S=l(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,P);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(P)),S}},{key:"formats",value:function(P){return b.reduce(function(S,O){return P.hasAttribute(O)&&(S[O]=P.getAttribute(O)),S},{})}},{key:"sanitize",value:function(P){return d.default.sanitize(P)}},{key:"value",value:function(P){return P.getAttribute("src")}}]),w}(u.BlockEmbed);x.blotName="video",x.className="ql-video",x.tagName="IFRAME",n.default=x},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var o=function(){function P(S,O){for(var M=0;M<O.length;M++){var R=O[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(S,R.key,R)}}return function(S,O,M){return O&&P(S.prototype,O),M&&P(S,M),S}}(),l=function P(S,O,M){S===null&&(S=Function.prototype);var R=Object.getOwnPropertyDescriptor(S,O);if(R===void 0){var A=Object.getPrototypeOf(S);return A===null?void 0:P(A,O,M)}else{if("value"in R)return R.value;var T=R.get;return T===void 0?void 0:T.call(M)}},u=i(35),h=y(u),d=i(5),g=y(d),m=i(9),p=y(m);function y(P){return P&&P.__esModule?P:{default:P}}function b(P,S){if(!(P instanceof S))throw new TypeError("Cannot call a class as a function")}function x(P,S){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:P}function E(P,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);P.prototype=Object.create(S&&S.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(P,S):P.__proto__=S)}var w=function(P){E(S,P);function S(){return b(this,S),x(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,null,[{key:"create",value:function(M){var R=l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,M);return typeof M=="string"&&(window.katex.render(M,R,{throwOnError:!1,errorColor:"#f00"}),R.setAttribute("data-value",M)),R}},{key:"value",value:function(M){return M.getAttribute("data-value")}}]),S}(h.default);w.blotName="formula",w.className="ql-formula",w.tagName="SPAN";var C=function(P){E(S,P),o(S,null,[{key:"register",value:function(){g.default.register(w,!0)}}]);function S(){b(this,S);var O=x(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return O}return S}(p.default);n.FormulaBlot=w,n.default=C},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var o=function(){function M(R,A){for(var T=0;T<A.length;T++){var I=A[T];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(R,I.key,I)}}return function(R,A,T){return A&&M(R.prototype,A),T&&M(R,T),R}}(),l=function M(R,A,T){R===null&&(R=Function.prototype);var I=Object.getOwnPropertyDescriptor(R,A);if(I===void 0){var D=Object.getPrototypeOf(R);return D===null?void 0:M(D,A,T)}else{if("value"in I)return I.value;var N=I.get;return N===void 0?void 0:N.call(T)}},u=i(0),h=x(u),d=i(5),g=x(d),m=i(9),p=x(m),y=i(13),b=x(y);function x(M){return M&&M.__esModule?M:{default:M}}function E(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}function w(M,R){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:M}function C(M,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);M.prototype=Object.create(R&&R.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(M,R):M.__proto__=R)}var P=function(M){C(R,M);function R(){return E(this,R),w(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"replaceWith",value:function(T){this.domNode.textContent=this.domNode.textContent,this.attach(),l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replaceWith",this).call(this,T)}},{key:"highlight",value:function(T){var I=this.domNode.textContent;this.cachedText!==I&&((I.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=T(I),this.domNode.normalize(),this.attach()),this.cachedText=I)}}]),R}(b.default);P.className="ql-syntax";var S=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),O=function(M){C(R,M),o(R,null,[{key:"register",value:function(){g.default.register(S,!0),g.default.register(P,!0)}}]);function R(A,T){E(this,R);var I=w(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,A,T));if(typeof I.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var D=null;return I.quill.on(g.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(D),D=setTimeout(function(){I.highlight(),D=null},I.options.interval)}),I.highlight(),I}return o(R,[{key:"highlight",value:function(){var T=this;if(!this.quill.selection.composing){this.quill.update(g.default.sources.USER);var I=this.quill.getSelection();this.quill.scroll.descendants(P).forEach(function(D){D.highlight(T.options.highlight)}),this.quill.update(g.default.sources.SILENT),I!=null&&this.quill.setSelection(I,g.default.sources.SILENT)}}}]),R}(p.default);O.DEFAULTS={highlight:function(){return window.hljs==null?null:function(M){var R=window.hljs.highlightAuto(M);return R.value}}(),interval:1e3},n.CodeBlock=P,n.CodeToken=S,n.default=O},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var o=function R(A,T,I){A===null&&(A=Function.prototype);var D=Object.getOwnPropertyDescriptor(A,T);if(D===void 0){var N=Object.getPrototypeOf(A);return N===null?void 0:R(N,T,I)}else{if("value"in D)return D.value;var L=D.get;return L===void 0?void 0:L.call(I)}},l=function(){function R(A,T){for(var I=0;I<T.length;I++){var D=T[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}return function(A,T,I){return T&&R(A.prototype,T),I&&R(A,I),A}}(),u=i(3),h=E(u),d=i(8),g=E(d),m=i(43),p=E(m),y=i(15),b=i(41),x=E(b);function E(R){return R&&R.__esModule?R:{default:R}}function w(R,A){if(!(R instanceof A))throw new TypeError("Cannot call a class as a function")}function C(R,A){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:R}function P(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);R.prototype=Object.create(A&&A.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(R,A):R.__proto__=A)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],O=function(R){P(A,R);function A(T,I){w(this,A),I.modules.toolbar!=null&&I.modules.toolbar.container==null&&(I.modules.toolbar.container=S);var D=C(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,I));return D.quill.container.classList.add("ql-bubble"),D}return l(A,[{key:"extendToolbar",value:function(I){this.tooltip=new M(this.quill,this.options.bounds),this.tooltip.root.appendChild(I.container),this.buildButtons([].slice.call(I.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(I.container.querySelectorAll("select")),x.default)}}]),A}(p.default);O.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var M=function(R){P(A,R);function A(T,I){w(this,A);var D=C(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,I));return D.quill.on(g.default.events.EDITOR_CHANGE,function(N,L,V,J){if(N===g.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&J===g.default.sources.USER){D.show(),D.root.style.left="0px",D.root.style.width="",D.root.style.width=D.root.offsetWidth+"px";var re=D.quill.getLines(L.index,L.length);if(re.length===1)D.position(D.quill.getBounds(L));else{var Z=re[re.length-1],ie=D.quill.getIndex(Z),G=Math.min(Z.length()-1,L.index+L.length-ie),W=D.quill.getBounds(new y.Range(ie,G));D.position(W)}}else document.activeElement!==D.textbox&&D.quill.hasFocus()&&D.hide()}),D}return l(A,[{key:"listen",value:function(){var I=this;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){I.root.classList.remove("ql-editing")}),this.quill.on(g.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!I.root.classList.contains("ql-hidden")){var D=I.quill.getSelection();D!=null&&I.position(I.quill.getBounds(D))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(I){var D=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,I),N=this.root.querySelector(".ql-tooltip-arrow");if(N.style.marginLeft="",D===0)return D;N.style.marginLeft=-1*D-N.offsetWidth/2+"px"}}]),A}(m.BaseTooltip);M.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=M,n.default=O},function(t,n,i){t.exports=i(63)}]).default})}(Wh)),Wh.exports}var $r,YE;function aj(){if(YE)return $r;YE=1;var r=$r&&$r.__extends||function(){var g=function(m,p){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var x in b)b.hasOwnProperty(x)&&(y[x]=b[x])},g(m,p)};return function(m,p){g(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e=$r&&$r.__assign||function(){return e=Object.assign||function(g){for(var m,p=1,y=arguments.length;p<y;p++){m=arguments[p];for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(g[b]=m[b])}return g},e.apply(this,arguments)},t=$r&&$r.__spreadArrays||function(){for(var g=0,m=0,p=arguments.length;m<p;m++)g+=arguments[m].length;for(var y=Array(g),b=0,m=0;m<p;m++)for(var x=arguments[m],E=0,w=x.length;E<w;E++,b++)y[b]=x[E];return y},n=$r&&$r.__importDefault||function(g){return g&&g.__esModule?g:{default:g}},i=n(Cd()),o=n(Ty()),l=n(ij()),u=n(oj()),h=function(g){r(m,g);function m(p){var y=g.call(this,p)||this;y.dirtyProps=["modules","formats","bounds","theme","children"],y.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],y.state={generation:0},y.selection=null,y.onEditorChange=function(x,E,w,C){var P,S,O,M;x==="text-change"?(S=(P=y).onEditorChangeText)===null||S===void 0||S.call(P,y.editor.root.innerHTML,E,C,y.unprivilegedEditor):x==="selection-change"&&((M=(O=y).onEditorChangeSelection)===null||M===void 0||M.call(O,E,C,y.unprivilegedEditor))};var b=y.isControlled()?p.value:p.defaultValue;return y.value=b??"",y}return m.prototype.validateProps=function(p){var y;if(i.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(p.children)){var b=i.default.Children.only(p.children);if(((y=b)===null||y===void 0?void 0:y.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},m.prototype.shouldComponentUpdate=function(p,y){var b=this,x;if(this.validateProps(p),!this.editor||this.state.generation!==y.generation)return!0;if("value"in p){var E=this.getEditorContents(),w=(x=p.value,x??"");this.isEqualValue(w,E)||this.setEditorContents(this.editor,w)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),t(this.cleanProps,this.dirtyProps).some(function(C){return!l.default(p[C],b.props[C])})},m.prototype.shouldComponentRegenerate=function(p){var y=this;return this.dirtyProps.some(function(b){return!l.default(p[b],y.props[b])})},m.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},m.prototype.componentWillUnmount=function(){this.destroyEditor()},m.prototype.componentDidUpdate=function(p,y){var b=this;if(this.editor&&this.shouldComponentRegenerate(p)){var x=this.editor.getContents(),E=this.editor.getSelection();this.regenerationSnapshot={delta:x,selection:E},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==y.generation){var w=this.regenerationSnapshot,x=w.delta,C=w.selection;delete this.regenerationSnapshot,this.instantiateEditor();var P=this.editor;P.setContents(x),d(function(){return b.setEditorSelection(P,C)})}},m.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},m.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},m.prototype.isControlled=function(){return"value"in this.props},m.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},m.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},m.prototype.createEditor=function(p,y){var b=new u.default(p,y);return y.tabIndex!=null&&this.setEditorTabIndex(b,y.tabIndex),this.hookEditor(b),b},m.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},m.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},m.prototype.getEditorContents=function(){return this.value},m.prototype.getEditorSelection=function(){return this.selection},m.prototype.isDelta=function(p){return p&&p.ops},m.prototype.isEqualValue=function(p,y){return this.isDelta(p)&&this.isDelta(y)?l.default(p.ops,y.ops):l.default(p,y)},m.prototype.setEditorContents=function(p,y){var b=this;this.value=y;var x=this.getEditorSelection();typeof y=="string"?p.setContents(p.clipboard.convert(y)):p.setContents(y),d(function(){return b.setEditorSelection(p,x)})},m.prototype.setEditorSelection=function(p,y){if(this.selection=y,y){var b=p.getLength();y.index=Math.max(0,Math.min(y.index,b-1)),y.length=Math.max(0,Math.min(y.length,b-1-y.index)),p.setSelection(y)}},m.prototype.setEditorTabIndex=function(p,y){var b,x;!((x=(b=p)===null||b===void 0?void 0:b.scroll)===null||x===void 0)&&x.domNode&&(p.scroll.domNode.tabIndex=y)},m.prototype.setEditorReadOnly=function(p,y){y?p.disable():p.enable()},m.prototype.makeUnprivilegedEditor=function(p){var y=p;return{getHTML:function(){return y.root.innerHTML},getLength:y.getLength.bind(y),getText:y.getText.bind(y),getContents:y.getContents.bind(y),getSelection:y.getSelection.bind(y),getBounds:y.getBounds.bind(y)}},m.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=o.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},m.prototype.renderEditingArea=function(){var p=this,y=this.props,b=y.children,x=y.preserveWhitespace,E=this.state.generation,w={key:E,ref:function(C){p.editingArea=C}};return i.default.Children.count(b)?i.default.cloneElement(i.default.Children.only(b),w):x?i.default.createElement("pre",e({},w)):i.default.createElement("div",e({},w))},m.prototype.render=function(){var p;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},m.prototype.onEditorChangeText=function(p,y,b,x){var E,w;if(this.editor){var C=this.isDelta(this.value)?x.getContents():x.getHTML();C!==this.getEditorContents()&&(this.lastDeltaChangeSet=y,this.value=C,(w=(E=this.props).onChange)===null||w===void 0||w.call(E,p,y,b,x))}},m.prototype.onEditorChangeSelection=function(p,y,b){var x,E,w,C,P,S;if(this.editor){var O=this.getEditorSelection(),M=!O&&p,R=O&&!p;l.default(p,O)||(this.selection=p,(E=(x=this.props).onChangeSelection)===null||E===void 0||E.call(x,p,y,b),M?(C=(w=this.props).onFocus)===null||C===void 0||C.call(w,p,y,b):R&&((S=(P=this.props).onBlur)===null||S===void 0||S.call(P,O,y,b)))}},m.prototype.focus=function(){this.editor&&this.editor.focus()},m.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},m.displayName="React Quill",m.Quill=u.default,m.defaultProps={theme:"snow",modules:{},readOnly:!1},m}(i.default.Component);function d(g){Promise.resolve().then(g)}return $r=h,$r}var lj=aj();const uj=qu(lj);class cj extends Ha{constructor(e){super(e),this.quillRef=qe.createRef()}getFormHtml(){return _.jsx("div",{children:_.jsx(uj,{ref:this.quillRef,modules:{toolbar:[["bold","italic","underline","blockquote"],[{color:["#F4F5F8","#E6FFFD","#99AFD1","#ecd23a","#fd5259","#D7ABF7","#9EFFA0","#F4F5F888","#E6FFFD77","#99AFD188","#ecd23a88","#fd525988","#D7ABF788","#9EFFA088","#000000","#E6FFFD44","#99AFD155","#ecd23a55","#fd525955","#D7ABF755","#9EFFA055"]},{background:[!1,"black","#00274D","#C1A71B","#5F0C0C","#4B0082","#002E07"]}],[,"code-block"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[],["clean"]]},style:this.props.wrapperStyle?{...this.props.wrapperStyle}:{minHeight:"100%",padding:"8px",minWidth:"99%",width:"100%"},theme:"snow",value:this.obj[0].getJson()[this.props.name],onChange:this.objDispatch})})}}class Zx extends eo{constructor(e){super(e)}createFileInfo(e){const t=new Date,n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");let l="images/"+`${Math.floor(Math.random()*9999)}-${n+i}`+e.target.files[0].name;return this.fileInfo={selectedFile:e.target.files[0],path:l,pic:URL.createObjectURL(e.target.files[0])},this.setState({...this.fileInfo}),this.fileInfo}async prepareOnChange(){let e=await this.operationsFactory.prepare({prepare:{...this.props.prepareOnChange},clean:!0});e=e[0],this.obj=e}async changeHandler(e){var n;await this.createFileInfo(e),this.props.prepareOnChange&&await this.prepareOnChange(),this.props.callBackFunc&&await this.props.callBackFunc(this.obj,this.fileInfo);let t;if(await this.APIService.uploadPics(this.fileInfo.selectedFile,this.fileInfo.path),!this.obj.getPicSrc){if(t=await this.APIService.downloadPics(this.fileInfo.path),!this.props.skipUpdate&&!this.state.skipUpdate)if((n=this.obj)!=null&&n.length)for(let i of this.obj)await i.setCompState({[this.props.uploadAttribute||"picURL"]:t});else await this.obj.setCompState({[this.props.uploadAttribute||"picURL"]:t});this.props.downloadPicsCallBackFunc&&this.props.downloadPicsCallBackFunc(this.obj,this.fileInfo)}return this.props.runOnChange&&this.onSubmit(),t}async onSubmit(){this.props.prepareOnChange&&await this.operationsFactory.addToComponentList(),await this.obj.update(),this.props.finishCallBackFunc&&this.props.finishCallBackFunc(this.obj),this.dispatch({imgUploaded:this.obj})}additionalSetup(){this.wrapper.setStyle({maxWidth:"300px",maxHeight:"30px",width:"fit-content"}),this.label.setStyle({display:"inline-block",height:"35px",maxWidth:"fit-content",cursor:"pointer",position:"relative"}),this.form.updateProps({accept:"image/png, image/gif, image/jpeg, image/jpg, image/webp, image/svg+xml, application/pdf",style:{position:"absolute",top:0,left:0,cursor:"pointer",width:"100%",height:"100%",opacity:0},size:"6",type:"file",name:"file",onChange:this.changeHandler})}getInnerContent(){let e=this.getFormHtml();return this.innerContent=[this.label.getHtml({content:e,type:"label"}),this.props.errorText&&this.error.getHtml()],this.innerContent}getFormHtml(){return this.content=this.props.content||_.jsx(_.Fragment,{children:"Upload"}),_.jsxs("div",{className:this.props.containerStyle||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]})}}class hj extends Zx{constructor(e){super(e)}getFormHtml(){var t,n;this.content=this.props.content||_.jsx(_.Fragment,{children:"Upload"});let e=(n=(t=this.obj)==null?void 0:t[0])==null?void 0:n.getJson()[this.props.uploadImgAttribute||"picURL"];return _.jsxs(_.Fragment,{children:[_.jsxs("div",{style:this.props.containerStyle,className:this.props.containerClass||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]}),(this.state.pic||e)&&_.jsx("img",{style:this.props.uploadedImgStyle,className:this.props.uploadedImgClass||"uploadedImg",src:this.state.pic||e})]})}}let dj=class extends eo{constructor(e){super(e),this.state.formClass="FCDefaultDelButton",this.content="Delete"}buttonClickFunc(){this.props.obj.del()}};class fj extends Vx{constructor(){super(...arguments);le(this,"factory",{input:Ha,textarea:Ha,select:Ha,math:UF,addButton:BF,baseButton:eo,popupButton:VF,updateButton:zF,runButton:HF,quill:cj,upload:Zx,showUpload:hj,del:dj})}}class Uv extends at{constructor(){super();le(this,"addToProps",{});le(this,"addToInitialSetup",[]);le(this,"getterFunc");this.state={}}getProps(){return{interface:this.interface,app:this.app,theme:this.props.theme,type:this.props.type,...this.props,...this.addToProps}}setComponentList(){var t;this.componentList=(t=this.interface)==null?void 0:t.getComponentList()}setProps(){}getHtml(){this.setProps();let t=this.getProps();return this.setGetterFunc(this.props.getterFunc),this.getterFunc&&(this.html=this.getterFunc({...t},t.type||this.state.type)),_.jsx(_.Fragment,{children:this.html})}setGetterFunc(t){this.getterFunc=t||this.interface.getMainFunc()||this.getterFunc}addToFactory(){if(this.props.addToFactory){let t=this.interface.getFactory();for(let n of this.props.addToFactory)t.registerComponent(n.type,n.comp)}}preSetup(){this.componentPreSetup(),this.initialSetupFunctions=[...this.initialSetupFunctions,this.setComponentList,this.addToFactory,...this.addToInitialSetup]}componentPreSetup(){}}class eS extends cl{constructor(){super(...arguments);le(this,"mainFunc",this.getFormComponent)}getFactory(){return this.factory===void 0&&(this.factory=new fj),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new jF),this.themeFactory}getFormComponent(t,n){return n=n||"input",this.factory.getComponent(n,t)}}const tS=new eS;class Je extends Uv{constructor(e){super(e),this.state={type:"input"},this.interface=tS}}class rf extends Je{constructor(e){super(e),this.state={type:"popupButton"}}}class Vv extends Je{constructor(e){super(e),this.state={type:"updateButton"}}}class Si extends Je{constructor(e){super(e),this.state={type:"runButton"}}}class pj extends Je{constructor(e){super(e),this.state={type:e.uploadType||"upload"}}}class sf extends Je{constructor(e){super(e),this.state={type:e.uploadType||"del"}}}class Wn extends at{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setCell,this.getUseId],this.state={...this.state,defaultTheme:"defaultColumn",interface:"map",wrapperClass:"MCCell",linkClass:"MCLink"},this.setItemPropsRan=!1}setCell(){this.cell=this.props.cell}preSetup(){this.setComponents(["link","wrapper","item","option"])}setitemprops(){let e={...this.createPropObj("item","cell"),className:this.cell.class||this.theme[this.state.classKey],style:this.cell.style};this.cell.itemClick&&(e.checkItemClick=!0),this.setItemPropsRan?this.item.setProps(e):(this.builderObserver.subscribe(e),this.setItemPropsRan=!0)}setwrapperprops(){let e={...this.createPropObj("wrapper","cell")};this.setWrapperPropsRan?this.wrapper.setProps(e):(this.builderObserver.subscribe(e),this.setWrapperPropsRan=!0)}getOption(){return _.jsx(_.Fragment,{})}getUseId(){return this.cell&&this.obj.getJson&&(this.useId=this.cell.useId===!1?"":this.cell.useId===void 0?this.obj.getJson()._id:this.obj.getJson()[this.cell.useId]),this.useId}getInnerContent(){return this.innerContent=[this.item.getHtml({type:this.state.itemType||"span",content:this.getOption()})],this.innerContent}getLinkUrl(){var t,n,i;return(t=this.cell)!=null&&t.to?this.cell.to:`/${(i=(n=this.obj)==null?void 0:n.getJson())==null?void 0:i.type}/${this.useId}`}getLinkFunc(){if(this.cell.forceUpdate){let e=()=>{this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}if(this.cell.linkClick){let e=()=>{this.cell.linkClick(this.obj),this.cell.forceUpdate&&this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}}getHtml(){var t;this.mapInnerContent(),this.getLinkFunc(),this.cell.type;let e=(t=this.cell)!=null&&t.hasLink?this.link.getHtml({type:this.state.linkType||"link",content:this.innerContent,props:{to:this.getLinkUrl()}}):this.wrapper.getHtml({type:this.state.wrapperType||"span",content:this.innerContent});return this.html=_.jsx(_.Fragment,{children:e}),this.html}}class zv extends Wn{constructor(e){super(e),this.state.classKey="MCDelItem",this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setDel]}setDel(){this.cell.itemClick=this.del}del(){let e=this.props.app;this.cell.popop?e.dispatch({popupSwitch:"del",delComponent:this.obj}):this.obj.del()}getOption(){return _.jsx("div",{children:"X"})}}class Hv extends Wn{constructor(e){super(e),this.state.classKey="MCEditItem",this.state.itemClick=this.edit}edit(){this.props.app.dispatch({popupSwitch:"edit",currentPopupComponent:this.obj})}getOption(){return"edit"}}class of extends Wn{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getName(){let e=this.cell;this.name=e.name,this.name||(this.name=e)}getOption(){return this.getName(),this.obj.getJson()[this.name]}}class mj extends of{constructor(e){super(e),this.state.classKey="MCTextItem"}getOption(){return _.jsx(_.Fragment,{children:this.cell.name})}}class gj extends Wn{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){let e=this.cell.custom;return _.jsx(e,{...this.props,masterCell:this})}}class nS extends Wn{constructor(e){super(e),this.state.defaultClassName="MCImgItem",this.state.itemType="img"}getPicSrc(){var e,t;return this.obj.getJson&&(this.src=(t=this.obj)==null?void 0:t.getJson()[((e=this.state.cell)==null?void 0:e.src)||"picURL"]),this.cell.imgSrc&&(this.src=this.cell.imgSrc),this.src}additionalPostSetup(){this.getPicSrc(),this.src&&this.item.addProps({src:this.src,alt:"picture goes here"})}}class yj extends Wn{constructor(e){super(e)}getOption(){({...this.cell,...this.props})}}class Wv extends Wn{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setList,this.setFactory],this.state={...this.state,mapContainerClass:"MCMapContainer",interface:"map",mapSectionClass:"MCMapSection"},this.defaultTypes=["del","edit","img"]}setFactory(){this.factory=this.interface.getFactory()}getDefaultTypes(){return this.defaultTypes}checkCellForDefaults(e){let t=this.getDefaultTypes();return t[t.indexOf(e)]}textOrAttribute(e,t){return e.getJson&&(e!=null&&e.getJson()[t])?"attribute":"text"}getType(e,t){let n=e.type;return n||(n=this.checkCellForDefaults(e),n||(n=this.textOrAttribute(t,e))),n}getProps(e,t){return{obj:t,...this.props,interface:this.interface,cell:e,theme:this.props.theme}}getCellList(e){let t=this.props.cells;return _.jsx(_.Fragment,{children:t.map((n,i)=>{let o=this.getType(n,e),l=this.getProps(n,e);return this.factory.getComponent(o,l)})})}getListHtml(){return _.jsx(_.Fragment,{children:this.list.map((e,t)=>this.mapSection.getHtml({type:"div",content:this.getCellList(e)}))})}setList(){this.list=this.props.list}preSetup(){this.setComponents(["mapContainer","mapSection","link"])}getHtml(){let e=this.mapContainer.getHtml({type:"div",content:this.getListHtml()});return this.html=_.jsx(_.Fragment,{children:e}),this.html}}class XE extends zv{constructor(e){super(e),this.state.classKey="MCCustomDelItem"}getOption(){return _.jsx(this.cell.custom,{...this.props,masterCell:this})}}class vj extends zv{constructor(e){super(e),this.state.classKey="MCDelItem"}getOption(){return this.props.delText||"delete"}}const _j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDgiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0OCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0OCIKICAgdGlmZjpJbWFnZVdpZHRoPSI0OCIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDktMDhUMTQ6NDQ6MzYtMDY6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgeG1wTU06YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgeG1wTU06c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgeG1wTU06d2hlbj0iMjAyMy0wOC0wNFQxMDoyNTozOC0wNjowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+zw4Y8wAAAYFpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/ZshgRJmFhcUkZGE0KLGxmMmvwmJmlF+bmee9GTUzXu89SbbKVlFi49eCv4CtslaKSMmWNbFhes7z1Ejm3M49n/u995zuPRc8iaySM8vDkMtbRmw4EpyanglWPlGFjwDthJOKqY/HhxKUtPdbypx4HXJqlT73r9XMq6YCZT7hAUU3LOER4bFlS3d4SzigZJLzwifCHYZcUPjG0VMuPzucdvnTYSMRi4KnXjiY/sWpX6xkjJywvJyWXHZJ+bmP8xK/mp+MS2wWb8IkxjARgowySJReuuiXuZcQ3XTKihL54e/8CRYlV5FZZwWDBdJksOgQdUmqqxI10VUZWVac/v/tq6n1dLvV/RGoeLTt11ao3ITChm1/HNh24RC8D3CeL+Yv7kPfm+gbRa1lD+rW4PSiqKW24WwdGu/1pJH8lrziHk2Dl2OonYaGK6iedXv2s8/RHSRW5asuYWcX2uR83dwXqRtoBLx59Y4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAU5SURBVGiB1ZpfbFNVHMc/bW/H7d3WGujaMeqy8ECMEcgiICDDOI0hEpco8iDECMHEByBRSAwvxCgJ0ZhIzEBjAma8QEyEBwUejEyibg/GYcKYYRCIQEHaVZa2621v/10f7m1pu/5d/9B9k5vc3nvOuZ9v77nn3+8YqIFsdpcIPA88CzhyDgBvzjEGjPh97ki1zzbMNaPN7rIBLwH9aPBihUVEgBHgIjDs97n9c+Go2IDN7rIAO4B3AWkuD82jEHACGPL73OFKMpZtwGZ3mYA3gT2AvSK88jUFHAXO+H3uRDkZyjJgs7s6gUHgmbmzVaSrwB6/z+0pldBUKoHN7loBDAE9VWMVkNEI/WstrZtfbG1f+qTZ/J8/sWgmpL4qStYxRQ4UNVH0DdjsrgHgENBSS+BMdTkF4ehH9q6VT7Wkvyc5oiYPfzX94PS5GR9w0O9z/1Aof8E3oMN/VixNtVriFITTRxzdy3rMWS2YWTAY+tdZ2uWwql6eUPpEyXpXkQOT+crIC6dXm8FC92uhJU5BOHXE0e3qFAq+3b5VYpscVuOXJ5TnRMk6mq86zQLUP9ghoL2mxDn6/MCizt6nF2Q1w6oKhpxK3bdKbPM9TCTHr0fXipL1giIHQpn3swzoTeW31PGDTem3PyOhvtWi1LHQZE5dMxg0E6nzlNb1iq0/DsuJwEyyV5SsZxU5oKbuGXPK3UKDmkp/MJncvs97d+JGNKvjyn0DABbRYHx5vaUVWA68kXkvbUDvYffWhRbocQnmbQNttsxrgRnNxPj10iYcdpOgn+7VWYHsN7CDOvWwPS7BfOoLZ/eh9xcu3rW1/YnMe8FQMvn2fu/dK9eicrEyJm/GFP20A3gndd0E6YHZl4B5dtbqlIJ32rW63rfa0haSk/G//o6mR6LRmKqevyQH1/UusHR2CLMYJm5Ew58cm/aq6ZrPclGyfqfIAcUEIErWzcCmesOnVNhEOLh25QLLYscjE+4H8ejOA1PuQDCZzCiiBbilyIFrKQO7gaWNgC9mIhZT1XOX5OCaFaLY5RRa3A/i0bc+8N6574nH85WhyIELJn0y8jEg5EtUD/iiJuKo5y/JwS6HIOz/9OG/heCBLlGynjSJkvUFYKDe8L/+EQke/nra+8oGqV0wPWpn8pmIx+Gn38MzwVBWtcmVAIybRMm6FeitN/x7B6fu37gdi169Hgtv2ljaRJnymETJ+jqwrN7w0ZjWhty+F49N3opFXutvzeoT+lZb2nzTidj4ZFShfN0z8mjiXXd4gBazwbB9ILsvAPD4ErHRy5GifUEeOao2UCn8N4c6ujauEbMGih5fIrZtn+fOP+54rMLHV2fgMcODbmBOagJ4QBsLeecrPOCt2EATwUOlBpoMHiox0ITwoBsYm6fwAGNGtAXWgl14E8NHgFGjvsQ9Ms/gQV+eT/UDw/MMHrRl+fSc+CLaEndaTQ4fQv/TjQB6cOFEZoomhgc4ngqIZA4lhtDW5/OqieCngJOpH2kDemTkaKFcTQIPMJgZxckdzJ1BCy4U1GOGHwfOZl6YtQZms7ucwPc3h7s3lFtqg+CngK25UZtZw2k9we5yS20QfJQCIae88wG/z32lnFIbBA9alCYv05wnNA385z8sFmIqGaXUozXHqF9otZCm0KpN0dpQMoSkyAGPKFkvAKuowQpGmRoHdvp97lulElYa6N6CFkOoZ6B7EDhb00B3pjK2GuwCWivNX0Ah4Dhwsm5bDXKlxxT60TZ8VLPZ42fgl4Zt9sgnfYV7PZVttxmtxXab/wFJap9Ow0di3gAAAABJRU5ErkJggg==";class wj extends Hv{constructor(e){super(e),this.state.classKey="MCEditImgItem",this.state.itemType="img"}additionalPostSetup(){this.getImg(),this.item.setProps({src:this.src})}getImg(){return this.src=this.cell.imgSrc||_j,this.src}}class Ej extends Hv{constructor(e){super(e),this.state.classKey="MCCustomEditItem"}getOption(){return _.jsx(this.cell.custom,{...this.props,masterCell:this})}}let Cj=class extends Wv{constructor(e){super(e),this.mapContainer=qe.createRef(),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getPicObj,this.getAddComponentButton],this.state={...this.state,index:0,isDragging:void 0,defaultTheme:"interactiveMap"}}_addEventListeners(){var t;this.props;let e=[];for(let n of this.list){let i=document.getElementById(n.getJson()._id);i.addEventListener("mousedown",o=>{this.setState({isDragging:i})}),i.addEventListener("mouseup",o=>{this.setState({isDragging:void 0})}),e.push(i),this.setState({saveList:e})}(t=this.mapContainer)!=null&&t.current&&(this.mapContainer.current.addEventListener("mouseup",n=>{this.currentComp!==void 0&&this.currentComp.update(),this.setState({isDragging:void 0})}),this.mapContainer.current.addEventListener("mousemove",n=>{if(this.state.isDragging!==void 0){let i=this.state.isDragging,o=i.id,l=this.list.find(u=>u.getJson()._id===o);if((l==null?void 0:l.getJson().draggable)!==!1){const u=this.mapContainer.current.getBoundingClientRect(),h=n.pageX-u.left-25,d=n.pageY-u.top-25;l.setCompState({x:h,y:d}),this.currentComp=l,i.style.left=`${h}px`,i.style.top=`${d}px`}}}))}componentDidMount(){this._addEventListeners()}zoom(e){let t=this.mapContainer.current.getBoundingClientRect(),n=t.width*e,i=t.height*e;this.mapContainer.current.style.width=n+"px",this.mapContainer.current.style.height=i+"px";let o=this.state.saveList;for(let l of o){const u=l.style.left||"0",h=l.style.top||"0",d=u.match(/(-?\d*\.?\d+)/),g=h.match(/(-?\d*\.?\d+)/),m=d?parseFloat(d[0]):0,p=g?parseFloat(g[0]):0,y=m*e,b=p*e;l.style.left=y+"px",l.style.top=b+"px"}}componentDidUpdate(e,t){this.props.list.length!==e.list.length&&this._addEventListeners()}getAddComponentButton(){var e,t;if(this.addComponentButton=this.props.addComponentButton,this.addComponentButton!==void 0){let n=typeof this.addComponentButton=="string"?this.addComponentButton:this.addComponentButton.type||"addComponentButton",i=this.props.pinKey||((e=this.mapObj)==null?void 0:e.getJson().pinType)||"pin";this.addComponentButton=this.factory.getComponent(n,{...this.props,theme:this.props.theme||this.state.defaultTheme,mapId:this.mapObj?(t=this.mapObj)==null?void 0:t.getJson()._id:void 0,addType:i,addPinProps:this.props.addPinProps,pinAdded:this._addEventListeners})}}getPicObj(){var t;let e=this.props.imgAttribute||"picURL";this.mapObj&&(this.picSrc=(t=this.mapObj)==null?void 0:t.getJson()[e])}preSetup(){this.setComponents([])}async changePic(e){let t=this.props.list;e=e<0?e=t.length-1:e,e=e>=t.length?0:e,this.mapObj=t[e],await this.setState({index:e}),this._addEventListeners()}setList(){if(!this.listSet){let t=this.props.list[this.state.index];this.mapObj=t;let n=this.props.pinKey||(t==null?void 0:t.getJson().pinType)||"pin",i=this.props.pinAttribute||(t==null?void 0:t.getJson().type)+"Id"||"mapId",o=this.props.mapId||(t==null?void 0:t.getJson()._id);this.list=this.componentList.getList(n,o,i)}}preSetup(){this.setComponents(["mapContainer","right","left","image","zoomIn","zoomOut"])}getIndexAndChangeMap(e){let t=this.props.list.indexOf(this.mapObj)+e;this.changePic(t)}getListHtml(){let e=this.props,t=this.theme,n=this.factory;return _.jsx(_.Fragment,{children:this.list.map((i,o)=>{let l={obj:i,props:e,interface:this.interface,cell:e.pinCell,theme:this.props.them||this.state.defaultTheme,pinProps:this.props.pinProps};return _.jsx("div",{id:i.getJson()._id,className:e.mapSectionClass?e.mapSectionClass:t.MCMapSection,style:{...e.mapSectionStyle,left:i.getJson().x+"px",top:i.getJson().y+"px"},children:_.jsx(_.Fragment,{children:n.getComponent(e.pinType?e.pinType:"attribute",l)})},o)})})}getHtml(){if(this.props.list.length>0){let e=this.props,t=this.theme;return _.jsxs("div",{ref:this.mapContainer,className:e.mapContainerClass?e.mapContainerClass:t.MCMapContainer,style:{...e.mapContainerStyle},children:[_.jsx("img",{src:this.picSrc,className:e.mapClass?e.mapClass:t.MCMap,style:{...e.mapStyle}}),this.getListHtml(),e.addComponentButton&&_.jsx(_.Fragment,{children:this.addComponentButton}),_.jsx("div",{style:{position:"absolute",top:"0px",right:"0px"},onClick:()=>{this.zoom(.5)},children:"zoom out"}),_.jsx("div",{style:{position:"absolute",top:"20px",right:"0px"},onClick:()=>{this.zoom(2)},children:"zoom in"}),_.jsx("div",{style:{position:"absolute",top:"0px",left:"-20px"},onClick:()=>{this.getIndexAndChangeMap(-1)},children:"prev"}),_.jsx("div",{style:{position:"absolute",top:"20px",right:"-20px"},onClick:()=>{this.getIndexAndChangeMap(1)},children:"next"})]})}else this.list=[]}};class Aj extends Wn{constructor(e){super(e)}preSetup(){this.setComponents([])}async createObjType(){let e=this.operationsFactory,t=this.props.addType;await e.prepare({prepare:{type:t,mapId:this.props.mapId,...this.props.addPinProps},clean:!0,run:!0}),this.props.pinAdded()}getHtml(){let e=this.props.text||"+ Add Item";return _.jsxs("div",{onClick:this.createObjType,style:this.props.style,className:this.props.class||this.theme.MCAddButton,children:[e," "]})}}class bj extends Wn{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getOption(){return this.state.obj}}class xj extends of{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getItemClass(){var i;let e=this.cell,t=e.activeAttribute?e.activeAttribute:"_id";if(this.state.obj.getJson()[t]===((i=e.activeItem)==null?void 0:i.getJson()[t])){let o=e.activeClass?e.activeClass:this.theme.MCActiveItem;this.item.setClass(this.item.getClass()+" "+o)}}additionalPostSetup(){this.getItemClass()}}class Sj extends nS{constructor(e){super(e),this.state.classKey="MCLogoItem"}}class Tj extends Wn{constructor(e){super(e),this.state.itemType="div"}getList(){return this.list=this.props.cell.links.filter(e=>(e==null?void 0:e.name)!==void 0),this.list}getHome(){var e;if(!this.state.active){this.home=this.list.find(t=>t.path==="/");for(let t of this.list)t.active=(e=this.home)==null?void 0:e.name}}getOption(){let e=this.props.cell.links.filter(t=>(t==null?void 0:t.name)!==void 0&&t.display!==!1);return _.jsx(fn,{list:e,theme:this.cell.linksTheme||"links",mapSectionClass:this.props.cell.linkSectionClass||void 0,mapSectionStyle:this.props.cell.linkSectionStyle||void 0,cells:[{type:"linkItem",class:this.props.cell.linkItemClass||void 0,activeClass:this.props.cell.activeClass||void 0,style:this.props.cell.linkItemStyle||void 0,linkClick:t=>{for(let n of this.props.cell.links)n.active=t==null?void 0:t.name;this.setState({active:t==null?void 0:t.name})}}]})}additionalSetup(){this.getList(),this.getHome()}}class Ij extends Wn{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setUpLinks],this.state.classKey="MCLinkItem",this.state.itemType="div"}setUpLinks(){this.cell.to=this.obj.path,this.useId="",this.cell.hasLink=!0}getActiveClass(){return this.activeClass=this.cell.activeClass||this.theme.MCActiveLink,this.activeClass}setActiveClass(){var n,i,o,l,u;const e=((n=this.obj)==null?void 0:n.path)==="/"||((i=this.obj)==null?void 0:i.path)==="/home",t=window.location.pathname;if(e){const h=t.split("/").filter(Boolean);if(h.length>0&&h[0]!=="home")return}if(((o=this.obj)==null?void 0:o.active)===((l=this.obj)==null?void 0:l.name)||t.includes((u=this.obj)==null?void 0:u.path)){let h=this.obj.name===""?"none":this.getActiveClass();h=h||"",this.item.setClass(this.item.getClass()+" "+h)}}additionalSetup(){this.setActiveClass()}getOption(){var e;return(e=this.props.obj)==null?void 0:e.name}}class Dj extends Wn{constructor(e){super(e),this.state.classKey="MCTextItem"}additionalPostSetup(){this.item.setOnClick(this.cell.logoutFunc||this.APIService.logout)}getOption(){return"logout"}}class kj extends Wn{constructor(e){super(e),this.state.classKey="MCOrderedArrows",this.state.increment=1,this.state.decrement=-1}increasePosition(){this.obj.updateOrder(this.state.increment)}decreasePosition(){this.obj.updateOrder(this.state.decrement)}increaseArrowUI(){return this.increaseArrow=_.jsx("div",{className:"upward-arrow",onClick:this.decreasePosition}),this.increaseArrow}decreaseArrowUI(){return this.decreaseArrow=_.jsx("div",{style:{marginTop:"5px"},className:"downward-arrow",onClick:this.increasePosition}),this.decreaseArrow}getOption(){return this.increaseArrowUI(),this.decreaseArrowUI(),_.jsxs("div",{style:{marginTop:"-4px"},className:"fitCC",children:[this.increaseArrow,this.decreaseArrow]})}}class Rj extends Wn{constructor(e){super(e),this.state.displayState=!1,this.state.itemType="div"}displayOption(){return _.jsx("div",{style:{position:"absolute",left:"0px",top:"0px"},className:this.state.displayState?"downward-arrow":"right-arrow",onClick:()=>{this.wrapper.setStyle({...this.wrapper.getStyle(),height:"200px"}),this.setState({displayState:!this.state.displayState})}})}mapOption(){return _.jsx(fn,{name:this.props.name,filter:{attribute:this.props.filter.attribute,search:this.obj.getJson()._id},cells:[...this.props.cells]})}additionalPostSetup(){this.item.setStyle({...this.item.getStyle(),position:"relative"})}getOption(){return _.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[this.displayOption(),"  ",this.state.displayState&&this.mapOption(),"  "]})}}class Pj extends of{constructor(){super(),this.state.classKey="MCBackgroundItem",this.state.wrapperClass="MCCellBackground",this.state.linkClass="MCBackgroundLink"}additionalPostSetup(){let t={width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",textAlign:"center",fontSize:"50px",background:`linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${this.cell.pirSRC||this.obj.getJson()[this.cell.picAttribute||"picURL"]}) no-repeat center center`,backgroundSize:"cover",textDecoration:"none"};this.wrapper.setStyle({...this.wrapper.getStyle(),...t}),this.link.setStyle({...this.wrapper.getStyle(),...t})}}class Nj extends Wn{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){return this.cell.custom}}const af=0,to=1,dl=2,rS=4;function ZE(r){return()=>r}function Oj(r){r()}function iS(r,e){return t=>r(e(t))}function eC(r,e){return()=>r(e)}function Lj(r,e){return t=>r(e,t)}function $v(r){return r!==void 0}function Fj(...r){return()=>{r.map(Oj)}}function fl(){}function lf(r,e){return e(r),r}function jj(r,e){return e(r)}function Mt(...r){return r}function Tt(r,e){return r(to,e)}function ht(r,e){r(af,e)}function Gv(r){r(dl)}function _n(r){return r(rS)}function Ge(r,e){return Tt(r,Lj(e,af))}function Ci(r,e){const t=r(to,n=>{t(),e(n)});return t}function tC(r){let e,t;return n=>i=>{e=i,t&&clearTimeout(t),t=setTimeout(()=>{n(e)},r)}}function sS(r,e){return r===e}function jt(r=sS){let e;return t=>n=>{r(e,n)||(e=n,t(n))}}function st(r){return e=>t=>{r(t)&&e(t)}}function Ue(r){return e=>iS(e,r)}function hi(r){return e=>()=>{e(r)}}function Se(r,...e){const t=Bj(...e);return(n,i)=>{switch(n){case dl:Gv(r);return;case to:return Tt(r,t(i))}}}function fi(r,e){return t=>n=>{t(e=r(e,n))}}function el(r){return e=>t=>{r>0?r--:e(t)}}function Fs(r){let e=null,t;return n=>i=>{e=i,!t&&(t=setTimeout(()=>{t=void 0,n(e)},r))}}function pt(...r){const e=new Array(r.length);let t=0,n=null;const i=Math.pow(2,r.length)-1;return r.forEach((o,l)=>{const u=Math.pow(2,l);Tt(o,h=>{const d=t;t=t|u,e[l]=h,d!==i&&t===i&&n&&(n(),n=null)})}),o=>l=>{const u=()=>{o([l].concat(e))};t===i?u():n=u}}function Bj(...r){return e=>r.reduceRight(jj,e)}function Mj(r){let e,t;const n=()=>e==null?void 0:e();return function(i,o){switch(i){case to:return o?t===o?void 0:(n(),t=o,e=Tt(r,o),e):(n(),fl);case dl:n(),t=null;return}}}function De(r){let e=r;const t=Et();return(n,i)=>{switch(n){case af:e=i;break;case to:{i(e);break}case rS:return e}return t(n,i)}}function Fn(r,e){return lf(De(e),t=>Ge(r,t))}function Et(){const r=[];return(e,t)=>{switch(e){case af:r.slice().forEach(n=>{n(t)});return;case dl:r.splice(0,r.length);return;case to:return r.push(t),()=>{const n=r.indexOf(t);n>-1&&r.splice(n,1)}}}}function gr(r){return lf(Et(),e=>Ge(r,e))}function xt(r,e=[],{singleton:t}={singleton:!0}){return{constructor:r,dependencies:e,id:qj(),singleton:t}}const qj=()=>Symbol();function Uj(r){const e=new Map,t=({constructor:n,dependencies:i,id:o,singleton:l})=>{if(l&&e.has(o))return e.get(o);const u=n(i.map(h=>t(h)));return l&&e.set(o,u),u};return t(r)}function cn(...r){const e=Et(),t=new Array(r.length);let n=0;const i=Math.pow(2,r.length)-1;return r.forEach((o,l)=>{const u=Math.pow(2,l);Tt(o,h=>{t[l]=h,n=n|u,n===i&&ht(e,t)})}),function(o,l){switch(o){case dl:{Gv(e);return}case to:return n===i&&l(t),Tt(e,l)}}}function lt(r,e=sS){return Se(r,jt(e))}function nC(...r){return function(e,t){switch(e){case dl:return;case to:return Fj(...r.map(n=>Tt(n,t)))}}}var ir=(r=>(r[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR",r))(ir||{});const Vj={0:"debug",3:"error",1:"log",2:"warn"},zj=()=>typeof globalThis>"u"?window:globalThis,no=xt(()=>{const r=De(3);return{log:De((e,t,n=1)=>{var i;const o=(i=zj().VIRTUOSO_LOG_LEVEL)!=null?i:_n(r);n>=o&&console[Vj[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,t)}),logLevel:r}},[],{singleton:!0});function Wo(r,e,t){return Kv(r,e,t).callbackRef}function Kv(r,e,t){const n=qe.useRef(null);let i=l=>{};const o=qe.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const u=()=>{const h=l[0].target;h.offsetParent!==null&&r(h)};t?u():requestAnimationFrame(u)}):null,[r,t]);return i=l=>{l&&e?(o==null||o.observe(l),n.current=l):(n.current&&(o==null||o.unobserve(n.current)),n.current=null)},{callbackRef:i,ref:n}}function Hj(r,e,t,n,i,o,l,u,h){const d=qe.useCallback(g=>{const m=Wj(g.children,e,u?"offsetWidth":"offsetHeight",i);let p=g.parentElement;for(;!p.dataset.virtuosoScroller;)p=p.parentElement;const y=p.lastElementChild.dataset.viewportType==="window";let b;y&&(b=p.ownerDocument.defaultView);const x=l?u?l.scrollLeft:l.scrollTop:y?u?b.scrollX||b.document.documentElement.scrollLeft:b.scrollY||b.document.documentElement.scrollTop:u?p.scrollLeft:p.scrollTop,E=l?u?l.scrollWidth:l.scrollHeight:y?u?b.document.documentElement.scrollWidth:b.document.documentElement.scrollHeight:u?p.scrollWidth:p.scrollHeight,w=l?u?l.offsetWidth:l.offsetHeight:y?u?b.innerWidth:b.innerHeight:u?p.offsetWidth:p.offsetHeight;n({scrollHeight:E,scrollTop:Math.max(x,0),viewportHeight:w}),o==null||o(u?rC("column-gap",getComputedStyle(g).columnGap,i):rC("row-gap",getComputedStyle(g).rowGap,i)),m!==null&&r(m)},[r,e,i,o,l,n,u]);return Kv(d,t,h)}function Wj(r,e,t,n){const i=r.length;if(i===0)return null;const o=[];for(let l=0;l<i;l++){const u=r.item(l);if(u.dataset.index===void 0)continue;const h=parseInt(u.dataset.index),d=parseFloat(u.dataset.knownSize),g=e(u,t);if(g===0&&n("Zero-sized element, this should not happen",{child:u},ir.ERROR),g===d)continue;const m=o[o.length-1];o.length===0||m.size!==g||m.endIndex!==h-1?o.push({endIndex:h,size:g,startIndex:h}):o[o.length-1].endIndex++}return o}function rC(r,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${r} was not resolved to pixel value correctly`,e,ir.WARN),e==="normal"?0:parseInt(e??"0",10)}function oS(r,e,t){const n=qe.useRef(null),i=qe.useCallback(h=>{if(!(h!=null&&h.offsetParent))return;const d=h.getBoundingClientRect(),g=d.width;let m,p;if(e){const y=e.getBoundingClientRect(),b=d.top-y.top;p=y.height-Math.max(0,b),m=b+e.scrollTop}else{const y=l.current.ownerDocument.defaultView;p=y.innerHeight-Math.max(0,d.top),m=d.top+y.scrollY}n.current={offsetTop:m,visibleHeight:p,visibleWidth:g},r(n.current)},[r,e]),{callbackRef:o,ref:l}=Kv(i,!0,t),u=qe.useCallback(()=>{i(l.current)},[i,l]);return qe.useEffect(()=>{var h;if(e){e.addEventListener("scroll",u);const d=new ResizeObserver(()=>{requestAnimationFrame(u)});return d.observe(e),()=>{e.removeEventListener("scroll",u),d.unobserve(e)}}else{const d=(h=l.current)==null?void 0:h.ownerDocument.defaultView;return d==null||d.addEventListener("scroll",u),d==null||d.addEventListener("resize",u),()=>{d==null||d.removeEventListener("scroll",u),d==null||d.removeEventListener("resize",u)}}},[u,e,l]),o}const $n=xt(()=>{const r=Et(),e=Et(),t=De(0),n=Et(),i=De(0),o=Et(),l=Et(),u=De(0),h=De(0),d=De(0),g=De(0),m=Et(),p=Et(),y=De(!1),b=De(!1),x=De(!1);return Ge(Se(r,Ue(({scrollTop:E})=>E)),e),Ge(Se(r,Ue(({scrollHeight:E})=>E)),l),Ge(e,i),{deviation:t,fixedFooterHeight:d,fixedHeaderHeight:h,footerHeight:g,headerHeight:u,horizontalDirection:b,scrollBy:p,scrollContainerState:r,scrollHeight:l,scrollingInProgress:y,scrollTo:m,scrollTop:e,skipAnimationFrameInResizeObserver:x,smoothScrollTargetReached:n,statefulScrollTop:i,viewportHeight:o}},[],{singleton:!0}),Ou={lvl:0};function aS(r,e){const t=r.length;if(t===0)return[];let{index:n,value:i}=e(r[0]);const o=[];for(let l=1;l<t;l++){const{index:u,value:h}=e(r[l]);o.push({end:u-1,start:n,value:i}),n=u,i=h}return o.push({end:1/0,start:n,value:i}),o}function Dt(r){return r===Ou}function Lu(r,e){if(!Dt(r))return e===r.k?r.v:e<r.k?Lu(r.l,e):Lu(r.r,e)}function Yr(r,e,t="k"){if(Dt(r))return[-1/0,void 0];if(Number(r[t])===e)return[r.k,r.v];if(Number(r[t])<e){const n=Yr(r.r,e,t);return n[0]===-1/0?[r.k,r.v]:n}return Yr(r.l,e,t)}function fr(r,e,t){return Dt(r)?cS(e,t,1):e===r.k?un(r,{k:e,v:t}):e<r.k?iC(un(r,{l:fr(r.l,e,t)})):iC(un(r,{r:fr(r.r,e,t)}))}function Wa(){return Ou}function uf(r,e,t){if(Dt(r))return[];const n=Yr(r,e)[0];return $j(Ay(r,n,t))}function Cy(r,e){if(Dt(r))return Ou;const{k:t,l:n,r:i}=r;if(e===t){if(Dt(n))return i;if(Dt(i))return n;{const[o,l]=uS(n);return $h(un(r,{k:o,l:lS(n),v:l}))}}else return e<t?$h(un(r,{l:Cy(n,e)})):$h(un(r,{r:Cy(i,e)}))}function Po(r){return Dt(r)?[]:[...Po(r.l),{k:r.k,v:r.v},...Po(r.r)]}function Ay(r,e,t){if(Dt(r))return[];const{k:n,l:i,r:o,v:l}=r;let u=[];return n>e&&(u=u.concat(Ay(i,e,t))),n>=e&&n<=t&&u.push({k:n,v:l}),n<=t&&(u=u.concat(Ay(o,e,t))),u}function $h(r){const{l:e,lvl:t,r:n}=r;if(n.lvl>=t-1&&e.lvl>=t-1)return r;if(t>n.lvl+1){if(Vg(e))return hS(un(r,{lvl:t-1}));if(!Dt(e)&&!Dt(e.r))return un(e.r,{l:un(e,{r:e.r.l}),lvl:t,r:un(r,{l:e.r.r,lvl:t-1})});throw new Error("Unexpected empty nodes")}else{if(Vg(r))return by(un(r,{lvl:t-1}));if(!Dt(n)&&!Dt(n.l)){const i=n.l,o=Vg(i)?n.lvl-1:n.lvl;return un(i,{l:un(r,{lvl:t-1,r:i.l}),lvl:i.lvl+1,r:by(un(n,{l:i.r,lvl:o}))})}else throw new Error("Unexpected empty nodes")}}function un(r,e){return cS(e.k!==void 0?e.k:r.k,e.v!==void 0?e.v:r.v,e.lvl!==void 0?e.lvl:r.lvl,e.l!==void 0?e.l:r.l,e.r!==void 0?e.r:r.r)}function lS(r){return Dt(r.r)?r.l:$h(un(r,{r:lS(r.r)}))}function Vg(r){return Dt(r)||r.lvl>r.r.lvl}function uS(r){return Dt(r.r)?[r.k,r.v]:uS(r.r)}function cS(r,e,t,n=Ou,i=Ou){return{k:r,l:n,lvl:t,r:i,v:e}}function iC(r){return by(hS(r))}function hS(r){const{l:e}=r;return!Dt(e)&&e.lvl===r.lvl?un(e,{r:un(r,{l:e.r})}):r}function by(r){const{lvl:e,r:t}=r;return!Dt(t)&&!Dt(t.r)&&t.lvl===e&&t.r.lvl===e?un(t,{l:un(r,{r:t.l}),lvl:e+1}):r}function $j(r){return aS(r,({k:e,v:t})=>({index:e,value:t}))}function dS(r,e){return!!(r&&r.startIndex===e.startIndex&&r.endIndex===e.endIndex)}function Fu(r,e){return!!(r&&r[0]===e[0]&&r[1]===e[1])}const Jv=xt(()=>({recalcInProgress:De(!1)}),[],{singleton:!0});function fS(r,e,t){return r[gd(r,e,t)]}function gd(r,e,t,n=0){let i=r.length-1;for(;n<=i;){const o=Math.floor((n+i)/2),l=r[o],u=t(l,e);if(u===0)return o;if(u===-1){if(i-n<2)return o-1;i=o-1}else{if(i===n)return o;n=o+1}}throw new Error(`Failed binary finding record in array - ${r.join(",")}, searched for ${e}`)}function Gj(r,e,t,n){const i=gd(r,e,n),o=gd(r,t,n,i);return r.slice(i,o+1)}function Js(r,e){return Math.round(r.getBoundingClientRect()[e])}function cf(r){return!Dt(r.groupOffsetTree)}function Qv({index:r},e){return e===r?0:e<r?-1:1}function Kj(){return{groupIndices:[],groupOffsetTree:Wa(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Wa()}}function Jj(r,e){let t=Dt(r)?0:1/0;for(const n of e){const{endIndex:i,size:o,startIndex:l}=n;if(t=Math.min(t,l),Dt(r)){r=fr(r,0,o);continue}const u=uf(r,l-1,i+1);if(u.some(n9(n)))continue;let h=!1,d=!1;for(const{end:g,start:m,value:p}of u)h?(i>=m||o===p)&&(r=Cy(r,m)):(d=p!==o,h=!0),g>i&&i>=m&&p!==o&&(r=fr(r,i+1,p));d&&(r=fr(r,l,o))}return[r,t]}function Qj(r){return typeof r.groupIndex<"u"}function Yj({offset:r},e){return e===r?0:e<r?-1:1}function ju(r,e,t){if(e.length===0)return 0;const{index:n,offset:i,size:o}=fS(e,r,Qv),l=r-n,u=o*l+(l-1)*t+i;return u>0?u+t:u}function pS(r,e){if(!cf(e))return r;let t=0;for(;e.groupIndices[t]<=r+t;)t++;return r+t}function mS(r,e,t){if(Qj(r))return e.groupIndices[r.groupIndex]+1;{const n=r.index==="LAST"?t:r.index;let i=pS(n,e);return i=Math.max(0,i,Math.min(t,i)),i}}function Xj(r,e,t,n=0){return n>0&&(e=Math.max(e,fS(r,n,Qv).offset)),aS(Gj(r,e,t,Yj),t9)}function Zj(r,[e,t,n,i]){e.length>0&&n("received item sizes",e,ir.DEBUG);const o=r.sizeTree;let l=o,u=0;if(t.length>0&&Dt(o)&&e.length===2){const p=e[0].size,y=e[1].size;l=t.reduce((b,x)=>fr(fr(b,x,p),x+1,y),l)}else[l,u]=Jj(l,e);if(l===o)return r;const{lastIndex:h,lastOffset:d,lastSize:g,offsetTree:m}=xy(r.offsetTree,u,l,i);return{groupIndices:t,groupOffsetTree:t.reduce((p,y)=>fr(p,y,ju(y,m,i)),Wa()),lastIndex:h,lastOffset:d,lastSize:g,offsetTree:m,sizeTree:l}}function e9(r){return Po(r).map(({k:e,v:t},n,i)=>{const o=i[n+1];return{endIndex:o?o.k-1:1/0,size:t,startIndex:e}})}function sC(r,e){let t=0,n=0;for(;t<r;)t+=e[n+1]-e[n]-1,n++;return n-(t===r?0:1)}function xy(r,e,t,n){let i=r,o=0,l=0,u=0,h=0;if(e!==0){h=gd(i,e-1,Qv),u=i[h].offset;const d=Yr(t,e-1);o=d[0],l=d[1],i.length&&i[h].size===Yr(t,e)[1]&&(h-=1),i=i.slice(0,h+1)}else i=[];for(const{start:d,value:g}of uf(t,e,1/0)){const m=d-o,p=m*l+u+m*n;i.push({index:d,offset:p,size:g}),o=d,u=p,l=g}return{lastIndex:o,lastOffset:u,lastSize:l,offsetTree:i}}function t9(r){return{index:r.index,value:r}}function n9(r){const{endIndex:e,size:t,startIndex:n}=r;return i=>i.start===n&&(i.end===e||i.end===1/0)&&i.value===t}const r9={offsetHeight:"height",offsetWidth:"width"},Ti=xt(([{log:r},{recalcInProgress:e}])=>{const t=Et(),n=Et(),i=Fn(n,0),o=Et(),l=Et(),u=De(0),h=De([]),d=De(void 0),g=De(void 0),m=De((O,M)=>Js(O,r9[M])),p=De(void 0),y=De(0),b=Kj(),x=Fn(Se(t,pt(h,r,y),fi(Zj,b),jt()),b),E=Fn(Se(h,jt(),fi((O,M)=>({current:M,prev:O.current}),{current:[],prev:[]}),Ue(({prev:O})=>O)),[]);Ge(Se(h,st(O=>O.length>0),pt(x,y),Ue(([O,M,R])=>{const A=O.reduce((T,I,D)=>fr(T,I,ju(I,M.offsetTree,R)||D),Wa());return{...M,groupIndices:O,groupOffsetTree:A}})),x),Ge(Se(n,pt(x),st(([O,{lastIndex:M}])=>O<M),Ue(([O,{lastIndex:M,lastSize:R}])=>[{endIndex:M,size:R,startIndex:O}])),t),Ge(d,g);const w=Fn(Se(d,Ue(O=>O===void 0)),!0);Ge(Se(g,st(O=>O!==void 0&&Dt(_n(x).sizeTree)),Ue(O=>[{endIndex:0,size:O,startIndex:0}])),t);const C=gr(Se(t,pt(x),fi(({sizes:O},[M,R])=>({changed:R!==O,sizes:R}),{changed:!1,sizes:b}),Ue(O=>O.changed)));Tt(Se(u,fi((O,M)=>({diff:O.prev-M,prev:M}),{diff:0,prev:0}),Ue(O=>O.diff)),O=>{const{groupIndices:M}=_n(x);if(O>0)ht(e,!0),ht(o,O+sC(O,M));else if(O<0){const R=_n(E);R.length>0&&(O-=sC(-O,R)),ht(l,O)}}),Tt(Se(u,pt(r)),([O,M])=>{O<0&&M("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:u},ir.ERROR)});const P=gr(o);Ge(Se(o,pt(x),Ue(([O,M])=>{const R=M.groupIndices.length>0,A=[],T=M.lastSize;if(R){const I=Lu(M.sizeTree,0);let D=0,N=0;for(;D<O;){const V=M.groupIndices[N],J=M.groupIndices.length===N+1?1/0:M.groupIndices[N+1]-V-1;A.push({endIndex:V,size:I,startIndex:V}),A.push({endIndex:V+1+J-1,size:T,startIndex:V+1}),N++,D+=J+1}const L=Po(M.sizeTree);return D!==O&&L.shift(),L.reduce((V,{k:J,v:re})=>{let Z=V.ranges;return V.prevSize!==0&&(Z=[...V.ranges,{endIndex:J+O-1,size:V.prevSize,startIndex:V.prevIndex}]),{prevIndex:J+O,prevSize:re,ranges:Z}},{prevIndex:O,prevSize:0,ranges:A}).ranges}return Po(M.sizeTree).reduce((I,{k:D,v:N})=>({prevIndex:D+O,prevSize:N,ranges:[...I.ranges,{endIndex:D+O-1,size:I.prevSize,startIndex:I.prevIndex}]}),{prevIndex:0,prevSize:T,ranges:[]}).ranges})),t);const S=gr(Se(l,pt(x,y),Ue(([O,{offsetTree:M},R])=>{const A=-O;return ju(A,M,R)})));return Ge(Se(l,pt(x,y),Ue(([O,M,R])=>{if(M.groupIndices.length>0){if(Dt(M.sizeTree))return M;let A=Wa();const T=_n(E);let I=0,D=0,N=0;for(;I<-O;){N=T[D];const L=T[D+1]-N-1;D++,I+=L+1}if(A=Po(M.sizeTree).reduce((L,{k:V,v:J})=>fr(L,Math.max(0,V+O),J),A),I!==-O){const L=Lu(M.sizeTree,N);A=fr(A,0,L);const V=Yr(M.sizeTree,-O+1)[1];A=fr(A,1,V)}return{...M,sizeTree:A,...xy(M.offsetTree,0,A,R)}}else{const A=Po(M.sizeTree).reduce((T,{k:I,v:D})=>fr(T,Math.max(0,I+O),D),Wa());return{...M,sizeTree:A,...xy(M.offsetTree,0,A,R)}}})),x),{beforeUnshiftWith:P,data:p,defaultItemSize:g,firstItemIndex:u,fixedItemSize:d,gap:y,groupIndices:h,itemSize:m,listRefresh:C,shiftWith:l,shiftWithOffset:S,sizeRanges:t,sizes:x,statefulTotalCount:i,totalCount:n,trackItemSizes:w,unshiftWith:o}},Mt(no,Jv),{singleton:!0});function i9(r){return r.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{groupIndices:[],totalCount:0})}const gS=xt(([{groupIndices:r,sizes:e,totalCount:t},{headerHeight:n,scrollTop:i}])=>{const o=Et(),l=Et(),u=gr(Se(o,Ue(i9)));return Ge(Se(u,Ue(h=>h.totalCount)),t),Ge(Se(u,Ue(h=>h.groupIndices)),r),Ge(Se(cn(i,e,n),st(([h,d])=>cf(d)),Ue(([h,d,g])=>Yr(d.groupOffsetTree,Math.max(h-g,0),"v")[0]),jt(),Ue(h=>[h])),l),{groupCounts:o,topItemsIndexes:l}},Mt(Ti,$n)),ro=xt(([{log:r}])=>{const e=De(!1),t=gr(Se(e,st(n=>n),jt()));return Tt(e,n=>{n&&_n(r)("props updated",{},ir.DEBUG)}),{didMount:t,propsReady:e}},Mt(no),{singleton:!0}),s9=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function yS(r){const e=typeof r=="number"?{index:r}:r;return e.align||(e.align="start"),(!e.behavior||!s9)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const tc=xt(([{gap:r,listRefresh:e,sizes:t,totalCount:n},{fixedFooterHeight:i,fixedHeaderHeight:o,footerHeight:l,headerHeight:u,scrollingInProgress:h,scrollTo:d,smoothScrollTargetReached:g,viewportHeight:m},{log:p}])=>{const y=Et(),b=Et(),x=De(0);let E=null,w=null,C=null;function P(){E&&(E(),E=null),C&&(C(),C=null),w&&(clearTimeout(w),w=null),ht(h,!1)}return Ge(Se(y,pt(t,m,n,x,u,l,p),pt(r,o,i),Ue(([[S,O,M,R,A,T,I,D],N,L,V])=>{const J=yS(S),{align:re,behavior:Z,offset:ie}=J,G=R-1,W=mS(J,O,G);let B=ju(W,O.offsetTree,N)+T;re==="end"?(B+=L+Yr(O.sizeTree,W)[1]-M+V,W===G&&(B+=I)):re==="center"?B+=(L+Yr(O.sizeTree,W)[1]-M+V)/2:B-=A,ie&&(B+=ie);const U=H=>{P(),H?(D("retrying to scroll to",{location:S},ir.DEBUG),ht(y,S)):(ht(b,!0),D("list did not change, scroll successful",{},ir.DEBUG))};if(P(),Z==="smooth"){let H=!1;C=Tt(e,ne=>{H=H||ne}),E=Ci(g,()=>{U(H)})}else E=Ci(Se(e,o9(150)),U);return w=setTimeout(()=>{P()},1200),ht(h,!0),D("scrolling from index to",{behavior:Z,index:W,top:B},ir.DEBUG),{behavior:Z,top:B}})),d),{scrollTargetReached:b,scrollToIndex:y,topListHeight:x}},Mt(Ti,$n,no),{singleton:!0});function o9(r){return e=>{const t=setTimeout(()=>{e(!1)},r);return n=>{n&&(e(!0),clearTimeout(t))}}}function Yv(r,e){r==0?e():requestAnimationFrame(()=>{Yv(r-1,e)})}function Xv(r,e){const t=e-1;return typeof r=="number"?r:r.index==="LAST"?t:r.index}const nc=xt(([{defaultItemSize:r,listRefresh:e,sizes:t},{scrollTop:n},{scrollTargetReached:i,scrollToIndex:o},{didMount:l}])=>{const u=De(!0),h=De(0),d=De(!0);return Ge(Se(l,pt(h),st(([g,m])=>!!m),hi(!1)),u),Ge(Se(l,pt(h),st(([g,m])=>!!m),hi(!1)),d),Tt(Se(cn(e,l),pt(u,t,r,d),st(([[,g],m,{sizeTree:p},y,b])=>g&&(!Dt(p)||$v(y))&&!m&&!b),pt(h)),([,g])=>{Ci(i,()=>{ht(d,!0)}),Yv(4,()=>{Ci(n,()=>{ht(u,!0)}),ht(o,g)})}),{initialItemFinalLocationReached:d,initialTopMostItemIndex:h,scrolledToInitialItem:u}},Mt(Ti,$n,tc,ro),{singleton:!0});function vS(r,e){return Math.abs(r-e)<1.01}const Bu="up",Eu="down",a9="none",l9={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},u9=0,rc=xt(([{footerHeight:r,headerHeight:e,scrollBy:t,scrollContainerState:n,scrollTop:i,viewportHeight:o}])=>{const l=De(!1),u=De(!0),h=Et(),d=Et(),g=De(4),m=De(u9),p=Fn(Se(nC(Se(lt(i),el(1),hi(!0)),Se(lt(i),el(1),hi(!1),tC(100))),jt()),!1),y=Fn(Se(nC(Se(t,hi(!0)),Se(t,hi(!1),tC(200))),jt()),!1);Ge(Se(cn(lt(i),lt(m)),Ue(([C,P])=>C<=P),jt()),u),Ge(Se(u,Fs(50)),d);const b=gr(Se(cn(n,lt(o),lt(e),lt(r),lt(g)),fi((C,[{scrollHeight:P,scrollTop:S},O,M,R,A])=>{const T=S+O-P>-A,I={scrollHeight:P,scrollTop:S,viewportHeight:O};if(T){let N,L;return S>C.state.scrollTop?(N="SCROLLED_DOWN",L=C.state.scrollTop-S):(N="SIZE_DECREASED",L=C.state.scrollTop-S||C.scrollTopDelta),{atBottom:!0,atBottomBecause:N,scrollTopDelta:L,state:I}}let D;return I.scrollHeight>C.state.scrollHeight?D="SIZE_INCREASED":O<C.state.viewportHeight?D="VIEWPORT_HEIGHT_DECREASING":S<C.state.scrollTop?D="SCROLLING_UPWARDS":D="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:D,state:I}},l9),jt((C,P)=>C&&C.atBottom===P.atBottom))),x=Fn(Se(n,fi((C,{scrollHeight:P,scrollTop:S,viewportHeight:O})=>{if(vS(C.scrollHeight,P))return{changed:!1,jump:0,scrollHeight:P,scrollTop:S};{const M=P-(S+O)<1;return C.scrollTop!==S&&M?{changed:!0,jump:C.scrollTop-S,scrollHeight:P,scrollTop:S}:{changed:!0,jump:0,scrollHeight:P,scrollTop:S}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),st(C=>C.changed),Ue(C=>C.jump)),0);Ge(Se(b,Ue(C=>C.atBottom)),l),Ge(Se(l,Fs(50)),h);const E=De(Eu);Ge(Se(n,Ue(({scrollTop:C})=>C),jt(),fi((C,P)=>_n(y)?{direction:C.direction,prevScrollTop:P}:{direction:P<C.prevScrollTop?Bu:Eu,prevScrollTop:P},{direction:Eu,prevScrollTop:0}),Ue(C=>C.direction)),E),Ge(Se(n,Fs(50),hi(a9)),E);const w=De(0);return Ge(Se(p,st(C=>!C),hi(0)),w),Ge(Se(i,Fs(100),pt(p),st(([C,P])=>!!P),fi(([C,P],[S])=>[P,S],[0,0]),Ue(([C,P])=>P-C)),w),{atBottomState:b,atBottomStateChange:h,atBottomThreshold:g,atTopStateChange:d,atTopThreshold:m,isAtBottom:l,isAtTop:u,isScrolling:p,lastJumpDueToItemResize:x,scrollDirection:E,scrollVelocity:w}},Mt($n)),yd="top",vd="bottom",oC="none";function aC(r,e,t){return typeof r=="number"?t===Bu&&e===yd||t===Eu&&e===vd?r:0:t===Bu?e===yd?r.main:r.reverse:e===vd?r.main:r.reverse}function lC(r,e){var t;return typeof r=="number"?r:(t=r[e])!=null?t:0}const Zv=xt(([{deviation:r,fixedHeaderHeight:e,headerHeight:t,scrollTop:n,viewportHeight:i}])=>{const o=Et(),l=De(0),u=De(0),h=De(0),d=Fn(Se(cn(lt(n),lt(i),lt(t),lt(o,Fu),lt(h),lt(l),lt(e),lt(r),lt(u)),Ue(([g,m,p,[y,b],x,E,w,C,P])=>{const S=g-C,O=E+w,M=Math.max(p-S,0);let R=oC;const A=lC(P,yd),T=lC(P,vd);return y-=C,y+=p+w,b+=p+w,b-=C,y>g+O-A&&(R=Bu),b<g-M+m+T&&(R=Eu),R!==oC?[Math.max(S-p-aC(x,yd,R)-A,0),S-M-w+m+aC(x,vd,R)+T]:null}),st(g=>g!=null),jt(Fu)),[0,0]);return{increaseViewportBy:u,listBoundary:o,overscan:h,topListHeight:l,visibleRange:d}},Mt($n),{singleton:!0});function c9(r,e,t){if(cf(e)){const n=pS(r,e);return[{index:Yr(e.groupOffsetTree,n)[0],offset:0,size:0},{data:t==null?void 0:t[0],index:n,offset:0,size:0}]}return[{data:t==null?void 0:t[0],index:r,offset:0,size:0}]}const zg={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Gh(r,e,t,n,i,o){const{lastIndex:l,lastOffset:u,lastSize:h}=i;let d=0,g=0;if(r.length>0){d=r[0].offset;const x=r[r.length-1];g=x.offset+x.size}const m=t-l,p=u+m*h+(m-1)*n,y=d,b=p-g;return{bottom:g,firstItemIndex:o,items:uC(r,i,o),offsetBottom:b,offsetTop:d,top:y,topItems:uC(e,i,o),topListHeight:e.reduce((x,E)=>E.size+x,0),totalCount:t}}function _S(r,e,t,n,i,o){let l=0;if(t.groupIndices.length>0)for(const g of t.groupIndices){if(g-l>=r)break;l++}const u=r+l,h=Xv(e,u),d=Array.from({length:u}).map((g,m)=>({data:o[m+h],index:m+h,offset:0,size:0}));return Gh(d,[],u,i,t,n)}function uC(r,e,t){if(r.length===0)return[];if(!cf(e))return r.map(d=>({...d,index:d.index+t,originalIndex:d.index}));const n=r[0].index,i=r[r.length-1].index,o=[],l=uf(e.groupOffsetTree,n,i);let u,h=0;for(const d of r){(!u||u.end<d.index)&&(u=l.shift(),h=e.groupIndices.indexOf(u.start));let g;d.index===u.start?g={index:h,type:"group"}:g={groupIndex:h,index:d.index-(h+1)+t},o.push({...g,data:d.data,offset:d.offset,originalIndex:d.index,size:d.size})}return o}const $o=xt(([{data:r,firstItemIndex:e,gap:t,sizes:n,totalCount:i},o,{listBoundary:l,topListHeight:u,visibleRange:h},{initialTopMostItemIndex:d,scrolledToInitialItem:g},{topListHeight:m},p,{didMount:y},{recalcInProgress:b}])=>{const x=De([]),E=De(0),w=Et();Ge(o.topItemsIndexes,x);const C=Fn(Se(cn(y,b,lt(h,Fu),lt(i),lt(n),lt(d),g,lt(x),lt(e),lt(t),r),st(([M,R,,A,,,,,,,T])=>{const I=T&&T.length!==A;return M&&!R&&!I}),Ue(([,,[M,R],A,T,I,D,N,L,V,J])=>{const re=T,{offsetTree:Z,sizeTree:ie}=re,G=_n(E);if(A===0)return{...zg,totalCount:A};if(M===0&&R===0)return G===0?{...zg,totalCount:A}:_S(G,I,T,L,V,J||[]);if(Dt(ie))return G>0?null:Gh(c9(Xv(I,A),re,J),[],A,V,re,L);const W=[];if(N.length>0){const ee=N[0],$=N[N.length-1];let Y=0;for(const Q of uf(ie,ee,$)){const te=Q.value,ae=Math.max(Q.start,ee),ge=Math.min(Q.end,$);for(let Ce=ae;Ce<=ge;Ce++)W.push({data:J==null?void 0:J[Ce],index:Ce,offset:Y,size:te}),Y+=te}}if(!D)return Gh([],W,A,V,re,L);const B=N.length>0?N[N.length-1]+1:0,U=Xj(Z,M,R,B);if(U.length===0)return null;const H=A-1,ne=lf([],ee=>{for(const $ of U){const Y=$.value;let Q=Y.offset,te=$.start;const ae=Y.size;if(Y.offset<M){te+=Math.floor((M-Y.offset+V)/(ae+V));const Ce=te-$.start;Q+=Ce*ae+Ce*V}te<B&&(Q+=(B-te)*ae,te=B);const ge=Math.min($.end,H);for(let Ce=te;Ce<=ge&&!(Q>=R);Ce++)ee.push({data:J==null?void 0:J[Ce],index:Ce,offset:Q,size:ae}),Q+=ae+V}});return Gh(ne,W,A,V,re,L)}),st(M=>M!==null),jt()),zg);Ge(Se(r,st($v),Ue(M=>M==null?void 0:M.length)),i),Ge(Se(C,Ue(M=>M.topListHeight)),m),Ge(m,u),Ge(Se(C,Ue(M=>[M.top,M.bottom])),l),Ge(Se(C,Ue(M=>M.items)),w);const P=gr(Se(C,st(({items:M})=>M.length>0),pt(i,r),st(([{items:M},R])=>M[M.length-1].originalIndex===R-1),Ue(([,M,R])=>[M-1,R]),jt(Fu),Ue(([M])=>M))),S=gr(Se(C,Fs(200),st(({items:M,topItems:R})=>M.length>0&&M[0].originalIndex===R.length),Ue(({items:M})=>M[0].index),jt())),O=gr(Se(C,st(({items:M})=>M.length>0),Ue(({items:M})=>{let R=0,A=M.length-1;for(;M[R].type==="group"&&R<A;)R++;for(;M[A].type==="group"&&A>R;)A--;return{endIndex:M[A].index,startIndex:M[R].index}}),jt(dS)));return{endReached:P,initialItemCount:E,itemsRendered:w,listState:C,rangeChanged:O,startReached:S,topItemsIndexes:x,...p}},Mt(Ti,gS,Zv,nc,tc,rc,ro,Jv),{singleton:!0}),wS=xt(([{fixedFooterHeight:r,fixedHeaderHeight:e,footerHeight:t,headerHeight:n},{listState:i}])=>{const o=Et(),l=Fn(Se(cn(t,r,n,e,i),Ue(([u,h,d,g,m])=>u+h+d+g+m.offsetBottom+m.bottom)),0);return Ge(lt(l),o),{totalListHeight:l,totalListHeightChanged:o}},Mt($n,$o),{singleton:!0}),h9=xt(([{viewportHeight:r},{totalListHeight:e}])=>{const t=De(!1),n=Fn(Se(cn(t,r,e),st(([i])=>i),Ue(([,i,o])=>Math.max(0,i-o)),Fs(0),jt()),0);return{alignToBottom:t,paddingTopAddition:n}},Mt($n,wS),{singleton:!0});function cC(r){return r?r==="smooth"?"smooth":"auto":!1}const d9=(r,e)=>typeof r=="function"?cC(r(e)):e&&cC(r),f9=xt(([{listRefresh:r,totalCount:e,fixedItemSize:t},{atBottomState:n,isAtBottom:i},{scrollToIndex:o},{scrolledToInitialItem:l},{didMount:u,propsReady:h},{log:d},{scrollingInProgress:g}])=>{const m=De(!1),p=Et();let y=null;function b(E){ht(o,{align:"end",behavior:E,index:"LAST"})}Tt(Se(cn(Se(lt(e),el(1)),u),pt(lt(m),i,l,g),Ue(([[E,w],C,P,S,O])=>{let M=w&&S,R="auto";return M&&(R=d9(C,P||O),M=M&&!!R),{followOutputBehavior:R,shouldFollow:M,totalCount:E}}),st(({shouldFollow:E})=>E)),({followOutputBehavior:E,totalCount:w})=>{y&&(y(),y=null),_n(t)?requestAnimationFrame(()=>{_n(d)("following output to ",{totalCount:w},ir.DEBUG),b(E)}):y=Ci(r,()=>{_n(d)("following output to ",{totalCount:w},ir.DEBUG),b(E),y=null})});function x(E){const w=Ci(n,C=>{E&&!C.atBottom&&C.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(_n(d)("scrolling to bottom due to increased size",{},ir.DEBUG),b("auto"))});setTimeout(w,100)}return Tt(Se(cn(lt(m),e,h),st(([E,,w])=>E&&w),fi(({value:E},[,w])=>({refreshed:E===w,value:w}),{refreshed:!1,value:0}),st(({refreshed:E})=>E),pt(m,e)),([,E])=>{_n(l)&&x(E!==!1)}),Tt(p,()=>{x(_n(m)!==!1)}),Tt(cn(lt(m),n),([E,w])=>{E&&!w.atBottom&&w.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&b("auto")}),{autoscrollToBottom:p,followOutput:m}},Mt(Ti,rc,tc,nc,ro,no,$n)),p9=xt(([{data:r,firstItemIndex:e,gap:t,sizes:n},{initialTopMostItemIndex:i},{initialItemCount:o,listState:l},{didMount:u}])=>(Ge(Se(u,pt(o),st(([,h])=>h!==0),pt(i,n,e,t,r),Ue(([[,h],d,g,m,p,y=[]])=>_S(h,d,g,m,p,y))),l),{}),Mt(Ti,nc,$o,ro),{singleton:!0}),m9=xt(([{didMount:r},{scrollTo:e},{listState:t}])=>{const n=De(0);return Tt(Se(r,pt(n),st(([,i])=>i!==0),Ue(([,i])=>({top:i}))),i=>{Ci(Se(t,el(1),st(o=>o.items.length>1)),()=>{requestAnimationFrame(()=>{ht(e,i)})})}),{initialScrollTop:n}},Mt(ro,$n,$o),{singleton:!0}),g9=({itemBottom:r,itemTop:e,locationParams:{align:t,behavior:n,...i},viewportBottom:o,viewportTop:l})=>e<l?{...i,align:t??"start",behavior:n}:r>o?{...i,align:t??"end",behavior:n}:null,y9=xt(([{gap:r,sizes:e,totalCount:t},{fixedFooterHeight:n,fixedHeaderHeight:i,headerHeight:o,scrollingInProgress:l,scrollTop:u,viewportHeight:h},{scrollToIndex:d}])=>{const g=Et();return Ge(Se(g,pt(e,h,t,o,i,n,u),pt(r),Ue(([[m,p,y,b,x,E,w,C],P])=>{const{align:S,behavior:O,calculateViewLocation:M=g9,done:R,...A}=m,T=mS(m,p,b-1),I=ju(T,p.offsetTree,P)+x+E,D=I+Yr(p.sizeTree,T)[1],N=C+E,L=C+y-w,V=M({itemBottom:D,itemTop:I,locationParams:{align:S,behavior:O,...A},viewportBottom:L,viewportTop:N});return V?R&&Ci(Se(l,st(J=>!J),el(_n(l)?1:2)),R):R&&R(),V}),st(m=>m!==null)),d),{scrollIntoView:g}},Mt(Ti,$n,tc,$o,no),{singleton:!0}),ES=xt(([{scrollVelocity:r}])=>{const e=De(!1),t=Et(),n=De(!1);return Ge(Se(r,pt(n,e,t),st(([i,o])=>!!o),Ue(([i,o,l,u])=>{const{enter:h,exit:d}=o;if(l){if(d(i,u))return!1}else if(h(i,u))return!0;return l}),jt()),e),Tt(Se(cn(e,r,t),pt(n)),([[i,o,l],u])=>{i&&u&&u.change&&u.change(o,l)}),{isSeeking:e,scrollSeekConfiguration:n,scrollSeekRangeChanged:t,scrollVelocity:r}},Mt(rc),{singleton:!0}),e0=xt(([{scrollContainerState:r,scrollTo:e}])=>{const t=Et(),n=Et(),i=Et(),o=De(!1),l=De(void 0);return Ge(Se(cn(t,n),Ue(([{scrollHeight:u,scrollTop:h,viewportHeight:d},{offsetTop:g}])=>({scrollHeight:u,scrollTop:Math.max(0,h-g),viewportHeight:d}))),r),Ge(Se(e,pt(n),Ue(([u,{offsetTop:h}])=>({...u,top:u.top+h}))),i),{customScrollParent:l,useWindowScroll:o,windowScrollContainerState:t,windowScrollTo:i,windowViewportRect:n}},Mt($n)),v9=xt(([{sizeRanges:r,sizes:e},{headerHeight:t,scrollTop:n},{initialTopMostItemIndex:i},{didMount:o},{useWindowScroll:l,windowScrollContainerState:u,windowViewportRect:h}])=>{const d=Et(),g=De(void 0),m=De(null),p=De(null);return Ge(u,m),Ge(h,p),Tt(Se(d,pt(e,n,l,m,p,t)),([y,b,x,E,w,C,P])=>{const S=e9(b.sizeTree);E&&w!==null&&C!==null&&(x=w.scrollTop-C.offsetTop),x-=P,y({ranges:S,scrollTop:x})}),Ge(Se(g,st($v),Ue(_9)),i),Ge(Se(o,pt(g),st(([,y])=>y!==void 0),jt(),Ue(([,y])=>y.ranges)),r),{getState:d,restoreStateFrom:g}},Mt(Ti,$n,nc,ro,e0));function _9(r){return{align:"start",index:0,offset:r.scrollTop}}const w9=xt(([{topItemsIndexes:r}])=>{const e=De(0);return Ge(Se(e,st(t=>t>=0),Ue(t=>Array.from({length:t}).map((n,i)=>i))),r),{topItemCount:e}},Mt($o));function CS(r){let e=!1,t;return()=>(e||(e=!0,t=r()),t)}const E9=CS(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),C9=xt(([{deviation:r,scrollBy:e,scrollingInProgress:t,scrollTop:n},{isAtBottom:i,isScrolling:o,lastJumpDueToItemResize:l,scrollDirection:u},{listState:h},{beforeUnshiftWith:d,gap:g,shiftWithOffset:m,sizes:p},{log:y},{recalcInProgress:b}])=>{const x=gr(Se(h,pt(l),fi(([,w,C,P],[{bottom:S,items:O,offsetBottom:M,totalCount:R},A])=>{const T=S+M;let I=0;return C===R&&w.length>0&&O.length>0&&(O[0].originalIndex===0&&w[0].originalIndex===0||(I=T-P,I!==0&&(I+=A))),[I,O,R,T]},[0,[],0,0]),st(([w])=>w!==0),pt(n,u,t,i,y,b),st(([,w,C,P,,,S])=>!S&&!P&&w!==0&&C===Bu),Ue(([[w],,,,,C])=>(C("Upward scrolling compensation",{amount:w},ir.DEBUG),w))));function E(w){w>0?(ht(e,{behavior:"auto",top:-w}),ht(r,0)):(ht(r,0),ht(e,{behavior:"auto",top:-w}))}return Tt(Se(x,pt(r,o)),([w,C,P])=>{P&&E9()?ht(r,C-w):E(-w)}),Tt(Se(cn(Fn(o,!1),r,b),st(([w,C,P])=>!w&&!P&&C!==0),Ue(([w,C])=>C),Fs(1)),E),Ge(Se(m,Ue(w=>({top:-w}))),e),Tt(Se(d,pt(p,g),Ue(([w,{groupIndices:C,lastSize:P,sizeTree:S},O])=>{function M(R){return R*(P+O)}if(C.length===0)return M(w);{let R=0;const A=Lu(S,0);let T=0,I=0;for(;T<w;){T++,R+=A;let D=C.length===I+1?1/0:C[I+1]-C[I]-1;T+D>w&&(R-=A,D=w-T+1),T+=D,R+=M(D),I++}return R}})),w=>{ht(r,w),requestAnimationFrame(()=>{ht(e,{top:w}),requestAnimationFrame(()=>{ht(r,0),ht(b,!1)})})}),{deviation:r}},Mt($n,rc,$o,Ti,no,Jv)),A9=xt(([r,e,t,n,i,o,l,u,h,d])=>({...r,...e,...t,...n,...i,...o,...l,...u,...h,...d}),Mt(Zv,p9,ro,ES,wS,m9,h9,e0,y9,no)),AS=xt(([{data:r,defaultItemSize:e,firstItemIndex:t,fixedItemSize:n,gap:i,groupIndices:o,itemSize:l,sizeRanges:u,sizes:h,statefulTotalCount:d,totalCount:g,trackItemSizes:m},{initialItemFinalLocationReached:p,initialTopMostItemIndex:y,scrolledToInitialItem:b},x,E,w,{listState:C,topItemsIndexes:P,...S},{scrollToIndex:O},M,{topItemCount:R},{groupCounts:A},T])=>(Ge(S.rangeChanged,T.scrollSeekRangeChanged),Ge(Se(T.windowViewportRect,Ue(I=>I.visibleHeight)),x.viewportHeight),{data:r,defaultItemHeight:e,firstItemIndex:t,fixedItemHeight:n,gap:i,groupCounts:A,initialItemFinalLocationReached:p,initialTopMostItemIndex:y,scrolledToInitialItem:b,sizeRanges:u,topItemCount:R,topItemsIndexes:P,totalCount:g,...w,groupIndices:o,itemSize:l,listState:C,scrollToIndex:O,statefulTotalCount:d,trackItemSizes:m,...S,...T,...x,sizes:h,...E}),Mt(Ti,nc,$n,v9,f9,$o,tc,C9,w9,gS,A9));function b9(r,e){const t={},n={};let i=0;const o=r.length;for(;i<o;)n[r[i]]=1,i+=1;for(const l in e)Object.hasOwn(n,l)||(t[l]=e[l]);return t}const Ih=typeof document<"u"?qe.useLayoutEffect:qe.useEffect;function bS(r,e,t){const n=Object.keys(e.required||{}),i=Object.keys(e.optional||{}),o=Object.keys(e.methods||{}),l=Object.keys(e.events||{}),u=qe.createContext({});function h(E,w){E.propsReady&&ht(E.propsReady,!1);for(const C of n){const P=E[e.required[C]];ht(P,w[C])}for(const C of i)if(C in w){const P=E[e.optional[C]];ht(P,w[C])}E.propsReady&&ht(E.propsReady,!0)}function d(E){return o.reduce((w,C)=>(w[C]=P=>{const S=E[e.methods[C]];ht(S,P)},w),{})}function g(E){return l.reduce((w,C)=>(w[C]=Mj(E[e.events[C]]),w),{})}const m=qe.forwardRef((E,w)=>{const{children:C,...P}=E,[S]=qe.useState(()=>lf(Uj(r),R=>{h(R,P)})),[O]=qe.useState(eC(g,S));Ih(()=>{for(const R of l)R in P&&Tt(O[R],P[R]);return()=>{Object.values(O).map(Gv)}},[P,O,S]),Ih(()=>{h(S,P)}),qe.useImperativeHandle(w,ZE(d(S)));const M=t;return _.jsx(u.Provider,{value:S,children:t?_.jsx(M,{...b9([...n,...i,...l],P),children:C}):C})}),p=E=>{const w=qe.useContext(u);return qe.useCallback(C=>{ht(w[E],C)},[w,E])},y=E=>{const w=qe.useContext(u)[E],C=qe.useCallback(P=>Tt(w,P),[w]);return qe.useSyncExternalStore(C,()=>_n(w),()=>_n(w))},b=E=>{const w=qe.useContext(u)[E],[C,P]=qe.useState(eC(_n,w));return Ih(()=>Tt(w,S=>{S!==C&&P(ZE(S))}),[w,C]),C},x=qe.version.startsWith("18")?y:b;return{Component:m,useEmitter:(E,w)=>{const C=qe.useContext(u)[E];Ih(()=>Tt(C,w),[w,C])},useEmitterValue:x,usePublisher:p}}const xS=qe.createContext(void 0),SS=qe.createContext(void 0),TS=typeof document<"u"?qe.useLayoutEffect:qe.useEffect;function Hg(r){return"self"in r}function x9(r){return"body"in r}function IS(r,e,t,n=fl,i,o){const l=qe.useRef(null),u=qe.useRef(null),h=qe.useRef(null),d=qe.useCallback(p=>{let y,b,x;const E=p.target;if(x9(E)||Hg(E)){const C=Hg(E)?E:E.defaultView;x=o?C.scrollX:C.scrollY,y=o?C.document.documentElement.scrollWidth:C.document.documentElement.scrollHeight,b=o?C.innerWidth:C.innerHeight}else x=o?E.scrollLeft:E.scrollTop,y=o?E.scrollWidth:E.scrollHeight,b=o?E.offsetWidth:E.offsetHeight;const w=()=>{r({scrollHeight:y,scrollTop:Math.max(x,0),viewportHeight:b})};p.suppressFlushSync?w():bF.flushSync(w),u.current!==null&&(x===u.current||x<=0||x===y-b)&&(u.current=null,e(!0),h.current&&(clearTimeout(h.current),h.current=null))},[r,e,o]);qe.useEffect(()=>{const p=i||l.current;return n(i||l.current),d({suppressFlushSync:!0,target:p}),p.addEventListener("scroll",d,{passive:!0}),()=>{n(null),p.removeEventListener("scroll",d)}},[l,d,t,n,i]);function g(p){const y=l.current;if(!y||(o?"offsetWidth"in y&&y.offsetWidth===0:"offsetHeight"in y&&y.offsetHeight===0))return;const b=p.behavior==="smooth";let x,E,w;Hg(y)?(E=Math.max(Js(y.document.documentElement,o?"width":"height"),o?y.document.documentElement.scrollWidth:y.document.documentElement.scrollHeight),x=o?y.innerWidth:y.innerHeight,w=o?window.scrollX:window.scrollY):(E=y[o?"scrollWidth":"scrollHeight"],x=Js(y,o?"width":"height"),w=y[o?"scrollLeft":"scrollTop"]);const C=E-x;if(p.top=Math.ceil(Math.max(Math.min(C,p.top),0)),vS(x,E)||p.top===w){r({scrollHeight:E,scrollTop:w,viewportHeight:x}),b&&e(!0);return}b?(u.current=p.top,h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{h.current=null,u.current=null,e(!0)},1e3)):u.current=null,o&&(p={behavior:p.behavior,left:p.top}),y.scrollTo(p)}function m(p){o&&(p={behavior:p.behavior,left:p.top}),l.current.scrollBy(p)}return{scrollByCallback:m,scrollerRef:l,scrollToCallback:g}}const Wg="-webkit-sticky",hC="sticky",t0=CS(()=>{if(typeof document>"u")return hC;const r=document.createElement("div");return r.style.position=Wg,r.style.position===Wg?Wg:hC});function n0(r){return r}const S9=xt(()=>{const r=De(h=>`Item ${h}`),e=De(null),t=De(h=>`Group ${h}`),n=De({}),i=De(n0),o=De("div"),l=De(fl),u=(h,d=null)=>Fn(Se(n,Ue(g=>g[h]),jt()),d);return{components:n,computeItemKey:i,context:e,EmptyPlaceholder:u("EmptyPlaceholder"),FooterComponent:u("Footer"),GroupComponent:u("Group","div"),groupContent:t,HeaderComponent:u("Header"),HeaderFooterTag:o,ItemComponent:u("Item","div"),itemContent:r,ListComponent:u("List","div"),ScrollerComponent:u("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),TopItemListComponent:u("TopItemList")}}),T9=xt(([r,e])=>({...r,...e}),Mt(AS,S9)),I9=({height:r})=>_.jsx("div",{style:{height:r}}),D9={overflowAnchor:"none",position:t0(),zIndex:1},DS={overflowAnchor:"none"},k9={...DS,display:"inline-block",height:"100%"},dC=qe.memo(function({showTopList:r=!1}){const e=ct("listState"),t=Tr("sizeRanges"),n=ct("useWindowScroll"),i=ct("customScrollParent"),o=Tr("windowScrollContainerState"),l=Tr("scrollContainerState"),u=i||n?o:l,h=ct("itemContent"),d=ct("context"),g=ct("groupContent"),m=ct("trackItemSizes"),p=ct("itemSize"),y=ct("log"),b=Tr("gap"),x=ct("horizontalDirection"),{callbackRef:E}=Hj(t,p,m,r?fl:u,y,b,i,x,ct("skipAnimationFrameInResizeObserver")),[w,C]=qe.useState(0);r0("deviation",V=>{w!==V&&C(V)});const P=ct("EmptyPlaceholder"),S=ct("ScrollSeekPlaceholder")||I9,O=ct("ListComponent"),M=ct("ItemComponent"),R=ct("GroupComponent"),A=ct("computeItemKey"),T=ct("isSeeking"),I=ct("groupIndices").length>0,D=ct("alignToBottom"),N=ct("initialItemFinalLocationReached"),L=r?{}:{boxSizing:"border-box",...x?{display:"inline-block",height:"100%",marginLeft:w!==0?w:D?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:w!==0?w:D?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...N?{}:{visibility:"hidden"}};return!r&&e.totalCount===0&&P?_.jsx(P,{...Sn(P,d)}):_.jsx(O,{...Sn(O,d),"data-testid":r?"virtuoso-top-item-list":"virtuoso-item-list",ref:E,style:L,children:(r?e.topItems:e.items).map(V=>{const J=V.originalIndex,re=A(J+e.firstItemIndex,V.data,d);return T?ve.createElement(S,{...Sn(S,d),height:V.size,index:V.index,key:re,type:V.type||"item",...V.type==="group"?{}:{groupIndex:V.groupIndex}}):V.type==="group"?ve.createElement(R,{...Sn(R,d),"data-index":J,"data-item-index":V.index,"data-known-size":V.size,key:re,style:D9},g(V.index,d)):ve.createElement(M,{...Sn(M,d),...O9(M,V.data),"data-index":J,"data-item-group-index":V.groupIndex,"data-item-index":V.index,"data-known-size":V.size,key:re,style:x?k9:DS},I?h(V.index,V.groupIndex,V.data,d):h(V.index,V.data,d))})})}),R9={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},P9={outline:"none",overflowX:"auto",position:"relative"},hf=r=>({height:"100%",position:"absolute",top:0,width:"100%",...r?{display:"flex",flexDirection:"column"}:{}}),N9={position:t0(),top:0,width:"100%",zIndex:1};function Sn(r,e){if(typeof r!="string")return{context:e}}function O9(r,e){return{item:typeof r=="string"?void 0:e}}const L9=qe.memo(function(){const r=ct("HeaderComponent"),e=Tr("headerHeight"),t=ct("HeaderFooterTag"),n=Wo(qe.useMemo(()=>o=>{e(Js(o,"height"))},[e]),!0,ct("skipAnimationFrameInResizeObserver")),i=ct("context");return r?_.jsx(t,{ref:n,children:_.jsx(r,{...Sn(r,i)})}):null}),F9=qe.memo(function(){const r=ct("FooterComponent"),e=Tr("footerHeight"),t=ct("HeaderFooterTag"),n=Wo(qe.useMemo(()=>o=>{e(Js(o,"height"))},[e]),!0,ct("skipAnimationFrameInResizeObserver")),i=ct("context");return r?_.jsx(t,{ref:n,children:_.jsx(r,{...Sn(r,i)})}):null});function kS({useEmitter:r,useEmitterValue:e,usePublisher:t}){return qe.memo(function({children:n,style:i,...o}){const l=t("scrollContainerState"),u=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),d=e("scrollerRef"),g=e("context"),m=e("horizontalDirection")||!1,{scrollByCallback:p,scrollerRef:y,scrollToCallback:b}=IS(l,h,u,d,void 0,m);return r("scrollTo",b),r("scrollBy",p),_.jsx(u,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:y,style:{...m?P9:R9,...i},tabIndex:0,...o,...Sn(u,g),children:n})})}function RS({useEmitter:r,useEmitterValue:e,usePublisher:t}){return qe.memo(function({children:n,style:i,...o}){const l=t("windowScrollContainerState"),u=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),d=e("totalListHeight"),g=e("deviation"),m=e("customScrollParent"),p=e("context"),y=qe.useRef(null),b=e("scrollerRef"),{scrollByCallback:x,scrollerRef:E,scrollToCallback:w}=IS(l,h,u,b,m);return TS(()=>{var C;return E.current=m||((C=y.current)==null?void 0:C.ownerDocument.defaultView),()=>{E.current=null}},[E,m]),r("windowScrollTo",w),r("scrollBy",x),_.jsx(u,{ref:y,"data-virtuoso-scroller":!0,style:{position:"relative",...i,...d!==0?{height:d+g}:{}},...o,...Sn(u,p),children:n})})}const j9=({children:r})=>{const e=qe.useContext(xS),t=Tr("viewportHeight"),n=Tr("fixedItemHeight"),i=ct("alignToBottom"),o=ct("horizontalDirection"),l=qe.useMemo(()=>iS(t,h=>Js(h,o?"width":"height")),[t,o]),u=Wo(l,!0,ct("skipAnimationFrameInResizeObserver"));return qe.useEffect(()=>{e&&(t(e.viewportHeight),n(e.itemHeight))},[e,t,n]),_.jsx("div",{"data-viewport-type":"element",ref:u,style:hf(i),children:r})},B9=({children:r})=>{const e=qe.useContext(xS),t=Tr("windowViewportRect"),n=Tr("fixedItemHeight"),i=ct("customScrollParent"),o=oS(t,i,ct("skipAnimationFrameInResizeObserver")),l=ct("alignToBottom");return qe.useEffect(()=>{e&&(n(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,n]),_.jsx("div",{"data-viewport-type":"window",ref:o,style:hf(l),children:r})},M9=({children:r})=>{const e=ct("TopItemListComponent")||"div",t=ct("headerHeight"),n={...N9,marginTop:`${t}px`},i=ct("context");return _.jsx(e,{style:n,...Sn(e,i),children:r})},q9=qe.memo(function(r){const e=ct("useWindowScroll"),t=ct("topItemsIndexes").length>0,n=ct("customScrollParent"),i=ct("context"),o=n||e?z9:V9,l=n||e?B9:j9;return _.jsxs(o,{...r,...Sn(o,i),children:[t&&_.jsx(M9,{children:_.jsx(dC,{showTopList:!0})}),_.jsxs(l,{children:[_.jsx(L9,{}),_.jsx(dC,{}),_.jsx(F9,{})]})]})}),{Component:U9,useEmitter:r0,useEmitterValue:ct,usePublisher:Tr}=bS(T9,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},q9),V9=kS({useEmitter:r0,useEmitterValue:ct,usePublisher:Tr}),z9=RS({useEmitter:r0,useEmitterValue:ct,usePublisher:Tr}),H9=U9,W9=xt(()=>{const r=De(d=>_.jsxs("td",{children:["Item $",d]})),e=De(null),t=De(d=>_.jsxs("td",{colSpan:1e3,children:["Group ",d]})),n=De(null),i=De(null),o=De({}),l=De(n0),u=De(fl),h=(d,g=null)=>Fn(Se(o,Ue(m=>m[d]),jt()),g);return{components:o,computeItemKey:l,context:e,EmptyPlaceholder:h("EmptyPlaceholder"),FillerRow:h("FillerRow"),fixedFooterContent:i,fixedHeaderContent:n,itemContent:r,groupContent:t,ScrollerComponent:h("Scroller","div"),scrollerRef:u,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder"),TableBodyComponent:h("TableBody","tbody"),TableComponent:h("Table","table"),TableFooterComponent:h("TableFoot","tfoot"),TableHeadComponent:h("TableHead","thead"),TableRowComponent:h("TableRow","tr"),GroupComponent:h("Group","tr")}});Mt(AS,W9);t0();const fC={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},$9={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:pC,floor:_d,max:Cu,min:$g,round:mC}=Math;function gC(r,e,t){return Array.from({length:e-r+1}).map((n,i)=>({data:t===null?null:t[i+r],index:i+r}))}function G9(r){return{...$9,items:r}}function Dh(r,e){return r&&r.width===e.width&&r.height===e.height}function K9(r,e){return r&&r.column===e.column&&r.row===e.row}const J9=xt(([{increaseViewportBy:r,listBoundary:e,overscan:t,visibleRange:n},{footerHeight:i,headerHeight:o,scrollBy:l,scrollContainerState:u,scrollTo:h,scrollTop:d,smoothScrollTargetReached:g,viewportHeight:m},p,y,{didMount:b,propsReady:x},{customScrollParent:E,useWindowScroll:w,windowScrollContainerState:C,windowScrollTo:P,windowViewportRect:S},O])=>{const M=De(0),R=De(0),A=De(fC),T=De({height:0,width:0}),I=De({height:0,width:0}),D=Et(),N=Et(),L=De(0),V=De(null),J=De({column:0,row:0}),re=Et(),Z=Et(),ie=De(!1),G=De(0),W=De(!0),B=De(!1),U=De(!1);Tt(Se(b,pt(G),st(([Q,te])=>!!te)),()=>{ht(W,!1)}),Tt(Se(cn(b,W,I,T,G,B),st(([Q,te,ae,ge,,Ce])=>Q&&!te&&ae.height!==0&&ge.height!==0&&!Ce)),([,,,,Q])=>{ht(B,!0),Yv(1,()=>{ht(D,Q)}),Ci(Se(d),()=>{ht(e,[0,0]),ht(W,!0)})}),Ge(Se(Z,st(Q=>Q!=null&&Q.scrollTop>0),hi(0)),R),Tt(Se(b,pt(Z),st(([,Q])=>Q!=null)),([,Q])=>{Q&&(ht(T,Q.viewport),ht(I,Q.item),ht(J,Q.gap),Q.scrollTop>0&&(ht(ie,!0),Ci(Se(d,el(1)),te=>{ht(ie,!1)}),ht(h,{top:Q.scrollTop})))}),Ge(Se(T,Ue(({height:Q})=>Q)),m),Ge(Se(cn(lt(T,Dh),lt(I,Dh),lt(J,(Q,te)=>Q&&Q.column===te.column&&Q.row===te.row),lt(d)),Ue(([Q,te,ae,ge])=>({gap:ae,item:te,scrollTop:ge,viewport:Q}))),re),Ge(Se(cn(lt(M),n,lt(J,K9),lt(I,Dh),lt(T,Dh),lt(V),lt(R),lt(ie),lt(W),lt(G)),st(([,,,,,,,Q])=>!Q),Ue(([Q,[te,ae],ge,Ce,Re,Pe,Ne,,Fe,Ze])=>{const{column:ue,row:fe}=ge,{height:Ee,width:Te}=Ce,{width:ye}=Re;if(Ne===0&&(Q===0||ye===0))return fC;if(Te===0){const kt=Xv(Ze,Q),Zt=kt+Math.max(Ne-1,0);return G9(gC(kt,Zt,Pe))}const $e=PS(ye,Te,ue);let Le,ze;Fe?te===0&&ae===0&&Ne>0?(Le=0,ze=Ne-1):(Le=$e*_d((te+fe)/(Ee+fe)),ze=$e*pC((ae+fe)/(Ee+fe))-1,ze=$g(Q-1,Cu(ze,$e-1)),Le=$g(ze,Cu(0,Le))):(Le=0,ze=-1);const Ke=gC(Le,ze,Pe),{bottom:nt,top:it}=yC(Re,ge,Ce,Ke),Gn=pC(Q/$e),vt=Gn*Ee+(Gn-1)*fe-nt;return{bottom:nt,itemHeight:Ee,items:Ke,itemWidth:Te,offsetBottom:vt,offsetTop:it,top:it}})),A),Ge(Se(V,st(Q=>Q!==null),Ue(Q=>Q.length)),M),Ge(Se(cn(T,I,A,J),st(([Q,te,{items:ae}])=>ae.length>0&&te.height!==0&&Q.height!==0),Ue(([Q,te,{items:ae},ge])=>{const{bottom:Ce,top:Re}=yC(Q,ge,te,ae);return[Re,Ce]}),jt(Fu)),e);const H=De(!1);Ge(Se(d,pt(H),Ue(([Q,te])=>te||Q!==0)),H);const ne=gr(Se(cn(A,M),st(([{items:Q}])=>Q.length>0),pt(H),st(([[Q,te],ae])=>{const ge=Q.items[Q.items.length-1].index===te-1;return(ae||Q.bottom>0&&Q.itemHeight>0&&Q.offsetBottom===0&&Q.items.length===te)&&ge}),Ue(([[,Q]])=>Q-1),jt())),ee=gr(Se(lt(A),st(({items:Q})=>Q.length>0&&Q[0].index===0),hi(0),jt())),$=gr(Se(lt(A),pt(ie),st(([{items:Q},te])=>Q.length>0&&!te),Ue(([{items:Q}])=>({endIndex:Q[Q.length-1].index,startIndex:Q[0].index})),jt(dS),Fs(0)));Ge($,y.scrollSeekRangeChanged),Ge(Se(D,pt(T,I,M,J),Ue(([Q,te,ae,ge,Ce])=>{const Re=yS(Q),{align:Pe,behavior:Ne,offset:Fe}=Re;let Ze=Re.index;Ze==="LAST"&&(Ze=ge-1),Ze=Cu(0,Ze,$g(ge-1,Ze));let ue=Sy(te,Ce,ae,Ze);return Pe==="end"?ue=mC(ue-te.height+ae.height):Pe==="center"&&(ue=mC(ue-te.height/2+ae.height/2)),Fe&&(ue+=Fe),{behavior:Ne,top:ue}})),h);const Y=Fn(Se(A,Ue(Q=>Q.offsetBottom+Q.bottom)),0);return Ge(Se(S,Ue(Q=>({height:Q.visibleHeight,width:Q.visibleWidth}))),T),{customScrollParent:E,data:V,deviation:L,footerHeight:i,gap:J,headerHeight:o,increaseViewportBy:r,initialItemCount:R,itemDimensions:I,overscan:t,restoreStateFrom:Z,scrollBy:l,scrollContainerState:u,scrollHeight:N,scrollTo:h,scrollToIndex:D,scrollTop:d,smoothScrollTargetReached:g,totalCount:M,useWindowScroll:w,viewportDimensions:T,windowScrollContainerState:C,windowScrollTo:P,windowViewportRect:S,...y,gridState:A,horizontalDirection:U,initialTopMostItemIndex:G,totalListHeight:Y,...p,endReached:ne,propsReady:x,rangeChanged:$,startReached:ee,stateChanged:re,stateRestoreInProgress:ie,...O}},Mt(Zv,$n,rc,ES,ro,e0,no));function PS(r,e,t){return Cu(1,_d((r+t)/(_d(e)+t)))}function yC(r,e,t,n){const{height:i}=t;if(i===void 0||n.length===0)return{bottom:0,top:0};const o=Sy(r,e,t,n[0].index);return{bottom:Sy(r,e,t,n[n.length-1].index)+i,top:o}}function Sy(r,e,t,n){const i=PS(r.width,t.width,e.column),o=_d(n/i),l=o*t.height+Cu(0,o-1)*e.row;return l>0?l+e.row:l}const Q9=xt(()=>{const r=De(m=>`Item ${m}`),e=De({}),t=De(null),n=De("virtuoso-grid-item"),i=De("virtuoso-grid-list"),o=De(n0),l=De("div"),u=De(fl),h=(m,p=null)=>Fn(Se(e,Ue(y=>y[m]),jt()),p),d=De(!1),g=De(!1);return Ge(lt(g),d),{components:e,computeItemKey:o,context:t,FooterComponent:h("Footer"),HeaderComponent:h("Header"),headerFooterTag:l,itemClassName:n,ItemComponent:h("Item","div"),itemContent:r,listClassName:i,ListComponent:h("List","div"),readyStateChanged:d,reportReadyState:g,ScrollerComponent:h("Scroller","div"),scrollerRef:u,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder","div")}}),Y9=xt(([r,e])=>({...r,...e}),Mt(J9,Q9)),X9=qe.memo(function(){const r=Vt("gridState"),e=Vt("listClassName"),t=Vt("itemClassName"),n=Vt("itemContent"),i=Vt("computeItemKey"),o=Vt("isSeeking"),l=Ir("scrollHeight"),u=Vt("ItemComponent"),h=Vt("ListComponent"),d=Vt("ScrollSeekPlaceholder"),g=Vt("context"),m=Ir("itemDimensions"),p=Ir("gap"),y=Vt("log"),b=Vt("stateRestoreInProgress"),x=Ir("reportReadyState"),E=Wo(qe.useMemo(()=>w=>{const C=w.parentElement.parentElement.scrollHeight;l(C);const P=w.firstChild;if(P){const{height:S,width:O}=P.getBoundingClientRect();m({height:S,width:O})}p({column:vC("column-gap",getComputedStyle(w).columnGap,y),row:vC("row-gap",getComputedStyle(w).rowGap,y)})},[l,m,p,y]),!0,!1);return TS(()=>{r.itemHeight>0&&r.itemWidth>0&&x(!0)},[r]),b?null:_.jsx(h,{className:e,ref:E,...Sn(h,g),"data-testid":"virtuoso-item-list",style:{paddingBottom:r.offsetBottom,paddingTop:r.offsetTop},children:r.items.map(w=>{const C=i(w.index,w.data,g);return o?_.jsx(d,{...Sn(d,g),height:r.itemHeight,index:w.index,width:r.itemWidth},C):ve.createElement(u,{...Sn(u,g),className:t,"data-index":w.index,key:C},n(w.index,w.data,g))})})}),Z9=qe.memo(function(){const r=Vt("HeaderComponent"),e=Ir("headerHeight"),t=Vt("headerFooterTag"),n=Wo(qe.useMemo(()=>o=>{e(Js(o,"height"))},[e]),!0,!1),i=Vt("context");return r?_.jsx(t,{ref:n,children:_.jsx(r,{...Sn(r,i)})}):null}),eB=qe.memo(function(){const r=Vt("FooterComponent"),e=Ir("footerHeight"),t=Vt("headerFooterTag"),n=Wo(qe.useMemo(()=>o=>{e(Js(o,"height"))},[e]),!0,!1),i=Vt("context");return r?_.jsx(t,{ref:n,children:_.jsx(r,{...Sn(r,i)})}):null}),tB=({children:r})=>{const e=qe.useContext(SS),t=Ir("itemDimensions"),n=Ir("viewportDimensions"),i=Wo(qe.useMemo(()=>o=>{n(o.getBoundingClientRect())},[n]),!0,!1);return qe.useEffect(()=>{e&&(n({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,n,t]),_.jsx("div",{ref:i,style:hf(!1),children:r})},nB=({children:r})=>{const e=qe.useContext(SS),t=Ir("windowViewportRect"),n=Ir("itemDimensions"),i=Vt("customScrollParent"),o=oS(t,i,!1);return qe.useEffect(()=>{e&&(n({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,n]),_.jsx("div",{ref:o,style:hf(!1),children:r})},rB=qe.memo(function({...r}){const e=Vt("useWindowScroll"),t=Vt("customScrollParent"),n=t||e?sB:iB,i=t||e?nB:tB,o=Vt("context");return _.jsx(n,{...r,...Sn(n,o),children:_.jsxs(i,{children:[_.jsx(Z9,{}),_.jsx(X9,{}),_.jsx(eB,{})]})})}),{useEmitter:NS,useEmitterValue:Vt,usePublisher:Ir}=bS(Y9,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},rB),iB=kS({useEmitter:NS,useEmitterValue:Vt,usePublisher:Ir}),sB=RS({useEmitter:NS,useEmitterValue:Vt,usePublisher:Ir});function vC(r,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${r} was not resolved to pixel value correctly`,e,ir.WARN),e==="normal"?0:parseInt(e??"0",10)}class oB extends Wv{getListHtml(){return _.jsx(_.Fragment,{children:_.jsx(H9,{className:this.props.ViewPortMCClassName||"flinnTechVirtuoso",style:{height:this.props.vHeight||"100%"},totalCount:this.list.length,itemContent:e=>{const t=this.list[e];return this.mapSection.getHtml({type:"div",content:this.getCellList(t)})}})})}}class aB extends Vx{constructor(){super(...arguments);le(this,"factory",{text:mj,attribute:of,custom:gj,customBuilt:Nj,img:nS,form:yj,del:zv,delIcon:XE,delCustom:XE,delText:vj,edit:Hv,editIcon:wj,editCustom:Ej,interactiveMap:Cj,addComponentButton:Aj,plain:bj,select:xj,logo:Sj,links:Tj,linkItem:Ij,logout:Dj,default:fn,map:Wv,order:kj,innerMap:Rj,backgroundImage:Pj,viewPortMap:oB})}}class i0{constructor(){le(this,"MCMapContainer","Map-Container");le(this,"MCMapSection","Map-Section");le(this,"MCLink","Map-Link");le(this,"MCCell","Map-Cell");le(this,"MCCustomDelItem","Map-Custom-Del-Item");le(this,"MCDelItem","Map-Del-Item");le(this,"MCDelImgItem","Map-Del-imgItem");le(this,"MCCustomEditItem","Map-Custom-Edit-Item");le(this,"MCEditImgItem","Map-Edit-imgItem");le(this,"MCEditItem","Map-Edit-Item");le(this,"MCAttributeItem","Map-Attribute-Item");le(this,"MCImgItem","Map-imgItem");le(this,"MCTextItem","Map-Text-Item");le(this,"MCActiveItem","Map-Active-Item");le(this,"MCCustom","");le(this,"MCBackgroundItem","background-item");le(this,"MCCellBackground","cell-background");le(this,"MCBackgroundLink","cell-background");le(this,"MCLogoItem","navLogo")}}class df extends i0{constructor(){super(...arguments);le(this,"MCSectionHover","DC-Map-Section:hover");le(this,"MCCustomDelItem","DC-Custom-Del-Item");le(this,"MCDelItem","DC-Del-Item");le(this,"MCDelImgItem","DC-Del-imgItem");le(this,"MCCustomEditItem","Map-Custom-Edit-Item");le(this,"MCEditImgItem","DC-Edit-imgItem");le(this,"MCEditItem","DC-Edit-Item")}}class ff extends df{constructor(){super(...arguments);le(this,"MCMapContainer","DR-Map-Container");le(this,"MCMapSection","DR-Map-Section")}}class lB extends ff{constructor(){super(...arguments);le(this,"MCMapContainer","DRW-Map-Container")}}class uB extends ff{constructor(){super(...arguments);le(this,"MCMapContainer","IM-Map-Container");le(this,"MCMapSection","IM-Map-Section");le(this,"MCMap","IM-Map");le(this,"MCAddButton","IM-addButton");le(this,"MCActiveItem","IM-Active-Item");le(this,"MCCell","IM-Cell")}}class cB extends ff{constructor(){super(...arguments);le(this,"MCActiveLink",this.MCActiveItem);le(this,"MCLinkItem",this.MCLink);le(this,"MCMapSection","SB-Map-Section")}}class hB extends df{constructor(){super(...arguments);le(this,"MCActiveLink",this.MCActiveItem);le(this,"MCLinkItem",this.MCLink);le(this,"MCMapSection","SB-link");le(this,"MCCell","SB-Cell-Link");le(this,"MCLink","SB-Map-Link");le(this,"MCLinkItem","SB-Map-Link")}}class dB extends df{constructor(){super(...arguments);le(this,"MCActiveLink",this.MCActiveItem);le(this,"MCLinkItem",this.MCLink)}}const fB=Object.freeze(Object.defineProperty({__proto__:null,DefaultColumn:df,DefaultRegistry:i0,DefaultRow:ff,DefaultWrapRow:lB,InteractiveMap:uB,Links:hB,SideBar:cB,TopBar:dB},Symbol.toStringTag,{value:"Module"}));class pB extends jv{constructor(){super(fB),this.factory.default=i0}}class mB{constructor(){le(this,"factory",{text:Mu,tag:OS,plain:_B,textAndTag:vB,textAndTag2:yB,bool:EB,textAttributeList:wB})}getFilter(e){if(e)return this.factory[e]}registerFilter(e,t){this.factory[e]=t}}function OS(r){let{list:e,attribute:t,tagList:n}=r;return e.length>0&&(e=e.filter(i=>!!n.find(l=>(t?l.getJson()[t]:l.getJson().connectedId)===i.getJson()._id))),e}function gB(r){let e=[];if(r.search&&r.list){const t=r.search.toLowerCase().split(" ").map(n=>n.trim());e=r.list.filter(n=>{const i=n.getJson()[r.attribute||"tags"];if(i){let o=i.split(r.splitStr||",");o=o.map(l=>l.toLowerCase());for(let l of t)if(o.includes(l))return!0}else return!1})}return e}function yB(r){let{list:e,attributes:t,search:n}=r,i=[],o=[],l=t.split(",");for(let h of l)o.push(Mu({...r,attribute:h}));let u=gB({...r});return i=[...o[0],...u,...o[1],...o[2]],i=s0(i),i}function vB(r){let{list:e,attribute:t,tagList:n,attribute2:i,attributeTag:o,search:l}=r,u=Mu({...r,attribute:t}),h=OS({...r,attribute:o}),d=Mu({...r,attribute:i});return e=[...u,...h,...d],s0(e)}function s0(r){const e=new Map;return r.forEach(t=>{const i=t.getJson()._id;e.has(i)||e.set(i,t)}),Array.from(e.values())}function Mu(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var o;return(o=i.getJson()[t])==null?void 0:o.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function _B(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var o;return(o=i[t])==null?void 0:o.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function wB(r){let{attributeList:e}=r,t=[];for(let n of e)t=[...t,...Mu({...r,attribute:n})];return t=s0(t),t}function EB(r){let{list:e,attribute:t,search:n}=r;return e=e.filter(i=>i.getJson()[t]===n),e}class LS extends cl{constructor(){super();le(this,"FilterFactory");this.getFilterFactory(),this.mainFunc=this.getMapComponent}getFactory(){return this.factory===void 0&&(this.factory=new aB),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new pB),this.themeFactory}getFilterFactory(){return this.filterFactory===void 0&&(this.filterFactory=new mB),this.filterFactory}getMapComponent(t,n){return n=n||"default",this.factory.getComponent(n,t)}}class fn extends Uv{constructor(e){super(e),this.state={type:"map"},this.interface=FS}setFilterInfo(){this.filterFacotry=this.interface.getFilterFactory(),this.filters=this.props.filters,this.filterFunc=this.props.filterFunc,this.filter=this.props.filter}getFilterFunc(){var e;if(!this.filterFunc&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filterFunc");t&&(this.filterFunc=t.func)}}getFilter(){var e;if(!this.filter&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filter");t&&(this.filter={...t})}}getList(){var t,n,i,o;let e=this.props.name;this.list=this.props.list?this.props.list:this.filter?(i=this.componentList)==null?void 0:i.getList(e,(t=this.filter)==null?void 0:t.search,(n=this.filter)==null?void 0:n.attribute):(o=this.componentList)==null?void 0:o.getList(e)}filterListByFilterFunc(){this.list&&(this.list=this.list.filter(e=>this.filterFunc?this.filterFunc(e):!0))}filterListByFilterFactory(){if(this.filters)for(let e of this.filters){let t=this.filterFacotry.getFilter(e.type);t&&(this.list=t({list:this.list,...e}))}}setProps(){let e=this.props.cells;this.addToProps={cells:e,list:this.list}}componentPreSetup(){this.addToInitialSetup=[this.setFilterInfo,this.getFilterFunc,this.getFilter,this.getList,this.filterListByFilterFunc,this.filterListByFilterFactory]}}const FS=new LS;class jS extends at{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getNavLists],this.state={}}getLinks(){var e,t;return this.props.links?this.props.links:(t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes}getDefaultNavItem(e){return{logo:{imgSrc:this.props.logoURL,label:this.props.logoLabel,...this.props},links:{links:this.getLinks(),...this.props,class:"fit"},logout:{logoutFunc:this.props.logoutFunc,auth:this.props.auth,wrapperClass:"SB-logout",...this.props}}[e]}getList(){let e=this.props.navList,t=e.getList();for(let n=0;n<t.length;n++)if(t[n].default){let i=this.getDefaultNavItem(t[n].type);i.type=t[n].type,e.update(n,i)}return this.props.type==="topBar"&&(t=t.filter(n=>n.type!=="links")),t}getHtml(){return _.jsx(fn,{theme:this.props.mapTheme,list:this.mapList,cells:this.list,...this.props.navMapProps})}getNavLists(){this.list=this.props.list?this.props.list:this.getList(),this.mapList=this.props.mapList?this.props.mapList:[{}]}}class CB{constructor(){le(this,"factory",{default:jS})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),_.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class AB extends at{constructor(e){super(e),this.state={defaultStyle:"navMenu",renderComp:void 0}}async open(){let e=await this.props.open();this.props.type==="topBar"&&(this.state.renderComp?this.setState({renderComp:void 0}):this.setState({renderComp:e}))}render(){return this.props.app,_.jsxs("div",{children:[_.jsxs("div",{onClick:this.open,className:this.props.menuClass?this.props.menuClass:this.state.defaultStyle,children:[this.props.menuContent&&_.jsx(_.Fragment,{children:this.props.menuContent})," "]}),this.state.renderComp&&_.jsx(_.Fragment,{children:this.state.renderComp})]})}}class bB extends dn{constructor(e){super(e),this.state={...this.state,defaultType:this.props.type?this.props.type:"sideBar",typeKey:"layout",defaultNavType:"default",phoneSize:850,left:-400}}getProps(){var e,t;return{mapTheme:this.props.mapTheme||this.state.defaultType,links:this.props.links||((t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes),...this.props}}getFactoryComponent(e){let t=this.props.mapType?this.props.mapType:this.state.defaultNavType;return this.props.factory.getComponent(t,e)}componentDidMount(){this.resize!==void 0&&(window.addEventListener("resize",this.resize),this.resize())}componentWillUnmount(){this.resize!==void 0&&window.removeEventListener("resize",this.resize)}resize(){if(window.innerWidth<850){this.setState({phone:!0,tablet:!1,defaultType:this.props.phoneLayout?this.props.phoneLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}if(window.innerWidth<1224){this.setState({phone:!1,tablet:!0,defaultType:this.props.tabletLayout?this.props.tabletLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}window.innerWidth>1224&&(this.state.phone&&this.setState({phone:!1,defaultType:this.state.ogType}),this.state.tablet&&this.setState({tablet:!1,defaultType:this.state.ogType}))}async setStyleOnMenuClick(e){const t=n=>new Promise(i=>setTimeout(i,n));this.card.setStyle({...this.card.getStyle(),left:e.toString()+"px"}),await this.setState({left:e}),await t(10)}async setNavOpenClose(){if(this.state.left===-400)for(let e=-400;e<600;e=e+15){if(e>0){this.setState({left:0});break}await this.setStyleOnMenuClick(e)}else for(let e=0;e>-450;e=e-15){if(e<-400){this.setState({left:-400});break}await this.setStyleOnMenuClick(e)}}async openCloseLinks(){var n,i;let e=_.jsx(fn,{list:this.props.links||((i=(n=this.props.app)==null?void 0:n.state)==null?void 0:i.routes),cells:[{type:"link"}]});return _.jsx(dn,{content:e})}async openCloseNavFun(){return await{topBar:this.openCloseLinks,sideBar:this.setNavOpenClose}[this.state.defaultType]()}getMenu(){return this.props.menuComponent?_.jsx(this.props.menuComponent,{...this.props.menuComponentProps,open:this.openCloseNavFun,type:this.state.defaultType}):_.jsx(AB,{open:this.openCloseNavFun,type:this.state.defaultType,...this.props.menuComponentProps})}getContent(){let e=this.getProps(),t=this.getFactoryComponent(e);return this.content=_.jsxs(_.Fragment,{children:[t,this.props.type!=="type"&&(this.state.phone||window.innerWidth<this.state.phoneSize)&&_.jsx(_.Fragment,{children:this.getMenu()})]}),this.content}}class xB{constructor(){Hn.bind(this),this.list=[{type:"logo",picURL:void 0,label:void 0,default:!0},{type:"links",linkJson:void 0,default:!0},{type:"logout",logoutFunc:void 0,auth:void 0,default:!0}]}setList(e){this.list=e}getList(){return this.list}insert(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,0,t)}add(e,t){t?this.list.unshift(e):this.list.push(e)}addCustomJSX(e,t,n){let i={type:"custom",custom:e};t?this.insert(t,i):this.add(i,n)}update(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list[e]={...this.list[e],...t}}remove(e){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,1)}}class BS extends cl{constructor(){super();le(this,"factory");le(this,"navList");Hn.bind(this),this.getFactory(),this.getNavList(),this.mainFunc=this.getNav}getFactory(){return this.factory||(this.factory=new CB),this.factory}getNav(t){return _.jsx(bB,{factory:this.factory,navInterface:this,navList:this.navList,...t})}getNewNavList(){return new xB}setNavListForce(t){this.navList=t}getNavList(){return this.navList||(this.navList=this.getNewNavList()),this.navList}}const wd=new BS;class SB extends Uv{constructor(e){super(e),this.interface=wd}}class TB{constructor(){le(this,"factory",{})}getComponent(e){return this.factory[e]}registerComponent(e,t){this.factory[e]=t}}class IB extends TB{constructor(){super(...arguments);le(this,"factory",{})}}class DB extends at{constructor(e){super(e),this.state={}}checkPopupSwitch(e){var t,n;return this.popupSwitch=this.props.popupSwitch||((n=(t=this.props.app)==null?void 0:t.state)==null?void 0:n.popupSwitch),this.popupSwitch!==""&&this.popupSwitch!==void 0&&(e=!0),e}checkType(e){var i,o,l,u,h;let t=this.props.currentPopupComponent||((o=(i=this.props.app)==null?void 0:i.state)==null?void 0:o.currentPopupComponent),n=(l=this.popupFactory.getComponent(this.popupSwitch))==null?void 0:l.componentType;return n&&(t=this.isArray(t),e=((h=(u=t[0])==null?void 0:u.getJson())==null?void 0:h.type)===n&&t.length>0),e}render(){var n;let e=this.checkPopupSwitch(!1);e&&(e=this.checkType(e)),this.popupFactory=this.props.factory||this.props.app.state.popupFactory;let t=(n=this.popupFactory)==null?void 0:n.getComponent(this.popupSwitch);return _.jsx(_.Fragment,{children:e&&(t==null?void 0:t.content)&&_.jsx(dn,{content:_.jsx(t.content,{}),popup:!0,type:t.popupType||"biggerCard",theme:t.popupTheme||"Default",handleClose:()=>{if(t.handleClose)t.handleClose();else{let i=this.props.app.state.currentPopupComponent;i&&this.props.app.state.operationsFactory.removeFromList(i),this.props.app.dispatch({currentPopupComponent:void 0,popupSwitch:void 0})}}})})}}class kB extends cl{constructor(){super();le(this,"factory");Hn.bind(this),this.getFactory()}getFactory(){return this.factory||(this.factory=new IB),this.factory}createPopupMachine(t){return _.jsx(DB,{app:(t==null?void 0:t.app)||this.getAppComponent(),factory:this.factory})}}let _C=new kB;class RB{constructor(){le(this,"convertStringToLink",e=>e&&(!e.startsWith("http://")&&!e.startsWith("https://")?"https://"+e:e))}isLikelyUrl(e){return/\.(com|net|org|io|gov|edu|co)\b/.test(e)||/^(?:f|ht)tps?\:\/\//.test(e)||/^mailto\:/i.test(e)}checkURLforString(e){return window.location.href.includes(e)}getIdFromURL(e,t){let i=window.location.href.split("/"),o=i[i.length-1],l=e?o.split("-"):[o];return t?l[t]:l[0]}getTypeFromURL(){let t=window.location.href.split("/");return t[t.length-2]}}let _i=new RB;class MS extends at{constructor(t,n){super(t);le(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:!0},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:o,snapShot:l,owner:u}=this.state;this.compList=await this.componentList.getList(t,n,i),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:t,ids:n,filterKeys:i,path:o,snapShot:l,owner:u}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}async componentDidMount(){this.getComponentsFromBackend();let t=this;window.addEventListener("popstate",function(n){t.onBackClick(n)})}onBackClick(t){this.getComponentsFromBackend()}componentDidUpdate(){this.getComponentsAgain()}async getComponentsAgain(t,n){this.getFromURL(),(this.app.state.urlChange||this.state.reRender&&this.urlId!==this.state.urlId)&&(await this.setState({urlId:this.urlId}),await this.dispatch({urlChange:void 0}),this.forceRerender=!1,this.getComponentsFromBackend())}async getFromURL(){this.urlType=_i.getTypeFromURL(),this.urlId=_i.getIdFromURL()}}class Go extends MS{constructor(t,n){super(t,n);le(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:n==null?void 0:n.owner},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:o,snapShot:l,owner:u}=this.state;this.compList=await this.componentList.getComponents(),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:this.state.owner,ids:n,filterKeys:i,path:o,snapShot:l,typeAttribute:"owner"}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}}class pl extends MS{async getComponentsFromBackend(){await this.getFromURL(),await this.getFirstComponent(),this.comp&&await this.getAssociatedItems(),this.setGotComponents()}async getFirstComponent(e,t){let n=e||this.urlType,i=t||this.urlId;this.comp=this.componentList.getComponent(n,i),this.comp||(this.comp=await this.componentList.getComponentsFromBackend({type:n,ids:i,filterKeys:"_id",owner:this.state.owner}),this.comp=this.comp.length>0?this.comp[0]:void 0)}async getAssociatedItems(){this.compList=await this.comp.getAssociatedItems(this.state.itemTypes),this.compList.length>0&&this.setState({gotComponents:!0}),this.compList=await this.comp.getAssociatedItemsFromBackend(this.state.itemTypes),await this.setCurrentItems()}setCurrentItems(){this.dispatch({currentComponent:this.comp,["current"+this.getCapitalFirstLetter(this.comp.getJson().type)]:this.comp,...this.dispatchItems})}setGotComponents(){this.setState({gotComponents:!0,gotComponentsFromBackend:!0,components:this.compList,urlId:this.urlId})}}class qS extends at{constructor(e){super(e),this.state={...this.state,email:"",password:""}}validate(){return!0}onChange(e){let{name:t,value:n}=e.target;this.setState({[t]:n})}onSub(){this.validate()&&this.APIService.login(this.state.email,this.state.password)}getSwitchLink(){return _.jsxs("div",{id:"signUpFT",children:["Don't have an Account? ",_.jsx(Bt,{to:"/register",children:"Sign Up"})]})}preSetup(){this.setComponents(["container","header","form","submitButton"])}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Login"})}getFormHtml(){let e=_.jsxs(_.Fragment,{children:[_.jsx("div",{children:"Email"}),_.jsx("input",{className:"defaultInputFormAuth",name:"email",onChange:this.onChange,value:this.state.email}),_.jsx("div",{style:{marginTop:"10px"},children:"Password"}),_.jsx("input",{className:"defaultInputFormAuth",name:"password",type:"password",onChange:this.onChange,value:this.state.password})]});return this.form.setClass("defaultLoginForm"),this.form.getHtml({type:"div",content:e})}getSubmitHtml(){return this.submitButton.setClass("defaultLoginButton"),this.submitButton.setOnClick(this.onSub),this.submitButton.getHtml({type:"div",content:"Submit"})}getContainerHtml(){this.container.setClass(this.props.loginContainer||"fitCC");let e=_.jsxs(_.Fragment,{children:[this.getHeaderHtml(),this.getFormHtml(),this.getSubmitHtml(),this.getSwitchLink()]});return this.container.getHtml({type:"div",content:e})}getHtml(){let e=this.getContainerHtml();return _.jsx("div",{className:"fullCCLayoutRow",children:_.jsx(dn,{type:this.props.loginCardType||"biggerCard",content:e})})}}class PB extends qS{async onSub(){if(this.validate()){let e=await this.APIService.register(this.state.email,this.state.password);if(!e.error){let t={type:"user",email:this.state.email,_id:this.state.email};e=await this.componentList.addComponents(t),window.history.pushState({},"","/"),this.dispatch({currentUser:e})}}}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Register"})}getSwitchLink(){return _.jsxs("div",{children:["Have an Account? ",_.jsx(Bt,{to:"/login",children:"Login"})]})}}class NB extends at{constructor(e){super(e),this.state={...this.state,routes:[],loginComp:qS,registerComp:PB}}addToRouter(e){let t=[...this.state.routes,e];this.setState({routes:t})}getRouteMap(e,t){let n=_.jsx(_.Fragment,{});return e&&(e=[...e],n=e==null?void 0:e.map((i,o)=>(i.path||(i.path=this.classNameToString(i.comp),o===0&&(i.path="/")),_.jsxs(_.Fragment,{children:[_.jsx(Is,{path:i.path,element:_.jsx(i.comp,{props:{...t,...i.props}})}),_.jsx(Is,{path:i.path+"/:id",element:_.jsx(i.idComp,{props:{...t,...i.props}})})]})))),n}getRoutes(e,t){var i;let n=_.jsxs(dw,{children:[this.getRouteMap(e,t),this.state.routes.map((o,l)=>_.jsx(_.Fragment,{children:o}))]});return(i=this.app)!=null&&i.state.currentUser||(n=this.getUserAuthRoutes(t)),n}getUserAuthRoutes(e){let t=e.extraAuthRoutes,n=e.loginComp||this.state.loginComp,i=e.registerComp||this.state.registerComp;return _.jsxs(dw,{children:[_.jsx(Is,{path:"/",element:_.jsx(n,{props:{...e}})}),_.jsx(Is,{path:"/login",element:_.jsx(n,{props:{...e}})}),_.jsx(Is,{path:"/register",element:_.jsx(i,{props:{...e}})}),t==null?void 0:t.map((l,u)=>_.jsxs(_.Fragment,{children:[_.jsx(Is,{path:l.path,element:_.jsx(l.comp,{props:{...e,...l.props}})}),_.jsx(Is,{path:l.path+"/:id",element:_.jsx(l.idComp,{props:{...e,...l.props}})})]}))]})}getHtml(){var o;let e={...this.props};e.app=this.app;let t=(o=this.app)==null?void 0:o.state,n=this.props.routes||(t==null?void 0:t.routes),i=this.getRoutes(n,e);return _.jsx(_.Fragment,{children:i})}}class OB{constructor(){le(this,"registry",{})}getRegistry(){return this.registry}addToRegistry(e,t){this.registry[e]=t}getItemFromRegistry(e){return this.registry[e]}}class LB extends at{constructor(t,n,i){super(t);le(this,"endpoint");le(this,"db");le(this,"storage");le(this,"auth");le(this,"popupComponents");le(this,"popupComponentsProps");n=this.props.config||n,this.popupComponents=this.props.popupComponents,this.componentListInterface=new LF(this.dispatch,n.endpoint,n.db,n.storage,n.auth),this.componentList=this.componentListInterface.createComponentList(),this.factory=this.componentListInterface.getFactory(),this.operationsFactory=this.componentList.getOperationsFactory(),this.interfaceRegistry=new OB,this.initialPropsSetupFunctions=[this.propogateApp,...this.initialPropsSetupFunctions],this.state={componentList:this.componentList,componentListInterface:this.componentListInterface,operationsFactory:this.operationsFactory,factory:this.factory,theme:this.props.theme||"default",pageClass:this.props.pageClass||"fullScreen",pageStyle:this.props.pageStyle,extraRouteKey:this.props.extraRouteKey||"extraRoutes",navBarProps:this.props.NavBarProps||{},popupFactory:_C.getFactory(),popups:this.props.popups||[],global:this.props.global||{},routes:this.props.routes||[]},i&&this.registerListWithFactory(i)}async checkForUser(){let t=await this.APIService.getCurrentUser();t&&await this.APIService.checkIfLoggedIn()&&this.APIService.getuser(t.email)}componentDidMount(){this.checkForUser()}registerListWithFactory(t){for(let n of t){let o=new n().getJson().type;this.factory.registerComponents({name:o,component:n}),this.createPopupDefaultsByType(o)}}createPopupDefaultsByType(t){var n;if((n=this.popupComponents)!=null&&n[t]){let i=this.getCapitalFirstLetter(t),o={content:this.popupComponents[t],popupSwitch:"add"+i,componentType:t},l={...o,popupSwitch:"update"+i};this.state.popups=[...this.state.popups,o,l]}}dispatch(t){t=t||{},this.setState({...t})}setPopups(){for(let t of this.state.popups){let n=t.componentType;n&&(t={...t,...this.popupComponentsProps[n]}),t.popupSwitch||(t.popupSwitch=this.classNameToString(t.content)),this.state.popupFactory.registerComponent(t.popupSwitch,t)}}propogateApp(){this.app={state:this.state,dispatch:this.dispatch.bind(this),...this.state.global},FS.setAppComponent(this.app),tS.setAppComponent(this.app),qx.setAppComponent(this.app),wd.setAppComponent(this.app),Mx.setAppComponent(this.app)}getHtml(t){this.setPopups();let n=[...this.state.routes];return this.state[this.state.extraRouteKey]&&(n=[...n,...this.state[this.state.extraRouteKey]]),_.jsx("div",{className:this.state.pageClass,style:this.state.pageStyle,children:_.jsxs(fF,{children:[_C.createPopupMachine({app:this.app}),this.state.currentUser&&_.jsx(SB,{...this.state.navBarProps}),t?_.jsx(t.content,{props:{...t.props}}):_.jsx(_.Fragment,{}),_.jsx(NB,{routes:n,extraAuthRoutes:this.state.extraAuthRoutes})]})})}}class US extends jv{constructor(){super(...arguments);le(this,"factory",{form:eS,map:LS,nav:BS})}}new US;new US;class In extends DF{constructor(t){super(t);le(this,"json",{...this.json,type:"",name:"",owner:"",picURL:""})}}class FB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"user"})}}class jB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"contact",phone:"",autoAI:!0,email:"",title:"",company:"",mobile:"",firstName:"",lastName:"",address:"",city:"",state:"",zip:"",source:"",finishedSequenceTags:"",tags:"",conversationIds:[]})}}let BB=class extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"conversation",contactIds:[]})}};class MB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"template",content:""})}}class qB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"sequence",steps:[],finished:0,replyRate:0,limit:"20"})}}class UB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"step",delay:0,messageId:""})}}class VS extends In{constructor(){super(...arguments);le(this,"json",{...this.json,conversationIds:[],ownerMessage:!1})}}class VB extends VS{constructor(){super(...arguments);le(this,"json",{...this.json,type:"textMessage",content:"",timestamp:""})}}class zB extends VS{constructor(){super(...arguments);le(this,"json",{...this.json,type:"email",subject:"",body:"",timeStamp:""})}}class HB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"potentialProspect",phone:"",email:"",researchId:"",conversationIds:[]})}}class WB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"research",searchFrequency:"",AIPrompt:""})}}class $B extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"client",name:"",email:"",researchId:"",conversationIds:[]})}}class GB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"AIPrompt"})}}class KB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"aiSettings",autoAI:""})}}class JB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"todo",attribute1:"Create Authenticated User",attribute2:"Create User Data",attribute3:"Create Limiter",attribute4:"Set Up Google Auth",attribute5:"Setting Obj",attribute6:"Firebase AI Training",complete1:!1,complete2:!1,complete3:!1,complete4:!1,complete5:!1,complete6:!1,clientId:""})}}class QB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"limit",limit:500})}}let YB=class extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"csv"})}};class XB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"open"})}}class ZB extends In{constructor(){super(...arguments);le(this,"json",{...this.json,type:"outreachUser",mailboxId:"",mailboxEmail:""})}}const eM=Object.freeze(Object.defineProperty({__proto__:null,AIPrompt:GB,AISettings:KB,Client:$B,Contact:jB,Conversations:BB,CsvUpload:YB,Email:zB,Limit:QB,Open:XB,OutreachUser:ZB,PotentialProspect:HB,Research:WB,Sequence:qB,Step:UB,Template:MB,TextMessage:VB,Todo:JB,User:FB},Symbol.toStringTag,{value:"Module"})),tM="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23505050'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'/%3e%3c/svg%3e",nM="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23505050'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M20.01%2015.38c-1.23%200-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57%201.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53%200-.54-.45-.99-.99-.99H4.19C3.65%203%203%203.24%203%203.99%203%2013.28%2010.73%2021%2020.01%2021c.71%200%20.99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z'/%3e%3c/svg%3e";class Ed extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}formatDate(e){console.log(this);const t=new Date((e==null?void 0:e.seconds)*1e3+(e==null?void 0:e.nanoseconds)/1e6),i=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],o=t.getDate(),l=t.getFullYear();return`${i} ${o}, ${l}`}render(){var h,d,g,m,p,y,b,x,E;let e=window.innerWidth>600;(h=this.propsState.popupSwitch)!=null&&h.includes("addContact")&&(e=!1);let t=e?this.propsState.currentContact:this.props.obj,n=t&&(t!=null&&t.getJson().date)?this.formatDate(t==null?void 0:t.getJson().date):"";const i=e?this.propsState.currentContact:this.propsState.currentPopupComponent,o=!e;let l=t?"Edit":"Add",u=_.jsx(Si,{formClass:"dark-button-1",content:"Save",isPopup:o});return((d=this.propsState.popupSwitch)!=null&&d.includes("updateContact")||window.innerWidth>600&&!((g=this.propsState.popupSwitch)!=null&&g.includes("addContact")))&&(u=_.jsx(Vv,{formClass:"dark-button-1",obj:i,content:"Save",isPopup:o,callbackFunc:this.props.callbackFunc})),_.jsxs(_.Fragment,{children:[_.jsxs("h2",{style:{position:"sticky",top:0,padding:"2%",width:"80%"},children:[l," Contact"]}),e&&_.jsx("div",{className:"close-contact-button",onClick:()=>{this.dispatch({currentContact:null})},children:"X"}),t&&_.jsxs("h3",{style:{padding:"10px",font:"normal normal 900 15px/16px Satoshi"},children:[t.getJson().firstName," ",t.getJson().lastName]}),_.jsxs("div",{style:{padding:"2%",paddingBottom:"80px",height:"100%",paddingTop:"12px"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsxs("div",{className:"contact-Add-container",children:[_.jsxs("div",{className:"contact-contact-data",children:[_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().firstName?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"First Name:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{obj:t,formClass:"underline-form",name:"firstName",placeholder:"FirstName",inPopup:o})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().lastName?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"Last Name:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{obj:t,placeholder:"LastName",formClass:"underline-form",name:"lastName",inPopup:o})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().email?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:_.jsx("span",{children:_.jsx("img",{src:tM,className:"contact-img-ico"})})}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"email",inPopup:o,placeholder:"1234@mail.com"})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().mobile?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:_.jsx("span",{children:_.jsx("img",{src:nM,className:"contact-img-ico"})})}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"mobile",inPopup:o,placeholder:"XXX-XXX-XXXX"})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().company?"":"unfilled-container"}`,style:{marginTop:"24px"},children:[_.jsx("div",{className:"row-name",children:"Company:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"company",inPopup:o,placeholder:"SalesCapture AI"})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().title?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"Title:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,placeholder:"ie. Vice President of People",name:"title",inPopup:o})})]}),t&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().address?"":"unfilled-container"}`,style:{marginTop:"24px"},children:[_.jsx("div",{className:"row-name",children:"Address:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"address",inPopup:o,placeholder:"123 Street Way"})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().city?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"City:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"city",inPopup:o,placeholder:"Sales Lake City"})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().state?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"State:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"state",inPopup:o,placeholder:"State/Territory"})})]}),_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().zip?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"ZIPcode:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"zip",inPopup:o,placeholder:"ZIP"})})]})]})]}),_.jsxs("div",{className:"contact-contact-data",children:[_.jsxs("div",{className:`row-container ${t!=null&&t.getJson().source?"":"unfilled-container"}`,children:[_.jsx("div",{className:"row-name",children:"Lead Source:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{formClass:"underline-form",obj:t,name:"source",inPopup:o,placeholder:"unknown"})})]}),_.jsxs("div",{className:"row-container",title:"Comma separated",children:[_.jsx("div",{className:"row-name",style:{width:"fit-content"},children:"Tags:"}),_.jsx("div",{className:"row-field",title:"comma seperated",children:_.jsx(Je,{formClass:"underline-form",obj:t,placeholder:"ie. contacted, tag1, tag3",name:"tags",inPopup:o})})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column",marginTop:"12px"},children:[_.jsx("div",{className:"row-name",style:{borderRight:"none"},children:"Notes"}),_.jsx("div",{children:_.jsx(Je,{obj:t,type:"quill",name:"notes",inPopup:o})})]}),t&&(t==null?void 0:t.getJson().date)&&_.jsx(_.Fragment,{children:_.jsxs("div",{className:"row-container",style:{flexDirection:"column",marginTop:"12px"},children:[_.jsx("div",{className:"row-name",style:{borderRight:"none"},children:"Contact Create Date"}),_.jsx("div",{style:{fontSize:"14px"},children:n})]})})]}),_.jsxs("div",{style:{paddingBottom:"20px",width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end",gap:"8px"},children:[_.jsx("div",{style:{marginRight:"0px"}}),!((p=(m=this.propsState)==null?void 0:m.currentContact)!=null&&p.getJson().finished)&&!((b=(y=this.propsState)==null?void 0:y.popupSwitch)!=null&&b.includes("add"))?_.jsx("div",{onClick:()=>{var w;if((w=this.propsState.currentContact)==null||w.setCompState({autoAI:!1},{run:!0},!0),sequence){let C=parseInt(sequence.getJson().finished)+1;sequence.setCompState({finished:C}),sequence.update()}},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Turn off AI"}):_.jsx("div",{onClick:()=>{var w;(w=this.propsState.currentContact)==null||w.setCompState({autoAI:!0},{run:!0},!0)},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Turn on AI"}),!((x=this.propsState.currentContact)!=null&&x.getJson().finished)&&_.jsxs(_.Fragment,{children:[" ",!((E=this.propsState.currentContact)!=null&&E.getJson().finished)&&_.jsx("div",{onClick:()=>{var P,S,O;(P=this.propsState.currentContact)==null||P.setCompState({finished:!0}),(S=this.propsState.currentContact)==null||S.update();let w=this.componentList.getComponent("sequence",(O=this.propsState.currentContact)==null?void 0:O.getJson().sequenceId),C=parseInt(w==null?void 0:w.getJson().finished)+1;w.setCompState({finished:C}),w.update()},className:"dark-button-1",style:{position:"relative",width:"fit-content",height:"fit-content"},children:"Remove From Sequence"})]}),u]})]})," "]})]})}}class pf extends at{constructor(e){super(e),this.state={...this.state,checked:!1,activeBool:!1}}componentDidMount(){this.checkIfActive()}async componentDidUpdate(e,t){var i,o;let n=this.props.obj;n&&((i=this.propsState[this.props.checkKey])!=null&&i.includes(n)&&this.state.activeBool===!1?this.setState({checked:!0,activeBool:!0}):!((o=this.propsState[this.props.checkKey])!=null&&o.includes(n))&&this.state.activeBool===!0&&this.setState({checked:!1,activeBool:!1}))}checkIfActive(){var t;let e=this.props.obj;e&&(t=this.propsState[this.props.checkKey])!=null&&t.includes(e)&&this.setState({checked:!0})}async handleToggle(){await this.setState(e=>({checked:!e.checked})),this.state.checked?this.check(this.props.obj):this.uncheck(this.props.obj)}check(e){this.setState({checked:!0}),this.props.check?this.props.check(e):this.props.cell.check(this.props.obj)}uncheck(e){this.setState({checked:!1}),this.props.uncheck?this.props.uncheck(e):this.props.cell.uncheck(this.props.obj)}render(){const{checked:e}=this.state;return _.jsxs("label",{className:this.props.class||"checkbox-container",children:[this.props.label||"",_.jsx("input",{type:"checkbox",checked:e,onChange:this.handleToggle}),_.jsx("span",{className:"checkmark"})]})}}class o0 extends eo{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...i})}}class zS extends at{constructor(t){super(t);le(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});le(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}getTagUI(t){var n,i,o,l,u,h;return _.jsxs("div",{className:"contact-tag-container active",children:[(n=t.tags)==null?void 0:n.split(",").filter(d=>d!=="").map((d,g)=>_.jsx("button",{className:"contact-tag-btn",children:d},g)),((i=t.finishedSequenceTags)==null?void 0:i.length)>0&&_.jsx(_.Fragment,{children:(o=t.finishedSequenceTags)==null?void 0:o.split(",").map((d,g)=>_.jsx(_.Fragment,{children:d.length>0&&_.jsx("button",{className:"contact-tag-btn finished-sequence-tags",children:d},g)}))}),t.sequenceId&&_.jsxs(_.Fragment,{children:[t.finishedSequenceTags.includes((l=this.componentList.getComponent("sequence",t.sequenceId))==null?void 0:l.getJson().name)&&t.finished?_.jsx(_.Fragment,{}):_.jsx(_.Fragment,{children:((u=this.componentList.getComponent("sequence",t.sequenceId))==null?void 0:u.getJson().name.length)>0&&_.jsx("button",{className:`contact-tag-btn ${t.finished?"finished-sequence-tags":"unfinished-sequence-tags"}`,children:(h=this.componentList.getComponent("sequence",t.sequenceId))==null?void 0:h.getJson().name})}),t.replied&&_.jsx("button",{className:"contact-tag-btn unfinished-sequence-tags",children:"Replied"})]})]})}render(){const{obj:t}=this.props;let n=t.getJson(),o=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return _.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsxs("div",{className:"contact-item hover-darken",style:{background:o?"#2374ab10":"white",position:"relative",paddingLeft:"5px"},children:[_.jsx(pf,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),_.jsxs("div",{className:"contact-info-expanded",style:{cursor:"pointer",display:"flex",width:"100%"},onClick:()=>{window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},children:[_.jsx("div",{className:"contact-avatar",children:_.jsx("i",{className:"fa-solid fa-user"})}),_.jsxs("div",{className:"contact-info",children:[_.jsx("div",{className:"contact-name",children:`${n.firstName} ${n.lastName}`}),_.jsx("div",{className:"contact-desc",children:(n==null?void 0:n.company)||(n==null?void 0:n.title)||(n==null?void 0:n.email)||(n==null?void 0:n.mobile)||""})]})]}),_.jsx(o0,{formClass:"hover-basic",wrapperClass:"icon-row",newProp:"asdf",content:_.jsx("div",{style:{width:"fit-content"},onClick:async()=>{await this.operationsFactory.clear();let l=t,u=this.componentList.getComponent("conversation",l.getJson().email,"contact");u||(await this.componentList.addComponents({type:"conversation",contact:l.getJson().email,contactName:`${l.getJson().firstName} ${l.getJson().lastName}`,conversationOwner:this.propsState.currentUser.getJson()._id,ownerName:`${this.propsState.currentUser.getJson().firstName} ${this.propsState.currentUser.getJson().lastName}`}),u=this.componentList.getComponent("conversation",l.getJson().email,"contact"));let h={type:"email"};h={prepare:{...h},clean:!0},h=await this.operationsFactory.prepare(h),Array.isArray(h)&&h.length===1&&(h=h[0]);let d={popupSwitch:"addEmail",currentPopupComponent:h};await this.dispatch({...d,currentConversation:u,currentContact:l})},className:"contact-icon",children:_.jsx("i",{className:"fa-solid fa-message"})})})]}),this.getTagUI(n)]})}}var Kh={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var rM=Kh.exports,wC;function iM(){return wC||(wC=1,function(r,e){((t,n)=>{r.exports=n()})(rM,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,o=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,u={},h=0,d={};function g(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var I=O(T);I.chunkSize=parseInt(I.chunkSize),T.step||T.chunk||(I.chunkSize=null),this._handle=new x(I),(this._handle.streamer=this)._config=I}).call(this,A),this.parseChunk=function(T,I){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let L=this._config.newline;L||(N=this._config.quoteChar||'"',L=this._handle.guessLineEndings(T,N)),T=[...T.split(L).slice(D)].join(L)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(T))!==void 0&&(T=N),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+T,N=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=N.meta.cursor,D=(this._finished||(this._partialLine=D.substring(T-this._baseIndex),this._baseIndex=T),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)n.postMessage({results:N,workerId:d.WORKER_ID,finished:D});else if(R(this._config.chunk)&&!I){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!D||!R(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(T){R(this._config.error)?this._config.error(T):l&&this._config.error&&n.postMessage({workerId:d.WORKER_ID,error:T,finished:!1})}}function m(A){var T;(A=A||{}).chunkSize||(A.chunkSize=d.RemoteChunkSize),g.call(this,A),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),o||(T.onload=M(this._chunkLoaded,this),T.onerror=M(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var I,D=this._config.downloadRequestHeaders;for(I in D)T.setRequestHeader(I,D[I])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+N));try{T.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}o&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(I){I=T.statusText||I,this._sendError(new Error(I))}}function p(A){(A=A||{}).chunkSize||(A.chunkSize=d.LocalChunkSize),g.call(this,A);var T,I,D=typeof FileReader<"u";this.stream=function(N){this._input=N,I=N.slice||N.webkitSlice||N.mozSlice,D?((T=new FileReader).onload=M(this._chunkLoaded,this),T.onerror=M(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,L=(this._config.chunkSize&&(L=Math.min(this._start+this._config.chunkSize,this._input.size),N=I.call(N,this._start,L)),T.readAsText(N,this._config.encoding));D||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(T.error)}}function y(A){var T;g.call(this,A=A||{}),this.stream=function(I){return T=I,this._nextChunk()},this._nextChunk=function(){var I,D;if(!this._finished)return I=this._config.chunkSize,T=I?(D=T.substring(0,I),T.substring(I)):(D=T,""),this._finished=!T,this.parseChunk(D)}}function b(A){g.call(this,A=A||{});var T=[],I=!0,D=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):I=!0},this._streamData=M(function(N){try{T.push(typeof N=="string"?N:N.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(L){this._streamError(L)}},this),this._streamError=M(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=M(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=M(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(A){var T,I,D,N,L=Math.pow(2,53),V=-L,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,ie=0,G=0,W=!1,B=!1,U=[],H={data:[],errors:[],meta:{}};function ne(Q){return A.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function ee(){if(H&&D&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),D=!1),A.skipEmptyLines&&(H.data=H.data.filter(function(Ce){return!ne(Ce)})),$()){let Ce=function(Re,Pe){R(A.transformHeader)&&(Re=A.transformHeader(Re,Pe)),U.push(Re)};var ge=Ce;if(H)if(Array.isArray(H.data[0])){for(var Q=0;$()&&Q<H.data.length;Q++)H.data[Q].forEach(Ce);H.data.splice(0,1)}else H.data.forEach(Ce)}function te(Ce,Re){for(var Pe=A.header?{}:[],Ne=0;Ne<Ce.length;Ne++){var Fe=Ne,Ze=Ce[Ne],Ze=((ue,fe)=>(Ee=>(A.dynamicTypingFunction&&A.dynamicTyping[Ee]===void 0&&(A.dynamicTyping[Ee]=A.dynamicTypingFunction(Ee)),(A.dynamicTyping[Ee]||A.dynamicTyping)===!0))(ue)?fe==="true"||fe==="TRUE"||fe!=="false"&&fe!=="FALSE"&&((Ee=>{if(J.test(Ee)&&(Ee=parseFloat(Ee),V<Ee&&Ee<L))return 1})(fe)?parseFloat(fe):re.test(fe)?new Date(fe):fe===""?null:fe):fe)(Fe=A.header?Ne>=U.length?"__parsed_extra":U[Ne]:Fe,Ze=A.transform?A.transform(Ze,Fe):Ze);Fe==="__parsed_extra"?(Pe[Fe]=Pe[Fe]||[],Pe[Fe].push(Ze)):Pe[Fe]=Ze}return A.header&&(Ne>U.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+U.length+" fields but parsed "+Ne,G+Re):Ne<U.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+U.length+" fields but parsed "+Ne,G+Re)),Pe}var ae;H&&(A.header||A.dynamicTyping||A.transform)&&(ae=1,!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(te),ae=H.data.length):H.data=te(H.data,0),A.header&&H.meta&&(H.meta.fields=U),G+=ae)}function $(){return A.header&&U.length===0}function Y(Q,te,ae,ge){Q={type:Q,code:te,message:ae},ge!==void 0&&(Q.row=ge),H.errors.push(Q)}R(A.step)&&(N=A.step,A.step=function(Q){H=Q,$()?ee():(ee(),H.data.length!==0&&(ie+=Q.data.length,A.preview&&ie>A.preview?I.abort():(H.data=H.data[0],N(H,Z))))}),this.parse=function(Q,te,ae){var ge=A.quoteChar||'"',ge=(A.newline||(A.newline=this.guessLineEndings(Q,ge)),D=!1,A.delimiter?R(A.delimiter)&&(A.delimiter=A.delimiter(Q),H.meta.delimiter=A.delimiter):((ge=((Ce,Re,Pe,Ne,Fe)=>{var Ze,ue,fe,Ee;Fe=Fe||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var Te=0;Te<Fe.length;Te++){for(var ye,$e=Fe[Te],Le=0,ze=0,Ke=0,nt=(fe=void 0,new w({comments:Ne,delimiter:$e,newline:Re,preview:10}).parse(Ce)),it=0;it<nt.data.length;it++)Pe&&ne(nt.data[it])?Ke++:(ye=nt.data[it].length,ze+=ye,fe===void 0?fe=ye:0<ye&&(Le+=Math.abs(ye-fe),fe=ye));0<nt.data.length&&(ze/=nt.data.length-Ke),(ue===void 0||Le<=ue)&&(Ee===void 0||Ee<ze)&&1.99<ze&&(ue=Le,Ze=$e,Ee=ze)}return{successful:!!(A.delimiter=Ze),bestDelimiter:Ze}})(Q,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=ge.bestDelimiter:(D=!0,A.delimiter=d.DefaultDelimiter),H.meta.delimiter=A.delimiter),O(A));return A.preview&&A.header&&ge.preview++,T=Q,I=new w(ge),H=I.parse(T,te,ae),ee(),W?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,I.abort(),T=R(A.chunk)?"":T.substring(I.getCharIndex())},this.resume=function(){Z.streamer._halted?(W=!1,Z.streamer.parseChunk(T,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,I.abort(),H.meta.aborted=!0,R(A.complete)&&A.complete(H),T=""},this.guessLineEndings=function(Ce,ge){Ce=Ce.substring(0,1048576);var ge=new RegExp(E(ge)+"([^]*?)"+E(ge),"gm"),ae=(Ce=Ce.replace(ge,"")).split("\r"),ge=Ce.split(`
`),Ce=1<ge.length&&ge[0].length<ae[0].length;if(ae.length===1||Ce)return`
`;for(var Re=0,Pe=0;Pe<ae.length;Pe++)ae[Pe][0]===`
`&&Re++;return Re>=ae.length/2?`\r
`:"\r"}}function E(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(A){var T=(A=A||{}).delimiter,I=A.newline,D=A.comments,N=A.step,L=A.preview,V=A.fastMode,J=null,re=!1,Z=A.quoteChar==null?'"':A.quoteChar,ie=Z;if(A.escapeChar!==void 0&&(ie=A.escapeChar),(typeof T!="string"||-1<d.BAD_DELIMITERS.indexOf(T))&&(T=","),D===T)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<d.BAD_DELIMITERS.indexOf(D))&&(D=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var G=0,W=!1;this.parse=function(B,U,H){if(typeof B!="string")throw new Error("Input must be a string");var ne=B.length,ee=T.length,$=I.length,Y=D.length,Q=R(N),te=[],ae=[],ge=[],Ce=G=0;if(!B)return Le();if(V||V!==!1&&B.indexOf(Z)===-1){for(var Re=B.split(I),Pe=0;Pe<Re.length;Pe++){if(ge=Re[Pe],G+=ge.length,Pe!==Re.length-1)G+=I.length;else if(H)return Le();if(!D||ge.substring(0,Y)!==D){if(Q){if(te=[],Ee(ge.split(T)),ze(),W)return Le()}else Ee(ge.split(T));if(L&&L<=Pe)return te=te.slice(0,L),Le(!0)}}return Le()}for(var Ne=B.indexOf(T,G),Fe=B.indexOf(I,G),Ze=new RegExp(E(ie)+E(Z),"g"),ue=B.indexOf(Z,G);;)if(B[G]===Z)for(ue=G,G++;;){if((ue=B.indexOf(Z,ue+1))===-1)return H||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:te.length,index:G}),ye();if(ue===ne-1)return ye(B.substring(G,ue).replace(Ze,Z));if(Z===ie&&B[ue+1]===ie)ue++;else if(Z===ie||ue===0||B[ue-1]!==ie){Ne!==-1&&Ne<ue+1&&(Ne=B.indexOf(T,ue+1));var fe=Te((Fe=Fe!==-1&&Fe<ue+1?B.indexOf(I,ue+1):Fe)===-1?Ne:Math.min(Ne,Fe));if(B.substr(ue+1+fe,ee)===T){ge.push(B.substring(G,ue).replace(Ze,Z)),B[G=ue+1+fe+ee]!==Z&&(ue=B.indexOf(Z,G)),Ne=B.indexOf(T,G),Fe=B.indexOf(I,G);break}if(fe=Te(Fe),B.substring(ue+1+fe,ue+1+fe+$)===I){if(ge.push(B.substring(G,ue).replace(Ze,Z)),$e(ue+1+fe+$),Ne=B.indexOf(T,G),ue=B.indexOf(Z,G),Q&&(ze(),W))return Le();if(L&&te.length>=L)return Le(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:te.length,index:G}),ue++}}else if(D&&ge.length===0&&B.substring(G,G+Y)===D){if(Fe===-1)return Le();G=Fe+$,Fe=B.indexOf(I,G),Ne=B.indexOf(T,G)}else if(Ne!==-1&&(Ne<Fe||Fe===-1))ge.push(B.substring(G,Ne)),G=Ne+ee,Ne=B.indexOf(T,G);else{if(Fe===-1)break;if(ge.push(B.substring(G,Fe)),$e(Fe+$),Q&&(ze(),W))return Le();if(L&&te.length>=L)return Le(!0)}return ye();function Ee(Ke){te.push(Ke),Ce=G}function Te(Ke){var nt=0;return nt=Ke!==-1&&(Ke=B.substring(ue+1,Ke))&&Ke.trim()===""?Ke.length:nt}function ye(Ke){return H||(Ke===void 0&&(Ke=B.substring(G)),ge.push(Ke),G=ne,Ee(ge),Q&&ze()),Le()}function $e(Ke){G=Ke,Ee(ge),ge=[],Fe=B.indexOf(I,G)}function Le(Ke){if(A.header&&!U&&te.length&&!re){var nt=te[0],it={},Gn=new Set(nt);let vt=!1;for(let kt=0;kt<nt.length;kt++){let Zt=nt[kt];if(it[Zt=R(A.transformHeader)?A.transformHeader(Zt,kt):Zt]){let kr,rs=it[Zt];for(;kr=Zt+"_"+rs,rs++,Gn.has(kr););Gn.add(kr),nt[kt]=kr,it[Zt]++,vt=!0,(J=J===null?{}:J)[kr]=Zt}else it[Zt]=1,nt[kt]=Zt;Gn.add(Zt)}vt&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:te,errors:ae,meta:{delimiter:T,linebreak:I,aborted:W,truncated:!!Ke,cursor:Ce+(U||0),renamedHeaders:J}}}function ze(){N(Le()),te=[],ae=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return G}}function C(A){var T=A.data,I=u[T.workerId],D=!1;if(T.error)I.userError(T.error,T.file);else if(T.results&&T.results.data){var N={abort:function(){D=!0,P(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(R(I.userStep)){for(var L=0;L<T.results.data.length&&(I.userStep({data:T.results.data[L],errors:T.results.errors,meta:T.results.meta},N),!D);L++);delete T.results}else R(I.userChunk)&&(I.userChunk(T.results,N,T.file),delete T.results)}T.finished&&!D&&P(T.workerId,T.results)}function P(A,T){var I=u[A];R(I.userComplete)&&I.userComplete(T),I.terminate(),delete u[A]}function S(){throw new Error("Not implemented.")}function O(A){if(typeof A!="object"||A===null)return A;var T,I=Array.isArray(A)?[]:{};for(T in A)I[T]=O(A[T]);return I}function M(A,T){return function(){A.apply(T,arguments)}}function R(A){return typeof A=="function"}return d.parse=function(A,T){var I=(T=T||{}).dynamicTyping||!1;if(R(I)&&(T.dynamicTypingFunction=I,I={}),T.dynamicTyping=I,T.transform=!!R(T.transform)&&T.transform,!T.worker||!d.WORKERS_SUPPORTED)return I=null,d.NODE_STREAM_INPUT,typeof A=="string"?(A=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(A),I=new(T.download?m:y)(T)):A.readable===!0&&R(A.read)&&R(A.on)?I=new b(T):(n.File&&A instanceof File||A instanceof Object)&&(I=new p(T)),I.stream(A);(I=(()=>{var D;return!!d.WORKERS_SUPPORTED&&(D=(()=>{var N=n.URL||n.webkitURL||null,L=t.toString();return d.BLOB_URL||(d.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",L,")();"],{type:"text/javascript"})))})(),(D=new n.Worker(D)).onmessage=C,D.id=h++,u[D.id]=D)})()).userStep=T.step,I.userChunk=T.chunk,I.userComplete=T.complete,I.userError=T.error,T.step=R(T.step),T.chunk=R(T.chunk),T.complete=R(T.complete),T.error=R(T.error),delete T.worker,I.postMessage({input:A,config:T,workerId:I.id})},d.unparse=function(A,T){var I=!1,D=!0,N=",",L=`\r
`,V='"',J=V+V,re=!1,Z=null,ie=!1,G=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||d.BAD_DELIMITERS.filter(function(U){return T.delimiter.indexOf(U)!==-1}).length||(N=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(I=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(re=T.skipEmptyLines),typeof T.newline=="string"&&(L=T.newline),typeof T.quoteChar=="string"&&(V=T.quoteChar),typeof T.header=="boolean"&&(D=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");Z=T.columns}T.escapeChar!==void 0&&(J=T.escapeChar+V),T.escapeFormulae instanceof RegExp?ie=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(ie=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(V),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return W(null,A,re);if(typeof A[0]=="object")return W(Z||Object.keys(A[0]),A,re)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||Z),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),W(A.fields||[],A.data||[],re);throw new Error("Unable to serialize unrecognized input");function W(U,H,ne){var ee="",$=(typeof U=="string"&&(U=JSON.parse(U)),typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(U)&&0<U.length),Y=!Array.isArray(H[0]);if($&&D){for(var Q=0;Q<U.length;Q++)0<Q&&(ee+=N),ee+=B(U[Q],Q);0<H.length&&(ee+=L)}for(var te=0;te<H.length;te++){var ae=($?U:H[te]).length,ge=!1,Ce=$?Object.keys(H[te]).length===0:H[te].length===0;if(ne&&!$&&(ge=ne==="greedy"?H[te].join("").trim()==="":H[te].length===1&&H[te][0].length===0),ne==="greedy"&&$){for(var Re=[],Pe=0;Pe<ae;Pe++){var Ne=Y?U[Pe]:Pe;Re.push(H[te][Ne])}ge=Re.join("").trim()===""}if(!ge){for(var Fe=0;Fe<ae;Fe++){0<Fe&&!Ce&&(ee+=N);var Ze=$&&Y?U[Fe]:Fe;ee+=B(H[te][Ze],Fe)}te<H.length-1&&(!ne||0<ae&&!Ce)&&(ee+=L)}}return ee}function B(U,H){var ne,ee;return U==null?"":U.constructor===Date?JSON.stringify(U).slice(1,25):(ee=!1,ie&&typeof U=="string"&&ie.test(U)&&(U="'"+U,ee=!0),ne=U.toString().replace(G,J),(ee=ee||I===!0||typeof I=="function"&&I(U,H)||Array.isArray(I)&&I[H]||(($,Y)=>{for(var Q=0;Q<Y.length;Q++)if(-1<$.indexOf(Y[Q]))return!0;return!1})(ne,d.BAD_DELIMITERS)||-1<ne.indexOf(N)||ne.charAt(0)===" "||ne.charAt(ne.length-1)===" ")?V+ne+V:ne)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!o&&!!n.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=w,d.ParserHandle=x,d.NetworkStreamer=m,d.FileStreamer=p,d.StringStreamer=y,d.ReadableStreamStreamer=b,n.jQuery&&((i=n.jQuery).fn.parse=function(A){var T=A.config||{},I=[];return this.each(function(L){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)I.push({file:this.files[V],inputElem:this,instanceConfig:i.extend({},T)})}),D(),this;function D(){if(I.length===0)R(A.complete)&&A.complete();else{var L,V,J,re,Z=I[0];if(R(A.before)){var ie=A.before(Z.file,Z.inputElem);if(typeof ie=="object"){if(ie.action==="abort")return L="AbortError",V=Z.file,J=Z.inputElem,re=ie.reason,void(R(A.error)&&A.error({name:L},V,J,re));if(ie.action==="skip")return void N();typeof ie.config=="object"&&(Z.instanceConfig=i.extend(Z.instanceConfig,ie.config))}else if(ie==="skip")return void N()}var G=Z.instanceConfig.complete;Z.instanceConfig.complete=function(W){R(G)&&G(W,Z.file,Z.inputElem),N()},d.parse(Z.file,Z.instanceConfig)}}function N(){I.splice(0,1),D()}}),l&&(n.onmessage=function(A){A=A.data,d.WORKER_ID===void 0&&A&&(d.WORKER_ID=A.workerId),typeof A.input=="string"?n.postMessage({workerId:d.WORKER_ID,results:d.parse(A.input,A.config),finished:!0}):(n.File&&A.input instanceof File||A.input instanceof Object)&&(A=d.parse(A.input,A.config))&&n.postMessage({workerId:d.WORKER_ID,results:A,finished:!0})}),(m.prototype=Object.create(g.prototype)).constructor=m,(p.prototype=Object.create(g.prototype)).constructor=p,(y.prototype=Object.create(y.prototype)).constructor=y,(b.prototype=Object.create(g.prototype)).constructor=b,d})}(Kh)),Kh.exports}var sM=iM();const HS=qu(sM);class oM extends ve.Component{constructor(e){super(e),this.state={data:[]},this.handleFileUpload=this.handleFileUpload.bind(this)}handleFileUpload(e){const t=e.target.files[0];t&&HS.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{console.log("Parsed CSV data:",n.data),this.props.callBack({data:n.data})},error:n=>{console.error("Error while parsing:",n)}})}render(){const{data:e}=this.state;return _.jsxs("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:[_.jsx("label",{htmlFor:"file-upload",className:"",children:"Upload"}),_.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:this.handleFileUpload})]})}}class aM extends at{constructor(t){super(t);le(this,"handleClickOutside",t=>{this.dropdownRef.current&&!this.dropdownRef.current.contains(t.target)&&!this.buttonRef.current.contains(t.target)&&this.state.showFilter&&this.setState({showFilter:!1})});le(this,"toggleFilter",()=>{this.setState({showFilter:!this.state.showFilter})});le(this,"onAllChange",t=>{const n=t.target.checked;this.setState({filterAll:n,filterTags:n,filterCompany:n,filterName:n})});le(this,"onFilterChange",t=>n=>{this.setState({[t]:n.target.checked,filterAll:!1})});this.state={...this.state,defaultClass:"fit",title:"Contacts",showFilter:!1,filterAll:!0,filterTags:!0,filterCompany:!0,filterName:!0},this.dropdownRef=qe.createRef(),this.buttonRef=qe.createRef()}async componentDidMount(){this.dispatch({selectedContacts:[]}),this.APIService.subscribeToReadObserver(async()=>{await this.componentList.sortSelectedListbyFirebaseDate("contact",!0),this.setState({start:!0})}),this.APIService.subscribeToDispatchObserver(async t=>{debugger;const n=this.componentList.getList("contact");for(let i of t)if(i.added){for(let o of i.added)if(o.type==="contact"){const l=n.findIndex(h=>h.getJson()._id===o._id);let u=n[l];l>-1&&n.splice(l,1),n.unshift(u)}}await this.componentList.setSelectedList("contact",n),await this.componentList.sortSelectedListbyFirebaseDate("contact",!0),this.dispatch({})}),document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}filterFunc(){const{tags:t}=this.propsState,n=this.componentList.getList("contact");if(!t){this.dispatch({selectedContacts:[...n]});return}if(!this.state.filterName&&!this.state.filterCompany&&!this.state.filterTags){this.dispatch({selectedContacts:[]});return}const o=t.toLowerCase().split(",").map(u=>u.trim()).filter(u=>u),l=n.filter(u=>{const h=u.getJson();return o.some(d=>{if(this.state.filterName){const g=(h.firstName||"").toLowerCase(),m=(h.lastName||"").toLowerCase();if(`${g} ${m}`.includes(d))return!0}return!!(this.state.filterCompany&&h.company&&h.company.toLowerCase().includes(d)||this.state.filterTags&&(typeof h.tags=="string"&&h.tags.toLowerCase().split(",").map(m=>m.trim()).some(m=>m.includes(d))||typeof h.finishedSequenceTags=="string"&&h.finishedSequenceTags.toLowerCase().split(",").map(m=>m.trim()).some(m=>m.includes(d))||d==="replied"&&h.replied))})});this.dispatch({selectedContacts:l})}getInnerContent(){var u,h;let t=this.propsState.selectedContacts,n=this.propsState.componentList.getList("contact"),i=(t==null?void 0:t.length)>0,o=n!=null&&n.length?"/"+(n==null?void 0:n.length):"",l=(t==null?void 0:t.length)===(n==null?void 0:n.length);return _.jsx(_.Fragment,{children:this.state.start&&_.jsxs("div",{className:"map-container",children:[_.jsxs("div",{className:"top-nav-float",children:[_.jsxs("nav",{className:"top-nav",children:[_.jsxs("div",{className:"nav-left",children:[_.jsx("div",{className:"nav-icon",children:_.jsx("i",{className:"fas fa-circle"})}),_.jsx("div",{className:"nav-title",children:"Contacts"})]}),_.jsx("div",{className:"nav-right",children:_.jsxs("div",{className:"nav-icon",children:[_.jsx("button",{ref:this.buttonRef,onClick:()=>{this.setState({showFilter:!this.state.showFilter})},className:"btn",children:_.jsx("i",{className:"fa-solid fa-filter"})}),_.jsx("div",{children:this.state.showFilter&&_.jsxs("div",{className:"filter-dropdown",ref:this.dropdownRef,children:[_.jsx("div",{style:{fontWeight:"bold",marginBottom:8},children:"Search:"}),_.jsxs("label",{className:"filter-row",children:[_.jsx("input",{style:{marginRight:"8px"},type:"checkbox",checked:this.state.filterAll,onChange:this.onAllChange})," All:"]}),_.jsxs("label",{className:"filter-row",children:[_.jsx("input",{className:"filter-check",type:"checkbox",checked:this.state.filterTags,onChange:this.onFilterChange("filterTags")})," Tags"]}),_.jsxs("label",{className:"filter-row",children:[_.jsx("input",{className:"filter-check",type:"checkbox",checked:this.state.filterCompany,onChange:this.onFilterChange("filterCompany")})," Company"]}),_.jsxs("label",{className:"filter-row",children:[_.jsx("input",{className:"filter-check",type:"checkbox",checked:this.state.filterName,onChange:this.onFilterChange("filterName")})," Name"]})]})})]})})]}),_.jsx("div",{className:"search-container",children:_.jsxs("div",{className:"search-bar",children:[_.jsx("i",{className:"fas fa-search search-icon"}),_.jsx("input",{onChange:d=>{this.dispatch({tags:d.target.value})},className:"search-input",placeholder:"Search"})]})}),_.jsxs("div",{className:"filter-nav",children:[_.jsxs("div",{className:"filter-nav-left",children:[_.jsx(_.Fragment,{children:_.jsx("div",{id:"selectBtn",style:{height:"fit-content",marginLeft:"5px",alignContent:"center"},children:_.jsx(pf,{label:l?"Deselect All":"Select All",check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}})})}),_.jsx("span",{className:"count-desc",children:(u=this.propsState.selectedContacts)!=null&&u.length?this.propsState.selectedContacts.length+`${o} Selected`:""})]}),!i&&_.jsxs("div",{className:"filter-nav-right",children:[_.jsx(oM,{callBack:async d=>{d=d.data.map((g,m)=>(g.owner=this.propsState.currentUser.getJson()._id,g.type="contact",g)),this.dispatch({uploadData:d,popupSwitch:"uploadData"}),await this.operationsFactory.prepare({prepare:d}),this.operationsFactory.run()}}),_.jsx(o0,{wrapperclassName:"none",content:_.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Add Contact"}),popupSwitch:"addContact"})]})]})]}),_.jsxs("div",{style:{paddingBottom:"60px"},children:[" ",_.jsx(fn,{filterFunc:d=>{if(!this.propsState.tags)return!0;if(!this.state.filterName&&!this.state.filterCompany&&!this.state.filterTags)return!1;const m=this.propsState.tags.toLowerCase().split(",").map(y=>y.trim()).filter(y=>y),p=d.getJson();for(const y of m){if(this.state.filterName){const b=(p.firstName||"").toLowerCase(),x=(p.lastName||"").toLowerCase();if(`${b} ${x}`.includes(y))return!0}if(this.state.filterCompany&&p.company&&p.company.toLowerCase().includes(y))return!0;if(this.state.filterTags){if(p.tags&&typeof p.tags=="string"){const b=p.tags.split(",").map(x=>x.trim().toLowerCase());for(let x of b)if(x.includes(y))return!0}if(p.finishedSequenceTags&&typeof p.finishedSequenceTags=="string"){const b=p.finishedSequenceTags.split(",").map(x=>x.trim().toLowerCase());for(let x of b)if(x.includes(y))return!0}if(y==="replied"&&p.replied)return!0}}return!1},name:"contact",type:"viewPortMap",mapContainerClass:"contact-list",mapSectionClass:"contact",wrapperClass:"none",cells:[{type:"custom",custom:zS,wrapperClass:"none"}],hasLink:!0})," "]}),((h=this.propsState.selectedContacts)==null?void 0:h.length)>0&&_.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[_.jsx("button",{onClick:()=>{this.dispatch({popupSwitch:"addTags"})},className:"floating-select-btn",children:_.jsx("span",{className:"floating-select-btn-text",children:"Tags"})}),_.jsx("button",{onClick:()=>{for(let d of this.propsState.selectedContacts)d.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:_.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),_.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:_.jsx(rf,{content:_.jsx("span",{className:"floating-select-btn-text",style:{color:"white"},children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class EC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id,visible:!0}}async componentDidMount(){await this.getComponentsFromBackend()}componentWillUnmount(){this.dispatch({selectedContacts:[]})}render(){return _.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex"},children:[_.jsx("div",{style:{width:window.innerWidth>600?"50%":"100%"},children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(aM,{})})}),_.jsx("div",{style:{width:window.innerWidth>600?"50%":"0%",position:"relative"},children:this.propsState.currentContact&&window.innerWidth>600&&this.state.visible&&_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(Ed,{})})})]})}}var pu={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var lM=pu.exports,CC;function uM(){return CC||(CC=1,function(r,e){(function(t){var n=e,i=r&&r.exports==n&&r,o=typeof Ba=="object"&&Ba;(o.global===o||o.window===o)&&(t=o);var l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[\x01-\x7F]/g,h=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,d=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,g={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},m=/["&'<>`]/g,p={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},y=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,b=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,x=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,E={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},w={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},C={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},P=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],S=String.fromCharCode,O={},M=O.hasOwnProperty,R=function(G,W){return M.call(G,W)},A=function(G,W){for(var B=-1,U=G.length;++B<U;)if(G[B]==W)return!0;return!1},T=function(G,W){if(!G)return W;var B={},U;for(U in W)B[U]=R(G,U)?G[U]:W[U];return B},I=function(G,W){var B="";return G>=55296&&G<=57343||G>1114111?(W&&L("character reference outside the permissible Unicode range"),""):R(C,G)?(W&&L("disallowed character reference"),C[G]):(W&&A(P,G)&&L("disallowed character reference"),G>65535&&(G-=65536,B+=S(G>>>10&1023|55296),G=56320|G&1023),B+=S(G),B)},D=function(G){return"&#x"+G.toString(16).toUpperCase()+";"},N=function(G){return"&#"+G+";"},L=function(G){throw Error("Parse error: "+G)},V=function(G,W){W=T(W,V.options);var B=W.strict;B&&b.test(G)&&L("forbidden code point");var U=W.encodeEverything,H=W.useNamedReferences,ne=W.allowUnsafeSymbols,ee=W.decimal?N:D,$=function(Y){return ee(Y.charCodeAt(0))};return U?(G=G.replace(u,function(Y){return H&&R(g,Y)?"&"+g[Y]+";":$(Y)}),H&&(G=G.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),H&&(G=G.replace(d,function(Y){return"&"+g[Y]+";"}))):H?(ne||(G=G.replace(m,function(Y){return"&"+g[Y]+";"})),G=G.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),G=G.replace(d,function(Y){return"&"+g[Y]+";"})):ne||(G=G.replace(m,$)),G.replace(l,function(Y){var Q=Y.charCodeAt(0),te=Y.charCodeAt(1),ae=(Q-55296)*1024+te-56320+65536;return ee(ae)}).replace(h,$)};V.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var J=function(G,W){W=T(W,J.options);var B=W.strict;return B&&y.test(G)&&L("malformed character reference"),G.replace(x,function(U,H,ne,ee,$,Y,Q,te,ae){var ge,Ce,Re,Pe,Ne,Fe;return H?(Ne=H,E[Ne]):ne?(Ne=ne,Fe=ee,Fe&&W.isAttributeValue?(B&&Fe=="="&&L("`&` did not start a character reference"),U):(B&&L("named character reference was not terminated by a semicolon"),w[Ne]+(Fe||""))):$?(Re=$,Ce=Y,B&&!Ce&&L("character reference was not terminated by a semicolon"),ge=parseInt(Re,10),I(ge,B)):Q?(Pe=Q,Ce=te,B&&!Ce&&L("character reference was not terminated by a semicolon"),ge=parseInt(Pe,16),I(ge,B)):(B&&L("named character reference was not terminated by a semicolon"),U)})};J.options={isAttributeValue:!1,strict:!1};var re=function(G){return G.replace(m,function(W){return p[W]})},Z={version:"1.2.0",encode:V,decode:J,escape:re,unescape:J};if(n&&!n.nodeType)if(i)i.exports=Z;else for(var ie in Z)R(Z,ie)&&(n[ie]=Z[ie]);else t.he=Z})(lM)}(pu,pu.exports)),pu.exports}var cM=uM();const hM=qu(cM);function Xr(r){if(typeof r=="string"){const e=r.replace(/<[^>]+>/g,"");return hM.decode(e).replace(/\s+/g," ").trim()}}class dM extends at{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().body,t=Xr(e);this.setState({plainText:t})}componentDidUpdate(e){const t=this.props.obj.getJson().body,n=e.obj.getJson().body;if(t!==n){const i=Xr(t);this.setState({plainText:i})}}render(){let e=this.props.obj.getJson().ownerMessage?"outgoing":"incoming";return _.jsx("div",{children:this.props.obj.getJson().suggestion?_.jsxs("div",{className:"message-item outgoing",children:[_.jsxs("div",{className:"close-or-accept",children:[_.jsx("div",{className:"accept-suggested-message hover-darken",onClick:async()=>{let t=this.props.obj;t.setCompState({suggestion:!1,ownerMessage:!0},{run:!0});let n={originalMessageId:t.getJson().originalMessageId||"",from:this.propsState.currentUser.getJson()._id,to:this.propsState.currentConversation.getJson().contact,subject:t.getJson().subject,text:t.getJson().body},i=this.propsState.currentUser.getJson().gmailAuthenticated?"https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app":"https://sendgridemailhandler-7c5i3vsqma-uc.a.run.app";await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>{if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return o.json()}).then(o=>{console.log("Reply sent successfully in thread.",o)}).catch(o=>{console.error("Error sending reply:",o)})},children:_.jsx("i",{className:"fas fa-check"})}),_.jsx(sf,{obj:this.props.obj,formClass:"none",content:_.jsx("div",{className:"decline-suggested-message hover-darken",children:_.jsx("i",{className:"fas fa-times"})})})]}),_.jsx("div",{className:"message message-item-suggested",children:this.state.plainText})]}):_.jsxs(_.Fragment,{children:[this.props.obj.getJson().timeStamp&&_.jsx("div",{className:"date-divider",children:_.jsx("span",{className:"timestamp",children:this.props.obj.getJson().timeStamp})}),_.jsx("div",{className:"message-item "+e,children:_.jsx("div",{className:"message "+e,children:this.state.plainText})})]})})}}const fM="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23696969'%3e%3cpath%20d='M400-80%200-480l400-400%2071%2071-329%20329%20329%20329-71%2071Z'/%3e%3c/svg%3e";class pM extends at{constructor(t){super(t);le(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});le(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}render(){var l;const{obj:t}=this.props;let n=t.getJson(),o=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return _.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsxs("div",{className:"contact-item hover-darken",style:{background:o?"#2374ab10":"white",position:"relative",paddingLeft:"5px"},children:[_.jsx(pf,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),_.jsx("div",{className:"contact-avatar",children:_.jsx("i",{className:"fa-solid fa-user"})}),_.jsxs("div",{className:"contact-info",children:[_.jsx("div",{onClick:()=>{window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentContact:t,currentPopupComponent:t,popupSwitch:"viewPotentialProspect"})},className:"contact-name",children:`${n.firstName} ${n.lastName}`}),_.jsx("div",{className:"contact-desc",children:n.company})]}),_.jsx("div",{style:{cursor:"pointer",width:"fit-content"},children:_.jsx("div",{className:"contact-icon",children:_.jsx("i",{className:"fa-solid fa-message"})})})]}),_.jsx("div",{className:"contact-tag-container active",children:(l=n.tags)==null?void 0:l.split(",").map((u,h)=>_.jsx("button",{className:"contact-tag-btn",children:u},h))})]})}}class mM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}componentDidMount(){this.dispatch({selectedContacts:[]})}filterFunc(){var o;let e=_i.getIdFromURL(),t=((o=this.propsState.tags)==null?void 0:o.split(","))||"",n=this.componentList.getList("potentialProspect",e,"researchId"),i=[];if(t)for(let l of t){let u=n.filter(h=>h.getJson().tags.includes(l));i=[...i,...u]}else i=[...n];this.dispatch({selectedContacts:i})}getInnerContent(){var l,u;let e=_i.getIdFromURL();this.componentList.getComponent("research",e);let t=this.propsState.selectedContacts,n=this.propsState.componentList.getList("potentialProspect",e,"researchId");(t==null?void 0:t.length)>0;let i=n!=null&&n.length?"/"+(n==null?void 0:n.length):"",o=(t==null?void 0:t.length)===(n==null?void 0:n.length);return _.jsxs("div",{className:"mobile-container",children:[_.jsxs("div",{className:"top-nav-float",children:[_.jsx("nav",{className:"top-nav",children:_.jsxs("div",{className:"nav-left",children:[_.jsx("div",{className:"nav-icon",children:_.jsx("i",{className:"fas fa-circle"})}),_.jsx("div",{className:"nav-title",children:"Researched Potential Prospects"})]})}),_.jsx("div",{className:"search-container",children:_.jsxs("div",{className:"search-bar",children:[_.jsx("i",{className:"fas fa-search search-icon"}),_.jsx("input",{onChange:h=>{this.dispatch({tags:h.target.value})},className:"search-input",placeholder:"Search"})]})}),_.jsx("div",{className:"filter-nav",children:_.jsxs("div",{className:"filter-nav-left",children:[_.jsx(_.Fragment,{children:_.jsx("div",{id:"selectBtn",style:{height:"fit-content",marginLeft:"5px",alignContent:"center"},children:_.jsx(pf,{label:o?"Deselect All":"Select All",check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}})})}),_.jsx("span",{className:"count-desc",children:(l=this.propsState.selectedContacts)!=null&&l.length?this.propsState.selectedContacts.length+`${i} Selected`:""})]})})]}),_.jsx(fn,{filterFunc:h=>{if(!this.propsState.tags)return!0;let d=this.propsState.tags.split(",");for(let g of d)if(g!==""&&h.getJson().tags.includes(g))return!0;return!1},filter:{search:e,attribute:"researchId"},name:"potentialProspect",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:pM}],hasLink:!0}),((u=this.propsState.selectedContacts)==null?void 0:u.length)>0&&_.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[_.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn hover-basic",children:_.jsx("span",{className:"floating-select-btn-text",children:"Remove"})}),_.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.copy({type:"contact",ogPPId:h.getJson()._id})},className:"floating-select-btn floating-select-primary-btn hover-basic",children:_.jsx("span",{className:"floating-select-btn-text",children:"Add Prospect"})}),_.jsx("button",{style:{width:"110px"},className:"floating-select-btn floating-select-primary-btn hover-basic",children:_.jsx(rf,{formclassName:"FCImgButton",content:_.jsx("span",{onClick:()=>{let h=this.propsState.selectedContacts;for(let d of h)d.copy({type:"contact",ogPPId:d.getJson()._id});this.dispatch({sequenceDataType:"research"})},className:"floating-select-btn-text",style:{color:"white"},children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class gM extends zS{constructor(e){super(e),this.state={...this.state,count:0}}componentDidMount(){if(this.state.count<=0){const{app:e,obj:t}=this.props;let o=e.state.componentList.getList("potentialProspect",t==null?void 0:t.getJson()._id,"researchId").length;this.setState({count:o})}}render(){const{obj:e,app:t}=this.props;let n=e.getJson(),i=n.isActive;return _.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsx("div",{style:{alignSelf:"flex-end"},children:_.jsx(rf,{obj:e,formClass:"none",wrapperClass:"none",content:_.jsx("span",{className:"floating-select-btn-text",style:{color:"black",marginRight:"10px"},children:"edit"}),popupSwitch:"updateResearch"})}),_.jsxs(Bt,{to:`./${n==null?void 0:n._id}`,style:{padding:"20px"},className:`contact-item ${i?"contact-item-active":""}`,children:[_.jsxs("div",{className:"contact-info",children:[_.jsx("div",{onClick:()=>{this.dispatch({currentPopupComponent:e,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.name} `}),_.jsx("div",{className:"contact-desc",children:`${this.state.count} Contact${this.state.count!==1?"s":""} Found`})]}),_.jsxs("div",{className:`profile-status ${i?"profile-status-active":""}`,children:[_.jsx("i",{className:"fa-solid fa-circle"}),_.jsx("span",{children:i?"Active":"Paused"})]})]}),_.jsx("div",{className:"contact-tag-container active",children:this.getTagUI(n)})]})}}class yM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let o of e){let l=t.filter(u=>u.getJson().tags.includes(o));n=[...n,...l]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){return _.jsxs("div",{className:"map-container",children:[_.jsxs("div",{className:"top-nav-float",children:[_.jsx("nav",{className:"top-nav",children:_.jsxs("div",{className:"nav-left",children:[_.jsx("div",{className:"nav-icon",children:_.jsx("i",{className:"fas fa-circle"})}),_.jsx("div",{className:"nav-title",children:"Research"})]})}),_.jsx("div",{className:"search-container",children:_.jsxs("div",{className:"search-bar",children:[_.jsx("i",{className:"fas fa-search search-icon"}),_.jsx("input",{onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input",placeholder:"Search"})]})}),_.jsx("div",{className:"filter-nav"}),_.jsx(o0,{wrapperClass:"icon-row",newProp:"asdf",content:_.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"New Research Profile"}),popupSwitch:"addResearch"})]}),_.jsx("div",{className:"card-header",children:"Customer Profiles"}),_.jsxs("div",{children:[" ",_.jsx(fn,{filterFunc:e=>{var i;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;return(i=e.getJson().name)!=null&&i.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0),t},name:"research",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:gM}]})]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class AC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(yM,{})})})}}class vM extends at{constructor(e){super(e),this.state={...this.state,opens:"0"}}async componentDidMount(){const{obj:e}=this.props;let t=await this.componentList.getComponentsFromBackend({type:"open",ids:e.getJson()._id,filterKeys:"sequenceId"});this.setState({opens:t.length})}render(){var n,i;const{obj:e}=this.props;let t=e.getJson();return _.jsxs("div",{className:"sequence",children:[_.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[_.jsx(Bt,{to:"/sequence/"+t._id,style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:_.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})}),_.jsx(Bt,{to:"/sequence/"+t._id,style:{marginRight:"10px"},onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]}),_.jsxs("div",{className:"row row-space-around",style:{fontSize:"14px"},children:[_.jsxs("div",{className:"col",children:[_.jsx("div",{children:"Active"}),_.jsx("div",{children:((i=(n=this.componentList.getList("contact",t._id,"sequenceId"))==null?void 0:n.filter(o=>o.getJson().finished===!1))==null?void 0:i.length)||"0"})]}),_.jsxs("div",{className:"col",children:[_.jsx("div",{children:"Completed"}),_.jsx("div",{children:(t==null?void 0:t.finished)||"0"})]}),_.jsxs("div",{className:"col",children:[_.jsx("div",{children:"Opened"}),_.jsx("div",{children:this.state.opens||"N/A"})]}),_.jsxs("div",{className:"col",children:[_.jsx("div",{children:"Reply"}),_.jsx("div",{children:(t==null?void 0:t.replyRate)!=null?`${t.replyRate}`:"N/A"}),"                "]}),_.jsxs("div",{className:"col",children:[_.jsx("div",{children:"Bounce"}),_.jsx("div",{children:t!=null&&t.bounceRate?`${t==null?void 0:t.bounceRate}%`:"N/A"})]})]}),_.jsx("div",{style:{position:"absolute",right:"4px",cursor:"pointer"},className:"del-icon",children:_.jsx("div",{onClick:()=>{this.dispatch({popupSwitch:"delSequence",delSequence:this.props.obj})},children:_.jsx("i",{className:"fa-solid fa-xmark"})})})]})}}class _M extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return _.jsxs("div",{className:"fit",children:[_.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Sequences"}),_.jsx(fn,{name:"sequence",filterFunc:e=>{var i;if(e.getJson().name===void 0||e.getJson().name==="")return!1;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;return(i=e.getJson().name)!=null&&i.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0),t},cells:[{type:"custom",custom:vM}]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class wM extends at{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Xr(e);this.setState({plainText:t})}componentDidUpdate(e){var i,o;const t=(i=this.props.obj)==null?void 0:i.getJson().content,n=(o=this.props.obj)==null?void 0:o.getJson().content;if(t!==n){const l=Xr(t);this.setState({plainText:l})}}render(){const{obj:e}=this.props;let t=e.getJson();return _.jsx("div",{className:"sequence",children:_.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[_.jsx(Bt,{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:_.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:this.state.plainText})}),_.jsx(Bt,{style:{marginRight:"0px"},to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class EM extends at{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Xr(e);this.setState({plainText:t})}componentDidUpdate(e){var i,o;const t=(i=this.props.obj)==null?void 0:i.getJson().content,n=(o=this.props.obj)==null?void 0:o.getJson().content;if(t!==n){const l=Xr(t);this.setState({plainText:l})}}render(){const{obj:e}=this.props;let t=e.getJson();return _.jsx("div",{className:"sequence",children:_.jsx("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:_.jsx("div",{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},onClick:()=>{let n=this.props.changeItem||"currentPopupComponent",i=this.props.changeAttribute||"content";this.propsState[n].setCompState({[i]:t.content}),this.dispatch({update:this.propsState[n]})},className:"title-left",children:_.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:this.state.plainText})})})})}}class CM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return _.jsxs(_.Fragment,{children:[_.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Templates"}),_.jsx(fn,{name:"template",filterFunc:e=>{var i;if(e.getJson().content===void 0||e.getJson().content==="")return!1;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;return(i=e.getJson().content)!=null&&i.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0),t},cells:[{type:"custom",custom:wM}]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class AM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return _.jsxs("div",{className:"map-container",style:{paddingBottom:"62px"},children:[_.jsxs("div",{className:"top-nav-float",children:[_.jsx("nav",{className:"top-nav",children:_.jsxs("div",{className:"nav-left",children:[_.jsx("div",{className:"nav-icon",children:_.jsx("i",{className:"fas fa-circle"})}),_.jsx("div",{className:"title-name",children:"Content"})]})}),_.jsx("div",{className:"search-container",children:_.jsxs("div",{className:"search-bar",children:[_.jsx("i",{className:"fas fa-search search-icon"}),_.jsx("input",{onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input",placeholder:"Search"})]})}),_.jsx("div",{className:"filter",children:_.jsxs("div",{className:"row row-space-between",children:[_.jsx(Bt,{to:"/sequence",className:"btn-gray",children:"New Sequence"}),_.jsx(Bt,{to:"/template",className:"btn-gray",children:"New Template"})]})})]}),_.jsx("div",{children:_.jsx(dn,{theme:"defaultCard",content:_.jsx(_M,{})})}),_.jsx("div",{children:_.jsx(dn,{theme:"defaultCard",content:_.jsx(CM,{})})})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class bC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.propsState.currentUser.getJson()._id}}async componentDidMount(){this.getComponentsFromBackend()}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.state.gotComponents&&_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(AM,{})})})}}class bM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){var t;let e=this.componentList.getComponent("aiSettings");return _.jsxs("div",{id:"aiSettings",className:"map-container",style:{width:"fit-content",minWidth:"400px",height:"fit-content",padding:"12px",borderRadius:"8px",border:"1px solid #d1d1d1"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[_.jsx("div",{className:"contact-avatar",style:{maxWidth:"45px",maxHeight:"45px",background:"#323232"},children:_.jsx("i",{className:"fa-solid fa-gears"})}),_.jsx("h1",{children:"AI Settings"})]}),_.jsx("p",{style:{color:"#333333",margin:"12px 0px 12px 0px"},children:"Enable AI functionality within the platform"}),(t=e==null?void 0:e.getJson())!=null&&t.autoAI?_.jsx("div",{onClick:()=>{e.setCompState({autoAI:!1},{run:!0},!0)},className:"blue-button-1",style:{position:"relative",width:"fit-content"},children:"Turn off AI"}):_.jsx("div",{onClick:()=>{e.setCompState({autoAI:!0},{run:!0},!0)},className:"blue-button-1",style:{position:"relative",width:"fit-content"},children:"Turn on AI"})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class xM extends at{constructor(t){super(t);le(this,"expectedState","xyz123");this.state={...this.state,defaultClass:"fit",loading:!1,error:null}}componentDidMount(){const n=new URLSearchParams(window.location.search).get("code");n&&!this.state.hasExchanged&&(this.setState({hasExchanged:!0}),setTimeout(()=>{this.exchangeCodeForTokens(n)},100))}async exchangeCodeForTokens(t){this.setState({loading:!0,error:null});let n={code:t,user:this.propsState.currentUser.getJson()};console.log(n);let i=await JSON.stringify(n);try{const o=await fetch("https://exchangecode-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:i});if(!o.ok)throw new Error(`HTTP ${o.status}`);const{access_token:l,refresh_token:u,expires_in:h}=await o.json();console.log(l),await this.propsState.currentUser.setCompState({outreachAccessToken:l,outreachRefreshToken:u,outreachTokenExpiresAt:Date.now()+h*1e3},{run:!0},!0),window.history.replaceState({},"",window.location.pathname)}catch(o){console.error(o),this.setState({error:o.message})}finally{this.setState({loading:!1})}}getInnerContent(){const{loading:t,error:n}=this.state;return _.jsxs("div",{id:"outreachSettings",style:{width:"fit-content",height:"fit-content",minWidth:"400px",padding:"12px",borderRadius:"8px",border:"1px solid #d1d1d1"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[_.jsx("div",{className:"contact-avatar",style:{maxWidth:"25px",maxHeight:"25px",background:"#323232"},children:_.jsx("i",{class:"fa-solid fa-envelope"})}),_.jsx("h1",{children:"Outreach Settings"})]}),_.jsx("p",{style:{color:"#333333",margin:"12px 0px 12px 0px"},children:"Integrate with Outreach for sales engagement"}),t&&_.jsx("p",{children:"Linking your Outreach account"}),n&&_.jsxs("p",{style:{color:"red"},children:["Error: ",n]}),!t&&!n&&_.jsx("div",{className:"blue-button-1",onClick:()=>{window.location.href=`https://accounts.outreach.io/oauth/authorize?client_id=FVmbvVzJuXA7v1QqONeErtezeL-Rth2L6.UWzJW8IeZL&redirect_uri=${encodeURIComponent("https://app.salescapture.ai/settings")}&response_type=code&scope=sequences.read%20sequenceStates.write%20users.all%20mailboxes.all%20prospects.all&state=xyz123`},children:"Connect Outreach"})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}const WS="/assets/logo_google_g-DjEGDao7.png";class SM extends at{constructor(t){super(t);le(this,"handleAuthClick",()=>{this.setState({statusMessage:"Redirecting to Google..."});const t="786362911238-7q3lb2icdev4ives0ho4loi21n1r1t1g.apps.googleusercontent.com",n="https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid",i="https://scaiuserauthentication-7c5i3vsqma-uc.a.run.app/oauth2callback",o=new URL("https://accounts.google.com/o/oauth2/v2/auth");o.searchParams.set("client_id",t),o.searchParams.set("redirect_uri",i),o.searchParams.set("response_type","code"),o.searchParams.set("scope",n),o.searchParams.set("access_type","offline"),o.searchParams.set("prompt","consent");const l=this.propsState.currentUser.getJson()._id,u=window.location.href,d=JSON.stringify({userId:l,postAuthRedirect:u});o.searchParams.set("state",d),window.location.href=o.toString()});this.state={statusMessage:""}}render(){const{statusMessage:t}=this.state;return _.jsxs("div",{className:"gmail-auth-container",children:[_.jsx("h1",{style:{fontSize:"22px"},children:"Gmail API Authorization"}),_.jsx("p",{style:{fontSize:"16px"},children:"Click the button below to authorize your Google account for use with the Firebase Function."}),_.jsx("p",{style:{fontSize:"14px"},children:"- This process will redirect you to Google for authorization and then back to your function, which will save your token to Firestore, linked by your email address."}),_.jsxs("button",{className:"auth-button dark-button-1",style:{fontSize:"14px",background:"#333333"},onClick:this.handleAuthClick,children:[_.jsx("img",{src:WS,style:{width:"30px"}}),_.jsx("div",{children:"Authorize with Google"})]}),t&&_.jsx("div",{className:"status-message",children:t})]})}}class TM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return _.jsx("div",{id:"googleSettings",style:{border:"1px solid #d1d1d1",width:"fit-content",height:"fit-content",minWidth:"400px",padding:"12px",borderRadius:"8px"},children:this.propsState.currentUser.getJson().gmailAuthenticated?_.jsxs("div",{style:{font:"normal normal 900 12px/18px Satoshi"},children:["Gmail Authenticated:",_.jsxs("div",{style:{font:"normal normal 400 12px/16px Satoshi",color:"#696969",alignItems:"center",display:"flex",marginTop:"20px"},children:[_.jsx("img",{src:WS,style:{width:"30px"}}),this.propsState.currentUser.getJson()._id]})]}):_.jsx(SM,{})})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class xC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return _.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex",flexDirection:"column"},children:[_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(bM,{})}),_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(xM,{})}),_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(TM,{})})]})}}class IM extends at{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Xr(e);this.setState({plainText:t})}componentDidUpdate(e){var i,o;const t=(i=this.props.obj)==null?void 0:i.getJson().content,n=(o=this.props.obj)==null?void 0:o.getJson().content;if(t!==n){const l=Xr(t);this.setState({plainText:l})}}render(){return _.jsx("div",{onClick:()=>{this.dispatch({popupSwitch:"updateStep",currentPopupComponent:this.props.obj})},children:_.jsxs("div",{className:"icon-row",children:[_.jsx("div",{className:"icon-container",children:_.jsxs("div",{className:"col",children:[_.jsx("div",{className:"icon",style:{cursor:"pointer"},children:_.jsx("i",{className:"fa-solid fa-envelope"})}),_.jsx("div",{className:"svg",children:_.jsx("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("line",{x1:"50%",y1:"0",x2:"50%",y2:"50",stroke:"var(--app-green)",strokeWidth:"3"})})})]})}),_.jsxs("div",{className:"message-container",children:[_.jsx("b",{children:this.props.obj.getJson().subject}),_.jsx("br",{}),_.jsx("span",{children:this.state.plainText})]})]})})}}class DM extends at{constructor(e){super(e),this.state={...this.state,style:{width:"fit-content",font:"normal normal 900 10px / 14px Satoshi",padding:"6px 17px",letterSpacing:".5px",color:"white",borderRadius:"53px",marginTop:"0px"},plainText:""}}getText(e){let t="Active",n="#9a9a9a";return e.getJson().finished&&(t="Finished",e.getJson().bounced&&(t="Bounced",n="#BE5858"),e.getJson().replied&&(t="Replied",n="#2374AB")),_.jsx("div",{className:"contact-tag-btn",style:{...this.state.style,background:n+" 0% 0% no-repeat"},children:t})}render(){var i,o;let e=(i=this.props.obj)==null?void 0:i.getJson(),t=e!=null&&e.mobile?e==null?void 0:e.mobile:e==null?void 0:e.email;(e.firstName||e.lastName)&&`${e.firstName}${e.lastName}`;let n=this.getText((o=this.props)==null?void 0:o.obj);return _.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[_.jsxs("div",{className:"contact-info",style:{flex:2},children:[_.jsx("div",{className:"contact-name",children:`${e.firstName} ${e.lastName}`}),_.jsxs("div",{className:"contact-desc",children:[(e==null?void 0:e.company)||(e==null?void 0:e.title)||(e==null?void 0:e.email)||(e==null?void 0:e.mobile)||"",_.jsxs("div",{children:["step: ",parseInt(e.emailNumber)+1]})]})]}),_.jsxs("div",{style:{display:"flex",flex:1,gap:"3px",justifyContent:"flex-end"},children:[_.jsx("div",{children:n}),!this.props.obj.getJson().finished&&_.jsx("div",{title:"Remove from Sequence",onClick:()=>{this.props.obj.setCompState({finished:!0}),this.props.obj.update();let l=this.propsState.currentSequence,u=parseInt(l.getJson().finished)+1;l.setCompState({finished:u}),l.update()},className:"dark-button-1",children:"Remove"})]})]})}}class kh extends pl{constructor(e){super(e),this.state={...this.state,list:null,spState:"sequenceSteps"}}async componentDidMount(){var n;let e;await this.getComponentsFromBackend(),await this.componentList.getComponentsFromBackend("template"),await this.componentList.getComponentsFromBackend("step"),await this.componentList.getComponentsFromBackend("contact"),e=this.comp,e||(e=await this.operationsFactory.prepare({prepare:{type:"sequence"},clean:!0}),e=e[0]);let t=await this.componentList.getList("step",(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,"sequenceId");this.state.list||this.setState({list:t}),await this.dispatch({currentSequence:e}),this.componentList.sortSelectedList("step","order")}componentWillUnmount(){this.operationsFactory.clear()}async createStep(e){let t=this.componentList.getList("step",e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,"sequenceId");this.state.list||this.setState({list:t});const n=await this.operationsFactory.prepare({prepare:{type:"step",sequenceId:e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,step:t.length}});this.dispatch({currentStep:n.length===2?n[1]:n[0]})}getStepJson(){var n,i;let e=this.componentList.getList("step",(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,"sequenceId");return{type:"step",sequenceId:(i=this.propsState.currentSequence)==null?void 0:i.getJson()._id,step:e.length}}getInnerContent(){var n,i,o,l,u,h;let t=((n=this.state.list)==null?void 0:n.length)>0?(i=this.state)==null?void 0:i.list[0].getJson().content:void 0;return _.jsx("div",{className:"fit",children:_.jsxs("div",{className:"mobile-container",children:[_.jsxs("div",{className:"title-bar",children:[_.jsxs("div",{className:"title-left",children:[_.jsx("div",{className:"title-icon",children:_.jsx("i",{className:"fas fa-angle-left",onClick:()=>{history.back()}})}),((o=this.propsState.currentSequence)==null?void 0:o.getJson().name)===""||this.state.edit?_.jsxs("div",{className:"name-a-sequence",children:[_.jsx(Je,{obj:this.propsState.currentSequence,name:"name"}),_.jsx(Si,{callbackFunc:()=>{this.setState({edit:!1}),this.propsState.currentSequence.update()},content:"save",className:"dark-button-1"})]}):_.jsx(_.Fragment,{children:_.jsxs("div",{className:"title-name",children:[(l=this.propsState.currentSequence)==null?void 0:l.getJson().name,_.jsx("span",{onClick:()=>{this.setState({edit:!0})},children:_.jsx("span",{className:"name-a-sequence-edit-btn",children:"Edit"})})]})})]}),"limit contacts per day:",_.jsx(Je,{name:"limit",obj:this.propsState.currentSequence,update:!0}),_.jsxs("div",{className:"title-right active-seq-container",children:[_.jsx("div",{className:"title-icon",children:_.jsx("i",{className:"fas fa-circle"})}),_.jsx("div",{className:"title-name",children:"Active"})]})]}),_.jsx("div",{className:"switch-tab",children:_.jsxs("div",{className:"row row-space-around",children:[_.jsxs("div",{onClick:()=>{this.setState({spState:"assignedProspects"})},className:this.state.spState==="sequenceSteps"?"switch-tab-btn":"switch-tab-btn active",children:["Assigned",_.jsx("br",{}),"Prospects"]}),_.jsxs("div",{onClick:()=>{this.setState({spState:"sequenceSteps"})},className:this.state.spState==="assignedProspects"?"switch-tab-btn":"switch-tab-btn active",children:["Sequence",_.jsx("br",{}),"Steps"]})]})}),this.state.spState==="sequenceSteps"?_.jsxs("div",{className:"icon-list",children:[_.jsx(fn,{name:"step",mapSectionClass:"none",mapContainerClass:"none",filter:{search:(u=this.propsState.currentSequence)==null?void 0:u.getJson()._id,attribute:"sequenceId"},filterFunc:d=>!(d.getJson().content===void 0||d.getJson().content===""),cells:[{type:"custom",custom:IM,wrapperClass:"none"}]}),_.jsx(rf,{formClass:"svg-last",newProp:"asdf",obj:this.getStepJson(),content:_.jsxs(_.Fragment,{children:[_.jsx("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",children:t&&this.state.list&&_.jsx(_.Fragment,{children:_.jsx("path",{d:"M25,0 Q25,25 50,25 H50",fill:"none",stroke:"var(--app-green)",strokeWidth:"3",strokeLinecap:"round"})})}),_.jsx("div",{className:"icon-last",children:_.jsx("i",{className:"fa-solid fa-plus"})})]}),popupSwitch:"addStep"}),_.jsx("div",{className:"icon-row",children:_.jsx("div",{className:"svg-last"})})]}):_.jsx("div",{className:"layoutColumn conversation-container",style:{padding:"20px"},children:_.jsx(fn,{name:"contact",mapSectionClass:"none",mapContainerClass:"none",filter:{search:(h=this.propsState.currentSequence)==null?void 0:h.getJson()._id,attribute:"sequenceId"},cells:[{type:"custom",custom:DM,wrapperClass:"none"}]})})]})})}render(){return _.jsx("div",{className:[this.props.pageClass||this.state.defaultClass,"sequence-margin"].join(" "),children:this.getInnerContent()})}}class kM{async _makeApiCall(e){try{const t=await fetch("https://getemailfromai-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const i=await t.json();throw new Error(i.error||`Request failed with status ${t.status}`)}const n=await t.json();if(n.success)return n.data;throw new Error(n.error||"The API call was not successful.")}catch(t){throw console.error("Failed to fetch from AI service:",t),t}}async generateMessage(e,t,n={}){const i={companyID:e.getJson().companyId,emailType:t,currentAIOptions:{model:"gpt-4o-mini",temperature:.9},context:{persona:n.persona||"",details:n.details||"",conversationHistory:n.conversationHistory||{}}};return await this._makeApiCall(i)}extractSubjectAndBody(e){const t=e.match(/^{{\s*([^}]+?)\s*}}/);let n="",i="";t?(n=t[1].trim(),i=e.slice(t[0].length).trim()):i=e.trim();const o=i.split(`

`).map(l=>`<p>${l.replace(/\n/g,"<br>")}</p>`).join(`
`);return{subject:n,body:o}}}const Qs=new kM;class Rh extends pl{async componentDidMount(){await this.getComponentsFromBackend();const e=this.urlId;if(!e||e==="template"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}async bridgeAiService(){let{persona:e,details:t,messageType:n}=this.state;n||(n="template");const i=this.propsState.currentComponent,o=this.propsState.currentUser;if(!n){alert("Please select a message type.");return}const l={persona:e,details:t,conversationHistory:{}};switch(n){case"reply":l.conversationHistory={fullHistory:t,lastProspectReply:t};break;case"sequence":l.conversationHistory={lastSentEmail:t};break;default:l.details=t;break}try{const u=await Qs.generateMessage(o,n,l),{subject:h,body:d}=Qs.extractSubjectAndBody(u);i.setCompState({content:d,subject:h}),console.log(d),this.dispatch({})}catch(u){console.error("Failed to generate AI message:",u),alert("There was an error generating the message. Please check the console.")}}getInnerContent(){const e=["Template","Follow Up","Reply","Event","Proposal","Attached Document","Referral","Network","Re-Engage"],t=["template","sequence","reply","event","proposal","document","referral","network","reEngage"];let n="Optional: Add Additional Details or Instructions",i="e.g., Mention our upcoming promotion...";return this.state.messageType==="reply"?(n="Paste Email Thread to Reply To:",i="e.g., On Fri, Jul 25, 2025, Jane Smith wrote: I'm interested..."):this.state.messageType==="sequence"&&(n="Paste Last Email Sent in Sequence:",i="e.g., Subject: Checking In..."),_.jsxs("div",{className:"fit",children:[_.jsx("h1",{children:"Template Details"}),_.jsx("div",{onClick:()=>this.setState({showAIDraft:!this.state.showAIDraft}),className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:this.state.showAIDraft?"Cancel":"Draft With AI"}),this.state.showAIDraft&&_.jsxs("div",{children:["Select Message Type:",_.jsx(Je,{type:"select",selectOptions:e,handleChange:o=>{let l=e.indexOf(o.target.value),u=t[l];this.setState({messageType:u})}}),'Optional: Specify a Persona (e.g., "friendly and casual" or "formal and direct")',_.jsx("input",{name:"persona",onChange:o=>this.setState({persona:o.target.value})}),"Optional: Add Additional Details or Instructions",_.jsx("div",{children:n}),_.jsx("input",{name:"details",placeholder:i,value:this.state.details||"",onChange:o=>this.setState({details:o.target.value})}),_.jsx("div",{className:"dark-button-1",onClick:()=>this.bridgeAiService(),children:"Generate"})]}),_.jsx("div",{className:"input-container",children:_.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&_.jsx(Je,{name:"subject",obj:this.propsState.currentComponent})})}),_.jsx("div",{className:"input-container",children:_.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&_.jsx(Je,{type:"quill",name:"content",obj:this.propsState.currentComponent})})}),_.jsx(Si,{content:"Save Template"})]})}render(){return _.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class RM extends at{constructor(e){super(e),this.state={...this.state}}render(){const{obj:e}=this.props;let t=e.getJson();return _.jsx("div",{className:"sequence",children:_.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[_.jsx(Bt,{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},to:"/client/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:_.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})}),_.jsx(Bt,{style:{marginRight:"0px"},to:"/client/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class PM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return _.jsxs(_.Fragment,{children:[_.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Admin"}),_.jsx(fn,{name:"client",cells:[{type:"custom",custom:RM}]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class NM extends at{constructor(t){super(t);le(this,"handleCsvUpload",async t=>{debugger;const i=(await this.operationsFactory.prepare({prepare:{type:"csv",researchId:this.researchId}}))[0],o=_i.getIdFromURL(),l=t.map(d=>({...d,owner:o,type:"potentialProspect",researchId:this.researchId,csvId:i.getJson()._id}));let u=await this.operationsFactory.prepare({prepare:l});this.operationsFactory.run();let h=this.componentList.getComponent("research",this.researchId,"_id");if(h!=null&&h.getJson().autoSequence){debugger;let d=this.componentList.getComponent("user",_i.getIdFromURL(!1),"_id");d||(await this.componentList.getComponentFromBackend({type:"user"}),d=this.componentList.getComponent("user",_i.getIdFromURL(!1),"_id"));for(let m of u)m.copy({type:"contact",ogPPId:m.getJson()._id,outreach:!0});const g={contacts:l,user:d.getJson(),research:h.getJson()};try{const m=await fetch("https://autosequence-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),p=await m.json();if(!m.ok)throw p;console.log(" Contacts created & enrolled:",p)}catch(m){console.error(" Error adding to sequence:",m)}}});this.state={...this.state},this.handleFileUpload=this.handleFileUpload.bind(this)}componentDidUpdate(t){const n=this.props.obj.getJson()._id;n!==this.researchId&&(this.researchId=n)}handleFileUpload(t){debugger;const n=t.target.files[0];n&&HS.parse(n,{header:!0,skipEmptyLines:!0,complete:i=>{console.log("Parsed CSV data:",i.data),this.handleCsvUpload(i.data)},error:i=>{console.error("Error while parsing:",i)}})}async componentDidMount(){var o;const t=(o=this.props.obj)==null?void 0:o.getJson().content,n=Xr(t);this.setState({plainText:n});let{obj:i}=this.props;await this.componentList.getComponentsFromBackend({type:"csv",ids:i.getJson()._id,filterKeys:"researchId"}),this.setState({})}render(){const{obj:t}=this.props;let n=t.getJson();return _.jsxs("div",{children:[_.jsx("div",{className:"sequence",children:_.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[_.jsx("div",{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},className:"title-left",children:_.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.name})}),_.jsxs("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:[_.jsx("label",{htmlFor:`file-upload${this.props.obj.getJson()._id}`,className:"",children:"Upload"}),_.jsx("input",{id:`file-upload${this.props.obj.getJson()._id}`,type:"file",accept:".csv",onChange:this.handleFileUpload})]})]})}),_.jsxs("div",{children:[n.AIPrompt," "]}),_.jsx(fn,{name:"csv",filter:{search:n._id,attribute:"researchId"},cells:[{type:"attribute",name:"_id"}]})]})}}class OM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.componentList.getComponentFromBackend({type:"user"})}getInnerContent(){let e=_i.getIdFromURL();return _.jsxs(_.Fragment,{children:[_.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Admin"}),_.jsx(fn,{name:"research",filter:{search:e,attribute:"owner"},cells:[{type:"custom",custom:NM}]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class LM extends at{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Xr(e);this.setState({plainText:t})}componentDidUpdate(e){var i,o;const t=(i=this.props.obj)==null?void 0:i.getJson().content,n=(o=this.props.obj)==null?void 0:o.getJson().content;if(t!==n){const l=Xr(t);this.setState({plainText:l})}}render(){const{obj:e}=this.props;let t=e.getJson();return _.jsx("div",{className:"sequence",children:_.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[_.jsx(Bt,{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},to:"/user/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:_.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t._id})}),_.jsx(Bt,{style:{marginRight:"0px"},to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class FM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return _.jsxs(_.Fragment,{children:[_.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Admin"}),_.jsx(fn,{name:"user",filter:{search:this.propsState.currentClient.getJson()._id,attribute:"clientId"},cells:[{type:"custom",custom:LM}]})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class SC extends pl{async componentDidMount(){let e=_i.getIdFromURL();await this.getComponentsFromBackend(),await this.componentList.getComponentsFromBackend({type:"user",ids:e,filterKeys:"clientId"});let n=(await this.componentList.getComponentsFromBackend({type:"todo",ids:this.propsState.currentUser.getJson()._id,filterKeys:"owner"})).find(i=>i.getJson().clientId===e);n||(n=(await this.operationsFactory.prepare({prepare:{type:"todo",clientId:e},clean:!0}))[0]),this.dispatch({currentTodo:n})}getInnerContent(){return _.jsxs("div",{className:"fit",children:[[1,2,3,4,5,6].map(e=>{var o;const t=`attribute${e}`,n=`complete${e}`,i=(o=this.propsState.currentTodo)==null?void 0:o.getJson();return _.jsxs("div",{children:[i==null?void 0:i[t],_.jsx("div",{onClick:()=>{var u;const l=!i[n];(u=this.propsState.currentTodo)==null||u.setCompState({[n]:l},{run:!0})},children:i!=null&&i[n]?"Done":"Mark Done"})]},e)}),_.jsx(Si,{obj:this.propsState.currentTodo,content:"save"}),_.jsx("div",{onClick:async()=>{let e=await this.operationsFactory.prepare({prepare:{type:"user"}});e=e[0],this.dispatch({popupSwitch:"addUser",currentPopupComponent:e})},children:"add user"}),_.jsx("div",{children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(FM,{})})}),_.jsx("div",{})]})}render(){return _.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class jM extends pl{async componentDidMount(){await this.getComponentsFromBackend();let e=await this.componentList.getComponentsFromBackend({type:"client",ids:"alan@salescapture.com",filterKeys:"owner"});console.log(e)}getInnerContent(){return _.jsx("div",{className:"fit",children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(PM,{})})})}render(){return _.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class TC extends pl{async componentDidMount(){await this.getComponentsFromBackend();let e=_i.getIdFromURL(),t=await this.componentList.getComponentsFromBackend({type:"research",ids:e,filterKeys:"owner"});this.dispatch({}),console.log(t)}getInnerContent(){return _.jsx("div",{className:"fit",children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(OM,{})})})}render(){return _.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class IC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id,visible:!0}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return _.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex"},children:[_.jsx("div",{style:{width:window.innerWidth>600?"50%":"100%"},children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(mM,{})})}),_.jsx("div",{style:{width:window.innerWidth>600?"50%":"0%",position:"relative"},children:this.propsState.currentContact&&window.innerWidth>600&&this.state.visible&&_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(Ed,{})})})]})}}class BM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",currentConversation:null}}async componentDidMount(){await this.prepareMessages()}async prepareMessages(){let e=this.propsState.currentConversation;e||(e=this.componentList.getComponent("conversation"),await this.dispatch({currentConversation:e})),e?(await this.prepNewMessage(),this.setState({start:!0})):this.setState({message:"no current conversations"})}async prepNewMessage(){let e=this.propsState.currentConversation;const t=e.getJson().messageType||"email";let n=this.componentList.getList("email",this.propsState.currentConversation.getJson()._id,"conversationId");n=n[n.length-1];let i=n.getJson().originalMessageId,o=n.getJson().subject;const l=await this.operationsFactory.prepare({prepare:{type:t,conversationId:e.getJson()._id,originalMessageId:i||"",subject:o,ownerMessage:!0},clean:!0});this.dispatch({currentComponent:l[0]}),this.setState({currentConversation:e})}componentDidUpdate(e,t){this.propsState.currentConversation!==this.state.currentConversation&&this.prepNewMessage()}getInnerContent(){var n,i;const{currentConversation:e}=this.propsState;let t=this.componentList.getComponent("contact",e==null?void 0:e.getJson().contact,"email");return _.jsxs("div",{children:[window.innerWidth>1&&_.jsxs("div",{style:{position:"sticky",top:0,zIndex:200,display:"flex",flexDirection:"row",alignItems:"center",justifyItems:"space-between",background:"white",padding:"20px",paddingBottom:"8px",transform:"translateZ(0)"},children:[window.innerWidth<600&&_.jsx("div",{onClick:()=>{this.dispatch({showConversation:void 0})},children:_.jsx("img",{src:fM,style:{color:"black"}})}),_.jsx("div",{className:"contact-avatar",style:{maxWidth:"45px",maxHeight:"45px"},children:_.jsx("i",{className:"fa-solid fa-user"})}),_.jsxs("div",{className:"message-header-title",children:[_.jsx("span",{className:"sender-title",children:(n=this.propsState.currentConversation)==null?void 0:n.getJson().contactName}),_.jsx("span",{className:"sender-details-button",children:"See Details"})]}),_.jsx("div",{style:{fontSize:".8rem",cursor:"pointer",minWidth:"55px"},className:"hover-basic",children:(i=t==null?void 0:t.getJson())!=null&&i.autoAI?_.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:()=>{t.setCompState({autoAI:!1},{run:!0},!0)},children:_.jsx("i",{class:"fa-solid fa-comment-nodes",style:{fontSize:"35px",color:"#36b593"}})}):_.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:()=>{t.setCompState({autoAI:!0},{run:!0},!0)},children:_.jsx("i",{class:"fa-solid fa-comment-nodes",style:{fontSize:"35px",color:"#363636"}})})})]}),_.jsx("div",{className:"layoutColumn conversation-container",style:{padding:"20px",marginBottom:"12px"},children:this.state.message?_.jsx(_.Fragment,{children:this.state.message}):_.jsx(_.Fragment,{children:this.state.start&&_.jsxs("div",{style:{width:"100%",marginTop:"-20px"},children:[_.jsx(fn,{mapContainerClass:"message-list",name:(e==null?void 0:e.getJson().messageType)||"email",cells:[{type:"custom",custom:dM}],filter:{search:this.propsState.currentConversation.getJson()._id,attribute:"conversationId"},filterFunc:o=>!(o.getJson().body===void 0||o.getJson().body==="")}),_.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"sticky",bottom:0,zIndex:1,width:"100%",minHeight:"70px",paddingBottom:"85px",paddingLeft:"12px",background:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 1%)"},children:[_.jsx("div",{style:{position:"relative",width:"40px",zIndex:2},children:_.jsx(Si,{content:_.jsx("button",{className:"footer-btn",style:{marginBottom:"-15px",position:"absolute",left:0},children:_.jsx("i",{className:"fa-solid fa-circle-plus"})}),callbackFunc:()=>{let o=this.propsState.currentComponent;if(o.getJson().body==="")return;this.prepNewMessage();let l={originalMessageId:o.getJson().originalMessageId,from:this.propsState.currentUser.getJson()._id,to:this.propsState.currentConversation.getJson().contact,subject:o.getJson().subject,text:o.getJson().body},u=this.propsState.currentUser.getJson().gmailAuthenticated?"https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app":"https://sendgridemailhandler-7c5i3vsqma-uc.a.run.app";fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(h=>{if(!h.ok)throw new Error(`HTTP error! Status: ${h.status}`);return h.json()}).then(h=>{console.log("Reply sent successfully in thread.",h)}).catch(h=>{console.error("Error sending reply:",h)})}})}),_.jsx("div",{style:{zIndex:3,width:"100%"},children:_.jsx(Je,{wrapperClass:"footer-input",formClass:"search-input",name:"body",obj:this.propsState.currentComponent})})]})]})})})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}const $S="/assets/LogoGreen-BKvA74vO.svg";class DC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.dispatch({currentTopic:void 0,currentSubTopic:void 0,currentComponent:void 0}),await this.getComponentsFromBackend()}componentWillUnmount(){this.operationsFactory.clear(),this.dispatch({currentComponent:void 0})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:_.jsxs("div",{style:{paddingTop:"22px",display:"flex",flexDirection:"column"},children:[_.jsx("img",{src:$S,style:{width:"50%",marginBottom:"40px"}}),_.jsx("span",{style:{fontWeight:"900",fontSize:"1.12em",color:"#323232"},children:"Messaging Management Platform Coming Soon"}),_.jsx("div",{style:{marginTop:"20px"},children:"We're polishing the Messaging experience. In the meantime, you can manage contacts and research from the left navigation."}),_.jsx(Bt,{to:"/contacts",className:"inLine-Link",style:{alignSelf:"flex-start",marginTop:"22px"},children:"Go to Contacts"})," "]})})}}class MM extends at{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return _.jsx("div",{className:"sequence sequence-custom",children:_.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},onClick:()=>{let n=this.props.obj,i=this.propsState.selectedContacts;if(this.propsState.sequenceDataType==="research"){let l=[];for(let u of i)l.push(this.componentList.getComponent("contact",u.getJson()._id,"ogPPId"))}let o=this.componentList.getList("step",[n.getJson()._id],["sequenceId"]);if(o=o.filter(l=>l.getJson().content!==""&&l.getJson().content)[0],(i==null?void 0:i.length)>0){let l=parseFloat(o.getJson().nextSend),u=new Date(Date.now()+l*60*60*1e3);u=sn.fromDate(u);for(let h of i){let d=this.componentList.getComponent("sequence",h.getJson().sequenceId),g=h.getJson().finishedSequenceTags||"";d&&(h.getJson().finishedSequenceTags.includes(d.getJson().name)||(g=g.length===0?d.getJson().name:","+d.getJson().name)),h.setCompState({sequenceId:n.getJson()._id,finishedSequenceTags:g,finished:!1,emailNumber:0,nextSend:u},{run:!0})}this.dispatch({popupSwitch:"",selectedContacts:[]})}},children:[_.jsx("div",{className:"title-left",children:t.name}),_.jsx("div",{children:_.jsx("div",{id:"arrow-icon-appear",className:"send-seq-icon",children:_.jsx("i",{class:"fa-solid fa-right-long"})})})]})})}}class qM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}async componentDidMount(){var e;if(this.propsState.currentUser.getJson().outreachio&&((e=this.componentList.getList("outreachUser"))==null?void 0:e.length)===0){let t=this.propsState.currentUser.getJson().outreachAccessToken;await fetch("https://getusersandmailboxes-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(async n=>{debugger;console.log(n);let i=n.users,o=n.mailboxes,l=i.map(h=>{let d=o.find(m=>m.attributes.email===h.attributes.email);return{_id:h.id.toString(),type:"outreachUser",mailboxId:d.id,type:"outreachUser",mailboxEmail:d.attributes.email}}),u=await this.componentList.addComponents(l,!0);this.dispatch({outreachUsers:u})}),await fetch("https://getsequences-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(async n=>{console.log(n);let i=n.data.map(l=>({type:"sequence",_id:l.id.toString(),outreach:!0,name:l.attributes.name,outreachSequenceId:l.attributes.id})),o=await this.componentList.addComponents(i,!0);this.dispatch({outreachSequences:o})})}}render(){var e;return _.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",position:"relative",paddingTop:"0px"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsxs("div",{style:{paddingTop:"20px",display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:20,background:"white"},children:[_.jsx("h2",{children:"Add to Sequence"})," ",_.jsxs("div",{className:"count-desc",style:{position:"relative",margin:"10px"},children:["Contacts: ",((e=this.propsState.selectedContacts)==null?void 0:e.length)||"0"," "]})]}),this.propsState.currentUser.getJson().outreachio?_.jsxs(_.Fragment,{children:["Select Sequence",_.jsx(Je,{handleChange:t=>{let n=t.target.value;debugger;let i=this.componentList.getComponent("sequence",n);this.dispatch({selectedSequence:i})},type:"select",textOptions:this.componentList.getList("sequence").map(t=>t.getJson().name),selectOptions:this.componentList.getList("sequence")}),"Select User",_.jsx(Je,{handleChange:t=>{debugger;let n=t.target.value,i=this.componentList.getComponent("outreachUser",n);this.dispatch({selectedUser:i})},type:"select",textOptions:this.componentList.getList("outreachUser").map(t=>t.getJson().mailboxEmail),selectOptions:this.componentList.getList("outreachUser")}),_.jsx("div",{onClick:async()=>{debugger;const{selectedContacts:t=[],selectedUser:n,selectedSequence:i,currentUser:o}=this.propsState,l=n.getJson(),u=i.getJson();if(!Array.isArray(t)||t.length===0){console.error("No contacts selected to add.");return}if(!l||!u){console.error("User or sequence not selected.");return}const d={contacts:t.map(g=>({firstName:g.getJson().firstName,lastName:g.getJson().lastName,emails:[g.getJson().email],userId:l._id,company:g.getJson().company,mailboxId:l.mailboxId})),sequenceId:u._id};try{let g=this.propsState.currentUser.getJson().outreachAccessToken;const m=await fetch("https://createcontactsandenroll-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(d)}),p=await m.json();if(!m.ok)throw p;console.log(" Contacts created & enrolled:",p),this.dispatch({popupSwitch:""})}catch(g){console.error(" Error adding to sequence:",g)}},className:"floating-select-btn-text",style:{color:"black"},children:"Add to Sequence"})]}):_.jsx(fn,{name:"sequence",cells:[{type:"custom",custom:MM}]})]})}}class UM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}extractSubjectAndBody(e){const t=e.match(/^{{\s*([^}]+?)\s*}}/);let n="",i="";t?(n=t[1].trim(),i=e.slice(t[0].length).trim()):i=e.trim();const o=i.split(`

`).map(l=>`<p>${l.replace(/\n/g,"<br>")}</p>`).join(`
`);return{subject:n,body:o}}render(){this.props.obj;let e=_.jsx(Si,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(e=_.jsx(Vv,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),_.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("div",{onClick:async()=>{try{const t=this.propsState.currentUser,n=this.propsState.currentSequence.getJson()._id,i=this.componentList.getList("step",n,"sequenceId");let o="template";const l={};if(i.length>0){const g=i[i.length-1];o="sequence",l.conversationHistory={lastSentEmail:g.getJson().content}}const u=await Qs.generateMessage(t,o,l),{subject:h,body:d}=Qs.extractSubjectAndBody(u);console.log("Generated Subject:",h),console.log("Generated Body:",d),this.propsState.currentPopupComponent.setCompState({content:d,subject:h}),this.dispatch({})}catch(t){console.error("Failed to draft with AI:",t),alert("An error occurred while generating the draft. Please check the console.")}},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Draft With AI"}),_.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},onClick:()=>{this.setState({selectTemplate:!0})},children:"Select Template"})]}),this.state.selectTemplate&&_.jsx(fn,{name:"template",filterFunc:t=>{var o;if(t.getJson().content===void 0||t.getJson().content==="")return!1;let n=!1;this.propsState.searchText||(n=!0);let i=this.propsState.searchText;return(o=t.getJson().content)!=null&&o.toLowerCase().includes(i==null?void 0:i.toLowerCase())&&(n=!0),n},cells:[{type:"custom",custom:EM}]}),_.jsx("br",{}),_.jsxs("div",{className:"content-home-add",children:[_.jsx("div",{className:"contact-contact-data",children:_.jsxs("div",{className:"row row-container",children:[_.jsx("div",{className:"row-name",style:{maxWidth:"fit-content"},children:"Subject:"}),_.jsx("div",{className:"row-field",children:_.jsx(Je,{obj:this.propsState.currentPopupComponent,name:"subject",formClass:"underline-form"})})]})}),_.jsx("div",{className:"row",children:_.jsx(Je,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),_.jsxs("div",{className:"row",children:[_.jsx("div",{children:"Trigger this step in:"}),_.jsx(Je,{obj:this.propsState.currentPopupComponent,name:"nextSend",formClass:"underline-form",wrapperStyle:{width:"10%",marginRight:"8px",borderBottom:"1px solid rgb(212, 212, 212)"}})," days"]}),_.jsxs("div",{className:"row",children:[this.propsState.popupSwitch.includes("update")&&_.jsx(sf,{obj:this.propsState.currentPopupComponent,formClass:"del-button-1",callbackFunc:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}}),_.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"},children:_.jsx(pj,{obj:this.propsState.currentPopupComponent,content:_.jsx("div",{style:{display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",fontSize:"19px",width:"37px",height:"37px",background:"#378c75",color:"#ade0d3"},children:_.jsx("div",{className:"icon-last",children:_.jsx("i",{className:"fa-solid fa-plus"})})})})}),_.jsx("div",{className:"col",children:e})]}),_.jsx("div",{})]})]})}}const kC="/assets/scailogofake-B3YGBRpn.png";class VM extends jS{getHtml(){return _.jsxs("div",{className:"bottom-nav",children:[_.jsxs(Bt,{to:"/conversation",className:"bottom-nav-item",children:[_.jsx("i",{className:"fa-solid fa-message"}),_.jsx("span",{children:"Messages Beta"})]}),_.jsxs(Bt,{to:"/contacts",className:"bottom-nav-item",children:[_.jsx("i",{className:"fa-solid fa-address-book"}),_.jsx("span",{children:"Contacts"})]}),_.jsx("a",{href:"#",className:"bottom-nav-item",children:_.jsx("div",{id:"float-btn-plus",className:"float-btn",children:_.jsx("i",{className:"fas fa-plus"})})}),_.jsxs(Bt,{to:"/research",className:"bottom-nav-item",children:[_.jsx("i",{className:"fa-solid fa-graduation-cap"}),_.jsx("span",{children:"Research"})]}),_.jsxs(Bt,{to:"/content",className:"bottom-nav-item",children:[_.jsx("i",{className:"fa-solid fa-briefcase"}),_.jsx("span",{children:"Content"})]})]})}}class zM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}async componentDidMount(){var e;if(this.propsState.currentUser.getJson().outreachio&&((e=this.componentList.getList("outreachUser"))==null?void 0:e.length)===0){let t=this.propsState.currentUser.getJson().outreachAccessToken;await fetch("https://getusersandmailboxes-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(async n=>{console.log(n);let i=n.users,o=n.mailboxes,l=i.map(m=>{let p=o.find(b=>b.attributes.email===m.attributes.email);return{_id:m.id.toString(),type:"outreachUser",mailboxId:p.id,type:"outreachUser",mailboxEmail:p.attributes.email}}),u=this.propsState.componentListInterface.getFactory(),d=[...this.componentList.getList("outreachUser")];for(let m of l){let p=await u.getComponent(m);d=[...d,p]}let g=d;this.componentList.setSelectedList("outreachUser",g),this.dispatch({outreachUsers:g})}),await fetch("https://getsequences-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(async n=>{console.log(n);let i=n.data.map(d=>({type:"sequence",_id:d.id.toString(),outreach:!0,outreach:"true",name:d.attributes.name,outreachSequenceId:d.attributes.id}));debugger;let o=this.propsState.componentListInterface.getFactory(),u=[...this.componentList.getList("sequence").filter(d=>d.getJson().outreach===void 0)];for(let d of i){let g=await o.getComponent(d);u=[...u,g]}let h=u;this.componentList.setSelectedList("sequence",h),this.dispatch({outreachSequences:h})})}}render(){const e=this.propsState.currentPopupComponent;let t=this.propsState.currentPopupComponent.getJson().date?"Edit":"Add",n=this.propsState.currentPopupComponent.getJson().date?_.jsx(Vv,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc}):_.jsx(Si,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return _.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsxs("h2",{children:[t," Research Prompt"]})," ",_.jsxs("div",{className:"contact-contact-data",style:{padding:"10px",background:"rgb(245, 244, 244)",borderRadius:"12px"},children:[_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Profile Name:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"ie: Daily Research",name:"name",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Search Frequency:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"How often do you want new research results?",name:"searchFrequency",type:"select",inPopup:!0,selectOptions:["Daily","Weekly","Monthly"]})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Description:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"Describe your target prospect. I.e. Research VP of Sales at Tech Companies with less than 100M in sales",name:"AIPrompt",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Source:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"What Sources?",name:"displayDataSrc",type:"select",inPopup:!0,selectOptions:["existing","newData","both"],handleChange:i=>{let o=i.target.value;o==="both"?o=["existing","newData"]:o=[o],this.propsState.currentPopupComponent.setCompState({getDataFrom:o,displayDataSrc:i.target.value})}})]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Keywords:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"Which keywords are in the title of the prospects you are seeking?",name:"keywords",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Company Size by Revenue:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,name:"companySizebyRevenue",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Company Size by # of Employees:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,name:"companySizebyEmployees",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Geographic Location:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,name:"location",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Decision Making Level:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"Any, Non-Manager, Manager, Director, VP, C-Level",name:"contactLevel",inPopup:!0,type:"select",selectOptions:["Any","Non-Manager","Director","VP","C-Level"]})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Department:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"i.e. IT, HR, Sales, Marketing etc.",name:"department",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Industry:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"i.e. Technology, software, SAAS",name:"industry",inPopup:!0})," "]})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Disqualifiers:"}),_.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,placeholder:"Describe any characteristics, titles, or companies, that you specifically do not want included in the data results. ",name:"disqualifiers",inPopup:!0})," "]})]}),this.propsState.currentUser.getJson().outreachio&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Select Sequence:"}),_.jsx("div",{className:"row-field",style:{width:"100%"},children:_.jsx(Je,{name:"sequenceDisplay",handleChange:i=>{debugger;let o=i.target.value,l=this.componentList.getComponent("sequence",o,"name");e.setCompState({outreachSequenceId:l.getJson()._id,sequenceDisplay:i.target.value}),this.dispatch({})},obj:e,type:"select",selectOptions:this.componentList.getList("sequence").map(i=>i.getJson().name)})})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Select User:"}),_.jsx("div",{className:"row-field",style:{width:"100%"},children:_.jsx(Je,{obj:e,type:"select",name:"outreachUserDisplay",handleChange:i=>{debugger;let o=i.target.value,l=this.componentList.getComponent("outreachUser",o,"mailboxEmail");e.setCompState({outreachUserId:l.getJson()._id,outreachUserDisplay:i.target.value}),this.dispatch({})},selectOptions:this.componentList.getList("outreachUser").map(i=>i.getJson().mailboxEmail)})})]}),_.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[_.jsx("div",{className:"row-name",children:"Automatic:"}),_.jsx("div",{className:"row-field",style:{width:"100%"},children:_.jsx(Je,{obj:e,type:"select",handleChange:i=>{let l=i.target.value==="Yes";e.setCompState({autoSequence:l,autoSequenceDisplay:i.target.value})},name:"autoSequenceDisplay",selectOptions:["Yes","No"]})})]})]}),_.jsxs("div",{style:{height:"fit-content",display:"flex",justifyContent:"flex-end",alignSelf:"flex-end",position:"absolute",bottom:20,right:20,borderRadius:"12px"},children:[this.propsState.currentPopupComponent.getJson().date&&_.jsx(sf,{obj:this.propsState.currentPopupComponent,isPopup:!0,inPopup:!0,callbackFunc:()=>{this.dispatch({currentPopupComponent:void 0,popupSwitch:""})},formClass:"dark-button-1",content:"Delete"})," ",_.jsxs("div",{children:[" ",n]})]})]})]})}}class HM extends BM{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}componentDidMount(){var e,t;(t=this.propsState.currentPopupComponent)==null||t.setCompState({conversationId:(e=this.propsState.currentConversation)==null?void 0:e.getJson()._id,originalMessageId:!1,ownerMessage:!0}),this.setState({email:this.propsState.currentPopupComponent})}componentDidUpdate(){}extractSubjectAndBody(e){const t=e.match(/^{{\s*([^}]+?)\s*}}/);let n="",i="";t?(n=t[1].trim(),i=e.slice(t[0].length).trim()):i=e.trim();const o=i.split(`

`).map(l=>`<p>${l.replace(/\n/g,"<br>")}</p>`).join(`
`);return{subject:n,body:o}}render(){var n;const e=this.props.obj;let t=_.jsx(Si,{formClass:"dark-button-1",content:_.jsx("div",{children:"Send"}),callbackFunc:()=>{let i=this.state.email,o={from:this.propsState.currentUser.getJson()._id,to:this.propsState.currentConversation.getJson().contact,subject:i.getJson().subject,text:i.getJson().body},l=this.propsState.currentUser.getJson().gmailAuthenticated?"https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app":"https://sendgridemailhandler-7c5i3vsqma-uc.a.run.app";fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(u=>{if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);return u.json()}).then(u=>{console.log("Reply sent successfully in thread.",u)}).catch(u=>{console.error("Error sending reply:",u)}),this.dispatch({currentPopupComponent:void 0,popupSwitch:""})}});return _.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsx("div",{onClick:async()=>{try{const i=this.propsState.currentUser,o="template",l={},u=await Qs.generateMessage(i,o,l),{subject:h,body:d}=Qs.extractSubjectAndBody(u);this.propsState.currentPopupComponent.setCompState({body:d,subject:h}),this.dispatch({})}catch(i){console.error("Failed to draft with AI:",i),alert("An error occurred while generating the draft. Please check the console.")}},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Draft With AI"}),_.jsx("h2",{children:"Email"})," ",_.jsxs("div",{className:"contact-Add-container",children:[_.jsxs("div",{className:"row",children:[_.jsx("div",{children:"To:"}),_.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",(n=this.propsState.currentConversation)==null?void 0:n.getJson().contactName]})]}),_.jsxs("div",{className:"row",children:[_.jsx("div",{children:"From:"}),_.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ","Me"]})]}),_.jsxs("div",{className:"row",children:[_.jsx("div",{children:"Subject:"}),_.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",_.jsx(Je,{formClass:"underline-form",obj:e,name:"subject",inPopup:!0})," "]})]}),_.jsx("div",{children:_.jsxs("div",{style:{width:"100%"},children:[" ",_.jsx(Je,{obj:e,type:"quill",name:"body",inPopup:!0})," "]})}),_.jsxs("div",{style:{width:"100%",background:"white",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",_.jsxs("div",{style:{marginRight:"-10px"},children:[" ",t]})]})]})]})}}class WM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){return _.jsxs("div",{style:{padding:"18px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsx("h2",{style:{font:"normal normal 900 18px/25px Satoshi"},children:"Add Tags to Selected"}),_.jsx("div",{className:"contact-contact-data",style:{marginTop:"8%",padding:"24px",border:"none",background:"#f0f0f0"},children:_.jsxs("div",{className:"row-container",children:[_.jsx("div",{className:"row-name",style:{maxWidth:"fit-content"},children:"Tags:"}),_.jsx("div",{className:"row-field",children:_.jsx("input",{class:"underline-form",onChange:e=>{let{value:t}=e.target;this.setState({tags:t})}})})]})}),_.jsx("div",{class:"dark-button-1",style:{justifySelf:"flex-end",marginTop:"20px"},onClick:async()=>{for(let e of this.propsState.selectedContacts){let t=e.getJson().tags||"";t=t.length===0?this.state.tags:","+this.state.tags,await e.setCompState({tags:t}),e.update()}this.dispatch({popupSwitch:""})},children:"Save"})]})}}class $M extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return _.jsxs(_.Fragment,{children:[_.jsx(Je,{obj:this.propsState.currentPopupComponent,name:"_id",inPopup:!0}),_.jsx(Je,{obj:this.propsState.currentPopupComponent,name:"email",inPopup:!0}),_.jsx(Je,{obj:this.propsState.currentPopupComponent,name:"collection",inPopup:!0}),_.jsx(Je,{obj:this.propsState.currentPopupComponent,name:"owner",inPopup:!0}),_.jsx(Si,{content:"save",callbackFunc:async()=>{let e=this.propsState.currentPopupComponent;await e.setCompState({clientId:this.propsState.currentClient.getJson()._id},{run:!0}),await this.operationsFactory.prepare({prepare:[{type:"aiSettings",owner:e.getJson()._id},{type:"limit",owner:e.getJson()._id}]}),this.operationsFactory.run(),this.dispatch({currentPopupComponent:void 0,popupSwitch:""})}})]})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class GM extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var t;const{sequence:e}=this.propsState;return _.jsxs("div",{style:{padding:"18px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[_.jsx("h2",{style:{font:"normal normal 900 18px/25px Satoshi"},children:"Delete Sequence"}),_.jsx("div",{style:{marginTop:"8%",padding:"24px",border:"none",background:"#f0f0f0"},children:_.jsxs("p",{children:["Are you sure you want to delete the sequence ",_.jsx("strong",{children:((t=this.propsState.delSequence)==null?void 0:t.getJson().name)||"this"}),"? This action cannot be undone."]})}),_.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"20px"},children:[_.jsx("div",{className:"dark-button-1",onClick:()=>{this.dispatch({popupSwitch:"",delSequence:void 0})},children:"Cancel"}),_.jsx(sf,{obj:this.propsState.delSequence,content:"Delete",inPopup:!0,isPopup:!0,callbackFunc:()=>{this.dispatch({popupSwitch:"",delSequence:void 0})},className:"dark-button-1 del-button-red"})]})]})}}class RC extends at{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}componentWillUnmount(){this.operationsFactory.clear(),this.dispatch({currentComponent:void 0})}getInnerContent(){let e=window.innerWidth>600;return _.jsx("div",{className:"layoutRow",style:{width:"100%",height:"100%",padding:"12px"},children:_.jsxs("div",{className:"layoutColumn-welcome",children:[_.jsx("img",{src:$S,style:{width:"50%",marginBottom:"40px"}}),_.jsxs("div",{children:[_.jsx("span",{style:{fontWeight:"900",fontSize:"2em",color:"#323232"},children:"Welcome to SalesCapture AI"}),_.jsx("div",{style:{marginTop:"20px"},children:"Leverage the power of AI to supercharge your sales process"})]}),_.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:e?"row":"column",gap:"1em",marginTop:"30px"},children:[_.jsxs("div",{className:"opener-page-card",children:[_.jsx("div",{style:{maxWidth:"45px",maxHeight:"45px",fontSize:"3em",color:"var(--app-green-3)"},children:_.jsx("i",{class:"fa-solid fa-magnifying-glass"})}),_.jsx("div",{className:"main-title",children:"Research Agent"}),_.jsx("div",{className:"main-message",children:"Identify the next best salees targets"}),_.jsx(Bt,{to:"/research",className:"inLine-Link",children:_.jsx("div",{children:"Go to Research"})})]}),_.jsxs("div",{className:"opener-page-card",children:[_.jsx("div",{style:{maxWidth:"45px",maxHeight:"45px",fontSize:"3em",color:"var(--app-green-3)"},children:_.jsx("i",{class:"fa-solid fa-file-contract"})}),_.jsx("div",{className:"main-title",children:"Content Engine"}),_.jsx("div",{className:"main-message",children:"Quickly generate effective sales content"}),_.jsx(Bt,{to:"/content",className:"inLine-Link",children:"Create Content"})," "]}),_.jsxs("div",{className:"opener-page-card",children:[_.jsx("div",{style:{maxWidth:"45px",maxHeight:"45px",fontSize:"3em",color:"var(--app-green-3)"},children:_.jsx("i",{class:"fa-solid fa-envelope-circle-check"})}),_.jsx("div",{className:"main-title",children:"Automated BDR"}),_.jsx("div",{className:"main-message",children:"Engage prospects with outbound campaigns"}),_.jsx(Bt,{to:"/contacts",className:"inLine-Link",children:"Start Campaign"})," "]})]})]})})}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class KM extends pl{async componentDidMount(){await this.getComponentsFromBackend();const e=this.urlId;if(!e||e==="aigeneration"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}async bridgeAiService(){let{persona:e,details:t,messageType:n}=this.state;n||(n="template");const i=this.propsState.currentComponent,o=this.propsState.currentUser;if(!n){alert("Please select a message type.");return}const l={persona:e,details:t,conversationHistory:{}};switch(n){case"reply":l.conversationHistory={fullHistory:t,lastProspectReply:t};break;case"sequence":l.conversationHistory={lastSentEmail:t};break;default:l.details=t;break}try{const u=await Qs.generateMessage(o,n,l),{subject:h,body:d}=Qs.extractSubjectAndBody(u);i.setCompState({content:d,subject:h}),console.log(d),this.dispatch({})}catch(u){console.error("Failed to generate AI message:",u),alert("There was an error generating the message. Please check the console.")}}getInnerContent(){const e=["Template","Follow Up","Reply","Event","Proposal","Attached Document","Referral","Network","Re-Engage"],t=["template","sequence","reply","event","proposal","document","referral","network","reEngage"];let n="Additional Instructions",i="Any extra details or specifications...";return this.state.messageType==="reply"?(n="Paste Email Thread to Reply To:",i="e.g., On Fri, Jul 25, 2025, Jane Smith wrote: I'm interested..."):this.state.messageType==="sequence"&&(n="Paste Last Email Sent in Sequence:",i="e.g., Subject: Checking In..."),_.jsxs("div",{className:"fit",style:{display:"flex",flexDirection:"column"},children:[_.jsx(Bt,{to:"/content",className:"inLine-Link white-button-end",children:_.jsx("div",{children:"Go to Sequences"})}),_.jsx("h1",{children:"Content Engine"}),_.jsx("h3",{children:"The SalesCapture AI content engine is configured to optimize content for your products and services."}),_.jsxs("div",{className:"input-container",style:{marginTop:"38px"},children:[" ","Subject",_.jsx("div",{className:"input-bar row-container",children:this.propsState.currentComponent&&_.jsx(Je,{name:"subject",obj:this.propsState.currentComponent})})]}),_.jsx("div",{onClick:()=>this.setState({showAIDraft:!this.state.showAIDraft}),className:this.state.showAIDraft?"dark-button-1":"green-button-1",style:{position:"relative",width:"fit-content",margin:"1em"},children:this.state.showAIDraft?"Cancel":"Draft With AI"}),this.state.showAIDraft&&_.jsxs("div",{style:{padding:"1em",marginLeft:"1em",border:"1px solid gray",borderRadius:"14px"},children:[_.jsx("h2",{children:"Generate Content"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:["Select Message Type:",_.jsx("div",{style:{marginLeft:"8px"},children:_.jsx(Je,{formClass:"input-bar row-container underline-form",type:"select",selectOptions:e,handleChange:o=>{let l=e.indexOf(o.target.value),u=t[l];this.setState({messageType:u})}})})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:["Persona/Tone",_.jsx("input",{className:"input-bar row-container",style:{border:"none",paddingBottom:".3em",margin:".5em"},name:"persona",placeholder:'(e.g., "friendly and casual" or "formal and direct")',onChange:o=>this.setState({persona:o.target.value})})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[_.jsx("div",{children:n}),_.jsx("input",{className:"input-bar row-container",style:{border:"none",paddingBottom:".3em",margin:".5em"},name:"details",placeholder:i,value:this.state.details||"",onChange:o=>this.setState({details:o.target.value})})]}),_.jsx("div",{className:"green-button-1",onClick:()=>this.bridgeAiService(),children:"Generate"})]}),_.jsxs("div",{className:"input-container",children:[" ","Content",_.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&_.jsx(Je,{type:"quill",name:"content",obj:this.propsState.currentComponent})})]}),_.jsx("div",{children:_.jsx(Si,{content:_.jsx("div",{className:"dark-button-1",children:"Save Template"})})})]})}render(){return _.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class PC extends Go{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return _.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex",flexDirection:"column"},children:_.jsx(dn,{theme:"NoBorder",type:"fit",content:_.jsx(KM,{})})})}}class JM extends LB{constructor(e){super(e,{db:YL,endpoint:"salescaptureAI",auth:XL,storage:QL}),this.popupComponents={contact:Ed,step:UM,research:zM,email:HM,user:$M},this.popupComponentsProps={},wd.getFactory().registerComponent("bottomNavMap",VM),this.state={...this.state,navBarProps:{mapType:window.innerWidth<1e3?"bottomNavMap":void 0,type:window.innerWidth<1e3?"topBar":void 0,style:{backgroundColor:"#35b593",color:"white",fontFamily:"'Satoshi-Variable', sans-serif"},cardStyle:{backgroundColor:"#35b593",position:window.innerWidth<1e3&&"absolute",bottom:window.innerWidth<1e3&&"0px",fontFamily:"'Satoshi-Variable', sans-serif"},logoURL:window.innerWidth>1e3&&kC,linkItemStyle:{color:"white",fontFamily:"'Satoshi-Variable', sans-serif"}},routes:[{comp:RC,name:"Home",path:"/"},{comp:DC,name:"Messages Beta",path:"conversation"},{comp:EC,name:"Contacts",path:"contacts"},{comp:AC,name:"Research",path:"research",idComp:IC},{comp:bC,name:"Content",path:"content"},{comp:xC,name:"Settings",path:"settings"},{comp:PC,path:"aigeneration",name:"Content Engine"},{comp:kh,name:"",path:"sequence",idComp:kh},{comp:Rh,name:"",path:"template",idComp:Rh},{comp:SC,name:"",path:"client",idComp:SC},{comp:jM,name:"Admin",path:"admin"},{comp:TC,name:"",path:"user",idComp:TC}],refresh:!0,popups:[{content:qM,popupSwitch:"addToSequence"},{content:WM,popupSwitch:"addTags"},{content:GM,popupSwitch:"delSequence"},{content:Ed,popupSwitch:"viewPotentialProspect"}]},this.registerListWithFactory([...Object.values(eM)]);let t=wd.getNavList();t.update(0,{class:"SCAILogo"}),t.update(1,{activeClass:"SCAILink"}),window.innerWidth<1e3&&(t.remove(2),t.remove(0))}componentDidMount(){super.componentDidMount();let e=document.getElementById("signUpFT");e&&(e.style.display="none");const t="data-login-img-inserted",n=()=>{const l=document.querySelectorAll('h1, h2, h3, [role="heading"]');return Array.from(l).find(u=>/login/i.test(u.textContent.trim()))},i=()=>{const l=n();if(!l)return!1;const u=l.parentElement;if(!u||u.hasAttribute(t))return!1;const h=document.createElement("img");return h.src=kC,h.alt="Login icon",h.style.display="block",h.style.borderRadius="15px",h.style.marginBottom="15px",h.style.width="200px",h.style.padding="10px",u.insertBefore(h,l),u.setAttribute(t,"true"),!0};if(i())return;const o=new MutationObserver(()=>{i()&&o.disconnect()});o.observe(document.body,{childList:!0,subtree:!0})}componentDidUpdate(e,t){this.state.gotUser&&this.state.refresh&&this.state.currentUser.getJson()._id!=="alan@salescapture.com"&&this.dispatch({refresh:!1,routes:[{comp:RC,name:"Home",path:"/"},{comp:DC,name:"Messages Beta",path:"conversation"},{comp:EC,name:"Contacts",path:"contacts"},{comp:AC,name:"Research",path:"research",idComp:IC},{comp:bC,name:"Content",path:"content"},{comp:xC,name:"Settings",path:"settings"},{comp:PC,path:"aigeneration",name:"Content Engine"},{comp:kh,name:"",path:"sequence",idComp:kh},{comp:Rh,name:"",path:"template",idComp:Rh}]})}}sI.createRoot(document.getElementById("root")).render(_.jsx(ve.StrictMode,{children:_.jsx(JM,{})}));
