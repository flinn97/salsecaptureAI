var hC=Object.defineProperty;var fC=(r,e,t)=>e in r?hC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var he=(r,e,t)=>fC(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ad={exports:{}},Za={},ld={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function dC(){if(s_)return tt;s_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function p(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function w(M,B,z){this.props=M,this.context=B,this.refs=S,this.updater=z||y}w.prototype.isReactComponent={},w.prototype.setState=function(M,B){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,B,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function E(){}E.prototype=w.prototype;function I(M,B,z){this.props=M,this.context=B,this.refs=S,this.updater=z||y}var L=I.prototype=new E;L.constructor=I,T(L,w.prototype),L.isPureReactComponent=!0;var b=Array.isArray,F=Object.prototype.hasOwnProperty,V={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function _(M,B,z){var ee,X={},H=null,Y=null;if(B!=null)for(ee in B.ref!==void 0&&(Y=B.ref),B.key!==void 0&&(H=""+B.key),B)F.call(B,ee)&&!P.hasOwnProperty(ee)&&(X[ee]=B[ee]);var ne=arguments.length-2;if(ne===1)X.children=z;else if(1<ne){for(var ie=Array(ne),fe=0;fe<ne;fe++)ie[fe]=arguments[fe+2];X.children=ie}if(M&&M.defaultProps)for(ee in ne=M.defaultProps,ne)X[ee]===void 0&&(X[ee]=ne[ee]);return{$$typeof:r,type:M,key:H,ref:Y,props:X,_owner:V.current}}function A(M,B){return{$$typeof:r,type:M.type,key:B,ref:M.ref,props:M.props,_owner:M._owner}}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function R(M){var B={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(z){return B[z]})}var O=/\/+/g;function N(M,B){return typeof M=="object"&&M!==null&&M.key!=null?R(""+M.key):B.toString(36)}function $(M,B,z,ee,X){var H=typeof M;(H==="undefined"||H==="boolean")&&(M=null);var Y=!1;if(M===null)Y=!0;else switch(H){case"string":case"number":Y=!0;break;case"object":switch(M.$$typeof){case r:case e:Y=!0}}if(Y)return Y=M,X=X(Y),M=ee===""?"."+N(Y,0):ee,b(X)?(z="",M!=null&&(z=M.replace(O,"$&/")+"/"),$(X,B,z,"",function(fe){return fe})):X!=null&&(k(X)&&(X=A(X,z+(!X.key||Y&&Y.key===X.key?"":(""+X.key).replace(O,"$&/")+"/")+M)),B.push(X)),1;if(Y=0,ee=ee===""?".":ee+":",b(M))for(var ne=0;ne<M.length;ne++){H=M[ne];var ie=ee+N(H,ne);Y+=$(H,B,z,ie,X)}else if(ie=p(M),typeof ie=="function")for(M=ie.call(M),ne=0;!(H=M.next()).done;)H=H.value,ie=ee+N(H,ne++),Y+=$(H,B,z,ie,X);else if(H==="object")throw B=String(M),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Y}function Q(M,B,z){if(M==null)return M;var ee=[],X=0;return $(M,ee,"","",function(H){return B.call(z,H,X++)}),ee}function se(M){if(M._status===-1){var B=M._result;B=B(),B.then(function(z){(M._status===0||M._status===-1)&&(M._status=1,M._result=z)},function(z){(M._status===0||M._status===-1)&&(M._status=2,M._result=z)}),M._status===-1&&(M._status=0,M._result=B)}if(M._status===1)return M._result.default;throw M._result}var Z={current:null},re={transition:null},G={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:re,ReactCurrentOwner:V};function W(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:Q,forEach:function(M,B,z){Q(M,function(){B.apply(this,arguments)},z)},count:function(M){var B=0;return Q(M,function(){B++}),B},toArray:function(M){return Q(M,function(B){return B})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},tt.Component=w,tt.Fragment=t,tt.Profiler=i,tt.PureComponent=I,tt.StrictMode=n,tt.Suspense=f,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,tt.act=W,tt.cloneElement=function(M,B,z){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ee=T({},M.props),X=M.key,H=M.ref,Y=M._owner;if(B!=null){if(B.ref!==void 0&&(H=B.ref,Y=V.current),B.key!==void 0&&(X=""+B.key),M.type&&M.type.defaultProps)var ne=M.type.defaultProps;for(ie in B)F.call(B,ie)&&!P.hasOwnProperty(ie)&&(ee[ie]=B[ie]===void 0&&ne!==void 0?ne[ie]:B[ie])}var ie=arguments.length-2;if(ie===1)ee.children=z;else if(1<ie){ne=Array(ie);for(var fe=0;fe<ie;fe++)ne[fe]=arguments[fe+2];ee.children=ne}return{$$typeof:r,type:M.type,key:X,ref:H,props:ee,_owner:Y}},tt.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},tt.createElement=_,tt.createFactory=function(M){var B=_.bind(null,M);return B.type=M,B},tt.createRef=function(){return{current:null}},tt.forwardRef=function(M){return{$$typeof:c,render:M}},tt.isValidElement=k,tt.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:se}},tt.memo=function(M,B){return{$$typeof:d,type:M,compare:B===void 0?null:B}},tt.startTransition=function(M){var B=re.transition;re.transition={};try{M()}finally{re.transition=B}},tt.unstable_act=W,tt.useCallback=function(M,B){return Z.current.useCallback(M,B)},tt.useContext=function(M){return Z.current.useContext(M)},tt.useDebugValue=function(){},tt.useDeferredValue=function(M){return Z.current.useDeferredValue(M)},tt.useEffect=function(M,B){return Z.current.useEffect(M,B)},tt.useId=function(){return Z.current.useId()},tt.useImperativeHandle=function(M,B,z){return Z.current.useImperativeHandle(M,B,z)},tt.useInsertionEffect=function(M,B){return Z.current.useInsertionEffect(M,B)},tt.useLayoutEffect=function(M,B){return Z.current.useLayoutEffect(M,B)},tt.useMemo=function(M,B){return Z.current.useMemo(M,B)},tt.useReducer=function(M,B,z){return Z.current.useReducer(M,B,z)},tt.useRef=function(M){return Z.current.useRef(M)},tt.useState=function(M){return Z.current.useState(M)},tt.useSyncExternalStore=function(M,B,z){return Z.current.useSyncExternalStore(M,B,z)},tt.useTransition=function(){return Z.current.useTransition()},tt.version="18.3.1",tt}var o_;function Gc(){return o_||(o_=1,ld.exports=dC()),ld.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function pC(){if(a_)return Za;a_=1;var r=Gc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,d){var v,g={},p=null,y=null;d!==void 0&&(p=""+d),f.key!==void 0&&(p=""+f.key),f.ref!==void 0&&(y=f.ref);for(v in f)n.call(f,v)&&!a.hasOwnProperty(v)&&(g[v]=f[v]);if(c&&c.defaultProps)for(v in f=c.defaultProps,f)g[v]===void 0&&(g[v]=f[v]);return{$$typeof:e,type:c,key:p,ref:y,props:g,_owner:i.current}}return Za.Fragment=t,Za.jsx=l,Za.jsxs=l,Za}var l_;function mC(){return l_||(l_=1,ad.exports=pC()),ad.exports}var U=mC(),ve=Gc();const Qc=Mm(ve);var ic={},ud={exports:{}},An={},cd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function gC(){return u_||(u_=1,function(r){function e(re,G){var W=re.length;re.push(G);e:for(;0<W;){var M=W-1>>>1,B=re[M];if(0<i(B,G))re[M]=G,re[W]=B,W=M;else break e}}function t(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var G=re[0],W=re.pop();if(W!==G){re[0]=W;e:for(var M=0,B=re.length,z=B>>>1;M<z;){var ee=2*(M+1)-1,X=re[ee],H=ee+1,Y=re[H];if(0>i(X,W))H<B&&0>i(Y,X)?(re[M]=Y,re[H]=W,M=H):(re[M]=X,re[ee]=W,M=ee);else if(H<B&&0>i(Y,W))re[M]=Y,re[H]=W,M=H;else break e}}return G}function i(re,G){var W=re.sortIndex-G.sortIndex;return W!==0?W:re.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var f=[],d=[],v=1,g=null,p=3,y=!1,T=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(re){for(var G=t(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=re)n(d),G.sortIndex=G.expirationTime,e(f,G);else break;G=t(d)}}function b(re){if(S=!1,L(re),!T)if(t(f)!==null)T=!0,se(F);else{var G=t(d);G!==null&&Z(b,G.startTime-re)}}function F(re,G){T=!1,S&&(S=!1,E(_),_=-1),y=!0;var W=p;try{for(L(G),g=t(f);g!==null&&(!(g.expirationTime>G)||re&&!R());){var M=g.callback;if(typeof M=="function"){g.callback=null,p=g.priorityLevel;var B=M(g.expirationTime<=G);G=r.unstable_now(),typeof B=="function"?g.callback=B:g===t(f)&&n(f),L(G)}else n(f);g=t(f)}if(g!==null)var z=!0;else{var ee=t(d);ee!==null&&Z(b,ee.startTime-G),z=!1}return z}finally{g=null,p=W,y=!1}}var V=!1,P=null,_=-1,A=5,k=-1;function R(){return!(r.unstable_now()-k<A)}function O(){if(P!==null){var re=r.unstable_now();k=re;var G=!0;try{G=P(!0,re)}finally{G?N():(V=!1,P=null)}}else V=!1}var N;if(typeof I=="function")N=function(){I(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=O,N=function(){Q.postMessage(null)}}else N=function(){w(O,0)};function se(re){P=re,V||(V=!0,N())}function Z(re,G){_=w(function(){re(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){T||y||(T=!0,se(F))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(re){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var W=p;p=G;try{return re()}finally{p=W}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,G){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var W=p;p=re;try{return G()}finally{p=W}},r.unstable_scheduleCallback=function(re,G,W){var M=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?M+W:M):W=M,re){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,re={id:v++,callback:G,priorityLevel:re,startTime:W,expirationTime:B,sortIndex:-1},W>M?(re.sortIndex=W,e(d,re),t(f)===null&&re===t(d)&&(S?(E(_),_=-1):S=!0,Z(b,W-M))):(re.sortIndex=B,e(f,re),T||y||(T=!0,se(F))),re},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(re){var G=p;return function(){var W=p;p=G;try{return re.apply(this,arguments)}finally{p=W}}}}(hd)),hd}var c_;function yC(){return c_||(c_=1,cd.exports=gC()),cd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function vC(){if(h_)return An;h_=1;var r=Gc(),e=yC();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function p(s){return f.call(g,s)?!0:f.call(v,s)?!1:d.test(s)?g[s]=!0:(v[s]=!0,!1)}function y(s,o,u,m){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function T(s,o,u,m){if(o===null||typeof o>"u"||y(s,o,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(s,o,u,m,C,D,q){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=C,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=D,this.removeEmptyString=q}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){w[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];w[o]=new S(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){w[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){w[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){w[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){w[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){w[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){w[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){w[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function I(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(E,I);w[o]=new S(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(E,I);w[o]=new S(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(E,I);w[o]=new S(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){w[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),w.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){w[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function L(s,o,u,m){var C=w.hasOwnProperty(o)?w[o]:null;(C!==null?C.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(T(o,u,C,m)&&(u=null),m||C===null?p(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):C.mustUseProperty?s[C.propertyName]=u===null?C.type===3?!1:"":u:(o=C.attributeName,m=C.attributeNamespace,u===null?s.removeAttribute(o):(C=C.type,u=C===3||C===4&&u===!0?"":""+u,m?s.setAttributeNS(m,o,u):s.setAttribute(o,u))))}var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),V=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),re=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var W=Object.assign,M;function B(s){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+s}var z=!1;function ee(s,o){if(!s||z)return"";z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var m=pe}Reflect.construct(s,[],o)}else{try{o.call()}catch(pe){m=pe}s.call(o.prototype)}else{try{throw Error()}catch(pe){m=pe}s()}}catch(pe){if(pe&&m&&typeof pe.stack=="string"){for(var C=pe.stack.split(`
`),D=m.stack.split(`
`),q=C.length-1,J=D.length-1;1<=q&&0<=J&&C[q]!==D[J];)J--;for(;1<=q&&0<=J;q--,J--)if(C[q]!==D[J]){if(q!==1||J!==1)do if(q--,J--,0>J||C[q]!==D[J]){var te=`
`+C[q].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=q&&0<=J);break}}}finally{z=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?B(s):""}function X(s){switch(s.tag){case 5:return B(s.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return s=ee(s.type,!1),s;case 11:return s=ee(s.type.render,!1),s;case 1:return s=ee(s.type,!0),s;default:return""}}function H(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case V:return"Portal";case A:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case $:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case R:return(s.displayName||"Context")+".Consumer";case k:return(s._context.displayName||"Context")+".Provider";case O:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Q:return o=s.displayName||null,o!==null?o:H(s.type)||"Memo";case se:o=s._payload,s=s._init;try{return H(s(o))}catch{}}return null}function Y(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(o);case 8:return o===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ne(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ie(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function fe(s){var o=ie(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var C=u.get,D=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return C.call(this)},set:function(q){m=""+q,D.call(this,q)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(q){m=""+q},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ye(s){s._valueTracker||(s._valueTracker=fe(s))}function ke(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=ie(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function Re(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Oe(s,o){var u=o.checked;return W({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function De(s,o){var u=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;u=ne(o.value!=null?o.value:u),s._wrapperState={initialChecked:m,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ue(s,o){o=o.checked,o!=null&&L(s,"checked",o,!1)}function et(s,o){Ue(s,o);var u=ne(o.value),m=o.type;if(u!=null)m==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?de(s,o.type,u):o.hasOwnProperty("defaultValue")&&de(s,o.type,ne(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function ue(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function de(s,o,u){(o!=="number"||Re(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ee=Array.isArray;function be(s,o,u,m){if(s=s.options,o){o={};for(var C=0;C<u.length;C++)o["$"+u[C]]=!0;for(u=0;u<s.length;u++)C=o.hasOwnProperty("$"+s[u].value),s[u].selected!==C&&(s[u].selected=C),C&&m&&(s[u].defaultSelected=!0)}else{for(u=""+ne(u),o=null,C=0;C<s.length;C++){if(s[C].value===u){s[C].selected=!0,m&&(s[C].defaultSelected=!0);return}o!==null||s[C].disabled||(o=s[C])}o!==null&&(o.selected=!0)}}function ge(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $e(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Ee(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:ne(u)}}function Fe(s,o){var u=ne(o.value),m=ne(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),m!=null&&(s.defaultValue=""+m)}function Be(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function We(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xe(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?We(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ze,Yn=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,m,C){MSApp.execUnsafeLocalFunction(function(){return s(o,u,m,C)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Ze=Ze||document.createElement("div"),Ze.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ze.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ut(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zt=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(s){zt.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),St[o]=St[s]})});function Xn(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||St.hasOwnProperty(s)&&St[s]?(""+o).trim():o+"px"}function _i(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var m=u.indexOf("--")===0,C=Xn(u,o[u],m);u==="float"&&(u="cssFloat"),m?s.setProperty(u,C):s[u]=C}}var fa=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(s,o){if(o){if(fa[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function pa(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function Ys(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xs=null,Vn=null,wr=null;function Zs(s){if(s=ja(s)){if(typeof Xs!="function")throw Error(t(280));var o=s.stateNode;o&&(o=vu(o),Xs(s.stateNode,s.type,o))}}function Er(s){Vn?wr?wr.push(s):wr=[s]:Vn=s}function ma(){if(Vn){var s=Vn,o=wr;if(wr=Vn=null,Zs(s),o)for(s=0;s<o.length;s++)Zs(o[s])}}function ds(s,o){return s(o)}function ga(){}var Hr=!1;function ya(s,o,u){if(Hr)return s(o,u);Hr=!0;try{return ds(s,o,u)}finally{Hr=!1,(Vn!==null||wr!==null)&&(ga(),ma())}}function Ot(s,o){var u=s.stateNode;if(u===null)return null;var m=vu(u);if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var eo=!1;if(c)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){eo=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{eo=!1}function ps(s,o,u,m,C,D,q,J,te){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(u,pe)}catch(Se){this.onError(Se)}}var ms=!1,to=null,er=!1,va=null,Lh={onError:function(s){ms=!0,to=s}};function no(s,o,u,m,C,D,q,J,te){ms=!1,to=null,ps.apply(Lh,arguments)}function zl(s,o,u,m,C,D,q,J,te){if(no.apply(this,arguments),ms){if(ms){var pe=to;ms=!1,to=null}else throw Error(t(198));er||(er=!0,va=pe)}}function tr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function gs(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function nr(s){if(tr(s)!==s)throw Error(t(188))}function Hl(s){var o=s.alternate;if(!o){if(o=tr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,m=o;;){var C=u.return;if(C===null)break;var D=C.alternate;if(D===null){if(m=C.return,m!==null){u=m;continue}break}if(C.child===D.child){for(D=C.child;D;){if(D===u)return nr(C),s;if(D===m)return nr(C),o;D=D.sibling}throw Error(t(188))}if(u.return!==m.return)u=C,m=D;else{for(var q=!1,J=C.child;J;){if(J===u){q=!0,u=C,m=D;break}if(J===m){q=!0,m=C,u=D;break}J=J.sibling}if(!q){for(J=D.child;J;){if(J===u){q=!0,u=D,m=C;break}if(J===m){q=!0,m=D,u=C;break}J=J.sibling}if(!q)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function _a(s){return s=Hl(s),s!==null?ro(s):null}function ro(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=ro(s);if(o!==null)return o;s=s.sibling}return null}var io=e.unstable_scheduleCallback,wa=e.unstable_cancelCallback,$l=e.unstable_shouldYield,Dh=e.unstable_requestPaint,mt=e.unstable_now,Wl=e.unstable_getCurrentPriorityLevel,ys=e.unstable_ImmediatePriority,wi=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Ea=e.unstable_LowPriority,Kl=e.unstable_IdlePriority,vs=null,Pn=null;function Gl(s){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(vs,s,void 0,(s.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Jl,Ta=Math.log,Ql=Math.LN2;function Jl(s){return s>>>=0,s===0?32:31-(Ta(s)/Ql|0)|0}var so=64,oo=4194304;function Ei(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function _s(s,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,C=s.suspendedLanes,D=s.pingedLanes,q=u&268435455;if(q!==0){var J=q&~C;J!==0?m=Ei(J):(D&=q,D!==0&&(m=Ei(D)))}else q=u&~C,q!==0?m=Ei(q):D!==0&&(m=Ei(D));if(m===0)return 0;if(o!==0&&o!==m&&!(o&C)&&(C=m&-m,D=o&-o,C>=D||C===16&&(D&4194240)!==0))return o;if(m&4&&(m|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=m;0<o;)u=31-fn(o),C=1<<u,m|=s[u],o&=~C;return m}function Mh(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $r(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,C=s.expirationTimes,D=s.pendingLanes;0<D;){var q=31-fn(D),J=1<<q,te=C[q];te===-1?(!(J&u)||J&m)&&(C[q]=Mh(J,o)):te<=o&&(s.expiredLanes|=J),D&=~J}}function On(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ws(){var s=so;return so<<=1,!(so&4194240)&&(so=64),s}function Ti(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Si(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-fn(o),s[o]=u}function pt(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<u;){var C=31-fn(u),D=1<<C;o[C]=0,m[C]=-1,s[C]=-1,u&=~D}}function Ii(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-fn(u),C=1<<m;C&o|s[m]&o&&(s[m]|=o),u&=~C}}var it=0;function Ci(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Yl,ao,Xl,Zl,eu,Sa=!1,Tr=[],Qt=null,rr=null,ir=null,bi=new Map,Bn=new Map,Sr=[],Fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tu(s,o){switch(s){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":bi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(o.pointerId)}}function wn(s,o,u,m,C,D){return s===null||s.nativeEvent!==D?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:D,targetContainers:[C]},o!==null&&(o=ja(o),o!==null&&ao(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,C!==null&&o.indexOf(C)===-1&&o.push(C),s)}function jh(s,o,u,m,C){switch(o){case"focusin":return Qt=wn(Qt,s,o,u,m,C),!0;case"dragenter":return rr=wn(rr,s,o,u,m,C),!0;case"mouseover":return ir=wn(ir,s,o,u,m,C),!0;case"pointerover":var D=C.pointerId;return bi.set(D,wn(bi.get(D)||null,s,o,u,m,C)),!0;case"gotpointercapture":return D=C.pointerId,Bn.set(D,wn(Bn.get(D)||null,s,o,u,m,C)),!0}return!1}function nu(s){var o=Cs(s.target);if(o!==null){var u=tr(o);if(u!==null){if(o=u.tag,o===13){if(o=gs(u),o!==null){s.blockedOn=o,eu(s.priority,function(){Xl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wr(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=lo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);fs=m,u.target.dispatchEvent(m),fs=null}else return o=ja(u),o!==null&&ao(o),s.blockedOn=u,!1;o.shift()}return!0}function Es(s,o,u){Wr(s)&&u.delete(o)}function ru(){Sa=!1,Qt!==null&&Wr(Qt)&&(Qt=null),rr!==null&&Wr(rr)&&(rr=null),ir!==null&&Wr(ir)&&(ir=null),bi.forEach(Es),Bn.forEach(Es)}function sr(s,o){s.blockedOn===o&&(s.blockedOn=null,Sa||(Sa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ru)))}function or(s){function o(C){return sr(C,s)}if(0<Tr.length){sr(Tr[0],s);for(var u=1;u<Tr.length;u++){var m=Tr[u];m.blockedOn===s&&(m.blockedOn=null)}}for(Qt!==null&&sr(Qt,s),rr!==null&&sr(rr,s),ir!==null&&sr(ir,s),bi.forEach(o),Bn.forEach(o),u=0;u<Sr.length;u++)m=Sr[u],m.blockedOn===s&&(m.blockedOn=null);for(;0<Sr.length&&(u=Sr[0],u.blockedOn===null);)nu(u),u.blockedOn===null&&Sr.shift()}var Kr=b.ReactCurrentBatchConfig,Ai=!0;function Et(s,o,u,m){var C=it,D=Kr.transition;Kr.transition=null;try{it=1,Ia(s,o,u,m)}finally{it=C,Kr.transition=D}}function Vh(s,o,u,m){var C=it,D=Kr.transition;Kr.transition=null;try{it=4,Ia(s,o,u,m)}finally{it=C,Kr.transition=D}}function Ia(s,o,u,m){if(Ai){var C=lo(s,o,u,m);if(C===null)Jh(s,o,m,Ts,u),tu(s,m);else if(jh(C,s,o,u,m))m.stopPropagation();else if(tu(s,m),o&4&&-1<Fh.indexOf(s)){for(;C!==null;){var D=ja(C);if(D!==null&&Yl(D),D=lo(s,o,u,m),D===null&&Jh(s,o,m,Ts,u),D===C)break;C=D}C!==null&&m.stopPropagation()}else Jh(s,o,m,null,u)}}var Ts=null;function lo(s,o,u,m){if(Ts=null,s=Ys(m),s=Cs(s),s!==null)if(o=tr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=gs(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Ts=s,null}function Ca(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case ys:return 1;case wi:return 4;case Un:case Ea:return 16;case Kl:return 536870912;default:return 16}default:return 16}}var xn=null,uo=null,En=null;function ba(){if(En)return En;var s,o=uo,u=o.length,m,C="value"in xn?xn.value:xn.textContent,D=C.length;for(s=0;s<u&&o[s]===C[s];s++);var q=u-s;for(m=1;m<=q&&o[u-m]===C[D-m];m++);return En=C.slice(s,1<m?1-m:void 0)}function co(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ir(){return!0}function Aa(){return!1}function Jt(s){function o(u,m,C,D,q){this._reactName=u,this._targetInst=C,this.type=m,this.nativeEvent=D,this.target=q,this.currentTarget=null;for(var J in s)s.hasOwnProperty(J)&&(u=s[J],this[J]=u?u(D):D[J]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Ir:Aa,this.isPropagationStopped=Aa,this}return W(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),o}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ho=Jt(ar),Cr=W({},ar,{view:0,detail:0}),Uh=Jt(Cr),fo,Gr,ki,Ss=W({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:br,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(fo=s.screenX-ki.screenX,Gr=s.screenY-ki.screenY):Gr=fo=0,ki=s),fo)},movementY:function(s){return"movementY"in s?s.movementY:Gr}}),po=Jt(Ss),ka=W({},Ss,{dataTransfer:0}),iu=Jt(ka),mo=W({},Cr,{relatedTarget:0}),go=Jt(mo),su=W({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=Jt(su),ou=W({},ar,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),au=Jt(ou),lu=W({},ar,{data:0}),Ra=Jt(lu),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=uu[s])?!!o[s]:!1}function br(){return cu}var h=W({},Cr,{key:function(s){if(s.key){var o=yo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=co(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:br,charCode:function(s){return s.type==="keypress"?co(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?co(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),x=Jt(h),j=W({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Jt(j),ae=W({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:br}),me=Jt(ae),Ae=W({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=Jt(Ae),Vt=W({},Ss,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=Jt(Vt),Ht=[9,13,27,32],Dt=c&&"CompositionEvent"in window,qn=null;c&&"documentMode"in document&&(qn=document.documentMode);var Nn=c&&"TextEvent"in window&&!qn,Is=c&&(!Dt||qn&&8<qn&&11>=qn),vo=" ",Zg=!1;function ey(s,o){switch(s){case"keyup":return Ht.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var _o=!1;function uI(s,o){switch(s){case"compositionend":return ty(o);case"keypress":return o.which!==32?null:(Zg=!0,vo);case"textInput":return s=o.data,s===vo&&Zg?null:s;default:return null}}function cI(s,o){if(_o)return s==="compositionend"||!Dt&&ey(s,o)?(s=ba(),En=uo=xn=null,_o=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Is&&o.locale!=="ko"?null:o.data;default:return null}}var hI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!hI[s.type]:o==="textarea"}function ry(s,o,u,m){Er(m),o=mu(o,"onChange"),0<o.length&&(u=new ho("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var Pa=null,Oa=null;function fI(s){Ey(s,0)}function hu(s){var o=Io(s);if(ke(o))return s}function dI(s,o){if(s==="change")return o}var iy=!1;if(c){var Bh;if(c){var qh="oninput"in document;if(!qh){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),qh=typeof sy.oninput=="function"}Bh=qh}else Bh=!1;iy=Bh&&(!document.documentMode||9<document.documentMode)}function oy(){Pa&&(Pa.detachEvent("onpropertychange",ay),Oa=Pa=null)}function ay(s){if(s.propertyName==="value"&&hu(Oa)){var o=[];ry(o,Oa,s,Ys(s)),ya(fI,o)}}function pI(s,o,u){s==="focusin"?(oy(),Pa=o,Oa=u,Pa.attachEvent("onpropertychange",ay)):s==="focusout"&&oy()}function mI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hu(Oa)}function gI(s,o){if(s==="click")return hu(o)}function yI(s,o){if(s==="input"||s==="change")return hu(o)}function vI(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var lr=typeof Object.is=="function"?Object.is:vI;function xa(s,o){if(lr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var C=u[m];if(!f.call(o,C)||!lr(s[C],o[C]))return!1}return!0}function ly(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function uy(s,o){var u=ly(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ly(u)}}function cy(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?cy(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function hy(){for(var s=window,o=Re();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Re(s.document)}return o}function zh(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function _I(s){var o=hy(),u=s.focusedElem,m=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&cy(u.ownerDocument.documentElement,u)){if(m!==null&&zh(u)){if(o=m.start,s=m.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var C=u.textContent.length,D=Math.min(m.start,C);m=m.end===void 0?D:Math.min(m.end,C),!s.extend&&D>m&&(C=m,m=D,D=C),C=uy(u,D);var q=uy(u,m);C&&q&&(s.rangeCount!==1||s.anchorNode!==C.node||s.anchorOffset!==C.offset||s.focusNode!==q.node||s.focusOffset!==q.offset)&&(o=o.createRange(),o.setStart(C.node,C.offset),s.removeAllRanges(),D>m?(s.addRange(o),s.extend(q.node,q.offset)):(o.setEnd(q.node,q.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var wI=c&&"documentMode"in document&&11>=document.documentMode,wo=null,Hh=null,Na=null,$h=!1;function fy(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;$h||wo==null||wo!==Re(m)||(m=wo,"selectionStart"in m&&zh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Na&&xa(Na,m)||(Na=m,m=mu(Hh,"onSelect"),0<m.length&&(o=new ho("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=wo)))}function fu(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Eo={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Wh={},dy={};c&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function du(s){if(Wh[s])return Wh[s];if(!Eo[s])return s;var o=Eo[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in dy)return Wh[s]=o[u];return s}var py=du("animationend"),my=du("animationiteration"),gy=du("animationstart"),yy=du("transitionend"),vy=new Map,_y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(s,o){vy.set(s,o),a(o,[s])}for(var Kh=0;Kh<_y.length;Kh++){var Gh=_y[Kh],EI=Gh.toLowerCase(),TI=Gh[0].toUpperCase()+Gh.slice(1);Ri(EI,"on"+TI)}Ri(py,"onAnimationEnd"),Ri(my,"onAnimationIteration"),Ri(gy,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(yy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SI=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function wy(s,o,u){var m=s.type||"unknown-event";s.currentTarget=u,zl(m,o,void 0,s),s.currentTarget=null}function Ey(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],C=m.event;m=m.listeners;e:{var D=void 0;if(o)for(var q=m.length-1;0<=q;q--){var J=m[q],te=J.instance,pe=J.currentTarget;if(J=J.listener,te!==D&&C.isPropagationStopped())break e;wy(C,J,pe),D=te}else for(q=0;q<m.length;q++){if(J=m[q],te=J.instance,pe=J.currentTarget,J=J.listener,te!==D&&C.isPropagationStopped())break e;wy(C,J,pe),D=te}}}if(er)throw s=va,er=!1,va=null,s}function vt(s,o){var u=o[nf];u===void 0&&(u=o[nf]=new Set);var m=s+"__bubble";u.has(m)||(Ty(o,s,2,!1),u.add(m))}function Qh(s,o,u){var m=0;o&&(m|=4),Ty(u,s,m,o)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Da(s){if(!s[pu]){s[pu]=!0,n.forEach(function(u){u!=="selectionchange"&&(SI.has(u)||Qh(u,!1,s),Qh(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[pu]||(o[pu]=!0,Qh("selectionchange",!1,o))}}function Ty(s,o,u,m){switch(Ca(o)){case 1:var C=Et;break;case 4:C=Vh;break;default:C=Ia}u=C.bind(null,o,u,s),C=void 0,!eo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(C=!0),m?C!==void 0?s.addEventListener(o,u,{capture:!0,passive:C}):s.addEventListener(o,u,!0):C!==void 0?s.addEventListener(o,u,{passive:C}):s.addEventListener(o,u,!1)}function Jh(s,o,u,m,C){var D=m;if(!(o&1)&&!(o&2)&&m!==null)e:for(;;){if(m===null)return;var q=m.tag;if(q===3||q===4){var J=m.stateNode.containerInfo;if(J===C||J.nodeType===8&&J.parentNode===C)break;if(q===4)for(q=m.return;q!==null;){var te=q.tag;if((te===3||te===4)&&(te=q.stateNode.containerInfo,te===C||te.nodeType===8&&te.parentNode===C))return;q=q.return}for(;J!==null;){if(q=Cs(J),q===null)return;if(te=q.tag,te===5||te===6){m=D=q;continue e}J=J.parentNode}}m=m.return}ya(function(){var pe=D,Se=Ys(u),Ie=[];e:{var Te=vy.get(s);if(Te!==void 0){var Pe=ho,Me=s;switch(s){case"keypress":if(co(u)===0)break e;case"keydown":case"keyup":Pe=x;break;case"focusin":Me="focus",Pe=go;break;case"focusout":Me="blur",Pe=go;break;case"beforeblur":case"afterblur":Pe=go;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=me;break;case py:case my:case gy:Pe=Qr;break;case yy:Pe=dt;break;case"scroll":Pe=Uh;break;case"wheel":Pe=ot;break;case"copy":case"cut":case"paste":Pe=au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=K}var je=(o&4)!==0,xt=!je&&s==="scroll",le=je?Te!==null?Te+"Capture":null:Te;je=[];for(var oe=pe,ce;oe!==null;){ce=oe;var Ce=ce.stateNode;if(ce.tag===5&&Ce!==null&&(ce=Ce,le!==null&&(Ce=Ot(oe,le),Ce!=null&&je.push(Ma(oe,Ce,ce)))),xt)break;oe=oe.return}0<je.length&&(Te=new Pe(Te,Me,null,u,Se),Ie.push({event:Te,listeners:je}))}}if(!(o&7)){e:{if(Te=s==="mouseover"||s==="pointerover",Pe=s==="mouseout"||s==="pointerout",Te&&u!==fs&&(Me=u.relatedTarget||u.fromElement)&&(Cs(Me)||Me[Jr]))break e;if((Pe||Te)&&(Te=Se.window===Se?Se:(Te=Se.ownerDocument)?Te.defaultView||Te.parentWindow:window,Pe?(Me=u.relatedTarget||u.toElement,Pe=pe,Me=Me?Cs(Me):null,Me!==null&&(xt=tr(Me),Me!==xt||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Pe=null,Me=pe),Pe!==Me)){if(je=po,Ce="onMouseLeave",le="onMouseEnter",oe="mouse",(s==="pointerout"||s==="pointerover")&&(je=K,Ce="onPointerLeave",le="onPointerEnter",oe="pointer"),xt=Pe==null?Te:Io(Pe),ce=Me==null?Te:Io(Me),Te=new je(Ce,oe+"leave",Pe,u,Se),Te.target=xt,Te.relatedTarget=ce,Ce=null,Cs(Se)===pe&&(je=new je(le,oe+"enter",Me,u,Se),je.target=ce,je.relatedTarget=xt,Ce=je),xt=Ce,Pe&&Me)t:{for(je=Pe,le=Me,oe=0,ce=je;ce;ce=To(ce))oe++;for(ce=0,Ce=le;Ce;Ce=To(Ce))ce++;for(;0<oe-ce;)je=To(je),oe--;for(;0<ce-oe;)le=To(le),ce--;for(;oe--;){if(je===le||le!==null&&je===le.alternate)break t;je=To(je),le=To(le)}je=null}else je=null;Pe!==null&&Sy(Ie,Te,Pe,je,!1),Me!==null&&xt!==null&&Sy(Ie,xt,Me,je,!0)}}e:{if(Te=pe?Io(pe):window,Pe=Te.nodeName&&Te.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Te.type==="file")var Ve=dI;else if(ny(Te))if(iy)Ve=yI;else{Ve=mI;var ze=pI}else(Pe=Te.nodeName)&&Pe.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(Ve=gI);if(Ve&&(Ve=Ve(s,pe))){ry(Ie,Ve,u,Se);break e}ze&&ze(s,Te,pe),s==="focusout"&&(ze=Te._wrapperState)&&ze.controlled&&Te.type==="number"&&de(Te,"number",Te.value)}switch(ze=pe?Io(pe):window,s){case"focusin":(ny(ze)||ze.contentEditable==="true")&&(wo=ze,Hh=pe,Na=null);break;case"focusout":Na=Hh=wo=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,fy(Ie,u,Se);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":fy(Ie,u,Se)}var He;if(Dt)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else _o?ey(s,u)&&(Ge="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(Is&&u.locale!=="ko"&&(_o||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&_o&&(He=ba()):(xn=Se,uo="value"in xn?xn.value:xn.textContent,_o=!0)),ze=mu(pe,Ge),0<ze.length&&(Ge=new Ra(Ge,s,null,u,Se),Ie.push({event:Ge,listeners:ze}),He?Ge.data=He:(He=ty(u),He!==null&&(Ge.data=He)))),(He=Nn?uI(s,u):cI(s,u))&&(pe=mu(pe,"onBeforeInput"),0<pe.length&&(Se=new Ra("onBeforeInput","beforeinput",null,u,Se),Ie.push({event:Se,listeners:pe}),Se.data=He))}Ey(Ie,o)})}function Ma(s,o,u){return{instance:s,listener:o,currentTarget:u}}function mu(s,o){for(var u=o+"Capture",m=[];s!==null;){var C=s,D=C.stateNode;C.tag===5&&D!==null&&(C=D,D=Ot(s,u),D!=null&&m.unshift(Ma(s,D,C)),D=Ot(s,o),D!=null&&m.push(Ma(s,D,C))),s=s.return}return m}function To(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Sy(s,o,u,m,C){for(var D=o._reactName,q=[];u!==null&&u!==m;){var J=u,te=J.alternate,pe=J.stateNode;if(te!==null&&te===m)break;J.tag===5&&pe!==null&&(J=pe,C?(te=Ot(u,D),te!=null&&q.unshift(Ma(u,te,J))):C||(te=Ot(u,D),te!=null&&q.push(Ma(u,te,J)))),u=u.return}q.length!==0&&s.push({event:o,listeners:q})}var II=/\r\n?/g,CI=/\u0000|\uFFFD/g;function Iy(s){return(typeof s=="string"?s:""+s).replace(II,`
`).replace(CI,"")}function gu(s,o,u){if(o=Iy(o),Iy(s)!==o&&u)throw Error(t(425))}function yu(){}var Yh=null,Xh=null;function Zh(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,Cy=typeof Promise=="function"?Promise:void 0,AI=typeof queueMicrotask=="function"?queueMicrotask:typeof Cy<"u"?function(s){return Cy.resolve(null).then(s).catch(kI)}:ef;function kI(s){setTimeout(function(){throw s})}function tf(s,o){var u=o,m=0;do{var C=u.nextSibling;if(s.removeChild(u),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(m===0){s.removeChild(C),or(o);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=C}while(u);or(o)}function Pi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function by(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var So=Math.random().toString(36).slice(2),Ar="__reactFiber$"+So,Fa="__reactProps$"+So,Jr="__reactContainer$"+So,nf="__reactEvents$"+So,RI="__reactListeners$"+So,PI="__reactHandles$"+So;function Cs(s){var o=s[Ar];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Jr]||u[Ar]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=by(s);s!==null;){if(u=s[Ar])return u;s=by(s)}return o}s=u,u=s.parentNode}return null}function ja(s){return s=s[Ar]||s[Jr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Io(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function vu(s){return s[Fa]||null}var rf=[],Co=-1;function Oi(s){return{current:s}}function _t(s){0>Co||(s.current=rf[Co],rf[Co]=null,Co--)}function gt(s,o){Co++,rf[Co]=s.current,s.current=o}var xi={},nn=Oi(xi),Tn=Oi(!1),bs=xi;function bo(s,o){var u=s.type.contextTypes;if(!u)return xi;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var C={},D;for(D in u)C[D]=o[D];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=C),C}function Sn(s){return s=s.childContextTypes,s!=null}function _u(){_t(Tn),_t(nn)}function Ay(s,o,u){if(nn.current!==xi)throw Error(t(168));gt(nn,o),gt(Tn,u)}function ky(s,o,u){var m=s.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var C in m)if(!(C in o))throw Error(t(108,Y(s)||"Unknown",C));return W({},u,m)}function wu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||xi,bs=nn.current,gt(nn,s),gt(Tn,Tn.current),!0}function Ry(s,o,u){var m=s.stateNode;if(!m)throw Error(t(169));u?(s=ky(s,o,bs),m.__reactInternalMemoizedMergedChildContext=s,_t(Tn),_t(nn),gt(nn,s)):_t(Tn),gt(Tn,u)}var Yr=null,Eu=!1,sf=!1;function Py(s){Yr===null?Yr=[s]:Yr.push(s)}function OI(s){Eu=!0,Py(s)}function Ni(){if(!sf&&Yr!==null){sf=!0;var s=0,o=it;try{var u=Yr;for(it=1;s<u.length;s++){var m=u[s];do m=m(!0);while(m!==null)}Yr=null,Eu=!1}catch(C){throw Yr!==null&&(Yr=Yr.slice(s+1)),io(ys,Ni),C}finally{it=o,sf=!1}}return null}var Ao=[],ko=0,Tu=null,Su=0,zn=[],Hn=0,As=null,Xr=1,Zr="";function ks(s,o){Ao[ko++]=Su,Ao[ko++]=Tu,Tu=s,Su=o}function Oy(s,o,u){zn[Hn++]=Xr,zn[Hn++]=Zr,zn[Hn++]=As,As=s;var m=Xr;s=Zr;var C=32-fn(m)-1;m&=~(1<<C),u+=1;var D=32-fn(o)+C;if(30<D){var q=C-C%5;D=(m&(1<<q)-1).toString(32),m>>=q,C-=q,Xr=1<<32-fn(o)+C|u<<C|m,Zr=D+s}else Xr=1<<D|u<<C|m,Zr=s}function of(s){s.return!==null&&(ks(s,1),Oy(s,1,0))}function af(s){for(;s===Tu;)Tu=Ao[--ko],Ao[ko]=null,Su=Ao[--ko],Ao[ko]=null;for(;s===As;)As=zn[--Hn],zn[Hn]=null,Zr=zn[--Hn],zn[Hn]=null,Xr=zn[--Hn],zn[Hn]=null}var Ln=null,Dn=null,Tt=!1,ur=null;function xy(s,o){var u=Gn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function Ny(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Ln=s,Dn=Pi(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Ln=s,Dn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=As!==null?{id:Xr,overflow:Zr}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Gn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,Ln=s,Dn=null,!0):!1;default:return!1}}function lf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function uf(s){if(Tt){var o=Dn;if(o){var u=o;if(!Ny(s,o)){if(lf(s))throw Error(t(418));o=Pi(u.nextSibling);var m=Ln;o&&Ny(s,o)?xy(m,u):(s.flags=s.flags&-4097|2,Tt=!1,Ln=s)}}else{if(lf(s))throw Error(t(418));s.flags=s.flags&-4097|2,Tt=!1,Ln=s}}}function Ly(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ln=s}function Iu(s){if(s!==Ln)return!1;if(!Tt)return Ly(s),Tt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Zh(s.type,s.memoizedProps)),o&&(o=Dn)){if(lf(s))throw Dy(),Error(t(418));for(;o;)xy(s,o),o=Pi(o.nextSibling)}if(Ly(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Dn=Pi(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Dn=null}}else Dn=Ln?Pi(s.stateNode.nextSibling):null;return!0}function Dy(){for(var s=Dn;s;)s=Pi(s.nextSibling)}function Ro(){Dn=Ln=null,Tt=!1}function cf(s){ur===null?ur=[s]:ur.push(s)}var xI=b.ReactCurrentBatchConfig;function Va(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,s));var C=m,D=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===D?o.ref:(o=function(q){var J=C.refs;q===null?delete J[D]:J[D]=q},o._stringRef=D,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Cu(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function My(s){var o=s._init;return o(s._payload)}function Fy(s){function o(le,oe){if(s){var ce=le.deletions;ce===null?(le.deletions=[oe],le.flags|=16):ce.push(oe)}}function u(le,oe){if(!s)return null;for(;oe!==null;)o(le,oe),oe=oe.sibling;return null}function m(le,oe){for(le=new Map;oe!==null;)oe.key!==null?le.set(oe.key,oe):le.set(oe.index,oe),oe=oe.sibling;return le}function C(le,oe){return le=Bi(le,oe),le.index=0,le.sibling=null,le}function D(le,oe,ce){return le.index=ce,s?(ce=le.alternate,ce!==null?(ce=ce.index,ce<oe?(le.flags|=2,oe):ce):(le.flags|=2,oe)):(le.flags|=1048576,oe)}function q(le){return s&&le.alternate===null&&(le.flags|=2),le}function J(le,oe,ce,Ce){return oe===null||oe.tag!==6?(oe=td(ce,le.mode,Ce),oe.return=le,oe):(oe=C(oe,ce),oe.return=le,oe)}function te(le,oe,ce,Ce){var Ve=ce.type;return Ve===P?Se(le,oe,ce.props.children,Ce,ce.key):oe!==null&&(oe.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===se&&My(Ve)===oe.type)?(Ce=C(oe,ce.props),Ce.ref=Va(le,oe,ce),Ce.return=le,Ce):(Ce=Qu(ce.type,ce.key,ce.props,null,le.mode,Ce),Ce.ref=Va(le,oe,ce),Ce.return=le,Ce)}function pe(le,oe,ce,Ce){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ce.containerInfo||oe.stateNode.implementation!==ce.implementation?(oe=nd(ce,le.mode,Ce),oe.return=le,oe):(oe=C(oe,ce.children||[]),oe.return=le,oe)}function Se(le,oe,ce,Ce,Ve){return oe===null||oe.tag!==7?(oe=Ms(ce,le.mode,Ce,Ve),oe.return=le,oe):(oe=C(oe,ce),oe.return=le,oe)}function Ie(le,oe,ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=td(""+oe,le.mode,ce),oe.return=le,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return ce=Qu(oe.type,oe.key,oe.props,null,le.mode,ce),ce.ref=Va(le,null,oe),ce.return=le,ce;case V:return oe=nd(oe,le.mode,ce),oe.return=le,oe;case se:var Ce=oe._init;return Ie(le,Ce(oe._payload),ce)}if(Ee(oe)||G(oe))return oe=Ms(oe,le.mode,ce,null),oe.return=le,oe;Cu(le,oe)}return null}function Te(le,oe,ce,Ce){var Ve=oe!==null?oe.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Ve!==null?null:J(le,oe,""+ce,Ce);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case F:return ce.key===Ve?te(le,oe,ce,Ce):null;case V:return ce.key===Ve?pe(le,oe,ce,Ce):null;case se:return Ve=ce._init,Te(le,oe,Ve(ce._payload),Ce)}if(Ee(ce)||G(ce))return Ve!==null?null:Se(le,oe,ce,Ce,null);Cu(le,ce)}return null}function Pe(le,oe,ce,Ce,Ve){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return le=le.get(ce)||null,J(oe,le,""+Ce,Ve);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case F:return le=le.get(Ce.key===null?ce:Ce.key)||null,te(oe,le,Ce,Ve);case V:return le=le.get(Ce.key===null?ce:Ce.key)||null,pe(oe,le,Ce,Ve);case se:var ze=Ce._init;return Pe(le,oe,ce,ze(Ce._payload),Ve)}if(Ee(Ce)||G(Ce))return le=le.get(ce)||null,Se(oe,le,Ce,Ve,null);Cu(oe,Ce)}return null}function Me(le,oe,ce,Ce){for(var Ve=null,ze=null,He=oe,Ge=oe=0,Kt=null;He!==null&&Ge<ce.length;Ge++){He.index>Ge?(Kt=He,He=null):Kt=He.sibling;var ct=Te(le,He,ce[Ge],Ce);if(ct===null){He===null&&(He=Kt);break}s&&He&&ct.alternate===null&&o(le,He),oe=D(ct,oe,Ge),ze===null?Ve=ct:ze.sibling=ct,ze=ct,He=Kt}if(Ge===ce.length)return u(le,He),Tt&&ks(le,Ge),Ve;if(He===null){for(;Ge<ce.length;Ge++)He=Ie(le,ce[Ge],Ce),He!==null&&(oe=D(He,oe,Ge),ze===null?Ve=He:ze.sibling=He,ze=He);return Tt&&ks(le,Ge),Ve}for(He=m(le,He);Ge<ce.length;Ge++)Kt=Pe(He,le,Ge,ce[Ge],Ce),Kt!==null&&(s&&Kt.alternate!==null&&He.delete(Kt.key===null?Ge:Kt.key),oe=D(Kt,oe,Ge),ze===null?Ve=Kt:ze.sibling=Kt,ze=Kt);return s&&He.forEach(function(qi){return o(le,qi)}),Tt&&ks(le,Ge),Ve}function je(le,oe,ce,Ce){var Ve=G(ce);if(typeof Ve!="function")throw Error(t(150));if(ce=Ve.call(ce),ce==null)throw Error(t(151));for(var ze=Ve=null,He=oe,Ge=oe=0,Kt=null,ct=ce.next();He!==null&&!ct.done;Ge++,ct=ce.next()){He.index>Ge?(Kt=He,He=null):Kt=He.sibling;var qi=Te(le,He,ct.value,Ce);if(qi===null){He===null&&(He=Kt);break}s&&He&&qi.alternate===null&&o(le,He),oe=D(qi,oe,Ge),ze===null?Ve=qi:ze.sibling=qi,ze=qi,He=Kt}if(ct.done)return u(le,He),Tt&&ks(le,Ge),Ve;if(He===null){for(;!ct.done;Ge++,ct=ce.next())ct=Ie(le,ct.value,Ce),ct!==null&&(oe=D(ct,oe,Ge),ze===null?Ve=ct:ze.sibling=ct,ze=ct);return Tt&&ks(le,Ge),Ve}for(He=m(le,He);!ct.done;Ge++,ct=ce.next())ct=Pe(He,le,Ge,ct.value,Ce),ct!==null&&(s&&ct.alternate!==null&&He.delete(ct.key===null?Ge:ct.key),oe=D(ct,oe,Ge),ze===null?Ve=ct:ze.sibling=ct,ze=ct);return s&&He.forEach(function(cC){return o(le,cC)}),Tt&&ks(le,Ge),Ve}function xt(le,oe,ce,Ce){if(typeof ce=="object"&&ce!==null&&ce.type===P&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case F:e:{for(var Ve=ce.key,ze=oe;ze!==null;){if(ze.key===Ve){if(Ve=ce.type,Ve===P){if(ze.tag===7){u(le,ze.sibling),oe=C(ze,ce.props.children),oe.return=le,le=oe;break e}}else if(ze.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===se&&My(Ve)===ze.type){u(le,ze.sibling),oe=C(ze,ce.props),oe.ref=Va(le,ze,ce),oe.return=le,le=oe;break e}u(le,ze);break}else o(le,ze);ze=ze.sibling}ce.type===P?(oe=Ms(ce.props.children,le.mode,Ce,ce.key),oe.return=le,le=oe):(Ce=Qu(ce.type,ce.key,ce.props,null,le.mode,Ce),Ce.ref=Va(le,oe,ce),Ce.return=le,le=Ce)}return q(le);case V:e:{for(ze=ce.key;oe!==null;){if(oe.key===ze)if(oe.tag===4&&oe.stateNode.containerInfo===ce.containerInfo&&oe.stateNode.implementation===ce.implementation){u(le,oe.sibling),oe=C(oe,ce.children||[]),oe.return=le,le=oe;break e}else{u(le,oe);break}else o(le,oe);oe=oe.sibling}oe=nd(ce,le.mode,Ce),oe.return=le,le=oe}return q(le);case se:return ze=ce._init,xt(le,oe,ze(ce._payload),Ce)}if(Ee(ce))return Me(le,oe,ce,Ce);if(G(ce))return je(le,oe,ce,Ce);Cu(le,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,oe!==null&&oe.tag===6?(u(le,oe.sibling),oe=C(oe,ce),oe.return=le,le=oe):(u(le,oe),oe=td(ce,le.mode,Ce),oe.return=le,le=oe),q(le)):u(le,oe)}return xt}var Po=Fy(!0),jy=Fy(!1),bu=Oi(null),Au=null,Oo=null,hf=null;function ff(){hf=Oo=Au=null}function df(s){var o=bu.current;_t(bu),s._currentValue=o}function pf(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function xo(s,o){Au=s,hf=Oo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(In=!0),s.firstContext=null)}function $n(s){var o=s._currentValue;if(hf!==s)if(s={context:s,memoizedValue:o,next:null},Oo===null){if(Au===null)throw Error(t(308));Oo=s,Au.dependencies={lanes:0,firstContext:s}}else Oo=Oo.next=s;return o}var Rs=null;function mf(s){Rs===null?Rs=[s]:Rs.push(s)}function Vy(s,o,u,m){var C=o.interleaved;return C===null?(u.next=u,mf(o)):(u.next=C.next,C.next=u),o.interleaved=u,ei(s,m)}function ei(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Li=!1;function gf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uy(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ti(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Di(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,lt&2){var C=m.pending;return C===null?o.next=o:(o.next=C.next,C.next=o),m.pending=o,ei(s,u)}return C=m.interleaved,C===null?(o.next=o,mf(m)):(o.next=C.next,C.next=o),m.interleaved=o,ei(s,u)}function ku(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Ii(s,u)}}function By(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var C=null,D=null;if(u=u.firstBaseUpdate,u!==null){do{var q={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};D===null?C=D=q:D=D.next=q,u=u.next}while(u!==null);D===null?C=D=o:D=D.next=o}else C=D=o;u={baseState:m.baseState,firstBaseUpdate:C,lastBaseUpdate:D,shared:m.shared,effects:m.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Ru(s,o,u,m){var C=s.updateQueue;Li=!1;var D=C.firstBaseUpdate,q=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var te=J,pe=te.next;te.next=null,q===null?D=pe:q.next=pe,q=te;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,J=Se.lastBaseUpdate,J!==q&&(J===null?Se.firstBaseUpdate=pe:J.next=pe,Se.lastBaseUpdate=te))}if(D!==null){var Ie=C.baseState;q=0,Se=pe=te=null,J=D;do{var Te=J.lane,Pe=J.eventTime;if((m&Te)===Te){Se!==null&&(Se=Se.next={eventTime:Pe,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Me=s,je=J;switch(Te=o,Pe=u,je.tag){case 1:if(Me=je.payload,typeof Me=="function"){Ie=Me.call(Pe,Ie,Te);break e}Ie=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=je.payload,Te=typeof Me=="function"?Me.call(Pe,Ie,Te):Me,Te==null)break e;Ie=W({},Ie,Te);break e;case 2:Li=!0}}J.callback!==null&&J.lane!==0&&(s.flags|=64,Te=C.effects,Te===null?C.effects=[J]:Te.push(J))}else Pe={eventTime:Pe,lane:Te,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Se===null?(pe=Se=Pe,te=Ie):Se=Se.next=Pe,q|=Te;if(J=J.next,J===null){if(J=C.shared.pending,J===null)break;Te=J,J=Te.next,Te.next=null,C.lastBaseUpdate=Te,C.shared.pending=null}}while(!0);if(Se===null&&(te=Ie),C.baseState=te,C.firstBaseUpdate=pe,C.lastBaseUpdate=Se,o=C.shared.interleaved,o!==null){C=o;do q|=C.lane,C=C.next;while(C!==o)}else D===null&&(C.shared.lanes=0);xs|=q,s.lanes=q,s.memoizedState=Ie}}function qy(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var m=s[o],C=m.callback;if(C!==null){if(m.callback=null,m=u,typeof C!="function")throw Error(t(191,C));C.call(m)}}}var Ua={},kr=Oi(Ua),Ba=Oi(Ua),qa=Oi(Ua);function Ps(s){if(s===Ua)throw Error(t(174));return s}function yf(s,o){switch(gt(qa,o),gt(Ba,s),gt(kr,Ua),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Xe(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Xe(o,s)}_t(kr),gt(kr,o)}function No(){_t(kr),_t(Ba),_t(qa)}function zy(s){Ps(qa.current);var o=Ps(kr.current),u=Xe(o,s.type);o!==u&&(gt(Ba,s),gt(kr,u))}function vf(s){Ba.current===s&&(_t(kr),_t(Ba))}var It=Oi(0);function Pu(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _f=[];function wf(){for(var s=0;s<_f.length;s++)_f[s]._workInProgressVersionPrimary=null;_f.length=0}var Ou=b.ReactCurrentDispatcher,Ef=b.ReactCurrentBatchConfig,Os=0,Ct=null,Ut=null,$t=null,xu=!1,za=!1,Ha=0,NI=0;function rn(){throw Error(t(321))}function Tf(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!lr(s[u],o[u]))return!1;return!0}function Sf(s,o,u,m,C,D){if(Os=D,Ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ou.current=s===null||s.memoizedState===null?FI:jI,s=u(m,C),za){D=0;do{if(za=!1,Ha=0,25<=D)throw Error(t(301));D+=1,$t=Ut=null,o.updateQueue=null,Ou.current=VI,s=u(m,C)}while(za)}if(Ou.current=Du,o=Ut!==null&&Ut.next!==null,Os=0,$t=Ut=Ct=null,xu=!1,o)throw Error(t(300));return s}function If(){var s=Ha!==0;return Ha=0,s}function Rr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ct.memoizedState=$t=s:$t=$t.next=s,$t}function Wn(){if(Ut===null){var s=Ct.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var o=$t===null?Ct.memoizedState:$t.next;if(o!==null)$t=o,Ut=s;else{if(s===null)throw Error(t(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},$t===null?Ct.memoizedState=$t=s:$t=$t.next=s}return $t}function $a(s,o){return typeof o=="function"?o(s):o}function Cf(s){var o=Wn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=Ut,C=m.baseQueue,D=u.pending;if(D!==null){if(C!==null){var q=C.next;C.next=D.next,D.next=q}m.baseQueue=C=D,u.pending=null}if(C!==null){D=C.next,m=m.baseState;var J=q=null,te=null,pe=D;do{var Se=pe.lane;if((Os&Se)===Se)te!==null&&(te=te.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),m=pe.hasEagerState?pe.eagerState:s(m,pe.action);else{var Ie={lane:Se,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};te===null?(J=te=Ie,q=m):te=te.next=Ie,Ct.lanes|=Se,xs|=Se}pe=pe.next}while(pe!==null&&pe!==D);te===null?q=m:te.next=J,lr(m,o.memoizedState)||(In=!0),o.memoizedState=m,o.baseState=q,o.baseQueue=te,u.lastRenderedState=m}if(s=u.interleaved,s!==null){C=s;do D=C.lane,Ct.lanes|=D,xs|=D,C=C.next;while(C!==s)}else C===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function bf(s){var o=Wn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=u.dispatch,C=u.pending,D=o.memoizedState;if(C!==null){u.pending=null;var q=C=C.next;do D=s(D,q.action),q=q.next;while(q!==C);lr(D,o.memoizedState)||(In=!0),o.memoizedState=D,o.baseQueue===null&&(o.baseState=D),u.lastRenderedState=D}return[D,m]}function Hy(){}function $y(s,o){var u=Ct,m=Wn(),C=o(),D=!lr(m.memoizedState,C);if(D&&(m.memoizedState=C,In=!0),m=m.queue,Af(Gy.bind(null,u,m,s),[s]),m.getSnapshot!==o||D||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,Wa(9,Ky.bind(null,u,m,C,o),void 0,null),Wt===null)throw Error(t(349));Os&30||Wy(u,o,C)}return C}function Wy(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Ct.updateQueue,o===null?(o={lastEffect:null,stores:null},Ct.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Ky(s,o,u,m){o.value=u,o.getSnapshot=m,Qy(o)&&Jy(s)}function Gy(s,o,u){return u(function(){Qy(o)&&Jy(s)})}function Qy(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!lr(s,u)}catch{return!0}}function Jy(s){var o=ei(s,1);o!==null&&dr(o,s,1,-1)}function Yy(s){var o=Rr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:s},o.queue=s,s=s.dispatch=MI.bind(null,Ct,s),[o.memoizedState,s]}function Wa(s,o,u,m){return s={tag:s,create:o,destroy:u,deps:m,next:null},o=Ct.updateQueue,o===null?(o={lastEffect:null,stores:null},Ct.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s)),s}function Xy(){return Wn().memoizedState}function Nu(s,o,u,m){var C=Rr();Ct.flags|=s,C.memoizedState=Wa(1|o,u,void 0,m===void 0?null:m)}function Lu(s,o,u,m){var C=Wn();m=m===void 0?null:m;var D=void 0;if(Ut!==null){var q=Ut.memoizedState;if(D=q.destroy,m!==null&&Tf(m,q.deps)){C.memoizedState=Wa(o,u,D,m);return}}Ct.flags|=s,C.memoizedState=Wa(1|o,u,D,m)}function Zy(s,o){return Nu(8390656,8,s,o)}function Af(s,o){return Lu(2048,8,s,o)}function ev(s,o){return Lu(4,2,s,o)}function tv(s,o){return Lu(4,4,s,o)}function nv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function rv(s,o,u){return u=u!=null?u.concat([s]):null,Lu(4,4,nv.bind(null,o,s),u)}function kf(){}function iv(s,o){var u=Wn();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&Tf(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function sv(s,o){var u=Wn();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&Tf(o,m[1])?m[0]:(s=s(),u.memoizedState=[s,o],s)}function ov(s,o,u){return Os&21?(lr(u,o)||(u=ws(),Ct.lanes|=u,xs|=u,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,In=!0),s.memoizedState=u)}function LI(s,o){var u=it;it=u!==0&&4>u?u:4,s(!0);var m=Ef.transition;Ef.transition={};try{s(!1),o()}finally{it=u,Ef.transition=m}}function av(){return Wn().memoizedState}function DI(s,o,u){var m=Vi(s);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},lv(s))uv(o,u);else if(u=Vy(s,o,u,m),u!==null){var C=mn();dr(u,s,m,C),cv(u,o,m)}}function MI(s,o,u){var m=Vi(s),C={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(lv(s))uv(o,C);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=o.lastRenderedReducer,D!==null))try{var q=o.lastRenderedState,J=D(q,u);if(C.hasEagerState=!0,C.eagerState=J,lr(J,q)){var te=o.interleaved;te===null?(C.next=C,mf(o)):(C.next=te.next,te.next=C),o.interleaved=C;return}}catch{}finally{}u=Vy(s,o,C,m),u!==null&&(C=mn(),dr(u,s,m,C),cv(u,o,m))}}function lv(s){var o=s.alternate;return s===Ct||o!==null&&o===Ct}function uv(s,o){za=xu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function cv(s,o,u){if(u&4194240){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Ii(s,u)}}var Du={readContext:$n,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},FI={readContext:$n,useCallback:function(s,o){return Rr().memoizedState=[s,o===void 0?null:o],s},useContext:$n,useEffect:Zy,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Nu(4194308,4,nv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Nu(4194308,4,s,o)},useInsertionEffect:function(s,o){return Nu(4,2,s,o)},useMemo:function(s,o){var u=Rr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var m=Rr();return o=u!==void 0?u(o):o,m.memoizedState=m.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},m.queue=s,s=s.dispatch=DI.bind(null,Ct,s),[m.memoizedState,s]},useRef:function(s){var o=Rr();return s={current:s},o.memoizedState=s},useState:Yy,useDebugValue:kf,useDeferredValue:function(s){return Rr().memoizedState=s},useTransition:function(){var s=Yy(!1),o=s[0];return s=LI.bind(null,s[1]),Rr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var m=Ct,C=Rr();if(Tt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Wt===null)throw Error(t(349));Os&30||Wy(m,o,u)}C.memoizedState=u;var D={value:u,getSnapshot:o};return C.queue=D,Zy(Gy.bind(null,m,D,s),[s]),m.flags|=2048,Wa(9,Ky.bind(null,m,D,u,o),void 0,null),u},useId:function(){var s=Rr(),o=Wt.identifierPrefix;if(Tt){var u=Zr,m=Xr;u=(m&~(1<<32-fn(m)-1)).toString(32)+u,o=":"+o+"R"+u,u=Ha++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=NI++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},jI={readContext:$n,useCallback:iv,useContext:$n,useEffect:Af,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:Cf,useRef:Xy,useState:function(){return Cf($a)},useDebugValue:kf,useDeferredValue:function(s){var o=Wn();return ov(o,Ut.memoizedState,s)},useTransition:function(){var s=Cf($a)[0],o=Wn().memoizedState;return[s,o]},useMutableSource:Hy,useSyncExternalStore:$y,useId:av,unstable_isNewReconciler:!1},VI={readContext:$n,useCallback:iv,useContext:$n,useEffect:Af,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:bf,useRef:Xy,useState:function(){return bf($a)},useDebugValue:kf,useDeferredValue:function(s){var o=Wn();return Ut===null?o.memoizedState=s:ov(o,Ut.memoizedState,s)},useTransition:function(){var s=bf($a)[0],o=Wn().memoizedState;return[s,o]},useMutableSource:Hy,useSyncExternalStore:$y,useId:av,unstable_isNewReconciler:!1};function cr(s,o){if(s&&s.defaultProps){o=W({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Rf(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:W({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Mu={isMounted:function(s){return(s=s._reactInternals)?tr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var m=mn(),C=Vi(s),D=ti(m,C);D.payload=o,u!=null&&(D.callback=u),o=Di(s,D,C),o!==null&&(dr(o,s,C,m),ku(o,s,C))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=mn(),C=Vi(s),D=ti(m,C);D.tag=1,D.payload=o,u!=null&&(D.callback=u),o=Di(s,D,C),o!==null&&(dr(o,s,C,m),ku(o,s,C))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=mn(),m=Vi(s),C=ti(u,m);C.tag=2,o!=null&&(C.callback=o),o=Di(s,C,m),o!==null&&(dr(o,s,m,u),ku(o,s,m))}};function hv(s,o,u,m,C,D,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,D,q):o.prototype&&o.prototype.isPureReactComponent?!xa(u,m)||!xa(C,D):!0}function fv(s,o,u){var m=!1,C=xi,D=o.contextType;return typeof D=="object"&&D!==null?D=$n(D):(C=Sn(o)?bs:nn.current,m=o.contextTypes,D=(m=m!=null)?bo(s,C):xi),o=new o(u,D),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Mu,s.stateNode=o,o._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=C,s.__reactInternalMemoizedMaskedChildContext=D),o}function dv(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&Mu.enqueueReplaceState(o,o.state,null)}function Pf(s,o,u,m){var C=s.stateNode;C.props=u,C.state=s.memoizedState,C.refs={},gf(s);var D=o.contextType;typeof D=="object"&&D!==null?C.context=$n(D):(D=Sn(o)?bs:nn.current,C.context=bo(s,D)),C.state=s.memoizedState,D=o.getDerivedStateFromProps,typeof D=="function"&&(Rf(s,o,D,u),C.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(o=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),o!==C.state&&Mu.enqueueReplaceState(C,C.state,null),Ru(s,u,C,m),C.state=s.memoizedState),typeof C.componentDidMount=="function"&&(s.flags|=4194308)}function Lo(s,o){try{var u="",m=o;do u+=X(m),m=m.return;while(m);var C=u}catch(D){C=`
Error generating stack: `+D.message+`
`+D.stack}return{value:s,source:o,stack:C,digest:null}}function Of(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function xf(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function pv(s,o,u){u=ti(-1,u),u.tag=3,u.payload={element:null};var m=o.value;return u.callback=function(){zu||(zu=!0,Kf=m),xf(s,o)},u}function mv(s,o,u){u=ti(-1,u),u.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var C=o.value;u.payload=function(){return m(C)},u.callback=function(){xf(s,o)}}var D=s.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){xf(s,o),typeof m!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var q=o.stack;this.componentDidCatch(o.value,{componentStack:q!==null?q:""})}),u}function gv(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new UI;var C=new Set;m.set(o,C)}else C=m.get(o),C===void 0&&(C=new Set,m.set(o,C));C.has(u)||(C.add(u),s=eC.bind(null,s,o,u),o.then(s,s))}function yv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function vv(s,o,u,m,C){return s.mode&1?(s.flags|=65536,s.lanes=C,s):(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ti(-1,1),o.tag=2,Di(u,o,1))),u.lanes|=1),s)}var BI=b.ReactCurrentOwner,In=!1;function pn(s,o,u,m){o.child=s===null?jy(o,null,u,m):Po(o,s.child,u,m)}function _v(s,o,u,m,C){u=u.render;var D=o.ref;return xo(o,C),m=Sf(s,o,u,m,D,C),u=If(),s!==null&&!In?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~C,ni(s,o,C)):(Tt&&u&&of(o),o.flags|=1,pn(s,o,m,C),o.child)}function wv(s,o,u,m,C){if(s===null){var D=u.type;return typeof D=="function"&&!ed(D)&&D.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=D,Ev(s,o,D,m,C)):(s=Qu(u.type,null,m,o,o.mode,C),s.ref=o.ref,s.return=o,o.child=s)}if(D=s.child,!(s.lanes&C)){var q=D.memoizedProps;if(u=u.compare,u=u!==null?u:xa,u(q,m)&&s.ref===o.ref)return ni(s,o,C)}return o.flags|=1,s=Bi(D,m),s.ref=o.ref,s.return=o,o.child=s}function Ev(s,o,u,m,C){if(s!==null){var D=s.memoizedProps;if(xa(D,m)&&s.ref===o.ref)if(In=!1,o.pendingProps=m=D,(s.lanes&C)!==0)s.flags&131072&&(In=!0);else return o.lanes=s.lanes,ni(s,o,C)}return Nf(s,o,u,m,C)}function Tv(s,o,u){var m=o.pendingProps,C=m.children,D=s!==null?s.memoizedState:null;if(m.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Mo,Mn),Mn|=u;else{if(!(u&1073741824))return s=D!==null?D.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,gt(Mo,Mn),Mn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=D!==null?D.baseLanes:u,gt(Mo,Mn),Mn|=m}else D!==null?(m=D.baseLanes|u,o.memoizedState=null):m=u,gt(Mo,Mn),Mn|=m;return pn(s,o,C,u),o.child}function Sv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Nf(s,o,u,m,C){var D=Sn(u)?bs:nn.current;return D=bo(o,D),xo(o,C),u=Sf(s,o,u,m,D,C),m=If(),s!==null&&!In?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~C,ni(s,o,C)):(Tt&&m&&of(o),o.flags|=1,pn(s,o,u,C),o.child)}function Iv(s,o,u,m,C){if(Sn(u)){var D=!0;wu(o)}else D=!1;if(xo(o,C),o.stateNode===null)ju(s,o),fv(o,u,m),Pf(o,u,m,C),m=!0;else if(s===null){var q=o.stateNode,J=o.memoizedProps;q.props=J;var te=q.context,pe=u.contextType;typeof pe=="object"&&pe!==null?pe=$n(pe):(pe=Sn(u)?bs:nn.current,pe=bo(o,pe));var Se=u.getDerivedStateFromProps,Ie=typeof Se=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ie||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(J!==m||te!==pe)&&dv(o,q,m,pe),Li=!1;var Te=o.memoizedState;q.state=Te,Ru(o,m,q,C),te=o.memoizedState,J!==m||Te!==te||Tn.current||Li?(typeof Se=="function"&&(Rf(o,u,Se,m),te=o.memoizedState),(J=Li||hv(o,u,J,m,Te,te,pe))?(Ie||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(o.flags|=4194308)):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=te),q.props=m,q.state=te,q.context=pe,m=J):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{q=o.stateNode,Uy(s,o),J=o.memoizedProps,pe=o.type===o.elementType?J:cr(o.type,J),q.props=pe,Ie=o.pendingProps,Te=q.context,te=u.contextType,typeof te=="object"&&te!==null?te=$n(te):(te=Sn(u)?bs:nn.current,te=bo(o,te));var Pe=u.getDerivedStateFromProps;(Se=typeof Pe=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(J!==Ie||Te!==te)&&dv(o,q,m,te),Li=!1,Te=o.memoizedState,q.state=Te,Ru(o,m,q,C);var Me=o.memoizedState;J!==Ie||Te!==Me||Tn.current||Li?(typeof Pe=="function"&&(Rf(o,u,Pe,m),Me=o.memoizedState),(pe=Li||hv(o,u,pe,m,Te,Me,te)||!1)?(Se||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(m,Me,te),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(m,Me,te)),typeof q.componentDidUpdate=="function"&&(o.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof q.componentDidUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Me),q.props=m,q.state=Me,q.context=te,m=pe):(typeof q.componentDidUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),m=!1)}return Lf(s,o,u,m,D,C)}function Lf(s,o,u,m,C,D){Sv(s,o);var q=(o.flags&128)!==0;if(!m&&!q)return C&&Ry(o,u,!1),ni(s,o,D);m=o.stateNode,BI.current=o;var J=q&&typeof u.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,s!==null&&q?(o.child=Po(o,s.child,null,D),o.child=Po(o,null,J,D)):pn(s,o,J,D),o.memoizedState=m.state,C&&Ry(o,u,!0),o.child}function Cv(s){var o=s.stateNode;o.pendingContext?Ay(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Ay(s,o.context,!1),yf(s,o.containerInfo)}function bv(s,o,u,m,C){return Ro(),cf(C),o.flags|=256,pn(s,o,u,m),o.child}var Df={dehydrated:null,treeContext:null,retryLane:0};function Mf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Av(s,o,u){var m=o.pendingProps,C=It.current,D=!1,q=(o.flags&128)!==0,J;if((J=q)||(J=s!==null&&s.memoizedState===null?!1:(C&2)!==0),J?(D=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(C|=1),gt(It,C&1),s===null)return uf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(q=m.children,s=m.fallback,D?(m=o.mode,D=o.child,q={mode:"hidden",children:q},!(m&1)&&D!==null?(D.childLanes=0,D.pendingProps=q):D=Ju(q,m,0,null),s=Ms(s,m,u,null),D.return=o,s.return=o,D.sibling=s,o.child=D,o.child.memoizedState=Mf(u),o.memoizedState=Df,s):Ff(o,q));if(C=s.memoizedState,C!==null&&(J=C.dehydrated,J!==null))return qI(s,o,q,m,J,C,u);if(D){D=m.fallback,q=o.mode,C=s.child,J=C.sibling;var te={mode:"hidden",children:m.children};return!(q&1)&&o.child!==C?(m=o.child,m.childLanes=0,m.pendingProps=te,o.deletions=null):(m=Bi(C,te),m.subtreeFlags=C.subtreeFlags&14680064),J!==null?D=Bi(J,D):(D=Ms(D,q,u,null),D.flags|=2),D.return=o,m.return=o,m.sibling=D,o.child=m,m=D,D=o.child,q=s.child.memoizedState,q=q===null?Mf(u):{baseLanes:q.baseLanes|u,cachePool:null,transitions:q.transitions},D.memoizedState=q,D.childLanes=s.childLanes&~u,o.memoizedState=Df,m}return D=s.child,s=D.sibling,m=Bi(D,{mode:"visible",children:m.children}),!(o.mode&1)&&(m.lanes=u),m.return=o,m.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=m,o.memoizedState=null,m}function Ff(s,o){return o=Ju({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Fu(s,o,u,m){return m!==null&&cf(m),Po(o,s.child,null,u),s=Ff(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function qI(s,o,u,m,C,D,q){if(u)return o.flags&256?(o.flags&=-257,m=Of(Error(t(422))),Fu(s,o,q,m)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(D=m.fallback,C=o.mode,m=Ju({mode:"visible",children:m.children},C,0,null),D=Ms(D,C,q,null),D.flags|=2,m.return=o,D.return=o,m.sibling=D,o.child=m,o.mode&1&&Po(o,s.child,null,q),o.child.memoizedState=Mf(q),o.memoizedState=Df,D);if(!(o.mode&1))return Fu(s,o,q,null);if(C.data==="$!"){if(m=C.nextSibling&&C.nextSibling.dataset,m)var J=m.dgst;return m=J,D=Error(t(419)),m=Of(D,m,void 0),Fu(s,o,q,m)}if(J=(q&s.childLanes)!==0,In||J){if(m=Wt,m!==null){switch(q&-q){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(m.suspendedLanes|q)?0:C,C!==0&&C!==D.retryLane&&(D.retryLane=C,ei(s,C),dr(m,s,C,-1))}return Zf(),m=Of(Error(t(421))),Fu(s,o,q,m)}return C.data==="$?"?(o.flags|=128,o.child=s.child,o=tC.bind(null,s),C._reactRetry=o,null):(s=D.treeContext,Dn=Pi(C.nextSibling),Ln=o,Tt=!0,ur=null,s!==null&&(zn[Hn++]=Xr,zn[Hn++]=Zr,zn[Hn++]=As,Xr=s.id,Zr=s.overflow,As=o),o=Ff(o,m.children),o.flags|=4096,o)}function kv(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),pf(s.return,o,u)}function jf(s,o,u,m,C){var D=s.memoizedState;D===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:C}:(D.isBackwards=o,D.rendering=null,D.renderingStartTime=0,D.last=m,D.tail=u,D.tailMode=C)}function Rv(s,o,u){var m=o.pendingProps,C=m.revealOrder,D=m.tail;if(pn(s,o,m.children,u),m=It.current,m&2)m=m&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&kv(s,u,o);else if(s.tag===19)kv(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(gt(It,m),!(o.mode&1))o.memoizedState=null;else switch(C){case"forwards":for(u=o.child,C=null;u!==null;)s=u.alternate,s!==null&&Pu(s)===null&&(C=u),u=u.sibling;u=C,u===null?(C=o.child,o.child=null):(C=u.sibling,u.sibling=null),jf(o,!1,C,u,D);break;case"backwards":for(u=null,C=o.child,o.child=null;C!==null;){if(s=C.alternate,s!==null&&Pu(s)===null){o.child=C;break}s=C.sibling,C.sibling=u,u=C,C=s}jf(o,!0,u,null,D);break;case"together":jf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ju(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ni(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),xs|=o.lanes,!(u&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=Bi(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Bi(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function zI(s,o,u){switch(o.tag){case 3:Cv(o),Ro();break;case 5:zy(o);break;case 1:Sn(o.type)&&wu(o);break;case 4:yf(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,C=o.memoizedProps.value;gt(bu,m._currentValue),m._currentValue=C;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(gt(It,It.current&1),o.flags|=128,null):u&o.child.childLanes?Av(s,o,u):(gt(It,It.current&1),s=ni(s,o,u),s!==null?s.sibling:null);gt(It,It.current&1);break;case 19:if(m=(u&o.childLanes)!==0,s.flags&128){if(m)return Rv(s,o,u);o.flags|=128}if(C=o.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),gt(It,It.current),m)break;return null;case 22:case 23:return o.lanes=0,Tv(s,o,u)}return ni(s,o,u)}var Pv,Vf,Ov,xv;Pv=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Vf=function(){},Ov=function(s,o,u,m){var C=s.memoizedProps;if(C!==m){s=o.stateNode,Ps(kr.current);var D=null;switch(u){case"input":C=Oe(s,C),m=Oe(s,m),D=[];break;case"select":C=W({},C,{value:void 0}),m=W({},m,{value:void 0}),D=[];break;case"textarea":C=ge(s,C),m=ge(s,m),D=[];break;default:typeof C.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=yu)}da(u,m);var q;u=null;for(pe in C)if(!m.hasOwnProperty(pe)&&C.hasOwnProperty(pe)&&C[pe]!=null)if(pe==="style"){var J=C[pe];for(q in J)J.hasOwnProperty(q)&&(u||(u={}),u[q]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?D||(D=[]):(D=D||[]).push(pe,null));for(pe in m){var te=m[pe];if(J=C!=null?C[pe]:void 0,m.hasOwnProperty(pe)&&te!==J&&(te!=null||J!=null))if(pe==="style")if(J){for(q in J)!J.hasOwnProperty(q)||te&&te.hasOwnProperty(q)||(u||(u={}),u[q]="");for(q in te)te.hasOwnProperty(q)&&J[q]!==te[q]&&(u||(u={}),u[q]=te[q])}else u||(D||(D=[]),D.push(pe,u)),u=te;else pe==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,J=J?J.__html:void 0,te!=null&&J!==te&&(D=D||[]).push(pe,te)):pe==="children"?typeof te!="string"&&typeof te!="number"||(D=D||[]).push(pe,""+te):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(te!=null&&pe==="onScroll"&&vt("scroll",s),D||J===te||(D=[])):(D=D||[]).push(pe,te))}u&&(D=D||[]).push("style",u);var pe=D;(o.updateQueue=pe)&&(o.flags|=4)}},xv=function(s,o,u,m){u!==m&&(o.flags|=4)};function Ka(s,o){if(!Tt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function sn(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var C=s.child;C!==null;)u|=C.lanes|C.childLanes,m|=C.subtreeFlags&14680064,m|=C.flags&14680064,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)u|=C.lanes|C.childLanes,m|=C.subtreeFlags,m|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function HI(s,o,u){var m=o.pendingProps;switch(af(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(o),null;case 1:return Sn(o.type)&&_u(),sn(o),null;case 3:return m=o.stateNode,No(),_t(Tn),_t(nn),wf(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Iu(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,ur!==null&&(Jf(ur),ur=null))),Vf(s,o),sn(o),null;case 5:vf(o);var C=Ps(qa.current);if(u=o.type,s!==null&&o.stateNode!=null)Ov(s,o,u,m,C),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(t(166));return sn(o),null}if(s=Ps(kr.current),Iu(o)){m=o.stateNode,u=o.type;var D=o.memoizedProps;switch(m[Ar]=o,m[Fa]=D,s=(o.mode&1)!==0,u){case"dialog":vt("cancel",m),vt("close",m);break;case"iframe":case"object":case"embed":vt("load",m);break;case"video":case"audio":for(C=0;C<La.length;C++)vt(La[C],m);break;case"source":vt("error",m);break;case"img":case"image":case"link":vt("error",m),vt("load",m);break;case"details":vt("toggle",m);break;case"input":De(m,D),vt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!D.multiple},vt("invalid",m);break;case"textarea":$e(m,D),vt("invalid",m)}da(u,D),C=null;for(var q in D)if(D.hasOwnProperty(q)){var J=D[q];q==="children"?typeof J=="string"?m.textContent!==J&&(D.suppressHydrationWarning!==!0&&gu(m.textContent,J,s),C=["children",J]):typeof J=="number"&&m.textContent!==""+J&&(D.suppressHydrationWarning!==!0&&gu(m.textContent,J,s),C=["children",""+J]):i.hasOwnProperty(q)&&J!=null&&q==="onScroll"&&vt("scroll",m)}switch(u){case"input":ye(m),ue(m,D,!0);break;case"textarea":ye(m),Be(m);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(m.onclick=yu)}m=C,o.updateQueue=m,m!==null&&(o.flags|=4)}else{q=C.nodeType===9?C:C.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=We(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=q.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=q.createElement(u,{is:m.is}):(s=q.createElement(u),u==="select"&&(q=s,m.multiple?q.multiple=!0:m.size&&(q.size=m.size))):s=q.createElementNS(s,u),s[Ar]=o,s[Fa]=m,Pv(s,o,!1,!1),o.stateNode=s;e:{switch(q=pa(u,m),u){case"dialog":vt("cancel",s),vt("close",s),C=m;break;case"iframe":case"object":case"embed":vt("load",s),C=m;break;case"video":case"audio":for(C=0;C<La.length;C++)vt(La[C],s);C=m;break;case"source":vt("error",s),C=m;break;case"img":case"image":case"link":vt("error",s),vt("load",s),C=m;break;case"details":vt("toggle",s),C=m;break;case"input":De(s,m),C=Oe(s,m),vt("invalid",s);break;case"option":C=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},C=W({},m,{value:void 0}),vt("invalid",s);break;case"textarea":$e(s,m),C=ge(s,m),vt("invalid",s);break;default:C=m}da(u,C),J=C;for(D in J)if(J.hasOwnProperty(D)){var te=J[D];D==="style"?_i(s,te):D==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Yn(s,te)):D==="children"?typeof te=="string"?(u!=="textarea"||te!=="")&&ut(s,te):typeof te=="number"&&ut(s,""+te):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?te!=null&&D==="onScroll"&&vt("scroll",s):te!=null&&L(s,D,te,q))}switch(u){case"input":ye(s),ue(s,m,!1);break;case"textarea":ye(s),Be(s);break;case"option":m.value!=null&&s.setAttribute("value",""+ne(m.value));break;case"select":s.multiple=!!m.multiple,D=m.value,D!=null?be(s,!!m.multiple,D,!1):m.defaultValue!=null&&be(s,!!m.multiple,m.defaultValue,!0);break;default:typeof C.onClick=="function"&&(s.onclick=yu)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return sn(o),null;case 6:if(s&&o.stateNode!=null)xv(s,o,s.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(t(166));if(u=Ps(qa.current),Ps(kr.current),Iu(o)){if(m=o.stateNode,u=o.memoizedProps,m[Ar]=o,(D=m.nodeValue!==u)&&(s=Ln,s!==null))switch(s.tag){case 3:gu(m.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&gu(m.nodeValue,u,(s.mode&1)!==0)}D&&(o.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[Ar]=o,o.stateNode=m}return sn(o),null;case 13:if(_t(It),m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Tt&&Dn!==null&&o.mode&1&&!(o.flags&128))Dy(),Ro(),o.flags|=98560,D=!1;else if(D=Iu(o),m!==null&&m.dehydrated!==null){if(s===null){if(!D)throw Error(t(318));if(D=o.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(t(317));D[Ar]=o}else Ro(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;sn(o),D=!1}else ur!==null&&(Jf(ur),ur=null),D=!0;if(!D)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(o.child.flags|=8192,o.mode&1&&(s===null||It.current&1?Bt===0&&(Bt=3):Zf())),o.updateQueue!==null&&(o.flags|=4),sn(o),null);case 4:return No(),Vf(s,o),s===null&&Da(o.stateNode.containerInfo),sn(o),null;case 10:return df(o.type._context),sn(o),null;case 17:return Sn(o.type)&&_u(),sn(o),null;case 19:if(_t(It),D=o.memoizedState,D===null)return sn(o),null;if(m=(o.flags&128)!==0,q=D.rendering,q===null)if(m)Ka(D,!1);else{if(Bt!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(q=Pu(s),q!==null){for(o.flags|=128,Ka(D,!1),m=q.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=u,u=o.child;u!==null;)D=u,s=m,D.flags&=14680066,q=D.alternate,q===null?(D.childLanes=0,D.lanes=s,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=q.childLanes,D.lanes=q.lanes,D.child=q.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=q.memoizedProps,D.memoizedState=q.memoizedState,D.updateQueue=q.updateQueue,D.type=q.type,s=q.dependencies,D.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return gt(It,It.current&1|2),o.child}s=s.sibling}D.tail!==null&&mt()>Fo&&(o.flags|=128,m=!0,Ka(D,!1),o.lanes=4194304)}else{if(!m)if(s=Pu(q),s!==null){if(o.flags|=128,m=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ka(D,!0),D.tail===null&&D.tailMode==="hidden"&&!q.alternate&&!Tt)return sn(o),null}else 2*mt()-D.renderingStartTime>Fo&&u!==1073741824&&(o.flags|=128,m=!0,Ka(D,!1),o.lanes=4194304);D.isBackwards?(q.sibling=o.child,o.child=q):(u=D.last,u!==null?u.sibling=q:o.child=q,D.last=q)}return D.tail!==null?(o=D.tail,D.rendering=o,D.tail=o.sibling,D.renderingStartTime=mt(),o.sibling=null,u=It.current,gt(It,m?u&1|2:u&1),o):(sn(o),null);case 22:case 23:return Xf(),m=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(o.flags|=8192),m&&o.mode&1?Mn&1073741824&&(sn(o),o.subtreeFlags&6&&(o.flags|=8192)):sn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function $I(s,o){switch(af(o),o.tag){case 1:return Sn(o.type)&&_u(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return No(),_t(Tn),_t(nn),wf(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return vf(o),null;case 13:if(_t(It),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Ro()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return _t(It),null;case 4:return No(),null;case 10:return df(o.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var Vu=!1,on=!1,WI=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Do(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){kt(s,o,m)}else u.current=null}function Uf(s,o,u){try{u()}catch(m){kt(s,o,m)}}var Nv=!1;function KI(s,o){if(Yh=Ai,s=hy(),zh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var C=m.anchorOffset,D=m.focusNode;m=m.focusOffset;try{u.nodeType,D.nodeType}catch{u=null;break e}var q=0,J=-1,te=-1,pe=0,Se=0,Ie=s,Te=null;t:for(;;){for(var Pe;Ie!==u||C!==0&&Ie.nodeType!==3||(J=q+C),Ie!==D||m!==0&&Ie.nodeType!==3||(te=q+m),Ie.nodeType===3&&(q+=Ie.nodeValue.length),(Pe=Ie.firstChild)!==null;)Te=Ie,Ie=Pe;for(;;){if(Ie===s)break t;if(Te===u&&++pe===C&&(J=q),Te===D&&++Se===m&&(te=q),(Pe=Ie.nextSibling)!==null)break;Ie=Te,Te=Ie.parentNode}Ie=Pe}u=J===-1||te===-1?null:{start:J,end:te}}else u=null}u=u||{start:0,end:0}}else u=null;for(Xh={focusedElem:s,selectionRange:u},Ai=!1,Le=o;Le!==null;)if(o=Le,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Le=s;else for(;Le!==null;){o=Le;try{var Me=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var je=Me.memoizedProps,xt=Me.memoizedState,le=o.stateNode,oe=le.getSnapshotBeforeUpdate(o.elementType===o.type?je:cr(o.type,je),xt);le.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ce=o.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ce){kt(o,o.return,Ce)}if(s=o.sibling,s!==null){s.return=o.return,Le=s;break}Le=o.return}return Me=Nv,Nv=!1,Me}function Ga(s,o,u){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var C=m=m.next;do{if((C.tag&s)===s){var D=C.destroy;C.destroy=void 0,D!==void 0&&Uf(o,u,D)}C=C.next}while(C!==m)}}function Uu(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var m=u.create;u.destroy=m()}u=u.next}while(u!==o)}}function Bf(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function Lv(s){var o=s.alternate;o!==null&&(s.alternate=null,Lv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Ar],delete o[Fa],delete o[nf],delete o[RI],delete o[PI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Dv(s){return s.tag===5||s.tag===3||s.tag===4}function Mv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Dv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qf(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=yu));else if(m!==4&&(s=s.child,s!==null))for(qf(s,o,u),s=s.sibling;s!==null;)qf(s,o,u),s=s.sibling}function zf(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(zf(s,o,u),s=s.sibling;s!==null;)zf(s,o,u),s=s.sibling}var Yt=null,hr=!1;function Mi(s,o,u){for(u=u.child;u!==null;)Fv(s,o,u),u=u.sibling}function Fv(s,o,u){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(vs,u)}catch{}switch(u.tag){case 5:on||Do(u,o);case 6:var m=Yt,C=hr;Yt=null,Mi(s,o,u),Yt=m,hr=C,Yt!==null&&(hr?(s=Yt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Yt.removeChild(u.stateNode));break;case 18:Yt!==null&&(hr?(s=Yt,u=u.stateNode,s.nodeType===8?tf(s.parentNode,u):s.nodeType===1&&tf(s,u),or(s)):tf(Yt,u.stateNode));break;case 4:m=Yt,C=hr,Yt=u.stateNode.containerInfo,hr=!0,Mi(s,o,u),Yt=m,hr=C;break;case 0:case 11:case 14:case 15:if(!on&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){C=m=m.next;do{var D=C,q=D.destroy;D=D.tag,q!==void 0&&(D&2||D&4)&&Uf(u,o,q),C=C.next}while(C!==m)}Mi(s,o,u);break;case 1:if(!on&&(Do(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(J){kt(u,o,J)}Mi(s,o,u);break;case 21:Mi(s,o,u);break;case 22:u.mode&1?(on=(m=on)||u.memoizedState!==null,Mi(s,o,u),on=m):Mi(s,o,u);break;default:Mi(s,o,u)}}function jv(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new WI),o.forEach(function(m){var C=nC.bind(null,s,m);u.has(m)||(u.add(m),m.then(C,C))})}}function fr(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var C=u[m];try{var D=s,q=o,J=q;e:for(;J!==null;){switch(J.tag){case 5:Yt=J.stateNode,hr=!1;break e;case 3:Yt=J.stateNode.containerInfo,hr=!0;break e;case 4:Yt=J.stateNode.containerInfo,hr=!0;break e}J=J.return}if(Yt===null)throw Error(t(160));Fv(D,q,C),Yt=null,hr=!1;var te=C.alternate;te!==null&&(te.return=null),C.return=null}catch(pe){kt(C,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Vv(o,s),o=o.sibling}function Vv(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(fr(o,s),Pr(s),m&4){try{Ga(3,s,s.return),Uu(3,s)}catch(je){kt(s,s.return,je)}try{Ga(5,s,s.return)}catch(je){kt(s,s.return,je)}}break;case 1:fr(o,s),Pr(s),m&512&&u!==null&&Do(u,u.return);break;case 5:if(fr(o,s),Pr(s),m&512&&u!==null&&Do(u,u.return),s.flags&32){var C=s.stateNode;try{ut(C,"")}catch(je){kt(s,s.return,je)}}if(m&4&&(C=s.stateNode,C!=null)){var D=s.memoizedProps,q=u!==null?u.memoizedProps:D,J=s.type,te=s.updateQueue;if(s.updateQueue=null,te!==null)try{J==="input"&&D.type==="radio"&&D.name!=null&&Ue(C,D),pa(J,q);var pe=pa(J,D);for(q=0;q<te.length;q+=2){var Se=te[q],Ie=te[q+1];Se==="style"?_i(C,Ie):Se==="dangerouslySetInnerHTML"?Yn(C,Ie):Se==="children"?ut(C,Ie):L(C,Se,Ie,pe)}switch(J){case"input":et(C,D);break;case"textarea":Fe(C,D);break;case"select":var Te=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!D.multiple;var Pe=D.value;Pe!=null?be(C,!!D.multiple,Pe,!1):Te!==!!D.multiple&&(D.defaultValue!=null?be(C,!!D.multiple,D.defaultValue,!0):be(C,!!D.multiple,D.multiple?[]:"",!1))}C[Fa]=D}catch(je){kt(s,s.return,je)}}break;case 6:if(fr(o,s),Pr(s),m&4){if(s.stateNode===null)throw Error(t(162));C=s.stateNode,D=s.memoizedProps;try{C.nodeValue=D}catch(je){kt(s,s.return,je)}}break;case 3:if(fr(o,s),Pr(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{or(o.containerInfo)}catch(je){kt(s,s.return,je)}break;case 4:fr(o,s),Pr(s);break;case 13:fr(o,s),Pr(s),C=s.child,C.flags&8192&&(D=C.memoizedState!==null,C.stateNode.isHidden=D,!D||C.alternate!==null&&C.alternate.memoizedState!==null||(Wf=mt())),m&4&&jv(s);break;case 22:if(Se=u!==null&&u.memoizedState!==null,s.mode&1?(on=(pe=on)||Se,fr(o,s),on=pe):fr(o,s),Pr(s),m&8192){if(pe=s.memoizedState!==null,(s.stateNode.isHidden=pe)&&!Se&&s.mode&1)for(Le=s,Se=s.child;Se!==null;){for(Ie=Le=Se;Le!==null;){switch(Te=Le,Pe=Te.child,Te.tag){case 0:case 11:case 14:case 15:Ga(4,Te,Te.return);break;case 1:Do(Te,Te.return);var Me=Te.stateNode;if(typeof Me.componentWillUnmount=="function"){m=Te,u=Te.return;try{o=m,Me.props=o.memoizedProps,Me.state=o.memoizedState,Me.componentWillUnmount()}catch(je){kt(m,u,je)}}break;case 5:Do(Te,Te.return);break;case 22:if(Te.memoizedState!==null){qv(Ie);continue}}Pe!==null?(Pe.return=Te,Le=Pe):qv(Ie)}Se=Se.sibling}e:for(Se=null,Ie=s;;){if(Ie.tag===5){if(Se===null){Se=Ie;try{C=Ie.stateNode,pe?(D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(J=Ie.stateNode,te=Ie.memoizedProps.style,q=te!=null&&te.hasOwnProperty("display")?te.display:null,J.style.display=Xn("display",q))}catch(je){kt(s,s.return,je)}}}else if(Ie.tag===6){if(Se===null)try{Ie.stateNode.nodeValue=pe?"":Ie.memoizedProps}catch(je){kt(s,s.return,je)}}else if((Ie.tag!==22&&Ie.tag!==23||Ie.memoizedState===null||Ie===s)&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===s)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===s)break e;Se===Ie&&(Se=null),Ie=Ie.return}Se===Ie&&(Se=null),Ie.sibling.return=Ie.return,Ie=Ie.sibling}}break;case 19:fr(o,s),Pr(s),m&4&&jv(s);break;case 21:break;default:fr(o,s),Pr(s)}}function Pr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(Dv(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var C=m.stateNode;m.flags&32&&(ut(C,""),m.flags&=-33);var D=Mv(s);zf(s,D,C);break;case 3:case 4:var q=m.stateNode.containerInfo,J=Mv(s);qf(s,J,q);break;default:throw Error(t(161))}}catch(te){kt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function GI(s,o,u){Le=s,Uv(s)}function Uv(s,o,u){for(var m=(s.mode&1)!==0;Le!==null;){var C=Le,D=C.child;if(C.tag===22&&m){var q=C.memoizedState!==null||Vu;if(!q){var J=C.alternate,te=J!==null&&J.memoizedState!==null||on;J=Vu;var pe=on;if(Vu=q,(on=te)&&!pe)for(Le=C;Le!==null;)q=Le,te=q.child,q.tag===22&&q.memoizedState!==null?zv(C):te!==null?(te.return=q,Le=te):zv(C);for(;D!==null;)Le=D,Uv(D),D=D.sibling;Le=C,Vu=J,on=pe}Bv(s)}else C.subtreeFlags&8772&&D!==null?(D.return=C,Le=D):Bv(s)}}function Bv(s){for(;Le!==null;){var o=Le;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:on||Uu(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!on)if(u===null)m.componentDidMount();else{var C=o.elementType===o.type?u.memoizedProps:cr(o.type,u.memoizedProps);m.componentDidUpdate(C,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var D=o.updateQueue;D!==null&&qy(o,D,m);break;case 3:var q=o.updateQueue;if(q!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}qy(o,q,u)}break;case 5:var J=o.stateNode;if(u===null&&o.flags&4){u=J;var te=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&u.focus();break;case"img":te.src&&(u.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Se=pe.memoizedState;if(Se!==null){var Ie=Se.dehydrated;Ie!==null&&or(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}on||o.flags&512&&Bf(o)}catch(Te){kt(o,o.return,Te)}}if(o===s){Le=null;break}if(u=o.sibling,u!==null){u.return=o.return,Le=u;break}Le=o.return}}function qv(s){for(;Le!==null;){var o=Le;if(o===s){Le=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Le=u;break}Le=o.return}}function zv(s){for(;Le!==null;){var o=Le;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Uu(4,o)}catch(te){kt(o,u,te)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var C=o.return;try{m.componentDidMount()}catch(te){kt(o,C,te)}}var D=o.return;try{Bf(o)}catch(te){kt(o,D,te)}break;case 5:var q=o.return;try{Bf(o)}catch(te){kt(o,q,te)}}}catch(te){kt(o,o.return,te)}if(o===s){Le=null;break}var J=o.sibling;if(J!==null){J.return=o.return,Le=J;break}Le=o.return}}var QI=Math.ceil,Bu=b.ReactCurrentDispatcher,Hf=b.ReactCurrentOwner,Kn=b.ReactCurrentBatchConfig,lt=0,Wt=null,Mt=null,Xt=0,Mn=0,Mo=Oi(0),Bt=0,Qa=null,xs=0,qu=0,$f=0,Ja=null,Cn=null,Wf=0,Fo=1/0,ri=null,zu=!1,Kf=null,Fi=null,Hu=!1,ji=null,$u=0,Ya=0,Gf=null,Wu=-1,Ku=0;function mn(){return lt&6?mt():Wu!==-1?Wu:Wu=mt()}function Vi(s){return s.mode&1?lt&2&&Xt!==0?Xt&-Xt:xI.transition!==null?(Ku===0&&(Ku=ws()),Ku):(s=it,s!==0||(s=window.event,s=s===void 0?16:Ca(s.type)),s):1}function dr(s,o,u,m){if(50<Ya)throw Ya=0,Gf=null,Error(t(185));Si(s,u,m),(!(lt&2)||s!==Wt)&&(s===Wt&&(!(lt&2)&&(qu|=u),Bt===4&&Ui(s,Xt)),bn(s,m),u===1&&lt===0&&!(o.mode&1)&&(Fo=mt()+500,Eu&&Ni()))}function bn(s,o){var u=s.callbackNode;$r(s,o);var m=_s(s,s===Wt?Xt:0);if(m===0)u!==null&&wa(u),s.callbackNode=null,s.callbackPriority=0;else if(o=m&-m,s.callbackPriority!==o){if(u!=null&&wa(u),o===1)s.tag===0?OI($v.bind(null,s)):Py($v.bind(null,s)),AI(function(){!(lt&6)&&Ni()}),u=null;else{switch(Ci(m)){case 1:u=ys;break;case 4:u=wi;break;case 16:u=Un;break;case 536870912:u=Kl;break;default:u=Un}u=Zv(u,Hv.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function Hv(s,o){if(Wu=-1,Ku=0,lt&6)throw Error(t(327));var u=s.callbackNode;if(jo()&&s.callbackNode!==u)return null;var m=_s(s,s===Wt?Xt:0);if(m===0)return null;if(m&30||m&s.expiredLanes||o)o=Gu(s,m);else{o=m;var C=lt;lt|=2;var D=Kv();(Wt!==s||Xt!==o)&&(ri=null,Fo=mt()+500,Ls(s,o));do try{XI();break}catch(J){Wv(s,J)}while(!0);ff(),Bu.current=D,lt=C,Mt!==null?o=0:(Wt=null,Xt=0,o=Bt)}if(o!==0){if(o===2&&(C=On(s),C!==0&&(m=C,o=Qf(s,C))),o===1)throw u=Qa,Ls(s,0),Ui(s,m),bn(s,mt()),u;if(o===6)Ui(s,m);else{if(C=s.current.alternate,!(m&30)&&!JI(C)&&(o=Gu(s,m),o===2&&(D=On(s),D!==0&&(m=D,o=Qf(s,D))),o===1))throw u=Qa,Ls(s,0),Ui(s,m),bn(s,mt()),u;switch(s.finishedWork=C,s.finishedLanes=m,o){case 0:case 1:throw Error(t(345));case 2:Ds(s,Cn,ri);break;case 3:if(Ui(s,m),(m&130023424)===m&&(o=Wf+500-mt(),10<o)){if(_s(s,0)!==0)break;if(C=s.suspendedLanes,(C&m)!==m){mn(),s.pingedLanes|=s.suspendedLanes&C;break}s.timeoutHandle=ef(Ds.bind(null,s,Cn,ri),o);break}Ds(s,Cn,ri);break;case 4:if(Ui(s,m),(m&4194240)===m)break;for(o=s.eventTimes,C=-1;0<m;){var q=31-fn(m);D=1<<q,q=o[q],q>C&&(C=q),m&=~D}if(m=C,m=mt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*QI(m/1960))-m,10<m){s.timeoutHandle=ef(Ds.bind(null,s,Cn,ri),m);break}Ds(s,Cn,ri);break;case 5:Ds(s,Cn,ri);break;default:throw Error(t(329))}}}return bn(s,mt()),s.callbackNode===u?Hv.bind(null,s):null}function Qf(s,o){var u=Ja;return s.current.memoizedState.isDehydrated&&(Ls(s,o).flags|=256),s=Gu(s,o),s!==2&&(o=Cn,Cn=u,o!==null&&Jf(o)),s}function Jf(s){Cn===null?Cn=s:Cn.push.apply(Cn,s)}function JI(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var C=u[m],D=C.getSnapshot;C=C.value;try{if(!lr(D(),C))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ui(s,o){for(o&=~$f,o&=~qu,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-fn(o),m=1<<u;s[u]=-1,o&=~m}}function $v(s){if(lt&6)throw Error(t(327));jo();var o=_s(s,0);if(!(o&1))return bn(s,mt()),null;var u=Gu(s,o);if(s.tag!==0&&u===2){var m=On(s);m!==0&&(o=m,u=Qf(s,m))}if(u===1)throw u=Qa,Ls(s,0),Ui(s,o),bn(s,mt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Ds(s,Cn,ri),bn(s,mt()),null}function Yf(s,o){var u=lt;lt|=1;try{return s(o)}finally{lt=u,lt===0&&(Fo=mt()+500,Eu&&Ni())}}function Ns(s){ji!==null&&ji.tag===0&&!(lt&6)&&jo();var o=lt;lt|=1;var u=Kn.transition,m=it;try{if(Kn.transition=null,it=1,s)return s()}finally{it=m,Kn.transition=u,lt=o,!(lt&6)&&Ni()}}function Xf(){Mn=Mo.current,_t(Mo)}function Ls(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,bI(u)),Mt!==null)for(u=Mt.return;u!==null;){var m=u;switch(af(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&_u();break;case 3:No(),_t(Tn),_t(nn),wf();break;case 5:vf(m);break;case 4:No();break;case 13:_t(It);break;case 19:_t(It);break;case 10:df(m.type._context);break;case 22:case 23:Xf()}u=u.return}if(Wt=s,Mt=s=Bi(s.current,null),Xt=Mn=o,Bt=0,Qa=null,$f=qu=xs=0,Cn=Ja=null,Rs!==null){for(o=0;o<Rs.length;o++)if(u=Rs[o],m=u.interleaved,m!==null){u.interleaved=null;var C=m.next,D=u.pending;if(D!==null){var q=D.next;D.next=C,m.next=q}u.pending=m}Rs=null}return s}function Wv(s,o){do{var u=Mt;try{if(ff(),Ou.current=Du,xu){for(var m=Ct.memoizedState;m!==null;){var C=m.queue;C!==null&&(C.pending=null),m=m.next}xu=!1}if(Os=0,$t=Ut=Ct=null,za=!1,Ha=0,Hf.current=null,u===null||u.return===null){Bt=1,Qa=o,Mt=null;break}e:{var D=s,q=u.return,J=u,te=o;if(o=Xt,J.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var pe=te,Se=J,Ie=Se.tag;if(!(Se.mode&1)&&(Ie===0||Ie===11||Ie===15)){var Te=Se.alternate;Te?(Se.updateQueue=Te.updateQueue,Se.memoizedState=Te.memoizedState,Se.lanes=Te.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Pe=yv(q);if(Pe!==null){Pe.flags&=-257,vv(Pe,q,J,D,o),Pe.mode&1&&gv(D,pe,o),o=Pe,te=pe;var Me=o.updateQueue;if(Me===null){var je=new Set;je.add(te),o.updateQueue=je}else Me.add(te);break e}else{if(!(o&1)){gv(D,pe,o),Zf();break e}te=Error(t(426))}}else if(Tt&&J.mode&1){var xt=yv(q);if(xt!==null){!(xt.flags&65536)&&(xt.flags|=256),vv(xt,q,J,D,o),cf(Lo(te,J));break e}}D=te=Lo(te,J),Bt!==4&&(Bt=2),Ja===null?Ja=[D]:Ja.push(D),D=q;do{switch(D.tag){case 3:D.flags|=65536,o&=-o,D.lanes|=o;var le=pv(D,te,o);By(D,le);break e;case 1:J=te;var oe=D.type,ce=D.stateNode;if(!(D.flags&128)&&(typeof oe.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Fi===null||!Fi.has(ce)))){D.flags|=65536,o&=-o,D.lanes|=o;var Ce=mv(D,J,o);By(D,Ce);break e}}D=D.return}while(D!==null)}Qv(u)}catch(Ve){o=Ve,Mt===u&&u!==null&&(Mt=u=u.return);continue}break}while(!0)}function Kv(){var s=Bu.current;return Bu.current=Du,s===null?Du:s}function Zf(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Wt===null||!(xs&268435455)&&!(qu&268435455)||Ui(Wt,Xt)}function Gu(s,o){var u=lt;lt|=2;var m=Kv();(Wt!==s||Xt!==o)&&(ri=null,Ls(s,o));do try{YI();break}catch(C){Wv(s,C)}while(!0);if(ff(),lt=u,Bu.current=m,Mt!==null)throw Error(t(261));return Wt=null,Xt=0,Bt}function YI(){for(;Mt!==null;)Gv(Mt)}function XI(){for(;Mt!==null&&!$l();)Gv(Mt)}function Gv(s){var o=Xv(s.alternate,s,Mn);s.memoizedProps=s.pendingProps,o===null?Qv(s):Mt=o,Hf.current=null}function Qv(s){var o=s;do{var u=o.alternate;if(s=o.return,o.flags&32768){if(u=$I(u,o),u!==null){u.flags&=32767,Mt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Bt=6,Mt=null;return}}else if(u=HI(u,o,Mn),u!==null){Mt=u;return}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=s}while(o!==null);Bt===0&&(Bt=5)}function Ds(s,o,u){var m=it,C=Kn.transition;try{Kn.transition=null,it=1,ZI(s,o,u,m)}finally{Kn.transition=C,it=m}return null}function ZI(s,o,u,m){do jo();while(ji!==null);if(lt&6)throw Error(t(327));u=s.finishedWork;var C=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var D=u.lanes|u.childLanes;if(pt(s,D),s===Wt&&(Mt=Wt=null,Xt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Hu||(Hu=!0,Zv(Un,function(){return jo(),null})),D=(u.flags&15990)!==0,u.subtreeFlags&15990||D){D=Kn.transition,Kn.transition=null;var q=it;it=1;var J=lt;lt|=4,Hf.current=null,KI(s,u),Vv(u,s),_I(Xh),Ai=!!Yh,Xh=Yh=null,s.current=u,GI(u),Dh(),lt=J,it=q,Kn.transition=D}else s.current=u;if(Hu&&(Hu=!1,ji=s,$u=C),D=s.pendingLanes,D===0&&(Fi=null),Gl(u.stateNode),bn(s,mt()),o!==null)for(m=s.onRecoverableError,u=0;u<o.length;u++)C=o[u],m(C.value,{componentStack:C.stack,digest:C.digest});if(zu)throw zu=!1,s=Kf,Kf=null,s;return $u&1&&s.tag!==0&&jo(),D=s.pendingLanes,D&1?s===Gf?Ya++:(Ya=0,Gf=s):Ya=0,Ni(),null}function jo(){if(ji!==null){var s=Ci($u),o=Kn.transition,u=it;try{if(Kn.transition=null,it=16>s?16:s,ji===null)var m=!1;else{if(s=ji,ji=null,$u=0,lt&6)throw Error(t(331));var C=lt;for(lt|=4,Le=s.current;Le!==null;){var D=Le,q=D.child;if(Le.flags&16){var J=D.deletions;if(J!==null){for(var te=0;te<J.length;te++){var pe=J[te];for(Le=pe;Le!==null;){var Se=Le;switch(Se.tag){case 0:case 11:case 15:Ga(8,Se,D)}var Ie=Se.child;if(Ie!==null)Ie.return=Se,Le=Ie;else for(;Le!==null;){Se=Le;var Te=Se.sibling,Pe=Se.return;if(Lv(Se),Se===pe){Le=null;break}if(Te!==null){Te.return=Pe,Le=Te;break}Le=Pe}}}var Me=D.alternate;if(Me!==null){var je=Me.child;if(je!==null){Me.child=null;do{var xt=je.sibling;je.sibling=null,je=xt}while(je!==null)}}Le=D}}if(D.subtreeFlags&2064&&q!==null)q.return=D,Le=q;else e:for(;Le!==null;){if(D=Le,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Ga(9,D,D.return)}var le=D.sibling;if(le!==null){le.return=D.return,Le=le;break e}Le=D.return}}var oe=s.current;for(Le=oe;Le!==null;){q=Le;var ce=q.child;if(q.subtreeFlags&2064&&ce!==null)ce.return=q,Le=ce;else e:for(q=oe;Le!==null;){if(J=Le,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Uu(9,J)}}catch(Ve){kt(J,J.return,Ve)}if(J===q){Le=null;break e}var Ce=J.sibling;if(Ce!==null){Ce.return=J.return,Le=Ce;break e}Le=J.return}}if(lt=C,Ni(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(vs,s)}catch{}m=!0}return m}finally{it=u,Kn.transition=o}}return!1}function Jv(s,o,u){o=Lo(u,o),o=pv(s,o,1),s=Di(s,o,1),o=mn(),s!==null&&(Si(s,1,o),bn(s,o))}function kt(s,o,u){if(s.tag===3)Jv(s,s,u);else for(;o!==null;){if(o.tag===3){Jv(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Fi===null||!Fi.has(m))){s=Lo(u,s),s=mv(o,s,1),o=Di(o,s,1),s=mn(),o!==null&&(Si(o,1,s),bn(o,s));break}}o=o.return}}function eC(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),o=mn(),s.pingedLanes|=s.suspendedLanes&u,Wt===s&&(Xt&u)===u&&(Bt===4||Bt===3&&(Xt&130023424)===Xt&&500>mt()-Wf?Ls(s,0):$f|=u),bn(s,o)}function Yv(s,o){o===0&&(s.mode&1?(o=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):o=1);var u=mn();s=ei(s,o),s!==null&&(Si(s,o,u),bn(s,u))}function tC(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Yv(s,u)}function nC(s,o){var u=0;switch(s.tag){case 13:var m=s.stateNode,C=s.memoizedState;C!==null&&(u=C.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(o),Yv(s,u)}var Xv;Xv=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Tn.current)In=!0;else{if(!(s.lanes&u)&&!(o.flags&128))return In=!1,zI(s,o,u);In=!!(s.flags&131072)}else In=!1,Tt&&o.flags&1048576&&Oy(o,Su,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;ju(s,o),s=o.pendingProps;var C=bo(o,nn.current);xo(o,u),C=Sf(null,o,m,s,C,u);var D=If();return o.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Sn(m)?(D=!0,wu(o)):D=!1,o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,gf(o),C.updater=Mu,o.stateNode=C,C._reactInternals=o,Pf(o,m,s,u),o=Lf(null,o,m,!0,D,u)):(o.tag=0,Tt&&D&&of(o),pn(null,o,C,u),o=o.child),o;case 16:m=o.elementType;e:{switch(ju(s,o),s=o.pendingProps,C=m._init,m=C(m._payload),o.type=m,C=o.tag=iC(m),s=cr(m,s),C){case 0:o=Nf(null,o,m,s,u);break e;case 1:o=Iv(null,o,m,s,u);break e;case 11:o=_v(null,o,m,s,u);break e;case 14:o=wv(null,o,m,cr(m.type,s),u);break e}throw Error(t(306,m,""))}return o;case 0:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:cr(m,C),Nf(s,o,m,C,u);case 1:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:cr(m,C),Iv(s,o,m,C,u);case 3:e:{if(Cv(o),s===null)throw Error(t(387));m=o.pendingProps,D=o.memoizedState,C=D.element,Uy(s,o),Ru(o,m,null,u);var q=o.memoizedState;if(m=q.element,D.isDehydrated)if(D={element:m,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},o.updateQueue.baseState=D,o.memoizedState=D,o.flags&256){C=Lo(Error(t(423)),o),o=bv(s,o,m,u,C);break e}else if(m!==C){C=Lo(Error(t(424)),o),o=bv(s,o,m,u,C);break e}else for(Dn=Pi(o.stateNode.containerInfo.firstChild),Ln=o,Tt=!0,ur=null,u=jy(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ro(),m===C){o=ni(s,o,u);break e}pn(s,o,m,u)}o=o.child}return o;case 5:return zy(o),s===null&&uf(o),m=o.type,C=o.pendingProps,D=s!==null?s.memoizedProps:null,q=C.children,Zh(m,C)?q=null:D!==null&&Zh(m,D)&&(o.flags|=32),Sv(s,o),pn(s,o,q,u),o.child;case 6:return s===null&&uf(o),null;case 13:return Av(s,o,u);case 4:return yf(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=Po(o,null,m,u):pn(s,o,m,u),o.child;case 11:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:cr(m,C),_v(s,o,m,C,u);case 7:return pn(s,o,o.pendingProps,u),o.child;case 8:return pn(s,o,o.pendingProps.children,u),o.child;case 12:return pn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(m=o.type._context,C=o.pendingProps,D=o.memoizedProps,q=C.value,gt(bu,m._currentValue),m._currentValue=q,D!==null)if(lr(D.value,q)){if(D.children===C.children&&!Tn.current){o=ni(s,o,u);break e}}else for(D=o.child,D!==null&&(D.return=o);D!==null;){var J=D.dependencies;if(J!==null){q=D.child;for(var te=J.firstContext;te!==null;){if(te.context===m){if(D.tag===1){te=ti(-1,u&-u),te.tag=2;var pe=D.updateQueue;if(pe!==null){pe=pe.shared;var Se=pe.pending;Se===null?te.next=te:(te.next=Se.next,Se.next=te),pe.pending=te}}D.lanes|=u,te=D.alternate,te!==null&&(te.lanes|=u),pf(D.return,u,o),J.lanes|=u;break}te=te.next}}else if(D.tag===10)q=D.type===o.type?null:D.child;else if(D.tag===18){if(q=D.return,q===null)throw Error(t(341));q.lanes|=u,J=q.alternate,J!==null&&(J.lanes|=u),pf(q,u,o),q=D.sibling}else q=D.child;if(q!==null)q.return=D;else for(q=D;q!==null;){if(q===o){q=null;break}if(D=q.sibling,D!==null){D.return=q.return,q=D;break}q=q.return}D=q}pn(s,o,C.children,u),o=o.child}return o;case 9:return C=o.type,m=o.pendingProps.children,xo(o,u),C=$n(C),m=m(C),o.flags|=1,pn(s,o,m,u),o.child;case 14:return m=o.type,C=cr(m,o.pendingProps),C=cr(m.type,C),wv(s,o,m,C,u);case 15:return Ev(s,o,o.type,o.pendingProps,u);case 17:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:cr(m,C),ju(s,o),o.tag=1,Sn(m)?(s=!0,wu(o)):s=!1,xo(o,u),fv(o,m,C),Pf(o,m,C,u),Lf(null,o,m,!0,s,u);case 19:return Rv(s,o,u);case 22:return Tv(s,o,u)}throw Error(t(156,o.tag))};function Zv(s,o){return io(s,o)}function rC(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,o,u,m){return new rC(s,o,u,m)}function ed(s){return s=s.prototype,!(!s||!s.isReactComponent)}function iC(s){if(typeof s=="function")return ed(s)?1:0;if(s!=null){if(s=s.$$typeof,s===O)return 11;if(s===Q)return 14}return 2}function Bi(s,o){var u=s.alternate;return u===null?(u=Gn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Qu(s,o,u,m,C,D){var q=2;if(m=s,typeof s=="function")ed(s)&&(q=1);else if(typeof s=="string")q=5;else e:switch(s){case P:return Ms(u.children,C,D,o);case _:q=8,C|=8;break;case A:return s=Gn(12,u,o,C|2),s.elementType=A,s.lanes=D,s;case N:return s=Gn(13,u,o,C),s.elementType=N,s.lanes=D,s;case $:return s=Gn(19,u,o,C),s.elementType=$,s.lanes=D,s;case Z:return Ju(u,C,D,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:q=10;break e;case R:q=9;break e;case O:q=11;break e;case Q:q=14;break e;case se:q=16,m=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Gn(q,u,o,C),o.elementType=s,o.type=m,o.lanes=D,o}function Ms(s,o,u,m){return s=Gn(7,s,m,o),s.lanes=u,s}function Ju(s,o,u,m){return s=Gn(22,s,m,o),s.elementType=Z,s.lanes=u,s.stateNode={isHidden:!1},s}function td(s,o,u){return s=Gn(6,s,null,o),s.lanes=u,s}function nd(s,o,u){return o=Gn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function sC(s,o,u,m,C){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ti(0),this.expirationTimes=Ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.identifierPrefix=m,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function rd(s,o,u,m,C,D,q,J,te){return s=new sC(s,o,u,J,te),o===1?(o=1,D===!0&&(o|=8)):o=0,D=Gn(3,null,null,o),s.current=D,D.stateNode=s,D.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(D),s}function oC(s,o,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:m==null?null:""+m,children:s,containerInfo:o,implementation:u}}function e_(s){if(!s)return xi;s=s._reactInternals;e:{if(tr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Sn(u))return ky(s,u,o)}return o}function t_(s,o,u,m,C,D,q,J,te){return s=rd(u,m,!0,s,C,D,q,J,te),s.context=e_(null),u=s.current,m=mn(),C=Vi(u),D=ti(m,C),D.callback=o??null,Di(u,D,C),s.current.lanes=C,Si(s,C,m),bn(s,m),s}function Yu(s,o,u,m){var C=o.current,D=mn(),q=Vi(C);return u=e_(u),o.context===null?o.context=u:o.pendingContext=u,o=ti(D,q),o.payload={element:s},m=m===void 0?null:m,m!==null&&(o.callback=m),s=Di(C,o,q),s!==null&&(dr(s,C,q,D),ku(s,C,q)),q}function Xu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function n_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function id(s,o){n_(s,o),(s=s.alternate)&&n_(s,o)}var r_=typeof reportError=="function"?reportError:function(s){console.error(s)};function sd(s){this._internalRoot=s}Zu.prototype.render=sd.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Yu(s,o,null,null)},Zu.prototype.unmount=sd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Ns(function(){Yu(null,s,null,null)}),o[Jr]=null}};function Zu(s){this._internalRoot=s}Zu.prototype.unstable_scheduleHydration=function(s){if(s){var o=Zl();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Sr.length&&o!==0&&o<Sr[u].priority;u++);Sr.splice(u,0,s),u===0&&nu(s)}};function od(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ec(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function i_(){}function aC(s,o,u,m,C){if(C){if(typeof m=="function"){var D=m;m=function(){var pe=Xu(q);D.call(pe)}}var q=t_(o,m,s,0,null,!1,!1,"",i_);return s._reactRootContainer=q,s[Jr]=q.current,Da(s.nodeType===8?s.parentNode:s),Ns(),q}for(;C=s.lastChild;)s.removeChild(C);if(typeof m=="function"){var J=m;m=function(){var pe=Xu(te);J.call(pe)}}var te=rd(s,0,!1,null,null,!1,!1,"",i_);return s._reactRootContainer=te,s[Jr]=te.current,Da(s.nodeType===8?s.parentNode:s),Ns(function(){Yu(o,te,u,m)}),te}function tc(s,o,u,m,C){var D=u._reactRootContainer;if(D){var q=D;if(typeof C=="function"){var J=C;C=function(){var te=Xu(q);J.call(te)}}Yu(o,q,s,C)}else q=aC(u,o,s,C,m);return Xu(q)}Yl=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ei(o.pendingLanes);u!==0&&(Ii(o,u|1),bn(o,mt()),!(lt&6)&&(Fo=mt()+500,Ni()))}break;case 13:Ns(function(){var m=ei(s,1);if(m!==null){var C=mn();dr(m,s,1,C)}}),id(s,1)}},ao=function(s){if(s.tag===13){var o=ei(s,134217728);if(o!==null){var u=mn();dr(o,s,134217728,u)}id(s,134217728)}},Xl=function(s){if(s.tag===13){var o=Vi(s),u=ei(s,o);if(u!==null){var m=mn();dr(u,s,o,m)}id(s,o)}},Zl=function(){return it},eu=function(s,o){var u=it;try{return it=s,o()}finally{it=u}},Xs=function(s,o,u){switch(o){case"input":if(et(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var C=vu(m);if(!C)throw Error(t(90));ke(m),et(m,C)}}}break;case"textarea":Fe(s,u);break;case"select":o=u.value,o!=null&&be(s,!!u.multiple,o,!1)}},ds=Yf,ga=Ns;var lC={usingClientEntryPoint:!1,Events:[ja,Io,vu,Er,ma,Yf]},Xa={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uC={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=_a(s),s===null?null:s.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{vs=nc.inject(uC),Pn=nc}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lC,An.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(o))throw Error(t(200));return oC(s,o,null,u)},An.createRoot=function(s,o){if(!od(s))throw Error(t(299));var u=!1,m="",C=r_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=rd(s,1,!1,null,null,u,!1,m,C),s[Jr]=o.current,Da(s.nodeType===8?s.parentNode:s),new sd(o)},An.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=_a(o),s=s===null?null:s.stateNode,s},An.flushSync=function(s){return Ns(s)},An.hydrate=function(s,o,u){if(!ec(o))throw Error(t(200));return tc(null,s,o,!0,u)},An.hydrateRoot=function(s,o,u){if(!od(s))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,C=!1,D="",q=r_;if(u!=null&&(u.unstable_strictMode===!0&&(C=!0),u.identifierPrefix!==void 0&&(D=u.identifierPrefix),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),o=t_(o,null,s,1,u??null,C,!1,D,q),s[Jr]=o.current,Da(s),m)for(s=0;s<m.length;s++)u=m[s],C=u._getVersion,C=C(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,C]:o.mutableSourceEagerHydrationData.push(u,C);return new Zu(o)},An.render=function(s,o,u){if(!ec(o))throw Error(t(200));return tc(null,s,o,!1,u)},An.unmountComponentAtNode=function(s){if(!ec(s))throw Error(t(40));return s._reactRootContainer?(Ns(function(){tc(null,null,s,!1,function(){s._reactRootContainer=null,s[Jr]=null})}),!0):!1},An.unstable_batchedUpdates=Yf,An.unstable_renderSubtreeIntoContainer=function(s,o,u,m){if(!ec(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return tc(s,o,u,!1,m)},An.version="18.3.1-next-f1338f8080-20240426",An}var f_;function F0(){if(f_)return ud.exports;f_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ud.exports=vC(),ud.exports}var d_;function _C(){if(d_)return ic;d_=1;var r=F0();return ic.createRoot=r.createRoot,ic.hydrateRoot=r.hydrateRoot,ic}var wC=_C(),p_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},EC=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],l=r[t++],c=r[t++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},V0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],l=i+1<r.length,c=l?r[i+1]:0,f=i+2<r.length,d=f?r[i+2]:0,v=a>>2,g=(a&3)<<4|c>>4;let p=(c&15)<<2|d>>6,y=d&63;f||(y=64,l||(p=64)),n.push(t[v],t[g],t[p],t[y])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(j0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):EC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const g=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new TC;const p=a<<2|c>>4;if(n.push(p),d!==64){const y=c<<4&240|d>>2;if(n.push(y),g!==64){const T=d<<6&192|g;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class TC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SC=function(r){const e=j0(r);return V0.encodeByteArray(e,!0)},Rc=function(r){return SC(r).replace(/\./g,"")},U0=function(r){try{return V0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=()=>IC().__FIREBASE_DEFAULTS__,bC=()=>{if(typeof process>"u"||typeof p_>"u")return;const r=p_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},AC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&U0(r[1]);return e&&JSON.parse(e)},Jc=()=>{try{return CC()||bC()||AC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},B0=r=>{var e,t;return(t=(e=Jc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},q0=r=>{const e=B0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},z0=()=>{var r;return(r=Jc())===null||r===void 0?void 0:r.config},H0=r=>{var e;return(e=Jc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Rc(JSON.stringify(t)),Rc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function PC(){var r;const e=(r=Jc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function NC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LC(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function DC(){return!PC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MC(){try{return typeof indexedDB=="object"}catch{return!1}}function FC(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="FirebaseError";class Br extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=jC,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rl.prototype.create)}}class Rl{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?VC(a,n):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Br(i,c,n)}}function VC(r,e){return r.replace(UC,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const UC=/\{\$([^}]+)}/g;function BC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Pc(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],l=e[i];if(m_(a)&&m_(l)){if(!Pc(a,l))return!1}else if(a!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function m_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function rl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function il(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function qC(r,e){const t=new zC(r,e);return t.subscribe.bind(t)}class zC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");HC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=fd),i.error===void 0&&(i.error=fd),i.complete===void 0&&(i.complete=fd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function fd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r){return r&&r._delegate?r._delegate:r}class ts{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new kC;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KC(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&l.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:WC(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WC(r){return r===Fs?void 0:r}function KC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $C(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(nt||(nt={}));const QC={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},JC=nt.INFO,YC={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},XC=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=YC[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=JC,this._logHandler=XC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const ZC=(r,e)=>e.some(t=>r instanceof t);let g_,y_;function eb(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tb(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,lm=new WeakMap,K0=new WeakMap,dd=new WeakMap,jm=new WeakMap;function nb(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",l)},a=()=>{t(Yi(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&W0.set(t,r)}).catch(()=>{}),jm.set(e,r),e}function rb(r){if(lm.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",l),r.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",l),r.addEventListener("abort",l)});lm.set(r,e)}let um={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return lm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||K0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ib(r){um=r(um)}function sb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(pd(this),e,...t);return K0.set(n,e.sort?e.sort():[e]),Yi(n)}:tb().includes(r)?function(...e){return r.apply(pd(this),e),Yi(W0.get(this))}:function(...e){return Yi(r.apply(pd(this),e))}}function ob(r){return typeof r=="function"?sb(r):(r instanceof IDBTransaction&&rb(r),ZC(r,eb())?new Proxy(r,um):r)}function Yi(r){if(r instanceof IDBRequest)return nb(r);if(dd.has(r))return dd.get(r);const e=ob(r);return e!==r&&(dd.set(r,e),jm.set(e,r)),e}const pd=r=>jm.get(r);function ab(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const l=indexedDB.open(r,e),c=Yi(l);return n&&l.addEventListener("upgradeneeded",f=>{n(Yi(l.result),f.oldVersion,f.newVersion,Yi(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const lb=["get","getKey","getAll","getAllKeys","count"],ub=["put","add","delete","clear"],md=new Map;function v_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(md.get(e))return md.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=ub.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||lb.includes(t)))return;const a=async function(l,...c){const f=this.transaction(l,i?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&f.done]))[0]};return md.set(e,a),a}ib(r=>({...r,get:(e,t,n)=>v_(e,t)||r.get(e,t,n),has:(e,t)=>!!v_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hb(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function hb(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cm="@firebase/app",__="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Fm("@firebase/app"),fb="@firebase/app-compat",db="@firebase/analytics-compat",pb="@firebase/analytics",mb="@firebase/app-check-compat",gb="@firebase/app-check",yb="@firebase/auth",vb="@firebase/auth-compat",_b="@firebase/database",wb="@firebase/data-connect",Eb="@firebase/database-compat",Tb="@firebase/functions",Sb="@firebase/functions-compat",Ib="@firebase/installations",Cb="@firebase/installations-compat",bb="@firebase/messaging",Ab="@firebase/messaging-compat",kb="@firebase/performance",Rb="@firebase/performance-compat",Pb="@firebase/remote-config",Ob="@firebase/remote-config-compat",xb="@firebase/storage",Nb="@firebase/storage-compat",Lb="@firebase/firestore",Db="@firebase/vertexai",Mb="@firebase/firestore-compat",Fb="firebase",jb="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="[DEFAULT]",Vb={[cm]:"fire-core",[fb]:"fire-core-compat",[pb]:"fire-analytics",[db]:"fire-analytics-compat",[gb]:"fire-app-check",[mb]:"fire-app-check-compat",[yb]:"fire-auth",[vb]:"fire-auth-compat",[_b]:"fire-rtdb",[wb]:"fire-data-connect",[Eb]:"fire-rtdb-compat",[Tb]:"fire-fn",[Sb]:"fire-fn-compat",[Ib]:"fire-iid",[Cb]:"fire-iid-compat",[bb]:"fire-fcm",[Ab]:"fire-fcm-compat",[kb]:"fire-perf",[Rb]:"fire-perf-compat",[Pb]:"fire-rc",[Ob]:"fire-rc-compat",[xb]:"fire-gcs",[Nb]:"fire-gcs-compat",[Lb]:"fire-fst",[Mb]:"fire-fst-compat",[Db]:"fire-vertex","fire-js":"fire-js",[Fb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,Ub=new Map,fm=new Map;function w_(r,e){try{r.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Us(r){const e=r.name;if(fm.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;fm.set(e,r);for(const t of Oc.values())w_(t,r);for(const t of Ub.values())w_(t,r);return!0}function Yc(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function xr(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new Rl("app","Firebase",Bb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=jb;function G0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:hm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Xi.create("bad-app-name",{appName:String(i)});if(t||(t=z0()),!t)throw Xi.create("no-options");const a=Oc.get(i);if(a){if(Pc(t,a.options)&&Pc(n,a.config))return a;throw Xi.create("duplicate-app",{appName:i})}const l=new GC(i);for(const f of fm.values())l.addComponent(f);const c=new qb(t,n,l);return Oc.set(i,c),c}function Vm(r=hm){const e=Oc.get(r);if(!e&&r===hm&&z0())return G0();if(!e)throw Xi.create("no-app",{appName:r});return e}function Lr(r,e,t){var n;let i=(n=Vb[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(c.join(" "));return}Us(new ts(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firebase-heartbeat-database",Hb=1,yl="firebase-heartbeat-store";let gd=null;function Q0(){return gd||(gd=ab(zb,Hb,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(yl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Xi.create("idb-open",{originalErrorMessage:r.message})})),gd}async function $b(r){try{const t=(await Q0()).transaction(yl),n=await t.objectStore(yl).get(J0(r));return await t.done,n}catch(e){if(e instanceof Br)hi.warn(e.message);else{const t=Xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(t.message)}}}async function E_(r,e){try{const n=(await Q0()).transaction(yl,"readwrite");await n.objectStore(yl).put(e,J0(r)),await n.done}catch(t){if(t instanceof Br)hi.warn(t.message);else{const n=Xi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hi.warn(n.message)}}}function J0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=1024,Kb=30*24*60*60*1e3;class Gb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jb(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=T_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=Kb}),this._storage.overwrite(this._heartbeatsCache))}catch(n){hi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=T_(),{heartbeatsToSend:n,unsentEntries:i}=Qb(this._heartbeatsCache.heartbeats),a=Rc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return hi.warn(t),""}}}function T_(){return new Date().toISOString().substring(0,10)}function Qb(r,e=Wb){const t=[];let n=r.slice();for(const i of r){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),S_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),S_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Jb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MC()?FC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $b(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return E_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return E_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function S_(r){return Rc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r){Us(new ts("platform-logger",e=>new cb(e),"PRIVATE")),Us(new ts("heartbeat",e=>new Gb(e),"PRIVATE")),Lr(cm,__,r),Lr(cm,__,"esm2017"),Lr("fire-js","")}Yb("");var Xb="firebase",Zb="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(Xb,Zb,"app");var I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,Y0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,_){function A(){}A.prototype=_.prototype,P.D=_.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(k,R,O){for(var N=Array(arguments.length-2),$=2;$<arguments.length;$++)N[$-2]=arguments[$];return _.prototype[R].apply(k,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,_,A){A||(A=0);var k=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)k[R]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(R=0;16>R;++R)k[R]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=P.g[0],A=P.g[1],R=P.g[2];var O=P.g[3],N=_+(O^A&(R^O))+k[0]+3614090360&4294967295;_=A+(N<<7&4294967295|N>>>25),N=O+(R^_&(A^R))+k[1]+3905402710&4294967295,O=_+(N<<12&4294967295|N>>>20),N=R+(A^O&(_^A))+k[2]+606105819&4294967295,R=O+(N<<17&4294967295|N>>>15),N=A+(_^R&(O^_))+k[3]+3250441966&4294967295,A=R+(N<<22&4294967295|N>>>10),N=_+(O^A&(R^O))+k[4]+4118548399&4294967295,_=A+(N<<7&4294967295|N>>>25),N=O+(R^_&(A^R))+k[5]+1200080426&4294967295,O=_+(N<<12&4294967295|N>>>20),N=R+(A^O&(_^A))+k[6]+2821735955&4294967295,R=O+(N<<17&4294967295|N>>>15),N=A+(_^R&(O^_))+k[7]+4249261313&4294967295,A=R+(N<<22&4294967295|N>>>10),N=_+(O^A&(R^O))+k[8]+1770035416&4294967295,_=A+(N<<7&4294967295|N>>>25),N=O+(R^_&(A^R))+k[9]+2336552879&4294967295,O=_+(N<<12&4294967295|N>>>20),N=R+(A^O&(_^A))+k[10]+4294925233&4294967295,R=O+(N<<17&4294967295|N>>>15),N=A+(_^R&(O^_))+k[11]+2304563134&4294967295,A=R+(N<<22&4294967295|N>>>10),N=_+(O^A&(R^O))+k[12]+1804603682&4294967295,_=A+(N<<7&4294967295|N>>>25),N=O+(R^_&(A^R))+k[13]+4254626195&4294967295,O=_+(N<<12&4294967295|N>>>20),N=R+(A^O&(_^A))+k[14]+2792965006&4294967295,R=O+(N<<17&4294967295|N>>>15),N=A+(_^R&(O^_))+k[15]+1236535329&4294967295,A=R+(N<<22&4294967295|N>>>10),N=_+(R^O&(A^R))+k[1]+4129170786&4294967295,_=A+(N<<5&4294967295|N>>>27),N=O+(A^R&(_^A))+k[6]+3225465664&4294967295,O=_+(N<<9&4294967295|N>>>23),N=R+(_^A&(O^_))+k[11]+643717713&4294967295,R=O+(N<<14&4294967295|N>>>18),N=A+(O^_&(R^O))+k[0]+3921069994&4294967295,A=R+(N<<20&4294967295|N>>>12),N=_+(R^O&(A^R))+k[5]+3593408605&4294967295,_=A+(N<<5&4294967295|N>>>27),N=O+(A^R&(_^A))+k[10]+38016083&4294967295,O=_+(N<<9&4294967295|N>>>23),N=R+(_^A&(O^_))+k[15]+3634488961&4294967295,R=O+(N<<14&4294967295|N>>>18),N=A+(O^_&(R^O))+k[4]+3889429448&4294967295,A=R+(N<<20&4294967295|N>>>12),N=_+(R^O&(A^R))+k[9]+568446438&4294967295,_=A+(N<<5&4294967295|N>>>27),N=O+(A^R&(_^A))+k[14]+3275163606&4294967295,O=_+(N<<9&4294967295|N>>>23),N=R+(_^A&(O^_))+k[3]+4107603335&4294967295,R=O+(N<<14&4294967295|N>>>18),N=A+(O^_&(R^O))+k[8]+1163531501&4294967295,A=R+(N<<20&4294967295|N>>>12),N=_+(R^O&(A^R))+k[13]+2850285829&4294967295,_=A+(N<<5&4294967295|N>>>27),N=O+(A^R&(_^A))+k[2]+4243563512&4294967295,O=_+(N<<9&4294967295|N>>>23),N=R+(_^A&(O^_))+k[7]+1735328473&4294967295,R=O+(N<<14&4294967295|N>>>18),N=A+(O^_&(R^O))+k[12]+2368359562&4294967295,A=R+(N<<20&4294967295|N>>>12),N=_+(A^R^O)+k[5]+4294588738&4294967295,_=A+(N<<4&4294967295|N>>>28),N=O+(_^A^R)+k[8]+2272392833&4294967295,O=_+(N<<11&4294967295|N>>>21),N=R+(O^_^A)+k[11]+1839030562&4294967295,R=O+(N<<16&4294967295|N>>>16),N=A+(R^O^_)+k[14]+4259657740&4294967295,A=R+(N<<23&4294967295|N>>>9),N=_+(A^R^O)+k[1]+2763975236&4294967295,_=A+(N<<4&4294967295|N>>>28),N=O+(_^A^R)+k[4]+1272893353&4294967295,O=_+(N<<11&4294967295|N>>>21),N=R+(O^_^A)+k[7]+4139469664&4294967295,R=O+(N<<16&4294967295|N>>>16),N=A+(R^O^_)+k[10]+3200236656&4294967295,A=R+(N<<23&4294967295|N>>>9),N=_+(A^R^O)+k[13]+681279174&4294967295,_=A+(N<<4&4294967295|N>>>28),N=O+(_^A^R)+k[0]+3936430074&4294967295,O=_+(N<<11&4294967295|N>>>21),N=R+(O^_^A)+k[3]+3572445317&4294967295,R=O+(N<<16&4294967295|N>>>16),N=A+(R^O^_)+k[6]+76029189&4294967295,A=R+(N<<23&4294967295|N>>>9),N=_+(A^R^O)+k[9]+3654602809&4294967295,_=A+(N<<4&4294967295|N>>>28),N=O+(_^A^R)+k[12]+3873151461&4294967295,O=_+(N<<11&4294967295|N>>>21),N=R+(O^_^A)+k[15]+530742520&4294967295,R=O+(N<<16&4294967295|N>>>16),N=A+(R^O^_)+k[2]+3299628645&4294967295,A=R+(N<<23&4294967295|N>>>9),N=_+(R^(A|~O))+k[0]+4096336452&4294967295,_=A+(N<<6&4294967295|N>>>26),N=O+(A^(_|~R))+k[7]+1126891415&4294967295,O=_+(N<<10&4294967295|N>>>22),N=R+(_^(O|~A))+k[14]+2878612391&4294967295,R=O+(N<<15&4294967295|N>>>17),N=A+(O^(R|~_))+k[5]+4237533241&4294967295,A=R+(N<<21&4294967295|N>>>11),N=_+(R^(A|~O))+k[12]+1700485571&4294967295,_=A+(N<<6&4294967295|N>>>26),N=O+(A^(_|~R))+k[3]+2399980690&4294967295,O=_+(N<<10&4294967295|N>>>22),N=R+(_^(O|~A))+k[10]+4293915773&4294967295,R=O+(N<<15&4294967295|N>>>17),N=A+(O^(R|~_))+k[1]+2240044497&4294967295,A=R+(N<<21&4294967295|N>>>11),N=_+(R^(A|~O))+k[8]+1873313359&4294967295,_=A+(N<<6&4294967295|N>>>26),N=O+(A^(_|~R))+k[15]+4264355552&4294967295,O=_+(N<<10&4294967295|N>>>22),N=R+(_^(O|~A))+k[6]+2734768916&4294967295,R=O+(N<<15&4294967295|N>>>17),N=A+(O^(R|~_))+k[13]+1309151649&4294967295,A=R+(N<<21&4294967295|N>>>11),N=_+(R^(A|~O))+k[4]+4149444226&4294967295,_=A+(N<<6&4294967295|N>>>26),N=O+(A^(_|~R))+k[11]+3174756917&4294967295,O=_+(N<<10&4294967295|N>>>22),N=R+(_^(O|~A))+k[2]+718787259&4294967295,R=O+(N<<15&4294967295|N>>>17),N=A+(O^(R|~_))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+_&4294967295,P.g[1]=P.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+O&4294967295}n.prototype.u=function(P,_){_===void 0&&(_=P.length);for(var A=_-this.blockSize,k=this.B,R=this.h,O=0;O<_;){if(R==0)for(;O<=A;)i(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<_;)if(k[R++]=P.charCodeAt(O++),R==this.blockSize){i(this,k),R=0;break}}else for(;O<_;)if(k[R++]=P[O++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=_},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var _=1;_<P.length-8;++_)P[_]=0;var A=8*this.o;for(_=P.length-8;_<P.length;++_)P[_]=A&255,A/=256;for(this.u(P),P=Array(16),_=A=0;4>_;++_)for(var k=0;32>k;k+=8)P[A++]=this.g[_]>>>k&255;return P};function a(P,_){var A=c;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=_(P)}function l(P,_){this.h=_;for(var A=[],k=!0,R=P.length-1;0<=R;R--){var O=P[R]|0;k&&O==_||(A[R]=O,k=!1)}this.g=A}var c={};function f(P){return-128<=P&&128>P?a(P,function(_){return new l([_|0],0>_?-1:0)}):new l([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return g;if(0>P)return w(d(-P));for(var _=[],A=1,k=0;P>=A;k++)_[k]=P/A|0,A*=4294967296;return new l(_,0)}function v(P,_){if(P.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(P.charAt(0)=="-")return w(v(P.substring(1),_));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(_,8)),k=g,R=0;R<P.length;R+=8){var O=Math.min(8,P.length-R),N=parseInt(P.substring(R,R+O),_);8>O?(O=d(Math.pow(_,O)),k=k.j(O).add(d(N))):(k=k.j(A),k=k.add(d(N)))}return k}var g=f(0),p=f(1),y=f(16777216);r=l.prototype,r.m=function(){if(S(this))return-w(this).m();for(var P=0,_=1,A=0;A<this.g.length;A++){var k=this.i(A);P+=(0<=k?k:4294967296+k)*_,_*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(T(this))return"0";if(S(this))return"-"+w(this).toString(P);for(var _=d(Math.pow(P,6)),A=this,k="";;){var R=b(A,_).g;A=E(A,R.j(_));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=R,T(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function T(P){if(P.h!=0)return!1;for(var _=0;_<P.g.length;_++)if(P.g[_]!=0)return!1;return!0}function S(P){return P.h==-1}r.l=function(P){return P=E(this,P),S(P)?-1:T(P)?0:1};function w(P){for(var _=P.g.length,A=[],k=0;k<_;k++)A[k]=~P.g[k];return new l(A,~P.h).add(p)}r.abs=function(){return S(this)?w(this):this},r.add=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0,R=0;R<=_;R++){var O=k+(this.i(R)&65535)+(P.i(R)&65535),N=(O>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);k=N>>>16,O&=65535,N&=65535,A[R]=N<<16|O}return new l(A,A[A.length-1]&-2147483648?-1:0)};function E(P,_){return P.add(w(_))}r.j=function(P){if(T(this)||T(P))return g;if(S(this))return S(P)?w(this).j(w(P)):w(w(this).j(P));if(S(P))return w(this.j(w(P)));if(0>this.l(y)&&0>P.l(y))return d(this.m()*P.m());for(var _=this.g.length+P.g.length,A=[],k=0;k<2*_;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<P.g.length;R++){var O=this.i(k)>>>16,N=this.i(k)&65535,$=P.i(R)>>>16,Q=P.i(R)&65535;A[2*k+2*R]+=N*Q,I(A,2*k+2*R),A[2*k+2*R+1]+=O*Q,I(A,2*k+2*R+1),A[2*k+2*R+1]+=N*$,I(A,2*k+2*R+1),A[2*k+2*R+2]+=O*$,I(A,2*k+2*R+2)}for(k=0;k<_;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=_;k<2*_;k++)A[k]=0;return new l(A,0)};function I(P,_){for(;(P[_]&65535)!=P[_];)P[_+1]+=P[_]>>>16,P[_]&=65535,_++}function L(P,_){this.g=P,this.h=_}function b(P,_){if(T(_))throw Error("division by zero");if(T(P))return new L(g,g);if(S(P))return _=b(w(P),_),new L(w(_.g),w(_.h));if(S(_))return _=b(P,w(_)),new L(w(_.g),_.h);if(30<P.g.length){if(S(P)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var A=p,k=_;0>=k.l(P);)A=F(A),k=F(k);var R=V(A,1),O=V(k,1);for(k=V(k,2),A=V(A,2);!T(k);){var N=O.add(k);0>=N.l(P)&&(R=R.add(A),O=N),k=V(k,1),A=V(A,1)}return _=E(P,R.j(_)),new L(R,_)}for(R=g;0<=P.l(_);){for(A=Math.max(1,Math.floor(P.m()/_.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=d(A),N=O.j(_);S(N)||0<N.l(P);)A-=k,O=d(A),N=O.j(_);T(O)&&(O=p),R=R.add(O),P=E(P,N)}return new L(R,P)}r.A=function(P){return b(this,P).h},r.and=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)&P.i(k);return new l(A,this.h&P.h)},r.or=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)|P.i(k);return new l(A,this.h|P.h)},r.xor=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)^P.i(k);return new l(A,this.h^P.h)};function F(P){for(var _=P.g.length+1,A=[],k=0;k<_;k++)A[k]=P.i(k)<<1|P.i(k-1)>>>31;return new l(A,P.h)}function V(P,_){var A=_>>5;_%=32;for(var k=P.g.length-A,R=[],O=0;O<k;O++)R[O]=0<_?P.i(O+A)>>>_|P.i(O+A+1)<<32-_:P.i(O+A);return new l(R,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Y0=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=v,Zi=l}).apply(typeof I_<"u"?I_:typeof self<"u"?self:typeof window<"u"?window:{});var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,sl,Z0,pc,dm,e1,t1,n1;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,x,j){return h==Array.prototype||h==Object.prototype||(h[x]=j.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sc=="object"&&sc];for(var x=0;x<h.length;++x){var j=h[x];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=t(this);function i(h,x){if(x)e:{var j=n;h=h.split(".");for(var K=0;K<h.length-1;K++){var ae=h[K];if(!(ae in j))break e;j=j[ae]}h=h[h.length-1],K=j[h],x=x(K),x!=K&&x!=null&&e(j,h,{configurable:!0,writable:!0,value:x})}}function a(h,x){h instanceof String&&(h+="");var j=0,K=!1,ae={next:function(){if(!K&&j<h.length){var me=j++;return{value:x(me,h[me]),done:!1}}return K=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}i("Array.prototype.values",function(h){return h||function(){return a(this,function(x,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var x=typeof h;return x=x!="object"?x:h?Array.isArray(h)?"array":x:"null",x=="array"||x=="object"&&typeof h.length=="number"}function d(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function v(h,x,j){return h.call.apply(h.bind,arguments)}function g(h,x,j){if(!h)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,K),h.apply(x,ae)}}return function(){return h.apply(x,arguments)}}function p(h,x,j){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:g,p.apply(null,arguments)}function y(h,x){var j=Array.prototype.slice.call(arguments,1);return function(){var K=j.slice();return K.push.apply(K,arguments),h.apply(this,K)}}function T(h,x){function j(){}j.prototype=x.prototype,h.aa=x.prototype,h.prototype=new j,h.prototype.constructor=h,h.Qb=function(K,ae,me){for(var Ae=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Ae[dt-2]=arguments[dt];return x.prototype[ae].apply(K,Ae)}}function S(h){const x=h.length;if(0<x){const j=Array(x);for(let K=0;K<x;K++)j[K]=h[K];return j}return[]}function w(h,x){for(let j=1;j<arguments.length;j++){const K=arguments[j];if(f(K)){const ae=h.length||0,me=K.length||0;h.length=ae+me;for(let Ae=0;Ae<me;Ae++)h[ae+Ae]=K[Ae]}else h.push(K)}}class E{constructor(x,j){this.i=x,this.j=j,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function I(h){return/^[\s\xa0]*$/.test(h)}function L(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function b(h){return b[" "](h),h}b[" "]=function(){};var F=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function V(h,x,j){for(const K in h)x.call(j,h[K],K,h)}function P(h,x){for(const j in h)x.call(void 0,h[j],j,h)}function _(h){const x={};for(const j in h)x[j]=h[j];return x}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,x){let j,K;for(let ae=1;ae<arguments.length;ae++){K=arguments[ae];for(j in K)h[j]=K[j];for(let me=0;me<A.length;me++)j=A[me],Object.prototype.hasOwnProperty.call(K,j)&&(h[j]=K[j])}}function R(h){var x=1;h=h.split(":");const j=[];for(;0<x&&h.length;)j.push(h.shift()),x--;return h.length&&j.push(h.join(":")),j}function O(h){c.setTimeout(()=>{throw h},0)}function N(){var h=G;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class ${constructor(){this.h=this.g=null}add(x,j){const K=Q.get();K.set(x,j),this.h?this.h.next=K:this.g=K,this.h=K}}var Q=new E(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(x,j){this.h=x,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,re=!1,G=new $,W=()=>{const h=c.Promise.resolve(void 0);Z=()=>{h.then(M)}};var M=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(j){O(j)}var x=Q;x.j(h),100>x.h&&(x.h++,h.next=x.g,x.g=h)}re=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const j=()=>{};c.addEventListener("test",j,x),c.removeEventListener("test",j,x)}catch{}return h}();function X(h,x){if(z.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var j=this.type=h.type,K=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget){if(F){e:{try{b(x.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(x=null)}}else j=="mouseover"?x=h.fromElement:j=="mouseout"&&(x=h.toElement);this.relatedTarget=x,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:H[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&X.aa.h.call(this)}}T(X,z);var H={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ie(h,x,j,K,ae){this.listener=h,this.proxy=null,this.src=x,this.type=j,this.capture=!!K,this.ha=ae,this.key=++ne,this.da=this.fa=!1}function fe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,x,j,K,ae){var me=h.toString();h=this.g[me],h||(h=this.g[me]=[],this.h++);var Ae=Re(h,x,K,ae);return-1<Ae?(x=h[Ae],j||(x.fa=!1)):(x=new ie(x,this.src,me,!!K,ae),x.fa=j,h.push(x)),x};function ke(h,x){var j=x.type;if(j in h.g){var K=h.g[j],ae=Array.prototype.indexOf.call(K,x,void 0),me;(me=0<=ae)&&Array.prototype.splice.call(K,ae,1),me&&(fe(x),h.g[j].length==0&&(delete h.g[j],h.h--))}}function Re(h,x,j,K){for(var ae=0;ae<h.length;++ae){var me=h[ae];if(!me.da&&me.listener==x&&me.capture==!!j&&me.ha==K)return ae}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),De={};function Ue(h,x,j,K,ae){if(Array.isArray(x)){for(var me=0;me<x.length;me++)Ue(h,x[me],j,K,ae);return null}return j=Be(j),h&&h[Y]?h.K(x,j,d(K)?!!K.capture:!1,ae):et(h,x,j,!1,K,ae)}function et(h,x,j,K,ae,me){if(!x)throw Error("Invalid event type");var Ae=d(ae)?!!ae.capture:!!ae,dt=$e(h);if(dt||(h[Oe]=dt=new ye(h)),j=dt.add(x,j,K,Ae,me),j.proxy)return j;if(K=ue(),j.proxy=K,K.src=h,K.listener=j,h.addEventListener)ee||(ae=Ae),ae===void 0&&(ae=!1),h.addEventListener(x.toString(),K,ae);else if(h.attachEvent)h.attachEvent(be(x.toString()),K);else if(h.addListener&&h.removeListener)h.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return j}function ue(){function h(j){return x.call(h.src,h.listener,j)}const x=ge;return h}function de(h,x,j,K,ae){if(Array.isArray(x))for(var me=0;me<x.length;me++)de(h,x[me],j,K,ae);else K=d(K)?!!K.capture:!!K,j=Be(j),h&&h[Y]?(h=h.i,x=String(x).toString(),x in h.g&&(me=h.g[x],j=Re(me,j,K,ae),-1<j&&(fe(me[j]),Array.prototype.splice.call(me,j,1),me.length==0&&(delete h.g[x],h.h--)))):h&&(h=$e(h))&&(x=h.g[x.toString()],h=-1,x&&(h=Re(x,j,K,ae)),(j=-1<h?x[h]:null)&&Ee(j))}function Ee(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[Y])ke(x.i,h);else{var j=h.type,K=h.proxy;x.removeEventListener?x.removeEventListener(j,K,h.capture):x.detachEvent?x.detachEvent(be(j),K):x.addListener&&x.removeListener&&x.removeListener(K),(j=$e(x))?(ke(j,h),j.h==0&&(j.src=null,x[Oe]=null)):fe(h)}}}function be(h){return h in De?De[h]:De[h]="on"+h}function ge(h,x){if(h.da)h=!0;else{x=new X(x,this);var j=h.listener,K=h.ha||h.src;h.fa&&Ee(h),h=j.call(K,x)}return h}function $e(h){return h=h[Oe],h instanceof ye?h:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(h){return typeof h=="function"?h:(h[Fe]||(h[Fe]=function(x){return h.handleEvent(x)}),h[Fe])}function We(){B.call(this),this.i=new ye(this),this.M=this,this.F=null}T(We,B),We.prototype[Y]=!0,We.prototype.removeEventListener=function(h,x,j,K){de(this,h,x,j,K)};function Xe(h,x){var j,K=h.F;if(K)for(j=[];K;K=K.F)j.push(K);if(h=h.M,K=x.type||x,typeof x=="string")x=new z(x,h);else if(x instanceof z)x.target=x.target||h;else{var ae=x;x=new z(K,h),k(x,ae)}if(ae=!0,j)for(var me=j.length-1;0<=me;me--){var Ae=x.g=j[me];ae=Ze(Ae,K,!0,x)&&ae}if(Ae=x.g=h,ae=Ze(Ae,K,!0,x)&&ae,ae=Ze(Ae,K,!1,x)&&ae,j)for(me=0;me<j.length;me++)Ae=x.g=j[me],ae=Ze(Ae,K,!1,x)&&ae}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var h=this.i,x;for(x in h.g){for(var j=h.g[x],K=0;K<j.length;K++)fe(j[K]);delete h.g[x],h.h--}}this.F=null},We.prototype.K=function(h,x,j,K){return this.i.add(String(h),x,!1,j,K)},We.prototype.L=function(h,x,j,K){return this.i.add(String(h),x,!0,j,K)};function Ze(h,x,j,K){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();for(var ae=!0,me=0;me<x.length;++me){var Ae=x[me];if(Ae&&!Ae.da&&Ae.capture==j){var dt=Ae.listener,Vt=Ae.ha||Ae.src;Ae.fa&&ke(h.i,Ae),ae=dt.call(Vt,K)!==!1&&ae}}return ae&&!K.defaultPrevented}function Yn(h,x,j){if(typeof h=="function")j&&(h=p(h,j));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:c.setTimeout(h,x||0)}function ut(h){h.g=Yn(()=>{h.g=null,h.i&&(h.i=!1,ut(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class St extends B{constructor(x,j){super(),this.m=x,this.l=j,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(h){B.call(this),this.h=h,this.g={}}T(zt,B);var Xn=[];function _i(h){V(h.g,function(x,j){this.g.hasOwnProperty(j)&&Ee(x)},h),h.g={}}zt.prototype.N=function(){zt.aa.N.call(this),_i(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fa=c.JSON.stringify,da=c.JSON.parse,pa=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function fs(){}fs.prototype.h=null;function Ys(h){return h.h||(h.h=h.i())}function Xs(){}var Vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wr(){z.call(this,"d")}T(wr,z);function Zs(){z.call(this,"c")}T(Zs,z);var Er={},ma=null;function ds(){return ma=ma||new We}Er.La="serverreachability";function ga(h){z.call(this,Er.La,h)}T(ga,z);function Hr(h){const x=ds();Xe(x,new ga(x))}Er.STAT_EVENT="statevent";function ya(h,x){z.call(this,Er.STAT_EVENT,h),this.stat=x}T(ya,z);function Ot(h){const x=ds();Xe(x,new ya(x,h))}Er.Ma="timingevent";function eo(h,x){z.call(this,Er.Ma,h),this.size=x}T(eo,z);function Zn(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},x)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function ms(h,x,j,K,ae,me){h.info(function(){if(h.g)if(me)for(var Ae="",dt=me.split("&"),Vt=0;Vt<dt.length;Vt++){var ot=dt[Vt].split("=");if(1<ot.length){var Ht=ot[0];ot=ot[1];var Dt=Ht.split("_");Ae=2<=Dt.length&&Dt[1]=="type"?Ae+(Ht+"="+ot+"&"):Ae+(Ht+"=redacted&")}}else Ae=null;else Ae=me;return"XMLHTTP REQ ("+K+") [attempt "+ae+"]: "+x+`
`+j+`
`+Ae})}function to(h,x,j,K,ae,me,Ae){h.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+ae+"]: "+x+`
`+j+`
`+me+" "+Ae})}function er(h,x,j,K){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+Lh(h,j)+(K?" "+K:"")})}function va(h,x){h.info(function(){return"TIMEOUT: "+x})}ps.prototype.info=function(){};function Lh(h,x){if(!h.g)return x;if(!x)return null;try{var j=JSON.parse(x);if(j){for(h=0;h<j.length;h++)if(Array.isArray(j[h])){var K=j[h];if(!(2>K.length)){var ae=K[1];if(Array.isArray(ae)&&!(1>ae.length)){var me=ae[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Ae=1;Ae<ae.length;Ae++)ae[Ae]=""}}}}return fa(j)}catch{return x}}var no={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tr;function gs(){}T(gs,fs),gs.prototype.g=function(){return new XMLHttpRequest},gs.prototype.i=function(){return{}},tr=new gs;function nr(h,x,j,K){this.j=h,this.i=x,this.l=j,this.R=K||1,this.U=new zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hl}function Hl(){this.i=null,this.g="",this.h=!1}var _a={},ro={};function io(h,x,j){h.L=1,h.v=Ii(On(x)),h.m=j,h.P=!0,wa(h,null)}function wa(h,x){h.F=Date.now(),mt(h),h.A=On(h.v);var j=h.A,K=h.R;Array.isArray(K)||(K=[String(K)]),bi(j.i,"t",K),h.C=0,j=h.j.J,h.h=new Hl,h.g=lu(h.j,j?x:null,!h.m),0<h.O&&(h.M=new St(p(h.Y,h,h.g),h.O)),x=h.U,j=h.g,K=h.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(Xn[0]=ae.toString()),ae=Xn);for(var me=0;me<ae.length;me++){var Ae=Ue(j,ae[me],K||x.handleEvent,!1,x.h||x);if(!Ae)break;x.g[Ae.key]=Ae}x=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,x)):(h.u="GET",h.g.ea(h.A,h.u,null,x)),Hr(),ms(h.i,h.u,h.A,h.l,h.R,h.m)}nr.prototype.ca=function(h){h=h.target;const x=this.M;x&&En(h)==3?x.j():this.Y(h)},nr.prototype.Y=function(h){try{if(h==this.g)e:{const Dt=En(this.g);var x=this.g.Ba();const qn=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||ba(this.g)))){this.J||Dt!=4||x==7||(x==8||0>=qn?Hr(3):Hr(2)),ys(this);var j=this.g.Z();this.X=j;t:if($l(this)){var K=ba(this.g);h="";var ae=K.length,me=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Un(this),wi(this);var Ae="";break t}this.h.i=new c.TextDecoder}for(x=0;x<ae;x++)this.h.h=!0,h+=this.h.i.decode(K[x],{stream:!(me&&x==ae-1)});K.length=0,this.h.g+=h,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=j==200,to(this.i,this.u,this.A,this.l,this.R,Dt,j),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Vt=this.g;if((dt=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(dt)){var ot=dt;break t}}ot=null}if(j=ot)er(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,j);else{this.o=!1,this.s=3,Ot(12),Un(this),wi(this);break e}}if(this.P){j=!0;let Nn;for(;!this.J&&this.C<Ae.length;)if(Nn=Dh(this,Ae),Nn==ro){Dt==4&&(this.s=4,Ot(14),j=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==_a){this.s=4,Ot(15),er(this.i,this.l,Ae,"[Invalid Chunk]"),j=!1;break}else er(this.i,this.l,Nn,null),Ea(this,Nn);if($l(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||Ae.length!=0||this.h.h||(this.s=1,Ot(16),j=!1),this.o=this.o&&j,!j)er(this.i,this.l,Ae,"[Invalid Chunked Response]"),Un(this),wi(this);else if(0<Ae.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),ka(Ht),Ht.M=!0,Ot(11))}}else er(this.i,this.l,Ae,null),Ea(this,Ae);Dt==4&&Un(this),this.o&&!this.J&&(Dt==4?go(this.j,this):(this.o=!1,mt(this)))}else co(this.g),j==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Un(this),wi(this)}}}catch{}finally{}};function $l(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Dh(h,x){var j=h.C,K=x.indexOf(`
`,j);return K==-1?ro:(j=Number(x.substring(j,K)),isNaN(j)?_a:(K+=1,K+j>x.length?ro:(x=x.slice(K,K+j),h.C=K+j,x)))}nr.prototype.cancel=function(){this.J=!0,Un(this)};function mt(h){h.S=Date.now()+h.I,Wl(h,h.I)}function Wl(h,x){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Zn(p(h.ba,h),x)}function ys(h){h.B&&(c.clearTimeout(h.B),h.B=null)}nr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(va(this.i,this.A),this.L!=2&&(Hr(),Ot(17)),Un(this),this.s=2,wi(this)):Wl(this,this.S-h)};function wi(h){h.j.G==0||h.J||go(h.j,h)}function Un(h){ys(h);var x=h.M;x&&typeof x.ma=="function"&&x.ma(),h.M=null,_i(h.U),h.g&&(x=h.g,h.g=null,x.abort(),x.ma())}function Ea(h,x){try{var j=h.j;if(j.G!=0&&(j.g==h||fn(j.h,h))){if(!h.K&&fn(j.h,h)&&j.G==3){try{var K=j.Da.g.parse(x)}catch{K=null}if(Array.isArray(K)&&K.length==3){var ae=K;if(ae[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<h.F)mo(j),ar(j);else break e;po(j),Ot(18)}}else j.za=ae[1],0<j.za-j.T&&37500>ae[2]&&j.F&&j.v==0&&!j.C&&(j.C=Zn(p(j.Za,j),6e3));if(1>=Gl(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Qr(j,11)}else if((h.K||j.g==h)&&mo(j),!I(x))for(ae=j.Da.g.parse(x),x=0;x<ae.length;x++){let ot=ae[x];if(j.T=ot[0],ot=ot[1],j.G==2)if(ot[0]=="c"){j.K=ot[1],j.ia=ot[2];const Ht=ot[3];Ht!=null&&(j.la=Ht,j.j.info("VER="+j.la));const Dt=ot[4];Dt!=null&&(j.Aa=Dt,j.j.info("SVER="+j.Aa));const qn=ot[5];qn!=null&&typeof qn=="number"&&0<qn&&(K=1.5*qn,j.L=K,j.j.info("backChannelRequestTimeoutMs_="+K)),K=j;const Nn=h.g;if(Nn){const Is=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var me=K.h;me.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Ta(me,me.h),me.h=null))}if(K.D){const vo=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(K.ya=vo,pt(K.I,K.D,vo))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-h.F,j.j.info("Handshake RTT: "+j.R+"ms")),K=j;var Ae=h;if(K.qa=au(K,K.J?K.ia:null,K.W),Ae.K){Ql(K.h,Ae);var dt=Ae,Vt=K.L;Vt&&(dt.I=Vt),dt.B&&(ys(dt),mt(dt)),K.g=Ae}else Ss(K);0<j.i.length&&Cr(j)}else ot[0]!="stop"&&ot[0]!="close"||Qr(j,7);else j.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Qr(j,7):Jt(j):ot[0]!="noop"&&j.l&&j.l.ta(ot),j.v=0)}}Hr(4)}catch{}}var Kl=class{constructor(h,x){this.g=h,this.map=x}};function vs(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Gl(h){return h.h?1:h.g?h.g.size:0}function fn(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function Ta(h,x){h.g?h.g.add(x):h.h=x}function Ql(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}vs.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Jl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const j of h.g.values())x=x.concat(j.D);return x}return S(h.i)}function so(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var x=[],j=h.length,K=0;K<j;K++)x.push(h[K]);return x}x=[],j=0;for(K in h)x[j++]=h[K];return x}function oo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var x=[];h=h.length;for(var j=0;j<h;j++)x.push(j);return x}x=[],j=0;for(const K in h)x[j++]=K;return x}}}function Ei(h,x){if(h.forEach&&typeof h.forEach=="function")h.forEach(x,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,x,void 0);else for(var j=oo(h),K=so(h),ae=K.length,me=0;me<ae;me++)x.call(void 0,K[me],j&&j[me],h)}var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mh(h,x){if(h){h=h.split("&");for(var j=0;j<h.length;j++){var K=h[j].indexOf("="),ae=null;if(0<=K){var me=h[j].substring(0,K);ae=h[j].substring(K+1)}else me=h[j];x(me,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function $r(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof $r){this.h=h.h,ws(this,h.j),this.o=h.o,this.g=h.g,Ti(this,h.s),this.l=h.l;var x=h.i,j=new Tr;j.i=x.i,x.g&&(j.g=new Map(x.g),j.h=x.h),Si(this,j),this.m=h.m}else h&&(x=String(h).match(_s))?(this.h=!1,ws(this,x[1]||"",!0),this.o=it(x[2]||""),this.g=it(x[3]||"",!0),Ti(this,x[4]),this.l=it(x[5]||"",!0),Si(this,x[6]||"",!0),this.m=it(x[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}$r.prototype.toString=function(){var h=[],x=this.j;x&&h.push(Ci(x,ao,!0),":");var j=this.g;return(j||x=="file")&&(h.push("//"),(x=this.o)&&h.push(Ci(x,ao,!0),"@"),h.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&h.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&h.push("/"),h.push(Ci(j,j.charAt(0)=="/"?Zl:Xl,!0))),(j=this.i.toString())&&h.push("?",j),(j=this.m)&&h.push("#",Ci(j,Sa)),h.join("")};function On(h){return new $r(h)}function ws(h,x,j){h.j=j?it(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function Ti(h,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);h.s=x}else h.s=null}function Si(h,x,j){x instanceof Tr?(h.i=x,Sr(h.i,h.h)):(j||(x=Ci(x,eu)),h.i=new Tr(x,h.h))}function pt(h,x,j){h.i.set(x,j)}function Ii(h){return pt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function it(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ci(h,x,j){return typeof h=="string"?(h=encodeURI(h).replace(x,Yl),j&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ao=/[#\/\?@]/g,Xl=/[#\?:]/g,Zl=/[#\?]/g,eu=/[#\?@]/g,Sa=/#/g;function Tr(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function Qt(h){h.g||(h.g=new Map,h.h=0,h.i&&Mh(h.i,function(x,j){h.add(decodeURIComponent(x.replace(/\+/g," ")),j)}))}r=Tr.prototype,r.add=function(h,x){Qt(this),this.i=null,h=Bn(this,h);var j=this.g.get(h);return j||this.g.set(h,j=[]),j.push(x),this.h+=1,this};function rr(h,x){Qt(h),x=Bn(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function ir(h,x){return Qt(h),x=Bn(h,x),h.g.has(x)}r.forEach=function(h,x){Qt(this),this.g.forEach(function(j,K){j.forEach(function(ae){h.call(x,ae,K,this)},this)},this)},r.na=function(){Qt(this);const h=Array.from(this.g.values()),x=Array.from(this.g.keys()),j=[];for(let K=0;K<x.length;K++){const ae=h[K];for(let me=0;me<ae.length;me++)j.push(x[K])}return j},r.V=function(h){Qt(this);let x=[];if(typeof h=="string")ir(this,h)&&(x=x.concat(this.g.get(Bn(this,h))));else{h=Array.from(this.g.values());for(let j=0;j<h.length;j++)x=x.concat(h[j])}return x},r.set=function(h,x){return Qt(this),this.i=null,h=Bn(this,h),ir(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},r.get=function(h,x){return h?(h=this.V(h),0<h.length?String(h[0]):x):x};function bi(h,x,j){rr(h,x),0<j.length&&(h.i=null,h.g.set(Bn(h,x),S(j)),h.h+=j.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(var j=0;j<x.length;j++){var K=x[j];const me=encodeURIComponent(String(K)),Ae=this.V(K);for(K=0;K<Ae.length;K++){var ae=me;Ae[K]!==""&&(ae+="="+encodeURIComponent(String(Ae[K]))),h.push(ae)}}return this.i=h.join("&")};function Bn(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Sr(h,x){x&&!h.j&&(Qt(h),h.i=null,h.g.forEach(function(j,K){var ae=K.toLowerCase();K!=ae&&(rr(this,K),bi(this,ae,j))},h)),h.j=x}function Fh(h,x){const j=new ps;if(c.Image){const K=new Image;K.onload=y(wn,j,"TestLoadImage: loaded",!0,x,K),K.onerror=y(wn,j,"TestLoadImage: error",!1,x,K),K.onabort=y(wn,j,"TestLoadImage: abort",!1,x,K),K.ontimeout=y(wn,j,"TestLoadImage: timeout",!1,x,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=h}else x(!1)}function tu(h,x){const j=new ps,K=new AbortController,ae=setTimeout(()=>{K.abort(),wn(j,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:K.signal}).then(me=>{clearTimeout(ae),me.ok?wn(j,"TestPingServer: ok",!0,x):wn(j,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),wn(j,"TestPingServer: error",!1,x)})}function wn(h,x,j,K,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),K(j)}catch{}}function jh(){this.g=new pa}function nu(h,x,j){const K=j||"";try{Ei(h,function(ae,me){let Ae=ae;d(ae)&&(Ae=fa(ae)),x.push(K+me+"="+encodeURIComponent(Ae))})}catch(ae){throw x.push(K+"type="+encodeURIComponent("_badmap")),ae}}function Wr(h){this.l=h.Ub||null,this.j=h.eb||!1}T(Wr,fs),Wr.prototype.g=function(){return new Es(this.l,this.j)},Wr.prototype.i=function(h){return function(){return h}}({});function Es(h,x){We.call(this),this.D=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Es,We),r=Es.prototype,r.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=x,this.readyState=1,or(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(x.body=h),(this.D||c).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ru(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ru(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?sr(this):or(this),this.readyState==3&&ru(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,sr(this))},r.Qa=function(h){this.g&&(this.response=h,sr(this))},r.ga=function(){this.g&&sr(this)};function sr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,or(h)}r.setRequestHeader=function(h,x){this.u.append(h,x)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var j=x.next();!j.done;)j=j.value,h.push(j[0]+": "+j[1]),j=x.next();return h.join(`\r
`)};function or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Kr(h){let x="";return V(h,function(j,K){x+=K,x+=":",x+=j,x+=`\r
`}),x}function Ai(h,x,j){e:{for(K in j){var K=!1;break e}K=!0}K||(j=Kr(j),typeof h=="string"?j!=null&&encodeURIComponent(String(j)):pt(h,x,j))}function Et(h){We.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Et,We);var Vh=/^https?$/i,Ia=["POST","PUT"];r=Et.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,x,j,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tr.g(),this.v=this.o?Ys(this.o):Ys(tr),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(me){Ts(this,me);return}if(h=j||"",j=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var ae in K)j.set(ae,K[ae]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const me of K.keys())j.set(me,K.get(me));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(j.keys()).find(me=>me.toLowerCase()=="content-type"),ae=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ia,x,void 0))||K||ae||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ae]of j)this.g.setRequestHeader(me,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uo(this),this.u=!0,this.g.send(h),this.u=!1}catch(me){Ts(this,me)}};function Ts(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.m=5,lo(h),xn(h)}function lo(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xe(this,"complete"),Xe(this,"abort"),xn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xn(this,!0)),Et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ca(this):this.bb())},r.bb=function(){Ca(this)};function Ca(h){if(h.h&&typeof l<"u"&&(!h.v[1]||En(h)!=4||h.Z()!=2)){if(h.u&&En(h)==4)Yn(h.Ea,0,h);else if(Xe(h,"readystatechange"),En(h)==4){h.h=!1;try{const Ae=h.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var j;if(!(j=x)){var K;if(K=Ae===0){var ae=String(h.D).match(_s)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),K=!Vh.test(ae?ae.toLowerCase():"")}j=K}if(j)Xe(h,"complete"),Xe(h,"success");else{h.m=6;try{var me=2<En(h)?h.g.statusText:""}catch{me=""}h.l=me+" ["+h.Z()+"]",lo(h)}}finally{xn(h)}}}}function xn(h,x){if(h.g){uo(h);const j=h.g,K=h.v[0]?()=>{}:null;h.g=null,h.v=null,x||Xe(h,"ready");try{j.onreadystatechange=K}catch{}}}function uo(h){h.I&&(c.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function En(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),da(x)}};function ba(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function co(h){const x={};h=(h.g&&2<=En(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<h.length;K++){if(I(h[K]))continue;var j=R(h[K]);const ae=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const me=x[ae]||[];x[ae]=me,me.push(j)}P(x,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(h,x,j){return j&&j.internalChannelParams&&j.internalChannelParams[h]||x}function Aa(h){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ir("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ir("baseRetryDelayMs",5e3,h),this.cb=Ir("retryDelaySeedMs",1e4,h),this.Wa=Ir("forwardChannelMaxRetries",2,h),this.wa=Ir("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new vs(h&&h.concurrentRequestLimit),this.Da=new jh,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Aa.prototype,r.la=8,r.G=1,r.connect=function(h,x,j,K){Ot(0),this.W=h,this.H=x||{},j&&K!==void 0&&(this.H.OSID=j,this.H.OAID=K),this.F=this.X,this.I=au(this,null,this.W),Cr(this)};function Jt(h){if(ho(h),h.G==3){var x=h.U++,j=On(h.I);if(pt(j,"SID",h.K),pt(j,"RID",x),pt(j,"TYPE","terminate"),Gr(h,j),x=new nr(h,h.j,x),x.L=2,x.v=Ii(On(j)),j=!1,c.navigator&&c.navigator.sendBeacon)try{j=c.navigator.sendBeacon(x.v.toString(),"")}catch{}!j&&c.Image&&(new Image().src=x.v,j=!0),j||(x.g=lu(x.j,null),x.g.ea(x.v)),x.F=Date.now(),mt(x)}ou(h)}function ar(h){h.g&&(ka(h),h.g.cancel(),h.g=null)}function ho(h){ar(h),h.u&&(c.clearTimeout(h.u),h.u=null),mo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function Cr(h){if(!Pn(h.h)&&!h.s){h.s=!0;var x=h.Ga;Z||W(),re||(Z(),re=!0),G.add(x,h),h.B=0}}function Uh(h,x){return Gl(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=x.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Zn(p(h.Ga,h,x),su(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ae=new nr(this,this.j,h);let me=this.o;if(this.S&&(me?(me=_(me),k(me,this.S)):me=this.S),this.m!==null||this.O||(ae.H=me,me=null),this.P)e:{for(var x=0,j=0;j<this.i.length;j++){t:{var K=this.i[j];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(x+=K,4096<x){x=j;break e}if(x===4096||j===this.i.length-1){x=j+1;break e}}x=1e3}else x=1e3;x=ki(this,ae,x),j=On(this.I),pt(j,"RID",h),pt(j,"CVER",22),this.D&&pt(j,"X-HTTP-Session-Id",this.D),Gr(this,j),me&&(this.O?x="headers="+encodeURIComponent(String(Kr(me)))+"&"+x:this.m&&Ai(j,this.m,me)),Ta(this.h,ae),this.Ua&&pt(j,"TYPE","init"),this.P?(pt(j,"$req",x),pt(j,"SID","null"),ae.T=!0,io(ae,j,null)):io(ae,j,x),this.G=2}}else this.G==3&&(h?fo(this,h):this.i.length==0||Pn(this.h)||fo(this))};function fo(h,x){var j;x?j=x.l:j=h.U++;const K=On(h.I);pt(K,"SID",h.K),pt(K,"RID",j),pt(K,"AID",h.T),Gr(h,K),h.m&&h.o&&Ai(K,h.m,h.o),j=new nr(h,h.j,j,h.B+1),h.m===null&&(j.H=h.o),x&&(h.i=x.D.concat(h.i)),x=ki(h,j,1e3),j.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ta(h.h,j),io(j,K,x)}function Gr(h,x){h.H&&V(h.H,function(j,K){pt(x,K,j)}),h.l&&Ei({},function(j,K){pt(x,K,j)})}function ki(h,x,j){j=Math.min(h.i.length,j);var K=h.l?p(h.l.Na,h.l,h):null;e:{var ae=h.i;let me=-1;for(;;){const Ae=["count="+j];me==-1?0<j?(me=ae[0].g,Ae.push("ofs="+me)):me=0:Ae.push("ofs="+me);let dt=!0;for(let Vt=0;Vt<j;Vt++){let ot=ae[Vt].g;const Ht=ae[Vt].map;if(ot-=me,0>ot)me=Math.max(0,ae[Vt].g-100),dt=!1;else try{nu(Ht,Ae,"req"+ot+"_")}catch{K&&K(Ht)}}if(dt){K=Ae.join("&");break e}}}return h=h.i.splice(0,j),x.D=h,K}function Ss(h){if(!h.g&&!h.u){h.Y=1;var x=h.Fa;Z||W(),re||(Z(),re=!0),G.add(x,h),h.v=0}}function po(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Zn(p(h.Fa,h),su(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Zn(p(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),ar(this),iu(this))};function ka(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function iu(h){h.g=new nr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var x=On(h.qa);pt(x,"RID","rpc"),pt(x,"SID",h.K),pt(x,"AID",h.T),pt(x,"CI",h.F?"0":"1"),!h.F&&h.ja&&pt(x,"TO",h.ja),pt(x,"TYPE","xmlhttp"),Gr(h,x),h.m&&h.o&&Ai(x,h.m,h.o),h.L&&(h.g.I=h.L);var j=h.g;h=h.ia,j.L=1,j.v=Ii(On(x)),j.m=null,j.P=!0,wa(j,h)}r.Za=function(){this.C!=null&&(this.C=null,ar(this),po(this),Ot(19))};function mo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function go(h,x){var j=null;if(h.g==x){mo(h),ka(h),h.g=null;var K=2}else if(fn(h.h,x))j=x.D,Ql(h.h,x),K=1;else return;if(h.G!=0){if(x.o)if(K==1){j=x.m?x.m.length:0,x=Date.now()-x.F;var ae=h.B;K=ds(),Xe(K,new eo(K,j)),Cr(h)}else Ss(h);else if(ae=x.s,ae==3||ae==0&&0<x.X||!(K==1&&Uh(h,x)||K==2&&po(h)))switch(j&&0<j.length&&(x=h.h,x.i=x.i.concat(j)),ae){case 1:Qr(h,5);break;case 4:Qr(h,10);break;case 3:Qr(h,6);break;default:Qr(h,2)}}}function su(h,x){let j=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(j*=2),j*x}function Qr(h,x){if(h.j.info("Error code "+x),x==2){var j=p(h.fb,h),K=h.Xa;const ae=!K;K=new $r(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ws(K,"https"),Ii(K),ae?Fh(K.toString(),j):tu(K.toString(),j)}else Ot(2);h.G=0,h.l&&h.l.sa(x),ou(h),ho(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function ou(h){if(h.G=0,h.ka=[],h.l){const x=Jl(h.h);(x.length!=0||h.i.length!=0)&&(w(h.ka,x),w(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function au(h,x,j){var K=j instanceof $r?On(j):new $r(j);if(K.g!="")x&&(K.g=x+"."+K.g),Ti(K,K.s);else{var ae=c.location;K=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;var me=new $r(null);K&&ws(me,K),x&&(me.g=x),ae&&Ti(me,ae),j&&(me.l=j),K=me}return j=h.D,x=h.ya,j&&x&&pt(K,j,x),pt(K,"VER",h.la),Gr(h,K),K}function lu(h,x,j){if(x&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Ca&&!h.pa?new Et(new Wr({eb:j})):new Et(h.pa),x.Ha(h.J),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ra(){}r=Ra.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function yo(){}yo.prototype.g=function(h,x){return new dn(h,x)};function dn(h,x){We.call(this),this.g=new Aa(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(h?h["X-WebChannel-Client-Profile"]=x.va:h={"X-WebChannel-Client-Profile":x.va}),this.g.S=h,(h=x&&x.Sb)&&!I(h)&&(this.g.m=h),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!I(x)&&(this.g.D=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new br(this)}T(dn,We),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Jt(this.g)},dn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var j={};j.__data__=h,h=j}else this.u&&(j={},j.__data__=fa(h),h=j);x.i.push(new Kl(x.Ya++,h)),x.G==3&&Cr(x)},dn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,dn.aa.N.call(this)};function uu(h){wr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const j in x){h=j;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}T(uu,wr);function cu(){Zs.call(this),this.status=1}T(cu,Zs);function br(h){this.g=h}T(br,Ra),br.prototype.ua=function(){Xe(this.g,"a")},br.prototype.ta=function(h){Xe(this.g,new uu(h))},br.prototype.sa=function(h){Xe(this.g,new cu)},br.prototype.ra=function(){Xe(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,n1=function(){return new yo},t1=function(){return ds()},e1=Er,dm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,pc=no,zl.COMPLETE="complete",Z0=zl,Xs.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",We.prototype.listen=We.prototype.K,sl=Xs,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,X0=Et}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});const C_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Fm("@firebase/firestore");function Vo(){return Bs.logLevel}function xe(r,...e){if(Bs.logLevel<=nt.DEBUG){const t=e.map(Um);Bs.debug(`Firestore (${na}): ${r}`,...t)}}function fi(r,...e){if(Bs.logLevel<=nt.ERROR){const t=e.map(Um);Bs.error(`Firestore (${na}): ${r}`,...t)}}function Go(r,...e){if(Bs.logLevel<=nt.WARN){const t=e.map(Um);Bs.warn(`Firestore (${na}): ${r}`,...t)}}function Um(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(r="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+r;throw fi(e),new Error(e)}function ht(r,e){r||Qe()}function Je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class tA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nA{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0);let n=this.i;const i=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ai,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},c=f=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ai)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ht(typeof n.accessToken=="string"),new r1(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string"),new ln(e)}}class rA{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class iA{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ht(this.o===void 0);const n=a=>{a.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht(typeof t.token=="string"),this.R=t.token,new sA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=aA(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%e.length))}return n}}function st(r,e){return r<e?-1:r>e?1:0}function Qo(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Lt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Lt(0,0))}static max(){return new Ye(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,n){t===void 0?t=0:t>e.length&&Qe(),n===void 0?n=e.length-t:n>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=Or.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=Or.isNumericId(e),i=Or.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Or.extractNumericId(e).compare(Or.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zi.fromString(e.substring(4,e.length-2))}}class wt extends Or{construct(e,t,n){return new wt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ne(we.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new wt(t)}static emptyPath(){return new wt([])}}const lA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Or{construct(e,t,n){return new en(e,t,n)}static isValidIdentifier(e){return lA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new en(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Ne(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ne(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ne(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(n+=c,i++):(a(),i++)}if(a(),l)throw new Ne(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(wt.fromString(e))}static fromName(e){return new qe(wt.fromString(e).popFirst(5))}static empty(){return new qe(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new wt(e.slice()))}}function uA(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(n===1e9?new Lt(t+1,0):new Lt(t,n));return new ns(i,qe.empty(),e)}function cA(r){return new ns(r.readTime,r.key,-1)}class ns{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ns(Ye.min(),qe.empty(),-1)}static max(){return new ns(Ye.max(),qe.empty(),-1)}}function hA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(r.documentKey,e.documentKey),t!==0?t:st(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(r){if(r.code!==we.FAILED_PRECONDITION||r.message!==fA)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(t){return _e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,n)=>{t(e)})}static reject(e){return new _e((t,n)=>{n(e)})}static waitFor(e){return new _e((t,n)=>{let i=0,a=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++a,l&&a===i&&t()},f=>n(f))}),l=!0,a===i&&t()})}static or(e){let t=_e.resolve(!1);for(const n of e)t=t.next(i=>i?_e.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new _e((n,i)=>{const a=e.length,l=new Array(a);let c=0;for(let f=0;f<a;f++){const d=f;t(e[d]).next(v=>{l[d]=v,++c,c===a&&n(l)},v=>i(v))}})}static doWhile(e,t){return new _e((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}function pA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ia(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xc.oe=-1;function Zc(r){return r==null}function xc(r){return r===0&&1/r==-1/0}function mA(r){return typeof r=="number"&&Number.isInteger(r)&&!xc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=b_(e)),e=yA(r.get(t),e);return b_(e)}function yA(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function b_(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function us(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function vA(r,e){const t=[];for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.push(e(r[n],n,r));return t}function s1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Zt.RED,this.left=i??Zt.EMPTY,this.right=a??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Zt(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(e,t,n,i,a){return this}insert(e,t,n){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new k_(this.data.getIterator())}getIteratorFrom(e){return new k_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class k_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new qt(en.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new o1("Invalid base64 string: "+a):a}}(e);return new tn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const _A=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(r){if(ht(!!r),typeof r=="string"){let e=0;const t=_A.exec(r);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Nt(r.seconds),nanos:Nt(r.nanos)}}function Nt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function is(r){return typeof r=="string"?tn.fromBase64String(r):tn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function eh(r){const e=r.mapValue.fields.__previous_value__;return Bm(e)?eh(e):e}function vl(r){const e=rs(r.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,n,i,a,l,c,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d}}class _l{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ss(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bm(r)?4:TA(r)?9007199254740991:EA(r)?10:11:Qe()}function Vr(r,e){if(r===e)return!0;const t=ss(r);if(t!==ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return vl(r).isEqual(vl(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=rs(i.timestampValue),c=rs(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,a){return is(i.bytesValue).isEqual(is(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,a){return Nt(i.geoPointValue.latitude)===Nt(a.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(a.geoPointValue.longitude)}(r,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Nt(i.integerValue)===Nt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Nt(i.doubleValue),c=Nt(a.doubleValue);return l===c?xc(l)===xc(c):isNaN(l)&&isNaN(c)}return!1}(r,e);case 9:return Qo(r.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(A_(l)!==A_(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Vr(l[f],c[f])))return!1;return!0}(r,e);default:return Qe()}}function wl(r,e){return(r.values||[]).find(t=>Vr(t,e))!==void 0}function Jo(r,e){if(r===e)return 0;const t=ss(r),n=ss(e);if(t!==n)return st(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(r.booleanValue,e.booleanValue);case 2:return function(a,l){const c=Nt(a.integerValue||a.doubleValue),f=Nt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(r,e);case 3:return R_(r.timestampValue,e.timestampValue);case 4:return R_(vl(r),vl(e));case 5:return st(r.stringValue,e.stringValue);case 6:return function(a,l){const c=is(a),f=is(l);return c.compareTo(f)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const c=a.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const v=st(c[d],f[d]);if(v!==0)return v}return st(c.length,f.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const c=st(Nt(a.latitude),Nt(l.latitude));return c!==0?c:st(Nt(a.longitude),Nt(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return P_(r.arrayValue,e.arrayValue);case 10:return function(a,l){var c,f,d,v;const g=a.fields||{},p=l.fields||{},y=(c=g.value)===null||c===void 0?void 0:c.arrayValue,T=(f=p.value)===null||f===void 0?void 0:f.arrayValue,S=st(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((v=T==null?void 0:T.values)===null||v===void 0?void 0:v.length)||0);return S!==0?S:P_(y,T)}(r.mapValue,e.mapValue);case 11:return function(a,l){if(a===ac.mapValue&&l===ac.mapValue)return 0;if(a===ac.mapValue)return 1;if(l===ac.mapValue)return-1;const c=a.fields||{},f=Object.keys(c),d=l.fields||{},v=Object.keys(d);f.sort(),v.sort();for(let g=0;g<f.length&&g<v.length;++g){const p=st(f[g],v[g]);if(p!==0)return p;const y=Jo(c[f[g]],d[v[g]]);if(y!==0)return y}return st(f.length,v.length)}(r.mapValue,e.mapValue);default:throw Qe()}}function R_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return st(r,e);const t=rs(r),n=rs(e),i=st(t.seconds,n.seconds);return i!==0?i:st(t.nanos,n.nanos)}function P_(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=Jo(t[i],n[i]);if(a)return a}return st(t.length,n.length)}function Yo(r){return pm(r)}function pm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=rs(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return is(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return qe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=pm(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of n)a?a=!1:i+=",",i+=`${l}:${pm(t.fields[l])}`;return i+"}"}(r.mapValue):Qe()}function mc(r){switch(ss(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(r);return e?16+mc(e):16;case 5:return 2*r.stringValue.length;case 6:return is(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+mc(a),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return us(n.fields,(a,l)=>{i+=a.length+mc(l)}),i}(r.mapValue);default:throw Qe()}}function O_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function mm(r){return!!r&&"integerValue"in r}function qm(r){return!!r&&"arrayValue"in r}function x_(r){return!!r&&"nullValue"in r}function N_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gc(r){return!!r&&"mapValue"in r}function EA(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return us(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=hl(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(r.arrayValue.values[t]);return e}return Object.assign({},r)}function TA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=en.emptyPath(),n={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,n,i),n={},i=[],t=c.popLast()}l?n[c.lastSegment()]=hl(l):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];gc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){us(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Rn(hl(this.value))}}function a1(r){const e=[];return us(r.fields,(t,n)=>{const i=new en([t]);if(gc(n)){const a=a1(n.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,n,i,a,l,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new un(e,0,Ye.min(),Ye.min(),Ye.min(),Rn.empty(),0)}static newFoundDocument(e,t,n,i){return new un(e,1,t,Ye.min(),n,i,0)}static newNoDocument(e,t){return new un(e,2,t,Ye.min(),Ye.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Ye.min(),Ye.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.position=e,this.inclusive=t}}function L_(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],l=r.position[i];if(a.field.isKeyField()?n=qe.comparator(qe.fromName(l.referenceValue),t.key):n=Jo(l,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function D_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Vr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t="asc"){this.field=e,this.dir=t}}function SA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{}class jt extends l1{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new CA(e,t,n):t==="array-contains"?new kA(e,n):t==="in"?new RA(e,n):t==="not-in"?new PA(e,n):t==="array-contains-any"?new OA(e,n):new jt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new bA(e,n):new AA(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jo(t,this.value)):t!==null&&ss(this.value)===ss(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends l1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new gr(e,t)}matches(e){return u1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function u1(r){return r.op==="and"}function c1(r){return IA(r)&&u1(r)}function IA(r){for(const e of r.filters)if(e instanceof gr)return!1;return!0}function gm(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+Yo(r.value);if(c1(r))return r.filters.map(e=>gm(e)).join(",");{const e=r.filters.map(t=>gm(t)).join(",");return`${r.op}(${e})`}}function h1(r,e){return r instanceof jt?function(n,i){return i instanceof jt&&n.op===i.op&&n.field.isEqual(i.field)&&Vr(n.value,i.value)}(r,e):r instanceof gr?function(n,i){return i instanceof gr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,l,c)=>a&&h1(l,i.filters[c]),!0):!1}(r,e):void Qe()}function f1(r){return r instanceof jt?function(t){return`${t.field.canonicalString()} ${t.op} ${Yo(t.value)}`}(r):r instanceof gr?function(t){return t.op.toString()+" {"+t.getFilters().map(f1).join(" ,")+"}"}(r):"Filter"}class CA extends jt{constructor(e,t,n){super(e,t,n),this.key=qe.fromName(n.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class bA extends jt{constructor(e,t){super(e,"in",t),this.keys=d1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AA extends jt{constructor(e,t){super(e,"not-in",t),this.keys=d1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function d1(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>qe.fromName(n.referenceValue))}class kA extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qm(t)&&wl(t.arrayValue,this.value)}}class RA extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wl(this.value.arrayValue,t)}}class PA extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!wl(this.value.arrayValue,t)}}class OA extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>wl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t=null,n=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.ue=null}}function M_(r,e=null,t=[],n=[],i=null,a=null,l=null){return new xA(r,e,t,n,i,a,l)}function zm(r){const e=Je(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>gm(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Yo(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Yo(n)).join(",")),e.ue=t}return e.ue}function Hm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!SA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!h1(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!D_(r.startAt,e.startAt)&&D_(r.endAt,e.endAt)}function ym(r){return qe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t=null,n=[],i=[],a=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function NA(r,e,t,n,i,a,l,c){return new sa(r,e,t,n,i,a,l,c)}function $m(r){return new sa(r)}function F_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function p1(r){return r.collectionGroup!==null}function fl(r){const e=Je(r);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new qt(en.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new El(a,n))}),t.has(en.keyField().canonicalString())||e.ce.push(new El(en.keyField(),n))}return e.ce}function Dr(r){const e=Je(r);return e.le||(e.le=m1(e,fl(r))),e.le}function LA(r){const e=Je(r);return e.he||(e.he=m1(e,r.explicitOrderBy)),e.he}function m1(r,e){if(r.limitType==="F")return M_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new El(i.field,a)});const t=r.endAt?new Nc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Nc(r.startAt.position,r.startAt.inclusive):null;return M_(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function vm(r,e){const t=r.filters.concat([e]);return new sa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Lc(r,e,t){return new sa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function th(r,e){return Hm(Dr(r),Dr(e))&&r.limitType===e.limitType}function g1(r){return`${zm(Dr(r))}|lt:${r.limitType}`}function Uo(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>f1(i)).join(", ")}]`),Zc(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Yo(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Yo(i)).join(",")),`Target(${n})`}(Dr(r))}; limitType=${r.limitType})`}function nh(r,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):qe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,i){for(const a of fl(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(l,c,f){const d=L_(l,c,f);return l.inclusive?d<=0:d<0}(n.startAt,fl(n),i)||n.endAt&&!function(l,c,f){const d=L_(l,c,f);return l.inclusive?d>=0:d>0}(n.endAt,fl(n),i))}(r,e)}function DA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function y1(r){return(e,t)=>{let n=!1;for(const i of fl(r)){const a=MA(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function MA(r,e,t){const n=r.field.isKeyField()?qe.comparator(e.key,t.key):function(a,l,c){const f=l.data.field(a),d=c.data.field(a);return f!==null&&d!==null?Jo(f,d):Qe()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Qe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return s1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new At(qe.comparator);function di(){return FA}const v1=new At(qe.comparator);function ol(...r){let e=v1;for(const t of r)e=e.insert(t.key,t);return e}function _1(r){let e=v1;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function js(){return dl()}function w1(){return dl()}function dl(){return new Ws(r=>r.toString(),(r,e)=>r.isEqual(e))}const jA=new At(qe.comparator),VA=new qt(qe.comparator);function rt(...r){let e=VA;for(const t of r)e=e.add(t);return e}const UA=new qt(st);function BA(){return UA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function E1(r){return{integerValue:""+r}}function qA(r,e){return mA(e)?E1(e):Wm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function zA(r,e,t){return r instanceof Tl?function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Bm(a)&&(a=eh(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):r instanceof Sl?S1(r,e):r instanceof Il?I1(r,e):function(i,a){const l=T1(i,a),c=j_(l)+j_(i.Pe);return mm(l)&&mm(i.Pe)?E1(c):Wm(i.serializer,c)}(r,e)}function HA(r,e,t){return r instanceof Sl?S1(r,e):r instanceof Il?I1(r,e):t}function T1(r,e){return r instanceof Dc?function(n){return mm(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Tl extends rh{}class Sl extends rh{constructor(e){super(),this.elements=e}}function S1(r,e){const t=C1(e);for(const n of r.elements)t.some(i=>Vr(i,n))||t.push(n);return{arrayValue:{values:t}}}class Il extends rh{constructor(e){super(),this.elements=e}}function I1(r,e){let t=C1(e);for(const n of r.elements)t=t.filter(i=>!Vr(i,n));return{arrayValue:{values:t}}}class Dc extends rh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function j_(r){return Nt(r.integerValue||r.doubleValue)}function C1(r){return qm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t){this.field=e,this.transform=t}}function WA(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof Sl&&i instanceof Sl||n instanceof Il&&i instanceof Il?Qo(n.elements,i.elements,Vr):n instanceof Dc&&i instanceof Dc?Vr(n.Pe,i.Pe):n instanceof Tl&&i instanceof Tl}(r.transform,e.transform)}class KA{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ih{}function b1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Km(r.key,mr.none()):new Ol(r.key,r.data,mr.none());{const t=r.data,n=Rn.empty();let i=new qt(en.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?n.delete(a):n.set(a,l),i=i.add(a)}return new cs(r.key,n,new Fn(i.toArray()),mr.none())}}function GA(r,e,t){r instanceof Ol?function(i,a,l){const c=i.value.clone(),f=U_(i.fieldTransforms,a,l.transformResults);c.setAll(f),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(r,e,t):r instanceof cs?function(i,a,l){if(!yc(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=U_(i.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(A1(i)),f.setAll(c),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(r,e,t):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function pl(r,e,t,n){return r instanceof Ol?function(a,l,c,f){if(!yc(a.precondition,l))return c;const d=a.value.clone(),v=B_(a.fieldTransforms,f,l);return d.setAll(v),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(r,e,t,n):r instanceof cs?function(a,l,c,f){if(!yc(a.precondition,l))return c;const d=B_(a.fieldTransforms,f,l),v=l.data;return v.setAll(A1(a)),v.setAll(d),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(r,e,t,n):function(a,l,c){return yc(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(r,e,t)}function QA(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),a=T1(n.transform,i||null);a!=null&&(t===null&&(t=Rn.empty()),t.set(n.field,a))}return t||null}function V_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Qo(n,i,(a,l)=>WA(a,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ol extends ih{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cs extends ih{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function A1(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function U_(r,e,t){const n=new Map;ht(r.length===t.length);for(let i=0;i<t.length;i++){const a=r[i],l=a.transform,c=e.data.field(a.field);n.set(a.field,HA(l,c,t[i]))}return n}function B_(r,e,t){const n=new Map;for(const i of r){const a=i.transform,l=t.data.field(i.field);n.set(i.field,zA(a,l,e))}return n}class Km extends ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JA extends ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&GA(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=pl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=pl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=w1();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(i.key)?null:c;const f=b1(l,c);f!==null&&n.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rt())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,(t,n)=>V_(t,n))&&Qo(this.baseMutations,e.baseMutations,(t,n)=>V_(t,n))}}class Gm{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ht(e.mutations.length===n.length);let i=function(){return jA}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,n[l].version);return new Gm(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,at;function tk(r){switch(r){default:return Qe();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function k1(r){if(r===void 0)return fi("GRPC error has no .code"),we.UNKNOWN;switch(r){case Ft.OK:return we.OK;case Ft.CANCELLED:return we.CANCELLED;case Ft.UNKNOWN:return we.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return we.INTERNAL;case Ft.UNAVAILABLE:return we.UNAVAILABLE;case Ft.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Ft.NOT_FOUND:return we.NOT_FOUND;case Ft.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Ft.ABORTED:return we.ABORTED;case Ft.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Ft.DATA_LOSS:return we.DATA_LOSS;default:return Qe()}}(at=Ft||(Ft={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new Zi([4294967295,4294967295],0);function q_(r){const e=nk().encode(r),t=new Y0;return t.update(e),new Uint8Array(t.digest())}function z_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zi([t,n],0),new Zi([i,a],0)]}class Qm{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new al(`Invalid padding: ${t}`);if(n<0)throw new al(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new al(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Zi.fromNumber(this.Te)}de(e,t,n){let i=e.add(t.multiply(Zi.fromNumber(n)));return i.compare(rk)===1&&(i=new Zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=q_(e),[n,i]=z_(t);for(let a=0;a<this.hashCount;a++){const l=this.de(n,i,a);if(!this.Ee(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Qm(a,i,t);return n.forEach(c=>l.insert(c)),l}insert(e){if(this.Te===0)return;const t=q_(e),[n,i]=z_(t);for(let a=0;a<this.hashCount;a++){const l=this.de(n,i,a);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sh(Ye.min(),i,new At(st),di(),rt())}}class xl{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xl(n,t,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class R1{constructor(e,t){this.targetId=e,this.me=t}}class P1{constructor(e,t,n=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class H_{constructor(){this.fe=0,this.ge=$_(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=rt(),t=rt(),n=rt();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Qe()}}),new xl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=$_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ht(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ik{constructor(e){this.Be=e,this.Le=new Map,this.ke=di(),this.qe=lc(),this.Qe=lc(),this.Ke=new At(st)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.je(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.De(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((n,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,n=e.me.count,i=this.Ye(t);if(i){const a=i.target;if(ym(a))if(n===0){const l=new qe(a.path);this.We(t,l,un.newNoDocument(l,Ye.min()))}else ht(n===1);else{const l=this.Ze(t);if(l!==n){const c=this.Xe(e),f=c?this.et(c,e,l):1;if(f!==0){this.He(t);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,d)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let l,c;try{l=is(n).toUint8Array()}catch(f){if(f instanceof o1)return Go("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new Qm(l,i,a)}catch(f){return Go(f instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.Te===0?null:c}et(e,t,n){return t.me.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const l=this.Be.nt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.We(t,a,null),i++)}),i}it(e){const t=new Map;this.Le.forEach((a,l)=>{const c=this.Ye(l);if(c){if(a.current&&ym(c.target)){const f=new qe(c.target.path);this.st(f).has(l)||this.ot(l,f)||this.We(l,f,un.newNoDocument(f,e))}a.be&&(t.set(l,a.ve()),a.Ce())}});let n=rt();this.Qe.forEach((a,l)=>{let c=!0;l.forEachWhile(f=>{const d=this.Ye(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.ke.forEach((a,l)=>l.setReadTime(e));const i=new sh(e,t,this.Ke,this.ke,n);return this.ke=di(),this.qe=lc(),this.Qe=lc(),this.Ke=new At(st),i}Ue(e,t){if(!this.je(e))return;const n=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new H_,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new qt(st),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qt(st),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new H_),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function lc(){return new At(qe.comparator)}function $_(){return new At(qe.comparator)}const sk={asc:"ASCENDING",desc:"DESCENDING"},ok={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ak={and:"AND",or:"OR"};class lk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _m(r,e){return r.useProto3Json||Zc(e)?e:{value:e}}function Mc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function uk(r,e){return Mc(r,e.toTimestamp())}function Mr(r){return ht(!!r),Ye.fromTimestamp(function(t){const n=rs(t);return new Lt(n.seconds,n.nanos)}(r))}function Jm(r,e){return wm(r,e).canonicalString()}function wm(r,e){const t=function(i){return new wt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function x1(r){const e=wt.fromString(r);return ht(j1(e)),e}function Em(r,e){return Jm(r.databaseId,e.path)}function yd(r,e){const t=x1(e);if(t.get(1)!==r.databaseId.projectId)throw new Ne(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ne(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new qe(L1(t))}function N1(r,e){return Jm(r.databaseId,e)}function ck(r){const e=x1(r);return e.length===4?wt.emptyPath():L1(e)}function Tm(r){return new wt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function L1(r){return ht(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function W_(r,e,t){return{name:Em(r,e),fields:t.value.mapValue.fields}}function hk(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Qe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,v){return d.useProto3Json?(ht(v===void 0||typeof v=="string"),tn.fromBase64String(v||"")):(ht(v===void 0||v instanceof Buffer||v instanceof Uint8Array),tn.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(d){const v=d.code===void 0?we.UNKNOWN:k1(d.code);return new Ne(v,d.message||"")}(l);t=new P1(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=yd(r,n.document.name),a=Mr(n.document.updateTime),l=n.document.createTime?Mr(n.document.createTime):Ye.min(),c=new Rn({mapValue:{fields:n.document.fields}}),f=un.newFoundDocument(i,a,l,c),d=n.targetIds||[],v=n.removedTargetIds||[];t=new vc(d,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=yd(r,n.document),a=n.readTime?Mr(n.readTime):Ye.min(),l=un.newNoDocument(i,a),c=n.removedTargetIds||[];t=new vc([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=yd(r,n.document),a=n.removedTargetIds||[];t=new vc([],a,i,null)}else{if(!("filter"in e))return Qe();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,l=new ek(i,a),c=n.targetId;t=new R1(c,l)}}return t}function fk(r,e){let t;if(e instanceof Ol)t={update:W_(r,e.key,e.value)};else if(e instanceof Km)t={delete:Em(r,e.key)};else if(e instanceof cs)t={update:W_(r,e.key,e.data),updateMask:Ek(e.fieldMask)};else{if(!(e instanceof JA))return Qe();t={verify:Em(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,l){const c=l.transform;if(c instanceof Tl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Il)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dc)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw Qe()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:uk(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Qe()}(r,e.precondition)),t}function dk(r,e){return r&&r.length>0?(ht(e!==void 0),r.map(t=>function(i,a){let l=i.updateTime?Mr(i.updateTime):Mr(a);return l.isEqual(Ye.min())&&(l=Mr(a)),new KA(l,i.transformResults||[])}(t,e))):[]}function pk(r,e){return{documents:[N1(r,e.path)]}}function D1(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=N1(r,i);const a=function(d){if(d.length!==0)return F1(gr.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(d){if(d.length!==0)return d.map(v=>function(p){return{field:Hi(p.field),direction:vk(p.dir)}}(v))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=_m(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ct:t,parent:i}}function mk(r,e,t,n){const{ct:i,parent:a}=D1(r,e),l={},c=[];let f=0;return t.forEach(d=>{const v="aggregate_"+f++;l[v]=d.alias,d.aggregateType==="count"?c.push({alias:v,count:{}}):d.aggregateType==="avg"?c.push({alias:v,avg:{field:Hi(d.fieldPath)}}):d.aggregateType==="sum"&&c.push({alias:v,sum:{field:Hi(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:i.structuredQuery},parent:i.parent},lt:l,parent:a}}function gk(r){let e=ck(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ht(n===1);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(g){const p=M1(g);return p instanceof gr&&c1(p)?p.getFilters():[p]}(t.where));let l=[];t.orderBy&&(l=function(g){return g.map(p=>function(T){return new El(Bo(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(t.orderBy));let c=null;t.limit&&(c=function(g){let p;return p=typeof g=="object"?g.value:g,Zc(p)?null:p}(t.limit));let f=null;t.startAt&&(f=function(g){const p=!!g.before,y=g.values||[];return new Nc(y,p)}(t.startAt));let d=null;return t.endAt&&(d=function(g){const p=!g.before,y=g.values||[];return new Nc(y,p)}(t.endAt)),NA(e,i,l,a,c,"F",f,d)}function yk(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function M1(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bo(t.unaryFilter.field);return jt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Bo(t.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bo(t.unaryFilter.field);return jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Bo(t.unaryFilter.field);return jt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}(r):r.fieldFilter!==void 0?function(t){return jt.create(Bo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return gr.create(t.compositeFilter.filters.map(n=>M1(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe()}}(t.compositeFilter.op))}(r):Qe()}function vk(r){return sk[r]}function _k(r){return ok[r]}function wk(r){return ak[r]}function Hi(r){return{fieldPath:r.canonicalString()}}function Bo(r){return en.fromServerFormat(r.fieldPath)}function F1(r){return r instanceof jt?function(t){if(t.op==="=="){if(N_(t.value))return{unaryFilter:{field:Hi(t.field),op:"IS_NAN"}};if(x_(t.value))return{unaryFilter:{field:Hi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N_(t.value))return{unaryFilter:{field:Hi(t.field),op:"IS_NOT_NAN"}};if(x_(t.value))return{unaryFilter:{field:Hi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(t.field),op:_k(t.op),value:t.value}}}(r):r instanceof gr?function(t){const n=t.getFilters().map(i=>F1(i));return n.length===1?n[0]:{compositeFilter:{op:wk(t.op),filters:n}}}(r):Qe()}function Ek(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function j1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,n,i,a=Ye.min(),l=Ye.min(),c=tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.ht=e}}function Sk(r){const e=gk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Lc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.ln=new Ck}addToCollectionParentIndex(e,t){return this.ln.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getIndexType(e,t){return _e.resolve(0)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,t){return _e.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return _e.resolve(ns.min())}updateCollectionGroup(e,t,n){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class Ck{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new qt(wt.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new qt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(41943040,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Xo(0)}static Qn(){return new Xo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_([r,e],[t,n]){const i=st(r,t);return i===0?st(e,n):i}class bk{constructor(e){this.Gn=e,this.buffer=new qt(G_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();G_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ak{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ia(t)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ra(t)}await this.Yn(3e5)})}}class kk{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return _e.resolve(Xc.oe);const n=new bk(t);return this.Zn.forEachTarget(e,i=>n.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>n.Hn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(K_)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let n,i,a,l,c,f,d;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(n=g,c=Date.now(),this.removeTargets(e,n,t))).next(g=>(a=g,f=Date.now(),this.removeOrphanedDocuments(e,n))).next(g=>(d=Date.now(),Vo()<=nt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(f-c)+`ms
	Removed ${g} documents in `+(d-f)+`ms
Total Duration: ${d-v}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function Rk(r,e){return new kk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.changes=new Ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?_e.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&pl(n.mutation,i,Fn.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,rt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=rt()){const i=js();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let l=ol();return a.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=js();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,rt()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,n,i){let a=di();const l=dl(),c=function(){return dl()}();return t.forEach((f,d)=>{const v=n.get(d.key);i.has(d.key)&&(v===void 0||v.mutation instanceof cs)?a=a.insert(d.key,d):v!==void 0?(l.set(d.key,v.mutation.getFieldMask()),pl(v.mutation,d,v.mutation.getFieldMask(),Lt.now())):l.set(d.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((d,v)=>l.set(d,v)),t.forEach((d,v)=>{var g;return c.set(d,new Ok(v,(g=l.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){const n=dl();let i=new At((l,c)=>l-c),a=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(f=>{const d=t.get(f);if(d===null)return;let v=n.get(f)||Fn.empty();v=c.applyToLocalView(d,v),n.set(f,v);const g=(i.get(c.batchId)||rt()).add(f);i=i.insert(c.batchId,g)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,v=f.value,g=w1();v.forEach(p=>{if(!a.has(p)){const y=b1(t.get(p),n.get(p));y!==null&&g.set(p,y),a=a.add(p)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,g))}return _e.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(l){return qe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):_e.resolve(js());let c=-1,f=a;return l.next(d=>_e.forEach(d,(v,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(v)?_e.resolve():this.remoteDocumentCache.getEntry(e,v).next(p=>{f=f.insert(v,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,f,d,rt())).next(v=>({batchId:c,changes:_1(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(n=>{let i=ol();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let l=ol();return this.indexManager.getCollectionParents(e,a).next(c=>_e.forEach(c,f=>{const d=function(g,p){return new sa(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(v=>{v.forEach((g,p)=>{l=l.insert(g,p)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(l=>{a.forEach((f,d)=>{const v=d.getKey();l.get(v)===null&&(l=l.insert(v,un.newInvalidDocument(v)))});let c=ol();return l.forEach((f,d)=>{const v=a.get(f);v!==void 0&&pl(v.mutation,d,Fn.empty(),Lt.now()),nh(t,d)&&(c=c.insert(f,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return _e.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Mr(i.createTime)}}(t)),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:Sk(i.bundledQuery),readTime:Mr(i.readTime)}}(t)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.overlays=new At(qe.comparator),this.dr=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}getOverlays(e,t){const n=js();return _e.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.Tt(e,t,a)}),_e.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.dr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.dr.delete(n)),_e.resolve()}getOverlaysForCollection(e,t,n){const i=js(),a=t.length+1,l=new qe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>n&&i.set(f.getKey(),f)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new At((d,v)=>d-v);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let v=a.get(d.largestBatchId);v===null&&(v=js(),a=a.insert(d.largestBatchId,v)),v.set(d.getKey(),d)}}const c=js(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((d,v)=>c.set(d,v)),!(c.size()>=i)););return _e.resolve(c)}Tt(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.dr.get(i.largestBatchId).delete(n.key);this.dr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new XA(t,n));let a=this.dr.get(t);a===void 0&&(a=rt(),this.dr.set(t,a)),this.dr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.Er=new qt(Gt.Ar),this.Rr=new qt(Gt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const n=new Gt(e,t);this.Er=this.Er.add(n),this.Rr=this.Rr.add(n)}mr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.gr(new Gt(e,t))}pr(e,t){e.forEach(n=>this.removeReference(n,t))}yr(e){const t=new qe(new wt([])),n=new Gt(t,e),i=new Gt(t,e+1),a=[];return this.Rr.forEachInRange([n,i],l=>{this.gr(l),a.push(l.key)}),a}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new qe(new wt([])),n=new Gt(t,e),i=new Gt(t,e+1);let a=rt();return this.Rr.forEachInRange([n,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Gt(e,0),n=this.Er.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Gt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return qe.comparator(e.key,t.key)||st(e.br,t.br)}static Vr(e,t){return st(e.br,t.br)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new qt(Gt.Ar)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new YA(a,t,n,i);this.mutationQueue.push(l);for(const c of i)this.vr=this.vr.add(new Gt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,t){return _e.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Fr(n),a=i<0?0:i;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([n,i],l=>{const c=this.Cr(l.br);a.push(c)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qt(st);return t.forEach(i=>{const a=new Gt(i,0),l=new Gt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,l],c=>{n=n.add(c.br)})}),_e.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;qe.isDocumentKey(a)||(a=a.child(""));const l=new Gt(new qe(a),0);let c=new qt(st);return this.vr.forEachWhile(f=>{const d=f.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(f.br)),!0)},l),_e.resolve(this.Mr(c))}Mr(e){const t=[];return e.forEach(n=>{const i=this.Cr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ht(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.vr;return _e.forEach(t.mutations,i=>{const a=new Gt(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=n})}Bn(e){}containsKey(e,t){const n=new Gt(t,0),i=this.vr.firstAfterOrEqual(n);return _e.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.Nr=e,this.docs=function(){return new At(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,l=this.Nr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _e.resolve(n?n.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let n=di();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():un.newInvalidDocument(i))}),_e.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=di();const l=t.path,c=new qe(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:v}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||hA(cA(v),n)<=0||(i.has(v.key)||nh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,t,n,i){Qe()}Br(e,t){return _e.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new jk(this)}getSize(e){return _e.resolve(this.size)}}class jk extends Pk{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(n)}),_e.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.persistence=e,this.Lr=new Ws(t=>zm(t),Hm),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.kr=0,this.qr=new Ym,this.targetCount=0,this.Qr=Xo.qn()}forEachTarget(e,t){return this.Lr.forEach((n,i)=>t(i)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.kr&&(this.kr=t),_e.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Xo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.Un(t),_e.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.Lr.forEach((l,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Lr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),_e.waitFor(a).next(()=>i)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const n=this.Lr.get(t)||null;return _e.resolve(n)}addMatchingKeys(e,t,n){return this.qr.mr(t,n),_e.resolve()}removeMatchingKeys(e,t,n){this.qr.pr(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qr.Sr(t);return _e.resolve(n)}containsKey(e,t){return _e.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Xc(0),this.Ur=!1,this.Ur=!0,this.Wr=new Dk,this.referenceDelegate=e(this),this.Gr=new Vk(this),this.indexManager=new Ik,this.remoteDocumentCache=function(i){return new Fk(i)}(n=>this.referenceDelegate.zr(n)),this.serializer=new Tk(t),this.jr=new Nk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Kr[e.toKey()];return n||(n=new Mk(t,this.referenceDelegate),this.Kr[e.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,n){xe("MemoryPersistence","Starting transaction:",e);const i=new Uk(this.$r.next());return this.referenceDelegate.Hr(),n(i).next(a=>this.referenceDelegate.Jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Yr(e,t){return _e.or(Object.values(this.Kr).map(n=>()=>n.containsKey(e,t)))}}class Uk extends dA{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Zr=new Ym,this.Xr=null}static ei(e){return new Xm(e)}get ti(){if(this.Xr)return this.Xr;throw Qe()}addReference(e,t,n){return this.Zr.addReference(n,t),this.ti.delete(n.toString()),_e.resolve()}removeReference(e,t,n){return this.Zr.removeReference(n,t),this.ti.add(n.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),_e.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.ti.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.ti,n=>{const i=qe.fromPath(n);return this.ni(e,i).next(a=>{a||t.removeEntry(i,Ye.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(n=>{n?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return _e.or([()=>_e.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Fc{constructor(e,t){this.persistence=e,this.ri=new Ws(n=>gA(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=Rk(this,t)}static ei(e,t){return new Fc(e,t)}Hr(){}Jr(e){return _e.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}nr(e){let t=0;return this.er(e,n=>{t++}).next(()=>t)}er(e,t){return _e.forEach(this.ri,(n,i)=>this.ir(e,n,i).next(a=>a?_e.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.Br(e,l=>this.ir(e,l,t).next(c=>{c||(n++,a.removeEntry(l,Ye.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),_e.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),_e.resolve()}removeReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),_e.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mc(e.data.value)),t}ir(e,t,n){return _e.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return _e.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Wi=n,this.Gi=i}static zi(e,t){let n=rt(),i=rt();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Zm(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return DC()?8:pA(hn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.Xi(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.es(e,t,i,n).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new Bk;return this.ts(e,t,l).next(c=>{if(a.result=c,this.Hi)return this.ns(e,t,l,c.size)})}).next(()=>a.result)}ns(e,t,n,i){return n.documentReadCount<this.Ji?(Vo()<=nt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),_e.resolve()):(Vo()<=nt.DEBUG&&xe("QueryEngine","Query:",Uo(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Yi*i?(Vo()<=nt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(t))):_e.resolve())}Xi(e,t){if(F_(t))return _e.resolve(null);let n=Dr(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Lc(t,null,"F"),n=Dr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=rt(...a);return this.Zi.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,n).next(f=>{const d=this.rs(t,c);return this.ss(t,d,l,f.readTime)?this.Xi(e,Lc(t,null,"F")):this.os(e,d,t,f)}))})))}es(e,t,n,i){return F_(t)||i.isEqual(Ye.min())?_e.resolve(null):this.Zi.getDocuments(e,n).next(a=>{const l=this.rs(t,a);return this.ss(t,l,n,i)?_e.resolve(null):(Vo()<=nt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uo(t)),this.os(e,l,t,uA(i,-1)).next(c=>c))})}rs(e,t){let n=new qt(y1(e));return t.forEach((i,a)=>{nh(e,a)&&(n=n.add(a))}),n}ss(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ts(e,t,n){return Vo()<=nt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.Zi.getDocumentsMatchingQuery(e,t,ns.min(),n)}os(e,t,n,i){return this.Zi.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,n,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new At(st),this.cs=new Ws(a=>zm(a),Hm),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(n)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xk(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Hk(r,e,t,n){return new zk(r,e,t,n)}async function U1(r,e){const t=Je(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],c=[];let f=rt();for(const d of i){l.push(d.batchId);for(const v of d.mutations)f=f.add(v.key)}for(const d of a){c.push(d.batchId);for(const v of d.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(n,f).next(d=>({Ts:d,removedBatchIds:l,addedBatchIds:c}))})})}function $k(r,e){const t=Je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(c,f,d,v){const g=d.batch,p=g.keys();let y=_e.resolve();return p.forEach(T=>{y=y.next(()=>v.getEntry(f,T)).next(S=>{const w=d.docVersions.get(T);ht(w!==null),S.version.compareTo(w)<0&&(g.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),v.addEntry(S)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(f,g))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let f=rt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function B1(r){const e=Je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Wk(r,e){const t=Je(r),n=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const c=[];e.targetChanges.forEach((v,g)=>{const p=i.get(g);if(!p)return;c.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,g).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,g)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?y=y.withResumeToken(tn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):v.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(v.resumeToken,n)),i=i.insert(g,y),function(S,w,E){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,y,v)&&c.push(t.Gr.updateTargetData(a,y))});let f=di(),d=rt();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),c.push(Kk(a,l,e.documentUpdates).next(v=>{f=v.Is,d=v.ds})),!n.isEqual(Ye.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(g=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(v)}return _e.waitFor(c).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,d)).next(()=>f)}).then(a=>(t.us=i,a))}function Kk(r,e,t){let n=rt(),i=rt();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let l=di();return t.forEach((c,f)=>{const d=a.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),f.isNoDocument()&&f.version.isEqual(Ye.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):xe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)}),{Is:l,ds:i}})}function Gk(r,e){const t=Je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Qk(r,e){const t=Je(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Gr.getTargetData(n,e).next(a=>a?(i=a,_e.resolve(i)):t.Gr.allocateTargetId(n).next(l=>(i=new Ji(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Gr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.us.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(n.targetId,n),t.cs.set(e,n.targetId)),n})}async function Sm(r,e,t){const n=Je(r),i=n.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!ia(l))throw l;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}n.us=n.us.remove(e),n.cs.delete(i.target)}function Q_(r,e,t){const n=Je(r);let i=Ye.min(),a=rt();return n.persistence.runTransaction("Execute query","readwrite",l=>function(f,d,v){const g=Je(f),p=g.cs.get(v);return p!==void 0?_e.resolve(g.us.get(p)):g.Gr.getTargetData(d,v)}(n,l,Dr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Gr.getMatchingKeysForTargetId(l,c.targetId).next(f=>{a=f})}).next(()=>n._s.getDocumentsMatchingQuery(l,e,t?i:Ye.min(),t?a:rt())).next(c=>(Jk(n,DA(e),c),{documents:c,Es:a})))}function Jk(r,e,t){let n=r.ls.get(e)||Ye.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.ls.set(e,n)}class J_{constructor(){this.activeTargetIds=BA()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yk{constructor(){this._o=new J_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,n){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new J_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function vd(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class tR extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=n+"://"+t.host,this.Mo=`projects/${i}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Oo(t,n,i,a,l){const c=vd(),f=this.No(t,n.toUriEncodedString());xe("RestConnection",`Sending RPC '${t}' ${c}:`,f,i);const d={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(d,a,l),this.Lo(t,f,d,i).then(v=>(xe("RestConnection",`Received RPC '${t}' ${c}: `,v),v),v=>{throw Go("RestConnection",`RPC '${t}' ${c} failed with error: `,v,"url: ",f,"request:",i),v})}ko(t,n,i,a,l,c){return this.Oo(t,n,i,a,l)}Bo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),i&&i.headers.forEach((a,l)=>t[l]=a)}No(t,n){const i=Zk[t];return`${this.Fo}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,n,i){const a=vd();return new Promise((l,c)=>{const f=new X0;f.setWithCredentials(!0),f.listenOnce(Z0.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case pc.NO_ERROR:const v=f.getResponseJson();xe(an,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case pc.TIMEOUT:xe(an,`RPC '${e}' ${a} timed out`),c(new Ne(we.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const g=f.getStatus();if(xe(an,`RPC '${e}' ${a} failed with status:`,g,"response text:",f.getResponseText()),g>0){let p=f.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const T=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(E)>=0?E:we.UNKNOWN}(y.status);c(new Ne(T,y.message))}else c(new Ne(we.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Ne(we.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{xe(an,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);xe(an,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",d,n,15)})}qo(e,t,n){const i=vd(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=n1(),c=t1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Bo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const v=a.join("");xe(an,`Creating RPC '${e}' stream ${i}: ${v}`,f);const g=l.createWebChannel(v,f);let p=!1,y=!1;const T=new eR({Eo:w=>{y?xe(an,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(p||(xe(an,`Opening RPC '${e}' stream ${i} transport.`),g.open(),p=!0),xe(an,`RPC '${e}' stream ${i} sending:`,w),g.send(w))},Ao:()=>g.close()}),S=(w,E,I)=>{w.listen(E,L=>{try{I(L)}catch(b){setTimeout(()=>{throw b},0)}})};return S(g,sl.EventType.OPEN,()=>{y||(xe(an,`RPC '${e}' stream ${i} transport opened.`),T.So())}),S(g,sl.EventType.CLOSE,()=>{y||(y=!0,xe(an,`RPC '${e}' stream ${i} transport closed`),T.Do())}),S(g,sl.EventType.ERROR,w=>{y||(y=!0,Go(an,`RPC '${e}' stream ${i} transport errored:`,w),T.Do(new Ne(we.UNAVAILABLE,"The operation could not be completed")))}),S(g,sl.EventType.MESSAGE,w=>{var E;if(!y){const I=w.data[0];ht(!!I);const L=I,b=(L==null?void 0:L.error)||((E=L[0])===null||E===void 0?void 0:E.error);if(b){xe(an,`RPC '${e}' stream ${i} received error:`,b);const F=b.status;let V=function(A){const k=Ft[A];if(k!==void 0)return k1(k)}(F),P=b.message;V===void 0&&(V=we.INTERNAL,P="Unknown error status: "+F+" with message "+b.message),y=!0,T.Do(new Ne(V,P)),g.close()}else xe(an,`RPC '${e}' stream ${i} received:`,I),T.vo(I)}}),S(c,e1.STAT_EVENT,w=>{w.stat===dm.PROXY?xe(an,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===dm.NOPROXY&&xe(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.bo()},0),T}}function _d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(r){return new lk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,n=1e3,i=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=n,this.Ko=i,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-n);i>0&&xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t,n,i,a,l,c,f){this.li=e,this.Yo=n,this.Zo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new q1(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Xo===t&&this.I_(n,i)},n=>{e(()=>{const i=new Ne(we.UNKNOWN,"Fetching auth token failed: "+n.message);return this.d_(i)})})}I_(e,t){const n=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{n(()=>this.listener.Ro())}),this.stream.mo(()=>{n(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{n(()=>this.d_(i))}),this.stream.onMessage(i=>{n(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nR extends z1{constructor(e,t,n,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=hk(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ye.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ye.min():l.readTime?Mr(l.readTime):Ye.min()}(e);return this.listener.R_(t,n)}V_(e){const t={};t.database=Tm(this.serializer),t.addTarget=function(a,l){let c;const f=l.target;if(c=ym(f)?{documents:pk(a,f)}:{query:D1(a,f).ct},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=O1(a,l.resumeToken);const d=_m(a,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(Ye.min())>0){c.readTime=Mc(a,l.snapshotVersion.toTimestamp());const d=_m(a,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=yk(this.serializer,e);n&&(t.labels=n),this.c_(t)}m_(e){const t={};t.database=Tm(this.serializer),t.removeTarget=e,this.c_(t)}}class rR extends z1{constructor(e,t,n,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ht(!!e.streamToken),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=dk(e.writeResults,e.commitTime),n=Mr(e.commitTime);return this.listener.y_(n,t)}w_(){const e={};e.database=Tm(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>fk(this.serializer,n))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Ne(we.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,n,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Oo(e,wm(t,n),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(we.UNKNOWN,a.toString())})}ko(e,t,n,i,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.ko(e,wm(t,n),i,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(we.UNKNOWN,l.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class sR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(fi(t),this.C_=!1):xe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(l=>{n.enqueueAndForget(async()=>{Ks(this)&&(xe("RemoteStore","Restarting streams for network reachability change."),await async function(f){const d=Je(f);d.k_.add(4),await Nl(d),d.K_.set("Unknown"),d.k_.delete(4),await ah(d)}(this))})}),this.K_=new sR(n,i)}}async function ah(r){if(Ks(r))for(const e of r.q_)await e(!0)}async function Nl(r){for(const e of r.q_)await e(!1)}function H1(r,e){const t=Je(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),rg(t)?ng(t):oa(t).s_()&&tg(t,e))}function eg(r,e){const t=Je(r),n=oa(t);t.L_.delete(e),n.s_()&&$1(t,e),t.L_.size===0&&(n.s_()?n.a_():Ks(t)&&t.K_.set("Unknown"))}function tg(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oa(r).V_(e)}function $1(r,e){r.U_.xe(e),oa(r).m_(e)}function ng(r){r.U_=new ik({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),oa(r).start(),r.K_.F_()}function rg(r){return Ks(r)&&!oa(r).i_()&&r.L_.size>0}function Ks(r){return Je(r).k_.size===0}function W1(r){r.U_=void 0}async function aR(r){r.K_.set("Online")}async function lR(r){r.L_.forEach((e,t)=>{tg(r,e)})}async function uR(r,e){W1(r),rg(r)?(r.K_.O_(e),ng(r)):r.K_.set("Unknown")}async function cR(r,e,t){if(r.K_.set("Online"),e instanceof P1&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const c of a.targetIds)i.L_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.L_.delete(c),i.U_.removeTarget(c))}(r,e)}catch(n){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await jc(r,n)}else if(e instanceof vc?r.U_.$e(e):e instanceof R1?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ye.min()))try{const n=await B1(r.localStore);t.compareTo(n)>=0&&await function(a,l){const c=a.U_.it(l);return c.targetChanges.forEach((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.L_.get(d);v&&a.L_.set(d,v.withResumeToken(f.resumeToken,l))}}),c.targetMismatches.forEach((f,d)=>{const v=a.L_.get(f);if(!v)return;a.L_.set(f,v.withResumeToken(tn.EMPTY_BYTE_STRING,v.snapshotVersion)),$1(a,f);const g=new Ji(v.target,f,d,v.sequenceNumber);tg(a,g)}),a.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){xe("RemoteStore","Failed to raise snapshot:",n),await jc(r,n)}}async function jc(r,e,t){if(!ia(e))throw e;r.k_.add(1),await Nl(r),r.K_.set("Offline"),t||(t=()=>B1(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{xe("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await ah(r)})}function K1(r,e){return e().catch(t=>jc(r,t,e))}async function lh(r){const e=Je(r),t=os(e);let n=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;hR(e);)try{const i=await Gk(e.localStore,n);if(i===null){e.B_.length===0&&t.a_();break}n=i.batchId,fR(e,i)}catch(i){await jc(e,i)}G1(e)&&Q1(e)}function hR(r){return Ks(r)&&r.B_.length<10}function fR(r,e){r.B_.push(e);const t=os(r);t.s_()&&t.f_&&t.g_(e.mutations)}function G1(r){return Ks(r)&&!os(r).i_()&&r.B_.length>0}function Q1(r){os(r).start()}async function dR(r){os(r).w_()}async function pR(r){const e=os(r);for(const t of r.B_)e.g_(t.mutations)}async function mR(r,e,t){const n=r.B_.shift(),i=Gm.from(n,e,t);await K1(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await lh(r)}async function gR(r,e){e&&os(r).f_&&await async function(n,i){if(function(l){return tk(l)&&l!==we.ABORTED}(i.code)){const a=n.B_.shift();os(n).__(),await K1(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await lh(n)}}(r,e),G1(r)&&Q1(r)}async function X_(r,e){const t=Je(r);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const n=Ks(t);t.k_.add(3),await Nl(t),n&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await ah(t)}async function yR(r,e){const t=Je(r);e?(t.k_.delete(2),await ah(t)):e||(t.k_.add(2),await Nl(t),t.K_.set("Unknown"))}function oa(r){return r.W_||(r.W_=function(t,n,i){const a=Je(t);return a.b_(),new nR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{Ro:aR.bind(null,r),mo:lR.bind(null,r),po:uR.bind(null,r),R_:cR.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),rg(r)?ng(r):r.K_.set("Unknown")):(await r.W_.stop(),W1(r))})),r.W_}function os(r){return r.G_||(r.G_=function(t,n,i){const a=Je(t);return a.b_(),new rR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:dR.bind(null,r),po:gR.bind(null,r),p_:pR.bind(null,r),y_:mR.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await lh(r)):(await r.G_.stop(),r.B_.length>0&&(xe("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const l=Date.now()+n,c=new ig(e,t,l,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(r,e){if(fi("AsyncQueue",`${e}: ${r}`),ia(r))return new Ne(we.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||qe.comparator(t.key,n.key):(t,n)=>qe.comparator(t.key,n.key),this.keyedMap=ol(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ho;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.z_=new At(qe.comparator)}track(e){const t=e.doc.key,n=this.z_.get(t);n?e.type!==0&&n.type===3?this.z_=this.z_.insert(t,e):e.type===3&&n.type!==1?this.z_=this.z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.z_=this.z_.remove(t):e.type===1&&n.type===2?this.z_=this.z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Qe():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Zo{constructor(e,t,n,i,a,l,c,f,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,a){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Zo(e,t,Ho.emptySet(t),l,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class _R{constructor(){this.queries=ew(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,n){const i=Je(t),a=i.queries;i.queries=ew(),a.forEach((l,c)=>{for(const f of c.J_)f.onError(n)})})(this,new Ne(we.ABORTED,"Firestore shutting down"))}}function ew(){return new Ws(r=>g1(r),th)}async function J1(r,e){const t=Je(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.Y_()&&e.Z_()&&(n=2):(a=new vR,n=e.Z_()?0:1);try{switch(n){case 0:a.H_=await t.onListen(i,!0);break;case 1:a.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=sg(l,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&og(t)}async function Y1(r,e){const t=Je(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const l=a.J_.indexOf(e);l>=0&&(a.J_.splice(l,1),a.J_.length===0?i=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function wR(r,e){const t=Je(r);let n=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const c of l.J_)c.ta(i)&&(n=!0);l.H_=i}}n&&og(t)}function ER(r,e,t){const n=Je(r),i=n.queries.get(e);if(i)for(const a of i.J_)a.onError(t);n.queries.delete(e)}function og(r){r.X_.forEach(e=>{e.next()})}var Im,tw;(tw=Im||(Im={})).na="default",tw.Cache="cache";class X1{constructor(e,t,n){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Zo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const n=t!=="Offline";return(!this.options.ua||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Im.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.key=e}}class eT{constructor(e){this.key=e}}class TR{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=rt(),this.mutatedKeys=rt(),this.Va=y1(e),this.ma=new Ho(this.Va)}get fa(){return this.Ea}ga(e,t){const n=t?t.pa:new Z_,i=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,g)=>{const p=i.get(v),y=nh(this.query,g)?g:null,T=!!p&&this.mutatedKeys.has(p.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;p&&y?p.data.isEqual(y.data)?T!==S&&(n.track({type:3,doc:y}),w=!0):this.ya(p,y)||(n.track({type:2,doc:y}),w=!0,(f&&this.Va(y,f)>0||d&&this.Va(y,d)<0)&&(c=!0)):!p&&y?(n.track({type:0,doc:y}),w=!0):p&&!y&&(n.track({type:1,doc:p}),w=!0,(f||d)&&(c=!0)),w&&(y?(l=l.add(y),a=S?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),n.track({type:1,doc:v})}return{ma:l,pa:n,ss:c,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const l=e.pa.j_();l.sort((v,g)=>function(y,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return S(y)-S(T)}(v.type,g.type)||this.Va(v.doc,g.doc)),this.wa(n),i=i!=null&&i;const c=t&&!i?this.Sa():[],f=this.Ra.size===0&&this.current&&!i?1:0,d=f!==this.Aa;return this.Aa=f,l.length!==0||d?{snapshot:new Zo(this.query,e.ma,a,l,e.mutatedKeys,f===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Z_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=rt(),this.ma.forEach(n=>{this.Da(n.key)&&(this.Ra=this.Ra.add(n.key))});const t=[];return e.forEach(n=>{this.Ra.has(n)||t.push(new eT(n))}),this.Ra.forEach(n=>{e.has(n)||t.push(new Z1(n))}),t}va(e){this.Ea=e.Es,this.Ra=rt();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Zo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class SR{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class IR{constructor(e){this.key=e,this.Fa=!1}}class CR{constructor(e,t,n,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ma={},this.xa=new Ws(c=>g1(c),th),this.Oa=new Map,this.Na=new Set,this.Ba=new At(qe.comparator),this.La=new Map,this.ka=new Ym,this.qa={},this.Qa=new Map,this.Ka=Xo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function bR(r,e,t=!0){const n=oT(r);let i;const a=n.xa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Ca()):i=await tT(n,e,t,!0),i}async function AR(r,e){const t=oT(r);await tT(t,e,!0,!1)}async function tT(r,e,t,n){const i=await Qk(r.localStore,Dr(e)),a=i.targetId,l=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await kR(r,e,a,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&H1(r.remoteStore,i),c}async function kR(r,e,t,n,i){r.Ua=(g,p,y)=>async function(S,w,E,I){let L=w.view.ga(E);L.ss&&(L=await Q_(S.localStore,w.query,!1).then(({documents:P})=>w.view.ga(P,L)));const b=I&&I.targetChanges.get(w.targetId),F=I&&I.targetMismatches.get(w.targetId)!=null,V=w.view.applyChanges(L,S.isPrimaryClient,b,F);return rw(S,w.targetId,V.ba),V.snapshot}(r,g,p,y);const a=await Q_(r.localStore,e,!0),l=new TR(e,a.Es),c=l.ga(a.documents),f=xl.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(c,r.isPrimaryClient,f);rw(r,t,d.ba);const v=new SR(e,t,l);return r.xa.set(e,v),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),d.snapshot}async function RR(r,e,t){const n=Je(r),i=n.xa.get(e),a=n.Oa.get(i.targetId);if(a.length>1)return n.Oa.set(i.targetId,a.filter(l=>!th(l,e))),void n.xa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Sm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&eg(n.remoteStore,i.targetId),Cm(n,i.targetId)}).catch(ra)):(Cm(n,i.targetId),await Sm(n.localStore,i.targetId,!0))}async function PR(r,e){const t=Je(r),n=t.xa.get(e),i=t.Oa.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),eg(t.remoteStore,n.targetId))}async function OR(r,e,t){const n=jR(r);try{const i=await function(l,c){const f=Je(l),d=Lt.now(),v=c.reduce((y,T)=>y.add(T.key),rt());let g,p;return f.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=di(),S=rt();return f.hs.getEntries(y,v).next(w=>{T=w,T.forEach((E,I)=>{I.isValidDocument()||(S=S.add(E))})}).next(()=>f.localDocuments.getOverlayedDocuments(y,T)).next(w=>{g=w;const E=[];for(const I of c){const L=QA(I,g.get(I.key).overlayedDocument);L!=null&&E.push(new cs(I.key,L,a1(L.value.mapValue),mr.exists(!0)))}return f.mutationQueue.addMutationBatch(y,d,E,c)}).next(w=>{p=w;const E=w.applyToLocalDocumentSet(g,S);return f.documentOverlayCache.saveOverlays(y,w.batchId,E)})}).then(()=>({batchId:p.batchId,changes:_1(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(l,c,f){let d=l.qa[l.currentUser.toKey()];d||(d=new At(st)),d=d.insert(c,f),l.qa[l.currentUser.toKey()]=d}(n,i.batchId,t),await Ll(n,i.changes),await lh(n.remoteStore)}catch(i){const a=sg(i,"Failed to persist write");t.reject(a)}}async function nT(r,e){const t=Je(r);try{const n=await Wk(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.La.get(a);l&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Fa=!0:i.modifiedDocuments.size>0?ht(l.Fa):i.removedDocuments.size>0&&(ht(l.Fa),l.Fa=!1))}),await Ll(t,n,e)}catch(n){await ra(n)}}function nw(r,e,t){const n=Je(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.xa.forEach((a,l)=>{const c=l.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const f=Je(l);f.onlineState=c;let d=!1;f.queries.forEach((v,g)=>{for(const p of g.J_)p.ea(c)&&(d=!0)}),d&&og(f)}(n.eventManager,e),i.length&&n.Ma.R_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function xR(r,e,t){const n=Je(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.La.get(e),a=i&&i.key;if(a){let l=new At(qe.comparator);l=l.insert(a,un.newNoDocument(a,Ye.min()));const c=rt().add(a),f=new sh(Ye.min(),new Map,new At(st),l,c);await nT(n,f),n.Ba=n.Ba.remove(a),n.La.delete(e),ag(n)}else await Sm(n.localStore,e,!1).then(()=>Cm(n,e,t)).catch(ra)}async function NR(r,e){const t=Je(r),n=e.batch.batchId;try{const i=await $k(t.localStore,e);iT(t,n,null),rT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ll(t,i)}catch(i){await ra(i)}}async function LR(r,e,t){const n=Je(r);try{const i=await function(l,c){const f=Je(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let v;return f.mutationQueue.lookupMutationBatch(d,c).next(g=>(ht(g!==null),v=g.keys(),f.mutationQueue.removeMutationBatch(d,g))).next(()=>f.mutationQueue.performConsistencyCheck(d)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(d,v,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,v)).next(()=>f.localDocuments.getDocuments(d,v))})}(n.localStore,e);iT(n,e,t),rT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ll(n,i)}catch(i){await ra(i)}}function rT(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function iT(r,e,t){const n=Je(r);let i=n.qa[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.qa[n.currentUser.toKey()]=i}}function Cm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Oa.get(e))r.xa.delete(n),t&&r.Ma.Wa(n,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(n=>{r.ka.containsKey(n)||sT(r,n)})}function sT(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(eg(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),ag(r))}function rw(r,e,t){for(const n of t)n instanceof Z1?(r.ka.addReference(n.key,e),DR(r,n)):n instanceof eT?(xe("SyncEngine","Document no longer in limbo: "+n.key),r.ka.removeReference(n.key,e),r.ka.containsKey(n.key)||sT(r,n.key)):Qe()}function DR(r,e){const t=e.key,n=t.path.canonicalString();r.Ba.get(t)||r.Na.has(n)||(xe("SyncEngine","New document in limbo: "+t),r.Na.add(n),ag(r))}function ag(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new qe(wt.fromString(e)),n=r.Ka.next();r.La.set(n,new IR(t)),r.Ba=r.Ba.insert(t,n),H1(r.remoteStore,new Ji(Dr($m(t.path)),n,"TargetPurposeLimboResolution",Xc.oe))}}async function Ll(r,e,t){const n=Je(r),i=[],a=[],l=[];n.xa.isEmpty()||(n.xa.forEach((c,f)=>{l.push(n.Ua(f,e,t).then(d=>{var v;if((d||t)&&n.isPrimaryClient){const g=d?!d.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;n.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(d){i.push(d);const g=Zm.zi(f.targetId,d);a.push(g)}}))}),await Promise.all(l),n.Ma.R_(i),await async function(f,d){const v=Je(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>_e.forEach(d,p=>_e.forEach(p.Wi,y=>v.persistence.referenceDelegate.addReference(g,p.targetId,y)).next(()=>_e.forEach(p.Gi,y=>v.persistence.referenceDelegate.removeReference(g,p.targetId,y)))))}catch(g){if(!ia(g))throw g;xe("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const y=v.us.get(p),T=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(T);v.us=v.us.insert(p,S)}}}(n.localStore,a))}async function MR(r,e){const t=Je(r);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const n=await U1(t.localStore,e);t.currentUser=e,function(a,l){a.Qa.forEach(c=>{c.forEach(f=>{f.reject(new Ne(we.CANCELLED,l))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ll(t,n.Ts)}}function FR(r,e){const t=Je(r),n=t.La.get(e);if(n&&n.Fa)return rt().add(n.key);{let i=rt();const a=t.Oa.get(e);if(!a)return i;for(const l of a){const c=t.xa.get(l);i=i.unionWith(c.view.fa)}return i}}function oT(r){const e=Je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=nT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xR.bind(null,e),e.Ma.R_=wR.bind(null,e.eventManager),e.Ma.Wa=ER.bind(null,e.eventManager),e}function jR(r){const e=Je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LR.bind(null,e),e}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Hk(this.persistence,new qk,e.initialUser,this.serializer)}ja(e){return new V1(Xm.ei,this.serializer)}za(e){return new Yk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class VR extends Vc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ht(this.persistence.referenceDelegate instanceof Fc);const n=this.persistence.referenceDelegate.garbageCollector;return new Ak(n,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new V1(n=>Fc.ei(n,t),this.serializer)}}class bm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>nw(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=MR.bind(null,this.syncEngine),await yR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _R}()}createDatastore(e){const t=oh(e.databaseInfo.databaseId),n=function(a){return new tR(a)}(e.databaseInfo);return function(a,l,c,f){return new iR(a,l,c,f)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,l,c){return new oR(n,i,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>nw(this.syncEngine,t,0),function(){return Y_.p()?new Y_:new Xk}())}createSyncEngine(e,t){return function(i,a,l,c,f,d,v){const g=new CR(i,a,l,c,f,d);return v&&(g.$a=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Je(i);xe("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await Nl(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=i1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async l=>{xe("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(xe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=sg(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function wd(r,e){r.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await U1(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function iw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await BR(r);xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>X_(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>X_(e.remoteStore,i)),r._onlineComponents=e}async function BR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await wd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===we.FAILED_PRECONDITION||i.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Go("Error using user provided cache. Falling back to memory cache: "+t),await wd(r,new Vc)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),await wd(r,new VR(void 0));return r._offlineComponents}async function lg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),await iw(r,r._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),await iw(r,new bm))),r._onlineComponents}function qR(r){return lg(r).then(e=>e.syncEngine)}function zR(r){return lg(r).then(e=>e.datastore)}async function Am(r){const e=await lg(r),t=e.eventManager;return t.onListen=bR.bind(null,e.syncEngine),t.onUnlisten=RR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PR.bind(null,e.syncEngine),t}function HR(r,e,t={}){const n=new ai;return r.asyncQueue.enqueueAndForget(async()=>function(a,l,c,f,d){const v=new aT({next:p=>{v.eu(),l.enqueueAndForget(()=>Y1(a,g)),p.fromCache&&f.source==="server"?d.reject(new Ne(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new X1(c,v,{includeMetadataChanges:!0,ua:!0});return J1(a,g)}(await Am(r),r.asyncQueue,e,t,n)),n.promise}function $R(r,e,t){const n=new ai;return r.asyncQueue.enqueueAndForget(async()=>{try{const i=await zR(r);n.resolve(async function(l,c,f){var d;const v=Je(l),{request:g,lt:p,parent:y}=mk(v.serializer,LA(c),f);v.connection.Co||delete g.parent;const T=(await v.ko("RunAggregationQuery",v.serializer.databaseId,y,g,1)).filter(w=>!!w.result);ht(T.length===1);const S=(d=T[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(S).reduce((w,E)=>(w[p[E]]=S[E],w),{})}(i,e,t))}catch(i){n.reject(i)}}),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(r,e,t){if(!t)throw new Ne(we.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function WR(r,e,t,n){if(e===!0&&n===!0)throw new Ne(we.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ow(r){if(!qe.isDocumentKey(r))throw new Ne(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function aw(r){if(qe.isDocumentKey(r))throw new Ne(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function uh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Qe()}function Qn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ne(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uh(r);throw new Ne(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function KR(r,e){if(e<=0)throw new Ne(we.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ne(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ne(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ne(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ne(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new eA;switch(n.type){case"firstParty":return new iA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ne(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=sw.get(t);n&&(xe("ComponentProvider","Removing Datastore"),sw.delete(t),n.terminate())}(this),Promise.resolve()}}function GR(r,e,t,n={}){var i;const a=(r=Qn(r,ch))._getSettings(),l=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),n.mockUserToken){let c,f;if(typeof n.mockUserToken=="string")c=n.mockUserToken,f=ln.MOCK_USER;else{c=$0(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new Ne(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ln(d)}r._authCredentials=new tA(new r1(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class yn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class es extends mi{constructor(e,t,n){super(e,t,$m(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new qe(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function QR(r,e,...t){if(r=yt(r),uT("collection","path",e),r instanceof ch){const n=wt.fromString(e,...t);return aw(n),new es(r,null,n)}{if(!(r instanceof yn||r instanceof es))throw new Ne(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(wt.fromString(e,...t));return aw(n),new es(r.firestore,null,n)}}function JR(r,e,...t){if(r=yt(r),arguments.length===1&&(e=i1.newId()),uT("doc","path",e),r instanceof ch){const n=wt.fromString(e,...t);return ow(n),new yn(r,null,new qe(n))}{if(!(r instanceof yn||r instanceof es))throw new Ne(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(wt.fromString(e,...t));return ow(n),new yn(r.firestore,r instanceof es?r.converter:null,new qe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new q1(this,"async_queue_retry"),this.fu=()=>{const n=_d();n&&xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.r_.Jo()},this.gu=e;const t=_d();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=_d();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new ai;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!ia(e))throw e;xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(n=>{this.Au=n,this.Ru=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(n);throw fi("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Ru=!1,n))));return this.gu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=ig.createAndSchedule(this,e,t,n,a=>this.Su(a));return this.Eu.push(i),i}pu(){this.Au&&Qe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function cw(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(r,["next","error","complete"])}class as extends ch{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new uw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uw(e),this._firestoreClient=void 0,await e}}}function YR(r,e){const t=typeof r=="object"?r:Vm(),n=typeof r=="string"?r:"(default)",i=Yc(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=q0("firestore");a&&GR(i,...a)}return i}function hh(r){if(r._terminated)throw new Ne(we.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||XR(r),r._firestoreClient}function XR(r){var e,t,n;const i=r._freezeSettings(),a=function(c,f,d,v){return new wA(c,f,d,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,lT(v.experimentalLongPollingOptions),v.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new UR(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class eP{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(tn.fromBase64String(e))}catch(t){throw new Ne(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ea(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=/^__.*__$/;class nP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class cT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class hg{constructor(e,t,n,i,a,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:n,Nu:!1});return i.Bu(e),i}Lu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:n,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Uc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(hT(this.Mu)&&tP.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class rP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||oh(e)}$u(e,t,n,i=!1){return new hg({Mu:e,methodName:t,Ku:n,path:en.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fg(r){const e=r._freezeSettings(),t=oh(r._databaseId);return new rP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function iP(r,e,t,n,i,a={}){const l=r.$u(a.merge||a.mergeFields?2:0,e,t,i);pg("Data must be an object, but it was:",l,n);const c=fT(n,l);let f,d;if(a.merge)f=new Fn(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const g of a.mergeFields){const p=km(e,g,t);if(!l.contains(p))throw new Ne(we.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);pT(v,p)||v.push(p)}f=new Fn(v),d=l.fieldTransforms.filter(g=>f.covers(g.field))}else f=null,d=l.fieldTransforms;return new nP(new Rn(c),f,d)}class ph extends dh{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}class dg extends dh{_toFieldTransform(e){return new $A(e.path,new Tl)}isEqual(e){return e instanceof dg}}function sP(r,e,t,n){const i=r.$u(1,e,t);pg("Data must be an object, but it was:",i,n);const a=[],l=Rn.empty();us(n,(f,d)=>{const v=mg(e,f,t);d=yt(d);const g=i.Lu(v);if(d instanceof ph)a.push(v);else{const p=Dl(d,g);p!=null&&(a.push(v),l.set(v,p))}});const c=new Fn(a);return new cT(l,c,i.fieldTransforms)}function oP(r,e,t,n,i,a){const l=r.$u(1,e,t),c=[km(e,n,t)],f=[i];if(a.length%2!=0)throw new Ne(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)c.push(km(e,a[p])),f.push(a[p+1]);const d=[],v=Rn.empty();for(let p=c.length-1;p>=0;--p)if(!pT(d,c[p])){const y=c[p];let T=f[p];T=yt(T);const S=l.Lu(y);if(T instanceof ph)d.push(y);else{const w=Dl(T,S);w!=null&&(d.push(y),v.set(y,w))}}const g=new Fn(d);return new cT(v,g,l.fieldTransforms)}function aP(r,e,t,n=!1){return Dl(t,r.$u(n?4:3,e))}function Dl(r,e){if(dT(r=yt(r)))return pg("Unsupported field value:",e,r),fT(r,e);if(r instanceof dh)return function(n,i){if(!hT(i.Mu))throw i.qu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(n,i){const a=[];let l=0;for(const c of n){let f=Dl(c,i.ku(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(r,e)}return function(n,i){if((n=yt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return qA(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Lt.fromDate(n);return{timestampValue:Mc(i.serializer,a)}}if(n instanceof Lt){const a=new Lt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Mc(i.serializer,a)}}if(n instanceof ug)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ea)return{bytesValue:O1(i.serializer,n._byteString)};if(n instanceof yn){const a=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw i.qu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jm(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof cg)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.qu("VectorValues must only contain numeric values.");return Wm(c.serializer,f)})}}}}}}(n,i);throw i.qu(`Unsupported field value: ${uh(n)}`)}(r,e)}function fT(r,e){const t={};return s1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(r,(n,i)=>{const a=Dl(i,e.Ou(n));a!=null&&(t[n]=a)}),{mapValue:{fields:t}}}function dT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Lt||r instanceof ug||r instanceof ea||r instanceof yn||r instanceof dh||r instanceof cg)}function pg(r,e,t){if(!dT(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=uh(t);throw n==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+n)}}function km(r,e,t){if((e=yt(e))instanceof fh)return e._internalPath;if(typeof e=="string")return mg(r,e);throw Uc("Field path arguments must be of type string or ",r,!1,void 0,t)}const lP=new RegExp("[~\\*/\\[\\]]");function mg(r,e,t){if(e.search(lP)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new fh(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Uc(r,e,t,n,i){const a=n&&!n.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${n}`),l&&(f+=` in document ${i}`),f+=")"),new Ne(we.INVALID_ARGUMENT,c+r+f)}function pT(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uP extends mT{data(){return super.data()}}function mh(r,e){return typeof e=="string"?mg(r,e):e instanceof fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ne(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}class yg extends gg{}function cP(r,e,...t){let n=[];e instanceof gg&&n.push(e),n=n.concat(t),function(a){const l=a.filter(f=>f instanceof vg).length,c=a.filter(f=>f instanceof gh).length;if(l>1||l>0&&c>0)throw new Ne(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class gh extends yg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new gh(e,t,n)}_apply(e){const t=this._parse(e);return yT(e._query,t),new mi(e.firestore,e.converter,vm(e._query,t))}_parse(e){const t=fg(e.firestore);return function(a,l,c,f,d,v,g){let p;if(d.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ne(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){dw(g,v);const y=[];for(const T of g)y.push(fw(f,a,T));p={arrayValue:{values:y}}}else p=fw(f,a,g)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||dw(g,v),p=aP(c,l,g,v==="in"||v==="not-in");return jt.create(d,v,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hw(r,e,t){const n=e,i=mh("where",r);return gh._create(i,n,t)}class vg extends gg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vg(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let l=i;const c=a.getFlattenedFilters();for(const f of c)yT(l,f),l=vm(l,f)}(e._query,t),new mi(e.firestore,e.converter,vm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _g extends yg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _g(e,t)}_apply(e){const t=function(i,a,l){if(i.startAt!==null)throw new Ne(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ne(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new El(a,l)}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new sa(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function hP(r,e="asc"){const t=e,n=mh("orderBy",r);return _g._create(n,t)}class wg extends yg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new wg(e,t,n)}_apply(e){return new mi(e.firestore,e.converter,Lc(e._query,this._limit,this._limitType))}}function fP(r){return KR("limit",r),wg._create("limit",r,"F")}function fw(r,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new Ne(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p1(e)&&t.indexOf("/")!==-1)throw new Ne(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(wt.fromString(t));if(!qe.isDocumentKey(n))throw new Ne(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return O_(r,new qe(n))}if(t instanceof yn)return O_(r,t._key);throw new Ne(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uh(t)}.`)}function dw(r,e){if(!Array.isArray(r)||r.length===0)throw new Ne(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yT(r,e){const t=function(i,a){for(const l of i)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ne(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dP{convertValue(e,t="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return us(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(l=>Nt(l.doubleValue));return new cg(a)}convertGeoPoint(e){return new ug(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=eh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const t=rs(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wt.fromString(e);ht(j1(n));const i=new _l(n.get(1),n.get(3)),a=new qe(n.popFirst(5));return i.isEqual(t)||fi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}function mP(){return new ZR("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vT extends mT{constructor(e,t,n,i,a,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _c extends vT{data(e={}){return super.data(e)}}class _T{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ll(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new _c(this._firestore,this._userDataWriter,n.key,n,new ll(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const f=new _c(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ll(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const f=new _c(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ll(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,v=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:gP(c.type),doc:f,oldIndex:d,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}class yh extends dP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function yP(r){r=Qn(r,mi);const e=Qn(r.firestore,as),t=hh(e),n=new yh(e);return gT(r._query),HR(t,r._query).then(i=>new _T(e,n,r,i))}function vP(r,e,t){r=Qn(r,yn);const n=Qn(r.firestore,as),i=pP(r.converter,e,t);return Eg(n,[iP(fg(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,mr.none())])}function _P(r,e,t,...n){r=Qn(r,yn);const i=Qn(r.firestore,as),a=fg(i);let l;return l=typeof(e=yt(e))=="string"||e instanceof fh?oP(a,"updateDoc",r._key,e,t,n):sP(a,"updateDoc",r._key,e),Eg(i,[l.toMutation(r._key,mr.exists(!0))])}function pw(r){return Eg(Qn(r.firestore,as),[new Km(r._key,mr.none())])}function wP(r,...e){var t,n,i;r=yt(r);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||cw(e[l])||(a=e[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(cw(e[l])){const g=e[l];e[l]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[l+1]=(n=g.error)===null||n===void 0?void 0:n.bind(g),e[l+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let f,d,v;if(r instanceof yn)d=Qn(r.firestore,as),v=$m(r._key.path),f={next:g=>{e[l]&&e[l](EP(d,r,g))},error:e[l+1],complete:e[l+2]};else{const g=Qn(r,mi);d=Qn(g.firestore,as),v=g._query;const p=new yh(d);f={next:y=>{e[l]&&e[l](new _T(d,p,g,y))},error:e[l+1],complete:e[l+2]},gT(r._query)}return function(p,y,T,S){const w=new aT(S),E=new X1(y,w,T);return p.asyncQueue.enqueueAndForget(async()=>J1(await Am(p),E)),()=>{w.eu(),p.asyncQueue.enqueueAndForget(async()=>Y1(await Am(p),E))}}(hh(d),v,c,f)}function Eg(r,e){return function(n,i){const a=new ai;return n.asyncQueue.enqueueAndForget(async()=>OR(await qR(n),i,a)),a.promise}(hh(r),e)}function EP(r,e,t){const n=t.docs.get(e._key),i=new yh(r);return new vT(r,i,e._key,n,new ll(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(r){return SP(r,{count:mP()})}function SP(r,e){const t=Qn(r.firestore,as),n=hh(t),i=vA(e,(a,l)=>new ZA(l,a.aggregateType,a._internalFieldPath));return $R(n,r._query,i).then(a=>function(c,f,d){const v=new yh(c);return new eP(f,v,d)}(t,r,a))}function IP(){return new dg("serverTimestamp")}(function(e,t=!0){(function(i){na=i})($s),Us(new ts("firestore",(n,{instanceIdentifier:i,options:a})=>{const l=n.getProvider("app").getImmediate(),c=new as(new nA(n.getProvider("auth-internal")),new oA(n.getProvider("app-check-internal")),function(d,v){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ne(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(d.options.projectId,v)}(l,i),l);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Lr(C_,"4.7.6",e),Lr(C_,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firebasestorage.googleapis.com",ET="storageBucket",CP=2*60*1e3,bP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt extends Br{constructor(e,t,n=0){super(Ed(e),`Firebase Storage: ${t} (${Ed(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ed(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function Ed(r){return"storage/"+r}function Tg(){const r="An unknown error occurred, please check the error payload for server response.";return new Pt(Rt.UNKNOWN,r)}function AP(r){return new Pt(Rt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function kP(r){return new Pt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function RP(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Rt.UNAUTHENTICATED,r)}function PP(){return new Pt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function OP(r){return new Pt(Rt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function xP(){return new Pt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NP(){return new Pt(Rt.CANCELED,"User canceled the upload/download.")}function LP(r){return new Pt(Rt.INVALID_URL,"Invalid URL '"+r+"'.")}function DP(r){return new Pt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function MP(){return new Pt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ET+"' property when initializing the app?")}function FP(){return new Pt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jP(){return new Pt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VP(r){return new Pt(Rt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rm(r){return new Pt(Rt.INVALID_ARGUMENT,r)}function TT(){return new Pt(Rt.APP_DELETED,"The Firebase app was deleted.")}function UP(r){return new Pt(Rt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ml(r,e){return new Pt(Rt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function el(r){throw new Pt(Rt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=jn.makeFromUrl(e,t)}catch{return new jn(e,"")}if(n.path==="")return n;throw DP(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),f={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const v="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${g}/${v}/b/${i}/o${p}`,"i"),T={bucket:1,path:3},S=t===wT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",E=new RegExp(`^https?://${S}/${i}/${w}`,"i"),L=[{regex:c,indices:f,postModify:a},{regex:y,indices:T,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<L.length;b++){const F=L[b],V=F.regex.exec(e);if(V){const P=V[F.indices.bucket];let _=V[F.indices.path];_||(_=""),n=new jn(P,_),F.postModify(n);break}}if(n==null)throw LP(e);return n}}class BP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(r,e,t){let n=1,i=null,a=null,l=!1,c=0;function f(){return c===2}let d=!1;function v(...w){d||(d=!0,e.apply(null,w))}function g(w){i=setTimeout(()=>{i=null,r(y,f())},w)}function p(){a&&clearTimeout(a)}function y(w,...E){if(d){p();return}if(w){p(),v.call(null,w,...E);return}if(f()||l){p(),v.call(null,w,...E);return}n<64&&(n*=2);let L;c===1?(c=2,L=0):L=(n+Math.random())*1e3,g(L)}let T=!1;function S(w){T||(T=!0,p(),!d&&(i!==null?(w||(c=2),clearTimeout(i),g(0)):w||(c=1)))}return g(0),a=setTimeout(()=>{l=!0,S(!0)},t),S}function zP(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(r){return r!==void 0}function $P(r){return typeof r=="object"&&!Array.isArray(r)}function Sg(r){return typeof r=="string"||r instanceof String}function mw(r){return Ig()&&r instanceof Blob}function Ig(){return typeof Blob<"u"}function gw(r,e,t,n){if(n<e)throw Rm(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw Rm(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function ST(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var Vs;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Vs||(Vs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,n,i,a,l,c,f,d,v,g,p=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=f,this.timeout_=d,this.progressCallback_=v,this.connectionFactory_=g,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,T)=>{this.resolve_=y,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new cc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const f=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,d)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===Vs.NO_ERROR,f=a.getStatus();if(!c||WP(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Vs.ABORT;n(!1,new cc(!1,null,v));return}const d=this.successCodes_.indexOf(f)!==-1;n(!0,new cc(d,a))})},t=(n,i)=>{const a=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());HP(f)?a(f):a()}catch(f){l(f)}else if(c!==null){const f=Tg();f.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,f)):l(f)}else if(i.canceled){const f=this.appDelete_?TT():NP();l(f)}else{const f=xP();l(f)}};this.canceled_?t(!1,new cc(!1,null,!0)):this.backoffId_=qP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function GP(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function QP(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JP(r,e){e&&(r["X-Firebase-GMPID"]=e)}function YP(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function XP(r,e,t,n,i,a,l=!0){const c=ST(r.urlParams),f=r.url+c,d=Object.assign({},r.headers);return JP(d,e),GP(d,t),QP(d,a),YP(d,n),new KP(f,r.method,d,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eO(...r){const e=ZP();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(Ig())return new Blob(r);throw new Pt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tO(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(r){if(typeof atob>"u")throw VP("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Td{constructor(e,t){this.data=e,this.contentType=t||null}}function rO(r,e){switch(r){case Nr.RAW:return new Td(IT(e));case Nr.BASE64:case Nr.BASE64URL:return new Td(CT(r,e));case Nr.DATA_URL:return new Td(sO(e),oO(e))}throw Tg()}function IT(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=n,l=r.charCodeAt(++t);n=65536|(a&1023)<<10|l&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function iO(r){let e;try{e=decodeURIComponent(r)}catch{throw ml(Nr.DATA_URL,"Malformed data URL.")}return IT(e)}function CT(r,e){switch(r){case Nr.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw ml(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Nr.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw ml(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nO(e)}catch(i){throw i.message.includes("polyfill")?i:ml(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class bT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ml(Nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=aO(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function sO(r){const e=new bT(r);return e.base64?CT(Nr.BASE64,e.rest):iO(e.rest)}function oO(r){return new bT(r).contentType}function aO(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){let n=0,i="";mw(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(mw(this.data_)){const n=this.data_,i=tO(n,e,t);return i===null?null:new $i(i)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new $i(n,!0)}}static getBlob(...e){if(Ig()){const t=e.map(n=>n instanceof $i?n.data_:n);return new $i(eO.apply(null,t))}else{const t=e.map(l=>Sg(l)?rO(Nr.RAW,l).data:l.data_);let n=0;t.forEach(l=>{n+=l.byteLength});const i=new Uint8Array(n);let a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[a++]=l[c]}),new $i(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(r){let e;try{e=JSON.parse(r)}catch{return null}return $P(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function uO(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function kT(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(r,e){return e}class gn{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||cO}}let hc=null;function hO(r){return!Sg(r)||r.length<2?r:kT(r)}function RT(){if(hc)return hc;const r=[];r.push(new gn("bucket")),r.push(new gn("generation")),r.push(new gn("metageneration")),r.push(new gn("name","fullPath",!0));function e(a,l){return hO(l)}const t=new gn("name");t.xform=e,r.push(t);function n(a,l){return l!==void 0?Number(l):l}const i=new gn("size");return i.xform=n,r.push(i),r.push(new gn("timeCreated")),r.push(new gn("updated")),r.push(new gn("md5Hash",null,!0)),r.push(new gn("cacheControl",null,!0)),r.push(new gn("contentDisposition",null,!0)),r.push(new gn("contentEncoding",null,!0)),r.push(new gn("contentLanguage",null,!0)),r.push(new gn("contentType",null,!0)),r.push(new gn("metadata","customMetadata",!0)),hc=r,hc}function fO(r,e){function t(){const n=r.bucket,i=r.fullPath,a=new jn(n,i);return e._makeStorageReference(a)}Object.defineProperty(r,"ref",{get:t})}function dO(r,e,t){const n={};n.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];n[l.local]=l.xform(n,e[l.server])}return fO(n,r),n}function PT(r,e,t){const n=AT(e);return n===null?null:dO(r,n,t)}function pO(r,e,t,n){const i=AT(e);if(i===null||!Sg(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(d=>{const v=r.bucket,g=r.fullPath,p="/b/"+l(v)+"/o/"+l(g),y=vh(p,t,n),T=ST({alt:"media",token:d});return y+T})[0]}function mO(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(t[a.server]=r[a.local])}return JSON.stringify(t)}class Cg{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(r){if(!r)throw Tg()}function gO(r,e){function t(n,i){const a=PT(r,i,e);return OT(a!==null),a}return t}function yO(r,e){function t(n,i){const a=PT(r,i,e);return OT(a!==null),pO(a,i,r.host,r._protocol)}return t}function xT(r){function e(t,n){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=PP():i=RP():t.getStatus()===402?i=kP(r.bucket):t.getStatus()===403?i=OP(r.path):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}return e}function NT(r){const e=xT(r);function t(n,i){let a=e(n,i);return n.getStatus()===404&&(a=AP(r.path)),a.serverResponse=i.serverResponse,a}return t}function vO(r,e,t){const n=e.fullServerUrl(),i=vh(n,r.host,r._protocol),a="GET",l=r.maxOperationRetryTime,c=new Cg(i,a,yO(r,t),l);return c.errorHandler=NT(e),c}function _O(r,e){const t=e.fullServerUrl(),n=vh(t,r.host,r._protocol),i="DELETE",a=r.maxOperationRetryTime;function l(f,d){}const c=new Cg(n,i,l,a);return c.successCodes=[200,204],c.errorHandler=NT(e),c}function wO(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function EO(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=wO(null,e)),n}function TO(r,e,t,n,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let L="";for(let b=0;b<2;b++)L=L+Math.random().toString().slice(2);return L}const f=c();l["Content-Type"]="multipart/related; boundary="+f;const d=EO(e,n,i),v=mO(d,t),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+f+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+f+"--",y=$i.getBlob(g,n,p);if(y===null)throw FP();const T={name:d.fullPath},S=vh(a,r.host,r._protocol),w="POST",E=r.maxUploadRetryTime,I=new Cg(S,w,gO(r,t),E);return I.urlParams=T,I.headers=l,I.body=y.uploadData(),I.errorHandler=xT(e),I}class SO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw el("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw el("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw el("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw el("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw el("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IO extends SO{initXhr(){this.xhr_.responseType="text"}}function bg(){return new IO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){this._service=e,t instanceof jn?this._location=t:this._location=jn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qs(e,t)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kT(this._location.path)}get storage(){return this._service}get parent(){const e=lO(this._location.path);if(e===null)return null;const t=new jn(this._location.bucket,e);return new qs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw UP(e)}}function CO(r,e,t){r._throwIfRoot("uploadBytes");const n=TO(r.storage,r._location,RT(),new $i(e,!0),t);return r.storage.makeRequestWithTokens(n,bg).then(i=>({metadata:i,ref:r}))}function bO(r){r._throwIfRoot("getDownloadURL");const e=vO(r.storage,r._location,RT());return r.storage.makeRequestWithTokens(e,bg).then(t=>{if(t===null)throw jP();return t})}function AO(r){r._throwIfRoot("deleteObject");const e=_O(r.storage,r._location);return r.storage.makeRequestWithTokens(e,bg)}function kO(r,e){const t=uO(r._location.path,e),n=new jn(r._location.bucket,t);return new qs(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(r){return/^[A-Za-z]+:\/\//.test(r)}function PO(r,e){return new qs(r,e)}function LT(r,e){if(r instanceof Ag){const t=r;if(t._bucket==null)throw MP();const n=new qs(t,t._bucket);return e!=null?LT(n,e):n}else return e!==void 0?kO(r,e):r}function OO(r,e){if(e&&RO(e)){if(r instanceof Ag)return PO(r,e);throw Rm("To use ref(service, url), the first argument must be a Storage instance.")}else return LT(r,e)}function yw(r,e){const t=e==null?void 0:e[ET];return t==null?null:jn.makeFromBucketSpec(t,r)}function xO(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:$0(i,r.app.options.projectId))}class Ag{constructor(e,t,n,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=wT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CP,this._maxUploadRetryTime=bP,this._requests=new Set,i!=null?this._bucket=jn.makeFromBucketSpec(i,this._host):this._bucket=yw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=yw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qs(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new BP(TT());{const l=XP(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const vw="@firebase/storage",_w="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="storage";function NO(r,e,t){return r=yt(r),CO(r,e,t)}function LO(r){return r=yt(r),bO(r)}function DO(r){return r=yt(r),AO(r)}function Sd(r,e){return r=yt(r),OO(r,e)}function MO(r=Vm(),e){r=yt(r);const n=Yc(r,DT).getImmediate({identifier:e}),i=q0("storage");return i&&FO(n,...i),n}function FO(r,e,t,n={}){xO(r,e,t,n)}function jO(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Ag(t,n,i,e,$s)}function VO(){Us(new ts(DT,jO,"PUBLIC").setMultipleInstances(!0)),Lr(vw,_w,""),Lr(vw,_w,"esm2017")}VO();function kg(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UO=MT,FT=new Rl("auth","Firebase",MT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Fm("@firebase/auth");function BO(r,...e){Bc.logLevel<=nt.WARN&&Bc.warn(`Auth (${$s}): ${r}`,...e)}function wc(r,...e){Bc.logLevel<=nt.ERROR&&Bc.error(`Auth (${$s}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(r,...e){throw Rg(r,...e)}function Fr(r,...e){return Rg(r,...e)}function jT(r,e,t){const n=Object.assign(Object.assign({},UO()),{[e]:t});return new Rl("auth","Firebase",n).create(e,{appName:r.name})}function li(r){return jT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return FT.create(r,...e)}function Ke(r,e,...t){if(!r)throw Rg(e,...t)}function ii(r){const e="INTERNAL ASSERTION FAILED: "+r;throw wc(e),new Error(e)}function pi(r,e){r||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function qO(){return ww()==="http:"||ww()==="https:"}function ww(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qO()||xC()||"connection"in navigator)?navigator.onLine:!0}function HO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=RC()||NC()}get(){return zO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(r,e){pi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Ml(3e4,6e4);function gi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function qr(r,e,t,n,i={}){return UT(r,i,async()=>{let a={},l={};n&&(e==="GET"?l=n:a={body:JSON.stringify(n)});const c=Pl(Object.assign({key:r.config.apiKey},l)).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:f},a);return OC()||(d.referrerPolicy="no-referrer"),VT.fetch()(BT(r,r.config.apiHost,t,c),d)})}async function UT(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},$O),e);try{const i=new GO(r),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw fc(r,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(r,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw fc(r,"email-already-in-use",l);if(f==="USER_DISABLED")throw fc(r,"user-disabled",l);const v=n[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw jT(r,v,d);yr(r,v)}}catch(i){if(i instanceof Br)throw i;yr(r,"network-request-failed",{message:String(i)})}}async function Fl(r,e,t,n,i={}){const a=await qr(r,e,t,n,i);return"mfaPendingCredential"in a&&yr(r,"multi-factor-auth-required",{_serverResponse:a}),a}function BT(r,e,t,n){const i=`${e}${t}?${n}`;return r.config.emulator?Pg(r.config,i):`${r.config.apiScheme}://${i}`}function KO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Fr(this.auth,"network-request-failed")),WO.get())})}}function fc(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Fr(r,e,n);return i.customData._tokenResponse=t,i}function Ew(r){return r!==void 0&&r.enterprise!==void 0}class QO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JO(r,e){return qr(r,"GET","/v2/recaptchaConfig",gi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(r,e){return qr(r,"POST","/v1/accounts:delete",e)}async function qT(r,e){return qr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XO(r,e=!1){const t=yt(r),n=await t.getIdToken(e),i=Og(n);Ke(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:gl(Id(i.auth_time)),issuedAtTime:gl(Id(i.iat)),expirationTime:gl(Id(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Id(r){return Number(r)*1e3}function Og(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return wc("JWT malformed, contained fewer than 3 sections"),null;try{const i=U0(t);return i?JSON.parse(i):(wc("Failed to decode base64 JWT payload"),null)}catch(i){return wc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Tw(r){const e=Og(r);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Br&&ZO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function ZO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(r){var e;const t=r.auth,n=await r.getIdToken(),i=await ta(r,qT(t,{idToken:n}));Ke(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?zT(a.providerUserInfo):[],c=nx(r.providerData,l),f=r.isAnonymous,d=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),v=f?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Om(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(r,g)}async function tx(r){const e=yt(r);await qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nx(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function zT(r){return r.map(e=>{var{providerId:t}=e,n=kg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(r,e){const t=await UT(r,{},async()=>{const n=Pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=r.config,l=BT(r,i,"/v1/token",`key=${a}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",VT.fetch()(l,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ix(r,e){return qr(r,"POST","/v2/accounts:revokeToken",gi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=Tw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:a}=await rx(e,t);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:a}=t,l=new $o;return n&&(Ke(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(Ke(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(r,e){Ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,a=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ex(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Om(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ta(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XO(this,e)}reload(){return tx(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await qc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(li(this.auth));const e=await this.getIdToken();return await ta(this,YO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,a,l,c,f,d,v;const g=(n=t.displayName)!==null&&n!==void 0?n:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,y=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=t.photoURL)!==null&&l!==void 0?l:void 0,S=(c=t.tenantId)!==null&&c!==void 0?c:void 0,w=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,I=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:L,emailVerified:b,isAnonymous:F,providerData:V,stsTokenManager:P}=t;Ke(L&&P,e,"internal-error");const _=$o.fromJSON(this.name,P);Ke(typeof L=="string",e,"internal-error"),zi(g,e.name),zi(p,e.name),Ke(typeof b=="boolean",e,"internal-error"),Ke(typeof F=="boolean",e,"internal-error"),zi(y,e.name),zi(T,e.name),zi(S,e.name),zi(w,e.name),zi(E,e.name),zi(I,e.name);const A=new si({uid:L,auth:e,email:p,emailVerified:b,displayName:g,isAnonymous:F,photoURL:T,phoneNumber:y,tenantId:S,stsTokenManager:_,createdAt:E,lastLoginAt:I});return V&&Array.isArray(V)&&(A.providerData=V.map(k=>Object.assign({},k))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new $o;i.updateFromServerResponse(t);const a=new si({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await qc(a),a}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Ke(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?zT(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new $o;c.updateFromIdToken(n);const f=new si({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Om(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function oi(r){pi(r instanceof Function,"Expected a class definition");let e=Sw.get(r);return e?(pi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Sw.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HT.type="NONE";const Iw=HT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(r,e,t){return`firebase:${r}:${e}:${t}`}class Wo{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Ec(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ec("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Wo(oi(Iw),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||oi(Iw);const l=Ec(n,e.config.apiKey,e.name);let c=null;for(const d of t)try{const v=await d._get(l);if(v){const g=si._fromJSON(e,v);d!==a&&(c=g),a=d;break}}catch{}const f=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Wo(a,e,n):(a=f[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new Wo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($T(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JT(e))return"Blackberry";if(YT(e))return"Webos";if(WT(e))return"Safari";if((e.includes("chrome/")||KT(e))&&!e.includes("edge/"))return"Chrome";if(QT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function $T(r=hn()){return/firefox\//i.test(r)}function WT(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KT(r=hn()){return/crios\//i.test(r)}function GT(r=hn()){return/iemobile/i.test(r)}function QT(r=hn()){return/android/i.test(r)}function JT(r=hn()){return/blackberry/i.test(r)}function YT(r=hn()){return/webos/i.test(r)}function xg(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function sx(r=hn()){var e;return xg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ox(){return LC()&&document.documentMode===10}function XT(r=hn()){return xg(r)||QT(r)||YT(r)||JT(r)||/windows phone/i.test(r)||GT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r,e=[]){let t;switch(r){case"Browser":t=Cw(hn());break;case"Worker":t=`${Cw(hn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$s}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((l,c)=>{try{const f=e(a);l(f)}catch(f){c(f)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(r,e={}){return qr(r,"GET","/v2/passwordPolicy",gi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=6;class cx{constructor(e){var t,n,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:ux,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,a,l,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(n=f.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bw(this),this.idTokenSubscription=new bw(this),this.beforeStateQueue=new ax(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qT(this,{idToken:e}),n=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(li(this));const t=e?yt(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lx(this),t=new cx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rl("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await ix(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oi(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,n,i);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&BO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function hs(r){return yt(r)}class bw{constructor(e){this.auth=e,this.observer=null,this.addObserver=qC(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fx(r){_h=r}function eS(r){return _h.loadJS(r)}function dx(){return _h.recaptchaEnterpriseScript}function px(){return _h.gapiScript}function mx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class gx{constructor(){this.enterprise=new yx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vx="recaptcha-enterprise",tS="NO_RECAPTCHA";class _x{constructor(e){this.type=vx,this.auth=hs(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{JO(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new QO(f);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,l(d.siteKey)}}).catch(f=>{c(f)})})}function i(a,l,c){const f=window.grecaptcha;Ew(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l(tS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gx().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{n(this.auth).then(c=>{if(!t&&Ew(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=dx();f.length!==0&&(f+=c),eS(f).then(()=>{i(c,a,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function Aw(r,e,t,n=!1,i=!1){const a=new _x(r);let l;if(i)l=tS;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function zc(r,e,t,n,i){var a;if(!((a=r._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Aw(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Aw(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(r,e){const t=Yc(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Pc(a,e??{}))return i;yr(i,"already-initialized")}return t.initialize({options:e})}function Ex(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(oi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Tx(r,e,t){const n=hs(r);Ke(n._canInitEmulator,n,"emulator-config-failed"),Ke(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=nS(e),{host:l,port:c}=Sx(e),f=c===null?"":`:${c}`;n.config.emulator={url:`${a}//${l}${f}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),Ix()}function nS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Sx(r){const e=nS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:kw(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:kw(l)}}}function kw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Ix(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}async function Cx(r,e){return qr(r,"POST","/v1/accounts:update",e)}async function bx(r,e){return qr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(r,e){return Fl(r,"POST","/v1/accounts:signInWithPassword",gi(r,e))}async function kx(r,e){return qr(r,"POST","/v1/accounts:sendOobCode",gi(r,e))}async function Rx(r,e){return kx(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(r,e){return Fl(r,"POST","/v1/accounts:signInWithEmailLink",gi(r,e))}async function Ox(r,e){return Fl(r,"POST","/v1/accounts:signInWithEmailLink",gi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Ng{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Cl(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Cl(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zc(e,t,"signInWithPassword",Ax);case"emailLink":return Px(e,{email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zc(e,n,"signUpPassword",bx);case"emailLink":return Ox(e,{idToken:t,email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,e){return Fl(r,"POST","/v1/accounts:signInWithIdp",gi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="http://localhost";class zs extends Ng{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,a=kg(t,["providerId","signInMethod"]);if(!n||!i)return null;const l=new zs(n,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ko(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:xx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lx(r){const e=rl(il(r)).link,t=e?rl(il(e)).deep_link_id:null,n=rl(il(r)).deep_link_id;return(n?rl(il(n)).link:null)||n||t||e||r}class Lg{constructor(e){var t,n,i,a,l,c;const f=rl(il(e)),d=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(n=f.oobCode)!==null&&n!==void 0?n:null,g=Nx((i=f.mode)!==null&&i!==void 0?i:null);Ke(d&&v&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=f.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=Lx(e);try{return new Lg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.providerId=aa.PROVIDER_ID}static credential(e,t){return Cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lg.parseLink(t);return Ke(n,"argument-error"),Cl._fromEmailAndCode(e,n.code,n.tenantId)}}aa.PROVIDER_ID="password";aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends rS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends jl{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zs._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ki.credential(t,n)}catch{return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends jl{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com";Gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends jl{constructor(){super("twitter.com")}static credential(e,t){return zs._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Qi.credential(t,n)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(r,e){return Fl(r,"POST","/v1/accounts:signUp",gi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const a=await si._fromIdTokenResponse(e,n,i),l=Rw(n);return new Hs({user:a,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Rw(n);return new Hs({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Rw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Br{constructor(e,t,n,i){var a;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Hc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Hc(e,t,n,i)}}function iS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Hc._fromErrorAndOperation(r,a,e,n):a})}async function Mx(r,e,t=!1){const n=await ta(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Hs._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(r,e,t=!1){const{auth:n}=r;if(xr(n.app))return Promise.reject(li(n));const i="reauthenticate";try{const a=await ta(r,iS(n,i,e,r),t);Ke(a.idToken,n,"internal-error");const l=Og(a.idToken);Ke(l,n,"internal-error");const{sub:c}=l;return Ke(r.uid===c,n,"user-mismatch"),Hs._forOperation(r,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&yr(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(r,e,t=!1){if(xr(r.app))return Promise.reject(li(r));const n="signIn",i=await iS(r,n,e),a=await Hs._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(a.user),a}async function jx(r,e){return sS(hs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(r){const e=hs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Vx(r,e,t){const n=hs(r);await zc(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Rx)}async function Ux(r,e,t){if(xr(r.app))return Promise.reject(li(r));const n=hs(r),l=await zc(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dx).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&oS(r),f}),c=await Hs._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(c.user),c}function Pw(r,e,t){return xr(r.app)?Promise.reject(li(r)):jx(yt(r),aa.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&oS(r),n})}function Bx(r,e){return qx(yt(r),null,e)}async function qx(r,e,t){const{auth:n}=r,a={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const l=await ta(r,Cx(n,a));await r._updateTokensIfNecessary(l,!0)}function zx(r,e,t,n){return yt(r).onIdTokenChanged(e,t,n)}function Hx(r,e,t){return yt(r).beforeAuthStateChanged(e,t)}function Cd(r,e,t,n){return yt(r).onAuthStateChanged(e,t,n)}function Ow(r){return yt(r).signOut()}async function $x(r){return yt(r).delete()}const $c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($c,"1"),this.storage.removeItem($c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=1e3,Kx=10;class lS extends aS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);ox()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Kx):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Wx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lS.type="LOCAL";const Gx=lS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends aS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uS.type="SESSION";const cS=uS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new wh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(l).map(async d=>d(t.origin,a)),f=await Qx(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,f)=>{const d=Dg("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function Yx(r){jr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function Xx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zx(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function eN(){return hS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebaseLocalStorageDb",tN=1,Wc="firebaseLocalStorage",dS="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Eh(r,e){return r.transaction([Wc],e?"readwrite":"readonly").objectStore(Wc)}function nN(){const r=indexedDB.deleteDatabase(fS);return new Vl(r).toPromise()}function xm(){const r=indexedDB.open(fS,tN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Wc,{keyPath:dS})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Wc)?e(n):(n.close(),await nN(),e(await xm()))})})}async function xw(r,e,t){const n=Eh(r,!0).put({[dS]:e,value:t});return new Vl(n).toPromise()}async function rN(r,e){const t=Eh(r,!1).get(e),n=await new Vl(t).toPromise();return n===void 0?null:n.value}function Nw(r,e){const t=Eh(r,!0).delete(e);return new Vl(t).toPromise()}const iN=800,sN=3;class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>sN)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(eN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Xx(),!this.activeServiceWorker)return;this.sender=new Jx(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xm();return await xw(e,$c,"1"),await Nw(e,$c),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>xw(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>rN(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Eh(i,!1).getAll();return new Vl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pS.type="LOCAL";const oN=pS;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(r,e){return e?oi(e):(Ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends Ng{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lN(r){return sS(r.auth,new Mg(r),r.bypassAuthState)}function uN(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),Fx(t,new Mg(r),r.bypassAuthState)}async function cN(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),Mx(t,new Mg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lN;case"linkViaPopup":case"linkViaRedirect":return cN;case"reauthViaPopup":case"reauthViaRedirect":return uN;default:yr(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new Ml(2e3,1e4);class zo extends mS{constructor(e,t,n,i,a){super(e,t,i,a),this.provider=n,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hN.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="pendingRedirect",Tc=new Map;class dN extends mS{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Tc.get(this.auth._key());if(!e){try{const n=await pN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Tc.set(this.auth._key(),e)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pN(r,e){const t=yN(e),n=gN(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function mN(r,e){Tc.set(r._key(),e)}function gN(r){return oi(r._redirectPersistence)}function yN(r){return Ec(fN,r.config.apiKey,r.name)}async function vN(r,e,t=!1){if(xr(r.app))return Promise.reject(li(r));const n=hs(r),i=aN(n,e),l=await new dN(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=10*60*1e3;class wN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!gS(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_N&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lw(e))}saveEventToCache(e){this.cachedEventUids.add(Lw(e)),this.lastProcessedEventTime=Date.now()}}function Lw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function gS({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(r,e={}){return qr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IN=/^https?/;async function CN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TN(r);for(const t of e)try{if(bN(t))return}catch{}yr(r,"unauthorized-domain")}function bN(r){const e=Pm(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!IN.test(t))return!1;if(SN.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new Ml(3e4,6e4);function Dw(){const r=jr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function kN(r){return new Promise((e,t)=>{var n,i,a;function l(){Dw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dw(),t(Fr(r,"network-request-failed"))},timeout:AN.get()})}if(!((i=(n=jr().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=jr().gapi)===null||a===void 0)&&a.load)l();else{const c=mx("iframefcb");return jr()[c]=()=>{gapi.load?l():t(Fr(r,"network-request-failed"))},eS(`${px()}?onload=${c}`).catch(f=>t(f))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function RN(r){return Sc=Sc||kN(r),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new Ml(5e3,15e3),ON="__/auth/iframe",xN="emulator/auth/iframe",NN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DN(r){const e=r.config;Ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Pg(e,xN):`https://${r.config.authDomain}/${ON}`,n={apiKey:e.apiKey,appName:r.name,v:$s},i=LN.get(r.config.apiHost);i&&(n.eid=i);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Pl(n).slice(1)}`}async function MN(r){const e=await RN(r),t=jr().gapi;return Ke(t,r,"internal-error"),e.open({where:document.body,url:DN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NN,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const l=Fr(r,"network-request-failed"),c=jr().setTimeout(()=>{a(l)},PN.get());function f(){jr().clearTimeout(c),i(n)}n.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jN=500,VN=600,UN="_blank",BN="http://localhost";class Mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qN(r,e,t,n=jN,i=VN){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const f=Object.assign(Object.assign({},FN),{width:n.toString(),height:i.toString(),top:a,left:l}),d=hn().toLowerCase();t&&(c=KT(d)?UN:t),$T(d)&&(e=e||BN,f.scrollbars="yes");const v=Object.entries(f).reduce((p,[y,T])=>`${p}${y}=${T},`,"");if(sx(d)&&c!=="_self")return zN(e||"",c),new Mw(null);const g=window.open(e||"",c,v);Ke(g,r,"popup-blocked");try{g.focus()}catch{}return new Mw(g)}function zN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="__/auth/handler",$N="emulator/auth/handler",WN=encodeURIComponent("fac");async function Fw(r,e,t,n,i,a){Ke(r.config.authDomain,r,"auth-domain-config-required"),Ke(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:$s,eventId:i};if(e instanceof rS){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",BC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,g]of Object.entries({}))l[v]=g}if(e instanceof jl){const v=e.getScopes().filter(g=>g!=="");v.length>0&&(l.scopes=v.join(","))}r.tenantId&&(l.tid=r.tenantId);const c=l;for(const v of Object.keys(c))c[v]===void 0&&delete c[v];const f=await r._getAppCheckToken(),d=f?`#${WN}=${encodeURIComponent(f)}`:"";return`${KN(r)}?${Pl(c).slice(1)}${d}`}function KN({config:r}){return r.emulator?Pg(r,$N):`https://${r.authDomain}/${HN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="webStorageSupport";class GN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cS,this._completeRedirectFn=vN,this._overrideRedirectResult=mN}async _openPopup(e,t,n,i){var a;pi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Fw(e,t,n,Pm(),i);return qN(e,l,Dg())}async _openRedirect(e,t,n,i){await this._originValidation(e);const a=await Fw(e,t,n,Pm(),i);return Yx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(pi(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await MN(e),n=new wN(e);return t.register("authEvent",i=>(Ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bd,{type:bd},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[bd];l!==void 0&&t(!!l),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XT()||WT()||xg()}}const QN=GN;var jw="@firebase/auth",Vw="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XN(r){Us(new ts("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=n.options;Ke(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const f={apiKey:l,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZT(r)},d=new hx(n,i,a,f);return Ex(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Us(new ts("auth-internal",e=>{const t=hs(e.getProvider("auth").getImmediate());return(n=>new JN(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(jw,Vw,YN(r)),Lr(jw,Vw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=5*60,eL=H0("authIdTokenMaxAge")||ZN;let Uw=null;const tL=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>eL)return;const i=t==null?void 0:t.token;Uw!==i&&(Uw=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ic(r=Vm()){const e=Yc(r,"auth");if(e.isInitialized())return e.getImmediate();const t=wx(r,{popupRedirectResolver:QN,persistence:[oN,Gx,cS]}),n=H0("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=tL(a.toString());Hx(t,l,()=>l(t.currentUser)),zx(t,c=>l(c))}}const i=B0("auth");return i&&Tx(t,`http://${i}`),t}function nL(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}fx({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const a=Fr("internal-error");a.customData=i,t(a)},n.type="text/javascript",n.charset="UTF-8",nL().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XN("Browser");const rL={apiKey:"AIzaSyC1ejMnWWe98bFa29RwIiBBB7UndNdJ1cA",authDomain:"salescaptureai.firebaseapp.com",projectId:"salescaptureai",storageBucket:"salescaptureai.firebasestorage.app",messagingSenderId:"392166418592",appId:"1:392166418592:web:7807d9aafec37b8c0581c5",measurementId:"G-BTPP6403LT"},yS=G0(rL),iL=MO(),sL=YR(yS),oL=Ic(yS);class aL{constructor(){he(this,"doNotInclude",["render","forceUpdate","setState"])}bind(e){var n;let t=Object.getPrototypeOf(e);for(;t&&t!==Object.prototype;){const i=Object.getOwnPropertyNames(t).filter(a=>typeof t[a]=="function"&&a!=="constructor");for(let a of i)this.doNotInclude.includes(a)||(e[a]=(n=e[a])==null?void 0:n.bind(e));t=Object.getPrototypeOf(t)}}setDoNotIncludeList(e){this.doNotInclude=e}leaveOut(e){this.doNotInclude.push(e)}include(e){this.doNotInclude=this.doNotInclude.filter(t=>t!==e)}}let vn=new aL;class ui{constructor(){he(this,"list",[]);vn.bind(this)}setList(e){e=e.filter(t=>t!==void 0),this.list=e}getList(){return this.list}subscribe(e){e&&this.list.push(e)}unsubscribe(e){this.list=this.list.filter(t=>t!==e)}run(...e){for(let t of this.list)t&&t(...e)}}var tl={},Bw;function lL(){if(Bw)return tl;Bw=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.parse=l,tl.serialize=d;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function l(p,y){const T=new a,S=p.length;if(S<2)return T;const w=(y==null?void 0:y.decode)||v;let E=0;do{const I=p.indexOf("=",E);if(I===-1)break;const L=p.indexOf(";",E),b=L===-1?S:L;if(I>b){E=p.lastIndexOf(";",I-1)+1;continue}const F=c(p,E,I),V=f(p,I,F),P=p.slice(F,V);if(T[P]===void 0){let _=c(p,I+1,b),A=f(p,b,_);const k=w(p.slice(_,A));T[P]=k}E=b+1}while(E<S);return T}function c(p,y,T){do{const S=p.charCodeAt(y);if(S!==32&&S!==9)return y}while(++y<T);return T}function f(p,y,T){for(;y>T;){const S=p.charCodeAt(--y);if(S!==32&&S!==9)return y+1}return T}function d(p,y,T){const S=(T==null?void 0:T.encode)||encodeURIComponent;if(!r.test(p))throw new TypeError(`argument name is invalid: ${p}`);const w=S(y);if(!e.test(w))throw new TypeError(`argument val is invalid: ${y}`);let E=p+"="+w;if(!T)return E;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);E+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);E+="; Domain="+T.domain}if(T.path){if(!n.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);E+="; Path="+T.path}if(T.expires){if(!g(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);E+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(E+="; HttpOnly"),T.secure&&(E+="; Secure"),T.partitioned&&(E+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return E}function v(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function g(p){return i.call(p)==="[object Date]"}return tl}lL();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qw="popstate";function uL(r={}){function e(n,i){let{pathname:a,search:l,hash:c}=n.location;return Nm("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:bl(i)}return hL(e,t,null,r)}function bt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ur(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cL(){return Math.random().toString(36).substring(2,10)}function zw(r,e){return{usr:r.state,key:r.key,idx:e}}function Nm(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?la(e):e,state:t,key:e&&e.key||n||cL()}}function bl({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function la(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function hL(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,c="POP",f=null,d=v();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function v(){return(l.state||{idx:null}).idx}function g(){c="POP";let w=v(),E=w==null?null:w-d;d=w,f&&f({action:c,location:S.location,delta:E})}function p(w,E){c="PUSH";let I=Nm(S.location,w,E);d=v()+1;let L=zw(I,d),b=S.createHref(I);try{l.pushState(L,"",b)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(b)}a&&f&&f({action:c,location:S.location,delta:1})}function y(w,E){c="REPLACE";let I=Nm(S.location,w,E);d=v();let L=zw(I,d),b=S.createHref(I);l.replaceState(L,"",b),a&&f&&f({action:c,location:S.location,delta:0})}function T(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof w=="string"?w:bl(w);return I=I.replace(/ $/,"%20"),bt(E,`No window.location.(origin|href) available to create URL for href: ${I}`),new URL(I,E)}let S={get action(){return c},get location(){return r(i,l)},listen(w){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(qw,g),f=w,()=>{i.removeEventListener(qw,g),f=null}},createHref(w){return e(i,w)},createURL:T,encodeLocation(w){let E=T(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:y,go(w){return l.go(w)}};return S}function vS(r,e,t="/"){return fL(r,e,t,!1)}function fL(r,e,t,n){let i=typeof e=="string"?la(e):e,a=ls(i.pathname||"/",t);if(a==null)return null;let l=_S(r);dL(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let d=IL(a);c=TL(l[f],d,n)}return c}function _S(r,e=[],t=[],n=""){let i=(a,l,c)=>{let f={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(bt(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length));let d=ci([n,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(bt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),_S(a.children,e,v,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:wL(d,a.index),routesMeta:v})};return r.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let f of wS(a.path))i(a,l,f)}),e}function wS(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let l=wS(n.join("/")),c=[];return c.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&c.push(...l),c.map(f=>r.startsWith("/")&&f===""?"/":f)}function dL(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:EL(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var pL=/^:[\w-]+$/,mL=3,gL=2,yL=1,vL=10,_L=-2,Hw=r=>r==="*";function wL(r,e){let t=r.split("/"),n=t.length;return t.some(Hw)&&(n+=_L),e&&(n+=gL),t.filter(i=>!Hw(i)).reduce((i,a)=>i+(pL.test(a)?mL:a===""?yL:vL),n)}function EL(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function TL(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",l=[];for(let c=0;c<n.length;++c){let f=n[c],d=c===n.length-1,v=a==="/"?e:e.slice(a.length)||"/",g=Kc({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},v),p=f.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=Kc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:ci([a,g.pathname]),pathnameBase:kL(ci([a,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(a=ci([a,g.pathnameBase]))}return l}function Kc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=SL(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,{paramName:v,isOptional:g},p)=>{if(v==="*"){let T=c[p]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const y=c[p];return g&&!y?d[v]=void 0:d[v]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:r}}function SL(r,e=!1,t=!0){Ur(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(n.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function IL(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ls(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function CL(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?la(r):r;return{pathname:t?t.startsWith("/")?t:bL(t,e):e,search:RL(n),hash:PL(i)}}function bL(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ad(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AL(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ES(r){let e=AL(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function TS(r,e,t,n=!1){let i;typeof r=="string"?i=la(r):(i={...r},bt(!i.pathname||!i.pathname.includes("?"),Ad("?","pathname","search",i)),bt(!i.pathname||!i.pathname.includes("#"),Ad("#","pathname","hash",i)),bt(!i.search||!i.search.includes("#"),Ad("#","search","hash",i)));let a=r===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!n&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),g-=1;i.pathname=p.join("/")}c=g>=0?e[g]:"/"}let f=CL(i,c),d=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||v)&&(f.pathname+="/"),f}var ci=r=>r.join("/").replace(/\/\/+/g,"/"),kL=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),RL=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,PL=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function OL(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var SS=["POST","PUT","PATCH","DELETE"];new Set(SS);var xL=["GET",...SS];new Set(xL);var ua=ve.createContext(null);ua.displayName="DataRouter";var Th=ve.createContext(null);Th.displayName="DataRouterState";var IS=ve.createContext({isTransitioning:!1});IS.displayName="ViewTransition";var NL=ve.createContext(new Map);NL.displayName="Fetchers";var LL=ve.createContext(null);LL.displayName="Await";var zr=ve.createContext(null);zr.displayName="Navigation";var Ul=ve.createContext(null);Ul.displayName="Location";var yi=ve.createContext({outlet:null,matches:[],isDataRoute:!1});yi.displayName="Route";var Fg=ve.createContext(null);Fg.displayName="RouteError";function DL(r,{relative:e}={}){bt(Bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ve.useContext(zr),{hash:i,pathname:a,search:l}=ql(r,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:ci([t,a])),n.createHref({pathname:c,search:l,hash:i})}function Bl(){return ve.useContext(Ul)!=null}function Gs(){return bt(Bl(),"useLocation() may be used only in the context of a <Router> component."),ve.useContext(Ul).location}var CS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bS(r){ve.useContext(zr).static||ve.useLayoutEffect(r)}function ML(){let{isDataRoute:r}=ve.useContext(yi);return r?QL():FL()}function FL(){bt(Bl(),"useNavigate() may be used only in the context of a <Router> component.");let r=ve.useContext(ua),{basename:e,navigator:t}=ve.useContext(zr),{matches:n}=ve.useContext(yi),{pathname:i}=Gs(),a=JSON.stringify(ES(n)),l=ve.useRef(!1);return bS(()=>{l.current=!0}),ve.useCallback((f,d={})=>{if(Ur(l.current,CS),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=TS(f,JSON.parse(a),i,d.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ci([e,v.pathname])),(d.replace?t.replace:t.push)(v,d.state,d)},[e,t,a,i,r])}ve.createContext(null);function ql(r,{relative:e}={}){let{matches:t}=ve.useContext(yi),{pathname:n}=Gs(),i=JSON.stringify(ES(t));return ve.useMemo(()=>TS(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function jL(r,e){return AS(r,e)}function AS(r,e,t,n){var E;bt(Bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=ve.useContext(zr),{matches:a}=ve.useContext(yi),l=a[a.length-1],c=l?l.params:{},f=l?l.pathname:"/",d=l?l.pathnameBase:"/",v=l&&l.route;{let I=v&&v.path||"";kS(f,!v||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let g=Gs(),p;if(e){let I=typeof e=="string"?la(e):e;bt(d==="/"||((E=I.pathname)==null?void 0:E.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${I.pathname}" was given in the \`location\` prop.`),p=I}else p=g;let y=p.pathname||"/",T=y;if(d!=="/"){let I=d.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(I.length).join("/")}let S=vS(r,{pathname:T});Ur(v||S!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Ur(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=zL(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},c,I.params),pathname:ci([d,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:ci([d,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,t,n);return e&&w?ve.createElement(Ul.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function VL(){let r=GL(),e=OL(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=ve.createElement(ve.Fragment,null,ve.createElement("p",null," Hey developer "),ve.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ve.createElement("code",{style:a},"ErrorBoundary")," or"," ",ve.createElement("code",{style:a},"errorElement")," prop on your route.")),ve.createElement(ve.Fragment,null,ve.createElement("h2",null,"Unexpected Application Error!"),ve.createElement("h3",{style:{fontStyle:"italic"}},e),t?ve.createElement("pre",{style:i},t):null,l)}var UL=ve.createElement(VL,null),BL=class extends ve.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?ve.createElement(yi.Provider,{value:this.props.routeContext},ve.createElement(Fg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qL({routeContext:r,match:e,children:t}){let n=ve.useContext(ua);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ve.createElement(yi.Provider,{value:r},t)}function zL(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,a=t==null?void 0:t.errors;if(a!=null){let f=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);bt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let l=!1,c=-1;if(t)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:v,errors:g}=t,p=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((f,d,v)=>{let g,p=!1,y=null,T=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||UL,l&&(c<0&&v===0?(kS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,T=null):c===v&&(p=!0,T=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,v+1)),w=()=>{let E;return g?E=y:p?E=T:d.route.Component?E=ve.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=f,ve.createElement(qL,{match:d,routeContext:{outlet:f,matches:S,isDataRoute:t!=null},children:E})};return t&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?ve.createElement(BL,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}function jg(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HL(r){let e=ve.useContext(ua);return bt(e,jg(r)),e}function $L(r){let e=ve.useContext(Th);return bt(e,jg(r)),e}function WL(r){let e=ve.useContext(yi);return bt(e,jg(r)),e}function Vg(r){let e=WL(r),t=e.matches[e.matches.length-1];return bt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function KL(){return Vg("useRouteId")}function GL(){var n;let r=ve.useContext(Fg),e=$L("useRouteError"),t=Vg("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function QL(){let{router:r}=HL("useNavigate"),e=Vg("useNavigate"),t=ve.useRef(!1);return bS(()=>{t.current=!0}),ve.useCallback(async(i,a={})=>{Ur(t.current,CS),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var $w={};function kS(r,e,t){!e&&!$w[r]&&($w[r]=!0,Ur(!1,t))}ve.memo(JL);function JL({routes:r,future:e,state:t}){return AS(r,void 0,t,e)}function qo(r){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YL({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){bt(!Bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=ve.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof t=="string"&&(t=la(t));let{pathname:f="/",search:d="",hash:v="",state:g=null,key:p="default"}=t,y=ve.useMemo(()=>{let T=ls(f,l);return T==null?null:{location:{pathname:T,search:d,hash:v,state:g,key:p},navigationType:n}},[l,f,d,v,g,p,n]);return Ur(y!=null,`<Router basename="${l}"> is not able to match the URL "${f}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:ve.createElement(zr.Provider,{value:c},ve.createElement(Ul.Provider,{children:e,value:y}))}function Ww({children:r,location:e}){return jL(Lm(r),e)}function Lm(r,e=[]){let t=[];return ve.Children.forEach(r,(n,i)=>{if(!ve.isValidElement(n))return;let a=[...e,i];if(n.type===ve.Fragment){t.push.apply(t,Lm(n.props.children,a));return}bt(n.type===qo,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Lm(n.props.children,a)),t.push(l)}),t}var Cc="get",bc="application/x-www-form-urlencoded";function Sh(r){return r!=null&&typeof r.tagName=="string"}function XL(r){return Sh(r)&&r.tagName.toLowerCase()==="button"}function ZL(r){return Sh(r)&&r.tagName.toLowerCase()==="form"}function e2(r){return Sh(r)&&r.tagName.toLowerCase()==="input"}function t2(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function n2(r,e){return r.button===0&&(!e||e==="_self")&&!t2(r)}var dc=null;function r2(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var i2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kd(r){return r!=null&&!i2.has(r)?(Ur(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bc}"`),null):r}function s2(r,e){let t,n,i,a,l;if(ZL(r)){let c=r.getAttribute("action");n=c?ls(c,e):null,t=r.getAttribute("method")||Cc,i=kd(r.getAttribute("enctype"))||bc,a=new FormData(r)}else if(XL(r)||e2(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||c.getAttribute("action");if(n=f?ls(f,e):null,t=r.getAttribute("formmethod")||c.getAttribute("method")||Cc,i=kd(r.getAttribute("formenctype"))||kd(c.getAttribute("enctype"))||bc,a=new FormData(c,r),!r2()){let{name:d,type:v,value:g}=r;if(v==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,g)}}else{if(Sh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cc,n=null,i=bc,l=r}return a&&i==="text/plain"&&(l=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:l}}function Ug(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function o2(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a2(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function l2(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await o2(a,t);return l.links?l.links():[]}return[]}));return f2(n.flat(1).filter(a2).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Kw(r,e,t,n,i,a){let l=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,c=(f,d)=>{var v;return t[d].pathname!==f.pathname||((v=t[d].route.path)==null?void 0:v.endsWith("*"))&&t[d].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,d)=>l(f,d)||c(f,d)):a==="data"?e.filter((f,d)=>{var g;let v=n.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let p=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function u2(r,e){return c2(r.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function c2(r){return[...new Set(r)]}function h2(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function f2(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(h2(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function d2(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function p2(){let r=ve.useContext(ua);return Ug(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function m2(){let r=ve.useContext(Th);return Ug(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Bg=ve.createContext(void 0);Bg.displayName="FrameworkContext";function RS(){let r=ve.useContext(Bg);return Ug(r,"You must render this element inside a <HydratedRouter> element"),r}function g2(r,e){let t=ve.useContext(Bg),[n,i]=ve.useState(!1),[a,l]=ve.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:v,onTouchStart:g}=e,p=ve.useRef(null);ve.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let S=E=>{E.forEach(I=>{l(I.isIntersecting)})},w=new IntersectionObserver(S,{threshold:.5});return p.current&&w.observe(p.current),()=>{w.disconnect()}}},[r]),ve.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let y=()=>{i(!0)},T=()=>{i(!1),l(!1)};return t?r!=="intent"?[a,p,{}]:[a,p,{onFocus:nl(c,y),onBlur:nl(f,T),onMouseEnter:nl(d,y),onMouseLeave:nl(v,T),onTouchStart:nl(g,y)}]:[!1,p,{}]}function nl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function y2({page:r,...e}){let{router:t}=p2(),n=ve.useMemo(()=>vS(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?ve.createElement(_2,{page:r,matches:n,...e}):null}function v2(r){let{manifest:e,routeModules:t}=RS(),[n,i]=ve.useState([]);return ve.useEffect(()=>{let a=!1;return l2(r,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[r,e,t]),n}function _2({page:r,matches:e,...t}){let n=Gs(),{manifest:i,routeModules:a}=RS(),{loaderData:l,matches:c}=m2(),f=ve.useMemo(()=>Kw(r,e,c,i,n,"data"),[r,e,c,i,n]),d=ve.useMemo(()=>Kw(r,e,c,i,n,"assets"),[r,e,c,i,n]),v=ve.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let y=new Set,T=!1;if(e.forEach(w=>{var I;let E=i.routes[w.route.id];!E||!E.hasLoader||(!f.some(L=>L.route.id===w.route.id)&&w.route.id in l&&((I=a[w.route.id])!=null&&I.shouldRevalidate)||E.hasClientLoader?T=!0:y.add(w.route.id))}),y.size===0)return[];let S=d2(r);return T&&y.size>0&&S.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[S.pathname+S.search]},[l,n,i,f,e,r,a]),g=ve.useMemo(()=>u2(d,i),[d,i]),p=v2(d);return ve.createElement(ve.Fragment,null,v.map(y=>ve.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),g.map(y=>ve.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),p.map(({key:y,link:T})=>ve.createElement("link",{key:y,...T})))}function w2(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var PS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PS&&(window.__reactRouterVersion="7.1.3")}catch{}function E2({basename:r,children:e,window:t}){let n=ve.useRef();n.current==null&&(n.current=uL({window:t,v5Compat:!0}));let i=n.current,[a,l]=ve.useState({action:i.action,location:i.location}),c=ve.useCallback(f=>{ve.startTransition(()=>l(f))},[l]);return ve.useLayoutEffect(()=>i.listen(c),[i,c]),ve.createElement(YL,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=ve.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:l,state:c,target:f,to:d,preventScrollReset:v,viewTransition:g,...p},y){let{basename:T}=ve.useContext(zr),S=typeof d=="string"&&OS.test(d),w,E=!1;if(typeof d=="string"&&S&&(w=d,PS))try{let A=new URL(window.location.href),k=d.startsWith("//")?new URL(A.protocol+d):new URL(d),R=ls(k.pathname,T);k.origin===A.origin&&R!=null?d=R+k.search+k.hash:E=!0}catch{Ur(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=DL(d,{relative:i}),[L,b,F]=g2(n,p),V=C2(d,{replace:l,state:c,target:f,preventScrollReset:v,relative:i,viewTransition:g});function P(A){e&&e(A),A.defaultPrevented||V(A)}let _=ve.createElement("a",{...p,...F,href:w||I,onClick:E||a?e:P,ref:w2(y,b),target:f,"data-discover":!S&&t==="render"?"true":void 0});return L&&!S?ve.createElement(ve.Fragment,null,_,ve.createElement(y2,{page:I})):_});vr.displayName="Link";var T2=ve.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:l,viewTransition:c,children:f,...d},v){let g=ql(l,{relative:d.relative}),p=Gs(),y=ve.useContext(Th),{navigator:T,basename:S}=ve.useContext(zr),w=y!=null&&P2(g)&&c===!0,E=T.encodeLocation?T.encodeLocation(g).pathname:g.pathname,I=p.pathname,L=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(I=I.toLowerCase(),L=L?L.toLowerCase():null,E=E.toLowerCase()),L&&S&&(L=ls(L,S)||L);const b=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let F=I===E||!i&&I.startsWith(E)&&I.charAt(b)==="/",V=L!=null&&(L===E||!i&&L.startsWith(E)&&L.charAt(E.length)==="/"),P={isActive:F,isPending:V,isTransitioning:w},_=F?e:void 0,A;typeof n=="function"?A=n(P):A=[n,F?"active":null,V?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(P):a;return ve.createElement(vr,{...d,"aria-current":_,className:A,ref:v,style:k,to:l,viewTransition:c},typeof f=="function"?f(P):f)});T2.displayName="NavLink";var S2=ve.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:l=Cc,action:c,onSubmit:f,relative:d,preventScrollReset:v,viewTransition:g,...p},y)=>{let T=k2(),S=R2(c,{relative:d}),w=l.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&OS.test(c),I=L=>{if(f&&f(L),L.defaultPrevented)return;L.preventDefault();let b=L.nativeEvent.submitter,F=(b==null?void 0:b.getAttribute("formmethod"))||l;T(b||L.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:a,relative:d,preventScrollReset:v,viewTransition:g})};return ve.createElement("form",{ref:y,method:w,action:S,onSubmit:n?f:I,...p,"data-discover":!E&&r==="render"?"true":void 0})});S2.displayName="Form";function I2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(r){let e=ve.useContext(ua);return bt(e,I2(r)),e}function C2(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:l}={}){let c=ML(),f=Gs(),d=ql(r,{relative:a});return ve.useCallback(v=>{if(n2(v,e)){v.preventDefault();let g=t!==void 0?t:bl(f)===bl(d);c(r,{replace:g,state:n,preventScrollReset:i,relative:a,viewTransition:l})}},[f,c,d,t,n,e,r,i,a,l])}var b2=0,A2=()=>`__${String(++b2)}__`;function k2(){let{router:r}=xS("useSubmit"),{basename:e}=ve.useContext(zr),t=KL();return ve.useCallback(async(n,i={})=>{let{action:a,method:l,encType:c,formData:f,body:d}=s2(n,e);if(i.navigate===!1){let v=i.fetcherKey||A2();await r.fetch(v,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function R2(r,{relative:e}={}){let{basename:t}=ve.useContext(zr),n=ve.useContext(yi);bt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...ql(r||".",{relative:e})},l=Gs();if(r==null){a.search=l.search;let c=new URLSearchParams(a.search),f=c.getAll("index");if(f.some(v=>v==="")){c.delete("index"),f.filter(g=>g).forEach(g=>c.append("index",g));let v=c.toString();a.search=v?`?${v}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ci([t,a.pathname])),bl(a)}function P2(r,e={}){let t=ve.useContext(IS);bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=xS("useViewTransitionState"),i=ql(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=ls(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=ls(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Kc(i.pathname,l)!=null||Kc(i.pathname,a)!=null}new TextEncoder;class O2{constructor(e){vn.bind(this),this.props={...e},this.content=e.content||"",this.type="div"}setHtmlType(e){this.type=e}getHtmlType(){return this.type}setProp(e,t){this.props[e]=t}setProps(e){this.props={...e},e.content&&(this.content=e.content)}updateProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}addProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}getProps(){return this.props}getProp(e){return this.props[e]}setStyle(e){this.props.style=e}updateStyle(e){this.props.style={...this.props.style,...e}}getStyle(){return this.props.style}setClass(e){this.props.className=e}getClass(){return this.props.className}setOnChange(e){this.props.onChange=e}setOnClick(e){this.props.onClick=e}getOnClick(){return this.props.onClick}setContent(e){this.content=e}getContent(){return this.content}getHtml(e){let{content:t,props:n}=e,i=e==null?void 0:e.type;t&&(this.content=t),n={...this.props,...n};const a={a:U.jsx("a",{...n,children:this.content}),button:U.jsx("button",{...n,children:this.content}),div:U.jsx("div",{...n,children:this.content}),h1:U.jsx("h1",{...n,children:this.content}),h2:U.jsx("h2",{...n,children:this.content}),h3:U.jsx("h3",{...n,children:this.content}),h4:U.jsx("h4",{...n,children:this.content}),h5:U.jsx("h5",{...n,children:this.content}),h6:U.jsx("h6",{...n,children:this.content}),img:U.jsx("img",{...n}),input:U.jsx("input",{...n}),p:U.jsx("p",{...n,children:this.content}),span:U.jsx("span",{...n,children:this.content}),table:U.jsx("table",{...n,children:this.content}),tr:U.jsx("tr",{...n,children:this.content}),td:U.jsx("td",{...n,children:this.content}),th:U.jsx("th",{...n,children:this.content}),ul:U.jsx("ul",{...n,children:this.content}),li:U.jsx("li",{...n,children:this.content}),ol:U.jsx("ol",{...n,children:this.content}),form:U.jsx("form",{...n,children:this.content}),textarea:U.jsx("textarea",{...n,children:this.content}),select:U.jsx("select",{...n,children:this.content}),option:U.jsx("option",{...n,children:this.content}),label:U.jsx("label",{...n,children:this.content}),nav:U.jsx("nav",{...n,children:this.content}),footer:U.jsx("footer",{...n,children:this.content}),header:U.jsx("header",{...n,children:this.content}),article:U.jsx("article",{...n,children:this.content}),section:U.jsx("section",{...n,children:this.content}),aside:U.jsx("aside",{...n,children:this.content}),main:U.jsx("main",{...n,children:this.content}),video:U.jsx("video",{...n,children:this.content}),audio:U.jsx("audio",{...n,children:this.content}),iframe:U.jsx("iframe",{...n,children:this.content}),canvas:U.jsx("canvas",{...n,children:this.content}),content:U.jsx(U.Fragment,{}),fragment:U.jsx(U.Fragment,{children:this.content}),link:U.jsx(vr,{...n,children:this.content})};if(i==="content"||this.type==="conent"){let c=this.content;a.content=U.jsx(c,{...n})}return i?a[i]:a[this.type]}}class x2 extends ui{constructor(){super(...arguments);he(this,"component");he(this,"setAttribute")}setObserverFunction(t){this.setAttribute=t}setComponent(t){this.component=t}getComponent(){return this.component}run(){for(let t of this.list)this.setAttribute(t.name,new O2(t))}}class ca{constructor(){he(this,"factory");he(this,"componentList");he(this,"themeFactory");he(this,"appComponent");he(this,"mainFunc");he(this,"appObserver",new ui);vn.bind(this),this.getFactory(),this.getThemeFactory()}subscribeToAppObserver(e){this.appObserver.subscribe(e)}getMainFunc(){return this.mainFunc}getFactory(){}getThemeFactory(){}getAppComponent(){return this.appComponent}setAppComponent(e){this.appComponent=e,this.appObserver.run(e)}getComponentList(){var e,t;return this.componentList||(this.componentList=(t=(e=this.appComponent)==null?void 0:e.state)==null?void 0:t.componentList),this.componentList}}class N2 extends ca{constructor(){super(...arguments);he(this,"type","appInterface")}}const NS=new N2;class ft extends ve.Component{constructor(t){super(t);he(this,"resize");vn.bind(this),this.initialBuilderSetupFunctions=[],this.setInterface(),this.setInitialApp(),this.initialPropsSetupFunctions=[this.setInterface,this.setAppOnInterace,this.setInitialApp,this.setObj,this.setThemeFactory,this.setTheme,this.createReactRefsForComponents],this.setupObserver=new ui,this.builderObserver=new x2,this.ObserverForSetupFunction=new ui,this.builderObserver.setComponent(this),this.builderObserver.setObserverFunction(this.setHtmlBuilderSingleton),this.initialSetupFunctions=[this.builderObserver.run,this.additionalSetup],this.components=[]}setInitialApp(){var n,i,a,l,c,f;this.interface||(this.app=(n=this.props)==null?void 0:n.app);let t=this.interface.getAppComponent();t&&(this.app=t),this.app&&(this.propsState=(i=this.app)==null?void 0:i.state,this.dispatch=(a=this.app)==null?void 0:a.dispatch,this.componentList=(l=this.propsState)==null?void 0:l.componentList,this.APIService=(c=this.componentList)==null?void 0:c.getAPIService(),this.operationsFactory=(f=this.componentList)==null?void 0:f.getOperationsFactory())}setInterface(t){var n;this.interface=t||((n=this.props)==null?void 0:n.interface)||this.interface||NS,this.interface.type==="appInterface"&&this.subscribeToAppObserverBool===void 0&&(this.subscribeToAppObserverBool=!0,this.interface.subscribeToAppObserver(this.setInitialApp))}setAppOnInterace(){this.interface&&(this.props.app&&this.interface.setAppComponent(this.props.app),this.app=this.interface.getAppComponent())}setComponents(t){this.components=t}getComponents(){return this.components}createReactRefsForComponents(){for(let t of this.components)this[t+"Ref"]||(this[t+"Ref"]=Qc.createRef())}createPropObj(t,n){n=n||this.state.propType;let i,a=this[n||"props"][t+"Class"];return a||(a=this.theme&&typeof this.theme!="string"?this.theme[this.state[t+"Class"]]:this["default"+t+"Class"]||""),i={name:t,ref:this[t+"Ref"],style:this[t+"Click"]?{...this[n||"props"][t+"Style"],cursor:"pointer"}:this[n||"props"][t+"Style"],className:a,content:this[n||"props"][t],onClick:this[n||"props"][t+"Click"]||this[t+"Click"],obj:this.obj},i.onClick&&(i.onClick=i.onClick.bind(this,this.obj)),i}builderPropsSubscribe(t){this[t+"Props"]=this.createPropObj(t),this.builderObserver.subscribe(this[t+"Props"])}setInitialBuilderPropFunctions(){for(let t of this.components)this["set"+t+"props"]||(this["set"+t+"props"]=this.builderPropsSubscribe(t)),this.initialBuilderSetupFunctions.push(this["set"+t+"props"]);return this.initialBuilderSetupFunctions}loadObserver(){this.setupObserver.setList(this.initialSetupFunctions)}setInitialSetupFunctions(){const t=[...this.initialPropsSetupFunctions,...this.initialBuilderSetupFunctions,...this.initialSetupFunctions,this.additionalPostSetup],n=[...new Set(t)];return this.initialSetupFunctions=n,this.initialSetupFunctions}runInitialPropsSetup(){for(let t of this.initialPropsSetupFunctions)t&&t()}isArray(t){return Array.isArray(t)?t:[t]}setObj(){this.obj=this.props.obj}setThemeFactory(){this.interface!==void 0&&(this.themeFactory=this.interface.getThemeFactory())}setTheme(){var t,n;this.themeFactory&&(this.theme=this.themeFactory.getComponent(((t=this.props)==null?void 0:t.theme)||((n=this.state)==null?void 0:n.defaultTheme)||"default"))}clearLists(){this.setupObserver.setList([]),this.builderObserver.setList([])}setupItem(...t){this.clearLists(),this.preSetup(),this.runInitialPropsSetup(),this.setInitialBuilderPropFunctions(),this.setInitialSetupFunctions(),this.loadObserver(),this.setupObserver.run(...t)}preSetup(){}setAttribute(t,n){this[t]=n}setHtmlBuilderSingleton(t,n){this[t]||(this[t]=n)}getInnerContent(){return this.innerContent}getAdditionalInnerContent(){return this.innerContent}mapList(t){return U.jsx(U.Fragment,{children:t.filter(n=>n!==void 0&&n!==!1).map(n=>n)})}additionalSetup(){}additionalPostSetup(){}mapInnerContent(){return this.getInnerContent(),this.getAdditionalInnerContent(),this.innerContent=this.mapList(this.innerContent),this.innerContent}getHtml(){return this.html}getFactoryTypeString(t){let n=this.propsState.componentListInterface.getFactory().getRegistry(),i=n.find(a=>t.toLowerCase()===a);return i=i||n.find(a=>t.toLowerCase().includes(a)),i}getCapitalFirstLetter(t){var n;return((n=t==null?void 0:t.charAt(0))==null?void 0:n.toUpperCase())+(t==null?void 0:t.slice(1))}classNameToString(t){let n=t.name;return n.charAt(0).toLowerCase()+n.slice(1)}render(){return this.setupItem(),this.html=this.getHtml(),this.html}}class L2 extends ca{}const LS=new L2;class _r extends ft{constructor(t){super(t);he(this,"type");he(this,"theme");he(this,"interface");this.wrapperRef=Qc.createRef(),this.setWrapperRef=this.setWrapperRef,this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setApp,this.setType,this.setClassStr],this.state={defaultType:this.props.type?this.props.type:"fit",defaultTheme:this.props.theme?this.props.theme:"Default",typeKey:"type",themeKey:"theme"},this.interface=LS}componentDidMount(){this.props.popup&&document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){this.props.popup&&document.removeEventListener("mousedown",this.handleClickOutside)}handleClickOutside(t){this.wrapperRef&&!this.wrapperRef.current.contains(t.target)&&this.props.handleClose&&this.props.handleClose()}isPopup(t){if(this.props.popup){let n=this.closePopup.getHtml({content:this.props.closeUI||U.jsx(U.Fragment,{children:"X"}),props:{onClick:()=>{this.props.handleClose&&this.props.handleClose()}}}),i=this.popupContent.getHtml({content:U.jsxs(U.Fragment,{children:[n,t]}),props:{ref:this.wrapperRef}});t=this.backDrop.getHtml({content:i})}return t}setTheme(){this.theme=this.props[this.state.themeKey]?this.props[this.state.themeKey]:this.state.defaultTheme}setType(){this.type=this.props[this.state.typeKey]?this.props[this.state.typeKey]:this.state.defaultType}setClassStr(){this.defaultcardClass=this.type+this.theme+" scroller",this.defaultcardClass=this.props.popup?this.defaultcardClass+" cardPopup":this.defaultcardClass,this.props.popup&&(this.defaultbackDropClass="backDropPopup",this.defaultpopupContentClass="popupContent",this.defaultclosePopupClass="closePopup")}getHtml(){let t=this.getContent();return this.html=this.card.getHtml({content:t}),this.html=this.isPopup(this.html),this.html}getContent(){return this.content=this.props.content,this.content}preSetup(){let t=["card"];this.props.popup&&(t=[...t,"backDrop","popupContent","closePopup"]),this.setComponents(t)}}let D2=class{constructor(e){he(this,"operationsFactory");he(this,"dispatch");he(this,"json",{_id:"",backendKeys:[],backendAttributes:[],backendFilterKeys:[],orderMatters:!1,orderFilterKey:"",filterKey:"",removeOwnerQuery:[]});he(this,"componentList");he(this,"APIService");vn.bind(this),this.operationsFactory=e,this.json._id=this.createId()}getAssociatedItemsHelper(e){let t=this.json._id,n=this.json.type+"Id";return this.json.backendAttributes.length>0&&(t=this.json[this.json.backendAttributes[e]]),this.json.backendFilterKeys.length>0&&(n=this.json.backendFilterKeys[e]),{attribute:t,filterKey:n}}async getAssociatedItems(e){e=e||this.json.backendKeys;const t=e==null?void 0:e.map((n,i)=>{let{attribute:a,filterKey:l}=this.getAssociatedItemsHelper(i);return this.componentList.getList(n,a,l)});return await Promise.all(t)}async getAssociatedItemsFromBackend(e,t){e=e||this.json.backendKeys;let n=!0;const i=e==null?void 0:e.map((a,l)=>{this.json.removeOwnerQuery.includes(a)&&(n=!1);let{attribute:c,filterKey:f}=this.getAssociatedItemsHelper(l);return this.componentList.getComponentsFromBackend({type:a,ids:c,filterKeys:f,owner:n,...t})});return await Promise.all(i)}setComponentList(e){this.componentList=e,this.componentList.getAPIService&&this.setAPIService(this.componentList.getAPIService()),this.componentList.getDispatch&&this.setDispatch(this.componentList.getDispatch())}setDispatch(e){this.dispatch=e}getDispatch(){return this.dispatch}getComponentList(){return this.componentList}setAPIService(e){this.APIService=e}getAPIService(){return this.APIService}update(...e){this.APIService&&this.APIService.update([this],...e)}del(...e){this.componentList.del(this,{...e})}updateOrder(e,t){e=e||-1,e===!0&&(e=1);let n=this.componentList.getList(this.json.type,this.json[this.json.orderFilterKey],this.json.orderFilterKey);t=t||(this.json.orderKey?this.json[this.json.orderKey]:"order");let i=n.indexOf(this),a;e<0&&i===0?this.json[t]=n.length:e>0&&i===n.length-1?(this.json[t]=0,this.componentList.shiftOrderedList(this,t)):(a=n[i+e],a.setCompState({[t]:i},{run:!0,clean:!0}),this.json[t]=i+e),this.componentList.sortSelectedList(this.json.type,this.json.orderKey||"order"),this.componentList.resetOrder(this,t),this.update()}prepare(){this.operationsFactory.prepare({prepare:this})}setAttribute(e,t){this[e]=t}setAttributes(e){for(let t in e)this[t]=e[t]}getAttribute(e){return this[e]}getJsonAttribute(e){return this.json[e]}setCompState(e,t,n,i){this.subscribeToOperations(t),this.json={...this.json,...e},n&&this.dispatch({updated:this}),i&&i(e),t!=null&&t.run&&this.operationsFactory.runOperations()}getOperationsFactory(){return this.operationsFactory}setJson(e,t,n,i){this.subscribeToOperations(t),this.json=e,n&&this.dispatch({updated:this}),i&&i(this),t!=null&&t.run&&this.operationsFactory.runOperations()}getJson(){return this.json}subscribeToOperations(e){e&&this.operationsFactory.subscribeToOperations(e.operation||this.update,e.clean)}copyJson(e){return{...this.json,_id:"",...e}}copy(e){let t=this.copyJson(e);this.componentList.addComponents(t)}updateObjInsideJson(e,t){this.json[e]={...this.json[e],...t}}removeObjInsideJson(e,t){let n={};for(const i in this.json[e])t.includes(i)||(n[i]=this.json[e][i]);this.json[e]=n}randomFiveDigitNumber(){let e=Math.floor(Math.random()*9e4)+1e4;e=e.toString();let t=String.fromCharCode(97+Math.floor(Math.random()*26)),n=Math.floor(Math.random()*5);if(e=e.substring(0,n)+t+e.substring(n+1),Math.floor(Math.random()*2)===1){let a=String.fromCharCode(97+Math.floor(Math.random()*26)),l;do l=Math.floor(Math.random()*5);while(l===n);e=e.substring(0,l)+a+e.substring(l+1)}return e}createId(){const e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=e.getFullYear().toString().slice(-2);return this.randomFiveDigitNumber().toString()+t+n+i}createUUID(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789",i=n.length;for(let a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*i));return t}};class M2{constructor(){he(this,"operationsFactory");he(this,"factory",{})}registerComponents(e){this.factory[e.name]=e.component}setOperationsFactory(e){this.operationsFactory=e}getRegistry(){return Object.keys(this.factory)}async getComponent(e){if(Object.keys(this.factory).includes(e.type)){let t=e.type,n=new this.factory[t](this.operationsFactory);return[void 0,"",!1].includes(e._id)&&(e._id=n.getJson()._id),n.setCompState({...e}),n}}}class F2 extends ui{clear(){this.list=[]}cleanSubscibe(e){this.clear(),this.subscribe(e)}run(...e){for(let t of this.list)t&&t(...e);this.clear()}}class Gw{constructor(e){he(this,"register");he(this,"factory");he(this,"operationsObserver");vn.bind(this),this.add=[],this.lastChange=[],this.factory=e.getFactory(),this.operationsObserver=new F2}removeFromList(e){this.add=this.add.filter(t=>t!==e)}getOperationsObserver(){return this.operationsObserver}setOperationsObserver(e){this.operationsObserver=e}subscribeToOperations(e,t){t&&this.operationsObserver.clear(),this.operationsObserver.subscribe(e)}runOperations(...e){this.operationsObserver.run(...e)}setAddList(e){this.add=[...e],this.lastChange=[...this.add]}getAddList(){return this.add}getLastPrepare(){return this.lastChange}async prepare(e,t){let{prepare:n,amount:i,clean:a}=e;i=i||1;let l=Array.isArray(n)?n:[n];l=l.flatMap(f=>Array(i).fill(f));let c=[];for(let f of l){let d=await this.factory.getComponent({...f});c.push(d)}return l=[...c],this.setAddList(a?[...l]:[...this.add,...l]),t&&t(this.add),e.run&&await this.addToComponentList(),this.add}clear(){this.setAddList([])}removeFromRegister(e){this.setAddList(this.add.filter(t=>t!==e))}run(e){this.addToComponentList(e)}addToComponentList(e){let t=[...this.add];return this.clear(),this.register(t,{skipBackendUpdate:e}),t}setRegister(e){this.register=e}}class j2{constructor(e){he(this,"components",[]);he(this,"dispatch");he(this,"backArray",{});he(this,"operationsFactory");he(this,"componentListInterface");he(this,"componentsList",{});he(this,"completionObserver",new ui);he(this,"factory");he(this,"APIService");vn.bind(this),this.operationsFactory=e.getOperationsFactory(),this.operationsFactory.setRegister(this.add),this.componentListInterface=e,this.factory=e.getFactory(),this.dispatch=e.dispatch,this.APIService=e.getAPIService(),this.APIService.setComponentList(this),this.completionObserver.subscribe(this.setComponentsList),this.completionObserver.subscribe(this.setOrderAfterAddorDel)}getFactory(){return this.factory}getDispatch(){return this.dispatch}setDispatch(e){this.dispatch=e}getCompletionObserver(){return this.completionObserver}setCompoletionObserver(e){this.completionObserver=e}subscribeToOperationCompletion(e){this.completionObserver.subscribe(e)}getAPIService(){return this.APIService}setAPIService(e){this.APIService=e}getComponents(){return this.components}filterOutErrors(e){let t=this.components.map(i=>i.getJson()._id);e=e.filter(i=>i!==void 0),e=e.map(i=>{if(i!==void 0&&t.includes(i.getJson()._id)){let a=this.components.find(l=>l.getJson()._id===i.getJson()._id);i.setJson({...a.getJson(),...i.getJson()})}return i}),e=e.filter(i=>!t.includes(i.getJson()._id));let n=this.factory.getRegistry();return e=e.filter(i=>n.includes(i.getJson().type)),e}add(e,t){return e=Array.isArray(e)?e:[e],e=this.filterOutErrors(e),e.forEach(n=>{n.setComponentList(this)}),this.components=[...this.components,...e],this.operationComplete(e,"add",t)}setComponentsList(){let e={};this.componentListInterface.getFactory().getRegistry().forEach(n=>{e[n]=[]});for(let n of this.components){let i=n.getJson().type;e[i].push(n)}this.componentsList=e}async addComponents(e,t){e.prepare||(e={prepare:Array.isArray(e)?e:[e]}),await this.operationsFactory.prepare({...e}),this.operationsFactory.addToComponentList(t);let n=e==null?void 0:e.prepare.map(a=>a._id);return await this.components.filter(a=>n.includes(a.getJson()._id))}del(e,t){return e=Array.isArray(e)?e:[e],this.components=this.components.filter(n=>!e.includes(n)),this.operationComplete(e,"del",t)}setOrderAfterAddorDel(e){for(let t of e){let n=t.getJson();if(n.orderMatters){let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey),a=n.orderKey?n[n.orderKey]:"order",l=t.getJson()[a],f=i.filter(v=>{let g=parseInt(v.getJson()[a]);return l=parseInt(l),g===l}).find(v=>!e.includes(v)),d=i.indexOf(t);f&&f!==t&&t.setCompState({[a]:d}),this.sortSelectedList(n.type,n.orderKey||"order"),this.resetOrder(t,a)}}}shiftOrderedList(e,t){let n=e.getJson();this.sortSelectedList(n.type,n.orderKey||"order");let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);t=t||(n.orderKey?n[n.orderKey]:"order"),i=i.filter(a=>a!==e);for(let a=1;a<i.length;a++)i[a-1].setCompState({[t]:a},{run:!0,clean:!0})}resetOrder(e,t){let n=e.getJson();t=t||(n.orderKey?n[n.orderKey]:n.order);let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);for(let a=0;a<i.length;a++)i[a][t]!==a&&(i[a].setCompState({[t]:a}),i[a]!==e&&i[a].update())}operationComplete(e,t,n){return this.completionObserver.run(e,t,n),this.backArray={[t]:e},n.skipBackendUpdate||this.updateBackend(e,t,n),e}updateBackend(e,t,n){this.dispatch({backend:!0,backendUpdate:{...this.backArray}});let i=[n.path,n.dispatchKey];t==="add"&&i.push(n.timeKey),this.APIService[t](e,...i),this.backArray={}}getOperationsFactory(){return this.operationsFactory}createQueryJson(e,t,n,i,a="type"){i=i||{},n===void 0&&t&&(n="_id"),t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];let l={where:[{attribute:a,val:e}],...i};return t.length>0&&t[0]!==void 0&&(l.where=[...l.where,...t.map((c,f)=>({attribute:n[f]||n[0],val:c}))]),l}async getComponentsFromBackend(e,t){typeof e=="string"&&(e={type:e,owner:t===!1?t:!0});let n=await this.createQueryJson(e.type,e.ids,e.filterKeys,e.obj,e.typeAttribute);return await this.APIService[e.snapshot?"firebaseGetterSnapshot":"firebaseGetter"](n,e.path,e.owner)}async getComponentFromBackend(e){return(await this.getComponentsFromBackend(e))[0]}getList(e,t,n){n=n||"owner",e=Array.isArray(e)?e:[e];let i=[];for(let a of e){let l=this.componentsList[a]||[];i=[...i,...l]}return Array.isArray(t)||(t=t?[t]:[]),Array.isArray(n)||(n=[n]),t.length>0&&(i=i.filter(a=>n.some((l,c)=>{var v;const f=(v=a.getJson())==null?void 0:v[l],d=t[c]||t[0];return typeof f=="object"?Object.keys(f).includes(d):f===d}))),i}getComponent(e,t,n){return this.getList(e,t,n||"_id")[0]}clearList(){this.components=[],this.componentsList={}}clearSelectedList(e,t){let n=[...this.components],i=[];for(const a in n)n[a].getJson()[t]!==e&&i.push(n[a]);this.components=[...i],this.setComponentsList()}setComponentList(e){this.componentsList=e}setSelectedList(e,t){this.componentsList[e]=t}sortSelectedList(e,t,n){if(t&&this.componentsList[e]){let i=[...this.componentsList[e]];i=i.sort(function(a,l){const c=a.getJson()[t],f=l.getJson()[t],d=isNaN(Number(c))?c:Number(c),v=isNaN(Number(f))?f:Number(f);return typeof d=="number"&&typeof v=="number"?n?v-d:d-v:n?(""+v).localeCompare(""+d):(""+d).localeCompare(""+v)}),this.setSelectedList(e,i)}}sortSelectedListbyFirebaseDate(e,t){if(this.componentsList[e]){let n=[...this.componentsList[e]];n=n.sort(function(i,a){var f,d;let l=i.getJson().date||i.getJson().date!==""?(f=i.getJson().date)==null?void 0:f.seconds:new Date(0),c=a.getJson().date||a.getJson().date!==""?(d=a.getJson().date)==null?void 0:d.seconds:new Date(0);return t?c-l:l-c}),this.setSelectedList(e,n)}}}class V2{constructor(e,t){he(this,"DB");he(this,"url");he(this,"path",[]);he(this,"orderStr","date");vn.bind(this),this.setDB(e),this.setUrl(t),this.path=[this.DB,this.url+"users",this.url+"APP","components"]}setDB(e){this.DB=e}setUrl(e){this.url=e}setPath(e){this.path=e}setOrderStr(e){this.orderStr=e}async generateQueary(e,t,n){let i=e.where.map(f=>{if(f.attribute!==void 0)return hw(f.attribute,f.type||"==",f.val)}).filter(f=>f!==void 0);n&&i.push(hw("owner","==",n)),t=t||this.path;let a=[...i],l=e.order||this.orderStr;return l!=="noOrder"&&l!==void 0&&a.push(hP(l)),e.limit&&a.push(fP(e.limit)),cP(QR(...t),...a)}}class U2{constructor(e,t,n,i,a){he(this,"urlEndpoint","");he(this,"dispatch");he(this,"componentList");he(this,"userStr","flinnappsUser");he(this,"QuearyGenerator");he(this,"DB");he(this,"storage");he(this,"auth");he(this,"userEmail");he(this,"path",[]);he(this,"postObserver",new ui);he(this,"dispatchObserver",new ui);he(this,"readObserver",new ui);vn.bind(this),this.urlEndpoint=e,this.DB=t,this.storage=n,this.auth=i,this.dispatch=a,this.path=[this.DB,`${this.urlEndpoint}users`,`${this.urlEndpoint}APP`,"components"],this.QuearyGenerator=new V2(this.DB,this.urlEndpoint)}setAuth(e){this.auth=e}setStorage(e){this.storage=e}setPath(e){this.path=e}setDB(e){this.DB=e,this.QuearyGenerator.setDB(e)}setDispatch(e){this.dispatch=e}setComponentList(e){this.componentList=e}setUserStr(e){this.userStr=e,this.QuearyGenerator.setUrl(e)}getPostObserver(){return this.postObserver}setPostObserver(e){this.postObserver=e}subscribeToPostObserver(e){this.postObserver.subscribe(e)}getReadObserver(){return this.readObserver}setReadObserver(e){this.readObserver=e}subscribeToReadObserver(e){this.readObserver.subscribe(e)}getPath(){return this.path}getDispatchObserver(){return this.dispatchObserver}setDispatchObserver(e){this.dispatchObserver=e}subscribeToDispatchObserver(e){this.dispatchObserver.subscribe(e)}getQueryGenerator(){return this.QuearyGenerator}setQueryGenerator(e){this.QuearyGenerator=e}async login(e,t){let n,i;if(await Pw(this.auth,e,t).then(a=>{n=a.user}).catch(a=>{const l=a.message;i={error:l.slice(9,l.length-1)},console.log(i)}),n){let a=n;this.dispatch({login:!0}),await localStorage.setItem(this.userStr,JSON.stringify(a)),this.componentList!==void 0&&this.dispatch!==void 0&&(n=await this.getuser(e))}else n=i;return n}async register(e,t,n){let i;return await Ux(this.auth,e,t).then(a=>{i=a.user}).catch(a=>{a.code;let l=a.message,c=l.length-1;i={error:l.slice(9,c)}}),i.error||(this.userEmail=i.email,localStorage.setItem(this.userStr,JSON.stringify(i))),i}async logout(){await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let e;await Cd(this.auth,t=>{t&&(e=t.uid)}),e&&await Ow(this.auth),await localStorage.setItem(this.userStr,null),window.location.href="/"}sendForgotPasswordChange(e){const t=Ic();Vx(t,e).then(()=>{}).catch(n=>{n.code,n.message})}async checkIfLoggedIn(){return new Promise((e,t)=>{Cd(this.auth,async n=>{if(n)e(n);else{await localStorage.setItem(this.userStr,null),await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let i;await Cd(this.auth,a=>{a&&(i=a.uid)}),i&&await Ow(this.auth),await window.location.reload()}})})}async getCurrentUser(){let e=await localStorage.getItem(this.userStr);return e=await JSON.parse(e),e}async setCurrentUser(e){await localStorage.setItem(this.userStr,JSON.stringify(e))}async loginToDel(e,t){await Pw(this.auth,e,t).then(n=>{}).catch(n=>{n.code,n.message})}async delAccount(){const t=Ic().currentUser;await $x(t).then(()=>{}).catch(n=>{})}async notify(e,t){fetch(t,{method:"POST",mode:"no-cors",body:JSON.stringify(e),headers:{"Conent-Type":"application/json"}})}async changePassword(e){const n=Ic().currentUser;return await Bx(n,e).then(()=>{}).catch(a=>{}),!0}async firebaseGetterSnapshot(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),a=[];return await wP(i,async l=>{a=await this.getRawData(l)}),a}async firebaseGetter(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),a=await yP(i);return await this.getRawData(a)}async getRawData(e){let t=[];for(const i in e.docs){let a=e.docs[i].data();t.push(a)}let n=await this.componentList.addComponents(t,!0);return this.dispatch&&await this.dispatch({snapShot:{dataRetrieved:n}}),this.readObserver.run(n),n}async getCount(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n);return(await TP(i)).data().count}async getuser(e){this.userEmail=e;let t=await this.componentList.getComponentFromBackend({type:"user",ids:e});return t&&this.dispatch({currentUser:t,email:e,gotUser:!0}),t}async GetAllData(e,t){t=t||[this.db,this.urlEndpoint+"users"],this.firebaseGetter(e,t)}async uploadPics(e,t){const n=Sd(this.storage,t);await NO(n,e).then(i=>{console.log("Uploaded a file!")})}async downloadPics(e){let t;return await LO(Sd(this.storage,e)).then(n=>{t=n}),t}deletePics(e){const t=Sd(this.storage,e);DO(t).then(()=>{}).catch(n=>{})}prep(e){return e=Array.isArray(e)?e:[e],e=e.map(t=>{let n=t;return t.getJson&&(n=t.getJson()),n}),e=e.filter(t=>t!==void 0),e}async add(e,t,n,i){return e=await e.map(a=>((a.getJson().owner===""||a.getJson().owner===void 0)&&a.setCompState({owner:this.userEmail}),a)),await this.operate(e,vP,t,n||"added",i||"date")}async update(e,t,n,i){return await this.operate(e,_P,t,i||"updated",n||"lastUpdated")}async del(e,t,n){return await this.operate(e,pw,t,n||"deleted")}async operate(e,t,n,i,a){try{e=await this.prep(e),n=n||this.path;for(let l of e){a&&(l[a]=await IP()),await this.postObserver.run([l]);let c=[JR(...n,l._id)];t!==pw&&c.push(l),await t(...c)}return this.dispatch&&this.dispatch({[i]:e,dispatchComplete:!0}),this.dispatchObserver.run([{[i]:e}]),e}catch(l){console.log(l),console.error(e,"something went wrong with this operation")}}}class B2{constructor(e,t,n,i,a){he(this,"factory");he(this,"updater");he(this,"operationsFactory");he(this,"dispatch");he(this,"APIService");vn.bind(this),this.dispatch=e,this.getFactory(),this.getAPIService(t,n,i,a,e)}getFactory(){return this.factory===void 0&&(this.factory=new M2(this)),this.factory}getAPIService(e,t,n,i,a){return this.APIService===void 0&&(this.APIService=new U2(e,t,n,i,a)),this.APIService}createComponentList(){return new j2(this)}getOperationsFactory(){return this.operationsFactory===void 0&&(this.operationsFactory=new Gw(this),this.factory.setOperationsFactory(this.operationsFactory)),this.operationsFactory}getNewOperationsFactory(){return new Gw(this)}}class Al extends ft{constructor(e){super(e),this.domList=["a","button","div","h1","h2","h3","h4","h5","h6","img","input","p","span","table","tr","td","th","ul","li","ol","form","textarea","select","option","label","nav","footer","header","article","section","aside","main","video","audio","iframe","canvas"],this.state={...this.state,wrapperClass:"FCWrapper",formClass:"FCInputForm",labelClass:"defaultLabel",errorClass:"defaultErrorMessage",interface:"form"}}setObj(){var e,t;if(!this.props.prepareOnClick){let n=this.props.obj||(this.props.inPopup?(e=this.propsState)==null?void 0:e.currentPopupComponent:(t=this.propsState)==null?void 0:t.currentComponent);this.obj=this.isArray(n)}}preSetup(){this.setComponents(["wrapper","form","label","error"])}getInnerContent(){return this.innerContent=[this.props.label&&this.label.getHtml(),this.getFormHtml(),this.props.errorText&&this.error.getHtml()],this.innerContent}getHtml(){this.mapInnerContent();let e=this.wrapper.getHtml({type:"div",content:this.innerContent});return this.html=U.jsx(U.Fragment,{children:e}),this.html}getFormHtml(){return this.getInputProps(this.props.type||"input"),this.additionalPropsSetup(),this.form.getHtml({type:this.props.type?this.props.type:"input",content:this.content,props:this.inputProps})}additionalPropsSetup(){}handleChange(e){let{name:t,value:n}=e.target;for(let i of this.obj){if(this.props.isPropArray){let a=i.getJson()[this.props.name]||[];Array.isArray(a)||(a=[a]),Array.isArray(a[0])||(a[0]=[a[0]]),a[0]=n,n=a}i.setCompState({[this.props.name]:n})}this.afterChange(e)}afterChange(e){if(this.props.update)for(let t of this.obj){let n=this.props.update===!0?void 0:{...this.props.update};t==null||t.update(n)}this.props.sendUpdate&&this.props.app&&this.app.dispatch({formUpdate:this.props.type}),this.props.callbackFunc&&this.props.callbackFunc(this.obj),this.additionalChanges(e),this.setState({})}additionalChanges(e){}async prepareOnClick(){var e;if(this.props.prepareOnClick&&this.props.app){let t=this.props.obj;t&&(t=this.isArray(t)),t=await((e=this.props.app)==null?void 0:e.state.componentList.getOperationsFactory().prepare({...t})),t&&(t=this.isArray(t)),this.obj=t}}objDispatch(e){for(let t of this.obj)t.setCompState({[this.props.name]:e});this.afterChange()}handleChangeWithoutEvent(e){for(let t in this.obj)t.setCompState({[e.name]:e.value});this.afterChange()}getInputProps(e){var t;return this.inputProps={onChange:this.props.handleChange?n=>{this.props.handleChange(n,this.obj)}:this.handleChange,value:this.obj[0]?(t=this.obj[0])==null?void 0:t.getJson()[this.props.name]:this.props.value,type:this.props.inputType||this.props.type,onFocus:this.props.onFocus||this.onFocus,placeholder:this.props.placeholder,name:this.props.name,min:this.props.min,max:this.props.max,cols:this.props.cols||"",rows:this.props.rows||5,resize:this.props.resize||"true",autoComplete:this.props.autoComplete?this.props.autoComplete:"off",id:this.props.id,checked:this.props.checked,spellCheck:this.props.type==="password"||this.props.spellCheck===void 0?!1:this.props.spellCheck,minLength:this.props.minLength,maxLength:this.props.maxLength},this.domList.includes(e)||(this.inputProps.handleChangeWithoutEvent=this.props.update?()=>{console.log("")}:this.props.handleChangeWithoutEvent?this.props.handleChangeWithoutEvent:this.handleChangeWithoutEvent,this.inputProps.selectOptions=this.props.selectOptions,this.inputProps.textOptions=this.props.textOptions,this.inputProps.unit=this.props.unit?this.props.unit:"$",this.inputProps.tickClass=this.props.tickClass,this.inputProps.handleHTMLChange=this.props.handleHTMLChange||this.objDispatch,this.inputProps.doesMath=this.props.doesMath,this.inputProps.objDispatch=this.objDispatch,this.inputProps.emitClickedOutside=this.props.emitClickedOutside,this.inputProps.updateOnClickOutside=this.props.updateOnClickOutside),this.props.required&&(this.inputProps.required=!0),this.props.disabled&&(this.inputProps.disabled=!0),this.inputProps}}class Qs extends Al{constructor(e){super(e),this.state.formClass="FCDefaultButton"}buttonClick(){this.props.buttonClick?this.props.buttonClick(this.obj):this.buttonClickFunc(),this.props.callbackFunc&&this.props.callbackFunc(this.obj)}buttonClickFunc(){}additionalSetup(){this.form.setOnClick(this.buttonClick)}getFormHtml(){return this.form.setStyle({cursor:"pointer"}),this.content=this.props.content||this.content||U.jsx(U.Fragment,{children:"button"}),this.form.getHtml({type:"div",content:this.content})}}let DS=class{constructor(){he(this,"FCInputForm","defaultInputForm");he(this,"FCWrapper","defaultWrapper");he(this,"FCError","defaultErrorMessage");he(this,"FCLabel","defaultLabel");he(this,"FCDefaultButton","defaultButton");he(this,"FCDefaultDelButton","delButton");he(this,"FCImgButton","imgButton")}};const q2=Object.freeze(Object.defineProperty({__proto__:null,DefaultRegistry:DS},Symbol.toStringTag,{value:"Module"}));class qg{constructor(e){he(this,"factory",{});vn.bind(this),e&&(this.registry=e,this.registerListWithFactory())}registerListWithFactory(){for(const e in this.registry)if(Object.prototype.hasOwnProperty.call(this.registry,e)){const t=e.charAt(0).toLowerCase()+e.slice(1);this.factory[t]=this.registry[e]}}getComponent(e){let t;return this.factory[e]&&(t=new this.factory[e]),t}registerComponent(e,t){this.factory[e]=t}}let z2=class extends qg{constructor(){super(q2),this.factory.default=DS}};class MS{constructor(){he(this,"factory",{})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),U.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class H2 extends Qs{buttonClickFunc(){let e=this.props.add;this.componentList.addComponents(e)}}class $2{constructor(){vn.bind(this)}doMath(e){e=e.replace(/\s+/g,"");const t=/(\d+)([+\-*/])(\d+)/,n=e.match(t);if(!n)throw new Error("Invalid input");const i=parseFloat(n[1]),a=n[2],l=parseFloat(n[3]);return{"+":i+l,"-":i-l,"*":i*l,"/":i/l}[a]}}let W2=new $2;class K2 extends Al{constructor(e){super(e)}componentDidMount(){document.addEventListener("keyup",this.doMath)}componentWillUnmount(){document.removeEventListener("keyup",this.doMath)}additionalChanges(e){let{name:t,value:n}=e.target;this.setState({val:n})}async doMath(e){if(e.key==="Enter"&&this.state.val!==void 0){let t=this.obj[0],n=await W2.doMath(this.state.val).toString();await t.setCompState({[this.props.name]:n}),t.update(),await this.setState({val:void 0})}}}let G2=class extends Qs{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...i})}},Q2=class extends Qs{buttonClickFunc(){for(let e of this.obj)e.update(this.props.updateParams);this.props.isPopup&&this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}},J2=class extends Qs{buttonClickFunc(){let e=this.operationsFactory.addToComponentList(this.props.skipBackendUpdate),t=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(e[0].getJson().type)]:e[0]},n={};this.props.isPopup&&(n={popupSwitch:"",currentPopupComponent:void 0}),this.dispatch({...n,...t})}};var Rd,Qw;function Y2(){if(Qw)return Rd;Qw=1;function r(){this.__data__=[],this.size=0}return Rd=r,Rd}var Pd,Jw;function FS(){if(Jw)return Pd;Jw=1;function r(e,t){return e===t||e!==e&&t!==t}return Pd=r,Pd}var Od,Yw;function Ih(){if(Yw)return Od;Yw=1;var r=FS();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return Od=e,Od}var xd,Xw;function X2(){if(Xw)return xd;Xw=1;var r=Ih(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,l=r(a,i);if(l<0)return!1;var c=a.length-1;return l==c?a.pop():t.call(a,l,1),--this.size,!0}return xd=n,xd}var Nd,Zw;function Z2(){if(Zw)return Nd;Zw=1;var r=Ih();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Nd=e,Nd}var Ld,eE;function eD(){if(eE)return Ld;eE=1;var r=Ih();function e(t){return r(this.__data__,t)>-1}return Ld=e,Ld}var Dd,tE;function tD(){if(tE)return Dd;tE=1;var r=Ih();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return Dd=e,Dd}var Md,nE;function Ch(){if(nE)return Md;nE=1;var r=Y2(),e=X2(),t=Z2(),n=eD(),i=tD();function a(l){var c=-1,f=l==null?0:l.length;for(this.clear();++c<f;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Md=a,Md}var Fd,rE;function nD(){if(rE)return Fd;rE=1;var r=Ch();function e(){this.__data__=new r,this.size=0}return Fd=e,Fd}var jd,iE;function rD(){if(iE)return jd;iE=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return jd=r,jd}var Vd,sE;function iD(){if(sE)return Vd;sE=1;function r(e){return this.__data__.get(e)}return Vd=r,Vd}var Ud,oE;function sD(){if(oE)return Ud;oE=1;function r(e){return this.__data__.has(e)}return Ud=r,Ud}var Bd,aE;function jS(){if(aE)return Bd;aE=1;var r=typeof rc=="object"&&rc&&rc.Object===Object&&rc;return Bd=r,Bd}var qd,lE;function vi(){if(lE)return qd;lE=1;var r=jS(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return qd=t,qd}var zd,uE;function zg(){if(uE)return zd;uE=1;var r=vi(),e=r.Symbol;return zd=e,zd}var Hd,cE;function oD(){if(cE)return Hd;cE=1;var r=zg(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(l){var c=t.call(l,i),f=l[i];try{l[i]=void 0;var d=!0}catch{}var v=n.call(l);return d&&(c?l[i]=f:delete l[i]),v}return Hd=a,Hd}var $d,hE;function aD(){if(hE)return $d;hE=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return $d=t,$d}var Wd,fE;function bh(){if(fE)return Wd;fE=1;var r=zg(),e=oD(),t=aD(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function l(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):t(c)}return Wd=l,Wd}var Kd,dE;function VS(){if(dE)return Kd;dE=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Kd=r,Kd}var Gd,pE;function US(){if(pE)return Gd;pE=1;var r=bh(),e=VS(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function l(c){if(!e(c))return!1;var f=r(c);return f==n||f==i||f==t||f==a}return Gd=l,Gd}var Qd,mE;function lD(){if(mE)return Qd;mE=1;var r=vi(),e=r["__core-js_shared__"];return Qd=e,Qd}var Jd,gE;function uD(){if(gE)return Jd;gE=1;var r=lD(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return Jd=t,Jd}var Yd,yE;function BS(){if(yE)return Yd;yE=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Yd=t,Yd}var Xd,vE;function cD(){if(vE)return Xd;vE=1;var r=US(),e=uD(),t=VS(),n=BS(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,f=l.toString,d=c.hasOwnProperty,v=RegExp("^"+f.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g(p){if(!t(p)||e(p))return!1;var y=r(p)?v:a;return y.test(n(p))}return Xd=g,Xd}var Zd,_E;function hD(){if(_E)return Zd;_E=1;function r(e,t){return e==null?void 0:e[t]}return Zd=r,Zd}var ep,wE;function ha(){if(wE)return ep;wE=1;var r=cD(),e=hD();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return ep=t,ep}var tp,EE;function Hg(){if(EE)return tp;EE=1;var r=ha(),e=vi(),t=r(e,"Map");return tp=t,tp}var np,TE;function Ah(){if(TE)return np;TE=1;var r=ha(),e=r(Object,"create");return np=e,np}var rp,SE;function fD(){if(SE)return rp;SE=1;var r=Ah();function e(){this.__data__=r?r(null):{},this.size=0}return rp=e,rp}var ip,IE;function dD(){if(IE)return ip;IE=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return ip=r,ip}var sp,CE;function pD(){if(CE)return sp;CE=1;var r=Ah(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var l=this.__data__;if(r){var c=l[a];return c===e?void 0:c}return n.call(l,a)?l[a]:void 0}return sp=i,sp}var op,bE;function mD(){if(bE)return op;bE=1;var r=Ah(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return op=n,op}var ap,AE;function gD(){if(AE)return ap;AE=1;var r=Ah(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return ap=t,ap}var lp,kE;function yD(){if(kE)return lp;kE=1;var r=fD(),e=dD(),t=pD(),n=mD(),i=gD();function a(l){var c=-1,f=l==null?0:l.length;for(this.clear();++c<f;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,lp=a,lp}var up,RE;function vD(){if(RE)return up;RE=1;var r=yD(),e=Ch(),t=Hg();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return up=n,up}var cp,PE;function _D(){if(PE)return cp;PE=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return cp=r,cp}var hp,OE;function kh(){if(OE)return hp;OE=1;var r=_D();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return hp=e,hp}var fp,xE;function wD(){if(xE)return fp;xE=1;var r=kh();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return fp=e,fp}var dp,NE;function ED(){if(NE)return dp;NE=1;var r=kh();function e(t){return r(this,t).get(t)}return dp=e,dp}var pp,LE;function TD(){if(LE)return pp;LE=1;var r=kh();function e(t){return r(this,t).has(t)}return pp=e,pp}var mp,DE;function SD(){if(DE)return mp;DE=1;var r=kh();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return mp=e,mp}var gp,ME;function qS(){if(ME)return gp;ME=1;var r=vD(),e=wD(),t=ED(),n=TD(),i=SD();function a(l){var c=-1,f=l==null?0:l.length;for(this.clear();++c<f;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,gp=a,gp}var yp,FE;function ID(){if(FE)return yp;FE=1;var r=Ch(),e=Hg(),t=qS(),n=200;function i(a,l){var c=this.__data__;if(c instanceof r){var f=c.__data__;if(!e||f.length<n-1)return f.push([a,l]),this.size=++c.size,this;c=this.__data__=new t(f)}return c.set(a,l),this.size=c.size,this}return yp=i,yp}var vp,jE;function CD(){if(jE)return vp;jE=1;var r=Ch(),e=nD(),t=rD(),n=iD(),i=sD(),a=ID();function l(c){var f=this.__data__=new r(c);this.size=f.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=a,vp=l,vp}var _p,VE;function bD(){if(VE)return _p;VE=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return _p=e,_p}var wp,UE;function AD(){if(UE)return wp;UE=1;function r(e){return this.__data__.has(e)}return wp=r,wp}var Ep,BE;function kD(){if(BE)return Ep;BE=1;var r=qS(),e=bD(),t=AD();function n(i){var a=-1,l=i==null?0:i.length;for(this.__data__=new r;++a<l;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Ep=n,Ep}var Tp,qE;function RD(){if(qE)return Tp;qE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return Tp=r,Tp}var Sp,zE;function PD(){if(zE)return Sp;zE=1;function r(e,t){return e.has(t)}return Sp=r,Sp}var Ip,HE;function zS(){if(HE)return Ip;HE=1;var r=kD(),e=RD(),t=PD(),n=1,i=2;function a(l,c,f,d,v,g){var p=f&n,y=l.length,T=c.length;if(y!=T&&!(p&&T>y))return!1;var S=g.get(l),w=g.get(c);if(S&&w)return S==c&&w==l;var E=-1,I=!0,L=f&i?new r:void 0;for(g.set(l,c),g.set(c,l);++E<y;){var b=l[E],F=c[E];if(d)var V=p?d(F,b,E,c,l,g):d(b,F,E,l,c,g);if(V!==void 0){if(V)continue;I=!1;break}if(L){if(!e(c,function(P,_){if(!t(L,_)&&(b===P||v(b,P,f,d,g)))return L.push(_)})){I=!1;break}}else if(!(b===F||v(b,F,f,d,g))){I=!1;break}}return g.delete(l),g.delete(c),I}return Ip=a,Ip}var Cp,$E;function OD(){if($E)return Cp;$E=1;var r=vi(),e=r.Uint8Array;return Cp=e,Cp}var bp,WE;function xD(){if(WE)return bp;WE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return bp=r,bp}var Ap,KE;function ND(){if(KE)return Ap;KE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return Ap=r,Ap}var kp,GE;function LD(){if(GE)return kp;GE=1;var r=zg(),e=OD(),t=FS(),n=zS(),i=xD(),a=ND(),l=1,c=2,f="[object Boolean]",d="[object Date]",v="[object Error]",g="[object Map]",p="[object Number]",y="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",I="[object DataView]",L=r?r.prototype:void 0,b=L?L.valueOf:void 0;function F(V,P,_,A,k,R,O){switch(_){case I:if(V.byteLength!=P.byteLength||V.byteOffset!=P.byteOffset)return!1;V=V.buffer,P=P.buffer;case E:return!(V.byteLength!=P.byteLength||!R(new e(V),new e(P)));case f:case d:case p:return t(+V,+P);case v:return V.name==P.name&&V.message==P.message;case y:case S:return V==P+"";case g:var N=i;case T:var $=A&l;if(N||(N=a),V.size!=P.size&&!$)return!1;var Q=O.get(V);if(Q)return Q==P;A|=c,O.set(V,P);var se=n(N(V),N(P),A,k,R,O);return O.delete(V),se;case w:if(b)return b.call(V)==b.call(P)}return!1}return kp=F,kp}var Rp,QE;function DD(){if(QE)return Rp;QE=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return Rp=r,Rp}var Pp,JE;function $g(){if(JE)return Pp;JE=1;var r=Array.isArray;return Pp=r,Pp}var Op,YE;function MD(){if(YE)return Op;YE=1;var r=DD(),e=$g();function t(n,i,a){var l=i(n);return e(n)?l:r(l,a(n))}return Op=t,Op}var xp,XE;function FD(){if(XE)return xp;XE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,l=[];++n<i;){var c=e[n];t(c,n,e)&&(l[a++]=c)}return l}return xp=r,xp}var Np,ZE;function jD(){if(ZE)return Np;ZE=1;function r(){return[]}return Np=r,Np}var Lp,e0;function VD(){if(e0)return Lp;e0=1;var r=FD(),e=jD(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(l){return l==null?[]:(l=Object(l),r(i(l),function(c){return n.call(l,c)}))}:e;return Lp=a,Lp}var Dp,t0;function UD(){if(t0)return Dp;t0=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Dp=r,Dp}var Mp,n0;function Rh(){if(n0)return Mp;n0=1;function r(e){return e!=null&&typeof e=="object"}return Mp=r,Mp}var Fp,r0;function BD(){if(r0)return Fp;r0=1;var r=bh(),e=Rh(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return Fp=n,Fp}var jp,i0;function qD(){if(i0)return jp;i0=1;var r=BD(),e=Rh(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(l){return e(l)&&n.call(l,"callee")&&!i.call(l,"callee")};return jp=a,jp}var ul={exports:{}},Vp,s0;function zD(){if(s0)return Vp;s0=1;function r(){return!1}return Vp=r,Vp}ul.exports;var o0;function HS(){return o0||(o0=1,function(r,e){var t=vi(),n=zD(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,l=a&&a.exports===i,c=l?t.Buffer:void 0,f=c?c.isBuffer:void 0,d=f||n;r.exports=d}(ul,ul.exports)),ul.exports}var Up,a0;function HD(){if(a0)return Up;a0=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Up=t,Up}var Bp,l0;function $S(){if(l0)return Bp;l0=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Bp=e,Bp}var qp,u0;function $D(){if(u0)return qp;u0=1;var r=bh(),e=$S(),t=Rh(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Function]",d="[object Map]",v="[object Number]",g="[object Object]",p="[object RegExp]",y="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",I="[object Float32Array]",L="[object Float64Array]",b="[object Int8Array]",F="[object Int16Array]",V="[object Int32Array]",P="[object Uint8Array]",_="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]",R={};R[I]=R[L]=R[b]=R[F]=R[V]=R[P]=R[_]=R[A]=R[k]=!0,R[n]=R[i]=R[w]=R[a]=R[E]=R[l]=R[c]=R[f]=R[d]=R[v]=R[g]=R[p]=R[y]=R[T]=R[S]=!1;function O(N){return t(N)&&e(N.length)&&!!R[r(N)]}return qp=O,qp}var zp,c0;function WD(){if(c0)return zp;c0=1;function r(e){return function(t){return e(t)}}return zp=r,zp}var cl={exports:{}};cl.exports;var h0;function KD(){return h0||(h0=1,function(r,e){var t=jS(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,l=a&&t.process,c=function(){try{var f=i&&i.require&&i.require("util").types;return f||l&&l.binding&&l.binding("util")}catch{}}();r.exports=c}(cl,cl.exports)),cl.exports}var Hp,f0;function WS(){if(f0)return Hp;f0=1;var r=$D(),e=WD(),t=KD(),n=t&&t.isTypedArray,i=n?e(n):r;return Hp=i,Hp}var $p,d0;function GD(){if(d0)return $p;d0=1;var r=UD(),e=qD(),t=$g(),n=HS(),i=HD(),a=WS(),l=Object.prototype,c=l.hasOwnProperty;function f(d,v){var g=t(d),p=!g&&e(d),y=!g&&!p&&n(d),T=!g&&!p&&!y&&a(d),S=g||p||y||T,w=S?r(d.length,String):[],E=w.length;for(var I in d)(v||c.call(d,I))&&!(S&&(I=="length"||y&&(I=="offset"||I=="parent")||T&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||i(I,E)))&&w.push(I);return w}return $p=f,$p}var Wp,p0;function QD(){if(p0)return Wp;p0=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return Wp=e,Wp}var Kp,m0;function JD(){if(m0)return Kp;m0=1;function r(e,t){return function(n){return e(t(n))}}return Kp=r,Kp}var Gp,g0;function YD(){if(g0)return Gp;g0=1;var r=JD(),e=r(Object.keys,Object);return Gp=e,Gp}var Qp,y0;function XD(){if(y0)return Qp;y0=1;var r=QD(),e=YD(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var l=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&l.push(c);return l}return Qp=i,Qp}var Jp,v0;function ZD(){if(v0)return Jp;v0=1;var r=US(),e=$S();function t(n){return n!=null&&e(n.length)&&!r(n)}return Jp=t,Jp}var Yp,_0;function eM(){if(_0)return Yp;_0=1;var r=GD(),e=XD(),t=ZD();function n(i){return t(i)?r(i):e(i)}return Yp=n,Yp}var Xp,w0;function tM(){if(w0)return Xp;w0=1;var r=MD(),e=VD(),t=eM();function n(i){return r(i,t,e)}return Xp=n,Xp}var Zp,E0;function nM(){if(E0)return Zp;E0=1;var r=tM(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,l,c,f,d,v){var g=c&e,p=r(a),y=p.length,T=r(l),S=T.length;if(y!=S&&!g)return!1;for(var w=y;w--;){var E=p[w];if(!(g?E in l:n.call(l,E)))return!1}var I=v.get(a),L=v.get(l);if(I&&L)return I==l&&L==a;var b=!0;v.set(a,l),v.set(l,a);for(var F=g;++w<y;){E=p[w];var V=a[E],P=l[E];if(f)var _=g?f(P,V,E,l,a,v):f(V,P,E,a,l,v);if(!(_===void 0?V===P||d(V,P,c,f,v):_)){b=!1;break}F||(F=E=="constructor")}if(b&&!F){var A=a.constructor,k=l.constructor;A!=k&&"constructor"in a&&"constructor"in l&&!(typeof A=="function"&&A instanceof A&&typeof k=="function"&&k instanceof k)&&(b=!1)}return v.delete(a),v.delete(l),b}return Zp=i,Zp}var em,T0;function rM(){if(T0)return em;T0=1;var r=ha(),e=vi(),t=r(e,"DataView");return em=t,em}var tm,S0;function iM(){if(S0)return tm;S0=1;var r=ha(),e=vi(),t=r(e,"Promise");return tm=t,tm}var nm,I0;function sM(){if(I0)return nm;I0=1;var r=ha(),e=vi(),t=r(e,"Set");return nm=t,nm}var rm,C0;function oM(){if(C0)return rm;C0=1;var r=ha(),e=vi(),t=r(e,"WeakMap");return rm=t,rm}var im,b0;function aM(){if(b0)return im;b0=1;var r=rM(),e=Hg(),t=iM(),n=sM(),i=oM(),a=bh(),l=BS(),c="[object Map]",f="[object Object]",d="[object Promise]",v="[object Set]",g="[object WeakMap]",p="[object DataView]",y=l(r),T=l(e),S=l(t),w=l(n),E=l(i),I=a;return(r&&I(new r(new ArrayBuffer(1)))!=p||e&&I(new e)!=c||t&&I(t.resolve())!=d||n&&I(new n)!=v||i&&I(new i)!=g)&&(I=function(L){var b=a(L),F=b==f?L.constructor:void 0,V=F?l(F):"";if(V)switch(V){case y:return p;case T:return c;case S:return d;case w:return v;case E:return g}return b}),im=I,im}var sm,A0;function lM(){if(A0)return sm;A0=1;var r=CD(),e=zS(),t=LD(),n=nM(),i=aM(),a=$g(),l=HS(),c=WS(),f=1,d="[object Arguments]",v="[object Array]",g="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function T(S,w,E,I,L,b){var F=a(S),V=a(w),P=F?v:i(S),_=V?v:i(w);P=P==d?g:P,_=_==d?g:_;var A=P==g,k=_==g,R=P==_;if(R&&l(S)){if(!l(w))return!1;F=!0,A=!1}if(R&&!A)return b||(b=new r),F||c(S)?e(S,w,E,I,L,b):t(S,w,P,E,I,L,b);if(!(E&f)){var O=A&&y.call(S,"__wrapped__"),N=k&&y.call(w,"__wrapped__");if(O||N){var $=O?S.value():S,Q=N?w.value():w;return b||(b=new r),L($,Q,E,I,b)}}return R?(b||(b=new r),n(S,w,E,I,L,b)):!1}return sm=T,sm}var om,k0;function uM(){if(k0)return om;k0=1;var r=lM(),e=Rh();function t(n,i,a,l,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,l,t,c)}return om=t,om}var am,R0;function cM(){if(R0)return am;R0=1;var r=uM();function e(t,n){return r(t,n)}return am=e,am}var Ac={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var hM=Ac.exports,P0;function fM(){return P0||(P0=1,function(r,e){(function(n,i){r.exports=i()})(typeof self<"u"?self:hM,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var l=n[a]={i:a,l:!1,exports:{}};return t[a].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=n,i.d=function(a,l,c){i.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(l,"a",l),l},i.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},i.p="",i(i.s=109)}([function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),l=i(18),c=i(19),f=i(45),d=i(46),v=i(47),g=i(48),p=i(49),y=i(12),T=i(32),S=i(33),w=i(31),E=i(1),I={Scope:E.Scope,create:E.create,find:E.find,query:E.query,register:E.register,Container:a.default,Format:l.default,Leaf:c.default,Embed:g.default,Scroll:f.default,Block:v.default,Inline:d.default,Text:p.default,Attributor:{Attribute:y.default,Class:T.default,Style:S.default,Store:w.default}};n.default=I},function(t,n,i){var a=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,I){E.__proto__=I}||function(E,I){for(var L in I)I.hasOwnProperty(L)&&(E[L]=I[L])};return function(E,I){w(E,I);function L(){this.constructor=E}E.prototype=I===null?Object.create(I):(L.prototype=I.prototype,new L)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=function(w){a(E,w);function E(I){var L=this;return I="[Parchment] "+I,L=w.call(this,I)||this,L.message=I,L.name=L.constructor.name,L}return E}(Error);n.ParchmentError=l;var c={},f={},d={},v={};n.DATA_KEY="__blot";var g;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(g=n.Scope||(n.Scope={}));function p(w,E){var I=T(w);if(I==null)throw new l("Unable to create "+w+" blot");var L=I,b=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:L.create(E);return new L(b,E)}n.create=p;function y(w,E){return E===void 0&&(E=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:E?y(w.parentNode,E):null}n.find=y;function T(w,E){E===void 0&&(E=g.ANY);var I;if(typeof w=="string")I=v[w]||c[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)I=v.text;else if(typeof w=="number")w&g.LEVEL&g.BLOCK?I=v.block:w&g.LEVEL&g.INLINE&&(I=v.inline);else if(w instanceof HTMLElement){var L=(w.getAttribute("class")||"").split(/\s+/);for(var b in L)if(I=f[L[b]],I)break;I=I||d[w.tagName]}return I==null?null:E&g.LEVEL&I.scope&&E&g.TYPE&I.scope?I:null}n.query=T;function S(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];if(w.length>1)return w.map(function(b){return S(b)});var I=w[0];if(typeof I.blotName!="string"&&typeof I.attrName!="string")throw new l("Invalid definition");if(I.blotName==="abstract")throw new l("Cannot register abstract class");if(v[I.blotName||I.attrName]=I,typeof I.keyName=="string")c[I.keyName]=I;else if(I.className!=null&&(f[I.className]=I),I.tagName!=null){Array.isArray(I.tagName)?I.tagName=I.tagName.map(function(b){return b.toUpperCase()}):I.tagName=I.tagName.toUpperCase();var L=Array.isArray(I.tagName)?I.tagName:[I.tagName];L.forEach(function(b){(d[b]==null||I.className==null)&&(d[b]=I)})}return I}n.register=S},function(t,n,i){var a=i(51),l=i(11),c=i(3),f=i(20),d="\0",v=function(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]};v.prototype.insert=function(g,p){var y={};return g.length===0?this:(y.insert=g,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y))},v.prototype.delete=function(g){return g<=0?this:this.push({delete:g})},v.prototype.retain=function(g,p){if(g<=0)return this;var y={retain:g};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y)},v.prototype.push=function(g){var p=this.ops.length,y=this.ops[p-1];if(g=c(!0,{},g),typeof y=="object"){if(typeof g.delete=="number"&&typeof y.delete=="number")return this.ops[p-1]={delete:y.delete+g.delete},this;if(typeof y.delete=="number"&&g.insert!=null&&(p-=1,y=this.ops[p-1],typeof y!="object"))return this.ops.unshift(g),this;if(l(g.attributes,y.attributes)){if(typeof g.insert=="string"&&typeof y.insert=="string")return this.ops[p-1]={insert:y.insert+g.insert},typeof g.attributes=="object"&&(this.ops[p-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof y.retain=="number")return this.ops[p-1]={retain:y.retain+g.retain},typeof g.attributes=="object"&&(this.ops[p-1].attributes=g.attributes),this}}return p===this.ops.length?this.ops.push(g):this.ops.splice(p,0,g),this},v.prototype.chop=function(){var g=this.ops[this.ops.length-1];return g&&g.retain&&!g.attributes&&this.ops.pop(),this},v.prototype.filter=function(g){return this.ops.filter(g)},v.prototype.forEach=function(g){this.ops.forEach(g)},v.prototype.map=function(g){return this.ops.map(g)},v.prototype.partition=function(g){var p=[],y=[];return this.forEach(function(T){var S=g(T)?p:y;S.push(T)}),[p,y]},v.prototype.reduce=function(g,p){return this.ops.reduce(g,p)},v.prototype.changeLength=function(){return this.reduce(function(g,p){return p.insert?g+f.length(p):p.delete?g-p.delete:g},0)},v.prototype.length=function(){return this.reduce(function(g,p){return g+f.length(p)},0)},v.prototype.slice=function(g,p){g=g||0,typeof p!="number"&&(p=1/0);for(var y=[],T=f.iterator(this.ops),S=0;S<p&&T.hasNext();){var w;S<g?w=T.next(g-S):(w=T.next(p-S),y.push(w)),S+=f.length(w)}return new v(y)},v.prototype.compose=function(g){var p=f.iterator(this.ops),y=f.iterator(g.ops),T=[],S=y.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){for(var w=S.retain;p.peekType()==="insert"&&p.peekLength()<=w;)w-=p.peekLength(),T.push(p.next());S.retain-w>0&&y.next(S.retain-w)}for(var E=new v(T);p.hasNext()||y.hasNext();)if(y.peekType()==="insert")E.push(y.next());else if(p.peekType()==="delete")E.push(p.next());else{var I=Math.min(p.peekLength(),y.peekLength()),L=p.next(I),b=y.next(I);if(typeof b.retain=="number"){var F={};typeof L.retain=="number"?F.retain=I:F.insert=L.insert;var V=f.attributes.compose(L.attributes,b.attributes,typeof L.retain=="number");if(V&&(F.attributes=V),E.push(F),!y.hasNext()&&l(E.ops[E.ops.length-1],F)){var P=new v(p.rest());return E.concat(P).chop()}}else typeof b.delete=="number"&&typeof L.retain=="number"&&E.push(b)}return E.chop()},v.prototype.concat=function(g){var p=new v(this.ops.slice());return g.ops.length>0&&(p.push(g.ops[0]),p.ops=p.ops.concat(g.ops.slice(1))),p},v.prototype.diff=function(g,p){if(this.ops===g.ops)return new v;var y=[this,g].map(function(I){return I.map(function(L){if(L.insert!=null)return typeof L.insert=="string"?L.insert:d;var b=I===g?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),T=new v,S=a(y[0],y[1],p),w=f.iterator(this.ops),E=f.iterator(g.ops);return S.forEach(function(I){for(var L=I[1].length;L>0;){var b=0;switch(I[0]){case a.INSERT:b=Math.min(E.peekLength(),L),T.push(E.next(b));break;case a.DELETE:b=Math.min(L,w.peekLength()),w.next(b),T.delete(b);break;case a.EQUAL:b=Math.min(w.peekLength(),E.peekLength(),L);var F=w.next(b),V=E.next(b);l(F.insert,V.insert)?T.retain(b,f.attributes.diff(F.attributes,V.attributes)):T.push(V).delete(b);break}L-=b}}),T.chop()},v.prototype.eachLine=function(g,p){p=p||`
`;for(var y=f.iterator(this.ops),T=new v,S=0;y.hasNext();){if(y.peekType()!=="insert")return;var w=y.peek(),E=f.length(w)-y.peekLength(),I=typeof w.insert=="string"?w.insert.indexOf(p,E)-E:-1;if(I<0)T.push(y.next());else if(I>0)T.push(y.next(I));else{if(g(T,y.next(1).attributes||{},S)===!1)return;S+=1,T=new v}}T.length()>0&&g(T,{},S)},v.prototype.transform=function(g,p){if(p=!!p,typeof g=="number")return this.transformPosition(g,p);for(var y=f.iterator(this.ops),T=f.iterator(g.ops),S=new v;y.hasNext()||T.hasNext();)if(y.peekType()==="insert"&&(p||T.peekType()!=="insert"))S.retain(f.length(y.next()));else if(T.peekType()==="insert")S.push(T.next());else{var w=Math.min(y.peekLength(),T.peekLength()),E=y.next(w),I=T.next(w);if(E.delete)continue;I.delete?S.push(I):S.retain(w,f.attributes.transform(E.attributes,I.attributes,p))}return S.chop()},v.prototype.transformPosition=function(g,p){p=!!p;for(var y=f.iterator(this.ops),T=0;y.hasNext()&&T<=g;){var S=y.peekLength(),w=y.peekType();if(y.next(),w==="delete"){g-=Math.min(S,g-T);continue}else w==="insert"&&(T<g||!p)&&(g+=S);T+=S}return g},t.exports=v},function(t,n){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,f=function(y){return typeof Array.isArray=="function"?Array.isArray(y):a.call(y)==="[object Array]"},d=function(y){if(!y||a.call(y)!=="[object Object]")return!1;var T=i.call(y,"constructor"),S=y.constructor&&y.constructor.prototype&&i.call(y.constructor.prototype,"isPrototypeOf");if(y.constructor&&!T&&!S)return!1;var w;for(w in y);return typeof w>"u"||i.call(y,w)},v=function(y,T){l&&T.name==="__proto__"?l(y,T.name,{enumerable:!0,configurable:!0,value:T.newValue,writable:!0}):y[T.name]=T.newValue},g=function(y,T){if(T==="__proto__")if(i.call(y,T)){if(c)return c(y,T).value}else return;return y[T]};t.exports=function p(){var y,T,S,w,E,I,L=arguments[0],b=1,F=arguments.length,V=!1;for(typeof L=="boolean"&&(V=L,L=arguments[1]||{},b=2),(L==null||typeof L!="object"&&typeof L!="function")&&(L={});b<F;++b)if(y=arguments[b],y!=null)for(T in y)S=g(L,T),w=g(y,T),L!==w&&(V&&w&&(d(w)||(E=f(w)))?(E?(E=!1,I=S&&f(S)?S:[]):I=S&&d(S)?S:{},v(L,{name:T,newValue:p(V,I,w)})):typeof w<"u"&&v(L,{name:T,newValue:w}));return L}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function R(O,N){for(var $=0;$<N.length;$++){var Q=N[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(O,Q.key,Q)}}return function(O,N,$){return N&&R(O.prototype,N),$&&R(O,$),O}}(),l=function R(O,N,$){O===null&&(O=Function.prototype);var Q=Object.getOwnPropertyDescriptor(O,N);if(Q===void 0){var se=Object.getPrototypeOf(O);return se===null?void 0:R(se,N,$)}else{if("value"in Q)return Q.value;var Z=Q.get;return Z===void 0?void 0:Z.call($)}},c=i(3),f=L(c),d=i(2),v=L(d),g=i(0),p=L(g),y=i(16),T=L(y),S=i(6),w=L(S),E=i(7),I=L(E);function L(R){return R&&R.__esModule?R:{default:R}}function b(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function F(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:R}function V(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}var P=1,_=function(R){V(O,R);function O(){return b(this,O),F(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return a(O,[{key:"attach",value:function(){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,f.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function($,Q){var se=p.default.query($,p.default.Scope.BLOCK_ATTRIBUTE);se!=null&&this.attributes.attribute(se,Q)}},{key:"formatAt",value:function($,Q,se,Z){this.format(se,Z)}},{key:"insertAt",value:function($,Q,se){if(typeof Q=="string"&&Q.endsWith(`
`)){var Z=p.default.create(A.blotName);this.parent.insertBefore(Z,$===0?this:this.next),Z.insertAt(0,Q.slice(0,-1))}else l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,$,Q,se)}}]),O}(p.default.Embed);_.scope=p.default.Scope.BLOCK_BLOT;var A=function(R){V(O,R);function O(N){b(this,O);var $=F(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,N));return $.cache={},$}return a(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function($,Q){return Q.length()===0?$:$.insert(Q.value(),k(Q))},new v.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function($,Q){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,$,Q),this.cache={}}},{key:"formatAt",value:function($,Q,se,Z){Q<=0||(p.default.query(se,p.default.Scope.BLOCK)?$+Q===this.length()&&this.format(se,Z):l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,$,Math.min(Q,this.length()-$-1),se,Z),this.cache={})}},{key:"insertAt",value:function($,Q,se){if(se!=null)return l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,$,Q,se);if(Q.length!==0){var Z=Q.split(`
`),re=Z.shift();re.length>0&&($<this.length()-1||this.children.tail==null?l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min($,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var G=this;Z.reduce(function(W,M){return G=G.split(W,!0),G.insertAt(0,M),M.length},$+re.length)}}},{key:"insertBefore",value:function($,Q){var se=this.children.head;l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,$,Q),se instanceof T.default&&se.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function($,Q){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,$,Q),this.cache={}}},{key:"optimize",value:function($){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,$),this.cache={}}},{key:"path",value:function($){return l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,$,!0)}},{key:"removeChild",value:function($){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,$),this.cache={}}},{key:"split",value:function($){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Q&&($===0||$>=this.length()-P)){var se=this.clone();return $===0?(this.parent.insertBefore(se,this),this):(this.parent.insertBefore(se,this.next),se)}else{var Z=l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,$,Q);return this.cache={},Z}}}]),O}(p.default.Block);A.blotName="block",A.tagName="P",A.defaultChild="break",A.allowedChildren=[w.default,p.default.Embed,I.default];function k(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(O=(0,f.default)(O,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?O:k(R.parent,O)}n.bubbleFormats=k,n.BlockEmbed=_,n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,M){var B=[],z=!0,ee=!1,X=void 0;try{for(var H=W[Symbol.iterator](),Y;!(z=(Y=H.next()).done)&&(B.push(Y.value),!(M&&B.length===M));z=!0);}catch(ne){ee=!0,X=ne}finally{try{!z&&H.return&&H.return()}finally{if(ee)throw X}}return B}return function(W,M){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function G(W,M){for(var B=0;B<M.length;B++){var z=M[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(W,z.key,z)}}return function(W,M,B){return M&&G(W.prototype,M),B&&G(W,B),W}}();i(50);var f=i(2),d=k(f),v=i(14),g=k(v),p=i(8),y=k(p),T=i(9),S=k(T),w=i(0),E=k(w),I=i(15),L=k(I),b=i(3),F=k(b),V=i(10),P=k(V),_=i(34),A=k(_);function k(G){return G&&G.__esModule?G:{default:G}}function R(G,W,M){return W in G?Object.defineProperty(G,W,{value:M,enumerable:!0,configurable:!0,writable:!0}):G[W]=M,G}function O(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var N=(0,P.default)("quill"),$=function(){c(G,null,[{key:"debug",value:function(M){M===!0&&(M="log"),P.default.level(M)}},{key:"find",value:function(M){return M.__quill||E.default.find(M)}},{key:"import",value:function(M){return this.imports[M]==null&&N.error("Cannot import "+M+". Are you sure it was registered?"),this.imports[M]}},{key:"register",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof M!="string"){var X=M.attrName||M.blotName;typeof X=="string"?this.register("formats/"+X,M,B):Object.keys(M).forEach(function(H){z.register(H,M[H],B)})}else this.imports[M]!=null&&!ee&&N.warn("Overwriting "+M+" with",B),this.imports[M]=B,(M.startsWith("blots/")||M.startsWith("formats/"))&&B.blotName!=="abstract"?E.default.register(B):M.startsWith("modules")&&typeof B.register=="function"&&B.register()}}]);function G(W){var M=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,G),this.options=Q(W,B),this.container=this.options.container,this.container==null)return N.error("Invalid Quill container",W);this.options.debug&&G.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new y.default,this.scroll=E.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new g.default(this.scroll),this.selection=new L.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(y.default.events.EDITOR_CHANGE,function(X){X===y.default.events.TEXT_CHANGE&&M.root.classList.toggle("ql-blank",M.editor.isBlank())}),this.emitter.on(y.default.events.SCROLL_UPDATE,function(X,H){var Y=M.selection.lastRange,ne=Y&&Y.length===0?Y.index:void 0;se.call(M,function(){return M.editor.update(null,H,ne)},X)});var ee=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(ee),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(G,[{key:"addContainer",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof M=="string"){var z=M;M=document.createElement("div"),M.classList.add(z)}return this.container.insertBefore(M,B),M}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(M,B,z){var ee=this,X=Z(M,B,z),H=l(X,4);return M=H[0],B=H[1],z=H[3],se.call(this,function(){return ee.editor.deleteText(M,B)},z,M,-1*B)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(M),this.container.classList.toggle("ql-disabled",!M)}},{key:"focus",value:function(){var M=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=M,this.scrollIntoView()}},{key:"format",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;return se.call(this,function(){var X=z.getSelection(!0),H=new d.default;if(X==null)return H;if(E.default.query(M,E.default.Scope.BLOCK))H=z.editor.formatLine(X.index,X.length,R({},M,B));else{if(X.length===0)return z.selection.format(M,B),H;H=z.editor.formatText(X.index,X.length,R({},M,B))}return z.setSelection(X,y.default.sources.SILENT),H},ee)}},{key:"formatLine",value:function(M,B,z,ee,X){var H=this,Y=void 0,ne=Z(M,B,z,ee,X),ie=l(ne,4);return M=ie[0],B=ie[1],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.formatLine(M,B,Y)},X,M,0)}},{key:"formatText",value:function(M,B,z,ee,X){var H=this,Y=void 0,ne=Z(M,B,z,ee,X),ie=l(ne,4);return M=ie[0],B=ie[1],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.formatText(M,B,Y)},X,M,0)}},{key:"getBounds",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof M=="number"?z=this.selection.getBounds(M,B):z=this.selection.getBounds(M.index,M.length);var ee=this.container.getBoundingClientRect();return{bottom:z.bottom-ee.top,height:z.height,left:z.left-ee.left,right:z.right-ee.left,top:z.top-ee.top,width:z.width}}},{key:"getContents",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,z=Z(M,B),ee=l(z,2);return M=ee[0],B=ee[1],this.editor.getContents(M,B)}},{key:"getFormat",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof M=="number"?this.editor.getFormat(M,B):this.editor.getFormat(M.index,M.length)}},{key:"getIndex",value:function(M){return M.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(M){return this.scroll.leaf(M)}},{key:"getLine",value:function(M){return this.scroll.line(M)}},{key:"getLines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof M!="number"?this.scroll.lines(M.index,M.length):this.scroll.lines(M,B)}},{key:"getModule",value:function(M){return this.theme.modules[M]}},{key:"getSelection",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return M&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,z=Z(M,B),ee=l(z,2);return M=ee[0],B=ee[1],this.editor.getText(M,B)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(M,B,z){var ee=this,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G.sources.API;return se.call(this,function(){return ee.editor.insertEmbed(M,B,z)},X,M)}},{key:"insertText",value:function(M,B,z,ee,X){var H=this,Y=void 0,ne=Z(M,0,z,ee,X),ie=l(ne,4);return M=ie[0],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.insertText(M,B,Y)},X,M,B.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(M,B,z){this.clipboard.dangerouslyPasteHTML(M,B,z)}},{key:"removeFormat",value:function(M,B,z){var ee=this,X=Z(M,B,z),H=l(X,4);return M=H[0],B=H[1],z=H[3],se.call(this,function(){return ee.editor.removeFormat(M,B)},z,M)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(M){var B=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return se.call(this,function(){M=new d.default(M);var ee=B.getLength(),X=B.editor.deleteText(0,ee),H=B.editor.applyDelta(M),Y=H.ops[H.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(B.editor.deleteText(B.getLength()-1,1),H.delete(1));var ne=X.compose(H);return ne},z)}},{key:"setSelection",value:function(M,B,z){if(M==null)this.selection.setRange(null,B||G.sources.API);else{var ee=Z(M,B,z),X=l(ee,4);M=X[0],B=X[1],z=X[3],this.selection.setRange(new I.Range(M,B),z),z!==y.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API,z=new d.default().insert(M);return this.setContents(z,B)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,B=this.scroll.update(M);return this.selection.update(M),B}},{key:"updateContents",value:function(M){var B=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return se.call(this,function(){return M=new d.default(M),B.editor.applyDelta(M,z)},z,!0)}}]),G}();$.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},$.events=y.default.events,$.sources=y.default.sources,$.version="1.3.7",$.imports={delta:d.default,parchment:E.default,"core/module":S.default,"core/theme":A.default};function Q(G,W){if(W=(0,F.default)(!0,{container:G,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===$.DEFAULTS.theme)W.theme=A.default;else if(W.theme=$.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var M=(0,F.default)(!0,{},W.theme.DEFAULTS);[M,W].forEach(function(ee){ee.modules=ee.modules||{},Object.keys(ee.modules).forEach(function(X){ee.modules[X]===!0&&(ee.modules[X]={})})});var B=Object.keys(M.modules).concat(Object.keys(W.modules)),z=B.reduce(function(ee,X){var H=$.import("modules/"+X);return H==null?N.error("Cannot load "+X+" module. Are you sure you registered it?"):ee[X]=H.DEFAULTS||{},ee},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,F.default)(!0,{},$.DEFAULTS,{modules:z},M,W),["bounds","container","scrollingContainer"].forEach(function(ee){typeof W[ee]=="string"&&(W[ee]=document.querySelector(W[ee]))}),W.modules=Object.keys(W.modules).reduce(function(ee,X){return W.modules[X]&&(ee[X]=W.modules[X]),ee},{}),W}function se(G,W,M,B){if(this.options.strict&&!this.isEnabled()&&W===y.default.sources.USER)return new d.default;var z=M==null?null:this.getSelection(),ee=this.editor.delta,X=G();if(z!=null&&(M===!0&&(M=z.index),B==null?z=re(z,X,W):B!==0&&(z=re(z,M,B,W)),this.setSelection(z,y.default.sources.SILENT)),X.length()>0){var H,Y=[y.default.events.TEXT_CHANGE,X,ee,W];if((H=this.emitter).emit.apply(H,[y.default.events.EDITOR_CHANGE].concat(Y)),W!==y.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,Y)}}return X}function Z(G,W,M,B,z){var ee={};return typeof G.index=="number"&&typeof G.length=="number"?typeof W!="number"?(z=B,B=M,M=W,W=G.length,G=G.index):(W=G.length,G=G.index):typeof W!="number"&&(z=B,B=M,M=W,W=0),(typeof M>"u"?"undefined":a(M))==="object"?(ee=M,z=B):typeof M=="string"&&(B!=null?ee[M]=B:z=M),z=z||y.default.sources.API,[G,W,ee,z]}function re(G,W,M,B){if(G==null)return null;var z=void 0,ee=void 0;if(W instanceof d.default){var X=[G.index,G.index+G.length].map(function(ie){return W.transformPosition(ie,B!==y.default.sources.USER)}),H=l(X,2);z=H[0],ee=H[1]}else{var Y=[G.index,G.index+G.length].map(function(ie){return ie<W||ie===W&&B===y.default.sources.USER?ie:M>=0?ie+M:Math.max(W,ie+M)}),ne=l(Y,2);z=ne[0],ee=ne[1]}return new I.Range(z,ee-z)}n.expandConfig=Q,n.overload=Z,n.default=$},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(E,I){for(var L=0;L<I.length;L++){var b=I[L];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(E,b.key,b)}}return function(E,I,L){return I&&w(E.prototype,I),L&&w(E,L),E}}(),l=function w(E,I,L){E===null&&(E=Function.prototype);var b=Object.getOwnPropertyDescriptor(E,I);if(b===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,I,L)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(L)}},c=i(7),f=g(c),d=i(0),v=g(d);function g(w){return w&&w.__esModule?w:{default:w}}function p(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function y(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function T(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var S=function(w){T(E,w);function E(){return p(this,E),y(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"formatAt",value:function(L,b,F,V){if(E.compare(this.statics.blotName,F)<0&&v.default.query(F,v.default.Scope.BLOT)){var P=this.isolate(L,b);V&&P.wrap(F,V)}else l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,L,b,F,V)}},{key:"optimize",value:function(L){if(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,L),this.parent instanceof E&&E.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(L,b){var F=E.order.indexOf(L),V=E.order.indexOf(b);return F>=0||V>=0?F-V:L===b?0:L<b?-1:1}}]),E}(v.default.Inline);S.allowedChildren=[S,v.default.Embed,f.default],S.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default.Text);n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function I(L,b){for(var F=0;F<b.length;F++){var V=b[F];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}return function(L,b,F){return b&&I(L.prototype,b),F&&I(L,F),L}}(),l=function I(L,b,F){L===null&&(L=Function.prototype);var V=Object.getOwnPropertyDescriptor(L,b);if(V===void 0){var P=Object.getPrototypeOf(L);return P===null?void 0:I(P,b,F)}else{if("value"in V)return V.value;var _=V.get;return _===void 0?void 0:_.call(F)}},c=i(54),f=g(c),d=i(10),v=g(d);function g(I){return I&&I.__esModule?I:{default:I}}function p(I,L){if(!(I instanceof L))throw new TypeError("Cannot call a class as a function")}function y(I,L){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:I}function T(I,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);I.prototype=Object.create(L&&L.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(I,L):I.__proto__=L)}var S=(0,v.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(I){document.addEventListener(I,function(){for(var L=arguments.length,b=Array(L),F=0;F<L;F++)b[F]=arguments[F];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(V){if(V.__quill&&V.__quill.emitter){var P;(P=V.__quill.emitter).handleDOM.apply(P,b)}})})});var E=function(I){T(L,I);function L(){p(this,L);var b=y(this,(L.__proto__||Object.getPrototypeOf(L)).call(this));return b.listeners={},b.on("error",S.error),b}return a(L,[{key:"emit",value:function(){S.log.apply(S,arguments),l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(F){for(var V=arguments.length,P=Array(V>1?V-1:0),_=1;_<V;_++)P[_-1]=arguments[_];(this.listeners[F.type]||[]).forEach(function(A){var k=A.node,R=A.handler;(F.target===k||k.contains(F.target))&&R.apply(void 0,[F].concat(P))})}},{key:"listenDOM",value:function(F,V,P){this.listeners[F]||(this.listeners[F]=[]),this.listeners[F].push({node:V,handler:P})}}]),L}(f.default);E.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},E.sources={API:"api",SILENT:"silent",USER:"user"},n.default=E},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}var l=function c(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=f,this.options=d};l.DEFAULTS={},n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],l="warn";function c(d){if(a.indexOf(d)<=a.indexOf(l)){for(var v,g=arguments.length,p=Array(g>1?g-1:0),y=1;y<g;y++)p[y-1]=arguments[y];(v=console)[d].apply(v,p)}}function f(d){return a.reduce(function(v,g){return v[g]=c.bind(console,g,d),v},{})}c.level=f.level=function(d){l=d},n.default=f},function(t,n,i){var a=Array.prototype.slice,l=i(52),c=i(53),f=t.exports=function(p,y,T){return T||(T={}),p===y?!0:p instanceof Date&&y instanceof Date?p.getTime()===y.getTime():!p||!y||typeof p!="object"&&typeof y!="object"?T.strict?p===y:p==y:g(p,y,T)};function d(p){return p==null}function v(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function g(p,y,T){var S,w;if(d(p)||d(y)||p.prototype!==y.prototype)return!1;if(c(p))return c(y)?(p=a.call(p),y=a.call(y),f(p,y,T)):!1;if(v(p)){if(!v(y)||p.length!==y.length)return!1;for(S=0;S<p.length;S++)if(p[S]!==y[S])return!1;return!0}try{var E=l(p),I=l(y)}catch{return!1}if(E.length!=I.length)return!1;for(E.sort(),I.sort(),S=E.length-1;S>=0;S--)if(E[S]!=I[S])return!1;for(S=E.length-1;S>=0;S--)if(w=E[S],!f(p[w],y[w],T))return!1;return typeof p==typeof y}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),l=function(){function c(f,d,v){v===void 0&&(v={}),this.attrName=f,this.keyName=d;var g=a.Scope.TYPE&a.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&a.Scope.LEVEL|g:this.scope=a.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return c.keys=function(f){return[].map.call(f.attributes,function(d){return d.name})},c.prototype.add=function(f,d){return this.canAdd(f,d)?(f.setAttribute(this.keyName,d),!0):!1},c.prototype.canAdd=function(f,d){var v=a.query(f,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},c.prototype.remove=function(f){f.removeAttribute(this.keyName)},c.prototype.value=function(f){var d=f.getAttribute(this.keyName);return this.canAdd(f,d)&&d?d:""},c}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function _(A,k){var R=[],O=!0,N=!1,$=void 0;try{for(var Q=A[Symbol.iterator](),se;!(O=(se=Q.next()).done)&&(R.push(se.value),!(k&&R.length===k));O=!0);}catch(Z){N=!0,$=Z}finally{try{!O&&Q.return&&Q.return()}finally{if(N)throw $}}return R}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(A,k){for(var R=0;R<k.length;R++){var O=k[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,k,R){return k&&_(A.prototype,k),R&&_(A,R),A}}(),c=function _(A,k,R){A===null&&(A=Function.prototype);var O=Object.getOwnPropertyDescriptor(A,k);if(O===void 0){var N=Object.getPrototypeOf(A);return N===null?void 0:_(N,k,R)}else{if("value"in O)return O.value;var $=O.get;return $===void 0?void 0:$.call(R)}},f=i(2),d=I(f),v=i(0),g=I(v),p=i(4),y=I(p),T=i(6),S=I(T),w=i(7),E=I(w);function I(_){return _&&_.__esModule?_:{default:_}}function L(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function b(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function F(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var V=function(_){F(A,_);function A(){return L(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(S.default);V.blotName="code",V.tagName="CODE";var P=function(_){F(A,_);function A(){return L(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return l(A,[{key:"delta",value:function(){var R=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(N,$){return N.insert($).insert(`
`,R.formats())},new d.default)}},{key:"format",value:function(R,O){if(!(R===this.statics.blotName&&O)){var N=this.descendant(E.default,this.length()-1),$=a(N,1),Q=$[0];Q!=null&&Q.deleteAt(Q.length()-1,1),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,R,O)}}},{key:"formatAt",value:function(R,O,N,$){if(O!==0&&!(g.default.query(N,g.default.Scope.BLOCK)==null||N===this.statics.blotName&&$===this.statics.formats(this.domNode))){var Q=this.newlineIndex(R);if(!(Q<0||Q>=R+O)){var se=this.newlineIndex(R,!0)+1,Z=Q-se+1,re=this.isolate(se,Z),G=re.next;re.format(N,$),G instanceof A&&G.formatAt(0,R-se+O-Z,N,$)}}}},{key:"insertAt",value:function(R,O,N){if(N==null){var $=this.descendant(E.default,R),Q=a($,2),se=Q[0],Z=Q[1];se.insertAt(Z,O)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var N=this.domNode.textContent.slice(R).indexOf(`
`);return N>-1?R+N:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(g.default.create("text",`
`)),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,R);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(R),O.moveChildren(this),O.remove())}},{key:"replace",value:function(R){c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var N=g.default.find(O);N==null?O.parentNode.removeChild(O):N instanceof g.default.Embed?N.remove():N.unwrap()})}}],[{key:"create",value:function(R){var O=c(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,R);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),A}(y.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",n.Code=V,n.default=P},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,M){var B=[],z=!0,ee=!1,X=void 0;try{for(var H=W[Symbol.iterator](),Y;!(z=(Y=H.next()).done)&&(B.push(Y.value),!(M&&B.length===M));z=!0);}catch(ne){ee=!0,X=ne}finally{try{!z&&H.return&&H.return()}finally{if(ee)throw X}}return B}return function(W,M){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function G(W,M){for(var B=0;B<M.length;B++){var z=M[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(W,z.key,z)}}return function(W,M,B){return M&&G(W.prototype,M),B&&G(W,B),W}}(),f=i(2),d=O(f),v=i(20),g=O(v),p=i(0),y=O(p),T=i(13),S=O(T),w=i(24),E=O(w),I=i(4),L=O(I),b=i(16),F=O(b),V=i(21),P=O(V),_=i(11),A=O(_),k=i(3),R=O(k);function O(G){return G&&G.__esModule?G:{default:G}}function N(G,W,M){return W in G?Object.defineProperty(G,W,{value:M,enumerable:!0,configurable:!0,writable:!0}):G[W]=M,G}function $(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var Q=/^[ -~]*$/,se=function(){function G(W){$(this,G),this.scroll=W,this.delta=this.getDelta()}return c(G,[{key:"applyDelta",value:function(M){var B=this,z=!1;this.scroll.update();var ee=this.scroll.length();return this.scroll.batchStart(),M=re(M),M.reduce(function(X,H){var Y=H.retain||H.delete||H.insert.length||1,ne=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var ie=H.insert;ie.endsWith(`
`)&&z&&(z=!1,ie=ie.slice(0,-1)),X>=ee&&!ie.endsWith(`
`)&&(z=!0),B.scroll.insertAt(X,ie);var fe=B.scroll.line(X),ye=l(fe,2),ke=ye[0],Re=ye[1],Oe=(0,R.default)({},(0,I.bubbleFormats)(ke));if(ke instanceof L.default){var De=ke.descendant(y.default.Leaf,Re),Ue=l(De,1),et=Ue[0];Oe=(0,R.default)(Oe,(0,I.bubbleFormats)(et))}ne=g.default.attributes.diff(Oe,ne)||{}}else if(a(H.insert)==="object"){var ue=Object.keys(H.insert)[0];if(ue==null)return X;B.scroll.insertAt(X,ue,H.insert[ue])}ee+=Y}return Object.keys(ne).forEach(function(de){B.scroll.formatAt(X,Y,de,ne[de])}),X+Y},0),M.reduce(function(X,H){return typeof H.delete=="number"?(B.scroll.deleteAt(X,H.delete),X):X+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(M)}},{key:"deleteText",value:function(M,B){return this.scroll.deleteAt(M,B),this.update(new d.default().retain(M).delete(B))}},{key:"formatLine",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ee).forEach(function(X){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[X])){var H=z.scroll.lines(M,Math.max(B,1)),Y=B;H.forEach(function(ne){var ie=ne.length();if(!(ne instanceof S.default))ne.format(X,ee[X]);else{var fe=M-ne.offset(z.scroll),ye=ne.newlineIndex(fe+Y)-fe+1;ne.formatAt(fe,ye,X,ee[X])}Y-=ie})}}),this.scroll.optimize(),this.update(new d.default().retain(M).retain(B,(0,P.default)(ee)))}},{key:"formatText",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ee).forEach(function(X){z.scroll.formatAt(M,B,X,ee[X])}),this.update(new d.default().retain(M).retain(B,(0,P.default)(ee)))}},{key:"getContents",value:function(M,B){return this.delta.slice(M,M+B)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(M,B){return M.concat(B.delta())},new d.default)}},{key:"getFormat",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],ee=[];B===0?this.scroll.path(M).forEach(function(H){var Y=l(H,1),ne=Y[0];ne instanceof L.default?z.push(ne):ne instanceof y.default.Leaf&&ee.push(ne)}):(z=this.scroll.lines(M,B),ee=this.scroll.descendants(y.default.Leaf,M,B));var X=[z,ee].map(function(H){if(H.length===0)return{};for(var Y=(0,I.bubbleFormats)(H.shift());Object.keys(Y).length>0;){var ne=H.shift();if(ne==null)return Y;Y=Z((0,I.bubbleFormats)(ne),Y)}return Y});return R.default.apply(R.default,X)}},{key:"getText",value:function(M,B){return this.getContents(M,B).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(M,B,z){return this.scroll.insertAt(M,B,z),this.update(new d.default().retain(M).insert(N({},B,z)))}},{key:"insertText",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return B=B.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(M,B),Object.keys(ee).forEach(function(X){z.scroll.formatAt(M,B.length,X,ee[X])}),this.update(new d.default().retain(M).insert(B,(0,P.default)(ee)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var M=this.scroll.children.head;return M.statics.blotName!==L.default.blotName||M.children.length>1?!1:M.children.head instanceof F.default}},{key:"removeFormat",value:function(M,B){var z=this.getText(M,B),ee=this.scroll.line(M+B),X=l(ee,2),H=X[0],Y=X[1],ne=0,ie=new d.default;H!=null&&(H instanceof S.default?ne=H.newlineIndex(Y)-Y+1:ne=H.length()-Y,ie=H.delta().slice(Y,Y+ne-1).insert(`
`));var fe=this.getContents(M,B+ne),ye=fe.diff(new d.default().insert(z).concat(ie)),ke=new d.default().retain(M).concat(ye);return this.applyDelta(ke)}},{key:"update",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ee=this.delta;if(B.length===1&&B[0].type==="characterData"&&B[0].target.data.match(Q)&&y.default.find(B[0].target)){var X=y.default.find(B[0].target),H=(0,I.bubbleFormats)(X),Y=X.offset(this.scroll),ne=B[0].oldValue.replace(E.default.CONTENTS,""),ie=new d.default().insert(ne),fe=new d.default().insert(X.value()),ye=new d.default().retain(Y).concat(ie.diff(fe,z));M=ye.reduce(function(ke,Re){return Re.insert?ke.insert(Re.insert,H):ke.push(Re)},new d.default),this.delta=ee.compose(M)}else this.delta=this.getDelta(),(!M||!(0,A.default)(ee.compose(M),this.delta))&&(M=ee.diff(this.delta,z));return M}}]),G}();function Z(G,W){return Object.keys(W).reduce(function(M,B){return G[B]==null||(W[B]===G[B]?M[B]=W[B]:Array.isArray(W[B])?W[B].indexOf(G[B])<0&&(M[B]=W[B].concat([G[B]])):M[B]=[W[B],G[B]]),M},{})}function re(G){return G.reduce(function(W,M){if(M.insert===1){var B=(0,P.default)(M.attributes);return delete B.image,W.insert({image:M.attributes.image},B)}if(M.attributes!=null&&(M.attributes.list===!0||M.attributes.bullet===!0)&&(M=(0,P.default)(M),M.attributes.list?M.attributes.list="ordered":(M.attributes.list="bullet",delete M.attributes.bullet)),typeof M.insert=="string"){var z=M.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(z,M.attributes)}return W.push(M)},new d.default)}n.default=se},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function _(A,k){var R=[],O=!0,N=!1,$=void 0;try{for(var Q=A[Symbol.iterator](),se;!(O=(se=Q.next()).done)&&(R.push(se.value),!(k&&R.length===k));O=!0);}catch(Z){N=!0,$=Z}finally{try{!O&&Q.return&&Q.return()}finally{if(N)throw $}}return R}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(A,k){for(var R=0;R<k.length;R++){var O=k[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,k,R){return k&&_(A.prototype,k),R&&_(A,R),A}}(),c=i(0),f=E(c),d=i(21),v=E(d),g=i(11),p=E(g),y=i(8),T=E(y),S=i(10),w=E(S);function E(_){return _&&_.__esModule?_:{default:_}}function I(_){if(Array.isArray(_)){for(var A=0,k=Array(_.length);A<_.length;A++)k[A]=_[A];return k}else return Array.from(_)}function L(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var b=(0,w.default)("quill:selection"),F=function _(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;L(this,_),this.index=A,this.length=k},V=function(){function _(A,k){var R=this;L(this,_),this.emitter=k,this.scroll=A,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=f.default.create("cursor",this),this.lastRange=this.savedRange=new F(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,T.default.sources.USER),1)}),this.emitter.on(T.default.events.EDITOR_CHANGE,function(O,N){O===T.default.events.TEXT_CHANGE&&N.length()>0&&R.update(T.default.sources.SILENT)}),this.emitter.on(T.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var O=R.getNativeRange();O!=null&&O.start.node!==R.cursor.textNode&&R.emitter.once(T.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(T.default.events.SCROLL_OPTIMIZE,function(O,N){if(N.range){var $=N.range,Q=$.startNode,se=$.startOffset,Z=$.endNode,re=$.endOffset;R.setNativeRange(Q,se,Z,re)}}),this.update(T.default.sources.SILENT)}return l(_,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var R=k.cursor.restore();if(!R)return;setTimeout(function(){k.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(T.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||f.default.query(k,f.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var N=f.default.find(O.start.node,!1);if(N==null)return;if(N instanceof f.default.Leaf){var $=N.split(O.start.offset);N.parent.insertBefore(this.cursor,$)}else N.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(k,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();k=Math.min(k,O-1),R=Math.min(k+R,O-1)-k;var N=void 0,$=this.scroll.leaf(k),Q=a($,2),se=Q[0],Z=Q[1];if(se==null)return null;var re=se.position(Z,!0),G=a(re,2);N=G[0],Z=G[1];var W=document.createRange();if(R>0){W.setStart(N,Z);var M=this.scroll.leaf(k+R),B=a(M,2);if(se=B[0],Z=B[1],se==null)return null;var z=se.position(Z,!0),ee=a(z,2);return N=ee[0],Z=ee[1],W.setEnd(N,Z),W.getBoundingClientRect()}else{var X="left",H=void 0;return N instanceof Text?(Z<N.data.length?(W.setStart(N,Z),W.setEnd(N,Z+1)):(W.setStart(N,Z-1),W.setEnd(N,Z),X="right"),H=W.getBoundingClientRect()):(H=se.domNode.getBoundingClientRect(),Z>0&&(X="right")),{bottom:H.top+H.height,height:H.height,left:H[X],right:H[X],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var R=k.getRangeAt(0);if(R==null)return null;var O=this.normalizeNative(R);return b.info("getNativeRange",O),O}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var R=this.normalizedToRange(k);return[R,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var R=this,O=[[k.start.node,k.start.offset]];k.native.collapsed||O.push([k.end.node,k.end.offset]);var N=O.map(function(se){var Z=a(se,2),re=Z[0],G=Z[1],W=f.default.find(re,!0),M=W.offset(R.scroll);return G===0?M:W instanceof f.default.Container?M+W.length():M+W.index(re,G)}),$=Math.min(Math.max.apply(Math,I(N)),this.scroll.length()-1),Q=Math.min.apply(Math,[$].concat(I(N)));return new F(Q,$-Q)}},{key:"normalizeNative",value:function(k){if(!P(this.root,k.startContainer)||!k.collapsed&&!P(this.root,k.endContainer))return null;var R={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[R.start,R.end].forEach(function(O){for(var N=O.node,$=O.offset;!(N instanceof Text)&&N.childNodes.length>0;)if(N.childNodes.length>$)N=N.childNodes[$],$=0;else if(N.childNodes.length===$)N=N.lastChild,$=N instanceof Text?N.data.length:N.childNodes.length+1;else break;O.node=N,O.offset=$}),R}},{key:"rangeToNative",value:function(k){var R=this,O=k.collapsed?[k.index]:[k.index,k.index+k.length],N=[],$=this.scroll.length();return O.forEach(function(Q,se){Q=Math.min($-1,Q);var Z=void 0,re=R.scroll.leaf(Q),G=a(re,2),W=G[0],M=G[1],B=W.position(M,se!==0),z=a(B,2);Z=z[0],M=z[1],N.push(Z,M)}),N.length<2&&(N=N.concat(N)),N}},{key:"scrollIntoView",value:function(k){var R=this.lastRange;if(R!=null){var O=this.getBounds(R.index,R.length);if(O!=null){var N=this.scroll.length()-1,$=this.scroll.line(Math.min(R.index,N)),Q=a($,1),se=Q[0],Z=se;if(R.length>0){var re=this.scroll.line(Math.min(R.index+R.length,N)),G=a(re,1);Z=G[0]}if(!(se==null||Z==null)){var W=k.getBoundingClientRect();O.top<W.top?k.scrollTop-=W.top-O.top:O.bottom>W.bottom&&(k.scrollTop+=O.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(k,R){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",k,R,O,N),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||O.parentNode==null))){var Q=document.getSelection();if(Q!=null)if(k!=null){this.hasFocus()||this.root.focus();var se=(this.getNativeRange()||{}).native;if(se==null||$||k!==se.startContainer||R!==se.startOffset||O!==se.endContainer||N!==se.endOffset){k.tagName=="BR"&&(R=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),O.tagName=="BR"&&(N=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var Z=document.createRange();Z.setStart(k,R),Z.setEnd(O,N),Q.removeAllRanges(),Q.addRange(Z)}}else Q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.default.sources.API;if(typeof R=="string"&&(O=R,R=!1),b.info("setRange",k),k!=null){var N=this.rangeToNative(k);this.setNativeRange.apply(this,I(N).concat([R]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T.default.sources.USER,R=this.lastRange,O=this.getRange(),N=a(O,2),$=N[0],Q=N[1];if(this.lastRange=$,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(R,this.lastRange)){var se;!this.composing&&Q!=null&&Q.native.collapsed&&Q.start.node!==this.cursor.textNode&&this.cursor.restore();var Z=[T.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(R),k];if((se=this.emitter).emit.apply(se,[T.default.events.EDITOR_CHANGE].concat(Z)),k!==T.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Z)}}}}]),_}();function P(_,A){try{A.parentNode}catch{return!1}return A instanceof Text&&(A=A.parentNode),_.contains(A)}n.Range=F,n.default=V},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var I=w[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var I=Object.getOwnPropertyDescriptor(S,w);if(I===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:T(L,w,E)}else{if("value"in I)return I.value;var b=I.get;return b===void 0?void 0:b.call(E)}},c=i(0),f=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function p(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){p(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"insertInto",value:function(E,I){E.children.length===0?l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertInto",this).call(this,E,I):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),S}(f.default.Embed);y.blotName="break",y.tagName="BR",n.default=y},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var T in y)y.hasOwnProperty(T)&&(p[T]=y[T])};return function(p,y){g(p,y);function T(){this.constructor=p}p.prototype=y===null?Object.create(y):(T.prototype=y.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(44),c=i(30),f=i(1),d=function(g){a(p,g);function p(y){var T=g.call(this,y)||this;return T.build(),T}return p.prototype.appendChild=function(y){this.insertBefore(y)},p.prototype.attach=function(){g.prototype.attach.call(this),this.children.forEach(function(y){y.attach()})},p.prototype.build=function(){var y=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(T){try{var S=v(T);y.insertBefore(S,y.children.head||void 0)}catch(w){if(w instanceof f.ParchmentError)return;throw w}})},p.prototype.deleteAt=function(y,T){if(y===0&&T===this.length())return this.remove();this.children.forEachAt(y,T,function(S,w,E){S.deleteAt(w,E)})},p.prototype.descendant=function(y,T){var S=this.children.find(T),w=S[0],E=S[1];return y.blotName==null&&y(w)||y.blotName!=null&&w instanceof y?[w,E]:w instanceof p?w.descendant(y,E):[null,-1]},p.prototype.descendants=function(y,T,S){T===void 0&&(T=0),S===void 0&&(S=Number.MAX_VALUE);var w=[],E=S;return this.children.forEachAt(T,S,function(I,L,b){(y.blotName==null&&y(I)||y.blotName!=null&&I instanceof y)&&w.push(I),I instanceof p&&(w=w.concat(I.descendants(y,L,E))),E-=b}),w},p.prototype.detach=function(){this.children.forEach(function(y){y.detach()}),g.prototype.detach.call(this)},p.prototype.formatAt=function(y,T,S,w){this.children.forEachAt(y,T,function(E,I,L){E.formatAt(I,L,S,w)})},p.prototype.insertAt=function(y,T,S){var w=this.children.find(y),E=w[0],I=w[1];if(E)E.insertAt(I,T,S);else{var L=S==null?f.create("text",T):f.create(T,S);this.appendChild(L)}},p.prototype.insertBefore=function(y,T){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(S){return y instanceof S}))throw new f.ParchmentError("Cannot insert "+y.statics.blotName+" into "+this.statics.blotName);y.insertInto(this,T)},p.prototype.length=function(){return this.children.reduce(function(y,T){return y+T.length()},0)},p.prototype.moveChildren=function(y,T){this.children.forEach(function(S){y.insertBefore(S,T)})},p.prototype.optimize=function(y){if(g.prototype.optimize.call(this,y),this.children.length===0)if(this.statics.defaultChild!=null){var T=f.create(this.statics.defaultChild);this.appendChild(T),T.optimize(y)}else this.remove()},p.prototype.path=function(y,T){T===void 0&&(T=!1);var S=this.children.find(y,T),w=S[0],E=S[1],I=[[this,y]];return w instanceof p?I.concat(w.path(E,T)):(w!=null&&I.push([w,E]),I)},p.prototype.removeChild=function(y){this.children.remove(y)},p.prototype.replace=function(y){y instanceof p&&y.moveChildren(this),g.prototype.replace.call(this,y)},p.prototype.split=function(y,T){if(T===void 0&&(T=!1),!T){if(y===0)return this;if(y===this.length())return this.next}var S=this.clone();return this.parent.insertBefore(S,this.next),this.children.forEachAt(y,this.length(),function(w,E,I){w=w.split(E,T),S.appendChild(w)}),S},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(y,T){var S=this,w=[],E=[];y.forEach(function(I){I.target===S.domNode&&I.type==="childList"&&(w.push.apply(w,I.addedNodes),E.push.apply(E,I.removedNodes))}),E.forEach(function(I){if(!(I.parentNode!=null&&I.tagName!=="IFRAME"&&document.body.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var L=f.find(I);L!=null&&(L.domNode.parentNode==null||L.domNode.parentNode===S.domNode)&&L.detach()}}),w.filter(function(I){return I.parentNode==S.domNode}).sort(function(I,L){return I===L?0:I.compareDocumentPosition(L)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(I){var L=null;I.nextSibling!=null&&(L=f.find(I.nextSibling));var b=v(I);(b.next!=L||b.next==null)&&(b.parent!=null&&b.parent.removeChild(S),S.insertBefore(b,L||void 0))})},p}(c.default);function v(g){var p=f.find(g);if(p==null)try{p=f.create(g)}catch{p=f.create(f.Scope.INLINE),[].slice.call(g.childNodes).forEach(function(T){p.domNode.appendChild(T)}),g.parentNode&&g.parentNode.replaceChild(p.domNode,g),p.attach()}return p}n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var T in y)y.hasOwnProperty(T)&&(p[T]=y[T])};return function(p,y){g(p,y);function T(){this.constructor=p}p.prototype=y===null?Object.create(y):(T.prototype=y.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12),c=i(31),f=i(17),d=i(1),v=function(g){a(p,g);function p(y){var T=g.call(this,y)||this;return T.attributes=new c.default(T.domNode),T}return p.formats=function(y){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return y.tagName.toLowerCase()},p.prototype.format=function(y,T){var S=d.query(y);S instanceof l.default?this.attributes.attribute(S,T):T&&S!=null&&(y!==this.statics.blotName||this.formats()[y]!==T)&&this.replaceWith(y,T)},p.prototype.formats=function(){var y=this.attributes.values(),T=this.statics.formats(this.domNode);return T!=null&&(y[this.statics.blotName]=T),y},p.prototype.replaceWith=function(y,T){var S=g.prototype.replaceWith.call(this,y,T);return this.attributes.copy(S),S},p.prototype.update=function(y,T){var S=this;g.prototype.update.call(this,y,T),y.some(function(w){return w.target===S.domNode&&w.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(y,T){var S=g.prototype.wrap.call(this,y,T);return S instanceof p&&S.statics.scope===this.statics.scope&&this.attributes.move(S),S},p}(f.default);n.default=v},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(30),c=i(1),f=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.value=function(g){return!0},v.prototype.index=function(g,p){return this.domNode===g||this.domNode.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},v.prototype.position=function(g,p){var y=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return g>0&&(y+=1),[this.parent.domNode,y]},v.prototype.value=function(){var g;return g={},g[this.statics.blotName]=this.statics.value(this.domNode)||!0,g},v.scope=c.Scope.INLINE_BLOT,v}(l.default);n.default=f},function(t,n,i){var a=i(11),l=i(3),c={attributes:{compose:function(d,v,g){typeof d!="object"&&(d={}),typeof v!="object"&&(v={});var p=l(!0,{},v);g||(p=Object.keys(p).reduce(function(T,S){return p[S]!=null&&(T[S]=p[S]),T},{}));for(var y in d)d[y]!==void 0&&v[y]===void 0&&(p[y]=d[y]);return Object.keys(p).length>0?p:void 0},diff:function(d,v){typeof d!="object"&&(d={}),typeof v!="object"&&(v={});var g=Object.keys(d).concat(Object.keys(v)).reduce(function(p,y){return a(d[y],v[y])||(p[y]=v[y]===void 0?null:v[y]),p},{});return Object.keys(g).length>0?g:void 0},transform:function(d,v,g){if(typeof d!="object")return v;if(typeof v=="object"){if(!g)return v;var p=Object.keys(v).reduce(function(y,T){return d[T]===void 0&&(y[T]=v[T]),y},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new f(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function f(d){this.ops=d,this.index=0,this.offset=0}f.prototype.hasNext=function(){return this.peekLength()<1/0},f.prototype.next=function(d){d||(d=1/0);var v=this.ops[this.index];if(v){var g=this.offset,p=c.length(v);if(d>=p-g?(d=p-g,this.index+=1,this.offset=0):this.offset+=d,typeof v.delete=="number")return{delete:d};var y={};return v.attributes&&(y.attributes=v.attributes),typeof v.retain=="number"?y.retain=d:typeof v.insert=="string"?y.insert=v.insert.substr(g,d):y.insert=v.insert,y}else return{retain:1/0}},f.prototype.peek=function(){return this.ops[this.index]},f.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},f.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},f.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,v=this.index,g=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=v,[g].concat(p)}else return[]},t.exports=c},function(t,n){var i=function(){function a(S,w){return w!=null&&S instanceof w}var l;try{l=Map}catch{l=function(){}}var c;try{c=Set}catch{c=function(){}}var f;try{f=Promise}catch{f=function(){}}function d(S,w,E,I,L){typeof w=="object"&&(E=w.depth,I=w.prototype,L=w.includeNonEnumerable,w=w.circular);var b=[],F=[],V=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof E>"u"&&(E=1/0);function P(_,A){if(_===null)return null;if(A===0)return _;var k,R;if(typeof _!="object")return _;if(a(_,l))k=new l;else if(a(_,c))k=new c;else if(a(_,f))k=new f(function(W,M){_.then(function(B){W(P(B,A-1))},function(B){M(P(B,A-1))})});else if(d.__isArray(_))k=[];else if(d.__isRegExp(_))k=new RegExp(_.source,T(_)),_.lastIndex&&(k.lastIndex=_.lastIndex);else if(d.__isDate(_))k=new Date(_.getTime());else{if(V&&Buffer.isBuffer(_))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(_.length):k=new Buffer(_.length),_.copy(k),k;a(_,Error)?k=Object.create(_):typeof I>"u"?(R=Object.getPrototypeOf(_),k=Object.create(R)):(k=Object.create(I),R=I)}if(w){var O=b.indexOf(_);if(O!=-1)return F[O];b.push(_),F.push(k)}a(_,l)&&_.forEach(function(W,M){var B=P(M,A-1),z=P(W,A-1);k.set(B,z)}),a(_,c)&&_.forEach(function(W){var M=P(W,A-1);k.add(M)});for(var N in _){var $;R&&($=Object.getOwnPropertyDescriptor(R,N)),!($&&$.set==null)&&(k[N]=P(_[N],A-1))}if(Object.getOwnPropertySymbols)for(var Q=Object.getOwnPropertySymbols(_),N=0;N<Q.length;N++){var se=Q[N],Z=Object.getOwnPropertyDescriptor(_,se);Z&&!Z.enumerable&&!L||(k[se]=P(_[se],A-1),Z.enumerable||Object.defineProperty(k,se,{enumerable:!1}))}if(L)for(var re=Object.getOwnPropertyNames(_),N=0;N<re.length;N++){var G=re[N],Z=Object.getOwnPropertyDescriptor(_,G);Z&&Z.enumerable||(k[G]=P(_[G],A-1),Object.defineProperty(k,G,{enumerable:!1}))}return k}return P(S,E)}d.clonePrototype=function(w){if(w===null)return null;var E=function(){};return E.prototype=w,new E};function v(S){return Object.prototype.toString.call(S)}d.__objToStr=v;function g(S){return typeof S=="object"&&v(S)==="[object Date]"}d.__isDate=g;function p(S){return typeof S=="object"&&v(S)==="[object Array]"}d.__isArray=p;function y(S){return typeof S=="object"&&v(S)==="[object RegExp]"}d.__isRegExp=y;function T(S){var w="";return S.global&&(w+="g"),S.ignoreCase&&(w+="i"),S.multiline&&(w+="m"),w}return d.__getRegExpFlags=T,d}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function k(R,O){var N=[],$=!0,Q=!1,se=void 0;try{for(var Z=R[Symbol.iterator](),re;!($=(re=Z.next()).done)&&(N.push(re.value),!(O&&N.length===O));$=!0);}catch(G){Q=!0,se=G}finally{try{!$&&Z.return&&Z.return()}finally{if(Q)throw se}}return N}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return k(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function k(R,O){for(var N=0;N<O.length;N++){var $=O[N];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(R,$.key,$)}}return function(R,O,N){return O&&k(R.prototype,O),N&&k(R,N),R}}(),c=function k(R,O,N){R===null&&(R=Function.prototype);var $=Object.getOwnPropertyDescriptor(R,O);if($===void 0){var Q=Object.getPrototypeOf(R);return Q===null?void 0:k(Q,O,N)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(N)}},f=i(0),d=b(f),v=i(8),g=b(v),p=i(4),y=b(p),T=i(16),S=b(T),w=i(13),E=b(w),I=i(25),L=b(I);function b(k){return k&&k.__esModule?k:{default:k}}function F(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function V(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function P(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}function _(k){return k instanceof y.default||k instanceof p.BlockEmbed}var A=function(k){P(R,k);function R(O,N){F(this,R);var $=V(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,O));return $.emitter=N.emitter,Array.isArray(N.whitelist)&&($.whitelist=N.whitelist.reduce(function(Q,se){return Q[se]=!0,Q},{})),$.domNode.addEventListener("DOMNodeInserted",function(){}),$.optimize(),$.enable(),$}return l(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(N,$){var Q=this.line(N),se=a(Q,2),Z=se[0],re=se[1],G=this.line(N+$),W=a(G,1),M=W[0];if(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,N,$),M!=null&&Z!==M&&re>0){if(Z instanceof p.BlockEmbed||M instanceof p.BlockEmbed){this.optimize();return}if(Z instanceof E.default){var B=Z.newlineIndex(Z.length(),!0);if(B>-1&&(Z=Z.split(B+1),Z===M)){this.optimize();return}}else if(M instanceof E.default){var z=M.newlineIndex(0);z>-1&&M.split(z+1)}var ee=M.children.head instanceof S.default?null:M.children.head;Z.moveChildren(M,ee),Z.remove()}this.optimize()}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",N)}},{key:"formatAt",value:function(N,$,Q,se){this.whitelist!=null&&!this.whitelist[Q]||(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,N,$,Q,se),this.optimize())}},{key:"insertAt",value:function(N,$,Q){if(!(Q!=null&&this.whitelist!=null&&!this.whitelist[$])){if(N>=this.length())if(Q==null||d.default.query($,d.default.Scope.BLOCK)==null){var se=d.default.create(this.statics.defaultChild);this.appendChild(se),Q==null&&$.endsWith(`
`)&&($=$.slice(0,-1)),se.insertAt(0,$,Q)}else{var Z=d.default.create($,Q);this.appendChild(Z)}else c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,N,$,Q);this.optimize()}}},{key:"insertBefore",value:function(N,$){if(N.statics.scope===d.default.Scope.INLINE_BLOT){var Q=d.default.create(this.statics.defaultChild);Q.appendChild(N),N=Q}c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,N,$)}},{key:"leaf",value:function(N){return this.path(N).pop()||[null,-1]}},{key:"line",value:function(N){return N===this.length()?this.line(N-1):this.descendant(_,N)}},{key:"lines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Q=function se(Z,re,G){var W=[],M=G;return Z.children.forEachAt(re,G,function(B,z,ee){_(B)?W.push(B):B instanceof d.default.Container&&(W=W.concat(se(B,z,M))),M-=ee}),W};return Q(this,N,$)}},{key:"optimize",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,N,$),N.length>0&&this.emitter.emit(g.default.events.SCROLL_OPTIMIZE,N,$))}},{key:"path",value:function(N){return c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,N).slice(1)}},{key:"update",value:function(N){if(this.batch!==!0){var $=g.default.sources.USER;typeof N=="string"&&($=N),Array.isArray(N)||(N=this.observer.takeRecords()),N.length>0&&this.emitter.emit(g.default.events.SCROLL_BEFORE_UPDATE,$,N),c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,N.concat([])),N.length>0&&this.emitter.emit(g.default.events.SCROLL_UPDATE,$,N)}}}]),R}(d.default.Scroll);A.blotName="scroll",A.className="ql-editor",A.tagName="DIV",A.defaultChild="block",A.allowedChildren=[y.default,p.BlockEmbed,L.default],n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},l=function(){function H(Y,ne){var ie=[],fe=!0,ye=!1,ke=void 0;try{for(var Re=Y[Symbol.iterator](),Oe;!(fe=(Oe=Re.next()).done)&&(ie.push(Oe.value),!(ne&&ie.length===ne));fe=!0);}catch(De){ye=!0,ke=De}finally{try{!fe&&Re.return&&Re.return()}finally{if(ye)throw ke}}return ie}return function(Y,ne){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return H(Y,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function H(Y,ne){for(var ie=0;ie<ne.length;ie++){var fe=ne[ie];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(Y,fe.key,fe)}}return function(Y,ne,ie){return ne&&H(Y.prototype,ne),ie&&H(Y,ie),Y}}(),f=i(21),d=k(f),v=i(11),g=k(v),p=i(3),y=k(p),T=i(2),S=k(T),w=i(20),E=k(w),I=i(0),L=k(I),b=i(5),F=k(b),V=i(10),P=k(V),_=i(9),A=k(_);function k(H){return H&&H.__esModule?H:{default:H}}function R(H,Y,ne){return Y in H?Object.defineProperty(H,Y,{value:ne,enumerable:!0,configurable:!0,writable:!0}):H[Y]=ne,H}function O(H,Y){if(!(H instanceof Y))throw new TypeError("Cannot call a class as a function")}function N(H,Y){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:H}function $(H,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);H.prototype=Object.create(Y&&Y.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(H,Y):H.__proto__=Y)}var Q=(0,P.default)("quill:keyboard"),se=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Z=function(H){$(Y,H),c(Y,null,[{key:"match",value:function(ie,fe){return fe=X(fe),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ye){return!!fe[ye]!==ie[ye]&&fe[ye]!==null})?!1:fe.key===(ie.which||ie.keyCode)}}]);function Y(ne,ie){O(this,Y);var fe=N(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,ne,ie));return fe.bindings={},Object.keys(fe.options.bindings).forEach(function(ye){ye==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||fe.options.bindings[ye]&&fe.addBinding(fe.options.bindings[ye])}),fe.addBinding({key:Y.keys.ENTER,shiftKey:null},B),fe.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},G),fe.addBinding({key:Y.keys.DELETE},{collapsed:!0},W)):(fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},G),fe.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},M),fe.addBinding({key:Y.keys.DELETE},{collapsed:!1},M),fe.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},G),fe.listen(),fe}return c(Y,[{key:"addBinding",value:function(ie){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=X(ie);if(ke==null||ke.key==null)return Q.warn("Attempted to add invalid keyboard binding",ke);typeof fe=="function"&&(fe={handler:fe}),typeof ye=="function"&&(ye={handler:ye}),ke=(0,y.default)(ke,fe,ye),this.bindings[ke.key]=this.bindings[ke.key]||[],this.bindings[ke.key].push(ke)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(fe){if(!fe.defaultPrevented){var ye=fe.which||fe.keyCode,ke=(ie.bindings[ye]||[]).filter(function(ut){return Y.match(fe,ut)});if(ke.length!==0){var Re=ie.quill.getSelection();if(!(Re==null||!ie.quill.hasFocus())){var Oe=ie.quill.getLine(Re.index),De=l(Oe,2),Ue=De[0],et=De[1],ue=ie.quill.getLeaf(Re.index),de=l(ue,2),Ee=de[0],be=de[1],ge=Re.length===0?[Ee,be]:ie.quill.getLeaf(Re.index+Re.length),$e=l(ge,2),Fe=$e[0],Be=$e[1],We=Ee instanceof L.default.Text?Ee.value().slice(0,be):"",Xe=Fe instanceof L.default.Text?Fe.value().slice(Be):"",Ze={collapsed:Re.length===0,empty:Re.length===0&&Ue.length()<=1,format:ie.quill.getFormat(Re),offset:et,prefix:We,suffix:Xe},Yn=ke.some(function(ut){if(ut.collapsed!=null&&ut.collapsed!==Ze.collapsed||ut.empty!=null&&ut.empty!==Ze.empty||ut.offset!=null&&ut.offset!==Ze.offset)return!1;if(Array.isArray(ut.format)){if(ut.format.every(function(St){return Ze.format[St]==null}))return!1}else if(a(ut.format)==="object"&&!Object.keys(ut.format).every(function(St){return ut.format[St]===!0?Ze.format[St]!=null:ut.format[St]===!1?Ze.format[St]==null:(0,g.default)(ut.format[St],Ze.format[St])}))return!1;return ut.prefix!=null&&!ut.prefix.test(Ze.prefix)||ut.suffix!=null&&!ut.suffix.test(Ze.suffix)?!1:ut.handler.call(ie,Re,Ze)!==!0});Yn&&fe.preventDefault()}}}})}}]),Y}(A.default);Z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Z.DEFAULTS={bindings:{bold:ee("bold"),italic:ee("italic"),underline:ee("underline"),indent:{key:Z.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",F.default.sources.USER)}},outdent:{key:Z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",F.default.sources.USER)}},"outdent backspace":{key:Z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,ne){ne.format.indent!=null?this.quill.format("indent","-1",F.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,F.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:Z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,F.default.sources.USER)}},tab:{key:Z.keys.TAB,handler:function(Y){this.quill.history.cutoff();var ne=new S.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(ne,F.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,F.default.sources.SILENT)}},"list empty enter":{key:Z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,ne){this.quill.format("list",!1,F.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,F.default.sources.USER)}},"checklist enter":{key:Z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var ne=this.quill.getLine(Y.index),ie=l(ne,2),fe=ie[0],ye=ie[1],ke=(0,y.default)({},fe.formats(),{list:"checked"}),Re=new S.default().retain(Y.index).insert(`
`,ke).retain(fe.length()-ye-1).retain(1,{list:"unchecked"});this.quill.updateContents(Re,F.default.sources.USER),this.quill.setSelection(Y.index+1,F.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,ne){var ie=this.quill.getLine(Y.index),fe=l(ie,2),ye=fe[0],ke=fe[1],Re=new S.default().retain(Y.index).insert(`
`,ne.format).retain(ye.length()-ke-1).retain(1,{header:null});this.quill.updateContents(Re,F.default.sources.USER),this.quill.setSelection(Y.index+1,F.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,ne){var ie=ne.prefix.length,fe=this.quill.getLine(Y.index),ye=l(fe,2),ke=ye[0],Re=ye[1];if(Re>ie)return!0;var Oe=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":Oe="unchecked";break;case"[x]":Oe="checked";break;case"-":case"*":Oe="bullet";break;default:Oe="ordered"}this.quill.insertText(Y.index," ",F.default.sources.USER),this.quill.history.cutoff();var De=new S.default().retain(Y.index-Re).delete(ie+1).retain(ke.length()-2-Re).retain(1,{list:Oe});this.quill.updateContents(De,F.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-ie,F.default.sources.SILENT)}},"code exit":{key:Z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var ne=this.quill.getLine(Y.index),ie=l(ne,2),fe=ie[0],ye=ie[1],ke=new S.default().retain(Y.index+fe.length()-ye-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ke,F.default.sources.USER)}},"embed left":re(Z.keys.LEFT,!1),"embed left shift":re(Z.keys.LEFT,!0),"embed right":re(Z.keys.RIGHT,!1),"embed right shift":re(Z.keys.RIGHT,!0)}};function re(H,Y){var ne,ie=H===Z.keys.LEFT?"prefix":"suffix";return ne={key:H,shiftKey:Y,altKey:null},R(ne,ie,/^$/),R(ne,"handler",function(ye){var ke=ye.index;H===Z.keys.RIGHT&&(ke+=ye.length+1);var Re=this.quill.getLeaf(ke),Oe=l(Re,1),De=Oe[0];return De instanceof L.default.Embed?(H===Z.keys.LEFT?Y?this.quill.setSelection(ye.index-1,ye.length+1,F.default.sources.USER):this.quill.setSelection(ye.index-1,F.default.sources.USER):Y?this.quill.setSelection(ye.index,ye.length+1,F.default.sources.USER):this.quill.setSelection(ye.index+ye.length+1,F.default.sources.USER),!1):!0}),ne}function G(H,Y){if(!(H.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(H.index),ie=l(ne,1),fe=ie[0],ye={};if(Y.offset===0){var ke=this.quill.getLine(H.index-1),Re=l(ke,1),Oe=Re[0];if(Oe!=null&&Oe.length()>1){var De=fe.formats(),Ue=this.quill.getFormat(H.index-1,1);ye=E.default.attributes.diff(De,Ue)||{}}}var et=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(H.index-et,et,F.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(H.index-et,et,ye,F.default.sources.USER),this.quill.focus()}}function W(H,Y){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(H.index>=this.quill.getLength()-ne)){var ie={},fe=0,ye=this.quill.getLine(H.index),ke=l(ye,1),Re=ke[0];if(Y.offset>=Re.length()-1){var Oe=this.quill.getLine(H.index+1),De=l(Oe,1),Ue=De[0];if(Ue){var et=Re.formats(),ue=this.quill.getFormat(H.index,1);ie=E.default.attributes.diff(et,ue)||{},fe=Ue.length()}}this.quill.deleteText(H.index,ne,F.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(H.index+fe-1,ne,ie,F.default.sources.USER)}}function M(H){var Y=this.quill.getLines(H),ne={};if(Y.length>1){var ie=Y[0].formats(),fe=Y[Y.length-1].formats();ne=E.default.attributes.diff(fe,ie)||{}}this.quill.deleteText(H,F.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(H.index,1,ne,F.default.sources.USER),this.quill.setSelection(H.index,F.default.sources.SILENT),this.quill.focus()}function B(H,Y){var ne=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var ie=Object.keys(Y.format).reduce(function(fe,ye){return L.default.query(ye,L.default.Scope.BLOCK)&&!Array.isArray(Y.format[ye])&&(fe[ye]=Y.format[ye]),fe},{});this.quill.insertText(H.index,`
`,ie,F.default.sources.USER),this.quill.setSelection(H.index+1,F.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(fe){ie[fe]==null&&(Array.isArray(Y.format[fe])||fe!=="link"&&ne.quill.format(fe,Y.format[fe],F.default.sources.USER))})}function z(H){return{key:Z.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(ne){var ie=L.default.query("code-block"),fe=ne.index,ye=ne.length,ke=this.quill.scroll.descendant(ie,fe),Re=l(ke,2),Oe=Re[0],De=Re[1];if(Oe!=null){var Ue=this.quill.getIndex(Oe),et=Oe.newlineIndex(De,!0)+1,ue=Oe.newlineIndex(Ue+De+ye),de=Oe.domNode.textContent.slice(et,ue).split(`
`);De=0,de.forEach(function(Ee,be){H?(Oe.insertAt(et+De,ie.TAB),De+=ie.TAB.length,be===0?fe+=ie.TAB.length:ye+=ie.TAB.length):Ee.startsWith(ie.TAB)&&(Oe.deleteAt(et+De,ie.TAB.length),De-=ie.TAB.length,be===0?fe-=ie.TAB.length:ye-=ie.TAB.length),De+=Ee.length+1}),this.quill.update(F.default.sources.USER),this.quill.setSelection(fe,ye,F.default.sources.SILENT)}}}}function ee(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(ne,ie){this.quill.format(H,!ie.format[H],F.default.sources.USER)}}}function X(H){if(typeof H=="string"||typeof H=="number")return X({key:H});if((typeof H>"u"?"undefined":a(H))==="object"&&(H=(0,d.default)(H,!1)),typeof H.key=="string")if(Z.keys[H.key.toUpperCase()]!=null)H.key=Z.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[se]=H.shortKey,delete H.shortKey),H}n.default=Z,n.SHORTKEY=se},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function E(I,L){var b=[],F=!0,V=!1,P=void 0;try{for(var _=I[Symbol.iterator](),A;!(F=(A=_.next()).done)&&(b.push(A.value),!(L&&b.length===L));F=!0);}catch(k){V=!0,P=k}finally{try{!F&&_.return&&_.return()}finally{if(V)throw P}}return b}return function(I,L){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return E(I,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function E(I,L,b){I===null&&(I=Function.prototype);var F=Object.getOwnPropertyDescriptor(I,L);if(F===void 0){var V=Object.getPrototypeOf(I);return V===null?void 0:E(V,L,b)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(b)}},c=function(){function E(I,L){for(var b=0;b<L.length;b++){var F=L[b];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,F.key,F)}}return function(I,L,b){return L&&E(I.prototype,L),b&&E(I,b),I}}(),f=i(0),d=p(f),v=i(7),g=p(v);function p(E){return E&&E.__esModule?E:{default:E}}function y(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function T(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function S(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var w=function(E){S(I,E),c(I,null,[{key:"value",value:function(){}}]);function I(L,b){y(this,I);var F=T(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,L));return F.selection=b,F.textNode=document.createTextNode(I.CONTENTS),F.domNode.appendChild(F.textNode),F._length=0,F}return c(I,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,F){if(this._length!==0)return l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,b,F);for(var V=this,P=0;V!=null&&V.statics.scope!==d.default.Scope.BLOCK_BLOT;)P+=V.offset(V.parent),V=V.parent;V!=null&&(this._length=I.CONTENTS.length,V.optimize(),V.formatAt(P,I.CONTENTS.length,b,F),this._length=0)}},{key:"index",value:function(b,F){return b===this.textNode?0:l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"index",this).call(this,b,F)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,F=this.selection.getNativeRange(),V=void 0,P=void 0,_=void 0;if(F!=null&&F.start.node===b&&F.end.node===b){var A=[b,F.start.offset,F.end.offset];V=A[0],P=A[1],_=A[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==I.CONTENTS){var k=this.textNode.data.split(I.CONTENTS).join("");this.next instanceof g.default?(V=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=I.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(I.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var R=[P,_].map(function(N){return Math.max(0,Math.min(V.data.length,N-1))}),O=a(R,2);return P=O[0],_=O[1],{startNode:V,startOffset:P,endNode:V,endOffset:_}}}}},{key:"update",value:function(b,F){var V=this;if(b.some(function(_){return _.type==="characterData"&&_.target===V.textNode})){var P=this.restore();P&&(F.range=P)}}},{key:"value",value:function(){return""}}]),I}(d.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=d(a),c=i(4),f=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function p(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){p(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(l.default.Container);y.allowedChildren=[f.default,c.BlockEmbed,y],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function w(E,I){for(var L=0;L<I.length;L++){var b=I[L];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(E,b.key,b)}}return function(E,I,L){return I&&w(E.prototype,I),L&&w(E,L),E}}(),l=function w(E,I,L){E===null&&(E=Function.prototype);var b=Object.getOwnPropertyDescriptor(E,I);if(b===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,I,L)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(L)}},c=i(0),f=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function g(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function p(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var y=function(w){p(E,w);function E(){return v(this,E),g(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"value",value:function(L){var b=l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,L);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(F){return("00"+parseInt(F).toString(16)).slice(-2)}).join("")):b}}]),E}(f.default.Attributor.Style),T=new f.default.Attributor.Class("color","ql-color",{scope:f.default.Scope.INLINE}),S=new y("color","color",{scope:f.default.Scope.INLINE});n.ColorAttributor=y,n.ColorClass=T,n.ColorStyle=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function S(w,E){for(var I=0;I<E.length;I++){var L=E[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,E,I){return E&&S(w.prototype,E),I&&S(w,I),w}}(),l=function S(w,E,I){w===null&&(w=Function.prototype);var L=Object.getOwnPropertyDescriptor(w,E);if(L===void 0){var b=Object.getPrototypeOf(w);return b===null?void 0:S(b,E,I)}else{if("value"in L)return L.value;var F=L.get;return F===void 0?void 0:F.call(I)}},c=i(6),f=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function v(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function g(S,w){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:S}function p(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(S,w):S.__proto__=w)}var y=function(S){p(w,S);function w(){return v(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(I,L){if(I!==this.statics.blotName||!L)return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,I,L);L=this.constructor.sanitize(L),this.domNode.setAttribute("href",L)}}],[{key:"create",value:function(I){var L=l(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,I);return I=this.sanitize(I),L.setAttribute("href",I),L.setAttribute("rel","noopener noreferrer"),L.setAttribute("target","_blank"),L}},{key:"formats",value:function(I){return I.getAttribute("href")}},{key:"sanitize",value:function(I){return T(I,this.PROTOCOL_WHITELIST)?I:this.SANITIZED_URL}}]),w}(f.default);y.blotName="link",y.tagName="A",y.SANITIZED_URL="about:blank",y.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function T(S,w){var E=document.createElement("a");E.href=S;var I=E.href.slice(0,E.href.indexOf(":"));return w.indexOf(I)>-1}n.default=y,n.sanitize=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l=function(){function w(E,I){for(var L=0;L<I.length;L++){var b=I[L];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(E,b.key,b)}}return function(E,I,L){return I&&w(E.prototype,I),L&&w(E,L),E}}(),c=i(23),f=g(c),d=i(107),v=g(d);function g(w){return w&&w.__esModule?w:{default:w}}function p(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}var y=0;function T(w,E){w.setAttribute(E,w.getAttribute(E)!=="true")}var S=function(){function w(E){var I=this;p(this,w),this.select=E,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){I.togglePicker()}),this.label.addEventListener("keydown",function(L){switch(L.keyCode){case f.default.keys.ENTER:I.togglePicker();break;case f.default.keys.ESCAPE:I.escape(),L.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),T(this.label,"aria-expanded"),T(this.options,"aria-hidden")}},{key:"buildItem",value:function(I){var L=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),I.hasAttribute("value")&&b.setAttribute("data-value",I.getAttribute("value")),I.textContent&&b.setAttribute("data-label",I.textContent),b.addEventListener("click",function(){L.selectItem(b,!0)}),b.addEventListener("keydown",function(F){switch(F.keyCode){case f.default.keys.ENTER:L.selectItem(b,!0),F.preventDefault();break;case f.default.keys.ESCAPE:L.escape(),F.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var I=document.createElement("span");return I.classList.add("ql-picker-label"),I.innerHTML=v.default,I.tabIndex="0",I.setAttribute("role","button"),I.setAttribute("aria-expanded","false"),this.container.appendChild(I),I}},{key:"buildOptions",value:function(){var I=this,L=document.createElement("span");L.classList.add("ql-picker-options"),L.setAttribute("aria-hidden","true"),L.tabIndex="-1",L.id="ql-picker-options-"+y,y+=1,this.label.setAttribute("aria-controls",L.id),this.options=L,[].slice.call(this.select.options).forEach(function(b){var F=I.buildItem(b);L.appendChild(F),b.selected===!0&&I.selectItem(F)}),this.container.appendChild(L)}},{key:"buildPicker",value:function(){var I=this;[].slice.call(this.select.attributes).forEach(function(L){I.container.setAttribute(L.name,L.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var I=this;this.close(),setTimeout(function(){return I.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(I!==b&&(b!=null&&b.classList.remove("ql-selected"),I!=null&&(I.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(I.parentNode.children,I),I.hasAttribute("data-value")?this.label.setAttribute("data-value",I.getAttribute("data-value")):this.label.removeAttribute("data-value"),I.hasAttribute("data-label")?this.label.setAttribute("data-label",I.getAttribute("data-label")):this.label.removeAttribute("data-label"),L))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var F=document.createEvent("Event");F.initEvent("change",!0,!0),this.select.dispatchEvent(F)}this.close()}}},{key:"update",value:function(){var I=void 0;if(this.select.selectedIndex>-1){var L=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];I=this.select.options[this.select.selectedIndex],this.selectItem(L)}else this.selectItem(null);var b=I!=null&&I!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),w}();n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=Q(a),c=i(5),f=Q(c),d=i(4),v=Q(d),g=i(16),p=Q(g),y=i(25),T=Q(y),S=i(24),w=Q(S),E=i(35),I=Q(E),L=i(6),b=Q(L),F=i(22),V=Q(F),P=i(7),_=Q(P),A=i(55),k=Q(A),R=i(42),O=Q(R),N=i(23),$=Q(N);function Q(se){return se&&se.__esModule?se:{default:se}}f.default.register({"blots/block":v.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":T.default,"blots/cursor":w.default,"blots/embed":I.default,"blots/inline":b.default,"blots/scroll":V.default,"blots/text":_.default,"modules/clipboard":k.default,"modules/history":O.default,"modules/keyboard":$.default}),l.default.register(v.default,p.default,w.default,b.default,V.default,_.default),n.default=f.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),l=function(){function c(f){this.domNode=f,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(f){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof f=="string"&&(f=f.toUpperCase(),parseInt(f).toString()===f&&(f=parseInt(f))),typeof f=="number"?d=document.createElement(this.tagName[f-1]):this.tagName.indexOf(f)>-1?d=document.createElement(f):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var f=this.domNode.cloneNode(!1);return a.create(f)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(f,d){var v=this.isolate(f,d);v.remove()},c.prototype.formatAt=function(f,d,v,g){var p=this.isolate(f,d);if(a.query(v,a.Scope.BLOT)!=null&&g)p.wrap(v,g);else if(a.query(v,a.Scope.ATTRIBUTE)!=null){var y=a.create(this.statics.scope);p.wrap(y),y.format(v,g)}},c.prototype.insertAt=function(f,d,v){var g=v==null?a.create("text",d):a.create(d,v),p=this.split(f);this.parent.insertBefore(g,p)},c.prototype.insertInto=function(f,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var v=null;f.children.insertBefore(this,d),d!=null&&(v=d.domNode),(this.domNode.parentNode!=f.domNode||this.domNode.nextSibling!=v)&&f.domNode.insertBefore(this.domNode,v),this.parent=f,this.attach()},c.prototype.isolate=function(f,d){var v=this.split(f);return v.split(d),v},c.prototype.length=function(){return 1},c.prototype.offset=function(f){return f===void 0&&(f=this.parent),this.parent==null||this==f?0:this.parent.children.offset(this)+this.parent.offset(f)},c.prototype.optimize=function(f){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(f){f.parent!=null&&(f.parent.insertBefore(this,f.next),f.remove())},c.prototype.replaceWith=function(f,d){var v=typeof f=="string"?a.create(f,d):f;return v.replace(this),v},c.prototype.split=function(f,d){return f===0?this:this.next},c.prototype.update=function(f,d){},c.prototype.wrap=function(f,d){var v=typeof f=="string"?a.create(f,d):f;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},c.blotName="abstract",c}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),l=i(32),c=i(33),f=i(1),d=function(){function v(g){this.attributes={},this.domNode=g,this.build()}return v.prototype.attribute=function(g,p){p?g.add(this.domNode,p)&&(g.value(this.domNode)!=null?this.attributes[g.attrName]=g:delete this.attributes[g.attrName]):(g.remove(this.domNode),delete this.attributes[g.attrName])},v.prototype.build=function(){var g=this;this.attributes={};var p=a.default.keys(this.domNode),y=l.default.keys(this.domNode),T=c.default.keys(this.domNode);p.concat(y).concat(T).forEach(function(S){var w=f.query(S,f.Scope.ATTRIBUTE);w instanceof a.default&&(g.attributes[w.attrName]=w)})},v.prototype.copy=function(g){var p=this;Object.keys(this.attributes).forEach(function(y){var T=p.attributes[y].value(p.domNode);g.format(y,T)})},v.prototype.move=function(g){var p=this;this.copy(g),Object.keys(this.attributes).forEach(function(y){p.attributes[y].remove(p.domNode)}),this.attributes={}},v.prototype.values=function(){var g=this;return Object.keys(this.attributes).reduce(function(p,y){return p[y]=g.attributes[y].value(g.domNode),p},{})},v}();n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function c(d,v){var g=d.getAttribute("class")||"";return g.split(/\s+/).filter(function(p){return p.indexOf(v+"-")===0})}var f=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.keys=function(g){return(g.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},v.prototype.add=function(g,p){return this.canAdd(g,p)?(this.remove(g),g.classList.add(this.keyName+"-"+p),!0):!1},v.prototype.remove=function(g){var p=c(g,this.keyName);p.forEach(function(y){g.classList.remove(y)}),g.classList.length===0&&g.removeAttribute("class")},v.prototype.value=function(g){var p=c(g,this.keyName)[0]||"",y=p.slice(this.keyName.length+1);return this.canAdd(g,y)?y:""},v}(l.default);n.default=f},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function c(d){var v=d.split("-"),g=v.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return v[0]+g}var f=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.keys=function(g){return(g.getAttribute("style")||"").split(";").map(function(p){var y=p.split(":");return y[0].trim()})},v.prototype.add=function(g,p){return this.canAdd(g,p)?(g.style[c(this.keyName)]=p,!0):!1},v.prototype.remove=function(g){g.style[c(this.keyName)]="",g.getAttribute("style")||g.removeAttribute("style")},v.prototype.value=function(g){var p=g.style[c(this.keyName)];return this.canAdd(g,p)?p:""},v}(l.default);n.default=f},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function f(d,v){for(var g=0;g<v.length;g++){var p=v[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,v,g){return v&&f(d.prototype,v),g&&f(d,g),d}}();function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function f(d,v){l(this,f),this.quill=d,this.options=v,this.modules={}}return a(f,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(g){v.modules[g]==null&&v.addModule(g)})}},{key:"addModule",value:function(v){var g=this.quill.constructor.import("modules/"+v);return this.modules[v]=new g(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),f}();c.DEFAULTS={modules:{}},c.themes={default:c},n.default=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function E(I,L){for(var b=0;b<L.length;b++){var F=L[b];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,F.key,F)}}return function(I,L,b){return L&&E(I.prototype,L),b&&E(I,b),I}}(),l=function E(I,L,b){I===null&&(I=Function.prototype);var F=Object.getOwnPropertyDescriptor(I,L);if(F===void 0){var V=Object.getPrototypeOf(I);return V===null?void 0:E(V,L,b)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(b)}},c=i(0),f=g(c),d=i(7),v=g(d);function g(E){return E&&E.__esModule?E:{default:E}}function p(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function y(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function T(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var S="\uFEFF",w=function(E){T(I,E);function I(L){p(this,I);var b=y(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,L));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(F){b.contentNode.appendChild(F)}),b.leftGuard=document.createTextNode(S),b.rightGuard=document.createTextNode(S),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return a(I,[{key:"index",value:function(b,F){return b===this.leftGuard?0:b===this.rightGuard?1:l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"index",this).call(this,b,F)}},{key:"restore",value:function(b){var F=void 0,V=void 0,P=b.data.split(S).join("");if(b===this.leftGuard)if(this.prev instanceof v.default){var _=this.prev.length();this.prev.insertAt(_,P),F={startNode:this.prev.domNode,startOffset:_+P.length}}else V=document.createTextNode(P),this.parent.insertBefore(f.default.create(V),this),F={startNode:V,startOffset:P.length};else b===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,P),F={startNode:this.next.domNode,startOffset:P.length}):(V=document.createTextNode(P),this.parent.insertBefore(f.default.create(V),this.next),F={startNode:V,startOffset:P.length}));return b.data=S,F}},{key:"update",value:function(b,F){var V=this;b.forEach(function(P){if(P.type==="characterData"&&(P.target===V.leftGuard||P.target===V.rightGuard)){var _=V.restore(P.target);_&&(F.range=_)}})}}]),I}(f.default.Embed);n.default=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=i(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}var f={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new l.default.Attributor.Attribute("align","align",f),v=new l.default.Attributor.Class("align","ql-align",f),g=new l.default.Attributor.Style("align","text-align",f);n.AlignAttribute=d,n.AlignClass=v,n.AlignStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=i(0),l=f(a),c=i(26);function f(g){return g&&g.__esModule?g:{default:g}}var d=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),v=new c.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=v},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=i(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}var f={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},d=new l.default.Attributor.Attribute("direction","dir",f),v=new l.default.Attributor.Class("direction","ql-direction",f),g=new l.default.Attributor.Style("direction","direction",f);n.DirectionAttribute=d,n.DirectionClass=v,n.DirectionStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function E(I,L){for(var b=0;b<L.length;b++){var F=L[b];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,F.key,F)}}return function(I,L,b){return L&&E(I.prototype,L),b&&E(I,b),I}}(),l=function E(I,L,b){I===null&&(I=Function.prototype);var F=Object.getOwnPropertyDescriptor(I,L);if(F===void 0){var V=Object.getPrototypeOf(I);return V===null?void 0:E(V,L,b)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(b)}},c=i(0),f=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function v(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function g(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function p(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var y={scope:f.default.Scope.INLINE,whitelist:["serif","monospace"]},T=new f.default.Attributor.Class("font","ql-font",y),S=function(E){p(I,E);function I(){return v(this,I),g(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return a(I,[{key:"value",value:function(b){return l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),I}(f.default.Attributor.Style),w=new S("font","font-family",y);n.FontStyle=w,n.FontClass=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=i(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}var f=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=f,n.SizeStyle=d},function(t,n,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function L(b,F){for(var V=0;V<F.length;V++){var P=F[V];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,F,V){return F&&L(b.prototype,F),V&&L(b,V),b}}(),l=i(0),c=p(l),f=i(5),d=p(f),v=i(9),g=p(v);function p(L){return L&&L.__esModule?L:{default:L}}function y(L,b){if(!(L instanceof b))throw new TypeError("Cannot call a class as a function")}function T(L,b){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:L}function S(L,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);L.prototype=Object.create(b&&b.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(L,b):L.__proto__=b)}var w=function(L){S(b,L);function b(F,V){y(this,b);var P=T(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,F,V));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(d.default.events.EDITOR_CHANGE,function(_,A,k,R){_!==d.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||R===d.default.sources.USER?P.record(A,k):P.transform(A))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return a(b,[{key:"change",value:function(V,P){if(this.stack[V].length!==0){var _=this.stack[V].pop();this.stack[P].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[V],d.default.sources.USER),this.ignoreChange=!1;var A=I(_[V]);this.quill.setSelection(A)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(V,P){if(V.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(P),A=Date.now();if(this.lastRecorded+this.options.delay>A&&this.stack.undo.length>0){var k=this.stack.undo.pop();_=_.compose(k.undo),V=k.redo.compose(V)}else this.lastRecorded=A;this.stack.undo.push({redo:V,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(V){this.stack.undo.forEach(function(P){P.undo=V.transform(P.undo,!0),P.redo=V.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=V.transform(P.undo,!0),P.redo=V.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(g.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function E(L){var b=L.ops[L.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(F){return c.default.query(F,c.default.Scope.BLOCK)!=null}):!1}function I(L){var b=L.reduce(function(V,P){return V+=P.delete||0,V},0),F=L.length()-b;return E(L)&&(F-=1),F}n.default=w,n.getLastChangeIndex=I},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function B(z,ee){for(var X=0;X<ee.length;X++){var H=ee[X];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(z,H.key,H)}}return function(z,ee,X){return ee&&B(z.prototype,ee),X&&B(z,X),z}}(),l=function B(z,ee,X){z===null&&(z=Function.prototype);var H=Object.getOwnPropertyDescriptor(z,ee);if(H===void 0){var Y=Object.getPrototypeOf(z);return Y===null?void 0:B(Y,ee,X)}else{if("value"in H)return H.value;var ne=H.get;return ne===void 0?void 0:ne.call(X)}},c=i(3),f=A(c),d=i(2),v=A(d),g=i(8),p=A(g),y=i(23),T=A(y),S=i(34),w=A(S),E=i(59),I=A(E),L=i(60),b=A(L),F=i(28),V=A(F),P=i(61),_=A(P);function A(B){return B&&B.__esModule?B:{default:B}}function k(B,z){if(!(B instanceof z))throw new TypeError("Cannot call a class as a function")}function R(B,z){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:B}function O(B,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);B.prototype=Object.create(z&&z.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(B,z):B.__proto__=z)}var N=[!1,"center","right","justify"],$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Q=[!1,"serif","monospace"],se=["1","2","3",!1],Z=["small",!1,"large","huge"],re=function(B){O(z,B);function z(ee,X){k(this,z);var H=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ee,X)),Y=function ne(ie){if(!document.body.contains(ee.root))return document.body.removeEventListener("click",ne);H.tooltip!=null&&!H.tooltip.root.contains(ie.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(fe){fe.container.contains(ie.target)||fe.close()})};return ee.emitter.listenDOM("click",document.body,Y),H}return a(z,[{key:"addModule",value:function(X){var H=l(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,X);return X==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(X,H){X.forEach(function(Y){var ne=Y.getAttribute("class")||"";ne.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),H[ie]!=null))if(ie==="direction")Y.innerHTML=H[ie][""]+H[ie].rtl;else if(typeof H[ie]=="string")Y.innerHTML=H[ie];else{var fe=Y.value||"";fe!=null&&H[ie][fe]&&(Y.innerHTML=H[ie][fe])}})})}},{key:"buildPickers",value:function(X,H){var Y=this;this.pickers=X.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&M(ie,N),new b.default(ie,H.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var fe=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&M(ie,$,fe==="background"?"#ffffff":"#000000"),new I.default(ie,H[fe])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?M(ie,Q):ie.classList.contains("ql-header")?M(ie,se):ie.classList.contains("ql-size")&&M(ie,Z)),new V.default(ie)});var ne=function(){Y.pickers.forEach(function(fe){fe.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,ne)}}]),z}(w.default);re.DEFAULTS=(0,f.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,ee=this.container.querySelector("input.ql-image[type=file]");ee==null&&(ee=document.createElement("input"),ee.setAttribute("type","file"),ee.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ee.classList.add("ql-image"),ee.addEventListener("change",function(){if(ee.files!=null&&ee.files[0]!=null){var X=new FileReader;X.onload=function(H){var Y=z.quill.getSelection(!0);z.quill.updateContents(new v.default().retain(Y.index).delete(Y.length).insert({image:H.target.result}),p.default.sources.USER),z.quill.setSelection(Y.index+1,p.default.sources.SILENT),ee.value=""},X.readAsDataURL(ee.files[0])}}),this.container.appendChild(ee)),ee.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var G=function(B){O(z,B);function z(ee,X){k(this,z);var H=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ee,X));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return a(z,[{key:"listen",value:function(){var X=this;this.textbox.addEventListener("keydown",function(H){T.default.match(H,"enter")?(X.save(),H.preventDefault()):T.default.match(H,"escape")&&(X.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:X!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+X)||""),this.root.setAttribute("data-mode",X)}},{key:"restoreFocus",value:function(){var X=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=X}},{key:"save",value:function(){var X=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",X,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",X,p.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":X=W(X);case"formula":{if(!X)break;var Y=this.quill.getSelection(!0);if(Y!=null){var ne=Y.index+Y.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),X,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",p.default.sources.USER),this.quill.setSelection(ne+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z}(_.default);function W(B){var z=B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=B.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":B}function M(B,z){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(X){var H=document.createElement("option");X===ee?H.setAttribute("selected","selected"):H.setAttribute("value",X),B.appendChild(H)})}n.BaseTooltip=G,n.default=re},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},l.prototype.contains=function(c){for(var f,d=this.iterator();f=d();)if(f===c)return!0;return!1},l.prototype.insertBefore=function(c,f){c&&(c.next=f,f!=null?(c.prev=f.prev,f.prev!=null&&(f.prev.next=c),f.prev=c,f===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},l.prototype.offset=function(c){for(var f=0,d=this.head;d!=null;){if(d===c)return f;f+=d.length(),d=d.next}return-1},l.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},l.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var f=c;return c!=null&&(c=c.next),f}},l.prototype.find=function(c,f){f===void 0&&(f=!1);for(var d,v=this.iterator();d=v();){var g=d.length();if(c<g||f&&c===g&&(d.next==null||d.next.length()!==0))return[d,c];c-=g}return[null,0]},l.prototype.forEach=function(c){for(var f,d=this.iterator();f=d();)c(f)},l.prototype.forEachAt=function(c,f,d){if(!(f<=0))for(var v=this.find(c),g=v[0],p=v[1],y,T=c-p,S=this.iterator(g);(y=S())&&T<c+f;){var w=y.length();c>T?d(y,c-T,Math.min(f,T+w-c)):d(y,0,Math.min(w,c+f-T)),T+=w}},l.prototype.map=function(c){return this.reduce(function(f,d){return f.push(c(d)),f},[])},l.prototype.reduce=function(c,f){for(var d,v=this.iterator();d=v();)f=c(f,d);return f},l}();n.default=a},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var T in y)y.hasOwnProperty(T)&&(p[T]=y[T])};return function(p,y){g(p,y);function T(){this.constructor=p}p.prototype=y===null?Object.create(y):(T.prototype=y.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(17),c=i(1),f={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,v=function(g){a(p,g);function p(y){var T=g.call(this,y)||this;return T.scroll=T,T.observer=new MutationObserver(function(S){T.update(S)}),T.observer.observe(T.domNode,f),T.attach(),T}return p.prototype.detach=function(){g.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(y,T){this.update(),y===0&&T===this.length()?this.children.forEach(function(S){S.remove()}):g.prototype.deleteAt.call(this,y,T)},p.prototype.formatAt=function(y,T,S,w){this.update(),g.prototype.formatAt.call(this,y,T,S,w)},p.prototype.insertAt=function(y,T,S){this.update(),g.prototype.insertAt.call(this,y,T,S)},p.prototype.optimize=function(y,T){var S=this;y===void 0&&(y=[]),T===void 0&&(T={}),g.prototype.optimize.call(this,T);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)y.push(w.pop());for(var E=function(F,V){V===void 0&&(V=!0),!(F==null||F===S)&&F.domNode.parentNode!=null&&(F.domNode[c.DATA_KEY].mutations==null&&(F.domNode[c.DATA_KEY].mutations=[]),V&&E(F.parent))},I=function(F){F.domNode[c.DATA_KEY]==null||F.domNode[c.DATA_KEY].mutations==null||(F instanceof l.default&&F.children.forEach(I),F.optimize(T))},L=y,b=0;L.length>0;b+=1){if(b>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(L.forEach(function(F){var V=c.find(F.target,!0);V!=null&&(V.domNode===F.target&&(F.type==="childList"?(E(c.find(F.previousSibling,!1)),[].forEach.call(F.addedNodes,function(P){var _=c.find(P,!1);E(_,!1),_ instanceof l.default&&_.children.forEach(function(A){E(A,!1)})})):F.type==="attributes"&&E(V.prev)),E(V))}),this.children.forEach(I),L=[].slice.call(this.observer.takeRecords()),w=L.slice();w.length>0;)y.push(w.pop())}},p.prototype.update=function(y,T){var S=this;T===void 0&&(T={}),y=y||this.observer.takeRecords(),y.map(function(w){var E=c.find(w.target,!0);return E==null?null:E.domNode[c.DATA_KEY].mutations==null?(E.domNode[c.DATA_KEY].mutations=[w],E):(E.domNode[c.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===S||w.domNode[c.DATA_KEY]==null||w.update(w.domNode[c.DATA_KEY].mutations||[],T)}),this.domNode[c.DATA_KEY].mutations!=null&&g.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,T),this.optimize(y,T)},p.blotName="scroll",p.defaultChild="block",p.scope=c.Scope.BLOCK_BLOT,p.tagName="DIV",p}(l.default);n.default=v},function(t,n,i){var a=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var y in p)p.hasOwnProperty(y)&&(g[y]=p[y])};return function(g,p){v(g,p);function y(){this.constructor=g}g.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),c=i(1);function f(v,g){if(Object.keys(v).length!==Object.keys(g).length)return!1;for(var p in v)if(v[p]!==g[p])return!1;return!0}var d=function(v){a(g,v);function g(){return v!==null&&v.apply(this,arguments)||this}return g.formats=function(p){if(p.tagName!==g.tagName)return v.formats.call(this,p)},g.prototype.format=function(p,y){var T=this;p===this.statics.blotName&&!y?(this.children.forEach(function(S){S instanceof l.default||(S=S.wrap(g.blotName,!0)),T.attributes.copy(S)}),this.unwrap()):v.prototype.format.call(this,p,y)},g.prototype.formatAt=function(p,y,T,S){if(this.formats()[T]!=null||c.query(T,c.Scope.ATTRIBUTE)){var w=this.isolate(p,y);w.format(T,S)}else v.prototype.formatAt.call(this,p,y,T,S)},g.prototype.optimize=function(p){v.prototype.optimize.call(this,p);var y=this.formats();if(Object.keys(y).length===0)return this.unwrap();var T=this.next;T instanceof g&&T.prev===this&&f(y,T.formats())&&(T.moveChildren(this),T.remove())},g.blotName="inline",g.scope=c.Scope.INLINE_BLOT,g.tagName="SPAN",g}(l.default);n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),c=i(1),f=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.formats=function(g){var p=c.query(v.blotName).tagName;if(g.tagName!==p)return d.formats.call(this,g)},v.prototype.format=function(g,p){c.query(g,c.Scope.BLOCK)!=null&&(g===this.statics.blotName&&!p?this.replaceWith(v.blotName):d.prototype.format.call(this,g,p))},v.prototype.formatAt=function(g,p,y,T){c.query(y,c.Scope.BLOCK)!=null?this.format(y,T):d.prototype.formatAt.call(this,g,p,y,T)},v.prototype.insertAt=function(g,p,y){if(y==null||c.query(p,c.Scope.INLINE)!=null)d.prototype.insertAt.call(this,g,p,y);else{var T=this.split(g),S=c.create(p,y);T.parent.insertBefore(S,T)}},v.prototype.update=function(g,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,g,p)},v.blotName="block",v.scope=c.Scope.BLOCK_BLOT,v.tagName="P",v}(l.default);n.default=f},function(t,n,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)v.hasOwnProperty(g)&&(d[g]=v[g])};return function(d,v){f(d,v);function g(){this.constructor=d}d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),c=function(f){a(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(v){},d.prototype.format=function(v,g){f.prototype.formatAt.call(this,0,this.length(),v,g)},d.prototype.formatAt=function(v,g,p,y){v===0&&g===this.length()?this.format(p,y):f.prototype.formatAt.call(this,v,g,p,y)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(l.default);n.default=c},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),c=i(1),f=function(d){a(v,d);function v(g){var p=d.call(this,g)||this;return p.text=p.statics.value(p.domNode),p}return v.create=function(g){return document.createTextNode(g)},v.value=function(g){var p=g.data;return p.normalize&&(p=p.normalize()),p},v.prototype.deleteAt=function(g,p){this.domNode.data=this.text=this.text.slice(0,g)+this.text.slice(g+p)},v.prototype.index=function(g,p){return this.domNode===g?p:-1},v.prototype.insertAt=function(g,p,y){y==null?(this.text=this.text.slice(0,g)+p+this.text.slice(g),this.domNode.data=this.text):d.prototype.insertAt.call(this,g,p,y)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(g){d.prototype.optimize.call(this,g),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(g,p){return[this.domNode,g]},v.prototype.split=function(g,p){if(p===void 0&&(p=!1),!p){if(g===0)return this;if(g===this.length())return this.next}var y=c.create(this.domNode.splitText(g));return this.parent.insertBefore(y,this.next),this.text=this.statics.value(this.domNode),y},v.prototype.update=function(g,p){var y=this;g.some(function(T){return T.type==="characterData"&&T.target===y.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=c.Scope.INLINE_BLOT,v}(l.default);n.default=f},function(t,n,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,f){return arguments.length>1&&!this.contains(c)==!f?f:l.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,f){return f=f||0,this.substr(f,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,f){var d=this.toString();(typeof f!="number"||!isFinite(f)||Math.floor(f)!==f||f>d.length)&&(f=d.length),f-=c.length;var v=d.indexOf(c,f);return v!==-1&&v===f}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(f){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof f!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),v=d.length>>>0,g=arguments[1],p,y=0;y<v;y++)if(p=d[y],f.call(g,p,y,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var i=-1,a=1,l=0;function c(b,F,V){if(b==F)return b?[[l,b]]:[];(V<0||b.length<V)&&(V=null);var P=g(b,F),_=b.substring(0,P);b=b.substring(P),F=F.substring(P),P=p(b,F);var A=b.substring(b.length-P);b=b.substring(0,b.length-P),F=F.substring(0,F.length-P);var k=f(b,F);return _&&k.unshift([l,_]),A&&k.push([l,A]),T(k),V!=null&&(k=E(k,V)),k=I(k),k}function f(b,F){var V;if(!b)return[[a,F]];if(!F)return[[i,b]];var P=b.length>F.length?b:F,_=b.length>F.length?F:b,A=P.indexOf(_);if(A!=-1)return V=[[a,P.substring(0,A)],[l,_],[a,P.substring(A+_.length)]],b.length>F.length&&(V[0][0]=V[2][0]=i),V;if(_.length==1)return[[i,b],[a,F]];var k=y(b,F);if(k){var R=k[0],O=k[1],N=k[2],$=k[3],Q=k[4],se=c(R,N),Z=c(O,$);return se.concat([[l,Q]],Z)}return d(b,F)}function d(b,F){for(var V=b.length,P=F.length,_=Math.ceil((V+P)/2),A=_,k=2*_,R=new Array(k),O=new Array(k),N=0;N<k;N++)R[N]=-1,O[N]=-1;R[A+1]=0,O[A+1]=0;for(var $=V-P,Q=$%2!=0,se=0,Z=0,re=0,G=0,W=0;W<_;W++){for(var M=-W+se;M<=W-Z;M+=2){var B=A+M,z;M==-W||M!=W&&R[B-1]<R[B+1]?z=R[B+1]:z=R[B-1]+1;for(var ee=z-M;z<V&&ee<P&&b.charAt(z)==F.charAt(ee);)z++,ee++;if(R[B]=z,z>V)Z+=2;else if(ee>P)se+=2;else if(Q){var X=A+$-M;if(X>=0&&X<k&&O[X]!=-1){var H=V-O[X];if(z>=H)return v(b,F,z,ee)}}}for(var Y=-W+re;Y<=W-G;Y+=2){var X=A+Y,H;Y==-W||Y!=W&&O[X-1]<O[X+1]?H=O[X+1]:H=O[X-1]+1;for(var ne=H-Y;H<V&&ne<P&&b.charAt(V-H-1)==F.charAt(P-ne-1);)H++,ne++;if(O[X]=H,H>V)G+=2;else if(ne>P)re+=2;else if(!Q){var B=A+$-Y;if(B>=0&&B<k&&R[B]!=-1){var z=R[B],ee=A+z-B;if(H=V-H,z>=H)return v(b,F,z,ee)}}}}return[[i,b],[a,F]]}function v(b,F,V,P){var _=b.substring(0,V),A=F.substring(0,P),k=b.substring(V),R=F.substring(P),O=c(_,A),N=c(k,R);return O.concat(N)}function g(b,F){if(!b||!F||b.charAt(0)!=F.charAt(0))return 0;for(var V=0,P=Math.min(b.length,F.length),_=P,A=0;V<_;)b.substring(A,_)==F.substring(A,_)?(V=_,A=V):P=_,_=Math.floor((P-V)/2+V);return _}function p(b,F){if(!b||!F||b.charAt(b.length-1)!=F.charAt(F.length-1))return 0;for(var V=0,P=Math.min(b.length,F.length),_=P,A=0;V<_;)b.substring(b.length-_,b.length-A)==F.substring(F.length-_,F.length-A)?(V=_,A=V):P=_,_=Math.floor((P-V)/2+V);return _}function y(b,F){var V=b.length>F.length?b:F,P=b.length>F.length?F:b;if(V.length<4||P.length*2<V.length)return null;function _(Z,re,G){for(var W=Z.substring(G,G+Math.floor(Z.length/4)),M=-1,B="",z,ee,X,H;(M=re.indexOf(W,M+1))!=-1;){var Y=g(Z.substring(G),re.substring(M)),ne=p(Z.substring(0,G),re.substring(0,M));B.length<ne+Y&&(B=re.substring(M-ne,M)+re.substring(M,M+Y),z=Z.substring(0,G-ne),ee=Z.substring(G+Y),X=re.substring(0,M-ne),H=re.substring(M+Y))}return B.length*2>=Z.length?[z,ee,X,H,B]:null}var A=_(V,P,Math.ceil(V.length/4)),k=_(V,P,Math.ceil(V.length/2)),R;if(!A&&!k)return null;k?A?R=A[4].length>k[4].length?A:k:R=k:R=A;var O,N,$,Q;b.length>F.length?(O=R[0],N=R[1],$=R[2],Q=R[3]):($=R[0],Q=R[1],O=R[2],N=R[3]);var se=R[4];return[O,N,$,Q,se]}function T(b){b.push([l,""]);for(var F=0,V=0,P=0,_="",A="",k;F<b.length;)switch(b[F][0]){case a:P++,A+=b[F][1],F++;break;case i:V++,_+=b[F][1],F++;break;case l:V+P>1?(V!==0&&P!==0&&(k=g(A,_),k!==0&&(F-V-P>0&&b[F-V-P-1][0]==l?b[F-V-P-1][1]+=A.substring(0,k):(b.splice(0,0,[l,A.substring(0,k)]),F++),A=A.substring(k),_=_.substring(k)),k=p(A,_),k!==0&&(b[F][1]=A.substring(A.length-k)+b[F][1],A=A.substring(0,A.length-k),_=_.substring(0,_.length-k))),V===0?b.splice(F-P,V+P,[a,A]):P===0?b.splice(F-V,V+P,[i,_]):b.splice(F-V-P,V+P,[i,_],[a,A]),F=F-V-P+(V?1:0)+(P?1:0)+1):F!==0&&b[F-1][0]==l?(b[F-1][1]+=b[F][1],b.splice(F,1)):F++,P=0,V=0,_="",A="";break}b[b.length-1][1]===""&&b.pop();var R=!1;for(F=1;F<b.length-1;)b[F-1][0]==l&&b[F+1][0]==l&&(b[F][1].substring(b[F][1].length-b[F-1][1].length)==b[F-1][1]?(b[F][1]=b[F-1][1]+b[F][1].substring(0,b[F][1].length-b[F-1][1].length),b[F+1][1]=b[F-1][1]+b[F+1][1],b.splice(F-1,1),R=!0):b[F][1].substring(0,b[F+1][1].length)==b[F+1][1]&&(b[F-1][1]+=b[F+1][1],b[F][1]=b[F][1].substring(b[F+1][1].length)+b[F+1][1],b.splice(F+1,1),R=!0)),F++;R&&T(b)}var S=c;S.INSERT=a,S.DELETE=i,S.EQUAL=l,t.exports=S;function w(b,F){if(F===0)return[l,b];for(var V=0,P=0;P<b.length;P++){var _=b[P];if(_[0]===i||_[0]===l){var A=V+_[1].length;if(F===A)return[P+1,b];if(F<A){b=b.slice();var k=F-V,R=[_[0],_[1].slice(0,k)],O=[_[0],_[1].slice(k)];return b.splice(P,1,R,O),[P+1,b]}else V=A}}throw new Error("cursor_pos is out of bounds!")}function E(b,F){var V=w(b,F),P=V[1],_=V[0],A=P[_],k=P[_+1];if(A==null)return b;if(A[0]!==l)return b;if(k!=null&&A[1]+k[1]===k[1]+A[1])return P.splice(_,2,k,A),L(P,_,2);if(k!=null&&k[1].indexOf(A[1])===0){P.splice(_,2,[k[0],A[1]],[0,A[1]]);var R=k[1].slice(A[1].length);return R.length>0&&P.splice(_+2,0,[k[0],R]),L(P,_,3)}else return b}function I(b){for(var F=!1,V=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},P=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},_=2;_<b.length;_+=1)b[_-2][0]===l&&P(b[_-2][1])&&b[_-1][0]===i&&V(b[_-1][1])&&b[_][0]===a&&V(b[_][1])&&(F=!0,b[_-1][1]=b[_-2][1].slice(-1)+b[_-1][1],b[_][1]=b[_-2][1].slice(-1)+b[_][1],b[_-2][1]=b[_-2][1].slice(0,-1));if(!F)return b;for(var A=[],_=0;_<b.length;_+=1)b[_][1].length>0&&A.push(b[_]);return A}function L(b,F,V){for(var P=F+V-1;P>=0&&P>=F-1;P--)if(P+1<b.length){var _=b[P],A=b[P+1];_[0]===A[1]&&b.splice(P,2,[_[0],_[1]+A[1]])}return b}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(a){var l=[];for(var c in a)l.push(c);return l}},function(t,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=i?a:l,n.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}n.unsupported=l;function l(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(t,n){var i=Object.prototype.hasOwnProperty,a="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1));function c(d,v,g){this.fn=d,this.context=v,this.once=g||!1}function f(){this._events=new l,this._eventsCount=0}f.prototype.eventNames=function(){var v=[],g,p;if(this._eventsCount===0)return v;for(p in g=this._events)i.call(g,p)&&v.push(a?p.slice(1):p);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(g)):v},f.prototype.listeners=function(v,g){var p=a?a+v:v,y=this._events[p];if(g)return!!y;if(!y)return[];if(y.fn)return[y.fn];for(var T=0,S=y.length,w=new Array(S);T<S;T++)w[T]=y[T].fn;return w},f.prototype.emit=function(v,g,p,y,T,S){var w=a?a+v:v;if(!this._events[w])return!1;var E=this._events[w],I=arguments.length,L,b;if(E.fn){switch(E.once&&this.removeListener(v,E.fn,void 0,!0),I){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,p),!0;case 4:return E.fn.call(E.context,g,p,y),!0;case 5:return E.fn.call(E.context,g,p,y,T),!0;case 6:return E.fn.call(E.context,g,p,y,T,S),!0}for(b=1,L=new Array(I-1);b<I;b++)L[b-1]=arguments[b];E.fn.apply(E.context,L)}else{var F=E.length,V;for(b=0;b<F;b++)switch(E[b].once&&this.removeListener(v,E[b].fn,void 0,!0),I){case 1:E[b].fn.call(E[b].context);break;case 2:E[b].fn.call(E[b].context,g);break;case 3:E[b].fn.call(E[b].context,g,p);break;case 4:E[b].fn.call(E[b].context,g,p,y);break;default:if(!L)for(V=1,L=new Array(I-1);V<I;V++)L[V-1]=arguments[V];E[b].fn.apply(E[b].context,L)}}return!0},f.prototype.on=function(v,g,p){var y=new c(g,p||this),T=a?a+v:v;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],y]:this._events[T].push(y):(this._events[T]=y,this._eventsCount++),this},f.prototype.once=function(v,g,p){var y=new c(g,p||this,!0),T=a?a+v:v;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],y]:this._events[T].push(y):(this._events[T]=y,this._eventsCount++),this},f.prototype.removeListener=function(v,g,p,y){var T=a?a+v:v;if(!this._events[T])return this;if(!g)return--this._eventsCount===0?this._events=new l:delete this._events[T],this;var S=this._events[T];if(S.fn)S.fn===g&&(!y||S.once)&&(!p||S.context===p)&&(--this._eventsCount===0?this._events=new l:delete this._events[T]);else{for(var w=0,E=[],I=S.length;w<I;w++)(S[w].fn!==g||y&&!S[w].once||p&&S[w].context!==p)&&E.push(S[w]);E.length?this._events[T]=E.length===1?E[0]:E:--this._eventsCount===0?this._events=new l:delete this._events[T]}return this},f.prototype.removeAllListeners=function(v){var g;return v?(g=a?a+v:v,this._events[g]&&(--this._eventsCount===0?this._events=new l:delete this._events[g])):(this._events=new l,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=a,f.EventEmitter=f,typeof t<"u"&&(t.exports=f)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},l=function(){function ue(de,Ee){var be=[],ge=!0,$e=!1,Fe=void 0;try{for(var Be=de[Symbol.iterator](),We;!(ge=(We=Be.next()).done)&&(be.push(We.value),!(Ee&&be.length===Ee));ge=!0);}catch(Xe){$e=!0,Fe=Xe}finally{try{!ge&&Be.return&&Be.return()}finally{if($e)throw Fe}}return be}return function(de,Ee){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return ue(de,Ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function ue(de,Ee){for(var be=0;be<Ee.length;be++){var ge=Ee[be];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(de,ge.key,ge)}}return function(de,Ee,be){return Ee&&ue(de.prototype,Ee),be&&ue(de,be),de}}(),f=i(3),d=O(f),v=i(2),g=O(v),p=i(0),y=O(p),T=i(5),S=O(T),w=i(10),E=O(w),I=i(9),L=O(I),b=i(36),F=i(37),V=i(13),P=O(V),_=i(26),A=i(38),k=i(39),R=i(40);function O(ue){return ue&&ue.__esModule?ue:{default:ue}}function N(ue,de,Ee){return de in ue?Object.defineProperty(ue,de,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):ue[de]=Ee,ue}function $(ue,de){if(!(ue instanceof de))throw new TypeError("Cannot call a class as a function")}function Q(ue,de){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:ue}function se(ue,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);ue.prototype=Object.create(de&&de.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,de):ue.__proto__=de)}var Z=(0,E.default)("quill:clipboard"),re="__ql-matcher",G=[[Node.TEXT_NODE,et],[Node.TEXT_NODE,Oe],["br",ye],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,De],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Ue],["li",Re],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",ke]],W=[b.AlignAttribute,A.DirectionAttribute].reduce(function(ue,de){return ue[de.keyName]=de,ue},{}),M=[b.AlignStyle,F.BackgroundStyle,_.ColorStyle,A.DirectionStyle,k.FontStyle,R.SizeStyle].reduce(function(ue,de){return ue[de.keyName]=de,ue},{}),B=function(ue){se(de,ue);function de(Ee,be){$(this,de);var ge=Q(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Ee,be));return ge.quill.root.addEventListener("paste",ge.onPaste.bind(ge)),ge.container=ge.quill.addContainer("ql-clipboard"),ge.container.setAttribute("contenteditable",!0),ge.container.setAttribute("tabindex",-1),ge.matchers=[],G.concat(ge.options.matchers).forEach(function($e){var Fe=l($e,2),Be=Fe[0],We=Fe[1];!be.matchVisual&&We===De||ge.addMatcher(Be,We)}),ge}return c(de,[{key:"addMatcher",value:function(be,ge){this.matchers.push([be,ge])}},{key:"convert",value:function(be){if(typeof be=="string")return this.container.innerHTML=be.replace(/\>\r?\n +\</g,"><"),this.convert();var ge=this.quill.getFormat(this.quill.selection.savedRange.index);if(ge[P.default.blotName]){var $e=this.container.innerText;return this.container.innerHTML="",new g.default().insert($e,N({},P.default.blotName,ge[P.default.blotName]))}var Fe=this.prepareMatching(),Be=l(Fe,2),We=Be[0],Xe=Be[1],Ze=Y(this.container,We,Xe);return X(Ze,`
`)&&Ze.ops[Ze.ops.length-1].attributes==null&&(Ze=Ze.compose(new g.default().retain(Ze.length()-1).delete(1))),Z.log("convert",this.container.innerHTML,Ze),this.container.innerHTML="",Ze}},{key:"dangerouslyPasteHTML",value:function(be,ge){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.default.sources.API;if(typeof be=="string")this.quill.setContents(this.convert(be),ge),this.quill.setSelection(0,S.default.sources.SILENT);else{var Fe=this.convert(ge);this.quill.updateContents(new g.default().retain(be).concat(Fe),$e),this.quill.setSelection(be+Fe.length(),S.default.sources.SILENT)}}},{key:"onPaste",value:function(be){var ge=this;if(!(be.defaultPrevented||!this.quill.isEnabled())){var $e=this.quill.getSelection(),Fe=new g.default().retain($e.index),Be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(S.default.sources.SILENT),setTimeout(function(){Fe=Fe.concat(ge.convert()).delete($e.length),ge.quill.updateContents(Fe,S.default.sources.USER),ge.quill.setSelection(Fe.length()-$e.length,S.default.sources.SILENT),ge.quill.scrollingContainer.scrollTop=Be,ge.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var be=this,ge=[],$e=[];return this.matchers.forEach(function(Fe){var Be=l(Fe,2),We=Be[0],Xe=Be[1];switch(We){case Node.TEXT_NODE:$e.push(Xe);break;case Node.ELEMENT_NODE:ge.push(Xe);break;default:[].forEach.call(be.container.querySelectorAll(We),function(Ze){Ze[re]=Ze[re]||[],Ze[re].push(Xe)});break}}),[ge,$e]}}]),de}(L.default);B.DEFAULTS={matchers:[],matchVisual:!0};function z(ue,de,Ee){return(typeof de>"u"?"undefined":a(de))==="object"?Object.keys(de).reduce(function(be,ge){return z(be,ge,de[ge])},ue):ue.reduce(function(be,ge){return ge.attributes&&ge.attributes[de]?be.push(ge):be.insert(ge.insert,(0,d.default)({},N({},de,Ee),ge.attributes))},new g.default)}function ee(ue){if(ue.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return ue[de]||(ue[de]=window.getComputedStyle(ue))}function X(ue,de){for(var Ee="",be=ue.ops.length-1;be>=0&&Ee.length<de.length;--be){var ge=ue.ops[be];if(typeof ge.insert!="string")break;Ee=ge.insert+Ee}return Ee.slice(-1*de.length)===de}function H(ue){if(ue.childNodes.length===0)return!1;var de=ee(ue);return["block","list-item"].indexOf(de.display)>-1}function Y(ue,de,Ee){return ue.nodeType===ue.TEXT_NODE?Ee.reduce(function(be,ge){return ge(ue,be)},new g.default):ue.nodeType===ue.ELEMENT_NODE?[].reduce.call(ue.childNodes||[],function(be,ge){var $e=Y(ge,de,Ee);return ge.nodeType===ue.ELEMENT_NODE&&($e=de.reduce(function(Fe,Be){return Be(ge,Fe)},$e),$e=(ge[re]||[]).reduce(function(Fe,Be){return Be(ge,Fe)},$e)),be.concat($e)},new g.default):new g.default}function ne(ue,de,Ee){return z(Ee,ue,!0)}function ie(ue,de){var Ee=y.default.Attributor.Attribute.keys(ue),be=y.default.Attributor.Class.keys(ue),ge=y.default.Attributor.Style.keys(ue),$e={};return Ee.concat(be).concat(ge).forEach(function(Fe){var Be=y.default.query(Fe,y.default.Scope.ATTRIBUTE);Be!=null&&($e[Be.attrName]=Be.value(ue),$e[Be.attrName])||(Be=W[Fe],Be!=null&&(Be.attrName===Fe||Be.keyName===Fe)&&($e[Be.attrName]=Be.value(ue)||void 0),Be=M[Fe],Be!=null&&(Be.attrName===Fe||Be.keyName===Fe)&&(Be=M[Fe],$e[Be.attrName]=Be.value(ue)||void 0))}),Object.keys($e).length>0&&(de=z(de,$e)),de}function fe(ue,de){var Ee=y.default.query(ue);if(Ee==null)return de;if(Ee.prototype instanceof y.default.Embed){var be={},ge=Ee.value(ue);ge!=null&&(be[Ee.blotName]=ge,de=new g.default().insert(be,Ee.formats(ue)))}else typeof Ee.formats=="function"&&(de=z(de,Ee.blotName,Ee.formats(ue)));return de}function ye(ue,de){return X(de,`
`)||de.insert(`
`),de}function ke(){return new g.default}function Re(ue,de){var Ee=y.default.query(ue);if(Ee==null||Ee.blotName!=="list-item"||!X(de,`
`))return de;for(var be=-1,ge=ue.parentNode;!ge.classList.contains("ql-clipboard");)(y.default.query(ge)||{}).blotName==="list"&&(be+=1),ge=ge.parentNode;return be<=0?de:de.compose(new g.default().retain(de.length()-1).retain(1,{indent:be}))}function Oe(ue,de){return X(de,`
`)||(H(ue)||de.length()>0&&ue.nextSibling&&H(ue.nextSibling))&&de.insert(`
`),de}function De(ue,de){if(H(ue)&&ue.nextElementSibling!=null&&!X(de,`

`)){var Ee=ue.offsetHeight+parseFloat(ee(ue).marginTop)+parseFloat(ee(ue).marginBottom);ue.nextElementSibling.offsetTop>ue.offsetTop+Ee*1.5&&de.insert(`
`)}return de}function Ue(ue,de){var Ee={},be=ue.style||{};return be.fontStyle&&ee(ue).fontStyle==="italic"&&(Ee.italic=!0),be.fontWeight&&(ee(ue).fontWeight.startsWith("bold")||parseInt(ee(ue).fontWeight)>=700)&&(Ee.bold=!0),Object.keys(Ee).length>0&&(de=z(de,Ee)),parseFloat(be.textIndent||0)>0&&(de=new g.default().insert("	").concat(de)),de}function et(ue,de){var Ee=ue.data;if(ue.parentNode.tagName==="O:P")return de.insert(Ee.trim());if(Ee.trim().length===0&&ue.parentNode.classList.contains("ql-clipboard"))return de;if(!ee(ue.parentNode).whiteSpace.startsWith("pre")){var be=function($e,Fe){return Fe=Fe.replace(/[^\u00a0]/g,""),Fe.length<1&&$e?" ":Fe};Ee=Ee.replace(/\r\n/g," ").replace(/\n/g," "),Ee=Ee.replace(/\s\s+/g,be.bind(be,!0)),(ue.previousSibling==null&&H(ue.parentNode)||ue.previousSibling!=null&&H(ue.previousSibling))&&(Ee=Ee.replace(/^\s+/,be.bind(be,!1))),(ue.nextSibling==null&&H(ue.parentNode)||ue.nextSibling!=null&&H(ue.nextSibling))&&(Ee=Ee.replace(/\s+$/,be.bind(be,!1)))}return de.insert(Ee)}n.default=B,n.matchAttributor=ie,n.matchBlot=fe,n.matchNewline=Oe,n.matchSpacing=De,n.matchText=et},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var I=w[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var I=Object.getOwnPropertyDescriptor(S,w);if(I===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:T(L,w,E)}else{if("value"in I)return I.value;var b=I.get;return b===void 0?void 0:b.call(E)}},c=i(6),f=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function p(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){p(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"optimize",value:function(E){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,E),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),S}(f.default);y.blotName="bold",y.tagName=["STRONG","B"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function R(O,N){var $=[],Q=!0,se=!1,Z=void 0;try{for(var re=O[Symbol.iterator](),G;!(Q=(G=re.next()).done)&&($.push(G.value),!(N&&$.length===N));Q=!0);}catch(W){se=!0,Z=W}finally{try{!Q&&re.return&&re.return()}finally{if(se)throw Z}}return $}return function(O,N){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return R(O,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function R(O,N){for(var $=0;$<N.length;$++){var Q=N[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(O,Q.key,Q)}}return function(O,N,$){return N&&R(O.prototype,N),$&&R(O,$),O}}(),c=i(2),f=E(c),d=i(0),v=E(d),g=i(5),p=E(g),y=i(10),T=E(y),S=i(9),w=E(S);function E(R){return R&&R.__esModule?R:{default:R}}function I(R,O,N){return O in R?Object.defineProperty(R,O,{value:N,enumerable:!0,configurable:!0,writable:!0}):R[O]=N,R}function L(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function b(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:R}function F(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}var V=(0,T.default)("quill:toolbar"),P=function(R){F(O,R);function O(N,$){L(this,O);var Q=b(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,N,$));if(Array.isArray(Q.options.container)){var se=document.createElement("div");A(se,Q.options.container),N.container.parentNode.insertBefore(se,N.container),Q.container=se}else typeof Q.options.container=="string"?Q.container=document.querySelector(Q.options.container):Q.container=Q.options.container;if(!(Q.container instanceof HTMLElement)){var Z;return Z=V.error("Container required for toolbar",Q.options),b(Q,Z)}return Q.container.classList.add("ql-toolbar"),Q.controls=[],Q.handlers={},Object.keys(Q.options.handlers).forEach(function(re){Q.addHandler(re,Q.options.handlers[re])}),[].forEach.call(Q.container.querySelectorAll("button, select"),function(re){Q.attach(re)}),Q.quill.on(p.default.events.EDITOR_CHANGE,function(re,G){re===p.default.events.SELECTION_CHANGE&&Q.update(G)}),Q.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var re=Q.quill.selection.getRange(),G=a(re,1),W=G[0];Q.update(W)}),Q}return l(O,[{key:"addHandler",value:function($,Q){this.handlers[$]=Q}},{key:"attach",value:function($){var Q=this,se=[].find.call($.classList,function(re){return re.indexOf("ql-")===0});if(se){if(se=se.slice(3),$.tagName==="BUTTON"&&$.setAttribute("type","button"),this.handlers[se]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[se]==null){V.warn("ignoring attaching to disabled format",se,$);return}if(v.default.query(se)==null){V.warn("ignoring attaching to nonexistent format",se,$);return}}var Z=$.tagName==="SELECT"?"change":"click";$.addEventListener(Z,function(re){var G=void 0;if($.tagName==="SELECT"){if($.selectedIndex<0)return;var W=$.options[$.selectedIndex];W.hasAttribute("selected")?G=!1:G=W.value||!1}else $.classList.contains("ql-active")?G=!1:G=$.value||!$.hasAttribute("value"),re.preventDefault();Q.quill.focus();var M=Q.quill.selection.getRange(),B=a(M,1),z=B[0];if(Q.handlers[se]!=null)Q.handlers[se].call(Q,G);else if(v.default.query(se).prototype instanceof v.default.Embed){if(G=prompt("Enter "+se),!G)return;Q.quill.updateContents(new f.default().retain(z.index).delete(z.length).insert(I({},se,G)),p.default.sources.USER)}else Q.quill.format(se,G,p.default.sources.USER);Q.update(z)}),this.controls.push([se,$])}}},{key:"update",value:function($){var Q=$==null?{}:this.quill.getFormat($);this.controls.forEach(function(se){var Z=a(se,2),re=Z[0],G=Z[1];if(G.tagName==="SELECT"){var W=void 0;if($==null)W=null;else if(Q[re]==null)W=G.querySelector("option[selected]");else if(!Array.isArray(Q[re])){var M=Q[re];typeof M=="string"&&(M=M.replace(/\"/g,'\\"')),W=G.querySelector('option[value="'+M+'"]')}W==null?(G.value="",G.selectedIndex=-1):W.selected=!0}else if($==null)G.classList.remove("ql-active");else if(G.hasAttribute("value")){var B=Q[re]===G.getAttribute("value")||Q[re]!=null&&Q[re].toString()===G.getAttribute("value")||Q[re]==null&&!G.getAttribute("value");G.classList.toggle("ql-active",B)}else G.classList.toggle("ql-active",Q[re]!=null)})}}]),O}(w.default);P.DEFAULTS={};function _(R,O,N){var $=document.createElement("button");$.setAttribute("type","button"),$.classList.add("ql-"+O),N!=null&&($.value=N),R.appendChild($)}function A(R,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(N){var $=document.createElement("span");$.classList.add("ql-formats"),N.forEach(function(Q){if(typeof Q=="string")_($,Q);else{var se=Object.keys(Q)[0],Z=Q[se];Array.isArray(Z)?k($,se,Z):_($,se,Z)}}),R.appendChild($)})}function k(R,O,N){var $=document.createElement("select");$.classList.add("ql-"+O),N.forEach(function(Q){var se=document.createElement("option");Q!==!1?se.setAttribute("value",Q):se.setAttribute("selected","selected"),$.appendChild(se)}),R.appendChild($)}P.DEFAULTS={container:null,handlers:{clean:function(){var O=this,N=this.quill.getSelection();if(N!=null)if(N.length==0){var $=this.quill.getFormat();Object.keys($).forEach(function(Q){v.default.query(Q,v.default.Scope.INLINE)!=null&&O.quill.format(Q,!1)})}else this.quill.removeFormat(N,p.default.sources.USER)},direction:function(O){var N=this.quill.getFormat().align;O==="rtl"&&N==null?this.quill.format("align","right",p.default.sources.USER):!O&&N==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",O,p.default.sources.USER)},indent:function(O){var N=this.quill.getSelection(),$=this.quill.getFormat(N),Q=parseInt($.indent||0);if(O==="+1"||O==="-1"){var se=O==="+1"?1:-1;$.direction==="rtl"&&(se*=-1),this.quill.format("indent",Q+se,p.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,p.default.sources.USER)},list:function(O){var N=this.quill.getSelection(),$=this.quill.getFormat(N);O==="check"?$.list==="checked"||$.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",O,p.default.sources.USER)}}},n.default=P,n.addControls=A},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var I=w[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var I=Object.getOwnPropertyDescriptor(S,w);if(I===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:T(L,w,E)}else{if("value"in I)return I.value;var b=I.get;return b===void 0?void 0:b.call(E)}},c=i(28),f=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function p(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){p(S,T);function S(w,E){v(this,S);var I=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,w));return I.label.innerHTML=E,I.container.classList.add("ql-color-picker"),[].slice.call(I.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(L){L.classList.add("ql-primary")}),I}return a(S,[{key:"buildItem",value:function(E){var I=l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"buildItem",this).call(this,E);return I.style.backgroundColor=E.getAttribute("value")||"",I}},{key:"selectItem",value:function(E,I){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,E,I);var L=this.label.querySelector(".ql-color-label"),b=E&&E.getAttribute("data-value")||"";L&&(L.tagName==="line"?L.style.stroke=b:L.style.fill=b)}}]),S}(f.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var I=w[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var I=Object.getOwnPropertyDescriptor(S,w);if(I===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:T(L,w,E)}else{if("value"in I)return I.value;var b=I.get;return b===void 0?void 0:b.call(E)}},c=i(28),f=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function p(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){p(S,T);function S(w,E){v(this,S);var I=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,w));return I.container.classList.add("ql-icon-picker"),[].forEach.call(I.container.querySelectorAll(".ql-picker-item"),function(L){L.innerHTML=E[L.getAttribute("data-value")||""]}),I.defaultItem=I.container.querySelector(".ql-selected"),I.selectItem(I.defaultItem),I}return a(S,[{key:"selectItem",value:function(E,I){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,E,I),E=E||this.defaultItem,this.label.innerHTML=E.innerHTML}}]),S}(f.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function f(d,v){for(var g=0;g<v.length;g++){var p=v[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,v,g){return v&&f(d.prototype,v),g&&f(d,g),d}}();function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function f(d,v){var g=this;l(this,f),this.quill=d,this.boundsContainer=v||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){g.root.style.marginTop=-1*g.quill.root.scrollTop+"px"}),this.hide()}return a(f,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var g=v.left+v.width/2-this.root.offsetWidth/2,p=v.bottom+this.quill.root.scrollTop;this.root.style.left=g+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var y=this.boundsContainer.getBoundingClientRect(),T=this.root.getBoundingClientRect(),S=0;if(T.right>y.right&&(S=y.right-T.right,this.root.style.left=g+S+"px"),T.left<y.left&&(S=y.left-T.left,this.root.style.left=g+S+"px"),T.bottom>y.bottom){var w=T.bottom-T.top,E=v.bottom-v.top+w;this.root.style.top=p-E+"px",this.root.classList.add("ql-flip")}return S}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),f}();n.default=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function k(R,O){var N=[],$=!0,Q=!1,se=void 0;try{for(var Z=R[Symbol.iterator](),re;!($=(re=Z.next()).done)&&(N.push(re.value),!(O&&N.length===O));$=!0);}catch(G){Q=!0,se=G}finally{try{!$&&Z.return&&Z.return()}finally{if(Q)throw se}}return N}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return k(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function k(R,O,N){R===null&&(R=Function.prototype);var $=Object.getOwnPropertyDescriptor(R,O);if($===void 0){var Q=Object.getPrototypeOf(R);return Q===null?void 0:k(Q,O,N)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(N)}},c=function(){function k(R,O){for(var N=0;N<O.length;N++){var $=O[N];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(R,$.key,$)}}return function(R,O,N){return O&&k(R.prototype,O),N&&k(R,N),R}}(),f=i(3),d=L(f),v=i(8),g=L(v),p=i(43),y=L(p),T=i(27),S=L(T),w=i(15),E=i(41),I=L(E);function L(k){return k&&k.__esModule?k:{default:k}}function b(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function F(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function V(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=function(k){V(R,k);function R(O,N){b(this,R),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=P);var $=F(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,O,N));return $.quill.container.classList.add("ql-snow"),$}return c(R,[{key:"extendToolbar",value:function(N){N.container.classList.add("ql-snow"),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),I.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),I.default),this.tooltip=new A(this.quill,this.options.bounds),N.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function($,Q){N.handlers.link.call(N,!Q.format.link)})}}]),R}(y.default);_.DEFAULTS=(0,d.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var O=this.quill.getSelection();if(O==null||O.length==0)return;var N=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(N)&&N.indexOf("mailto:")!==0&&(N="mailto:"+N);var $=this.quill.theme.tooltip;$.edit("link",N)}else this.quill.format("link",!1)}}}}});var A=function(k){V(R,k);function R(O,N){b(this,R);var $=F(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,O,N));return $.preview=$.root.querySelector("a.ql-preview"),$}return c(R,[{key:"listen",value:function(){var N=this;l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function($){N.root.classList.contains("ql-editing")?N.save():N.edit("link",N.preview.textContent),$.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function($){if(N.linkRange!=null){var Q=N.linkRange;N.restoreFocus(),N.quill.formatText(Q,"link",!1,g.default.sources.USER),delete N.linkRange}$.preventDefault(),N.hide()}),this.quill.on(g.default.events.SELECTION_CHANGE,function($,Q,se){if($!=null){if($.length===0&&se===g.default.sources.USER){var Z=N.quill.scroll.descendant(S.default,$.index),re=a(Z,2),G=re[0],W=re[1];if(G!=null){N.linkRange=new w.Range($.index-W,G.length());var M=S.default.formats(G.domNode);N.preview.textContent=M,N.preview.setAttribute("href",M),N.show(),N.position(N.quill.getBounds(N.linkRange));return}}else delete N.linkRange;N.hide()}})}},{key:"show",value:function(){l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R}(p.BaseTooltip);A.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=_},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(29),l=ge(a),c=i(36),f=i(38),d=i(64),v=i(65),g=ge(v),p=i(66),y=ge(p),T=i(67),S=ge(T),w=i(37),E=i(26),I=i(39),L=i(40),b=i(56),F=ge(b),V=i(68),P=ge(V),_=i(27),A=ge(_),k=i(69),R=ge(k),O=i(70),N=ge(O),$=i(71),Q=ge($),se=i(72),Z=ge(se),re=i(73),G=ge(re),W=i(13),M=ge(W),B=i(74),z=ge(B),ee=i(75),X=ge(ee),H=i(57),Y=ge(H),ne=i(41),ie=ge(ne),fe=i(28),ye=ge(fe),ke=i(59),Re=ge(ke),Oe=i(60),De=ge(Oe),Ue=i(61),et=ge(Ue),ue=i(108),de=ge(ue),Ee=i(62),be=ge(Ee);function ge($e){return $e&&$e.__esModule?$e:{default:$e}}l.default.register({"attributors/attribute/direction":f.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":E.ColorClass,"attributors/class/direction":f.DirectionClass,"attributors/class/font":I.FontClass,"attributors/class/size":L.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":E.ColorStyle,"attributors/style/direction":f.DirectionStyle,"attributors/style/font":I.FontStyle,"attributors/style/size":L.SizeStyle},!0),l.default.register({"formats/align":c.AlignClass,"formats/direction":f.DirectionClass,"formats/indent":d.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":E.ColorStyle,"formats/font":I.FontClass,"formats/size":L.SizeClass,"formats/blockquote":g.default,"formats/code-block":M.default,"formats/header":y.default,"formats/list":S.default,"formats/bold":F.default,"formats/code":W.Code,"formats/italic":P.default,"formats/link":A.default,"formats/script":R.default,"formats/strike":N.default,"formats/underline":Q.default,"formats/image":Z.default,"formats/video":G.default,"formats/list/item":T.ListItem,"modules/formula":z.default,"modules/syntax":X.default,"modules/toolbar":Y.default,"themes/bubble":de.default,"themes/snow":be.default,"ui/icons":ie.default,"ui/picker":ye.default,"ui/icon-picker":De.default,"ui/color-picker":Re.default,"ui/tooltip":et.default},!0),n.default=l.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function S(w,E){for(var I=0;I<E.length;I++){var L=E[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,E,I){return E&&S(w.prototype,E),I&&S(w,I),w}}(),l=function S(w,E,I){w===null&&(w=Function.prototype);var L=Object.getOwnPropertyDescriptor(w,E);if(L===void 0){var b=Object.getPrototypeOf(w);return b===null?void 0:S(b,E,I)}else{if("value"in L)return L.value;var F=L.get;return F===void 0?void 0:F.call(I)}},c=i(0),f=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function v(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function g(S,w){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:S}function p(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(S,w):S.__proto__=w)}var y=function(S){p(w,S);function w(){return v(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"add",value:function(I,L){if(L==="+1"||L==="-1"){var b=this.value(I)||0;L=L==="+1"?b+1:b-1}return L===0?(this.remove(I),!0):l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,I,L)}},{key:"canAdd",value:function(I,L){return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,I,L)||l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,I,parseInt(L))}},{key:"value",value:function(I){return parseInt(l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,I))||void 0}}]),w}(f.default.Attributor.Class),T=new y("indent","ql-indent",{scope:f.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(4),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="blockquote",g.tagName="blockquote",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(T,S){for(var w=0;w<S.length;w++){var E=S[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}return function(T,S,w){return S&&y(T.prototype,S),w&&y(T,w),T}}(),l=i(4),c=f(l);function f(y){return y&&y.__esModule?y:{default:y}}function d(y,T){if(!(y instanceof T))throw new TypeError("Cannot call a class as a function")}function v(y,T){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:y}function g(y,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);y.prototype=Object.create(T&&T.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(y,T):y.__proto__=T)}var p=function(y){g(T,y);function T(){return d(this,T),v(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),T}(c.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function b(F,V){for(var P=0;P<V.length;P++){var _=V[P];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(F,_.key,_)}}return function(F,V,P){return V&&b(F.prototype,V),P&&b(F,P),F}}(),l=function b(F,V,P){F===null&&(F=Function.prototype);var _=Object.getOwnPropertyDescriptor(F,V);if(_===void 0){var A=Object.getPrototypeOf(F);return A===null?void 0:b(A,V,P)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(P)}},c=i(0),f=y(c),d=i(4),v=y(d),g=i(25),p=y(g);function y(b){return b&&b.__esModule?b:{default:b}}function T(b,F,V){return F in b?Object.defineProperty(b,F,{value:V,enumerable:!0,configurable:!0,writable:!0}):b[F]=V,b}function S(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}function w(b,F){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:b}function E(b,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);b.prototype=Object.create(F&&F.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(b,F):b.__proto__=F)}var I=function(b){E(F,b);function F(){return S(this,F),w(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return a(F,[{key:"format",value:function(P,_){P===L.blotName&&!_?this.replaceWith(f.default.create(this.statics.scope)):l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"format",this).call(this,P,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,_){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,_),this):(this.parent.unwrap(),l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replaceWith",this).call(this,P,_))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:l(F.__proto__||Object.getPrototypeOf(F),"formats",this).call(this,P)}}]),F}(v.default);I.blotName="list-item",I.tagName="LI";var L=function(b){E(F,b),a(F,null,[{key:"create",value:function(P){var _=P==="ordered"?"OL":"UL",A=l(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this,_);return(P==="checked"||P==="unchecked")&&A.setAttribute("data-checked",P==="checked"),A}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function F(V){S(this,F);var P=w(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,V)),_=function(k){if(k.target.parentNode===V){var R=P.statics.formats(V),O=f.default.find(k.target);R==="checked"?O.format("list","unchecked"):R==="unchecked"&&O.format("list","checked")}};return V.addEventListener("touchstart",_),V.addEventListener("mousedown",_),P}return a(F,[{key:"format",value:function(P,_){this.children.length>0&&this.children.tail.format(P,_)}},{key:"formats",value:function(){return T({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,_){if(P instanceof I)l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertBefore",this).call(this,P,_);else{var A=_==null?this.length():_.offset(this),k=this.split(A);k.parent.insertBefore(P,k)}}},{key:"optimize",value:function(P){l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,P);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var _=f.default.create(this.statics.defaultChild);P.moveChildren(_),this.appendChild(_)}l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replace",this).call(this,P)}}]),F}(p.default);L.blotName="list",L.scope=f.default.Scope.BLOCK_BLOT,L.tagName=["OL","UL"],L.defaultChild="list-item",L.allowedChildren=[I],n.ListItem=I,n.default=L},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(56),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="italic",g.tagName=["EM","I"],n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var I=w[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,I.key,I)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var I=Object.getOwnPropertyDescriptor(S,w);if(I===void 0){var L=Object.getPrototypeOf(S);return L===null?void 0:T(L,w,E)}else{if("value"in I)return I.value;var b=I.get;return b===void 0?void 0:b.call(E)}},c=i(6),f=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function p(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){p(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,null,[{key:"create",value:function(E){return E==="super"?document.createElement("sup"):E==="sub"?document.createElement("sub"):l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,E)}},{key:"formats",value:function(E){if(E.tagName==="SUB")return"sub";if(E.tagName==="SUP")return"super"}}]),S}(f.default);y.blotName="script",y.tagName=["SUB","SUP"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="strike",g.tagName="S",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="underline",g.tagName="U",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(E,I){for(var L=0;L<I.length;L++){var b=I[L];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(E,b.key,b)}}return function(E,I,L){return I&&w(E.prototype,I),L&&w(E,L),E}}(),l=function w(E,I,L){E===null&&(E=Function.prototype);var b=Object.getOwnPropertyDescriptor(E,I);if(b===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,I,L)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(L)}},c=i(0),f=v(c),d=i(27);function v(w){return w&&w.__esModule?w:{default:w}}function g(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function p(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function y(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var T=["alt","height","width"],S=function(w){y(E,w);function E(){return g(this,E),p(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(L,b){T.indexOf(L)>-1?b?this.domNode.setAttribute(L,b):this.domNode.removeAttribute(L):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,L,b)}}],[{key:"create",value:function(L){var b=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,L);return typeof L=="string"&&b.setAttribute("src",this.sanitize(L)),b}},{key:"formats",value:function(L){return T.reduce(function(b,F){return L.hasAttribute(F)&&(b[F]=L.getAttribute(F)),b},{})}},{key:"match",value:function(L){return/\.(jpe?g|gif|png)$/.test(L)||/^data:image\/.+;base64/.test(L)}},{key:"sanitize",value:function(L){return(0,d.sanitize)(L,["http","https","data"])?L:"//:0"}},{key:"value",value:function(L){return L.getAttribute("src")}}]),E}(f.default.Embed);S.blotName="image",S.tagName="IMG",n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(E,I){for(var L=0;L<I.length;L++){var b=I[L];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(E,b.key,b)}}return function(E,I,L){return I&&w(E.prototype,I),L&&w(E,L),E}}(),l=function w(E,I,L){E===null&&(E=Function.prototype);var b=Object.getOwnPropertyDescriptor(E,I);if(b===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,I,L)}else{if("value"in b)return b.value;var V=b.get;return V===void 0?void 0:V.call(L)}},c=i(4),f=i(27),d=v(f);function v(w){return w&&w.__esModule?w:{default:w}}function g(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function p(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function y(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var T=["height","width"],S=function(w){y(E,w);function E(){return g(this,E),p(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(L,b){T.indexOf(L)>-1?b?this.domNode.setAttribute(L,b):this.domNode.removeAttribute(L):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,L,b)}}],[{key:"create",value:function(L){var b=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,L);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(L)),b}},{key:"formats",value:function(L){return T.reduce(function(b,F){return L.hasAttribute(F)&&(b[F]=L.getAttribute(F)),b},{})}},{key:"sanitize",value:function(L){return d.default.sanitize(L)}},{key:"value",value:function(L){return L.getAttribute("src")}}]),E}(c.BlockEmbed);S.blotName="video",S.className="ql-video",S.tagName="IFRAME",n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function L(b,F){for(var V=0;V<F.length;V++){var P=F[V];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,F,V){return F&&L(b.prototype,F),V&&L(b,V),b}}(),l=function L(b,F,V){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,F);if(P===void 0){var _=Object.getPrototypeOf(b);return _===null?void 0:L(_,F,V)}else{if("value"in P)return P.value;var A=P.get;return A===void 0?void 0:A.call(V)}},c=i(35),f=y(c),d=i(5),v=y(d),g=i(9),p=y(g);function y(L){return L&&L.__esModule?L:{default:L}}function T(L,b){if(!(L instanceof b))throw new TypeError("Cannot call a class as a function")}function S(L,b){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:L}function w(L,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);L.prototype=Object.create(b&&b.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(L,b):L.__proto__=b)}var E=function(L){w(b,L);function b(){return T(this,b),S(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,null,[{key:"create",value:function(V){var P=l(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,V);return typeof V=="string"&&(window.katex.render(V,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",V)),P}},{key:"value",value:function(V){return V.getAttribute("data-value")}}]),b}(f.default);E.blotName="formula",E.className="ql-formula",E.tagName="SPAN";var I=function(L){w(b,L),a(b,null,[{key:"register",value:function(){v.default.register(E,!0)}}]);function b(){T(this,b);var F=S(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return F}return b}(p.default);n.FormulaBlot=E,n.default=I},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function V(P,_){for(var A=0;A<_.length;A++){var k=_[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}return function(P,_,A){return _&&V(P.prototype,_),A&&V(P,A),P}}(),l=function V(P,_,A){P===null&&(P=Function.prototype);var k=Object.getOwnPropertyDescriptor(P,_);if(k===void 0){var R=Object.getPrototypeOf(P);return R===null?void 0:V(R,_,A)}else{if("value"in k)return k.value;var O=k.get;return O===void 0?void 0:O.call(A)}},c=i(0),f=S(c),d=i(5),v=S(d),g=i(9),p=S(g),y=i(13),T=S(y);function S(V){return V&&V.__esModule?V:{default:V}}function w(V,P){if(!(V instanceof P))throw new TypeError("Cannot call a class as a function")}function E(V,P){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:V}function I(V,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);V.prototype=Object.create(P&&P.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(V,P):V.__proto__=P)}var L=function(V){I(P,V);function P(){return w(this,P),E(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return a(P,[{key:"replaceWith",value:function(A){this.domNode.textContent=this.domNode.textContent,this.attach(),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,A)}},{key:"highlight",value:function(A){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=A(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),P}(T.default);L.className="ql-syntax";var b=new f.default.Attributor.Class("token","hljs",{scope:f.default.Scope.INLINE}),F=function(V){I(P,V),a(P,null,[{key:"register",value:function(){v.default.register(b,!0),v.default.register(L,!0)}}]);function P(_,A){w(this,P);var k=E(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,_,A));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return k.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){k.highlight(),R=null},k.options.interval)}),k.highlight(),k}return a(P,[{key:"highlight",value:function(){var A=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(L).forEach(function(R){R.highlight(A.options.highlight)}),this.quill.update(v.default.sources.SILENT),k!=null&&this.quill.setSelection(k,v.default.sources.SILENT)}}}]),P}(p.default);F.DEFAULTS={highlight:function(){return window.hljs==null?null:function(V){var P=window.hljs.highlightAuto(V);return P.value}}(),interval:1e3},n.CodeBlock=L,n.CodeToken=b,n.default=F},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function P(_,A,k){_===null&&(_=Function.prototype);var R=Object.getOwnPropertyDescriptor(_,A);if(R===void 0){var O=Object.getPrototypeOf(_);return O===null?void 0:P(O,A,k)}else{if("value"in R)return R.value;var N=R.get;return N===void 0?void 0:N.call(k)}},l=function(){function P(_,A){for(var k=0;k<A.length;k++){var R=A[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,R.key,R)}}return function(_,A,k){return A&&P(_.prototype,A),k&&P(_,k),_}}(),c=i(3),f=w(c),d=i(8),v=w(d),g=i(43),p=w(g),y=i(15),T=i(41),S=w(T);function w(P){return P&&P.__esModule?P:{default:P}}function E(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}function I(P,_){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:P}function L(P,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(P,_):P.__proto__=_)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],F=function(P){L(_,P);function _(A,k){E(this,_),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=b);var R=I(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return R.quill.container.classList.add("ql-bubble"),R}return l(_,[{key:"extendToolbar",value:function(k){this.tooltip=new V(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),S.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),S.default)}}]),_}(p.default);F.DEFAULTS=(0,f.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var V=function(P){L(_,P);function _(A,k){E(this,_);var R=I(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return R.quill.on(v.default.events.EDITOR_CHANGE,function(O,N,$,Q){if(O===v.default.events.SELECTION_CHANGE)if(N!=null&&N.length>0&&Q===v.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var se=R.quill.getLines(N.index,N.length);if(se.length===1)R.position(R.quill.getBounds(N));else{var Z=se[se.length-1],re=R.quill.getIndex(Z),G=Math.min(Z.length()-1,N.index+N.length-re),W=R.quill.getBounds(new y.Range(re,G));R.position(W)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return l(_,[{key:"listen",value:function(){var k=this;a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var R=k.quill.getSelection();R!=null&&k.position(k.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var R=a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,k),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",R===0)return R;O.style.marginLeft=-1*R-O.offsetWidth/2+"px"}}]),_}(g.BaseTooltip);V.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=V,n.default=F},function(t,n,i){t.exports=i(63)}]).default})}(Ac)),Ac.exports}var pr,O0;function dM(){if(O0)return pr;O0=1;var r=pr&&pr.__extends||function(){var v=function(g,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,T){y.__proto__=T}||function(y,T){for(var S in T)T.hasOwnProperty(S)&&(y[S]=T[S])},v(g,p)};return function(g,p){v(g,p);function y(){this.constructor=g}g.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e=pr&&pr.__assign||function(){return e=Object.assign||function(v){for(var g,p=1,y=arguments.length;p<y;p++){g=arguments[p];for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(v[T]=g[T])}return v},e.apply(this,arguments)},t=pr&&pr.__spreadArrays||function(){for(var v=0,g=0,p=arguments.length;g<p;g++)v+=arguments[g].length;for(var y=Array(v),T=0,g=0;g<p;g++)for(var S=arguments[g],w=0,E=S.length;w<E;w++,T++)y[T]=S[w];return y},n=pr&&pr.__importDefault||function(v){return v&&v.__esModule?v:{default:v}},i=n(Gc()),a=n(F0()),l=n(cM()),c=n(fM()),f=function(v){r(g,v);function g(p){var y=v.call(this,p)||this;y.dirtyProps=["modules","formats","bounds","theme","children"],y.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],y.state={generation:0},y.selection=null,y.onEditorChange=function(S,w,E,I){var L,b,F,V;S==="text-change"?(b=(L=y).onEditorChangeText)===null||b===void 0||b.call(L,y.editor.root.innerHTML,w,I,y.unprivilegedEditor):S==="selection-change"&&((V=(F=y).onEditorChangeSelection)===null||V===void 0||V.call(F,w,I,y.unprivilegedEditor))};var T=y.isControlled()?p.value:p.defaultValue;return y.value=T??"",y}return g.prototype.validateProps=function(p){var y;if(i.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(p.children)){var T=i.default.Children.only(p.children);if(((y=T)===null||y===void 0?void 0:y.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(p,y){var T=this,S;if(this.validateProps(p),!this.editor||this.state.generation!==y.generation)return!0;if("value"in p){var w=this.getEditorContents(),E=(S=p.value,S??"");this.isEqualValue(E,w)||this.setEditorContents(this.editor,E)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),t(this.cleanProps,this.dirtyProps).some(function(I){return!l.default(p[I],T.props[I])})},g.prototype.shouldComponentRegenerate=function(p){var y=this;return this.dirtyProps.some(function(T){return!l.default(p[T],y.props[T])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(p,y){var T=this;if(this.editor&&this.shouldComponentRegenerate(p)){var S=this.editor.getContents(),w=this.editor.getSelection();this.regenerationSnapshot={delta:S,selection:w},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==y.generation){var E=this.regenerationSnapshot,S=E.delta,I=E.selection;delete this.regenerationSnapshot,this.instantiateEditor();var L=this.editor;L.setContents(S),d(function(){return T.setEditorSelection(L,I)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(p,y){var T=new c.default(p,y);return y.tabIndex!=null&&this.setEditorTabIndex(T,y.tabIndex),this.hookEditor(T),T},g.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(p){return p&&p.ops},g.prototype.isEqualValue=function(p,y){return this.isDelta(p)&&this.isDelta(y)?l.default(p.ops,y.ops):l.default(p,y)},g.prototype.setEditorContents=function(p,y){var T=this;this.value=y;var S=this.getEditorSelection();typeof y=="string"?p.setContents(p.clipboard.convert(y)):p.setContents(y),d(function(){return T.setEditorSelection(p,S)})},g.prototype.setEditorSelection=function(p,y){if(this.selection=y,y){var T=p.getLength();y.index=Math.max(0,Math.min(y.index,T-1)),y.length=Math.max(0,Math.min(y.length,T-1-y.index)),p.setSelection(y)}},g.prototype.setEditorTabIndex=function(p,y){var T,S;!((S=(T=p)===null||T===void 0?void 0:T.scroll)===null||S===void 0)&&S.domNode&&(p.scroll.domNode.tabIndex=y)},g.prototype.setEditorReadOnly=function(p,y){y?p.disable():p.enable()},g.prototype.makeUnprivilegedEditor=function(p){var y=p;return{getHTML:function(){return y.root.innerHTML},getLength:y.getLength.bind(y),getText:y.getText.bind(y),getContents:y.getContents.bind(y),getSelection:y.getSelection.bind(y),getBounds:y.getBounds.bind(y)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=a.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},g.prototype.renderEditingArea=function(){var p=this,y=this.props,T=y.children,S=y.preserveWhitespace,w=this.state.generation,E={key:w,ref:function(I){p.editingArea=I}};return i.default.Children.count(T)?i.default.cloneElement(i.default.Children.only(T),E):S?i.default.createElement("pre",e({},E)):i.default.createElement("div",e({},E))},g.prototype.render=function(){var p;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(p,y,T,S){var w,E;if(this.editor){var I=this.isDelta(this.value)?S.getContents():S.getHTML();I!==this.getEditorContents()&&(this.lastDeltaChangeSet=y,this.value=I,(E=(w=this.props).onChange)===null||E===void 0||E.call(w,p,y,T,S))}},g.prototype.onEditorChangeSelection=function(p,y,T){var S,w,E,I,L,b;if(this.editor){var F=this.getEditorSelection(),V=!F&&p,P=F&&!p;l.default(p,F)||(this.selection=p,(w=(S=this.props).onChangeSelection)===null||w===void 0||w.call(S,p,y,T),V?(I=(E=this.props).onFocus)===null||I===void 0||I.call(E,p,y,T):P&&((b=(L=this.props).onBlur)===null||b===void 0||b.call(L,F,y,T)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=c.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(i.default.Component);function d(v){Promise.resolve().then(v)}return pr=f,pr}var pM=dM();const mM=Mm(pM);class gM extends Al{constructor(e){super(e),this.quillRef=Qc.createRef()}getFormHtml(){return U.jsx("div",{children:U.jsx(mM,{ref:this.quillRef,modules:{toolbar:[["bold","italic","underline","blockquote"],[{color:["#F4F5F8","#E6FFFD","#99AFD1","#ecd23a","#fd5259","#D7ABF7","#9EFFA0","#F4F5F888","#E6FFFD77","#99AFD188","#ecd23a88","#fd525988","#D7ABF788","#9EFFA088","#000000","#E6FFFD44","#99AFD155","#ecd23a55","#fd525955","#D7ABF755","#9EFFA055"]},{background:[!1,"black","#00274D","#C1A71B","#5F0C0C","#4B0082","#002E07"]}],[,"code-block"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[],["clean"]]},style:this.props.wrapperStyle?{...this.props.wrapperStyle}:{minHeight:"100%",padding:"8px",minWidth:"99%",width:"100%"},theme:"snow",value:this.obj[0].getJson()[this.props.name],onChange:this.objDispatch})})}}class KS extends Qs{constructor(e){super(e)}createFileInfo(e){const t=new Date,n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");let l="images/"+`${Math.floor(Math.random()*9999)}-${n+i}`+e.target.files[0].name;return this.fileInfo={selectedFile:e.target.files[0],path:l,pic:URL.createObjectURL(e.target.files[0])},this.setState({...this.fileInfo}),this.fileInfo}async prepareOnChange(){let e=await this.operationsFactory.prepare({prepare:{...this.props.prepareOnChange},clean:!0});e=e[0],this.obj=e}async changeHandler(e){var n;await this.createFileInfo(e),this.props.prepareOnChange&&await this.prepareOnChange(),this.props.callBackFunc&&await this.props.callBackFunc(this.obj,this.fileInfo);let t;if(await this.APIService.uploadPics(this.fileInfo.selectedFile,this.fileInfo.path),!this.obj.getPicSrc){if(t=await this.APIService.downloadPics(this.fileInfo.path),!this.props.skipUpdate&&!this.state.skipUpdate)if((n=this.obj)!=null&&n.length)for(let i of this.obj)await i.setCompState({[this.props.uploadAttribute||"picURL"]:t});else await this.obj.setCompState({[this.props.uploadAttribute||"picURL"]:t});this.props.downloadPicsCallBackFunc&&this.props.downloadPicsCallBackFunc(this.obj,this.fileInfo)}return this.props.runOnChange&&this.onSubmit(),t}async onSubmit(){this.props.prepareOnChange&&await this.operationsFactory.addToComponentList(),await this.obj.update(),this.props.finishCallBackFunc&&this.props.finishCallBackFunc(this.obj),this.dispatch({imgUploaded:this.obj})}additionalSetup(){this.wrapper.setStyle({maxWidth:"300px",maxHeight:"30px",width:"fit-content"}),this.label.setStyle({display:"inline-block",height:"35px",maxWidth:"fit-content",cursor:"pointer",position:"relative"}),this.form.updateProps({accept:"image/png, image/gif, image/jpeg, image/jpg, image/webp, image/svg+xml, application/pdf",style:{position:"absolute",top:0,left:0,cursor:"pointer",width:"100%",height:"100%",opacity:0},size:"6",type:"file",name:"file",onChange:this.changeHandler})}getInnerContent(){let e=this.getFormHtml();return this.innerContent=[this.label.getHtml({content:e,type:"label"}),this.props.errorText&&this.error.getHtml()],this.innerContent}getFormHtml(){return this.content=this.props.content||U.jsx(U.Fragment,{children:"Upload"}),U.jsxs("div",{className:this.props.containerStyle||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]})}}class yM extends KS{constructor(e){super(e)}getFormHtml(){var t,n;this.content=this.props.content||U.jsx(U.Fragment,{children:"Upload"});let e=(n=(t=this.obj)==null?void 0:t[0])==null?void 0:n.getJson()[this.props.uploadImgAttribute||"picURL"];return U.jsxs(U.Fragment,{children:[U.jsxs("div",{style:this.props.containerStyle,className:this.props.containerClass||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]}),(this.state.pic||e)&&U.jsx("img",{style:this.props.uploadedImgStyle,className:this.props.uploadedImgClass||"uploadedImg",src:this.state.pic||e})]})}}let vM=class extends Qs{constructor(e){super(e),this.state.formClass="FCDefaultDelButton",this.content="Delete"}buttonClickFunc(){this.props.obj.del()}};class _M extends MS{constructor(){super(...arguments);he(this,"factory",{input:Al,textarea:Al,math:K2,addButton:H2,baseButton:Qs,popupButton:G2,updateButton:Q2,runButton:J2,quill:gM,upload:KS,showUpload:yM,del:vM})}}class Wg extends ft{constructor(){super();he(this,"addToProps",{});he(this,"addToInitialSetup",[]);he(this,"getterFunc");this.state={}}getProps(){return{interface:this.interface,app:this.app,theme:this.props.theme,type:this.props.type,...this.props,...this.addToProps}}setComponentList(){var t;this.componentList=(t=this.interface)==null?void 0:t.getComponentList()}setProps(){}getHtml(){this.setProps();let t=this.getProps();return this.setGetterFunc(this.props.getterFunc),this.getterFunc&&(this.html=this.getterFunc({...t},t.type||this.state.type)),U.jsx(U.Fragment,{children:this.html})}setGetterFunc(t){this.getterFunc=t||this.interface.getMainFunc()||this.getterFunc}addToFactory(){if(this.props.addToFactory){let t=this.interface.getFactory();for(let n of this.props.addToFactory)t.registerComponent(n.type,n.comp)}}preSetup(){this.componentPreSetup(),this.initialSetupFunctions=[...this.initialSetupFunctions,this.setComponentList,this.addToFactory,...this.addToInitialSetup]}componentPreSetup(){}}class GS extends ca{constructor(){super(...arguments);he(this,"mainFunc",this.getFormComponent)}getFactory(){return this.factory===void 0&&(this.factory=new _M),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new z2),this.themeFactory}getFormComponent(t,n){return n=n||"input",this.factory.getComponent(n,t)}}const QS=new GS;class cn extends Wg{constructor(e){super(e),this.state={type:"input"},this.interface=QS}}class Dm extends cn{constructor(e){super(e),this.state={type:"popupButton"}}}class JS extends cn{constructor(e){super(e),this.state={type:"updateButton"}}}class Ph extends cn{constructor(e){super(e),this.state={type:"runButton"}}}class wM extends cn{constructor(e){super(e),this.state={type:e.uploadType||"upload"}}}class YS extends cn{constructor(e){super(e),this.state={type:e.uploadType||"del"}}}class _n extends ft{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setCell,this.getUseId],this.state={...this.state,defaultTheme:"defaultColumn",interface:"map",wrapperClass:"MCCell",linkClass:"MCLink"},this.setItemPropsRan=!1}setCell(){this.cell=this.props.cell}preSetup(){this.setComponents(["link","wrapper","item","option"])}setitemprops(){let e={...this.createPropObj("item","cell"),className:this.cell.class||this.theme[this.state.classKey],style:this.cell.style};this.cell.itemClick&&(e.checkItemClick=!0),this.setItemPropsRan?this.item.setProps(e):(this.builderObserver.subscribe(e),this.setItemPropsRan=!0)}setwrapperprops(){let e={...this.createPropObj("wrapper","cell")};this.setWrapperPropsRan?this.wrapper.setProps(e):(this.builderObserver.subscribe(e),this.setWrapperPropsRan=!0)}getOption(){return U.jsx(U.Fragment,{})}getUseId(){return this.cell&&this.obj.getJson&&(this.useId=this.cell.useId===!1?"":this.cell.useId===void 0?this.obj.getJson()._id:this.obj.getJson()[this.cell.useId]),this.useId}getInnerContent(){return this.innerContent=[this.item.getHtml({type:this.state.itemType||"span",content:this.getOption()})],this.innerContent}getLinkUrl(){var t,n,i;return(t=this.cell)!=null&&t.to?this.cell.to:`/${(i=(n=this.obj)==null?void 0:n.getJson())==null?void 0:i.type}/${this.useId}`}getLinkFunc(){if(this.cell.forceUpdate){let e=()=>{this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}if(this.cell.linkClick){let e=()=>{this.cell.linkClick(this.obj),this.cell.forceUpdate&&this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}}getHtml(){var t;this.mapInnerContent(),this.getLinkFunc(),this.cell.type;let e=(t=this.cell)!=null&&t.hasLink?this.link.getHtml({type:this.state.linkType||"link",content:this.innerContent,props:{to:this.getLinkUrl()}}):this.wrapper.getHtml({type:this.state.wrapperType||"span",content:this.innerContent});return this.html=U.jsx(U.Fragment,{children:e}),this.html}}class Kg extends _n{constructor(e){super(e),this.state.classKey="MCDelItem",this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setDel]}setDel(){this.cell.itemClick=this.del}del(){let e=this.props.app;this.cell.popop?e.dispatch({popupSwitch:"del",delComponent:this.obj}):this.obj.del()}getOption(){return U.jsx("div",{children:"X"})}}class Gg extends _n{constructor(e){super(e),this.state.classKey="MCEditItem",this.state.itemClick=this.edit}edit(){this.props.app.dispatch({popupSwitch:"edit",currentPopupComponent:this.obj})}getOption(){return"edit"}}class Oh extends _n{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getName(){let e=this.cell;this.name=e.name,this.name||(this.name=e)}getOption(){return this.getName(),this.obj.getJson()[this.name]}}class EM extends Oh{constructor(e){super(e),this.state.classKey="MCTextItem"}getOption(){return U.jsx(U.Fragment,{children:this.cell.name})}}class TM extends _n{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){let e=this.cell.custom;return U.jsx(e,{...this.props,masterCell:this})}}class XS extends _n{constructor(e){super(e),this.state.defaultClassName="MCImgItem",this.state.itemType="img"}getPicSrc(){var e,t;return this.obj.getJson&&(this.src=(t=this.obj)==null?void 0:t.getJson()[((e=this.state.cell)==null?void 0:e.src)||"picURL"]),this.cell.imgSrc&&(this.src=this.cell.imgSrc),this.src}additionalPostSetup(){this.getPicSrc(),this.src&&this.item.addProps({src:this.src,alt:"picture goes here"})}}class SM extends _n{constructor(e){super(e)}getOption(){({...this.cell,...this.props})}}class ZS extends _n{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setList,this.setFactory],this.state={...this.state,mapContainerClass:"MCMapContainer",interface:"map",mapSectionClass:"MCMapSection"},this.defaultTypes=["del","edit","img"]}setFactory(){this.factory=this.interface.getFactory()}getDefaultTypes(){return this.defaultTypes}checkCellForDefaults(e){let t=this.getDefaultTypes();return t[t.indexOf(e)]}textOrAttribute(e,t){return e.getJson&&(e!=null&&e.getJson()[t])?"attribute":"text"}getType(e,t){let n=e.type;return n||(n=this.checkCellForDefaults(e),n||(n=this.textOrAttribute(t,e))),n}getProps(e,t){return{obj:t,...this.props,interface:this.interface,cell:e,theme:this.props.theme}}getCellList(e){let t=this.props.cells;return U.jsx(U.Fragment,{children:t.map((n,i)=>{let a=this.getType(n,e),l=this.getProps(n,e);return U.jsx(U.Fragment,{children:this.factory.getComponent(a,l)})})})}getListHtml(){return U.jsx(U.Fragment,{children:this.list.map(e=>U.jsx(U.Fragment,{children:this.mapSection.getHtml({type:"div",content:this.getCellList(e)})}))})}setList(){this.list=this.props.list}preSetup(){this.setComponents(["mapContainer","mapSection","link"])}getHtml(){let e=this.mapContainer.getHtml({type:"div",content:this.getListHtml()});return this.html=U.jsx(U.Fragment,{children:e}),this.html}}class x0 extends Kg{constructor(e){super(e),this.state.classKey="MCCustomDelItem"}getOption(){return U.jsx(this.cell.custom,{...this.props,masterCell:this})}}class IM extends Kg{constructor(e){super(e),this.state.classKey="MCDelItem"}getOption(){return this.props.delText||"delete"}}const CM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDgiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0OCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0OCIKICAgdGlmZjpJbWFnZVdpZHRoPSI0OCIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDktMDhUMTQ6NDQ6MzYtMDY6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgeG1wTU06YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgeG1wTU06c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgeG1wTU06d2hlbj0iMjAyMy0wOC0wNFQxMDoyNTozOC0wNjowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+zw4Y8wAAAYFpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/ZshgRJmFhcUkZGE0KLGxmMmvwmJmlF+bmee9GTUzXu89SbbKVlFi49eCv4CtslaKSMmWNbFhes7z1Ejm3M49n/u995zuPRc8iaySM8vDkMtbRmw4EpyanglWPlGFjwDthJOKqY/HhxKUtPdbypx4HXJqlT73r9XMq6YCZT7hAUU3LOER4bFlS3d4SzigZJLzwifCHYZcUPjG0VMuPzucdvnTYSMRi4KnXjiY/sWpX6xkjJywvJyWXHZJ+bmP8xK/mp+MS2wWb8IkxjARgowySJReuuiXuZcQ3XTKihL54e/8CRYlV5FZZwWDBdJksOgQdUmqqxI10VUZWVac/v/tq6n1dLvV/RGoeLTt11ao3ITChm1/HNh24RC8D3CeL+Yv7kPfm+gbRa1lD+rW4PSiqKW24WwdGu/1pJH8lrziHk2Dl2OonYaGK6iedXv2s8/RHSRW5asuYWcX2uR83dwXqRtoBLx59Y4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAU5SURBVGiB1ZpfbFNVHMc/bW/H7d3WGujaMeqy8ECMEcgiICDDOI0hEpco8iDECMHEByBRSAwvxCgJ0ZhIzEBjAma8QEyEBwUejEyibg/GYcKYYRCIQEHaVZa2621v/10f7m1pu/5d/9B9k5vc3nvOuZ9v77nn3+8YqIFsdpcIPA88CzhyDgBvzjEGjPh97ki1zzbMNaPN7rIBLwH9aPBihUVEgBHgIjDs97n9c+Go2IDN7rIAO4B3AWkuD82jEHACGPL73OFKMpZtwGZ3mYA3gT2AvSK88jUFHAXO+H3uRDkZyjJgs7s6gUHgmbmzVaSrwB6/z+0pldBUKoHN7loBDAE9VWMVkNEI/WstrZtfbG1f+qTZ/J8/sWgmpL4qStYxRQ4UNVH0DdjsrgHgENBSS+BMdTkF4ehH9q6VT7Wkvyc5oiYPfzX94PS5GR9w0O9z/1Aof8E3oMN/VixNtVriFITTRxzdy3rMWS2YWTAY+tdZ2uWwql6eUPpEyXpXkQOT+crIC6dXm8FC92uhJU5BOHXE0e3qFAq+3b5VYpscVuOXJ5TnRMk6mq86zQLUP9ghoL2mxDn6/MCizt6nF2Q1w6oKhpxK3bdKbPM9TCTHr0fXipL1giIHQpn3swzoTeW31PGDTem3PyOhvtWi1LHQZE5dMxg0E6nzlNb1iq0/DsuJwEyyV5SsZxU5oKbuGXPK3UKDmkp/MJncvs97d+JGNKvjyn0DABbRYHx5vaUVWA68kXkvbUDvYffWhRbocQnmbQNttsxrgRnNxPj10iYcdpOgn+7VWYHsN7CDOvWwPS7BfOoLZ/eh9xcu3rW1/YnMe8FQMvn2fu/dK9eicrEyJm/GFP20A3gndd0E6YHZl4B5dtbqlIJ32rW63rfa0haSk/G//o6mR6LRmKqevyQH1/UusHR2CLMYJm5Ew58cm/aq6ZrPclGyfqfIAcUEIErWzcCmesOnVNhEOLh25QLLYscjE+4H8ejOA1PuQDCZzCiiBbilyIFrKQO7gaWNgC9mIhZT1XOX5OCaFaLY5RRa3A/i0bc+8N6574nH85WhyIELJn0y8jEg5EtUD/iiJuKo5y/JwS6HIOz/9OG/heCBLlGynjSJkvUFYKDe8L/+EQke/nra+8oGqV0wPWpn8pmIx+Gn38MzwVBWtcmVAIybRMm6FeitN/x7B6fu37gdi169Hgtv2ljaRJnymETJ+jqwrN7w0ZjWhty+F49N3opFXutvzeoT+lZb2nzTidj4ZFShfN0z8mjiXXd4gBazwbB9ILsvAPD4ErHRy5GifUEeOao2UCn8N4c6ujauEbMGih5fIrZtn+fOP+54rMLHV2fgMcODbmBOagJ4QBsLeecrPOCt2EATwUOlBpoMHiox0ITwoBsYm6fwAGNGtAXWgl14E8NHgFGjvsQ9Ms/gQV+eT/UDw/MMHrRl+fSc+CLaEndaTQ4fQv/TjQB6cOFEZoomhgc4ngqIZA4lhtDW5/OqieCngJOpH2kDemTkaKFcTQIPMJgZxckdzJ1BCy4U1GOGHwfOZl6YtQZms7ucwPc3h7s3lFtqg+CngK25UZtZw2k9we5yS20QfJQCIae88wG/z32lnFIbBA9alCYv05wnNA385z8sFmIqGaXUozXHqF9otZCm0KpN0dpQMoSkyAGPKFkvAKuowQpGmRoHdvp97lulElYa6N6CFkOoZ6B7EDhb00B3pjK2GuwCWivNX0Ah4Dhwsm5bDXKlxxT60TZ8VLPZ42fgl4Zt9sgnfYV7PZVttxmtxXab/wFJap9Ow0di3gAAAABJRU5ErkJggg==";class bM extends Gg{constructor(e){super(e),this.state.classKey="MCEditImgItem",this.state.itemType="img"}additionalPostSetup(){this.getImg(),this.item.setProps({src:this.src})}getImg(){return this.src=this.cell.imgSrc||CM,this.src}}class AM extends Gg{constructor(e){super(e),this.state.classKey="MCCustomEditItem"}getOption(){return U.jsx(this.cell.custom,{...this.props,masterCell:this})}}let kM=class extends ZS{constructor(e){super(e),this.mapContainer=Qc.createRef(),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getPicObj,this.getAddComponentButton],this.state={...this.state,index:0,isDragging:void 0,defaultTheme:"interactiveMap"}}_addEventListeners(){var t;this.props;let e=[];for(let n of this.list){let i=document.getElementById(n.getJson()._id);i.addEventListener("mousedown",a=>{this.setState({isDragging:i})}),i.addEventListener("mouseup",a=>{this.setState({isDragging:void 0})}),e.push(i),this.setState({saveList:e})}(t=this.mapContainer)!=null&&t.current&&(this.mapContainer.current.addEventListener("mouseup",n=>{this.currentComp!==void 0&&this.currentComp.update(),this.setState({isDragging:void 0})}),this.mapContainer.current.addEventListener("mousemove",n=>{if(this.state.isDragging!==void 0){let i=this.state.isDragging,a=i.id,l=this.list.find(c=>c.getJson()._id===a);if((l==null?void 0:l.getJson().draggable)!==!1){const c=this.mapContainer.current.getBoundingClientRect(),f=n.pageX-c.left-25,d=n.pageY-c.top-25;l.setCompState({x:f,y:d}),this.currentComp=l,i.style.left=`${f}px`,i.style.top=`${d}px`}}}))}componentDidMount(){this._addEventListeners()}zoom(e){let t=this.mapContainer.current.getBoundingClientRect(),n=t.width*e,i=t.height*e;this.mapContainer.current.style.width=n+"px",this.mapContainer.current.style.height=i+"px";let a=this.state.saveList;for(let l of a){const c=l.style.left||"0",f=l.style.top||"0",d=c.match(/(-?\d*\.?\d+)/),v=f.match(/(-?\d*\.?\d+)/),g=d?parseFloat(d[0]):0,p=v?parseFloat(v[0]):0,y=g*e,T=p*e;l.style.left=y+"px",l.style.top=T+"px"}}componentDidUpdate(e,t){this.props.list.length!==e.list.length&&this._addEventListeners()}getAddComponentButton(){var e,t;if(this.addComponentButton=this.props.addComponentButton,this.addComponentButton!==void 0){let n=typeof this.addComponentButton=="string"?this.addComponentButton:this.addComponentButton.type||"addComponentButton",i=this.props.pinKey||((e=this.mapObj)==null?void 0:e.getJson().pinType)||"pin";this.addComponentButton=this.factory.getComponent(n,{...this.props,theme:this.props.theme||this.state.defaultTheme,mapId:this.mapObj?(t=this.mapObj)==null?void 0:t.getJson()._id:void 0,addType:i,addPinProps:this.props.addPinProps,pinAdded:this._addEventListeners})}}getPicObj(){var t;let e=this.props.imgAttribute||"picURL";this.mapObj&&(this.picSrc=(t=this.mapObj)==null?void 0:t.getJson()[e])}preSetup(){this.setComponents([])}async changePic(e){let t=this.props.list;e=e<0?e=t.length-1:e,e=e>=t.length?0:e,this.mapObj=t[e],await this.setState({index:e}),this._addEventListeners()}setList(){if(!this.listSet){let t=this.props.list[this.state.index];this.mapObj=t;let n=this.props.pinKey||(t==null?void 0:t.getJson().pinType)||"pin",i=this.props.pinAttribute||(t==null?void 0:t.getJson().type)+"Id"||"mapId",a=this.props.mapId||(t==null?void 0:t.getJson()._id);this.list=this.componentList.getList(n,a,i)}}preSetup(){this.setComponents(["mapContainer","right","left","image","zoomIn","zoomOut"])}getIndexAndChangeMap(e){let t=this.props.list.indexOf(this.mapObj)+e;this.changePic(t)}getListHtml(){let e=this.props,t=this.theme,n=this.factory;return U.jsx(U.Fragment,{children:this.list.map((i,a)=>{let l={obj:i,props:e,interface:this.interface,cell:e.pinCell,theme:this.props.them||this.state.defaultTheme,pinProps:this.props.pinProps};return U.jsx("div",{id:i.getJson()._id,className:e.mapSectionClass?e.mapSectionClass:t.MCMapSection,style:{...e.mapSectionStyle,left:i.getJson().x+"px",top:i.getJson().y+"px"},children:U.jsx(U.Fragment,{children:n.getComponent(e.pinType?e.pinType:"attribute",l)})},a)})})}getHtml(){if(this.props.list.length>0){let e=this.props,t=this.theme;return U.jsxs("div",{ref:this.mapContainer,className:e.mapContainerClass?e.mapContainerClass:t.MCMapContainer,style:{...e.mapContainerStyle},children:[U.jsx("img",{src:this.picSrc,className:e.mapClass?e.mapClass:t.MCMap,style:{...e.mapStyle}}),this.getListHtml(),e.addComponentButton&&U.jsx(U.Fragment,{children:this.addComponentButton}),U.jsx("div",{style:{position:"absolute",top:"0px",right:"0px"},onClick:()=>{this.zoom(.5)},children:"zoom out"}),U.jsx("div",{style:{position:"absolute",top:"20px",right:"0px"},onClick:()=>{this.zoom(2)},children:"zoom in"}),U.jsx("div",{style:{position:"absolute",top:"0px",left:"-20px"},onClick:()=>{this.getIndexAndChangeMap(-1)},children:"prev"}),U.jsx("div",{style:{position:"absolute",top:"20px",right:"-20px"},onClick:()=>{this.getIndexAndChangeMap(1)},children:"next"})]})}else this.list=[]}};class RM extends _n{constructor(e){super(e)}preSetup(){this.setComponents([])}async createObjType(){let e=this.operationsFactory,t=this.props.addType;await e.prepare({prepare:{type:t,mapId:this.props.mapId,...this.props.addPinProps},clean:!0,run:!0}),this.props.pinAdded()}getHtml(){let e=this.props.text||"+ Add Item";return U.jsxs("div",{onClick:this.createObjType,style:this.props.style,className:this.props.class||this.theme.MCAddButton,children:[e," "]})}}class PM extends _n{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getOption(){return this.state.obj}}class OM extends Oh{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getItemClass(){var i;let e=this.cell,t=e.activeAttribute?e.activeAttribute:"_id";if(this.state.obj.getJson()[t]===((i=e.activeItem)==null?void 0:i.getJson()[t])){let a=e.activeClass?e.activeClass:this.theme.MCActiveItem;this.item.setClass(this.item.getClass()+" "+a)}}additionalPostSetup(){this.getItemClass()}}class xM extends XS{constructor(e){super(e),this.state.classKey="MCLogoItem"}}class NM extends _n{constructor(e){super(e),this.state.itemType="div"}getList(){return this.list=this.props.cell.links.filter(e=>(e==null?void 0:e.name)!==void 0),this.list}getHome(){var e;if(!this.state.active){this.home=this.list.find(t=>t.path==="/");for(let t of this.list)t.active=(e=this.home)==null?void 0:e.name}}getOption(){let e=this.props.cell.links.filter(t=>(t==null?void 0:t.name)!==void 0&&t.display!==!1);return U.jsx(Jn,{list:e,theme:this.cell.linksTheme||"links",mapSectionClass:this.props.cell.linkSectionClass||void 0,mapSectionStyle:this.props.cell.linkSectionStyle||void 0,cells:[{type:"linkItem",class:this.props.cell.linkItemClass||void 0,activeClass:this.props.cell.activeClass||void 0,style:this.props.cell.linkItemStyle||void 0,linkClick:t=>{for(let n of this.props.cell.links)n.active=t==null?void 0:t.name;this.setState({active:t==null?void 0:t.name})}}]})}additionalSetup(){this.getList(),this.getHome()}}class LM extends _n{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setUpLinks],this.state.classKey="MCLinkItem",this.state.itemType="div"}setUpLinks(){this.cell.to=this.obj.path,this.useId="",this.cell.hasLink=!0}getActiveClass(){return this.activeClass=this.cell.activeClass||this.theme.MCActiveLink,this.activeClass}setActiveClass(){var n,i,a,l,c;const e=((n=this.obj)==null?void 0:n.path)==="/"||((i=this.obj)==null?void 0:i.path)==="/home",t=window.location.pathname;if(e){const f=t.split("/").filter(Boolean);if(f.length>0&&f[0]!=="home")return}if(((a=this.obj)==null?void 0:a.active)===((l=this.obj)==null?void 0:l.name)||t.includes((c=this.obj)==null?void 0:c.path)){let f=this.getActiveClass();f=f||"",this.item.setClass(this.item.getClass()+" "+f)}}additionalSetup(){this.setActiveClass()}getOption(){var e;return(e=this.props.obj)==null?void 0:e.name}}class DM extends _n{constructor(e){super(e),this.state.classKey="MCTextItem"}additionalPostSetup(){this.item.setOnClick(this.cell.logoutFunc||this.APIService.logout)}getOption(){return"logout"}}class MM extends _n{constructor(e){super(e),this.state.classKey="MCOrderedArrows",this.state.increment=1,this.state.decrement=-1}increasePosition(){this.obj.updateOrder(this.state.increment)}decreasePosition(){this.obj.updateOrder(this.state.decrement)}increaseArrowUI(){return this.increaseArrow=U.jsx("div",{className:"upward-arrow",onClick:this.decreasePosition}),this.increaseArrow}decreaseArrowUI(){return this.decreaseArrow=U.jsx("div",{style:{marginTop:"5px"},className:"downward-arrow",onClick:this.increasePosition}),this.decreaseArrow}getOption(){return this.increaseArrowUI(),this.decreaseArrowUI(),U.jsxs("div",{style:{marginTop:"-4px"},className:"fitCC",children:[this.increaseArrow,this.decreaseArrow]})}}class FM extends _n{constructor(e){super(e),this.state.displayState=!1,this.state.itemType="div"}displayOption(){return U.jsx("div",{style:{position:"absolute",left:"0px",top:"0px"},className:this.state.displayState?"downward-arrow":"right-arrow",onClick:()=>{this.wrapper.setStyle({...this.wrapper.getStyle(),height:"200px"}),this.setState({displayState:!this.state.displayState})}})}mapOption(){return U.jsx(Jn,{name:this.props.name,filter:{attribute:this.props.filter.attribute,search:this.obj.getJson()._id},cells:[...this.props.cells]})}additionalPostSetup(){this.item.setStyle({...this.item.getStyle(),position:"relative"})}getOption(){return U.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[this.displayOption(),"  ",this.state.displayState&&this.mapOption(),"  "]})}}class jM extends Oh{constructor(){super(),this.state.classKey="MCBackgroundItem",this.state.wrapperClass="MCCellBackground",this.state.linkClass="MCBackgroundLink"}additionalPostSetup(){let t={width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",textAlign:"center",fontSize:"50px",background:`linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${this.cell.pirSRC||this.obj.getJson()[this.cell.picAttribute||"picURL"]}) no-repeat center center`,backgroundSize:"cover",textDecoration:"none"};this.wrapper.setStyle({...this.wrapper.getStyle(),...t}),this.link.setStyle({...this.wrapper.getStyle(),...t})}}class VM extends _n{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){return this.cell.custom}}class UM extends MS{constructor(){super(...arguments);he(this,"factory",{text:EM,attribute:Oh,custom:TM,customBuilt:VM,img:XS,form:SM,del:Kg,delIcon:x0,delCustom:x0,delText:IM,edit:Gg,editIcon:bM,editCustom:AM,interactiveMap:kM,addComponentButton:RM,plain:PM,select:OM,logo:xM,links:NM,linkItem:LM,logout:DM,default:Jn,map:ZS,order:MM,innerMap:FM,backgroundImage:jM})}}class Qg{constructor(){he(this,"MCMapContainer","Map-Container");he(this,"MCMapSection","Map-Section");he(this,"MCLink","Map-Link");he(this,"MCCell","Map-Cell");he(this,"MCCustomDelItem","Map-Custom-Del-Item");he(this,"MCDelItem","Map-Del-Item");he(this,"MCDelImgItem","Map-Del-imgItem");he(this,"MCCustomEditItem","Map-Custom-Edit-Item");he(this,"MCEditImgItem","Map-Edit-imgItem");he(this,"MCEditItem","Map-Edit-Item");he(this,"MCAttributeItem","Map-Attribute-Item");he(this,"MCImgItem","Map-imgItem");he(this,"MCTextItem","Map-Text-Item");he(this,"MCActiveItem","Map-Active-Item");he(this,"MCCustom","");he(this,"MCBackgroundItem","background-item");he(this,"MCCellBackground","cell-background");he(this,"MCBackgroundLink","cell-background");he(this,"MCLogoItem","navLogo")}}class xh extends Qg{constructor(){super(...arguments);he(this,"MCSectionHover","DC-Map-Section:hover");he(this,"MCCustomDelItem","DC-Custom-Del-Item");he(this,"MCDelItem","DC-Del-Item");he(this,"MCDelImgItem","DC-Del-imgItem");he(this,"MCCustomEditItem","Map-Custom-Edit-Item");he(this,"MCEditImgItem","DC-Edit-imgItem");he(this,"MCEditItem","DC-Edit-Item")}}class Nh extends xh{constructor(){super(...arguments);he(this,"MCMapContainer","DR-Map-Container");he(this,"MCMapSection","DR-Map-Section")}}class BM extends Nh{constructor(){super(...arguments);he(this,"MCMapContainer","DRW-Map-Container")}}class qM extends Nh{constructor(){super(...arguments);he(this,"MCMapContainer","IM-Map-Container");he(this,"MCMapSection","IM-Map-Section");he(this,"MCMap","IM-Map");he(this,"MCAddButton","IM-addButton");he(this,"MCActiveItem","IM-Active-Item");he(this,"MCCell","IM-Cell")}}class zM extends Nh{constructor(){super(...arguments);he(this,"MCActiveLink",this.MCActiveItem);he(this,"MCLinkItem",this.MCLink);he(this,"MCMapSection","SB-Map-Section")}}class HM extends xh{constructor(){super(...arguments);he(this,"MCActiveLink",this.MCActiveItem);he(this,"MCLinkItem",this.MCLink);he(this,"MCMapSection","SB-link");he(this,"MCCell","SB-Cell-Link");he(this,"MCLink","SB-Map-Link");he(this,"MCLinkItem","SB-Map-Link")}}class $M extends xh{constructor(){super(...arguments);he(this,"MCActiveLink",this.MCActiveItem);he(this,"MCLinkItem",this.MCLink)}}const WM=Object.freeze(Object.defineProperty({__proto__:null,DefaultColumn:xh,DefaultRegistry:Qg,DefaultRow:Nh,DefaultWrapRow:BM,InteractiveMap:qM,Links:HM,SideBar:zM,TopBar:$M},Symbol.toStringTag,{value:"Module"}));class KM extends qg{constructor(){super(WM),this.factory.default=Qg}}class GM{constructor(){he(this,"factory",{text:kl,tag:eI,plain:XM,textAndTag:YM,textAndTag2:JM,bool:eF,textAttributeList:ZM})}getFilter(e){if(e)return this.factory[e]}registerFilter(e,t){this.factory[e]=t}}function eI(r){let{list:e,attribute:t,tagList:n}=r;return e.length>0&&(e=e.filter(i=>!!n.find(l=>(t?l.getJson()[t]:l.getJson().connectedId)===i.getJson()._id))),e}function QM(r){let e=[];if(r.search&&r.list){const t=r.search.toLowerCase().split(" ").map(n=>n.trim());e=r.list.filter(n=>{const i=n.getJson()[r.attribute||"tags"];if(i){let a=i.split(r.splitStr||",");a=a.map(l=>l.toLowerCase());for(let l of t)if(a.includes(l))return!0}else return!1})}return e}function JM(r){let{list:e,attributes:t,search:n}=r,i=[],a=[],l=t.split(",");for(let f of l)a.push(kl({...r,attribute:f}));let c=QM({...r});return i=[...a[0],...c,...a[1],...a[2]],i=Jg(i),i}function YM(r){let{list:e,attribute:t,tagList:n,attribute2:i,attributeTag:a,search:l}=r,c=kl({...r,attribute:t}),f=eI({...r,attribute:a}),d=kl({...r,attribute:i});return e=[...c,...f,...d],Jg(e)}function Jg(r){const e=new Map;return r.forEach(t=>{const i=t.getJson()._id;e.has(i)||e.set(i,t)}),Array.from(e.values())}function kl(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var a;return(a=i.getJson()[t])==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function XM(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var a;return(a=i[t])==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function ZM(r){let{attributeList:e}=r,t=[];for(let n of e)t=[...t,...kl({...r,attribute:n})];return t=Jg(t),t}function eF(r){let{list:e,attribute:t,search:n}=r;return e=e.filter(i=>i.getJson()[t]===n),e}class tI extends ca{constructor(){super();he(this,"FilterFactory");this.getFilterFactory(),this.mainFunc=this.getMapComponent}getFactory(){return this.factory===void 0&&(this.factory=new UM),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new KM),this.themeFactory}getFilterFactory(){return this.filterFactory===void 0&&(this.filterFactory=new GM),this.filterFactory}getMapComponent(t,n){return n=n||"default",this.factory.getComponent(n,t)}}class Jn extends Wg{constructor(e){super(e),this.state={type:"map"},this.interface=nI}setFilterInfo(){this.filterFacotry=this.interface.getFilterFactory(),this.filters=this.props.filters,this.filterFunc=this.props.filterFunc,this.filter=this.props.filter}getFilterFunc(){var e;if(!this.filterFunc&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filterFunc");t&&(this.filterFunc=t.func)}}getFilter(){var e;if(!this.filter&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filter");t&&(this.filter={...t})}}getList(){var t,n,i,a;let e=this.props.name;this.list=this.props.list?this.props.list:this.filter?(i=this.componentList)==null?void 0:i.getList(e,(t=this.filter)==null?void 0:t.search,(n=this.filter)==null?void 0:n.attribute):(a=this.componentList)==null?void 0:a.getList(e)}filterListByFilterFunc(){this.list&&(this.list=this.list.filter(e=>this.filterFunc?this.filterFunc(e):!0))}filterListByFilterFactory(){if(this.filters)for(let e of this.filters){let t=this.filterFacotry.getFilter(e.type);t&&(this.list=t({list:this.list,...e}))}}setProps(){let e=this.props.cells;this.addToProps={cells:e,list:this.list}}componentPreSetup(){this.addToInitialSetup=[this.setFilterInfo,this.getFilterFunc,this.getFilter,this.getList,this.filterListByFilterFunc,this.filterListByFilterFactory]}}const nI=new tI;class tF extends ft{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getNavLists],this.state={}}getLinks(){var e,t;return this.props.links?this.props.links:(t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes}getDefaultNavItem(e){return{logo:{imgSrc:this.props.logoURL,label:this.props.logoLabel,...this.props},links:{links:this.getLinks(),...this.props,class:"fit"},logout:{logoutFunc:this.props.logoutFunc,auth:this.props.auth,wrapperClass:"SB-logout",...this.props}}[e]}getList(){let e=this.props.navList,t=e.getList();for(let n=0;n<t.length;n++)if(t[n].default){let i=this.getDefaultNavItem(t[n].type);i.type=t[n].type,e.update(n,i)}return this.props.type==="topBar"&&(t=t.filter(n=>n.type!=="links")),t}getHtml(){return U.jsx(Jn,{theme:this.props.mapTheme,list:this.mapList,cells:this.list,...this.props.navMapProps})}getNavLists(){this.list=this.props.list?this.props.list:this.getList(),this.mapList=this.props.mapList?this.props.mapList:[{}]}}class nF{constructor(){he(this,"factory",{default:tF})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),U.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class rF extends ft{constructor(e){super(e),this.state={defaultStyle:"navMenu",renderComp:void 0}}async open(){let e=await this.props.open();this.props.type==="topBar"&&(this.state.renderComp?this.setState({renderComp:void 0}):this.setState({renderComp:e}))}render(){return this.props.app,U.jsxs("div",{children:[U.jsxs("div",{onClick:this.open,className:this.props.menuClass?this.props.menuClass:this.state.defaultStyle,children:[this.props.menuContent&&U.jsx(U.Fragment,{children:this.props.menuContent})," "]}),this.state.renderComp&&U.jsx(U.Fragment,{children:this.state.renderComp})]})}}class iF extends _r{constructor(e){super(e),this.state={...this.state,defaultType:this.props.type?this.props.type:"sideBar",typeKey:"layout",defaultNavType:"default",phoneSize:850,left:-400}}getProps(){var e,t;return{mapTheme:this.props.mapTheme||this.state.defaultType,links:this.props.links||((t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes),...this.props}}getFactoryComponent(e){let t=this.props.mapType?this.props.mapType:this.state.defaultNavType;return this.props.factory.getComponent(t,e)}componentDidMount(){this.resize!==void 0&&(window.addEventListener("resize",this.resize),this.resize())}componentWillUnmount(){this.resize!==void 0&&window.removeEventListener("resize",this.resize)}resize(){if(window.innerWidth<850){this.setState({phone:!0,tablet:!1,defaultType:this.props.phoneLayout?this.props.phoneLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}if(window.innerWidth<1224){this.setState({phone:!1,tablet:!0,defaultType:this.props.tabletLayout?this.props.tabletLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}window.innerWidth>1224&&(this.state.phone&&this.setState({phone:!1,defaultType:this.state.ogType}),this.state.tablet&&this.setState({tablet:!1,defaultType:this.state.ogType}))}async setStyleOnMenuClick(e){const t=n=>new Promise(i=>setTimeout(i,n));this.card.setStyle({...this.card.getStyle(),left:e.toString()+"px"}),await this.setState({left:e}),await t(10)}async setNavOpenClose(){if(this.state.left===-400)for(let e=-400;e<600;e=e+15){if(e>0){this.setState({left:0});break}await this.setStyleOnMenuClick(e)}else for(let e=0;e>-450;e=e-15){if(e<-400){this.setState({left:-400});break}await this.setStyleOnMenuClick(e)}}async openCloseLinks(){var n,i;let e=U.jsx(Jn,{list:this.props.links||((i=(n=this.props.app)==null?void 0:n.state)==null?void 0:i.routes),cells:[{type:"link"}]});return U.jsx(_r,{content:e})}async openCloseNavFun(){return await{topBar:this.openCloseLinks,sideBar:this.setNavOpenClose}[this.state.defaultType]()}getMenu(){return this.props.menuComponent?U.jsx(this.props.menuComponent,{...this.props.menuComponentProps,open:this.openCloseNavFun,type:this.state.defaultType}):U.jsx(rF,{open:this.openCloseNavFun,type:this.state.defaultType,...this.props.menuComponentProps})}getContent(){let e=this.getProps(),t=this.getFactoryComponent(e);return this.content=U.jsxs(U.Fragment,{children:[t,this.props.type!=="type"&&(this.state.phone||window.innerWidth<this.state.phoneSize)&&U.jsx(U.Fragment,{children:this.getMenu()})]}),this.content}}class sF{constructor(){vn.bind(this),this.list=[{type:"logo",picURL:void 0,label:void 0,default:!0},{type:"links",linkJson:void 0,default:!0},{type:"logout",logoutFunc:void 0,auth:void 0,default:!0}]}setList(e){this.list=e}getList(){return this.list}insert(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,0,t)}add(e,t){t?this.list.unshift(e):this.list.push(e)}addCustomJSX(e,t,n){let i={type:"custom",custom:e};t?this.insert(t,i):this.add(i,n)}update(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list[e]={...this.list[e],...t}}remove(e){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,1)}}class rI extends ca{constructor(){super();he(this,"factory");he(this,"navList");vn.bind(this),this.getFactory(),this.getNavList(),this.mainFunc=this.getNav}getFactory(){return this.factory||(this.factory=new nF),this.factory}getNav(t){return U.jsx(iF,{factory:this.factory,navInterface:this,navList:this.navList,...t})}getNewNavList(){return new sF}setNavListForce(t){this.navList=t}getNavList(){return this.navList||(this.navList=this.getNewNavList()),this.navList}}const Yg=new rI;class oF extends Wg{constructor(e){super(e),this.interface=Yg}}class aF{constructor(){he(this,"factory",{})}getComponent(e){return this.factory[e]}registerComponent(e,t){this.factory[e]=t}}class lF extends aF{constructor(){super(...arguments);he(this,"factory",{})}}class uF extends ft{constructor(e){super(e),this.state={}}checkPopupSwitch(e){var t,n;return this.popupSwitch=this.props.popupSwitch||((n=(t=this.props.app)==null?void 0:t.state)==null?void 0:n.popupSwitch),this.popupSwitch!==""&&this.popupSwitch!==void 0&&(e=!0),e}checkType(e){var i,a,l,c,f;let t=this.props.currentPopupComponent||((a=(i=this.props.app)==null?void 0:i.state)==null?void 0:a.currentPopupComponent),n=(l=this.popupFactory.getComponent(this.popupSwitch))==null?void 0:l.componentType;return n&&(t=this.isArray(t),e=((f=(c=t[0])==null?void 0:c.getJson())==null?void 0:f.type)===n&&t.length>0),e}render(){var n;let e=this.checkPopupSwitch(!1);e&&(e=this.checkType(e)),this.popupFactory=this.props.factory||this.props.app.state.popupFactory;let t=(n=this.popupFactory)==null?void 0:n.getComponent(this.popupSwitch);return U.jsx(U.Fragment,{children:e&&(t==null?void 0:t.content)&&U.jsx(_r,{content:U.jsx(t.content,{}),popup:!0,type:t.popupType||"biggerCard",theme:t.popupTheme||"Default",handleClose:()=>{if(t.handleClose)t.handleClose();else{let i=this.props.app.state.currentPopupComponent;i&&this.props.app.state.operationsFactory.removeFromList(i),this.props.app.dispatch({currentPopupComponent:void 0,popupSwitch:void 0})}}})})}}class cF extends ca{constructor(){super();he(this,"factory");vn.bind(this),this.getFactory()}getFactory(){return this.factory||(this.factory=new lF),this.factory}createPopupMachine(t){return U.jsx(uF,{app:(t==null?void 0:t.app)||this.getAppComponent(),factory:this.factory})}}let N0=new cF;class hF{constructor(){he(this,"convertStringToLink",e=>e&&(!e.startsWith("http://")&&!e.startsWith("https://")?"https://"+e:e))}isLikelyUrl(e){return/\.(com|net|org|io|gov|edu|co)\b/.test(e)||/^(?:f|ht)tps?\:\/\//.test(e)||/^mailto\:/i.test(e)}checkURLforString(e){return window.location.href.includes(e)}getIdFromURL(e,t){let i=window.location.href.split("/"),a=i[i.length-1],l=e?a.split("-"):[a];return t?l[t]:l[0]}getTypeFromURL(){let t=window.location.href.split("/");return t[t.length-2]}}let L0=new hF;class iI extends ft{constructor(t,n){super(t);he(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:!0},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getList(t,n,i),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}async componentDidMount(){this.getComponentsFromBackend();let t=this;window.addEventListener("popstate",function(n){t.onBackClick(n)})}onBackClick(t){this.getComponentsFromBackend()}componentDidUpdate(){this.getComponentsAgain()}async getComponentsAgain(t,n){this.getFromURL(),(this.app.state.urlChange||this.state.reRender&&this.urlId!==this.state.urlId)&&(await this.setState({urlId:this.urlId}),await this.dispatch({urlChange:void 0}),this.forceRerender=!1,this.getComponentsFromBackend())}async getFromURL(){this.urlType=L0.getTypeFromURL(),this.urlId=L0.getIdFromURL()}}class Xg extends iI{constructor(t,n){super(t,n);he(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:n==null?void 0:n.owner},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getComponents(),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:this.state.owner,ids:n,filterKeys:i,path:a,snapShot:l,typeAttribute:"owner"}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}}class fF extends iI{async getComponentsFromBackend(){await this.getFromURL(),await this.getFirstComponent(),this.comp&&await this.getAssociatedItems(),this.setGotComponents()}async getFirstComponent(e,t){let n=e||this.urlType,i=t||this.urlId;this.comp=this.componentList.getComponent(n,i),this.comp||(this.comp=await this.componentList.getComponentsFromBackend({type:n,ids:i,filterKeys:"_id",owner:this.state.owner}),this.comp=this.comp.length>0?this.comp[0]:void 0)}async getAssociatedItems(){this.compList=await this.comp.getAssociatedItems(this.state.itemTypes),this.compList.length>0&&this.setState({gotComponents:!0}),this.compList=await this.comp.getAssociatedItemsFromBackend(this.state.itemTypes),await this.setCurrentItems()}setCurrentItems(){this.dispatch({currentComponent:this.comp,["current"+this.getCapitalFirstLetter(this.comp.getJson().type)]:this.comp,...this.dispatchItems})}setGotComponents(){this.setState({gotComponents:!0,gotComponentsFromBackend:!0,components:this.compList,urlId:this.urlId})}}class sI extends ft{constructor(e){super(e),this.state={...this.state,email:"",password:""}}validate(){return!0}onChange(e){let{name:t,value:n}=e.target;this.setState({[t]:n})}onSub(){this.validate()&&this.APIService.login(this.state.email,this.state.password)}getSwitchLink(){return U.jsxs("div",{children:["Don't have an Account? ",U.jsx(vr,{to:"/register",children:"Sign Up"})]})}preSetup(){this.setComponents(["container","header","form","submitButton"])}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Login"})}getFormHtml(){let e=U.jsxs(U.Fragment,{children:[U.jsx("div",{children:"Email"}),U.jsx("input",{className:"defaultInputFormAuth",name:"email",onChange:this.onChange,value:this.state.email}),U.jsx("div",{style:{marginTop:"10px"},children:"Password"}),U.jsx("input",{className:"defaultInputFormAuth",name:"password",type:"password",onChange:this.onChange,value:this.state.password})]});return this.form.setClass("defaultLoginForm"),this.form.getHtml({type:"div",content:e})}getSubmitHtml(){return this.submitButton.setClass("defaultLoginButton"),this.submitButton.setOnClick(this.onSub),this.submitButton.getHtml({type:"div",content:"Submit"})}getContainerHtml(){this.container.setClass(this.props.loginContainer||"fitCC");let e=U.jsxs(U.Fragment,{children:[this.getHeaderHtml(),this.getFormHtml(),this.getSubmitHtml(),this.getSwitchLink()]});return this.container.getHtml({type:"div",content:e})}getHtml(){let e=this.getContainerHtml();return U.jsx("div",{className:"fullCCLayoutRow",children:U.jsx(_r,{type:this.props.loginCardType||"biggerCard",content:e})})}}class dF extends sI{async onSub(){if(this.validate()){let e=await this.APIService.register(this.state.email,this.state.password);if(!e.error){let t={type:"user",email:this.state.email,_id:this.state.email};e=await this.componentList.addComponents(t),window.history.pushState({},"","/"),this.dispatch({currentUser:e})}}}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Register"})}getSwitchLink(){return U.jsxs("div",{children:["Have an Account? ",U.jsx(vr,{to:"/login",children:"Login"})]})}}class pF extends ft{constructor(e){super(e),this.state={...this.state,routes:[],loginComp:sI,registerComp:dF}}addToRouter(e){let t=[...this.state.routes,e];this.setState({routes:t})}getRouteMap(e,t){let n=U.jsx(U.Fragment,{});return e&&(e=[...e],n=e==null?void 0:e.map((i,a)=>(i.path||(i.path=this.classNameToString(i.comp),a===0&&(i.path="/")),U.jsxs(U.Fragment,{children:[U.jsx(qo,{path:i.path,element:U.jsx(i.comp,{props:{...t,...i.props}})}),U.jsx(qo,{path:i.path+"/:id",element:U.jsx(i.comp,{props:{...t,...i.props}})})]})))),n}getRoutes(e,t){var i;let n=U.jsxs(Ww,{children:[this.getRouteMap(e,t),this.state.routes.map((a,l)=>U.jsx(U.Fragment,{children:a}))]});return(i=this.app)!=null&&i.state.currentUser||(n=this.getUserAuthRoutes(t)),n}getUserAuthRoutes(e){let t=e.loginComp||this.state.loginComp,n=e.registerComp||this.state.registerComp;return U.jsxs(Ww,{children:[U.jsx(qo,{path:"/",element:U.jsx(t,{props:{...e}})}),U.jsx(qo,{path:"/login",element:U.jsx(t,{props:{...e}})}),U.jsx(qo,{path:"/register",element:U.jsx(n,{props:{...e}})})]})}getHtml(){var a;let e={...this.props};e.app=this.app;let t=(a=this.app)==null?void 0:a.state,n=this.props.routes||(t==null?void 0:t.routes),i=this.getRoutes(n,e);return U.jsx(U.Fragment,{children:i})}}class mF{constructor(){he(this,"registry",{})}getRegistry(){return this.registry}addToRegistry(e,t){this.registry[e]=t}getItemFromRegistry(e){return this.registry[e]}}class gF extends ft{constructor(t,n,i){super(t);he(this,"endpoint");he(this,"db");he(this,"storage");he(this,"auth");he(this,"popupComponents");he(this,"popupComponentsProps");n=this.props.config||n,this.popupComponents=this.props.popupComponents,this.componentListInterface=new B2(this.dispatch,n.endpoint,n.db,n.storage,n.auth),this.componentList=this.componentListInterface.createComponentList(),this.factory=this.componentListInterface.getFactory(),this.operationsFactory=this.componentList.getOperationsFactory(),this.interfaceRegistry=new mF,this.initialPropsSetupFunctions=[this.propogateApp,...this.initialPropsSetupFunctions],this.state={componentList:this.componentList,componentListInterface:this.componentListInterface,operationsFactory:this.operationsFactory,factory:this.factory,theme:this.props.theme||"default",pageClass:this.props.pageClass||"fullScreen",pageStyle:this.props.pageStyle,extraRouteKey:this.props.extraRouteKey||"extraRoutes",navBarProps:this.props.NavBarProps||{},popupFactory:N0.getFactory(),popups:this.props.popups||[],global:this.props.global||{},routes:this.props.routes||[]},i&&this.registerListWithFactory(i)}async checkForUser(){let t=await this.APIService.getCurrentUser();t&&await this.APIService.checkIfLoggedIn()&&this.APIService.getuser(t.email)}componentDidMount(){this.checkForUser()}registerListWithFactory(t){for(let n of t){let a=new n().getJson().type;this.factory.registerComponents({name:a,component:n}),this.createPopupDefaultsByType(a)}}createPopupDefaultsByType(t){var n;if((n=this.popupComponents)!=null&&n[t]){let i=this.getCapitalFirstLetter(t),a={content:this.popupComponents[t],popupSwitch:"add"+i,componentType:t},l={...a,popupSwitch:"update"+i};this.state.popups=[...this.state.popups,a,l]}}dispatch(t){t=t||{},this.setState({...t})}setPopups(){for(let t of this.state.popups){let n=t.componentType;n&&(t={...t,...this.popupComponentsProps[n]}),t.popupSwitch||(t.popupSwitch=this.classNameToString(t.content)),this.state.popupFactory.registerComponent(t.popupSwitch,t)}}propogateApp(){this.app={state:this.state,dispatch:this.dispatch.bind(this),...this.state.global},nI.setAppComponent(this.app),QS.setAppComponent(this.app),LS.setAppComponent(this.app),Yg.setAppComponent(this.app),NS.setAppComponent(this.app)}getHtml(t){this.setPopups();let n=[...this.state.routes];return this.state[this.state.extraRouteKey]&&(n=[...n,...this.state[this.state.extraRouteKey]]),U.jsx("div",{className:this.state.pageClass,style:this.state.pageStyle,children:U.jsxs(E2,{children:[N0.createPopupMachine({app:this.app}),this.state.currentUser&&U.jsx(oF,{...this.state.navBarProps}),t?U.jsx(t.content,{props:{...t.props}}):U.jsx(U.Fragment,{}),U.jsx(pF,{routes:n})]})})}}class oI extends qg{constructor(){super(...arguments);he(this,"factory",{form:GS,map:tI,nav:rI})}}new oI;new oI;class Js extends D2{constructor(t){super(t);he(this,"json",{...this.json,type:"",name:"",owner:"",picURL:""})}}class yF extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,type:"user"})}}class vF extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,type:"contact",phone:"",email:"",conversationIds:[]})}}let _F=class extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,type:"conversation",contactIds:[]})}};class wF extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,type:"template",content:""})}}class EF extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,type:"sequence",steps:[]})}}class TF extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,type:"step",delay:0,messageId:""})}}class aI extends Js{constructor(){super(...arguments);he(this,"json",{...this.json,conversationIds:[],ownerMessage:!1})}}class SF extends aI{constructor(){super(...arguments);he(this,"json",{...this.json,type:"textMessage",content:"",timestamp:""})}}class IF extends aI{constructor(){super(...arguments);he(this,"json",{...this.json,type:"email",subject:"",body:"",timestamp:""})}}const CF=Object.freeze(Object.defineProperty({__proto__:null,Contact:vF,Conversations:_F,Email:IF,Sequence:EF,Step:TF,Template:wF,TextMessage:SF,User:yF},Symbol.toStringTag,{value:"Module"}));class bF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){let e=this.props.obj?"Edit":"Add",t=U.jsx(Ph,{content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("updateContact")&&(t=U.jsx(JS,{obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),U.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"65%"},className:this.props.pageClass||this.state.defaultClass,children:[U.jsxs("h2",{children:[e," Contact"]})," ","First Name:",U.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",U.jsx(cn,{obj:this.props.obj,name:"firstName",inPopup:!0})," "]}),"Last Name:",U.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",U.jsx(cn,{obj:this.props.obj,name:"lastName",inPopup:!0})," "]}),"email",U.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",U.jsx(cn,{obj:this.props.obj,name:"email",inPopup:!0})," "]}),"tags",U.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",U.jsx(cn,{obj:this.props.obj,name:"tags",inPopup:!0})," "]}),"Notes:",U.jsxs("div",{style:{width:"90%",backgroundColor:"white",marginLeft:"10px"},children:[" ",U.jsx(cn,{obj:this.props.obj,type:"quill",name:"notes",inPopup:!0})," "]}),U.jsxs("div",{className:"popupButton",style:{width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",U.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",t]})," "]})]})}}class lI extends ft{constructor(e){super(e),this.state={...this.state,checked:!1,activeBool:!1}}componentDidMount(){this.checkIfActive()}async componentDidUpdate(e,t){var i,a;let n=this.props.obj;n&&((i=this.propsState[this.props.checkKey])!=null&&i.includes(n)&&this.state.activeBool===!1?this.setState({checked:!0,activeBool:!0}):!((a=this.propsState[this.props.checkKey])!=null&&a.includes(n))&&this.state.activeBool===!0&&this.setState({checked:!1,activeBool:!1}))}checkIfActive(){var t;let e=this.props.obj;e&&(t=this.propsState[this.props.checkKey])!=null&&t.includes(e)&&this.setState({checked:!0})}async handleToggle(){await this.setState(e=>({checked:!e.checked})),this.state.checked?this.check(this.props.obj):this.uncheck(this.props.obj)}check(e){this.setState({checked:!0}),this.props.check?this.props.check(e):this.props.cell.check(this.props.obj)}uncheck(e){this.setState({checked:!1}),this.props.uncheck?this.props.uncheck(e):this.props.cell.uncheck(this.props.obj)}render(){const{checked:e}=this.state;return U.jsxs("label",{className:"checkbox-container",children:[this.props.label||"",U.jsx("input",{type:"checkbox",checked:e,onChange:this.handleToggle}),U.jsx("span",{className:"checkmark"})]})}}class AF extends ft{constructor(t){super(t);he(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});he(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}render(){var i;const{obj:t}=this.props;let n=t.getJson();return U.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[U.jsxs("div",{className:"contact-item",children:[U.jsx(lI,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),U.jsx("div",{className:"contact-avatar",children:U.jsx("i",{className:"fa-solid fa-user"})}),U.jsxs("div",{className:"contact-info",children:[U.jsx("div",{onClick:()=>{this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.firstName} ${n.lastName}`}),U.jsx("div",{className:"contact-desc",children:n.company})]}),U.jsx("div",{className:"contact-icon",children:U.jsx("i",{className:"fa-solid fa-message"})})]}),U.jsx("div",{className:"contact-tag-container active",children:(i=n.tags)==null?void 0:i.split(",").map((a,l)=>U.jsx("button",{className:"contact-tag-btn",children:a},l))})]})}}var kc={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var kF=kc.exports,D0;function RF(){return D0||(D0=1,function(r,e){((t,n)=>{r.exports=n()})(kF,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,a=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,c={},f=0,d={};function v(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var k=F(A);k.chunkSize=parseInt(k.chunkSize),A.step||A.chunk||(k.chunkSize=null),this._handle=new S(k),(this._handle.streamer=this)._config=k}).call(this,_),this.parseChunk=function(A,k){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let N=this._config.newline;N||(O=this._config.quoteChar||'"',N=this._handle.guessLineEndings(A,O)),A=[...A.split(N).slice(R)].join(N)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(A))!==void 0&&(A=O),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+A,O=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=O.meta.cursor,R=(this._finished||(this._partialLine=R.substring(A-this._baseIndex),this._baseIndex=A),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)n.postMessage({results:O,workerId:d.WORKER_ID,finished:R});else if(P(this._config.chunk)&&!k){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!R||!P(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(A){P(this._config.error)?this._config.error(A):l&&this._config.error&&n.postMessage({workerId:d.WORKER_ID,error:A,finished:!1})}}function g(_){var A;(_=_||{}).chunkSize||(_.chunkSize=d.RemoteChunkSize),v.call(this,_),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),a||(A.onload=V(this._chunkLoaded,this),A.onerror=V(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var k,R=this._config.downloadRequestHeaders;for(k in R)A.setRequestHeader(k,R[k])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+O));try{A.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}a&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(k=>(k=k.getResponseHeader("Content-Range"))!==null?parseInt(k.substring(k.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(k){k=A.statusText||k,this._sendError(new Error(k))}}function p(_){(_=_||{}).chunkSize||(_.chunkSize=d.LocalChunkSize),v.call(this,_);var A,k,R=typeof FileReader<"u";this.stream=function(O){this._input=O,k=O.slice||O.webkitSlice||O.mozSlice,R?((A=new FileReader).onload=V(this._chunkLoaded,this),A.onerror=V(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,N=(this._config.chunkSize&&(N=Math.min(this._start+this._config.chunkSize,this._input.size),O=k.call(O,this._start,N)),A.readAsText(O,this._config.encoding));R||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(A.error)}}function y(_){var A;v.call(this,_=_||{}),this.stream=function(k){return A=k,this._nextChunk()},this._nextChunk=function(){var k,R;if(!this._finished)return k=this._config.chunkSize,A=k?(R=A.substring(0,k),A.substring(k)):(R=A,""),this._finished=!A,this.parseChunk(R)}}function T(_){v.call(this,_=_||{});var A=[],k=!0,R=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):k=!0},this._streamData=V(function(O){try{A.push(typeof O=="string"?O:O.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(N){this._streamError(N)}},this),this._streamError=V(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=V(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(_){var A,k,R,O,N=Math.pow(2,53),$=-N,Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,re=0,G=0,W=!1,M=!1,B=[],z={data:[],errors:[],meta:{}};function ee(ne){return _.skipEmptyLines==="greedy"?ne.join("").trim()==="":ne.length===1&&ne[0].length===0}function X(){if(z&&R&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),R=!1),_.skipEmptyLines&&(z.data=z.data.filter(function(ke){return!ee(ke)})),H()){let ke=function(Re,Oe){P(_.transformHeader)&&(Re=_.transformHeader(Re,Oe)),B.push(Re)};var ye=ke;if(z)if(Array.isArray(z.data[0])){for(var ne=0;H()&&ne<z.data.length;ne++)z.data[ne].forEach(ke);z.data.splice(0,1)}else z.data.forEach(ke)}function ie(ke,Re){for(var Oe=_.header?{}:[],De=0;De<ke.length;De++){var Ue=De,et=ke[De],et=((ue,de)=>(Ee=>(_.dynamicTypingFunction&&_.dynamicTyping[Ee]===void 0&&(_.dynamicTyping[Ee]=_.dynamicTypingFunction(Ee)),(_.dynamicTyping[Ee]||_.dynamicTyping)===!0))(ue)?de==="true"||de==="TRUE"||de!=="false"&&de!=="FALSE"&&((Ee=>{if(Q.test(Ee)&&(Ee=parseFloat(Ee),$<Ee&&Ee<N))return 1})(de)?parseFloat(de):se.test(de)?new Date(de):de===""?null:de):de)(Ue=_.header?De>=B.length?"__parsed_extra":B[De]:Ue,et=_.transform?_.transform(et,Ue):et);Ue==="__parsed_extra"?(Oe[Ue]=Oe[Ue]||[],Oe[Ue].push(et)):Oe[Ue]=et}return _.header&&(De>B.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+De,G+Re):De<B.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+De,G+Re)),Oe}var fe;z&&(_.header||_.dynamicTyping||_.transform)&&(fe=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(ie),fe=z.data.length):z.data=ie(z.data,0),_.header&&z.meta&&(z.meta.fields=B),G+=fe)}function H(){return _.header&&B.length===0}function Y(ne,ie,fe,ye){ne={type:ne,code:ie,message:fe},ye!==void 0&&(ne.row=ye),z.errors.push(ne)}P(_.step)&&(O=_.step,_.step=function(ne){z=ne,H()?X():(X(),z.data.length!==0&&(re+=ne.data.length,_.preview&&re>_.preview?k.abort():(z.data=z.data[0],O(z,Z))))}),this.parse=function(ne,ie,fe){var ye=_.quoteChar||'"',ye=(_.newline||(_.newline=this.guessLineEndings(ne,ye)),R=!1,_.delimiter?P(_.delimiter)&&(_.delimiter=_.delimiter(ne),z.meta.delimiter=_.delimiter):((ye=((ke,Re,Oe,De,Ue)=>{var et,ue,de,Ee;Ue=Ue||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var be=0;be<Ue.length;be++){for(var ge,$e=Ue[be],Fe=0,Be=0,We=0,Xe=(de=void 0,new E({comments:De,delimiter:$e,newline:Re,preview:10}).parse(ke)),Ze=0;Ze<Xe.data.length;Ze++)Oe&&ee(Xe.data[Ze])?We++:(ge=Xe.data[Ze].length,Be+=ge,de===void 0?de=ge:0<ge&&(Fe+=Math.abs(ge-de),de=ge));0<Xe.data.length&&(Be/=Xe.data.length-We),(ue===void 0||Fe<=ue)&&(Ee===void 0||Ee<Be)&&1.99<Be&&(ue=Fe,et=$e,Ee=Be)}return{successful:!!(_.delimiter=et),bestDelimiter:et}})(ne,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=ye.bestDelimiter:(R=!0,_.delimiter=d.DefaultDelimiter),z.meta.delimiter=_.delimiter),F(_));return _.preview&&_.header&&ye.preview++,A=ne,k=new E(ye),z=k.parse(A,ie,fe),X(),W?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,k.abort(),A=P(_.chunk)?"":A.substring(k.getCharIndex())},this.resume=function(){Z.streamer._halted?(W=!1,Z.streamer.parseChunk(A,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,k.abort(),z.meta.aborted=!0,P(_.complete)&&_.complete(z),A=""},this.guessLineEndings=function(ke,ye){ke=ke.substring(0,1048576);var ye=new RegExp(w(ye)+"([^]*?)"+w(ye),"gm"),fe=(ke=ke.replace(ye,"")).split("\r"),ye=ke.split(`
`),ke=1<ye.length&&ye[0].length<fe[0].length;if(fe.length===1||ke)return`
`;for(var Re=0,Oe=0;Oe<fe.length;Oe++)fe[Oe][0]===`
`&&Re++;return Re>=fe.length/2?`\r
`:"\r"}}function w(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(_){var A=(_=_||{}).delimiter,k=_.newline,R=_.comments,O=_.step,N=_.preview,$=_.fastMode,Q=null,se=!1,Z=_.quoteChar==null?'"':_.quoteChar,re=Z;if(_.escapeChar!==void 0&&(re=_.escapeChar),(typeof A!="string"||-1<d.BAD_DELIMITERS.indexOf(A))&&(A=","),R===A)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<d.BAD_DELIMITERS.indexOf(R))&&(R=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var G=0,W=!1;this.parse=function(M,B,z){if(typeof M!="string")throw new Error("Input must be a string");var ee=M.length,X=A.length,H=k.length,Y=R.length,ne=P(O),ie=[],fe=[],ye=[],ke=G=0;if(!M)return Fe();if($||$!==!1&&M.indexOf(Z)===-1){for(var Re=M.split(k),Oe=0;Oe<Re.length;Oe++){if(ye=Re[Oe],G+=ye.length,Oe!==Re.length-1)G+=k.length;else if(z)return Fe();if(!R||ye.substring(0,Y)!==R){if(ne){if(ie=[],Ee(ye.split(A)),Be(),W)return Fe()}else Ee(ye.split(A));if(N&&N<=Oe)return ie=ie.slice(0,N),Fe(!0)}}return Fe()}for(var De=M.indexOf(A,G),Ue=M.indexOf(k,G),et=new RegExp(w(re)+w(Z),"g"),ue=M.indexOf(Z,G);;)if(M[G]===Z)for(ue=G,G++;;){if((ue=M.indexOf(Z,ue+1))===-1)return z||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:G}),ge();if(ue===ee-1)return ge(M.substring(G,ue).replace(et,Z));if(Z===re&&M[ue+1]===re)ue++;else if(Z===re||ue===0||M[ue-1]!==re){De!==-1&&De<ue+1&&(De=M.indexOf(A,ue+1));var de=be((Ue=Ue!==-1&&Ue<ue+1?M.indexOf(k,ue+1):Ue)===-1?De:Math.min(De,Ue));if(M.substr(ue+1+de,X)===A){ye.push(M.substring(G,ue).replace(et,Z)),M[G=ue+1+de+X]!==Z&&(ue=M.indexOf(Z,G)),De=M.indexOf(A,G),Ue=M.indexOf(k,G);break}if(de=be(Ue),M.substring(ue+1+de,ue+1+de+H)===k){if(ye.push(M.substring(G,ue).replace(et,Z)),$e(ue+1+de+H),De=M.indexOf(A,G),ue=M.indexOf(Z,G),ne&&(Be(),W))return Fe();if(N&&ie.length>=N)return Fe(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:G}),ue++}}else if(R&&ye.length===0&&M.substring(G,G+Y)===R){if(Ue===-1)return Fe();G=Ue+H,Ue=M.indexOf(k,G),De=M.indexOf(A,G)}else if(De!==-1&&(De<Ue||Ue===-1))ye.push(M.substring(G,De)),G=De+X,De=M.indexOf(A,G);else{if(Ue===-1)break;if(ye.push(M.substring(G,Ue)),$e(Ue+H),ne&&(Be(),W))return Fe();if(N&&ie.length>=N)return Fe(!0)}return ge();function Ee(We){ie.push(We),ke=G}function be(We){var Xe=0;return Xe=We!==-1&&(We=M.substring(ue+1,We))&&We.trim()===""?We.length:Xe}function ge(We){return z||(We===void 0&&(We=M.substring(G)),ye.push(We),G=ee,Ee(ye),ne&&Be()),Fe()}function $e(We){G=We,Ee(ye),ye=[],Ue=M.indexOf(k,G)}function Fe(We){if(_.header&&!B&&ie.length&&!se){var Xe=ie[0],Ze={},Yn=new Set(Xe);let ut=!1;for(let St=0;St<Xe.length;St++){let zt=Xe[St];if(Ze[zt=P(_.transformHeader)?_.transformHeader(zt,St):zt]){let Xn,_i=Ze[zt];for(;Xn=zt+"_"+_i,_i++,Yn.has(Xn););Yn.add(Xn),Xe[St]=Xn,Ze[zt]++,ut=!0,(Q=Q===null?{}:Q)[Xn]=zt}else Ze[zt]=1,Xe[St]=zt;Yn.add(zt)}ut&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:ie,errors:fe,meta:{delimiter:A,linebreak:k,aborted:W,truncated:!!We,cursor:ke+(B||0),renamedHeaders:Q}}}function Be(){O(Fe()),ie=[],fe=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return G}}function I(_){var A=_.data,k=c[A.workerId],R=!1;if(A.error)k.userError(A.error,A.file);else if(A.results&&A.results.data){var O={abort:function(){R=!0,L(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(P(k.userStep)){for(var N=0;N<A.results.data.length&&(k.userStep({data:A.results.data[N],errors:A.results.errors,meta:A.results.meta},O),!R);N++);delete A.results}else P(k.userChunk)&&(k.userChunk(A.results,O,A.file),delete A.results)}A.finished&&!R&&L(A.workerId,A.results)}function L(_,A){var k=c[_];P(k.userComplete)&&k.userComplete(A),k.terminate(),delete c[_]}function b(){throw new Error("Not implemented.")}function F(_){if(typeof _!="object"||_===null)return _;var A,k=Array.isArray(_)?[]:{};for(A in _)k[A]=F(_[A]);return k}function V(_,A){return function(){_.apply(A,arguments)}}function P(_){return typeof _=="function"}return d.parse=function(_,A){var k=(A=A||{}).dynamicTyping||!1;if(P(k)&&(A.dynamicTypingFunction=k,k={}),A.dynamicTyping=k,A.transform=!!P(A.transform)&&A.transform,!A.worker||!d.WORKERS_SUPPORTED)return k=null,d.NODE_STREAM_INPUT,typeof _=="string"?(_=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(_),k=new(A.download?g:y)(A)):_.readable===!0&&P(_.read)&&P(_.on)?k=new T(A):(n.File&&_ instanceof File||_ instanceof Object)&&(k=new p(A)),k.stream(_);(k=(()=>{var R;return!!d.WORKERS_SUPPORTED&&(R=(()=>{var O=n.URL||n.webkitURL||null,N=t.toString();return d.BLOB_URL||(d.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",N,")();"],{type:"text/javascript"})))})(),(R=new n.Worker(R)).onmessage=I,R.id=f++,c[R.id]=R)})()).userStep=A.step,k.userChunk=A.chunk,k.userComplete=A.complete,k.userError=A.error,A.step=P(A.step),A.chunk=P(A.chunk),A.complete=P(A.complete),A.error=P(A.error),delete A.worker,k.postMessage({input:_,config:A,workerId:k.id})},d.unparse=function(_,A){var k=!1,R=!0,O=",",N=`\r
`,$='"',Q=$+$,se=!1,Z=null,re=!1,G=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||d.BAD_DELIMITERS.filter(function(B){return A.delimiter.indexOf(B)!==-1}).length||(O=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(k=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(se=A.skipEmptyLines),typeof A.newline=="string"&&(N=A.newline),typeof A.quoteChar=="string"&&($=A.quoteChar),typeof A.header=="boolean"&&(R=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");Z=A.columns}A.escapeChar!==void 0&&(Q=A.escapeChar+$),A.escapeFormulae instanceof RegExp?re=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(w($),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return W(null,_,se);if(typeof _[0]=="object")return W(Z||Object.keys(_[0]),_,se)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||Z),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),W(_.fields||[],_.data||[],se);throw new Error("Unable to serialize unrecognized input");function W(B,z,ee){var X="",H=(typeof B=="string"&&(B=JSON.parse(B)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(B)&&0<B.length),Y=!Array.isArray(z[0]);if(H&&R){for(var ne=0;ne<B.length;ne++)0<ne&&(X+=O),X+=M(B[ne],ne);0<z.length&&(X+=N)}for(var ie=0;ie<z.length;ie++){var fe=(H?B:z[ie]).length,ye=!1,ke=H?Object.keys(z[ie]).length===0:z[ie].length===0;if(ee&&!H&&(ye=ee==="greedy"?z[ie].join("").trim()==="":z[ie].length===1&&z[ie][0].length===0),ee==="greedy"&&H){for(var Re=[],Oe=0;Oe<fe;Oe++){var De=Y?B[Oe]:Oe;Re.push(z[ie][De])}ye=Re.join("").trim()===""}if(!ye){for(var Ue=0;Ue<fe;Ue++){0<Ue&&!ke&&(X+=O);var et=H&&Y?B[Ue]:Ue;X+=M(z[ie][et],Ue)}ie<z.length-1&&(!ee||0<fe&&!ke)&&(X+=N)}}return X}function M(B,z){var ee,X;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(X=!1,re&&typeof B=="string"&&re.test(B)&&(B="'"+B,X=!0),ee=B.toString().replace(G,Q),(X=X||k===!0||typeof k=="function"&&k(B,z)||Array.isArray(k)&&k[z]||((H,Y)=>{for(var ne=0;ne<Y.length;ne++)if(-1<H.indexOf(Y[ne]))return!0;return!1})(ee,d.BAD_DELIMITERS)||-1<ee.indexOf(O)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?$+ee+$:ee)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!n.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=E,d.ParserHandle=S,d.NetworkStreamer=g,d.FileStreamer=p,d.StringStreamer=y,d.ReadableStreamStreamer=T,n.jQuery&&((i=n.jQuery).fn.parse=function(_){var A=_.config||{},k=[];return this.each(function(N){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)k.push({file:this.files[$],inputElem:this,instanceConfig:i.extend({},A)})}),R(),this;function R(){if(k.length===0)P(_.complete)&&_.complete();else{var N,$,Q,se,Z=k[0];if(P(_.before)){var re=_.before(Z.file,Z.inputElem);if(typeof re=="object"){if(re.action==="abort")return N="AbortError",$=Z.file,Q=Z.inputElem,se=re.reason,void(P(_.error)&&_.error({name:N},$,Q,se));if(re.action==="skip")return void O();typeof re.config=="object"&&(Z.instanceConfig=i.extend(Z.instanceConfig,re.config))}else if(re==="skip")return void O()}var G=Z.instanceConfig.complete;Z.instanceConfig.complete=function(W){P(G)&&G(W,Z.file,Z.inputElem),O()},d.parse(Z.file,Z.instanceConfig)}}function O(){k.splice(0,1),R()}}),l&&(n.onmessage=function(_){_=_.data,d.WORKER_ID===void 0&&_&&(d.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:d.WORKER_ID,results:d.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=d.parse(_.input,_.config))&&n.postMessage({workerId:d.WORKER_ID,results:_,finished:!0})}),(g.prototype=Object.create(v.prototype)).constructor=g,(p.prototype=Object.create(v.prototype)).constructor=p,(y.prototype=Object.create(y.prototype)).constructor=y,(T.prototype=Object.create(v.prototype)).constructor=T,d})}(kc)),kc.exports}var PF=RF();const OF=Mm(PF);class xF extends ve.Component{constructor(e){super(e),this.state={data:[]},this.handleFileUpload=this.handleFileUpload.bind(this)}handleFileUpload(e){const t=e.target.files[0];t&&OF.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{console.log("Parsed CSV data:",n.data),this.props.callBack({data:n.data})},error:n=>{console.error("Error while parsing:",n)}})}render(){return this.state,U.jsxs("div",{className:"",style:{position:"relative"},children:[U.jsx("label",{htmlFor:"file-upload",className:"custom-file-upload",children:"Upload"}),U.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:this.handleFileUpload})]})}}class NF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let a of e){let l=t.filter(c=>c.getJson().tags.includes(a));n=[...n,...l]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){var e,t;return U.jsxs("div",{className:"mobile-container",children:[U.jsxs("div",{className:"top-nav-float",children:[U.jsxs("nav",{className:"top-nav",children:[U.jsxs("div",{className:"nav-left",children:[U.jsx("div",{className:"nav-icon",children:U.jsx("i",{className:"fas fa-circle"})}),U.jsx("div",{className:"nav-title",children:"Contacts"})]}),U.jsxs("div",{className:"nav-right",children:[U.jsx("div",{className:"nav-icon",children:U.jsxs("button",{className:"btn",children:["A to Z ",U.jsx("i",{className:"fa-solid fa-angle-down"})]})}),U.jsx("div",{className:"nav-icon",children:U.jsx("button",{className:"btn",children:U.jsx("i",{className:"fa-solid fa-filter"})})})]})]}),U.jsx("div",{className:"search-container",children:U.jsxs("div",{className:"search-bar",children:[U.jsx("i",{className:"fas fa-search search-icon"}),U.jsx("input",{onChange:n=>{this.dispatch({tags:n.target.value})},className:"search-input",placeholder:"Search"})]})}),U.jsxs("div",{className:"filter-nav",children:[U.jsxs("div",{className:"filter-nav-left",children:[U.jsx(lI,{check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}}),"Select all ",(e=this.propsState.selectedContacts)!=null&&e.length?this.propsState.selectedContacts.length+" Selected":""]}),U.jsxs("div",{className:"filter-nav-right",children:[U.jsx(xF,{callBack:async n=>{n=n.data.map((i,a)=>(i.owner=this.propsState.currentUser.getJson()._id,i.type="contact",i)),this.dispatch({uploadData:n,popupSwitch:"uploadData"}),await this.operationsFactory.prepare({prepare:n}),this.operationsFactory.run()}}),U.jsx(Dm,{formclassName:"FCImgButton",wrapperclassName:"none",content:U.jsx("div",{className:"btn-gray",children:"Add Contact"}),popupSwitch:"addContact"})]})]})]}),U.jsx(Jn,{filterFunc:n=>{if(!this.propsState.tags)return!0;let i=this.propsState.tags.split(",");for(let a of i)if(a!==""&&n.getJson().tags.includes(a))return!0;return!1},name:"contact",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:AF}],hasLink:!0}),((t=this.propsState.selectedContacts)==null?void 0:t.length)>0&&U.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[U.jsx("button",{className:"floating-select-btn",children:U.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),U.jsx("button",{onClick:()=>{for(let n of this.propsState.selectedContacts)n.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:U.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),U.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:U.jsx(Dm,{formclassName:"FCImgButton",content:U.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{marginLeft:"300px",width:"80%"},children:this.getInnerContent()})}}class M0 extends Xg{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:U.jsx(_r,{theme:"NoBorder",type:"fit",content:U.jsx(NF,{})})})}}class LF extends ft{getTimeStampStr(){var t,n;let e;try{e=(n=(t=this.props.obj)==null?void 0:t.getJson())==null?void 0:n.timeStamp}catch(i){return console.error("Error accessing timestamp property:",i),"Invalid Date"}if(e&&e instanceof Lt)try{return e.toDate().toLocaleDateString()}catch(i){return console.error("Error converting Firebase Timestamp to Date:",i),"Invalid Date"}else return e?(console.warn("Received timeValue is not a Firebase Timestamp:",e),String(e)):""}render(){return U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:"message-header",children:[U.jsx("span",{className:"sender",children:this.props.obj.getJson().senderName}),U.jsx("span",{className:"date",children:this.getTimeStampStr()})]}),U.jsx("div",{className:"snippet",children:this.props.obj.getJson().recentMessage})]})}}const DF="/assets/contactpng-NN1s-BJc.png";class MF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit messages-container"}}searchFilter(){}getInnerContent(){return U.jsx(Jn,{name:"conversation",mapContainerClass:"message-list-scai",mapSectionClass:"message-item-scai",cells:[{type:"customBuilt",custom:U.jsx("img",{style:{width:"50px"},src:DF}),wrapperStyle:{width:"50px"},itemStyle:{width:"50px"}},{type:"custom",custom:LF,itemClick:e=>{this.dispatch({currentConversation:e}),e.setCompState({seen:!0})}}],filterFunc:e=>{var a,l;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;(a=e.getJson().senderName)!=null&&a.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0);let i=this.componentList.getList("email",e.getJson()._id,"conversationId");for(let c of i)(l=c.getJson().body)!=null&&l.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0);return t}})}render(){return U.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[U.jsx("div",{className:"header",children:"Messages"}),U.jsx("div",{className:"search-bar",children:U.jsx("input",{type:"text",placeholder:"Search messages...",onChange:e=>{this.dispatch({searchText:e.target.value})}})}),this.getInnerContent()]})}}class FF extends ft{render(){let e=this.props.obj.getJson().ownerMessage?"outgoing":"incoming";return U.jsxs(U.Fragment,{children:[U.jsx("div",{className:"timestamp",children:this.props.obj.getJson().timeStamp}),U.jsx("div",{className:"message "+e,children:this.props.obj.getJson().body})]})}}class jF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",currentConversation:null}}async componentDidMount(){await this.prepareMessages()}async prepareMessages(){let e=this.propsState.currentConversation;e||(e=this.componentList.getComponent("conversation"),await this.dispatch({currentConversation:e})),e?(await this.prepNewMessage(),this.setState({start:!0})):this.setState({message:"no current conversations"})}async prepNewMessage(){let e=this.propsState.currentConversation;const t=e.getJson().messageType||"email";let n=this.componentList.getList("email",this.propsState.currentConversation.getJson()._id,"conversationId");n=n[n.length-1];let i=n.getJson().originalMessageId,a=n.getJson().subject;const l=await this.operationsFactory.prepare({prepare:{type:t,conversationId:e.getJson()._id,originalMessageId:i,subject:a,ownerMessage:!0}});this.dispatch({currentComponent:l[0]})}getInnerContent(){const{currentConversation:e}=this.propsState;return U.jsx("div",{className:"layoutColumn fit conversation-container",style:{padding:"20px",width:"85%",height:"95%"},children:this.state.message?U.jsx(U.Fragment,{children:this.state.message}):U.jsx(U.Fragment,{children:this.state.start&&U.jsxs(U.Fragment,{children:[U.jsx(Jn,{mapContainerClass:"message-list",name:(e==null?void 0:e.getJson().messageType)||"email",cells:[{type:"custom",custom:FF}],filter:{search:this.propsState.currentConversation.getJson()._id,attribute:"conversationId"}}),U.jsx(cn,{wrapperClass:"search-bar",formClass:"search-input",name:"body",obj:this.propsState.currentComponent}),U.jsx(Ph,{content:U.jsx("img",{alt:"peterAddSend"}),callbackFunc:()=>{let t=this.propsState.currentComponent;this.prepNewMessage();let n={originalMessageId:t.getJson().originalMessageId,from:t.getJson().owner,to:this.propsState.currentConversation.getJson().recipient,subject:t.getJson().subject,text:t.getJson().body};fetch("https://sendgridreplythread-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);return i.json()}).then(i=>{console.log("Reply sent successfully in thread.",i)}).catch(i=>{console.error("Error sending reply:",i)})}})]})})})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class VF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.componentList.getComponentsFromBackend({type:"conversation",ids:this.propsState.currentUser.getJson()._id,filterKeys:"owner"}),this.setState({start:!0})}getInnerContent(){return U.jsxs("div",{className:"layoutRow",style:{width:"100%",height:"100%"},children:[U.jsx("div",{style:{width:"50%",padding:"10px"},children:this.state.start&&U.jsx(_r,{theme:"defaultCard",content:U.jsx(MF,{})})}),U.jsx("div",{style:{width:"50%",padding:"10px"},children:this.state.start&&U.jsx(_r,{theme:"defaultCard",content:U.jsx(jF,{})})})]})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class UF extends Xg{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.dispatch({currentTopic:void 0,currentSubTopic:void 0,currentComponent:void 0}),this.getComponentsFromBackend()}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{padding:"20px"},children:U.jsx("div",{className:"fit",style:{width:"50%",marginLeft:"300px",height:"60%"},children:U.jsx(_r,{theme:"defaultCard",content:U.jsx(VF,{})})})})}}class BF extends ft{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return U.jsxs("div",{className:"sequence",children:[U.jsxs("div",{className:"title",children:[U.jsx(vr,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.name}),U.jsx(vr,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]}),U.jsx(YS,{obj:e})]})}}class qF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return U.jsxs("div",{className:"fit",children:[U.jsx("h4",{style:{marginBottom:"10px"},children:"Sequences"}),U.jsx(Jn,{name:"sequence",cells:[{type:"custom",custom:BF}]})]})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class zF extends ft{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return U.jsx("div",{className:"sequence",children:U.jsxs("div",{className:"title",children:[U.jsx(vr,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.name}),U.jsx(vr,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class HF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return U.jsxs(U.Fragment,{children:[U.jsx("h4",{style:{marginBottom:"10px"},children:"Templates"}),U.jsx(Jn,{name:"template",cells:[{type:"custom",custom:zF}]})]})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class $F extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return U.jsxs("div",{className:"mobile-container",style:{width:"80%",marginLeft:"300px"},children:[U.jsxs("div",{className:"top-nav-float",children:[U.jsx("nav",{className:"top-nav",children:U.jsxs("div",{className:"nav-left",children:[U.jsx("div",{className:"nav-icon",children:U.jsx("i",{className:"fas fa-circle"})}),U.jsx("div",{className:"title-name",children:"Content"})]})}),U.jsx("div",{className:"search-container",children:U.jsxs("div",{className:"search-bar",children:[U.jsx("i",{className:"fas fa-search search-icon"}),U.jsx("input",{onChange:e=>{this.dispatch({tags:e.target.value})},className:"search-input",placeholder:"Search"})]})}),U.jsx("div",{className:"filter",children:U.jsxs("div",{className:"row row-space-between",children:[U.jsx(vr,{to:"/sequence",className:"btn-gray",children:"New Sequence"}),U.jsx(vr,{to:"/template",className:"btn-gray",children:"New Template"}),U.jsx("div",{className:"btn-gray",children:"New AI"})]})})]}),U.jsx("div",{children:U.jsx(_r,{theme:"defaultCard",content:U.jsx(qF,{})})}),U.jsx("div",{children:U.jsx(_r,{theme:"defaultCard",content:U.jsx(HF,{})})})]})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class WF extends Xg{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.propsState.currentUser.getJson()._id}}async componentDidMount(){this.getComponentsFromBackend()}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.state.gotComponents&&U.jsx(_r,{theme:"NoBorder",type:"fit",content:U.jsx($F,{})})})}}class KF extends ft{constructor(e){super(e)}render(){return U.jsxs("div",{onClick:()=>{this.dispatch({popupSwitch:"updateStep",currentPopupComponent:this.props.obj})},children:[U.jsxs("div",{className:"icon-row",children:[U.jsx("div",{className:"icon-container",children:U.jsx("div",{className:"icon",children:U.jsx("i",{className:"fa-solid fa-envelope"})})}),U.jsxs("div",{className:"message-container",children:[U.jsx("b",{children:this.props.obj.getJson().subject}),U.jsx("br",{}),U.jsx("span",{children:this.props.obj.getJson().content})]})]}),U.jsxs("div",{className:"icon-row",children:[U.jsx("div",{className:"icon-container",children:U.jsx("div",{className:"svg",children:U.jsx("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:U.jsx("line",{x1:"50%",y1:"0",x2:"50%",y2:"50",stroke:"var(--app-green)",strokeWidth:"3"})})})}),U.jsx("div",{})]})]})}}class GF extends fF{async componentDidMount(){let e;await this.getComponentsFromBackend(),e=this.comp,e?await this.componentList.getComponentsFromBackend({type:"step",ids:e.getJson()._id,filterKeys:"sequenceId"}):(e=await this.operationsFactory.prepare({prepare:{type:"sequence"},clean:!0}),e=e[0]),await this.dispatch({currentSequence:e})}async createStep(e){let t=this.componentList.getList("step",e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,"sequenceId");const n=await this.operationsFactory.prepare({prepare:{type:"step",sequenceId:e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,step:t.length}});this.dispatch({currentStep:n.length===2?n[1]:n[0]})}getStepJson(){var n,i;let e=this.componentList.getList("step",(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,"sequenceId");return{type:"step",sequenceId:(i=this.propsState.currentSequence)==null?void 0:i.getJson()._id,step:e.length}}getInnerContent(){var e,t,n;return U.jsx("div",{className:"fit",children:U.jsxs("div",{className:"mobile-container",children:[U.jsxs("div",{className:"title-bar",children:[U.jsxs("div",{className:"title-left",children:[U.jsx("div",{className:"title-icon",children:U.jsx("i",{className:"fas fa-angle-left"})}),((e=this.propsState.currentSequence)==null?void 0:e.getJson().name)===""||this.state.edit?U.jsxs(U.Fragment,{children:[U.jsx(cn,{obj:this.propsState.currentSequence,name:"name"}),U.jsx(Ph,{callbackFunc:()=>{this.setState({edit:!1}),this.propsState.currentSequence.update()},content:"save"})]}):U.jsx(U.Fragment,{children:U.jsxs("div",{className:"title-name",children:[(t=this.propsState.currentSequence)==null?void 0:t.getJson().name,U.jsx("span",{onClick:()=>{this.setState({edit:!0})},children:"edit"})]})})]}),U.jsxs("div",{className:"title-right",children:[U.jsx("div",{className:"title-icon",children:U.jsx("i",{className:"fas fa-circle"})}),U.jsx("div",{className:"title-name",children:"Active"})]})]}),U.jsx("div",{className:"switch-tab",children:U.jsxs("div",{className:"row row-space-around",children:[U.jsxs("div",{className:"switch-tab-btn",children:["Assigned",U.jsx("br",{}),"Prospects"]}),U.jsxs("div",{className:"switch-tab-btn active",children:["Sequence",U.jsx("br",{}),"Steps"]})]})}),U.jsxs("div",{className:"icon-list",children:[U.jsx(Jn,{name:"step",mapSectionClass:"none",mapContainerClass:"none",filter:{search:(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,attribute:"sequenceId"},filterFunc:i=>!(i.getJson().content===void 0||i.getJson().content===""),cells:[{type:"custom",custom:KF,wrapperClass:"none"}]}),U.jsx(Dm,{formClass:"svg-last",wrapperClass:"icon-row",newProp:"asdf",obj:this.getStepJson(),content:U.jsxs(U.Fragment,{children:[U.jsx("svg",{width:"50",height:"100",xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M25,0 V50 Q25,70 50,70 H50",fill:"none",stroke:"var(--app-green)",strokeWidth:"3",strokeLinecap:"round"})}),U.jsx("div",{className:"icon-last",children:U.jsx("i",{className:"fa-solid fa-plus"})})]}),popupSwitch:"addStep"}),U.jsx("div",{className:"icon-row",children:U.jsx("div",{className:"svg-last"})})]})]})})}render(){return U.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{marginLeft:"300px"},children:this.getInnerContent()})}}class QF extends ft{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return U.jsx("div",{className:"sequence",children:U.jsx("div",{onClick:()=>{debugger;let n=this.props.obj,i=this.propsState.selectedContacts,a=this.componentList.getList("step",[n.getJson()._id,0],["sequenceId","step"])[0];if((i==null?void 0:i.length)>0){let l=parseFloat(a.getJson().nextSend),c=new Date(Date.now()+l*60*60*1e3);c=Lt.fromDate(c);for(let f of i)f.setCompState({sequenceId:n.getJson()._id,finished:!1,emailNumber:0,nextSend:c},{run:!0});this.dispatch({popupSwitch:"",selectedContacts:[]})}},className:"title",children:U.jsx("div",{className:"title-left",children:t.name})})})}}class JF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var e;return U.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"65%"},className:this.props.pageClass||this.state.defaultClass,children:[U.jsx("h2",{children:"Add to Sequence"})," ","contacts: ",((e=this.propsState.selectedContacts)==null?void 0:e.length)||"0",U.jsx(Jn,{name:"sequence",cells:[{type:"custom",custom:QF}]})]})}}class YF extends ft{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){this.props.obj;let e=U.jsx(Ph,{content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(e=U.jsx(JS,{obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),U.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"65%"},className:this.props.pageClass||this.state.defaultClass,children:[U.jsx(U.Fragment,{children:"subject"}),U.jsx(cn,{obj:this.propsState.currentPopupComponent,name:"subject"}),U.jsx(U.Fragment,{children:"content"}),U.jsx(cn,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"}),U.jsx(U.Fragment,{children:"next send in days"}),U.jsx(cn,{obj:this.propsState.currentPopupComponent,name:"nextSend"}),this.propsState.popupSwitch.includes("update")&&U.jsx(YS,{obj:this.propsState.currentPopupComponent,callbackFunc:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}}),U.jsx(wM,{obj:this.propsState.currentPopupComponent,content:U.jsx("img",{alt:"PETER:addImage"})}),U.jsxs("div",{className:"popupButton",style:{width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",U.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",e]})," "]})]})}}const XF="/assets/scailogofake-B3YGBRpn.png";class ZF extends gF{constructor(e){super(e,{db:sL,endpoint:"salescaptureAI",auth:oL,storage:iL}),this.popupComponents={contact:bF,step:YF},this.popupComponentsProps={};let t={type:"user",owner:"alan@salescapture.com",email:"alan@salescapture.com",_id:"alan@salescapture.com"};this.state={...this.state,navBarProps:{style:{backgroundColor:"#35b593",color:"white"},cardStyle:{backgroundColor:"#35b593"},logoURL:XF,linkItemStyle:{color:"white"}},routes:[{comp:ej,name:"Home",path:"/"},{comp:UF,name:"Messages",path:"conversation"},{comp:M0,name:"Contacts",path:"contacts"},{comp:M0,name:"Research",path:"contacts"},{comp:WF,name:"Content",path:"content"},{comp:GF,name:"",path:"sequence"}],popups:[{content:JF,popupSwitch:"addToSequence"}]},this.registerListWithFactory([...Object.values(CF)]);let n=Yg.getNavList();n.update(0,{class:"SCAILogo"}),n.update(1,{activeClass:"SCAILink"}),this.getUser(t)}async getUser(e){await this.componentList.addComponents([e],!0),e=this.componentList.getComponent("user"),this.state.currentUser=e}}class ej extends ft{}wC.createRoot(document.getElementById("root")).render(U.jsx(ve.StrictMode,{children:U.jsx(ZF,{})}));
