var YC=Object.defineProperty;var XC=(r,e,t)=>e in r?YC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var he=(r,e,t)=>XC(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vd={exports:{}},rl={},_d={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function ZC(){if(v_)return nt;v_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function m(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function w(j,B,z){this.props=j,this.context=B,this.refs=S,this.updater=z||y}w.prototype.isReactComponent={},w.prototype.setState=function(j,B){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,B,"setState")},w.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function E(){}E.prototype=w.prototype;function b(j,B,z){this.props=j,this.context=B,this.refs=S,this.updater=z||y}var O=b.prototype=new E;O.constructor=b,T(O,w.prototype),O.isPureReactComponent=!0;var C=Array.isArray,F=Object.prototype.hasOwnProperty,U={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function _(j,B,z){var ee,X={},H=null,Y=null;if(B!=null)for(ee in B.ref!==void 0&&(Y=B.ref),B.key!==void 0&&(H=""+B.key),B)F.call(B,ee)&&!P.hasOwnProperty(ee)&&(X[ee]=B[ee]);var ne=arguments.length-2;if(ne===1)X.children=z;else if(1<ne){for(var ie=Array(ne),fe=0;fe<ne;fe++)ie[fe]=arguments[fe+2];X.children=ie}if(j&&j.defaultProps)for(ee in ne=j.defaultProps,ne)X[ee]===void 0&&(X[ee]=ne[ee]);return{$$typeof:r,type:j,key:H,ref:Y,props:X,_owner:U.current}}function A(j,B){return{$$typeof:r,type:j.type,key:B,ref:j.ref,props:j.props,_owner:j._owner}}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function R(j){var B={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(z){return B[z]})}var x=/\/+/g;function L(j,B){return typeof j=="object"&&j!==null&&j.key!=null?R(""+j.key):B.toString(36)}function $(j,B,z,ee,X){var H=typeof j;(H==="undefined"||H==="boolean")&&(j=null);var Y=!1;if(j===null)Y=!0;else switch(H){case"string":case"number":Y=!0;break;case"object":switch(j.$$typeof){case r:case e:Y=!0}}if(Y)return Y=j,X=X(Y),j=ee===""?"."+L(Y,0):ee,C(X)?(z="",j!=null&&(z=j.replace(x,"$&/")+"/"),$(X,B,z,"",function(fe){return fe})):X!=null&&(k(X)&&(X=A(X,z+(!X.key||Y&&Y.key===X.key?"":(""+X.key).replace(x,"$&/")+"/")+j)),B.push(X)),1;if(Y=0,ee=ee===""?".":ee+":",C(j))for(var ne=0;ne<j.length;ne++){H=j[ne];var ie=ee+L(H,ne);Y+=$(H,B,z,ie,X)}else if(ie=m(j),typeof ie=="function")for(j=ie.call(j),ne=0;!(H=j.next()).done;)H=H.value,ie=ee+L(H,ne++),Y+=$(H,B,z,ie,X);else if(H==="object")throw B=String(j),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Y}function Q(j,B,z){if(j==null)return j;var ee=[],X=0;return $(j,ee,"","",function(H){return B.call(z,H,X++)}),ee}function se(j){if(j._status===-1){var B=j._result;B=B(),B.then(function(z){(j._status===0||j._status===-1)&&(j._status=1,j._result=z)},function(z){(j._status===0||j._status===-1)&&(j._status=2,j._result=z)}),j._status===-1&&(j._status=0,j._result=B)}if(j._status===1)return j._result.default;throw j._result}var Z={current:null},re={transition:null},G={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:re,ReactCurrentOwner:U};function W(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:Q,forEach:function(j,B,z){Q(j,function(){B.apply(this,arguments)},z)},count:function(j){var B=0;return Q(j,function(){B++}),B},toArray:function(j){return Q(j,function(B){return B})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},nt.Component=w,nt.Fragment=t,nt.Profiler=i,nt.PureComponent=b,nt.StrictMode=n,nt.Suspense=h,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,nt.act=W,nt.cloneElement=function(j,B,z){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ee=T({},j.props),X=j.key,H=j.ref,Y=j._owner;if(B!=null){if(B.ref!==void 0&&(H=B.ref,Y=U.current),B.key!==void 0&&(X=""+B.key),j.type&&j.type.defaultProps)var ne=j.type.defaultProps;for(ie in B)F.call(B,ie)&&!P.hasOwnProperty(ie)&&(ee[ie]=B[ie]===void 0&&ne!==void 0?ne[ie]:B[ie])}var ie=arguments.length-2;if(ie===1)ee.children=z;else if(1<ie){ne=Array(ie);for(var fe=0;fe<ie;fe++)ne[fe]=arguments[fe+2];ee.children=ne}return{$$typeof:r,type:j.type,key:X,ref:H,props:ee,_owner:Y}},nt.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},nt.createElement=_,nt.createFactory=function(j){var B=_.bind(null,j);return B.type=j,B},nt.createRef=function(){return{current:null}},nt.forwardRef=function(j){return{$$typeof:c,render:j}},nt.isValidElement=k,nt.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:se}},nt.memo=function(j,B){return{$$typeof:d,type:j,compare:B===void 0?null:B}},nt.startTransition=function(j){var B=re.transition;re.transition={};try{j()}finally{re.transition=B}},nt.unstable_act=W,nt.useCallback=function(j,B){return Z.current.useCallback(j,B)},nt.useContext=function(j){return Z.current.useContext(j)},nt.useDebugValue=function(){},nt.useDeferredValue=function(j){return Z.current.useDeferredValue(j)},nt.useEffect=function(j,B){return Z.current.useEffect(j,B)},nt.useId=function(){return Z.current.useId()},nt.useImperativeHandle=function(j,B,z){return Z.current.useImperativeHandle(j,B,z)},nt.useInsertionEffect=function(j,B){return Z.current.useInsertionEffect(j,B)},nt.useLayoutEffect=function(j,B){return Z.current.useLayoutEffect(j,B)},nt.useMemo=function(j,B){return Z.current.useMemo(j,B)},nt.useReducer=function(j,B,z){return Z.current.useReducer(j,B,z)},nt.useRef=function(j){return Z.current.useRef(j)},nt.useState=function(j){return Z.current.useState(j)},nt.useSyncExternalStore=function(j,B,z){return Z.current.useSyncExternalStore(j,B,z)},nt.useTransition=function(){return Z.current.useTransition()},nt.version="18.3.1",nt}var __;function ih(){return __||(__=1,_d.exports=ZC()),_d.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function eb(){if(w_)return rl;w_=1;var r=ih(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var v,g={},m=null,y=null;d!==void 0&&(m=""+d),h.key!==void 0&&(m=""+h.key),h.ref!==void 0&&(y=h.ref);for(v in h)n.call(h,v)&&!a.hasOwnProperty(v)&&(g[v]=h[v]);if(c&&c.defaultProps)for(v in h=c.defaultProps,h)g[v]===void 0&&(g[v]=h[v]);return{$$typeof:e,type:c,key:m,ref:y,props:g,_owner:i.current}}return rl.Fragment=t,rl.jsx=l,rl.jsxs=l,rl}var E_;function tb(){return E_||(E_=1,vd.exports=eb()),vd.exports}var M=tb(),ge=ih();const sh=Gm(ge);var cc={},wd={exports:{}},Rn={},Ed={exports:{}},Td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function nb(){return T_||(T_=1,function(r){function e(re,G){var W=re.length;re.push(G);e:for(;0<W;){var j=W-1>>>1,B=re[j];if(0<i(B,G))re[j]=G,re[W]=B,W=j;else break e}}function t(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var G=re[0],W=re.pop();if(W!==G){re[0]=W;e:for(var j=0,B=re.length,z=B>>>1;j<z;){var ee=2*(j+1)-1,X=re[ee],H=ee+1,Y=re[H];if(0>i(X,W))H<B&&0>i(Y,X)?(re[j]=Y,re[H]=W,j=H):(re[j]=X,re[ee]=W,j=ee);else if(H<B&&0>i(Y,W))re[j]=Y,re[H]=W,j=H;else break e}}return G}function i(re,G){var W=re.sortIndex-G.sortIndex;return W!==0?W:re.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var h=[],d=[],v=1,g=null,m=3,y=!1,T=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(re){for(var G=t(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=re)n(d),G.sortIndex=G.expirationTime,e(h,G);else break;G=t(d)}}function C(re){if(S=!1,O(re),!T)if(t(h)!==null)T=!0,se(F);else{var G=t(d);G!==null&&Z(C,G.startTime-re)}}function F(re,G){T=!1,S&&(S=!1,E(_),_=-1),y=!0;var W=m;try{for(O(G),g=t(h);g!==null&&(!(g.expirationTime>G)||re&&!R());){var j=g.callback;if(typeof j=="function"){g.callback=null,m=g.priorityLevel;var B=j(g.expirationTime<=G);G=r.unstable_now(),typeof B=="function"?g.callback=B:g===t(h)&&n(h),O(G)}else n(h);g=t(h)}if(g!==null)var z=!0;else{var ee=t(d);ee!==null&&Z(C,ee.startTime-G),z=!1}return z}finally{g=null,m=W,y=!1}}var U=!1,P=null,_=-1,A=5,k=-1;function R(){return!(r.unstable_now()-k<A)}function x(){if(P!==null){var re=r.unstable_now();k=re;var G=!0;try{G=P(!0,re)}finally{G?L():(U=!1,P=null)}}else U=!1}var L;if(typeof b=="function")L=function(){b(x)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=x,L=function(){Q.postMessage(null)}}else L=function(){w(x,0)};function se(re){P=re,U||(U=!0,L())}function Z(re,G){_=w(function(){re(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){T||y||(T=!0,se(F))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(re){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var W=m;m=G;try{return re()}finally{m=W}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,G){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var W=m;m=re;try{return G()}finally{m=W}},r.unstable_scheduleCallback=function(re,G,W){var j=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?j+W:j):W=j,re){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,re={id:v++,callback:G,priorityLevel:re,startTime:W,expirationTime:B,sortIndex:-1},W>j?(re.sortIndex=W,e(d,re),t(h)===null&&re===t(d)&&(S?(E(_),_=-1):S=!0,Z(C,W-j))):(re.sortIndex=B,e(h,re),T||y||(T=!0,se(F))),re},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(re){var G=m;return function(){var W=m;m=G;try{return re.apply(this,arguments)}finally{m=W}}}}(Td)),Td}var S_;function rb(){return S_||(S_=1,Ed.exports=nb()),Ed.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function ib(){if(I_)return Rn;I_=1;var r=ih(),e=rb();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function m(s){return h.call(g,s)?!0:h.call(v,s)?!1:d.test(s)?g[s]=!0:(v[s]=!0,!1)}function y(s,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function T(s,o,u,p){if(o===null||typeof o>"u"||y(s,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(s,o,u,p,I,D,q){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=I,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=D,this.removeEmptyString=q}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){w[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];w[o]=new S(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){w[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){w[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){w[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){w[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){w[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){w[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){w[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function b(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(E,b);w[o]=new S(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(E,b);w[o]=new S(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(E,b);w[o]=new S(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){w[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),w.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){w[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,o,u,p){var I=w.hasOwnProperty(o)?w[o]:null;(I!==null?I.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(T(o,u,I,p)&&(u=null),p||I===null?m(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):I.mustUseProperty?s[I.propertyName]=u===null?I.type===3?!1:"":u:(o=I.attributeName,p=I.attributeNamespace,u===null?s.removeAttribute(o):(I=I.type,u=I===3||I===4&&u===!0?"":""+u,p?s.setAttributeNS(p,o,u):s.setAttribute(o,u))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),U=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),R=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),re=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var W=Object.assign,j;function B(s){if(j===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);j=o&&o[1]||""}return`
`+j+s}var z=!1;function ee(s,o){if(!s||z)return"";z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var p=pe}Reflect.construct(s,[],o)}else{try{o.call()}catch(pe){p=pe}s.call(o.prototype)}else{try{throw Error()}catch(pe){p=pe}s()}}catch(pe){if(pe&&p&&typeof pe.stack=="string"){for(var I=pe.stack.split(`
`),D=p.stack.split(`
`),q=I.length-1,J=D.length-1;1<=q&&0<=J&&I[q]!==D[J];)J--;for(;1<=q&&0<=J;q--,J--)if(I[q]!==D[J]){if(q!==1||J!==1)do if(q--,J--,0>J||I[q]!==D[J]){var te=`
`+I[q].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=q&&0<=J);break}}}finally{z=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?B(s):""}function X(s){switch(s.tag){case 5:return B(s.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return s=ee(s.type,!1),s;case 11:return s=ee(s.type.render,!1),s;case 1:return s=ee(s.type,!0),s;default:return""}}function H(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case U:return"Portal";case A:return"Profiler";case _:return"StrictMode";case L:return"Suspense";case $:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case R:return(s.displayName||"Context")+".Consumer";case k:return(s._context.displayName||"Context")+".Provider";case x:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Q:return o=s.displayName||null,o!==null?o:H(s.type)||"Memo";case se:o=s._payload,s=s._init;try{return H(s(o))}catch{}}return null}function Y(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(o);case 8:return o===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ne(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ie(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function fe(s){var o=ie(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),p=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var I=u.get,D=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return I.call(this)},set:function(q){p=""+q,D.call(this,q)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(q){p=""+q},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ve(s){s._valueTracker||(s._valueTracker=fe(s))}function ke(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return s&&(p=ie(s)?s.checked?"true":"false":s.value),s=p,s!==u?(o.setValue(s),!0):!1}function Re(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function xe(s,o){var u=o.checked;return W({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function De(s,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=ne(o.value!=null?o.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ue(s,o){o=o.checked,o!=null&&O(s,"checked",o,!1)}function et(s,o){Ue(s,o);var u=ne(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?de(s,o.type,u):o.hasOwnProperty("defaultValue")&&de(s,o.type,ne(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function ue(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function de(s,o,u){(o!=="number"||Re(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ee=Array.isArray;function be(s,o,u,p){if(s=s.options,o){o={};for(var I=0;I<u.length;I++)o["$"+u[I]]=!0;for(u=0;u<s.length;u++)I=o.hasOwnProperty("$"+s[u].value),s[u].selected!==I&&(s[u].selected=I),I&&p&&(s[u].defaultSelected=!0)}else{for(u=""+ne(u),o=null,I=0;I<s.length;I++){if(s[I].value===u){s[I].selected=!0,p&&(s[I].defaultSelected=!0);return}o!==null||s[I].disabled||(o=s[I])}o!==null&&(o.selected=!0)}}function ye(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $e(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Ee(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:ne(u)}}function je(s,o){var u=ne(o.value),p=ne(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function Be(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function We(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xe(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?We(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ze,er=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,I){MSApp.execUnsafeLocalFunction(function(){return s(o,u,p,I)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Ze=Ze||document.createElement("div"),Ze.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ze.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ct(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zt=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(s){zt.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),St[o]=St[s]})});function tr(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||St.hasOwnProperty(s)&&St[s]?(""+o).trim():o+"px"}function Ei(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,I=tr(u,o[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,I):s[u]=I}}var ga=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ya(s,o){if(o){if(ga[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function va(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ms=null;function eo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var to=null,zn=null,Tr=null;function no(s){if(s=qa(s)){if(typeof to!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Iu(o),to(s.stateNode,s.type,o))}}function Sr(s){zn?Tr?Tr.push(s):Tr=[s]:zn=s}function _a(){if(zn){var s=zn,o=Tr;if(Tr=zn=null,no(s),o)for(s=0;s<o.length;s++)no(o[s])}}function gs(s,o){return s(o)}function wa(){}var $r=!1;function Ea(s,o,u){if($r)return s(o,u);$r=!0;try{return gs(s,o,u)}finally{$r=!1,(zn!==null||Tr!==null)&&(wa(),_a())}}function xt(s,o){var u=s.stateNode;if(u===null)return null;var p=Iu(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var ro=!1;if(c)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){ro=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{ro=!1}function ys(s,o,u,p,I,D,q,J,te){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(u,pe)}catch(Se){this.onError(Se)}}var vs=!1,io=null,rr=!1,Ta=null,$h={onError:function(s){vs=!0,io=s}};function so(s,o,u,p,I,D,q,J,te){vs=!1,io=null,ys.apply($h,arguments)}function Ql(s,o,u,p,I,D,q,J,te){if(so.apply(this,arguments),vs){if(vs){var pe=io;vs=!1,io=null}else throw Error(t(198));rr||(rr=!0,Ta=pe)}}function ir(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function _s(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function sr(s){if(ir(s)!==s)throw Error(t(188))}function Jl(s){var o=s.alternate;if(!o){if(o=ir(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,p=o;;){var I=u.return;if(I===null)break;var D=I.alternate;if(D===null){if(p=I.return,p!==null){u=p;continue}break}if(I.child===D.child){for(D=I.child;D;){if(D===u)return sr(I),s;if(D===p)return sr(I),o;D=D.sibling}throw Error(t(188))}if(u.return!==p.return)u=I,p=D;else{for(var q=!1,J=I.child;J;){if(J===u){q=!0,u=I,p=D;break}if(J===p){q=!0,p=I,u=D;break}J=J.sibling}if(!q){for(J=D.child;J;){if(J===u){q=!0,u=D,p=I;break}if(J===p){q=!0,p=D,u=I;break}J=J.sibling}if(!q)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Sa(s){return s=Jl(s),s!==null?oo(s):null}function oo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=oo(s);if(o!==null)return o;s=s.sibling}return null}var ao=e.unstable_scheduleCallback,Ia=e.unstable_cancelCallback,Yl=e.unstable_shouldYield,Wh=e.unstable_requestPaint,mt=e.unstable_now,Xl=e.unstable_getCurrentPriorityLevel,ws=e.unstable_ImmediatePriority,Ti=e.unstable_UserBlockingPriority,Hn=e.unstable_NormalPriority,Ca=e.unstable_LowPriority,Zl=e.unstable_IdlePriority,Es=null,Nn=null;function eu(s){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Es,s,void 0,(s.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:nu,ba=Math.log,tu=Math.LN2;function nu(s){return s>>>=0,s===0?32:31-(ba(s)/tu|0)|0}var lo=64,uo=4194304;function Si(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ts(s,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,I=s.suspendedLanes,D=s.pingedLanes,q=u&268435455;if(q!==0){var J=q&~I;J!==0?p=Si(J):(D&=q,D!==0&&(p=Si(D)))}else q=u&~I,q!==0?p=Si(q):D!==0&&(p=Si(D));if(p===0)return 0;if(o!==0&&o!==p&&(o&I)===0&&(I=p&-p,D=o&-o,I>=D||I===16&&(D&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=p;0<o;)u=31-fn(o),I=1<<u,p|=s[u],o&=~I;return p}function Kh(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(s,o){for(var u=s.suspendedLanes,p=s.pingedLanes,I=s.expirationTimes,D=s.pendingLanes;0<D;){var q=31-fn(D),J=1<<q,te=I[q];te===-1?((J&u)===0||(J&p)!==0)&&(I[q]=Kh(J,o)):te<=o&&(s.expiredLanes|=J),D&=~J}}function Ln(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ss(){var s=lo;return lo<<=1,(lo&4194240)===0&&(lo=64),s}function Ii(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Ci(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-fn(o),s[o]=u}function pt(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var I=31-fn(u),D=1<<I;o[I]=0,p[I]=-1,s[I]=-1,u&=~D}}function bi(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var p=31-fn(u),I=1<<p;I&o|s[p]&o&&(s[p]|=o),u&=~I}}var st=0;function Ai(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var ru,co,iu,su,ou,Aa=!1,Ir=[],Qt=null,or=null,ar=null,ki=new Map,$n=new Map,Cr=[],Gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(s,o){switch(s){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":ki.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(o.pointerId)}}function Tn(s,o,u,p,I,D){return s===null||s.nativeEvent!==D?(s={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:D,targetContainers:[I]},o!==null&&(o=qa(o),o!==null&&co(o)),s):(s.eventSystemFlags|=p,o=s.targetContainers,I!==null&&o.indexOf(I)===-1&&o.push(I),s)}function Qh(s,o,u,p,I){switch(o){case"focusin":return Qt=Tn(Qt,s,o,u,p,I),!0;case"dragenter":return or=Tn(or,s,o,u,p,I),!0;case"mouseover":return ar=Tn(ar,s,o,u,p,I),!0;case"pointerover":var D=I.pointerId;return ki.set(D,Tn(ki.get(D)||null,s,o,u,p,I)),!0;case"gotpointercapture":return D=I.pointerId,$n.set(D,Tn($n.get(D)||null,s,o,u,p,I)),!0}return!1}function lu(s){var o=ks(s.target);if(o!==null){var u=ir(o);if(u!==null){if(o=u.tag,o===13){if(o=_s(u),o!==null){s.blockedOn=o,ou(s.priority,function(){iu(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kr(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=ho(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);ms=p,u.target.dispatchEvent(p),ms=null}else return o=qa(u),o!==null&&co(o),s.blockedOn=u,!1;o.shift()}return!0}function Is(s,o,u){Kr(s)&&u.delete(o)}function uu(){Aa=!1,Qt!==null&&Kr(Qt)&&(Qt=null),or!==null&&Kr(or)&&(or=null),ar!==null&&Kr(ar)&&(ar=null),ki.forEach(Is),$n.forEach(Is)}function lr(s,o){s.blockedOn===o&&(s.blockedOn=null,Aa||(Aa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uu)))}function ur(s){function o(I){return lr(I,s)}if(0<Ir.length){lr(Ir[0],s);for(var u=1;u<Ir.length;u++){var p=Ir[u];p.blockedOn===s&&(p.blockedOn=null)}}for(Qt!==null&&lr(Qt,s),or!==null&&lr(or,s),ar!==null&&lr(ar,s),ki.forEach(o),$n.forEach(o),u=0;u<Cr.length;u++)p=Cr[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<Cr.length&&(u=Cr[0],u.blockedOn===null);)lu(u),u.blockedOn===null&&Cr.shift()}var Gr=C.ReactCurrentBatchConfig,Ri=!0;function Et(s,o,u,p){var I=st,D=Gr.transition;Gr.transition=null;try{st=1,ka(s,o,u,p)}finally{st=I,Gr.transition=D}}function Jh(s,o,u,p){var I=st,D=Gr.transition;Gr.transition=null;try{st=4,ka(s,o,u,p)}finally{st=I,Gr.transition=D}}function ka(s,o,u,p){if(Ri){var I=ho(s,o,u,p);if(I===null)lf(s,o,p,Cs,u),au(s,p);else if(Qh(I,s,o,u,p))p.stopPropagation();else if(au(s,p),o&4&&-1<Gh.indexOf(s)){for(;I!==null;){var D=qa(I);if(D!==null&&ru(D),D=ho(s,o,u,p),D===null&&lf(s,o,p,Cs,u),D===I)break;I=D}I!==null&&p.stopPropagation()}else lf(s,o,p,null,u)}}var Cs=null;function ho(s,o,u,p){if(Cs=null,s=eo(p),s=ks(s),s!==null)if(o=ir(s),o===null)s=null;else if(u=o.tag,u===13){if(s=_s(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Cs=s,null}function Ra(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xl()){case ws:return 1;case Ti:return 4;case Hn:case Ca:return 16;case Zl:return 536870912;default:return 16}default:return 16}}var Dn=null,fo=null,Sn=null;function Pa(){if(Sn)return Sn;var s,o=fo,u=o.length,p,I="value"in Dn?Dn.value:Dn.textContent,D=I.length;for(s=0;s<u&&o[s]===I[s];s++);var q=u-s;for(p=1;p<=q&&o[u-p]===I[D-p];p++);return Sn=I.slice(s,1<p?1-p:void 0)}function po(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function br(){return!0}function xa(){return!1}function Jt(s){function o(u,p,I,D,q){this._reactName=u,this._targetInst=I,this.type=p,this.nativeEvent=D,this.target=q,this.currentTarget=null;for(var J in s)s.hasOwnProperty(J)&&(u=s[J],this[J]=u?u(D):D[J]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?br:xa,this.isPropagationStopped=xa,this}return W(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),o}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Jt(cr),Ar=W({},cr,{view:0,detail:0}),Yh=Jt(Ar),go,Qr,Pi,bs=W({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pi&&(Pi&&s.type==="mousemove"?(go=s.screenX-Pi.screenX,Qr=s.screenY-Pi.screenY):Qr=go=0,Pi=s),go)},movementY:function(s){return"movementY"in s?s.movementY:Qr}}),yo=Jt(bs),Oa=W({},bs,{dataTransfer:0}),cu=Jt(Oa),vo=W({},Ar,{relatedTarget:0}),_o=Jt(vo),hu=W({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jr=Jt(hu),fu=W({},cr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),du=Jt(fu),pu=W({},cr,{data:0}),Na=Jt(pu),wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=mu[s])?!!o[s]:!1}function kr(){return gu}var f=W({},Ar,{key:function(s){if(s.key){var o=wo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=po(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(s){return s.type==="keypress"?po(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?po(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),N=Jt(f),V=W({},bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Jt(V),ae=W({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),me=Jt(ae),Ae=W({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=Jt(Ae),Vt=W({},bs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=Jt(Vt),Ht=[9,13,27,32],Dt=c&&"CompositionEvent"in window,Wn=null;c&&"documentMode"in document&&(Wn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Wn,As=c&&(!Dt||Wn&&8<Wn&&11>=Wn),Eo=" ",fy=!1;function dy(s,o){switch(s){case"keyup":return Ht.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function py(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var To=!1;function GI(s,o){switch(s){case"compositionend":return py(o);case"keypress":return o.which!==32?null:(fy=!0,Eo);case"textInput":return s=o.data,s===Eo&&fy?null:s;default:return null}}function QI(s,o){if(To)return s==="compositionend"||!Dt&&dy(s,o)?(s=Pa(),Sn=fo=Dn=null,To=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return As&&o.locale!=="ko"?null:o.data;default:return null}}var JI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function my(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!JI[s.type]:o==="textarea"}function gy(s,o,u,p){Sr(p),o=Eu(o,"onChange"),0<o.length&&(u=new mo("onChange","change",null,u,p),s.push({event:u,listeners:o}))}var La=null,Da=null;function YI(s){Ly(s,0)}function yu(s){var o=Ao(s);if(ke(o))return s}function XI(s,o){if(s==="change")return o}var yy=!1;if(c){var Xh;if(c){var Zh="oninput"in document;if(!Zh){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),Zh=typeof vy.oninput=="function"}Xh=Zh}else Xh=!1;yy=Xh&&(!document.documentMode||9<document.documentMode)}function _y(){La&&(La.detachEvent("onpropertychange",wy),Da=La=null)}function wy(s){if(s.propertyName==="value"&&yu(Da)){var o=[];gy(o,Da,s,eo(s)),Ea(YI,o)}}function ZI(s,o,u){s==="focusin"?(_y(),La=o,Da=u,La.attachEvent("onpropertychange",wy)):s==="focusout"&&_y()}function eC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yu(Da)}function tC(s,o){if(s==="click")return yu(o)}function nC(s,o){if(s==="input"||s==="change")return yu(o)}function rC(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var hr=typeof Object.is=="function"?Object.is:rC;function Ma(s,o){if(hr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var I=u[p];if(!h.call(o,I)||!hr(s[I],o[I]))return!1}return!0}function Ey(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ty(s,o){var u=Ey(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=o&&p>=o)return{node:u,offset:o-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ey(u)}}function Sy(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Sy(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Iy(){for(var s=window,o=Re();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Re(s.document)}return o}function ef(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function iC(s){var o=Iy(),u=s.focusedElem,p=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&Sy(u.ownerDocument.documentElement,u)){if(p!==null&&ef(u)){if(o=p.start,s=p.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var I=u.textContent.length,D=Math.min(p.start,I);p=p.end===void 0?D:Math.min(p.end,I),!s.extend&&D>p&&(I=p,p=D,D=I),I=Ty(u,D);var q=Ty(u,p);I&&q&&(s.rangeCount!==1||s.anchorNode!==I.node||s.anchorOffset!==I.offset||s.focusNode!==q.node||s.focusOffset!==q.offset)&&(o=o.createRange(),o.setStart(I.node,I.offset),s.removeAllRanges(),D>p?(s.addRange(o),s.extend(q.node,q.offset)):(o.setEnd(q.node,q.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var sC=c&&"documentMode"in document&&11>=document.documentMode,So=null,tf=null,ja=null,nf=!1;function Cy(s,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;nf||So==null||So!==Re(p)||(p=So,"selectionStart"in p&&ef(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ja&&Ma(ja,p)||(ja=p,p=Eu(tf,"onSelect"),0<p.length&&(o=new mo("onSelect","select",null,o,u),s.push({event:o,listeners:p}),o.target=So)))}function vu(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Io={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},rf={},by={};c&&(by=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function _u(s){if(rf[s])return rf[s];if(!Io[s])return s;var o=Io[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in by)return rf[s]=o[u];return s}var Ay=_u("animationend"),ky=_u("animationiteration"),Ry=_u("animationstart"),Py=_u("transitionend"),xy=new Map,Oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(s,o){xy.set(s,o),a(o,[s])}for(var sf=0;sf<Oy.length;sf++){var of=Oy[sf],oC=of.toLowerCase(),aC=of[0].toUpperCase()+of.slice(1);xi(oC,"on"+aC)}xi(Ay,"onAnimationEnd"),xi(ky,"onAnimationIteration"),xi(Ry,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(Py,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fa));function Ny(s,o,u){var p=s.type||"unknown-event";s.currentTarget=u,Ql(p,o,void 0,s),s.currentTarget=null}function Ly(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],I=p.event;p=p.listeners;e:{var D=void 0;if(o)for(var q=p.length-1;0<=q;q--){var J=p[q],te=J.instance,pe=J.currentTarget;if(J=J.listener,te!==D&&I.isPropagationStopped())break e;Ny(I,J,pe),D=te}else for(q=0;q<p.length;q++){if(J=p[q],te=J.instance,pe=J.currentTarget,J=J.listener,te!==D&&I.isPropagationStopped())break e;Ny(I,J,pe),D=te}}}if(rr)throw s=Ta,rr=!1,Ta=null,s}function vt(s,o){var u=o[pf];u===void 0&&(u=o[pf]=new Set);var p=s+"__bubble";u.has(p)||(Dy(o,s,2,!1),u.add(p))}function af(s,o,u){var p=0;o&&(p|=4),Dy(u,s,p,o)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Va(s){if(!s[wu]){s[wu]=!0,n.forEach(function(u){u!=="selectionchange"&&(lC.has(u)||af(u,!1,s),af(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[wu]||(o[wu]=!0,af("selectionchange",!1,o))}}function Dy(s,o,u,p){switch(Ra(o)){case 1:var I=Et;break;case 4:I=Jh;break;default:I=ka}u=I.bind(null,o,u,s),I=void 0,!ro||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(I=!0),p?I!==void 0?s.addEventListener(o,u,{capture:!0,passive:I}):s.addEventListener(o,u,!0):I!==void 0?s.addEventListener(o,u,{passive:I}):s.addEventListener(o,u,!1)}function lf(s,o,u,p,I){var D=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var q=p.tag;if(q===3||q===4){var J=p.stateNode.containerInfo;if(J===I||J.nodeType===8&&J.parentNode===I)break;if(q===4)for(q=p.return;q!==null;){var te=q.tag;if((te===3||te===4)&&(te=q.stateNode.containerInfo,te===I||te.nodeType===8&&te.parentNode===I))return;q=q.return}for(;J!==null;){if(q=ks(J),q===null)return;if(te=q.tag,te===5||te===6){p=D=q;continue e}J=J.parentNode}}p=p.return}Ea(function(){var pe=D,Se=eo(u),Ie=[];e:{var Te=xy.get(s);if(Te!==void 0){var Pe=mo,Me=s;switch(s){case"keypress":if(po(u)===0)break e;case"keydown":case"keyup":Pe=N;break;case"focusin":Me="focus",Pe=_o;break;case"focusout":Me="blur",Pe=_o;break;case"beforeblur":case"afterblur":Pe=_o;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=me;break;case Ay:case ky:case Ry:Pe=Jr;break;case Py:Pe=dt;break;case"scroll":Pe=Yh;break;case"wheel":Pe=ot;break;case"copy":case"cut":case"paste":Pe=du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=K}var Fe=(o&4)!==0,Ot=!Fe&&s==="scroll",le=Fe?Te!==null?Te+"Capture":null:Te;Fe=[];for(var oe=pe,ce;oe!==null;){ce=oe;var Ce=ce.stateNode;if(ce.tag===5&&Ce!==null&&(ce=Ce,le!==null&&(Ce=xt(oe,le),Ce!=null&&Fe.push(Ua(oe,Ce,ce)))),Ot)break;oe=oe.return}0<Fe.length&&(Te=new Pe(Te,Me,null,u,Se),Ie.push({event:Te,listeners:Fe}))}}if((o&7)===0){e:{if(Te=s==="mouseover"||s==="pointerover",Pe=s==="mouseout"||s==="pointerout",Te&&u!==ms&&(Me=u.relatedTarget||u.fromElement)&&(ks(Me)||Me[Yr]))break e;if((Pe||Te)&&(Te=Se.window===Se?Se:(Te=Se.ownerDocument)?Te.defaultView||Te.parentWindow:window,Pe?(Me=u.relatedTarget||u.toElement,Pe=pe,Me=Me?ks(Me):null,Me!==null&&(Ot=ir(Me),Me!==Ot||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Pe=null,Me=pe),Pe!==Me)){if(Fe=yo,Ce="onMouseLeave",le="onMouseEnter",oe="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=K,Ce="onPointerLeave",le="onPointerEnter",oe="pointer"),Ot=Pe==null?Te:Ao(Pe),ce=Me==null?Te:Ao(Me),Te=new Fe(Ce,oe+"leave",Pe,u,Se),Te.target=Ot,Te.relatedTarget=ce,Ce=null,ks(Se)===pe&&(Fe=new Fe(le,oe+"enter",Me,u,Se),Fe.target=ce,Fe.relatedTarget=Ot,Ce=Fe),Ot=Ce,Pe&&Me)t:{for(Fe=Pe,le=Me,oe=0,ce=Fe;ce;ce=Co(ce))oe++;for(ce=0,Ce=le;Ce;Ce=Co(Ce))ce++;for(;0<oe-ce;)Fe=Co(Fe),oe--;for(;0<ce-oe;)le=Co(le),ce--;for(;oe--;){if(Fe===le||le!==null&&Fe===le.alternate)break t;Fe=Co(Fe),le=Co(le)}Fe=null}else Fe=null;Pe!==null&&My(Ie,Te,Pe,Fe,!1),Me!==null&&Ot!==null&&My(Ie,Ot,Me,Fe,!0)}}e:{if(Te=pe?Ao(pe):window,Pe=Te.nodeName&&Te.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Te.type==="file")var Ve=XI;else if(my(Te))if(yy)Ve=nC;else{Ve=eC;var ze=ZI}else(Pe=Te.nodeName)&&Pe.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(Ve=tC);if(Ve&&(Ve=Ve(s,pe))){gy(Ie,Ve,u,Se);break e}ze&&ze(s,Te,pe),s==="focusout"&&(ze=Te._wrapperState)&&ze.controlled&&Te.type==="number"&&de(Te,"number",Te.value)}switch(ze=pe?Ao(pe):window,s){case"focusin":(my(ze)||ze.contentEditable==="true")&&(So=ze,tf=pe,ja=null);break;case"focusout":ja=tf=So=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Cy(Ie,u,Se);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":Cy(Ie,u,Se)}var He;if(Dt)e:{switch(s){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else To?dy(s,u)&&(Qe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Qe="onCompositionStart");Qe&&(As&&u.locale!=="ko"&&(To||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&To&&(He=Pa()):(Dn=Se,fo="value"in Dn?Dn.value:Dn.textContent,To=!0)),ze=Eu(pe,Qe),0<ze.length&&(Qe=new Na(Qe,s,null,u,Se),Ie.push({event:Qe,listeners:ze}),He?Qe.data=He:(He=py(u),He!==null&&(Qe.data=He)))),(He=Mn?GI(s,u):QI(s,u))&&(pe=Eu(pe,"onBeforeInput"),0<pe.length&&(Se=new Na("onBeforeInput","beforeinput",null,u,Se),Ie.push({event:Se,listeners:pe}),Se.data=He))}Ly(Ie,o)})}function Ua(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Eu(s,o){for(var u=o+"Capture",p=[];s!==null;){var I=s,D=I.stateNode;I.tag===5&&D!==null&&(I=D,D=xt(s,u),D!=null&&p.unshift(Ua(s,D,I)),D=xt(s,o),D!=null&&p.push(Ua(s,D,I))),s=s.return}return p}function Co(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function My(s,o,u,p,I){for(var D=o._reactName,q=[];u!==null&&u!==p;){var J=u,te=J.alternate,pe=J.stateNode;if(te!==null&&te===p)break;J.tag===5&&pe!==null&&(J=pe,I?(te=xt(u,D),te!=null&&q.unshift(Ua(u,te,J))):I||(te=xt(u,D),te!=null&&q.push(Ua(u,te,J)))),u=u.return}q.length!==0&&s.push({event:o,listeners:q})}var uC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function jy(s){return(typeof s=="string"?s:""+s).replace(uC,`
`).replace(cC,"")}function Tu(s,o,u){if(o=jy(o),jy(s)!==o&&u)throw Error(t(425))}function Su(){}var uf=null,cf=null;function hf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ff=typeof setTimeout=="function"?setTimeout:void 0,hC=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,fC=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(s){return Fy.resolve(null).then(s).catch(dC)}:ff;function dC(s){setTimeout(function(){throw s})}function df(s,o){var u=o,p=0;do{var I=u.nextSibling;if(s.removeChild(u),I&&I.nodeType===8)if(u=I.data,u==="/$"){if(p===0){s.removeChild(I),ur(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=I}while(u);ur(o)}function Oi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Vy(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Rr="__reactFiber$"+bo,Ba="__reactProps$"+bo,Yr="__reactContainer$"+bo,pf="__reactEvents$"+bo,pC="__reactListeners$"+bo,mC="__reactHandles$"+bo;function ks(s){var o=s[Rr];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Yr]||u[Rr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Vy(s);s!==null;){if(u=s[Rr])return u;s=Vy(s)}return o}s=u,u=s.parentNode}return null}function qa(s){return s=s[Rr]||s[Yr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ao(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Iu(s){return s[Ba]||null}var mf=[],ko=-1;function Ni(s){return{current:s}}function _t(s){0>ko||(s.current=mf[ko],mf[ko]=null,ko--)}function gt(s,o){ko++,mf[ko]=s.current,s.current=o}var Li={},rn=Ni(Li),In=Ni(!1),Rs=Li;function Ro(s,o){var u=s.type.contextTypes;if(!u)return Li;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var I={},D;for(D in u)I[D]=o[D];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=I),I}function Cn(s){return s=s.childContextTypes,s!=null}function Cu(){_t(In),_t(rn)}function Uy(s,o,u){if(rn.current!==Li)throw Error(t(168));gt(rn,o),gt(In,u)}function By(s,o,u){var p=s.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var I in p)if(!(I in o))throw Error(t(108,Y(s)||"Unknown",I));return W({},u,p)}function bu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Li,Rs=rn.current,gt(rn,s),gt(In,In.current),!0}function qy(s,o,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=By(s,o,Rs),p.__reactInternalMemoizedMergedChildContext=s,_t(In),_t(rn),gt(rn,s)):_t(In),gt(In,u)}var Xr=null,Au=!1,gf=!1;function zy(s){Xr===null?Xr=[s]:Xr.push(s)}function gC(s){Au=!0,zy(s)}function Di(){if(!gf&&Xr!==null){gf=!0;var s=0,o=st;try{var u=Xr;for(st=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}Xr=null,Au=!1}catch(I){throw Xr!==null&&(Xr=Xr.slice(s+1)),ao(ws,Di),I}finally{st=o,gf=!1}}return null}var Po=[],xo=0,ku=null,Ru=0,Kn=[],Gn=0,Ps=null,Zr=1,ei="";function xs(s,o){Po[xo++]=Ru,Po[xo++]=ku,ku=s,Ru=o}function Hy(s,o,u){Kn[Gn++]=Zr,Kn[Gn++]=ei,Kn[Gn++]=Ps,Ps=s;var p=Zr;s=ei;var I=32-fn(p)-1;p&=~(1<<I),u+=1;var D=32-fn(o)+I;if(30<D){var q=I-I%5;D=(p&(1<<q)-1).toString(32),p>>=q,I-=q,Zr=1<<32-fn(o)+I|u<<I|p,ei=D+s}else Zr=1<<D|u<<I|p,ei=s}function yf(s){s.return!==null&&(xs(s,1),Hy(s,1,0))}function vf(s){for(;s===ku;)ku=Po[--xo],Po[xo]=null,Ru=Po[--xo],Po[xo]=null;for(;s===Ps;)Ps=Kn[--Gn],Kn[Gn]=null,ei=Kn[--Gn],Kn[Gn]=null,Zr=Kn[--Gn],Kn[Gn]=null}var jn=null,Fn=null,Tt=!1,fr=null;function $y(s,o){var u=Xn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function Wy(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,jn=s,Fn=Oi(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,jn=s,Fn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Ps!==null?{id:Zr,overflow:ei}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Xn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,jn=s,Fn=null,!0):!1;default:return!1}}function _f(s){return(s.mode&1)!==0&&(s.flags&128)===0}function wf(s){if(Tt){var o=Fn;if(o){var u=o;if(!Wy(s,o)){if(_f(s))throw Error(t(418));o=Oi(u.nextSibling);var p=jn;o&&Wy(s,o)?$y(p,u):(s.flags=s.flags&-4097|2,Tt=!1,jn=s)}}else{if(_f(s))throw Error(t(418));s.flags=s.flags&-4097|2,Tt=!1,jn=s}}}function Ky(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jn=s}function Pu(s){if(s!==jn)return!1;if(!Tt)return Ky(s),Tt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!hf(s.type,s.memoizedProps)),o&&(o=Fn)){if(_f(s))throw Gy(),Error(t(418));for(;o;)$y(s,o),o=Oi(o.nextSibling)}if(Ky(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Fn=Oi(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Fn=null}}else Fn=jn?Oi(s.stateNode.nextSibling):null;return!0}function Gy(){for(var s=Fn;s;)s=Oi(s.nextSibling)}function Oo(){Fn=jn=null,Tt=!1}function Ef(s){fr===null?fr=[s]:fr.push(s)}var yC=C.ReactCurrentBatchConfig;function za(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var I=p,D=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===D?o.ref:(o=function(q){var J=I.refs;q===null?delete J[D]:J[D]=q},o._stringRef=D,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function xu(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Qy(s){var o=s._init;return o(s._payload)}function Jy(s){function o(le,oe){if(s){var ce=le.deletions;ce===null?(le.deletions=[oe],le.flags|=16):ce.push(oe)}}function u(le,oe){if(!s)return null;for(;oe!==null;)o(le,oe),oe=oe.sibling;return null}function p(le,oe){for(le=new Map;oe!==null;)oe.key!==null?le.set(oe.key,oe):le.set(oe.index,oe),oe=oe.sibling;return le}function I(le,oe){return le=zi(le,oe),le.index=0,le.sibling=null,le}function D(le,oe,ce){return le.index=ce,s?(ce=le.alternate,ce!==null?(ce=ce.index,ce<oe?(le.flags|=2,oe):ce):(le.flags|=2,oe)):(le.flags|=1048576,oe)}function q(le){return s&&le.alternate===null&&(le.flags|=2),le}function J(le,oe,ce,Ce){return oe===null||oe.tag!==6?(oe=fd(ce,le.mode,Ce),oe.return=le,oe):(oe=I(oe,ce),oe.return=le,oe)}function te(le,oe,ce,Ce){var Ve=ce.type;return Ve===P?Se(le,oe,ce.props.children,Ce,ce.key):oe!==null&&(oe.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===se&&Qy(Ve)===oe.type)?(Ce=I(oe,ce.props),Ce.ref=za(le,oe,ce),Ce.return=le,Ce):(Ce=tc(ce.type,ce.key,ce.props,null,le.mode,Ce),Ce.ref=za(le,oe,ce),Ce.return=le,Ce)}function pe(le,oe,ce,Ce){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ce.containerInfo||oe.stateNode.implementation!==ce.implementation?(oe=dd(ce,le.mode,Ce),oe.return=le,oe):(oe=I(oe,ce.children||[]),oe.return=le,oe)}function Se(le,oe,ce,Ce,Ve){return oe===null||oe.tag!==7?(oe=Vs(ce,le.mode,Ce,Ve),oe.return=le,oe):(oe=I(oe,ce),oe.return=le,oe)}function Ie(le,oe,ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=fd(""+oe,le.mode,ce),oe.return=le,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return ce=tc(oe.type,oe.key,oe.props,null,le.mode,ce),ce.ref=za(le,null,oe),ce.return=le,ce;case U:return oe=dd(oe,le.mode,ce),oe.return=le,oe;case se:var Ce=oe._init;return Ie(le,Ce(oe._payload),ce)}if(Ee(oe)||G(oe))return oe=Vs(oe,le.mode,ce,null),oe.return=le,oe;xu(le,oe)}return null}function Te(le,oe,ce,Ce){var Ve=oe!==null?oe.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Ve!==null?null:J(le,oe,""+ce,Ce);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case F:return ce.key===Ve?te(le,oe,ce,Ce):null;case U:return ce.key===Ve?pe(le,oe,ce,Ce):null;case se:return Ve=ce._init,Te(le,oe,Ve(ce._payload),Ce)}if(Ee(ce)||G(ce))return Ve!==null?null:Se(le,oe,ce,Ce,null);xu(le,ce)}return null}function Pe(le,oe,ce,Ce,Ve){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return le=le.get(ce)||null,J(oe,le,""+Ce,Ve);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case F:return le=le.get(Ce.key===null?ce:Ce.key)||null,te(oe,le,Ce,Ve);case U:return le=le.get(Ce.key===null?ce:Ce.key)||null,pe(oe,le,Ce,Ve);case se:var ze=Ce._init;return Pe(le,oe,ce,ze(Ce._payload),Ve)}if(Ee(Ce)||G(Ce))return le=le.get(ce)||null,Se(oe,le,Ce,Ve,null);xu(oe,Ce)}return null}function Me(le,oe,ce,Ce){for(var Ve=null,ze=null,He=oe,Qe=oe=0,Kt=null;He!==null&&Qe<ce.length;Qe++){He.index>Qe?(Kt=He,He=null):Kt=He.sibling;var ht=Te(le,He,ce[Qe],Ce);if(ht===null){He===null&&(He=Kt);break}s&&He&&ht.alternate===null&&o(le,He),oe=D(ht,oe,Qe),ze===null?Ve=ht:ze.sibling=ht,ze=ht,He=Kt}if(Qe===ce.length)return u(le,He),Tt&&xs(le,Qe),Ve;if(He===null){for(;Qe<ce.length;Qe++)He=Ie(le,ce[Qe],Ce),He!==null&&(oe=D(He,oe,Qe),ze===null?Ve=He:ze.sibling=He,ze=He);return Tt&&xs(le,Qe),Ve}for(He=p(le,He);Qe<ce.length;Qe++)Kt=Pe(He,le,Qe,ce[Qe],Ce),Kt!==null&&(s&&Kt.alternate!==null&&He.delete(Kt.key===null?Qe:Kt.key),oe=D(Kt,oe,Qe),ze===null?Ve=Kt:ze.sibling=Kt,ze=Kt);return s&&He.forEach(function(Hi){return o(le,Hi)}),Tt&&xs(le,Qe),Ve}function Fe(le,oe,ce,Ce){var Ve=G(ce);if(typeof Ve!="function")throw Error(t(150));if(ce=Ve.call(ce),ce==null)throw Error(t(151));for(var ze=Ve=null,He=oe,Qe=oe=0,Kt=null,ht=ce.next();He!==null&&!ht.done;Qe++,ht=ce.next()){He.index>Qe?(Kt=He,He=null):Kt=He.sibling;var Hi=Te(le,He,ht.value,Ce);if(Hi===null){He===null&&(He=Kt);break}s&&He&&Hi.alternate===null&&o(le,He),oe=D(Hi,oe,Qe),ze===null?Ve=Hi:ze.sibling=Hi,ze=Hi,He=Kt}if(ht.done)return u(le,He),Tt&&xs(le,Qe),Ve;if(He===null){for(;!ht.done;Qe++,ht=ce.next())ht=Ie(le,ht.value,Ce),ht!==null&&(oe=D(ht,oe,Qe),ze===null?Ve=ht:ze.sibling=ht,ze=ht);return Tt&&xs(le,Qe),Ve}for(He=p(le,He);!ht.done;Qe++,ht=ce.next())ht=Pe(He,le,Qe,ht.value,Ce),ht!==null&&(s&&ht.alternate!==null&&He.delete(ht.key===null?Qe:ht.key),oe=D(ht,oe,Qe),ze===null?Ve=ht:ze.sibling=ht,ze=ht);return s&&He.forEach(function(JC){return o(le,JC)}),Tt&&xs(le,Qe),Ve}function Ot(le,oe,ce,Ce){if(typeof ce=="object"&&ce!==null&&ce.type===P&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case F:e:{for(var Ve=ce.key,ze=oe;ze!==null;){if(ze.key===Ve){if(Ve=ce.type,Ve===P){if(ze.tag===7){u(le,ze.sibling),oe=I(ze,ce.props.children),oe.return=le,le=oe;break e}}else if(ze.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===se&&Qy(Ve)===ze.type){u(le,ze.sibling),oe=I(ze,ce.props),oe.ref=za(le,ze,ce),oe.return=le,le=oe;break e}u(le,ze);break}else o(le,ze);ze=ze.sibling}ce.type===P?(oe=Vs(ce.props.children,le.mode,Ce,ce.key),oe.return=le,le=oe):(Ce=tc(ce.type,ce.key,ce.props,null,le.mode,Ce),Ce.ref=za(le,oe,ce),Ce.return=le,le=Ce)}return q(le);case U:e:{for(ze=ce.key;oe!==null;){if(oe.key===ze)if(oe.tag===4&&oe.stateNode.containerInfo===ce.containerInfo&&oe.stateNode.implementation===ce.implementation){u(le,oe.sibling),oe=I(oe,ce.children||[]),oe.return=le,le=oe;break e}else{u(le,oe);break}else o(le,oe);oe=oe.sibling}oe=dd(ce,le.mode,Ce),oe.return=le,le=oe}return q(le);case se:return ze=ce._init,Ot(le,oe,ze(ce._payload),Ce)}if(Ee(ce))return Me(le,oe,ce,Ce);if(G(ce))return Fe(le,oe,ce,Ce);xu(le,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,oe!==null&&oe.tag===6?(u(le,oe.sibling),oe=I(oe,ce),oe.return=le,le=oe):(u(le,oe),oe=fd(ce,le.mode,Ce),oe.return=le,le=oe),q(le)):u(le,oe)}return Ot}var No=Jy(!0),Yy=Jy(!1),Ou=Ni(null),Nu=null,Lo=null,Tf=null;function Sf(){Tf=Lo=Nu=null}function If(s){var o=Ou.current;_t(Ou),s._currentValue=o}function Cf(s,o,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),s===u)break;s=s.return}}function Do(s,o){Nu=s,Tf=Lo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(bn=!0),s.firstContext=null)}function Qn(s){var o=s._currentValue;if(Tf!==s)if(s={context:s,memoizedValue:o,next:null},Lo===null){if(Nu===null)throw Error(t(308));Lo=s,Nu.dependencies={lanes:0,firstContext:s}}else Lo=Lo.next=s;return o}var Os=null;function bf(s){Os===null?Os=[s]:Os.push(s)}function Xy(s,o,u,p){var I=o.interleaved;return I===null?(u.next=u,bf(o)):(u.next=I.next,I.next=u),o.interleaved=u,ti(s,p)}function ti(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Mi=!1;function Af(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zy(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ni(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function ji(s,o,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(ut&2)!==0){var I=p.pending;return I===null?o.next=o:(o.next=I.next,I.next=o),p.pending=o,ti(s,u)}return I=p.interleaved,I===null?(o.next=o,bf(p)):(o.next=I.next,I.next=o),p.interleaved=o,ti(s,u)}function Lu(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=s.pendingLanes,u|=p,o.lanes=u,bi(s,u)}}function ev(s,o){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var I=null,D=null;if(u=u.firstBaseUpdate,u!==null){do{var q={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};D===null?I=D=q:D=D.next=q,u=u.next}while(u!==null);D===null?I=D=o:D=D.next=o}else I=D=o;u={baseState:p.baseState,firstBaseUpdate:I,lastBaseUpdate:D,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Du(s,o,u,p){var I=s.updateQueue;Mi=!1;var D=I.firstBaseUpdate,q=I.lastBaseUpdate,J=I.shared.pending;if(J!==null){I.shared.pending=null;var te=J,pe=te.next;te.next=null,q===null?D=pe:q.next=pe,q=te;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,J=Se.lastBaseUpdate,J!==q&&(J===null?Se.firstBaseUpdate=pe:J.next=pe,Se.lastBaseUpdate=te))}if(D!==null){var Ie=I.baseState;q=0,Se=pe=te=null,J=D;do{var Te=J.lane,Pe=J.eventTime;if((p&Te)===Te){Se!==null&&(Se=Se.next={eventTime:Pe,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Me=s,Fe=J;switch(Te=o,Pe=u,Fe.tag){case 1:if(Me=Fe.payload,typeof Me=="function"){Ie=Me.call(Pe,Ie,Te);break e}Ie=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Fe.payload,Te=typeof Me=="function"?Me.call(Pe,Ie,Te):Me,Te==null)break e;Ie=W({},Ie,Te);break e;case 2:Mi=!0}}J.callback!==null&&J.lane!==0&&(s.flags|=64,Te=I.effects,Te===null?I.effects=[J]:Te.push(J))}else Pe={eventTime:Pe,lane:Te,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Se===null?(pe=Se=Pe,te=Ie):Se=Se.next=Pe,q|=Te;if(J=J.next,J===null){if(J=I.shared.pending,J===null)break;Te=J,J=Te.next,Te.next=null,I.lastBaseUpdate=Te,I.shared.pending=null}}while(!0);if(Se===null&&(te=Ie),I.baseState=te,I.firstBaseUpdate=pe,I.lastBaseUpdate=Se,o=I.shared.interleaved,o!==null){I=o;do q|=I.lane,I=I.next;while(I!==o)}else D===null&&(I.shared.lanes=0);Ds|=q,s.lanes=q,s.memoizedState=Ie}}function tv(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var p=s[o],I=p.callback;if(I!==null){if(p.callback=null,p=u,typeof I!="function")throw Error(t(191,I));I.call(p)}}}var Ha={},Pr=Ni(Ha),$a=Ni(Ha),Wa=Ni(Ha);function Ns(s){if(s===Ha)throw Error(t(174));return s}function kf(s,o){switch(gt(Wa,o),gt($a,s),gt(Pr,Ha),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Xe(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Xe(o,s)}_t(Pr),gt(Pr,o)}function Mo(){_t(Pr),_t($a),_t(Wa)}function nv(s){Ns(Wa.current);var o=Ns(Pr.current),u=Xe(o,s.type);o!==u&&(gt($a,s),gt(Pr,u))}function Rf(s){$a.current===s&&(_t(Pr),_t($a))}var It=Ni(0);function Mu(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Pf=[];function xf(){for(var s=0;s<Pf.length;s++)Pf[s]._workInProgressVersionPrimary=null;Pf.length=0}var ju=C.ReactCurrentDispatcher,Of=C.ReactCurrentBatchConfig,Ls=0,Ct=null,Ut=null,$t=null,Fu=!1,Ka=!1,Ga=0,vC=0;function sn(){throw Error(t(321))}function Nf(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!hr(s[u],o[u]))return!1;return!0}function Lf(s,o,u,p,I,D){if(Ls=D,Ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ju.current=s===null||s.memoizedState===null?TC:SC,s=u(p,I),Ka){D=0;do{if(Ka=!1,Ga=0,25<=D)throw Error(t(301));D+=1,$t=Ut=null,o.updateQueue=null,ju.current=IC,s=u(p,I)}while(Ka)}if(ju.current=Bu,o=Ut!==null&&Ut.next!==null,Ls=0,$t=Ut=Ct=null,Fu=!1,o)throw Error(t(300));return s}function Df(){var s=Ga!==0;return Ga=0,s}function xr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ct.memoizedState=$t=s:$t=$t.next=s,$t}function Jn(){if(Ut===null){var s=Ct.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var o=$t===null?Ct.memoizedState:$t.next;if(o!==null)$t=o,Ut=s;else{if(s===null)throw Error(t(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},$t===null?Ct.memoizedState=$t=s:$t=$t.next=s}return $t}function Qa(s,o){return typeof o=="function"?o(s):o}function Mf(s){var o=Jn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=Ut,I=p.baseQueue,D=u.pending;if(D!==null){if(I!==null){var q=I.next;I.next=D.next,D.next=q}p.baseQueue=I=D,u.pending=null}if(I!==null){D=I.next,p=p.baseState;var J=q=null,te=null,pe=D;do{var Se=pe.lane;if((Ls&Se)===Se)te!==null&&(te=te.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),p=pe.hasEagerState?pe.eagerState:s(p,pe.action);else{var Ie={lane:Se,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};te===null?(J=te=Ie,q=p):te=te.next=Ie,Ct.lanes|=Se,Ds|=Se}pe=pe.next}while(pe!==null&&pe!==D);te===null?q=p:te.next=J,hr(p,o.memoizedState)||(bn=!0),o.memoizedState=p,o.baseState=q,o.baseQueue=te,u.lastRenderedState=p}if(s=u.interleaved,s!==null){I=s;do D=I.lane,Ct.lanes|=D,Ds|=D,I=I.next;while(I!==s)}else I===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function jf(s){var o=Jn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,I=u.pending,D=o.memoizedState;if(I!==null){u.pending=null;var q=I=I.next;do D=s(D,q.action),q=q.next;while(q!==I);hr(D,o.memoizedState)||(bn=!0),o.memoizedState=D,o.baseQueue===null&&(o.baseState=D),u.lastRenderedState=D}return[D,p]}function rv(){}function iv(s,o){var u=Ct,p=Jn(),I=o(),D=!hr(p.memoizedState,I);if(D&&(p.memoizedState=I,bn=!0),p=p.queue,Ff(av.bind(null,u,p,s),[s]),p.getSnapshot!==o||D||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,Ja(9,ov.bind(null,u,p,I,o),void 0,null),Wt===null)throw Error(t(349));(Ls&30)!==0||sv(u,o,I)}return I}function sv(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Ct.updateQueue,o===null?(o={lastEffect:null,stores:null},Ct.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function ov(s,o,u,p){o.value=u,o.getSnapshot=p,lv(o)&&uv(s)}function av(s,o,u){return u(function(){lv(o)&&uv(s)})}function lv(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!hr(s,u)}catch{return!0}}function uv(s){var o=ti(s,1);o!==null&&gr(o,s,1,-1)}function cv(s){var o=xr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:s},o.queue=s,s=s.dispatch=EC.bind(null,Ct,s),[o.memoizedState,s]}function Ja(s,o,u,p){return s={tag:s,create:o,destroy:u,deps:p,next:null},o=Ct.updateQueue,o===null?(o={lastEffect:null,stores:null},Ct.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,o.lastEffect=s)),s}function hv(){return Jn().memoizedState}function Vu(s,o,u,p){var I=xr();Ct.flags|=s,I.memoizedState=Ja(1|o,u,void 0,p===void 0?null:p)}function Uu(s,o,u,p){var I=Jn();p=p===void 0?null:p;var D=void 0;if(Ut!==null){var q=Ut.memoizedState;if(D=q.destroy,p!==null&&Nf(p,q.deps)){I.memoizedState=Ja(o,u,D,p);return}}Ct.flags|=s,I.memoizedState=Ja(1|o,u,D,p)}function fv(s,o){return Vu(8390656,8,s,o)}function Ff(s,o){return Uu(2048,8,s,o)}function dv(s,o){return Uu(4,2,s,o)}function pv(s,o){return Uu(4,4,s,o)}function mv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function gv(s,o,u){return u=u!=null?u.concat([s]):null,Uu(4,4,mv.bind(null,o,s),u)}function Vf(){}function yv(s,o){var u=Jn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Nf(o,p[1])?p[0]:(u.memoizedState=[s,o],s)}function vv(s,o){var u=Jn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Nf(o,p[1])?p[0]:(s=s(),u.memoizedState=[s,o],s)}function _v(s,o,u){return(Ls&21)===0?(s.baseState&&(s.baseState=!1,bn=!0),s.memoizedState=u):(hr(u,o)||(u=Ss(),Ct.lanes|=u,Ds|=u,s.baseState=!0),o)}function _C(s,o){var u=st;st=u!==0&&4>u?u:4,s(!0);var p=Of.transition;Of.transition={};try{s(!1),o()}finally{st=u,Of.transition=p}}function wv(){return Jn().memoizedState}function wC(s,o,u){var p=Bi(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Ev(s))Tv(o,u);else if(u=Xy(s,o,u,p),u!==null){var I=mn();gr(u,s,p,I),Sv(u,o,p)}}function EC(s,o,u){var p=Bi(s),I={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ev(s))Tv(o,I);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=o.lastRenderedReducer,D!==null))try{var q=o.lastRenderedState,J=D(q,u);if(I.hasEagerState=!0,I.eagerState=J,hr(J,q)){var te=o.interleaved;te===null?(I.next=I,bf(o)):(I.next=te.next,te.next=I),o.interleaved=I;return}}catch{}finally{}u=Xy(s,o,I,p),u!==null&&(I=mn(),gr(u,s,p,I),Sv(u,o,p))}}function Ev(s){var o=s.alternate;return s===Ct||o!==null&&o===Ct}function Tv(s,o){Ka=Fu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Sv(s,o,u){if((u&4194240)!==0){var p=o.lanes;p&=s.pendingLanes,u|=p,o.lanes=u,bi(s,u)}}var Bu={readContext:Qn,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},TC={readContext:Qn,useCallback:function(s,o){return xr().memoizedState=[s,o===void 0?null:o],s},useContext:Qn,useEffect:fv,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Vu(4194308,4,mv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Vu(4194308,4,s,o)},useInsertionEffect:function(s,o){return Vu(4,2,s,o)},useMemo:function(s,o){var u=xr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var p=xr();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},p.queue=s,s=s.dispatch=wC.bind(null,Ct,s),[p.memoizedState,s]},useRef:function(s){var o=xr();return s={current:s},o.memoizedState=s},useState:cv,useDebugValue:Vf,useDeferredValue:function(s){return xr().memoizedState=s},useTransition:function(){var s=cv(!1),o=s[0];return s=_C.bind(null,s[1]),xr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var p=Ct,I=xr();if(Tt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Wt===null)throw Error(t(349));(Ls&30)!==0||sv(p,o,u)}I.memoizedState=u;var D={value:u,getSnapshot:o};return I.queue=D,fv(av.bind(null,p,D,s),[s]),p.flags|=2048,Ja(9,ov.bind(null,p,D,u,o),void 0,null),u},useId:function(){var s=xr(),o=Wt.identifierPrefix;if(Tt){var u=ei,p=Zr;u=(p&~(1<<32-fn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=Ga++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=vC++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},SC={readContext:Qn,useCallback:yv,useContext:Qn,useEffect:Ff,useImperativeHandle:gv,useInsertionEffect:dv,useLayoutEffect:pv,useMemo:vv,useReducer:Mf,useRef:hv,useState:function(){return Mf(Qa)},useDebugValue:Vf,useDeferredValue:function(s){var o=Jn();return _v(o,Ut.memoizedState,s)},useTransition:function(){var s=Mf(Qa)[0],o=Jn().memoizedState;return[s,o]},useMutableSource:rv,useSyncExternalStore:iv,useId:wv,unstable_isNewReconciler:!1},IC={readContext:Qn,useCallback:yv,useContext:Qn,useEffect:Ff,useImperativeHandle:gv,useInsertionEffect:dv,useLayoutEffect:pv,useMemo:vv,useReducer:jf,useRef:hv,useState:function(){return jf(Qa)},useDebugValue:Vf,useDeferredValue:function(s){var o=Jn();return Ut===null?o.memoizedState=s:_v(o,Ut.memoizedState,s)},useTransition:function(){var s=jf(Qa)[0],o=Jn().memoizedState;return[s,o]},useMutableSource:rv,useSyncExternalStore:iv,useId:wv,unstable_isNewReconciler:!1};function dr(s,o){if(s&&s.defaultProps){o=W({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Uf(s,o,u,p){o=s.memoizedState,u=u(p,o),u=u==null?o:W({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var qu={isMounted:function(s){return(s=s._reactInternals)?ir(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var p=mn(),I=Bi(s),D=ni(p,I);D.payload=o,u!=null&&(D.callback=u),o=ji(s,D,I),o!==null&&(gr(o,s,I,p),Lu(o,s,I))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var p=mn(),I=Bi(s),D=ni(p,I);D.tag=1,D.payload=o,u!=null&&(D.callback=u),o=ji(s,D,I),o!==null&&(gr(o,s,I,p),Lu(o,s,I))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=mn(),p=Bi(s),I=ni(u,p);I.tag=2,o!=null&&(I.callback=o),o=ji(s,I,p),o!==null&&(gr(o,s,p,u),Lu(o,s,p))}};function Iv(s,o,u,p,I,D,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,D,q):o.prototype&&o.prototype.isPureReactComponent?!Ma(u,p)||!Ma(I,D):!0}function Cv(s,o,u){var p=!1,I=Li,D=o.contextType;return typeof D=="object"&&D!==null?D=Qn(D):(I=Cn(o)?Rs:rn.current,p=o.contextTypes,D=(p=p!=null)?Ro(s,I):Li),o=new o(u,D),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=qu,s.stateNode=o,o._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=I,s.__reactInternalMemoizedMaskedChildContext=D),o}function bv(s,o,u,p){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==s&&qu.enqueueReplaceState(o,o.state,null)}function Bf(s,o,u,p){var I=s.stateNode;I.props=u,I.state=s.memoizedState,I.refs={},Af(s);var D=o.contextType;typeof D=="object"&&D!==null?I.context=Qn(D):(D=Cn(o)?Rs:rn.current,I.context=Ro(s,D)),I.state=s.memoizedState,D=o.getDerivedStateFromProps,typeof D=="function"&&(Uf(s,o,D,u),I.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(o=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),o!==I.state&&qu.enqueueReplaceState(I,I.state,null),Du(s,u,I,p),I.state=s.memoizedState),typeof I.componentDidMount=="function"&&(s.flags|=4194308)}function jo(s,o){try{var u="",p=o;do u+=X(p),p=p.return;while(p);var I=u}catch(D){I=`
Error generating stack: `+D.message+`
`+D.stack}return{value:s,source:o,stack:I,digest:null}}function qf(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function zf(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var CC=typeof WeakMap=="function"?WeakMap:Map;function Av(s,o,u){u=ni(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){Qu||(Qu=!0,id=p),zf(s,o)},u}function kv(s,o,u){u=ni(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var I=o.value;u.payload=function(){return p(I)},u.callback=function(){zf(s,o)}}var D=s.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){zf(s,o),typeof p!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var q=o.stack;this.componentDidCatch(o.value,{componentStack:q!==null?q:""})}),u}function Rv(s,o,u){var p=s.pingCache;if(p===null){p=s.pingCache=new CC;var I=new Set;p.set(o,I)}else I=p.get(o),I===void 0&&(I=new Set,p.set(o,I));I.has(u)||(I.add(u),s=VC.bind(null,s,o,u),o.then(s,s))}function Pv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function xv(s,o,u,p,I){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ni(-1,1),o.tag=2,ji(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=I,s)}var bC=C.ReactCurrentOwner,bn=!1;function pn(s,o,u,p){o.child=s===null?Yy(o,null,u,p):No(o,s.child,u,p)}function Ov(s,o,u,p,I){u=u.render;var D=o.ref;return Do(o,I),p=Lf(s,o,u,p,D,I),u=Df(),s!==null&&!bn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~I,ri(s,o,I)):(Tt&&u&&yf(o),o.flags|=1,pn(s,o,p,I),o.child)}function Nv(s,o,u,p,I){if(s===null){var D=u.type;return typeof D=="function"&&!hd(D)&&D.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=D,Lv(s,o,D,p,I)):(s=tc(u.type,null,p,o,o.mode,I),s.ref=o.ref,s.return=o,o.child=s)}if(D=s.child,(s.lanes&I)===0){var q=D.memoizedProps;if(u=u.compare,u=u!==null?u:Ma,u(q,p)&&s.ref===o.ref)return ri(s,o,I)}return o.flags|=1,s=zi(D,p),s.ref=o.ref,s.return=o,o.child=s}function Lv(s,o,u,p,I){if(s!==null){var D=s.memoizedProps;if(Ma(D,p)&&s.ref===o.ref)if(bn=!1,o.pendingProps=p=D,(s.lanes&I)!==0)(s.flags&131072)!==0&&(bn=!0);else return o.lanes=s.lanes,ri(s,o,I)}return Hf(s,o,u,p,I)}function Dv(s,o,u){var p=o.pendingProps,I=p.children,D=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Vo,Vn),Vn|=u;else{if((u&1073741824)===0)return s=D!==null?D.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,gt(Vo,Vn),Vn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=D!==null?D.baseLanes:u,gt(Vo,Vn),Vn|=p}else D!==null?(p=D.baseLanes|u,o.memoizedState=null):p=u,gt(Vo,Vn),Vn|=p;return pn(s,o,I,u),o.child}function Mv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Hf(s,o,u,p,I){var D=Cn(u)?Rs:rn.current;return D=Ro(o,D),Do(o,I),u=Lf(s,o,u,p,D,I),p=Df(),s!==null&&!bn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~I,ri(s,o,I)):(Tt&&p&&yf(o),o.flags|=1,pn(s,o,u,I),o.child)}function jv(s,o,u,p,I){if(Cn(u)){var D=!0;bu(o)}else D=!1;if(Do(o,I),o.stateNode===null)Hu(s,o),Cv(o,u,p),Bf(o,u,p,I),p=!0;else if(s===null){var q=o.stateNode,J=o.memoizedProps;q.props=J;var te=q.context,pe=u.contextType;typeof pe=="object"&&pe!==null?pe=Qn(pe):(pe=Cn(u)?Rs:rn.current,pe=Ro(o,pe));var Se=u.getDerivedStateFromProps,Ie=typeof Se=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ie||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(J!==p||te!==pe)&&bv(o,q,p,pe),Mi=!1;var Te=o.memoizedState;q.state=Te,Du(o,p,q,I),te=o.memoizedState,J!==p||Te!==te||In.current||Mi?(typeof Se=="function"&&(Uf(o,u,Se,p),te=o.memoizedState),(J=Mi||Iv(o,u,J,p,Te,te,pe))?(Ie||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(o.flags|=4194308)):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=te),q.props=p,q.state=te,q.context=pe,p=J):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{q=o.stateNode,Zy(s,o),J=o.memoizedProps,pe=o.type===o.elementType?J:dr(o.type,J),q.props=pe,Ie=o.pendingProps,Te=q.context,te=u.contextType,typeof te=="object"&&te!==null?te=Qn(te):(te=Cn(u)?Rs:rn.current,te=Ro(o,te));var Pe=u.getDerivedStateFromProps;(Se=typeof Pe=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(J!==Ie||Te!==te)&&bv(o,q,p,te),Mi=!1,Te=o.memoizedState,q.state=Te,Du(o,p,q,I);var Me=o.memoizedState;J!==Ie||Te!==Me||In.current||Mi?(typeof Pe=="function"&&(Uf(o,u,Pe,p),Me=o.memoizedState),(pe=Mi||Iv(o,u,pe,p,Te,Me,te)||!1)?(Se||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(p,Me,te),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(p,Me,te)),typeof q.componentDidUpdate=="function"&&(o.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof q.componentDidUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Me),q.props=p,q.state=Me,q.context=te,p=pe):(typeof q.componentDidUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||J===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),p=!1)}return $f(s,o,u,p,D,I)}function $f(s,o,u,p,I,D){Mv(s,o);var q=(o.flags&128)!==0;if(!p&&!q)return I&&qy(o,u,!1),ri(s,o,D);p=o.stateNode,bC.current=o;var J=q&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,s!==null&&q?(o.child=No(o,s.child,null,D),o.child=No(o,null,J,D)):pn(s,o,J,D),o.memoizedState=p.state,I&&qy(o,u,!0),o.child}function Fv(s){var o=s.stateNode;o.pendingContext?Uy(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Uy(s,o.context,!1),kf(s,o.containerInfo)}function Vv(s,o,u,p,I){return Oo(),Ef(I),o.flags|=256,pn(s,o,u,p),o.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function Kf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Uv(s,o,u){var p=o.pendingProps,I=It.current,D=!1,q=(o.flags&128)!==0,J;if((J=q)||(J=s!==null&&s.memoizedState===null?!1:(I&2)!==0),J?(D=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(I|=1),gt(It,I&1),s===null)return wf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(q=p.children,s=p.fallback,D?(p=o.mode,D=o.child,q={mode:"hidden",children:q},(p&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=q):D=nc(q,p,0,null),s=Vs(s,p,u,null),D.return=o,s.return=o,D.sibling=s,o.child=D,o.child.memoizedState=Kf(u),o.memoizedState=Wf,s):Gf(o,q));if(I=s.memoizedState,I!==null&&(J=I.dehydrated,J!==null))return AC(s,o,q,p,J,I,u);if(D){D=p.fallback,q=o.mode,I=s.child,J=I.sibling;var te={mode:"hidden",children:p.children};return(q&1)===0&&o.child!==I?(p=o.child,p.childLanes=0,p.pendingProps=te,o.deletions=null):(p=zi(I,te),p.subtreeFlags=I.subtreeFlags&14680064),J!==null?D=zi(J,D):(D=Vs(D,q,u,null),D.flags|=2),D.return=o,p.return=o,p.sibling=D,o.child=p,p=D,D=o.child,q=s.child.memoizedState,q=q===null?Kf(u):{baseLanes:q.baseLanes|u,cachePool:null,transitions:q.transitions},D.memoizedState=q,D.childLanes=s.childLanes&~u,o.memoizedState=Wf,p}return D=s.child,s=D.sibling,p=zi(D,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=p,o.memoizedState=null,p}function Gf(s,o){return o=nc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function zu(s,o,u,p){return p!==null&&Ef(p),No(o,s.child,null,u),s=Gf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function AC(s,o,u,p,I,D,q){if(u)return o.flags&256?(o.flags&=-257,p=qf(Error(t(422))),zu(s,o,q,p)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(D=p.fallback,I=o.mode,p=nc({mode:"visible",children:p.children},I,0,null),D=Vs(D,I,q,null),D.flags|=2,p.return=o,D.return=o,p.sibling=D,o.child=p,(o.mode&1)!==0&&No(o,s.child,null,q),o.child.memoizedState=Kf(q),o.memoizedState=Wf,D);if((o.mode&1)===0)return zu(s,o,q,null);if(I.data==="$!"){if(p=I.nextSibling&&I.nextSibling.dataset,p)var J=p.dgst;return p=J,D=Error(t(419)),p=qf(D,p,void 0),zu(s,o,q,p)}if(J=(q&s.childLanes)!==0,bn||J){if(p=Wt,p!==null){switch(q&-q){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(p.suspendedLanes|q))!==0?0:I,I!==0&&I!==D.retryLane&&(D.retryLane=I,ti(s,I),gr(p,s,I,-1))}return cd(),p=qf(Error(t(421))),zu(s,o,q,p)}return I.data==="$?"?(o.flags|=128,o.child=s.child,o=UC.bind(null,s),I._reactRetry=o,null):(s=D.treeContext,Fn=Oi(I.nextSibling),jn=o,Tt=!0,fr=null,s!==null&&(Kn[Gn++]=Zr,Kn[Gn++]=ei,Kn[Gn++]=Ps,Zr=s.id,ei=s.overflow,Ps=o),o=Gf(o,p.children),o.flags|=4096,o)}function Bv(s,o,u){s.lanes|=o;var p=s.alternate;p!==null&&(p.lanes|=o),Cf(s.return,o,u)}function Qf(s,o,u,p,I){var D=s.memoizedState;D===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:I}:(D.isBackwards=o,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=u,D.tailMode=I)}function qv(s,o,u){var p=o.pendingProps,I=p.revealOrder,D=p.tail;if(pn(s,o,p.children,u),p=It.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Bv(s,u,o);else if(s.tag===19)Bv(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(gt(It,p),(o.mode&1)===0)o.memoizedState=null;else switch(I){case"forwards":for(u=o.child,I=null;u!==null;)s=u.alternate,s!==null&&Mu(s)===null&&(I=u),u=u.sibling;u=I,u===null?(I=o.child,o.child=null):(I=u.sibling,u.sibling=null),Qf(o,!1,I,u,D);break;case"backwards":for(u=null,I=o.child,o.child=null;I!==null;){if(s=I.alternate,s!==null&&Mu(s)===null){o.child=I;break}s=I.sibling,I.sibling=u,u=I,I=s}Qf(o,!0,u,null,D);break;case"together":Qf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Hu(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ri(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Ds|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=zi(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=zi(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function kC(s,o,u){switch(o.tag){case 3:Fv(o),Oo();break;case 5:nv(o);break;case 1:Cn(o.type)&&bu(o);break;case 4:kf(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,I=o.memoizedProps.value;gt(Ou,p._currentValue),p._currentValue=I;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(gt(It,It.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Uv(s,o,u):(gt(It,It.current&1),s=ri(s,o,u),s!==null?s.sibling:null);gt(It,It.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(s.flags&128)!==0){if(p)return qv(s,o,u);o.flags|=128}if(I=o.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),gt(It,It.current),p)break;return null;case 22:case 23:return o.lanes=0,Dv(s,o,u)}return ri(s,o,u)}var zv,Jf,Hv,$v;zv=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Jf=function(){},Hv=function(s,o,u,p){var I=s.memoizedProps;if(I!==p){s=o.stateNode,Ns(Pr.current);var D=null;switch(u){case"input":I=xe(s,I),p=xe(s,p),D=[];break;case"select":I=W({},I,{value:void 0}),p=W({},p,{value:void 0}),D=[];break;case"textarea":I=ye(s,I),p=ye(s,p),D=[];break;default:typeof I.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Su)}ya(u,p);var q;u=null;for(pe in I)if(!p.hasOwnProperty(pe)&&I.hasOwnProperty(pe)&&I[pe]!=null)if(pe==="style"){var J=I[pe];for(q in J)J.hasOwnProperty(q)&&(u||(u={}),u[q]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?D||(D=[]):(D=D||[]).push(pe,null));for(pe in p){var te=p[pe];if(J=I!=null?I[pe]:void 0,p.hasOwnProperty(pe)&&te!==J&&(te!=null||J!=null))if(pe==="style")if(J){for(q in J)!J.hasOwnProperty(q)||te&&te.hasOwnProperty(q)||(u||(u={}),u[q]="");for(q in te)te.hasOwnProperty(q)&&J[q]!==te[q]&&(u||(u={}),u[q]=te[q])}else u||(D||(D=[]),D.push(pe,u)),u=te;else pe==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,J=J?J.__html:void 0,te!=null&&J!==te&&(D=D||[]).push(pe,te)):pe==="children"?typeof te!="string"&&typeof te!="number"||(D=D||[]).push(pe,""+te):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(te!=null&&pe==="onScroll"&&vt("scroll",s),D||J===te||(D=[])):(D=D||[]).push(pe,te))}u&&(D=D||[]).push("style",u);var pe=D;(o.updateQueue=pe)&&(o.flags|=4)}},$v=function(s,o,u,p){u!==p&&(o.flags|=4)};function Ya(s,o){if(!Tt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function on(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(o)for(var I=s.child;I!==null;)u|=I.lanes|I.childLanes,p|=I.subtreeFlags&14680064,p|=I.flags&14680064,I.return=s,I=I.sibling;else for(I=s.child;I!==null;)u|=I.lanes|I.childLanes,p|=I.subtreeFlags,p|=I.flags,I.return=s,I=I.sibling;return s.subtreeFlags|=p,s.childLanes=u,o}function RC(s,o,u){var p=o.pendingProps;switch(vf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(o),null;case 1:return Cn(o.type)&&Cu(),on(o),null;case 3:return p=o.stateNode,Mo(),_t(In),_t(rn),xf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Pu(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,fr!==null&&(ad(fr),fr=null))),Jf(s,o),on(o),null;case 5:Rf(o);var I=Ns(Wa.current);if(u=o.type,s!==null&&o.stateNode!=null)Hv(s,o,u,p,I),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return on(o),null}if(s=Ns(Pr.current),Pu(o)){p=o.stateNode,u=o.type;var D=o.memoizedProps;switch(p[Rr]=o,p[Ba]=D,s=(o.mode&1)!==0,u){case"dialog":vt("cancel",p),vt("close",p);break;case"iframe":case"object":case"embed":vt("load",p);break;case"video":case"audio":for(I=0;I<Fa.length;I++)vt(Fa[I],p);break;case"source":vt("error",p);break;case"img":case"image":case"link":vt("error",p),vt("load",p);break;case"details":vt("toggle",p);break;case"input":De(p,D),vt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!D.multiple},vt("invalid",p);break;case"textarea":$e(p,D),vt("invalid",p)}ya(u,D),I=null;for(var q in D)if(D.hasOwnProperty(q)){var J=D[q];q==="children"?typeof J=="string"?p.textContent!==J&&(D.suppressHydrationWarning!==!0&&Tu(p.textContent,J,s),I=["children",J]):typeof J=="number"&&p.textContent!==""+J&&(D.suppressHydrationWarning!==!0&&Tu(p.textContent,J,s),I=["children",""+J]):i.hasOwnProperty(q)&&J!=null&&q==="onScroll"&&vt("scroll",p)}switch(u){case"input":ve(p),ue(p,D,!0);break;case"textarea":ve(p),Be(p);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(p.onclick=Su)}p=I,o.updateQueue=p,p!==null&&(o.flags|=4)}else{q=I.nodeType===9?I:I.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=We(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=q.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=q.createElement(u,{is:p.is}):(s=q.createElement(u),u==="select"&&(q=s,p.multiple?q.multiple=!0:p.size&&(q.size=p.size))):s=q.createElementNS(s,u),s[Rr]=o,s[Ba]=p,zv(s,o,!1,!1),o.stateNode=s;e:{switch(q=va(u,p),u){case"dialog":vt("cancel",s),vt("close",s),I=p;break;case"iframe":case"object":case"embed":vt("load",s),I=p;break;case"video":case"audio":for(I=0;I<Fa.length;I++)vt(Fa[I],s);I=p;break;case"source":vt("error",s),I=p;break;case"img":case"image":case"link":vt("error",s),vt("load",s),I=p;break;case"details":vt("toggle",s),I=p;break;case"input":De(s,p),I=xe(s,p),vt("invalid",s);break;case"option":I=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},I=W({},p,{value:void 0}),vt("invalid",s);break;case"textarea":$e(s,p),I=ye(s,p),vt("invalid",s);break;default:I=p}ya(u,I),J=I;for(D in J)if(J.hasOwnProperty(D)){var te=J[D];D==="style"?Ei(s,te):D==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&er(s,te)):D==="children"?typeof te=="string"?(u!=="textarea"||te!=="")&&ct(s,te):typeof te=="number"&&ct(s,""+te):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?te!=null&&D==="onScroll"&&vt("scroll",s):te!=null&&O(s,D,te,q))}switch(u){case"input":ve(s),ue(s,p,!1);break;case"textarea":ve(s),Be(s);break;case"option":p.value!=null&&s.setAttribute("value",""+ne(p.value));break;case"select":s.multiple=!!p.multiple,D=p.value,D!=null?be(s,!!p.multiple,D,!1):p.defaultValue!=null&&be(s,!!p.multiple,p.defaultValue,!0);break;default:typeof I.onClick=="function"&&(s.onclick=Su)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return on(o),null;case 6:if(s&&o.stateNode!=null)$v(s,o,s.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=Ns(Wa.current),Ns(Pr.current),Pu(o)){if(p=o.stateNode,u=o.memoizedProps,p[Rr]=o,(D=p.nodeValue!==u)&&(s=jn,s!==null))switch(s.tag){case 3:Tu(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Tu(p.nodeValue,u,(s.mode&1)!==0)}D&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Rr]=o,o.stateNode=p}return on(o),null;case 13:if(_t(It),p=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Tt&&Fn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Gy(),Oo(),o.flags|=98560,D=!1;else if(D=Pu(o),p!==null&&p.dehydrated!==null){if(s===null){if(!D)throw Error(t(318));if(D=o.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(t(317));D[Rr]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;on(o),D=!1}else fr!==null&&(ad(fr),fr=null),D=!0;if(!D)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(It.current&1)!==0?Bt===0&&(Bt=3):cd())),o.updateQueue!==null&&(o.flags|=4),on(o),null);case 4:return Mo(),Jf(s,o),s===null&&Va(o.stateNode.containerInfo),on(o),null;case 10:return If(o.type._context),on(o),null;case 17:return Cn(o.type)&&Cu(),on(o),null;case 19:if(_t(It),D=o.memoizedState,D===null)return on(o),null;if(p=(o.flags&128)!==0,q=D.rendering,q===null)if(p)Ya(D,!1);else{if(Bt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(q=Mu(s),q!==null){for(o.flags|=128,Ya(D,!1),p=q.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)D=u,s=p,D.flags&=14680066,q=D.alternate,q===null?(D.childLanes=0,D.lanes=s,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=q.childLanes,D.lanes=q.lanes,D.child=q.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=q.memoizedProps,D.memoizedState=q.memoizedState,D.updateQueue=q.updateQueue,D.type=q.type,s=q.dependencies,D.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return gt(It,It.current&1|2),o.child}s=s.sibling}D.tail!==null&&mt()>Uo&&(o.flags|=128,p=!0,Ya(D,!1),o.lanes=4194304)}else{if(!p)if(s=Mu(q),s!==null){if(o.flags|=128,p=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ya(D,!0),D.tail===null&&D.tailMode==="hidden"&&!q.alternate&&!Tt)return on(o),null}else 2*mt()-D.renderingStartTime>Uo&&u!==1073741824&&(o.flags|=128,p=!0,Ya(D,!1),o.lanes=4194304);D.isBackwards?(q.sibling=o.child,o.child=q):(u=D.last,u!==null?u.sibling=q:o.child=q,D.last=q)}return D.tail!==null?(o=D.tail,D.rendering=o,D.tail=o.sibling,D.renderingStartTime=mt(),o.sibling=null,u=It.current,gt(It,p?u&1|2:u&1),o):(on(o),null);case 22:case 23:return ud(),p=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Vn&1073741824)!==0&&(on(o),o.subtreeFlags&6&&(o.flags|=8192)):on(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function PC(s,o){switch(vf(o),o.tag){case 1:return Cn(o.type)&&Cu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Mo(),_t(In),_t(rn),xf(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Rf(o),null;case 13:if(_t(It),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Oo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return _t(It),null;case 4:return Mo(),null;case 10:return If(o.type._context),null;case 22:case 23:return ud(),null;case 24:return null;default:return null}}var $u=!1,an=!1,xC=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Fo(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){kt(s,o,p)}else u.current=null}function Yf(s,o,u){try{u()}catch(p){kt(s,o,p)}}var Wv=!1;function OC(s,o){if(uf=Ri,s=Iy(),ef(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var I=p.anchorOffset,D=p.focusNode;p=p.focusOffset;try{u.nodeType,D.nodeType}catch{u=null;break e}var q=0,J=-1,te=-1,pe=0,Se=0,Ie=s,Te=null;t:for(;;){for(var Pe;Ie!==u||I!==0&&Ie.nodeType!==3||(J=q+I),Ie!==D||p!==0&&Ie.nodeType!==3||(te=q+p),Ie.nodeType===3&&(q+=Ie.nodeValue.length),(Pe=Ie.firstChild)!==null;)Te=Ie,Ie=Pe;for(;;){if(Ie===s)break t;if(Te===u&&++pe===I&&(J=q),Te===D&&++Se===p&&(te=q),(Pe=Ie.nextSibling)!==null)break;Ie=Te,Te=Ie.parentNode}Ie=Pe}u=J===-1||te===-1?null:{start:J,end:te}}else u=null}u=u||{start:0,end:0}}else u=null;for(cf={focusedElem:s,selectionRange:u},Ri=!1,Le=o;Le!==null;)if(o=Le,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Le=s;else for(;Le!==null;){o=Le;try{var Me=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Fe=Me.memoizedProps,Ot=Me.memoizedState,le=o.stateNode,oe=le.getSnapshotBeforeUpdate(o.elementType===o.type?Fe:dr(o.type,Fe),Ot);le.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ce=o.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ce){kt(o,o.return,Ce)}if(s=o.sibling,s!==null){s.return=o.return,Le=s;break}Le=o.return}return Me=Wv,Wv=!1,Me}function Xa(s,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var I=p=p.next;do{if((I.tag&s)===s){var D=I.destroy;I.destroy=void 0,D!==void 0&&Yf(o,u,D)}I=I.next}while(I!==p)}}function Wu(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Xf(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function Kv(s){var o=s.alternate;o!==null&&(s.alternate=null,Kv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Rr],delete o[Ba],delete o[pf],delete o[pC],delete o[mC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Gv(s){return s.tag===5||s.tag===3||s.tag===4}function Qv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Gv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Zf(s,o,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Su));else if(p!==4&&(s=s.child,s!==null))for(Zf(s,o,u),s=s.sibling;s!==null;)Zf(s,o,u),s=s.sibling}function ed(s,o,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(ed(s,o,u),s=s.sibling;s!==null;)ed(s,o,u),s=s.sibling}var Yt=null,pr=!1;function Fi(s,o,u){for(u=u.child;u!==null;)Jv(s,o,u),u=u.sibling}function Jv(s,o,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Es,u)}catch{}switch(u.tag){case 5:an||Fo(u,o);case 6:var p=Yt,I=pr;Yt=null,Fi(s,o,u),Yt=p,pr=I,Yt!==null&&(pr?(s=Yt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Yt.removeChild(u.stateNode));break;case 18:Yt!==null&&(pr?(s=Yt,u=u.stateNode,s.nodeType===8?df(s.parentNode,u):s.nodeType===1&&df(s,u),ur(s)):df(Yt,u.stateNode));break;case 4:p=Yt,I=pr,Yt=u.stateNode.containerInfo,pr=!0,Fi(s,o,u),Yt=p,pr=I;break;case 0:case 11:case 14:case 15:if(!an&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){I=p=p.next;do{var D=I,q=D.destroy;D=D.tag,q!==void 0&&((D&2)!==0||(D&4)!==0)&&Yf(u,o,q),I=I.next}while(I!==p)}Fi(s,o,u);break;case 1:if(!an&&(Fo(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(J){kt(u,o,J)}Fi(s,o,u);break;case 21:Fi(s,o,u);break;case 22:u.mode&1?(an=(p=an)||u.memoizedState!==null,Fi(s,o,u),an=p):Fi(s,o,u);break;default:Fi(s,o,u)}}function Yv(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new xC),o.forEach(function(p){var I=BC.bind(null,s,p);u.has(p)||(u.add(p),p.then(I,I))})}}function mr(s,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var I=u[p];try{var D=s,q=o,J=q;e:for(;J!==null;){switch(J.tag){case 5:Yt=J.stateNode,pr=!1;break e;case 3:Yt=J.stateNode.containerInfo,pr=!0;break e;case 4:Yt=J.stateNode.containerInfo,pr=!0;break e}J=J.return}if(Yt===null)throw Error(t(160));Jv(D,q,I),Yt=null,pr=!1;var te=I.alternate;te!==null&&(te.return=null),I.return=null}catch(pe){kt(I,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Xv(o,s),o=o.sibling}function Xv(s,o){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(mr(o,s),Or(s),p&4){try{Xa(3,s,s.return),Wu(3,s)}catch(Fe){kt(s,s.return,Fe)}try{Xa(5,s,s.return)}catch(Fe){kt(s,s.return,Fe)}}break;case 1:mr(o,s),Or(s),p&512&&u!==null&&Fo(u,u.return);break;case 5:if(mr(o,s),Or(s),p&512&&u!==null&&Fo(u,u.return),s.flags&32){var I=s.stateNode;try{ct(I,"")}catch(Fe){kt(s,s.return,Fe)}}if(p&4&&(I=s.stateNode,I!=null)){var D=s.memoizedProps,q=u!==null?u.memoizedProps:D,J=s.type,te=s.updateQueue;if(s.updateQueue=null,te!==null)try{J==="input"&&D.type==="radio"&&D.name!=null&&Ue(I,D),va(J,q);var pe=va(J,D);for(q=0;q<te.length;q+=2){var Se=te[q],Ie=te[q+1];Se==="style"?Ei(I,Ie):Se==="dangerouslySetInnerHTML"?er(I,Ie):Se==="children"?ct(I,Ie):O(I,Se,Ie,pe)}switch(J){case"input":et(I,D);break;case"textarea":je(I,D);break;case"select":var Te=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!D.multiple;var Pe=D.value;Pe!=null?be(I,!!D.multiple,Pe,!1):Te!==!!D.multiple&&(D.defaultValue!=null?be(I,!!D.multiple,D.defaultValue,!0):be(I,!!D.multiple,D.multiple?[]:"",!1))}I[Ba]=D}catch(Fe){kt(s,s.return,Fe)}}break;case 6:if(mr(o,s),Or(s),p&4){if(s.stateNode===null)throw Error(t(162));I=s.stateNode,D=s.memoizedProps;try{I.nodeValue=D}catch(Fe){kt(s,s.return,Fe)}}break;case 3:if(mr(o,s),Or(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{ur(o.containerInfo)}catch(Fe){kt(s,s.return,Fe)}break;case 4:mr(o,s),Or(s);break;case 13:mr(o,s),Or(s),I=s.child,I.flags&8192&&(D=I.memoizedState!==null,I.stateNode.isHidden=D,!D||I.alternate!==null&&I.alternate.memoizedState!==null||(rd=mt())),p&4&&Yv(s);break;case 22:if(Se=u!==null&&u.memoizedState!==null,s.mode&1?(an=(pe=an)||Se,mr(o,s),an=pe):mr(o,s),Or(s),p&8192){if(pe=s.memoizedState!==null,(s.stateNode.isHidden=pe)&&!Se&&(s.mode&1)!==0)for(Le=s,Se=s.child;Se!==null;){for(Ie=Le=Se;Le!==null;){switch(Te=Le,Pe=Te.child,Te.tag){case 0:case 11:case 14:case 15:Xa(4,Te,Te.return);break;case 1:Fo(Te,Te.return);var Me=Te.stateNode;if(typeof Me.componentWillUnmount=="function"){p=Te,u=Te.return;try{o=p,Me.props=o.memoizedProps,Me.state=o.memoizedState,Me.componentWillUnmount()}catch(Fe){kt(p,u,Fe)}}break;case 5:Fo(Te,Te.return);break;case 22:if(Te.memoizedState!==null){t_(Ie);continue}}Pe!==null?(Pe.return=Te,Le=Pe):t_(Ie)}Se=Se.sibling}e:for(Se=null,Ie=s;;){if(Ie.tag===5){if(Se===null){Se=Ie;try{I=Ie.stateNode,pe?(D=I.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(J=Ie.stateNode,te=Ie.memoizedProps.style,q=te!=null&&te.hasOwnProperty("display")?te.display:null,J.style.display=tr("display",q))}catch(Fe){kt(s,s.return,Fe)}}}else if(Ie.tag===6){if(Se===null)try{Ie.stateNode.nodeValue=pe?"":Ie.memoizedProps}catch(Fe){kt(s,s.return,Fe)}}else if((Ie.tag!==22&&Ie.tag!==23||Ie.memoizedState===null||Ie===s)&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===s)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===s)break e;Se===Ie&&(Se=null),Ie=Ie.return}Se===Ie&&(Se=null),Ie.sibling.return=Ie.return,Ie=Ie.sibling}}break;case 19:mr(o,s),Or(s),p&4&&Yv(s);break;case 21:break;default:mr(o,s),Or(s)}}function Or(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(Gv(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var I=p.stateNode;p.flags&32&&(ct(I,""),p.flags&=-33);var D=Qv(s);ed(s,D,I);break;case 3:case 4:var q=p.stateNode.containerInfo,J=Qv(s);Zf(s,J,q);break;default:throw Error(t(161))}}catch(te){kt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function NC(s,o,u){Le=s,Zv(s)}function Zv(s,o,u){for(var p=(s.mode&1)!==0;Le!==null;){var I=Le,D=I.child;if(I.tag===22&&p){var q=I.memoizedState!==null||$u;if(!q){var J=I.alternate,te=J!==null&&J.memoizedState!==null||an;J=$u;var pe=an;if($u=q,(an=te)&&!pe)for(Le=I;Le!==null;)q=Le,te=q.child,q.tag===22&&q.memoizedState!==null?n_(I):te!==null?(te.return=q,Le=te):n_(I);for(;D!==null;)Le=D,Zv(D),D=D.sibling;Le=I,$u=J,an=pe}e_(s)}else(I.subtreeFlags&8772)!==0&&D!==null?(D.return=I,Le=D):e_(s)}}function e_(s){for(;Le!==null;){var o=Le;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:an||Wu(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!an)if(u===null)p.componentDidMount();else{var I=o.elementType===o.type?u.memoizedProps:dr(o.type,u.memoizedProps);p.componentDidUpdate(I,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var D=o.updateQueue;D!==null&&tv(o,D,p);break;case 3:var q=o.updateQueue;if(q!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}tv(o,q,u)}break;case 5:var J=o.stateNode;if(u===null&&o.flags&4){u=J;var te=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&u.focus();break;case"img":te.src&&(u.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Se=pe.memoizedState;if(Se!==null){var Ie=Se.dehydrated;Ie!==null&&ur(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||o.flags&512&&Xf(o)}catch(Te){kt(o,o.return,Te)}}if(o===s){Le=null;break}if(u=o.sibling,u!==null){u.return=o.return,Le=u;break}Le=o.return}}function t_(s){for(;Le!==null;){var o=Le;if(o===s){Le=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Le=u;break}Le=o.return}}function n_(s){for(;Le!==null;){var o=Le;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Wu(4,o)}catch(te){kt(o,u,te)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var I=o.return;try{p.componentDidMount()}catch(te){kt(o,I,te)}}var D=o.return;try{Xf(o)}catch(te){kt(o,D,te)}break;case 5:var q=o.return;try{Xf(o)}catch(te){kt(o,q,te)}}}catch(te){kt(o,o.return,te)}if(o===s){Le=null;break}var J=o.sibling;if(J!==null){J.return=o.return,Le=J;break}Le=o.return}}var LC=Math.ceil,Ku=C.ReactCurrentDispatcher,td=C.ReactCurrentOwner,Yn=C.ReactCurrentBatchConfig,ut=0,Wt=null,Mt=null,Xt=0,Vn=0,Vo=Ni(0),Bt=0,Za=null,Ds=0,Gu=0,nd=0,el=null,An=null,rd=0,Uo=1/0,ii=null,Qu=!1,id=null,Vi=null,Ju=!1,Ui=null,Yu=0,tl=0,sd=null,Xu=-1,Zu=0;function mn(){return(ut&6)!==0?mt():Xu!==-1?Xu:Xu=mt()}function Bi(s){return(s.mode&1)===0?1:(ut&2)!==0&&Xt!==0?Xt&-Xt:yC.transition!==null?(Zu===0&&(Zu=Ss()),Zu):(s=st,s!==0||(s=window.event,s=s===void 0?16:Ra(s.type)),s)}function gr(s,o,u,p){if(50<tl)throw tl=0,sd=null,Error(t(185));Ci(s,u,p),((ut&2)===0||s!==Wt)&&(s===Wt&&((ut&2)===0&&(Gu|=u),Bt===4&&qi(s,Xt)),kn(s,p),u===1&&ut===0&&(o.mode&1)===0&&(Uo=mt()+500,Au&&Di()))}function kn(s,o){var u=s.callbackNode;Wr(s,o);var p=Ts(s,s===Wt?Xt:0);if(p===0)u!==null&&Ia(u),s.callbackNode=null,s.callbackPriority=0;else if(o=p&-p,s.callbackPriority!==o){if(u!=null&&Ia(u),o===1)s.tag===0?gC(i_.bind(null,s)):zy(i_.bind(null,s)),fC(function(){(ut&6)===0&&Di()}),u=null;else{switch(Ai(p)){case 1:u=ws;break;case 4:u=Ti;break;case 16:u=Hn;break;case 536870912:u=Zl;break;default:u=Hn}u=f_(u,r_.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function r_(s,o){if(Xu=-1,Zu=0,(ut&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Bo()&&s.callbackNode!==u)return null;var p=Ts(s,s===Wt?Xt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||o)o=ec(s,p);else{o=p;var I=ut;ut|=2;var D=o_();(Wt!==s||Xt!==o)&&(ii=null,Uo=mt()+500,js(s,o));do try{jC();break}catch(J){s_(s,J)}while(!0);Sf(),Ku.current=D,ut=I,Mt!==null?o=0:(Wt=null,Xt=0,o=Bt)}if(o!==0){if(o===2&&(I=Ln(s),I!==0&&(p=I,o=od(s,I))),o===1)throw u=Za,js(s,0),qi(s,p),kn(s,mt()),u;if(o===6)qi(s,p);else{if(I=s.current.alternate,(p&30)===0&&!DC(I)&&(o=ec(s,p),o===2&&(D=Ln(s),D!==0&&(p=D,o=od(s,D))),o===1))throw u=Za,js(s,0),qi(s,p),kn(s,mt()),u;switch(s.finishedWork=I,s.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:Fs(s,An,ii);break;case 3:if(qi(s,p),(p&130023424)===p&&(o=rd+500-mt(),10<o)){if(Ts(s,0)!==0)break;if(I=s.suspendedLanes,(I&p)!==p){mn(),s.pingedLanes|=s.suspendedLanes&I;break}s.timeoutHandle=ff(Fs.bind(null,s,An,ii),o);break}Fs(s,An,ii);break;case 4:if(qi(s,p),(p&4194240)===p)break;for(o=s.eventTimes,I=-1;0<p;){var q=31-fn(p);D=1<<q,q=o[q],q>I&&(I=q),p&=~D}if(p=I,p=mt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*LC(p/1960))-p,10<p){s.timeoutHandle=ff(Fs.bind(null,s,An,ii),p);break}Fs(s,An,ii);break;case 5:Fs(s,An,ii);break;default:throw Error(t(329))}}}return kn(s,mt()),s.callbackNode===u?r_.bind(null,s):null}function od(s,o){var u=el;return s.current.memoizedState.isDehydrated&&(js(s,o).flags|=256),s=ec(s,o),s!==2&&(o=An,An=u,o!==null&&ad(o)),s}function ad(s){An===null?An=s:An.push.apply(An,s)}function DC(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var I=u[p],D=I.getSnapshot;I=I.value;try{if(!hr(D(),I))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qi(s,o){for(o&=~nd,o&=~Gu,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-fn(o),p=1<<u;s[u]=-1,o&=~p}}function i_(s){if((ut&6)!==0)throw Error(t(327));Bo();var o=Ts(s,0);if((o&1)===0)return kn(s,mt()),null;var u=ec(s,o);if(s.tag!==0&&u===2){var p=Ln(s);p!==0&&(o=p,u=od(s,p))}if(u===1)throw u=Za,js(s,0),qi(s,o),kn(s,mt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Fs(s,An,ii),kn(s,mt()),null}function ld(s,o){var u=ut;ut|=1;try{return s(o)}finally{ut=u,ut===0&&(Uo=mt()+500,Au&&Di())}}function Ms(s){Ui!==null&&Ui.tag===0&&(ut&6)===0&&Bo();var o=ut;ut|=1;var u=Yn.transition,p=st;try{if(Yn.transition=null,st=1,s)return s()}finally{st=p,Yn.transition=u,ut=o,(ut&6)===0&&Di()}}function ud(){Vn=Vo.current,_t(Vo)}function js(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,hC(u)),Mt!==null)for(u=Mt.return;u!==null;){var p=u;switch(vf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Cu();break;case 3:Mo(),_t(In),_t(rn),xf();break;case 5:Rf(p);break;case 4:Mo();break;case 13:_t(It);break;case 19:_t(It);break;case 10:If(p.type._context);break;case 22:case 23:ud()}u=u.return}if(Wt=s,Mt=s=zi(s.current,null),Xt=Vn=o,Bt=0,Za=null,nd=Gu=Ds=0,An=el=null,Os!==null){for(o=0;o<Os.length;o++)if(u=Os[o],p=u.interleaved,p!==null){u.interleaved=null;var I=p.next,D=u.pending;if(D!==null){var q=D.next;D.next=I,p.next=q}u.pending=p}Os=null}return s}function s_(s,o){do{var u=Mt;try{if(Sf(),ju.current=Bu,Fu){for(var p=Ct.memoizedState;p!==null;){var I=p.queue;I!==null&&(I.pending=null),p=p.next}Fu=!1}if(Ls=0,$t=Ut=Ct=null,Ka=!1,Ga=0,td.current=null,u===null||u.return===null){Bt=1,Za=o,Mt=null;break}e:{var D=s,q=u.return,J=u,te=o;if(o=Xt,J.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var pe=te,Se=J,Ie=Se.tag;if((Se.mode&1)===0&&(Ie===0||Ie===11||Ie===15)){var Te=Se.alternate;Te?(Se.updateQueue=Te.updateQueue,Se.memoizedState=Te.memoizedState,Se.lanes=Te.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Pe=Pv(q);if(Pe!==null){Pe.flags&=-257,xv(Pe,q,J,D,o),Pe.mode&1&&Rv(D,pe,o),o=Pe,te=pe;var Me=o.updateQueue;if(Me===null){var Fe=new Set;Fe.add(te),o.updateQueue=Fe}else Me.add(te);break e}else{if((o&1)===0){Rv(D,pe,o),cd();break e}te=Error(t(426))}}else if(Tt&&J.mode&1){var Ot=Pv(q);if(Ot!==null){(Ot.flags&65536)===0&&(Ot.flags|=256),xv(Ot,q,J,D,o),Ef(jo(te,J));break e}}D=te=jo(te,J),Bt!==4&&(Bt=2),el===null?el=[D]:el.push(D),D=q;do{switch(D.tag){case 3:D.flags|=65536,o&=-o,D.lanes|=o;var le=Av(D,te,o);ev(D,le);break e;case 1:J=te;var oe=D.type,ce=D.stateNode;if((D.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Vi===null||!Vi.has(ce)))){D.flags|=65536,o&=-o,D.lanes|=o;var Ce=kv(D,J,o);ev(D,Ce);break e}}D=D.return}while(D!==null)}l_(u)}catch(Ve){o=Ve,Mt===u&&u!==null&&(Mt=u=u.return);continue}break}while(!0)}function o_(){var s=Ku.current;return Ku.current=Bu,s===null?Bu:s}function cd(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Wt===null||(Ds&268435455)===0&&(Gu&268435455)===0||qi(Wt,Xt)}function ec(s,o){var u=ut;ut|=2;var p=o_();(Wt!==s||Xt!==o)&&(ii=null,js(s,o));do try{MC();break}catch(I){s_(s,I)}while(!0);if(Sf(),ut=u,Ku.current=p,Mt!==null)throw Error(t(261));return Wt=null,Xt=0,Bt}function MC(){for(;Mt!==null;)a_(Mt)}function jC(){for(;Mt!==null&&!Yl();)a_(Mt)}function a_(s){var o=h_(s.alternate,s,Vn);s.memoizedProps=s.pendingProps,o===null?l_(s):Mt=o,td.current=null}function l_(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=RC(u,o,Vn),u!==null){Mt=u;return}}else{if(u=PC(u,o),u!==null){u.flags&=32767,Mt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Bt=6,Mt=null;return}}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=s}while(o!==null);Bt===0&&(Bt=5)}function Fs(s,o,u){var p=st,I=Yn.transition;try{Yn.transition=null,st=1,FC(s,o,u,p)}finally{Yn.transition=I,st=p}return null}function FC(s,o,u,p){do Bo();while(Ui!==null);if((ut&6)!==0)throw Error(t(327));u=s.finishedWork;var I=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var D=u.lanes|u.childLanes;if(pt(s,D),s===Wt&&(Mt=Wt=null,Xt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ju||(Ju=!0,f_(Hn,function(){return Bo(),null})),D=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||D){D=Yn.transition,Yn.transition=null;var q=st;st=1;var J=ut;ut|=4,td.current=null,OC(s,u),Xv(u,s),iC(cf),Ri=!!uf,cf=uf=null,s.current=u,NC(u),Wh(),ut=J,st=q,Yn.transition=D}else s.current=u;if(Ju&&(Ju=!1,Ui=s,Yu=I),D=s.pendingLanes,D===0&&(Vi=null),eu(u.stateNode),kn(s,mt()),o!==null)for(p=s.onRecoverableError,u=0;u<o.length;u++)I=o[u],p(I.value,{componentStack:I.stack,digest:I.digest});if(Qu)throw Qu=!1,s=id,id=null,s;return(Yu&1)!==0&&s.tag!==0&&Bo(),D=s.pendingLanes,(D&1)!==0?s===sd?tl++:(tl=0,sd=s):tl=0,Di(),null}function Bo(){if(Ui!==null){var s=Ai(Yu),o=Yn.transition,u=st;try{if(Yn.transition=null,st=16>s?16:s,Ui===null)var p=!1;else{if(s=Ui,Ui=null,Yu=0,(ut&6)!==0)throw Error(t(331));var I=ut;for(ut|=4,Le=s.current;Le!==null;){var D=Le,q=D.child;if((Le.flags&16)!==0){var J=D.deletions;if(J!==null){for(var te=0;te<J.length;te++){var pe=J[te];for(Le=pe;Le!==null;){var Se=Le;switch(Se.tag){case 0:case 11:case 15:Xa(8,Se,D)}var Ie=Se.child;if(Ie!==null)Ie.return=Se,Le=Ie;else for(;Le!==null;){Se=Le;var Te=Se.sibling,Pe=Se.return;if(Kv(Se),Se===pe){Le=null;break}if(Te!==null){Te.return=Pe,Le=Te;break}Le=Pe}}}var Me=D.alternate;if(Me!==null){var Fe=Me.child;if(Fe!==null){Me.child=null;do{var Ot=Fe.sibling;Fe.sibling=null,Fe=Ot}while(Fe!==null)}}Le=D}}if((D.subtreeFlags&2064)!==0&&q!==null)q.return=D,Le=q;else e:for(;Le!==null;){if(D=Le,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Xa(9,D,D.return)}var le=D.sibling;if(le!==null){le.return=D.return,Le=le;break e}Le=D.return}}var oe=s.current;for(Le=oe;Le!==null;){q=Le;var ce=q.child;if((q.subtreeFlags&2064)!==0&&ce!==null)ce.return=q,Le=ce;else e:for(q=oe;Le!==null;){if(J=Le,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Wu(9,J)}}catch(Ve){kt(J,J.return,Ve)}if(J===q){Le=null;break e}var Ce=J.sibling;if(Ce!==null){Ce.return=J.return,Le=Ce;break e}Le=J.return}}if(ut=I,Di(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Es,s)}catch{}p=!0}return p}finally{st=u,Yn.transition=o}}return!1}function u_(s,o,u){o=jo(u,o),o=Av(s,o,1),s=ji(s,o,1),o=mn(),s!==null&&(Ci(s,1,o),kn(s,o))}function kt(s,o,u){if(s.tag===3)u_(s,s,u);else for(;o!==null;){if(o.tag===3){u_(o,s,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vi===null||!Vi.has(p))){s=jo(u,s),s=kv(o,s,1),o=ji(o,s,1),s=mn(),o!==null&&(Ci(o,1,s),kn(o,s));break}}o=o.return}}function VC(s,o,u){var p=s.pingCache;p!==null&&p.delete(o),o=mn(),s.pingedLanes|=s.suspendedLanes&u,Wt===s&&(Xt&u)===u&&(Bt===4||Bt===3&&(Xt&130023424)===Xt&&500>mt()-rd?js(s,0):nd|=u),kn(s,o)}function c_(s,o){o===0&&((s.mode&1)===0?o=1:(o=uo,uo<<=1,(uo&130023424)===0&&(uo=4194304)));var u=mn();s=ti(s,o),s!==null&&(Ci(s,o,u),kn(s,u))}function UC(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),c_(s,u)}function BC(s,o){var u=0;switch(s.tag){case 13:var p=s.stateNode,I=s.memoizedState;I!==null&&(u=I.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),c_(s,u)}var h_;h_=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||In.current)bn=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return bn=!1,kC(s,o,u);bn=(s.flags&131072)!==0}else bn=!1,Tt&&(o.flags&1048576)!==0&&Hy(o,Ru,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;Hu(s,o),s=o.pendingProps;var I=Ro(o,rn.current);Do(o,u),I=Lf(null,o,p,s,I,u);var D=Df();return o.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Cn(p)?(D=!0,bu(o)):D=!1,o.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Af(o),I.updater=qu,o.stateNode=I,I._reactInternals=o,Bf(o,p,s,u),o=$f(null,o,p,!0,D,u)):(o.tag=0,Tt&&D&&yf(o),pn(null,o,I,u),o=o.child),o;case 16:p=o.elementType;e:{switch(Hu(s,o),s=o.pendingProps,I=p._init,p=I(p._payload),o.type=p,I=o.tag=zC(p),s=dr(p,s),I){case 0:o=Hf(null,o,p,s,u);break e;case 1:o=jv(null,o,p,s,u);break e;case 11:o=Ov(null,o,p,s,u);break e;case 14:o=Nv(null,o,p,dr(p.type,s),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,I=o.pendingProps,I=o.elementType===p?I:dr(p,I),Hf(s,o,p,I,u);case 1:return p=o.type,I=o.pendingProps,I=o.elementType===p?I:dr(p,I),jv(s,o,p,I,u);case 3:e:{if(Fv(o),s===null)throw Error(t(387));p=o.pendingProps,D=o.memoizedState,I=D.element,Zy(s,o),Du(o,p,null,u);var q=o.memoizedState;if(p=q.element,D.isDehydrated)if(D={element:p,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},o.updateQueue.baseState=D,o.memoizedState=D,o.flags&256){I=jo(Error(t(423)),o),o=Vv(s,o,p,u,I);break e}else if(p!==I){I=jo(Error(t(424)),o),o=Vv(s,o,p,u,I);break e}else for(Fn=Oi(o.stateNode.containerInfo.firstChild),jn=o,Tt=!0,fr=null,u=Yy(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Oo(),p===I){o=ri(s,o,u);break e}pn(s,o,p,u)}o=o.child}return o;case 5:return nv(o),s===null&&wf(o),p=o.type,I=o.pendingProps,D=s!==null?s.memoizedProps:null,q=I.children,hf(p,I)?q=null:D!==null&&hf(p,D)&&(o.flags|=32),Mv(s,o),pn(s,o,q,u),o.child;case 6:return s===null&&wf(o),null;case 13:return Uv(s,o,u);case 4:return kf(o,o.stateNode.containerInfo),p=o.pendingProps,s===null?o.child=No(o,null,p,u):pn(s,o,p,u),o.child;case 11:return p=o.type,I=o.pendingProps,I=o.elementType===p?I:dr(p,I),Ov(s,o,p,I,u);case 7:return pn(s,o,o.pendingProps,u),o.child;case 8:return pn(s,o,o.pendingProps.children,u),o.child;case 12:return pn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,I=o.pendingProps,D=o.memoizedProps,q=I.value,gt(Ou,p._currentValue),p._currentValue=q,D!==null)if(hr(D.value,q)){if(D.children===I.children&&!In.current){o=ri(s,o,u);break e}}else for(D=o.child,D!==null&&(D.return=o);D!==null;){var J=D.dependencies;if(J!==null){q=D.child;for(var te=J.firstContext;te!==null;){if(te.context===p){if(D.tag===1){te=ni(-1,u&-u),te.tag=2;var pe=D.updateQueue;if(pe!==null){pe=pe.shared;var Se=pe.pending;Se===null?te.next=te:(te.next=Se.next,Se.next=te),pe.pending=te}}D.lanes|=u,te=D.alternate,te!==null&&(te.lanes|=u),Cf(D.return,u,o),J.lanes|=u;break}te=te.next}}else if(D.tag===10)q=D.type===o.type?null:D.child;else if(D.tag===18){if(q=D.return,q===null)throw Error(t(341));q.lanes|=u,J=q.alternate,J!==null&&(J.lanes|=u),Cf(q,u,o),q=D.sibling}else q=D.child;if(q!==null)q.return=D;else for(q=D;q!==null;){if(q===o){q=null;break}if(D=q.sibling,D!==null){D.return=q.return,q=D;break}q=q.return}D=q}pn(s,o,I.children,u),o=o.child}return o;case 9:return I=o.type,p=o.pendingProps.children,Do(o,u),I=Qn(I),p=p(I),o.flags|=1,pn(s,o,p,u),o.child;case 14:return p=o.type,I=dr(p,o.pendingProps),I=dr(p.type,I),Nv(s,o,p,I,u);case 15:return Lv(s,o,o.type,o.pendingProps,u);case 17:return p=o.type,I=o.pendingProps,I=o.elementType===p?I:dr(p,I),Hu(s,o),o.tag=1,Cn(p)?(s=!0,bu(o)):s=!1,Do(o,u),Cv(o,p,I),Bf(o,p,I,u),$f(null,o,p,!0,s,u);case 19:return qv(s,o,u);case 22:return Dv(s,o,u)}throw Error(t(156,o.tag))};function f_(s,o){return ao(s,o)}function qC(s,o,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(s,o,u,p){return new qC(s,o,u,p)}function hd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function zC(s){if(typeof s=="function")return hd(s)?1:0;if(s!=null){if(s=s.$$typeof,s===x)return 11;if(s===Q)return 14}return 2}function zi(s,o){var u=s.alternate;return u===null?(u=Xn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function tc(s,o,u,p,I,D){var q=2;if(p=s,typeof s=="function")hd(s)&&(q=1);else if(typeof s=="string")q=5;else e:switch(s){case P:return Vs(u.children,I,D,o);case _:q=8,I|=8;break;case A:return s=Xn(12,u,o,I|2),s.elementType=A,s.lanes=D,s;case L:return s=Xn(13,u,o,I),s.elementType=L,s.lanes=D,s;case $:return s=Xn(19,u,o,I),s.elementType=$,s.lanes=D,s;case Z:return nc(u,I,D,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:q=10;break e;case R:q=9;break e;case x:q=11;break e;case Q:q=14;break e;case se:q=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Xn(q,u,o,I),o.elementType=s,o.type=p,o.lanes=D,o}function Vs(s,o,u,p){return s=Xn(7,s,p,o),s.lanes=u,s}function nc(s,o,u,p){return s=Xn(22,s,p,o),s.elementType=Z,s.lanes=u,s.stateNode={isHidden:!1},s}function fd(s,o,u){return s=Xn(6,s,null,o),s.lanes=u,s}function dd(s,o,u){return o=Xn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function HC(s,o,u,p,I){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=p,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function pd(s,o,u,p,I,D,q,J,te){return s=new HC(s,o,u,J,te),o===1?(o=1,D===!0&&(o|=8)):o=0,D=Xn(3,null,null,o),s.current=D,D.stateNode=s,D.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Af(D),s}function $C(s,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:p==null?null:""+p,children:s,containerInfo:o,implementation:u}}function d_(s){if(!s)return Li;s=s._reactInternals;e:{if(ir(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Cn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Cn(u))return By(s,u,o)}return o}function p_(s,o,u,p,I,D,q,J,te){return s=pd(u,p,!0,s,I,D,q,J,te),s.context=d_(null),u=s.current,p=mn(),I=Bi(u),D=ni(p,I),D.callback=o??null,ji(u,D,I),s.current.lanes=I,Ci(s,I,p),kn(s,p),s}function rc(s,o,u,p){var I=o.current,D=mn(),q=Bi(I);return u=d_(u),o.context===null?o.context=u:o.pendingContext=u,o=ni(D,q),o.payload={element:s},p=p===void 0?null:p,p!==null&&(o.callback=p),s=ji(I,o,q),s!==null&&(gr(s,I,q,D),Lu(s,I,q)),q}function ic(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function m_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function md(s,o){m_(s,o),(s=s.alternate)&&m_(s,o)}function WC(){return null}var g_=typeof reportError=="function"?reportError:function(s){console.error(s)};function gd(s){this._internalRoot=s}sc.prototype.render=gd.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));rc(s,o,null,null)},sc.prototype.unmount=gd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Ms(function(){rc(null,s,null,null)}),o[Yr]=null}};function sc(s){this._internalRoot=s}sc.prototype.unstable_scheduleHydration=function(s){if(s){var o=su();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Cr.length&&o!==0&&o<Cr[u].priority;u++);Cr.splice(u,0,s),u===0&&lu(s)}};function yd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function oc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function y_(){}function KC(s,o,u,p,I){if(I){if(typeof p=="function"){var D=p;p=function(){var pe=ic(q);D.call(pe)}}var q=p_(o,p,s,0,null,!1,!1,"",y_);return s._reactRootContainer=q,s[Yr]=q.current,Va(s.nodeType===8?s.parentNode:s),Ms(),q}for(;I=s.lastChild;)s.removeChild(I);if(typeof p=="function"){var J=p;p=function(){var pe=ic(te);J.call(pe)}}var te=pd(s,0,!1,null,null,!1,!1,"",y_);return s._reactRootContainer=te,s[Yr]=te.current,Va(s.nodeType===8?s.parentNode:s),Ms(function(){rc(o,te,u,p)}),te}function ac(s,o,u,p,I){var D=u._reactRootContainer;if(D){var q=D;if(typeof I=="function"){var J=I;I=function(){var te=ic(q);J.call(te)}}rc(o,q,s,I)}else q=KC(u,o,s,I,p);return ic(q)}ru=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Si(o.pendingLanes);u!==0&&(bi(o,u|1),kn(o,mt()),(ut&6)===0&&(Uo=mt()+500,Di()))}break;case 13:Ms(function(){var p=ti(s,1);if(p!==null){var I=mn();gr(p,s,1,I)}}),md(s,1)}},co=function(s){if(s.tag===13){var o=ti(s,134217728);if(o!==null){var u=mn();gr(o,s,134217728,u)}md(s,134217728)}},iu=function(s){if(s.tag===13){var o=Bi(s),u=ti(s,o);if(u!==null){var p=mn();gr(u,s,o,p)}md(s,o)}},su=function(){return st},ou=function(s,o){var u=st;try{return st=s,o()}finally{st=u}},to=function(s,o,u){switch(o){case"input":if(et(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==s&&p.form===s.form){var I=Iu(p);if(!I)throw Error(t(90));ke(p),et(p,I)}}}break;case"textarea":je(s,u);break;case"select":o=u.value,o!=null&&be(s,!!u.multiple,o,!1)}},gs=ld,wa=Ms;var GC={usingClientEntryPoint:!1,Events:[qa,Ao,Iu,Sr,_a,ld]},nl={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QC={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Sa(s),s===null?null:s.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||WC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Es=lc.inject(QC),Nn=lc}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC,Rn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yd(o))throw Error(t(200));return $C(s,o,null,u)},Rn.createRoot=function(s,o){if(!yd(s))throw Error(t(299));var u=!1,p="",I=g_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(I=o.onRecoverableError)),o=pd(s,1,!1,null,null,u,!1,p,I),s[Yr]=o.current,Va(s.nodeType===8?s.parentNode:s),new gd(o)},Rn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Sa(o),s=s===null?null:s.stateNode,s},Rn.flushSync=function(s){return Ms(s)},Rn.hydrate=function(s,o,u){if(!oc(o))throw Error(t(200));return ac(null,s,o,!0,u)},Rn.hydrateRoot=function(s,o,u){if(!yd(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,I=!1,D="",q=g_;if(u!=null&&(u.unstable_strictMode===!0&&(I=!0),u.identifierPrefix!==void 0&&(D=u.identifierPrefix),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),o=p_(o,null,s,1,u??null,I,!1,D,q),s[Yr]=o.current,Va(s),p)for(s=0;s<p.length;s++)u=p[s],I=u._getVersion,I=I(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,I]:o.mutableSourceEagerHydrationData.push(u,I);return new sc(o)},Rn.render=function(s,o,u){if(!oc(o))throw Error(t(200));return ac(null,s,o,!1,u)},Rn.unmountComponentAtNode=function(s){if(!oc(s))throw Error(t(40));return s._reactRootContainer?(Ms(function(){ac(null,null,s,!1,function(){s._reactRootContainer=null,s[Yr]=null})}),!0):!1},Rn.unstable_batchedUpdates=ld,Rn.unstable_renderSubtreeIntoContainer=function(s,o,u,p){if(!oc(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return ac(s,o,u,!1,p)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var C_;function u1(){if(C_)return wd.exports;C_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wd.exports=ib(),wd.exports}var b_;function sb(){if(b_)return cc;b_=1;var r=u1();return cc.createRoot=r.createRoot,cc.hydrateRoot=r.hydrateRoot,cc}var ob=sb();const ab=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lb=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],l=r[t++],c=r[t++],h=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const a=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},h1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],l=i+1<r.length,c=l?r[i+1]:0,h=i+2<r.length,d=h?r[i+2]:0,v=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,y=d&63;h||(y=64,l||(m=64)),n.push(t[v],t[g],t[m],t[y])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(c1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):lb(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const g=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new ub;const m=a<<2|c>>4;if(n.push(m),d!==64){const y=c<<4&240|d>>2;if(n.push(y),g!==64){const T=d<<6&192|g;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ub extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cb=function(r){const e=c1(r);return h1.encodeByteArray(e,!0)},Dc=function(r){return cb(r).replace(/\./g,"")},f1=function(r){try{return h1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=()=>hb().__FIREBASE_DEFAULTS__,db=()=>{if(typeof process>"u"||typeof A_>"u")return;const r=A_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&f1(r[1]);return e&&JSON.parse(e)},oh=()=>{try{return ab()||fb()||db()||pb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},d1=r=>{var e,t;return(t=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},p1=r=>{const e=d1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},m1=()=>{var r;return(r=oh())===null||r===void 0?void 0:r.config},g1=r=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Dc(JSON.stringify(t)),Dc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function yb(){var r;const e=(r=oh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _b(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Eb(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Tb(){return!yb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sb(){try{return typeof indexedDB=="object"}catch{return!1}}function Ib(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="FirebaseError";class qr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Cb,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?bb(a,n):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new qr(i,c,n)}}function bb(r,e){return r.replace(Ab,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Ab=/\{\$([^}]+)}/g;function kb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function zs(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],l=e[i];if(k_(a)&&k_(l)){if(!zs(a,l))return!1}else if(a!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function k_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function al(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ll(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Rb(r,e){const t=new Pb(r,e);return t.subscribe.bind(t)}class Pb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");xb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Sd),i.error===void 0&&(i.error=Sd),i.complete===void 0&&(i.complete=Sd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xb(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r){return r&&r._delegate?r._delegate:r}class rs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new mb;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lb(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&l.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Nb(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nb(r){return r===Us?void 0:r}function Lb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ob(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(rt||(rt={}));const Mb={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},jb=rt.INFO,Fb={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},Vb=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=Fb[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=jb,this._logHandler=Vb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const Ub=(r,e)=>e.some(t=>r instanceof t);let R_,P_;function Bb(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qb(){return P_||(P_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v1=new WeakMap,_m=new WeakMap,_1=new WeakMap,Id=new WeakMap,Jm=new WeakMap;function zb(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",l)},a=()=>{t(Zi(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&v1.set(t,r)}).catch(()=>{}),Jm.set(e,r),e}function Hb(r){if(_m.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",l),r.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",l),r.addEventListener("abort",l)});_m.set(r,e)}let wm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return _m.get(r);if(e==="objectStoreNames")return r.objectStoreNames||_1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $b(r){wm=r(wm)}function Wb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Cd(this),e,...t);return _1.set(n,e.sort?e.sort():[e]),Zi(n)}:qb().includes(r)?function(...e){return r.apply(Cd(this),e),Zi(v1.get(this))}:function(...e){return Zi(r.apply(Cd(this),e))}}function Kb(r){return typeof r=="function"?Wb(r):(r instanceof IDBTransaction&&Hb(r),Ub(r,Bb())?new Proxy(r,wm):r)}function Zi(r){if(r instanceof IDBRequest)return zb(r);if(Id.has(r))return Id.get(r);const e=Kb(r);return e!==r&&(Id.set(r,e),Jm.set(e,r)),e}const Cd=r=>Jm.get(r);function Gb(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const l=indexedDB.open(r,e),c=Zi(l);return n&&l.addEventListener("upgradeneeded",h=>{n(Zi(l.result),h.oldVersion,h.newVersion,Zi(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Qb=["get","getKey","getAll","getAllKeys","count"],Jb=["put","add","delete","clear"],bd=new Map;function x_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(bd.get(e))return bd.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=Jb.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Qb.includes(t)))return;const a=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return bd.set(e,a),a}$b(r=>({...r,get:(e,t,n)=>x_(e,t)||r.get(e,t,n),has:(e,t)=>!!x_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Xb(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Xb(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Em="@firebase/app",O_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Qm("@firebase/app"),Zb="@firebase/app-compat",eA="@firebase/analytics-compat",tA="@firebase/analytics",nA="@firebase/app-check-compat",rA="@firebase/app-check",iA="@firebase/auth",sA="@firebase/auth-compat",oA="@firebase/database",aA="@firebase/data-connect",lA="@firebase/database-compat",uA="@firebase/functions",cA="@firebase/functions-compat",hA="@firebase/installations",fA="@firebase/installations-compat",dA="@firebase/messaging",pA="@firebase/messaging-compat",mA="@firebase/performance",gA="@firebase/performance-compat",yA="@firebase/remote-config",vA="@firebase/remote-config-compat",_A="@firebase/storage",wA="@firebase/storage-compat",EA="@firebase/firestore",TA="@firebase/vertexai",SA="@firebase/firestore-compat",IA="firebase",CA="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",bA={[Em]:"fire-core",[Zb]:"fire-core-compat",[tA]:"fire-analytics",[eA]:"fire-analytics-compat",[rA]:"fire-app-check",[nA]:"fire-app-check-compat",[iA]:"fire-auth",[sA]:"fire-auth-compat",[oA]:"fire-rtdb",[aA]:"fire-data-connect",[lA]:"fire-rtdb-compat",[uA]:"fire-fn",[cA]:"fire-fn-compat",[hA]:"fire-iid",[fA]:"fire-iid-compat",[dA]:"fire-fcm",[pA]:"fire-fcm-compat",[mA]:"fire-perf",[gA]:"fire-perf-compat",[yA]:"fire-rc",[vA]:"fire-rc-compat",[_A]:"fire-gcs",[wA]:"fire-gcs-compat",[EA]:"fire-fst",[SA]:"fire-fst-compat",[TA]:"fire-vertex","fire-js":"fire-js",[IA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,AA=new Map,Sm=new Map;function N_(r,e){try{r.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Hs(r){const e=r.name;if(Sm.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;Sm.set(e,r);for(const t of Mc.values())N_(t,r);for(const t of AA.values())N_(t,r);return!0}function ah(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Un(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new Ll("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=CA;function w1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Tm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw es.create("bad-app-name",{appName:String(i)});if(t||(t=m1()),!t)throw es.create("no-options");const a=Mc.get(i);if(a){if(zs(t,a.options)&&zs(n,a.config))return a;throw es.create("duplicate-app",{appName:i})}const l=new Db(i);for(const h of Sm.values())l.addComponent(h);const c=new RA(t,n,l);return Mc.set(i,c),c}function Ym(r=Tm){const e=Mc.get(r);if(!e&&r===Tm&&m1())return w1();if(!e)throw es.create("no-app",{appName:r});return e}function Dr(r,e,t){var n;let i=(n=bA[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(c.join(" "));return}Hs(new rs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firebase-heartbeat-database",xA=1,El="firebase-heartbeat-store";let Ad=null;function E1(){return Ad||(Ad=Gb(PA,xA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(El)}catch(t){console.warn(t)}}}}).catch(r=>{throw es.create("idb-open",{originalErrorMessage:r.message})})),Ad}async function OA(r){try{const t=(await E1()).transaction(El),n=await t.objectStore(El).get(T1(r));return await t.done,n}catch(e){if(e instanceof qr)hi.warn(e.message);else{const t=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(t.message)}}}async function L_(r,e){try{const n=(await E1()).transaction(El,"readwrite");await n.objectStore(El).put(e,T1(r)),await n.done}catch(t){if(t instanceof qr)hi.warn(t.message);else{const n=es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hi.warn(n.message)}}}function T1(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=1024,LA=30;class DA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jA(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=D_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>LA){const l=FA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){hi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D_(),{heartbeatsToSend:n,unsentEntries:i}=MA(this._heartbeatsCache.heartbeats),a=Dc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return hi.warn(t),""}}}function D_(){return new Date().toISOString().substring(0,10)}function MA(r,e=NA){const t=[];let n=r.slice();for(const i of r){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),M_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),M_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class jA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sb()?Ib().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return L_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return L_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function M_(r){return Dc(JSON.stringify({version:2,heartbeats:r})).length}function FA(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(r){Hs(new rs("platform-logger",e=>new Yb(e),"PRIVATE")),Hs(new rs("heartbeat",e=>new DA(e),"PRIVATE")),Dr(Em,O_,r),Dr(Em,O_,"esm2017"),Dr("fire-js","")}VA("");var UA="firebase",BA="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(UA,BA,"app");var j_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,S1;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,_){function A(){}A.prototype=_.prototype,P.D=_.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(k,R,x){for(var L=Array(arguments.length-2),$=2;$<arguments.length;$++)L[$-2]=arguments[$];return _.prototype[R].apply(k,L)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,_,A){A||(A=0);var k=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)k[R]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(R=0;16>R;++R)k[R]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=P.g[0],A=P.g[1],R=P.g[2];var x=P.g[3],L=_+(x^A&(R^x))+k[0]+3614090360&4294967295;_=A+(L<<7&4294967295|L>>>25),L=x+(R^_&(A^R))+k[1]+3905402710&4294967295,x=_+(L<<12&4294967295|L>>>20),L=R+(A^x&(_^A))+k[2]+606105819&4294967295,R=x+(L<<17&4294967295|L>>>15),L=A+(_^R&(x^_))+k[3]+3250441966&4294967295,A=R+(L<<22&4294967295|L>>>10),L=_+(x^A&(R^x))+k[4]+4118548399&4294967295,_=A+(L<<7&4294967295|L>>>25),L=x+(R^_&(A^R))+k[5]+1200080426&4294967295,x=_+(L<<12&4294967295|L>>>20),L=R+(A^x&(_^A))+k[6]+2821735955&4294967295,R=x+(L<<17&4294967295|L>>>15),L=A+(_^R&(x^_))+k[7]+4249261313&4294967295,A=R+(L<<22&4294967295|L>>>10),L=_+(x^A&(R^x))+k[8]+1770035416&4294967295,_=A+(L<<7&4294967295|L>>>25),L=x+(R^_&(A^R))+k[9]+2336552879&4294967295,x=_+(L<<12&4294967295|L>>>20),L=R+(A^x&(_^A))+k[10]+4294925233&4294967295,R=x+(L<<17&4294967295|L>>>15),L=A+(_^R&(x^_))+k[11]+2304563134&4294967295,A=R+(L<<22&4294967295|L>>>10),L=_+(x^A&(R^x))+k[12]+1804603682&4294967295,_=A+(L<<7&4294967295|L>>>25),L=x+(R^_&(A^R))+k[13]+4254626195&4294967295,x=_+(L<<12&4294967295|L>>>20),L=R+(A^x&(_^A))+k[14]+2792965006&4294967295,R=x+(L<<17&4294967295|L>>>15),L=A+(_^R&(x^_))+k[15]+1236535329&4294967295,A=R+(L<<22&4294967295|L>>>10),L=_+(R^x&(A^R))+k[1]+4129170786&4294967295,_=A+(L<<5&4294967295|L>>>27),L=x+(A^R&(_^A))+k[6]+3225465664&4294967295,x=_+(L<<9&4294967295|L>>>23),L=R+(_^A&(x^_))+k[11]+643717713&4294967295,R=x+(L<<14&4294967295|L>>>18),L=A+(x^_&(R^x))+k[0]+3921069994&4294967295,A=R+(L<<20&4294967295|L>>>12),L=_+(R^x&(A^R))+k[5]+3593408605&4294967295,_=A+(L<<5&4294967295|L>>>27),L=x+(A^R&(_^A))+k[10]+38016083&4294967295,x=_+(L<<9&4294967295|L>>>23),L=R+(_^A&(x^_))+k[15]+3634488961&4294967295,R=x+(L<<14&4294967295|L>>>18),L=A+(x^_&(R^x))+k[4]+3889429448&4294967295,A=R+(L<<20&4294967295|L>>>12),L=_+(R^x&(A^R))+k[9]+568446438&4294967295,_=A+(L<<5&4294967295|L>>>27),L=x+(A^R&(_^A))+k[14]+3275163606&4294967295,x=_+(L<<9&4294967295|L>>>23),L=R+(_^A&(x^_))+k[3]+4107603335&4294967295,R=x+(L<<14&4294967295|L>>>18),L=A+(x^_&(R^x))+k[8]+1163531501&4294967295,A=R+(L<<20&4294967295|L>>>12),L=_+(R^x&(A^R))+k[13]+2850285829&4294967295,_=A+(L<<5&4294967295|L>>>27),L=x+(A^R&(_^A))+k[2]+4243563512&4294967295,x=_+(L<<9&4294967295|L>>>23),L=R+(_^A&(x^_))+k[7]+1735328473&4294967295,R=x+(L<<14&4294967295|L>>>18),L=A+(x^_&(R^x))+k[12]+2368359562&4294967295,A=R+(L<<20&4294967295|L>>>12),L=_+(A^R^x)+k[5]+4294588738&4294967295,_=A+(L<<4&4294967295|L>>>28),L=x+(_^A^R)+k[8]+2272392833&4294967295,x=_+(L<<11&4294967295|L>>>21),L=R+(x^_^A)+k[11]+1839030562&4294967295,R=x+(L<<16&4294967295|L>>>16),L=A+(R^x^_)+k[14]+4259657740&4294967295,A=R+(L<<23&4294967295|L>>>9),L=_+(A^R^x)+k[1]+2763975236&4294967295,_=A+(L<<4&4294967295|L>>>28),L=x+(_^A^R)+k[4]+1272893353&4294967295,x=_+(L<<11&4294967295|L>>>21),L=R+(x^_^A)+k[7]+4139469664&4294967295,R=x+(L<<16&4294967295|L>>>16),L=A+(R^x^_)+k[10]+3200236656&4294967295,A=R+(L<<23&4294967295|L>>>9),L=_+(A^R^x)+k[13]+681279174&4294967295,_=A+(L<<4&4294967295|L>>>28),L=x+(_^A^R)+k[0]+3936430074&4294967295,x=_+(L<<11&4294967295|L>>>21),L=R+(x^_^A)+k[3]+3572445317&4294967295,R=x+(L<<16&4294967295|L>>>16),L=A+(R^x^_)+k[6]+76029189&4294967295,A=R+(L<<23&4294967295|L>>>9),L=_+(A^R^x)+k[9]+3654602809&4294967295,_=A+(L<<4&4294967295|L>>>28),L=x+(_^A^R)+k[12]+3873151461&4294967295,x=_+(L<<11&4294967295|L>>>21),L=R+(x^_^A)+k[15]+530742520&4294967295,R=x+(L<<16&4294967295|L>>>16),L=A+(R^x^_)+k[2]+3299628645&4294967295,A=R+(L<<23&4294967295|L>>>9),L=_+(R^(A|~x))+k[0]+4096336452&4294967295,_=A+(L<<6&4294967295|L>>>26),L=x+(A^(_|~R))+k[7]+1126891415&4294967295,x=_+(L<<10&4294967295|L>>>22),L=R+(_^(x|~A))+k[14]+2878612391&4294967295,R=x+(L<<15&4294967295|L>>>17),L=A+(x^(R|~_))+k[5]+4237533241&4294967295,A=R+(L<<21&4294967295|L>>>11),L=_+(R^(A|~x))+k[12]+1700485571&4294967295,_=A+(L<<6&4294967295|L>>>26),L=x+(A^(_|~R))+k[3]+2399980690&4294967295,x=_+(L<<10&4294967295|L>>>22),L=R+(_^(x|~A))+k[10]+4293915773&4294967295,R=x+(L<<15&4294967295|L>>>17),L=A+(x^(R|~_))+k[1]+2240044497&4294967295,A=R+(L<<21&4294967295|L>>>11),L=_+(R^(A|~x))+k[8]+1873313359&4294967295,_=A+(L<<6&4294967295|L>>>26),L=x+(A^(_|~R))+k[15]+4264355552&4294967295,x=_+(L<<10&4294967295|L>>>22),L=R+(_^(x|~A))+k[6]+2734768916&4294967295,R=x+(L<<15&4294967295|L>>>17),L=A+(x^(R|~_))+k[13]+1309151649&4294967295,A=R+(L<<21&4294967295|L>>>11),L=_+(R^(A|~x))+k[4]+4149444226&4294967295,_=A+(L<<6&4294967295|L>>>26),L=x+(A^(_|~R))+k[11]+3174756917&4294967295,x=_+(L<<10&4294967295|L>>>22),L=R+(_^(x|~A))+k[2]+718787259&4294967295,R=x+(L<<15&4294967295|L>>>17),L=A+(x^(R|~_))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+_&4294967295,P.g[1]=P.g[1]+(R+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+x&4294967295}n.prototype.u=function(P,_){_===void 0&&(_=P.length);for(var A=_-this.blockSize,k=this.B,R=this.h,x=0;x<_;){if(R==0)for(;x<=A;)i(this,P,x),x+=this.blockSize;if(typeof P=="string"){for(;x<_;)if(k[R++]=P.charCodeAt(x++),R==this.blockSize){i(this,k),R=0;break}}else for(;x<_;)if(k[R++]=P[x++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=_},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var _=1;_<P.length-8;++_)P[_]=0;var A=8*this.o;for(_=P.length-8;_<P.length;++_)P[_]=A&255,A/=256;for(this.u(P),P=Array(16),_=A=0;4>_;++_)for(var k=0;32>k;k+=8)P[A++]=this.g[_]>>>k&255;return P};function a(P,_){var A=c;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=_(P)}function l(P,_){this.h=_;for(var A=[],k=!0,R=P.length-1;0<=R;R--){var x=P[R]|0;k&&x==_||(A[R]=x,k=!1)}this.g=A}var c={};function h(P){return-128<=P&&128>P?a(P,function(_){return new l([_|0],0>_?-1:0)}):new l([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return g;if(0>P)return w(d(-P));for(var _=[],A=1,k=0;P>=A;k++)_[k]=P/A|0,A*=4294967296;return new l(_,0)}function v(P,_){if(P.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(P.charAt(0)=="-")return w(v(P.substring(1),_));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(_,8)),k=g,R=0;R<P.length;R+=8){var x=Math.min(8,P.length-R),L=parseInt(P.substring(R,R+x),_);8>x?(x=d(Math.pow(_,x)),k=k.j(x).add(d(L))):(k=k.j(A),k=k.add(d(L)))}return k}var g=h(0),m=h(1),y=h(16777216);r=l.prototype,r.m=function(){if(S(this))return-w(this).m();for(var P=0,_=1,A=0;A<this.g.length;A++){var k=this.i(A);P+=(0<=k?k:4294967296+k)*_,_*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(T(this))return"0";if(S(this))return"-"+w(this).toString(P);for(var _=d(Math.pow(P,6)),A=this,k="";;){var R=C(A,_).g;A=E(A,R.j(_));var x=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=R,T(A))return x+k;for(;6>x.length;)x="0"+x;k=x+k}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function T(P){if(P.h!=0)return!1;for(var _=0;_<P.g.length;_++)if(P.g[_]!=0)return!1;return!0}function S(P){return P.h==-1}r.l=function(P){return P=E(this,P),S(P)?-1:T(P)?0:1};function w(P){for(var _=P.g.length,A=[],k=0;k<_;k++)A[k]=~P.g[k];return new l(A,~P.h).add(m)}r.abs=function(){return S(this)?w(this):this},r.add=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0,R=0;R<=_;R++){var x=k+(this.i(R)&65535)+(P.i(R)&65535),L=(x>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);k=L>>>16,x&=65535,L&=65535,A[R]=L<<16|x}return new l(A,A[A.length-1]&-2147483648?-1:0)};function E(P,_){return P.add(w(_))}r.j=function(P){if(T(this)||T(P))return g;if(S(this))return S(P)?w(this).j(w(P)):w(w(this).j(P));if(S(P))return w(this.j(w(P)));if(0>this.l(y)&&0>P.l(y))return d(this.m()*P.m());for(var _=this.g.length+P.g.length,A=[],k=0;k<2*_;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<P.g.length;R++){var x=this.i(k)>>>16,L=this.i(k)&65535,$=P.i(R)>>>16,Q=P.i(R)&65535;A[2*k+2*R]+=L*Q,b(A,2*k+2*R),A[2*k+2*R+1]+=x*Q,b(A,2*k+2*R+1),A[2*k+2*R+1]+=L*$,b(A,2*k+2*R+1),A[2*k+2*R+2]+=x*$,b(A,2*k+2*R+2)}for(k=0;k<_;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=_;k<2*_;k++)A[k]=0;return new l(A,0)};function b(P,_){for(;(P[_]&65535)!=P[_];)P[_+1]+=P[_]>>>16,P[_]&=65535,_++}function O(P,_){this.g=P,this.h=_}function C(P,_){if(T(_))throw Error("division by zero");if(T(P))return new O(g,g);if(S(P))return _=C(w(P),_),new O(w(_.g),w(_.h));if(S(_))return _=C(P,w(_)),new O(w(_.g),_.h);if(30<P.g.length){if(S(P)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,k=_;0>=k.l(P);)A=F(A),k=F(k);var R=U(A,1),x=U(k,1);for(k=U(k,2),A=U(A,2);!T(k);){var L=x.add(k);0>=L.l(P)&&(R=R.add(A),x=L),k=U(k,1),A=U(A,1)}return _=E(P,R.j(_)),new O(R,_)}for(R=g;0<=P.l(_);){for(A=Math.max(1,Math.floor(P.m()/_.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),x=d(A),L=x.j(_);S(L)||0<L.l(P);)A-=k,x=d(A),L=x.j(_);T(x)&&(x=m),R=R.add(x),P=E(P,L)}return new O(R,P)}r.A=function(P){return C(this,P).h},r.and=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)&P.i(k);return new l(A,this.h&P.h)},r.or=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)|P.i(k);return new l(A,this.h|P.h)},r.xor=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)^P.i(k);return new l(A,this.h^P.h)};function F(P){for(var _=P.g.length+1,A=[],k=0;k<_;k++)A[k]=P.i(k)<<1|P.i(k-1)>>>31;return new l(A,P.h)}function U(P,_){var A=_>>5;_%=32;for(var k=P.g.length-A,R=[],x=0;x<k;x++)R[x]=0<_?P.i(x+A)>>>_|P.i(x+A+1)<<32-_:P.i(x+A);return new l(R,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,S1=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=v,ts=l}).apply(typeof j_<"u"?j_:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I1,ul,C1,wc,Im,b1,A1,k1;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,V){return f==Array.prototype||f==Object.prototype||(f[N]=V.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var N=0;N<f.length;++N){var V=f[N];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=t(this);function i(f,N){if(N)e:{var V=n;f=f.split(".");for(var K=0;K<f.length-1;K++){var ae=f[K];if(!(ae in V))break e;V=V[ae]}f=f[f.length-1],K=V[f],N=N(K),N!=K&&N!=null&&e(V,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var V=0,K=!1,ae={next:function(){if(!K&&V<f.length){var me=V++;return{value:N(me,f[me]),done:!1}}return K=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}i("Array.prototype.values",function(f){return f||function(){return a(this,function(N,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function d(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function v(f,N,V){return f.call.apply(f.bind,arguments)}function g(f,N,V){if(!f)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,K),f.apply(N,ae)}}return function(){return f.apply(N,arguments)}}function m(f,N,V){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:g,m.apply(null,arguments)}function y(f,N){var V=Array.prototype.slice.call(arguments,1);return function(){var K=V.slice();return K.push.apply(K,arguments),f.apply(this,K)}}function T(f,N){function V(){}V.prototype=N.prototype,f.aa=N.prototype,f.prototype=new V,f.prototype.constructor=f,f.Qb=function(K,ae,me){for(var Ae=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Ae[dt-2]=arguments[dt];return N.prototype[ae].apply(K,Ae)}}function S(f){const N=f.length;if(0<N){const V=Array(N);for(let K=0;K<N;K++)V[K]=f[K];return V}return[]}function w(f,N){for(let V=1;V<arguments.length;V++){const K=arguments[V];if(h(K)){const ae=f.length||0,me=K.length||0;f.length=ae+me;for(let Ae=0;Ae<me;Ae++)f[ae+Ae]=K[Ae]}else f.push(K)}}class E{constructor(N,V){this.i=N,this.j=V,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function b(f){return/^[\s\xa0]*$/.test(f)}function O(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function C(f){return C[" "](f),f}C[" "]=function(){};var F=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function U(f,N,V){for(const K in f)N.call(V,f[K],K,f)}function P(f,N){for(const V in f)N.call(void 0,f[V],V,f)}function _(f){const N={};for(const V in f)N[V]=f[V];return N}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,N){let V,K;for(let ae=1;ae<arguments.length;ae++){K=arguments[ae];for(V in K)f[V]=K[V];for(let me=0;me<A.length;me++)V=A[me],Object.prototype.hasOwnProperty.call(K,V)&&(f[V]=K[V])}}function R(f){var N=1;f=f.split(":");const V=[];for(;0<N&&f.length;)V.push(f.shift()),N--;return f.length&&V.push(f.join(":")),V}function x(f){c.setTimeout(()=>{throw f},0)}function L(){var f=G;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class ${constructor(){this.h=this.g=null}add(N,V){const K=Q.get();K.set(N,V),this.h?this.h.next=K:this.g=K,this.h=K}}var Q=new E(()=>new se,f=>f.reset());class se{constructor(){this.next=this.g=this.h=null}set(N,V){this.h=N,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,re=!1,G=new $,W=()=>{const f=c.Promise.resolve(void 0);Z=()=>{f.then(j)}};var j=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(V){x(V)}var N=Q;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}re=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const V=()=>{};c.addEventListener("test",V,N),c.removeEventListener("test",V,N)}catch{}return f}();function X(f,N){if(z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var V=this.type=f.type,K=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(F){e:{try{C(N.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(N=null)}}else V=="mouseover"?N=f.fromElement:V=="mouseout"&&(N=f.toElement);this.relatedTarget=N,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:H[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&X.aa.h.call(this)}}T(X,z);var H={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ie(f,N,V,K,ae){this.listener=f,this.proxy=null,this.src=N,this.type=V,this.capture=!!K,this.ha=ae,this.key=++ne,this.da=this.fa=!1}function fe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ve(f){this.src=f,this.g={},this.h=0}ve.prototype.add=function(f,N,V,K,ae){var me=f.toString();f=this.g[me],f||(f=this.g[me]=[],this.h++);var Ae=Re(f,N,K,ae);return-1<Ae?(N=f[Ae],V||(N.fa=!1)):(N=new ie(N,this.src,me,!!K,ae),N.fa=V,f.push(N)),N};function ke(f,N){var V=N.type;if(V in f.g){var K=f.g[V],ae=Array.prototype.indexOf.call(K,N,void 0),me;(me=0<=ae)&&Array.prototype.splice.call(K,ae,1),me&&(fe(N),f.g[V].length==0&&(delete f.g[V],f.h--))}}function Re(f,N,V,K){for(var ae=0;ae<f.length;++ae){var me=f[ae];if(!me.da&&me.listener==N&&me.capture==!!V&&me.ha==K)return ae}return-1}var xe="closure_lm_"+(1e6*Math.random()|0),De={};function Ue(f,N,V,K,ae){if(Array.isArray(N)){for(var me=0;me<N.length;me++)Ue(f,N[me],V,K,ae);return null}return V=Be(V),f&&f[Y]?f.K(N,V,d(K)?!!K.capture:!1,ae):et(f,N,V,!1,K,ae)}function et(f,N,V,K,ae,me){if(!N)throw Error("Invalid event type");var Ae=d(ae)?!!ae.capture:!!ae,dt=$e(f);if(dt||(f[xe]=dt=new ve(f)),V=dt.add(N,V,K,Ae,me),V.proxy)return V;if(K=ue(),V.proxy=K,K.src=f,K.listener=V,f.addEventListener)ee||(ae=Ae),ae===void 0&&(ae=!1),f.addEventListener(N.toString(),K,ae);else if(f.attachEvent)f.attachEvent(be(N.toString()),K);else if(f.addListener&&f.removeListener)f.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ue(){function f(V){return N.call(f.src,f.listener,V)}const N=ye;return f}function de(f,N,V,K,ae){if(Array.isArray(N))for(var me=0;me<N.length;me++)de(f,N[me],V,K,ae);else K=d(K)?!!K.capture:!!K,V=Be(V),f&&f[Y]?(f=f.i,N=String(N).toString(),N in f.g&&(me=f.g[N],V=Re(me,V,K,ae),-1<V&&(fe(me[V]),Array.prototype.splice.call(me,V,1),me.length==0&&(delete f.g[N],f.h--)))):f&&(f=$e(f))&&(N=f.g[N.toString()],f=-1,N&&(f=Re(N,V,K,ae)),(V=-1<f?N[f]:null)&&Ee(V))}function Ee(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[Y])ke(N.i,f);else{var V=f.type,K=f.proxy;N.removeEventListener?N.removeEventListener(V,K,f.capture):N.detachEvent?N.detachEvent(be(V),K):N.addListener&&N.removeListener&&N.removeListener(K),(V=$e(N))?(ke(V,f),V.h==0&&(V.src=null,N[xe]=null)):fe(f)}}}function be(f){return f in De?De[f]:De[f]="on"+f}function ye(f,N){if(f.da)f=!0;else{N=new X(N,this);var V=f.listener,K=f.ha||f.src;f.fa&&Ee(f),f=V.call(K,N)}return f}function $e(f){return f=f[xe],f instanceof ve?f:null}var je="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(f){return typeof f=="function"?f:(f[je]||(f[je]=function(N){return f.handleEvent(N)}),f[je])}function We(){B.call(this),this.i=new ve(this),this.M=this,this.F=null}T(We,B),We.prototype[Y]=!0,We.prototype.removeEventListener=function(f,N,V,K){de(this,f,N,V,K)};function Xe(f,N){var V,K=f.F;if(K)for(V=[];K;K=K.F)V.push(K);if(f=f.M,K=N.type||N,typeof N=="string")N=new z(N,f);else if(N instanceof z)N.target=N.target||f;else{var ae=N;N=new z(K,f),k(N,ae)}if(ae=!0,V)for(var me=V.length-1;0<=me;me--){var Ae=N.g=V[me];ae=Ze(Ae,K,!0,N)&&ae}if(Ae=N.g=f,ae=Ze(Ae,K,!0,N)&&ae,ae=Ze(Ae,K,!1,N)&&ae,V)for(me=0;me<V.length;me++)Ae=N.g=V[me],ae=Ze(Ae,K,!1,N)&&ae}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var V=f.g[N],K=0;K<V.length;K++)fe(V[K]);delete f.g[N],f.h--}}this.F=null},We.prototype.K=function(f,N,V,K){return this.i.add(String(f),N,!1,V,K)},We.prototype.L=function(f,N,V,K){return this.i.add(String(f),N,!0,V,K)};function Ze(f,N,V,K){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var ae=!0,me=0;me<N.length;++me){var Ae=N[me];if(Ae&&!Ae.da&&Ae.capture==V){var dt=Ae.listener,Vt=Ae.ha||Ae.src;Ae.fa&&ke(f.i,Ae),ae=dt.call(Vt,K)!==!1&&ae}}return ae&&!K.defaultPrevented}function er(f,N,V){if(typeof f=="function")V&&(f=m(f,V));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:c.setTimeout(f,N||0)}function ct(f){f.g=er(()=>{f.g=null,f.i&&(f.i=!1,ct(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class St extends B{constructor(N,V){super(),this.m=N,this.l=V,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(f){B.call(this),this.h=f,this.g={}}T(zt,B);var tr=[];function Ei(f){U(f.g,function(N,V){this.g.hasOwnProperty(V)&&Ee(N)},f),f.g={}}zt.prototype.N=function(){zt.aa.N.call(this),Ei(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ga=c.JSON.stringify,ya=c.JSON.parse,va=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ms(){}ms.prototype.h=null;function eo(f){return f.h||(f.h=f.i())}function to(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tr(){z.call(this,"d")}T(Tr,z);function no(){z.call(this,"c")}T(no,z);var Sr={},_a=null;function gs(){return _a=_a||new We}Sr.La="serverreachability";function wa(f){z.call(this,Sr.La,f)}T(wa,z);function $r(f){const N=gs();Xe(N,new wa(N))}Sr.STAT_EVENT="statevent";function Ea(f,N){z.call(this,Sr.STAT_EVENT,f),this.stat=N}T(Ea,z);function xt(f){const N=gs();Xe(N,new Ea(N,f))}Sr.Ma="timingevent";function ro(f,N){z.call(this,Sr.Ma,f),this.size=N}T(ro,z);function nr(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},N)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function vs(f,N,V,K,ae,me){f.info(function(){if(f.g)if(me)for(var Ae="",dt=me.split("&"),Vt=0;Vt<dt.length;Vt++){var ot=dt[Vt].split("=");if(1<ot.length){var Ht=ot[0];ot=ot[1];var Dt=Ht.split("_");Ae=2<=Dt.length&&Dt[1]=="type"?Ae+(Ht+"="+ot+"&"):Ae+(Ht+"=redacted&")}}else Ae=null;else Ae=me;return"XMLHTTP REQ ("+K+") [attempt "+ae+"]: "+N+`
`+V+`
`+Ae})}function io(f,N,V,K,ae,me,Ae){f.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+ae+"]: "+N+`
`+V+`
`+me+" "+Ae})}function rr(f,N,V,K){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+$h(f,V)+(K?" "+K:"")})}function Ta(f,N){f.info(function(){return"TIMEOUT: "+N})}ys.prototype.info=function(){};function $h(f,N){if(!f.g)return N;if(!N)return null;try{var V=JSON.parse(N);if(V){for(f=0;f<V.length;f++)if(Array.isArray(V[f])){var K=V[f];if(!(2>K.length)){var ae=K[1];if(Array.isArray(ae)&&!(1>ae.length)){var me=ae[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Ae=1;Ae<ae.length;Ae++)ae[Ae]=""}}}}return ga(V)}catch{return N}}var so={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ql={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function _s(){}T(_s,ms),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},ir=new _s;function sr(f,N,V,K){this.j=f,this.i=N,this.l=V,this.R=K||1,this.U=new zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}var Sa={},oo={};function ao(f,N,V){f.L=1,f.v=bi(Ln(N)),f.m=V,f.P=!0,Ia(f,null)}function Ia(f,N){f.F=Date.now(),mt(f),f.A=Ln(f.v);var V=f.A,K=f.R;Array.isArray(K)||(K=[String(K)]),ki(V.i,"t",K),f.C=0,V=f.j.J,f.h=new Jl,f.g=pu(f.j,V?N:null,!f.m),0<f.O&&(f.M=new St(m(f.Y,f,f.g),f.O)),N=f.U,V=f.g,K=f.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(tr[0]=ae.toString()),ae=tr);for(var me=0;me<ae.length;me++){var Ae=Ue(V,ae[me],K||N.handleEvent,!1,N.h||N);if(!Ae)break;N.g[Ae.key]=Ae}N=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),$r(),vs(f.i,f.u,f.A,f.l,f.R,f.m)}sr.prototype.ca=function(f){f=f.target;const N=this.M;N&&Sn(f)==3?N.j():this.Y(f)},sr.prototype.Y=function(f){try{if(f==this.g)e:{const Dt=Sn(this.g);var N=this.g.Ba();const Wn=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Pa(this.g)))){this.J||Dt!=4||N==7||(N==8||0>=Wn?$r(3):$r(2)),ws(this);var V=this.g.Z();this.X=V;t:if(Yl(this)){var K=Pa(this.g);f="";var ae=K.length,me=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),Ti(this);var Ae="";break t}this.h.i=new c.TextDecoder}for(N=0;N<ae;N++)this.h.h=!0,f+=this.h.i.decode(K[N],{stream:!(me&&N==ae-1)});K.length=0,this.h.g+=f,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=V==200,io(this.i,this.u,this.A,this.l,this.R,Dt,V),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Vt=this.g;if((dt=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(dt)){var ot=dt;break t}}ot=null}if(V=ot)rr(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ca(this,V);else{this.o=!1,this.s=3,xt(12),Hn(this),Ti(this);break e}}if(this.P){V=!0;let Mn;for(;!this.J&&this.C<Ae.length;)if(Mn=Wh(this,Ae),Mn==oo){Dt==4&&(this.s=4,xt(14),V=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Sa){this.s=4,xt(15),rr(this.i,this.l,Ae,"[Invalid Chunk]"),V=!1;break}else rr(this.i,this.l,Mn,null),Ca(this,Mn);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||Ae.length!=0||this.h.h||(this.s=1,xt(16),V=!1),this.o=this.o&&V,!V)rr(this.i,this.l,Ae,"[Invalid Chunked Response]"),Hn(this),Ti(this);else if(0<Ae.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),Oa(Ht),Ht.M=!0,xt(11))}}else rr(this.i,this.l,Ae,null),Ca(this,Ae);Dt==4&&Hn(this),this.o&&!this.J&&(Dt==4?_o(this.j,this):(this.o=!1,mt(this)))}else po(this.g),V==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Hn(this),Ti(this)}}}catch{}finally{}};function Yl(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Wh(f,N){var V=f.C,K=N.indexOf(`
`,V);return K==-1?oo:(V=Number(N.substring(V,K)),isNaN(V)?Sa:(K+=1,K+V>N.length?oo:(N=N.slice(K,K+V),f.C=K+V,N)))}sr.prototype.cancel=function(){this.J=!0,Hn(this)};function mt(f){f.S=Date.now()+f.I,Xl(f,f.I)}function Xl(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=nr(m(f.ba,f),N)}function ws(f){f.B&&(c.clearTimeout(f.B),f.B=null)}sr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ta(this.i,this.A),this.L!=2&&($r(),xt(17)),Hn(this),this.s=2,Ti(this)):Xl(this,this.S-f)};function Ti(f){f.j.G==0||f.J||_o(f.j,f)}function Hn(f){ws(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,Ei(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function Ca(f,N){try{var V=f.j;if(V.G!=0&&(V.g==f||fn(V.h,f))){if(!f.K&&fn(V.h,f)&&V.G==3){try{var K=V.Da.g.parse(N)}catch{K=null}if(Array.isArray(K)&&K.length==3){var ae=K;if(ae[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<f.F)vo(V),cr(V);else break e;yo(V),xt(18)}}else V.za=ae[1],0<V.za-V.T&&37500>ae[2]&&V.F&&V.v==0&&!V.C&&(V.C=nr(m(V.Za,V),6e3));if(1>=eu(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Jr(V,11)}else if((f.K||V.g==f)&&vo(V),!b(N))for(ae=V.Da.g.parse(N),N=0;N<ae.length;N++){let ot=ae[N];if(V.T=ot[0],ot=ot[1],V.G==2)if(ot[0]=="c"){V.K=ot[1],V.ia=ot[2];const Ht=ot[3];Ht!=null&&(V.la=Ht,V.j.info("VER="+V.la));const Dt=ot[4];Dt!=null&&(V.Aa=Dt,V.j.info("SVER="+V.Aa));const Wn=ot[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(K=1.5*Wn,V.L=K,V.j.info("backChannelRequestTimeoutMs_="+K)),K=V;const Mn=f.g;if(Mn){const As=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(As){var me=K.h;me.g||As.indexOf("spdy")==-1&&As.indexOf("quic")==-1&&As.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(ba(me,me.h),me.h=null))}if(K.D){const Eo=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(K.ya=Eo,pt(K.I,K.D,Eo))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-f.F,V.j.info("Handshake RTT: "+V.R+"ms")),K=V;var Ae=f;if(K.qa=du(K,K.J?K.ia:null,K.W),Ae.K){tu(K.h,Ae);var dt=Ae,Vt=K.L;Vt&&(dt.I=Vt),dt.B&&(ws(dt),mt(dt)),K.g=Ae}else bs(K);0<V.i.length&&Ar(V)}else ot[0]!="stop"&&ot[0]!="close"||Jr(V,7);else V.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Jr(V,7):Jt(V):ot[0]!="noop"&&V.l&&V.l.ta(ot),V.v=0)}}$r(4)}catch{}}var Zl=class{constructor(f,N){this.g=f,this.map=N}};function Es(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function eu(f){return f.h?1:f.g?f.g.size:0}function fn(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function ba(f,N){f.g?f.g.add(N):f.h=N}function tu(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}Es.prototype.cancel=function(){if(this.i=nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function nu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const V of f.g.values())N=N.concat(V.D);return N}return S(f.i)}function lo(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],V=f.length,K=0;K<V;K++)N.push(f[K]);return N}N=[],V=0;for(K in f)N[V++]=f[K];return N}function uo(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var V=0;V<f;V++)N.push(V);return N}N=[],V=0;for(const K in f)N[V++]=K;return N}}}function Si(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var V=uo(f),K=lo(f),ae=K.length,me=0;me<ae;me++)N.call(void 0,K[me],V&&V[me],f)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kh(f,N){if(f){f=f.split("&");for(var V=0;V<f.length;V++){var K=f[V].indexOf("="),ae=null;if(0<=K){var me=f[V].substring(0,K);ae=f[V].substring(K+1)}else me=f[V];N(me,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Wr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Wr){this.h=f.h,Ss(this,f.j),this.o=f.o,this.g=f.g,Ii(this,f.s),this.l=f.l;var N=f.i,V=new Ir;V.i=N.i,N.g&&(V.g=new Map(N.g),V.h=N.h),Ci(this,V),this.m=f.m}else f&&(N=String(f).match(Ts))?(this.h=!1,Ss(this,N[1]||"",!0),this.o=st(N[2]||""),this.g=st(N[3]||"",!0),Ii(this,N[4]),this.l=st(N[5]||"",!0),Ci(this,N[6]||"",!0),this.m=st(N[7]||"")):(this.h=!1,this.i=new Ir(null,this.h))}Wr.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Ai(N,co,!0),":");var V=this.g;return(V||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Ai(N,co,!0),"@"),f.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&f.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&f.push("/"),f.push(Ai(V,V.charAt(0)=="/"?su:iu,!0))),(V=this.i.toString())&&f.push("?",V),(V=this.m)&&f.push("#",Ai(V,Aa)),f.join("")};function Ln(f){return new Wr(f)}function Ss(f,N,V){f.j=V?st(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Ii(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function Ci(f,N,V){N instanceof Ir?(f.i=N,Cr(f.i,f.h)):(V||(N=Ai(N,ou)),f.i=new Ir(N,f.h))}function pt(f,N,V){f.i.set(N,V)}function bi(f){return pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function st(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ai(f,N,V){return typeof f=="string"?(f=encodeURI(f).replace(N,ru),V&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ru(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var co=/[#\/\?@]/g,iu=/[#\?:]/g,su=/[#\?]/g,ou=/[#\?@]/g,Aa=/#/g;function Ir(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function Qt(f){f.g||(f.g=new Map,f.h=0,f.i&&Kh(f.i,function(N,V){f.add(decodeURIComponent(N.replace(/\+/g," ")),V)}))}r=Ir.prototype,r.add=function(f,N){Qt(this),this.i=null,f=$n(this,f);var V=this.g.get(f);return V||this.g.set(f,V=[]),V.push(N),this.h+=1,this};function or(f,N){Qt(f),N=$n(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function ar(f,N){return Qt(f),N=$n(f,N),f.g.has(N)}r.forEach=function(f,N){Qt(this),this.g.forEach(function(V,K){V.forEach(function(ae){f.call(N,ae,K,this)},this)},this)},r.na=function(){Qt(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),V=[];for(let K=0;K<N.length;K++){const ae=f[K];for(let me=0;me<ae.length;me++)V.push(N[K])}return V},r.V=function(f){Qt(this);let N=[];if(typeof f=="string")ar(this,f)&&(N=N.concat(this.g.get($n(this,f))));else{f=Array.from(this.g.values());for(let V=0;V<f.length;V++)N=N.concat(f[V])}return N},r.set=function(f,N){return Qt(this),this.i=null,f=$n(this,f),ar(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},r.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function ki(f,N,V){or(f,N),0<V.length&&(f.i=null,f.g.set($n(f,N),S(V)),f.h+=V.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var V=0;V<N.length;V++){var K=N[V];const me=encodeURIComponent(String(K)),Ae=this.V(K);for(K=0;K<Ae.length;K++){var ae=me;Ae[K]!==""&&(ae+="="+encodeURIComponent(String(Ae[K]))),f.push(ae)}}return this.i=f.join("&")};function $n(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function Cr(f,N){N&&!f.j&&(Qt(f),f.i=null,f.g.forEach(function(V,K){var ae=K.toLowerCase();K!=ae&&(or(this,K),ki(this,ae,V))},f)),f.j=N}function Gh(f,N){const V=new ys;if(c.Image){const K=new Image;K.onload=y(Tn,V,"TestLoadImage: loaded",!0,N,K),K.onerror=y(Tn,V,"TestLoadImage: error",!1,N,K),K.onabort=y(Tn,V,"TestLoadImage: abort",!1,N,K),K.ontimeout=y(Tn,V,"TestLoadImage: timeout",!1,N,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=f}else N(!1)}function au(f,N){const V=new ys,K=new AbortController,ae=setTimeout(()=>{K.abort(),Tn(V,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:K.signal}).then(me=>{clearTimeout(ae),me.ok?Tn(V,"TestPingServer: ok",!0,N):Tn(V,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ae),Tn(V,"TestPingServer: error",!1,N)})}function Tn(f,N,V,K,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),K(V)}catch{}}function Qh(){this.g=new va}function lu(f,N,V){const K=V||"";try{Si(f,function(ae,me){let Ae=ae;d(ae)&&(Ae=ga(ae)),N.push(K+me+"="+encodeURIComponent(Ae))})}catch(ae){throw N.push(K+"type="+encodeURIComponent("_badmap")),ae}}function Kr(f){this.l=f.Ub||null,this.j=f.eb||!1}T(Kr,ms),Kr.prototype.g=function(){return new Is(this.l,this.j)},Kr.prototype.i=function(f){return function(){return f}}({});function Is(f,N){We.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Is,We),r=Is.prototype,r.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,ur(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||c).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lr(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ur(this)),this.g&&(this.readyState=3,ur(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function uu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?lr(this):ur(this),this.readyState==3&&uu(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,lr(this))},r.Qa=function(f){this.g&&(this.response=f,lr(this))},r.ga=function(){this.g&&lr(this)};function lr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ur(f)}r.setRequestHeader=function(f,N){this.u.append(f,N)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var V=N.next();!V.done;)V=V.value,f.push(V[0]+": "+V[1]),V=N.next();return f.join(`\r
`)};function ur(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Gr(f){let N="";return U(f,function(V,K){N+=K,N+=":",N+=V,N+=`\r
`}),N}function Ri(f,N,V){e:{for(K in V){var K=!1;break e}K=!0}K||(V=Gr(V),typeof f=="string"?V!=null&&encodeURIComponent(String(V)):pt(f,N,V))}function Et(f){We.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Et,We);var Jh=/^https?$/i,ka=["POST","PUT"];r=Et.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,N,V,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?eo(this.o):eo(ir),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(me){Cs(this,me);return}if(f=V||"",V=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var ae in K)V.set(ae,K[ae]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const me of K.keys())V.set(me,K.get(me));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(V.keys()).find(me=>me.toLowerCase()=="content-type"),ae=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ka,N,void 0))||K||ae||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ae]of V)this.g.setRequestHeader(me,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fo(this),this.u=!0,this.g.send(f),this.u=!1}catch(me){Cs(this,me)}};function Cs(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,ho(f),Dn(f)}function ho(f){f.A||(f.A=!0,Xe(f,"complete"),Xe(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Xe(this,"complete"),Xe(this,"abort"),Dn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dn(this,!0)),Et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ra(this):this.bb())},r.bb=function(){Ra(this)};function Ra(f){if(f.h&&typeof l<"u"&&(!f.v[1]||Sn(f)!=4||f.Z()!=2)){if(f.u&&Sn(f)==4)er(f.Ea,0,f);else if(Xe(f,"readystatechange"),Sn(f)==4){f.h=!1;try{const Ae=f.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var V;if(!(V=N)){var K;if(K=Ae===0){var ae=String(f.D).match(Ts)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),K=!Jh.test(ae?ae.toLowerCase():"")}V=K}if(V)Xe(f,"complete"),Xe(f,"success");else{f.m=6;try{var me=2<Sn(f)?f.g.statusText:""}catch{me=""}f.l=me+" ["+f.Z()+"]",ho(f)}}finally{Dn(f)}}}}function Dn(f,N){if(f.g){fo(f);const V=f.g,K=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||Xe(f,"ready");try{V.onreadystatechange=K}catch{}}}function fo(f){f.I&&(c.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function Sn(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),ya(N)}};function Pa(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function po(f){const N={};f=(f.g&&2<=Sn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<f.length;K++){if(b(f[K]))continue;var V=R(f[K]);const ae=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const me=N[ae]||[];N[ae]=me,me.push(V)}P(N,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(f,N,V){return V&&V.internalChannelParams&&V.internalChannelParams[f]||N}function xa(f){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,f),this.cb=br("retryDelaySeedMs",1e4,f),this.Wa=br("forwardChannelMaxRetries",2,f),this.wa=br("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Es(f&&f.concurrentRequestLimit),this.Da=new Qh,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=xa.prototype,r.la=8,r.G=1,r.connect=function(f,N,V,K){xt(0),this.W=f,this.H=N||{},V&&K!==void 0&&(this.H.OSID=V,this.H.OAID=K),this.F=this.X,this.I=du(this,null,this.W),Ar(this)};function Jt(f){if(mo(f),f.G==3){var N=f.U++,V=Ln(f.I);if(pt(V,"SID",f.K),pt(V,"RID",N),pt(V,"TYPE","terminate"),Qr(f,V),N=new sr(f,f.j,N),N.L=2,N.v=bi(Ln(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(N.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=N.v,V=!0),V||(N.g=pu(N.j,null),N.g.ea(N.v)),N.F=Date.now(),mt(N)}fu(f)}function cr(f){f.g&&(Oa(f),f.g.cancel(),f.g=null)}function mo(f){cr(f),f.u&&(c.clearTimeout(f.u),f.u=null),vo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Ar(f){if(!Nn(f.h)&&!f.s){f.s=!0;var N=f.Ga;Z||W(),re||(Z(),re=!0),G.add(N,f),f.B=0}}function Yh(f,N){return eu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=nr(m(f.Ga,f,N),hu(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ae=new sr(this,this.j,f);let me=this.o;if(this.S&&(me?(me=_(me),k(me,this.S)):me=this.S),this.m!==null||this.O||(ae.H=me,me=null),this.P)e:{for(var N=0,V=0;V<this.i.length;V++){t:{var K=this.i[V];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(N+=K,4096<N){N=V;break e}if(N===4096||V===this.i.length-1){N=V+1;break e}}N=1e3}else N=1e3;N=Pi(this,ae,N),V=Ln(this.I),pt(V,"RID",f),pt(V,"CVER",22),this.D&&pt(V,"X-HTTP-Session-Id",this.D),Qr(this,V),me&&(this.O?N="headers="+encodeURIComponent(String(Gr(me)))+"&"+N:this.m&&Ri(V,this.m,me)),ba(this.h,ae),this.Ua&&pt(V,"TYPE","init"),this.P?(pt(V,"$req",N),pt(V,"SID","null"),ae.T=!0,ao(ae,V,null)):ao(ae,V,N),this.G=2}}else this.G==3&&(f?go(this,f):this.i.length==0||Nn(this.h)||go(this))};function go(f,N){var V;N?V=N.l:V=f.U++;const K=Ln(f.I);pt(K,"SID",f.K),pt(K,"RID",V),pt(K,"AID",f.T),Qr(f,K),f.m&&f.o&&Ri(K,f.m,f.o),V=new sr(f,f.j,V,f.B+1),f.m===null&&(V.H=f.o),N&&(f.i=N.D.concat(f.i)),N=Pi(f,V,1e3),V.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ba(f.h,V),ao(V,K,N)}function Qr(f,N){f.H&&U(f.H,function(V,K){pt(N,K,V)}),f.l&&Si({},function(V,K){pt(N,K,V)})}function Pi(f,N,V){V=Math.min(f.i.length,V);var K=f.l?m(f.l.Na,f.l,f):null;e:{var ae=f.i;let me=-1;for(;;){const Ae=["count="+V];me==-1?0<V?(me=ae[0].g,Ae.push("ofs="+me)):me=0:Ae.push("ofs="+me);let dt=!0;for(let Vt=0;Vt<V;Vt++){let ot=ae[Vt].g;const Ht=ae[Vt].map;if(ot-=me,0>ot)me=Math.max(0,ae[Vt].g-100),dt=!1;else try{lu(Ht,Ae,"req"+ot+"_")}catch{K&&K(Ht)}}if(dt){K=Ae.join("&");break e}}}return f=f.i.splice(0,V),N.D=f,K}function bs(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;Z||W(),re||(Z(),re=!0),G.add(N,f),f.v=0}}function yo(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=nr(m(f.Fa,f),hu(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=nr(m(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),cr(this),cu(this))};function Oa(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function cu(f){f.g=new sr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=Ln(f.qa);pt(N,"RID","rpc"),pt(N,"SID",f.K),pt(N,"AID",f.T),pt(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&pt(N,"TO",f.ja),pt(N,"TYPE","xmlhttp"),Qr(f,N),f.m&&f.o&&Ri(N,f.m,f.o),f.L&&(f.g.I=f.L);var V=f.g;f=f.ia,V.L=1,V.v=bi(Ln(N)),V.m=null,V.P=!0,Ia(V,f)}r.Za=function(){this.C!=null&&(this.C=null,cr(this),yo(this),xt(19))};function vo(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function _o(f,N){var V=null;if(f.g==N){vo(f),Oa(f),f.g=null;var K=2}else if(fn(f.h,N))V=N.D,tu(f.h,N),K=1;else return;if(f.G!=0){if(N.o)if(K==1){V=N.m?N.m.length:0,N=Date.now()-N.F;var ae=f.B;K=gs(),Xe(K,new ro(K,V)),Ar(f)}else bs(f);else if(ae=N.s,ae==3||ae==0&&0<N.X||!(K==1&&Yh(f,N)||K==2&&yo(f)))switch(V&&0<V.length&&(N=f.h,N.i=N.i.concat(V)),ae){case 1:Jr(f,5);break;case 4:Jr(f,10);break;case 3:Jr(f,6);break;default:Jr(f,2)}}}function hu(f,N){let V=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(V*=2),V*N}function Jr(f,N){if(f.j.info("Error code "+N),N==2){var V=m(f.fb,f),K=f.Xa;const ae=!K;K=new Wr(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ss(K,"https"),bi(K),ae?Gh(K.toString(),V):au(K.toString(),V)}else xt(2);f.G=0,f.l&&f.l.sa(N),fu(f),mo(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function fu(f){if(f.G=0,f.ka=[],f.l){const N=nu(f.h);(N.length!=0||f.i.length!=0)&&(w(f.ka,N),w(f.ka,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.ra()}}function du(f,N,V){var K=V instanceof Wr?Ln(V):new Wr(V);if(K.g!="")N&&(K.g=N+"."+K.g),Ii(K,K.s);else{var ae=c.location;K=ae.protocol,N=N?N+"."+ae.hostname:ae.hostname,ae=+ae.port;var me=new Wr(null);K&&Ss(me,K),N&&(me.g=N),ae&&Ii(me,ae),V&&(me.l=V),K=me}return V=f.D,N=f.ya,V&&N&&pt(K,V,N),pt(K,"VER",f.la),Qr(f,K),K}function pu(f,N,V){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new Et(new Kr({eb:V})):new Et(f.pa),N.Ha(f.J),N}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Na(){}r=Na.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function wo(){}wo.prototype.g=function(f,N){return new dn(f,N)};function dn(f,N){We.call(this),this.g=new xa(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!b(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!b(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new kr(this)}T(dn,We),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Jt(this.g)},dn.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var V={};V.__data__=f,f=V}else this.u&&(V={},V.__data__=ga(f),f=V);N.i.push(new Zl(N.Ya++,f)),N.G==3&&Ar(N)},dn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,dn.aa.N.call(this)};function mu(f){Tr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const V in N){f=V;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}T(mu,Tr);function gu(){no.call(this),this.status=1}T(gu,no);function kr(f){this.g=f}T(kr,Na),kr.prototype.ua=function(){Xe(this.g,"a")},kr.prototype.ta=function(f){Xe(this.g,new mu(f))},kr.prototype.sa=function(f){Xe(this.g,new gu)},kr.prototype.ra=function(){Xe(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,k1=function(){return new wo},A1=function(){return gs()},b1=Sr,Im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,wc=so,Ql.COMPLETE="complete",C1=Ql,to.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",We.prototype.listen=We.prototype.K,ul=to,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,I1=Et}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",V_="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Qm("@firebase/firestore");function qo(){return $s.logLevel}function Oe(r,...e){if($s.logLevel<=rt.DEBUG){const t=e.map(Xm);$s.debug(`Firestore (${sa}): ${r}`,...t)}}function fi(r,...e){if($s.logLevel<=rt.ERROR){const t=e.map(Xm);$s.error(`Firestore (${sa}): ${r}`,...t)}}function Yo(r,...e){if($s.logLevel<=rt.WARN){const t=e.map(Xm);$s.warn(`Firestore (${sa}): ${r}`,...t)}}function Xm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,R1(r,n,t)}function R1(r,e,t){let n=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw fi(n),new Error(n)}function ft(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||R1(e,i,n)}function Je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(un.UNAUTHENTICATED))}shutdown(){}}class zA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HA{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let a=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ai,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ai)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ft(typeof n.accessToken=="string",31837,{l:n}),new P1(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class $A{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WA{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new $A(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const n=a=>{a.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new U_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=GA(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function tt(r,e){return r<e?-1:r>e?1:0}function Cm(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),i=e.codePointAt(t);if(n!==i){if(n<128&&i<128)return tt(n,i);{const a=x1(),l=QA(a.encode(B_(r,t)),a.encode(B_(e,t)));return l!==0?l:tt(n,i)}}t+=n>65535?2:1}return tt(r.length,e.length)}function B_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function QA(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return tt(r[t],e[t]);return tt(r.length,e.length)}function Xo(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-62135596800,z_=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*z_);return new Lt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q_)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z_}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Lt(0,0))}static max(){return new Ye(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="__name__";class Nr{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ge(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=Nr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return tt(e.length,t.length)}static compareSegments(e,t){const n=Nr.isNumericId(e),i=Nr.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):Cm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class wt extends Nr{construct(e,t,n){return new wt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new wt(t)}static emptyPath(){return new wt([])}}const JA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Nr{construct(e,t,n){return new en(e,t,n)}static isValidIdentifier(e){return JA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H_}static keyField(){return new en([H_])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(n+=c,i++):(a(),i++)}if(a(),l)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(wt.fromString(e))}static fromName(e){return new qe(wt.fromString(e).popFirst(5))}static empty(){return new qe(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;function YA(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(n===1e9?new Lt(t+1,0):new Lt(t,n));return new is(i,qe.empty(),e)}function XA(r){return new is(r.readTime,r.key,Tl)}class is{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new is(Ye.min(),qe.empty(),Tl)}static max(){return new is(Ye.max(),qe.empty(),Tl)}}function ZA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(r.documentKey,e.documentKey),t!==0?t:tt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(r){if(r.code!==_e.FAILED_PRECONDITION||r.message!==ek)throw r;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):we.reject(t)}static resolve(e){return new we((t,n)=>{t(e)})}static reject(e){return new we((t,n)=>{n(e)})}static waitFor(e){return new we((t,n)=>{let i=0,a=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++a,l&&a===i&&t()},h=>n(h))}),l=!0,a===i&&t()})}static or(e){let t=we.resolve(!1);for(const n of e)t=t.next(i=>i?we.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new we((n,i)=>{const a=e.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const d=h;t(e[d]).next(v=>{l[d]=v,++c,c===a&&n(l)},v=>i(v))}})}static doWhile(e,t){return new we((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}function nk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>t.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function uh(r){return r==null}function jc(r){return r===0&&1/r==-1/0}function rk(r){return typeof r=="number"&&Number.isInteger(r)&&!jc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="";function ik(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=$_(e)),e=sk(r.get(t),e);return $_(e)}function sk(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case N1:t+="";break;default:t+=a}}return t}function $_(r){return r+N1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function hs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ok(r,e){const t=[];for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.push(e(r[n],n,r));return t}function L1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Zt.RED,this.left=i??Zt.EMPTY,this.right=a??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Zt(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,n,i,a){return this}insert(e,t,n){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K_(this.data.getIterator())}getIteratorFrom(e){return new K_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class K_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new qt(en.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new D1("Invalid base64 string: "+a):a}}(e);return new nn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const ak=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(r){if(ft(!!r,39018),typeof r=="string"){let e=0;const t=ak.exec(r);if(ft(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Nt(r.seconds),nanos:Nt(r.nanos)}}function Nt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function os(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="server_timestamp",j1="__type__",F1="__previous_value__",V1="__local_write_time__";function eg(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[j1])===null||t===void 0?void 0:t.stringValue)===M1}function ch(r){const e=r.mapValue.fields[F1];return eg(e)?ch(e):e}function Sl(r){const e=ss(r.mapValue.fields[V1].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,n,i,a,l,c,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d}}const Fc="(default)";class Il{constructor(e,t){this.projectId=e,this.database=t||Fc}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===Fc}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="__type__",uk="__max__",dc={mapValue:{}},B1="__vector__",Vc="value";function as(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?eg(r)?4:hk(r)?9007199254740991:ck(r)?10:11:Ge(28295,{value:r})}function Ur(r,e){if(r===e)return!0;const t=as(r);if(t!==as(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Sl(r).isEqual(Sl(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=ss(i.timestampValue),c=ss(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,a){return os(i.bytesValue).isEqual(os(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,a){return Nt(i.geoPointValue.latitude)===Nt(a.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(a.geoPointValue.longitude)}(r,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Nt(i.integerValue)===Nt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Nt(i.doubleValue),c=Nt(a.doubleValue);return l===c?jc(l)===jc(c):isNaN(l)&&isNaN(c)}return!1}(r,e);case 9:return Xo(r.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(W_(l)!==W_(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Ur(l[h],c[h])))return!1;return!0}(r,e);default:return Ge(52216,{left:r})}}function Cl(r,e){return(r.values||[]).find(t=>Ur(t,e))!==void 0}function Zo(r,e){if(r===e)return 0;const t=as(r),n=as(e);if(t!==n)return tt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(r.booleanValue,e.booleanValue);case 2:return function(a,l){const c=Nt(a.integerValue||a.doubleValue),h=Nt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(r,e);case 3:return G_(r.timestampValue,e.timestampValue);case 4:return G_(Sl(r),Sl(e));case 5:return Cm(r.stringValue,e.stringValue);case 6:return function(a,l){const c=os(a),h=os(l);return c.compareTo(h)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const c=a.split("/"),h=l.split("/");for(let d=0;d<c.length&&d<h.length;d++){const v=tt(c[d],h[d]);if(v!==0)return v}return tt(c.length,h.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const c=tt(Nt(a.latitude),Nt(l.latitude));return c!==0?c:tt(Nt(a.longitude),Nt(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Q_(r.arrayValue,e.arrayValue);case 10:return function(a,l){var c,h,d,v;const g=a.fields||{},m=l.fields||{},y=(c=g[Vc])===null||c===void 0?void 0:c.arrayValue,T=(h=m[Vc])===null||h===void 0?void 0:h.arrayValue,S=tt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((v=T==null?void 0:T.values)===null||v===void 0?void 0:v.length)||0);return S!==0?S:Q_(y,T)}(r.mapValue,e.mapValue);case 11:return function(a,l){if(a===dc.mapValue&&l===dc.mapValue)return 0;if(a===dc.mapValue)return 1;if(l===dc.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),d=l.fields||{},v=Object.keys(d);h.sort(),v.sort();for(let g=0;g<h.length&&g<v.length;++g){const m=Cm(h[g],v[g]);if(m!==0)return m;const y=Zo(c[h[g]],d[v[g]]);if(y!==0)return y}return tt(h.length,v.length)}(r.mapValue,e.mapValue);default:throw Ge(23264,{Pe:t})}}function G_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return tt(r,e);const t=ss(r),n=ss(e),i=tt(t.seconds,n.seconds);return i!==0?i:tt(t.nanos,n.nanos)}function Q_(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=Zo(t[i],n[i]);if(a)return a}return tt(t.length,n.length)}function ea(r){return bm(r)}function bm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=ss(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return os(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return qe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=bm(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of n)a?a=!1:i+=",",i+=`${l}:${bm(t.fields[l])}`;return i+"}"}(r.mapValue):Ge(61005,{value:r})}function Ec(r){switch(as(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(r);return e?16+Ec(e):16;case 5:return 2*r.stringValue.length;case 6:return os(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Ec(a),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return hs(n.fields,(a,l)=>{i+=a.length+Ec(l)}),i}(r.mapValue);default:throw Ge(13486,{value:r})}}function J_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Am(r){return!!r&&"integerValue"in r}function tg(r){return!!r&&"arrayValue"in r}function Y_(r){return!!r&&"nullValue"in r}function X_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tc(r){return!!r&&"mapValue"in r}function ck(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[U1])===null||t===void 0?void 0:t.stringValue)===B1}function ml(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return hs(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=ml(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ml(r.arrayValue.values[t]);return e}return Object.assign({},r)}function hk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===uk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=en.emptyPath(),n={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,n,i),n={},i=[],t=c.popLast()}l?n[c.lastSegment()]=ml(l):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){hs(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new xn(ml(this.value))}}function q1(r){const e=[];return hs(r.fields,(t,n)=>{const i=new en([t]);if(Tc(n)){const a=q1(n.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,n,i,a,l,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new cn(e,0,Ye.min(),Ye.min(),Ye.min(),xn.empty(),0)}static newFoundDocument(e,t,n,i){return new cn(e,1,t,Ye.min(),n,i,0)}static newNoDocument(e,t){return new cn(e,2,t,Ye.min(),Ye.min(),xn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Ye.min(),Ye.min(),xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.position=e,this.inclusive=t}}function Z_(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],l=r.position[i];if(a.field.isKeyField()?n=qe.comparator(qe.fromName(l.referenceValue),t.key):n=Zo(l,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function e0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ur(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function fk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{}class Ft extends z1{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new pk(e,t,n):t==="array-contains"?new yk(e,n):t==="in"?new vk(e,n):t==="not-in"?new _k(e,n):t==="array-contains-any"?new wk(e,n):new Ft(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new mk(e,n):new gk(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&as(this.value)===as(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends z1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new wr(e,t)}matches(e){return H1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function H1(r){return r.op==="and"}function $1(r){return dk(r)&&H1(r)}function dk(r){for(const e of r.filters)if(e instanceof wr)return!1;return!0}function km(r){if(r instanceof Ft)return r.field.canonicalString()+r.op.toString()+ea(r.value);if($1(r))return r.filters.map(e=>km(e)).join(",");{const e=r.filters.map(t=>km(t)).join(",");return`${r.op}(${e})`}}function W1(r,e){return r instanceof Ft?function(n,i){return i instanceof Ft&&n.op===i.op&&n.field.isEqual(i.field)&&Ur(n.value,i.value)}(r,e):r instanceof wr?function(n,i){return i instanceof wr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,l,c)=>a&&W1(l,i.filters[c]),!0):!1}(r,e):void Ge(19439)}function K1(r){return r instanceof Ft?function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`}(r):r instanceof wr?function(t){return t.op.toString()+" {"+t.getFilters().map(K1).join(" ,")+"}"}(r):"Filter"}class pk extends Ft{constructor(e,t,n){super(e,t,n),this.key=qe.fromName(n.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class mk extends Ft{constructor(e,t){super(e,"in",t),this.keys=G1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gk extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=G1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function G1(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>qe.fromName(n.referenceValue))}class yk extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tg(t)&&Cl(t.arrayValue,this.value)}}class vk extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cl(this.value.arrayValue,t)}}class _k extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cl(this.value.arrayValue,t)}}class wk extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Cl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t=null,n=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.Ie=null}}function t0(r,e=null,t=[],n=[],i=null,a=null,l=null){return new Ek(r,e,t,n,i,a,l)}function ng(r){const e=Je(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>km(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>ea(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>ea(n)).join(",")),e.Ie=t}return e.Ie}function rg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!fk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!W1(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!e0(r.startAt,e.startAt)&&e0(r.endAt,e.endAt)}function Rm(r){return qe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t=null,n=[],i=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Tk(r,e,t,n,i,a,l,c){return new la(r,e,t,n,i,a,l,c)}function ig(r){return new la(r)}function n0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Q1(r){return r.collectionGroup!==null}function gl(r){const e=Je(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new qt(en.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new bl(a,n))}),t.has(en.keyField().canonicalString())||e.Ee.push(new bl(en.keyField(),n))}return e.Ee}function Mr(r){const e=Je(r);return e.de||(e.de=J1(e,gl(r))),e.de}function Sk(r){const e=Je(r);return e.Ae||(e.Ae=J1(e,r.explicitOrderBy)),e.Ae}function J1(r,e){if(r.limitType==="F")return t0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new bl(i.field,a)});const t=r.endAt?new Uc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Uc(r.startAt.position,r.startAt.inclusive):null;return t0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Pm(r,e){const t=r.filters.concat([e]);return new la(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bc(r,e,t){return new la(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function hh(r,e){return rg(Mr(r),Mr(e))&&r.limitType===e.limitType}function Y1(r){return`${ng(Mr(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>K1(i)).join(", ")}]`),uh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ea(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ea(i)).join(",")),`Target(${n})`}(Mr(r))}; limitType=${r.limitType})`}function fh(r,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):qe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,i){for(const a of gl(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(l,c,h){const d=Z_(l,c,h);return l.inclusive?d<=0:d<0}(n.startAt,gl(n),i)||n.endAt&&!function(l,c,h){const d=Z_(l,c,h);return l.inclusive?d>=0:d>0}(n.endAt,gl(n),i))}(r,e)}function Ik(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function X1(r){return(e,t)=>{let n=!1;for(const i of gl(r)){const a=Ck(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Ck(r,e,t){const n=r.field.isKeyField()?qe.comparator(e.key,t.key):function(a,l,c){const h=l.data.field(a),d=c.data.field(a);return h!==null&&d!==null?Zo(h,d):Ge(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ge(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return L1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new At(qe.comparator);function di(){return bk}const Z1=new At(qe.comparator);function cl(...r){let e=Z1;for(const t of r)e=e.insert(t.key,t);return e}function eT(r){let e=Z1;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Bs(){return yl()}function tT(){return yl()}function yl(){return new Ys(r=>r.toString(),(r,e)=>r.isEqual(e))}const Ak=new At(qe.comparator),kk=new qt(qe.comparator);function it(...r){let e=kk;for(const t of r)e=e.add(t);return e}const Rk=new qt(tt);function Pk(){return Rk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function nT(r){return{integerValue:""+r}}function xk(r,e){return rk(e)?nT(e):sg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function Ok(r,e,t){return r instanceof Al?function(i,a){const l={fields:{[j1]:{stringValue:M1},[V1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&eg(a)&&(a=ch(a)),a&&(l.fields[F1]=a),{mapValue:l}}(t,e):r instanceof kl?iT(r,e):r instanceof Rl?sT(r,e):function(i,a){const l=rT(i,a),c=r0(l)+r0(i.Re);return Am(l)&&Am(i.Re)?nT(c):sg(i.serializer,c)}(r,e)}function Nk(r,e,t){return r instanceof kl?iT(r,e):r instanceof Rl?sT(r,e):t}function rT(r,e){return r instanceof qc?function(n){return Am(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Al extends dh{}class kl extends dh{constructor(e){super(),this.elements=e}}function iT(r,e){const t=oT(e);for(const n of r.elements)t.some(i=>Ur(i,n))||t.push(n);return{arrayValue:{values:t}}}class Rl extends dh{constructor(e){super(),this.elements=e}}function sT(r,e){let t=oT(e);for(const n of r.elements)t=t.filter(i=>!Ur(i,n));return{arrayValue:{values:t}}}class qc extends dh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function r0(r){return Nt(r.integerValue||r.doubleValue)}function oT(r){return tg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t){this.field=e,this.transform=t}}function Dk(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof kl&&i instanceof kl||n instanceof Rl&&i instanceof Rl?Xo(n.elements,i.elements,Ur):n instanceof qc&&i instanceof qc?Ur(n.Re,i.Re):n instanceof Al&&i instanceof Al}(r.transform,e.transform)}class Mk{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ph{}function aT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new og(r.key,_r.none()):new Ml(r.key,r.data,_r.none());{const t=r.data,n=xn.empty();let i=new qt(en.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?n.delete(a):n.set(a,l),i=i.add(a)}return new fs(r.key,n,new Bn(i.toArray()),_r.none())}}function jk(r,e,t){r instanceof Ml?function(i,a,l){const c=i.value.clone(),h=s0(i.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(r,e,t):r instanceof fs?function(i,a,l){if(!Sc(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=s0(i.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(lT(i)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(r,e,t):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function vl(r,e,t,n){return r instanceof Ml?function(a,l,c,h){if(!Sc(a.precondition,l))return c;const d=a.value.clone(),v=o0(a.fieldTransforms,h,l);return d.setAll(v),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(r,e,t,n):r instanceof fs?function(a,l,c,h){if(!Sc(a.precondition,l))return c;const d=o0(a.fieldTransforms,h,l),v=l.data;return v.setAll(lT(a)),v.setAll(d),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(r,e,t,n):function(a,l,c){return Sc(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(r,e,t)}function Fk(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),a=rT(n.transform,i||null);a!=null&&(t===null&&(t=xn.empty()),t.set(n.field,a))}return t||null}function i0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Xo(n,i,(a,l)=>Dk(a,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ml extends ph{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fs extends ph{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function lT(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function s0(r,e,t){const n=new Map;ft(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let i=0;i<t.length;i++){const a=r[i],l=a.transform,c=e.data.field(a.field);n.set(a.field,Nk(l,c,t[i]))}return n}function o0(r,e,t){const n=new Map;for(const i of r){const a=i.transform,l=t.data.field(i.field);n.set(i.field,Ok(a,l,e))}return n}class og extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vk extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jk(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tT();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(i.key)?null:c;const h=aT(l,c);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),it())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,n)=>i0(t,n))&&Xo(this.baseMutations,e.baseMutations,(t,n)=>i0(t,n))}}class ag{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ft(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let i=function(){return Ak}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,n[l].version);return new ag(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,at;function Hk(r){switch(r){case _e.OK:return Ge(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Ge(15467,{code:r})}}function uT(r){if(r===void 0)return fi("GRPC error has no .code"),_e.UNKNOWN;switch(r){case jt.OK:return _e.OK;case jt.CANCELLED:return _e.CANCELLED;case jt.UNKNOWN:return _e.UNKNOWN;case jt.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case jt.INTERNAL:return _e.INTERNAL;case jt.UNAVAILABLE:return _e.UNAVAILABLE;case jt.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case jt.NOT_FOUND:return _e.NOT_FOUND;case jt.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case jt.ABORTED:return _e.ABORTED;case jt.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case jt.DATA_LOSS:return _e.DATA_LOSS;default:return Ge(39323,{code:r})}}(at=jt||(jt={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new ts([4294967295,4294967295],0);function a0(r){const e=x1().encode(r),t=new S1;return t.update(e),new Uint8Array(t.digest())}function l0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ts([t,n],0),new ts([i,a],0)]}class lg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hl(`Invalid padding: ${t}`);if(n<0)throw new hl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new hl(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ts.fromNumber(this.pe)}we(e,t,n){let i=e.add(t.multiply(ts.fromNumber(n)));return i.compare($k)===1&&(i=new ts([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=a0(e),[n,i]=l0(t);for(let a=0;a<this.hashCount;a++){const l=this.we(n,i,a);if(!this.be(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new lg(a,i,t);return n.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const t=a0(e),[n,i]=l0(t);for(let a=0;a<this.hashCount;a++){const l=this.we(n,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new mh(Ye.min(),i,new At(tt),di(),it())}}class jl{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jl(n,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,n,i){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=i}}class cT{constructor(e,t){this.targetId=e,this.Ce=t}}class hT{constructor(e,t,n=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class u0{constructor(){this.Fe=0,this.Me=c0(),this.xe=nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=it(),t=it(),n=it();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ge(38017,{changeType:a})}}),new jl(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=c0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ft(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Wk{constructor(e){this.ze=e,this.je=new Map,this.He=di(),this.Je=pc(),this.Ye=pc(),this.Ze=new At(tt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Ge(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((n,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,n=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(Rm(a))if(n===0){const l=new qe(a.path);this.tt(t,l,cn.newNoDocument(l,Ye.min()))}else ft(n===1,20013,{expectedCount:n});else{const l=this.ut(t);if(l!==n){const c=this.ct(e),h=c?this.lt(c,e,l):1;if(h!==0){this.st(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let l,c;try{l=os(n).toUint8Array()}catch(h){if(h instanceof D1)return Yo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new lg(l,i,a)}catch(h){return Yo(h instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.pe===0?null:c}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,l)=>{const c=this._t(l);if(c){if(a.current&&Rm(c.target)){const h=new qe(c.target.path);this.Et(h).has(l)||this.dt(l,h)||this.tt(l,h,cn.newNoDocument(h,e))}a.Le&&(t.set(l,a.qe()),a.Qe())}});let n=it();this.Ye.forEach((a,l)=>{let c=!0;l.forEachWhile(h=>{const d=this._t(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.He.forEach((a,l)=>l.setReadTime(e));const i=new mh(e,t,this.Ze,this.He,n);return this.He=di(),this.Je=pc(),this.Ye=pc(),this.Ze=new At(tt),i}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new u0,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new qt(tt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new qt(tt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new u0),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function pc(){return new At(qe.comparator)}function c0(){return new At(qe.comparator)}const Kk={asc:"ASCENDING",desc:"DESCENDING"},Gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"};class Jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xm(r,e){return r.useProto3Json||uh(e)?e:{value:e}}function zc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Yk(r,e){return zc(r,e.toTimestamp())}function jr(r){return ft(!!r,49232),Ye.fromTimestamp(function(t){const n=ss(t);return new Lt(n.seconds,n.nanos)}(r))}function ug(r,e){return Om(r,e).canonicalString()}function Om(r,e){const t=function(i){return new wt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function dT(r){const e=wt.fromString(r);return ft(_T(e),10190,{key:e.toString()}),e}function Nm(r,e){return ug(r.databaseId,e.path)}function kd(r,e){const t=dT(e);if(t.get(1)!==r.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new qe(mT(t))}function pT(r,e){return ug(r.databaseId,e)}function Xk(r){const e=dT(r);return e.length===4?wt.emptyPath():mT(e)}function Lm(r){return new wt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function mT(r){return ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function h0(r,e,t){return{name:Nm(r,e),fields:t.value.mapValue.fields}}function Zk(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ge(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,v){return d.useProto3Json?(ft(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(ft(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(d){const v=d.code===void 0?_e.UNKNOWN:uT(d.code);return new Ne(v,d.message||"")}(l);t=new hT(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=kd(r,n.document.name),a=jr(n.document.updateTime),l=n.document.createTime?jr(n.document.createTime):Ye.min(),c=new xn({mapValue:{fields:n.document.fields}}),h=cn.newFoundDocument(i,a,l,c),d=n.targetIds||[],v=n.removedTargetIds||[];t=new Ic(d,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=kd(r,n.document),a=n.readTime?jr(n.readTime):Ye.min(),l=cn.newNoDocument(i,a),c=n.removedTargetIds||[];t=new Ic([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=kd(r,n.document),a=n.removedTargetIds||[];t=new Ic([],a,i,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,l=new zk(i,a),c=n.targetId;t=new cT(c,l)}}return t}function eR(r,e){let t;if(e instanceof Ml)t={update:h0(r,e.key,e.value)};else if(e instanceof og)t={delete:Nm(r,e.key)};else if(e instanceof fs)t={update:h0(r,e.key,e.data),updateMask:uR(e.fieldMask)};else{if(!(e instanceof Vk))return Ge(16599,{ft:e.type});t={verify:Nm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,l){const c=l.transform;if(c instanceof Al)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof kl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Rl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof qc)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw Ge(20930,{transform:l.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:Yk(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ge(27497)}(r,e.precondition)),t}function tR(r,e){return r&&r.length>0?(ft(e!==void 0,14353),r.map(t=>function(i,a){let l=i.updateTime?jr(i.updateTime):jr(a);return l.isEqual(Ye.min())&&(l=jr(a)),new Mk(l,i.transformResults||[])}(t,e))):[]}function nR(r,e){return{documents:[pT(r,e.path)]}}function gT(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=pT(r,i);const a=function(d){if(d.length!==0)return vT(wr.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(d){if(d.length!==0)return d.map(v=>function(m){return{field:Wi(m.field),direction:oR(m.dir)}}(v))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=xm(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function rR(r,e,t,n){const{gt:i,parent:a}=gT(r,e),l={},c=[];let h=0;return t.forEach(d=>{const v="aggregate_"+h++;l[v]=d.alias,d.aggregateType==="count"?c.push({alias:v,count:{}}):d.aggregateType==="avg"?c.push({alias:v,avg:{field:Wi(d.fieldPath)}}):d.aggregateType==="sum"&&c.push({alias:v,sum:{field:Wi(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:i.structuredQuery},parent:i.parent},yt:l,parent:a}}function iR(r){let e=Xk(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ft(n===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(g){const m=yT(g);return m instanceof wr&&$1(m)?m.getFilters():[m]}(t.where));let l=[];t.orderBy&&(l=function(g){return g.map(m=>function(T){return new bl(Ho(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let c=null;t.limit&&(c=function(g){let m;return m=typeof g=="object"?g.value:g,uh(m)?null:m}(t.limit));let h=null;t.startAt&&(h=function(g){const m=!!g.before,y=g.values||[];return new Uc(y,m)}(t.startAt));let d=null;return t.endAt&&(d=function(g){const m=!g.before,y=g.values||[];return new Uc(y,m)}(t.endAt)),Tk(e,i,l,a,c,"F",h,d)}function sR(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ho(t.unaryFilter.field);return Ft.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ho(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ho(t.unaryFilter.field);return Ft.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ho(t.unaryFilter.field);return Ft.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ft.create(Ho(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return wr.create(t.compositeFilter.filters.map(n=>yT(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}}(t.compositeFilter.op))}(r):Ge(30097,{filter:r})}function oR(r){return Kk[r]}function aR(r){return Gk[r]}function lR(r){return Qk[r]}function Wi(r){return{fieldPath:r.canonicalString()}}function Ho(r){return en.fromServerFormat(r.fieldPath)}function vT(r){return r instanceof Ft?function(t){if(t.op==="=="){if(X_(t.value))return{unaryFilter:{field:Wi(t.field),op:"IS_NAN"}};if(Y_(t.value))return{unaryFilter:{field:Wi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(X_(t.value))return{unaryFilter:{field:Wi(t.field),op:"IS_NOT_NAN"}};if(Y_(t.value))return{unaryFilter:{field:Wi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wi(t.field),op:aR(t.op),value:t.value}}}(r):r instanceof wr?function(t){const n=t.getFilters().map(i=>vT(i));return n.length===1?n[0]:{compositeFilter:{op:lR(t.op),filters:n}}}(r):Ge(54877,{filter:r})}function uR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _T(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,n,i,a=Ye.min(),l=Ye.min(),c=nn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.wt=e}}function hR(r){const e=iR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.yn=new dR}addToCollectionParentIndex(e,t){return this.yn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(is.min())}updateCollectionGroup(e,t,n){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class dR{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new qt(wt.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new qt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wT=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(wT,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ta(0)}static ir(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="LruGarbageCollector",pR=1048576;function p0([r,e],[t,n]){const i=tt(r,t);return i===0?tt(e,n):i}class mR{constructor(e){this.cr=e,this.buffer=new qt(p0),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();p0(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gR{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Oe(d0,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?Oe(d0,"Ignoring IndexedDB error during garbage collection: ",t):await oa(t)}await this.Ir(3e5)})}}class yR{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return we.resolve(lh.le);const n=new mR(t);return this.Er.forEachTarget(e,i=>n.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>n.Pr(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(f0)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,i,a,l,c,h,d;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(n=g,c=Date.now(),this.removeTargets(e,n,t))).next(g=>(a=g,h=Date.now(),this.removeOrphanedDocuments(e,n))).next(g=>(d=Date.now(),qo()<=rt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${g} documents in `+(d-h)+`ms
Total Duration: ${d-v}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function vR(r,e){return new yR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.changes=new Ys(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?we.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&vl(n.mutation,i,Bn.empty(),Lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,it()).next(()=>n))}getLocalViewOfDocuments(e,t,n=it()){const i=Bs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let l=cl();return a.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=Bs();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,it()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,n,i){let a=di();const l=yl(),c=function(){return yl()}();return t.forEach((h,d)=>{const v=n.get(d.key);i.has(d.key)&&(v===void 0||v.mutation instanceof fs)?a=a.insert(d.key,d):v!==void 0?(l.set(d.key,v.mutation.getFieldMask()),vl(v.mutation,d,v.mutation.getFieldMask(),Lt.now())):l.set(d.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((d,v)=>l.set(d,v)),t.forEach((d,v)=>{var g;return c.set(d,new wR(v,(g=l.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){const n=yl();let i=new At((l,c)=>l-c),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let v=n.get(h)||Bn.empty();v=c.applyToLocalView(d,v),n.set(h,v);const g=(i.get(c.batchId)||it()).add(h);i=i.insert(c.batchId,g)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,v=h.value,g=tT();v.forEach(m=>{if(!a.has(m)){const y=aT(t.get(m),n.get(m));y!==null&&g.set(m,y),a=a.add(m)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,g))}return we.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(l){return qe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):we.resolve(Bs());let c=Tl,h=a;return l.next(d=>we.forEach(d,(v,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(v)?we.resolve():this.remoteDocumentCache.getEntry(e,v).next(m=>{h=h.insert(v,m)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,h,d,it())).next(v=>({batchId:c,changes:eT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(n=>{let i=cl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let l=cl();return this.indexManager.getCollectionParents(e,a).next(c=>we.forEach(c,h=>{const d=function(g,m){return new la(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(v=>{v.forEach((g,m)=>{l=l.insert(g,m)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(l=>{a.forEach((h,d)=>{const v=d.getKey();l.get(v)===null&&(l=l.insert(v,cn.newInvalidDocument(v)))});let c=cl();return l.forEach((h,d)=>{const v=a.get(h);v!==void 0&&vl(v.mutation,d,Bn.empty(),Lt.now()),fh(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return we.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:jr(i.createTime)}}(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:hR(i.bundledQuery),readTime:jr(i.readTime)}}(t)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.overlays=new At(qe.comparator),this.Or=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bs();return we.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.St(e,t,a)}),we.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Or.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Or.delete(n)),we.resolve()}getOverlaysForCollection(e,t,n){const i=Bs(),a=t.length+1,l=new qe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&h.largestBatchId>n&&i.set(h.getKey(),h)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new At((d,v)=>d-v);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let v=a.get(d.largestBatchId);v===null&&(v=Bs(),a=a.insert(d.largestBatchId,v)),v.set(d.getKey(),d)}}const c=Bs(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,v)=>c.set(d,v)),!(c.size()>=i)););return we.resolve(c)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.Or.get(i.largestBatchId).delete(n.key);this.Or.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new Bk(t,n));let a=this.Or.get(t);a===void 0&&(a=it(),this.Or.set(t,a)),this.Or.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Nr=new qt(Gt.Br),this.Lr=new qt(Gt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new Gt(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Qr(new Gt(e,t))}$r(e,t){e.forEach(n=>this.removeReference(n,t))}Ur(e){const t=new qe(new wt([])),n=new Gt(t,e),i=new Gt(t,e+1),a=[];return this.Lr.forEachInRange([n,i],l=>{this.Qr(l),a.push(l.key)}),a}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new qe(new wt([])),n=new Gt(t,e),i=new Gt(t,e+1);let a=it();return this.Lr.forEachInRange([n,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Gt(e,0),n=this.Nr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Gt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return qe.comparator(e.key,t.key)||tt(e.Gr,t.Gr)}static kr(e,t){return tt(e.Gr,t.Gr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new qt(Gt.Br)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Uk(a,t,n,i);this.mutationQueue.push(l);for(const c of i)this.zr=this.zr.add(new Gt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(l)}lookupMutationBatch(e,t){return we.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Hr(n),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Zm:this.Jn-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),a=[];return this.zr.forEachInRange([n,i],l=>{const c=this.jr(l.Gr);a.push(c)}),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qt(tt);return t.forEach(i=>{const a=new Gt(i,0),l=new Gt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([a,l],c=>{n=n.add(c.Gr)})}),we.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;qe.isDocumentKey(a)||(a=a.child(""));const l=new Gt(new qe(a),0);let c=new qt(tt);return this.zr.forEachWhile(h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.Gr)),!0)},l),we.resolve(this.Jr(c))}Jr(e){const t=[];return e.forEach(n=>{const i=this.jr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.zr;return we.forEach(t.mutations,i=>{const a=new Gt(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=n})}Xn(e){}containsKey(e,t){const n=new Gt(t,0),i=this.zr.firstAfterOrEqual(n);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.Zr=e,this.docs=function(){return new At(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,l=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return we.resolve(n?n.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let n=di();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():cn.newInvalidDocument(i))}),we.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=di();const l=t.path,c=new qe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:v}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||ZA(XA(v),n)<=0||(i.has(v.key)||fh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,t,n,i){Ge(9500)}Xr(e,t){return we.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new AR(this)}getSize(e){return we.resolve(this.size)}}class AR extends _R{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(n)}),we.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.persistence=e,this.ei=new Ys(t=>ng(t),rg),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ti=0,this.ni=new cg,this.targetCount=0,this.ri=ta.rr()}forEachTarget(e,t){return this.ei.forEach((n,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),we.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ta(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.ar(t),we.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.ei.forEach((l,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.ei.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),we.waitFor(a).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return we.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),we.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),we.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),we.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return we.resolve(n)}containsKey(e,t){return we.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.ii={},this.overlays={},this.si=new lh(0),this.oi=!1,this.oi=!0,this._i=new IR,this.referenceDelegate=e(this),this.ai=new kR(this),this.indexManager=new fR,this.remoteDocumentCache=function(i){return new bR(i)}(n=>this.referenceDelegate.ui(n)),this.serializer=new cR(t),this.ci=new TR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new CR(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){Oe("MemoryPersistence","Starting transaction:",e);const i=new RR(this.si.next());return this.referenceDelegate.li(),n(i).next(a=>this.referenceDelegate.hi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Pi(e,t){return we.or(Object.values(this.ii).map(n=>()=>n.containsKey(e,t)))}}class RR extends tk{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ti=new cg,this.Ii=null}static Ei(e){return new hg(e)}get di(){if(this.Ii)return this.Ii;throw Ge(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),we.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.di.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.di,n=>{const i=qe.fromPath(n);return this.Ai(e,i).next(a=>{a||t.removeEntry(i,Ye.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return we.or([()=>we.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Hc{constructor(e,t){this.persistence=e,this.Ri=new Ys(n=>ik(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=vR(this,t)}static Ei(e,t){return new Hc(e,t)}li(){}hi(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}Vr(e){let t=0;return this.Ar(e,n=>{t++}).next(()=>t)}Ar(e,t){return we.forEach(this.Ri,(n,i)=>this.gr(e,n,i).next(a=>a?we.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.Xr(e,l=>this.gr(e,l,t).next(c=>{c||(n++,a.removeEntry(l,Ye.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),we.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),we.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ec(e.data.value)),t}gr(e,t,n){return we.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return we.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=i}static Ps(e,t){let n=it(),i=it();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new fg(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Tb()?8:nk(hn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.Rs(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.Vs(e,t,i,n).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new PR;return this.fs(e,t,l).next(c=>{if(a.result=c,this.Is)return this.gs(e,t,l,c.size)})}).next(()=>a.result)}gs(e,t,n,i){return n.documentReadCount<this.Es?(qo()<=rt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),we.resolve()):(qo()<=rt.DEBUG&&Oe("QueryEngine","Query:",zo(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ds*i?(qo()<=rt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):we.resolve())}Rs(e,t){if(n0(t))return we.resolve(null);let n=Mr(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Bc(t,null,"F"),n=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=it(...a);return this.As.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,n).next(h=>{const d=this.ps(t,c);return this.ys(t,d,l,h.readTime)?this.Rs(e,Bc(t,null,"F")):this.ws(e,d,t,h)}))})))}Vs(e,t,n,i){return n0(t)||i.isEqual(Ye.min())?we.resolve(null):this.As.getDocuments(e,n).next(a=>{const l=this.ps(t,a);return this.ys(t,l,n,i)?we.resolve(null):(qo()<=rt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zo(t)),this.ws(e,l,t,YA(i,Tl)).next(c=>c))})}ps(e,t){let n=new qt(X1(e));return t.forEach((i,a)=>{fh(e,a)&&(n=n.add(a))}),n}ys(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}fs(e,t,n){return qo()<=rt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",zo(t)),this.As.getDocumentsMatchingQuery(e,t,is.min(),n)}ws(e,t,n,i){return this.As.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",OR=3e8;class NR{constructor(e,t,n,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new At(tt),this.Ds=new Ys(a=>ng(a),rg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ER(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function LR(r,e,t,n){return new NR(r,e,t,n)}async function TT(r,e){const t=Je(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.Fs(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],c=[];let h=it();for(const d of i){l.push(d.batchId);for(const v of d.mutations)h=h.add(v.key)}for(const d of a){c.push(d.batchId);for(const v of d.mutations)h=h.add(v.key)}return t.localDocuments.getDocuments(n,h).next(d=>({Ms:d,removedBatchIds:l,addedBatchIds:c}))})})}function DR(r,e){const t=Je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.Cs.newChangeBuffer({trackRemovals:!0});return function(c,h,d,v){const g=d.batch,m=g.keys();let y=we.resolve();return m.forEach(T=>{y=y.next(()=>v.getEntry(h,T)).next(S=>{const w=d.docVersions.get(T);ft(w!==null,48541),S.version.compareTo(w)<0&&(g.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),v.addEntry(S)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(h,g))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let h=it();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function ST(r){const e=Je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function MR(r,e){const t=Je(r),n=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const c=[];e.targetChanges.forEach((v,g)=>{const m=i.get(g);if(!m)return;c.push(t.ai.removeMatchingKeys(a,v.removedDocuments,g).next(()=>t.ai.addMatchingKeys(a,v.addedDocuments,g)));let y=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?y=y.withResumeToken(nn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):v.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(v.resumeToken,n)),i=i.insert(g,y),function(S,w,E){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=OR?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,v)&&c.push(t.ai.updateTargetData(a,y))});let h=di(),d=it();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),c.push(jR(a,l,e.documentUpdates).next(v=>{h=v.xs,d=v.Os})),!n.isEqual(Ye.min())){const v=t.ai.getLastRemoteSnapshotVersion(a).next(g=>t.ai.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(v)}return we.waitFor(c).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,d)).next(()=>h)}).then(a=>(t.Ss=i,a))}function jR(r,e,t){let n=it(),i=it();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let l=di();return t.forEach((c,h)=>{const d=a.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Ye.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):Oe(dg,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{xs:l,Os:i}})}function FR(r,e){const t=Je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Zm),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function VR(r,e){const t=Je(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.ai.getTargetData(n,e).next(a=>a?(i=a,we.resolve(i)):t.ai.allocateTargetId(n).next(l=>(i=new Xi(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.ai.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ss.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(n.targetId,n),t.Ds.set(e,n.targetId)),n})}async function Dm(r,e,t){const n=Je(r),i=n.Ss.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!aa(l))throw l;Oe(dg,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ss=n.Ss.remove(e),n.Ds.delete(i.target)}function m0(r,e,t){const n=Je(r);let i=Ye.min(),a=it();return n.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,v){const g=Je(h),m=g.Ds.get(v);return m!==void 0?we.resolve(g.Ss.get(m)):g.ai.getTargetData(d,v)}(n,l,Mr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.ai.getMatchingKeysForTargetId(l,c.targetId).next(h=>{a=h})}).next(()=>n.bs.getDocumentsMatchingQuery(l,e,t?i:Ye.min(),t?a:it())).next(c=>(UR(n,Ik(e),c),{documents:c,Ns:a})))}function UR(r,e,t){let n=r.vs.get(e)||Ye.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.vs.set(e,n)}class g0{constructor(){this.activeTargetIds=Pk()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BR{constructor(){this.So=new g0,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new g0,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="ConnectivityMonitor";class v0{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Oe(y0,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Oe(y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Mm(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="RestConnection",zR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HR{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${i}`,this.qo=this.databaseId.database===Fc?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Qo(e,t,n,i,a){const l=Mm(),c=this.$o(e,t.toUriEncodedString());Oe(Rd,`Sending RPC '${e}' ${l}:`,c,n);const h={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(h,i,a),this.Ko(e,c,h,n).then(d=>(Oe(Rd,`Received RPC '${e}' ${l}: `,d),d),d=>{throw Yo(Rd,`RPC '${e}' ${l} failed with error: `,d,"url: ",c,"request:",n),d})}Wo(e,t,n,i,a,l){return this.Qo(e,t,n,i,a)}Uo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}$o(e,t){const n=zR[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class WR extends HR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,i){const a=Mm();return new Promise((l,c)=>{const h=new I1;h.setWithCredentials(!0),h.listenOnce(C1.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wc.NO_ERROR:const v=h.getResponseJson();Oe(ln,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case wc.TIMEOUT:Oe(ln,`RPC '${e}' ${a} timed out`),c(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const g=h.getStatus();if(Oe(ln,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let m=h.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const T=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(E)>=0?E:_e.UNKNOWN}(y.status);c(new Ne(T,y.message))}else c(new Ne(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{s_:e,streamId:a,o_:h.getLastErrorCode(),__:h.getLastError()})}}finally{Oe(ln,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);Oe(ln,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",d,n,15)})}a_(e,t,n){const i=Mm(),a=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=k1(),c=A1(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Uo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const v=a.join("");Oe(ln,`Creating RPC '${e}' stream ${i}: ${v}`,h);const g=l.createWebChannel(v,h);let m=!1,y=!1;const T=new $R({Go:w=>{y?Oe(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(m||(Oe(ln,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Oe(ln,`RPC '${e}' stream ${i} sending:`,w),g.send(w))},zo:()=>g.close()}),S=(w,E,b)=>{w.listen(E,O=>{try{b(O)}catch(C){setTimeout(()=>{throw C},0)}})};return S(g,ul.EventType.OPEN,()=>{y||(Oe(ln,`RPC '${e}' stream ${i} transport opened.`),T.t_())}),S(g,ul.EventType.CLOSE,()=>{y||(y=!0,Oe(ln,`RPC '${e}' stream ${i} transport closed`),T.r_())}),S(g,ul.EventType.ERROR,w=>{y||(y=!0,Yo(ln,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),T.r_(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),S(g,ul.EventType.MESSAGE,w=>{var E;if(!y){const b=w.data[0];ft(!!b,16349);const O=b,C=(O==null?void 0:O.error)||((E=O[0])===null||E===void 0?void 0:E.error);if(C){Oe(ln,`RPC '${e}' stream ${i} received error:`,C);const F=C.status;let U=function(A){const k=jt[A];if(k!==void 0)return uT(k)}(F),P=C.message;U===void 0&&(U=_e.INTERNAL,P="Unknown error status: "+F+" with message "+C.message),y=!0,T.r_(new Ne(U,P)),g.close()}else Oe(ln,`RPC '${e}' stream ${i} received:`,b),T.i_(b)}}),S(c,b1.STAT_EVENT,w=>{w.stat===Im.PROXY?Oe(ln,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Im.NOPROXY&&Oe(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.n_()},0),T}}function Pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r){return new Jk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,t,n=1e3,i=1.5,a=6e4){this.bi=e,this.timerId=t,this.u_=n,this.c_=i,this.l_=a,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-n);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="PersistentStream";class CT{constructor(e,t,n,i,a,l,c,h){this.bi=e,this.R_=n,this.V_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new IT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.m_===t&&this.B_(n,i)},n=>{e(()=>{const i=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.L_(i)})})}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{n(()=>this.listener.jo())}),this.stream.Jo(()=>{n(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{n(()=>this.L_(i))}),this.stream.onMessage(i=>{n(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Oe(_0,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Oe(_0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KR extends CT{constructor(e,t,n,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=Zk(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ye.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ye.min():l.readTime?jr(l.readTime):Ye.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=Lm(this.serializer),t.addTarget=function(a,l){let c;const h=l.target;if(c=Rm(h)?{documents:nR(a,h)}:{query:gT(a,h).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=fT(a,l.resumeToken);const d=xm(a,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(Ye.min())>0){c.readTime=zc(a,l.snapshotVersion.toTimestamp());const d=xm(a,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=sR(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=Lm(this.serializer),t.removeTarget=e,this.F_(t)}}class GR extends CT{constructor(e,t,n,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=tR(e.writeResults,e.commitTime),n=jr(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=Lm(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>eR(this.serializer,n))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{}class JR extends QR{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Qo(e,Om(t,n),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(_e.UNKNOWN,a.toString())})}Wo(e,t,n,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,Om(t,n),i,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(_e.UNKNOWN,l.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class YR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(fi(t),this.ea=!1):Oe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class XR{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=a,this.ca.vo(l=>{n.enqueueAndForget(async()=>{Xs(this)&&(Oe(Ws,"Restarting streams for network reachability change."),await async function(h){const d=Je(h);d.aa.add(4),await Fl(d),d.la.set("Unknown"),d.aa.delete(4),await yh(d)}(this))})}),this.la=new YR(n,i)}}async function yh(r){if(Xs(r))for(const e of r.ua)await e(!0)}async function Fl(r){for(const e of r.ua)await e(!1)}function bT(r,e){const t=Je(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),yg(t)?gg(t):ua(t).b_()&&mg(t,e))}function pg(r,e){const t=Je(r),n=ua(t);t._a.delete(e),n.b_()&&AT(t,e),t._a.size===0&&(n.b_()?n.v_():Xs(t)&&t.la.set("Unknown"))}function mg(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ua(r).U_(e)}function AT(r,e){r.ha.Ke(e),ua(r).K_(e)}function gg(r){r.ha=new Wk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ua(r).start(),r.la.ta()}function yg(r){return Xs(r)&&!ua(r).w_()&&r._a.size>0}function Xs(r){return Je(r).aa.size===0}function kT(r){r.ha=void 0}async function ZR(r){r.la.set("Online")}async function eP(r){r._a.forEach((e,t)=>{mg(r,e)})}async function tP(r,e){kT(r),yg(r)?(r.la.ia(e),gg(r)):r.la.set("Unknown")}async function nP(r,e,t){if(r.la.set("Online"),e instanceof hT&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const c of a.targetIds)i._a.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i._a.delete(c),i.ha.removeTarget(c))}(r,e)}catch(n){Oe(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $c(r,n)}else if(e instanceof Ic?r.ha.Xe(e):e instanceof cT?r.ha.ot(e):r.ha.nt(e),!t.isEqual(Ye.min()))try{const n=await ST(r.localStore);t.compareTo(n)>=0&&await function(a,l){const c=a.ha.It(l);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const v=a._a.get(d);v&&a._a.set(d,v.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,d)=>{const v=a._a.get(h);if(!v)return;a._a.set(h,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),AT(a,h);const g=new Xi(v.target,h,d,v.sequenceNumber);mg(a,g)}),a.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){Oe(Ws,"Failed to raise snapshot:",n),await $c(r,n)}}async function $c(r,e,t){if(!aa(e))throw e;r.aa.add(1),await Fl(r),r.la.set("Offline"),t||(t=()=>ST(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Oe(Ws,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await yh(r)})}function RT(r,e){return e().catch(t=>$c(r,t,e))}async function vh(r){const e=Je(r),t=ls(e);let n=e.oa.length>0?e.oa[e.oa.length-1].batchId:Zm;for(;rP(e);)try{const i=await FR(e.localStore,n);if(i===null){e.oa.length===0&&t.v_();break}n=i.batchId,iP(e,i)}catch(i){await $c(e,i)}PT(e)&&xT(e)}function rP(r){return Xs(r)&&r.oa.length<10}function iP(r,e){r.oa.push(e);const t=ls(r);t.b_()&&t.W_&&t.G_(e.mutations)}function PT(r){return Xs(r)&&!ls(r).w_()&&r.oa.length>0}function xT(r){ls(r).start()}async function sP(r){ls(r).H_()}async function oP(r){const e=ls(r);for(const t of r.oa)e.G_(t.mutations)}async function aP(r,e,t){const n=r.oa.shift(),i=ag.from(n,e,t);await RT(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await vh(r)}async function lP(r,e){e&&ls(r).W_&&await async function(n,i){if(function(l){return Hk(l)&&l!==_e.ABORTED}(i.code)){const a=n.oa.shift();ls(n).D_(),await RT(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await vh(n)}}(r,e),PT(r)&&xT(r)}async function w0(r,e){const t=Je(r);t.asyncQueue.verifyOperationInProgress(),Oe(Ws,"RemoteStore received new credentials");const n=Xs(t);t.aa.add(3),await Fl(t),n&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await yh(t)}async function uP(r,e){const t=Je(r);e?(t.aa.delete(2),await yh(t)):e||(t.aa.add(2),await Fl(t),t.la.set("Unknown"))}function ua(r){return r.Pa||(r.Pa=function(t,n,i){const a=Je(t);return a.Y_(),new KR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{jo:ZR.bind(null,r),Jo:eP.bind(null,r),Zo:tP.bind(null,r),Q_:nP.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),yg(r)?gg(r):r.la.set("Unknown")):(await r.Pa.stop(),kT(r))})),r.Pa}function ls(r){return r.Ta||(r.Ta=function(t,n,i){const a=Je(t);return a.Y_(),new GR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:sP.bind(null,r),Zo:lP.bind(null,r),z_:oP.bind(null,r),j_:aP.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await vh(r)):(await r.Ta.stop(),r.oa.length>0&&(Oe(Ws,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const l=Date.now()+n,c=new vg(e,t,l,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(r,e){if(fi("AsyncQueue",`${e}: ${r}`),aa(r))return new Ne(_e.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||qe.comparator(t.key,n.key):(t,n)=>qe.comparator(t.key,n.key),this.keyedMap=cl(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ko;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.Ia=new At(qe.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?e.type!==0&&n.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&n.type!==1?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Ia=this.Ia.remove(t):e.type===1&&n.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,n)=>{e.push(n)}),e}}class na{constructor(e,t,n,i,a,l,c,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,a){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new na(e,t,Ko.emptySet(t),l,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class hP{constructor(){this.queries=T0(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,n){const i=Je(t),a=i.queries;i.queries=T0(),a.forEach((l,c)=>{for(const h of c.Ra)h.onError(n)})})(this,new Ne(_e.ABORTED,"Firestore shutting down"))}}function T0(){return new Ys(r=>Y1(r),hh)}async function OT(r,e){const t=Je(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.Va()&&e.ma()&&(n=2):(a=new cP,n=e.ma()?0:1);try{switch(n){case 0:a.Aa=await t.onListen(i,!0);break;case 1:a.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=_g(l,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Ra.push(e),e.ga(t.onlineState),a.Aa&&e.pa(a.Aa)&&wg(t)}async function NT(r,e){const t=Je(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const l=a.Ra.indexOf(e);l>=0&&(a.Ra.splice(l,1),a.Ra.length===0?i=e.ma()?0:1:!a.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function fP(r,e){const t=Je(r);let n=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const c of l.Ra)c.pa(i)&&(n=!0);l.Aa=i}}n&&wg(t)}function dP(r,e,t){const n=Je(r),i=n.queries.get(e);if(i)for(const a of i.Ra)a.onError(t);n.queries.delete(e)}function wg(r){r.fa.forEach(e=>{e.next()})}var jm,S0;(S0=jm||(jm={})).ya="default",S0.Cache="cache";class LT{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new na(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const n=t!=="Offline";return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.key=e}}class MT{constructor(e){this.key=e}}class pP{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=it(),this.mutatedKeys=it(),this.Ua=X1(e),this.Ka=new Ko(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new E0,i=t?t.Ka:this.Ka;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,g)=>{const m=i.get(v),y=fh(this.query,g)?g:null,T=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;m&&y?m.data.isEqual(y.data)?T!==S&&(n.track({type:3,doc:y}),w=!0):this.ja(m,y)||(n.track({type:2,doc:y}),w=!0,(h&&this.Ua(y,h)>0||d&&this.Ua(y,d)<0)&&(c=!0)):!m&&y?(n.track({type:0,doc:y}),w=!0):m&&!y&&(n.track({type:1,doc:m}),w=!0,(h||d)&&(c=!0)),w&&(y?(l=l.add(y),a=S?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),n.track({type:1,doc:v})}return{Ka:l,za:n,ys:c,mutatedKeys:a}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const l=e.za.da();l.sort((v,g)=>function(y,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:w})}};return S(y)-S(T)}(v.type,g.type)||this.Ua(v.doc,g.doc)),this.Ha(n),i=i!=null&&i;const c=t&&!i?this.Ja():[],h=this.$a.size===0&&this.current&&!i?1:0,d=h!==this.Qa;return this.Qa=h,l.length!==0||d?{snapshot:new na(this.query,e.Ka,a,l,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new E0,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=it(),this.Ka.forEach(n=>{this.Za(n.key)&&(this.$a=this.$a.add(n.key))});const t=[];return e.forEach(n=>{this.$a.has(n)||t.push(new MT(n))}),this.$a.forEach(n=>{e.has(n)||t.push(new DT(n))}),t}Xa(e){this.qa=e.Ns,this.$a=it();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return na.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Eg="SyncEngine";class mP{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class gP{constructor(e){this.key=e,this.tu=!1}}class yP{constructor(e,t,n,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nu={},this.ru=new Ys(c=>Y1(c),hh),this.iu=new Map,this.su=new Set,this.ou=new At(qe.comparator),this._u=new Map,this.au=new cg,this.uu={},this.cu=new Map,this.lu=ta.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function vP(r,e,t=!0){const n=qT(r);let i;const a=n.ru.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.eu()):i=await jT(n,e,t,!0),i}async function _P(r,e){const t=qT(r);await jT(t,e,!0,!1)}async function jT(r,e,t,n){const i=await VR(r.localStore,Mr(e)),a=i.targetId,l=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await wP(r,e,a,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&bT(r.remoteStore,i),c}async function wP(r,e,t,n,i){r.Pu=(g,m,y)=>async function(S,w,E,b){let O=w.view.Ga(E);O.ys&&(O=await m0(S.localStore,w.query,!1).then(({documents:P})=>w.view.Ga(P,O)));const C=b&&b.targetChanges.get(w.targetId),F=b&&b.targetMismatches.get(w.targetId)!=null,U=w.view.applyChanges(O,S.isPrimaryClient,C,F);return C0(S,w.targetId,U.Ya),U.snapshot}(r,g,m,y);const a=await m0(r.localStore,e,!0),l=new pP(e,a.Ns),c=l.Ga(a.documents),h=jl.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(c,r.isPrimaryClient,h);C0(r,t,d.Ya);const v=new mP(e,t,l);return r.ru.set(e,v),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),d.snapshot}async function EP(r,e,t){const n=Je(r),i=n.ru.get(e),a=n.iu.get(i.targetId);if(a.length>1)return n.iu.set(i.targetId,a.filter(l=>!hh(l,e))),void n.ru.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Dm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&pg(n.remoteStore,i.targetId),Fm(n,i.targetId)}).catch(oa)):(Fm(n,i.targetId),await Dm(n.localStore,i.targetId,!0))}async function TP(r,e){const t=Je(r),n=t.ru.get(e),i=t.iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),pg(t.remoteStore,n.targetId))}async function SP(r,e,t){const n=PP(r);try{const i=await function(l,c){const h=Je(l),d=Lt.now(),v=c.reduce((y,T)=>y.add(T.key),it());let g,m;return h.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=di(),S=it();return h.Cs.getEntries(y,v).next(w=>{T=w,T.forEach((E,b)=>{b.isValidDocument()||(S=S.add(E))})}).next(()=>h.localDocuments.getOverlayedDocuments(y,T)).next(w=>{g=w;const E=[];for(const b of c){const O=Fk(b,g.get(b.key).overlayedDocument);O!=null&&E.push(new fs(b.key,O,q1(O.value.mapValue),_r.exists(!0)))}return h.mutationQueue.addMutationBatch(y,d,E,c)}).next(w=>{m=w;const E=w.applyToLocalDocumentSet(g,S);return h.documentOverlayCache.saveOverlays(y,w.batchId,E)})}).then(()=>({batchId:m.batchId,changes:eT(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let d=l.uu[l.currentUser.toKey()];d||(d=new At(tt)),d=d.insert(c,h),l.uu[l.currentUser.toKey()]=d}(n,i.batchId,t),await Vl(n,i.changes),await vh(n.remoteStore)}catch(i){const a=_g(i,"Failed to persist write");t.reject(a)}}async function FT(r,e){const t=Je(r);try{const n=await MR(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t._u.get(a);l&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.tu=!0:i.modifiedDocuments.size>0?ft(l.tu,14607):i.removedDocuments.size>0&&(ft(l.tu,42227),l.tu=!1))}),await Vl(t,n,e)}catch(n){await oa(n)}}function I0(r,e,t){const n=Je(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ru.forEach((a,l)=>{const c=l.view.ga(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Je(l);h.onlineState=c;let d=!1;h.queries.forEach((v,g)=>{for(const m of g.Ra)m.ga(c)&&(d=!0)}),d&&wg(h)}(n.eventManager,e),i.length&&n.nu.Q_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function IP(r,e,t){const n=Je(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n._u.get(e),a=i&&i.key;if(a){let l=new At(qe.comparator);l=l.insert(a,cn.newNoDocument(a,Ye.min()));const c=it().add(a),h=new mh(Ye.min(),new Map,new At(tt),l,c);await FT(n,h),n.ou=n.ou.remove(a),n._u.delete(e),Tg(n)}else await Dm(n.localStore,e,!1).then(()=>Fm(n,e,t)).catch(oa)}async function CP(r,e){const t=Je(r),n=e.batch.batchId;try{const i=await DR(t.localStore,e);UT(t,n,null),VT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Vl(t,i)}catch(i){await oa(i)}}async function bP(r,e,t){const n=Je(r);try{const i=await function(l,c){const h=Je(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let v;return h.mutationQueue.lookupMutationBatch(d,c).next(g=>(ft(g!==null,37113),v=g.keys(),h.mutationQueue.removeMutationBatch(d,g))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,v,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,v)).next(()=>h.localDocuments.getDocuments(d,v))})}(n.localStore,e);UT(n,e,t),VT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Vl(n,i)}catch(i){await oa(i)}}function VT(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function UT(r,e,t){const n=Je(r);let i=n.uu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.uu[n.currentUser.toKey()]=i}}function Fm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.iu.get(e))r.ru.delete(n),t&&r.nu.Tu(n,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(n=>{r.au.containsKey(n)||BT(r,n)})}function BT(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(pg(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),Tg(r))}function C0(r,e,t){for(const n of t)n instanceof DT?(r.au.addReference(n.key,e),AP(r,n)):n instanceof MT?(Oe(Eg,"Document no longer in limbo: "+n.key),r.au.removeReference(n.key,e),r.au.containsKey(n.key)||BT(r,n.key)):Ge(19791,{Iu:n})}function AP(r,e){const t=e.key,n=t.path.canonicalString();r.ou.get(t)||r.su.has(n)||(Oe(Eg,"New document in limbo: "+t),r.su.add(n),Tg(r))}function Tg(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new qe(wt.fromString(e)),n=r.lu.next();r._u.set(n,new gP(t)),r.ou=r.ou.insert(t,n),bT(r.remoteStore,new Xi(Mr(ig(t.path)),n,"TargetPurposeLimboResolution",lh.le))}}async function Vl(r,e,t){const n=Je(r),i=[],a=[],l=[];n.ru.isEmpty()||(n.ru.forEach((c,h)=>{l.push(n.Pu(h,e,t).then(d=>{var v;if((d||t)&&n.isPrimaryClient){const g=d?!d.fromCache:(v=t==null?void 0:t.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;n.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(d){i.push(d);const g=fg.Ps(h.targetId,d);a.push(g)}}))}),await Promise.all(l),n.nu.Q_(i),await async function(h,d){const v=Je(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>we.forEach(d,m=>we.forEach(m.ls,y=>v.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>we.forEach(m.hs,y=>v.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!aa(g))throw g;Oe(dg,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const y=v.Ss.get(m),T=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(T);v.Ss=v.Ss.insert(m,S)}}}(n.localStore,a))}async function kP(r,e){const t=Je(r);if(!t.currentUser.isEqual(e)){Oe(Eg,"User change. New user:",e.toKey());const n=await TT(t.localStore,e);t.currentUser=e,function(a,l){a.cu.forEach(c=>{c.forEach(h=>{h.reject(new Ne(_e.CANCELLED,l))})}),a.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Vl(t,n.Ms)}}function RP(r,e){const t=Je(r),n=t._u.get(e);if(n&&n.tu)return it().add(n.key);{let i=it();const a=t.iu.get(e);if(!a)return i;for(const l of a){const c=t.ru.get(l);i=i.unionWith(c.view.Wa)}return i}}function qT(r){const e=Je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=FT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IP.bind(null,e),e.nu.Q_=fP.bind(null,e.eventManager),e.nu.Tu=dP.bind(null,e.eventManager),e}function PP(r){const e=Je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bP.bind(null,e),e}class Wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return LR(this.persistence,new xR,e.initialUser,this.serializer)}Ru(e){return new ET(hg.Ei,this.serializer)}Au(e){return new BR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wc.provider={build:()=>new Wc};class xP extends Wc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){ft(this.persistence.referenceDelegate instanceof Hc,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new gR(n,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new ET(n=>Hc.Ei(n,t),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>I0(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=kP.bind(null,this.syncEngine),await uP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hP}()}createDatastore(e){const t=gh(e.databaseInfo.databaseId),n=function(a){return new WR(a)}(e.databaseInfo);return function(a,l,c,h){return new JR(a,l,c,h)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,l,c){return new XR(n,i,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>I0(this.syncEngine,t,0),function(){return v0.C()?new v0:new qR}())}createSyncEngine(e,t){return function(i,a,l,c,h,d,v){const g=new yP(i,a,l,c,h,d);return v&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Je(i);Oe(Ws,"RemoteStore shutting down."),a.aa.add(5),await Fl(a),a.ca.shutdown(),a.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class OP{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=un.UNAUTHENTICATED,this.clientId=O1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async l=>{Oe(us,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(Oe(us,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=_g(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function xd(r,e){r.asyncQueue.verifyOperationInProgress(),Oe(us,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await TT(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function b0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await NP(r);Oe(us,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>w0(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>w0(e.remoteStore,i)),r._onlineComponents=e}async function NP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Oe(us,"Using user provided OfflineComponentProvider");try{await xd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Yo("Error using user provided cache. Falling back to memory cache: "+t),await xd(r,new Wc)}}else Oe(us,"Using default OfflineComponentProvider"),await xd(r,new xP(void 0));return r._offlineComponents}async function Sg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Oe(us,"Using user provided OnlineComponentProvider"),await b0(r,r._uninitializedComponentsProvider._online)):(Oe(us,"Using default OnlineComponentProvider"),await b0(r,new Vm))),r._onlineComponents}function LP(r){return Sg(r).then(e=>e.syncEngine)}function DP(r){return Sg(r).then(e=>e.datastore)}async function Um(r){const e=await Sg(r),t=e.eventManager;return t.onListen=vP.bind(null,e.syncEngine),t.onUnlisten=EP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_P.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TP.bind(null,e.syncEngine),t}function MP(r,e,t={}){const n=new ai;return r.asyncQueue.enqueueAndForget(async()=>function(a,l,c,h,d){const v=new zT({next:m=>{v.yu(),l.enqueueAndForget(()=>NT(a,g)),m.fromCache&&h.source==="server"?d.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new LT(c,v,{includeMetadataChanges:!0,Fa:!0});return OT(a,g)}(await Um(r),r.asyncQueue,e,t,n)),n.promise}function jP(r,e,t){const n=new ai;return r.asyncQueue.enqueueAndForget(async()=>{try{const i=await DP(r);n.resolve(async function(l,c,h){var d;const v=Je(l),{request:g,yt:m,parent:y}=rR(v.serializer,Sk(c),h);v.connection.Bo||delete g.parent;const T=(await v.Wo("RunAggregationQuery",v.serializer.databaseId,y,g,1)).filter(w=>!!w.result);ft(T.length===1,64727);const S=(d=T[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(S).reduce((w,E)=>(w[m[E]]=S[E],w),{})}(i,e,t))}catch(i){n.reject(i)}}),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r,e,t){if(!t)throw new Ne(_e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function FP(r,e,t,n){if(e===!0&&n===!0)throw new Ne(_e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function k0(r){if(!qe.isDocumentKey(r))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function R0(r){if(qe.isDocumentKey(r))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ge(12329,{type:typeof r})}function Zn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_h(r);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function VP(r,e){if(e<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firestore.googleapis.com",P0=!0;class x0{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=P0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:P0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pR)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ne(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ne(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ne(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qA;switch(n.type){case"firstParty":return new WA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=A0.get(t);n&&(Oe("ComponentProvider","Removing Datastore"),A0.delete(t),n.terminate())}(this),Promise.resolve()}}function UP(r,e,t,n={}){var i;const a=(r=Zn(r,wh))._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:r._getEmulatorOptions()}),c=`${e}:${t}`;a.host!==WT&&a.host!==c&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:c,ssl:!1,emulatorOptions:n});if(!zs(h,l)&&(r._setSettings(h),n.mockUserToken)){let d,v;if(typeof n.mockUserToken=="string")d=n.mockUserToken,v=un.MOCK_USER;else{d=y1(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new un(g)}r._authCredentials=new zA(new P1(d,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class vn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class ns extends gi{constructor(e,t,n){super(e,t,ig(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new qe(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function BP(r,e,...t){if(r=yt(r),$T("collection","path",e),r instanceof wh){const n=wt.fromString(e,...t);return R0(n),new ns(r,null,n)}{if(!(r instanceof vn||r instanceof ns))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(wt.fromString(e,...t));return R0(n),new ns(r.firestore,null,n)}}function qP(r,e,...t){if(r=yt(r),arguments.length===1&&(e=O1.newId()),$T("doc","path",e),r instanceof wh){const n=wt.fromString(e,...t);return k0(n),new vn(r,null,new qe(n))}{if(!(r instanceof vn||r instanceof ns))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(wt.fromString(e,...t));return k0(n),new vn(r.firestore,r instanceof ns?r.converter:null,new qe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="AsyncQueue";class N0{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new IT(this,"async_queue_retry"),this.ju=()=>{const n=Pd();n&&Oe(O0,"Visibility state changed to "+n.visibilityState),this.y_.A_()},this.Hu=e;const t=Pd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Pd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ai;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!aa(e))throw e;Oe(O0,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(n=>{throw this.Ku=n,this.Wu=!1,fi("INTERNAL UNHANDLED ERROR: ",L0(n)),n}).then(n=>(this.Wu=!1,n))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=vg.createAndSchedule(this,e,t,n,a=>this.Xu(a));return this.Uu.push(i),i}Ju(){this.Ku&&Ge(47125,{ec:L0(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function L0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(r,["next","error","complete"])}class cs extends wh{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new N0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N0(e),this._firestoreClient=void 0,await e}}}function zP(r,e){const t=typeof r=="object"?r:Ym(),n=typeof r=="string"?r:Fc,i=ah(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=p1("firestore");a&&UP(i,...a)}return i}function Eh(r){if(r._terminated)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||HP(r),r._firestoreClient}function HP(r){var e,t,n;const i=r._freezeSettings(),a=function(c,h,d,v){return new lk(c,h,d,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,HT(v.experimentalLongPollingOptions),v.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new OP(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class WP{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(nn.fromBase64String(e))}catch(t){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ra(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^__.*__$/;class GP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ml(e,this.data,t,this.fieldTransforms)}}class KT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new fs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{oc:r})}}class bg{constructor(e,t,n,i,a,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this._c(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:n,cc:!1});return i.lc(e),i}hc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:n,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Kc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(GT(this.oc)&&KP.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class QP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||gh(e)}dc(e,t,n,i=!1){return new bg({oc:e,methodName:t,Ec:n,path:en.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ag(r){const e=r._freezeSettings(),t=gh(r._databaseId);return new QP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function JP(r,e,t,n,i,a={}){const l=r.dc(a.merge||a.mergeFields?2:0,e,t,i);Rg("Data must be an object, but it was:",l,n);const c=QT(n,l);let h,d;if(a.merge)h=new Bn(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const g of a.mergeFields){const m=Bm(e,g,t);if(!l.contains(m))throw new Ne(_e.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YT(v,m)||v.push(m)}h=new Bn(v),d=l.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,d=l.fieldTransforms;return new GP(new xn(c),h,d)}class Ih extends Sh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ih}}class kg extends Sh{_toFieldTransform(e){return new Lk(e.path,new Al)}isEqual(e){return e instanceof kg}}function YP(r,e,t,n){const i=r.dc(1,e,t);Rg("Data must be an object, but it was:",i,n);const a=[],l=xn.empty();hs(n,(h,d)=>{const v=Pg(e,h,t);d=yt(d);const g=i.hc(v);if(d instanceof Ih)a.push(v);else{const m=Ul(d,g);m!=null&&(a.push(v),l.set(v,m))}});const c=new Bn(a);return new KT(l,c,i.fieldTransforms)}function XP(r,e,t,n,i,a){const l=r.dc(1,e,t),c=[Bm(e,n,t)],h=[i];if(a.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(Bm(e,a[m])),h.push(a[m+1]);const d=[],v=xn.empty();for(let m=c.length-1;m>=0;--m)if(!YT(d,c[m])){const y=c[m];let T=h[m];T=yt(T);const S=l.hc(y);if(T instanceof Ih)d.push(y);else{const w=Ul(T,S);w!=null&&(d.push(y),v.set(y,w))}}const g=new Bn(d);return new KT(v,g,l.fieldTransforms)}function ZP(r,e,t,n=!1){return Ul(t,r.dc(n?4:3,e))}function Ul(r,e){if(JT(r=yt(r)))return Rg("Unsupported field value:",e,r),QT(r,e);if(r instanceof Sh)return function(n,i){if(!GT(i.oc))throw i.Tc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(n,i){const a=[];let l=0;for(const c of n){let h=Ul(c,i.Pc(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}}(r,e)}return function(n,i){if((n=yt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return xk(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Lt.fromDate(n);return{timestampValue:zc(i.serializer,a)}}if(n instanceof Lt){const a=new Lt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zc(i.serializer,a)}}if(n instanceof Ig)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ra)return{bytesValue:fT(i.serializer,n._byteString)};if(n instanceof vn){const a=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw i.Tc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ug(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Cg)return function(l,c){return{mapValue:{fields:{[U1]:{stringValue:B1},[Vc]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Tc("VectorValues must only contain numeric values.");return sg(c.serializer,d)})}}}}}}(n,i);throw i.Tc(`Unsupported field value: ${_h(n)}`)}(r,e)}function QT(r,e){const t={};return L1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(r,(n,i)=>{const a=Ul(i,e.uc(n));a!=null&&(t[n]=a)}),{mapValue:{fields:t}}}function JT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Lt||r instanceof Ig||r instanceof ra||r instanceof vn||r instanceof Sh||r instanceof Cg)}function Rg(r,e,t){if(!JT(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=_h(t);throw n==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+n)}}function Bm(r,e,t){if((e=yt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return Pg(r,e);throw Kc("Field path arguments must be of type string or ",r,!1,void 0,t)}const ex=new RegExp("[~\\*/\\[\\]]");function Pg(r,e,t){if(e.search(ex)>=0)throw Kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Th(...e.split("."))._internalPath}catch{throw Kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Kc(r,e,t,n,i){const a=n&&!n.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new Ne(_e.INVALID_ARGUMENT,c+r+h)}function YT(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ch("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tx extends XT{data(){return super.data()}}function Ch(r,e){return typeof e=="string"?Pg(r,e):e instanceof Th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class Og extends xg{}function nx(r,e,...t){let n=[];e instanceof xg&&n.push(e),n=n.concat(t),function(a){const l=a.filter(h=>h instanceof Ng).length,c=a.filter(h=>h instanceof bh).length;if(l>1||l>0&&c>0)throw new Ne(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class bh extends Og{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new bh(e,t,n)}_apply(e){const t=this._parse(e);return eS(e._query,t),new gi(e.firestore,e.converter,Pm(e._query,t))}_parse(e){const t=Ag(e.firestore);return function(a,l,c,h,d,v,g){let m;if(d.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){F0(g,v);const T=[];for(const S of g)T.push(j0(h,a,S));m={arrayValue:{values:T}}}else m=j0(h,a,g)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||F0(g,v),m=ZP(c,l,g,v==="in"||v==="not-in");return Ft.create(d,v,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function M0(r,e,t){const n=e,i=Ch("where",r);return bh._create(i,n,t)}class Ng extends xg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ng(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let l=i;const c=a.getFlattenedFilters();for(const h of c)eS(l,h),l=Pm(l,h)}(e._query,t),new gi(e.firestore,e.converter,Pm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends Og{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lg(e,t)}_apply(e){const t=function(i,a,l){if(i.startAt!==null)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bl(a,l)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new la(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function rx(r,e="asc"){const t=e,n=Ch("orderBy",r);return Lg._create(n,t)}class Dg extends Og{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Dg(e,t,n)}_apply(e){return new gi(e.firestore,e.converter,Bc(e._query,this._limit,this._limitType))}}function ix(r){return VP("limit",r),Dg._create("limit",r,"F")}function j0(r,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q1(e)&&t.indexOf("/")!==-1)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(wt.fromString(t));if(!qe.isDocumentKey(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return J_(r,new qe(n))}if(t instanceof vn)return J_(r,t._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(t)}.`)}function F0(r,e){if(!Array.isArray(r)||r.length===0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eS(r,e){const t=function(i,a){for(const l of i)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ne(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sx{convertValue(e,t="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return hs(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[Vc].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(l=>Nt(l.doubleValue));return new Cg(a)}convertGeoPoint(e){return new Ig(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ch(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=ss(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wt.fromString(e);ft(_T(n),9688,{name:e});const i=new Il(n.get(1),n.get(3)),a=new qe(n.popFirst(5));return i.isEqual(t)||fi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}function ax(){return new $P("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tS extends XT{constructor(e,t,n,i,a,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Cc extends tS{data(e={}){return super.data(e)}}class nS{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Cc(this._firestore,this._userDataWriter,n.key,n,new fl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Cc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const h=new Cc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,v=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:lx(c.type),doc:h,oldIndex:d,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lx(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:r})}}class Ah extends sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function ux(r){r=Zn(r,gi);const e=Zn(r.firestore,cs),t=Eh(e),n=new Ah(e);return ZT(r._query),MP(t,r._query).then(i=>new nS(e,n,r,i))}function cx(r,e,t){r=Zn(r,vn);const n=Zn(r.firestore,cs),i=ox(r.converter,e,t);return Mg(n,[JP(Ag(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,_r.none())])}function hx(r,e,t,...n){r=Zn(r,vn);const i=Zn(r.firestore,cs),a=Ag(i);let l;return l=typeof(e=yt(e))=="string"||e instanceof Th?XP(a,"updateDoc",r._key,e,t,n):YP(a,"updateDoc",r._key,e),Mg(i,[l.toMutation(r._key,_r.exists(!0))])}function V0(r){return Mg(Zn(r.firestore,cs),[new og(r._key,_r.none())])}function fx(r,...e){var t,n,i;r=yt(r);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||D0(e[l])||(a=e[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(D0(e[l])){const g=e[l];e[l]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[l+1]=(n=g.error)===null||n===void 0?void 0:n.bind(g),e[l+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let h,d,v;if(r instanceof vn)d=Zn(r.firestore,cs),v=ig(r._key.path),h={next:g=>{e[l]&&e[l](dx(d,r,g))},error:e[l+1],complete:e[l+2]};else{const g=Zn(r,gi);d=Zn(g.firestore,cs),v=g._query;const m=new Ah(d);h={next:y=>{e[l]&&e[l](new nS(d,m,g,y))},error:e[l+1],complete:e[l+2]},ZT(r._query)}return function(m,y,T,S){const w=new zT(S),E=new LT(y,w,T);return m.asyncQueue.enqueueAndForget(async()=>OT(await Um(m),E)),()=>{w.yu(),m.asyncQueue.enqueueAndForget(async()=>NT(await Um(m),E))}}(Eh(d),v,c,h)}function Mg(r,e){return function(n,i){const a=new ai;return n.asyncQueue.enqueueAndForget(async()=>SP(await LP(n),i,a)),a.promise}(Eh(r),e)}function dx(r,e,t){const n=t.docs.get(e._key),i=new Ah(r);return new tS(r,i,e._key,n,new fl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(r){return mx(r,{count:ax()})}function mx(r,e){const t=Zn(r.firestore,cs),n=Eh(t),i=ok(e,(a,l)=>new qk(l,a.aggregateType,a._internalFieldPath));return jP(n,r._query,i).then(a=>function(c,h,d){const v=new Ah(c);return new WP(h,v,d)}(t,r,a))}function gx(){return new kg("serverTimestamp")}(function(e,t=!0){(function(i){sa=i})(Js),Hs(new rs("firestore",(n,{instanceIdentifier:i,options:a})=>{const l=n.getProvider("app").getImmediate(),c=new cs(new HA(n.getProvider("auth-internal")),new KA(l,n.getProvider("app-check-internal")),function(d,v){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(d.options.projectId,v)}(l,i),l);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Dr(F_,V_,e),Dr(F_,V_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebasestorage.googleapis.com",iS="storageBucket",yx=2*60*1e3,vx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt extends qr{constructor(e,t,n=0){super(Od(e),`Firebase Storage: ${t} (${Od(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Od(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function Od(r){return"storage/"+r}function jg(){const r="An unknown error occurred, please check the error payload for server response.";return new Pt(Rt.UNKNOWN,r)}function _x(r){return new Pt(Rt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function wx(r){return new Pt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ex(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Rt.UNAUTHENTICATED,r)}function Tx(){return new Pt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Sx(r){return new Pt(Rt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function Ix(){return new Pt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Cx(){return new Pt(Rt.CANCELED,"User canceled the upload/download.")}function bx(r){return new Pt(Rt.INVALID_URL,"Invalid URL '"+r+"'.")}function Ax(r){return new Pt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function kx(){return new Pt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iS+"' property when initializing the app?")}function Rx(){return new Pt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Px(){return new Pt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xx(r){return new Pt(Rt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function qm(r){return new Pt(Rt.INVALID_ARGUMENT,r)}function sS(){return new Pt(Rt.APP_DELETED,"The Firebase app was deleted.")}function Ox(r){return new Pt(Rt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _l(r,e){return new Pt(Rt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function il(r){throw new Pt(Rt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=qn.makeFromUrl(e,t)}catch{return new qn(e,"")}if(n.path==="")return n;throw Ax(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const v="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${g}/${v}/b/${i}/o${m}`,"i"),T={bucket:1,path:3},S=t===rS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",E=new RegExp(`^https?://${S}/${i}/${w}`,"i"),O=[{regex:c,indices:h,postModify:a},{regex:y,indices:T,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<O.length;C++){const F=O[C],U=F.regex.exec(e);if(U){const P=U[F.indices.bucket];let _=U[F.indices.path];_||(_=""),n=new qn(P,_),F.postModify(n);break}}if(n==null)throw bx(e);return n}}class Nx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(r,e,t){let n=1,i=null,a=null,l=!1,c=0;function h(){return c===2}let d=!1;function v(...w){d||(d=!0,e.apply(null,w))}function g(w){i=setTimeout(()=>{i=null,r(y,h())},w)}function m(){a&&clearTimeout(a)}function y(w,...E){if(d){m();return}if(w){m(),v.call(null,w,...E);return}if(h()||l){m(),v.call(null,w,...E);return}n<64&&(n*=2);let O;c===1?(c=2,O=0):O=(n+Math.random())*1e3,g(O)}let T=!1;function S(w){T||(T=!0,m(),!d&&(i!==null?(w||(c=2),clearTimeout(i),g(0)):w||(c=1)))}return g(0),a=setTimeout(()=>{l=!0,S(!0)},t),S}function Dx(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(r){return r!==void 0}function jx(r){return typeof r=="object"&&!Array.isArray(r)}function Fg(r){return typeof r=="string"||r instanceof String}function U0(r){return Vg()&&r instanceof Blob}function Vg(){return typeof Blob<"u"}function B0(r,e,t,n){if(n<e)throw qm(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw qm(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function oS(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var qs;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(qs||(qs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t,n,i,a,l,c,h,d,v,g,m=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=v,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,T)=>{this.resolve_=y,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new gc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const h=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===qs.NO_ERROR,h=a.getStatus();if(!c||Fx(h,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===qs.ABORT;n(!1,new gc(!1,null,v));return}const d=this.successCodes_.indexOf(h)!==-1;n(!0,new gc(d,a))})},t=(n,i)=>{const a=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());Mx(h)?a(h):a()}catch(h){l(h)}else if(c!==null){const h=jg();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?sS():Cx();l(h)}else{const h=Ix();l(h)}};this.canceled_?t(!1,new gc(!1,null,!0)):this.backoffId_=Lx(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Dx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ux(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Bx(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qx(r,e){e&&(r["X-Firebase-GMPID"]=e)}function zx(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Hx(r,e,t,n,i,a,l=!0){const c=oS(r.urlParams),h=r.url+c,d=Object.assign({},r.headers);return qx(d,e),Ux(d,t),Bx(d,a),zx(d,n),new Vx(h,r.method,d,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Wx(...r){const e=$x();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(Vg())return new Blob(r);throw new Pt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Kx(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(r){if(typeof atob>"u")throw xx("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Nd{constructor(e,t){this.data=e,this.contentType=t||null}}function Qx(r,e){switch(r){case Lr.RAW:return new Nd(aS(e));case Lr.BASE64:case Lr.BASE64URL:return new Nd(lS(r,e));case Lr.DATA_URL:return new Nd(Yx(e),Xx(e))}throw jg()}function aS(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=n,l=r.charCodeAt(++t);n=65536|(a&1023)<<10|l&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Jx(r){let e;try{e=decodeURIComponent(r)}catch{throw _l(Lr.DATA_URL,"Malformed data URL.")}return aS(e)}function lS(r,e){switch(r){case Lr.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw _l(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Lr.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw _l(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Gx(e)}catch(i){throw i.message.includes("polyfill")?i:_l(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class uS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw _l(Lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=Zx(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Yx(r){const e=new uS(r);return e.base64?lS(Lr.BASE64,e.rest):Jx(e.rest)}function Xx(r){return new uS(r).contentType}function Zx(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t){let n=0,i="";U0(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(U0(this.data_)){const n=this.data_,i=Kx(n,e,t);return i===null?null:new Ki(i)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ki(n,!0)}}static getBlob(...e){if(Vg()){const t=e.map(n=>n instanceof Ki?n.data_:n);return new Ki(Wx.apply(null,t))}else{const t=e.map(l=>Fg(l)?Qx(Lr.RAW,l).data:l.data_);let n=0;t.forEach(l=>{n+=l.byteLength});const i=new Uint8Array(n);let a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[a++]=l[c]}),new Ki(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(r){let e;try{e=JSON.parse(r)}catch{return null}return jx(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function tO(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function hS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(r,e){return e}class gn{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||nO}}let yc=null;function rO(r){return!Fg(r)||r.length<2?r:hS(r)}function fS(){if(yc)return yc;const r=[];r.push(new gn("bucket")),r.push(new gn("generation")),r.push(new gn("metageneration")),r.push(new gn("name","fullPath",!0));function e(a,l){return rO(l)}const t=new gn("name");t.xform=e,r.push(t);function n(a,l){return l!==void 0?Number(l):l}const i=new gn("size");return i.xform=n,r.push(i),r.push(new gn("timeCreated")),r.push(new gn("updated")),r.push(new gn("md5Hash",null,!0)),r.push(new gn("cacheControl",null,!0)),r.push(new gn("contentDisposition",null,!0)),r.push(new gn("contentEncoding",null,!0)),r.push(new gn("contentLanguage",null,!0)),r.push(new gn("contentType",null,!0)),r.push(new gn("metadata","customMetadata",!0)),yc=r,yc}function iO(r,e){function t(){const n=r.bucket,i=r.fullPath,a=new qn(n,i);return e._makeStorageReference(a)}Object.defineProperty(r,"ref",{get:t})}function sO(r,e,t){const n={};n.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];n[l.local]=l.xform(n,e[l.server])}return iO(n,r),n}function dS(r,e,t){const n=cS(e);return n===null?null:sO(r,n,t)}function oO(r,e,t,n){const i=cS(e);if(i===null||!Fg(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(d=>{const v=r.bucket,g=r.fullPath,m="/b/"+l(v)+"/o/"+l(g),y=kh(m,t,n),T=oS({alt:"media",token:d});return y+T})[0]}function aO(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(t[a.server]=r[a.local])}return JSON.stringify(t)}class Ug{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(r){if(!r)throw jg()}function lO(r,e){function t(n,i){const a=dS(r,i,e);return pS(a!==null),a}return t}function uO(r,e){function t(n,i){const a=dS(r,i,e);return pS(a!==null),oO(a,i,r.host,r._protocol)}return t}function mS(r){function e(t,n){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Tx():i=Ex():t.getStatus()===402?i=wx(r.bucket):t.getStatus()===403?i=Sx(r.path):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}return e}function gS(r){const e=mS(r);function t(n,i){let a=e(n,i);return n.getStatus()===404&&(a=_x(r.path)),a.serverResponse=i.serverResponse,a}return t}function cO(r,e,t){const n=e.fullServerUrl(),i=kh(n,r.host,r._protocol),a="GET",l=r.maxOperationRetryTime,c=new Ug(i,a,uO(r,t),l);return c.errorHandler=gS(e),c}function hO(r,e){const t=e.fullServerUrl(),n=kh(t,r.host,r._protocol),i="DELETE",a=r.maxOperationRetryTime;function l(h,d){}const c=new Ug(n,i,l,a);return c.successCodes=[200,204],c.errorHandler=gS(e),c}function fO(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function dO(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=fO(null,e)),n}function pO(r,e,t,n,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let O="";for(let C=0;C<2;C++)O=O+Math.random().toString().slice(2);return O}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const d=dO(e,n,i),v=aO(d,t),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+h+"--",y=Ki.getBlob(g,n,m);if(y===null)throw Rx();const T={name:d.fullPath},S=kh(a,r.host,r._protocol),w="POST",E=r.maxUploadRetryTime,b=new Ug(S,w,lO(r,t),E);return b.urlParams=T,b.headers=l,b.body=y.uploadData(),b.errorHandler=mS(e),b}class mO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw il("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw il("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw il("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw il("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw il("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gO extends mO{initXhr(){this.xhr_.responseType="text"}}function Bg(){return new gO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){this._service=e,t instanceof qn?this._location=t:this._location=qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ks(e,t)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hS(this._location.path)}get storage(){return this._service}get parent(){const e=eO(this._location.path);if(e===null)return null;const t=new qn(this._location.bucket,e);return new Ks(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ox(e)}}function yO(r,e,t){r._throwIfRoot("uploadBytes");const n=pO(r.storage,r._location,fS(),new Ki(e,!0),t);return r.storage.makeRequestWithTokens(n,Bg).then(i=>({metadata:i,ref:r}))}function vO(r){r._throwIfRoot("getDownloadURL");const e=cO(r.storage,r._location,fS());return r.storage.makeRequestWithTokens(e,Bg).then(t=>{if(t===null)throw Px();return t})}function _O(r){r._throwIfRoot("deleteObject");const e=hO(r.storage,r._location);return r.storage.makeRequestWithTokens(e,Bg)}function wO(r,e){const t=tO(r._location.path,e),n=new qn(r._location.bucket,t);return new Ks(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(r){return/^[A-Za-z]+:\/\//.test(r)}function TO(r,e){return new Ks(r,e)}function yS(r,e){if(r instanceof qg){const t=r;if(t._bucket==null)throw kx();const n=new Ks(t,t._bucket);return e!=null?yS(n,e):n}else return e!==void 0?wO(r,e):r}function SO(r,e){if(e&&EO(e)){if(r instanceof qg)return TO(r,e);throw qm("To use ref(service, url), the first argument must be a Storage instance.")}else return yS(r,e)}function q0(r,e){const t=e==null?void 0:e[iS];return t==null?null:qn.makeFromBucketSpec(t,r)}function IO(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:y1(i,r.app.options.projectId))}class qg{constructor(e,t,n,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=rS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yx,this._maxUploadRetryTime=vx,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=q0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=q0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ks(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new Nx(sS());{const l=Hx(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const z0="@firebase/storage",H0="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="storage";function CO(r,e,t){return r=yt(r),yO(r,e,t)}function bO(r){return r=yt(r),vO(r)}function AO(r){return r=yt(r),_O(r)}function Ld(r,e){return r=yt(r),SO(r,e)}function kO(r=Ym(),e){r=yt(r);const n=ah(r,vS).getImmediate({identifier:e}),i=p1("storage");return i&&RO(n,...i),n}function RO(r,e,t,n={}){IO(r,e,t,n)}function PO(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new qg(t,n,i,e,Js)}function xO(){Hs(new rs(vS,PO,"PUBLIC").setMultipleInstances(!0)),Dr(z0,H0,""),Dr(z0,H0,"esm2017")}xO();function zg(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function _S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OO=_S,wS=new Ll("auth","Firebase",_S());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Qm("@firebase/auth");function NO(r,...e){Gc.logLevel<=rt.WARN&&Gc.warn(`Auth (${Js}): ${r}`,...e)}function bc(r,...e){Gc.logLevel<=rt.ERROR&&Gc.error(`Auth (${Js}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(r,...e){throw Hg(r,...e)}function Fr(r,...e){return Hg(r,...e)}function ES(r,e,t){const n=Object.assign(Object.assign({},OO()),{[e]:t});return new Ll("auth","Firebase",n).create(e,{appName:r.name})}function li(r){return ES(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hg(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return wS.create(r,...e)}function Ke(r,e,...t){if(!r)throw Hg(e,...t)}function si(r){const e="INTERNAL ASSERTION FAILED: "+r;throw bc(e),new Error(e)}function pi(r,e){r||si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function LO(){return $0()==="http:"||$0()==="https:"}function $0(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LO()||_b()||"connection"in navigator)?navigator.onLine:!0}function MO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=gb()||wb()}get(){return DO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(r,e){pi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VO=new Bl(3e4,6e4);function yi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function zr(r,e,t,n,i={}){return SS(r,i,async()=>{let a={},l={};n&&(e==="GET"?l=n:a={body:JSON.stringify(n)});const c=Dl(Object.assign({key:r.config.apiKey},l)).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:h},a);return vb()||(d.referrerPolicy="no-referrer"),TS.fetch()(await IS(r,r.config.apiHost,t,c),d)})}async function SS(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},jO),e);try{const i=new BO(r),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw vc(r,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw vc(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw vc(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw vc(r,"user-disabled",l);const v=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ES(r,v,d);Er(r,v)}}catch(i){if(i instanceof qr)throw i;Er(r,"network-request-failed",{message:String(i)})}}async function ql(r,e,t,n,i={}){const a=await zr(r,e,t,n,i);return"mfaPendingCredential"in a&&Er(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function IS(r,e,t,n){const i=`${e}${t}?${n}`,a=r,l=a.config.emulator?$g(r.config,i):`${r.config.apiScheme}://${i}`;return FO.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function UO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Fr(this.auth,"network-request-failed")),VO.get())})}}function vc(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Fr(r,e,n);return i.customData._tokenResponse=t,i}function W0(r){return r!==void 0&&r.enterprise!==void 0}class qO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zO(r,e){return zr(r,"GET","/v2/recaptchaConfig",yi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(r,e){return zr(r,"POST","/v1/accounts:delete",e)}async function Qc(r,e){return zr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $O(r,e=!1){const t=yt(r),n=await t.getIdToken(e),i=Wg(n);Ke(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:wl(Dd(i.auth_time)),issuedAtTime:wl(Dd(i.iat)),expirationTime:wl(Dd(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Dd(r){return Number(r)*1e3}function Wg(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const i=f1(t);return i?JSON.parse(i):(bc("Failed to decode base64 JWT payload"),null)}catch(i){return bc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function K0(r){const e=Wg(r);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof qr&&WO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function WO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(r){var e;const t=r.auth,n=await r.getIdToken(),i=await ia(r,Qc(t,{idToken:n}));Ke(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?CS(a.providerUserInfo):[],c=QO(r.providerData,l),h=r.isAnonymous,d=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),v=h?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Hm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(r,g)}async function GO(r){const e=yt(r);await Jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QO(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function CS(r){return r.map(e=>{var{providerId:t}=e,n=zg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(r,e){const t=await SS(r,{},async()=>{const n=Dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=r.config,l=await IS(r,i,"/v1/token",`key=${a}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",TS.fetch()(l,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YO(r,e){return zr(r,"POST","/v2/accounts:revokeToken",yi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=K0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:a}=await JO(e,t);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:a}=t,l=new Go;return n&&(Ke(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(Ke(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(r,e){Ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,a=zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ia(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $O(this,e)}reload(){return GO(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Jc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(li(this.auth));const e=await this.getIdToken();return await ia(this,HO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,a,l,c,h,d,v;const g=(n=t.displayName)!==null&&n!==void 0?n:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=t.photoURL)!==null&&l!==void 0?l:void 0,S=(c=t.tenantId)!==null&&c!==void 0?c:void 0,w=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,b=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:O,emailVerified:C,isAnonymous:F,providerData:U,stsTokenManager:P}=t;Ke(O&&P,e,"internal-error");const _=Go.fromJSON(this.name,P);Ke(typeof O=="string",e,"internal-error"),$i(g,e.name),$i(m,e.name),Ke(typeof C=="boolean",e,"internal-error"),Ke(typeof F=="boolean",e,"internal-error"),$i(y,e.name),$i(T,e.name),$i(S,e.name),$i(w,e.name),$i(E,e.name),$i(b,e.name);const A=new vr({uid:O,auth:e,email:m,emailVerified:C,displayName:g,isAnonymous:F,photoURL:T,phoneNumber:y,tenantId:S,stsTokenManager:_,createdAt:E,lastLoginAt:b});return U&&Array.isArray(U)&&(A.providerData=U.map(k=>Object.assign({},k))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new Go;i.updateFromServerResponse(t);const a=new vr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Jc(a),a}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Ke(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?CS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Go;c.updateFromIdToken(n);const h=new vr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;function oi(r){pi(r instanceof Function,"Expected a class definition");let e=G0.get(r);return e?(pi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,G0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bS.type="NONE";const Q0=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(r,e,t){return`firebase:${r}:${e}:${t}`}class Qo{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Ac(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ac("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qc(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Qo(oi(Q0),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||oi(Q0);const l=Ac(n,e.config.apiKey,e.name);let c=null;for(const d of t)try{const v=await d._get(l);if(v){let g;if(typeof v=="string"){const m=await Qc(e,{idToken:v}).catch(()=>{});if(!m)break;g=await vr._fromGetAccountInfoResponse(e,m,v)}else g=vr._fromJSON(e,v);d!==a&&(c=g),a=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Qo(a,e,n):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new Qo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OS(e))return"Blackberry";if(NS(e))return"Webos";if(kS(e))return"Safari";if((e.includes("chrome/")||RS(e))&&!e.includes("edge/"))return"Chrome";if(xS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function AS(r=hn()){return/firefox\//i.test(r)}function kS(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RS(r=hn()){return/crios\//i.test(r)}function PS(r=hn()){return/iemobile/i.test(r)}function xS(r=hn()){return/android/i.test(r)}function OS(r=hn()){return/blackberry/i.test(r)}function NS(r=hn()){return/webos/i.test(r)}function Kg(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function XO(r=hn()){var e;return Kg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZO(){return Eb()&&document.documentMode===10}function LS(r=hn()){return Kg(r)||xS(r)||NS(r)||OS(r)||/windows phone/i.test(r)||PS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r,e=[]){let t;switch(r){case"Browser":t=J0(hn());break;case"Worker":t=`${J0(hn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Js}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((l,c)=>{try{const h=e(a);l(h)}catch(h){c(h)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e={}){return zr(r,"GET","/v2/passwordPolicy",yi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=6;class rN{constructor(e){var t,n,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:nN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,a,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(n=h.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y0(this),this.idTokenSubscription=new Y0(this),this.beforeStateQueue=new eN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(async()=>{var n,i,a;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qc(this,{idToken:e}),n=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(li(this));const t=e?yt(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tN(this),t=new rN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await YO(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oi(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&NO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ds(r){return yt(r)}class Y0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rb(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sN(r){Rh=r}function MS(r){return Rh.loadJS(r)}function oN(){return Rh.recaptchaEnterpriseScript}function aN(){return Rh.gapiScript}function lN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class uN{constructor(){this.enterprise=new cN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class cN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hN="recaptcha-enterprise",jS="NO_RECAPTCHA";class fN{constructor(e){this.type=hN,this.auth=ds(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{zO(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new qO(h);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,l(d.siteKey)}}).catch(h=>{c(h)})})}function i(a,l,c){const h=window.grecaptcha;W0(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l(jS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uN().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{n(this.auth).then(c=>{if(!t&&W0(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=oN();h.length!==0&&(h+=c),MS(h).then(()=>{i(c,a,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function X0(r,e,t,n=!1,i=!1){const a=new fN(r);let l;if(i)l=jS;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Yc(r,e,t,n,i){var a;if(!((a=r._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await X0(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await X0(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(r,e){const t=ah(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(zs(a,e??{}))return i;Er(i,"already-initialized")}return t.initialize({options:e})}function pN(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(oi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function mN(r,e,t){const n=ds(r);Ke(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=FS(e),{host:l,port:c}=gN(e),h=c===null?"":`:${c}`,d={url:`${a}//${l}${h}/`},v=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Ke(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ke(zs(d,n.config.emulator)&&zs(v,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=v,n.settings.appVerificationDisabledForTesting=!0,yN()}function FS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function gN(r){const e=FS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:Z0(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:Z0(l)}}}function Z0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function yN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,t){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}async function vN(r,e){return zr(r,"POST","/v1/accounts:update",e)}async function _N(r,e){return zr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e){return ql(r,"POST","/v1/accounts:signInWithPassword",yi(r,e))}async function EN(r,e){return zr(r,"POST","/v1/accounts:sendOobCode",yi(r,e))}async function TN(r,e){return EN(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e){return ql(r,"POST","/v1/accounts:signInWithEmailLink",yi(r,e))}async function IN(r,e){return ql(r,"POST","/v1/accounts:signInWithEmailLink",yi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Gg{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Pl(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Pl(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yc(e,t,"signInWithPassword",wN);case"emailLink":return SN(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yc(e,n,"signUpPassword",_N);case"emailLink":return IN(e,{idToken:t,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r,e){return ql(r,"POST","/v1/accounts:signInWithIdp",yi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="http://localhost";class Gs extends Gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,a=zg(t,["providerId","signInMethod"]);if(!n||!i)return null;const l=new Gs(n,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:CN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Dl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AN(r){const e=al(ll(r)).link,t=e?al(ll(e)).deep_link_id:null,n=al(ll(r)).deep_link_id;return(n?al(ll(n)).link:null)||n||t||e||r}class Qg{constructor(e){var t,n,i,a,l,c;const h=al(ll(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,v=(n=h.oobCode)!==null&&n!==void 0?n:null,g=bN((i=h.mode)!==null&&i!==void 0?i:null);Ke(d&&v&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=v,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=h.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=AN(e);try{return new Qg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,t){return Pl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Qg.parseLink(t);return Ke(n,"argument-error"),Pl._fromEmailAndCode(e,n.code,n.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends VS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends zl{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gs._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Qi.credential(t,n)}catch{return null}}}Qi.GOOGLE_SIGN_IN_METHOD="google.com";Qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends zl{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends zl{constructor(){super("twitter.com")}static credential(e,t){return Gs._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Yi.credential(t,n)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(r,e){return ql(r,"POST","/v1/accounts:signUp",yi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const a=await vr._fromIdTokenResponse(e,n,i),l=ew(n);return new Qs({user:a,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ew(n);return new Qs({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ew(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends qr{constructor(e,t,n,i){var a;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Xc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Xc(e,t,n,i)}}function US(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Xc._fromErrorAndOperation(r,a,e,n):a})}async function RN(r,e,t=!1){const n=await ia(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Qs._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(r,e,t=!1){const{auth:n}=r;if(Un(n.app))return Promise.reject(li(n));const i="reauthenticate";try{const a=await ia(r,US(n,i,e,r),t);Ke(a.idToken,n,"internal-error");const l=Wg(a.idToken);Ke(l,n,"internal-error");const{sub:c}=l;return Ke(r.uid===c,n,"user-mismatch"),Qs._forOperation(r,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Er(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(r,e,t=!1){if(Un(r.app))return Promise.reject(li(r));const n="signIn",i=await US(r,n,e),a=await Qs._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(a.user),a}async function xN(r,e){return BS(ds(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(r){const e=ds(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ON(r,e,t){const n=ds(r);await Yc(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",TN)}async function NN(r,e,t){if(Un(r.app))return Promise.reject(li(r));const n=ds(r),l=await Yc(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kN).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&qS(r),h}),c=await Qs._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(c.user),c}function tw(r,e,t){return Un(r.app)?Promise.reject(li(r)):xN(yt(r),ca.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qS(r),n})}function LN(r,e){return DN(yt(r),null,e)}async function DN(r,e,t){const{auth:n}=r,a={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const l=await ia(r,vN(n,a));await r._updateTokensIfNecessary(l,!0)}function MN(r,e,t,n){return yt(r).onIdTokenChanged(e,t,n)}function jN(r,e,t){return yt(r).beforeAuthStateChanged(e,t)}function Md(r,e,t,n){return yt(r).onAuthStateChanged(e,t,n)}function nw(r){return yt(r).signOut()}async function FN(r){return yt(r).delete()}const Zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zc,"1"),this.storage.removeItem(Zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=1e3,UN=10;class HS extends zS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);ZO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,UN):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},VN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HS.type="LOCAL";const BN=HS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends zS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$S.type="SESSION";const WS=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Ph(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(l).map(async d=>d(t.origin,a)),h=await qN(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const d=Jg("",20);i.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(v),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function HN(r){Vr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function $N(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function KN(){return KS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firebaseLocalStorageDb",GN=1,eh="firebaseLocalStorage",QS="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xh(r,e){return r.transaction([eh],e?"readwrite":"readonly").objectStore(eh)}function QN(){const r=indexedDB.deleteDatabase(GS);return new Hl(r).toPromise()}function $m(){const r=indexedDB.open(GS,GN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(eh,{keyPath:QS})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(eh)?e(n):(n.close(),await QN(),e(await $m()))})})}async function rw(r,e,t){const n=xh(r,!0).put({[QS]:e,value:t});return new Hl(n).toPromise()}async function JN(r,e){const t=xh(r,!1).get(e),n=await new Hl(t).toPromise();return n===void 0?null:n.value}function iw(r,e){const t=xh(r,!0).delete(e);return new Hl(t).toPromise()}const YN=800,XN=3;class JS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>XN)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(KN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $N(),!this.activeServiceWorker)return;this.sender=new zN(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await rw(e,Zc,"1"),await iw(e,Zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rw(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>JN(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=xh(i,!1).getAll();return new Hl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JS.type="LOCAL";const ZN=JS;new Bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(r,e){return e?oi(e):(Ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends Gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tL(r){return BS(r.auth,new Yg(r),r.bypassAuthState)}function nL(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),PN(t,new Yg(r),r.bypassAuthState)}async function rL(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),RN(t,new Yg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tL;case"linkViaPopup":case"linkViaRedirect":return rL;case"reauthViaPopup":case"reauthViaRedirect":return nL;default:Er(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new Bl(2e3,1e4);class Wo extends YS{constructor(e,t,n,i,a){super(e,t,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Wo.currentPopupAction&&Wo.currentPopupAction.cancel(),Wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iL.get())};e()}}Wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="pendingRedirect",kc=new Map;class oL extends YS{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=kc.get(this.auth._key());if(!e){try{const n=await aL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}kc.set(this.auth._key(),e)}return this.bypassAuthState||kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aL(r,e){const t=cL(e),n=uL(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function lL(r,e){kc.set(r._key(),e)}function uL(r){return oi(r._redirectPersistence)}function cL(r){return Ac(sL,r.config.apiKey,r.name)}async function hL(r,e,t=!1){if(Un(r.app))return Promise.reject(li(r));const n=ds(r),i=eL(n,e),l=await new oL(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=10*60*1e3;class dL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!XS(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(sw(e))}saveEventToCache(e){this.cachedEventUids.add(sw(e)),this.lastProcessedEventTime=Date.now()}}function sw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function XS({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pL(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(r,e={}){return zr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(r){if(r.config.emulator)return;const{authorizedDomains:e}=await mL(r);for(const t of e)try{if(_L(t))return}catch{}Er(r,"unauthorized-domain")}function _L(r){const e=zm(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!yL.test(t))return!1;if(gL.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new Bl(3e4,6e4);function ow(){const r=Vr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function EL(r){return new Promise((e,t)=>{var n,i,a;function l(){ow(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ow(),t(Fr(r,"network-request-failed"))},timeout:wL.get()})}if(!((i=(n=Vr().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Vr().gapi)===null||a===void 0)&&a.load)l();else{const c=lN("iframefcb");return Vr()[c]=()=>{gapi.load?l():t(Fr(r,"network-request-failed"))},MS(`${aN()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Rc=null,e})}let Rc=null;function TL(r){return Rc=Rc||EL(r),Rc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=new Bl(5e3,15e3),IL="__/auth/iframe",CL="emulator/auth/iframe",bL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kL(r){const e=r.config;Ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?$g(e,CL):`https://${r.config.authDomain}/${IL}`,n={apiKey:e.apiKey,appName:r.name,v:Js},i=AL.get(r.config.apiHost);i&&(n.eid=i);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Dl(n).slice(1)}`}async function RL(r){const e=await TL(r),t=Vr().gapi;return Ke(t,r,"internal-error"),e.open({where:document.body,url:kL(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bL,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const l=Fr(r,"network-request-failed"),c=Vr().setTimeout(()=>{a(l)},SL.get());function h(){Vr().clearTimeout(c),i(n)}n.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xL=500,OL=600,NL="_blank",LL="http://localhost";class aw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DL(r,e,t,n=xL,i=OL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const h=Object.assign(Object.assign({},PL),{width:n.toString(),height:i.toString(),top:a,left:l}),d=hn().toLowerCase();t&&(c=RS(d)?NL:t),AS(d)&&(e=e||LL,h.scrollbars="yes");const v=Object.entries(h).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(XO(d)&&c!=="_self")return ML(e||"",c),new aw(null);const g=window.open(e||"",c,v);Ke(g,r,"popup-blocked");try{g.focus()}catch{}return new aw(g)}function ML(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="__/auth/handler",FL="emulator/auth/handler",VL=encodeURIComponent("fac");async function lw(r,e,t,n,i,a){Ke(r.config.authDomain,r,"auth-domain-config-required"),Ke(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Js,eventId:i};if(e instanceof VS){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",kb(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,g]of Object.entries({}))l[v]=g}if(e instanceof zl){const v=e.getScopes().filter(g=>g!=="");v.length>0&&(l.scopes=v.join(","))}r.tenantId&&(l.tid=r.tenantId);const c=l;for(const v of Object.keys(c))c[v]===void 0&&delete c[v];const h=await r._getAppCheckToken(),d=h?`#${VL}=${encodeURIComponent(h)}`:"";return`${UL(r)}?${Dl(c).slice(1)}${d}`}function UL({config:r}){return r.emulator?$g(r,FL):`https://${r.authDomain}/${jL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="webStorageSupport";class BL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WS,this._completeRedirectFn=hL,this._overrideRedirectResult=lL}async _openPopup(e,t,n,i){var a;pi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await lw(e,t,n,zm(),i);return DL(e,l,Jg())}async _openRedirect(e,t,n,i){await this._originValidation(e);const a=await lw(e,t,n,zm(),i);return HN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(pi(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await RL(e),n=new dL(e);return t.register("authEvent",i=>(Ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jd,{type:jd},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[jd];l!==void 0&&t(!!l),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LS()||kS()||Kg()}}const qL=BL;var uw="@firebase/auth",cw="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $L(r){Hs(new rs("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=n.options;Ke(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DS(r)},d=new iN(n,i,a,h);return pN(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Hs(new rs("auth-internal",e=>{const t=ds(e.getProvider("auth").getImmediate());return(n=>new zL(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(uw,cw,HL(r)),Dr(uw,cw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=5*60,KL=g1("authIdTokenMaxAge")||WL;let hw=null;const GL=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>KL)return;const i=t==null?void 0:t.token;hw!==i&&(hw=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Pc(r=Ym()){const e=ah(r,"auth");if(e.isInitialized())return e.getImmediate();const t=dN(r,{popupRedirectResolver:qL,persistence:[ZN,BN,WS]}),n=g1("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=GL(a.toString());jN(t,l,()=>l(t.currentUser)),MN(t,c=>l(c))}}const i=d1("auth");return i&&mN(t,`http://${i}`),t}function QL(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}sN({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const a=Fr("internal-error");a.customData=i,t(a)},n.type="text/javascript",n.charset="UTF-8",QL().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$L("Browser");const JL={apiKey:"AIzaSyC1ejMnWWe98bFa29RwIiBBB7UndNdJ1cA",authDomain:"salescaptureai.firebaseapp.com",projectId:"salescaptureai",storageBucket:"salescaptureai.firebasestorage.app",messagingSenderId:"392166418592",appId:"1:392166418592:web:7807d9aafec37b8c0581c5",measurementId:"G-BTPP6403LT"},ZS=w1(JL),YL=kO(),XL=zP(ZS),ZL=Pc(ZS);class e2{constructor(){he(this,"doNotInclude",["render","forceUpdate","setState"])}bind(e){var n;let t=Object.getPrototypeOf(e);for(;t&&t!==Object.prototype;){const i=Object.getOwnPropertyNames(t).filter(a=>typeof t[a]=="function"&&a!=="constructor");for(let a of i)this.doNotInclude.includes(a)||(e[a]=(n=e[a])==null?void 0:n.bind(e));t=Object.getPrototypeOf(t)}}setDoNotIncludeList(e){this.doNotInclude=e}leaveOut(e){this.doNotInclude.push(e)}include(e){this.doNotInclude=this.doNotInclude.filter(t=>t!==e)}}let wn=new e2;class ui{constructor(){he(this,"list",[]);wn.bind(this)}setList(e){e=e.filter(t=>t!==void 0),this.list=e}getList(){return this.list}subscribe(e){e&&this.list.push(e)}unsubscribe(e){this.list=this.list.filter(t=>t!==e)}run(...e){for(let t of this.list)t&&t(...e)}}var sl={},fw;function t2(){if(fw)return sl;fw=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.parse=l,sl.serialize=d;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function l(m,y){const T=new a,S=m.length;if(S<2)return T;const w=(y==null?void 0:y.decode)||v;let E=0;do{const b=m.indexOf("=",E);if(b===-1)break;const O=m.indexOf(";",E),C=O===-1?S:O;if(b>C){E=m.lastIndexOf(";",b-1)+1;continue}const F=c(m,E,b),U=h(m,b,F),P=m.slice(F,U);if(T[P]===void 0){let _=c(m,b+1,C),A=h(m,C,_);const k=w(m.slice(_,A));T[P]=k}E=C+1}while(E<S);return T}function c(m,y,T){do{const S=m.charCodeAt(y);if(S!==32&&S!==9)return y}while(++y<T);return T}function h(m,y,T){for(;y>T;){const S=m.charCodeAt(--y);if(S!==32&&S!==9)return y+1}return T}function d(m,y,T){const S=(T==null?void 0:T.encode)||encodeURIComponent;if(!r.test(m))throw new TypeError(`argument name is invalid: ${m}`);const w=S(y);if(!e.test(w))throw new TypeError(`argument val is invalid: ${y}`);let E=m+"="+w;if(!T)return E;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);E+="; Max-Age="+T.maxAge}if(T.domain){if(!t.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);E+="; Domain="+T.domain}if(T.path){if(!n.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);E+="; Path="+T.path}if(T.expires){if(!g(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);E+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(E+="; HttpOnly"),T.secure&&(E+="; Secure"),T.partitioned&&(E+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return E}function v(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function g(m){return i.call(m)==="[object Date]"}return sl}t2();var dw="popstate";function n2(r={}){function e(n,i){let{pathname:a,search:l,hash:c}=n.location;return Wm("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:xl(i)}return i2(e,t,null,r)}function bt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Br(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r2(){return Math.random().toString(36).substring(2,10)}function pw(r,e){return{usr:r.state,key:r.key,idx:e}}function Wm(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ha(e):e,state:t,key:e&&e.key||n||r2()}}function xl({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ha(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function i2(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,c="POP",h=null,d=v();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function v(){return(l.state||{idx:null}).idx}function g(){c="POP";let w=v(),E=w==null?null:w-d;d=w,h&&h({action:c,location:S.location,delta:E})}function m(w,E){c="PUSH";let b=Wm(S.location,w,E);d=v()+1;let O=pw(b,d),C=S.createHref(b);try{l.pushState(O,"",C)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(C)}a&&h&&h({action:c,location:S.location,delta:1})}function y(w,E){c="REPLACE";let b=Wm(S.location,w,E);d=v();let O=pw(b,d),C=S.createHref(b);l.replaceState(O,"",C),a&&h&&h({action:c,location:S.location,delta:0})}function T(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:xl(w);return b=b.replace(/ $/,"%20"),bt(E,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,E)}let S={get action(){return c},get location(){return r(i,l)},listen(w){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(dw,g),h=w,()=>{i.removeEventListener(dw,g),h=null}},createHref(w){return e(i,w)},createURL:T,encodeLocation(w){let E=T(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:y,go(w){return l.go(w)}};return S}function eI(r,e,t="/"){return s2(r,e,t,!1)}function s2(r,e,t,n){let i=typeof e=="string"?ha(e):e,a=mi(i.pathname||"/",t);if(a==null)return null;let l=tI(r);o2(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let d=y2(a);c=m2(l[h],d,n)}return c}function tI(r,e=[],t=[],n=""){let i=(a,l,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(bt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let d=ci([n,h.relativePath]),v=t.concat(h);a.children&&a.children.length>0&&(bt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),tI(a.children,e,v,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:d2(d,a.index),routesMeta:v})};return r.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let h of nI(a.path))i(a,l,h)}),e}function nI(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let l=nI(n.join("/")),c=[];return c.push(...l.map(h=>h===""?a:[a,h].join("/"))),i&&c.push(...l),c.map(h=>r.startsWith("/")&&h===""?"/":h)}function o2(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:p2(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var a2=/^:[\w-]+$/,l2=3,u2=2,c2=1,h2=10,f2=-2,mw=r=>r==="*";function d2(r,e){let t=r.split("/"),n=t.length;return t.some(mw)&&(n+=f2),e&&(n+=u2),t.filter(i=>!mw(i)).reduce((i,a)=>i+(a2.test(a)?l2:a===""?c2:h2),n)}function p2(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function m2(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",l=[];for(let c=0;c<n.length;++c){let h=n[c],d=c===n.length-1,v=a==="/"?e:e.slice(a.length)||"/",g=th({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},v),m=h.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=th({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},v)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:ci([a,g.pathname]),pathnameBase:E2(ci([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=ci([a,g.pathnameBase]))}return l}function th(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=g2(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,{paramName:v,isOptional:g},m)=>{if(v==="*"){let T=c[m]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const y=c[m];return g&&!y?d[v]=void 0:d[v]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:r}}function g2(r,e=!1,t=!0){Br(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function y2(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function mi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function v2(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?ha(r):r;return{pathname:t?t.startsWith("/")?t:_2(t,e):e,search:T2(n),hash:S2(i)}}function _2(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Fd(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w2(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rI(r){let e=w2(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function iI(r,e,t,n=!1){let i;typeof r=="string"?i=ha(r):(i={...r},bt(!i.pathname||!i.pathname.includes("?"),Fd("?","pathname","search",i)),bt(!i.pathname||!i.pathname.includes("#"),Fd("#","pathname","hash",i)),bt(!i.search||!i.search.includes("#"),Fd("#","search","hash",i)));let a=r===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!n&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let h=v2(i,c),d=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||v)&&(h.pathname+="/"),h}var ci=r=>r.join("/").replace(/\/\/+/g,"/"),E2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),T2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,S2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function I2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var sI=["POST","PUT","PATCH","DELETE"];new Set(sI);var C2=["GET",...sI];new Set(C2);var fa=ge.createContext(null);fa.displayName="DataRouter";var Oh=ge.createContext(null);Oh.displayName="DataRouterState";var oI=ge.createContext({isTransitioning:!1});oI.displayName="ViewTransition";var b2=ge.createContext(new Map);b2.displayName="Fetchers";var A2=ge.createContext(null);A2.displayName="Await";var Hr=ge.createContext(null);Hr.displayName="Navigation";var $l=ge.createContext(null);$l.displayName="Location";var vi=ge.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var Xg=ge.createContext(null);Xg.displayName="RouteError";function k2(r,{relative:e}={}){bt(Wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ge.useContext(Hr),{hash:i,pathname:a,search:l}=Kl(r,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:ci([t,a])),n.createHref({pathname:c,search:l,hash:i})}function Wl(){return ge.useContext($l)!=null}function Zs(){return bt(Wl(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext($l).location}var aI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lI(r){ge.useContext(Hr).static||ge.useLayoutEffect(r)}function R2(){let{isDataRoute:r}=ge.useContext(vi);return r?q2():P2()}function P2(){bt(Wl(),"useNavigate() may be used only in the context of a <Router> component.");let r=ge.useContext(fa),{basename:e,navigator:t}=ge.useContext(Hr),{matches:n}=ge.useContext(vi),{pathname:i}=Zs(),a=JSON.stringify(rI(n)),l=ge.useRef(!1);return lI(()=>{l.current=!0}),ge.useCallback((h,d={})=>{if(Br(l.current,aI),!l.current)return;if(typeof h=="number"){t.go(h);return}let v=iI(h,JSON.parse(a),i,d.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ci([e,v.pathname])),(d.replace?t.replace:t.push)(v,d.state,d)},[e,t,a,i,r])}ge.createContext(null);function Kl(r,{relative:e}={}){let{matches:t}=ge.useContext(vi),{pathname:n}=Zs(),i=JSON.stringify(rI(t));return ge.useMemo(()=>iI(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function x2(r,e){return uI(r,e)}function uI(r,e,t,n){var b;bt(Wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=ge.useContext(Hr),{matches:l}=ge.useContext(vi),c=l[l.length-1],h=c?c.params:{},d=c?c.pathname:"/",v=c?c.pathnameBase:"/",g=c&&c.route;{let O=g&&g.path||"";cI(d,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let m=Zs(),y;if(e){let O=typeof e=="string"?ha(e):e;bt(v==="/"||((b=O.pathname)==null?void 0:b.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${O.pathname}" was given in the \`location\` prop.`),y=O}else y=m;let T=y.pathname||"/",S=T;if(v!=="/"){let O=v.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(O.length).join("/")}let w=!a&&t&&t.matches&&t.matches.length>0?t.matches:eI(r,{pathname:S});Br(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Br(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=M2(w&&w.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:ci([v,i.encodeLocation?i.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?v:ci([v,i.encodeLocation?i.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,t,n);return e&&E?ge.createElement($l.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function O2(){let r=B2(),e=I2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=ge.createElement(ge.Fragment,null,ge.createElement("p",null,"💿 Hey developer 👋"),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:a},"ErrorBoundary")," or"," ",ge.createElement("code",{style:a},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:i},t):null,l)}var N2=ge.createElement(O2,null),L2=class extends ge.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?ge.createElement(vi.Provider,{value:this.props.routeContext},ge.createElement(Xg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function D2({routeContext:r,match:e,children:t}){let n=ge.useContext(fa);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(vi.Provider,{value:r},t)}function M2(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,a=t==null?void 0:t.errors;if(a!=null){let h=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);bt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:v,errors:g}=t,m=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((h,d,v)=>{let g,m=!1,y=null,T=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||N2,l&&(c<0&&v===0?(cI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,T=null):c===v&&(m=!0,T=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,v+1)),w=()=>{let E;return g?E=y:m?E=T:d.route.Component?E=ge.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,ge.createElement(D2,{match:d,routeContext:{outlet:h,matches:S,isDataRoute:t!=null},children:E})};return t&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?ge.createElement(L2,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}function Zg(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j2(r){let e=ge.useContext(fa);return bt(e,Zg(r)),e}function F2(r){let e=ge.useContext(Oh);return bt(e,Zg(r)),e}function V2(r){let e=ge.useContext(vi);return bt(e,Zg(r)),e}function ey(r){let e=V2(r),t=e.matches[e.matches.length-1];return bt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function U2(){return ey("useRouteId")}function B2(){var n;let r=ge.useContext(Xg),e=F2("useRouteError"),t=ey("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function q2(){let{router:r}=j2("useNavigate"),e=ey("useNavigate"),t=ge.useRef(!1);return lI(()=>{t.current=!0}),ge.useCallback(async(i,a={})=>{Br(t.current,aI),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var gw={};function cI(r,e,t){!e&&!gw[r]&&(gw[r]=!0,Br(!1,t))}ge.memo(z2);function z2({routes:r,future:e,state:t}){return uI(r,void 0,t,e)}function $o(r){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function H2({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){bt(!Wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=ge.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof t=="string"&&(t=ha(t));let{pathname:h="/",search:d="",hash:v="",state:g=null,key:m="default"}=t,y=ge.useMemo(()=>{let T=mi(h,l);return T==null?null:{location:{pathname:T,search:d,hash:v,state:g,key:m},navigationType:n}},[l,h,d,v,g,m,n]);return Br(y!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:ge.createElement(Hr.Provider,{value:c},ge.createElement($l.Provider,{children:e,value:y}))}function yw({children:r,location:e}){return x2(Km(r),e)}function Km(r,e=[]){let t=[];return ge.Children.forEach(r,(n,i)=>{if(!ge.isValidElement(n))return;let a=[...e,i];if(n.type===ge.Fragment){t.push.apply(t,Km(n.props.children,a));return}bt(n.type===$o,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Km(n.props.children,a)),t.push(l)}),t}var xc="get",Oc="application/x-www-form-urlencoded";function Nh(r){return r!=null&&typeof r.tagName=="string"}function $2(r){return Nh(r)&&r.tagName.toLowerCase()==="button"}function W2(r){return Nh(r)&&r.tagName.toLowerCase()==="form"}function K2(r){return Nh(r)&&r.tagName.toLowerCase()==="input"}function G2(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Q2(r,e){return r.button===0&&(!e||e==="_self")&&!G2(r)}var _c=null;function J2(){if(_c===null)try{new FormData(document.createElement("form"),0),_c=!1}catch{_c=!0}return _c}var Y2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vd(r){return r!=null&&!Y2.has(r)?(Br(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oc}"`),null):r}function X2(r,e){let t,n,i,a,l;if(W2(r)){let c=r.getAttribute("action");n=c?mi(c,e):null,t=r.getAttribute("method")||xc,i=Vd(r.getAttribute("enctype"))||Oc,a=new FormData(r)}else if($2(r)||K2(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||c.getAttribute("action");if(n=h?mi(h,e):null,t=r.getAttribute("formmethod")||c.getAttribute("method")||xc,i=Vd(r.getAttribute("formenctype"))||Vd(c.getAttribute("enctype"))||Oc,a=new FormData(c,r),!J2()){let{name:d,type:v,value:g}=r;if(v==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,g)}}else{if(Nh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xc,n=null,i=Oc,l=r}return a&&i==="text/plain"&&(l=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:l}}function ty(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function Z2(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eD(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function tD(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await Z2(a,t);return l.links?l.links():[]}return[]}));return sD(n.flat(1).filter(eD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function vw(r,e,t,n,i,a){let l=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,c=(h,d)=>{var v;return t[d].pathname!==h.pathname||((v=t[d].route.path)==null?void 0:v.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,d)=>l(h,d)||c(h,d)):a==="data"?e.filter((h,d)=>{var g;let v=n.routes[h.route.id];if(!v||!v.hasLoader)return!1;if(l(h,d)||c(h,d))return!0;if(h.route.shouldRevalidate){let m=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function nD(r,e,{includeHydrateFallback:t}={}){return rD(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function rD(r){return[...new Set(r)]}function iD(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function sD(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(iD(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}var oD=new Set([100,101,204,205]);function aD(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&mi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hI(){let r=ge.useContext(fa);return ty(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function lD(){let r=ge.useContext(Oh);return ty(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var ny=ge.createContext(void 0);ny.displayName="FrameworkContext";function fI(){let r=ge.useContext(ny);return ty(r,"You must render this element inside a <HydratedRouter> element"),r}function uD(r,e){let t=ge.useContext(ny),[n,i]=ge.useState(!1),[a,l]=ge.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:d,onMouseLeave:v,onTouchStart:g}=e,m=ge.useRef(null);ge.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let S=E=>{E.forEach(b=>{l(b.isIntersecting)})},w=new IntersectionObserver(S,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[r]),ge.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let y=()=>{i(!0)},T=()=>{i(!1),l(!1)};return t?r!=="intent"?[a,m,{}]:[a,m,{onFocus:ol(c,y),onBlur:ol(h,T),onMouseEnter:ol(d,y),onMouseLeave:ol(v,T),onTouchStart:ol(g,y)}]:[!1,m,{}]}function ol(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function cD({page:r,...e}){let{router:t}=hI(),n=ge.useMemo(()=>eI(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?ge.createElement(fD,{page:r,matches:n,...e}):null}function hD(r){let{manifest:e,routeModules:t}=fI(),[n,i]=ge.useState([]);return ge.useEffect(()=>{let a=!1;return tD(r,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[r,e,t]),n}function fD({page:r,matches:e,...t}){let n=Zs(),{manifest:i,routeModules:a}=fI(),{basename:l}=hI(),{loaderData:c,matches:h}=lD(),d=ge.useMemo(()=>vw(r,e,h,i,n,"data"),[r,e,h,i,n]),v=ge.useMemo(()=>vw(r,e,h,i,n,"assets"),[r,e,h,i,n]),g=ge.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let T=new Set,S=!1;if(e.forEach(E=>{var O;let b=i.routes[E.route.id];!b||!b.hasLoader||(!d.some(C=>C.route.id===E.route.id)&&E.route.id in c&&((O=a[E.route.id])!=null&&O.shouldRevalidate)||b.hasClientLoader?S=!0:T.add(E.route.id))}),T.size===0)return[];let w=aD(r,l);return S&&T.size>0&&w.searchParams.set("_routes",e.filter(E=>T.has(E.route.id)).map(E=>E.route.id).join(",")),[w.pathname+w.search]},[l,c,n,i,d,e,r,a]),m=ge.useMemo(()=>nD(v,i),[v,i]),y=hD(v);return ge.createElement(ge.Fragment,null,g.map(T=>ge.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),m.map(T=>ge.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),y.map(({key:T,link:S})=>ge.createElement("link",{key:T,...S})))}function dD(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var dI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dI&&(window.__reactRouterVersion="7.5.3")}catch{}function pD({basename:r,children:e,window:t}){let n=ge.useRef();n.current==null&&(n.current=n2({window:t,v5Compat:!0}));let i=n.current,[a,l]=ge.useState({action:i.action,location:i.location}),c=ge.useCallback(h=>{ge.startTransition(()=>l(h))},[l]);return ge.useLayoutEffect(()=>i.listen(c),[i,c]),ge.createElement(H2,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var pI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yn=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:l,state:c,target:h,to:d,preventScrollReset:v,viewTransition:g,...m},y){let{basename:T}=ge.useContext(Hr),S=typeof d=="string"&&pI.test(d),w,E=!1;if(typeof d=="string"&&S&&(w=d,dI))try{let A=new URL(window.location.href),k=d.startsWith("//")?new URL(A.protocol+d):new URL(d),R=mi(k.pathname,T);k.origin===A.origin&&R!=null?d=R+k.search+k.hash:E=!0}catch{Br(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=k2(d,{relative:i}),[O,C,F]=uD(n,m),U=vD(d,{replace:l,state:c,target:h,preventScrollReset:v,relative:i,viewTransition:g});function P(A){e&&e(A),A.defaultPrevented||U(A)}let _=ge.createElement("a",{...m,...F,href:w||b,onClick:E||a?e:P,ref:dD(y,C),target:h,"data-discover":!S&&t==="render"?"true":void 0});return O&&!S?ge.createElement(ge.Fragment,null,_,ge.createElement(cD,{page:b})):_});yn.displayName="Link";var mD=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:l,viewTransition:c,children:h,...d},v){let g=Kl(l,{relative:d.relative}),m=Zs(),y=ge.useContext(Oh),{navigator:T,basename:S}=ge.useContext(Hr),w=y!=null&&SD(g)&&c===!0,E=T.encodeLocation?T.encodeLocation(g).pathname:g.pathname,b=m.pathname,O=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(b=b.toLowerCase(),O=O?O.toLowerCase():null,E=E.toLowerCase()),O&&S&&(O=mi(O,S)||O);const C=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let F=b===E||!i&&b.startsWith(E)&&b.charAt(C)==="/",U=O!=null&&(O===E||!i&&O.startsWith(E)&&O.charAt(E.length)==="/"),P={isActive:F,isPending:U,isTransitioning:w},_=F?e:void 0,A;typeof n=="function"?A=n(P):A=[n,F?"active":null,U?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(P):a;return ge.createElement(yn,{...d,"aria-current":_,className:A,ref:v,style:k,to:l,viewTransition:c},typeof h=="function"?h(P):h)});mD.displayName="NavLink";var gD=ge.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:l=xc,action:c,onSubmit:h,relative:d,preventScrollReset:v,viewTransition:g,...m},y)=>{let T=ED(),S=TD(c,{relative:d}),w=l.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&pI.test(c),b=O=>{if(h&&h(O),O.defaultPrevented)return;O.preventDefault();let C=O.nativeEvent.submitter,F=(C==null?void 0:C.getAttribute("formmethod"))||l;T(C||O.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:a,relative:d,preventScrollReset:v,viewTransition:g})};return ge.createElement("form",{ref:y,method:w,action:S,onSubmit:n?h:b,...m,"data-discover":!E&&r==="render"?"true":void 0})});gD.displayName="Form";function yD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mI(r){let e=ge.useContext(fa);return bt(e,yD(r)),e}function vD(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:l}={}){let c=R2(),h=Zs(),d=Kl(r,{relative:a});return ge.useCallback(v=>{if(Q2(v,e)){v.preventDefault();let g=t!==void 0?t:xl(h)===xl(d);c(r,{replace:g,state:n,preventScrollReset:i,relative:a,viewTransition:l})}},[h,c,d,t,n,e,r,i,a,l])}var _D=0,wD=()=>`__${String(++_D)}__`;function ED(){let{router:r}=mI("useSubmit"),{basename:e}=ge.useContext(Hr),t=U2();return ge.useCallback(async(n,i={})=>{let{action:a,method:l,encType:c,formData:h,body:d}=X2(n,e);if(i.navigate===!1){let v=i.fetcherKey||wD();await r.fetch(v,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function TD(r,{relative:e}={}){let{basename:t}=ge.useContext(Hr),n=ge.useContext(vi);bt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Kl(r||".",{relative:e})},l=Zs();if(r==null){a.search=l.search;let c=new URLSearchParams(a.search),h=c.getAll("index");if(h.some(v=>v==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let v=c.toString();a.search=v?`?${v}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ci([t,a.pathname])),xl(a)}function SD(r,e={}){let t=ge.useContext(oI);bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=mI("useViewTransitionState"),i=Kl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=mi(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=mi(t.nextLocation.pathname,n)||t.nextLocation.pathname;return th(i.pathname,l)!=null||th(i.pathname,a)!=null}new TextEncoder;[...oD];class ID{constructor(e){wn.bind(this),this.props={...e},this.content=e.content||"",this.type="div"}setHtmlType(e){this.type=e}getHtmlType(){return this.type}setProp(e,t){this.props[e]=t}setProps(e){this.props={...e},e.content&&(this.content=e.content)}updateProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}addProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}getProps(){return this.props}getProp(e){return this.props[e]}setStyle(e){this.props.style=e}updateStyle(e){this.props.style={...this.props.style,...e}}getStyle(){return this.props.style}setClass(e){this.props.className=e}getClass(){return this.props.className}setOnChange(e){this.props.onChange=e}setOnClick(e){this.props.onClick=e}getOnClick(){return this.props.onClick}setContent(e){this.content=e}getContent(){return this.content}getHtml(e){let{content:t,props:n}=e,i=e==null?void 0:e.type;t&&(this.content=t),n={...this.props,...n};const a={a:M.jsx("a",{...n,children:this.content}),button:M.jsx("button",{...n,children:this.content}),div:M.jsx("div",{...n,children:this.content}),h1:M.jsx("h1",{...n,children:this.content}),h2:M.jsx("h2",{...n,children:this.content}),h3:M.jsx("h3",{...n,children:this.content}),h4:M.jsx("h4",{...n,children:this.content}),h5:M.jsx("h5",{...n,children:this.content}),h6:M.jsx("h6",{...n,children:this.content}),img:M.jsx("img",{...n}),input:M.jsx("input",{...n}),p:M.jsx("p",{...n,children:this.content}),span:M.jsx("span",{...n,children:this.content}),table:M.jsx("table",{...n,children:this.content}),tr:M.jsx("tr",{...n,children:this.content}),td:M.jsx("td",{...n,children:this.content}),th:M.jsx("th",{...n,children:this.content}),ul:M.jsx("ul",{...n,children:this.content}),li:M.jsx("li",{...n,children:this.content}),ol:M.jsx("ol",{...n,children:this.content}),form:M.jsx("form",{...n,children:this.content}),textarea:M.jsx("textarea",{...n,children:this.content}),select:M.jsx("select",{...n,children:this.content}),option:M.jsx("option",{...n,children:this.content}),label:M.jsx("label",{...n,children:this.content}),nav:M.jsx("nav",{...n,children:this.content}),footer:M.jsx("footer",{...n,children:this.content}),header:M.jsx("header",{...n,children:this.content}),article:M.jsx("article",{...n,children:this.content}),section:M.jsx("section",{...n,children:this.content}),aside:M.jsx("aside",{...n,children:this.content}),main:M.jsx("main",{...n,children:this.content}),video:M.jsx("video",{...n,children:this.content}),audio:M.jsx("audio",{...n,children:this.content}),iframe:M.jsx("iframe",{...n,children:this.content}),canvas:M.jsx("canvas",{...n,children:this.content}),content:M.jsx(M.Fragment,{}),fragment:M.jsx(M.Fragment,{children:this.content}),link:M.jsx(yn,{...n,children:this.content})};if(i==="content"||this.type==="conent"){let c=this.content;a.content=M.jsx(c,{...n})}return i?a[i]:a[this.type]}}class CD extends ui{constructor(){super(...arguments);he(this,"component");he(this,"setAttribute")}setObserverFunction(t){this.setAttribute=t}setComponent(t){this.component=t}getComponent(){return this.component}run(){for(let t of this.list)this.setAttribute(t.name,new ID(t))}}class da{constructor(){he(this,"factory");he(this,"componentList");he(this,"themeFactory");he(this,"appComponent");he(this,"mainFunc");he(this,"appObserver",new ui);wn.bind(this),this.getFactory(),this.getThemeFactory()}subscribeToAppObserver(e){this.appObserver.subscribe(e)}getMainFunc(){return this.mainFunc}getFactory(){}getThemeFactory(){}getAppComponent(){return this.appComponent}setAppComponent(e){this.appComponent=e,this.appObserver.run(e)}getComponentList(){var e,t;return this.componentList||(this.componentList=(t=(e=this.appComponent)==null?void 0:e.state)==null?void 0:t.componentList),this.componentList}}class bD extends da{constructor(){super(...arguments);he(this,"type","appInterface")}}const gI=new bD;class lt extends ge.Component{constructor(t){super(t);he(this,"resize");wn.bind(this),this.initialBuilderSetupFunctions=[],this.setInterface(),this.setInitialApp(),this.initialPropsSetupFunctions=[this.setInterface,this.setAppOnInterace,this.setInitialApp,this.setObj,this.setThemeFactory,this.setTheme,this.createReactRefsForComponents],this.setupObserver=new ui,this.builderObserver=new CD,this.ObserverForSetupFunction=new ui,this.builderObserver.setComponent(this),this.builderObserver.setObserverFunction(this.setHtmlBuilderSingleton),this.initialSetupFunctions=[this.builderObserver.run,this.additionalSetup],this.components=[]}setInitialApp(){var n,i,a,l,c,h;this.interface||(this.app=(n=this.props)==null?void 0:n.app);let t=this.interface.getAppComponent();t&&(this.app=t),this.app&&(this.propsState=(i=this.app)==null?void 0:i.state,this.dispatch=(a=this.app)==null?void 0:a.dispatch,this.componentList=(l=this.propsState)==null?void 0:l.componentList,this.APIService=(c=this.componentList)==null?void 0:c.getAPIService(),this.operationsFactory=(h=this.componentList)==null?void 0:h.getOperationsFactory())}setInterface(t){var n;this.interface=t||((n=this.props)==null?void 0:n.interface)||this.interface||gI,this.interface.type==="appInterface"&&this.subscribeToAppObserverBool===void 0&&(this.subscribeToAppObserverBool=!0,this.interface.subscribeToAppObserver(this.setInitialApp))}setAppOnInterace(){this.interface&&(this.props.app&&this.interface.setAppComponent(this.props.app),this.app=this.interface.getAppComponent())}setComponents(t){this.components=t}getComponents(){return this.components}createReactRefsForComponents(){for(let t of this.components)this[t+"Ref"]||(this[t+"Ref"]=sh.createRef())}createPropObj(t,n){n=n||this.state.propType;let i,a=this[n||"props"][t+"Class"];return a||(a=this.theme&&typeof this.theme!="string"?this.theme[this.state[t+"Class"]]:this["default"+t+"Class"]||""),i={name:t,ref:this[t+"Ref"],style:this[t+"Click"]?{...this[n||"props"][t+"Style"],cursor:"pointer"}:this[n||"props"][t+"Style"],className:a,content:this[n||"props"][t],onClick:this[n||"props"][t+"Click"]||this[t+"Click"],obj:this.obj},i.onClick&&(i.onClick=i.onClick.bind(this,this.obj)),i}builderPropsSubscribe(t){this[t+"Props"]=this.createPropObj(t),this.builderObserver.subscribe(this[t+"Props"])}setInitialBuilderPropFunctions(){for(let t of this.components)this["set"+t+"props"]||(this["set"+t+"props"]=this.builderPropsSubscribe(t)),this.initialBuilderSetupFunctions.push(this["set"+t+"props"]);return this.initialBuilderSetupFunctions}loadObserver(){this.setupObserver.setList(this.initialSetupFunctions)}setInitialSetupFunctions(){const t=[...this.initialPropsSetupFunctions,...this.initialBuilderSetupFunctions,...this.initialSetupFunctions,this.additionalPostSetup],n=[...new Set(t)];return this.initialSetupFunctions=n,this.initialSetupFunctions}runInitialPropsSetup(){for(let t of this.initialPropsSetupFunctions)t&&t()}isArray(t){return Array.isArray(t)?t:[t]}setObj(){this.obj=this.props.obj}setThemeFactory(){this.interface!==void 0&&(this.themeFactory=this.interface.getThemeFactory())}setTheme(){var t,n;this.themeFactory&&(this.theme=this.themeFactory.getComponent(((t=this.props)==null?void 0:t.theme)||((n=this.state)==null?void 0:n.defaultTheme)||"default"))}clearLists(){this.setupObserver.setList([]),this.builderObserver.setList([])}setupItem(...t){this.clearLists(),this.preSetup(),this.runInitialPropsSetup(),this.setInitialBuilderPropFunctions(),this.setInitialSetupFunctions(),this.loadObserver(),this.setupObserver.run(...t)}preSetup(){}setAttribute(t,n){this[t]=n}setHtmlBuilderSingleton(t,n){this[t]||(this[t]=n)}getInnerContent(){return this.innerContent}getAdditionalInnerContent(){return this.innerContent}mapList(t){return M.jsx(M.Fragment,{children:t.filter(n=>n!==void 0&&n!==!1).map(n=>n)})}additionalSetup(){}additionalPostSetup(){}mapInnerContent(){return this.getInnerContent(),this.getAdditionalInnerContent(),this.innerContent=this.mapList(this.innerContent),this.innerContent}getHtml(){return this.html}getFactoryTypeString(t){let n=this.propsState.componentListInterface.getFactory().getRegistry(),i=n.find(a=>t.toLowerCase()===a);return i=i||n.find(a=>t.toLowerCase().includes(a)),i}getCapitalFirstLetter(t){var n;return((n=t==null?void 0:t.charAt(0))==null?void 0:n.toUpperCase())+(t==null?void 0:t.slice(1))}classNameToString(t){let n=t.name;return n.charAt(0).toLowerCase()+n.slice(1)}render(){return this.setupItem(),this.html=this.getHtml(),this.html}}class AD extends da{}const yI=new AD;class _n extends lt{constructor(t){super(t);he(this,"type");he(this,"theme");he(this,"interface");this.wrapperRef=sh.createRef(),this.setWrapperRef=this.setWrapperRef,this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setApp,this.setType,this.setClassStr],this.state={defaultType:this.props.type?this.props.type:"fit",defaultTheme:this.props.theme?this.props.theme:"Default",typeKey:"type",themeKey:"theme"},this.interface=yI}componentDidMount(){this.props.popup&&document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){this.props.popup&&document.removeEventListener("mousedown",this.handleClickOutside)}handleClickOutside(t){this.wrapperRef&&!this.wrapperRef.current.contains(t.target)&&this.props.handleClose&&this.props.handleClose()}isPopup(t){if(this.props.popup){let n=this.closePopup.getHtml({content:this.props.closeUI||M.jsx(M.Fragment,{children:"X"}),props:{onClick:()=>{this.props.handleClose&&this.props.handleClose()}}}),i=this.popupContent.getHtml({content:M.jsxs(M.Fragment,{children:[n,t]}),props:{ref:this.wrapperRef}});t=this.backDrop.getHtml({content:i})}return t}setTheme(){this.theme=this.props[this.state.themeKey]?this.props[this.state.themeKey]:this.state.defaultTheme}setType(){this.type=this.props[this.state.typeKey]?this.props[this.state.typeKey]:this.state.defaultType}setClassStr(){this.defaultcardClass=this.type+this.theme+" scroller",this.defaultcardClass=this.props.popup?this.defaultcardClass+" cardPopup":this.defaultcardClass,this.props.popup&&(this.defaultbackDropClass="backDropPopup",this.defaultpopupContentClass="popupContent",this.defaultclosePopupClass="closePopup")}getHtml(){let t=this.getContent();return this.html=this.card.getHtml({content:t}),this.html=this.isPopup(this.html),this.html}getContent(){return this.content=this.props.content,this.content}preSetup(){let t=["card"];this.props.popup&&(t=[...t,"backDrop","popupContent","closePopup"]),this.setComponents(t)}}let kD=class{constructor(e){he(this,"operationsFactory");he(this,"dispatch");he(this,"json",{_id:"",backendKeys:[],backendAttributes:[],backendFilterKeys:[],orderMatters:!1,orderFilterKey:"",filterKey:"",removeOwnerQuery:[]});he(this,"componentList");he(this,"APIService");wn.bind(this),this.operationsFactory=e,this.json._id=this.createId()}getAssociatedItemsHelper(e){let t=this.json._id,n=this.json.type+"Id";return this.json.backendAttributes.length>0&&(t=this.json[this.json.backendAttributes[e]]),this.json.backendFilterKeys.length>0&&(n=this.json.backendFilterKeys[e]),{attribute:t,filterKey:n}}async getAssociatedItems(e){e=e||this.json.backendKeys;const t=e==null?void 0:e.map((n,i)=>{let{attribute:a,filterKey:l}=this.getAssociatedItemsHelper(i);return this.componentList.getList(n,a,l)});return await Promise.all(t)}async getAssociatedItemsFromBackend(e,t){e=e||this.json.backendKeys;let n=!0;const i=e==null?void 0:e.map((a,l)=>{this.json.removeOwnerQuery.includes(a)&&(n=!1);let{attribute:c,filterKey:h}=this.getAssociatedItemsHelper(l);return this.componentList.getComponentsFromBackend({type:a,ids:c,filterKeys:h,owner:n,...t})});return await Promise.all(i)}setComponentList(e){this.componentList=e,this.componentList.getAPIService&&this.setAPIService(this.componentList.getAPIService()),this.componentList.getDispatch&&this.setDispatch(this.componentList.getDispatch())}setDispatch(e){this.dispatch=e}getDispatch(){return this.dispatch}getComponentList(){return this.componentList}setAPIService(e){this.APIService=e}getAPIService(){return this.APIService}update(...e){this.APIService&&this.APIService.update([this],...e)}del(...e){this.componentList.del(this,{...e})}updateOrder(e,t){e=e||-1,e===!0&&(e=1);let n=this.componentList.getList(this.json.type,this.json[this.json.orderFilterKey],this.json.orderFilterKey);t=t||(this.json.orderKey?this.json[this.json.orderKey]:"order");let i=n.indexOf(this),a;e<0&&i===0?this.json[t]=n.length:e>0&&i===n.length-1?(this.json[t]=0,this.componentList.shiftOrderedList(this,t)):(a=n[i+e],a.setCompState({[t]:i},{run:!0,clean:!0}),this.json[t]=i+e),this.componentList.sortSelectedList(this.json.type,this.json.orderKey||"order"),this.componentList.resetOrder(this,t),this.update()}prepare(){this.operationsFactory.prepare({prepare:this})}setAttribute(e,t){this[e]=t}setAttributes(e){for(let t in e)this[t]=e[t]}getAttribute(e){return this[e]}getJsonAttribute(e){return this.json[e]}setCompState(e,t,n,i){this.subscribeToOperations(t),this.json={...this.json,...e},n&&this.dispatch({updated:this}),i&&i(e),t!=null&&t.run&&this.operationsFactory.runOperations()}getOperationsFactory(){return this.operationsFactory}setJson(e,t,n,i){this.subscribeToOperations(t),this.json=e,n&&this.dispatch({updated:this}),i&&i(this),t!=null&&t.run&&this.operationsFactory.runOperations()}getJson(){return this.json}subscribeToOperations(e){e&&this.operationsFactory.subscribeToOperations(e.operation||this.update,e.clean)}copyJson(e){return{...this.json,_id:"",...e}}copy(e){let t=this.copyJson(e);this.componentList.addComponents(t)}updateObjInsideJson(e,t){this.json[e]={...this.json[e],...t}}removeObjInsideJson(e,t){let n={};for(const i in this.json[e])t.includes(i)||(n[i]=this.json[e][i]);this.json[e]=n}randomFiveDigitNumber(){let e=Math.floor(Math.random()*9e4)+1e4;e=e.toString();let t=String.fromCharCode(97+Math.floor(Math.random()*26)),n=Math.floor(Math.random()*5);if(e=e.substring(0,n)+t+e.substring(n+1),Math.floor(Math.random()*2)===1){let a=String.fromCharCode(97+Math.floor(Math.random()*26)),l;do l=Math.floor(Math.random()*5);while(l===n);e=e.substring(0,l)+a+e.substring(l+1)}return e}createId(){const e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=e.getFullYear().toString().slice(-2);return this.randomFiveDigitNumber().toString()+t+n+i}createUUID(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789",i=n.length;for(let a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*i));return t}};class RD{constructor(){he(this,"operationsFactory");he(this,"factory",{})}registerComponents(e){this.factory[e.name]=e.component}setOperationsFactory(e){this.operationsFactory=e}getRegistry(){return Object.keys(this.factory)}async getComponent(e){if(Object.keys(this.factory).includes(e.type)){let t=e.type,n=new this.factory[t](this.operationsFactory);return[void 0,"",!1].includes(e._id)&&(e._id=n.getJson()._id),n.setCompState({...e}),n}}}class PD extends ui{clear(){this.list=[]}cleanSubscibe(e){this.clear(),this.subscribe(e)}run(...e){for(let t of this.list)t&&t(...e);this.clear()}}class _w{constructor(e){he(this,"register");he(this,"factory");he(this,"operationsObserver");wn.bind(this),this.add=[],this.lastChange=[],this.factory=e.getFactory(),this.operationsObserver=new PD}removeFromList(e){this.add=this.add.filter(t=>t!==e)}getOperationsObserver(){return this.operationsObserver}setOperationsObserver(e){this.operationsObserver=e}subscribeToOperations(e,t){t&&this.operationsObserver.clear(),this.operationsObserver.subscribe(e)}runOperations(...e){this.operationsObserver.run(...e)}setAddList(e){this.add=[...e],this.lastChange=[...this.add]}getAddList(){return this.add}getLastPrepare(){return this.lastChange}async prepare(e,t){let{prepare:n,amount:i,clean:a}=e;i=i||1;let l=Array.isArray(n)?n:[n];l=l.flatMap(h=>Array(i).fill(h));let c=[];for(let h of l){let d=await this.factory.getComponent({...h});c.push(d)}return l=[...c],this.setAddList(a?[...l]:[...this.add,...l]),t&&t(this.add),e.run&&await this.addToComponentList(),this.add}clear(){this.setAddList([])}removeFromRegister(e){this.setAddList(this.add.filter(t=>t!==e))}run(e){this.addToComponentList(e)}addToComponentList(e){let t=[...this.add];return this.clear(),this.register(t,{skipBackendUpdate:e}),t}setRegister(e){this.register=e}}class xD{constructor(e){he(this,"components",[]);he(this,"dispatch");he(this,"backArray",{});he(this,"operationsFactory");he(this,"componentListInterface");he(this,"componentsList",{});he(this,"completionObserver",new ui);he(this,"factory");he(this,"APIService");wn.bind(this),this.operationsFactory=e.getOperationsFactory(),this.operationsFactory.setRegister(this.add),this.componentListInterface=e,this.factory=e.getFactory(),this.dispatch=e.dispatch,this.APIService=e.getAPIService(),this.APIService.setComponentList(this),this.completionObserver.subscribe(this.setComponentsList),this.completionObserver.subscribe(this.setOrderAfterAddorDel)}getFactory(){return this.factory}getDispatch(){return this.dispatch}setDispatch(e){this.dispatch=e}getCompletionObserver(){return this.completionObserver}setCompoletionObserver(e){this.completionObserver=e}subscribeToOperationCompletion(e){this.completionObserver.subscribe(e)}getAPIService(){return this.APIService}setAPIService(e){this.APIService=e}getComponents(){return this.components}filterOutErrors(e){let t=this.components.map(i=>i.getJson()._id);e=e.filter(i=>i!==void 0),e=e.map(i=>{if(i!==void 0&&t.includes(i.getJson()._id)){let a=this.components.find(l=>l.getJson()._id===i.getJson()._id);i.setJson({...a.getJson(),...i.getJson()})}return i}),e=e.filter(i=>!t.includes(i.getJson()._id));let n=this.factory.getRegistry();return e=e.filter(i=>n.includes(i.getJson().type)),e}add(e,t){return e=Array.isArray(e)?e:[e],e=this.filterOutErrors(e),e.forEach(n=>{n.setComponentList(this)}),this.components=[...this.components,...e],this.operationComplete(e,"add",t)}setComponentsList(){let e={};this.componentListInterface.getFactory().getRegistry().forEach(n=>{e[n]=[]});for(let n of this.components){let i=n.getJson().type;e[i].push(n)}this.componentsList=e}async addComponents(e,t){e.prepare||(e={prepare:Array.isArray(e)?e:[e]}),await this.operationsFactory.prepare({...e}),this.operationsFactory.addToComponentList(t);let n=e==null?void 0:e.prepare.map(a=>a._id);return await this.components.filter(a=>n.includes(a.getJson()._id))}del(e,t){return e=Array.isArray(e)?e:[e],this.components=this.components.filter(n=>!e.includes(n)),this.operationComplete(e,"del",t)}setOrderAfterAddorDel(e){for(let t of e){let n=t.getJson();if(n.orderMatters){let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey),a=n.orderKey?n[n.orderKey]:"order",l=t.getJson()[a],h=i.filter(v=>{let g=parseInt(v.getJson()[a]);return l=parseInt(l),g===l}).find(v=>!e.includes(v)),d=i.indexOf(t);h&&h!==t&&t.setCompState({[a]:d}),this.sortSelectedList(n.type,n.orderKey||"order"),this.resetOrder(t,a)}}}shiftOrderedList(e,t){let n=e.getJson();this.sortSelectedList(n.type,n.orderKey||"order");let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);t=t||(n.orderKey?n[n.orderKey]:"order"),i=i.filter(a=>a!==e);for(let a=1;a<i.length;a++)i[a-1].setCompState({[t]:a},{run:!0,clean:!0})}resetOrder(e,t){let n=e.getJson();t=t||(n.orderKey?n[n.orderKey]:n.order);let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);for(let a=0;a<i.length;a++)i[a][t]!==a&&(i[a].setCompState({[t]:a}),i[a]!==e&&i[a].update())}operationComplete(e,t,n){return this.completionObserver.run(e,t,n),this.backArray={[t]:e},n.skipBackendUpdate||this.updateBackend(e,t,n),e}updateBackend(e,t,n){this.dispatch({backend:!0,backendUpdate:{...this.backArray}});let i=[n.path,n.dispatchKey];t==="add"&&i.push(n.timeKey),this.APIService[t](e,...i),this.backArray={}}getOperationsFactory(){return this.operationsFactory}createQueryJson(e,t,n,i,a="type"){i=i||{},n===void 0&&t&&(n="_id"),t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];let l={where:[{attribute:a,val:e}],...i};return t.length>0&&t[0]!==void 0&&(l.where=[...l.where,...t.map((c,h)=>({attribute:n[h]||n[0],val:c}))]),l}async getComponentsFromBackend(e,t){typeof e=="string"&&(e={type:e,owner:t===!1?t:!0});let n=await this.createQueryJson(e.type,e.ids,e.filterKeys,e.obj,e.typeAttribute);return await this.APIService[e.snapshot?"firebaseGetterSnapshot":"firebaseGetter"](n,e.path,e.owner)}async getComponentFromBackend(e){return(await this.getComponentsFromBackend(e))[0]}getList(e,t,n){n=n||"owner",e=Array.isArray(e)?e:[e];let i=[];for(let a of e){let l=this.componentsList[a]||[];i=[...i,...l]}return Array.isArray(t)||(t=t?[t]:[]),Array.isArray(n)||(n=[n]),t.length>0&&(i=i.filter(a=>n.some((l,c)=>{var v;const h=(v=a.getJson())==null?void 0:v[l],d=t[c]||t[0];return typeof h=="object"?Object.keys(h).includes(d):h===d}))),i}getComponent(e,t,n){return this.getList(e,t,n||"_id")[0]}clearList(){this.components=[],this.componentsList={}}clearSelectedList(e,t){let n=[...this.components],i=[];for(const a in n)n[a].getJson()[t]!==e&&i.push(n[a]);this.components=[...i],this.setComponentsList()}setComponentList(e){this.componentsList=e}setSelectedList(e,t){this.componentsList[e]=t}sortSelectedList(e,t,n){if(t&&this.componentsList[e]){let i=[...this.componentsList[e]];i=i.sort(function(a,l){const c=a.getJson()[t],h=l.getJson()[t],d=isNaN(Number(c))?c:Number(c),v=isNaN(Number(h))?h:Number(h);return typeof d=="number"&&typeof v=="number"?n?v-d:d-v:n?(""+v).localeCompare(""+d):(""+d).localeCompare(""+v)}),this.setSelectedList(e,i)}}sortSelectedListbyFirebaseDate(e,t){if(this.componentsList[e]){let n=[...this.componentsList[e]];n=n.sort(function(i,a){var h,d;let l=i.getJson().date||i.getJson().date!==""?(h=i.getJson().date)==null?void 0:h.seconds:new Date(0),c=a.getJson().date||a.getJson().date!==""?(d=a.getJson().date)==null?void 0:d.seconds:new Date(0);return t?c-l:l-c}),this.setSelectedList(e,n)}}}class OD{constructor(e,t){he(this,"DB");he(this,"url");he(this,"path",[]);he(this,"orderStr","date");wn.bind(this),this.setDB(e),this.setUrl(t),this.path=[this.DB,this.url+"users",this.url+"APP","components"]}setDB(e){this.DB=e}setUrl(e){this.url=e}setPath(e){this.path=e}setOrderStr(e){this.orderStr=e}async generateQueary(e,t,n){let i=e.where.map(h=>{if(h.attribute!==void 0)return M0(h.attribute,h.type||"==",h.val)}).filter(h=>h!==void 0);n&&i.push(M0("owner","==",n)),t=t||this.path;let a=[...i],l=e.order||this.orderStr;return l!=="noOrder"&&l!==void 0&&a.push(rx(l)),e.limit&&a.push(ix(e.limit)),nx(BP(...t),...a)}}class ND{constructor(e,t,n,i,a){he(this,"urlEndpoint","");he(this,"dispatch");he(this,"componentList");he(this,"userStr","flinnappsUser");he(this,"QuearyGenerator");he(this,"DB");he(this,"storage");he(this,"auth");he(this,"userEmail");he(this,"path",[]);he(this,"postObserver",new ui);he(this,"dispatchObserver",new ui);he(this,"readObserver",new ui);wn.bind(this),this.urlEndpoint=e,this.DB=t,this.storage=n,this.auth=i,this.dispatch=a,this.path=[this.DB,`${this.urlEndpoint}users`,`${this.urlEndpoint}APP`,"components"],this.QuearyGenerator=new OD(this.DB,this.urlEndpoint)}setAuth(e){this.auth=e}setStorage(e){this.storage=e}setPath(e){this.path=e}setDB(e){this.DB=e,this.QuearyGenerator.setDB(e)}setDispatch(e){this.dispatch=e}setComponentList(e){this.componentList=e}setUserStr(e){this.userStr=e,this.QuearyGenerator.setUrl(e)}getPostObserver(){return this.postObserver}setPostObserver(e){this.postObserver=e}subscribeToPostObserver(e){this.postObserver.subscribe(e)}getReadObserver(){return this.readObserver}setReadObserver(e){this.readObserver=e}subscribeToReadObserver(e){this.readObserver.subscribe(e)}getPath(){return this.path}getDispatchObserver(){return this.dispatchObserver}setDispatchObserver(e){this.dispatchObserver=e}subscribeToDispatchObserver(e){this.dispatchObserver.subscribe(e)}getQueryGenerator(){return this.QuearyGenerator}setQueryGenerator(e){this.QuearyGenerator=e}async login(e,t){let n,i;if(await tw(this.auth,e,t).then(a=>{n=a.user}).catch(a=>{const l=a.message;i={error:l.slice(9,l.length-1)},console.log(i)}),n){let a=n;this.dispatch({login:!0}),await localStorage.setItem(this.userStr,JSON.stringify(a)),this.componentList!==void 0&&this.dispatch!==void 0&&(n=await this.getuser(e))}else n=i;return n}async register(e,t,n){let i;return await NN(this.auth,e,t).then(a=>{i=a.user}).catch(a=>{a.code;let l=a.message,c=l.length-1;i={error:l.slice(9,c)}}),i.error||(this.userEmail=i.email,localStorage.setItem(this.userStr,JSON.stringify(i))),i}async logout(){await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let e;await Md(this.auth,t=>{t&&(e=t.uid)}),e&&await nw(this.auth),await localStorage.setItem(this.userStr,null),window.location.href="/"}sendForgotPasswordChange(e){const t=Pc();ON(t,e).then(()=>{}).catch(n=>{n.code,n.message})}async checkIfLoggedIn(){return new Promise((e,t)=>{Md(this.auth,async n=>{if(n)e(n);else{await localStorage.setItem(this.userStr,null),await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let i;await Md(this.auth,a=>{a&&(i=a.uid)}),i&&await nw(this.auth),await window.location.reload()}})})}async getCurrentUser(){let e=await localStorage.getItem(this.userStr);return e=await JSON.parse(e),e}async setCurrentUser(e){await localStorage.setItem(this.userStr,JSON.stringify(e))}async loginToDel(e,t){await tw(this.auth,e,t).then(n=>{}).catch(n=>{n.code,n.message})}async delAccount(){const t=Pc().currentUser;await FN(t).then(()=>{}).catch(n=>{})}async notify(e,t){fetch(t,{method:"POST",mode:"no-cors",body:JSON.stringify(e),headers:{"Conent-Type":"application/json"}})}async changePassword(e){const n=Pc().currentUser;return await LN(n,e).then(()=>{}).catch(a=>{}),!0}async firebaseGetterSnapshot(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),a=[];return await fx(i,async l=>{a=await this.getRawData(l)}),a}async firebaseGetter(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),a=await ux(i);return await this.getRawData(a)}async getRawData(e){let t=[];for(const i in e.docs){let a=e.docs[i].data();t.push(a)}let n=await this.componentList.addComponents(t,!0);return this.dispatch&&await this.dispatch({snapShot:{dataRetrieved:n}}),this.readObserver.run(n),n}async getCount(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n);return(await px(i)).data().count}async getuser(e){this.userEmail=e;let t=await this.componentList.getComponentFromBackend({type:"user",ids:e});return t&&this.dispatch({currentUser:t,email:e,gotUser:!0}),t}async GetAllData(e,t){t=t||[this.db,this.urlEndpoint+"users"],this.firebaseGetter(e,t)}async uploadPics(e,t){const n=Ld(this.storage,t);await CO(n,e).then(i=>{console.log("Uploaded a file!")})}async downloadPics(e){let t;return await bO(Ld(this.storage,e)).then(n=>{t=n}),t}deletePics(e){const t=Ld(this.storage,e);AO(t).then(()=>{}).catch(n=>{})}prep(e){return e=Array.isArray(e)?e:[e],e=e.map(t=>{let n=t;return t.getJson&&(n=t.getJson()),n}),e=e.filter(t=>t!==void 0),e}async add(e,t,n,i){return e=await e.map(a=>((a.getJson().owner===""||a.getJson().owner===void 0)&&a.setCompState({owner:this.userEmail}),a)),await this.operate(e,cx,t,n||"added",i||"date")}async update(e,t,n,i){return await this.operate(e,hx,t,i||"updated",n||"lastUpdated")}async del(e,t,n){return await this.operate(e,V0,t,n||"deleted")}async operate(e,t,n,i,a){try{e=await this.prep(e),n=n||this.path;for(let l of e){a&&(l[a]=await gx()),await this.postObserver.run([l]);let c=[qP(...n,l._id)];t!==V0&&c.push(l),await t(...c)}return this.dispatch&&this.dispatch({[i]:e,dispatchComplete:!0}),this.dispatchObserver.run([{[i]:e}]),e}catch(l){console.log(l),console.error(e,"something went wrong with this operation")}}}class LD{constructor(e,t,n,i,a){he(this,"factory");he(this,"updater");he(this,"operationsFactory");he(this,"dispatch");he(this,"APIService");wn.bind(this),this.dispatch=e,this.getFactory(),this.getAPIService(t,n,i,a,e)}getFactory(){return this.factory===void 0&&(this.factory=new RD(this)),this.factory}getAPIService(e,t,n,i,a){return this.APIService===void 0&&(this.APIService=new ND(e,t,n,i,a)),this.APIService}createComponentList(){return new xD(this)}getOperationsFactory(){return this.operationsFactory===void 0&&(this.operationsFactory=new _w(this),this.factory.setOperationsFactory(this.operationsFactory)),this.operationsFactory}getNewOperationsFactory(){return new _w(this)}}class Ol extends lt{constructor(e){super(e),this.domList=["a","button","div","h1","h2","h3","h4","h5","h6","img","input","p","span","table","tr","td","th","ul","li","ol","form","textarea","select","option","label","nav","footer","header","article","section","aside","main","video","audio","iframe","canvas"],this.state={...this.state,wrapperClass:"FCWrapper",formClass:"FCInputForm",labelClass:"defaultLabel",errorClass:"defaultErrorMessage",interface:"form"}}setObj(){var e,t;if(!this.props.prepareOnClick){let n=this.props.obj||(this.props.inPopup?(e=this.propsState)==null?void 0:e.currentPopupComponent:(t=this.propsState)==null?void 0:t.currentComponent);this.obj=this.isArray(n)}}preSetup(){this.setComponents(["wrapper","form","label","error"])}getInnerContent(){return this.innerContent=[this.props.label&&this.label.getHtml(),this.getFormHtml(),this.props.errorText&&this.error.getHtml()],this.innerContent}getHtml(){this.mapInnerContent();let e=this.wrapper.getHtml({type:"div",content:this.innerContent});return this.html=M.jsx(M.Fragment,{children:e}),this.html}getFormHtml(){return this.getInputProps(this.props.type||"input"),this.additionalPropsSetup(),this.form.getHtml({type:this.props.type?this.props.type:"input",content:this.content,props:this.inputProps})}additionalPropsSetup(){}handleChange(e){let{name:t,value:n}=e.target;for(let i of this.obj){if(this.props.isPropArray){let a=i.getJson()[this.props.name]||[];Array.isArray(a)||(a=[a]),Array.isArray(a[0])||(a[0]=[a[0]]),a[0]=n,n=a}i.setCompState({[this.props.name]:n})}this.afterChange(e)}afterChange(e){if(this.props.update)for(let t of this.obj){let n=this.props.update===!0?void 0:{...this.props.update};t==null||t.update(n)}this.props.sendUpdate&&this.props.app&&this.app.dispatch({formUpdate:this.props.type}),this.props.callbackFunc&&this.props.callbackFunc(this.obj),this.additionalChanges(e),this.setState({})}additionalChanges(e){}async prepareOnClick(){var e;if(this.props.prepareOnClick&&this.props.app){let t=this.props.obj;t&&(t=this.isArray(t)),t=await((e=this.props.app)==null?void 0:e.state.componentList.getOperationsFactory().prepare({...t})),t&&(t=this.isArray(t)),this.obj=t}}objDispatch(e){for(let t of this.obj)t.setCompState({[this.props.name]:e});this.afterChange()}handleChangeWithoutEvent(e){for(let t in this.obj)t.setCompState({[e.name]:e.value});this.afterChange()}getInputProps(e){var t;return this.inputProps={onChange:this.props.handleChange?n=>{this.props.handleChange(n,this.obj)}:this.handleChange,value:this.obj[0]?(t=this.obj[0])==null?void 0:t.getJson()[this.props.name]:this.props.value,type:this.props.inputType||this.props.type,onFocus:this.props.onFocus||this.onFocus,placeholder:this.props.placeholder,name:this.props.name,min:this.props.min,max:this.props.max,cols:this.props.cols||"",rows:this.props.rows||5,resize:this.props.resize||"true",autoComplete:this.props.autoComplete?this.props.autoComplete:"off",id:this.props.id,checked:this.props.checked,spellCheck:this.props.type==="password"||this.props.spellCheck===void 0?!1:this.props.spellCheck,minLength:this.props.minLength,maxLength:this.props.maxLength},this.domList.includes(e)||(this.inputProps.handleChangeWithoutEvent=this.props.update?()=>{console.log("")}:this.props.handleChangeWithoutEvent?this.props.handleChangeWithoutEvent:this.handleChangeWithoutEvent,this.inputProps.selectOptions=this.props.selectOptions,this.inputProps.textOptions=this.props.textOptions,this.inputProps.unit=this.props.unit?this.props.unit:"$",this.inputProps.tickClass=this.props.tickClass,this.inputProps.handleHTMLChange=this.props.handleHTMLChange||this.objDispatch,this.inputProps.doesMath=this.props.doesMath,this.inputProps.objDispatch=this.objDispatch,this.inputProps.emitClickedOutside=this.props.emitClickedOutside,this.inputProps.updateOnClickOutside=this.props.updateOnClickOutside),this.props.required&&(this.inputProps.required=!0),this.props.disabled&&(this.inputProps.disabled=!0),this.inputProps}}class ps extends Ol{constructor(e){super(e),this.state.formClass="FCDefaultButton"}buttonClick(){this.props.buttonClick?this.props.buttonClick(this.obj):this.buttonClickFunc(),this.props.callbackFunc&&this.props.callbackFunc(this.obj)}buttonClickFunc(){}additionalSetup(){this.form.setOnClick(this.buttonClick)}getFormHtml(){return this.form.setStyle({cursor:"pointer"}),this.content=this.props.content||this.content||M.jsx(M.Fragment,{children:"button"}),this.form.getHtml({type:"div",content:this.content})}}let vI=class{constructor(){he(this,"FCInputForm","defaultInputForm");he(this,"FCWrapper","defaultWrapper");he(this,"FCError","defaultErrorMessage");he(this,"FCLabel","defaultLabel");he(this,"FCDefaultButton","defaultButton");he(this,"FCDefaultDelButton","delButton");he(this,"FCImgButton","imgButton")}};const DD=Object.freeze(Object.defineProperty({__proto__:null,DefaultRegistry:vI},Symbol.toStringTag,{value:"Module"}));class ry{constructor(e){he(this,"factory",{});wn.bind(this),e&&(this.registry=e,this.registerListWithFactory())}registerListWithFactory(){for(const e in this.registry)if(Object.prototype.hasOwnProperty.call(this.registry,e)){const t=e.charAt(0).toLowerCase()+e.slice(1);this.factory[t]=this.registry[e]}}getComponent(e){let t;return this.factory[e]&&(t=new this.factory[e]),t}registerComponent(e,t){this.factory[e]=t}}let MD=class extends ry{constructor(){super(DD),this.factory.default=vI}};class _I{constructor(){he(this,"factory",{})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),M.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class jD extends ps{buttonClickFunc(){let e=this.props.add;this.componentList.addComponents(e)}}class FD{constructor(){wn.bind(this)}doMath(e){e=e.replace(/\s+/g,"");const t=/(\d+)([+\-*/])(\d+)/,n=e.match(t);if(!n)throw new Error("Invalid input");const i=parseFloat(n[1]),a=n[2],l=parseFloat(n[3]);return{"+":i+l,"-":i-l,"*":i*l,"/":i/l}[a]}}let VD=new FD;class UD extends Ol{constructor(e){super(e)}componentDidMount(){document.addEventListener("keyup",this.doMath)}componentWillUnmount(){document.removeEventListener("keyup",this.doMath)}additionalChanges(e){let{name:t,value:n}=e.target;this.setState({val:n})}async doMath(e){if(e.key==="Enter"&&this.state.val!==void 0){let t=this.obj[0],n=await VD.doMath(this.state.val).toString();await t.setCompState({[this.props.name]:n}),t.update(),await this.setState({val:void 0})}}}let BD=class extends ps{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...i})}},qD=class extends ps{buttonClickFunc(){for(let e of this.obj)e.update(this.props.updateParams);this.props.isPopup&&this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}},zD=class extends ps{buttonClickFunc(){let e=this.operationsFactory.addToComponentList(this.props.skipBackendUpdate),t=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(e[0].getJson().type)]:e[0]},n={};this.props.isPopup&&(n={popupSwitch:"",currentPopupComponent:void 0}),this.dispatch({...n,...t})}};var Ud,ww;function HD(){if(ww)return Ud;ww=1;function r(){this.__data__=[],this.size=0}return Ud=r,Ud}var Bd,Ew;function wI(){if(Ew)return Bd;Ew=1;function r(e,t){return e===t||e!==e&&t!==t}return Bd=r,Bd}var qd,Tw;function Lh(){if(Tw)return qd;Tw=1;var r=wI();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return qd=e,qd}var zd,Sw;function $D(){if(Sw)return zd;Sw=1;var r=Lh(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,l=r(a,i);if(l<0)return!1;var c=a.length-1;return l==c?a.pop():t.call(a,l,1),--this.size,!0}return zd=n,zd}var Hd,Iw;function WD(){if(Iw)return Hd;Iw=1;var r=Lh();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Hd=e,Hd}var $d,Cw;function KD(){if(Cw)return $d;Cw=1;var r=Lh();function e(t){return r(this.__data__,t)>-1}return $d=e,$d}var Wd,bw;function GD(){if(bw)return Wd;bw=1;var r=Lh();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return Wd=e,Wd}var Kd,Aw;function Dh(){if(Aw)return Kd;Aw=1;var r=HD(),e=$D(),t=WD(),n=KD(),i=GD();function a(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Kd=a,Kd}var Gd,kw;function QD(){if(kw)return Gd;kw=1;var r=Dh();function e(){this.__data__=new r,this.size=0}return Gd=e,Gd}var Qd,Rw;function JD(){if(Rw)return Qd;Rw=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return Qd=r,Qd}var Jd,Pw;function YD(){if(Pw)return Jd;Pw=1;function r(e){return this.__data__.get(e)}return Jd=r,Jd}var Yd,xw;function XD(){if(xw)return Yd;xw=1;function r(e){return this.__data__.has(e)}return Yd=r,Yd}var Xd,Ow;function EI(){if(Ow)return Xd;Ow=1;var r=typeof uc=="object"&&uc&&uc.Object===Object&&uc;return Xd=r,Xd}var Zd,Nw;function _i(){if(Nw)return Zd;Nw=1;var r=EI(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Zd=t,Zd}var ep,Lw;function iy(){if(Lw)return ep;Lw=1;var r=_i(),e=r.Symbol;return ep=e,ep}var tp,Dw;function ZD(){if(Dw)return tp;Dw=1;var r=iy(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(l){var c=t.call(l,i),h=l[i];try{l[i]=void 0;var d=!0}catch{}var v=n.call(l);return d&&(c?l[i]=h:delete l[i]),v}return tp=a,tp}var np,Mw;function eM(){if(Mw)return np;Mw=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return np=t,np}var rp,jw;function Mh(){if(jw)return rp;jw=1;var r=iy(),e=ZD(),t=eM(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function l(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):t(c)}return rp=l,rp}var ip,Fw;function TI(){if(Fw)return ip;Fw=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return ip=r,ip}var sp,Vw;function SI(){if(Vw)return sp;Vw=1;var r=Mh(),e=TI(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function l(c){if(!e(c))return!1;var h=r(c);return h==n||h==i||h==t||h==a}return sp=l,sp}var op,Uw;function tM(){if(Uw)return op;Uw=1;var r=_i(),e=r["__core-js_shared__"];return op=e,op}var ap,Bw;function nM(){if(Bw)return ap;Bw=1;var r=tM(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return ap=t,ap}var lp,qw;function II(){if(qw)return lp;qw=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return lp=t,lp}var up,zw;function rM(){if(zw)return up;zw=1;var r=SI(),e=nM(),t=TI(),n=II(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,d=c.hasOwnProperty,v=RegExp("^"+h.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g(m){if(!t(m)||e(m))return!1;var y=r(m)?v:a;return y.test(n(m))}return up=g,up}var cp,Hw;function iM(){if(Hw)return cp;Hw=1;function r(e,t){return e==null?void 0:e[t]}return cp=r,cp}var hp,$w;function pa(){if($w)return hp;$w=1;var r=rM(),e=iM();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return hp=t,hp}var fp,Ww;function sy(){if(Ww)return fp;Ww=1;var r=pa(),e=_i(),t=r(e,"Map");return fp=t,fp}var dp,Kw;function jh(){if(Kw)return dp;Kw=1;var r=pa(),e=r(Object,"create");return dp=e,dp}var pp,Gw;function sM(){if(Gw)return pp;Gw=1;var r=jh();function e(){this.__data__=r?r(null):{},this.size=0}return pp=e,pp}var mp,Qw;function oM(){if(Qw)return mp;Qw=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return mp=r,mp}var gp,Jw;function aM(){if(Jw)return gp;Jw=1;var r=jh(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var l=this.__data__;if(r){var c=l[a];return c===e?void 0:c}return n.call(l,a)?l[a]:void 0}return gp=i,gp}var yp,Yw;function lM(){if(Yw)return yp;Yw=1;var r=jh(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return yp=n,yp}var vp,Xw;function uM(){if(Xw)return vp;Xw=1;var r=jh(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return vp=t,vp}var _p,Zw;function cM(){if(Zw)return _p;Zw=1;var r=sM(),e=oM(),t=aM(),n=lM(),i=uM();function a(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,_p=a,_p}var wp,eE;function hM(){if(eE)return wp;eE=1;var r=cM(),e=Dh(),t=sy();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return wp=n,wp}var Ep,tE;function fM(){if(tE)return Ep;tE=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Ep=r,Ep}var Tp,nE;function Fh(){if(nE)return Tp;nE=1;var r=fM();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Tp=e,Tp}var Sp,rE;function dM(){if(rE)return Sp;rE=1;var r=Fh();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Sp=e,Sp}var Ip,iE;function pM(){if(iE)return Ip;iE=1;var r=Fh();function e(t){return r(this,t).get(t)}return Ip=e,Ip}var Cp,sE;function mM(){if(sE)return Cp;sE=1;var r=Fh();function e(t){return r(this,t).has(t)}return Cp=e,Cp}var bp,oE;function gM(){if(oE)return bp;oE=1;var r=Fh();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return bp=e,bp}var Ap,aE;function CI(){if(aE)return Ap;aE=1;var r=hM(),e=dM(),t=pM(),n=mM(),i=gM();function a(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Ap=a,Ap}var kp,lE;function yM(){if(lE)return kp;lE=1;var r=Dh(),e=sy(),t=CI(),n=200;function i(a,l){var c=this.__data__;if(c instanceof r){var h=c.__data__;if(!e||h.length<n-1)return h.push([a,l]),this.size=++c.size,this;c=this.__data__=new t(h)}return c.set(a,l),this.size=c.size,this}return kp=i,kp}var Rp,uE;function vM(){if(uE)return Rp;uE=1;var r=Dh(),e=QD(),t=JD(),n=YD(),i=XD(),a=yM();function l(c){var h=this.__data__=new r(c);this.size=h.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=a,Rp=l,Rp}var Pp,cE;function _M(){if(cE)return Pp;cE=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Pp=e,Pp}var xp,hE;function wM(){if(hE)return xp;hE=1;function r(e){return this.__data__.has(e)}return xp=r,xp}var Op,fE;function EM(){if(fE)return Op;fE=1;var r=CI(),e=_M(),t=wM();function n(i){var a=-1,l=i==null?0:i.length;for(this.__data__=new r;++a<l;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Op=n,Op}var Np,dE;function TM(){if(dE)return Np;dE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return Np=r,Np}var Lp,pE;function SM(){if(pE)return Lp;pE=1;function r(e,t){return e.has(t)}return Lp=r,Lp}var Dp,mE;function bI(){if(mE)return Dp;mE=1;var r=EM(),e=TM(),t=SM(),n=1,i=2;function a(l,c,h,d,v,g){var m=h&n,y=l.length,T=c.length;if(y!=T&&!(m&&T>y))return!1;var S=g.get(l),w=g.get(c);if(S&&w)return S==c&&w==l;var E=-1,b=!0,O=h&i?new r:void 0;for(g.set(l,c),g.set(c,l);++E<y;){var C=l[E],F=c[E];if(d)var U=m?d(F,C,E,c,l,g):d(C,F,E,l,c,g);if(U!==void 0){if(U)continue;b=!1;break}if(O){if(!e(c,function(P,_){if(!t(O,_)&&(C===P||v(C,P,h,d,g)))return O.push(_)})){b=!1;break}}else if(!(C===F||v(C,F,h,d,g))){b=!1;break}}return g.delete(l),g.delete(c),b}return Dp=a,Dp}var Mp,gE;function IM(){if(gE)return Mp;gE=1;var r=_i(),e=r.Uint8Array;return Mp=e,Mp}var jp,yE;function CM(){if(yE)return jp;yE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return jp=r,jp}var Fp,vE;function bM(){if(vE)return Fp;vE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return Fp=r,Fp}var Vp,_E;function AM(){if(_E)return Vp;_E=1;var r=iy(),e=IM(),t=wI(),n=bI(),i=CM(),a=bM(),l=1,c=2,h="[object Boolean]",d="[object Date]",v="[object Error]",g="[object Map]",m="[object Number]",y="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",b="[object DataView]",O=r?r.prototype:void 0,C=O?O.valueOf:void 0;function F(U,P,_,A,k,R,x){switch(_){case b:if(U.byteLength!=P.byteLength||U.byteOffset!=P.byteOffset)return!1;U=U.buffer,P=P.buffer;case E:return!(U.byteLength!=P.byteLength||!R(new e(U),new e(P)));case h:case d:case m:return t(+U,+P);case v:return U.name==P.name&&U.message==P.message;case y:case S:return U==P+"";case g:var L=i;case T:var $=A&l;if(L||(L=a),U.size!=P.size&&!$)return!1;var Q=x.get(U);if(Q)return Q==P;A|=c,x.set(U,P);var se=n(L(U),L(P),A,k,R,x);return x.delete(U),se;case w:if(C)return C.call(U)==C.call(P)}return!1}return Vp=F,Vp}var Up,wE;function kM(){if(wE)return Up;wE=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return Up=r,Up}var Bp,EE;function oy(){if(EE)return Bp;EE=1;var r=Array.isArray;return Bp=r,Bp}var qp,TE;function RM(){if(TE)return qp;TE=1;var r=kM(),e=oy();function t(n,i,a){var l=i(n);return e(n)?l:r(l,a(n))}return qp=t,qp}var zp,SE;function PM(){if(SE)return zp;SE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,l=[];++n<i;){var c=e[n];t(c,n,e)&&(l[a++]=c)}return l}return zp=r,zp}var Hp,IE;function xM(){if(IE)return Hp;IE=1;function r(){return[]}return Hp=r,Hp}var $p,CE;function OM(){if(CE)return $p;CE=1;var r=PM(),e=xM(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(l){return l==null?[]:(l=Object(l),r(i(l),function(c){return n.call(l,c)}))}:e;return $p=a,$p}var Wp,bE;function NM(){if(bE)return Wp;bE=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Wp=r,Wp}var Kp,AE;function Vh(){if(AE)return Kp;AE=1;function r(e){return e!=null&&typeof e=="object"}return Kp=r,Kp}var Gp,kE;function LM(){if(kE)return Gp;kE=1;var r=Mh(),e=Vh(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return Gp=n,Gp}var Qp,RE;function DM(){if(RE)return Qp;RE=1;var r=LM(),e=Vh(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(l){return e(l)&&n.call(l,"callee")&&!i.call(l,"callee")};return Qp=a,Qp}var dl={exports:{}},Jp,PE;function MM(){if(PE)return Jp;PE=1;function r(){return!1}return Jp=r,Jp}dl.exports;var xE;function AI(){return xE||(xE=1,function(r,e){var t=_i(),n=MM(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,l=a&&a.exports===i,c=l?t.Buffer:void 0,h=c?c.isBuffer:void 0,d=h||n;r.exports=d}(dl,dl.exports)),dl.exports}var Yp,OE;function jM(){if(OE)return Yp;OE=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Yp=t,Yp}var Xp,NE;function kI(){if(NE)return Xp;NE=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Xp=e,Xp}var Zp,LE;function FM(){if(LE)return Zp;LE=1;var r=Mh(),e=kI(),t=Vh(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",d="[object Map]",v="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",b="[object Float32Array]",O="[object Float64Array]",C="[object Int8Array]",F="[object Int16Array]",U="[object Int32Array]",P="[object Uint8Array]",_="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]",R={};R[b]=R[O]=R[C]=R[F]=R[U]=R[P]=R[_]=R[A]=R[k]=!0,R[n]=R[i]=R[w]=R[a]=R[E]=R[l]=R[c]=R[h]=R[d]=R[v]=R[g]=R[m]=R[y]=R[T]=R[S]=!1;function x(L){return t(L)&&e(L.length)&&!!R[r(L)]}return Zp=x,Zp}var em,DE;function VM(){if(DE)return em;DE=1;function r(e){return function(t){return e(t)}}return em=r,em}var pl={exports:{}};pl.exports;var ME;function UM(){return ME||(ME=1,function(r,e){var t=EI(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,l=a&&t.process,c=function(){try{var h=i&&i.require&&i.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}}();r.exports=c}(pl,pl.exports)),pl.exports}var tm,jE;function RI(){if(jE)return tm;jE=1;var r=FM(),e=VM(),t=UM(),n=t&&t.isTypedArray,i=n?e(n):r;return tm=i,tm}var nm,FE;function BM(){if(FE)return nm;FE=1;var r=NM(),e=DM(),t=oy(),n=AI(),i=jM(),a=RI(),l=Object.prototype,c=l.hasOwnProperty;function h(d,v){var g=t(d),m=!g&&e(d),y=!g&&!m&&n(d),T=!g&&!m&&!y&&a(d),S=g||m||y||T,w=S?r(d.length,String):[],E=w.length;for(var b in d)(v||c.call(d,b))&&!(S&&(b=="length"||y&&(b=="offset"||b=="parent")||T&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,E)))&&w.push(b);return w}return nm=h,nm}var rm,VE;function qM(){if(VE)return rm;VE=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return rm=e,rm}var im,UE;function zM(){if(UE)return im;UE=1;function r(e,t){return function(n){return e(t(n))}}return im=r,im}var sm,BE;function HM(){if(BE)return sm;BE=1;var r=zM(),e=r(Object.keys,Object);return sm=e,sm}var om,qE;function $M(){if(qE)return om;qE=1;var r=qM(),e=HM(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var l=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&l.push(c);return l}return om=i,om}var am,zE;function WM(){if(zE)return am;zE=1;var r=SI(),e=kI();function t(n){return n!=null&&e(n.length)&&!r(n)}return am=t,am}var lm,HE;function KM(){if(HE)return lm;HE=1;var r=BM(),e=$M(),t=WM();function n(i){return t(i)?r(i):e(i)}return lm=n,lm}var um,$E;function GM(){if($E)return um;$E=1;var r=RM(),e=OM(),t=KM();function n(i){return r(i,t,e)}return um=n,um}var cm,WE;function QM(){if(WE)return cm;WE=1;var r=GM(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,l,c,h,d,v){var g=c&e,m=r(a),y=m.length,T=r(l),S=T.length;if(y!=S&&!g)return!1;for(var w=y;w--;){var E=m[w];if(!(g?E in l:n.call(l,E)))return!1}var b=v.get(a),O=v.get(l);if(b&&O)return b==l&&O==a;var C=!0;v.set(a,l),v.set(l,a);for(var F=g;++w<y;){E=m[w];var U=a[E],P=l[E];if(h)var _=g?h(P,U,E,l,a,v):h(U,P,E,a,l,v);if(!(_===void 0?U===P||d(U,P,c,h,v):_)){C=!1;break}F||(F=E=="constructor")}if(C&&!F){var A=a.constructor,k=l.constructor;A!=k&&"constructor"in a&&"constructor"in l&&!(typeof A=="function"&&A instanceof A&&typeof k=="function"&&k instanceof k)&&(C=!1)}return v.delete(a),v.delete(l),C}return cm=i,cm}var hm,KE;function JM(){if(KE)return hm;KE=1;var r=pa(),e=_i(),t=r(e,"DataView");return hm=t,hm}var fm,GE;function YM(){if(GE)return fm;GE=1;var r=pa(),e=_i(),t=r(e,"Promise");return fm=t,fm}var dm,QE;function XM(){if(QE)return dm;QE=1;var r=pa(),e=_i(),t=r(e,"Set");return dm=t,dm}var pm,JE;function ZM(){if(JE)return pm;JE=1;var r=pa(),e=_i(),t=r(e,"WeakMap");return pm=t,pm}var mm,YE;function ej(){if(YE)return mm;YE=1;var r=JM(),e=sy(),t=YM(),n=XM(),i=ZM(),a=Mh(),l=II(),c="[object Map]",h="[object Object]",d="[object Promise]",v="[object Set]",g="[object WeakMap]",m="[object DataView]",y=l(r),T=l(e),S=l(t),w=l(n),E=l(i),b=a;return(r&&b(new r(new ArrayBuffer(1)))!=m||e&&b(new e)!=c||t&&b(t.resolve())!=d||n&&b(new n)!=v||i&&b(new i)!=g)&&(b=function(O){var C=a(O),F=C==h?O.constructor:void 0,U=F?l(F):"";if(U)switch(U){case y:return m;case T:return c;case S:return d;case w:return v;case E:return g}return C}),mm=b,mm}var gm,XE;function tj(){if(XE)return gm;XE=1;var r=vM(),e=bI(),t=AM(),n=QM(),i=ej(),a=oy(),l=AI(),c=RI(),h=1,d="[object Arguments]",v="[object Array]",g="[object Object]",m=Object.prototype,y=m.hasOwnProperty;function T(S,w,E,b,O,C){var F=a(S),U=a(w),P=F?v:i(S),_=U?v:i(w);P=P==d?g:P,_=_==d?g:_;var A=P==g,k=_==g,R=P==_;if(R&&l(S)){if(!l(w))return!1;F=!0,A=!1}if(R&&!A)return C||(C=new r),F||c(S)?e(S,w,E,b,O,C):t(S,w,P,E,b,O,C);if(!(E&h)){var x=A&&y.call(S,"__wrapped__"),L=k&&y.call(w,"__wrapped__");if(x||L){var $=x?S.value():S,Q=L?w.value():w;return C||(C=new r),O($,Q,E,b,C)}}return R?(C||(C=new r),n(S,w,E,b,O,C)):!1}return gm=T,gm}var ym,ZE;function nj(){if(ZE)return ym;ZE=1;var r=tj(),e=Vh();function t(n,i,a,l,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,l,t,c)}return ym=t,ym}var vm,e1;function rj(){if(e1)return vm;e1=1;var r=nj();function e(t,n){return r(t,n)}return vm=e,vm}var Nc={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var ij=Nc.exports,t1;function sj(){return t1||(t1=1,function(r,e){(function(n,i){r.exports=i()})(typeof self<"u"?self:ij,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var l=n[a]={i:a,l:!1,exports:{}};return t[a].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=n,i.d=function(a,l,c){i.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(l,"a",l),l},i.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},i.p="",i(i.s=109)}([function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),l=i(18),c=i(19),h=i(45),d=i(46),v=i(47),g=i(48),m=i(49),y=i(12),T=i(32),S=i(33),w=i(31),E=i(1),b={Scope:E.Scope,create:E.create,find:E.find,query:E.query,register:E.register,Container:a.default,Format:l.default,Leaf:c.default,Embed:g.default,Scroll:h.default,Block:v.default,Inline:d.default,Text:m.default,Attributor:{Attribute:y.default,Class:T.default,Style:S.default,Store:w.default}};n.default=b},function(t,n,i){var a=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var O in b)b.hasOwnProperty(O)&&(E[O]=b[O])};return function(E,b){w(E,b);function O(){this.constructor=E}E.prototype=b===null?Object.create(b):(O.prototype=b.prototype,new O)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=function(w){a(E,w);function E(b){var O=this;return b="[Parchment] "+b,O=w.call(this,b)||this,O.message=b,O.name=O.constructor.name,O}return E}(Error);n.ParchmentError=l;var c={},h={},d={},v={};n.DATA_KEY="__blot";var g;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(g=n.Scope||(n.Scope={}));function m(w,E){var b=T(w);if(b==null)throw new l("Unable to create "+w+" blot");var O=b,C=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:O.create(E);return new O(C,E)}n.create=m;function y(w,E){return E===void 0&&(E=!1),w==null?null:w[n.DATA_KEY]!=null?w[n.DATA_KEY].blot:E?y(w.parentNode,E):null}n.find=y;function T(w,E){E===void 0&&(E=g.ANY);var b;if(typeof w=="string")b=v[w]||c[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)b=v.text;else if(typeof w=="number")w&g.LEVEL&g.BLOCK?b=v.block:w&g.LEVEL&g.INLINE&&(b=v.inline);else if(w instanceof HTMLElement){var O=(w.getAttribute("class")||"").split(/\s+/);for(var C in O)if(b=h[O[C]],b)break;b=b||d[w.tagName]}return b==null?null:E&g.LEVEL&b.scope&&E&g.TYPE&b.scope?b:null}n.query=T;function S(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];if(w.length>1)return w.map(function(C){return S(C)});var b=w[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new l("Invalid definition");if(b.blotName==="abstract")throw new l("Cannot register abstract class");if(v[b.blotName||b.attrName]=b,typeof b.keyName=="string")c[b.keyName]=b;else if(b.className!=null&&(h[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(C){return C.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var O=Array.isArray(b.tagName)?b.tagName:[b.tagName];O.forEach(function(C){(d[C]==null||b.className==null)&&(d[C]=b)})}return b}n.register=S},function(t,n,i){var a=i(51),l=i(11),c=i(3),h=i(20),d="\0",v=function(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]};v.prototype.insert=function(g,m){var y={};return g.length===0?this:(y.insert=g,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(y.attributes=m),this.push(y))},v.prototype.delete=function(g){return g<=0?this:this.push({delete:g})},v.prototype.retain=function(g,m){if(g<=0)return this;var y={retain:g};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(y.attributes=m),this.push(y)},v.prototype.push=function(g){var m=this.ops.length,y=this.ops[m-1];if(g=c(!0,{},g),typeof y=="object"){if(typeof g.delete=="number"&&typeof y.delete=="number")return this.ops[m-1]={delete:y.delete+g.delete},this;if(typeof y.delete=="number"&&g.insert!=null&&(m-=1,y=this.ops[m-1],typeof y!="object"))return this.ops.unshift(g),this;if(l(g.attributes,y.attributes)){if(typeof g.insert=="string"&&typeof y.insert=="string")return this.ops[m-1]={insert:y.insert+g.insert},typeof g.attributes=="object"&&(this.ops[m-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof y.retain=="number")return this.ops[m-1]={retain:y.retain+g.retain},typeof g.attributes=="object"&&(this.ops[m-1].attributes=g.attributes),this}}return m===this.ops.length?this.ops.push(g):this.ops.splice(m,0,g),this},v.prototype.chop=function(){var g=this.ops[this.ops.length-1];return g&&g.retain&&!g.attributes&&this.ops.pop(),this},v.prototype.filter=function(g){return this.ops.filter(g)},v.prototype.forEach=function(g){this.ops.forEach(g)},v.prototype.map=function(g){return this.ops.map(g)},v.prototype.partition=function(g){var m=[],y=[];return this.forEach(function(T){var S=g(T)?m:y;S.push(T)}),[m,y]},v.prototype.reduce=function(g,m){return this.ops.reduce(g,m)},v.prototype.changeLength=function(){return this.reduce(function(g,m){return m.insert?g+h.length(m):m.delete?g-m.delete:g},0)},v.prototype.length=function(){return this.reduce(function(g,m){return g+h.length(m)},0)},v.prototype.slice=function(g,m){g=g||0,typeof m!="number"&&(m=1/0);for(var y=[],T=h.iterator(this.ops),S=0;S<m&&T.hasNext();){var w;S<g?w=T.next(g-S):(w=T.next(m-S),y.push(w)),S+=h.length(w)}return new v(y)},v.prototype.compose=function(g){var m=h.iterator(this.ops),y=h.iterator(g.ops),T=[],S=y.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){for(var w=S.retain;m.peekType()==="insert"&&m.peekLength()<=w;)w-=m.peekLength(),T.push(m.next());S.retain-w>0&&y.next(S.retain-w)}for(var E=new v(T);m.hasNext()||y.hasNext();)if(y.peekType()==="insert")E.push(y.next());else if(m.peekType()==="delete")E.push(m.next());else{var b=Math.min(m.peekLength(),y.peekLength()),O=m.next(b),C=y.next(b);if(typeof C.retain=="number"){var F={};typeof O.retain=="number"?F.retain=b:F.insert=O.insert;var U=h.attributes.compose(O.attributes,C.attributes,typeof O.retain=="number");if(U&&(F.attributes=U),E.push(F),!y.hasNext()&&l(E.ops[E.ops.length-1],F)){var P=new v(m.rest());return E.concat(P).chop()}}else typeof C.delete=="number"&&typeof O.retain=="number"&&E.push(C)}return E.chop()},v.prototype.concat=function(g){var m=new v(this.ops.slice());return g.ops.length>0&&(m.push(g.ops[0]),m.ops=m.ops.concat(g.ops.slice(1))),m},v.prototype.diff=function(g,m){if(this.ops===g.ops)return new v;var y=[this,g].map(function(b){return b.map(function(O){if(O.insert!=null)return typeof O.insert=="string"?O.insert:d;var C=b===g?"on":"with";throw new Error("diff() called "+C+" non-document")}).join("")}),T=new v,S=a(y[0],y[1],m),w=h.iterator(this.ops),E=h.iterator(g.ops);return S.forEach(function(b){for(var O=b[1].length;O>0;){var C=0;switch(b[0]){case a.INSERT:C=Math.min(E.peekLength(),O),T.push(E.next(C));break;case a.DELETE:C=Math.min(O,w.peekLength()),w.next(C),T.delete(C);break;case a.EQUAL:C=Math.min(w.peekLength(),E.peekLength(),O);var F=w.next(C),U=E.next(C);l(F.insert,U.insert)?T.retain(C,h.attributes.diff(F.attributes,U.attributes)):T.push(U).delete(C);break}O-=C}}),T.chop()},v.prototype.eachLine=function(g,m){m=m||`
`;for(var y=h.iterator(this.ops),T=new v,S=0;y.hasNext();){if(y.peekType()!=="insert")return;var w=y.peek(),E=h.length(w)-y.peekLength(),b=typeof w.insert=="string"?w.insert.indexOf(m,E)-E:-1;if(b<0)T.push(y.next());else if(b>0)T.push(y.next(b));else{if(g(T,y.next(1).attributes||{},S)===!1)return;S+=1,T=new v}}T.length()>0&&g(T,{},S)},v.prototype.transform=function(g,m){if(m=!!m,typeof g=="number")return this.transformPosition(g,m);for(var y=h.iterator(this.ops),T=h.iterator(g.ops),S=new v;y.hasNext()||T.hasNext();)if(y.peekType()==="insert"&&(m||T.peekType()!=="insert"))S.retain(h.length(y.next()));else if(T.peekType()==="insert")S.push(T.next());else{var w=Math.min(y.peekLength(),T.peekLength()),E=y.next(w),b=T.next(w);if(E.delete)continue;b.delete?S.push(b):S.retain(w,h.attributes.transform(E.attributes,b.attributes,m))}return S.chop()},v.prototype.transformPosition=function(g,m){m=!!m;for(var y=h.iterator(this.ops),T=0;y.hasNext()&&T<=g;){var S=y.peekLength(),w=y.peekType();if(y.next(),w==="delete"){g-=Math.min(S,g-T);continue}else w==="insert"&&(T<g||!m)&&(g+=S);T+=S}return g},t.exports=v},function(t,n){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h=function(y){return typeof Array.isArray=="function"?Array.isArray(y):a.call(y)==="[object Array]"},d=function(y){if(!y||a.call(y)!=="[object Object]")return!1;var T=i.call(y,"constructor"),S=y.constructor&&y.constructor.prototype&&i.call(y.constructor.prototype,"isPrototypeOf");if(y.constructor&&!T&&!S)return!1;var w;for(w in y);return typeof w>"u"||i.call(y,w)},v=function(y,T){l&&T.name==="__proto__"?l(y,T.name,{enumerable:!0,configurable:!0,value:T.newValue,writable:!0}):y[T.name]=T.newValue},g=function(y,T){if(T==="__proto__")if(i.call(y,T)){if(c)return c(y,T).value}else return;return y[T]};t.exports=function m(){var y,T,S,w,E,b,O=arguments[0],C=1,F=arguments.length,U=!1;for(typeof O=="boolean"&&(U=O,O=arguments[1]||{},C=2),(O==null||typeof O!="object"&&typeof O!="function")&&(O={});C<F;++C)if(y=arguments[C],y!=null)for(T in y)S=g(O,T),w=g(y,T),O!==w&&(U&&w&&(d(w)||(E=h(w)))?(E?(E=!1,b=S&&h(S)?S:[]):b=S&&d(S)?S:{},v(O,{name:T,newValue:m(U,b,w)})):typeof w<"u"&&v(O,{name:T,newValue:w}));return O}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function R(x,L){for(var $=0;$<L.length;$++){var Q=L[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(x,Q.key,Q)}}return function(x,L,$){return L&&R(x.prototype,L),$&&R(x,$),x}}(),l=function R(x,L,$){x===null&&(x=Function.prototype);var Q=Object.getOwnPropertyDescriptor(x,L);if(Q===void 0){var se=Object.getPrototypeOf(x);return se===null?void 0:R(se,L,$)}else{if("value"in Q)return Q.value;var Z=Q.get;return Z===void 0?void 0:Z.call($)}},c=i(3),h=O(c),d=i(2),v=O(d),g=i(0),m=O(g),y=i(16),T=O(y),S=i(6),w=O(S),E=i(7),b=O(E);function O(R){return R&&R.__esModule?R:{default:R}}function C(R,x){if(!(R instanceof x))throw new TypeError("Cannot call a class as a function")}function F(R,x){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:R}function U(R,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);R.prototype=Object.create(x&&x.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(R,x):R.__proto__=x)}var P=1,_=function(R){U(x,R);function x(){return C(this,x),F(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"attach",value:function(){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function($,Q){var se=m.default.query($,m.default.Scope.BLOCK_ATTRIBUTE);se!=null&&this.attributes.attribute(se,Q)}},{key:"formatAt",value:function($,Q,se,Z){this.format(se,Z)}},{key:"insertAt",value:function($,Q,se){if(typeof Q=="string"&&Q.endsWith(`
`)){var Z=m.default.create(A.blotName);this.parent.insertBefore(Z,$===0?this:this.next),Z.insertAt(0,Q.slice(0,-1))}else l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,$,Q,se)}}]),x}(m.default.Embed);_.scope=m.default.Scope.BLOCK_BLOT;var A=function(R){U(x,R);function x(L){C(this,x);var $=F(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,L));return $.cache={},$}return a(x,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function($,Q){return Q.length()===0?$:$.insert(Q.value(),k(Q))},new v.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function($,Q){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,$,Q),this.cache={}}},{key:"formatAt",value:function($,Q,se,Z){Q<=0||(m.default.query(se,m.default.Scope.BLOCK)?$+Q===this.length()&&this.format(se,Z):l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,$,Math.min(Q,this.length()-$-1),se,Z),this.cache={})}},{key:"insertAt",value:function($,Q,se){if(se!=null)return l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,$,Q,se);if(Q.length!==0){var Z=Q.split(`
`),re=Z.shift();re.length>0&&($<this.length()-1||this.children.tail==null?l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,Math.min($,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var G=this;Z.reduce(function(W,j){return G=G.split(W,!0),G.insertAt(0,j),j.length},$+re.length)}}},{key:"insertBefore",value:function($,Q){var se=this.children.head;l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,$,Q),se instanceof T.default&&se.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function($,Q){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"moveChildren",this).call(this,$,Q),this.cache={}}},{key:"optimize",value:function($){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,$),this.cache={}}},{key:"path",value:function($){return l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,$,!0)}},{key:"removeChild",value:function($){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"removeChild",this).call(this,$),this.cache={}}},{key:"split",value:function($){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Q&&($===0||$>=this.length()-P)){var se=this.clone();return $===0?(this.parent.insertBefore(se,this),this):(this.parent.insertBefore(se,this.next),se)}else{var Z=l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"split",this).call(this,$,Q);return this.cache={},Z}}}]),x}(m.default.Block);A.blotName="block",A.tagName="P",A.defaultChild="break",A.allowedChildren=[w.default,m.default.Embed,b.default];function k(R){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(x=(0,h.default)(x,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?x:k(R.parent,x)}n.bubbleFormats=k,n.BlockEmbed=_,n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,j){var B=[],z=!0,ee=!1,X=void 0;try{for(var H=W[Symbol.iterator](),Y;!(z=(Y=H.next()).done)&&(B.push(Y.value),!(j&&B.length===j));z=!0);}catch(ne){ee=!0,X=ne}finally{try{!z&&H.return&&H.return()}finally{if(ee)throw X}}return B}return function(W,j){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function G(W,j){for(var B=0;B<j.length;B++){var z=j[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(W,z.key,z)}}return function(W,j,B){return j&&G(W.prototype,j),B&&G(W,B),W}}();i(50);var h=i(2),d=k(h),v=i(14),g=k(v),m=i(8),y=k(m),T=i(9),S=k(T),w=i(0),E=k(w),b=i(15),O=k(b),C=i(3),F=k(C),U=i(10),P=k(U),_=i(34),A=k(_);function k(G){return G&&G.__esModule?G:{default:G}}function R(G,W,j){return W in G?Object.defineProperty(G,W,{value:j,enumerable:!0,configurable:!0,writable:!0}):G[W]=j,G}function x(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var L=(0,P.default)("quill"),$=function(){c(G,null,[{key:"debug",value:function(j){j===!0&&(j="log"),P.default.level(j)}},{key:"find",value:function(j){return j.__quill||E.default.find(j)}},{key:"import",value:function(j){return this.imports[j]==null&&L.error("Cannot import "+j+". Are you sure it was registered?"),this.imports[j]}},{key:"register",value:function(j,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof j!="string"){var X=j.attrName||j.blotName;typeof X=="string"?this.register("formats/"+X,j,B):Object.keys(j).forEach(function(H){z.register(H,j[H],B)})}else this.imports[j]!=null&&!ee&&L.warn("Overwriting "+j+" with",B),this.imports[j]=B,(j.startsWith("blots/")||j.startsWith("formats/"))&&B.blotName!=="abstract"?E.default.register(B):j.startsWith("modules")&&typeof B.register=="function"&&B.register()}}]);function G(W){var j=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,G),this.options=Q(W,B),this.container=this.options.container,this.container==null)return L.error("Invalid Quill container",W);this.options.debug&&G.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new y.default,this.scroll=E.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new g.default(this.scroll),this.selection=new O.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(y.default.events.EDITOR_CHANGE,function(X){X===y.default.events.TEXT_CHANGE&&j.root.classList.toggle("ql-blank",j.editor.isBlank())}),this.emitter.on(y.default.events.SCROLL_UPDATE,function(X,H){var Y=j.selection.lastRange,ne=Y&&Y.length===0?Y.index:void 0;se.call(j,function(){return j.editor.update(null,H,ne)},X)});var ee=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(ee),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(G,[{key:"addContainer",value:function(j){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof j=="string"){var z=j;j=document.createElement("div"),j.classList.add(z)}return this.container.insertBefore(j,B),j}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(j,B,z){var ee=this,X=Z(j,B,z),H=l(X,4);return j=H[0],B=H[1],z=H[3],se.call(this,function(){return ee.editor.deleteText(j,B)},z,j,-1*B)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(j),this.container.classList.toggle("ql-disabled",!j)}},{key:"focus",value:function(){var j=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=j,this.scrollIntoView()}},{key:"format",value:function(j,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;return se.call(this,function(){var X=z.getSelection(!0),H=new d.default;if(X==null)return H;if(E.default.query(j,E.default.Scope.BLOCK))H=z.editor.formatLine(X.index,X.length,R({},j,B));else{if(X.length===0)return z.selection.format(j,B),H;H=z.editor.formatText(X.index,X.length,R({},j,B))}return z.setSelection(X,y.default.sources.SILENT),H},ee)}},{key:"formatLine",value:function(j,B,z,ee,X){var H=this,Y=void 0,ne=Z(j,B,z,ee,X),ie=l(ne,4);return j=ie[0],B=ie[1],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.formatLine(j,B,Y)},X,j,0)}},{key:"formatText",value:function(j,B,z,ee,X){var H=this,Y=void 0,ne=Z(j,B,z,ee,X),ie=l(ne,4);return j=ie[0],B=ie[1],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.formatText(j,B,Y)},X,j,0)}},{key:"getBounds",value:function(j){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof j=="number"?z=this.selection.getBounds(j,B):z=this.selection.getBounds(j.index,j.length);var ee=this.container.getBoundingClientRect();return{bottom:z.bottom-ee.top,height:z.height,left:z.left-ee.left,right:z.right-ee.left,top:z.top-ee.top,width:z.width}}},{key:"getContents",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,z=Z(j,B),ee=l(z,2);return j=ee[0],B=ee[1],this.editor.getContents(j,B)}},{key:"getFormat",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof j=="number"?this.editor.getFormat(j,B):this.editor.getFormat(j.index,j.length)}},{key:"getIndex",value:function(j){return j.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(j){return this.scroll.leaf(j)}},{key:"getLine",value:function(j){return this.scroll.line(j)}},{key:"getLines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof j!="number"?this.scroll.lines(j.index,j.length):this.scroll.lines(j,B)}},{key:"getModule",value:function(j){return this.theme.modules[j]}},{key:"getSelection",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return j&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,z=Z(j,B),ee=l(z,2);return j=ee[0],B=ee[1],this.editor.getText(j,B)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(j,B,z){var ee=this,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G.sources.API;return se.call(this,function(){return ee.editor.insertEmbed(j,B,z)},X,j)}},{key:"insertText",value:function(j,B,z,ee,X){var H=this,Y=void 0,ne=Z(j,0,z,ee,X),ie=l(ne,4);return j=ie[0],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.insertText(j,B,Y)},X,j,B.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(j,B,z){this.clipboard.dangerouslyPasteHTML(j,B,z)}},{key:"removeFormat",value:function(j,B,z){var ee=this,X=Z(j,B,z),H=l(X,4);return j=H[0],B=H[1],z=H[3],se.call(this,function(){return ee.editor.removeFormat(j,B)},z,j)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(j){var B=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return se.call(this,function(){j=new d.default(j);var ee=B.getLength(),X=B.editor.deleteText(0,ee),H=B.editor.applyDelta(j),Y=H.ops[H.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(B.editor.deleteText(B.getLength()-1,1),H.delete(1));var ne=X.compose(H);return ne},z)}},{key:"setSelection",value:function(j,B,z){if(j==null)this.selection.setRange(null,B||G.sources.API);else{var ee=Z(j,B,z),X=l(ee,4);j=X[0],B=X[1],z=X[3],this.selection.setRange(new b.Range(j,B),z),z!==y.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(j){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API,z=new d.default().insert(j);return this.setContents(z,B)}},{key:"update",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,B=this.scroll.update(j);return this.selection.update(j),B}},{key:"updateContents",value:function(j){var B=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return se.call(this,function(){return j=new d.default(j),B.editor.applyDelta(j,z)},z,!0)}}]),G}();$.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},$.events=y.default.events,$.sources=y.default.sources,$.version="1.3.7",$.imports={delta:d.default,parchment:E.default,"core/module":S.default,"core/theme":A.default};function Q(G,W){if(W=(0,F.default)(!0,{container:G,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===$.DEFAULTS.theme)W.theme=A.default;else if(W.theme=$.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var j=(0,F.default)(!0,{},W.theme.DEFAULTS);[j,W].forEach(function(ee){ee.modules=ee.modules||{},Object.keys(ee.modules).forEach(function(X){ee.modules[X]===!0&&(ee.modules[X]={})})});var B=Object.keys(j.modules).concat(Object.keys(W.modules)),z=B.reduce(function(ee,X){var H=$.import("modules/"+X);return H==null?L.error("Cannot load "+X+" module. Are you sure you registered it?"):ee[X]=H.DEFAULTS||{},ee},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,F.default)(!0,{},$.DEFAULTS,{modules:z},j,W),["bounds","container","scrollingContainer"].forEach(function(ee){typeof W[ee]=="string"&&(W[ee]=document.querySelector(W[ee]))}),W.modules=Object.keys(W.modules).reduce(function(ee,X){return W.modules[X]&&(ee[X]=W.modules[X]),ee},{}),W}function se(G,W,j,B){if(this.options.strict&&!this.isEnabled()&&W===y.default.sources.USER)return new d.default;var z=j==null?null:this.getSelection(),ee=this.editor.delta,X=G();if(z!=null&&(j===!0&&(j=z.index),B==null?z=re(z,X,W):B!==0&&(z=re(z,j,B,W)),this.setSelection(z,y.default.sources.SILENT)),X.length()>0){var H,Y=[y.default.events.TEXT_CHANGE,X,ee,W];if((H=this.emitter).emit.apply(H,[y.default.events.EDITOR_CHANGE].concat(Y)),W!==y.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,Y)}}return X}function Z(G,W,j,B,z){var ee={};return typeof G.index=="number"&&typeof G.length=="number"?typeof W!="number"?(z=B,B=j,j=W,W=G.length,G=G.index):(W=G.length,G=G.index):typeof W!="number"&&(z=B,B=j,j=W,W=0),(typeof j>"u"?"undefined":a(j))==="object"?(ee=j,z=B):typeof j=="string"&&(B!=null?ee[j]=B:z=j),z=z||y.default.sources.API,[G,W,ee,z]}function re(G,W,j,B){if(G==null)return null;var z=void 0,ee=void 0;if(W instanceof d.default){var X=[G.index,G.index+G.length].map(function(ie){return W.transformPosition(ie,B!==y.default.sources.USER)}),H=l(X,2);z=H[0],ee=H[1]}else{var Y=[G.index,G.index+G.length].map(function(ie){return ie<W||ie===W&&B===y.default.sources.USER?ie:j>=0?ie+j:Math.max(W,ie+j)}),ne=l(Y,2);z=ne[0],ee=ne[1]}return new b.Range(z,ee-z)}n.expandConfig=Q,n.overload=Z,n.default=$},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(E,b){for(var O=0;O<b.length;O++){var C=b[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,b,O){return b&&w(E.prototype,b),O&&w(E,O),E}}(),l=function w(E,b,O){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,b);if(C===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,b,O)}else{if("value"in C)return C.value;var U=C.get;return U===void 0?void 0:U.call(O)}},c=i(7),h=g(c),d=i(0),v=g(d);function g(w){return w&&w.__esModule?w:{default:w}}function m(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function y(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function T(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var S=function(w){T(E,w);function E(){return m(this,E),y(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"formatAt",value:function(O,C,F,U){if(E.compare(this.statics.blotName,F)<0&&v.default.query(F,v.default.Scope.BLOT)){var P=this.isolate(O,C);U&&P.wrap(F,U)}else l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,O,C,F,U)}},{key:"optimize",value:function(O){if(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,O),this.parent instanceof E&&E.compare(this.statics.blotName,this.parent.statics.blotName)>0){var C=this.parent.isolate(this.offset(),this.length());this.moveChildren(C),C.wrap(this)}}}],[{key:"compare",value:function(O,C){var F=E.order.indexOf(O),U=E.order.indexOf(C);return F>=0||U>=0?F-U:O===C?0:O<C?-1:1}}]),E}(v.default.Inline);S.allowedChildren=[S,v.default.Embed,h.default],S.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function v(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=function(m){v(y,m);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default.Text);n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(O,C){for(var F=0;F<C.length;F++){var U=C[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,C,F){return C&&b(O.prototype,C),F&&b(O,F),O}}(),l=function b(O,C,F){O===null&&(O=Function.prototype);var U=Object.getOwnPropertyDescriptor(O,C);if(U===void 0){var P=Object.getPrototypeOf(O);return P===null?void 0:b(P,C,F)}else{if("value"in U)return U.value;var _=U.get;return _===void 0?void 0:_.call(F)}},c=i(54),h=g(c),d=i(10),v=g(d);function g(b){return b&&b.__esModule?b:{default:b}}function m(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function y(b,O){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:b}function T(b,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);b.prototype=Object.create(O&&O.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(b,O):b.__proto__=O)}var S=(0,v.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(b){document.addEventListener(b,function(){for(var O=arguments.length,C=Array(O),F=0;F<O;F++)C[F]=arguments[F];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(U){if(U.__quill&&U.__quill.emitter){var P;(P=U.__quill.emitter).handleDOM.apply(P,C)}})})});var E=function(b){T(O,b);function O(){m(this,O);var C=y(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return C.listeners={},C.on("error",S.error),C}return a(O,[{key:"emit",value:function(){S.log.apply(S,arguments),l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(F){for(var U=arguments.length,P=Array(U>1?U-1:0),_=1;_<U;_++)P[_-1]=arguments[_];(this.listeners[F.type]||[]).forEach(function(A){var k=A.node,R=A.handler;(F.target===k||k.contains(F.target))&&R.apply(void 0,[F].concat(P))})}},{key:"listenDOM",value:function(F,U,P){this.listeners[F]||(this.listeners[F]=[]),this.listeners[F].push({node:U,handler:P})}}]),O}(h.default);E.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},E.sources={API:"api",SILENT:"silent",USER:"user"},n.default=E},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});function a(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function c(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=h,this.options=d};l.DEFAULTS={},n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],l="warn";function c(d){if(a.indexOf(d)<=a.indexOf(l)){for(var v,g=arguments.length,m=Array(g>1?g-1:0),y=1;y<g;y++)m[y-1]=arguments[y];(v=console)[d].apply(v,m)}}function h(d){return a.reduce(function(v,g){return v[g]=c.bind(console,g,d),v},{})}c.level=h.level=function(d){l=d},n.default=h},function(t,n,i){var a=Array.prototype.slice,l=i(52),c=i(53),h=t.exports=function(m,y,T){return T||(T={}),m===y?!0:m instanceof Date&&y instanceof Date?m.getTime()===y.getTime():!m||!y||typeof m!="object"&&typeof y!="object"?T.strict?m===y:m==y:g(m,y,T)};function d(m){return m==null}function v(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function g(m,y,T){var S,w;if(d(m)||d(y)||m.prototype!==y.prototype)return!1;if(c(m))return c(y)?(m=a.call(m),y=a.call(y),h(m,y,T)):!1;if(v(m)){if(!v(y)||m.length!==y.length)return!1;for(S=0;S<m.length;S++)if(m[S]!==y[S])return!1;return!0}try{var E=l(m),b=l(y)}catch{return!1}if(E.length!=b.length)return!1;for(E.sort(),b.sort(),S=E.length-1;S>=0;S--)if(E[S]!=b[S])return!1;for(S=E.length-1;S>=0;S--)if(w=E[S],!h(m[w],y[w],T))return!1;return typeof m==typeof y}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),l=function(){function c(h,d,v){v===void 0&&(v={}),this.attrName=h,this.keyName=d;var g=a.Scope.TYPE&a.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&a.Scope.LEVEL|g:this.scope=a.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return c.keys=function(h){return[].map.call(h.attributes,function(d){return d.name})},c.prototype.add=function(h,d){return this.canAdd(h,d)?(h.setAttribute(this.keyName,d),!0):!1},c.prototype.canAdd=function(h,d){var v=a.query(h,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},c.prototype.remove=function(h){h.removeAttribute(this.keyName)},c.prototype.value=function(h){var d=h.getAttribute(this.keyName);return this.canAdd(h,d)&&d?d:""},c}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function _(A,k){var R=[],x=!0,L=!1,$=void 0;try{for(var Q=A[Symbol.iterator](),se;!(x=(se=Q.next()).done)&&(R.push(se.value),!(k&&R.length===k));x=!0);}catch(Z){L=!0,$=Z}finally{try{!x&&Q.return&&Q.return()}finally{if(L)throw $}}return R}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(A,k){for(var R=0;R<k.length;R++){var x=k[R];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(A,x.key,x)}}return function(A,k,R){return k&&_(A.prototype,k),R&&_(A,R),A}}(),c=function _(A,k,R){A===null&&(A=Function.prototype);var x=Object.getOwnPropertyDescriptor(A,k);if(x===void 0){var L=Object.getPrototypeOf(A);return L===null?void 0:_(L,k,R)}else{if("value"in x)return x.value;var $=x.get;return $===void 0?void 0:$.call(R)}},h=i(2),d=b(h),v=i(0),g=b(v),m=i(4),y=b(m),T=i(6),S=b(T),w=i(7),E=b(w);function b(_){return _&&_.__esModule?_:{default:_}}function O(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function C(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function F(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var U=function(_){F(A,_);function A(){return O(this,A),C(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(S.default);U.blotName="code",U.tagName="CODE";var P=function(_){F(A,_);function A(){return O(this,A),C(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return l(A,[{key:"delta",value:function(){var R=this,x=this.domNode.textContent;return x.endsWith(`
`)&&(x=x.slice(0,-1)),x.split(`
`).reduce(function(L,$){return L.insert($).insert(`
`,R.formats())},new d.default)}},{key:"format",value:function(R,x){if(!(R===this.statics.blotName&&x)){var L=this.descendant(E.default,this.length()-1),$=a(L,1),Q=$[0];Q!=null&&Q.deleteAt(Q.length()-1,1),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,R,x)}}},{key:"formatAt",value:function(R,x,L,$){if(x!==0&&!(g.default.query(L,g.default.Scope.BLOCK)==null||L===this.statics.blotName&&$===this.statics.formats(this.domNode))){var Q=this.newlineIndex(R);if(!(Q<0||Q>=R+x)){var se=this.newlineIndex(R,!0)+1,Z=Q-se+1,re=this.isolate(se,Z),G=re.next;re.format(L,$),G instanceof A&&G.formatAt(0,R-se+x-Z,L,$)}}}},{key:"insertAt",value:function(R,x,L){if(L==null){var $=this.descendant(E.default,R),Q=a($,2),se=Q[0],Z=Q[1];se.insertAt(Z,x)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(x)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var L=this.domNode.textContent.slice(R).indexOf(`
`);return L>-1?R+L:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(g.default.create("text",`
`)),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,R);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===x.statics.formats(x.domNode)&&(x.optimize(R),x.moveChildren(this),x.remove())}},{key:"replace",value:function(R){c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(x){var L=g.default.find(x);L==null?x.parentNode.removeChild(x):L instanceof g.default.Embed?L.remove():L.unwrap()})}}],[{key:"create",value:function(R){var x=c(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,R);return x.setAttribute("spellcheck",!1),x}},{key:"formats",value:function(){return!0}}]),A}(y.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",n.Code=U,n.default=P},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,j){var B=[],z=!0,ee=!1,X=void 0;try{for(var H=W[Symbol.iterator](),Y;!(z=(Y=H.next()).done)&&(B.push(Y.value),!(j&&B.length===j));z=!0);}catch(ne){ee=!0,X=ne}finally{try{!z&&H.return&&H.return()}finally{if(ee)throw X}}return B}return function(W,j){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function G(W,j){for(var B=0;B<j.length;B++){var z=j[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(W,z.key,z)}}return function(W,j,B){return j&&G(W.prototype,j),B&&G(W,B),W}}(),h=i(2),d=x(h),v=i(20),g=x(v),m=i(0),y=x(m),T=i(13),S=x(T),w=i(24),E=x(w),b=i(4),O=x(b),C=i(16),F=x(C),U=i(21),P=x(U),_=i(11),A=x(_),k=i(3),R=x(k);function x(G){return G&&G.__esModule?G:{default:G}}function L(G,W,j){return W in G?Object.defineProperty(G,W,{value:j,enumerable:!0,configurable:!0,writable:!0}):G[W]=j,G}function $(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var Q=/^[ -~]*$/,se=function(){function G(W){$(this,G),this.scroll=W,this.delta=this.getDelta()}return c(G,[{key:"applyDelta",value:function(j){var B=this,z=!1;this.scroll.update();var ee=this.scroll.length();return this.scroll.batchStart(),j=re(j),j.reduce(function(X,H){var Y=H.retain||H.delete||H.insert.length||1,ne=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var ie=H.insert;ie.endsWith(`
`)&&z&&(z=!1,ie=ie.slice(0,-1)),X>=ee&&!ie.endsWith(`
`)&&(z=!0),B.scroll.insertAt(X,ie);var fe=B.scroll.line(X),ve=l(fe,2),ke=ve[0],Re=ve[1],xe=(0,R.default)({},(0,b.bubbleFormats)(ke));if(ke instanceof O.default){var De=ke.descendant(y.default.Leaf,Re),Ue=l(De,1),et=Ue[0];xe=(0,R.default)(xe,(0,b.bubbleFormats)(et))}ne=g.default.attributes.diff(xe,ne)||{}}else if(a(H.insert)==="object"){var ue=Object.keys(H.insert)[0];if(ue==null)return X;B.scroll.insertAt(X,ue,H.insert[ue])}ee+=Y}return Object.keys(ne).forEach(function(de){B.scroll.formatAt(X,Y,de,ne[de])}),X+Y},0),j.reduce(function(X,H){return typeof H.delete=="number"?(B.scroll.deleteAt(X,H.delete),X):X+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(j)}},{key:"deleteText",value:function(j,B){return this.scroll.deleteAt(j,B),this.update(new d.default().retain(j).delete(B))}},{key:"formatLine",value:function(j,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ee).forEach(function(X){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[X])){var H=z.scroll.lines(j,Math.max(B,1)),Y=B;H.forEach(function(ne){var ie=ne.length();if(!(ne instanceof S.default))ne.format(X,ee[X]);else{var fe=j-ne.offset(z.scroll),ve=ne.newlineIndex(fe+Y)-fe+1;ne.formatAt(fe,ve,X,ee[X])}Y-=ie})}}),this.scroll.optimize(),this.update(new d.default().retain(j).retain(B,(0,P.default)(ee)))}},{key:"formatText",value:function(j,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ee).forEach(function(X){z.scroll.formatAt(j,B,X,ee[X])}),this.update(new d.default().retain(j).retain(B,(0,P.default)(ee)))}},{key:"getContents",value:function(j,B){return this.delta.slice(j,j+B)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(j,B){return j.concat(B.delta())},new d.default)}},{key:"getFormat",value:function(j){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],ee=[];B===0?this.scroll.path(j).forEach(function(H){var Y=l(H,1),ne=Y[0];ne instanceof O.default?z.push(ne):ne instanceof y.default.Leaf&&ee.push(ne)}):(z=this.scroll.lines(j,B),ee=this.scroll.descendants(y.default.Leaf,j,B));var X=[z,ee].map(function(H){if(H.length===0)return{};for(var Y=(0,b.bubbleFormats)(H.shift());Object.keys(Y).length>0;){var ne=H.shift();if(ne==null)return Y;Y=Z((0,b.bubbleFormats)(ne),Y)}return Y});return R.default.apply(R.default,X)}},{key:"getText",value:function(j,B){return this.getContents(j,B).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(j,B,z){return this.scroll.insertAt(j,B,z),this.update(new d.default().retain(j).insert(L({},B,z)))}},{key:"insertText",value:function(j,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return B=B.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(j,B),Object.keys(ee).forEach(function(X){z.scroll.formatAt(j,B.length,X,ee[X])}),this.update(new d.default().retain(j).insert(B,(0,P.default)(ee)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var j=this.scroll.children.head;return j.statics.blotName!==O.default.blotName||j.children.length>1?!1:j.children.head instanceof F.default}},{key:"removeFormat",value:function(j,B){var z=this.getText(j,B),ee=this.scroll.line(j+B),X=l(ee,2),H=X[0],Y=X[1],ne=0,ie=new d.default;H!=null&&(H instanceof S.default?ne=H.newlineIndex(Y)-Y+1:ne=H.length()-Y,ie=H.delta().slice(Y,Y+ne-1).insert(`
`));var fe=this.getContents(j,B+ne),ve=fe.diff(new d.default().insert(z).concat(ie)),ke=new d.default().retain(j).concat(ve);return this.applyDelta(ke)}},{key:"update",value:function(j){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ee=this.delta;if(B.length===1&&B[0].type==="characterData"&&B[0].target.data.match(Q)&&y.default.find(B[0].target)){var X=y.default.find(B[0].target),H=(0,b.bubbleFormats)(X),Y=X.offset(this.scroll),ne=B[0].oldValue.replace(E.default.CONTENTS,""),ie=new d.default().insert(ne),fe=new d.default().insert(X.value()),ve=new d.default().retain(Y).concat(ie.diff(fe,z));j=ve.reduce(function(ke,Re){return Re.insert?ke.insert(Re.insert,H):ke.push(Re)},new d.default),this.delta=ee.compose(j)}else this.delta=this.getDelta(),(!j||!(0,A.default)(ee.compose(j),this.delta))&&(j=ee.diff(this.delta,z));return j}}]),G}();function Z(G,W){return Object.keys(W).reduce(function(j,B){return G[B]==null||(W[B]===G[B]?j[B]=W[B]:Array.isArray(W[B])?W[B].indexOf(G[B])<0&&(j[B]=W[B].concat([G[B]])):j[B]=[W[B],G[B]]),j},{})}function re(G){return G.reduce(function(W,j){if(j.insert===1){var B=(0,P.default)(j.attributes);return delete B.image,W.insert({image:j.attributes.image},B)}if(j.attributes!=null&&(j.attributes.list===!0||j.attributes.bullet===!0)&&(j=(0,P.default)(j),j.attributes.list?j.attributes.list="ordered":(j.attributes.list="bullet",delete j.attributes.bullet)),typeof j.insert=="string"){var z=j.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(z,j.attributes)}return W.push(j)},new d.default)}n.default=se},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function _(A,k){var R=[],x=!0,L=!1,$=void 0;try{for(var Q=A[Symbol.iterator](),se;!(x=(se=Q.next()).done)&&(R.push(se.value),!(k&&R.length===k));x=!0);}catch(Z){L=!0,$=Z}finally{try{!x&&Q.return&&Q.return()}finally{if(L)throw $}}return R}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(A,k){for(var R=0;R<k.length;R++){var x=k[R];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(A,x.key,x)}}return function(A,k,R){return k&&_(A.prototype,k),R&&_(A,R),A}}(),c=i(0),h=E(c),d=i(21),v=E(d),g=i(11),m=E(g),y=i(8),T=E(y),S=i(10),w=E(S);function E(_){return _&&_.__esModule?_:{default:_}}function b(_){if(Array.isArray(_)){for(var A=0,k=Array(_.length);A<_.length;A++)k[A]=_[A];return k}else return Array.from(_)}function O(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var C=(0,w.default)("quill:selection"),F=function _(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;O(this,_),this.index=A,this.length=k},U=function(){function _(A,k){var R=this;O(this,_),this.emitter=k,this.scroll=A,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new F(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,T.default.sources.USER),1)}),this.emitter.on(T.default.events.EDITOR_CHANGE,function(x,L){x===T.default.events.TEXT_CHANGE&&L.length()>0&&R.update(T.default.sources.SILENT)}),this.emitter.on(T.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var x=R.getNativeRange();x!=null&&x.start.node!==R.cursor.textNode&&R.emitter.once(T.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(x.start.node,x.start.offset,x.end.node,x.end.offset)}catch{}})}}),this.emitter.on(T.default.events.SCROLL_OPTIMIZE,function(x,L){if(L.range){var $=L.range,Q=$.startNode,se=$.startOffset,Z=$.endNode,re=$.endOffset;R.setNativeRange(Q,se,Z,re)}}),this.update(T.default.sources.SILENT)}return l(_,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var R=k.cursor.restore();if(!R)return;setTimeout(function(){k.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(T.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var x=this.getNativeRange();if(!(x==null||!x.native.collapsed||h.default.query(k,h.default.Scope.BLOCK))){if(x.start.node!==this.cursor.textNode){var L=h.default.find(x.start.node,!1);if(L==null)return;if(L instanceof h.default.Leaf){var $=L.split(x.start.offset);L.parent.insertBefore(this.cursor,$)}else L.insertBefore(this.cursor,x.start.node);this.cursor.attach()}this.cursor.format(k,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=this.scroll.length();k=Math.min(k,x-1),R=Math.min(k+R,x-1)-k;var L=void 0,$=this.scroll.leaf(k),Q=a($,2),se=Q[0],Z=Q[1];if(se==null)return null;var re=se.position(Z,!0),G=a(re,2);L=G[0],Z=G[1];var W=document.createRange();if(R>0){W.setStart(L,Z);var j=this.scroll.leaf(k+R),B=a(j,2);if(se=B[0],Z=B[1],se==null)return null;var z=se.position(Z,!0),ee=a(z,2);return L=ee[0],Z=ee[1],W.setEnd(L,Z),W.getBoundingClientRect()}else{var X="left",H=void 0;return L instanceof Text?(Z<L.data.length?(W.setStart(L,Z),W.setEnd(L,Z+1)):(W.setStart(L,Z-1),W.setEnd(L,Z),X="right"),H=W.getBoundingClientRect()):(H=se.domNode.getBoundingClientRect(),Z>0&&(X="right")),{bottom:H.top+H.height,height:H.height,left:H[X],right:H[X],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var R=k.getRangeAt(0);if(R==null)return null;var x=this.normalizeNative(R);return C.info("getNativeRange",x),x}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var R=this.normalizedToRange(k);return[R,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var R=this,x=[[k.start.node,k.start.offset]];k.native.collapsed||x.push([k.end.node,k.end.offset]);var L=x.map(function(se){var Z=a(se,2),re=Z[0],G=Z[1],W=h.default.find(re,!0),j=W.offset(R.scroll);return G===0?j:W instanceof h.default.Container?j+W.length():j+W.index(re,G)}),$=Math.min(Math.max.apply(Math,b(L)),this.scroll.length()-1),Q=Math.min.apply(Math,[$].concat(b(L)));return new F(Q,$-Q)}},{key:"normalizeNative",value:function(k){if(!P(this.root,k.startContainer)||!k.collapsed&&!P(this.root,k.endContainer))return null;var R={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[R.start,R.end].forEach(function(x){for(var L=x.node,$=x.offset;!(L instanceof Text)&&L.childNodes.length>0;)if(L.childNodes.length>$)L=L.childNodes[$],$=0;else if(L.childNodes.length===$)L=L.lastChild,$=L instanceof Text?L.data.length:L.childNodes.length+1;else break;x.node=L,x.offset=$}),R}},{key:"rangeToNative",value:function(k){var R=this,x=k.collapsed?[k.index]:[k.index,k.index+k.length],L=[],$=this.scroll.length();return x.forEach(function(Q,se){Q=Math.min($-1,Q);var Z=void 0,re=R.scroll.leaf(Q),G=a(re,2),W=G[0],j=G[1],B=W.position(j,se!==0),z=a(B,2);Z=z[0],j=z[1],L.push(Z,j)}),L.length<2&&(L=L.concat(L)),L}},{key:"scrollIntoView",value:function(k){var R=this.lastRange;if(R!=null){var x=this.getBounds(R.index,R.length);if(x!=null){var L=this.scroll.length()-1,$=this.scroll.line(Math.min(R.index,L)),Q=a($,1),se=Q[0],Z=se;if(R.length>0){var re=this.scroll.line(Math.min(R.index+R.length,L)),G=a(re,1);Z=G[0]}if(!(se==null||Z==null)){var W=k.getBoundingClientRect();x.top<W.top?k.scrollTop-=W.top-x.top:x.bottom>W.bottom&&(k.scrollTop+=x.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(k,R){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(C.info("setNativeRange",k,R,x,L),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||x.parentNode==null))){var Q=document.getSelection();if(Q!=null)if(k!=null){this.hasFocus()||this.root.focus();var se=(this.getNativeRange()||{}).native;if(se==null||$||k!==se.startContainer||R!==se.startOffset||x!==se.endContainer||L!==se.endOffset){k.tagName=="BR"&&(R=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),x.tagName=="BR"&&(L=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode);var Z=document.createRange();Z.setStart(k,R),Z.setEnd(x,L),Q.removeAllRanges(),Q.addRange(Z)}}else Q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.default.sources.API;if(typeof R=="string"&&(x=R,R=!1),C.info("setRange",k),k!=null){var L=this.rangeToNative(k);this.setNativeRange.apply(this,b(L).concat([R]))}else this.setNativeRange(null);this.update(x)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T.default.sources.USER,R=this.lastRange,x=this.getRange(),L=a(x,2),$=L[0],Q=L[1];if(this.lastRange=$,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(R,this.lastRange)){var se;!this.composing&&Q!=null&&Q.native.collapsed&&Q.start.node!==this.cursor.textNode&&this.cursor.restore();var Z=[T.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(R),k];if((se=this.emitter).emit.apply(se,[T.default.events.EDITOR_CHANGE].concat(Z)),k!==T.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Z)}}}}]),_}();function P(_,A){try{A.parentNode}catch{return!1}return A instanceof Text&&(A=A.parentNode),_.contains(A)}n.Range=F,n.default=U},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var b=w[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,w);if(b===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:T(O,w,E)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(E)}},c=i(0),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function m(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){m(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"insertInto",value:function(E,b){E.children.length===0?l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertInto",this).call(this,E,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),S}(h.default.Embed);y.blotName="break",y.tagName="BR",n.default=y},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var T in y)y.hasOwnProperty(T)&&(m[T]=y[T])};return function(m,y){g(m,y);function T(){this.constructor=m}m.prototype=y===null?Object.create(y):(T.prototype=y.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(44),c=i(30),h=i(1),d=function(g){a(m,g);function m(y){var T=g.call(this,y)||this;return T.build(),T}return m.prototype.appendChild=function(y){this.insertBefore(y)},m.prototype.attach=function(){g.prototype.attach.call(this),this.children.forEach(function(y){y.attach()})},m.prototype.build=function(){var y=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(T){try{var S=v(T);y.insertBefore(S,y.children.head||void 0)}catch(w){if(w instanceof h.ParchmentError)return;throw w}})},m.prototype.deleteAt=function(y,T){if(y===0&&T===this.length())return this.remove();this.children.forEachAt(y,T,function(S,w,E){S.deleteAt(w,E)})},m.prototype.descendant=function(y,T){var S=this.children.find(T),w=S[0],E=S[1];return y.blotName==null&&y(w)||y.blotName!=null&&w instanceof y?[w,E]:w instanceof m?w.descendant(y,E):[null,-1]},m.prototype.descendants=function(y,T,S){T===void 0&&(T=0),S===void 0&&(S=Number.MAX_VALUE);var w=[],E=S;return this.children.forEachAt(T,S,function(b,O,C){(y.blotName==null&&y(b)||y.blotName!=null&&b instanceof y)&&w.push(b),b instanceof m&&(w=w.concat(b.descendants(y,O,E))),E-=C}),w},m.prototype.detach=function(){this.children.forEach(function(y){y.detach()}),g.prototype.detach.call(this)},m.prototype.formatAt=function(y,T,S,w){this.children.forEachAt(y,T,function(E,b,O){E.formatAt(b,O,S,w)})},m.prototype.insertAt=function(y,T,S){var w=this.children.find(y),E=w[0],b=w[1];if(E)E.insertAt(b,T,S);else{var O=S==null?h.create("text",T):h.create(T,S);this.appendChild(O)}},m.prototype.insertBefore=function(y,T){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(S){return y instanceof S}))throw new h.ParchmentError("Cannot insert "+y.statics.blotName+" into "+this.statics.blotName);y.insertInto(this,T)},m.prototype.length=function(){return this.children.reduce(function(y,T){return y+T.length()},0)},m.prototype.moveChildren=function(y,T){this.children.forEach(function(S){y.insertBefore(S,T)})},m.prototype.optimize=function(y){if(g.prototype.optimize.call(this,y),this.children.length===0)if(this.statics.defaultChild!=null){var T=h.create(this.statics.defaultChild);this.appendChild(T),T.optimize(y)}else this.remove()},m.prototype.path=function(y,T){T===void 0&&(T=!1);var S=this.children.find(y,T),w=S[0],E=S[1],b=[[this,y]];return w instanceof m?b.concat(w.path(E,T)):(w!=null&&b.push([w,E]),b)},m.prototype.removeChild=function(y){this.children.remove(y)},m.prototype.replace=function(y){y instanceof m&&y.moveChildren(this),g.prototype.replace.call(this,y)},m.prototype.split=function(y,T){if(T===void 0&&(T=!1),!T){if(y===0)return this;if(y===this.length())return this.next}var S=this.clone();return this.parent.insertBefore(S,this.next),this.children.forEachAt(y,this.length(),function(w,E,b){w=w.split(E,T),S.appendChild(w)}),S},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(y,T){var S=this,w=[],E=[];y.forEach(function(b){b.target===S.domNode&&b.type==="childList"&&(w.push.apply(w,b.addedNodes),E.push.apply(E,b.removedNodes))}),E.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var O=h.find(b);O!=null&&(O.domNode.parentNode==null||O.domNode.parentNode===S.domNode)&&O.detach()}}),w.filter(function(b){return b.parentNode==S.domNode}).sort(function(b,O){return b===O?0:b.compareDocumentPosition(O)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var O=null;b.nextSibling!=null&&(O=h.find(b.nextSibling));var C=v(b);(C.next!=O||C.next==null)&&(C.parent!=null&&C.parent.removeChild(S),S.insertBefore(C,O||void 0))})},m}(c.default);function v(g){var m=h.find(g);if(m==null)try{m=h.create(g)}catch{m=h.create(h.Scope.INLINE),[].slice.call(g.childNodes).forEach(function(T){m.domNode.appendChild(T)}),g.parentNode&&g.parentNode.replaceChild(m.domNode,g),m.attach()}return m}n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var T in y)y.hasOwnProperty(T)&&(m[T]=y[T])};return function(m,y){g(m,y);function T(){this.constructor=m}m.prototype=y===null?Object.create(y):(T.prototype=y.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12),c=i(31),h=i(17),d=i(1),v=function(g){a(m,g);function m(y){var T=g.call(this,y)||this;return T.attributes=new c.default(T.domNode),T}return m.formats=function(y){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return y.tagName.toLowerCase()},m.prototype.format=function(y,T){var S=d.query(y);S instanceof l.default?this.attributes.attribute(S,T):T&&S!=null&&(y!==this.statics.blotName||this.formats()[y]!==T)&&this.replaceWith(y,T)},m.prototype.formats=function(){var y=this.attributes.values(),T=this.statics.formats(this.domNode);return T!=null&&(y[this.statics.blotName]=T),y},m.prototype.replaceWith=function(y,T){var S=g.prototype.replaceWith.call(this,y,T);return this.attributes.copy(S),S},m.prototype.update=function(y,T){var S=this;g.prototype.update.call(this,y,T),y.some(function(w){return w.target===S.domNode&&w.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(y,T){var S=g.prototype.wrap.call(this,y,T);return S instanceof m&&S.statics.scope===this.statics.scope&&this.attributes.move(S),S},m}(h.default);n.default=v},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var m in g)g.hasOwnProperty(m)&&(v[m]=g[m])};return function(v,g){d(v,g);function m(){this.constructor=v}v.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(30),c=i(1),h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.value=function(g){return!0},v.prototype.index=function(g,m){return this.domNode===g||this.domNode.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},v.prototype.position=function(g,m){var y=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return g>0&&(y+=1),[this.parent.domNode,y]},v.prototype.value=function(){var g;return g={},g[this.statics.blotName]=this.statics.value(this.domNode)||!0,g},v.scope=c.Scope.INLINE_BLOT,v}(l.default);n.default=h},function(t,n,i){var a=i(11),l=i(3),c={attributes:{compose:function(d,v,g){typeof d!="object"&&(d={}),typeof v!="object"&&(v={});var m=l(!0,{},v);g||(m=Object.keys(m).reduce(function(T,S){return m[S]!=null&&(T[S]=m[S]),T},{}));for(var y in d)d[y]!==void 0&&v[y]===void 0&&(m[y]=d[y]);return Object.keys(m).length>0?m:void 0},diff:function(d,v){typeof d!="object"&&(d={}),typeof v!="object"&&(v={});var g=Object.keys(d).concat(Object.keys(v)).reduce(function(m,y){return a(d[y],v[y])||(m[y]=v[y]===void 0?null:v[y]),m},{});return Object.keys(g).length>0?g:void 0},transform:function(d,v,g){if(typeof d!="object")return v;if(typeof v=="object"){if(!g)return v;var m=Object.keys(v).reduce(function(y,T){return d[T]===void 0&&(y[T]=v[T]),y},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(d){return new h(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function h(d){this.ops=d,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(d){d||(d=1/0);var v=this.ops[this.index];if(v){var g=this.offset,m=c.length(v);if(d>=m-g?(d=m-g,this.index+=1,this.offset=0):this.offset+=d,typeof v.delete=="number")return{delete:d};var y={};return v.attributes&&(y.attributes=v.attributes),typeof v.retain=="number"?y.retain=d:typeof v.insert=="string"?y.insert=v.insert.substr(g,d):y.insert=v.insert,y}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,v=this.index,g=this.next(),m=this.ops.slice(this.index);return this.offset=d,this.index=v,[g].concat(m)}else return[]},t.exports=c},function(t,n){var i=function(){function a(S,w){return w!=null&&S instanceof w}var l;try{l=Map}catch{l=function(){}}var c;try{c=Set}catch{c=function(){}}var h;try{h=Promise}catch{h=function(){}}function d(S,w,E,b,O){typeof w=="object"&&(E=w.depth,b=w.prototype,O=w.includeNonEnumerable,w=w.circular);var C=[],F=[],U=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof E>"u"&&(E=1/0);function P(_,A){if(_===null)return null;if(A===0)return _;var k,R;if(typeof _!="object")return _;if(a(_,l))k=new l;else if(a(_,c))k=new c;else if(a(_,h))k=new h(function(W,j){_.then(function(B){W(P(B,A-1))},function(B){j(P(B,A-1))})});else if(d.__isArray(_))k=[];else if(d.__isRegExp(_))k=new RegExp(_.source,T(_)),_.lastIndex&&(k.lastIndex=_.lastIndex);else if(d.__isDate(_))k=new Date(_.getTime());else{if(U&&Buffer.isBuffer(_))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(_.length):k=new Buffer(_.length),_.copy(k),k;a(_,Error)?k=Object.create(_):typeof b>"u"?(R=Object.getPrototypeOf(_),k=Object.create(R)):(k=Object.create(b),R=b)}if(w){var x=C.indexOf(_);if(x!=-1)return F[x];C.push(_),F.push(k)}a(_,l)&&_.forEach(function(W,j){var B=P(j,A-1),z=P(W,A-1);k.set(B,z)}),a(_,c)&&_.forEach(function(W){var j=P(W,A-1);k.add(j)});for(var L in _){var $;R&&($=Object.getOwnPropertyDescriptor(R,L)),!($&&$.set==null)&&(k[L]=P(_[L],A-1))}if(Object.getOwnPropertySymbols)for(var Q=Object.getOwnPropertySymbols(_),L=0;L<Q.length;L++){var se=Q[L],Z=Object.getOwnPropertyDescriptor(_,se);Z&&!Z.enumerable&&!O||(k[se]=P(_[se],A-1),Z.enumerable||Object.defineProperty(k,se,{enumerable:!1}))}if(O)for(var re=Object.getOwnPropertyNames(_),L=0;L<re.length;L++){var G=re[L],Z=Object.getOwnPropertyDescriptor(_,G);Z&&Z.enumerable||(k[G]=P(_[G],A-1),Object.defineProperty(k,G,{enumerable:!1}))}return k}return P(S,E)}d.clonePrototype=function(w){if(w===null)return null;var E=function(){};return E.prototype=w,new E};function v(S){return Object.prototype.toString.call(S)}d.__objToStr=v;function g(S){return typeof S=="object"&&v(S)==="[object Date]"}d.__isDate=g;function m(S){return typeof S=="object"&&v(S)==="[object Array]"}d.__isArray=m;function y(S){return typeof S=="object"&&v(S)==="[object RegExp]"}d.__isRegExp=y;function T(S){var w="";return S.global&&(w+="g"),S.ignoreCase&&(w+="i"),S.multiline&&(w+="m"),w}return d.__getRegExpFlags=T,d}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function k(R,x){var L=[],$=!0,Q=!1,se=void 0;try{for(var Z=R[Symbol.iterator](),re;!($=(re=Z.next()).done)&&(L.push(re.value),!(x&&L.length===x));$=!0);}catch(G){Q=!0,se=G}finally{try{!$&&Z.return&&Z.return()}finally{if(Q)throw se}}return L}return function(R,x){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return k(R,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function k(R,x){for(var L=0;L<x.length;L++){var $=x[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(R,$.key,$)}}return function(R,x,L){return x&&k(R.prototype,x),L&&k(R,L),R}}(),c=function k(R,x,L){R===null&&(R=Function.prototype);var $=Object.getOwnPropertyDescriptor(R,x);if($===void 0){var Q=Object.getPrototypeOf(R);return Q===null?void 0:k(Q,x,L)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(L)}},h=i(0),d=C(h),v=i(8),g=C(v),m=i(4),y=C(m),T=i(16),S=C(T),w=i(13),E=C(w),b=i(25),O=C(b);function C(k){return k&&k.__esModule?k:{default:k}}function F(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function U(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function P(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}function _(k){return k instanceof y.default||k instanceof m.BlockEmbed}var A=function(k){P(R,k);function R(x,L){F(this,R);var $=U(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,x));return $.emitter=L.emitter,Array.isArray(L.whitelist)&&($.whitelist=L.whitelist.reduce(function(Q,se){return Q[se]=!0,Q},{})),$.domNode.addEventListener("DOMNodeInserted",function(){}),$.optimize(),$.enable(),$}return l(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(L,$){var Q=this.line(L),se=a(Q,2),Z=se[0],re=se[1],G=this.line(L+$),W=a(G,1),j=W[0];if(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,L,$),j!=null&&Z!==j&&re>0){if(Z instanceof m.BlockEmbed||j instanceof m.BlockEmbed){this.optimize();return}if(Z instanceof E.default){var B=Z.newlineIndex(Z.length(),!0);if(B>-1&&(Z=Z.split(B+1),Z===j)){this.optimize();return}}else if(j instanceof E.default){var z=j.newlineIndex(0);z>-1&&j.split(z+1)}var ee=j.children.head instanceof S.default?null:j.children.head;Z.moveChildren(j,ee),Z.remove()}this.optimize()}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",L)}},{key:"formatAt",value:function(L,$,Q,se){this.whitelist!=null&&!this.whitelist[Q]||(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,L,$,Q,se),this.optimize())}},{key:"insertAt",value:function(L,$,Q){if(!(Q!=null&&this.whitelist!=null&&!this.whitelist[$])){if(L>=this.length())if(Q==null||d.default.query($,d.default.Scope.BLOCK)==null){var se=d.default.create(this.statics.defaultChild);this.appendChild(se),Q==null&&$.endsWith(`
`)&&($=$.slice(0,-1)),se.insertAt(0,$,Q)}else{var Z=d.default.create($,Q);this.appendChild(Z)}else c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,$,Q);this.optimize()}}},{key:"insertBefore",value:function(L,$){if(L.statics.scope===d.default.Scope.INLINE_BLOT){var Q=d.default.create(this.statics.defaultChild);Q.appendChild(L),L=Q}c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,L,$)}},{key:"leaf",value:function(L){return this.path(L).pop()||[null,-1]}},{key:"line",value:function(L){return L===this.length()?this.line(L-1):this.descendant(_,L)}},{key:"lines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Q=function se(Z,re,G){var W=[],j=G;return Z.children.forEachAt(re,G,function(B,z,ee){_(B)?W.push(B):B instanceof d.default.Container&&(W=W.concat(se(B,z,j))),j-=ee}),W};return Q(this,L,$)}},{key:"optimize",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,L,$),L.length>0&&this.emitter.emit(g.default.events.SCROLL_OPTIMIZE,L,$))}},{key:"path",value:function(L){return c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,L).slice(1)}},{key:"update",value:function(L){if(this.batch!==!0){var $=g.default.sources.USER;typeof L=="string"&&($=L),Array.isArray(L)||(L=this.observer.takeRecords()),L.length>0&&this.emitter.emit(g.default.events.SCROLL_BEFORE_UPDATE,$,L),c(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,L.concat([])),L.length>0&&this.emitter.emit(g.default.events.SCROLL_UPDATE,$,L)}}}]),R}(d.default.Scroll);A.blotName="scroll",A.className="ql-editor",A.tagName="DIV",A.defaultChild="block",A.allowedChildren=[y.default,m.BlockEmbed,O.default],n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},l=function(){function H(Y,ne){var ie=[],fe=!0,ve=!1,ke=void 0;try{for(var Re=Y[Symbol.iterator](),xe;!(fe=(xe=Re.next()).done)&&(ie.push(xe.value),!(ne&&ie.length===ne));fe=!0);}catch(De){ve=!0,ke=De}finally{try{!fe&&Re.return&&Re.return()}finally{if(ve)throw ke}}return ie}return function(Y,ne){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return H(Y,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function H(Y,ne){for(var ie=0;ie<ne.length;ie++){var fe=ne[ie];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(Y,fe.key,fe)}}return function(Y,ne,ie){return ne&&H(Y.prototype,ne),ie&&H(Y,ie),Y}}(),h=i(21),d=k(h),v=i(11),g=k(v),m=i(3),y=k(m),T=i(2),S=k(T),w=i(20),E=k(w),b=i(0),O=k(b),C=i(5),F=k(C),U=i(10),P=k(U),_=i(9),A=k(_);function k(H){return H&&H.__esModule?H:{default:H}}function R(H,Y,ne){return Y in H?Object.defineProperty(H,Y,{value:ne,enumerable:!0,configurable:!0,writable:!0}):H[Y]=ne,H}function x(H,Y){if(!(H instanceof Y))throw new TypeError("Cannot call a class as a function")}function L(H,Y){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:H}function $(H,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);H.prototype=Object.create(Y&&Y.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(H,Y):H.__proto__=Y)}var Q=(0,P.default)("quill:keyboard"),se=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Z=function(H){$(Y,H),c(Y,null,[{key:"match",value:function(ie,fe){return fe=X(fe),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ve){return!!fe[ve]!==ie[ve]&&fe[ve]!==null})?!1:fe.key===(ie.which||ie.keyCode)}}]);function Y(ne,ie){x(this,Y);var fe=L(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,ne,ie));return fe.bindings={},Object.keys(fe.options.bindings).forEach(function(ve){ve==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||fe.options.bindings[ve]&&fe.addBinding(fe.options.bindings[ve])}),fe.addBinding({key:Y.keys.ENTER,shiftKey:null},B),fe.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},G),fe.addBinding({key:Y.keys.DELETE},{collapsed:!0},W)):(fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},G),fe.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},j),fe.addBinding({key:Y.keys.DELETE},{collapsed:!1},j),fe.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},G),fe.listen(),fe}return c(Y,[{key:"addBinding",value:function(ie){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=X(ie);if(ke==null||ke.key==null)return Q.warn("Attempted to add invalid keyboard binding",ke);typeof fe=="function"&&(fe={handler:fe}),typeof ve=="function"&&(ve={handler:ve}),ke=(0,y.default)(ke,fe,ve),this.bindings[ke.key]=this.bindings[ke.key]||[],this.bindings[ke.key].push(ke)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(fe){if(!fe.defaultPrevented){var ve=fe.which||fe.keyCode,ke=(ie.bindings[ve]||[]).filter(function(ct){return Y.match(fe,ct)});if(ke.length!==0){var Re=ie.quill.getSelection();if(!(Re==null||!ie.quill.hasFocus())){var xe=ie.quill.getLine(Re.index),De=l(xe,2),Ue=De[0],et=De[1],ue=ie.quill.getLeaf(Re.index),de=l(ue,2),Ee=de[0],be=de[1],ye=Re.length===0?[Ee,be]:ie.quill.getLeaf(Re.index+Re.length),$e=l(ye,2),je=$e[0],Be=$e[1],We=Ee instanceof O.default.Text?Ee.value().slice(0,be):"",Xe=je instanceof O.default.Text?je.value().slice(Be):"",Ze={collapsed:Re.length===0,empty:Re.length===0&&Ue.length()<=1,format:ie.quill.getFormat(Re),offset:et,prefix:We,suffix:Xe},er=ke.some(function(ct){if(ct.collapsed!=null&&ct.collapsed!==Ze.collapsed||ct.empty!=null&&ct.empty!==Ze.empty||ct.offset!=null&&ct.offset!==Ze.offset)return!1;if(Array.isArray(ct.format)){if(ct.format.every(function(St){return Ze.format[St]==null}))return!1}else if(a(ct.format)==="object"&&!Object.keys(ct.format).every(function(St){return ct.format[St]===!0?Ze.format[St]!=null:ct.format[St]===!1?Ze.format[St]==null:(0,g.default)(ct.format[St],Ze.format[St])}))return!1;return ct.prefix!=null&&!ct.prefix.test(Ze.prefix)||ct.suffix!=null&&!ct.suffix.test(Ze.suffix)?!1:ct.handler.call(ie,Re,Ze)!==!0});er&&fe.preventDefault()}}}})}}]),Y}(A.default);Z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Z.DEFAULTS={bindings:{bold:ee("bold"),italic:ee("italic"),underline:ee("underline"),indent:{key:Z.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",F.default.sources.USER)}},outdent:{key:Z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",F.default.sources.USER)}},"outdent backspace":{key:Z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,ne){ne.format.indent!=null?this.quill.format("indent","-1",F.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,F.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:Z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,F.default.sources.USER)}},tab:{key:Z.keys.TAB,handler:function(Y){this.quill.history.cutoff();var ne=new S.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(ne,F.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,F.default.sources.SILENT)}},"list empty enter":{key:Z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,ne){this.quill.format("list",!1,F.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,F.default.sources.USER)}},"checklist enter":{key:Z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var ne=this.quill.getLine(Y.index),ie=l(ne,2),fe=ie[0],ve=ie[1],ke=(0,y.default)({},fe.formats(),{list:"checked"}),Re=new S.default().retain(Y.index).insert(`
`,ke).retain(fe.length()-ve-1).retain(1,{list:"unchecked"});this.quill.updateContents(Re,F.default.sources.USER),this.quill.setSelection(Y.index+1,F.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,ne){var ie=this.quill.getLine(Y.index),fe=l(ie,2),ve=fe[0],ke=fe[1],Re=new S.default().retain(Y.index).insert(`
`,ne.format).retain(ve.length()-ke-1).retain(1,{header:null});this.quill.updateContents(Re,F.default.sources.USER),this.quill.setSelection(Y.index+1,F.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,ne){var ie=ne.prefix.length,fe=this.quill.getLine(Y.index),ve=l(fe,2),ke=ve[0],Re=ve[1];if(Re>ie)return!0;var xe=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":xe="unchecked";break;case"[x]":xe="checked";break;case"-":case"*":xe="bullet";break;default:xe="ordered"}this.quill.insertText(Y.index," ",F.default.sources.USER),this.quill.history.cutoff();var De=new S.default().retain(Y.index-Re).delete(ie+1).retain(ke.length()-2-Re).retain(1,{list:xe});this.quill.updateContents(De,F.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-ie,F.default.sources.SILENT)}},"code exit":{key:Z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var ne=this.quill.getLine(Y.index),ie=l(ne,2),fe=ie[0],ve=ie[1],ke=new S.default().retain(Y.index+fe.length()-ve-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ke,F.default.sources.USER)}},"embed left":re(Z.keys.LEFT,!1),"embed left shift":re(Z.keys.LEFT,!0),"embed right":re(Z.keys.RIGHT,!1),"embed right shift":re(Z.keys.RIGHT,!0)}};function re(H,Y){var ne,ie=H===Z.keys.LEFT?"prefix":"suffix";return ne={key:H,shiftKey:Y,altKey:null},R(ne,ie,/^$/),R(ne,"handler",function(ve){var ke=ve.index;H===Z.keys.RIGHT&&(ke+=ve.length+1);var Re=this.quill.getLeaf(ke),xe=l(Re,1),De=xe[0];return De instanceof O.default.Embed?(H===Z.keys.LEFT?Y?this.quill.setSelection(ve.index-1,ve.length+1,F.default.sources.USER):this.quill.setSelection(ve.index-1,F.default.sources.USER):Y?this.quill.setSelection(ve.index,ve.length+1,F.default.sources.USER):this.quill.setSelection(ve.index+ve.length+1,F.default.sources.USER),!1):!0}),ne}function G(H,Y){if(!(H.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(H.index),ie=l(ne,1),fe=ie[0],ve={};if(Y.offset===0){var ke=this.quill.getLine(H.index-1),Re=l(ke,1),xe=Re[0];if(xe!=null&&xe.length()>1){var De=fe.formats(),Ue=this.quill.getFormat(H.index-1,1);ve=E.default.attributes.diff(De,Ue)||{}}}var et=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(H.index-et,et,F.default.sources.USER),Object.keys(ve).length>0&&this.quill.formatLine(H.index-et,et,ve,F.default.sources.USER),this.quill.focus()}}function W(H,Y){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(H.index>=this.quill.getLength()-ne)){var ie={},fe=0,ve=this.quill.getLine(H.index),ke=l(ve,1),Re=ke[0];if(Y.offset>=Re.length()-1){var xe=this.quill.getLine(H.index+1),De=l(xe,1),Ue=De[0];if(Ue){var et=Re.formats(),ue=this.quill.getFormat(H.index,1);ie=E.default.attributes.diff(et,ue)||{},fe=Ue.length()}}this.quill.deleteText(H.index,ne,F.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(H.index+fe-1,ne,ie,F.default.sources.USER)}}function j(H){var Y=this.quill.getLines(H),ne={};if(Y.length>1){var ie=Y[0].formats(),fe=Y[Y.length-1].formats();ne=E.default.attributes.diff(fe,ie)||{}}this.quill.deleteText(H,F.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(H.index,1,ne,F.default.sources.USER),this.quill.setSelection(H.index,F.default.sources.SILENT),this.quill.focus()}function B(H,Y){var ne=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var ie=Object.keys(Y.format).reduce(function(fe,ve){return O.default.query(ve,O.default.Scope.BLOCK)&&!Array.isArray(Y.format[ve])&&(fe[ve]=Y.format[ve]),fe},{});this.quill.insertText(H.index,`
`,ie,F.default.sources.USER),this.quill.setSelection(H.index+1,F.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(fe){ie[fe]==null&&(Array.isArray(Y.format[fe])||fe!=="link"&&ne.quill.format(fe,Y.format[fe],F.default.sources.USER))})}function z(H){return{key:Z.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(ne){var ie=O.default.query("code-block"),fe=ne.index,ve=ne.length,ke=this.quill.scroll.descendant(ie,fe),Re=l(ke,2),xe=Re[0],De=Re[1];if(xe!=null){var Ue=this.quill.getIndex(xe),et=xe.newlineIndex(De,!0)+1,ue=xe.newlineIndex(Ue+De+ve),de=xe.domNode.textContent.slice(et,ue).split(`
`);De=0,de.forEach(function(Ee,be){H?(xe.insertAt(et+De,ie.TAB),De+=ie.TAB.length,be===0?fe+=ie.TAB.length:ve+=ie.TAB.length):Ee.startsWith(ie.TAB)&&(xe.deleteAt(et+De,ie.TAB.length),De-=ie.TAB.length,be===0?fe-=ie.TAB.length:ve-=ie.TAB.length),De+=Ee.length+1}),this.quill.update(F.default.sources.USER),this.quill.setSelection(fe,ve,F.default.sources.SILENT)}}}}function ee(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(ne,ie){this.quill.format(H,!ie.format[H],F.default.sources.USER)}}}function X(H){if(typeof H=="string"||typeof H=="number")return X({key:H});if((typeof H>"u"?"undefined":a(H))==="object"&&(H=(0,d.default)(H,!1)),typeof H.key=="string")if(Z.keys[H.key.toUpperCase()]!=null)H.key=Z.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[se]=H.shortKey,delete H.shortKey),H}n.default=Z,n.SHORTKEY=se},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function E(b,O){var C=[],F=!0,U=!1,P=void 0;try{for(var _=b[Symbol.iterator](),A;!(F=(A=_.next()).done)&&(C.push(A.value),!(O&&C.length===O));F=!0);}catch(k){U=!0,P=k}finally{try{!F&&_.return&&_.return()}finally{if(U)throw P}}return C}return function(b,O){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return E(b,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function E(b,O,C){b===null&&(b=Function.prototype);var F=Object.getOwnPropertyDescriptor(b,O);if(F===void 0){var U=Object.getPrototypeOf(b);return U===null?void 0:E(U,O,C)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(C)}},c=function(){function E(b,O){for(var C=0;C<O.length;C++){var F=O[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}return function(b,O,C){return O&&E(b.prototype,O),C&&E(b,C),b}}(),h=i(0),d=m(h),v=i(7),g=m(v);function m(E){return E&&E.__esModule?E:{default:E}}function y(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function T(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:E}function S(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);E.prototype=Object.create(b&&b.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(E,b):E.__proto__=b)}var w=function(E){S(b,E),c(b,null,[{key:"value",value:function(){}}]);function b(O,C){y(this,b);var F=T(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,O));return F.selection=C,F.textNode=document.createTextNode(b.CONTENTS),F.domNode.appendChild(F.textNode),F._length=0,F}return c(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(C,F){if(this._length!==0)return l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,C,F);for(var U=this,P=0;U!=null&&U.statics.scope!==d.default.Scope.BLOCK_BLOT;)P+=U.offset(U.parent),U=U.parent;U!=null&&(this._length=b.CONTENTS.length,U.optimize(),U.formatAt(P,b.CONTENTS.length,C,F),this._length=0)}},{key:"index",value:function(C,F){return C===this.textNode?0:l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,C,F)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var C=this.textNode,F=this.selection.getNativeRange(),U=void 0,P=void 0,_=void 0;if(F!=null&&F.start.node===C&&F.end.node===C){var A=[C,F.start.offset,F.end.offset];U=A[0],P=A[1],_=A[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var k=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof g.default?(U=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=b.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var R=[P,_].map(function(L){return Math.max(0,Math.min(U.data.length,L-1))}),x=a(R,2);return P=x[0],_=x[1],{startNode:U,startOffset:P,endNode:U,endOffset:_}}}}},{key:"update",value:function(C,F){var U=this;if(C.some(function(_){return _.type==="characterData"&&_.target===U.textNode})){var P=this.restore();P&&(F.range=P)}}},{key:"value",value:function(){return""}}]),b}(d.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",n.default=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=d(a),c=i(4),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function m(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){m(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(l.default.Container);y.allowedChildren=[h.default,c.BlockEmbed,y],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function w(E,b){for(var O=0;O<b.length;O++){var C=b[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,b,O){return b&&w(E.prototype,b),O&&w(E,O),E}}(),l=function w(E,b,O){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,b);if(C===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,b,O)}else{if("value"in C)return C.value;var U=C.get;return U===void 0?void 0:U.call(O)}},c=i(0),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function g(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function m(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var y=function(w){m(E,w);function E(){return v(this,E),g(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"value",value:function(O){var C=l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,O);return C.startsWith("rgb(")?(C=C.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+C.split(",").map(function(F){return("00"+parseInt(F).toString(16)).slice(-2)}).join("")):C}}]),E}(h.default.Attributor.Style),T=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),S=new y("color","color",{scope:h.default.Scope.INLINE});n.ColorAttributor=y,n.ColorClass=T,n.ColorStyle=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function S(w,E){for(var b=0;b<E.length;b++){var O=E[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(w,O.key,O)}}return function(w,E,b){return E&&S(w.prototype,E),b&&S(w,b),w}}(),l=function S(w,E,b){w===null&&(w=Function.prototype);var O=Object.getOwnPropertyDescriptor(w,E);if(O===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:S(C,E,b)}else{if("value"in O)return O.value;var F=O.get;return F===void 0?void 0:F.call(b)}},c=i(6),h=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function v(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function g(S,w){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:S}function m(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(S,w):S.__proto__=w)}var y=function(S){m(w,S);function w(){return v(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(b,O){if(b!==this.statics.blotName||!O)return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,b,O);O=this.constructor.sanitize(O),this.domNode.setAttribute("href",O)}}],[{key:"create",value:function(b){var O=l(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,b);return b=this.sanitize(b),O.setAttribute("href",b),O.setAttribute("rel","noopener noreferrer"),O.setAttribute("target","_blank"),O}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return T(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),w}(h.default);y.blotName="link",y.tagName="A",y.SANITIZED_URL="about:blank",y.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function T(S,w){var E=document.createElement("a");E.href=S;var b=E.href.slice(0,E.href.indexOf(":"));return w.indexOf(b)>-1}n.default=y,n.sanitize=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l=function(){function w(E,b){for(var O=0;O<b.length;O++){var C=b[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,b,O){return b&&w(E.prototype,b),O&&w(E,O),E}}(),c=i(23),h=g(c),d=i(107),v=g(d);function g(w){return w&&w.__esModule?w:{default:w}}function m(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}var y=0;function T(w,E){w.setAttribute(E,w.getAttribute(E)!=="true")}var S=function(){function w(E){var b=this;m(this,w),this.select=E,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(O){switch(O.keyCode){case h.default.keys.ENTER:b.togglePicker();break;case h.default.keys.ESCAPE:b.escape(),O.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),T(this.label,"aria-expanded"),T(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var O=this,C=document.createElement("span");return C.tabIndex="0",C.setAttribute("role","button"),C.classList.add("ql-picker-item"),b.hasAttribute("value")&&C.setAttribute("data-value",b.getAttribute("value")),b.textContent&&C.setAttribute("data-label",b.textContent),C.addEventListener("click",function(){O.selectItem(C,!0)}),C.addEventListener("keydown",function(F){switch(F.keyCode){case h.default.keys.ENTER:O.selectItem(C,!0),F.preventDefault();break;case h.default.keys.ESCAPE:O.escape(),F.preventDefault();break}}),C}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=v.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,O=document.createElement("span");O.classList.add("ql-picker-options"),O.setAttribute("aria-hidden","true"),O.tabIndex="-1",O.id="ql-picker-options-"+y,y+=1,this.label.setAttribute("aria-controls",O.id),this.options=O,[].slice.call(this.select.options).forEach(function(C){var F=b.buildItem(C);O.appendChild(F),C.selected===!0&&b.selectItem(F)}),this.container.appendChild(O)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(O){b.container.setAttribute(O.name,O.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=this.container.querySelector(".ql-selected");if(b!==C&&(C!=null&&C.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),O))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var F=document.createEvent("Event");F.initEvent("change",!0,!0),this.select.dispatchEvent(F)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var O=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(O)}else this.selectItem(null);var C=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",C)}}]),w}();n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=Q(a),c=i(5),h=Q(c),d=i(4),v=Q(d),g=i(16),m=Q(g),y=i(25),T=Q(y),S=i(24),w=Q(S),E=i(35),b=Q(E),O=i(6),C=Q(O),F=i(22),U=Q(F),P=i(7),_=Q(P),A=i(55),k=Q(A),R=i(42),x=Q(R),L=i(23),$=Q(L);function Q(se){return se&&se.__esModule?se:{default:se}}h.default.register({"blots/block":v.default,"blots/block/embed":d.BlockEmbed,"blots/break":m.default,"blots/container":T.default,"blots/cursor":w.default,"blots/embed":b.default,"blots/inline":C.default,"blots/scroll":U.default,"blots/text":_.default,"modules/clipboard":k.default,"modules/history":x.default,"modules/keyboard":$.default}),l.default.register(v.default,m.default,w.default,C.default,U.default,_.default),n.default=h.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),l=function(){function c(h){this.domNode=h,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(h){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?d=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?d=document.createElement(h):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return a.create(h)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(h,d){var v=this.isolate(h,d);v.remove()},c.prototype.formatAt=function(h,d,v,g){var m=this.isolate(h,d);if(a.query(v,a.Scope.BLOT)!=null&&g)m.wrap(v,g);else if(a.query(v,a.Scope.ATTRIBUTE)!=null){var y=a.create(this.statics.scope);m.wrap(y),y.format(v,g)}},c.prototype.insertAt=function(h,d,v){var g=v==null?a.create("text",d):a.create(d,v),m=this.split(h);this.parent.insertBefore(g,m)},c.prototype.insertInto=function(h,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var v=null;h.children.insertBefore(this,d),d!=null&&(v=d.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=v)&&h.domNode.insertBefore(this.domNode,v),this.parent=h,this.attach()},c.prototype.isolate=function(h,d){var v=this.split(h);return v.split(d),v},c.prototype.length=function(){return 1},c.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},c.prototype.optimize=function(h){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},c.prototype.replaceWith=function(h,d){var v=typeof h=="string"?a.create(h,d):h;return v.replace(this),v},c.prototype.split=function(h,d){return h===0?this:this.next},c.prototype.update=function(h,d){},c.prototype.wrap=function(h,d){var v=typeof h=="string"?a.create(h,d):h;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},c.blotName="abstract",c}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),l=i(32),c=i(33),h=i(1),d=function(){function v(g){this.attributes={},this.domNode=g,this.build()}return v.prototype.attribute=function(g,m){m?g.add(this.domNode,m)&&(g.value(this.domNode)!=null?this.attributes[g.attrName]=g:delete this.attributes[g.attrName]):(g.remove(this.domNode),delete this.attributes[g.attrName])},v.prototype.build=function(){var g=this;this.attributes={};var m=a.default.keys(this.domNode),y=l.default.keys(this.domNode),T=c.default.keys(this.domNode);m.concat(y).concat(T).forEach(function(S){var w=h.query(S,h.Scope.ATTRIBUTE);w instanceof a.default&&(g.attributes[w.attrName]=w)})},v.prototype.copy=function(g){var m=this;Object.keys(this.attributes).forEach(function(y){var T=m.attributes[y].value(m.domNode);g.format(y,T)})},v.prototype.move=function(g){var m=this;this.copy(g),Object.keys(this.attributes).forEach(function(y){m.attributes[y].remove(m.domNode)}),this.attributes={}},v.prototype.values=function(){var g=this;return Object.keys(this.attributes).reduce(function(m,y){return m[y]=g.attributes[y].value(g.domNode),m},{})},v}();n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var m in g)g.hasOwnProperty(m)&&(v[m]=g[m])};return function(v,g){d(v,g);function m(){this.constructor=v}v.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function c(d,v){var g=d.getAttribute("class")||"";return g.split(/\s+/).filter(function(m){return m.indexOf(v+"-")===0})}var h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.keys=function(g){return(g.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},v.prototype.add=function(g,m){return this.canAdd(g,m)?(this.remove(g),g.classList.add(this.keyName+"-"+m),!0):!1},v.prototype.remove=function(g){var m=c(g,this.keyName);m.forEach(function(y){g.classList.remove(y)}),g.classList.length===0&&g.removeAttribute("class")},v.prototype.value=function(g){var m=c(g,this.keyName)[0]||"",y=m.slice(this.keyName.length+1);return this.canAdd(g,y)?y:""},v}(l.default);n.default=h},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var m in g)g.hasOwnProperty(m)&&(v[m]=g[m])};return function(v,g){d(v,g);function m(){this.constructor=v}v.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function c(d){var v=d.split("-"),g=v.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return v[0]+g}var h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.keys=function(g){return(g.getAttribute("style")||"").split(";").map(function(m){var y=m.split(":");return y[0].trim()})},v.prototype.add=function(g,m){return this.canAdd(g,m)?(g.style[c(this.keyName)]=m,!0):!1},v.prototype.remove=function(g){g.style[c(this.keyName)]="",g.getAttribute("style")||g.removeAttribute("style")},v.prototype.value=function(g){var m=g.style[c(this.keyName)];return this.canAdd(g,m)?m:""},v}(l.default);n.default=h},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function h(d,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,v,g){return v&&h(d.prototype,v),g&&h(d,g),d}}();function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(d,v){l(this,h),this.quill=d,this.options=v,this.modules={}}return a(h,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(g){v.modules[g]==null&&v.addModule(g)})}},{key:"addModule",value:function(v){var g=this.quill.constructor.import("modules/"+v);return this.modules[v]=new g(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),h}();c.DEFAULTS={modules:{}},c.themes={default:c},n.default=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function E(b,O){for(var C=0;C<O.length;C++){var F=O[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}return function(b,O,C){return O&&E(b.prototype,O),C&&E(b,C),b}}(),l=function E(b,O,C){b===null&&(b=Function.prototype);var F=Object.getOwnPropertyDescriptor(b,O);if(F===void 0){var U=Object.getPrototypeOf(b);return U===null?void 0:E(U,O,C)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(C)}},c=i(0),h=g(c),d=i(7),v=g(d);function g(E){return E&&E.__esModule?E:{default:E}}function m(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function y(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:E}function T(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);E.prototype=Object.create(b&&b.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(E,b):E.__proto__=b)}var S="\uFEFF",w=function(E){T(b,E);function b(O){m(this,b);var C=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,O));return C.contentNode=document.createElement("span"),C.contentNode.setAttribute("contenteditable",!1),[].slice.call(C.domNode.childNodes).forEach(function(F){C.contentNode.appendChild(F)}),C.leftGuard=document.createTextNode(S),C.rightGuard=document.createTextNode(S),C.domNode.appendChild(C.leftGuard),C.domNode.appendChild(C.contentNode),C.domNode.appendChild(C.rightGuard),C}return a(b,[{key:"index",value:function(C,F){return C===this.leftGuard?0:C===this.rightGuard?1:l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,C,F)}},{key:"restore",value:function(C){var F=void 0,U=void 0,P=C.data.split(S).join("");if(C===this.leftGuard)if(this.prev instanceof v.default){var _=this.prev.length();this.prev.insertAt(_,P),F={startNode:this.prev.domNode,startOffset:_+P.length}}else U=document.createTextNode(P),this.parent.insertBefore(h.default.create(U),this),F={startNode:U,startOffset:P.length};else C===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,P),F={startNode:this.next.domNode,startOffset:P.length}):(U=document.createTextNode(P),this.parent.insertBefore(h.default.create(U),this.next),F={startNode:U,startOffset:P.length}));return C.data=S,F}},{key:"update",value:function(C,F){var U=this;C.forEach(function(P){if(P.type==="characterData"&&(P.target===U.leftGuard||P.target===U.rightGuard)){var _=U.restore(P.target);_&&(F.range=_)}})}}]),b}(h.default.Embed);n.default=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=i(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var h={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new l.default.Attributor.Attribute("align","align",h),v=new l.default.Attributor.Class("align","ql-align",h),g=new l.default.Attributor.Style("align","text-align",h);n.AlignAttribute=d,n.AlignClass=v,n.AlignStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=i(0),l=h(a),c=i(26);function h(g){return g&&g.__esModule?g:{default:g}}var d=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),v=new c.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=v},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=i(0),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var h={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},d=new l.default.Attributor.Attribute("direction","dir",h),v=new l.default.Attributor.Class("direction","ql-direction",h),g=new l.default.Attributor.Style("direction","direction",h);n.DirectionAttribute=d,n.DirectionClass=v,n.DirectionStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function E(b,O){for(var C=0;C<O.length;C++){var F=O[C];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}return function(b,O,C){return O&&E(b.prototype,O),C&&E(b,C),b}}(),l=function E(b,O,C){b===null&&(b=Function.prototype);var F=Object.getOwnPropertyDescriptor(b,O);if(F===void 0){var U=Object.getPrototypeOf(b);return U===null?void 0:E(U,O,C)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(C)}},c=i(0),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function v(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function g(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:E}function m(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);E.prototype=Object.create(b&&b.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(E,b):E.__proto__=b)}var y={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},T=new h.default.Attributor.Class("font","ql-font",y),S=function(E){m(b,E);function b(){return v(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"value",value:function(C){return l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,C).replace(/["']/g,"")}}]),b}(h.default.Attributor.Style),w=new S("font","font-family",y);n.FontStyle=w,n.FontClass=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=i(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}var h=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=h,n.SizeStyle=d},function(t,n,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function O(C,F){for(var U=0;U<F.length;U++){var P=F[U];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,F,U){return F&&O(C.prototype,F),U&&O(C,U),C}}(),l=i(0),c=m(l),h=i(5),d=m(h),v=i(9),g=m(v);function m(O){return O&&O.__esModule?O:{default:O}}function y(O,C){if(!(O instanceof C))throw new TypeError("Cannot call a class as a function")}function T(O,C){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:O}function S(O,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);O.prototype=Object.create(C&&C.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(O,C):O.__proto__=C)}var w=function(O){S(C,O);function C(F,U){y(this,C);var P=T(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,F,U));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(d.default.events.EDITOR_CHANGE,function(_,A,k,R){_!==d.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||R===d.default.sources.USER?P.record(A,k):P.transform(A))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return a(C,[{key:"change",value:function(U,P){if(this.stack[U].length!==0){var _=this.stack[U].pop();this.stack[P].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[U],d.default.sources.USER),this.ignoreChange=!1;var A=b(_[U]);this.quill.setSelection(A)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(U,P){if(U.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(P),A=Date.now();if(this.lastRecorded+this.options.delay>A&&this.stack.undo.length>0){var k=this.stack.undo.pop();_=_.compose(k.undo),U=k.redo.compose(U)}else this.lastRecorded=A;this.stack.undo.push({redo:U,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(U){this.stack.undo.forEach(function(P){P.undo=U.transform(P.undo,!0),P.redo=U.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=U.transform(P.undo,!0),P.redo=U.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),C}(g.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function E(O){var C=O.ops[O.ops.length-1];return C==null?!1:C.insert!=null?typeof C.insert=="string"&&C.insert.endsWith(`
`):C.attributes!=null?Object.keys(C.attributes).some(function(F){return c.default.query(F,c.default.Scope.BLOCK)!=null}):!1}function b(O){var C=O.reduce(function(U,P){return U+=P.delete||0,U},0),F=O.length()-C;return E(O)&&(F-=1),F}n.default=w,n.getLastChangeIndex=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function B(z,ee){for(var X=0;X<ee.length;X++){var H=ee[X];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(z,H.key,H)}}return function(z,ee,X){return ee&&B(z.prototype,ee),X&&B(z,X),z}}(),l=function B(z,ee,X){z===null&&(z=Function.prototype);var H=Object.getOwnPropertyDescriptor(z,ee);if(H===void 0){var Y=Object.getPrototypeOf(z);return Y===null?void 0:B(Y,ee,X)}else{if("value"in H)return H.value;var ne=H.get;return ne===void 0?void 0:ne.call(X)}},c=i(3),h=A(c),d=i(2),v=A(d),g=i(8),m=A(g),y=i(23),T=A(y),S=i(34),w=A(S),E=i(59),b=A(E),O=i(60),C=A(O),F=i(28),U=A(F),P=i(61),_=A(P);function A(B){return B&&B.__esModule?B:{default:B}}function k(B,z){if(!(B instanceof z))throw new TypeError("Cannot call a class as a function")}function R(B,z){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:B}function x(B,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);B.prototype=Object.create(z&&z.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(B,z):B.__proto__=z)}var L=[!1,"center","right","justify"],$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Q=[!1,"serif","monospace"],se=["1","2","3",!1],Z=["small",!1,"large","huge"],re=function(B){x(z,B);function z(ee,X){k(this,z);var H=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ee,X)),Y=function ne(ie){if(!document.body.contains(ee.root))return document.body.removeEventListener("click",ne);H.tooltip!=null&&!H.tooltip.root.contains(ie.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(fe){fe.container.contains(ie.target)||fe.close()})};return ee.emitter.listenDOM("click",document.body,Y),H}return a(z,[{key:"addModule",value:function(X){var H=l(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,X);return X==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(X,H){X.forEach(function(Y){var ne=Y.getAttribute("class")||"";ne.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),H[ie]!=null))if(ie==="direction")Y.innerHTML=H[ie][""]+H[ie].rtl;else if(typeof H[ie]=="string")Y.innerHTML=H[ie];else{var fe=Y.value||"";fe!=null&&H[ie][fe]&&(Y.innerHTML=H[ie][fe])}})})}},{key:"buildPickers",value:function(X,H){var Y=this;this.pickers=X.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&j(ie,L),new C.default(ie,H.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var fe=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&j(ie,$,fe==="background"?"#ffffff":"#000000"),new b.default(ie,H[fe])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?j(ie,Q):ie.classList.contains("ql-header")?j(ie,se):ie.classList.contains("ql-size")&&j(ie,Z)),new U.default(ie)});var ne=function(){Y.pickers.forEach(function(fe){fe.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,ne)}}]),z}(w.default);re.DEFAULTS=(0,h.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,ee=this.container.querySelector("input.ql-image[type=file]");ee==null&&(ee=document.createElement("input"),ee.setAttribute("type","file"),ee.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ee.classList.add("ql-image"),ee.addEventListener("change",function(){if(ee.files!=null&&ee.files[0]!=null){var X=new FileReader;X.onload=function(H){var Y=z.quill.getSelection(!0);z.quill.updateContents(new v.default().retain(Y.index).delete(Y.length).insert({image:H.target.result}),m.default.sources.USER),z.quill.setSelection(Y.index+1,m.default.sources.SILENT),ee.value=""},X.readAsDataURL(ee.files[0])}}),this.container.appendChild(ee)),ee.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var G=function(B){x(z,B);function z(ee,X){k(this,z);var H=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ee,X));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return a(z,[{key:"listen",value:function(){var X=this;this.textbox.addEventListener("keydown",function(H){T.default.match(H,"enter")?(X.save(),H.preventDefault()):T.default.match(H,"escape")&&(X.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:X!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+X)||""),this.root.setAttribute("data-mode",X)}},{key:"restoreFocus",value:function(){var X=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=X}},{key:"save",value:function(){var X=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",X,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",X,m.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":X=W(X);case"formula":{if(!X)break;var Y=this.quill.getSelection(!0);if(Y!=null){var ne=Y.index+Y.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),X,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",m.default.sources.USER),this.quill.setSelection(ne+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z}(_.default);function W(B){var z=B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=B.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":B}function j(B,z){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(X){var H=document.createElement("option");X===ee?H.setAttribute("selected","selected"):H.setAttribute("value",X),B.appendChild(H)})}n.BaseTooltip=G,n.default=re},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},l.prototype.contains=function(c){for(var h,d=this.iterator();h=d();)if(h===c)return!0;return!1},l.prototype.insertBefore=function(c,h){c&&(c.next=h,h!=null?(c.prev=h.prev,h.prev!=null&&(h.prev.next=c),h.prev=c,h===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},l.prototype.offset=function(c){for(var h=0,d=this.head;d!=null;){if(d===c)return h;h+=d.length(),d=d.next}return-1},l.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},l.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var h=c;return c!=null&&(c=c.next),h}},l.prototype.find=function(c,h){h===void 0&&(h=!1);for(var d,v=this.iterator();d=v();){var g=d.length();if(c<g||h&&c===g&&(d.next==null||d.next.length()!==0))return[d,c];c-=g}return[null,0]},l.prototype.forEach=function(c){for(var h,d=this.iterator();h=d();)c(h)},l.prototype.forEachAt=function(c,h,d){if(!(h<=0))for(var v=this.find(c),g=v[0],m=v[1],y,T=c-m,S=this.iterator(g);(y=S())&&T<c+h;){var w=y.length();c>T?d(y,c-T,Math.min(h,T+w-c)):d(y,0,Math.min(w,c+h-T)),T+=w}},l.prototype.map=function(c){return this.reduce(function(h,d){return h.push(c(d)),h},[])},l.prototype.reduce=function(c,h){for(var d,v=this.iterator();d=v();)h=c(h,d);return h},l}();n.default=a},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var T in y)y.hasOwnProperty(T)&&(m[T]=y[T])};return function(m,y){g(m,y);function T(){this.constructor=m}m.prototype=y===null?Object.create(y):(T.prototype=y.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(17),c=i(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,v=function(g){a(m,g);function m(y){var T=g.call(this,y)||this;return T.scroll=T,T.observer=new MutationObserver(function(S){T.update(S)}),T.observer.observe(T.domNode,h),T.attach(),T}return m.prototype.detach=function(){g.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(y,T){this.update(),y===0&&T===this.length()?this.children.forEach(function(S){S.remove()}):g.prototype.deleteAt.call(this,y,T)},m.prototype.formatAt=function(y,T,S,w){this.update(),g.prototype.formatAt.call(this,y,T,S,w)},m.prototype.insertAt=function(y,T,S){this.update(),g.prototype.insertAt.call(this,y,T,S)},m.prototype.optimize=function(y,T){var S=this;y===void 0&&(y=[]),T===void 0&&(T={}),g.prototype.optimize.call(this,T);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)y.push(w.pop());for(var E=function(F,U){U===void 0&&(U=!0),!(F==null||F===S)&&F.domNode.parentNode!=null&&(F.domNode[c.DATA_KEY].mutations==null&&(F.domNode[c.DATA_KEY].mutations=[]),U&&E(F.parent))},b=function(F){F.domNode[c.DATA_KEY]==null||F.domNode[c.DATA_KEY].mutations==null||(F instanceof l.default&&F.children.forEach(b),F.optimize(T))},O=y,C=0;O.length>0;C+=1){if(C>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(O.forEach(function(F){var U=c.find(F.target,!0);U!=null&&(U.domNode===F.target&&(F.type==="childList"?(E(c.find(F.previousSibling,!1)),[].forEach.call(F.addedNodes,function(P){var _=c.find(P,!1);E(_,!1),_ instanceof l.default&&_.children.forEach(function(A){E(A,!1)})})):F.type==="attributes"&&E(U.prev)),E(U))}),this.children.forEach(b),O=[].slice.call(this.observer.takeRecords()),w=O.slice();w.length>0;)y.push(w.pop())}},m.prototype.update=function(y,T){var S=this;T===void 0&&(T={}),y=y||this.observer.takeRecords(),y.map(function(w){var E=c.find(w.target,!0);return E==null?null:E.domNode[c.DATA_KEY].mutations==null?(E.domNode[c.DATA_KEY].mutations=[w],E):(E.domNode[c.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===S||w.domNode[c.DATA_KEY]==null||w.update(w.domNode[c.DATA_KEY].mutations||[],T)}),this.domNode[c.DATA_KEY].mutations!=null&&g.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,T),this.optimize(y,T)},m.blotName="scroll",m.defaultChild="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="DIV",m}(l.default);n.default=v},function(t,n,i){var a=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)m.hasOwnProperty(y)&&(g[y]=m[y])};return function(g,m){v(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),c=i(1);function h(v,g){if(Object.keys(v).length!==Object.keys(g).length)return!1;for(var m in v)if(v[m]!==g[m])return!1;return!0}var d=function(v){a(g,v);function g(){return v!==null&&v.apply(this,arguments)||this}return g.formats=function(m){if(m.tagName!==g.tagName)return v.formats.call(this,m)},g.prototype.format=function(m,y){var T=this;m===this.statics.blotName&&!y?(this.children.forEach(function(S){S instanceof l.default||(S=S.wrap(g.blotName,!0)),T.attributes.copy(S)}),this.unwrap()):v.prototype.format.call(this,m,y)},g.prototype.formatAt=function(m,y,T,S){if(this.formats()[T]!=null||c.query(T,c.Scope.ATTRIBUTE)){var w=this.isolate(m,y);w.format(T,S)}else v.prototype.formatAt.call(this,m,y,T,S)},g.prototype.optimize=function(m){v.prototype.optimize.call(this,m);var y=this.formats();if(Object.keys(y).length===0)return this.unwrap();var T=this.next;T instanceof g&&T.prev===this&&h(y,T.formats())&&(T.moveChildren(this),T.remove())},g.blotName="inline",g.scope=c.Scope.INLINE_BLOT,g.tagName="SPAN",g}(l.default);n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var m in g)g.hasOwnProperty(m)&&(v[m]=g[m])};return function(v,g){d(v,g);function m(){this.constructor=v}v.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),c=i(1),h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.formats=function(g){var m=c.query(v.blotName).tagName;if(g.tagName!==m)return d.formats.call(this,g)},v.prototype.format=function(g,m){c.query(g,c.Scope.BLOCK)!=null&&(g===this.statics.blotName&&!m?this.replaceWith(v.blotName):d.prototype.format.call(this,g,m))},v.prototype.formatAt=function(g,m,y,T){c.query(y,c.Scope.BLOCK)!=null?this.format(y,T):d.prototype.formatAt.call(this,g,m,y,T)},v.prototype.insertAt=function(g,m,y){if(y==null||c.query(m,c.Scope.INLINE)!=null)d.prototype.insertAt.call(this,g,m,y);else{var T=this.split(g),S=c.create(m,y);T.parent.insertBefore(S,T)}},v.prototype.update=function(g,m){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,g,m)},v.blotName="block",v.scope=c.Scope.BLOCK_BLOT,v.tagName="P",v}(l.default);n.default=h},function(t,n,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)v.hasOwnProperty(g)&&(d[g]=v[g])};return function(d,v){h(d,v);function g(){this.constructor=d}d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),c=function(h){a(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.formats=function(v){},d.prototype.format=function(v,g){h.prototype.formatAt.call(this,0,this.length(),v,g)},d.prototype.formatAt=function(v,g,m,y){v===0&&g===this.length()?this.format(m,y):h.prototype.formatAt.call(this,v,g,m,y)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(l.default);n.default=c},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var m in g)g.hasOwnProperty(m)&&(v[m]=g[m])};return function(v,g){d(v,g);function m(){this.constructor=v}v.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),c=i(1),h=function(d){a(v,d);function v(g){var m=d.call(this,g)||this;return m.text=m.statics.value(m.domNode),m}return v.create=function(g){return document.createTextNode(g)},v.value=function(g){var m=g.data;return m.normalize&&(m=m.normalize()),m},v.prototype.deleteAt=function(g,m){this.domNode.data=this.text=this.text.slice(0,g)+this.text.slice(g+m)},v.prototype.index=function(g,m){return this.domNode===g?m:-1},v.prototype.insertAt=function(g,m,y){y==null?(this.text=this.text.slice(0,g)+m+this.text.slice(g),this.domNode.data=this.text):d.prototype.insertAt.call(this,g,m,y)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(g){d.prototype.optimize.call(this,g),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(g,m){return[this.domNode,g]},v.prototype.split=function(g,m){if(m===void 0&&(m=!1),!m){if(g===0)return this;if(g===this.length())return this.next}var y=c.create(this.domNode.splitText(g));return this.parent.insertBefore(y,this.next),this.text=this.statics.value(this.domNode),y},v.prototype.update=function(g,m){var y=this;g.some(function(T){return T.type==="characterData"&&T.target===y.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=c.Scope.INLINE_BLOT,v}(l.default);n.default=h},function(t,n,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,h){return arguments.length>1&&!this.contains(c)==!h?h:l.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,h){return h=h||0,this.substr(h,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,h){var d=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>d.length)&&(h=d.length),h-=c.length;var v=d.indexOf(c,h);return v!==-1&&v===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),v=d.length>>>0,g=arguments[1],m,y=0;y<v;y++)if(m=d[y],h.call(g,m,y,d))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var i=-1,a=1,l=0;function c(C,F,U){if(C==F)return C?[[l,C]]:[];(U<0||C.length<U)&&(U=null);var P=g(C,F),_=C.substring(0,P);C=C.substring(P),F=F.substring(P),P=m(C,F);var A=C.substring(C.length-P);C=C.substring(0,C.length-P),F=F.substring(0,F.length-P);var k=h(C,F);return _&&k.unshift([l,_]),A&&k.push([l,A]),T(k),U!=null&&(k=E(k,U)),k=b(k),k}function h(C,F){var U;if(!C)return[[a,F]];if(!F)return[[i,C]];var P=C.length>F.length?C:F,_=C.length>F.length?F:C,A=P.indexOf(_);if(A!=-1)return U=[[a,P.substring(0,A)],[l,_],[a,P.substring(A+_.length)]],C.length>F.length&&(U[0][0]=U[2][0]=i),U;if(_.length==1)return[[i,C],[a,F]];var k=y(C,F);if(k){var R=k[0],x=k[1],L=k[2],$=k[3],Q=k[4],se=c(R,L),Z=c(x,$);return se.concat([[l,Q]],Z)}return d(C,F)}function d(C,F){for(var U=C.length,P=F.length,_=Math.ceil((U+P)/2),A=_,k=2*_,R=new Array(k),x=new Array(k),L=0;L<k;L++)R[L]=-1,x[L]=-1;R[A+1]=0,x[A+1]=0;for(var $=U-P,Q=$%2!=0,se=0,Z=0,re=0,G=0,W=0;W<_;W++){for(var j=-W+se;j<=W-Z;j+=2){var B=A+j,z;j==-W||j!=W&&R[B-1]<R[B+1]?z=R[B+1]:z=R[B-1]+1;for(var ee=z-j;z<U&&ee<P&&C.charAt(z)==F.charAt(ee);)z++,ee++;if(R[B]=z,z>U)Z+=2;else if(ee>P)se+=2;else if(Q){var X=A+$-j;if(X>=0&&X<k&&x[X]!=-1){var H=U-x[X];if(z>=H)return v(C,F,z,ee)}}}for(var Y=-W+re;Y<=W-G;Y+=2){var X=A+Y,H;Y==-W||Y!=W&&x[X-1]<x[X+1]?H=x[X+1]:H=x[X-1]+1;for(var ne=H-Y;H<U&&ne<P&&C.charAt(U-H-1)==F.charAt(P-ne-1);)H++,ne++;if(x[X]=H,H>U)G+=2;else if(ne>P)re+=2;else if(!Q){var B=A+$-Y;if(B>=0&&B<k&&R[B]!=-1){var z=R[B],ee=A+z-B;if(H=U-H,z>=H)return v(C,F,z,ee)}}}}return[[i,C],[a,F]]}function v(C,F,U,P){var _=C.substring(0,U),A=F.substring(0,P),k=C.substring(U),R=F.substring(P),x=c(_,A),L=c(k,R);return x.concat(L)}function g(C,F){if(!C||!F||C.charAt(0)!=F.charAt(0))return 0;for(var U=0,P=Math.min(C.length,F.length),_=P,A=0;U<_;)C.substring(A,_)==F.substring(A,_)?(U=_,A=U):P=_,_=Math.floor((P-U)/2+U);return _}function m(C,F){if(!C||!F||C.charAt(C.length-1)!=F.charAt(F.length-1))return 0;for(var U=0,P=Math.min(C.length,F.length),_=P,A=0;U<_;)C.substring(C.length-_,C.length-A)==F.substring(F.length-_,F.length-A)?(U=_,A=U):P=_,_=Math.floor((P-U)/2+U);return _}function y(C,F){var U=C.length>F.length?C:F,P=C.length>F.length?F:C;if(U.length<4||P.length*2<U.length)return null;function _(Z,re,G){for(var W=Z.substring(G,G+Math.floor(Z.length/4)),j=-1,B="",z,ee,X,H;(j=re.indexOf(W,j+1))!=-1;){var Y=g(Z.substring(G),re.substring(j)),ne=m(Z.substring(0,G),re.substring(0,j));B.length<ne+Y&&(B=re.substring(j-ne,j)+re.substring(j,j+Y),z=Z.substring(0,G-ne),ee=Z.substring(G+Y),X=re.substring(0,j-ne),H=re.substring(j+Y))}return B.length*2>=Z.length?[z,ee,X,H,B]:null}var A=_(U,P,Math.ceil(U.length/4)),k=_(U,P,Math.ceil(U.length/2)),R;if(!A&&!k)return null;k?A?R=A[4].length>k[4].length?A:k:R=k:R=A;var x,L,$,Q;C.length>F.length?(x=R[0],L=R[1],$=R[2],Q=R[3]):($=R[0],Q=R[1],x=R[2],L=R[3]);var se=R[4];return[x,L,$,Q,se]}function T(C){C.push([l,""]);for(var F=0,U=0,P=0,_="",A="",k;F<C.length;)switch(C[F][0]){case a:P++,A+=C[F][1],F++;break;case i:U++,_+=C[F][1],F++;break;case l:U+P>1?(U!==0&&P!==0&&(k=g(A,_),k!==0&&(F-U-P>0&&C[F-U-P-1][0]==l?C[F-U-P-1][1]+=A.substring(0,k):(C.splice(0,0,[l,A.substring(0,k)]),F++),A=A.substring(k),_=_.substring(k)),k=m(A,_),k!==0&&(C[F][1]=A.substring(A.length-k)+C[F][1],A=A.substring(0,A.length-k),_=_.substring(0,_.length-k))),U===0?C.splice(F-P,U+P,[a,A]):P===0?C.splice(F-U,U+P,[i,_]):C.splice(F-U-P,U+P,[i,_],[a,A]),F=F-U-P+(U?1:0)+(P?1:0)+1):F!==0&&C[F-1][0]==l?(C[F-1][1]+=C[F][1],C.splice(F,1)):F++,P=0,U=0,_="",A="";break}C[C.length-1][1]===""&&C.pop();var R=!1;for(F=1;F<C.length-1;)C[F-1][0]==l&&C[F+1][0]==l&&(C[F][1].substring(C[F][1].length-C[F-1][1].length)==C[F-1][1]?(C[F][1]=C[F-1][1]+C[F][1].substring(0,C[F][1].length-C[F-1][1].length),C[F+1][1]=C[F-1][1]+C[F+1][1],C.splice(F-1,1),R=!0):C[F][1].substring(0,C[F+1][1].length)==C[F+1][1]&&(C[F-1][1]+=C[F+1][1],C[F][1]=C[F][1].substring(C[F+1][1].length)+C[F+1][1],C.splice(F+1,1),R=!0)),F++;R&&T(C)}var S=c;S.INSERT=a,S.DELETE=i,S.EQUAL=l,t.exports=S;function w(C,F){if(F===0)return[l,C];for(var U=0,P=0;P<C.length;P++){var _=C[P];if(_[0]===i||_[0]===l){var A=U+_[1].length;if(F===A)return[P+1,C];if(F<A){C=C.slice();var k=F-U,R=[_[0],_[1].slice(0,k)],x=[_[0],_[1].slice(k)];return C.splice(P,1,R,x),[P+1,C]}else U=A}}throw new Error("cursor_pos is out of bounds!")}function E(C,F){var U=w(C,F),P=U[1],_=U[0],A=P[_],k=P[_+1];if(A==null)return C;if(A[0]!==l)return C;if(k!=null&&A[1]+k[1]===k[1]+A[1])return P.splice(_,2,k,A),O(P,_,2);if(k!=null&&k[1].indexOf(A[1])===0){P.splice(_,2,[k[0],A[1]],[0,A[1]]);var R=k[1].slice(A[1].length);return R.length>0&&P.splice(_+2,0,[k[0],R]),O(P,_,3)}else return C}function b(C){for(var F=!1,U=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},P=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},_=2;_<C.length;_+=1)C[_-2][0]===l&&P(C[_-2][1])&&C[_-1][0]===i&&U(C[_-1][1])&&C[_][0]===a&&U(C[_][1])&&(F=!0,C[_-1][1]=C[_-2][1].slice(-1)+C[_-1][1],C[_][1]=C[_-2][1].slice(-1)+C[_][1],C[_-2][1]=C[_-2][1].slice(0,-1));if(!F)return C;for(var A=[],_=0;_<C.length;_+=1)C[_][1].length>0&&A.push(C[_]);return A}function O(C,F,U){for(var P=F+U-1;P>=0&&P>=F-1;P--)if(P+1<C.length){var _=C[P],A=C[P+1];_[0]===A[1]&&C.splice(P,2,[_[0],_[1]+A[1]])}return C}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(a){var l=[];for(var c in a)l.push(c);return l}},function(t,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=i?a:l,n.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}n.unsupported=l;function l(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(t,n){var i=Object.prototype.hasOwnProperty,a="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1));function c(d,v,g){this.fn=d,this.context=v,this.once=g||!1}function h(){this._events=new l,this._eventsCount=0}h.prototype.eventNames=function(){var v=[],g,m;if(this._eventsCount===0)return v;for(m in g=this._events)i.call(g,m)&&v.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(g)):v},h.prototype.listeners=function(v,g){var m=a?a+v:v,y=this._events[m];if(g)return!!y;if(!y)return[];if(y.fn)return[y.fn];for(var T=0,S=y.length,w=new Array(S);T<S;T++)w[T]=y[T].fn;return w},h.prototype.emit=function(v,g,m,y,T,S){var w=a?a+v:v;if(!this._events[w])return!1;var E=this._events[w],b=arguments.length,O,C;if(E.fn){switch(E.once&&this.removeListener(v,E.fn,void 0,!0),b){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,m),!0;case 4:return E.fn.call(E.context,g,m,y),!0;case 5:return E.fn.call(E.context,g,m,y,T),!0;case 6:return E.fn.call(E.context,g,m,y,T,S),!0}for(C=1,O=new Array(b-1);C<b;C++)O[C-1]=arguments[C];E.fn.apply(E.context,O)}else{var F=E.length,U;for(C=0;C<F;C++)switch(E[C].once&&this.removeListener(v,E[C].fn,void 0,!0),b){case 1:E[C].fn.call(E[C].context);break;case 2:E[C].fn.call(E[C].context,g);break;case 3:E[C].fn.call(E[C].context,g,m);break;case 4:E[C].fn.call(E[C].context,g,m,y);break;default:if(!O)for(U=1,O=new Array(b-1);U<b;U++)O[U-1]=arguments[U];E[C].fn.apply(E[C].context,O)}}return!0},h.prototype.on=function(v,g,m){var y=new c(g,m||this),T=a?a+v:v;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],y]:this._events[T].push(y):(this._events[T]=y,this._eventsCount++),this},h.prototype.once=function(v,g,m){var y=new c(g,m||this,!0),T=a?a+v:v;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],y]:this._events[T].push(y):(this._events[T]=y,this._eventsCount++),this},h.prototype.removeListener=function(v,g,m,y){var T=a?a+v:v;if(!this._events[T])return this;if(!g)return--this._eventsCount===0?this._events=new l:delete this._events[T],this;var S=this._events[T];if(S.fn)S.fn===g&&(!y||S.once)&&(!m||S.context===m)&&(--this._eventsCount===0?this._events=new l:delete this._events[T]);else{for(var w=0,E=[],b=S.length;w<b;w++)(S[w].fn!==g||y&&!S[w].once||m&&S[w].context!==m)&&E.push(S[w]);E.length?this._events[T]=E.length===1?E[0]:E:--this._eventsCount===0?this._events=new l:delete this._events[T]}return this},h.prototype.removeAllListeners=function(v){var g;return v?(g=a?a+v:v,this._events[g]&&(--this._eventsCount===0?this._events=new l:delete this._events[g])):(this._events=new l,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=a,h.EventEmitter=h,typeof t<"u"&&(t.exports=h)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},l=function(){function ue(de,Ee){var be=[],ye=!0,$e=!1,je=void 0;try{for(var Be=de[Symbol.iterator](),We;!(ye=(We=Be.next()).done)&&(be.push(We.value),!(Ee&&be.length===Ee));ye=!0);}catch(Xe){$e=!0,je=Xe}finally{try{!ye&&Be.return&&Be.return()}finally{if($e)throw je}}return be}return function(de,Ee){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return ue(de,Ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function ue(de,Ee){for(var be=0;be<Ee.length;be++){var ye=Ee[be];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(de,ye.key,ye)}}return function(de,Ee,be){return Ee&&ue(de.prototype,Ee),be&&ue(de,be),de}}(),h=i(3),d=x(h),v=i(2),g=x(v),m=i(0),y=x(m),T=i(5),S=x(T),w=i(10),E=x(w),b=i(9),O=x(b),C=i(36),F=i(37),U=i(13),P=x(U),_=i(26),A=i(38),k=i(39),R=i(40);function x(ue){return ue&&ue.__esModule?ue:{default:ue}}function L(ue,de,Ee){return de in ue?Object.defineProperty(ue,de,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):ue[de]=Ee,ue}function $(ue,de){if(!(ue instanceof de))throw new TypeError("Cannot call a class as a function")}function Q(ue,de){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:ue}function se(ue,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);ue.prototype=Object.create(de&&de.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,de):ue.__proto__=de)}var Z=(0,E.default)("quill:clipboard"),re="__ql-matcher",G=[[Node.TEXT_NODE,et],[Node.TEXT_NODE,xe],["br",ve],[Node.ELEMENT_NODE,xe],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,De],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Ue],["li",Re],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",ke]],W=[C.AlignAttribute,A.DirectionAttribute].reduce(function(ue,de){return ue[de.keyName]=de,ue},{}),j=[C.AlignStyle,F.BackgroundStyle,_.ColorStyle,A.DirectionStyle,k.FontStyle,R.SizeStyle].reduce(function(ue,de){return ue[de.keyName]=de,ue},{}),B=function(ue){se(de,ue);function de(Ee,be){$(this,de);var ye=Q(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Ee,be));return ye.quill.root.addEventListener("paste",ye.onPaste.bind(ye)),ye.container=ye.quill.addContainer("ql-clipboard"),ye.container.setAttribute("contenteditable",!0),ye.container.setAttribute("tabindex",-1),ye.matchers=[],G.concat(ye.options.matchers).forEach(function($e){var je=l($e,2),Be=je[0],We=je[1];!be.matchVisual&&We===De||ye.addMatcher(Be,We)}),ye}return c(de,[{key:"addMatcher",value:function(be,ye){this.matchers.push([be,ye])}},{key:"convert",value:function(be){if(typeof be=="string")return this.container.innerHTML=be.replace(/\>\r?\n +\</g,"><"),this.convert();var ye=this.quill.getFormat(this.quill.selection.savedRange.index);if(ye[P.default.blotName]){var $e=this.container.innerText;return this.container.innerHTML="",new g.default().insert($e,L({},P.default.blotName,ye[P.default.blotName]))}var je=this.prepareMatching(),Be=l(je,2),We=Be[0],Xe=Be[1],Ze=Y(this.container,We,Xe);return X(Ze,`
`)&&Ze.ops[Ze.ops.length-1].attributes==null&&(Ze=Ze.compose(new g.default().retain(Ze.length()-1).delete(1))),Z.log("convert",this.container.innerHTML,Ze),this.container.innerHTML="",Ze}},{key:"dangerouslyPasteHTML",value:function(be,ye){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.default.sources.API;if(typeof be=="string")this.quill.setContents(this.convert(be),ye),this.quill.setSelection(0,S.default.sources.SILENT);else{var je=this.convert(ye);this.quill.updateContents(new g.default().retain(be).concat(je),$e),this.quill.setSelection(be+je.length(),S.default.sources.SILENT)}}},{key:"onPaste",value:function(be){var ye=this;if(!(be.defaultPrevented||!this.quill.isEnabled())){var $e=this.quill.getSelection(),je=new g.default().retain($e.index),Be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(S.default.sources.SILENT),setTimeout(function(){je=je.concat(ye.convert()).delete($e.length),ye.quill.updateContents(je,S.default.sources.USER),ye.quill.setSelection(je.length()-$e.length,S.default.sources.SILENT),ye.quill.scrollingContainer.scrollTop=Be,ye.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var be=this,ye=[],$e=[];return this.matchers.forEach(function(je){var Be=l(je,2),We=Be[0],Xe=Be[1];switch(We){case Node.TEXT_NODE:$e.push(Xe);break;case Node.ELEMENT_NODE:ye.push(Xe);break;default:[].forEach.call(be.container.querySelectorAll(We),function(Ze){Ze[re]=Ze[re]||[],Ze[re].push(Xe)});break}}),[ye,$e]}}]),de}(O.default);B.DEFAULTS={matchers:[],matchVisual:!0};function z(ue,de,Ee){return(typeof de>"u"?"undefined":a(de))==="object"?Object.keys(de).reduce(function(be,ye){return z(be,ye,de[ye])},ue):ue.reduce(function(be,ye){return ye.attributes&&ye.attributes[de]?be.push(ye):be.insert(ye.insert,(0,d.default)({},L({},de,Ee),ye.attributes))},new g.default)}function ee(ue){if(ue.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return ue[de]||(ue[de]=window.getComputedStyle(ue))}function X(ue,de){for(var Ee="",be=ue.ops.length-1;be>=0&&Ee.length<de.length;--be){var ye=ue.ops[be];if(typeof ye.insert!="string")break;Ee=ye.insert+Ee}return Ee.slice(-1*de.length)===de}function H(ue){if(ue.childNodes.length===0)return!1;var de=ee(ue);return["block","list-item"].indexOf(de.display)>-1}function Y(ue,de,Ee){return ue.nodeType===ue.TEXT_NODE?Ee.reduce(function(be,ye){return ye(ue,be)},new g.default):ue.nodeType===ue.ELEMENT_NODE?[].reduce.call(ue.childNodes||[],function(be,ye){var $e=Y(ye,de,Ee);return ye.nodeType===ue.ELEMENT_NODE&&($e=de.reduce(function(je,Be){return Be(ye,je)},$e),$e=(ye[re]||[]).reduce(function(je,Be){return Be(ye,je)},$e)),be.concat($e)},new g.default):new g.default}function ne(ue,de,Ee){return z(Ee,ue,!0)}function ie(ue,de){var Ee=y.default.Attributor.Attribute.keys(ue),be=y.default.Attributor.Class.keys(ue),ye=y.default.Attributor.Style.keys(ue),$e={};return Ee.concat(be).concat(ye).forEach(function(je){var Be=y.default.query(je,y.default.Scope.ATTRIBUTE);Be!=null&&($e[Be.attrName]=Be.value(ue),$e[Be.attrName])||(Be=W[je],Be!=null&&(Be.attrName===je||Be.keyName===je)&&($e[Be.attrName]=Be.value(ue)||void 0),Be=j[je],Be!=null&&(Be.attrName===je||Be.keyName===je)&&(Be=j[je],$e[Be.attrName]=Be.value(ue)||void 0))}),Object.keys($e).length>0&&(de=z(de,$e)),de}function fe(ue,de){var Ee=y.default.query(ue);if(Ee==null)return de;if(Ee.prototype instanceof y.default.Embed){var be={},ye=Ee.value(ue);ye!=null&&(be[Ee.blotName]=ye,de=new g.default().insert(be,Ee.formats(ue)))}else typeof Ee.formats=="function"&&(de=z(de,Ee.blotName,Ee.formats(ue)));return de}function ve(ue,de){return X(de,`
`)||de.insert(`
`),de}function ke(){return new g.default}function Re(ue,de){var Ee=y.default.query(ue);if(Ee==null||Ee.blotName!=="list-item"||!X(de,`
`))return de;for(var be=-1,ye=ue.parentNode;!ye.classList.contains("ql-clipboard");)(y.default.query(ye)||{}).blotName==="list"&&(be+=1),ye=ye.parentNode;return be<=0?de:de.compose(new g.default().retain(de.length()-1).retain(1,{indent:be}))}function xe(ue,de){return X(de,`
`)||(H(ue)||de.length()>0&&ue.nextSibling&&H(ue.nextSibling))&&de.insert(`
`),de}function De(ue,de){if(H(ue)&&ue.nextElementSibling!=null&&!X(de,`

`)){var Ee=ue.offsetHeight+parseFloat(ee(ue).marginTop)+parseFloat(ee(ue).marginBottom);ue.nextElementSibling.offsetTop>ue.offsetTop+Ee*1.5&&de.insert(`
`)}return de}function Ue(ue,de){var Ee={},be=ue.style||{};return be.fontStyle&&ee(ue).fontStyle==="italic"&&(Ee.italic=!0),be.fontWeight&&(ee(ue).fontWeight.startsWith("bold")||parseInt(ee(ue).fontWeight)>=700)&&(Ee.bold=!0),Object.keys(Ee).length>0&&(de=z(de,Ee)),parseFloat(be.textIndent||0)>0&&(de=new g.default().insert("	").concat(de)),de}function et(ue,de){var Ee=ue.data;if(ue.parentNode.tagName==="O:P")return de.insert(Ee.trim());if(Ee.trim().length===0&&ue.parentNode.classList.contains("ql-clipboard"))return de;if(!ee(ue.parentNode).whiteSpace.startsWith("pre")){var be=function($e,je){return je=je.replace(/[^\u00a0]/g,""),je.length<1&&$e?" ":je};Ee=Ee.replace(/\r\n/g," ").replace(/\n/g," "),Ee=Ee.replace(/\s\s+/g,be.bind(be,!0)),(ue.previousSibling==null&&H(ue.parentNode)||ue.previousSibling!=null&&H(ue.previousSibling))&&(Ee=Ee.replace(/^\s+/,be.bind(be,!1))),(ue.nextSibling==null&&H(ue.parentNode)||ue.nextSibling!=null&&H(ue.nextSibling))&&(Ee=Ee.replace(/\s+$/,be.bind(be,!1)))}return de.insert(Ee)}n.default=B,n.matchAttributor=ie,n.matchBlot=fe,n.matchNewline=xe,n.matchSpacing=De,n.matchText=et},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var b=w[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,w);if(b===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:T(O,w,E)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(E)}},c=i(6),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function m(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){m(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"optimize",value:function(E){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,E),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),S}(h.default);y.blotName="bold",y.tagName=["STRONG","B"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function R(x,L){var $=[],Q=!0,se=!1,Z=void 0;try{for(var re=x[Symbol.iterator](),G;!(Q=(G=re.next()).done)&&($.push(G.value),!(L&&$.length===L));Q=!0);}catch(W){se=!0,Z=W}finally{try{!Q&&re.return&&re.return()}finally{if(se)throw Z}}return $}return function(x,L){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return R(x,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function R(x,L){for(var $=0;$<L.length;$++){var Q=L[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(x,Q.key,Q)}}return function(x,L,$){return L&&R(x.prototype,L),$&&R(x,$),x}}(),c=i(2),h=E(c),d=i(0),v=E(d),g=i(5),m=E(g),y=i(10),T=E(y),S=i(9),w=E(S);function E(R){return R&&R.__esModule?R:{default:R}}function b(R,x,L){return x in R?Object.defineProperty(R,x,{value:L,enumerable:!0,configurable:!0,writable:!0}):R[x]=L,R}function O(R,x){if(!(R instanceof x))throw new TypeError("Cannot call a class as a function")}function C(R,x){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:R}function F(R,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);R.prototype=Object.create(x&&x.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(R,x):R.__proto__=x)}var U=(0,T.default)("quill:toolbar"),P=function(R){F(x,R);function x(L,$){O(this,x);var Q=C(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,L,$));if(Array.isArray(Q.options.container)){var se=document.createElement("div");A(se,Q.options.container),L.container.parentNode.insertBefore(se,L.container),Q.container=se}else typeof Q.options.container=="string"?Q.container=document.querySelector(Q.options.container):Q.container=Q.options.container;if(!(Q.container instanceof HTMLElement)){var Z;return Z=U.error("Container required for toolbar",Q.options),C(Q,Z)}return Q.container.classList.add("ql-toolbar"),Q.controls=[],Q.handlers={},Object.keys(Q.options.handlers).forEach(function(re){Q.addHandler(re,Q.options.handlers[re])}),[].forEach.call(Q.container.querySelectorAll("button, select"),function(re){Q.attach(re)}),Q.quill.on(m.default.events.EDITOR_CHANGE,function(re,G){re===m.default.events.SELECTION_CHANGE&&Q.update(G)}),Q.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var re=Q.quill.selection.getRange(),G=a(re,1),W=G[0];Q.update(W)}),Q}return l(x,[{key:"addHandler",value:function($,Q){this.handlers[$]=Q}},{key:"attach",value:function($){var Q=this,se=[].find.call($.classList,function(re){return re.indexOf("ql-")===0});if(se){if(se=se.slice(3),$.tagName==="BUTTON"&&$.setAttribute("type","button"),this.handlers[se]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[se]==null){U.warn("ignoring attaching to disabled format",se,$);return}if(v.default.query(se)==null){U.warn("ignoring attaching to nonexistent format",se,$);return}}var Z=$.tagName==="SELECT"?"change":"click";$.addEventListener(Z,function(re){var G=void 0;if($.tagName==="SELECT"){if($.selectedIndex<0)return;var W=$.options[$.selectedIndex];W.hasAttribute("selected")?G=!1:G=W.value||!1}else $.classList.contains("ql-active")?G=!1:G=$.value||!$.hasAttribute("value"),re.preventDefault();Q.quill.focus();var j=Q.quill.selection.getRange(),B=a(j,1),z=B[0];if(Q.handlers[se]!=null)Q.handlers[se].call(Q,G);else if(v.default.query(se).prototype instanceof v.default.Embed){if(G=prompt("Enter "+se),!G)return;Q.quill.updateContents(new h.default().retain(z.index).delete(z.length).insert(b({},se,G)),m.default.sources.USER)}else Q.quill.format(se,G,m.default.sources.USER);Q.update(z)}),this.controls.push([se,$])}}},{key:"update",value:function($){var Q=$==null?{}:this.quill.getFormat($);this.controls.forEach(function(se){var Z=a(se,2),re=Z[0],G=Z[1];if(G.tagName==="SELECT"){var W=void 0;if($==null)W=null;else if(Q[re]==null)W=G.querySelector("option[selected]");else if(!Array.isArray(Q[re])){var j=Q[re];typeof j=="string"&&(j=j.replace(/\"/g,'\\"')),W=G.querySelector('option[value="'+j+'"]')}W==null?(G.value="",G.selectedIndex=-1):W.selected=!0}else if($==null)G.classList.remove("ql-active");else if(G.hasAttribute("value")){var B=Q[re]===G.getAttribute("value")||Q[re]!=null&&Q[re].toString()===G.getAttribute("value")||Q[re]==null&&!G.getAttribute("value");G.classList.toggle("ql-active",B)}else G.classList.toggle("ql-active",Q[re]!=null)})}}]),x}(w.default);P.DEFAULTS={};function _(R,x,L){var $=document.createElement("button");$.setAttribute("type","button"),$.classList.add("ql-"+x),L!=null&&($.value=L),R.appendChild($)}function A(R,x){Array.isArray(x[0])||(x=[x]),x.forEach(function(L){var $=document.createElement("span");$.classList.add("ql-formats"),L.forEach(function(Q){if(typeof Q=="string")_($,Q);else{var se=Object.keys(Q)[0],Z=Q[se];Array.isArray(Z)?k($,se,Z):_($,se,Z)}}),R.appendChild($)})}function k(R,x,L){var $=document.createElement("select");$.classList.add("ql-"+x),L.forEach(function(Q){var se=document.createElement("option");Q!==!1?se.setAttribute("value",Q):se.setAttribute("selected","selected"),$.appendChild(se)}),R.appendChild($)}P.DEFAULTS={container:null,handlers:{clean:function(){var x=this,L=this.quill.getSelection();if(L!=null)if(L.length==0){var $=this.quill.getFormat();Object.keys($).forEach(function(Q){v.default.query(Q,v.default.Scope.INLINE)!=null&&x.quill.format(Q,!1)})}else this.quill.removeFormat(L,m.default.sources.USER)},direction:function(x){var L=this.quill.getFormat().align;x==="rtl"&&L==null?this.quill.format("align","right",m.default.sources.USER):!x&&L==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",x,m.default.sources.USER)},indent:function(x){var L=this.quill.getSelection(),$=this.quill.getFormat(L),Q=parseInt($.indent||0);if(x==="+1"||x==="-1"){var se=x==="+1"?1:-1;$.direction==="rtl"&&(se*=-1),this.quill.format("indent",Q+se,m.default.sources.USER)}},link:function(x){x===!0&&(x=prompt("Enter link URL:")),this.quill.format("link",x,m.default.sources.USER)},list:function(x){var L=this.quill.getSelection(),$=this.quill.getFormat(L);x==="check"?$.list==="checked"||$.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",x,m.default.sources.USER)}}},n.default=P,n.addControls=A},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var b=w[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,w);if(b===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:T(O,w,E)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(E)}},c=i(28),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function m(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){m(S,T);function S(w,E){v(this,S);var b=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,w));return b.label.innerHTML=E,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(O){O.classList.add("ql-primary")}),b}return a(S,[{key:"buildItem",value:function(E){var b=l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"buildItem",this).call(this,E);return b.style.backgroundColor=E.getAttribute("value")||"",b}},{key:"selectItem",value:function(E,b){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,E,b);var O=this.label.querySelector(".ql-color-label"),C=E&&E.getAttribute("data-value")||"";O&&(O.tagName==="line"?O.style.stroke=C:O.style.fill=C)}}]),S}(h.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var b=w[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,w);if(b===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:T(O,w,E)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(E)}},c=i(28),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function m(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){m(S,T);function S(w,E){v(this,S);var b=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,w));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(O){O.innerHTML=E[O.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return a(S,[{key:"selectItem",value:function(E,b){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,E,b),E=E||this.defaultItem,this.label.innerHTML=E.innerHTML}}]),S}(h.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function h(d,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,v,g){return v&&h(d.prototype,v),g&&h(d,g),d}}();function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(d,v){var g=this;l(this,h),this.quill=d,this.boundsContainer=v||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){g.root.style.marginTop=-1*g.quill.root.scrollTop+"px"}),this.hide()}return a(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var g=v.left+v.width/2-this.root.offsetWidth/2,m=v.bottom+this.quill.root.scrollTop;this.root.style.left=g+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var y=this.boundsContainer.getBoundingClientRect(),T=this.root.getBoundingClientRect(),S=0;if(T.right>y.right&&(S=y.right-T.right,this.root.style.left=g+S+"px"),T.left<y.left&&(S=y.left-T.left,this.root.style.left=g+S+"px"),T.bottom>y.bottom){var w=T.bottom-T.top,E=v.bottom-v.top+w;this.root.style.top=m-E+"px",this.root.classList.add("ql-flip")}return S}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();n.default=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function k(R,x){var L=[],$=!0,Q=!1,se=void 0;try{for(var Z=R[Symbol.iterator](),re;!($=(re=Z.next()).done)&&(L.push(re.value),!(x&&L.length===x));$=!0);}catch(G){Q=!0,se=G}finally{try{!$&&Z.return&&Z.return()}finally{if(Q)throw se}}return L}return function(R,x){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return k(R,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function k(R,x,L){R===null&&(R=Function.prototype);var $=Object.getOwnPropertyDescriptor(R,x);if($===void 0){var Q=Object.getPrototypeOf(R);return Q===null?void 0:k(Q,x,L)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(L)}},c=function(){function k(R,x){for(var L=0;L<x.length;L++){var $=x[L];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(R,$.key,$)}}return function(R,x,L){return x&&k(R.prototype,x),L&&k(R,L),R}}(),h=i(3),d=O(h),v=i(8),g=O(v),m=i(43),y=O(m),T=i(27),S=O(T),w=i(15),E=i(41),b=O(E);function O(k){return k&&k.__esModule?k:{default:k}}function C(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function F(k,R){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:k}function U(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(k,R):k.__proto__=R)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=function(k){U(R,k);function R(x,L){C(this,R),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=P);var $=F(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,x,L));return $.quill.container.classList.add("ql-snow"),$}return c(R,[{key:"extendToolbar",value:function(L){L.container.classList.add("ql-snow"),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),b.default),this.tooltip=new A(this.quill,this.options.bounds),L.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function($,Q){L.handlers.link.call(L,!Q.format.link)})}}]),R}(y.default);_.DEFAULTS=(0,d.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var x=this.quill.getSelection();if(x==null||x.length==0)return;var L=this.quill.getText(x);/^\S+@\S+\.\S+$/.test(L)&&L.indexOf("mailto:")!==0&&(L="mailto:"+L);var $=this.quill.theme.tooltip;$.edit("link",L)}else this.quill.format("link",!1)}}}}});var A=function(k){U(R,k);function R(x,L){C(this,R);var $=F(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,x,L));return $.preview=$.root.querySelector("a.ql-preview"),$}return c(R,[{key:"listen",value:function(){var L=this;l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function($){L.root.classList.contains("ql-editing")?L.save():L.edit("link",L.preview.textContent),$.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function($){if(L.linkRange!=null){var Q=L.linkRange;L.restoreFocus(),L.quill.formatText(Q,"link",!1,g.default.sources.USER),delete L.linkRange}$.preventDefault(),L.hide()}),this.quill.on(g.default.events.SELECTION_CHANGE,function($,Q,se){if($!=null){if($.length===0&&se===g.default.sources.USER){var Z=L.quill.scroll.descendant(S.default,$.index),re=a(Z,2),G=re[0],W=re[1];if(G!=null){L.linkRange=new w.Range($.index-W,G.length());var j=S.default.formats(G.domNode);L.preview.textContent=j,L.preview.setAttribute("href",j),L.show(),L.position(L.quill.getBounds(L.linkRange));return}}else delete L.linkRange;L.hide()}})}},{key:"show",value:function(){l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R}(m.BaseTooltip);A.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=_},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(29),l=ye(a),c=i(36),h=i(38),d=i(64),v=i(65),g=ye(v),m=i(66),y=ye(m),T=i(67),S=ye(T),w=i(37),E=i(26),b=i(39),O=i(40),C=i(56),F=ye(C),U=i(68),P=ye(U),_=i(27),A=ye(_),k=i(69),R=ye(k),x=i(70),L=ye(x),$=i(71),Q=ye($),se=i(72),Z=ye(se),re=i(73),G=ye(re),W=i(13),j=ye(W),B=i(74),z=ye(B),ee=i(75),X=ye(ee),H=i(57),Y=ye(H),ne=i(41),ie=ye(ne),fe=i(28),ve=ye(fe),ke=i(59),Re=ye(ke),xe=i(60),De=ye(xe),Ue=i(61),et=ye(Ue),ue=i(108),de=ye(ue),Ee=i(62),be=ye(Ee);function ye($e){return $e&&$e.__esModule?$e:{default:$e}}l.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":E.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":O.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":E.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":O.SizeStyle},!0),l.default.register({"formats/align":c.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":d.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":E.ColorStyle,"formats/font":b.FontClass,"formats/size":O.SizeClass,"formats/blockquote":g.default,"formats/code-block":j.default,"formats/header":y.default,"formats/list":S.default,"formats/bold":F.default,"formats/code":W.Code,"formats/italic":P.default,"formats/link":A.default,"formats/script":R.default,"formats/strike":L.default,"formats/underline":Q.default,"formats/image":Z.default,"formats/video":G.default,"formats/list/item":T.ListItem,"modules/formula":z.default,"modules/syntax":X.default,"modules/toolbar":Y.default,"themes/bubble":de.default,"themes/snow":be.default,"ui/icons":ie.default,"ui/picker":ve.default,"ui/icon-picker":De.default,"ui/color-picker":Re.default,"ui/tooltip":et.default},!0),n.default=l.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function S(w,E){for(var b=0;b<E.length;b++){var O=E[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(w,O.key,O)}}return function(w,E,b){return E&&S(w.prototype,E),b&&S(w,b),w}}(),l=function S(w,E,b){w===null&&(w=Function.prototype);var O=Object.getOwnPropertyDescriptor(w,E);if(O===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:S(C,E,b)}else{if("value"in O)return O.value;var F=O.get;return F===void 0?void 0:F.call(b)}},c=i(0),h=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function v(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function g(S,w){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:S}function m(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(S,w):S.__proto__=w)}var y=function(S){m(w,S);function w(){return v(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"add",value:function(b,O){if(O==="+1"||O==="-1"){var C=this.value(b)||0;O=O==="+1"?C+1:C-1}return O===0?(this.remove(b),!0):l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,b,O)}},{key:"canAdd",value:function(b,O){return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,b,O)||l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,b,parseInt(O))}},{key:"value",value:function(b){return parseInt(l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,b))||void 0}}]),w}(h.default.Attributor.Class),T=new y("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(4),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function v(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=function(m){v(y,m);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="blockquote",g.tagName="blockquote",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(T,S){for(var w=0;w<S.length;w++){var E=S[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}return function(T,S,w){return S&&y(T.prototype,S),w&&y(T,w),T}}(),l=i(4),c=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function d(y,T){if(!(y instanceof T))throw new TypeError("Cannot call a class as a function")}function v(y,T){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:y}function g(y,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);y.prototype=Object.create(T&&T.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(y,T):y.__proto__=T)}var m=function(y){g(T,y);function T(){return d(this,T),v(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),T}(c.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],n.default=m},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function C(F,U){for(var P=0;P<U.length;P++){var _=U[P];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(F,_.key,_)}}return function(F,U,P){return U&&C(F.prototype,U),P&&C(F,P),F}}(),l=function C(F,U,P){F===null&&(F=Function.prototype);var _=Object.getOwnPropertyDescriptor(F,U);if(_===void 0){var A=Object.getPrototypeOf(F);return A===null?void 0:C(A,U,P)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(P)}},c=i(0),h=y(c),d=i(4),v=y(d),g=i(25),m=y(g);function y(C){return C&&C.__esModule?C:{default:C}}function T(C,F,U){return F in C?Object.defineProperty(C,F,{value:U,enumerable:!0,configurable:!0,writable:!0}):C[F]=U,C}function S(C,F){if(!(C instanceof F))throw new TypeError("Cannot call a class as a function")}function w(C,F){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:C}function E(C,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);C.prototype=Object.create(F&&F.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(C,F):C.__proto__=F)}var b=function(C){E(F,C);function F(){return S(this,F),w(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return a(F,[{key:"format",value:function(P,_){P===O.blotName&&!_?this.replaceWith(h.default.create(this.statics.scope)):l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"format",this).call(this,P,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,_){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,_),this):(this.parent.unwrap(),l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replaceWith",this).call(this,P,_))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:l(F.__proto__||Object.getPrototypeOf(F),"formats",this).call(this,P)}}]),F}(v.default);b.blotName="list-item",b.tagName="LI";var O=function(C){E(F,C),a(F,null,[{key:"create",value:function(P){var _=P==="ordered"?"OL":"UL",A=l(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this,_);return(P==="checked"||P==="unchecked")&&A.setAttribute("data-checked",P==="checked"),A}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function F(U){S(this,F);var P=w(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,U)),_=function(k){if(k.target.parentNode===U){var R=P.statics.formats(U),x=h.default.find(k.target);R==="checked"?x.format("list","unchecked"):R==="unchecked"&&x.format("list","checked")}};return U.addEventListener("touchstart",_),U.addEventListener("mousedown",_),P}return a(F,[{key:"format",value:function(P,_){this.children.length>0&&this.children.tail.format(P,_)}},{key:"formats",value:function(){return T({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,_){if(P instanceof b)l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertBefore",this).call(this,P,_);else{var A=_==null?this.length():_.offset(this),k=this.split(A);k.parent.insertBefore(P,k)}}},{key:"optimize",value:function(P){l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,P);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var _=h.default.create(this.statics.defaultChild);P.moveChildren(_),this.appendChild(_)}l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replace",this).call(this,P)}}]),F}(m.default);O.blotName="list",O.scope=h.default.Scope.BLOCK_BLOT,O.tagName=["OL","UL"],O.defaultChild="list-item",O.allowedChildren=[b],n.ListItem=b,n.default=O},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(56),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function v(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=function(m){v(y,m);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="italic",g.tagName=["EM","I"],n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(S,w){for(var E=0;E<w.length;E++){var b=w[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,w,E){return w&&T(S.prototype,w),E&&T(S,E),S}}(),l=function T(S,w,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,w);if(b===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:T(O,w,E)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(E)}},c=i(6),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,S){if(!(T instanceof S))throw new TypeError("Cannot call a class as a function")}function g(T,S){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:T}function m(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(T,S):T.__proto__=S)}var y=function(T){m(S,T);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,null,[{key:"create",value:function(E){return E==="super"?document.createElement("sup"):E==="sub"?document.createElement("sub"):l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,E)}},{key:"formats",value:function(E){if(E.tagName==="SUB")return"sub";if(E.tagName==="SUP")return"super"}}]),S}(h.default);y.blotName="script",y.tagName=["SUB","SUP"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function v(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=function(m){v(y,m);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="strike",g.tagName="S",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),l=c(a);function c(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:m}function v(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);m.prototype=Object.create(y&&y.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(m,y):m.__proto__=y)}var g=function(m){v(y,m);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="underline",g.tagName="U",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(E,b){for(var O=0;O<b.length;O++){var C=b[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,b,O){return b&&w(E.prototype,b),O&&w(E,O),E}}(),l=function w(E,b,O){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,b);if(C===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,b,O)}else{if("value"in C)return C.value;var U=C.get;return U===void 0?void 0:U.call(O)}},c=i(0),h=v(c),d=i(27);function v(w){return w&&w.__esModule?w:{default:w}}function g(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function m(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function y(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var T=["alt","height","width"],S=function(w){y(E,w);function E(){return g(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(O,C){T.indexOf(O)>-1?C?this.domNode.setAttribute(O,C):this.domNode.removeAttribute(O):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,O,C)}}],[{key:"create",value:function(O){var C=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,O);return typeof O=="string"&&C.setAttribute("src",this.sanitize(O)),C}},{key:"formats",value:function(O){return T.reduce(function(C,F){return O.hasAttribute(F)&&(C[F]=O.getAttribute(F)),C},{})}},{key:"match",value:function(O){return/\.(jpe?g|gif|png)$/.test(O)||/^data:image\/.+;base64/.test(O)}},{key:"sanitize",value:function(O){return(0,d.sanitize)(O,["http","https","data"])?O:"//:0"}},{key:"value",value:function(O){return O.getAttribute("src")}}]),E}(h.default.Embed);S.blotName="image",S.tagName="IMG",n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(E,b){for(var O=0;O<b.length;O++){var C=b[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,b,O){return b&&w(E.prototype,b),O&&w(E,O),E}}(),l=function w(E,b,O){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,b);if(C===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:w(F,b,O)}else{if("value"in C)return C.value;var U=C.get;return U===void 0?void 0:U.call(O)}},c=i(4),h=i(27),d=v(h);function v(w){return w&&w.__esModule?w:{default:w}}function g(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function m(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function y(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var T=["height","width"],S=function(w){y(E,w);function E(){return g(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(O,C){T.indexOf(O)>-1?C?this.domNode.setAttribute(O,C):this.domNode.removeAttribute(O):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,O,C)}}],[{key:"create",value:function(O){var C=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,O);return C.setAttribute("frameborder","0"),C.setAttribute("allowfullscreen",!0),C.setAttribute("src",this.sanitize(O)),C}},{key:"formats",value:function(O){return T.reduce(function(C,F){return O.hasAttribute(F)&&(C[F]=O.getAttribute(F)),C},{})}},{key:"sanitize",value:function(O){return d.default.sanitize(O)}},{key:"value",value:function(O){return O.getAttribute("src")}}]),E}(c.BlockEmbed);S.blotName="video",S.className="ql-video",S.tagName="IFRAME",n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function O(C,F){for(var U=0;U<F.length;U++){var P=F[U];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,F,U){return F&&O(C.prototype,F),U&&O(C,U),C}}(),l=function O(C,F,U){C===null&&(C=Function.prototype);var P=Object.getOwnPropertyDescriptor(C,F);if(P===void 0){var _=Object.getPrototypeOf(C);return _===null?void 0:O(_,F,U)}else{if("value"in P)return P.value;var A=P.get;return A===void 0?void 0:A.call(U)}},c=i(35),h=y(c),d=i(5),v=y(d),g=i(9),m=y(g);function y(O){return O&&O.__esModule?O:{default:O}}function T(O,C){if(!(O instanceof C))throw new TypeError("Cannot call a class as a function")}function S(O,C){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:O}function w(O,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);O.prototype=Object.create(C&&C.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(O,C):O.__proto__=C)}var E=function(O){w(C,O);function C(){return T(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return a(C,null,[{key:"create",value:function(U){var P=l(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,U);return typeof U=="string"&&(window.katex.render(U,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",U)),P}},{key:"value",value:function(U){return U.getAttribute("data-value")}}]),C}(h.default);E.blotName="formula",E.className="ql-formula",E.tagName="SPAN";var b=function(O){w(C,O),a(C,null,[{key:"register",value:function(){v.default.register(E,!0)}}]);function C(){T(this,C);var F=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return F}return C}(m.default);n.FormulaBlot=E,n.default=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function U(P,_){for(var A=0;A<_.length;A++){var k=_[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}return function(P,_,A){return _&&U(P.prototype,_),A&&U(P,A),P}}(),l=function U(P,_,A){P===null&&(P=Function.prototype);var k=Object.getOwnPropertyDescriptor(P,_);if(k===void 0){var R=Object.getPrototypeOf(P);return R===null?void 0:U(R,_,A)}else{if("value"in k)return k.value;var x=k.get;return x===void 0?void 0:x.call(A)}},c=i(0),h=S(c),d=i(5),v=S(d),g=i(9),m=S(g),y=i(13),T=S(y);function S(U){return U&&U.__esModule?U:{default:U}}function w(U,P){if(!(U instanceof P))throw new TypeError("Cannot call a class as a function")}function E(U,P){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:U}function b(U,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(U,P):U.__proto__=P)}var O=function(U){b(P,U);function P(){return w(this,P),E(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return a(P,[{key:"replaceWith",value:function(A){this.domNode.textContent=this.domNode.textContent,this.attach(),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,A)}},{key:"highlight",value:function(A){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=A(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),P}(T.default);O.className="ql-syntax";var C=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),F=function(U){b(P,U),a(P,null,[{key:"register",value:function(){v.default.register(C,!0),v.default.register(O,!0)}}]);function P(_,A){w(this,P);var k=E(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,_,A));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return k.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){k.highlight(),R=null},k.options.interval)}),k.highlight(),k}return a(P,[{key:"highlight",value:function(){var A=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(O).forEach(function(R){R.highlight(A.options.highlight)}),this.quill.update(v.default.sources.SILENT),k!=null&&this.quill.setSelection(k,v.default.sources.SILENT)}}}]),P}(m.default);F.DEFAULTS={highlight:function(){return window.hljs==null?null:function(U){var P=window.hljs.highlightAuto(U);return P.value}}(),interval:1e3},n.CodeBlock=O,n.CodeToken=C,n.default=F},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function P(_,A,k){_===null&&(_=Function.prototype);var R=Object.getOwnPropertyDescriptor(_,A);if(R===void 0){var x=Object.getPrototypeOf(_);return x===null?void 0:P(x,A,k)}else{if("value"in R)return R.value;var L=R.get;return L===void 0?void 0:L.call(k)}},l=function(){function P(_,A){for(var k=0;k<A.length;k++){var R=A[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(_,R.key,R)}}return function(_,A,k){return A&&P(_.prototype,A),k&&P(_,k),_}}(),c=i(3),h=w(c),d=i(8),v=w(d),g=i(43),m=w(g),y=i(15),T=i(41),S=w(T);function w(P){return P&&P.__esModule?P:{default:P}}function E(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}function b(P,_){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:P}function O(P,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(P,_):P.__proto__=_)}var C=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],F=function(P){O(_,P);function _(A,k){E(this,_),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=C);var R=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return R.quill.container.classList.add("ql-bubble"),R}return l(_,[{key:"extendToolbar",value:function(k){this.tooltip=new U(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),S.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),S.default)}}]),_}(m.default);F.DEFAULTS=(0,h.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var U=function(P){O(_,P);function _(A,k){E(this,_);var R=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return R.quill.on(v.default.events.EDITOR_CHANGE,function(x,L,$,Q){if(x===v.default.events.SELECTION_CHANGE)if(L!=null&&L.length>0&&Q===v.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var se=R.quill.getLines(L.index,L.length);if(se.length===1)R.position(R.quill.getBounds(L));else{var Z=se[se.length-1],re=R.quill.getIndex(Z),G=Math.min(Z.length()-1,L.index+L.length-re),W=R.quill.getBounds(new y.Range(re,G));R.position(W)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return l(_,[{key:"listen",value:function(){var k=this;a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var R=k.quill.getSelection();R!=null&&k.position(k.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var R=a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,k),x=this.root.querySelector(".ql-tooltip-arrow");if(x.style.marginLeft="",R===0)return R;x.style.marginLeft=-1*R-x.offsetWidth/2+"px"}}]),_}(g.BaseTooltip);U.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=U,n.default=F},function(t,n,i){t.exports=i(63)}]).default})}(Nc)),Nc.exports}var yr,n1;function oj(){if(n1)return yr;n1=1;var r=yr&&yr.__extends||function(){var v=function(g,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,T){y.__proto__=T}||function(y,T){for(var S in T)T.hasOwnProperty(S)&&(y[S]=T[S])},v(g,m)};return function(g,m){v(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}(),e=yr&&yr.__assign||function(){return e=Object.assign||function(v){for(var g,m=1,y=arguments.length;m<y;m++){g=arguments[m];for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(v[T]=g[T])}return v},e.apply(this,arguments)},t=yr&&yr.__spreadArrays||function(){for(var v=0,g=0,m=arguments.length;g<m;g++)v+=arguments[g].length;for(var y=Array(v),T=0,g=0;g<m;g++)for(var S=arguments[g],w=0,E=S.length;w<E;w++,T++)y[T]=S[w];return y},n=yr&&yr.__importDefault||function(v){return v&&v.__esModule?v:{default:v}},i=n(ih()),a=n(u1()),l=n(rj()),c=n(sj()),h=function(v){r(g,v);function g(m){var y=v.call(this,m)||this;y.dirtyProps=["modules","formats","bounds","theme","children"],y.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],y.state={generation:0},y.selection=null,y.onEditorChange=function(S,w,E,b){var O,C,F,U;S==="text-change"?(C=(O=y).onEditorChangeText)===null||C===void 0||C.call(O,y.editor.root.innerHTML,w,b,y.unprivilegedEditor):S==="selection-change"&&((U=(F=y).onEditorChangeSelection)===null||U===void 0||U.call(F,w,b,y.unprivilegedEditor))};var T=y.isControlled()?m.value:m.defaultValue;return y.value=T??"",y}return g.prototype.validateProps=function(m){var y;if(i.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(m.children)){var T=i.default.Children.only(m.children);if(((y=T)===null||y===void 0?void 0:y.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(m,y){var T=this,S;if(this.validateProps(m),!this.editor||this.state.generation!==y.generation)return!0;if("value"in m){var w=this.getEditorContents(),E=(S=m.value,S??"");this.isEqualValue(E,w)||this.setEditorContents(this.editor,E)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),t(this.cleanProps,this.dirtyProps).some(function(b){return!l.default(m[b],T.props[b])})},g.prototype.shouldComponentRegenerate=function(m){var y=this;return this.dirtyProps.some(function(T){return!l.default(m[T],y.props[T])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(m,y){var T=this;if(this.editor&&this.shouldComponentRegenerate(m)){var S=this.editor.getContents(),w=this.editor.getSelection();this.regenerationSnapshot={delta:S,selection:w},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==y.generation){var E=this.regenerationSnapshot,S=E.delta,b=E.selection;delete this.regenerationSnapshot,this.instantiateEditor();var O=this.editor;O.setContents(S),d(function(){return T.setEditorSelection(O,b)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(m,y){var T=new c.default(m,y);return y.tabIndex!=null&&this.setEditorTabIndex(T,y.tabIndex),this.hookEditor(T),T},g.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(m){return m&&m.ops},g.prototype.isEqualValue=function(m,y){return this.isDelta(m)&&this.isDelta(y)?l.default(m.ops,y.ops):l.default(m,y)},g.prototype.setEditorContents=function(m,y){var T=this;this.value=y;var S=this.getEditorSelection();typeof y=="string"?m.setContents(m.clipboard.convert(y)):m.setContents(y),d(function(){return T.setEditorSelection(m,S)})},g.prototype.setEditorSelection=function(m,y){if(this.selection=y,y){var T=m.getLength();y.index=Math.max(0,Math.min(y.index,T-1)),y.length=Math.max(0,Math.min(y.length,T-1-y.index)),m.setSelection(y)}},g.prototype.setEditorTabIndex=function(m,y){var T,S;!((S=(T=m)===null||T===void 0?void 0:T.scroll)===null||S===void 0)&&S.domNode&&(m.scroll.domNode.tabIndex=y)},g.prototype.setEditorReadOnly=function(m,y){y?m.disable():m.enable()},g.prototype.makeUnprivilegedEditor=function(m){var y=m;return{getHTML:function(){return y.root.innerHTML},getLength:y.getLength.bind(y),getText:y.getText.bind(y),getContents:y.getContents.bind(y),getSelection:y.getSelection.bind(y),getBounds:y.getBounds.bind(y)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=a.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},g.prototype.renderEditingArea=function(){var m=this,y=this.props,T=y.children,S=y.preserveWhitespace,w=this.state.generation,E={key:w,ref:function(b){m.editingArea=b}};return i.default.Children.count(T)?i.default.cloneElement(i.default.Children.only(T),E):S?i.default.createElement("pre",e({},E)):i.default.createElement("div",e({},E))},g.prototype.render=function(){var m;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(m,y,T,S){var w,E;if(this.editor){var b=this.isDelta(this.value)?S.getContents():S.getHTML();b!==this.getEditorContents()&&(this.lastDeltaChangeSet=y,this.value=b,(E=(w=this.props).onChange)===null||E===void 0||E.call(w,m,y,T,S))}},g.prototype.onEditorChangeSelection=function(m,y,T){var S,w,E,b,O,C;if(this.editor){var F=this.getEditorSelection(),U=!F&&m,P=F&&!m;l.default(m,F)||(this.selection=m,(w=(S=this.props).onChangeSelection)===null||w===void 0||w.call(S,m,y,T),U?(b=(E=this.props).onFocus)===null||b===void 0||b.call(E,m,y,T):P&&((C=(O=this.props).onBlur)===null||C===void 0||C.call(O,F,y,T)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=c.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(i.default.Component);function d(v){Promise.resolve().then(v)}return yr=h,yr}var aj=oj();const lj=Gm(aj);class uj extends Ol{constructor(e){super(e),this.quillRef=sh.createRef()}getFormHtml(){return M.jsx("div",{children:M.jsx(lj,{ref:this.quillRef,modules:{toolbar:[["bold","italic","underline","blockquote"],[{color:["#F4F5F8","#E6FFFD","#99AFD1","#ecd23a","#fd5259","#D7ABF7","#9EFFA0","#F4F5F888","#E6FFFD77","#99AFD188","#ecd23a88","#fd525988","#D7ABF788","#9EFFA088","#000000","#E6FFFD44","#99AFD155","#ecd23a55","#fd525955","#D7ABF755","#9EFFA055"]},{background:[!1,"black","#00274D","#C1A71B","#5F0C0C","#4B0082","#002E07"]}],[,"code-block"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[],["clean"]]},style:this.props.wrapperStyle?{...this.props.wrapperStyle}:{minHeight:"100%",padding:"8px",minWidth:"99%",width:"100%"},theme:"snow",value:this.obj[0].getJson()[this.props.name],onChange:this.objDispatch})})}}class PI extends ps{constructor(e){super(e)}createFileInfo(e){const t=new Date,n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");let l="images/"+`${Math.floor(Math.random()*9999)}-${n+i}`+e.target.files[0].name;return this.fileInfo={selectedFile:e.target.files[0],path:l,pic:URL.createObjectURL(e.target.files[0])},this.setState({...this.fileInfo}),this.fileInfo}async prepareOnChange(){let e=await this.operationsFactory.prepare({prepare:{...this.props.prepareOnChange},clean:!0});e=e[0],this.obj=e}async changeHandler(e){var n;await this.createFileInfo(e),this.props.prepareOnChange&&await this.prepareOnChange(),this.props.callBackFunc&&await this.props.callBackFunc(this.obj,this.fileInfo);let t;if(await this.APIService.uploadPics(this.fileInfo.selectedFile,this.fileInfo.path),!this.obj.getPicSrc){if(t=await this.APIService.downloadPics(this.fileInfo.path),!this.props.skipUpdate&&!this.state.skipUpdate)if((n=this.obj)!=null&&n.length)for(let i of this.obj)await i.setCompState({[this.props.uploadAttribute||"picURL"]:t});else await this.obj.setCompState({[this.props.uploadAttribute||"picURL"]:t});this.props.downloadPicsCallBackFunc&&this.props.downloadPicsCallBackFunc(this.obj,this.fileInfo)}return this.props.runOnChange&&this.onSubmit(),t}async onSubmit(){this.props.prepareOnChange&&await this.operationsFactory.addToComponentList(),await this.obj.update(),this.props.finishCallBackFunc&&this.props.finishCallBackFunc(this.obj),this.dispatch({imgUploaded:this.obj})}additionalSetup(){this.wrapper.setStyle({maxWidth:"300px",maxHeight:"30px",width:"fit-content"}),this.label.setStyle({display:"inline-block",height:"35px",maxWidth:"fit-content",cursor:"pointer",position:"relative"}),this.form.updateProps({accept:"image/png, image/gif, image/jpeg, image/jpg, image/webp, image/svg+xml, application/pdf",style:{position:"absolute",top:0,left:0,cursor:"pointer",width:"100%",height:"100%",opacity:0},size:"6",type:"file",name:"file",onChange:this.changeHandler})}getInnerContent(){let e=this.getFormHtml();return this.innerContent=[this.label.getHtml({content:e,type:"label"}),this.props.errorText&&this.error.getHtml()],this.innerContent}getFormHtml(){return this.content=this.props.content||M.jsx(M.Fragment,{children:"Upload"}),M.jsxs("div",{className:this.props.containerStyle||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]})}}class cj extends PI{constructor(e){super(e)}getFormHtml(){var t,n;this.content=this.props.content||M.jsx(M.Fragment,{children:"Upload"});let e=(n=(t=this.obj)==null?void 0:t[0])==null?void 0:n.getJson()[this.props.uploadImgAttribute||"picURL"];return M.jsxs(M.Fragment,{children:[M.jsxs("div",{style:this.props.containerStyle,className:this.props.containerClass||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]}),(this.state.pic||e)&&M.jsx("img",{style:this.props.uploadedImgStyle,className:this.props.uploadedImgClass||"uploadedImg",src:this.state.pic||e})]})}}let hj=class extends ps{constructor(e){super(e),this.state.formClass="FCDefaultDelButton",this.content="Delete"}buttonClickFunc(){this.props.obj.del()}};class fj extends _I{constructor(){super(...arguments);he(this,"factory",{input:Ol,textarea:Ol,math:UD,addButton:jD,baseButton:ps,popupButton:BD,updateButton:qD,runButton:zD,quill:uj,upload:PI,showUpload:cj,del:hj})}}class ay extends lt{constructor(){super();he(this,"addToProps",{});he(this,"addToInitialSetup",[]);he(this,"getterFunc");this.state={}}getProps(){return{interface:this.interface,app:this.app,theme:this.props.theme,type:this.props.type,...this.props,...this.addToProps}}setComponentList(){var t;this.componentList=(t=this.interface)==null?void 0:t.getComponentList()}setProps(){}getHtml(){this.setProps();let t=this.getProps();return this.setGetterFunc(this.props.getterFunc),this.getterFunc&&(this.html=this.getterFunc({...t},t.type||this.state.type)),M.jsx(M.Fragment,{children:this.html})}setGetterFunc(t){this.getterFunc=t||this.interface.getMainFunc()||this.getterFunc}addToFactory(){if(this.props.addToFactory){let t=this.interface.getFactory();for(let n of this.props.addToFactory)t.registerComponent(n.type,n.comp)}}preSetup(){this.componentPreSetup(),this.initialSetupFunctions=[...this.initialSetupFunctions,this.setComponentList,this.addToFactory,...this.addToInitialSetup]}componentPreSetup(){}}class xI extends da{constructor(){super(...arguments);he(this,"mainFunc",this.getFormComponent)}getFactory(){return this.factory===void 0&&(this.factory=new fj),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new MD),this.themeFactory}getFormComponent(t,n){return n=n||"input",this.factory.getComponent(n,t)}}const OI=new xI;class tn extends ay{constructor(e){super(e),this.state={type:"input"},this.interface=OI}}class Uh extends tn{constructor(e){super(e),this.state={type:"popupButton"}}}class NI extends tn{constructor(e){super(e),this.state={type:"updateButton"}}}class Gl extends tn{constructor(e){super(e),this.state={type:"runButton"}}}class dj extends tn{constructor(e){super(e),this.state={type:e.uploadType||"upload"}}}class LI extends tn{constructor(e){super(e),this.state={type:e.uploadType||"del"}}}class En extends lt{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setCell,this.getUseId],this.state={...this.state,defaultTheme:"defaultColumn",interface:"map",wrapperClass:"MCCell",linkClass:"MCLink"},this.setItemPropsRan=!1}setCell(){this.cell=this.props.cell}preSetup(){this.setComponents(["link","wrapper","item","option"])}setitemprops(){let e={...this.createPropObj("item","cell"),className:this.cell.class||this.theme[this.state.classKey],style:this.cell.style};this.cell.itemClick&&(e.checkItemClick=!0),this.setItemPropsRan?this.item.setProps(e):(this.builderObserver.subscribe(e),this.setItemPropsRan=!0)}setwrapperprops(){let e={...this.createPropObj("wrapper","cell")};this.setWrapperPropsRan?this.wrapper.setProps(e):(this.builderObserver.subscribe(e),this.setWrapperPropsRan=!0)}getOption(){return M.jsx(M.Fragment,{})}getUseId(){return this.cell&&this.obj.getJson&&(this.useId=this.cell.useId===!1?"":this.cell.useId===void 0?this.obj.getJson()._id:this.obj.getJson()[this.cell.useId]),this.useId}getInnerContent(){return this.innerContent=[this.item.getHtml({type:this.state.itemType||"span",content:this.getOption()})],this.innerContent}getLinkUrl(){var t,n,i;return(t=this.cell)!=null&&t.to?this.cell.to:`/${(i=(n=this.obj)==null?void 0:n.getJson())==null?void 0:i.type}/${this.useId}`}getLinkFunc(){if(this.cell.forceUpdate){let e=()=>{this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}if(this.cell.linkClick){let e=()=>{this.cell.linkClick(this.obj),this.cell.forceUpdate&&this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}}getHtml(){var t;this.mapInnerContent(),this.getLinkFunc(),this.cell.type;let e=(t=this.cell)!=null&&t.hasLink?this.link.getHtml({type:this.state.linkType||"link",content:this.innerContent,props:{to:this.getLinkUrl()}}):this.wrapper.getHtml({type:this.state.wrapperType||"span",content:this.innerContent});return this.html=M.jsx(M.Fragment,{children:e}),this.html}}class ly extends En{constructor(e){super(e),this.state.classKey="MCDelItem",this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setDel]}setDel(){this.cell.itemClick=this.del}del(){let e=this.props.app;this.cell.popop?e.dispatch({popupSwitch:"del",delComponent:this.obj}):this.obj.del()}getOption(){return M.jsx("div",{children:"X"})}}class uy extends En{constructor(e){super(e),this.state.classKey="MCEditItem",this.state.itemClick=this.edit}edit(){this.props.app.dispatch({popupSwitch:"edit",currentPopupComponent:this.obj})}getOption(){return"edit"}}class Bh extends En{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getName(){let e=this.cell;this.name=e.name,this.name||(this.name=e)}getOption(){return this.getName(),this.obj.getJson()[this.name]}}class pj extends Bh{constructor(e){super(e),this.state.classKey="MCTextItem"}getOption(){return M.jsx(M.Fragment,{children:this.cell.name})}}class mj extends En{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){let e=this.cell.custom;return M.jsx(e,{...this.props,masterCell:this})}}class DI extends En{constructor(e){super(e),this.state.defaultClassName="MCImgItem",this.state.itemType="img"}getPicSrc(){var e,t;return this.obj.getJson&&(this.src=(t=this.obj)==null?void 0:t.getJson()[((e=this.state.cell)==null?void 0:e.src)||"picURL"]),this.cell.imgSrc&&(this.src=this.cell.imgSrc),this.src}additionalPostSetup(){this.getPicSrc(),this.src&&this.item.addProps({src:this.src,alt:"picture goes here"})}}class gj extends En{constructor(e){super(e)}getOption(){({...this.cell,...this.props})}}class MI extends En{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setList,this.setFactory],this.state={...this.state,mapContainerClass:"MCMapContainer",interface:"map",mapSectionClass:"MCMapSection"},this.defaultTypes=["del","edit","img"]}setFactory(){this.factory=this.interface.getFactory()}getDefaultTypes(){return this.defaultTypes}checkCellForDefaults(e){let t=this.getDefaultTypes();return t[t.indexOf(e)]}textOrAttribute(e,t){return e.getJson&&(e!=null&&e.getJson()[t])?"attribute":"text"}getType(e,t){let n=e.type;return n||(n=this.checkCellForDefaults(e),n||(n=this.textOrAttribute(t,e))),n}getProps(e,t){return{obj:t,...this.props,interface:this.interface,cell:e,theme:this.props.theme}}getCellList(e){let t=this.props.cells;return M.jsx(M.Fragment,{children:t.map((n,i)=>{let a=this.getType(n,e),l=this.getProps(n,e);return M.jsx(M.Fragment,{children:this.factory.getComponent(a,l)})})})}getListHtml(){return M.jsx(M.Fragment,{children:this.list.map(e=>M.jsx(M.Fragment,{children:this.mapSection.getHtml({type:"div",content:this.getCellList(e)})}))})}setList(){this.list=this.props.list}preSetup(){this.setComponents(["mapContainer","mapSection","link"])}getHtml(){let e=this.mapContainer.getHtml({type:"div",content:this.getListHtml()});return this.html=M.jsx(M.Fragment,{children:e}),this.html}}class r1 extends ly{constructor(e){super(e),this.state.classKey="MCCustomDelItem"}getOption(){return M.jsx(this.cell.custom,{...this.props,masterCell:this})}}class yj extends ly{constructor(e){super(e),this.state.classKey="MCDelItem"}getOption(){return this.props.delText||"delete"}}const vj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDgiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0OCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0OCIKICAgdGlmZjpJbWFnZVdpZHRoPSI0OCIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDktMDhUMTQ6NDQ6MzYtMDY6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgeG1wTU06YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgeG1wTU06c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgeG1wTU06d2hlbj0iMjAyMy0wOC0wNFQxMDoyNTozOC0wNjowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+zw4Y8wAAAYFpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/ZshgRJmFhcUkZGE0KLGxmMmvwmJmlF+bmee9GTUzXu89SbbKVlFi49eCv4CtslaKSMmWNbFhes7z1Ejm3M49n/u995zuPRc8iaySM8vDkMtbRmw4EpyanglWPlGFjwDthJOKqY/HhxKUtPdbypx4HXJqlT73r9XMq6YCZT7hAUU3LOER4bFlS3d4SzigZJLzwifCHYZcUPjG0VMuPzucdvnTYSMRi4KnXjiY/sWpX6xkjJywvJyWXHZJ+bmP8xK/mp+MS2wWb8IkxjARgowySJReuuiXuZcQ3XTKihL54e/8CRYlV5FZZwWDBdJksOgQdUmqqxI10VUZWVac/v/tq6n1dLvV/RGoeLTt11ao3ITChm1/HNh24RC8D3CeL+Yv7kPfm+gbRa1lD+rW4PSiqKW24WwdGu/1pJH8lrziHk2Dl2OonYaGK6iedXv2s8/RHSRW5asuYWcX2uR83dwXqRtoBLx59Y4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAU5SURBVGiB1ZpfbFNVHMc/bW/H7d3WGujaMeqy8ECMEcgiICDDOI0hEpco8iDECMHEByBRSAwvxCgJ0ZhIzEBjAma8QEyEBwUejEyibg/GYcKYYRCIQEHaVZa2621v/10f7m1pu/5d/9B9k5vc3nvOuZ9v77nn3+8YqIFsdpcIPA88CzhyDgBvzjEGjPh97ki1zzbMNaPN7rIBLwH9aPBihUVEgBHgIjDs97n9c+Go2IDN7rIAO4B3AWkuD82jEHACGPL73OFKMpZtwGZ3mYA3gT2AvSK88jUFHAXO+H3uRDkZyjJgs7s6gUHgmbmzVaSrwB6/z+0pldBUKoHN7loBDAE9VWMVkNEI/WstrZtfbG1f+qTZ/J8/sWgmpL4qStYxRQ4UNVH0DdjsrgHgENBSS+BMdTkF4ehH9q6VT7Wkvyc5oiYPfzX94PS5GR9w0O9z/1Aof8E3oMN/VixNtVriFITTRxzdy3rMWS2YWTAY+tdZ2uWwql6eUPpEyXpXkQOT+crIC6dXm8FC92uhJU5BOHXE0e3qFAq+3b5VYpscVuOXJ5TnRMk6mq86zQLUP9ghoL2mxDn6/MCizt6nF2Q1w6oKhpxK3bdKbPM9TCTHr0fXipL1giIHQpn3swzoTeW31PGDTem3PyOhvtWi1LHQZE5dMxg0E6nzlNb1iq0/DsuJwEyyV5SsZxU5oKbuGXPK3UKDmkp/MJncvs97d+JGNKvjyn0DABbRYHx5vaUVWA68kXkvbUDvYffWhRbocQnmbQNttsxrgRnNxPj10iYcdpOgn+7VWYHsN7CDOvWwPS7BfOoLZ/eh9xcu3rW1/YnMe8FQMvn2fu/dK9eicrEyJm/GFP20A3gndd0E6YHZl4B5dtbqlIJ32rW63rfa0haSk/G//o6mR6LRmKqevyQH1/UusHR2CLMYJm5Ew58cm/aq6ZrPclGyfqfIAcUEIErWzcCmesOnVNhEOLh25QLLYscjE+4H8ejOA1PuQDCZzCiiBbilyIFrKQO7gaWNgC9mIhZT1XOX5OCaFaLY5RRa3A/i0bc+8N6574nH85WhyIELJn0y8jEg5EtUD/iiJuKo5y/JwS6HIOz/9OG/heCBLlGynjSJkvUFYKDe8L/+EQke/nra+8oGqV0wPWpn8pmIx+Gn38MzwVBWtcmVAIybRMm6FeitN/x7B6fu37gdi169Hgtv2ljaRJnymETJ+jqwrN7w0ZjWhty+F49N3opFXutvzeoT+lZb2nzTidj4ZFShfN0z8mjiXXd4gBazwbB9ILsvAPD4ErHRy5GifUEeOao2UCn8N4c6ujauEbMGih5fIrZtn+fOP+54rMLHV2fgMcODbmBOagJ4QBsLeecrPOCt2EATwUOlBpoMHiox0ITwoBsYm6fwAGNGtAXWgl14E8NHgFGjvsQ9Ms/gQV+eT/UDw/MMHrRl+fSc+CLaEndaTQ4fQv/TjQB6cOFEZoomhgc4ngqIZA4lhtDW5/OqieCngJOpH2kDemTkaKFcTQIPMJgZxckdzJ1BCy4U1GOGHwfOZl6YtQZms7ucwPc3h7s3lFtqg+CngK25UZtZw2k9we5yS20QfJQCIae88wG/z32lnFIbBA9alCYv05wnNA385z8sFmIqGaXUozXHqF9otZCm0KpN0dpQMoSkyAGPKFkvAKuowQpGmRoHdvp97lulElYa6N6CFkOoZ6B7EDhb00B3pjK2GuwCWivNX0Ah4Dhwsm5bDXKlxxT60TZ8VLPZ42fgl4Zt9sgnfYV7PZVttxmtxXab/wFJap9Ow0di3gAAAABJRU5ErkJggg==";class _j extends uy{constructor(e){super(e),this.state.classKey="MCEditImgItem",this.state.itemType="img"}additionalPostSetup(){this.getImg(),this.item.setProps({src:this.src})}getImg(){return this.src=this.cell.imgSrc||vj,this.src}}class wj extends uy{constructor(e){super(e),this.state.classKey="MCCustomEditItem"}getOption(){return M.jsx(this.cell.custom,{...this.props,masterCell:this})}}let Ej=class extends MI{constructor(e){super(e),this.mapContainer=sh.createRef(),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getPicObj,this.getAddComponentButton],this.state={...this.state,index:0,isDragging:void 0,defaultTheme:"interactiveMap"}}_addEventListeners(){var t;this.props;let e=[];for(let n of this.list){let i=document.getElementById(n.getJson()._id);i.addEventListener("mousedown",a=>{this.setState({isDragging:i})}),i.addEventListener("mouseup",a=>{this.setState({isDragging:void 0})}),e.push(i),this.setState({saveList:e})}(t=this.mapContainer)!=null&&t.current&&(this.mapContainer.current.addEventListener("mouseup",n=>{this.currentComp!==void 0&&this.currentComp.update(),this.setState({isDragging:void 0})}),this.mapContainer.current.addEventListener("mousemove",n=>{if(this.state.isDragging!==void 0){let i=this.state.isDragging,a=i.id,l=this.list.find(c=>c.getJson()._id===a);if((l==null?void 0:l.getJson().draggable)!==!1){const c=this.mapContainer.current.getBoundingClientRect(),h=n.pageX-c.left-25,d=n.pageY-c.top-25;l.setCompState({x:h,y:d}),this.currentComp=l,i.style.left=`${h}px`,i.style.top=`${d}px`}}}))}componentDidMount(){this._addEventListeners()}zoom(e){let t=this.mapContainer.current.getBoundingClientRect(),n=t.width*e,i=t.height*e;this.mapContainer.current.style.width=n+"px",this.mapContainer.current.style.height=i+"px";let a=this.state.saveList;for(let l of a){const c=l.style.left||"0",h=l.style.top||"0",d=c.match(/(-?\d*\.?\d+)/),v=h.match(/(-?\d*\.?\d+)/),g=d?parseFloat(d[0]):0,m=v?parseFloat(v[0]):0,y=g*e,T=m*e;l.style.left=y+"px",l.style.top=T+"px"}}componentDidUpdate(e,t){this.props.list.length!==e.list.length&&this._addEventListeners()}getAddComponentButton(){var e,t;if(this.addComponentButton=this.props.addComponentButton,this.addComponentButton!==void 0){let n=typeof this.addComponentButton=="string"?this.addComponentButton:this.addComponentButton.type||"addComponentButton",i=this.props.pinKey||((e=this.mapObj)==null?void 0:e.getJson().pinType)||"pin";this.addComponentButton=this.factory.getComponent(n,{...this.props,theme:this.props.theme||this.state.defaultTheme,mapId:this.mapObj?(t=this.mapObj)==null?void 0:t.getJson()._id:void 0,addType:i,addPinProps:this.props.addPinProps,pinAdded:this._addEventListeners})}}getPicObj(){var t;let e=this.props.imgAttribute||"picURL";this.mapObj&&(this.picSrc=(t=this.mapObj)==null?void 0:t.getJson()[e])}preSetup(){this.setComponents([])}async changePic(e){let t=this.props.list;e=e<0?e=t.length-1:e,e=e>=t.length?0:e,this.mapObj=t[e],await this.setState({index:e}),this._addEventListeners()}setList(){if(!this.listSet){let t=this.props.list[this.state.index];this.mapObj=t;let n=this.props.pinKey||(t==null?void 0:t.getJson().pinType)||"pin",i=this.props.pinAttribute||(t==null?void 0:t.getJson().type)+"Id"||"mapId",a=this.props.mapId||(t==null?void 0:t.getJson()._id);this.list=this.componentList.getList(n,a,i)}}preSetup(){this.setComponents(["mapContainer","right","left","image","zoomIn","zoomOut"])}getIndexAndChangeMap(e){let t=this.props.list.indexOf(this.mapObj)+e;this.changePic(t)}getListHtml(){let e=this.props,t=this.theme,n=this.factory;return M.jsx(M.Fragment,{children:this.list.map((i,a)=>{let l={obj:i,props:e,interface:this.interface,cell:e.pinCell,theme:this.props.them||this.state.defaultTheme,pinProps:this.props.pinProps};return M.jsx("div",{id:i.getJson()._id,className:e.mapSectionClass?e.mapSectionClass:t.MCMapSection,style:{...e.mapSectionStyle,left:i.getJson().x+"px",top:i.getJson().y+"px"},children:M.jsx(M.Fragment,{children:n.getComponent(e.pinType?e.pinType:"attribute",l)})},a)})})}getHtml(){if(this.props.list.length>0){let e=this.props,t=this.theme;return M.jsxs("div",{ref:this.mapContainer,className:e.mapContainerClass?e.mapContainerClass:t.MCMapContainer,style:{...e.mapContainerStyle},children:[M.jsx("img",{src:this.picSrc,className:e.mapClass?e.mapClass:t.MCMap,style:{...e.mapStyle}}),this.getListHtml(),e.addComponentButton&&M.jsx(M.Fragment,{children:this.addComponentButton}),M.jsx("div",{style:{position:"absolute",top:"0px",right:"0px"},onClick:()=>{this.zoom(.5)},children:"zoom out"}),M.jsx("div",{style:{position:"absolute",top:"20px",right:"0px"},onClick:()=>{this.zoom(2)},children:"zoom in"}),M.jsx("div",{style:{position:"absolute",top:"0px",left:"-20px"},onClick:()=>{this.getIndexAndChangeMap(-1)},children:"prev"}),M.jsx("div",{style:{position:"absolute",top:"20px",right:"-20px"},onClick:()=>{this.getIndexAndChangeMap(1)},children:"next"})]})}else this.list=[]}};class Tj extends En{constructor(e){super(e)}preSetup(){this.setComponents([])}async createObjType(){let e=this.operationsFactory,t=this.props.addType;await e.prepare({prepare:{type:t,mapId:this.props.mapId,...this.props.addPinProps},clean:!0,run:!0}),this.props.pinAdded()}getHtml(){let e=this.props.text||"+ Add Item";return M.jsxs("div",{onClick:this.createObjType,style:this.props.style,className:this.props.class||this.theme.MCAddButton,children:[e," "]})}}class Sj extends En{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getOption(){return this.state.obj}}class Ij extends Bh{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getItemClass(){var i;let e=this.cell,t=e.activeAttribute?e.activeAttribute:"_id";if(this.state.obj.getJson()[t]===((i=e.activeItem)==null?void 0:i.getJson()[t])){let a=e.activeClass?e.activeClass:this.theme.MCActiveItem;this.item.setClass(this.item.getClass()+" "+a)}}additionalPostSetup(){this.getItemClass()}}class Cj extends DI{constructor(e){super(e),this.state.classKey="MCLogoItem"}}class bj extends En{constructor(e){super(e),this.state.itemType="div"}getList(){return this.list=this.props.cell.links.filter(e=>(e==null?void 0:e.name)!==void 0),this.list}getHome(){var e;if(!this.state.active){this.home=this.list.find(t=>t.path==="/");for(let t of this.list)t.active=(e=this.home)==null?void 0:e.name}}getOption(){let e=this.props.cell.links.filter(t=>(t==null?void 0:t.name)!==void 0&&t.display!==!1);return M.jsx(On,{list:e,theme:this.cell.linksTheme||"links",mapSectionClass:this.props.cell.linkSectionClass||void 0,mapSectionStyle:this.props.cell.linkSectionStyle||void 0,cells:[{type:"linkItem",class:this.props.cell.linkItemClass||void 0,activeClass:this.props.cell.activeClass||void 0,style:this.props.cell.linkItemStyle||void 0,linkClick:t=>{for(let n of this.props.cell.links)n.active=t==null?void 0:t.name;this.setState({active:t==null?void 0:t.name})}}]})}additionalSetup(){this.getList(),this.getHome()}}class Aj extends En{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setUpLinks],this.state.classKey="MCLinkItem",this.state.itemType="div"}setUpLinks(){this.cell.to=this.obj.path,this.useId="",this.cell.hasLink=!0}getActiveClass(){return this.activeClass=this.cell.activeClass||this.theme.MCActiveLink,this.activeClass}setActiveClass(){var n,i,a,l,c;const e=((n=this.obj)==null?void 0:n.path)==="/"||((i=this.obj)==null?void 0:i.path)==="/home",t=window.location.pathname;if(e){const h=t.split("/").filter(Boolean);if(h.length>0&&h[0]!=="home")return}if(((a=this.obj)==null?void 0:a.active)===((l=this.obj)==null?void 0:l.name)||t.includes((c=this.obj)==null?void 0:c.path)){let h=this.getActiveClass();h=h||"",this.item.setClass(this.item.getClass()+" "+h)}}additionalSetup(){this.setActiveClass()}getOption(){var e;return(e=this.props.obj)==null?void 0:e.name}}class kj extends En{constructor(e){super(e),this.state.classKey="MCTextItem"}additionalPostSetup(){this.item.setOnClick(this.cell.logoutFunc||this.APIService.logout)}getOption(){return"logout"}}class Rj extends En{constructor(e){super(e),this.state.classKey="MCOrderedArrows",this.state.increment=1,this.state.decrement=-1}increasePosition(){this.obj.updateOrder(this.state.increment)}decreasePosition(){this.obj.updateOrder(this.state.decrement)}increaseArrowUI(){return this.increaseArrow=M.jsx("div",{className:"upward-arrow",onClick:this.decreasePosition}),this.increaseArrow}decreaseArrowUI(){return this.decreaseArrow=M.jsx("div",{style:{marginTop:"5px"},className:"downward-arrow",onClick:this.increasePosition}),this.decreaseArrow}getOption(){return this.increaseArrowUI(),this.decreaseArrowUI(),M.jsxs("div",{style:{marginTop:"-4px"},className:"fitCC",children:[this.increaseArrow,this.decreaseArrow]})}}class Pj extends En{constructor(e){super(e),this.state.displayState=!1,this.state.itemType="div"}displayOption(){return M.jsx("div",{style:{position:"absolute",left:"0px",top:"0px"},className:this.state.displayState?"downward-arrow":"right-arrow",onClick:()=>{this.wrapper.setStyle({...this.wrapper.getStyle(),height:"200px"}),this.setState({displayState:!this.state.displayState})}})}mapOption(){return M.jsx(On,{name:this.props.name,filter:{attribute:this.props.filter.attribute,search:this.obj.getJson()._id},cells:[...this.props.cells]})}additionalPostSetup(){this.item.setStyle({...this.item.getStyle(),position:"relative"})}getOption(){return M.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[this.displayOption(),"  ",this.state.displayState&&this.mapOption(),"  "]})}}class xj extends Bh{constructor(){super(),this.state.classKey="MCBackgroundItem",this.state.wrapperClass="MCCellBackground",this.state.linkClass="MCBackgroundLink"}additionalPostSetup(){let t={width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",textAlign:"center",fontSize:"50px",background:`linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${this.cell.pirSRC||this.obj.getJson()[this.cell.picAttribute||"picURL"]}) no-repeat center center`,backgroundSize:"cover",textDecoration:"none"};this.wrapper.setStyle({...this.wrapper.getStyle(),...t}),this.link.setStyle({...this.wrapper.getStyle(),...t})}}class Oj extends En{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){return this.cell.custom}}class Nj extends _I{constructor(){super(...arguments);he(this,"factory",{text:pj,attribute:Bh,custom:mj,customBuilt:Oj,img:DI,form:gj,del:ly,delIcon:r1,delCustom:r1,delText:yj,edit:uy,editIcon:_j,editCustom:wj,interactiveMap:Ej,addComponentButton:Tj,plain:Sj,select:Ij,logo:Cj,links:bj,linkItem:Aj,logout:kj,default:On,map:MI,order:Rj,innerMap:Pj,backgroundImage:xj})}}class cy{constructor(){he(this,"MCMapContainer","Map-Container");he(this,"MCMapSection","Map-Section");he(this,"MCLink","Map-Link");he(this,"MCCell","Map-Cell");he(this,"MCCustomDelItem","Map-Custom-Del-Item");he(this,"MCDelItem","Map-Del-Item");he(this,"MCDelImgItem","Map-Del-imgItem");he(this,"MCCustomEditItem","Map-Custom-Edit-Item");he(this,"MCEditImgItem","Map-Edit-imgItem");he(this,"MCEditItem","Map-Edit-Item");he(this,"MCAttributeItem","Map-Attribute-Item");he(this,"MCImgItem","Map-imgItem");he(this,"MCTextItem","Map-Text-Item");he(this,"MCActiveItem","Map-Active-Item");he(this,"MCCustom","");he(this,"MCBackgroundItem","background-item");he(this,"MCCellBackground","cell-background");he(this,"MCBackgroundLink","cell-background");he(this,"MCLogoItem","navLogo")}}class qh extends cy{constructor(){super(...arguments);he(this,"MCSectionHover","DC-Map-Section:hover");he(this,"MCCustomDelItem","DC-Custom-Del-Item");he(this,"MCDelItem","DC-Del-Item");he(this,"MCDelImgItem","DC-Del-imgItem");he(this,"MCCustomEditItem","Map-Custom-Edit-Item");he(this,"MCEditImgItem","DC-Edit-imgItem");he(this,"MCEditItem","DC-Edit-Item")}}class zh extends qh{constructor(){super(...arguments);he(this,"MCMapContainer","DR-Map-Container");he(this,"MCMapSection","DR-Map-Section")}}class Lj extends zh{constructor(){super(...arguments);he(this,"MCMapContainer","DRW-Map-Container")}}class Dj extends zh{constructor(){super(...arguments);he(this,"MCMapContainer","IM-Map-Container");he(this,"MCMapSection","IM-Map-Section");he(this,"MCMap","IM-Map");he(this,"MCAddButton","IM-addButton");he(this,"MCActiveItem","IM-Active-Item");he(this,"MCCell","IM-Cell")}}class Mj extends zh{constructor(){super(...arguments);he(this,"MCActiveLink",this.MCActiveItem);he(this,"MCLinkItem",this.MCLink);he(this,"MCMapSection","SB-Map-Section")}}class jj extends qh{constructor(){super(...arguments);he(this,"MCActiveLink",this.MCActiveItem);he(this,"MCLinkItem",this.MCLink);he(this,"MCMapSection","SB-link");he(this,"MCCell","SB-Cell-Link");he(this,"MCLink","SB-Map-Link");he(this,"MCLinkItem","SB-Map-Link")}}class Fj extends qh{constructor(){super(...arguments);he(this,"MCActiveLink",this.MCActiveItem);he(this,"MCLinkItem",this.MCLink)}}const Vj=Object.freeze(Object.defineProperty({__proto__:null,DefaultColumn:qh,DefaultRegistry:cy,DefaultRow:zh,DefaultWrapRow:Lj,InteractiveMap:Dj,Links:jj,SideBar:Mj,TopBar:Fj},Symbol.toStringTag,{value:"Module"}));class Uj extends ry{constructor(){super(Vj),this.factory.default=cy}}class Bj{constructor(){he(this,"factory",{text:Nl,tag:jI,plain:$j,textAndTag:Hj,textAndTag2:zj,bool:Kj,textAttributeList:Wj})}getFilter(e){if(e)return this.factory[e]}registerFilter(e,t){this.factory[e]=t}}function jI(r){let{list:e,attribute:t,tagList:n}=r;return e.length>0&&(e=e.filter(i=>!!n.find(l=>(t?l.getJson()[t]:l.getJson().connectedId)===i.getJson()._id))),e}function qj(r){let e=[];if(r.search&&r.list){const t=r.search.toLowerCase().split(" ").map(n=>n.trim());e=r.list.filter(n=>{const i=n.getJson()[r.attribute||"tags"];if(i){let a=i.split(r.splitStr||",");a=a.map(l=>l.toLowerCase());for(let l of t)if(a.includes(l))return!0}else return!1})}return e}function zj(r){let{list:e,attributes:t,search:n}=r,i=[],a=[],l=t.split(",");for(let h of l)a.push(Nl({...r,attribute:h}));let c=qj({...r});return i=[...a[0],...c,...a[1],...a[2]],i=hy(i),i}function Hj(r){let{list:e,attribute:t,tagList:n,attribute2:i,attributeTag:a,search:l}=r,c=Nl({...r,attribute:t}),h=jI({...r,attribute:a}),d=Nl({...r,attribute:i});return e=[...c,...h,...d],hy(e)}function hy(r){const e=new Map;return r.forEach(t=>{const i=t.getJson()._id;e.has(i)||e.set(i,t)}),Array.from(e.values())}function Nl(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var a;return(a=i.getJson()[t])==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function $j(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var a;return(a=i[t])==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function Wj(r){let{attributeList:e}=r,t=[];for(let n of e)t=[...t,...Nl({...r,attribute:n})];return t=hy(t),t}function Kj(r){let{list:e,attribute:t,search:n}=r;return e=e.filter(i=>i.getJson()[t]===n),e}class FI extends da{constructor(){super();he(this,"FilterFactory");this.getFilterFactory(),this.mainFunc=this.getMapComponent}getFactory(){return this.factory===void 0&&(this.factory=new Nj),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new Uj),this.themeFactory}getFilterFactory(){return this.filterFactory===void 0&&(this.filterFactory=new Bj),this.filterFactory}getMapComponent(t,n){return n=n||"default",this.factory.getComponent(n,t)}}class On extends ay{constructor(e){super(e),this.state={type:"map"},this.interface=VI}setFilterInfo(){this.filterFacotry=this.interface.getFilterFactory(),this.filters=this.props.filters,this.filterFunc=this.props.filterFunc,this.filter=this.props.filter}getFilterFunc(){var e;if(!this.filterFunc&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filterFunc");t&&(this.filterFunc=t.func)}}getFilter(){var e;if(!this.filter&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filter");t&&(this.filter={...t})}}getList(){var t,n,i,a;let e=this.props.name;this.list=this.props.list?this.props.list:this.filter?(i=this.componentList)==null?void 0:i.getList(e,(t=this.filter)==null?void 0:t.search,(n=this.filter)==null?void 0:n.attribute):(a=this.componentList)==null?void 0:a.getList(e)}filterListByFilterFunc(){this.list&&(this.list=this.list.filter(e=>this.filterFunc?this.filterFunc(e):!0))}filterListByFilterFactory(){if(this.filters)for(let e of this.filters){let t=this.filterFacotry.getFilter(e.type);t&&(this.list=t({list:this.list,...e}))}}setProps(){let e=this.props.cells;this.addToProps={cells:e,list:this.list}}componentPreSetup(){this.addToInitialSetup=[this.setFilterInfo,this.getFilterFunc,this.getFilter,this.getList,this.filterListByFilterFunc,this.filterListByFilterFactory]}}const VI=new FI;class UI extends lt{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getNavLists],this.state={}}getLinks(){var e,t;return this.props.links?this.props.links:(t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes}getDefaultNavItem(e){return{logo:{imgSrc:this.props.logoURL,label:this.props.logoLabel,...this.props},links:{links:this.getLinks(),...this.props,class:"fit"},logout:{logoutFunc:this.props.logoutFunc,auth:this.props.auth,wrapperClass:"SB-logout",...this.props}}[e]}getList(){let e=this.props.navList,t=e.getList();for(let n=0;n<t.length;n++)if(t[n].default){let i=this.getDefaultNavItem(t[n].type);i.type=t[n].type,e.update(n,i)}return this.props.type==="topBar"&&(t=t.filter(n=>n.type!=="links")),t}getHtml(){return M.jsx(On,{theme:this.props.mapTheme,list:this.mapList,cells:this.list,...this.props.navMapProps})}getNavLists(){this.list=this.props.list?this.props.list:this.getList(),this.mapList=this.props.mapList?this.props.mapList:[{}]}}class Gj{constructor(){he(this,"factory",{default:UI})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),M.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class Qj extends lt{constructor(e){super(e),this.state={defaultStyle:"navMenu",renderComp:void 0}}async open(){let e=await this.props.open();this.props.type==="topBar"&&(this.state.renderComp?this.setState({renderComp:void 0}):this.setState({renderComp:e}))}render(){return this.props.app,M.jsxs("div",{children:[M.jsxs("div",{onClick:this.open,className:this.props.menuClass?this.props.menuClass:this.state.defaultStyle,children:[this.props.menuContent&&M.jsx(M.Fragment,{children:this.props.menuContent})," "]}),this.state.renderComp&&M.jsx(M.Fragment,{children:this.state.renderComp})]})}}class Jj extends _n{constructor(e){super(e),this.state={...this.state,defaultType:this.props.type?this.props.type:"sideBar",typeKey:"layout",defaultNavType:"default",phoneSize:850,left:-400}}getProps(){var e,t;return{mapTheme:this.props.mapTheme||this.state.defaultType,links:this.props.links||((t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes),...this.props}}getFactoryComponent(e){let t=this.props.mapType?this.props.mapType:this.state.defaultNavType;return this.props.factory.getComponent(t,e)}componentDidMount(){this.resize!==void 0&&(window.addEventListener("resize",this.resize),this.resize())}componentWillUnmount(){this.resize!==void 0&&window.removeEventListener("resize",this.resize)}resize(){if(window.innerWidth<850){this.setState({phone:!0,tablet:!1,defaultType:this.props.phoneLayout?this.props.phoneLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}if(window.innerWidth<1224){this.setState({phone:!1,tablet:!0,defaultType:this.props.tabletLayout?this.props.tabletLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}window.innerWidth>1224&&(this.state.phone&&this.setState({phone:!1,defaultType:this.state.ogType}),this.state.tablet&&this.setState({tablet:!1,defaultType:this.state.ogType}))}async setStyleOnMenuClick(e){const t=n=>new Promise(i=>setTimeout(i,n));this.card.setStyle({...this.card.getStyle(),left:e.toString()+"px"}),await this.setState({left:e}),await t(10)}async setNavOpenClose(){if(this.state.left===-400)for(let e=-400;e<600;e=e+15){if(e>0){this.setState({left:0});break}await this.setStyleOnMenuClick(e)}else for(let e=0;e>-450;e=e-15){if(e<-400){this.setState({left:-400});break}await this.setStyleOnMenuClick(e)}}async openCloseLinks(){var n,i;let e=M.jsx(On,{list:this.props.links||((i=(n=this.props.app)==null?void 0:n.state)==null?void 0:i.routes),cells:[{type:"link"}]});return M.jsx(_n,{content:e})}async openCloseNavFun(){return await{topBar:this.openCloseLinks,sideBar:this.setNavOpenClose}[this.state.defaultType]()}getMenu(){return this.props.menuComponent?M.jsx(this.props.menuComponent,{...this.props.menuComponentProps,open:this.openCloseNavFun,type:this.state.defaultType}):M.jsx(Qj,{open:this.openCloseNavFun,type:this.state.defaultType,...this.props.menuComponentProps})}getContent(){let e=this.getProps(),t=this.getFactoryComponent(e);return this.content=M.jsxs(M.Fragment,{children:[t,this.props.type!=="type"&&(this.state.phone||window.innerWidth<this.state.phoneSize)&&M.jsx(M.Fragment,{children:this.getMenu()})]}),this.content}}class Yj{constructor(){wn.bind(this),this.list=[{type:"logo",picURL:void 0,label:void 0,default:!0},{type:"links",linkJson:void 0,default:!0},{type:"logout",logoutFunc:void 0,auth:void 0,default:!0}]}setList(e){this.list=e}getList(){return this.list}insert(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,0,t)}add(e,t){t?this.list.unshift(e):this.list.push(e)}addCustomJSX(e,t,n){let i={type:"custom",custom:e};t?this.insert(t,i):this.add(i,n)}update(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list[e]={...this.list[e],...t}}remove(e){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,1)}}class BI extends da{constructor(){super();he(this,"factory");he(this,"navList");wn.bind(this),this.getFactory(),this.getNavList(),this.mainFunc=this.getNav}getFactory(){return this.factory||(this.factory=new Gj),this.factory}getNav(t){return M.jsx(Jj,{factory:this.factory,navInterface:this,navList:this.navList,...t})}getNewNavList(){return new Yj}setNavListForce(t){this.navList=t}getNavList(){return this.navList||(this.navList=this.getNewNavList()),this.navList}}const nh=new BI;class Xj extends ay{constructor(e){super(e),this.interface=nh}}class Zj{constructor(){he(this,"factory",{})}getComponent(e){return this.factory[e]}registerComponent(e,t){this.factory[e]=t}}class eF extends Zj{constructor(){super(...arguments);he(this,"factory",{})}}class tF extends lt{constructor(e){super(e),this.state={}}checkPopupSwitch(e){var t,n;return this.popupSwitch=this.props.popupSwitch||((n=(t=this.props.app)==null?void 0:t.state)==null?void 0:n.popupSwitch),this.popupSwitch!==""&&this.popupSwitch!==void 0&&(e=!0),e}checkType(e){var i,a,l,c,h;let t=this.props.currentPopupComponent||((a=(i=this.props.app)==null?void 0:i.state)==null?void 0:a.currentPopupComponent),n=(l=this.popupFactory.getComponent(this.popupSwitch))==null?void 0:l.componentType;return n&&(t=this.isArray(t),e=((h=(c=t[0])==null?void 0:c.getJson())==null?void 0:h.type)===n&&t.length>0),e}render(){var n;let e=this.checkPopupSwitch(!1);e&&(e=this.checkType(e)),this.popupFactory=this.props.factory||this.props.app.state.popupFactory;let t=(n=this.popupFactory)==null?void 0:n.getComponent(this.popupSwitch);return M.jsx(M.Fragment,{children:e&&(t==null?void 0:t.content)&&M.jsx(_n,{content:M.jsx(t.content,{}),popup:!0,type:t.popupType||"biggerCard",theme:t.popupTheme||"Default",handleClose:()=>{if(t.handleClose)t.handleClose();else{let i=this.props.app.state.currentPopupComponent;i&&this.props.app.state.operationsFactory.removeFromList(i),this.props.app.dispatch({currentPopupComponent:void 0,popupSwitch:void 0})}}})})}}class nF extends da{constructor(){super();he(this,"factory");wn.bind(this),this.getFactory()}getFactory(){return this.factory||(this.factory=new eF),this.factory}createPopupMachine(t){return M.jsx(tF,{app:(t==null?void 0:t.app)||this.getAppComponent(),factory:this.factory})}}let i1=new nF;class rF{constructor(){he(this,"convertStringToLink",e=>e&&(!e.startsWith("http://")&&!e.startsWith("https://")?"https://"+e:e))}isLikelyUrl(e){return/\.(com|net|org|io|gov|edu|co)\b/.test(e)||/^(?:f|ht)tps?\:\/\//.test(e)||/^mailto\:/i.test(e)}checkURLforString(e){return window.location.href.includes(e)}getIdFromURL(e,t){let i=window.location.href.split("/"),a=i[i.length-1],l=e?a.split("-"):[a];return t?l[t]:l[0]}getTypeFromURL(){let t=window.location.href.split("/");return t[t.length-2]}}let rh=new rF;class qI extends lt{constructor(t,n){super(t);he(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:!0},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getList(t,n,i),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}async componentDidMount(){this.getComponentsFromBackend();let t=this;window.addEventListener("popstate",function(n){t.onBackClick(n)})}onBackClick(t){this.getComponentsFromBackend()}componentDidUpdate(){this.getComponentsAgain()}async getComponentsAgain(t,n){this.getFromURL(),(this.app.state.urlChange||this.state.reRender&&this.urlId!==this.state.urlId)&&(await this.setState({urlId:this.urlId}),await this.dispatch({urlChange:void 0}),this.forceRerender=!1,this.getComponentsFromBackend())}async getFromURL(){this.urlType=rh.getTypeFromURL(),this.urlId=rh.getIdFromURL()}}class ma extends qI{constructor(t,n){super(t,n);he(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:n==null?void 0:n.owner},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getComponents(),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:this.state.owner,ids:n,filterKeys:i,path:a,snapShot:l,typeAttribute:"owner"}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}}class zI extends qI{async getComponentsFromBackend(){await this.getFromURL(),await this.getFirstComponent(),this.comp&&await this.getAssociatedItems(),this.setGotComponents()}async getFirstComponent(e,t){let n=e||this.urlType,i=t||this.urlId;this.comp=this.componentList.getComponent(n,i),this.comp||(this.comp=await this.componentList.getComponentsFromBackend({type:n,ids:i,filterKeys:"_id",owner:this.state.owner}),this.comp=this.comp.length>0?this.comp[0]:void 0)}async getAssociatedItems(){this.compList=await this.comp.getAssociatedItems(this.state.itemTypes),this.compList.length>0&&this.setState({gotComponents:!0}),this.compList=await this.comp.getAssociatedItemsFromBackend(this.state.itemTypes),await this.setCurrentItems()}setCurrentItems(){this.dispatch({currentComponent:this.comp,["current"+this.getCapitalFirstLetter(this.comp.getJson().type)]:this.comp,...this.dispatchItems})}setGotComponents(){this.setState({gotComponents:!0,gotComponentsFromBackend:!0,components:this.compList,urlId:this.urlId})}}class HI extends lt{constructor(e){super(e),this.state={...this.state,email:"",password:""}}validate(){return!0}onChange(e){let{name:t,value:n}=e.target;this.setState({[t]:n})}onSub(){this.validate()&&this.APIService.login(this.state.email,this.state.password)}getSwitchLink(){return M.jsxs("div",{children:["Don't have an Account? ",M.jsx(yn,{to:"/register",children:"Sign Up"})]})}preSetup(){this.setComponents(["container","header","form","submitButton"])}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Login"})}getFormHtml(){let e=M.jsxs(M.Fragment,{children:[M.jsx("div",{children:"Email"}),M.jsx("input",{className:"defaultInputFormAuth",name:"email",onChange:this.onChange,value:this.state.email}),M.jsx("div",{style:{marginTop:"10px"},children:"Password"}),M.jsx("input",{className:"defaultInputFormAuth",name:"password",type:"password",onChange:this.onChange,value:this.state.password})]});return this.form.setClass("defaultLoginForm"),this.form.getHtml({type:"div",content:e})}getSubmitHtml(){return this.submitButton.setClass("defaultLoginButton"),this.submitButton.setOnClick(this.onSub),this.submitButton.getHtml({type:"div",content:"Submit"})}getContainerHtml(){this.container.setClass(this.props.loginContainer||"fitCC");let e=M.jsxs(M.Fragment,{children:[this.getHeaderHtml(),this.getFormHtml(),this.getSubmitHtml(),this.getSwitchLink()]});return this.container.getHtml({type:"div",content:e})}getHtml(){let e=this.getContainerHtml();return M.jsx("div",{className:"fullCCLayoutRow",children:M.jsx(_n,{type:this.props.loginCardType||"biggerCard",content:e})})}}class iF extends HI{async onSub(){if(this.validate()){let e=await this.APIService.register(this.state.email,this.state.password);if(!e.error){let t={type:"user",email:this.state.email,_id:this.state.email};e=await this.componentList.addComponents(t),window.history.pushState({},"","/"),this.dispatch({currentUser:e})}}}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Register"})}getSwitchLink(){return M.jsxs("div",{children:["Have an Account? ",M.jsx(yn,{to:"/login",children:"Login"})]})}}class sF extends lt{constructor(e){super(e),this.state={...this.state,routes:[],loginComp:HI,registerComp:iF}}addToRouter(e){let t=[...this.state.routes,e];this.setState({routes:t})}getRouteMap(e,t){let n=M.jsx(M.Fragment,{});return e&&(e=[...e],n=e==null?void 0:e.map((i,a)=>(i.path||(i.path=this.classNameToString(i.comp),a===0&&(i.path="/")),M.jsxs(M.Fragment,{children:[M.jsx($o,{path:i.path,element:M.jsx(i.comp,{props:{...t,...i.props}})}),M.jsx($o,{path:i.path+"/:id",element:M.jsx(i.idComp,{props:{...t,...i.props}})})]})))),n}getRoutes(e,t){var i;let n=M.jsxs(yw,{children:[this.getRouteMap(e,t),this.state.routes.map((a,l)=>M.jsx(M.Fragment,{children:a}))]});return(i=this.app)!=null&&i.state.currentUser||(n=this.getUserAuthRoutes(t)),n}getUserAuthRoutes(e){let t=e.loginComp||this.state.loginComp,n=e.registerComp||this.state.registerComp;return M.jsxs(yw,{children:[M.jsx($o,{path:"/",element:M.jsx(t,{props:{...e}})}),M.jsx($o,{path:"/login",element:M.jsx(t,{props:{...e}})}),M.jsx($o,{path:"/register",element:M.jsx(n,{props:{...e}})})]})}getHtml(){var a;let e={...this.props};e.app=this.app;let t=(a=this.app)==null?void 0:a.state,n=this.props.routes||(t==null?void 0:t.routes),i=this.getRoutes(n,e);return M.jsx(M.Fragment,{children:i})}}class oF{constructor(){he(this,"registry",{})}getRegistry(){return this.registry}addToRegistry(e,t){this.registry[e]=t}getItemFromRegistry(e){return this.registry[e]}}class aF extends lt{constructor(t,n,i){super(t);he(this,"endpoint");he(this,"db");he(this,"storage");he(this,"auth");he(this,"popupComponents");he(this,"popupComponentsProps");n=this.props.config||n,this.popupComponents=this.props.popupComponents,this.componentListInterface=new LD(this.dispatch,n.endpoint,n.db,n.storage,n.auth),this.componentList=this.componentListInterface.createComponentList(),this.factory=this.componentListInterface.getFactory(),this.operationsFactory=this.componentList.getOperationsFactory(),this.interfaceRegistry=new oF,this.initialPropsSetupFunctions=[this.propogateApp,...this.initialPropsSetupFunctions],this.state={componentList:this.componentList,componentListInterface:this.componentListInterface,operationsFactory:this.operationsFactory,factory:this.factory,theme:this.props.theme||"default",pageClass:this.props.pageClass||"fullScreen",pageStyle:this.props.pageStyle,extraRouteKey:this.props.extraRouteKey||"extraRoutes",navBarProps:this.props.NavBarProps||{},popupFactory:i1.getFactory(),popups:this.props.popups||[],global:this.props.global||{},routes:this.props.routes||[]},i&&this.registerListWithFactory(i)}async checkForUser(){let t=await this.APIService.getCurrentUser();t&&await this.APIService.checkIfLoggedIn()&&this.APIService.getuser(t.email)}componentDidMount(){this.checkForUser()}registerListWithFactory(t){for(let n of t){let a=new n().getJson().type;this.factory.registerComponents({name:a,component:n}),this.createPopupDefaultsByType(a)}}createPopupDefaultsByType(t){var n;if((n=this.popupComponents)!=null&&n[t]){let i=this.getCapitalFirstLetter(t),a={content:this.popupComponents[t],popupSwitch:"add"+i,componentType:t},l={...a,popupSwitch:"update"+i};this.state.popups=[...this.state.popups,a,l]}}dispatch(t){t=t||{},this.setState({...t})}setPopups(){for(let t of this.state.popups){let n=t.componentType;n&&(t={...t,...this.popupComponentsProps[n]}),t.popupSwitch||(t.popupSwitch=this.classNameToString(t.content)),this.state.popupFactory.registerComponent(t.popupSwitch,t)}}propogateApp(){this.app={state:this.state,dispatch:this.dispatch.bind(this),...this.state.global},VI.setAppComponent(this.app),OI.setAppComponent(this.app),yI.setAppComponent(this.app),nh.setAppComponent(this.app),gI.setAppComponent(this.app)}getHtml(t){this.setPopups();let n=[...this.state.routes];return this.state[this.state.extraRouteKey]&&(n=[...n,...this.state[this.state.extraRouteKey]]),M.jsx("div",{className:this.state.pageClass,style:this.state.pageStyle,children:M.jsxs(pD,{children:[i1.createPopupMachine({app:this.app}),this.state.currentUser&&M.jsx(Xj,{...this.state.navBarProps}),t?M.jsx(t.content,{props:{...t.props}}):M.jsx(M.Fragment,{}),M.jsx(sF,{routes:n})]})})}}class $I extends ry{constructor(){super(...arguments);he(this,"factory",{form:xI,map:FI,nav:BI})}}new $I;new $I;class wi extends kD{constructor(t){super(t);he(this,"json",{...this.json,type:"",name:"",owner:"",picURL:""})}}class lF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"user"})}}class uF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"contact",phone:"",email:"",conversationIds:[]})}}let cF=class extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"conversation",contactIds:[]})}};class hF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"template",content:""})}}class fF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"sequence",steps:[]})}}class dF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"step",delay:0,messageId:""})}}class WI extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,conversationIds:[],ownerMessage:!1})}}class pF extends WI{constructor(){super(...arguments);he(this,"json",{...this.json,type:"textMessage",content:"",timestamp:""})}}class mF extends WI{constructor(){super(...arguments);he(this,"json",{...this.json,type:"email",subject:"",body:"",timestamp:""})}}class gF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"potentialProspect",phone:"",email:"",researchId:"",conversationIds:[]})}}class yF extends wi{constructor(){super(...arguments);he(this,"json",{...this.json,type:"research"})}}const vF=Object.freeze(Object.defineProperty({__proto__:null,Contact:uF,Conversations:cF,Email:mF,PotentialProspect:gF,Research:yF,Sequence:fF,Step:dF,Template:hF,TextMessage:pF,User:lF},Symbol.toStringTag,{value:"Module"}));class KI extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var c,h,d;let e=window.innerWidth>600;(c=this.propsState.popupSwitch)!=null&&c.includes("addContact")&&(e=!1);let t=e?this.propsState.currentContact:this.props.obj;const n=e?this.propsState.currentContact:this.propsState.currentPopupComponent,i=!e;let a=t?"Edit":"Add",l=M.jsx(Gl,{content:"Save",isPopup:i,callbackFunc:this.props.callbackFunc});return((h=this.propsState.popupSwitch)!=null&&h.includes("updateContact")||window.innerWidth>600&&!((d=this.propsState.popupSwitch)!=null&&d.includes("addContact")))&&(l=M.jsx(NI,{obj:n,content:"Save",isPopup:i,callbackFunc:this.props.callbackFunc})),M.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[M.jsxs("h2",{children:[a," Contact"]})," ",M.jsxs("div",{className:"contact-Add-container",children:[M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"First Name"}),M.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",M.jsx(tn,{obj:t,name:"firstName",inPopup:i})," "]})]}),M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"Last Name"}),M.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",M.jsx(tn,{obj:t,name:"lastName",inPopup:i})," "]})]}),M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"Email"}),M.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",M.jsx(tn,{obj:t,name:"email",inPopup:i})," "]})]}),M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"Tags"}),M.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",M.jsx(tn,{obj:t,name:"tags",inPopup:i})," "]})]}),M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"Notes"}),M.jsxs("div",{style:{width:"90%",marginLeft:"10px"},children:[" ",M.jsx(tn,{obj:t,type:"quill",name:"notes",inPopup:i})," "]})]}),M.jsxs("div",{className:"popupButton",style:{width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",M.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",l]})," "]})]})]})}}class Hh extends lt{constructor(e){super(e),this.state={...this.state,checked:!1,activeBool:!1}}componentDidMount(){this.checkIfActive()}async componentDidUpdate(e,t){var i,a;let n=this.props.obj;n&&((i=this.propsState[this.props.checkKey])!=null&&i.includes(n)&&this.state.activeBool===!1?this.setState({checked:!0,activeBool:!0}):!((a=this.propsState[this.props.checkKey])!=null&&a.includes(n))&&this.state.activeBool===!0&&this.setState({checked:!1,activeBool:!1}))}checkIfActive(){var t;let e=this.props.obj;e&&(t=this.propsState[this.props.checkKey])!=null&&t.includes(e)&&this.setState({checked:!0})}async handleToggle(){await this.setState(e=>({checked:!e.checked})),this.state.checked?this.check(this.props.obj):this.uncheck(this.props.obj)}check(e){this.setState({checked:!0}),this.props.check?this.props.check(e):this.props.cell.check(this.props.obj)}uncheck(e){this.setState({checked:!1}),this.props.uncheck?this.props.uncheck(e):this.props.cell.uncheck(this.props.obj)}render(){const{checked:e}=this.state;return M.jsxs("label",{className:this.props.class||"checkbox-container",children:[this.props.label||"",M.jsx("input",{type:"checkbox",checked:e,onChange:this.handleToggle}),M.jsx("span",{className:"checkmark"})]})}}class _F extends lt{constructor(t){super(t);he(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});he(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}render(){var l;const{obj:t}=this.props;let n=t.getJson(),a=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return M.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[M.jsxs("div",{className:"contact-item",style:{background:a?"#2374ab10":"white"},children:[M.jsx(Hh,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),M.jsx("div",{className:"contact-avatar",children:M.jsx("i",{className:"fa-solid fa-user"})}),M.jsxs("div",{className:"contact-info",children:[M.jsx("div",{onClick:()=>{debugger;window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.firstName} ${n.lastName}`}),M.jsx("div",{className:"contact-desc",children:n.company})]}),M.jsx("div",{className:"contact-icon",children:M.jsx("i",{className:"fa-solid fa-message"})})]}),M.jsx("div",{className:"contact-tag-container active",children:(l=n.tags)==null?void 0:l.split(",").map((c,h)=>M.jsx("button",{className:"contact-tag-btn",children:c},h))})]})}}class wF extends ps{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...i})}}var Lc={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var EF=Lc.exports,s1;function TF(){return s1||(s1=1,function(r,e){((t,n)=>{r.exports=n()})(EF,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,a=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,c={},h=0,d={};function v(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var k=F(A);k.chunkSize=parseInt(k.chunkSize),A.step||A.chunk||(k.chunkSize=null),this._handle=new S(k),(this._handle.streamer=this)._config=k}).call(this,_),this.parseChunk=function(A,k){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let L=this._config.newline;L||(x=this._config.quoteChar||'"',L=this._handle.guessLineEndings(A,x)),A=[...A.split(L).slice(R)].join(L)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(x=this._config.beforeFirstChunk(A))!==void 0&&(A=x),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+A,x=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=x.meta.cursor,R=(this._finished||(this._partialLine=R.substring(A-this._baseIndex),this._baseIndex=A),x&&x.data&&(this._rowCount+=x.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)n.postMessage({results:x,workerId:d.WORKER_ID,finished:R});else if(P(this._config.chunk)&&!k){if(this._config.chunk(x,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=x=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(x.data),this._completeResults.errors=this._completeResults.errors.concat(x.errors),this._completeResults.meta=x.meta),this._completed||!R||!P(this._config.complete)||x&&x.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||x&&x.meta.paused||this._nextChunk(),x}this._halted=!0},this._sendError=function(A){P(this._config.error)?this._config.error(A):l&&this._config.error&&n.postMessage({workerId:d.WORKER_ID,error:A,finished:!1})}}function g(_){var A;(_=_||{}).chunkSize||(_.chunkSize=d.RemoteChunkSize),v.call(this,_),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),a||(A.onload=U(this._chunkLoaded,this),A.onerror=U(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var k,R=this._config.downloadRequestHeaders;for(k in R)A.setRequestHeader(k,R[k])}var x;this._config.chunkSize&&(x=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+x));try{A.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}a&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(k=>(k=k.getResponseHeader("Content-Range"))!==null?parseInt(k.substring(k.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(k){k=A.statusText||k,this._sendError(new Error(k))}}function m(_){(_=_||{}).chunkSize||(_.chunkSize=d.LocalChunkSize),v.call(this,_);var A,k,R=typeof FileReader<"u";this.stream=function(x){this._input=x,k=x.slice||x.webkitSlice||x.mozSlice,R?((A=new FileReader).onload=U(this._chunkLoaded,this),A.onerror=U(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input,L=(this._config.chunkSize&&(L=Math.min(this._start+this._config.chunkSize,this._input.size),x=k.call(x,this._start,L)),A.readAsText(x,this._config.encoding));R||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(A.error)}}function y(_){var A;v.call(this,_=_||{}),this.stream=function(k){return A=k,this._nextChunk()},this._nextChunk=function(){var k,R;if(!this._finished)return k=this._config.chunkSize,A=k?(R=A.substring(0,k),A.substring(k)):(R=A,""),this._finished=!A,this.parseChunk(R)}}function T(_){v.call(this,_=_||{});var A=[],k=!0,R=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):k=!0},this._streamData=U(function(x){try{A.push(typeof x=="string"?x:x.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(L){this._streamError(L)}},this),this._streamError=U(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=U(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(_){var A,k,R,x,L=Math.pow(2,53),$=-L,Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,re=0,G=0,W=!1,j=!1,B=[],z={data:[],errors:[],meta:{}};function ee(ne){return _.skipEmptyLines==="greedy"?ne.join("").trim()==="":ne.length===1&&ne[0].length===0}function X(){if(z&&R&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),R=!1),_.skipEmptyLines&&(z.data=z.data.filter(function(ke){return!ee(ke)})),H()){let ke=function(Re,xe){P(_.transformHeader)&&(Re=_.transformHeader(Re,xe)),B.push(Re)};var ve=ke;if(z)if(Array.isArray(z.data[0])){for(var ne=0;H()&&ne<z.data.length;ne++)z.data[ne].forEach(ke);z.data.splice(0,1)}else z.data.forEach(ke)}function ie(ke,Re){for(var xe=_.header?{}:[],De=0;De<ke.length;De++){var Ue=De,et=ke[De],et=((ue,de)=>(Ee=>(_.dynamicTypingFunction&&_.dynamicTyping[Ee]===void 0&&(_.dynamicTyping[Ee]=_.dynamicTypingFunction(Ee)),(_.dynamicTyping[Ee]||_.dynamicTyping)===!0))(ue)?de==="true"||de==="TRUE"||de!=="false"&&de!=="FALSE"&&((Ee=>{if(Q.test(Ee)&&(Ee=parseFloat(Ee),$<Ee&&Ee<L))return 1})(de)?parseFloat(de):se.test(de)?new Date(de):de===""?null:de):de)(Ue=_.header?De>=B.length?"__parsed_extra":B[De]:Ue,et=_.transform?_.transform(et,Ue):et);Ue==="__parsed_extra"?(xe[Ue]=xe[Ue]||[],xe[Ue].push(et)):xe[Ue]=et}return _.header&&(De>B.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+De,G+Re):De<B.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+De,G+Re)),xe}var fe;z&&(_.header||_.dynamicTyping||_.transform)&&(fe=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(ie),fe=z.data.length):z.data=ie(z.data,0),_.header&&z.meta&&(z.meta.fields=B),G+=fe)}function H(){return _.header&&B.length===0}function Y(ne,ie,fe,ve){ne={type:ne,code:ie,message:fe},ve!==void 0&&(ne.row=ve),z.errors.push(ne)}P(_.step)&&(x=_.step,_.step=function(ne){z=ne,H()?X():(X(),z.data.length!==0&&(re+=ne.data.length,_.preview&&re>_.preview?k.abort():(z.data=z.data[0],x(z,Z))))}),this.parse=function(ne,ie,fe){var ve=_.quoteChar||'"',ve=(_.newline||(_.newline=this.guessLineEndings(ne,ve)),R=!1,_.delimiter?P(_.delimiter)&&(_.delimiter=_.delimiter(ne),z.meta.delimiter=_.delimiter):((ve=((ke,Re,xe,De,Ue)=>{var et,ue,de,Ee;Ue=Ue||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var be=0;be<Ue.length;be++){for(var ye,$e=Ue[be],je=0,Be=0,We=0,Xe=(de=void 0,new E({comments:De,delimiter:$e,newline:Re,preview:10}).parse(ke)),Ze=0;Ze<Xe.data.length;Ze++)xe&&ee(Xe.data[Ze])?We++:(ye=Xe.data[Ze].length,Be+=ye,de===void 0?de=ye:0<ye&&(je+=Math.abs(ye-de),de=ye));0<Xe.data.length&&(Be/=Xe.data.length-We),(ue===void 0||je<=ue)&&(Ee===void 0||Ee<Be)&&1.99<Be&&(ue=je,et=$e,Ee=Be)}return{successful:!!(_.delimiter=et),bestDelimiter:et}})(ne,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=ve.bestDelimiter:(R=!0,_.delimiter=d.DefaultDelimiter),z.meta.delimiter=_.delimiter),F(_));return _.preview&&_.header&&ve.preview++,A=ne,k=new E(ve),z=k.parse(A,ie,fe),X(),W?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,k.abort(),A=P(_.chunk)?"":A.substring(k.getCharIndex())},this.resume=function(){Z.streamer._halted?(W=!1,Z.streamer.parseChunk(A,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,k.abort(),z.meta.aborted=!0,P(_.complete)&&_.complete(z),A=""},this.guessLineEndings=function(ke,ve){ke=ke.substring(0,1048576);var ve=new RegExp(w(ve)+"([^]*?)"+w(ve),"gm"),fe=(ke=ke.replace(ve,"")).split("\r"),ve=ke.split(`
`),ke=1<ve.length&&ve[0].length<fe[0].length;if(fe.length===1||ke)return`
`;for(var Re=0,xe=0;xe<fe.length;xe++)fe[xe][0]===`
`&&Re++;return Re>=fe.length/2?`\r
`:"\r"}}function w(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(_){var A=(_=_||{}).delimiter,k=_.newline,R=_.comments,x=_.step,L=_.preview,$=_.fastMode,Q=null,se=!1,Z=_.quoteChar==null?'"':_.quoteChar,re=Z;if(_.escapeChar!==void 0&&(re=_.escapeChar),(typeof A!="string"||-1<d.BAD_DELIMITERS.indexOf(A))&&(A=","),R===A)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<d.BAD_DELIMITERS.indexOf(R))&&(R=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var G=0,W=!1;this.parse=function(j,B,z){if(typeof j!="string")throw new Error("Input must be a string");var ee=j.length,X=A.length,H=k.length,Y=R.length,ne=P(x),ie=[],fe=[],ve=[],ke=G=0;if(!j)return je();if($||$!==!1&&j.indexOf(Z)===-1){for(var Re=j.split(k),xe=0;xe<Re.length;xe++){if(ve=Re[xe],G+=ve.length,xe!==Re.length-1)G+=k.length;else if(z)return je();if(!R||ve.substring(0,Y)!==R){if(ne){if(ie=[],Ee(ve.split(A)),Be(),W)return je()}else Ee(ve.split(A));if(L&&L<=xe)return ie=ie.slice(0,L),je(!0)}}return je()}for(var De=j.indexOf(A,G),Ue=j.indexOf(k,G),et=new RegExp(w(re)+w(Z),"g"),ue=j.indexOf(Z,G);;)if(j[G]===Z)for(ue=G,G++;;){if((ue=j.indexOf(Z,ue+1))===-1)return z||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:G}),ye();if(ue===ee-1)return ye(j.substring(G,ue).replace(et,Z));if(Z===re&&j[ue+1]===re)ue++;else if(Z===re||ue===0||j[ue-1]!==re){De!==-1&&De<ue+1&&(De=j.indexOf(A,ue+1));var de=be((Ue=Ue!==-1&&Ue<ue+1?j.indexOf(k,ue+1):Ue)===-1?De:Math.min(De,Ue));if(j.substr(ue+1+de,X)===A){ve.push(j.substring(G,ue).replace(et,Z)),j[G=ue+1+de+X]!==Z&&(ue=j.indexOf(Z,G)),De=j.indexOf(A,G),Ue=j.indexOf(k,G);break}if(de=be(Ue),j.substring(ue+1+de,ue+1+de+H)===k){if(ve.push(j.substring(G,ue).replace(et,Z)),$e(ue+1+de+H),De=j.indexOf(A,G),ue=j.indexOf(Z,G),ne&&(Be(),W))return je();if(L&&ie.length>=L)return je(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:G}),ue++}}else if(R&&ve.length===0&&j.substring(G,G+Y)===R){if(Ue===-1)return je();G=Ue+H,Ue=j.indexOf(k,G),De=j.indexOf(A,G)}else if(De!==-1&&(De<Ue||Ue===-1))ve.push(j.substring(G,De)),G=De+X,De=j.indexOf(A,G);else{if(Ue===-1)break;if(ve.push(j.substring(G,Ue)),$e(Ue+H),ne&&(Be(),W))return je();if(L&&ie.length>=L)return je(!0)}return ye();function Ee(We){ie.push(We),ke=G}function be(We){var Xe=0;return Xe=We!==-1&&(We=j.substring(ue+1,We))&&We.trim()===""?We.length:Xe}function ye(We){return z||(We===void 0&&(We=j.substring(G)),ve.push(We),G=ee,Ee(ve),ne&&Be()),je()}function $e(We){G=We,Ee(ve),ve=[],Ue=j.indexOf(k,G)}function je(We){if(_.header&&!B&&ie.length&&!se){var Xe=ie[0],Ze={},er=new Set(Xe);let ct=!1;for(let St=0;St<Xe.length;St++){let zt=Xe[St];if(Ze[zt=P(_.transformHeader)?_.transformHeader(zt,St):zt]){let tr,Ei=Ze[zt];for(;tr=zt+"_"+Ei,Ei++,er.has(tr););er.add(tr),Xe[St]=tr,Ze[zt]++,ct=!0,(Q=Q===null?{}:Q)[tr]=zt}else Ze[zt]=1,Xe[St]=zt;er.add(zt)}ct&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:ie,errors:fe,meta:{delimiter:A,linebreak:k,aborted:W,truncated:!!We,cursor:ke+(B||0),renamedHeaders:Q}}}function Be(){x(je()),ie=[],fe=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return G}}function b(_){var A=_.data,k=c[A.workerId],R=!1;if(A.error)k.userError(A.error,A.file);else if(A.results&&A.results.data){var x={abort:function(){R=!0,O(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(P(k.userStep)){for(var L=0;L<A.results.data.length&&(k.userStep({data:A.results.data[L],errors:A.results.errors,meta:A.results.meta},x),!R);L++);delete A.results}else P(k.userChunk)&&(k.userChunk(A.results,x,A.file),delete A.results)}A.finished&&!R&&O(A.workerId,A.results)}function O(_,A){var k=c[_];P(k.userComplete)&&k.userComplete(A),k.terminate(),delete c[_]}function C(){throw new Error("Not implemented.")}function F(_){if(typeof _!="object"||_===null)return _;var A,k=Array.isArray(_)?[]:{};for(A in _)k[A]=F(_[A]);return k}function U(_,A){return function(){_.apply(A,arguments)}}function P(_){return typeof _=="function"}return d.parse=function(_,A){var k=(A=A||{}).dynamicTyping||!1;if(P(k)&&(A.dynamicTypingFunction=k,k={}),A.dynamicTyping=k,A.transform=!!P(A.transform)&&A.transform,!A.worker||!d.WORKERS_SUPPORTED)return k=null,d.NODE_STREAM_INPUT,typeof _=="string"?(_=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(_),k=new(A.download?g:y)(A)):_.readable===!0&&P(_.read)&&P(_.on)?k=new T(A):(n.File&&_ instanceof File||_ instanceof Object)&&(k=new m(A)),k.stream(_);(k=(()=>{var R;return!!d.WORKERS_SUPPORTED&&(R=(()=>{var x=n.URL||n.webkitURL||null,L=t.toString();return d.BLOB_URL||(d.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",L,")();"],{type:"text/javascript"})))})(),(R=new n.Worker(R)).onmessage=b,R.id=h++,c[R.id]=R)})()).userStep=A.step,k.userChunk=A.chunk,k.userComplete=A.complete,k.userError=A.error,A.step=P(A.step),A.chunk=P(A.chunk),A.complete=P(A.complete),A.error=P(A.error),delete A.worker,k.postMessage({input:_,config:A,workerId:k.id})},d.unparse=function(_,A){var k=!1,R=!0,x=",",L=`\r
`,$='"',Q=$+$,se=!1,Z=null,re=!1,G=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||d.BAD_DELIMITERS.filter(function(B){return A.delimiter.indexOf(B)!==-1}).length||(x=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(k=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(se=A.skipEmptyLines),typeof A.newline=="string"&&(L=A.newline),typeof A.quoteChar=="string"&&($=A.quoteChar),typeof A.header=="boolean"&&(R=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");Z=A.columns}A.escapeChar!==void 0&&(Q=A.escapeChar+$),A.escapeFormulae instanceof RegExp?re=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(w($),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return W(null,_,se);if(typeof _[0]=="object")return W(Z||Object.keys(_[0]),_,se)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||Z),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),W(_.fields||[],_.data||[],se);throw new Error("Unable to serialize unrecognized input");function W(B,z,ee){var X="",H=(typeof B=="string"&&(B=JSON.parse(B)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(B)&&0<B.length),Y=!Array.isArray(z[0]);if(H&&R){for(var ne=0;ne<B.length;ne++)0<ne&&(X+=x),X+=j(B[ne],ne);0<z.length&&(X+=L)}for(var ie=0;ie<z.length;ie++){var fe=(H?B:z[ie]).length,ve=!1,ke=H?Object.keys(z[ie]).length===0:z[ie].length===0;if(ee&&!H&&(ve=ee==="greedy"?z[ie].join("").trim()==="":z[ie].length===1&&z[ie][0].length===0),ee==="greedy"&&H){for(var Re=[],xe=0;xe<fe;xe++){var De=Y?B[xe]:xe;Re.push(z[ie][De])}ve=Re.join("").trim()===""}if(!ve){for(var Ue=0;Ue<fe;Ue++){0<Ue&&!ke&&(X+=x);var et=H&&Y?B[Ue]:Ue;X+=j(z[ie][et],Ue)}ie<z.length-1&&(!ee||0<fe&&!ke)&&(X+=L)}}return X}function j(B,z){var ee,X;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(X=!1,re&&typeof B=="string"&&re.test(B)&&(B="'"+B,X=!0),ee=B.toString().replace(G,Q),(X=X||k===!0||typeof k=="function"&&k(B,z)||Array.isArray(k)&&k[z]||((H,Y)=>{for(var ne=0;ne<Y.length;ne++)if(-1<H.indexOf(Y[ne]))return!0;return!1})(ee,d.BAD_DELIMITERS)||-1<ee.indexOf(x)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?$+ee+$:ee)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!n.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=E,d.ParserHandle=S,d.NetworkStreamer=g,d.FileStreamer=m,d.StringStreamer=y,d.ReadableStreamStreamer=T,n.jQuery&&((i=n.jQuery).fn.parse=function(_){var A=_.config||{},k=[];return this.each(function(L){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)k.push({file:this.files[$],inputElem:this,instanceConfig:i.extend({},A)})}),R(),this;function R(){if(k.length===0)P(_.complete)&&_.complete();else{var L,$,Q,se,Z=k[0];if(P(_.before)){var re=_.before(Z.file,Z.inputElem);if(typeof re=="object"){if(re.action==="abort")return L="AbortError",$=Z.file,Q=Z.inputElem,se=re.reason,void(P(_.error)&&_.error({name:L},$,Q,se));if(re.action==="skip")return void x();typeof re.config=="object"&&(Z.instanceConfig=i.extend(Z.instanceConfig,re.config))}else if(re==="skip")return void x()}var G=Z.instanceConfig.complete;Z.instanceConfig.complete=function(W){P(G)&&G(W,Z.file,Z.inputElem),x()},d.parse(Z.file,Z.instanceConfig)}}function x(){k.splice(0,1),R()}}),l&&(n.onmessage=function(_){_=_.data,d.WORKER_ID===void 0&&_&&(d.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:d.WORKER_ID,results:d.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=d.parse(_.input,_.config))&&n.postMessage({workerId:d.WORKER_ID,results:_,finished:!0})}),(g.prototype=Object.create(v.prototype)).constructor=g,(m.prototype=Object.create(v.prototype)).constructor=m,(y.prototype=Object.create(y.prototype)).constructor=y,(T.prototype=Object.create(v.prototype)).constructor=T,d})}(Lc)),Lc.exports}var SF=TF();const IF=Gm(SF);class CF extends ge.Component{constructor(e){super(e),this.state={data:[]},this.handleFileUpload=this.handleFileUpload.bind(this)}handleFileUpload(e){const t=e.target.files[0];t&&IF.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{console.log("Parsed CSV data:",n.data),this.props.callBack({data:n.data})},error:n=>{console.error("Error while parsing:",n)}})}render(){const{data:e}=this.state;return M.jsxs("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:[M.jsx("label",{htmlFor:"file-upload",className:"",children:"Upload"}),M.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:this.handleFileUpload})]})}}class bF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}componentDidMount(){this.dispatch({selectedContacts:[]})}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let a of e){let l=t.filter(c=>c.getJson().tags.includes(a));n=[...n,...l]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){var l,c;let e=this.propsState.selectedContacts,t=this.propsState.componentList.getList("contact"),n=(e==null?void 0:e.length)>0,i=t!=null&&t.length?"/"+(t==null?void 0:t.length):"",a=(e==null?void 0:e.length)===(t==null?void 0:t.length);return M.jsxs("div",{className:"map-container",children:[M.jsxs("div",{className:"top-nav-float",children:[M.jsxs("nav",{className:"top-nav",children:[M.jsxs("div",{className:"nav-left",children:[M.jsx("div",{className:"nav-icon",children:M.jsx("i",{className:"fas fa-circle"})}),M.jsx("div",{className:"nav-title",children:"Contacts"})]}),M.jsxs("div",{className:"nav-right",children:[M.jsx("div",{className:"nav-icon",children:M.jsxs("button",{className:"btn",children:["A to Z ",M.jsx("i",{className:"fa-solid fa-angle-down"})]})}),M.jsx("div",{className:"nav-icon",children:M.jsx("button",{className:"btn",children:M.jsx("i",{className:"fa-solid fa-filter"})})})]})]}),M.jsx("div",{className:"search-container",children:M.jsxs("div",{className:"search-bar",children:[M.jsx("i",{className:"fas fa-search search-icon"}),M.jsx("input",{onChange:h=>{this.dispatch({tags:h.target.value})},className:"search-input",placeholder:"Search"})]})}),M.jsxs("div",{className:"filter-nav",children:[M.jsxs("div",{className:"filter-nav-left",children:[M.jsx(M.Fragment,{children:M.jsx("div",{id:"selectBtn",style:{height:"fit-content",marginLeft:"5px",alignContent:"center"},children:M.jsx(Hh,{label:a?"Deselect All":"Select All",check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}})})}),M.jsx("span",{className:"count-desc",children:(l=this.propsState.selectedContacts)!=null&&l.length?this.propsState.selectedContacts.length+`${i} Selected`:""})]}),!n&&M.jsxs("div",{className:"filter-nav-right",children:[M.jsx(CF,{callBack:async h=>{h=h.data.map((d,v)=>(d.owner=this.propsState.currentUser.getJson()._id,d.type="contact",d)),this.dispatch({uploadData:h,popupSwitch:"uploadData"}),await this.operationsFactory.prepare({prepare:h}),this.operationsFactory.run()}}),M.jsx(wF,{formclassName:"FCImgButton",wrapperclassName:"none",content:M.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Add Contact"}),popupSwitch:"addContact"})]})]})]}),M.jsxs("div",{children:[" ",M.jsx(On,{filterFunc:h=>{if(!this.propsState.tags)return!0;let d=this.propsState.tags.split(",");for(let v of d)if(v!==""&&h.getJson().tags.includes(v))return!0;return!1},name:"contact",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:_F}],hasLink:!0})," "]}),((c=this.propsState.selectedContacts)==null?void 0:c.length)>0&&M.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[M.jsx("button",{className:"floating-select-btn",children:M.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),M.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:M.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),M.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:M.jsx(Uh,{formclassName:"FCImgButton",content:M.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class AF extends ma{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return M.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[M.jsx(_n,{theme:"NoBorder",type:"fit",content:M.jsx(bF,{})}),this.propsState.currentContact&&window.innerWidth>600&&M.jsx(_n,{theme:"NoBorder",type:"fit",content:M.jsx(KI,{})})]})}}class kF extends lt{getTimeStampStr(){var t,n;let e;try{e=(n=(t=this.props.obj)==null?void 0:t.getJson())==null?void 0:n.timeStamp}catch(i){return console.error("Error accessing timestamp property:",i),"Invalid Date"}if(e&&e instanceof Lt)try{return e.toDate().toLocaleDateString()}catch(i){return console.error("Error converting Firebase Timestamp to Date:",i),"Invalid Date"}else return e?(console.warn("Received timeValue is not a Firebase Timestamp:",e),String(e)):""}render(){return M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"message-header",children:[M.jsx("span",{className:"sender",children:this.props.obj.getJson().senderName}),M.jsx("span",{className:"date",children:this.getTimeStampStr()})]}),M.jsx("div",{className:"snippet",children:this.props.obj.getJson().recentMessage})]})}}class RF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit messages-container"}}searchFilter(){}getInnerContent(){return M.jsx(On,{name:"conversation",mapContainerClass:"message-list-scai",mapSectionClass:"message-item-scai",cells:[{type:"customBuilt",custom:M.jsx("div",{className:"chat-avatar",children:M.jsx("i",{className:"fa-solid fa-user"})}),wrapperStyle:{width:"50px"},itemStyle:{width:"50px"}},{type:"custom",custom:kF,itemClick:e=>{this.dispatch({currentConversation:e,showConversation:window.innerWidth<600?!0:void 0}),e.setCompState({seen:!0})}}],filterFunc:e=>{var a,l;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;(a=e.getJson().senderName)!=null&&a.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0);let i=this.componentList.getList("email",e.getJson()._id,"conversationId");for(let c of i)(l=c.getJson().body)!=null&&l.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0);return t}})}render(){return M.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{marginLeft:"-20px"},children:[M.jsx("div",{className:"header",children:"Messages"}),M.jsx("div",{className:"search-container",children:M.jsxs("div",{className:"search-bar",children:[M.jsx("i",{className:"fas fa-search search-icon"}),M.jsx("input",{type:"text",placeholder:"Search messages...",onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input"})]})}),this.getInnerContent()]})}}class PF extends lt{render(){let e=this.props.obj.getJson().ownerMessage?"outgoing":"incoming";return M.jsxs("div",{children:[M.jsx("div",{className:"date-divider",children:M.jsx("span",{className:"timestamp",children:this.props.obj.getJson().timeStamp})}),M.jsx("div",{className:"message-item "+e,children:M.jsx("div",{className:"message "+e,children:this.props.obj.getJson().body})})]})}}class xF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",currentConversation:null}}async componentDidMount(){await this.prepareMessages()}async prepareMessages(){let e=this.propsState.currentConversation;e||(e=this.componentList.getComponent("conversation"),await this.dispatch({currentConversation:e})),e?(await this.prepNewMessage(),this.setState({start:!0})):this.setState({message:"no current conversations"})}async prepNewMessage(){let e=this.propsState.currentConversation;const t=e.getJson().messageType||"email";let n=this.componentList.getList("email",this.propsState.currentConversation.getJson()._id,"conversationId");n=n[n.length-1];let i=n.getJson().originalMessageId,a=n.getJson().subject;const l=await this.operationsFactory.prepare({prepare:{type:t,conversationId:e.getJson()._id,originalMessageId:i,subject:a,ownerMessage:!0}});this.dispatch({currentComponent:l[0]})}getInnerContent(){const{currentConversation:e}=this.propsState;return M.jsxs("div",{children:[window.innerWidth<600&&M.jsx("div",{style:{position:"sticky",top:0,zIndex:200,marginBottom:"-20px"},children:M.jsx("div",{className:"dark-button-1",onClick:()=>{this.dispatch({showConversation:void 0})},children:"< Back"})}),M.jsx("div",{className:"layoutColumn conversation-container",children:this.state.message?M.jsx(M.Fragment,{children:this.state.message}):M.jsx(M.Fragment,{children:this.state.start&&M.jsxs("div",{style:{width:"100%",marginTop:"-20px"},children:[M.jsx(On,{mapContainerClass:"message-list",name:(e==null?void 0:e.getJson().messageType)||"email",cells:[{type:"custom",custom:PF}],filter:{search:this.propsState.currentConversation.getJson()._id,attribute:"conversationId"}}),M.jsxs("div",{style:{position:"sticky",bottom:0,zIndex:1,width:"100%",minHeight:"60px",paddingBottom:"65px",background:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 1%)"},children:[M.jsx(tn,{wrapperClass:"search-bar",formClass:"search-input",name:"body",obj:this.propsState.currentComponent}),M.jsx(Gl,{content:M.jsxs("div",{className:"chat-footer",children:[M.jsx("button",{className:"footer-btn",children:M.jsx("i",{className:"fa-solid fa-circle-plus"})}),M.jsx("input",{type:"text",className:"footer-input",placeholder:"Start typing..."})]}),callbackFunc:()=>{let t=this.propsState.currentComponent;this.prepNewMessage();let n={originalMessageId:t.getJson().originalMessageId,from:t.getJson().owner,to:this.propsState.currentConversation.getJson().recipient,subject:t.getJson().subject,text:t.getJson().body};fetch("https://sendgridreplythread-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);return i.json()}).then(i=>{console.log("Reply sent successfully in thread.",i)}).catch(i=>{console.error("Error sending reply:",i)})}})]})]})})})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class OF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.componentList.getComponentsFromBackend({type:"conversation",ids:this.propsState.currentUser.getJson()._id,filterKeys:"owner"}),this.setState({start:!0})}getInnerContent(){return M.jsxs("div",{className:"layoutRow",style:{width:"100%",height:"100%"},children:[M.jsx("div",{children:!this.propsState.showConversation&&M.jsx(M.Fragment,{children:this.state.start&&M.jsx(_n,{theme:"defaultCard",content:M.jsx(RF,{})})})}),M.jsx("div",{style:{minWidth:"50%"},children:(window.innerWidth>600||this.propsState.showConversation!==void 0)&&M.jsx(M.Fragment,{children:this.state.start&&M.jsx(_n,{theme:"defaultCard",content:M.jsx(xF,{})})})})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class o1 extends ma{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.dispatch({currentTopic:void 0,currentSubTopic:void 0,currentComponent:void 0}),this.getComponentsFromBackend()}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{padding:"20px"},children:M.jsx("div",{className:"fit",children:this.state.getComponentsFromBackend&&M.jsx(_n,{theme:"defaultCard",content:M.jsx(OF,{})})})})}}class NF extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return M.jsxs("div",{className:"sequence",children:[M.jsxs("div",{className:"title",children:[M.jsx(yn,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.name}),M.jsx(yn,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]}),M.jsxs("div",{className:"del-icon",children:[M.jsx("i",{className:"fa-solid fa-xmark"}),M.jsx(LI,{obj:e})]})]})}}class LF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return M.jsxs("div",{className:"fit",children:[M.jsx("h4",{style:{marginBottom:"10px"},children:"Sequences"}),M.jsx(On,{name:"sequence",cells:[{type:"custom",custom:NF}]})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class DF extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return M.jsx("div",{className:"sequence",children:M.jsxs("div",{className:"title",children:[M.jsx(yn,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.content}),M.jsx(yn,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class MF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return M.jsxs(M.Fragment,{children:[M.jsx("h4",{style:{marginBottom:"10px"},children:"Templates"}),M.jsx(On,{name:"template",cells:[{type:"custom",custom:DF}]})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class jF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return M.jsxs("div",{className:"map-container",children:[M.jsxs("div",{className:"top-nav-float",children:[M.jsx("nav",{className:"top-nav",children:M.jsxs("div",{className:"nav-left",children:[M.jsx("div",{className:"nav-icon",children:M.jsx("i",{className:"fas fa-circle"})}),M.jsx("div",{className:"title-name",children:"Content"})]})}),M.jsx("div",{className:"search-container",children:M.jsxs("div",{className:"search-bar",children:[M.jsx("i",{className:"fas fa-search search-icon"}),M.jsx("input",{onChange:e=>{this.dispatch({tags:e.target.value})},className:"search-input",placeholder:"Search"})]})}),M.jsx("div",{className:"filter",children:M.jsxs("div",{className:"row row-space-between",children:[M.jsx(yn,{to:"/sequence",className:"btn-gray",children:"New Sequence"}),M.jsx(yn,{to:"/template",className:"btn-gray",children:"New Template"}),M.jsx("div",{className:"btn-gray",children:"New AI"})]})})]}),M.jsx("div",{children:M.jsx(_n,{theme:"defaultCard",content:M.jsx(LF,{})})}),M.jsx("div",{children:M.jsx(_n,{theme:"defaultCard",content:M.jsx(MF,{})})})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class FF extends ma{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.propsState.currentUser.getJson()._id}}async componentDidMount(){this.getComponentsFromBackend()}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.state.gotComponents&&M.jsx(_n,{theme:"NoBorder",type:"fit",content:M.jsx(jF,{})})})}}class VF extends lt{constructor(e){super(e)}render(){var n;let t=((n=this.props.obj)==null?void 0:n.getJson().content).replace(/<[^>]+>/g,"");return M.jsx("div",{onClick:()=>{this.dispatch({popupSwitch:"updateStep",currentPopupComponent:this.props.obj})},children:M.jsxs("div",{className:"icon-row",children:[M.jsx("div",{className:"icon-container",children:M.jsxs("div",{className:"col",children:[M.jsx("div",{className:"icon",style:{cursor:"pointer"},children:M.jsx("i",{className:"fa-solid fa-envelope"})}),M.jsx("div",{className:"svg",children:M.jsx("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("line",{x1:"50%",y1:"0",x2:"50%",y2:"50",stroke:"var(--app-green)",strokeWidth:"3"})})})]})}),M.jsxs("div",{className:"message-container",children:[M.jsx("b",{children:this.props.obj.getJson().subject}),M.jsx("br",{}),M.jsx("span",{children:t})]})]})})}}class a1 extends zI{async componentDidMount(){let e;await this.getComponentsFromBackend(),e=this.comp,e?await this.componentList.getComponentsFromBackend({type:"step",ids:e.getJson()._id,filterKeys:"sequenceId"}):(e=await this.operationsFactory.prepare({prepare:{type:"sequence"},clean:!0}),e=e[0]),await this.dispatch({currentSequence:e})}async createStep(e){let t=this.componentList.getList("step",e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,"sequenceId");const n=await this.operationsFactory.prepare({prepare:{type:"step",sequenceId:e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,step:t.length}});this.dispatch({currentStep:n.length===2?n[1]:n[0]})}getStepJson(){var n,i;let e=this.componentList.getList("step",(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,"sequenceId");return{type:"step",sequenceId:(i=this.propsState.currentSequence)==null?void 0:i.getJson()._id,step:e.length}}getInnerContent(){var e,t,n;return M.jsx("div",{className:"fit",children:M.jsxs("div",{className:"mobile-container",children:[M.jsxs("div",{className:"title-bar",children:[M.jsxs("div",{className:"title-left",children:[M.jsx("div",{className:"title-icon",style:{fontSize:"702px"},children:M.jsx("i",{className:"fas fa-angle-left"})}),((e=this.propsState.currentSequence)==null?void 0:e.getJson().name)===""||this.state.edit?M.jsxs("div",{className:"name-a-sequence",children:[M.jsx(tn,{obj:this.propsState.currentSequence,name:"name"}),M.jsx(Gl,{callbackFunc:()=>{this.setState({edit:!1}),this.propsState.currentSequence.update()},content:"save",className:"dark-button-1"})]}):M.jsx(M.Fragment,{children:M.jsxs("div",{className:"title-name",children:[(t=this.propsState.currentSequence)==null?void 0:t.getJson().name,M.jsx("span",{onClick:()=>{this.setState({edit:!0})},children:M.jsx("span",{className:"name-a-sequence-edit-btn",children:"Edit"})})]})})]}),M.jsxs("div",{className:"title-right",children:[M.jsx("div",{className:"title-icon",children:M.jsx("i",{className:"fas fa-circle"})}),M.jsx("div",{className:"title-name",children:"Active"})]})]}),M.jsx("div",{className:"switch-tab",children:M.jsxs("div",{className:"row row-space-around",children:[M.jsxs("div",{className:"switch-tab-btn",children:["Assigned",M.jsx("br",{}),"Prospects"]}),M.jsxs("div",{className:"switch-tab-btn active",children:["Sequence",M.jsx("br",{}),"Steps"]})]})}),M.jsxs("div",{className:"icon-list",children:[M.jsx(On,{name:"step",mapSectionClass:"none",mapContainerClass:"none",filter:{search:(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,attribute:"sequenceId"},filterFunc:i=>!(i.getJson().content===void 0||i.getJson().content===""),cells:[{type:"custom",custom:VF,wrapperClass:"none"}]}),M.jsx(Uh,{formClass:"svg-last",wrapperClass:"icon-row",newProp:"asdf",obj:this.getStepJson(),content:M.jsxs(M.Fragment,{children:[M.jsx("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("path",{d:"M25,0 Q25,25 50,25 H50",fill:"none",stroke:"var(--app-green)",strokeWidth:"3",strokeLinecap:"round"})}),M.jsx("div",{className:"icon-last",children:M.jsx("i",{className:"fa-solid fa-plus"})})]}),popupSwitch:"addStep"}),M.jsx("div",{className:"icon-row",children:M.jsx("div",{className:"svg-last"})})]})]})})}render(){return M.jsx("div",{className:[this.props.pageClass||this.state.defaultClass,"sequence-margin"].join(" "),children:this.getInnerContent()})}}class l1 extends zI{async componentDidMount(){await this.getComponentsFromBackend();const e=this.urlId;if(!e||e==="template"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}getInnerContent(){return M.jsxs("div",{className:"fit",children:[M.jsx("h1",{children:"Template Details"}),M.jsx("div",{className:"input-container",children:M.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&M.jsx(tn,{type:"quill",name:"content",obj:this.propsState.currentComponent})})}),M.jsx(Gl,{content:"Save Template"})]})}render(){return M.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class UF extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return M.jsx("div",{className:"sequence",children:M.jsx("div",{onClick:()=>{debugger;let n=this.props.obj,i=this.propsState.selectedContacts,a=this.componentList.getList("step",[n.getJson()._id],["sequenceId"]);if(a=a.filter(l=>l.getJson().content!==""&&l.getJson().content)[0],(i==null?void 0:i.length)>0){debugger;let l=parseFloat(a.getJson().nextSend),c=new Date(Date.now()+l*60*60*1e3);c=Lt.fromDate(c);for(let h of i)h.setCompState({sequenceId:n.getJson()._id,finished:!1,emailNumber:0,nextSend:c},{run:!0});this.dispatch({popupSwitch:"",selectedContacts:[]})}},className:"title",children:M.jsx("div",{className:"title-left",children:t.name})})})}}class BF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var e;return M.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"65%"},className:this.props.pageClass||this.state.defaultClass,children:[M.jsx("h2",{children:"Add to Sequence"})," ","contacts: ",((e=this.propsState.selectedContacts)==null?void 0:e.length)||"0",M.jsx(On,{name:"sequence",cells:[{type:"custom",custom:UF}]})]})}}let qF=[{type:"email",body:"Hey John, just wanted to follow up on our conversation yesterday. Do you think the software is a good fit for your team? I'm happy to set up another demo or go over pricing options",conversationId:"123",_id:"email1",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Hey John, just wanted to follow up on our conversation yesterday. Do you think the software is a good fit for your team? I'm happy to set up another demo or go over pricing options",conversationId:"123",_id:"email1",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Can you get me a price estimate that I can bring back to my team?",conversationId:"123",_id:"email2",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"email",body:"Hi Jane, AI can find the contacts you need to reach out to TODAY. Let me know if you can connect today.",conversationId:"1234",_id:"email3",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Sure I have time arround 3pm tomorrow afternoon",conversationId:"1234",_id:"email4",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"email",body:"Hey Taylor Just let me know if it would be good to meet today or not.",conversationId:"1235",_id:"email5",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"No I can't to this week.",conversationId:"1235",_id:"email6",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"conversation",_id:"123",recipient:"taylormdavidson@gmail.com",senderName:"John Doe",timeStamp:"Today 2:15 pm",recentMessage:"Hey, how's it going?",owner:"alan@salescapture.com"},{type:"conversation",_id:"1234",recipient:"taylormdavidson@gmail.com",senderName:"Jane Doe",timeStamp:"Today 2:15 pm",recentMessage:"Hey, how's it going?",owner:"alan@salescapture.com"},{type:"conversation",_id:"1235",recipient:"taylormdavidson@gmail.com",senderName:"Taylor Davidson",timeStamp:"Today 2:15 pm",recentMessage:"Can you get me a price estimate that I can bring back to my team?",owner:"alan@salescapture.com"},{type:"contact",_id:"contact1",name:"Taylor Davidson",email:"taylormdavidson@gmail.com",owner:"alan@salescapture.com "},{type:"potentialProspect",_id:"prospect1",firstName:"Taylor Davidson",email:"taylormdavidson@gmail.com",owner:"alan@salescapture.com ",researchId:"research1"},{type:"research",_id:"research1",name:"research1",owner:"alan@salescapture.com "}];class zF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){this.props.obj;let e=M.jsx(Gl,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(e=M.jsx(NI,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),M.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[M.jsx("br",{}),M.jsxs("div",{className:"content-home-add",children:[M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"Subject:"}),M.jsx(tn,{obj:this.propsState.currentPopupComponent,name:"subject",wrapperClass:"underline-form"})]}),M.jsx("div",{className:"row",children:M.jsx(tn,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),M.jsxs("div",{className:"row",children:[M.jsx("div",{children:"Trigger this step in:"}),M.jsx(tn,{obj:this.propsState.currentPopupComponent,name:"nextSend",wrapperClass:"underline-form",wrapperStyle:{width:"10%",marginRight:"8px"}})," days"]}),M.jsxs("div",{className:"row",children:[this.propsState.popupSwitch.includes("update")&&M.jsx(LI,{obj:this.propsState.currentPopupComponent,formClass:"del-button-1",callbackFunc:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}}),M.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"},children:M.jsx(dj,{obj:this.propsState.currentPopupComponent,content:M.jsx("div",{style:{display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",fontSize:"19px",width:"37px",height:"37px",background:"#378c75",color:"#ade0d3"},children:M.jsx("div",{className:"icon-last",children:M.jsx("i",{className:"fa-solid fa-plus"})})})})}),M.jsx("div",{className:"col",children:e})]}),M.jsx("div",{})]})]})}}const HF="/assets/scailogofake-B3YGBRpn.png",$F=()=>{const[r,e]=ge.useState(!1),t=ge.useRef(null),n=l=>{if(l.code){const c=l.code;console.log("Received authorization code:",c),i(c)}else console.error("Authorization failed or denied:",l),alert("Failed to connect Gmail. Please try again.")},i=l=>{fetch("http://localhost:3000/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l})}).then(h=>{if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return h.json()}).then(h=>{console.log("Backend response after token exchange:",h),h.success?(e(!0),alert("Gmail connected successfully!")):alert(`Failed to connect Gmail: ${h.error}`)}).catch(h=>{console.error("Error sending code to backend:",h),alert("Failed to complete connection. Please try again."),e(!1)})};ge.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,document.body.appendChild(l),l.onload=()=>{t.current=google.accounts.oauth2.initCodeClient({client_id:"592520451667-0sphkcuj07fg9scli2p8u78bjs1uk86k.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/gmail.modify",redirect_uri:"http://localhost:3000/google",callback:n}),console.log("Google Identity Services client initialized.")},()=>{document.body.removeChild(l)}},[]);const a=()=>{t.current?t.current.requestCode():(console.error("Google Identity Services client not initialized."),alert("Google services are not ready. Please try again in a moment."))};return M.jsxs("div",{style:{padding:"1.5rem",maxWidth:"24rem",margin:"0 auto",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",gap:"1rem"},children:[M.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",marginBottom:"1rem"},children:"Gmail Integration"}),r?M.jsx("p",{style:{color:"#10b981",textAlign:"center",fontWeight:"semibold",marginBottom:"1rem"},children:"Gmail Connected!"}):M.jsx("button",{onClick:a,disabled:!t.current,style:{width:"100%",backgroundColor:"#3b82f6",color:"#fff",fontWeight:"bold",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem",paddingRight:"1rem",borderRadius:"0.25rem",border:"none",cursor:t.current?"pointer":"not-allowed",opacity:t.current?1:.5,transition:"background-color 0.2s ease-in-out"},children:t.current?"Connect Gmail":"Loading..."}),M.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:"Connect your Gmail account to send emails directly through our platform."})]})};class WF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return M.jsx("div",{className:"mobile-container",children:M.jsx($F,{})})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{marginLeft:"300px",width:"80%"},children:this.getInnerContent()})}}class KF extends ma{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:M.jsx(_n,{theme:"NoBorder",type:"fit",content:M.jsx(WF,{})})})}}class GF extends lt{constructor(t){super(t);he(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});he(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}render(){var i;const{obj:t}=this.props;let n=t.getJson();return M.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[M.jsxs("div",{className:"contact-item",children:[M.jsx(Hh,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),M.jsx("div",{className:"contact-avatar",children:M.jsx("i",{className:"fa-solid fa-user"})}),M.jsxs("div",{className:"contact-info",children:[M.jsx("div",{onClick:()=>{this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.firstName} ${n.lastName}`}),M.jsx("div",{className:"contact-desc",children:n.company})]}),M.jsx("div",{style:{cursor:"pointer",width:"fit-content"},children:M.jsx("div",{className:"contact-icon",children:M.jsx("i",{className:"fa-solid fa-message"})})})]}),M.jsx("div",{className:"contact-tag-container active",children:(i=n.tags)==null?void 0:i.split(",").map((a,l)=>M.jsx("button",{className:"contact-tag-btn",children:a},l))})]})}}class QF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}componentDidMount(){this.dispatch({selectedContacts:[]})}filterFunc(){var a;let e=rh.getIdFromURL(),t=((a=this.propsState.tags)==null?void 0:a.split(","))||"",n=this.componentList.getList("potentialProspect",e,"researchId"),i=[];if(t)for(let l of t){let c=n.filter(h=>h.getJson().tags.includes(l));i=[...i,...c]}else i=[...n];this.dispatch({selectedContacts:i})}getInnerContent(){var l,c;let e=rh.getIdFromURL(),t=this.propsState.selectedContacts,n=this.propsState.componentList.getList("potentialProspect",e,"researchId");(t==null?void 0:t.length)>0;let i=n!=null&&n.length?"/"+(n==null?void 0:n.length):"",a=(t==null?void 0:t.length)===(n==null?void 0:n.length);return M.jsxs("div",{className:"mobile-container",children:[M.jsxs("div",{className:"top-nav-float",children:[M.jsxs("nav",{className:"top-nav",children:[M.jsxs("div",{className:"nav-left",children:[M.jsx("div",{className:"nav-icon",children:M.jsx("i",{className:"fas fa-circle"})}),M.jsx("div",{className:"nav-title",children:"Potential Prospects"})]}),M.jsxs("div",{className:"nav-right",children:[M.jsx("div",{className:"nav-icon",children:M.jsxs("button",{className:"btn",children:["A to Z ",M.jsx("i",{className:"fa-solid fa-angle-down"})]})}),M.jsx("div",{className:"nav-icon",children:M.jsx("button",{className:"btn",children:M.jsx("i",{className:"fa-solid fa-filter"})})})]})]}),M.jsx("div",{className:"search-container",children:M.jsxs("div",{className:"search-bar",children:[M.jsx("i",{className:"fas fa-search search-icon"}),M.jsx("input",{onChange:h=>{this.dispatch({tags:h.target.value})},className:"search-input",placeholder:"Search"})]})}),M.jsx("div",{className:"filter-nav",children:M.jsxs("div",{className:"filter-nav-left",children:[M.jsx(M.Fragment,{children:M.jsx("div",{id:"selectBtn",style:{height:"fit-content",marginLeft:"5px",alignContent:"center"},children:M.jsx(Hh,{label:a?"Deselect All":"Select All",check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}})})}),M.jsx("span",{className:"count-desc",children:(l=this.propsState.selectedContacts)!=null&&l.length?this.propsState.selectedContacts.length+`${i} Selected`:""})]})})]}),M.jsx(On,{filterFunc:h=>{if(!this.propsState.tags)return!0;let d=this.propsState.tags.split(",");for(let v of d)if(v!==""&&h.getJson().tags.includes(v))return!0;return!1},filter:{search:e,attribute:"researchId"},name:"potentialProspect",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:GF}],hasLink:!0}),((c=this.propsState.selectedContacts)==null?void 0:c.length)>0&&M.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[M.jsx("button",{className:"floating-select-btn",children:M.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),M.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:M.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),M.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:M.jsx(Uh,{formclassName:"FCImgButton",content:M.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class JF extends lt{constructor(e){super(e),this.state={...this.state,count:0}}componentDidMount(){if(this.state.count<=0){const{app:e,obj:t}=this.props;let a=e.state.componentList.getList("potentialProspect",t==null?void 0:t.getJson().name,"researchId").length;this.setState({count:a})}}render(){var a;const{obj:e,app:t}=this.props;let n=e.getJson(),i=n.isActive;return M.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[M.jsxs("div",{className:`contact-item ${i?"contact-item-active":""}`,children:[M.jsxs("div",{className:"contact-info",children:[M.jsx("div",{onClick:()=>{this.dispatch({currentPopupComponent:e,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.name} `}),this.state.count&&M.jsx("div",{className:"contact-desc",children:`${this.state.count} Contacts Found`})]}),M.jsxs("div",{className:`profile-status ${i?"profile-status-active":""}`,children:[M.jsx("i",{className:"fa-solid fa-circle"}),M.jsx("span",{children:i?"Active":"Paused"})]})]}),M.jsx("div",{className:"contact-tag-container active",children:(a=n.tags)==null?void 0:a.split(",").map((l,c)=>M.jsx("button",{className:"contact-tag-btn",children:l},c))})]})}}class YF extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let a of e){let l=t.filter(c=>c.getJson().tags.includes(a));n=[...n,...l]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){var e;return M.jsxs("div",{className:"map-container",children:[M.jsxs("div",{className:"top-nav-float",children:[M.jsxs("nav",{className:"top-nav",children:[M.jsxs("div",{className:"nav-left",children:[M.jsx("div",{className:"nav-icon",children:M.jsx("i",{className:"fas fa-circle"})}),M.jsx("div",{className:"nav-title",children:"Research"})]}),M.jsxs("div",{className:"nav-right",children:[M.jsx("div",{className:"nav-icon",children:M.jsxs("button",{className:"btn",children:["A to Z ",M.jsx("i",{className:"fa-solid fa-angle-down"})]})}),M.jsx("div",{className:"nav-icon",children:M.jsx("button",{className:"btn",children:M.jsx("i",{className:"fa-solid fa-filter"})})})]})]}),M.jsx("div",{className:"search-container",children:M.jsxs("div",{className:"search-bar",children:[M.jsx("i",{className:"fas fa-search search-icon"}),M.jsx("input",{onChange:t=>{this.dispatch({tags:t.target.value})},className:"search-input",placeholder:"Search"})]})}),M.jsx("div",{className:"filter-nav"}),M.jsx("div",{className:"dark-button-1",children:"New Research Profile"})]}),M.jsx("div",{className:"card-header",children:"Customer Profiles"}),M.jsxs("div",{children:[" ",M.jsx(On,{filterFunc:t=>{if(!this.propsState.tags)return!0;let n=this.propsState.tags.split(",");for(let i of n)if(i!==""&&t.getJson().tags.includes(i))return!0;return!1},name:"research",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",hasLink:!0,custom:JF}],hasLink:!0})]}),((e=this.propsState.selectedContacts)==null?void 0:e.length)>0&&M.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[M.jsx("button",{className:"floating-select-btn",children:M.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),M.jsx("button",{onClick:()=>{for(let t of this.propsState.selectedContacts)t.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:M.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),M.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:M.jsx(Uh,{formclassName:"FCImgButton",content:M.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class XF extends ma{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:M.jsx(_n,{theme:"NoBorder",type:"fit",content:M.jsx(YF,{})})})}}class ZF extends ma{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return M.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:M.jsx(_n,{theme:"NoBorder",type:"fit",content:M.jsx(QF,{})})})}}class e4 extends UI{getHtml(){return console.log("this.list",this.list),console.log("this.mapList",this.mapList),M.jsxs("div",{className:"bottom-nav",children:[M.jsxs(yn,{to:"/conversation",className:"bottom-nav-item",children:[M.jsx("i",{className:"fa-solid fa-message"}),M.jsx("span",{children:"Messages"})]}),M.jsxs(yn,{to:"/contacts",className:"bottom-nav-item",children:[M.jsx("i",{className:"fa-solid fa-address-book"}),M.jsx("span",{children:"Contacts"})]}),M.jsx("a",{href:"#",className:"bottom-nav-item",children:M.jsx("div",{id:"float-btn-plus",className:"float-btn",children:M.jsx("i",{className:"fas fa-plus"})})}),M.jsxs(yn,{to:"/research",className:"bottom-nav-item",children:[M.jsx("i",{className:"fa-solid fa-graduation-cap"}),M.jsx("span",{children:"Research"})]}),M.jsxs(yn,{to:"/content",className:"bottom-nav-item",children:[M.jsx("i",{className:"fa-solid fa-briefcase"}),M.jsx("span",{children:"Content"})]})]})}}class t4 extends aF{constructor(e){super(e,{db:XL,endpoint:"salescaptureAI",auth:ZL,storage:YL}),this.popupComponents={contact:KI,step:zF},this.popupComponentsProps={},nh.getFactory().registerComponent("bottomNavMap",e4);let t={type:"user",owner:"alan@salescapture.com",email:"alan@salescapture.com",_id:"alan@salescapture.com"};this.componentList.addComponents([...qF],!0),this.state={...this.state,navBarProps:{mapType:window.innerWidth<600?"bottomNavMap":void 0,type:window.innerWidth<600?"topBar":void 0,style:{backgroundColor:"#35b593",color:"white"},cardStyle:{backgroundColor:"#35b593",position:window.innerWidth<600&&"absolute",bottom:window.innerWidth<600&&"0px"},logoURL:window.innerWidth>600&&HF,linkItemStyle:{color:"white"}},routes:[{comp:o1,name:"Home",path:"/"},{comp:o1,name:"Messages",path:"conversation"},{comp:AF,name:"Contacts",path:"contacts"},{comp:XF,name:"Research",path:"research",idComp:ZF},{comp:FF,name:"Content",path:"content"},{comp:KF,name:"Settings",path:"settings"},{comp:a1,name:"",path:"sequence",idComp:a1},{comp:l1,name:"",path:"template",idComp:l1}],popups:[{content:BF,popupSwitch:"addToSequence"}]},this.registerListWithFactory([...Object.values(vF)]);let n=nh.getNavList();n.update(0,{class:"SCAILogo"}),n.update(1,{activeClass:"SCAILink"}),window.innerWidth<600&&(n.remove(2),n.remove(0)),this.getUser(t)}async getUser(e){await this.componentList.addComponents([e],!0),e=this.componentList.getComponent("user"),this.state.currentUser=e}}ob.createRoot(document.getElementById("root")).render(M.jsx(ge.StrictMode,{children:M.jsx(t4,{})}));
