var W9=Object.defineProperty;var TR=i=>{throw TypeError(i)};var G9=(i,e,t)=>e in i?W9(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ie=(i,e,t)=>G9(i,typeof e!="symbol"?e+"":e,t),uE=(i,e,t)=>e.has(i)||TR("Cannot "+t);var f=(i,e,t)=>(uE(i,e,"read from private field"),t?t.call(i):e.get(i)),z=(i,e,t)=>e.has(i)?TR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),U=(i,e,t,n)=>(uE(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),W=(i,e,t)=>(uE(i,e,"access private method"),t);var ir=(i,e,t,n)=>({set _(r){U(i,e,r,t)},get _(){return f(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var cE={exports:{}},Wg={},hE={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR;function K9(){if(IR)return It;IR=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function p(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function A(q,H,G){this.props=q,this.context=H,this.refs=_,this.updater=G||g}A.prototype.isReactComponent={},A.prototype.setState=function(q,H){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,H,"setState")},A.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function v(){}v.prototype=A.prototype;function E(q,H,G){this.props=q,this.context=H,this.refs=_,this.updater=G||g}var I=E.prototype=new v;I.constructor=E,w(I,A.prototype),I.isPureReactComponent=!0;var S=Array.isArray,R=Object.prototype.hasOwnProperty,F={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(q,H,G){var le,se={},X=null,ne=null;if(H!=null)for(le in H.ref!==void 0&&(ne=H.ref),H.key!==void 0&&(X=""+H.key),H)R.call(H,le)&&!k.hasOwnProperty(le)&&(se[le]=H[le]);var te=arguments.length-2;if(te===1)se.children=G;else if(1<te){for(var ae=Array(te),de=0;de<te;de++)ae[de]=arguments[de+2];se.children=ae}if(q&&q.defaultProps)for(le in te=q.defaultProps,te)se[le]===void 0&&(se[le]=te[le]);return{$$typeof:i,type:q,key:X,ref:ne,props:se,_owner:F.current}}function D(q,H){return{$$typeof:i,type:q.type,key:H,ref:q.ref,props:q.props,_owner:q._owner}}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===i}function N(q){var H={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(G){return H[G]})}var L=/\/+/g;function M(q,H){return typeof q=="object"&&q!==null&&q.key!=null?N(""+q.key):H.toString(36)}function $(q,H,G,le,se){var X=typeof q;(X==="undefined"||X==="boolean")&&(q=null);var ne=!1;if(q===null)ne=!0;else switch(X){case"string":case"number":ne=!0;break;case"object":switch(q.$$typeof){case i:case e:ne=!0}}if(ne)return ne=q,se=se(ne),q=le===""?"."+M(ne,0):le,S(se)?(G="",q!=null&&(G=q.replace(L,"$&/")+"/"),$(se,H,G,"",function(de){return de})):se!=null&&(P(se)&&(se=D(se,G+(!se.key||ne&&ne.key===se.key?"":(""+se.key).replace(L,"$&/")+"/")+q)),H.push(se)),1;if(ne=0,le=le===""?".":le+":",S(q))for(var te=0;te<q.length;te++){X=q[te];var ae=le+M(X,te);ne+=$(X,H,G,ae,se)}else if(ae=p(q),typeof ae=="function")for(q=ae.call(q),te=0;!(X=q.next()).done;)X=X.value,ae=le+M(X,te++),ne+=$(X,H,G,ae,se);else if(X==="object")throw H=String(q),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ne}function Q(q,H,G){if(q==null)return q;var le=[],se=0;return $(q,le,"","",function(X){return H.call(G,X,se++)}),le}function re(q){if(q._status===-1){var H=q._result;H=H(),H.then(function(G){(q._status===0||q._status===-1)&&(q._status=1,q._result=G)},function(G){(q._status===0||q._status===-1)&&(q._status=2,q._result=G)}),q._status===-1&&(q._status=0,q._result=H)}if(q._status===1)return q._result.default;throw q._result}var ee={current:null},ue={transition:null},Y={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:ue,ReactCurrentOwner:F};function J(){throw Error("act(...) is not supported in production builds of React.")}return It.Children={map:Q,forEach:function(q,H,G){Q(q,function(){H.apply(this,arguments)},G)},count:function(q){var H=0;return Q(q,function(){H++}),H},toArray:function(q){return Q(q,function(H){return H})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},It.Component=A,It.Fragment=t,It.Profiler=r,It.PureComponent=E,It.StrictMode=n,It.Suspense=u,It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,It.act=J,It.cloneElement=function(q,H,G){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var le=w({},q.props),se=q.key,X=q.ref,ne=q._owner;if(H!=null){if(H.ref!==void 0&&(X=H.ref,ne=F.current),H.key!==void 0&&(se=""+H.key),q.type&&q.type.defaultProps)var te=q.type.defaultProps;for(ae in H)R.call(H,ae)&&!k.hasOwnProperty(ae)&&(le[ae]=H[ae]===void 0&&te!==void 0?te[ae]:H[ae])}var ae=arguments.length-2;if(ae===1)le.children=G;else if(1<ae){te=Array(ae);for(var de=0;de<ae;de++)te[de]=arguments[de+2];le.children=te}return{$$typeof:i,type:q.type,key:se,ref:X,props:le,_owner:ne}},It.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:s,_context:q},q.Consumer=q},It.createElement=T,It.createFactory=function(q){var H=T.bind(null,q);return H.type=q,H},It.createRef=function(){return{current:null}},It.forwardRef=function(q){return{$$typeof:a,render:q}},It.isValidElement=P,It.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:re}},It.memo=function(q,H){return{$$typeof:h,type:q,compare:H===void 0?null:H}},It.startTransition=function(q){var H=ue.transition;ue.transition={};try{q()}finally{ue.transition=H}},It.unstable_act=J,It.useCallback=function(q,H){return ee.current.useCallback(q,H)},It.useContext=function(q){return ee.current.useContext(q)},It.useDebugValue=function(){},It.useDeferredValue=function(q){return ee.current.useDeferredValue(q)},It.useEffect=function(q,H){return ee.current.useEffect(q,H)},It.useId=function(){return ee.current.useId()},It.useImperativeHandle=function(q,H,G){return ee.current.useImperativeHandle(q,H,G)},It.useInsertionEffect=function(q,H){return ee.current.useInsertionEffect(q,H)},It.useLayoutEffect=function(q,H){return ee.current.useLayoutEffect(q,H)},It.useMemo=function(q,H){return ee.current.useMemo(q,H)},It.useReducer=function(q,H,G){return ee.current.useReducer(q,H,G)},It.useRef=function(q){return ee.current.useRef(q)},It.useState=function(q){return ee.current.useState(q)},It.useSyncExternalStore=function(q,H,G){return ee.current.useSyncExternalStore(q,H,G)},It.useTransition=function(){return ee.current.useTransition()},It.version="18.3.1",It}var DR;function M1(){return DR||(DR=1,hE.exports=K9()),hE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function J9(){if(kR)return Wg;kR=1;var i=M1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,h){var d,m={},p=null,g=null;h!==void 0&&(p=""+h),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(g=u.ref);for(d in u)n.call(u,d)&&!s.hasOwnProperty(d)&&(m[d]=u[d]);if(a&&a.defaultProps)for(d in u=a.defaultProps,u)m[d]===void 0&&(m[d]=u[d]);return{$$typeof:e,type:a,key:p,ref:g,props:m,_owner:r.current}}return Wg.Fragment=t,Wg.jsx=o,Wg.jsxs=o,Wg}var RR;function Y9(){return RR||(RR=1,cE.exports=J9()),cE.exports}var C=Y9(),be=M1();const Je=L0(be);var ww={},dE={exports:{}},Ni={},fE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PR;function X9(){return PR||(PR=1,function(i){function e(ue,Y){var J=ue.length;ue.push(Y);e:for(;0<J;){var q=J-1>>>1,H=ue[q];if(0<r(H,Y))ue[q]=Y,ue[J]=H,J=q;else break e}}function t(ue){return ue.length===0?null:ue[0]}function n(ue){if(ue.length===0)return null;var Y=ue[0],J=ue.pop();if(J!==Y){ue[0]=J;e:for(var q=0,H=ue.length,G=H>>>1;q<G;){var le=2*(q+1)-1,se=ue[le],X=le+1,ne=ue[X];if(0>r(se,J))X<H&&0>r(ne,se)?(ue[q]=ne,ue[X]=J,q=X):(ue[q]=se,ue[le]=J,q=le);else if(X<H&&0>r(ne,J))ue[q]=ne,ue[X]=J,q=X;else break e}}return Y}function r(ue,Y){var J=ue.sortIndex-Y.sortIndex;return J!==0?J:ue.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var u=[],h=[],d=1,m=null,p=3,g=!1,w=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ue){for(var Y=t(h);Y!==null;){if(Y.callback===null)n(h);else if(Y.startTime<=ue)n(h),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=t(h)}}function S(ue){if(_=!1,I(ue),!w)if(t(u)!==null)w=!0,re(R);else{var Y=t(h);Y!==null&&ee(S,Y.startTime-ue)}}function R(ue,Y){w=!1,_&&(_=!1,v(T),T=-1),g=!0;var J=p;try{for(I(Y),m=t(u);m!==null&&(!(m.expirationTime>Y)||ue&&!N());){var q=m.callback;if(typeof q=="function"){m.callback=null,p=m.priorityLevel;var H=q(m.expirationTime<=Y);Y=i.unstable_now(),typeof H=="function"?m.callback=H:m===t(u)&&n(u),I(Y)}else n(u);m=t(u)}if(m!==null)var G=!0;else{var le=t(h);le!==null&&ee(S,le.startTime-Y),G=!1}return G}finally{m=null,p=J,g=!1}}var F=!1,k=null,T=-1,D=5,P=-1;function N(){return!(i.unstable_now()-P<D)}function L(){if(k!==null){var ue=i.unstable_now();P=ue;var Y=!0;try{Y=k(!0,ue)}finally{Y?M():(F=!1,k=null)}}else F=!1}var M;if(typeof E=="function")M=function(){E(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=L,M=function(){Q.postMessage(null)}}else M=function(){A(L,0)};function re(ue){k=ue,F||(F=!0,M())}function ee(ue,Y){T=A(function(){ue(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ue){ue.callback=null},i.unstable_continueExecution=function(){w||g||(w=!0,re(R))},i.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ue?Math.floor(1e3/ue):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(ue){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var J=p;p=Y;try{return ue()}finally{p=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ue,Y){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var J=p;p=ue;try{return Y()}finally{p=J}},i.unstable_scheduleCallback=function(ue,Y,J){var q=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?q+J:q):J=q,ue){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=J+H,ue={id:d++,callback:Y,priorityLevel:ue,startTime:J,expirationTime:H,sortIndex:-1},J>q?(ue.sortIndex=J,e(h,ue),t(u)===null&&ue===t(h)&&(_?(v(T),T=-1):_=!0,ee(S,J-q))):(ue.sortIndex=H,e(u,ue),w||g||(w=!0,re(R))),ue},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(ue){var Y=p;return function(){var J=p;p=Y;try{return ue.apply(this,arguments)}finally{p=J}}}}(pE)),pE}var NR;function Q9(){return NR||(NR=1,fE.exports=X9()),fE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR;function Z9(){if(OR)return Ni;OR=1;var i=M1(),e=Q9();function t(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,y=1;y<arguments.length;y++)c+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(l,c){o(l,c),o(l+"Capture",c)}function o(l,c){for(r[l]=c,l=0;l<c.length;l++)n.add(c[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function p(l){return u.call(m,l)?!0:u.call(d,l)?!1:h.test(l)?m[l]=!0:(d[l]=!0,!1)}function g(l,c,y,x){if(y!==null&&y.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:y!==null?!y.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,c,y,x){if(c===null||typeof c>"u"||g(l,c,y,x))return!0;if(x)return!1;if(y!==null)switch(y.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function _(l,c,y,x,O,j,K){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=O,this.mustUseProperty=y,this.propertyName=l,this.type=c,this.sanitizeURL=j,this.removeEmptyString=K}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){A[l]=new _(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];A[c]=new _(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){A[l]=new _(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){A[l]=new _(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){A[l]=new _(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){A[l]=new _(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){A[l]=new _(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){A[l]=new _(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){A[l]=new _(l,5,!1,l.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function E(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(v,E);A[c]=new _(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(v,E);A[c]=new _(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(v,E);A[c]=new _(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){A[l]=new _(l,1,!1,l.toLowerCase(),null,!1,!1)}),A.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){A[l]=new _(l,1,!1,l.toLowerCase(),null,!0,!0)});function I(l,c,y,x){var O=A.hasOwnProperty(c)?A[c]:null;(O!==null?O.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,y,O,x)&&(y=null),x||O===null?p(c)&&(y===null?l.removeAttribute(c):l.setAttribute(c,""+y)):O.mustUseProperty?l[O.propertyName]=y===null?O.type===3?!1:"":y:(c=O.attributeName,x=O.attributeNamespace,y===null?l.removeAttribute(c):(O=O.type,y=O===3||O===4&&y===!0?"":""+y,x?l.setAttributeNS(x,c,y):l.setAttribute(c,y))))}var S=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),F=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),ue=Symbol.iterator;function Y(l){return l===null||typeof l!="object"?null:(l=ue&&l[ue]||l["@@iterator"],typeof l=="function"?l:null)}var J=Object.assign,q;function H(l){if(q===void 0)try{throw Error()}catch(y){var c=y.stack.trim().match(/\n( *(at )?)/);q=c&&c[1]||""}return`
`+q+l}var G=!1;function le(l,c){if(!l||G)return"";G=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(we){var x=we}Reflect.construct(l,[],c)}else{try{c.call()}catch(we){x=we}l.call(c.prototype)}else{try{throw Error()}catch(we){x=we}l()}}catch(we){if(we&&x&&typeof we.stack=="string"){for(var O=we.stack.split(`
`),j=x.stack.split(`
`),K=O.length-1,oe=j.length-1;1<=K&&0<=oe&&O[K]!==j[oe];)oe--;for(;1<=K&&0<=oe;K--,oe--)if(O[K]!==j[oe]){if(K!==1||oe!==1)do if(K--,oe--,0>oe||O[K]!==j[oe]){var ce=`
`+O[K].replace(" at new "," at ");return l.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",l.displayName)),ce}while(1<=K&&0<=oe);break}}}finally{G=!1,Error.prepareStackTrace=y}return(l=l?l.displayName||l.name:"")?H(l):""}function se(l){switch(l.tag){case 5:return H(l.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return l=le(l.type,!1),l;case 11:return l=le(l.type.render,!1),l;case 1:return l=le(l.type,!0),l;default:return""}}function X(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case k:return"Fragment";case F:return"Portal";case D:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case $:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case N:return(l.displayName||"Context")+".Consumer";case P:return(l._context.displayName||"Context")+".Provider";case L:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Q:return c=l.displayName||null,c!==null?c:X(l.type)||"Memo";case re:c=l._payload,l=l._init;try{return X(l(c))}catch{}}return null}function ne(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(c);case 8:return c===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function te(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ae(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function de(l){var c=ae(l)?"checked":"value",y=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),x=""+l[c];if(!l.hasOwnProperty(c)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var O=y.get,j=y.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return O.call(this)},set:function(K){x=""+K,j.call(this,K)}}),Object.defineProperty(l,c,{enumerable:y.enumerable}),{getValue:function(){return x},setValue:function(K){x=""+K},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function ye(l){l._valueTracker||(l._valueTracker=de(l))}function xe(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var y=c.getValue(),x="";return l&&(x=ae(l)?l.checked?"true":"false":l.value),l=x,l!==y?(c.setValue(l),!0):!1}function Oe(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Fe(l,c){var y=c.checked;return J({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??l._wrapperState.initialChecked})}function Be(l,c){var y=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;y=te(c.value!=null?c.value:y),l._wrapperState={initialChecked:x,initialValue:y,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function $e(l,c){c=c.checked,c!=null&&I(l,"checked",c,!1)}function mt(l,c){$e(l,c);var y=te(c.value),x=c.type;if(y!=null)x==="number"?(y===0&&l.value===""||l.value!=y)&&(l.value=""+y):l.value!==""+y&&(l.value=""+y);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?ve(l,c.type,y):c.hasOwnProperty("defaultValue")&&ve(l,c.type,te(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function fe(l,c,y){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,y||c===l.value||(l.value=c),l.defaultValue=c}y=l.name,y!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,y!==""&&(l.name=y)}function ve(l,c,y){(c!=="number"||Oe(l.ownerDocument)!==l)&&(y==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+y&&(l.defaultValue=""+y))}var Ie=Array.isArray;function Re(l,c,y,x){if(l=l.options,c){c={};for(var O=0;O<y.length;O++)c["$"+y[O]]=!0;for(y=0;y<l.length;y++)O=c.hasOwnProperty("$"+l[y].value),l[y].selected!==O&&(l[y].selected=O),O&&x&&(l[y].defaultSelected=!0)}else{for(y=""+te(y),c=null,O=0;O<l.length;O++){if(l[O].value===y){l[O].selected=!0,x&&(l[O].defaultSelected=!0);return}c!==null||l[O].disabled||(c=l[O])}c!==null&&(c.selected=!0)}}function Ae(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function rt(l,c){var y=c.value;if(y==null){if(y=c.children,c=c.defaultValue,y!=null){if(c!=null)throw Error(t(92));if(Ie(y)){if(1<y.length)throw Error(t(93));y=y[0]}c=y}c==null&&(c=""),y=c}l._wrapperState={initialValue:te(y)}}function qe(l,c){var y=te(c.value),x=te(c.defaultValue);y!=null&&(y=""+y,y!==l.value&&(l.value=y),c.defaultValue==null&&l.defaultValue!==y&&(l.defaultValue=y)),x!=null&&(l.defaultValue=""+x)}function Qe(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function st(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?st(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var gt,xi=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,y,x,O){MSApp.execUnsafeLocalFunction(function(){return l(c,y,x,O)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(gt=gt||document.createElement("div"),gt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=gt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function Mt(l,c){if(c){var y=l.firstChild;if(y&&y===l.lastChild&&y.nodeType===3){y.nodeValue=c;return}}l.textContent=c}var an={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hn=["Webkit","ms","Moz","O"];Object.keys(an).forEach(function(l){Hn.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),an[c]=an[l]})});function Ys(l,c,y){return c==null||typeof c=="boolean"||c===""?"":y||typeof c!="number"||c===0||an.hasOwnProperty(l)&&an[l]?(""+c).trim():c+"px"}function iu(l,c){l=l.style;for(var y in c)if(c.hasOwnProperty(y)){var x=y.indexOf("--")===0,O=Ys(y,c[y],x);y==="float"&&(y="cssFloat"),x?l.setProperty(y,O):l[y]=O}}var sg=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function og(l,c){if(c){if(sg[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function ag(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ih=null;function hf(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var df=null,Es=null,Oo=null;function ff(l){if(l=Rg(l)){if(typeof df!="function")throw Error(t(280));var c=l.stateNode;c&&(c=O2(c),df(l.stateNode,l.type,c))}}function Lo(l){Es?Oo?Oo.push(l):Oo=[l]:Es=l}function lg(){if(Es){var l=Es,c=Oo;if(Oo=Es=null,ff(l),c)for(l=0;l<c.length;l++)ff(c[l])}}function sh(l,c){return l(c)}function ug(){}var La=!1;function cg(l,c,y){if(La)return l(c,y);La=!0;try{return sh(l,c,y)}finally{La=!1,(Es!==null||Oo!==null)&&(ug(),lg())}}function Mn(l,c){var y=l.stateNode;if(y===null)return null;var x=O2(y);if(x===null)return null;y=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(y&&typeof y!="function")throw Error(t(231,c,typeof y));return y}var pf=!1;if(a)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){pf=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{pf=!1}function oh(l,c,y,x,O,j,K,oe,ce){var we=Array.prototype.slice.call(arguments,3);try{c.apply(y,we)}catch(Te){this.onError(Te)}}var ah=!1,mf=null,Qs=!1,hg=null,MA={onError:function(l){ah=!0,mf=l}};function gf(l,c,y,x,O,j,K,oe,ce){ah=!1,mf=null,oh.apply(MA,arguments)}function s2(l,c,y,x,O,j,K,oe,ce){if(gf.apply(this,arguments),ah){if(ah){var we=mf;ah=!1,mf=null}else throw Error(t(198));Qs||(Qs=!0,hg=we)}}function Zs(l){var c=l,y=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(y=c.return),l=c.return;while(l)}return c.tag===3?y:null}function lh(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function eo(l){if(Zs(l)!==l)throw Error(t(188))}function o2(l){var c=l.alternate;if(!c){if(c=Zs(l),c===null)throw Error(t(188));return c!==l?null:l}for(var y=l,x=c;;){var O=y.return;if(O===null)break;var j=O.alternate;if(j===null){if(x=O.return,x!==null){y=x;continue}break}if(O.child===j.child){for(j=O.child;j;){if(j===y)return eo(O),l;if(j===x)return eo(O),c;j=j.sibling}throw Error(t(188))}if(y.return!==x.return)y=O,x=j;else{for(var K=!1,oe=O.child;oe;){if(oe===y){K=!0,y=O,x=j;break}if(oe===x){K=!0,x=O,y=j;break}oe=oe.sibling}if(!K){for(oe=j.child;oe;){if(oe===y){K=!0,y=j,x=O;break}if(oe===x){K=!0,x=j,y=O;break}oe=oe.sibling}if(!K)throw Error(t(189))}}if(y.alternate!==x)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?l:c}function dg(l){return l=o2(l),l!==null?yf(l):null}function yf(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=yf(l);if(c!==null)return c;l=l.sibling}return null}var vf=e.unstable_scheduleCallback,fg=e.unstable_cancelCallback,a2=e.unstable_shouldYield,BA=e.unstable_requestPaint,ln=e.unstable_now,l2=e.unstable_getCurrentPriorityLevel,uh=e.unstable_ImmediatePriority,su=e.unstable_UserBlockingPriority,Cs=e.unstable_NormalPriority,pg=e.unstable_LowPriority,u2=e.unstable_IdlePriority,ch=null,Hi=null;function c2(l){if(Hi&&typeof Hi.onCommitFiberRoot=="function")try{Hi.onCommitFiberRoot(ch,l,void 0,(l.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:d2,mg=Math.log,h2=Math.LN2;function d2(l){return l>>>=0,l===0?32:31-(mg(l)/h2|0)|0}var wf=64,_f=4194304;function ou(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function hh(l,c){var y=l.pendingLanes;if(y===0)return 0;var x=0,O=l.suspendedLanes,j=l.pingedLanes,K=y&268435455;if(K!==0){var oe=K&~O;oe!==0?x=ou(oe):(j&=K,j!==0&&(x=ou(j)))}else K=y&~O,K!==0?x=ou(K):j!==0&&(x=ou(j));if(x===0)return 0;if(c!==0&&c!==x&&(c&O)===0&&(O=x&-x,j=c&-c,O>=j||O===16&&(j&4194240)!==0))return c;if((x&4)!==0&&(x|=y&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=x;0<c;)y=31-oi(c),O=1<<y,x|=l[y],c&=~O;return x}function jA(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fa(l,c){for(var y=l.suspendedLanes,x=l.pingedLanes,O=l.expirationTimes,j=l.pendingLanes;0<j;){var K=31-oi(j),oe=1<<K,ce=O[K];ce===-1?((oe&y)===0||(oe&x)!==0)&&(O[K]=jA(oe,c)):ce<=c&&(l.expiredLanes|=oe),j&=~oe}}function zi(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function dh(){var l=wf;return wf<<=1,(wf&4194240)===0&&(wf=64),l}function au(l){for(var c=[],y=0;31>y;y++)c.push(l);return c}function lu(l,c,y){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-oi(c),l[c]=y}function sn(l,c){var y=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<y;){var O=31-oi(y),j=1<<O;c[O]=0,x[O]=-1,l[O]=-1,y&=~j}}function uu(l,c){var y=l.entangledLanes|=c;for(l=l.entanglements;y;){var x=31-oi(y),O=1<<x;O&c|l[x]&c&&(l[x]|=c),y&=~O}}var Lt=0;function cu(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var f2,Af,p2,m2,g2,gg=!1,Fo=[],Ir=null,to=null,no=null,hu=new Map,xs=new Map,Mo=[],qA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y2(l,c){switch(l){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":to=null;break;case"mouseover":case"mouseout":no=null;break;case"pointerover":case"pointerout":hu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(c.pointerId)}}function Si(l,c,y,x,O,j){return l===null||l.nativeEvent!==j?(l={blockedOn:c,domEventName:y,eventSystemFlags:x,nativeEvent:j,targetContainers:[O]},c!==null&&(c=Rg(c),c!==null&&Af(c)),l):(l.eventSystemFlags|=x,c=l.targetContainers,O!==null&&c.indexOf(O)===-1&&c.push(O),l)}function UA(l,c,y,x,O){switch(c){case"focusin":return Ir=Si(Ir,l,c,y,x,O),!0;case"dragenter":return to=Si(to,l,c,y,x,O),!0;case"mouseover":return no=Si(no,l,c,y,x,O),!0;case"pointerover":var j=O.pointerId;return hu.set(j,Si(hu.get(j)||null,l,c,y,x,O)),!0;case"gotpointercapture":return j=O.pointerId,xs.set(j,Si(xs.get(j)||null,l,c,y,x,O)),!0}return!1}function v2(l){var c=yh(l.target);if(c!==null){var y=Zs(c);if(y!==null){if(c=y.tag,c===13){if(c=lh(y),c!==null){l.blockedOn=c,g2(l.priority,function(){p2(y)});return}}else if(c===3&&y.stateNode.current.memoizedState.isDehydrated){l.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ma(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var y=bf(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(y===null){y=l.nativeEvent;var x=new y.constructor(y.type,y);ih=x,y.target.dispatchEvent(x),ih=null}else return c=Rg(y),c!==null&&Af(c),l.blockedOn=y,!1;c.shift()}return!0}function fh(l,c,y){Ma(l)&&y.delete(c)}function w2(){gg=!1,Ir!==null&&Ma(Ir)&&(Ir=null),to!==null&&Ma(to)&&(to=null),no!==null&&Ma(no)&&(no=null),hu.forEach(fh),xs.forEach(fh)}function ro(l,c){l.blockedOn===c&&(l.blockedOn=null,gg||(gg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,w2)))}function io(l){function c(O){return ro(O,l)}if(0<Fo.length){ro(Fo[0],l);for(var y=1;y<Fo.length;y++){var x=Fo[y];x.blockedOn===l&&(x.blockedOn=null)}}for(Ir!==null&&ro(Ir,l),to!==null&&ro(to,l),no!==null&&ro(no,l),hu.forEach(c),xs.forEach(c),y=0;y<Mo.length;y++)x=Mo[y],x.blockedOn===l&&(x.blockedOn=null);for(;0<Mo.length&&(y=Mo[0],y.blockedOn===null);)v2(y),y.blockedOn===null&&Mo.shift()}var Ba=S.ReactCurrentBatchConfig,du=!0;function wn(l,c,y,x){var O=Lt,j=Ba.transition;Ba.transition=null;try{Lt=1,yg(l,c,y,x)}finally{Lt=O,Ba.transition=j}}function VA(l,c,y,x){var O=Lt,j=Ba.transition;Ba.transition=null;try{Lt=4,yg(l,c,y,x)}finally{Lt=O,Ba.transition=j}}function yg(l,c,y,x){if(du){var O=bf(l,c,y,x);if(O===null)ZA(l,c,x,ph,y),y2(l,x);else if(UA(O,l,c,y,x))x.stopPropagation();else if(y2(l,x),c&4&&-1<qA.indexOf(l)){for(;O!==null;){var j=Rg(O);if(j!==null&&f2(j),j=bf(l,c,y,x),j===null&&ZA(l,c,x,ph,y),j===O)break;O=j}O!==null&&x.stopPropagation()}else ZA(l,c,x,null,y)}}var ph=null;function bf(l,c,y,x){if(ph=null,l=hf(x),l=yh(l),l!==null)if(c=Zs(l),c===null)l=null;else if(y=c.tag,y===13){if(l=lh(c),l!==null)return l;l=null}else if(y===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return ph=l,null}function vg(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l2()){case uh:return 1;case su:return 4;case Cs:case pg:return 16;case u2:return 536870912;default:return 16}default:return 16}}var $i=null,Ef=null,Ti=null;function wg(){if(Ti)return Ti;var l,c=Ef,y=c.length,x,O="value"in $i?$i.value:$i.textContent,j=O.length;for(l=0;l<y&&c[l]===O[l];l++);var K=y-l;for(x=1;x<=K&&c[y-x]===O[j-x];x++);return Ti=O.slice(l,1<x?1-x:void 0)}function Cf(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function Bo(){return!0}function _g(){return!1}function Dr(l){function c(y,x,O,j,K){this._reactName=y,this._targetInst=O,this.type=x,this.nativeEvent=j,this.target=K,this.currentTarget=null;for(var oe in l)l.hasOwnProperty(oe)&&(y=l[oe],this[oe]=y?y(j):j[oe]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Bo:_g,this.isPropagationStopped=_g,this}return J(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),c}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xf=Dr(so),jo=J({},so,{view:0,detail:0}),HA=Dr(jo),Sf,ja,fu,mh=J({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==fu&&(fu&&l.type==="mousemove"?(Sf=l.screenX-fu.screenX,ja=l.screenY-fu.screenY):ja=Sf=0,fu=l),Sf)},movementY:function(l){return"movementY"in l?l.movementY:ja}}),Tf=Dr(mh),Ag=J({},mh,{dataTransfer:0}),_2=Dr(Ag),If=J({},jo,{relatedTarget:0}),Df=Dr(If),A2=J({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),qa=Dr(A2),b2=J({},so,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),E2=Dr(b2),C2=J({},so,{data:0}),bg=Dr(C2),kf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S2(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=x2[l])?!!c[l]:!1}function qo(){return S2}var b=J({},jo,{key:function(l){if(l.key){var c=kf[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Cf(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ai[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(l){return l.type==="keypress"?Cf(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Cf(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),B=Dr(b),V=J({},mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z=Dr(V),pe=J({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),_e=Dr(pe),Le=J({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yt=Dr(Le),tr=J({},mh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Bt=Dr(tr),mr=[9,13,27,32],zn=a&&"CompositionEvent"in window,Ss=null;a&&"documentMode"in document&&(Ss=document.documentMode);var Wi=a&&"TextEvent"in window&&!Ss,gh=a&&(!zn||Ss&&8<Ss&&11>=Ss),Rf=" ",AD=!1;function bD(l,c){switch(l){case"keyup":return mr.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ED(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Pf=!1;function Hj(l,c){switch(l){case"compositionend":return ED(c);case"keypress":return c.which!==32?null:(AD=!0,Rf);case"textInput":return l=c.data,l===Rf&&AD?null:l;default:return null}}function zj(l,c){if(Pf)return l==="compositionend"||!zn&&bD(l,c)?(l=wg(),Ti=Ef=$i=null,Pf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return gh&&c.locale!=="ko"?null:c.data;default:return null}}var $j={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CD(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!$j[l.type]:c==="textarea"}function xD(l,c,y,x){Lo(x),c=R2(c,"onChange"),0<c.length&&(y=new xf("onChange","change",null,y,x),l.push({event:y,listeners:c}))}var Eg=null,Cg=null;function Wj(l){HD(l,0)}function T2(l){var c=Mf(l);if(xe(c))return l}function Gj(l,c){if(l==="change")return c}var SD=!1;if(a){var zA;if(a){var $A="oninput"in document;if(!$A){var TD=document.createElement("div");TD.setAttribute("oninput","return;"),$A=typeof TD.oninput=="function"}zA=$A}else zA=!1;SD=zA&&(!document.documentMode||9<document.documentMode)}function ID(){Eg&&(Eg.detachEvent("onpropertychange",DD),Cg=Eg=null)}function DD(l){if(l.propertyName==="value"&&T2(Cg)){var c=[];xD(c,Cg,l,hf(l)),cg(Wj,c)}}function Kj(l,c,y){l==="focusin"?(ID(),Eg=c,Cg=y,Eg.attachEvent("onpropertychange",DD)):l==="focusout"&&ID()}function Jj(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return T2(Cg)}function Yj(l,c){if(l==="click")return T2(c)}function Xj(l,c){if(l==="input"||l==="change")return T2(c)}function Qj(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var oo=typeof Object.is=="function"?Object.is:Qj;function xg(l,c){if(oo(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var y=Object.keys(l),x=Object.keys(c);if(y.length!==x.length)return!1;for(x=0;x<y.length;x++){var O=y[x];if(!u.call(c,O)||!oo(l[O],c[O]))return!1}return!0}function kD(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function RD(l,c){var y=kD(l);l=0;for(var x;y;){if(y.nodeType===3){if(x=l+y.textContent.length,l<=c&&x>=c)return{node:y,offset:c-l};l=x}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=kD(y)}}function PD(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?PD(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function ND(){for(var l=window,c=Oe();c instanceof l.HTMLIFrameElement;){try{var y=typeof c.contentWindow.location.href=="string"}catch{y=!1}if(y)l=c.contentWindow;else break;c=Oe(l.document)}return c}function WA(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function Zj(l){var c=ND(),y=l.focusedElem,x=l.selectionRange;if(c!==y&&y&&y.ownerDocument&&PD(y.ownerDocument.documentElement,y)){if(x!==null&&WA(y)){if(c=x.start,l=x.end,l===void 0&&(l=c),"selectionStart"in y)y.selectionStart=c,y.selectionEnd=Math.min(l,y.value.length);else if(l=(c=y.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var O=y.textContent.length,j=Math.min(x.start,O);x=x.end===void 0?j:Math.min(x.end,O),!l.extend&&j>x&&(O=x,x=j,j=O),O=RD(y,j);var K=RD(y,x);O&&K&&(l.rangeCount!==1||l.anchorNode!==O.node||l.anchorOffset!==O.offset||l.focusNode!==K.node||l.focusOffset!==K.offset)&&(c=c.createRange(),c.setStart(O.node,O.offset),l.removeAllRanges(),j>x?(l.addRange(c),l.extend(K.node,K.offset)):(c.setEnd(K.node,K.offset),l.addRange(c)))}}for(c=[],l=y;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<c.length;y++)l=c[y],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var e9=a&&"documentMode"in document&&11>=document.documentMode,Nf=null,GA=null,Sg=null,KA=!1;function OD(l,c,y){var x=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;KA||Nf==null||Nf!==Oe(x)||(x=Nf,"selectionStart"in x&&WA(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Sg&&xg(Sg,x)||(Sg=x,x=R2(GA,"onSelect"),0<x.length&&(c=new xf("onSelect","select",null,c,y),l.push({event:c,listeners:x}),c.target=Nf)))}function I2(l,c){var y={};return y[l.toLowerCase()]=c.toLowerCase(),y["Webkit"+l]="webkit"+c,y["Moz"+l]="moz"+c,y}var Of={animationend:I2("Animation","AnimationEnd"),animationiteration:I2("Animation","AnimationIteration"),animationstart:I2("Animation","AnimationStart"),transitionend:I2("Transition","TransitionEnd")},JA={},LD={};a&&(LD=document.createElement("div").style,"AnimationEvent"in window||(delete Of.animationend.animation,delete Of.animationiteration.animation,delete Of.animationstart.animation),"TransitionEvent"in window||delete Of.transitionend.transition);function D2(l){if(JA[l])return JA[l];if(!Of[l])return l;var c=Of[l],y;for(y in c)if(c.hasOwnProperty(y)&&y in LD)return JA[l]=c[y];return l}var FD=D2("animationend"),MD=D2("animationiteration"),BD=D2("animationstart"),jD=D2("transitionend"),qD=new Map,UD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pu(l,c){qD.set(l,c),s(c,[l])}for(var YA=0;YA<UD.length;YA++){var XA=UD[YA],t9=XA.toLowerCase(),n9=XA[0].toUpperCase()+XA.slice(1);pu(t9,"on"+n9)}pu(FD,"onAnimationEnd"),pu(MD,"onAnimationIteration"),pu(BD,"onAnimationStart"),pu("dblclick","onDoubleClick"),pu("focusin","onFocus"),pu("focusout","onBlur"),pu(jD,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tg));function VD(l,c,y){var x=l.type||"unknown-event";l.currentTarget=y,s2(x,c,void 0,l),l.currentTarget=null}function HD(l,c){c=(c&4)!==0;for(var y=0;y<l.length;y++){var x=l[y],O=x.event;x=x.listeners;e:{var j=void 0;if(c)for(var K=x.length-1;0<=K;K--){var oe=x[K],ce=oe.instance,we=oe.currentTarget;if(oe=oe.listener,ce!==j&&O.isPropagationStopped())break e;VD(O,oe,we),j=ce}else for(K=0;K<x.length;K++){if(oe=x[K],ce=oe.instance,we=oe.currentTarget,oe=oe.listener,ce!==j&&O.isPropagationStopped())break e;VD(O,oe,we),j=ce}}}if(Qs)throw l=hg,Qs=!1,hg=null,l}function dn(l,c){var y=c[sb];y===void 0&&(y=c[sb]=new Set);var x=l+"__bubble";y.has(x)||(zD(c,l,2,!1),y.add(x))}function QA(l,c,y){var x=0;c&&(x|=4),zD(y,l,x,c)}var k2="_reactListening"+Math.random().toString(36).slice(2);function Ig(l){if(!l[k2]){l[k2]=!0,n.forEach(function(y){y!=="selectionchange"&&(r9.has(y)||QA(y,!1,l),QA(y,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[k2]||(c[k2]=!0,QA("selectionchange",!1,c))}}function zD(l,c,y,x){switch(vg(c)){case 1:var O=wn;break;case 4:O=VA;break;default:O=yg}y=O.bind(null,c,y,l),O=void 0,!pf||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(O=!0),x?O!==void 0?l.addEventListener(c,y,{capture:!0,passive:O}):l.addEventListener(c,y,!0):O!==void 0?l.addEventListener(c,y,{passive:O}):l.addEventListener(c,y,!1)}function ZA(l,c,y,x,O){var j=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var K=x.tag;if(K===3||K===4){var oe=x.stateNode.containerInfo;if(oe===O||oe.nodeType===8&&oe.parentNode===O)break;if(K===4)for(K=x.return;K!==null;){var ce=K.tag;if((ce===3||ce===4)&&(ce=K.stateNode.containerInfo,ce===O||ce.nodeType===8&&ce.parentNode===O))return;K=K.return}for(;oe!==null;){if(K=yh(oe),K===null)return;if(ce=K.tag,ce===5||ce===6){x=j=K;continue e}oe=oe.parentNode}}x=x.return}cg(function(){var we=j,Te=hf(y),De=[];e:{var Se=qD.get(l);if(Se!==void 0){var je=xf,Xe=l;switch(l){case"keypress":if(Cf(y)===0)break e;case"keydown":case"keyup":je=B;break;case"focusin":Xe="focus",je=Df;break;case"focusout":Xe="blur",je=Df;break;case"beforeblur":case"afterblur":je=Df;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=_2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=_e;break;case FD:case MD:case BD:je=qa;break;case jD:je=Yt;break;case"scroll":je=HA;break;case"wheel":je=Bt;break;case"copy":case"cut":case"paste":je=E2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Z}var Ze=(c&4)!==0,Bn=!Ze&&l==="scroll",me=Ze?Se!==null?Se+"Capture":null:Se;Ze=[];for(var he=we,ge;he!==null;){ge=he;var Pe=ge.stateNode;if(ge.tag===5&&Pe!==null&&(ge=Pe,me!==null&&(Pe=Mn(he,me),Pe!=null&&Ze.push(Dg(he,Pe,ge)))),Bn)break;he=he.return}0<Ze.length&&(Se=new je(Se,Xe,null,y,Te),De.push({event:Se,listeners:Ze}))}}if((c&7)===0){e:{if(Se=l==="mouseover"||l==="pointerover",je=l==="mouseout"||l==="pointerout",Se&&y!==ih&&(Xe=y.relatedTarget||y.fromElement)&&(yh(Xe)||Xe[Ua]))break e;if((je||Se)&&(Se=Te.window===Te?Te:(Se=Te.ownerDocument)?Se.defaultView||Se.parentWindow:window,je?(Xe=y.relatedTarget||y.toElement,je=we,Xe=Xe?yh(Xe):null,Xe!==null&&(Bn=Zs(Xe),Xe!==Bn||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(je=null,Xe=we),je!==Xe)){if(Ze=Tf,Pe="onMouseLeave",me="onMouseEnter",he="mouse",(l==="pointerout"||l==="pointerover")&&(Ze=Z,Pe="onPointerLeave",me="onPointerEnter",he="pointer"),Bn=je==null?Se:Mf(je),ge=Xe==null?Se:Mf(Xe),Se=new Ze(Pe,he+"leave",je,y,Te),Se.target=Bn,Se.relatedTarget=ge,Pe=null,yh(Te)===we&&(Ze=new Ze(me,he+"enter",Xe,y,Te),Ze.target=ge,Ze.relatedTarget=Bn,Pe=Ze),Bn=Pe,je&&Xe)t:{for(Ze=je,me=Xe,he=0,ge=Ze;ge;ge=Lf(ge))he++;for(ge=0,Pe=me;Pe;Pe=Lf(Pe))ge++;for(;0<he-ge;)Ze=Lf(Ze),he--;for(;0<ge-he;)me=Lf(me),ge--;for(;he--;){if(Ze===me||me!==null&&Ze===me.alternate)break t;Ze=Lf(Ze),me=Lf(me)}Ze=null}else Ze=null;je!==null&&$D(De,Se,je,Ze,!1),Xe!==null&&Bn!==null&&$D(De,Bn,Xe,Ze,!0)}}e:{if(Se=we?Mf(we):window,je=Se.nodeName&&Se.nodeName.toLowerCase(),je==="select"||je==="input"&&Se.type==="file")var et=Gj;else if(CD(Se))if(SD)et=Xj;else{et=Jj;var at=Kj}else(je=Se.nodeName)&&je.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(et=Yj);if(et&&(et=et(l,we))){xD(De,et,y,Te);break e}at&&at(l,Se,we),l==="focusout"&&(at=Se._wrapperState)&&at.controlled&&Se.type==="number"&&ve(Se,"number",Se.value)}switch(at=we?Mf(we):window,l){case"focusin":(CD(at)||at.contentEditable==="true")&&(Nf=at,GA=we,Sg=null);break;case"focusout":Sg=GA=Nf=null;break;case"mousedown":KA=!0;break;case"contextmenu":case"mouseup":case"dragend":KA=!1,OD(De,y,Te);break;case"selectionchange":if(e9)break;case"keydown":case"keyup":OD(De,y,Te)}var lt;if(zn)e:{switch(l){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Pf?bD(l,y)&&(pt="onCompositionEnd"):l==="keydown"&&y.keyCode===229&&(pt="onCompositionStart");pt&&(gh&&y.locale!=="ko"&&(Pf||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Pf&&(lt=wg()):($i=Te,Ef="value"in $i?$i.value:$i.textContent,Pf=!0)),at=R2(we,pt),0<at.length&&(pt=new bg(pt,l,null,y,Te),De.push({event:pt,listeners:at}),lt?pt.data=lt:(lt=ED(y),lt!==null&&(pt.data=lt)))),(lt=Wi?Hj(l,y):zj(l,y))&&(we=R2(we,"onBeforeInput"),0<we.length&&(Te=new bg("onBeforeInput","beforeinput",null,y,Te),De.push({event:Te,listeners:we}),Te.data=lt))}HD(De,c)})}function Dg(l,c,y){return{instance:l,listener:c,currentTarget:y}}function R2(l,c){for(var y=c+"Capture",x=[];l!==null;){var O=l,j=O.stateNode;O.tag===5&&j!==null&&(O=j,j=Mn(l,y),j!=null&&x.unshift(Dg(l,j,O)),j=Mn(l,c),j!=null&&x.push(Dg(l,j,O))),l=l.return}return x}function Lf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function $D(l,c,y,x,O){for(var j=c._reactName,K=[];y!==null&&y!==x;){var oe=y,ce=oe.alternate,we=oe.stateNode;if(ce!==null&&ce===x)break;oe.tag===5&&we!==null&&(oe=we,O?(ce=Mn(y,j),ce!=null&&K.unshift(Dg(y,ce,oe))):O||(ce=Mn(y,j),ce!=null&&K.push(Dg(y,ce,oe)))),y=y.return}K.length!==0&&l.push({event:c,listeners:K})}var i9=/\r\n?/g,s9=/\u0000|\uFFFD/g;function WD(l){return(typeof l=="string"?l:""+l).replace(i9,`
`).replace(s9,"")}function P2(l,c,y){if(c=WD(c),WD(l)!==c&&y)throw Error(t(425))}function N2(){}var eb=null,tb=null;function nb(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var rb=typeof setTimeout=="function"?setTimeout:void 0,o9=typeof clearTimeout=="function"?clearTimeout:void 0,GD=typeof Promise=="function"?Promise:void 0,a9=typeof queueMicrotask=="function"?queueMicrotask:typeof GD<"u"?function(l){return GD.resolve(null).then(l).catch(l9)}:rb;function l9(l){setTimeout(function(){throw l})}function ib(l,c){var y=c,x=0;do{var O=y.nextSibling;if(l.removeChild(y),O&&O.nodeType===8)if(y=O.data,y==="/$"){if(x===0){l.removeChild(O),io(c);return}x--}else y!=="$"&&y!=="$?"&&y!=="$!"||x++;y=O}while(y);io(c)}function mu(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function KD(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var y=l.data;if(y==="$"||y==="$!"||y==="$?"){if(c===0)return l;c--}else y==="/$"&&c++}l=l.previousSibling}return null}var Ff=Math.random().toString(36).slice(2),Uo="__reactFiber$"+Ff,kg="__reactProps$"+Ff,Ua="__reactContainer$"+Ff,sb="__reactEvents$"+Ff,u9="__reactListeners$"+Ff,c9="__reactHandles$"+Ff;function yh(l){var c=l[Uo];if(c)return c;for(var y=l.parentNode;y;){if(c=y[Ua]||y[Uo]){if(y=c.alternate,c.child!==null||y!==null&&y.child!==null)for(l=KD(l);l!==null;){if(y=l[Uo])return y;l=KD(l)}return c}l=y,y=l.parentNode}return null}function Rg(l){return l=l[Uo]||l[Ua],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Mf(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function O2(l){return l[kg]||null}var ob=[],Bf=-1;function gu(l){return{current:l}}function fn(l){0>Bf||(l.current=ob[Bf],ob[Bf]=null,Bf--)}function un(l,c){Bf++,ob[Bf]=l.current,l.current=c}var yu={},Gr=gu(yu),Ii=gu(!1),vh=yu;function jf(l,c){var y=l.type.contextTypes;if(!y)return yu;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var O={},j;for(j in y)O[j]=c[j];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=O),O}function Di(l){return l=l.childContextTypes,l!=null}function L2(){fn(Ii),fn(Gr)}function JD(l,c,y){if(Gr.current!==yu)throw Error(t(168));un(Gr,c),un(Ii,y)}function YD(l,c,y){var x=l.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return y;x=x.getChildContext();for(var O in x)if(!(O in c))throw Error(t(108,ne(l)||"Unknown",O));return J({},y,x)}function F2(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||yu,vh=Gr.current,un(Gr,l),un(Ii,Ii.current),!0}function XD(l,c,y){var x=l.stateNode;if(!x)throw Error(t(169));y?(l=YD(l,c,vh),x.__reactInternalMemoizedMergedChildContext=l,fn(Ii),fn(Gr),un(Gr,l)):fn(Ii),un(Ii,y)}var Va=null,M2=!1,ab=!1;function QD(l){Va===null?Va=[l]:Va.push(l)}function h9(l){M2=!0,QD(l)}function vu(){if(!ab&&Va!==null){ab=!0;var l=0,c=Lt;try{var y=Va;for(Lt=1;l<y.length;l++){var x=y[l];do x=x(!0);while(x!==null)}Va=null,M2=!1}catch(O){throw Va!==null&&(Va=Va.slice(l+1)),vf(uh,vu),O}finally{Lt=c,ab=!1}}return null}var qf=[],Uf=0,B2=null,j2=0,Ts=[],Is=0,wh=null,Ha=1,za="";function _h(l,c){qf[Uf++]=j2,qf[Uf++]=B2,B2=l,j2=c}function ZD(l,c,y){Ts[Is++]=Ha,Ts[Is++]=za,Ts[Is++]=wh,wh=l;var x=Ha;l=za;var O=32-oi(x)-1;x&=~(1<<O),y+=1;var j=32-oi(c)+O;if(30<j){var K=O-O%5;j=(x&(1<<K)-1).toString(32),x>>=K,O-=K,Ha=1<<32-oi(c)+O|y<<O|x,za=j+l}else Ha=1<<j|y<<O|x,za=l}function lb(l){l.return!==null&&(_h(l,1),ZD(l,1,0))}function ub(l){for(;l===B2;)B2=qf[--Uf],qf[Uf]=null,j2=qf[--Uf],qf[Uf]=null;for(;l===wh;)wh=Ts[--Is],Ts[Is]=null,za=Ts[--Is],Ts[Is]=null,Ha=Ts[--Is],Ts[Is]=null}var Gi=null,Ki=null,_n=!1,ao=null;function ek(l,c){var y=Ps(5,null,null,0);y.elementType="DELETED",y.stateNode=c,y.return=l,c=l.deletions,c===null?(l.deletions=[y],l.flags|=16):c.push(y)}function tk(l,c){switch(l.tag){case 5:var y=l.type;return c=c.nodeType!==1||y.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,Gi=l,Ki=mu(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,Gi=l,Ki=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(y=wh!==null?{id:Ha,overflow:za}:null,l.memoizedState={dehydrated:c,treeContext:y,retryLane:1073741824},y=Ps(18,null,null,0),y.stateNode=c,y.return=l,l.child=y,Gi=l,Ki=null,!0):!1;default:return!1}}function cb(l){return(l.mode&1)!==0&&(l.flags&128)===0}function hb(l){if(_n){var c=Ki;if(c){var y=c;if(!tk(l,c)){if(cb(l))throw Error(t(418));c=mu(y.nextSibling);var x=Gi;c&&tk(l,c)?ek(x,y):(l.flags=l.flags&-4097|2,_n=!1,Gi=l)}}else{if(cb(l))throw Error(t(418));l.flags=l.flags&-4097|2,_n=!1,Gi=l}}}function nk(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Gi=l}function q2(l){if(l!==Gi)return!1;if(!_n)return nk(l),_n=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!nb(l.type,l.memoizedProps)),c&&(c=Ki)){if(cb(l))throw rk(),Error(t(418));for(;c;)ek(l,c),c=mu(c.nextSibling)}if(nk(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var y=l.data;if(y==="/$"){if(c===0){Ki=mu(l.nextSibling);break e}c--}else y!=="$"&&y!=="$!"&&y!=="$?"||c++}l=l.nextSibling}Ki=null}}else Ki=Gi?mu(l.stateNode.nextSibling):null;return!0}function rk(){for(var l=Ki;l;)l=mu(l.nextSibling)}function Vf(){Ki=Gi=null,_n=!1}function db(l){ao===null?ao=[l]:ao.push(l)}var d9=S.ReactCurrentBatchConfig;function Pg(l,c,y){if(l=y.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var x=y.stateNode}if(!x)throw Error(t(147,l));var O=x,j=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===j?c.ref:(c=function(K){var oe=O.refs;K===null?delete oe[j]:oe[j]=K},c._stringRef=j,c)}if(typeof l!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,l))}return l}function U2(l,c){throw l=Object.prototype.toString.call(c),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function ik(l){var c=l._init;return c(l._payload)}function sk(l){function c(me,he){if(l){var ge=me.deletions;ge===null?(me.deletions=[he],me.flags|=16):ge.push(he)}}function y(me,he){if(!l)return null;for(;he!==null;)c(me,he),he=he.sibling;return null}function x(me,he){for(me=new Map;he!==null;)he.key!==null?me.set(he.key,he):me.set(he.index,he),he=he.sibling;return me}function O(me,he){return me=Su(me,he),me.index=0,me.sibling=null,me}function j(me,he,ge){return me.index=ge,l?(ge=me.alternate,ge!==null?(ge=ge.index,ge<he?(me.flags|=2,he):ge):(me.flags|=2,he)):(me.flags|=1048576,he)}function K(me){return l&&me.alternate===null&&(me.flags|=2),me}function oe(me,he,ge,Pe){return he===null||he.tag!==6?(he=rE(ge,me.mode,Pe),he.return=me,he):(he=O(he,ge),he.return=me,he)}function ce(me,he,ge,Pe){var et=ge.type;return et===k?Te(me,he,ge.props.children,Pe,ge.key):he!==null&&(he.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===re&&ik(et)===he.type)?(Pe=O(he,ge.props),Pe.ref=Pg(me,he,ge),Pe.return=me,Pe):(Pe=hw(ge.type,ge.key,ge.props,null,me.mode,Pe),Pe.ref=Pg(me,he,ge),Pe.return=me,Pe)}function we(me,he,ge,Pe){return he===null||he.tag!==4||he.stateNode.containerInfo!==ge.containerInfo||he.stateNode.implementation!==ge.implementation?(he=iE(ge,me.mode,Pe),he.return=me,he):(he=O(he,ge.children||[]),he.return=me,he)}function Te(me,he,ge,Pe,et){return he===null||he.tag!==7?(he=Ih(ge,me.mode,Pe,et),he.return=me,he):(he=O(he,ge),he.return=me,he)}function De(me,he,ge){if(typeof he=="string"&&he!==""||typeof he=="number")return he=rE(""+he,me.mode,ge),he.return=me,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case R:return ge=hw(he.type,he.key,he.props,null,me.mode,ge),ge.ref=Pg(me,null,he),ge.return=me,ge;case F:return he=iE(he,me.mode,ge),he.return=me,he;case re:var Pe=he._init;return De(me,Pe(he._payload),ge)}if(Ie(he)||Y(he))return he=Ih(he,me.mode,ge,null),he.return=me,he;U2(me,he)}return null}function Se(me,he,ge,Pe){var et=he!==null?he.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return et!==null?null:oe(me,he,""+ge,Pe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:return ge.key===et?ce(me,he,ge,Pe):null;case F:return ge.key===et?we(me,he,ge,Pe):null;case re:return et=ge._init,Se(me,he,et(ge._payload),Pe)}if(Ie(ge)||Y(ge))return et!==null?null:Te(me,he,ge,Pe,null);U2(me,ge)}return null}function je(me,he,ge,Pe,et){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return me=me.get(ge)||null,oe(he,me,""+Pe,et);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case R:return me=me.get(Pe.key===null?ge:Pe.key)||null,ce(he,me,Pe,et);case F:return me=me.get(Pe.key===null?ge:Pe.key)||null,we(he,me,Pe,et);case re:var at=Pe._init;return je(me,he,ge,at(Pe._payload),et)}if(Ie(Pe)||Y(Pe))return me=me.get(ge)||null,Te(he,me,Pe,et,null);U2(he,Pe)}return null}function Xe(me,he,ge,Pe){for(var et=null,at=null,lt=he,pt=he=0,vr=null;lt!==null&&pt<ge.length;pt++){lt.index>pt?(vr=lt,lt=null):vr=lt.sibling;var zt=Se(me,lt,ge[pt],Pe);if(zt===null){lt===null&&(lt=vr);break}l&&lt&&zt.alternate===null&&c(me,lt),he=j(zt,he,pt),at===null?et=zt:at.sibling=zt,at=zt,lt=vr}if(pt===ge.length)return y(me,lt),_n&&_h(me,pt),et;if(lt===null){for(;pt<ge.length;pt++)lt=De(me,ge[pt],Pe),lt!==null&&(he=j(lt,he,pt),at===null?et=lt:at.sibling=lt,at=lt);return _n&&_h(me,pt),et}for(lt=x(me,lt);pt<ge.length;pt++)vr=je(lt,me,pt,ge[pt],Pe),vr!==null&&(l&&vr.alternate!==null&&lt.delete(vr.key===null?pt:vr.key),he=j(vr,he,pt),at===null?et=vr:at.sibling=vr,at=vr);return l&&lt.forEach(function(Tu){return c(me,Tu)}),_n&&_h(me,pt),et}function Ze(me,he,ge,Pe){var et=Y(ge);if(typeof et!="function")throw Error(t(150));if(ge=et.call(ge),ge==null)throw Error(t(151));for(var at=et=null,lt=he,pt=he=0,vr=null,zt=ge.next();lt!==null&&!zt.done;pt++,zt=ge.next()){lt.index>pt?(vr=lt,lt=null):vr=lt.sibling;var Tu=Se(me,lt,zt.value,Pe);if(Tu===null){lt===null&&(lt=vr);break}l&&lt&&Tu.alternate===null&&c(me,lt),he=j(Tu,he,pt),at===null?et=Tu:at.sibling=Tu,at=Tu,lt=vr}if(zt.done)return y(me,lt),_n&&_h(me,pt),et;if(lt===null){for(;!zt.done;pt++,zt=ge.next())zt=De(me,zt.value,Pe),zt!==null&&(he=j(zt,he,pt),at===null?et=zt:at.sibling=zt,at=zt);return _n&&_h(me,pt),et}for(lt=x(me,lt);!zt.done;pt++,zt=ge.next())zt=je(lt,me,pt,zt.value,Pe),zt!==null&&(l&&zt.alternate!==null&&lt.delete(zt.key===null?pt:zt.key),he=j(zt,he,pt),at===null?et=zt:at.sibling=zt,at=zt);return l&&lt.forEach(function($9){return c(me,$9)}),_n&&_h(me,pt),et}function Bn(me,he,ge,Pe){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:e:{for(var et=ge.key,at=he;at!==null;){if(at.key===et){if(et=ge.type,et===k){if(at.tag===7){y(me,at.sibling),he=O(at,ge.props.children),he.return=me,me=he;break e}}else if(at.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===re&&ik(et)===at.type){y(me,at.sibling),he=O(at,ge.props),he.ref=Pg(me,at,ge),he.return=me,me=he;break e}y(me,at);break}else c(me,at);at=at.sibling}ge.type===k?(he=Ih(ge.props.children,me.mode,Pe,ge.key),he.return=me,me=he):(Pe=hw(ge.type,ge.key,ge.props,null,me.mode,Pe),Pe.ref=Pg(me,he,ge),Pe.return=me,me=Pe)}return K(me);case F:e:{for(at=ge.key;he!==null;){if(he.key===at)if(he.tag===4&&he.stateNode.containerInfo===ge.containerInfo&&he.stateNode.implementation===ge.implementation){y(me,he.sibling),he=O(he,ge.children||[]),he.return=me,me=he;break e}else{y(me,he);break}else c(me,he);he=he.sibling}he=iE(ge,me.mode,Pe),he.return=me,me=he}return K(me);case re:return at=ge._init,Bn(me,he,at(ge._payload),Pe)}if(Ie(ge))return Xe(me,he,ge,Pe);if(Y(ge))return Ze(me,he,ge,Pe);U2(me,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,he!==null&&he.tag===6?(y(me,he.sibling),he=O(he,ge),he.return=me,me=he):(y(me,he),he=rE(ge,me.mode,Pe),he.return=me,me=he),K(me)):y(me,he)}return Bn}var Hf=sk(!0),ok=sk(!1),V2=gu(null),H2=null,zf=null,fb=null;function pb(){fb=zf=H2=null}function mb(l){var c=V2.current;fn(V2),l._currentValue=c}function gb(l,c,y){for(;l!==null;){var x=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),l===y)break;l=l.return}}function $f(l,c){H2=l,fb=zf=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(ki=!0),l.firstContext=null)}function Ds(l){var c=l._currentValue;if(fb!==l)if(l={context:l,memoizedValue:c,next:null},zf===null){if(H2===null)throw Error(t(308));zf=l,H2.dependencies={lanes:0,firstContext:l}}else zf=zf.next=l;return c}var Ah=null;function yb(l){Ah===null?Ah=[l]:Ah.push(l)}function ak(l,c,y,x){var O=c.interleaved;return O===null?(y.next=y,yb(c)):(y.next=O.next,O.next=y),c.interleaved=y,$a(l,x)}function $a(l,c){l.lanes|=c;var y=l.alternate;for(y!==null&&(y.lanes|=c),y=l,l=l.return;l!==null;)l.childLanes|=c,y=l.alternate,y!==null&&(y.childLanes|=c),y=l,l=l.return;return y.tag===3?y.stateNode:null}var wu=!1;function vb(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lk(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Wa(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function _u(l,c,y){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(Ut&2)!==0){var O=x.pending;return O===null?c.next=c:(c.next=O.next,O.next=c),x.pending=c,$a(l,y)}return O=x.interleaved,O===null?(c.next=c,yb(x)):(c.next=O.next,O.next=c),x.interleaved=c,$a(l,y)}function z2(l,c,y){if(c=c.updateQueue,c!==null&&(c=c.shared,(y&4194240)!==0)){var x=c.lanes;x&=l.pendingLanes,y|=x,c.lanes=y,uu(l,y)}}function uk(l,c){var y=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,y===x)){var O=null,j=null;if(y=y.firstBaseUpdate,y!==null){do{var K={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};j===null?O=j=K:j=j.next=K,y=y.next}while(y!==null);j===null?O=j=c:j=j.next=c}else O=j=c;y={baseState:x.baseState,firstBaseUpdate:O,lastBaseUpdate:j,shared:x.shared,effects:x.effects},l.updateQueue=y;return}l=y.lastBaseUpdate,l===null?y.firstBaseUpdate=c:l.next=c,y.lastBaseUpdate=c}function $2(l,c,y,x){var O=l.updateQueue;wu=!1;var j=O.firstBaseUpdate,K=O.lastBaseUpdate,oe=O.shared.pending;if(oe!==null){O.shared.pending=null;var ce=oe,we=ce.next;ce.next=null,K===null?j=we:K.next=we,K=ce;var Te=l.alternate;Te!==null&&(Te=Te.updateQueue,oe=Te.lastBaseUpdate,oe!==K&&(oe===null?Te.firstBaseUpdate=we:oe.next=we,Te.lastBaseUpdate=ce))}if(j!==null){var De=O.baseState;K=0,Te=we=ce=null,oe=j;do{var Se=oe.lane,je=oe.eventTime;if((x&Se)===Se){Te!==null&&(Te=Te.next={eventTime:je,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var Xe=l,Ze=oe;switch(Se=c,je=y,Ze.tag){case 1:if(Xe=Ze.payload,typeof Xe=="function"){De=Xe.call(je,De,Se);break e}De=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Ze.payload,Se=typeof Xe=="function"?Xe.call(je,De,Se):Xe,Se==null)break e;De=J({},De,Se);break e;case 2:wu=!0}}oe.callback!==null&&oe.lane!==0&&(l.flags|=64,Se=O.effects,Se===null?O.effects=[oe]:Se.push(oe))}else je={eventTime:je,lane:Se,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Te===null?(we=Te=je,ce=De):Te=Te.next=je,K|=Se;if(oe=oe.next,oe===null){if(oe=O.shared.pending,oe===null)break;Se=oe,oe=Se.next,Se.next=null,O.lastBaseUpdate=Se,O.shared.pending=null}}while(!0);if(Te===null&&(ce=De),O.baseState=ce,O.firstBaseUpdate=we,O.lastBaseUpdate=Te,c=O.shared.interleaved,c!==null){O=c;do K|=O.lane,O=O.next;while(O!==c)}else j===null&&(O.shared.lanes=0);Ch|=K,l.lanes=K,l.memoizedState=De}}function ck(l,c,y){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var x=l[c],O=x.callback;if(O!==null){if(x.callback=null,x=y,typeof O!="function")throw Error(t(191,O));O.call(x)}}}var Ng={},Vo=gu(Ng),Og=gu(Ng),Lg=gu(Ng);function bh(l){if(l===Ng)throw Error(t(174));return l}function wb(l,c){switch(un(Lg,c),un(Og,l),un(Vo,Ng),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ft(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=ft(c,l)}fn(Vo),un(Vo,c)}function Wf(){fn(Vo),fn(Og),fn(Lg)}function hk(l){bh(Lg.current);var c=bh(Vo.current),y=ft(c,l.type);c!==y&&(un(Og,l),un(Vo,y))}function _b(l){Og.current===l&&(fn(Vo),fn(Og))}var Sn=gu(0);function W2(l){for(var c=l;c!==null;){if(c.tag===13){var y=c.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ab=[];function bb(){for(var l=0;l<Ab.length;l++)Ab[l]._workInProgressVersionPrimary=null;Ab.length=0}var G2=S.ReactCurrentDispatcher,Eb=S.ReactCurrentBatchConfig,Eh=0,Tn=null,nr=null,gr=null,K2=!1,Fg=!1,Mg=0,f9=0;function Kr(){throw Error(t(321))}function Cb(l,c){if(c===null)return!1;for(var y=0;y<c.length&&y<l.length;y++)if(!oo(l[y],c[y]))return!1;return!0}function xb(l,c,y,x,O,j){if(Eh=j,Tn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,G2.current=l===null||l.memoizedState===null?y9:v9,l=y(x,O),Fg){j=0;do{if(Fg=!1,Mg=0,25<=j)throw Error(t(301));j+=1,gr=nr=null,c.updateQueue=null,G2.current=w9,l=y(x,O)}while(Fg)}if(G2.current=X2,c=nr!==null&&nr.next!==null,Eh=0,gr=nr=Tn=null,K2=!1,c)throw Error(t(300));return l}function Sb(){var l=Mg!==0;return Mg=0,l}function Ho(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Tn.memoizedState=gr=l:gr=gr.next=l,gr}function ks(){if(nr===null){var l=Tn.alternate;l=l!==null?l.memoizedState:null}else l=nr.next;var c=gr===null?Tn.memoizedState:gr.next;if(c!==null)gr=c,nr=l;else{if(l===null)throw Error(t(310));nr=l,l={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},gr===null?Tn.memoizedState=gr=l:gr=gr.next=l}return gr}function Bg(l,c){return typeof c=="function"?c(l):c}function Tb(l){var c=ks(),y=c.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=l;var x=nr,O=x.baseQueue,j=y.pending;if(j!==null){if(O!==null){var K=O.next;O.next=j.next,j.next=K}x.baseQueue=O=j,y.pending=null}if(O!==null){j=O.next,x=x.baseState;var oe=K=null,ce=null,we=j;do{var Te=we.lane;if((Eh&Te)===Te)ce!==null&&(ce=ce.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),x=we.hasEagerState?we.eagerState:l(x,we.action);else{var De={lane:Te,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};ce===null?(oe=ce=De,K=x):ce=ce.next=De,Tn.lanes|=Te,Ch|=Te}we=we.next}while(we!==null&&we!==j);ce===null?K=x:ce.next=oe,oo(x,c.memoizedState)||(ki=!0),c.memoizedState=x,c.baseState=K,c.baseQueue=ce,y.lastRenderedState=x}if(l=y.interleaved,l!==null){O=l;do j=O.lane,Tn.lanes|=j,Ch|=j,O=O.next;while(O!==l)}else O===null&&(y.lanes=0);return[c.memoizedState,y.dispatch]}function Ib(l){var c=ks(),y=c.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=l;var x=y.dispatch,O=y.pending,j=c.memoizedState;if(O!==null){y.pending=null;var K=O=O.next;do j=l(j,K.action),K=K.next;while(K!==O);oo(j,c.memoizedState)||(ki=!0),c.memoizedState=j,c.baseQueue===null&&(c.baseState=j),y.lastRenderedState=j}return[j,x]}function dk(){}function fk(l,c){var y=Tn,x=ks(),O=c(),j=!oo(x.memoizedState,O);if(j&&(x.memoizedState=O,ki=!0),x=x.queue,Db(gk.bind(null,y,x,l),[l]),x.getSnapshot!==c||j||gr!==null&&gr.memoizedState.tag&1){if(y.flags|=2048,jg(9,mk.bind(null,y,x,O,c),void 0,null),yr===null)throw Error(t(349));(Eh&30)!==0||pk(y,c,O)}return O}function pk(l,c,y){l.flags|=16384,l={getSnapshot:c,value:y},c=Tn.updateQueue,c===null?(c={lastEffect:null,stores:null},Tn.updateQueue=c,c.stores=[l]):(y=c.stores,y===null?c.stores=[l]:y.push(l))}function mk(l,c,y,x){c.value=y,c.getSnapshot=x,yk(c)&&vk(l)}function gk(l,c,y){return y(function(){yk(c)&&vk(l)})}function yk(l){var c=l.getSnapshot;l=l.value;try{var y=c();return!oo(l,y)}catch{return!0}}function vk(l){var c=$a(l,1);c!==null&&ho(c,l,1,-1)}function wk(l){var c=Ho();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:l},c.queue=l,l=l.dispatch=g9.bind(null,Tn,l),[c.memoizedState,l]}function jg(l,c,y,x){return l={tag:l,create:c,destroy:y,deps:x,next:null},c=Tn.updateQueue,c===null?(c={lastEffect:null,stores:null},Tn.updateQueue=c,c.lastEffect=l.next=l):(y=c.lastEffect,y===null?c.lastEffect=l.next=l:(x=y.next,y.next=l,l.next=x,c.lastEffect=l)),l}function _k(){return ks().memoizedState}function J2(l,c,y,x){var O=Ho();Tn.flags|=l,O.memoizedState=jg(1|c,y,void 0,x===void 0?null:x)}function Y2(l,c,y,x){var O=ks();x=x===void 0?null:x;var j=void 0;if(nr!==null){var K=nr.memoizedState;if(j=K.destroy,x!==null&&Cb(x,K.deps)){O.memoizedState=jg(c,y,j,x);return}}Tn.flags|=l,O.memoizedState=jg(1|c,y,j,x)}function Ak(l,c){return J2(8390656,8,l,c)}function Db(l,c){return Y2(2048,8,l,c)}function bk(l,c){return Y2(4,2,l,c)}function Ek(l,c){return Y2(4,4,l,c)}function Ck(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function xk(l,c,y){return y=y!=null?y.concat([l]):null,Y2(4,4,Ck.bind(null,c,l),y)}function kb(){}function Sk(l,c){var y=ks();c=c===void 0?null:c;var x=y.memoizedState;return x!==null&&c!==null&&Cb(c,x[1])?x[0]:(y.memoizedState=[l,c],l)}function Tk(l,c){var y=ks();c=c===void 0?null:c;var x=y.memoizedState;return x!==null&&c!==null&&Cb(c,x[1])?x[0]:(l=l(),y.memoizedState=[l,c],l)}function Ik(l,c,y){return(Eh&21)===0?(l.baseState&&(l.baseState=!1,ki=!0),l.memoizedState=y):(oo(y,c)||(y=dh(),Tn.lanes|=y,Ch|=y,l.baseState=!0),c)}function p9(l,c){var y=Lt;Lt=y!==0&&4>y?y:4,l(!0);var x=Eb.transition;Eb.transition={};try{l(!1),c()}finally{Lt=y,Eb.transition=x}}function Dk(){return ks().memoizedState}function m9(l,c,y){var x=Cu(l);if(y={lane:x,action:y,hasEagerState:!1,eagerState:null,next:null},kk(l))Rk(c,y);else if(y=ak(l,c,y,x),y!==null){var O=ui();ho(y,l,x,O),Pk(y,c,x)}}function g9(l,c,y){var x=Cu(l),O={lane:x,action:y,hasEagerState:!1,eagerState:null,next:null};if(kk(l))Rk(c,O);else{var j=l.alternate;if(l.lanes===0&&(j===null||j.lanes===0)&&(j=c.lastRenderedReducer,j!==null))try{var K=c.lastRenderedState,oe=j(K,y);if(O.hasEagerState=!0,O.eagerState=oe,oo(oe,K)){var ce=c.interleaved;ce===null?(O.next=O,yb(c)):(O.next=ce.next,ce.next=O),c.interleaved=O;return}}catch{}finally{}y=ak(l,c,O,x),y!==null&&(O=ui(),ho(y,l,x,O),Pk(y,c,x))}}function kk(l){var c=l.alternate;return l===Tn||c!==null&&c===Tn}function Rk(l,c){Fg=K2=!0;var y=l.pending;y===null?c.next=c:(c.next=y.next,y.next=c),l.pending=c}function Pk(l,c,y){if((y&4194240)!==0){var x=c.lanes;x&=l.pendingLanes,y|=x,c.lanes=y,uu(l,y)}}var X2={readContext:Ds,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},y9={readContext:Ds,useCallback:function(l,c){return Ho().memoizedState=[l,c===void 0?null:c],l},useContext:Ds,useEffect:Ak,useImperativeHandle:function(l,c,y){return y=y!=null?y.concat([l]):null,J2(4194308,4,Ck.bind(null,c,l),y)},useLayoutEffect:function(l,c){return J2(4194308,4,l,c)},useInsertionEffect:function(l,c){return J2(4,2,l,c)},useMemo:function(l,c){var y=Ho();return c=c===void 0?null:c,l=l(),y.memoizedState=[l,c],l},useReducer:function(l,c,y){var x=Ho();return c=y!==void 0?y(c):c,x.memoizedState=x.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},x.queue=l,l=l.dispatch=m9.bind(null,Tn,l),[x.memoizedState,l]},useRef:function(l){var c=Ho();return l={current:l},c.memoizedState=l},useState:wk,useDebugValue:kb,useDeferredValue:function(l){return Ho().memoizedState=l},useTransition:function(){var l=wk(!1),c=l[0];return l=p9.bind(null,l[1]),Ho().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,y){var x=Tn,O=Ho();if(_n){if(y===void 0)throw Error(t(407));y=y()}else{if(y=c(),yr===null)throw Error(t(349));(Eh&30)!==0||pk(x,c,y)}O.memoizedState=y;var j={value:y,getSnapshot:c};return O.queue=j,Ak(gk.bind(null,x,j,l),[l]),x.flags|=2048,jg(9,mk.bind(null,x,j,y,c),void 0,null),y},useId:function(){var l=Ho(),c=yr.identifierPrefix;if(_n){var y=za,x=Ha;y=(x&~(1<<32-oi(x)-1)).toString(32)+y,c=":"+c+"R"+y,y=Mg++,0<y&&(c+="H"+y.toString(32)),c+=":"}else y=f9++,c=":"+c+"r"+y.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},v9={readContext:Ds,useCallback:Sk,useContext:Ds,useEffect:Db,useImperativeHandle:xk,useInsertionEffect:bk,useLayoutEffect:Ek,useMemo:Tk,useReducer:Tb,useRef:_k,useState:function(){return Tb(Bg)},useDebugValue:kb,useDeferredValue:function(l){var c=ks();return Ik(c,nr.memoizedState,l)},useTransition:function(){var l=Tb(Bg)[0],c=ks().memoizedState;return[l,c]},useMutableSource:dk,useSyncExternalStore:fk,useId:Dk,unstable_isNewReconciler:!1},w9={readContext:Ds,useCallback:Sk,useContext:Ds,useEffect:Db,useImperativeHandle:xk,useInsertionEffect:bk,useLayoutEffect:Ek,useMemo:Tk,useReducer:Ib,useRef:_k,useState:function(){return Ib(Bg)},useDebugValue:kb,useDeferredValue:function(l){var c=ks();return nr===null?c.memoizedState=l:Ik(c,nr.memoizedState,l)},useTransition:function(){var l=Ib(Bg)[0],c=ks().memoizedState;return[l,c]},useMutableSource:dk,useSyncExternalStore:fk,useId:Dk,unstable_isNewReconciler:!1};function lo(l,c){if(l&&l.defaultProps){c=J({},c),l=l.defaultProps;for(var y in l)c[y]===void 0&&(c[y]=l[y]);return c}return c}function Rb(l,c,y,x){c=l.memoizedState,y=y(x,c),y=y==null?c:J({},c,y),l.memoizedState=y,l.lanes===0&&(l.updateQueue.baseState=y)}var Q2={isMounted:function(l){return(l=l._reactInternals)?Zs(l)===l:!1},enqueueSetState:function(l,c,y){l=l._reactInternals;var x=ui(),O=Cu(l),j=Wa(x,O);j.payload=c,y!=null&&(j.callback=y),c=_u(l,j,O),c!==null&&(ho(c,l,O,x),z2(c,l,O))},enqueueReplaceState:function(l,c,y){l=l._reactInternals;var x=ui(),O=Cu(l),j=Wa(x,O);j.tag=1,j.payload=c,y!=null&&(j.callback=y),c=_u(l,j,O),c!==null&&(ho(c,l,O,x),z2(c,l,O))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var y=ui(),x=Cu(l),O=Wa(y,x);O.tag=2,c!=null&&(O.callback=c),c=_u(l,O,x),c!==null&&(ho(c,l,x,y),z2(c,l,x))}};function Nk(l,c,y,x,O,j,K){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,j,K):c.prototype&&c.prototype.isPureReactComponent?!xg(y,x)||!xg(O,j):!0}function Ok(l,c,y){var x=!1,O=yu,j=c.contextType;return typeof j=="object"&&j!==null?j=Ds(j):(O=Di(c)?vh:Gr.current,x=c.contextTypes,j=(x=x!=null)?jf(l,O):yu),c=new c(y,j),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Q2,l.stateNode=c,c._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=O,l.__reactInternalMemoizedMaskedChildContext=j),c}function Lk(l,c,y,x){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(y,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(y,x),c.state!==l&&Q2.enqueueReplaceState(c,c.state,null)}function Pb(l,c,y,x){var O=l.stateNode;O.props=y,O.state=l.memoizedState,O.refs={},vb(l);var j=c.contextType;typeof j=="object"&&j!==null?O.context=Ds(j):(j=Di(c)?vh:Gr.current,O.context=jf(l,j)),O.state=l.memoizedState,j=c.getDerivedStateFromProps,typeof j=="function"&&(Rb(l,c,j,y),O.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(c=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),c!==O.state&&Q2.enqueueReplaceState(O,O.state,null),$2(l,y,O,x),O.state=l.memoizedState),typeof O.componentDidMount=="function"&&(l.flags|=4194308)}function Gf(l,c){try{var y="",x=c;do y+=se(x),x=x.return;while(x);var O=y}catch(j){O=`
Error generating stack: `+j.message+`
`+j.stack}return{value:l,source:c,stack:O,digest:null}}function Nb(l,c,y){return{value:l,source:null,stack:y??null,digest:c??null}}function Ob(l,c){try{console.error(c.value)}catch(y){setTimeout(function(){throw y})}}var _9=typeof WeakMap=="function"?WeakMap:Map;function Fk(l,c,y){y=Wa(-1,y),y.tag=3,y.payload={element:null};var x=c.value;return y.callback=function(){sw||(sw=!0,Jb=x),Ob(l,c)},y}function Mk(l,c,y){y=Wa(-1,y),y.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var O=c.value;y.payload=function(){return x(O)},y.callback=function(){Ob(l,c)}}var j=l.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(y.callback=function(){Ob(l,c),typeof x!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})}),y}function Bk(l,c,y){var x=l.pingCache;if(x===null){x=l.pingCache=new _9;var O=new Set;x.set(c,O)}else O=x.get(c),O===void 0&&(O=new Set,x.set(c,O));O.has(y)||(O.add(y),l=O9.bind(null,l,c,y),c.then(l,l))}function jk(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function qk(l,c,y,x,O){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(c=Wa(-1,1),c.tag=2,_u(y,c,1))),y.lanes|=1),l):(l.flags|=65536,l.lanes=O,l)}var A9=S.ReactCurrentOwner,ki=!1;function li(l,c,y,x){c.child=l===null?ok(c,null,y,x):Hf(c,l.child,y,x)}function Uk(l,c,y,x,O){y=y.render;var j=c.ref;return $f(c,O),x=xb(l,c,y,x,j,O),y=Sb(),l!==null&&!ki?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~O,Ga(l,c,O)):(_n&&y&&lb(c),c.flags|=1,li(l,c,x,O),c.child)}function Vk(l,c,y,x,O){if(l===null){var j=y.type;return typeof j=="function"&&!nE(j)&&j.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(c.tag=15,c.type=j,Hk(l,c,j,x,O)):(l=hw(y.type,null,x,c,c.mode,O),l.ref=c.ref,l.return=c,c.child=l)}if(j=l.child,(l.lanes&O)===0){var K=j.memoizedProps;if(y=y.compare,y=y!==null?y:xg,y(K,x)&&l.ref===c.ref)return Ga(l,c,O)}return c.flags|=1,l=Su(j,x),l.ref=c.ref,l.return=c,c.child=l}function Hk(l,c,y,x,O){if(l!==null){var j=l.memoizedProps;if(xg(j,x)&&l.ref===c.ref)if(ki=!1,c.pendingProps=x=j,(l.lanes&O)!==0)(l.flags&131072)!==0&&(ki=!0);else return c.lanes=l.lanes,Ga(l,c,O)}return Lb(l,c,y,x,O)}function zk(l,c,y){var x=c.pendingProps,O=x.children,j=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Jf,Ji),Ji|=y;else{if((y&1073741824)===0)return l=j!==null?j.baseLanes|y:y,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,un(Jf,Ji),Ji|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=j!==null?j.baseLanes:y,un(Jf,Ji),Ji|=x}else j!==null?(x=j.baseLanes|y,c.memoizedState=null):x=y,un(Jf,Ji),Ji|=x;return li(l,c,O,y),c.child}function $k(l,c){var y=c.ref;(l===null&&y!==null||l!==null&&l.ref!==y)&&(c.flags|=512,c.flags|=2097152)}function Lb(l,c,y,x,O){var j=Di(y)?vh:Gr.current;return j=jf(c,j),$f(c,O),y=xb(l,c,y,x,j,O),x=Sb(),l!==null&&!ki?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~O,Ga(l,c,O)):(_n&&x&&lb(c),c.flags|=1,li(l,c,y,O),c.child)}function Wk(l,c,y,x,O){if(Di(y)){var j=!0;F2(c)}else j=!1;if($f(c,O),c.stateNode===null)ew(l,c),Ok(c,y,x),Pb(c,y,x,O),x=!0;else if(l===null){var K=c.stateNode,oe=c.memoizedProps;K.props=oe;var ce=K.context,we=y.contextType;typeof we=="object"&&we!==null?we=Ds(we):(we=Di(y)?vh:Gr.current,we=jf(c,we));var Te=y.getDerivedStateFromProps,De=typeof Te=="function"||typeof K.getSnapshotBeforeUpdate=="function";De||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(oe!==x||ce!==we)&&Lk(c,K,x,we),wu=!1;var Se=c.memoizedState;K.state=Se,$2(c,x,K,O),ce=c.memoizedState,oe!==x||Se!==ce||Ii.current||wu?(typeof Te=="function"&&(Rb(c,y,Te,x),ce=c.memoizedState),(oe=wu||Nk(c,y,oe,x,Se,ce,we))?(De||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(c.flags|=4194308)):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ce),K.props=x,K.state=ce,K.context=we,x=oe):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{K=c.stateNode,lk(l,c),oe=c.memoizedProps,we=c.type===c.elementType?oe:lo(c.type,oe),K.props=we,De=c.pendingProps,Se=K.context,ce=y.contextType,typeof ce=="object"&&ce!==null?ce=Ds(ce):(ce=Di(y)?vh:Gr.current,ce=jf(c,ce));var je=y.getDerivedStateFromProps;(Te=typeof je=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(oe!==De||Se!==ce)&&Lk(c,K,x,ce),wu=!1,Se=c.memoizedState,K.state=Se,$2(c,x,K,O);var Xe=c.memoizedState;oe!==De||Se!==Xe||Ii.current||wu?(typeof je=="function"&&(Rb(c,y,je,x),Xe=c.memoizedState),(we=wu||Nk(c,y,we,x,Se,Xe,ce)||!1)?(Te||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(x,Xe,ce),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(x,Xe,ce)),typeof K.componentDidUpdate=="function"&&(c.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof K.componentDidUpdate!="function"||oe===l.memoizedProps&&Se===l.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&Se===l.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Xe),K.props=x,K.state=Xe,K.context=ce,x=we):(typeof K.componentDidUpdate!="function"||oe===l.memoizedProps&&Se===l.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&Se===l.memoizedState||(c.flags|=1024),x=!1)}return Fb(l,c,y,x,j,O)}function Fb(l,c,y,x,O,j){$k(l,c);var K=(c.flags&128)!==0;if(!x&&!K)return O&&XD(c,y,!1),Ga(l,c,j);x=c.stateNode,A9.current=c;var oe=K&&typeof y.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,l!==null&&K?(c.child=Hf(c,l.child,null,j),c.child=Hf(c,null,oe,j)):li(l,c,oe,j),c.memoizedState=x.state,O&&XD(c,y,!0),c.child}function Gk(l){var c=l.stateNode;c.pendingContext?JD(l,c.pendingContext,c.pendingContext!==c.context):c.context&&JD(l,c.context,!1),wb(l,c.containerInfo)}function Kk(l,c,y,x,O){return Vf(),db(O),c.flags|=256,li(l,c,y,x),c.child}var Mb={dehydrated:null,treeContext:null,retryLane:0};function Bb(l){return{baseLanes:l,cachePool:null,transitions:null}}function Jk(l,c,y){var x=c.pendingProps,O=Sn.current,j=!1,K=(c.flags&128)!==0,oe;if((oe=K)||(oe=l!==null&&l.memoizedState===null?!1:(O&2)!==0),oe?(j=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(O|=1),un(Sn,O&1),l===null)return hb(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(K=x.children,l=x.fallback,j?(x=c.mode,j=c.child,K={mode:"hidden",children:K},(x&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=K):j=dw(K,x,0,null),l=Ih(l,x,y,null),j.return=c,l.return=c,j.sibling=l,c.child=j,c.child.memoizedState=Bb(y),c.memoizedState=Mb,l):jb(c,K));if(O=l.memoizedState,O!==null&&(oe=O.dehydrated,oe!==null))return b9(l,c,K,x,oe,O,y);if(j){j=x.fallback,K=c.mode,O=l.child,oe=O.sibling;var ce={mode:"hidden",children:x.children};return(K&1)===0&&c.child!==O?(x=c.child,x.childLanes=0,x.pendingProps=ce,c.deletions=null):(x=Su(O,ce),x.subtreeFlags=O.subtreeFlags&14680064),oe!==null?j=Su(oe,j):(j=Ih(j,K,y,null),j.flags|=2),j.return=c,x.return=c,x.sibling=j,c.child=x,x=j,j=c.child,K=l.child.memoizedState,K=K===null?Bb(y):{baseLanes:K.baseLanes|y,cachePool:null,transitions:K.transitions},j.memoizedState=K,j.childLanes=l.childLanes&~y,c.memoizedState=Mb,x}return j=l.child,l=j.sibling,x=Su(j,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=y),x.return=c,x.sibling=null,l!==null&&(y=c.deletions,y===null?(c.deletions=[l],c.flags|=16):y.push(l)),c.child=x,c.memoizedState=null,x}function jb(l,c){return c=dw({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function Z2(l,c,y,x){return x!==null&&db(x),Hf(c,l.child,null,y),l=jb(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function b9(l,c,y,x,O,j,K){if(y)return c.flags&256?(c.flags&=-257,x=Nb(Error(t(422))),Z2(l,c,K,x)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(j=x.fallback,O=c.mode,x=dw({mode:"visible",children:x.children},O,0,null),j=Ih(j,O,K,null),j.flags|=2,x.return=c,j.return=c,x.sibling=j,c.child=x,(c.mode&1)!==0&&Hf(c,l.child,null,K),c.child.memoizedState=Bb(K),c.memoizedState=Mb,j);if((c.mode&1)===0)return Z2(l,c,K,null);if(O.data==="$!"){if(x=O.nextSibling&&O.nextSibling.dataset,x)var oe=x.dgst;return x=oe,j=Error(t(419)),x=Nb(j,x,void 0),Z2(l,c,K,x)}if(oe=(K&l.childLanes)!==0,ki||oe){if(x=yr,x!==null){switch(K&-K){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(x.suspendedLanes|K))!==0?0:O,O!==0&&O!==j.retryLane&&(j.retryLane=O,$a(l,O),ho(x,l,O,-1))}return tE(),x=Nb(Error(t(421))),Z2(l,c,K,x)}return O.data==="$?"?(c.flags|=128,c.child=l.child,c=L9.bind(null,l),O._reactRetry=c,null):(l=j.treeContext,Ki=mu(O.nextSibling),Gi=c,_n=!0,ao=null,l!==null&&(Ts[Is++]=Ha,Ts[Is++]=za,Ts[Is++]=wh,Ha=l.id,za=l.overflow,wh=c),c=jb(c,x.children),c.flags|=4096,c)}function Yk(l,c,y){l.lanes|=c;var x=l.alternate;x!==null&&(x.lanes|=c),gb(l.return,c,y)}function qb(l,c,y,x,O){var j=l.memoizedState;j===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:y,tailMode:O}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=x,j.tail=y,j.tailMode=O)}function Xk(l,c,y){var x=c.pendingProps,O=x.revealOrder,j=x.tail;if(li(l,c,x.children,y),x=Sn.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Yk(l,y,c);else if(l.tag===19)Yk(l,y,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(un(Sn,x),(c.mode&1)===0)c.memoizedState=null;else switch(O){case"forwards":for(y=c.child,O=null;y!==null;)l=y.alternate,l!==null&&W2(l)===null&&(O=y),y=y.sibling;y=O,y===null?(O=c.child,c.child=null):(O=y.sibling,y.sibling=null),qb(c,!1,O,y,j);break;case"backwards":for(y=null,O=c.child,c.child=null;O!==null;){if(l=O.alternate,l!==null&&W2(l)===null){c.child=O;break}l=O.sibling,O.sibling=y,y=O,O=l}qb(c,!0,y,null,j);break;case"together":qb(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ew(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Ga(l,c,y){if(l!==null&&(c.dependencies=l.dependencies),Ch|=c.lanes,(y&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(t(153));if(c.child!==null){for(l=c.child,y=Su(l,l.pendingProps),c.child=y,y.return=c;l.sibling!==null;)l=l.sibling,y=y.sibling=Su(l,l.pendingProps),y.return=c;y.sibling=null}return c.child}function E9(l,c,y){switch(c.tag){case 3:Gk(c),Vf();break;case 5:hk(c);break;case 1:Di(c.type)&&F2(c);break;case 4:wb(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,O=c.memoizedProps.value;un(V2,x._currentValue),x._currentValue=O;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(un(Sn,Sn.current&1),c.flags|=128,null):(y&c.child.childLanes)!==0?Jk(l,c,y):(un(Sn,Sn.current&1),l=Ga(l,c,y),l!==null?l.sibling:null);un(Sn,Sn.current&1);break;case 19:if(x=(y&c.childLanes)!==0,(l.flags&128)!==0){if(x)return Xk(l,c,y);c.flags|=128}if(O=c.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),un(Sn,Sn.current),x)break;return null;case 22:case 23:return c.lanes=0,zk(l,c,y)}return Ga(l,c,y)}var Qk,Ub,Zk,eR;Qk=function(l,c){for(var y=c.child;y!==null;){if(y.tag===5||y.tag===6)l.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===c)break;for(;y.sibling===null;){if(y.return===null||y.return===c)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Ub=function(){},Zk=function(l,c,y,x){var O=l.memoizedProps;if(O!==x){l=c.stateNode,bh(Vo.current);var j=null;switch(y){case"input":O=Fe(l,O),x=Fe(l,x),j=[];break;case"select":O=J({},O,{value:void 0}),x=J({},x,{value:void 0}),j=[];break;case"textarea":O=Ae(l,O),x=Ae(l,x),j=[];break;default:typeof O.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=N2)}og(y,x);var K;y=null;for(we in O)if(!x.hasOwnProperty(we)&&O.hasOwnProperty(we)&&O[we]!=null)if(we==="style"){var oe=O[we];for(K in oe)oe.hasOwnProperty(K)&&(y||(y={}),y[K]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(r.hasOwnProperty(we)?j||(j=[]):(j=j||[]).push(we,null));for(we in x){var ce=x[we];if(oe=O!=null?O[we]:void 0,x.hasOwnProperty(we)&&ce!==oe&&(ce!=null||oe!=null))if(we==="style")if(oe){for(K in oe)!oe.hasOwnProperty(K)||ce&&ce.hasOwnProperty(K)||(y||(y={}),y[K]="");for(K in ce)ce.hasOwnProperty(K)&&oe[K]!==ce[K]&&(y||(y={}),y[K]=ce[K])}else y||(j||(j=[]),j.push(we,y)),y=ce;else we==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,oe=oe?oe.__html:void 0,ce!=null&&oe!==ce&&(j=j||[]).push(we,ce)):we==="children"?typeof ce!="string"&&typeof ce!="number"||(j=j||[]).push(we,""+ce):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(r.hasOwnProperty(we)?(ce!=null&&we==="onScroll"&&dn("scroll",l),j||oe===ce||(j=[])):(j=j||[]).push(we,ce))}y&&(j=j||[]).push("style",y);var we=j;(c.updateQueue=we)&&(c.flags|=4)}},eR=function(l,c,y,x){y!==x&&(c.flags|=4)};function qg(l,c){if(!_n)switch(l.tailMode){case"hidden":c=l.tail;for(var y=null;c!==null;)c.alternate!==null&&(y=c),c=c.sibling;y===null?l.tail=null:y.sibling=null;break;case"collapsed":y=l.tail;for(var x=null;y!==null;)y.alternate!==null&&(x=y),y=y.sibling;x===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Jr(l){var c=l.alternate!==null&&l.alternate.child===l.child,y=0,x=0;if(c)for(var O=l.child;O!==null;)y|=O.lanes|O.childLanes,x|=O.subtreeFlags&14680064,x|=O.flags&14680064,O.return=l,O=O.sibling;else for(O=l.child;O!==null;)y|=O.lanes|O.childLanes,x|=O.subtreeFlags,x|=O.flags,O.return=l,O=O.sibling;return l.subtreeFlags|=x,l.childLanes=y,c}function C9(l,c,y){var x=c.pendingProps;switch(ub(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(c),null;case 1:return Di(c.type)&&L2(),Jr(c),null;case 3:return x=c.stateNode,Wf(),fn(Ii),fn(Gr),bb(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(q2(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ao!==null&&(Qb(ao),ao=null))),Ub(l,c),Jr(c),null;case 5:_b(c);var O=bh(Lg.current);if(y=c.type,l!==null&&c.stateNode!=null)Zk(l,c,y,x,O),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(t(166));return Jr(c),null}if(l=bh(Vo.current),q2(c)){x=c.stateNode,y=c.type;var j=c.memoizedProps;switch(x[Uo]=c,x[kg]=j,l=(c.mode&1)!==0,y){case"dialog":dn("cancel",x),dn("close",x);break;case"iframe":case"object":case"embed":dn("load",x);break;case"video":case"audio":for(O=0;O<Tg.length;O++)dn(Tg[O],x);break;case"source":dn("error",x);break;case"img":case"image":case"link":dn("error",x),dn("load",x);break;case"details":dn("toggle",x);break;case"input":Be(x,j),dn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!j.multiple},dn("invalid",x);break;case"textarea":rt(x,j),dn("invalid",x)}og(y,j),O=null;for(var K in j)if(j.hasOwnProperty(K)){var oe=j[K];K==="children"?typeof oe=="string"?x.textContent!==oe&&(j.suppressHydrationWarning!==!0&&P2(x.textContent,oe,l),O=["children",oe]):typeof oe=="number"&&x.textContent!==""+oe&&(j.suppressHydrationWarning!==!0&&P2(x.textContent,oe,l),O=["children",""+oe]):r.hasOwnProperty(K)&&oe!=null&&K==="onScroll"&&dn("scroll",x)}switch(y){case"input":ye(x),fe(x,j,!0);break;case"textarea":ye(x),Qe(x);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(x.onclick=N2)}x=O,c.updateQueue=x,x!==null&&(c.flags|=4)}else{K=O.nodeType===9?O:O.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=st(y)),l==="http://www.w3.org/1999/xhtml"?y==="script"?(l=K.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=K.createElement(y,{is:x.is}):(l=K.createElement(y),y==="select"&&(K=l,x.multiple?K.multiple=!0:x.size&&(K.size=x.size))):l=K.createElementNS(l,y),l[Uo]=c,l[kg]=x,Qk(l,c,!1,!1),c.stateNode=l;e:{switch(K=ag(y,x),y){case"dialog":dn("cancel",l),dn("close",l),O=x;break;case"iframe":case"object":case"embed":dn("load",l),O=x;break;case"video":case"audio":for(O=0;O<Tg.length;O++)dn(Tg[O],l);O=x;break;case"source":dn("error",l),O=x;break;case"img":case"image":case"link":dn("error",l),dn("load",l),O=x;break;case"details":dn("toggle",l),O=x;break;case"input":Be(l,x),O=Fe(l,x),dn("invalid",l);break;case"option":O=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},O=J({},x,{value:void 0}),dn("invalid",l);break;case"textarea":rt(l,x),O=Ae(l,x),dn("invalid",l);break;default:O=x}og(y,O),oe=O;for(j in oe)if(oe.hasOwnProperty(j)){var ce=oe[j];j==="style"?iu(l,ce):j==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&xi(l,ce)):j==="children"?typeof ce=="string"?(y!=="textarea"||ce!=="")&&Mt(l,ce):typeof ce=="number"&&Mt(l,""+ce):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(r.hasOwnProperty(j)?ce!=null&&j==="onScroll"&&dn("scroll",l):ce!=null&&I(l,j,ce,K))}switch(y){case"input":ye(l),fe(l,x,!1);break;case"textarea":ye(l),Qe(l);break;case"option":x.value!=null&&l.setAttribute("value",""+te(x.value));break;case"select":l.multiple=!!x.multiple,j=x.value,j!=null?Re(l,!!x.multiple,j,!1):x.defaultValue!=null&&Re(l,!!x.multiple,x.defaultValue,!0);break;default:typeof O.onClick=="function"&&(l.onclick=N2)}switch(y){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Jr(c),null;case 6:if(l&&c.stateNode!=null)eR(l,c,l.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(t(166));if(y=bh(Lg.current),bh(Vo.current),q2(c)){if(x=c.stateNode,y=c.memoizedProps,x[Uo]=c,(j=x.nodeValue!==y)&&(l=Gi,l!==null))switch(l.tag){case 3:P2(x.nodeValue,y,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&P2(x.nodeValue,y,(l.mode&1)!==0)}j&&(c.flags|=4)}else x=(y.nodeType===9?y:y.ownerDocument).createTextNode(x),x[Uo]=c,c.stateNode=x}return Jr(c),null;case 13:if(fn(Sn),x=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_n&&Ki!==null&&(c.mode&1)!==0&&(c.flags&128)===0)rk(),Vf(),c.flags|=98560,j=!1;else if(j=q2(c),x!==null&&x.dehydrated!==null){if(l===null){if(!j)throw Error(t(318));if(j=c.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[Uo]=c}else Vf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Jr(c),j=!1}else ao!==null&&(Qb(ao),ao=null),j=!0;if(!j)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=y,c):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Sn.current&1)!==0?rr===0&&(rr=3):tE())),c.updateQueue!==null&&(c.flags|=4),Jr(c),null);case 4:return Wf(),Ub(l,c),l===null&&Ig(c.stateNode.containerInfo),Jr(c),null;case 10:return mb(c.type._context),Jr(c),null;case 17:return Di(c.type)&&L2(),Jr(c),null;case 19:if(fn(Sn),j=c.memoizedState,j===null)return Jr(c),null;if(x=(c.flags&128)!==0,K=j.rendering,K===null)if(x)qg(j,!1);else{if(rr!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(K=W2(l),K!==null){for(c.flags|=128,qg(j,!1),x=K.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=y,y=c.child;y!==null;)j=y,l=x,j.flags&=14680066,K=j.alternate,K===null?(j.childLanes=0,j.lanes=l,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=K.childLanes,j.lanes=K.lanes,j.child=K.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=K.memoizedProps,j.memoizedState=K.memoizedState,j.updateQueue=K.updateQueue,j.type=K.type,l=K.dependencies,j.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),y=y.sibling;return un(Sn,Sn.current&1|2),c.child}l=l.sibling}j.tail!==null&&ln()>Yf&&(c.flags|=128,x=!0,qg(j,!1),c.lanes=4194304)}else{if(!x)if(l=W2(K),l!==null){if(c.flags|=128,x=!0,y=l.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),qg(j,!0),j.tail===null&&j.tailMode==="hidden"&&!K.alternate&&!_n)return Jr(c),null}else 2*ln()-j.renderingStartTime>Yf&&y!==1073741824&&(c.flags|=128,x=!0,qg(j,!1),c.lanes=4194304);j.isBackwards?(K.sibling=c.child,c.child=K):(y=j.last,y!==null?y.sibling=K:c.child=K,j.last=K)}return j.tail!==null?(c=j.tail,j.rendering=c,j.tail=c.sibling,j.renderingStartTime=ln(),c.sibling=null,y=Sn.current,un(Sn,x?y&1|2:y&1),c):(Jr(c),null);case 22:case 23:return eE(),x=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Ji&1073741824)!==0&&(Jr(c),c.subtreeFlags&6&&(c.flags|=8192)):Jr(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function x9(l,c){switch(ub(c),c.tag){case 1:return Di(c.type)&&L2(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Wf(),fn(Ii),fn(Gr),bb(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return _b(c),null;case 13:if(fn(Sn),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Vf()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return fn(Sn),null;case 4:return Wf(),null;case 10:return mb(c.type._context),null;case 22:case 23:return eE(),null;case 24:return null;default:return null}}var tw=!1,Yr=!1,S9=typeof WeakSet=="function"?WeakSet:Set,We=null;function Kf(l,c){var y=l.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(x){Nn(l,c,x)}else y.current=null}function Vb(l,c,y){try{y()}catch(x){Nn(l,c,x)}}var tR=!1;function T9(l,c){if(eb=du,l=ND(),WA(l)){if("selectionStart"in l)var y={start:l.selectionStart,end:l.selectionEnd};else e:{y=(y=l.ownerDocument)&&y.defaultView||window;var x=y.getSelection&&y.getSelection();if(x&&x.rangeCount!==0){y=x.anchorNode;var O=x.anchorOffset,j=x.focusNode;x=x.focusOffset;try{y.nodeType,j.nodeType}catch{y=null;break e}var K=0,oe=-1,ce=-1,we=0,Te=0,De=l,Se=null;t:for(;;){for(var je;De!==y||O!==0&&De.nodeType!==3||(oe=K+O),De!==j||x!==0&&De.nodeType!==3||(ce=K+x),De.nodeType===3&&(K+=De.nodeValue.length),(je=De.firstChild)!==null;)Se=De,De=je;for(;;){if(De===l)break t;if(Se===y&&++we===O&&(oe=K),Se===j&&++Te===x&&(ce=K),(je=De.nextSibling)!==null)break;De=Se,Se=De.parentNode}De=je}y=oe===-1||ce===-1?null:{start:oe,end:ce}}else y=null}y=y||{start:0,end:0}}else y=null;for(tb={focusedElem:l,selectionRange:y},du=!1,We=c;We!==null;)if(c=We,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,We=l;else for(;We!==null;){c=We;try{var Xe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Ze=Xe.memoizedProps,Bn=Xe.memoizedState,me=c.stateNode,he=me.getSnapshotBeforeUpdate(c.elementType===c.type?Ze:lo(c.type,Ze),Bn);me.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var ge=c.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Pe){Nn(c,c.return,Pe)}if(l=c.sibling,l!==null){l.return=c.return,We=l;break}We=c.return}return Xe=tR,tR=!1,Xe}function Ug(l,c,y){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var O=x=x.next;do{if((O.tag&l)===l){var j=O.destroy;O.destroy=void 0,j!==void 0&&Vb(c,y,j)}O=O.next}while(O!==x)}}function nw(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var y=c=c.next;do{if((y.tag&l)===l){var x=y.create;y.destroy=x()}y=y.next}while(y!==c)}}function Hb(l){var c=l.ref;if(c!==null){var y=l.stateNode;switch(l.tag){case 5:l=y;break;default:l=y}typeof c=="function"?c(l):c.current=l}}function nR(l){var c=l.alternate;c!==null&&(l.alternate=null,nR(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Uo],delete c[kg],delete c[sb],delete c[u9],delete c[c9])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function rR(l){return l.tag===5||l.tag===3||l.tag===4}function iR(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||rR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function zb(l,c,y){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?y.nodeType===8?y.parentNode.insertBefore(l,c):y.insertBefore(l,c):(y.nodeType===8?(c=y.parentNode,c.insertBefore(l,y)):(c=y,c.appendChild(l)),y=y._reactRootContainer,y!=null||c.onclick!==null||(c.onclick=N2));else if(x!==4&&(l=l.child,l!==null))for(zb(l,c,y),l=l.sibling;l!==null;)zb(l,c,y),l=l.sibling}function $b(l,c,y){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?y.insertBefore(l,c):y.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for($b(l,c,y),l=l.sibling;l!==null;)$b(l,c,y),l=l.sibling}var kr=null,uo=!1;function Au(l,c,y){for(y=y.child;y!==null;)sR(l,c,y),y=y.sibling}function sR(l,c,y){if(Hi&&typeof Hi.onCommitFiberUnmount=="function")try{Hi.onCommitFiberUnmount(ch,y)}catch{}switch(y.tag){case 5:Yr||Kf(y,c);case 6:var x=kr,O=uo;kr=null,Au(l,c,y),kr=x,uo=O,kr!==null&&(uo?(l=kr,y=y.stateNode,l.nodeType===8?l.parentNode.removeChild(y):l.removeChild(y)):kr.removeChild(y.stateNode));break;case 18:kr!==null&&(uo?(l=kr,y=y.stateNode,l.nodeType===8?ib(l.parentNode,y):l.nodeType===1&&ib(l,y),io(l)):ib(kr,y.stateNode));break;case 4:x=kr,O=uo,kr=y.stateNode.containerInfo,uo=!0,Au(l,c,y),kr=x,uo=O;break;case 0:case 11:case 14:case 15:if(!Yr&&(x=y.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){O=x=x.next;do{var j=O,K=j.destroy;j=j.tag,K!==void 0&&((j&2)!==0||(j&4)!==0)&&Vb(y,c,K),O=O.next}while(O!==x)}Au(l,c,y);break;case 1:if(!Yr&&(Kf(y,c),x=y.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=y.memoizedProps,x.state=y.memoizedState,x.componentWillUnmount()}catch(oe){Nn(y,c,oe)}Au(l,c,y);break;case 21:Au(l,c,y);break;case 22:y.mode&1?(Yr=(x=Yr)||y.memoizedState!==null,Au(l,c,y),Yr=x):Au(l,c,y);break;default:Au(l,c,y)}}function oR(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var y=l.stateNode;y===null&&(y=l.stateNode=new S9),c.forEach(function(x){var O=F9.bind(null,l,x);y.has(x)||(y.add(x),x.then(O,O))})}}function co(l,c){var y=c.deletions;if(y!==null)for(var x=0;x<y.length;x++){var O=y[x];try{var j=l,K=c,oe=K;e:for(;oe!==null;){switch(oe.tag){case 5:kr=oe.stateNode,uo=!1;break e;case 3:kr=oe.stateNode.containerInfo,uo=!0;break e;case 4:kr=oe.stateNode.containerInfo,uo=!0;break e}oe=oe.return}if(kr===null)throw Error(t(160));sR(j,K,O),kr=null,uo=!1;var ce=O.alternate;ce!==null&&(ce.return=null),O.return=null}catch(we){Nn(O,c,we)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)aR(c,l),c=c.sibling}function aR(l,c){var y=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(co(c,l),zo(l),x&4){try{Ug(3,l,l.return),nw(3,l)}catch(Ze){Nn(l,l.return,Ze)}try{Ug(5,l,l.return)}catch(Ze){Nn(l,l.return,Ze)}}break;case 1:co(c,l),zo(l),x&512&&y!==null&&Kf(y,y.return);break;case 5:if(co(c,l),zo(l),x&512&&y!==null&&Kf(y,y.return),l.flags&32){var O=l.stateNode;try{Mt(O,"")}catch(Ze){Nn(l,l.return,Ze)}}if(x&4&&(O=l.stateNode,O!=null)){var j=l.memoizedProps,K=y!==null?y.memoizedProps:j,oe=l.type,ce=l.updateQueue;if(l.updateQueue=null,ce!==null)try{oe==="input"&&j.type==="radio"&&j.name!=null&&$e(O,j),ag(oe,K);var we=ag(oe,j);for(K=0;K<ce.length;K+=2){var Te=ce[K],De=ce[K+1];Te==="style"?iu(O,De):Te==="dangerouslySetInnerHTML"?xi(O,De):Te==="children"?Mt(O,De):I(O,Te,De,we)}switch(oe){case"input":mt(O,j);break;case"textarea":qe(O,j);break;case"select":var Se=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!j.multiple;var je=j.value;je!=null?Re(O,!!j.multiple,je,!1):Se!==!!j.multiple&&(j.defaultValue!=null?Re(O,!!j.multiple,j.defaultValue,!0):Re(O,!!j.multiple,j.multiple?[]:"",!1))}O[kg]=j}catch(Ze){Nn(l,l.return,Ze)}}break;case 6:if(co(c,l),zo(l),x&4){if(l.stateNode===null)throw Error(t(162));O=l.stateNode,j=l.memoizedProps;try{O.nodeValue=j}catch(Ze){Nn(l,l.return,Ze)}}break;case 3:if(co(c,l),zo(l),x&4&&y!==null&&y.memoizedState.isDehydrated)try{io(c.containerInfo)}catch(Ze){Nn(l,l.return,Ze)}break;case 4:co(c,l),zo(l);break;case 13:co(c,l),zo(l),O=l.child,O.flags&8192&&(j=O.memoizedState!==null,O.stateNode.isHidden=j,!j||O.alternate!==null&&O.alternate.memoizedState!==null||(Kb=ln())),x&4&&oR(l);break;case 22:if(Te=y!==null&&y.memoizedState!==null,l.mode&1?(Yr=(we=Yr)||Te,co(c,l),Yr=we):co(c,l),zo(l),x&8192){if(we=l.memoizedState!==null,(l.stateNode.isHidden=we)&&!Te&&(l.mode&1)!==0)for(We=l,Te=l.child;Te!==null;){for(De=We=Te;We!==null;){switch(Se=We,je=Se.child,Se.tag){case 0:case 11:case 14:case 15:Ug(4,Se,Se.return);break;case 1:Kf(Se,Se.return);var Xe=Se.stateNode;if(typeof Xe.componentWillUnmount=="function"){x=Se,y=Se.return;try{c=x,Xe.props=c.memoizedProps,Xe.state=c.memoizedState,Xe.componentWillUnmount()}catch(Ze){Nn(x,y,Ze)}}break;case 5:Kf(Se,Se.return);break;case 22:if(Se.memoizedState!==null){cR(De);continue}}je!==null?(je.return=Se,We=je):cR(De)}Te=Te.sibling}e:for(Te=null,De=l;;){if(De.tag===5){if(Te===null){Te=De;try{O=De.stateNode,we?(j=O.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(oe=De.stateNode,ce=De.memoizedProps.style,K=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,oe.style.display=Ys("display",K))}catch(Ze){Nn(l,l.return,Ze)}}}else if(De.tag===6){if(Te===null)try{De.stateNode.nodeValue=we?"":De.memoizedProps}catch(Ze){Nn(l,l.return,Ze)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===l)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===l)break e;for(;De.sibling===null;){if(De.return===null||De.return===l)break e;Te===De&&(Te=null),De=De.return}Te===De&&(Te=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:co(c,l),zo(l),x&4&&oR(l);break;case 21:break;default:co(c,l),zo(l)}}function zo(l){var c=l.flags;if(c&2){try{e:{for(var y=l.return;y!==null;){if(rR(y)){var x=y;break e}y=y.return}throw Error(t(160))}switch(x.tag){case 5:var O=x.stateNode;x.flags&32&&(Mt(O,""),x.flags&=-33);var j=iR(l);$b(l,j,O);break;case 3:case 4:var K=x.stateNode.containerInfo,oe=iR(l);zb(l,oe,K);break;default:throw Error(t(161))}}catch(ce){Nn(l,l.return,ce)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function I9(l,c,y){We=l,lR(l)}function lR(l,c,y){for(var x=(l.mode&1)!==0;We!==null;){var O=We,j=O.child;if(O.tag===22&&x){var K=O.memoizedState!==null||tw;if(!K){var oe=O.alternate,ce=oe!==null&&oe.memoizedState!==null||Yr;oe=tw;var we=Yr;if(tw=K,(Yr=ce)&&!we)for(We=O;We!==null;)K=We,ce=K.child,K.tag===22&&K.memoizedState!==null?hR(O):ce!==null?(ce.return=K,We=ce):hR(O);for(;j!==null;)We=j,lR(j),j=j.sibling;We=O,tw=oe,Yr=we}uR(l)}else(O.subtreeFlags&8772)!==0&&j!==null?(j.return=O,We=j):uR(l)}}function uR(l){for(;We!==null;){var c=We;if((c.flags&8772)!==0){var y=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Yr||nw(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Yr)if(y===null)x.componentDidMount();else{var O=c.elementType===c.type?y.memoizedProps:lo(c.type,y.memoizedProps);x.componentDidUpdate(O,y.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var j=c.updateQueue;j!==null&&ck(c,j,x);break;case 3:var K=c.updateQueue;if(K!==null){if(y=null,c.child!==null)switch(c.child.tag){case 5:y=c.child.stateNode;break;case 1:y=c.child.stateNode}ck(c,K,y)}break;case 5:var oe=c.stateNode;if(y===null&&c.flags&4){y=oe;var ce=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&y.focus();break;case"img":ce.src&&(y.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var we=c.alternate;if(we!==null){var Te=we.memoizedState;if(Te!==null){var De=Te.dehydrated;De!==null&&io(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yr||c.flags&512&&Hb(c)}catch(Se){Nn(c,c.return,Se)}}if(c===l){We=null;break}if(y=c.sibling,y!==null){y.return=c.return,We=y;break}We=c.return}}function cR(l){for(;We!==null;){var c=We;if(c===l){We=null;break}var y=c.sibling;if(y!==null){y.return=c.return,We=y;break}We=c.return}}function hR(l){for(;We!==null;){var c=We;try{switch(c.tag){case 0:case 11:case 15:var y=c.return;try{nw(4,c)}catch(ce){Nn(c,y,ce)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var O=c.return;try{x.componentDidMount()}catch(ce){Nn(c,O,ce)}}var j=c.return;try{Hb(c)}catch(ce){Nn(c,j,ce)}break;case 5:var K=c.return;try{Hb(c)}catch(ce){Nn(c,K,ce)}}}catch(ce){Nn(c,c.return,ce)}if(c===l){We=null;break}var oe=c.sibling;if(oe!==null){oe.return=c.return,We=oe;break}We=c.return}}var D9=Math.ceil,rw=S.ReactCurrentDispatcher,Wb=S.ReactCurrentOwner,Rs=S.ReactCurrentBatchConfig,Ut=0,yr=null,$n=null,Rr=0,Ji=0,Jf=gu(0),rr=0,Vg=null,Ch=0,iw=0,Gb=0,Hg=null,Ri=null,Kb=0,Yf=1/0,Ka=null,sw=!1,Jb=null,bu=null,ow=!1,Eu=null,aw=0,zg=0,Yb=null,lw=-1,uw=0;function ui(){return(Ut&6)!==0?ln():lw!==-1?lw:lw=ln()}function Cu(l){return(l.mode&1)===0?1:(Ut&2)!==0&&Rr!==0?Rr&-Rr:d9.transition!==null?(uw===0&&(uw=dh()),uw):(l=Lt,l!==0||(l=window.event,l=l===void 0?16:vg(l.type)),l)}function ho(l,c,y,x){if(50<zg)throw zg=0,Yb=null,Error(t(185));lu(l,y,x),((Ut&2)===0||l!==yr)&&(l===yr&&((Ut&2)===0&&(iw|=y),rr===4&&xu(l,Rr)),Pi(l,x),y===1&&Ut===0&&(c.mode&1)===0&&(Yf=ln()+500,M2&&vu()))}function Pi(l,c){var y=l.callbackNode;Fa(l,c);var x=hh(l,l===yr?Rr:0);if(x===0)y!==null&&fg(y),l.callbackNode=null,l.callbackPriority=0;else if(c=x&-x,l.callbackPriority!==c){if(y!=null&&fg(y),c===1)l.tag===0?h9(fR.bind(null,l)):QD(fR.bind(null,l)),a9(function(){(Ut&6)===0&&vu()}),y=null;else{switch(cu(x)){case 1:y=uh;break;case 4:y=su;break;case 16:y=Cs;break;case 536870912:y=u2;break;default:y=Cs}y=AR(y,dR.bind(null,l))}l.callbackPriority=c,l.callbackNode=y}}function dR(l,c){if(lw=-1,uw=0,(Ut&6)!==0)throw Error(t(327));var y=l.callbackNode;if(Xf()&&l.callbackNode!==y)return null;var x=hh(l,l===yr?Rr:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||c)c=cw(l,x);else{c=x;var O=Ut;Ut|=2;var j=mR();(yr!==l||Rr!==c)&&(Ka=null,Yf=ln()+500,Sh(l,c));do try{P9();break}catch(oe){pR(l,oe)}while(!0);pb(),rw.current=j,Ut=O,$n!==null?c=0:(yr=null,Rr=0,c=rr)}if(c!==0){if(c===2&&(O=zi(l),O!==0&&(x=O,c=Xb(l,O))),c===1)throw y=Vg,Sh(l,0),xu(l,x),Pi(l,ln()),y;if(c===6)xu(l,x);else{if(O=l.current.alternate,(x&30)===0&&!k9(O)&&(c=cw(l,x),c===2&&(j=zi(l),j!==0&&(x=j,c=Xb(l,j))),c===1))throw y=Vg,Sh(l,0),xu(l,x),Pi(l,ln()),y;switch(l.finishedWork=O,l.finishedLanes=x,c){case 0:case 1:throw Error(t(345));case 2:Th(l,Ri,Ka);break;case 3:if(xu(l,x),(x&130023424)===x&&(c=Kb+500-ln(),10<c)){if(hh(l,0)!==0)break;if(O=l.suspendedLanes,(O&x)!==x){ui(),l.pingedLanes|=l.suspendedLanes&O;break}l.timeoutHandle=rb(Th.bind(null,l,Ri,Ka),c);break}Th(l,Ri,Ka);break;case 4:if(xu(l,x),(x&4194240)===x)break;for(c=l.eventTimes,O=-1;0<x;){var K=31-oi(x);j=1<<K,K=c[K],K>O&&(O=K),x&=~j}if(x=O,x=ln()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*D9(x/1960))-x,10<x){l.timeoutHandle=rb(Th.bind(null,l,Ri,Ka),x);break}Th(l,Ri,Ka);break;case 5:Th(l,Ri,Ka);break;default:throw Error(t(329))}}}return Pi(l,ln()),l.callbackNode===y?dR.bind(null,l):null}function Xb(l,c){var y=Hg;return l.current.memoizedState.isDehydrated&&(Sh(l,c).flags|=256),l=cw(l,c),l!==2&&(c=Ri,Ri=y,c!==null&&Qb(c)),l}function Qb(l){Ri===null?Ri=l:Ri.push.apply(Ri,l)}function k9(l){for(var c=l;;){if(c.flags&16384){var y=c.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var x=0;x<y.length;x++){var O=y[x],j=O.getSnapshot;O=O.value;try{if(!oo(j(),O))return!1}catch{return!1}}}if(y=c.child,c.subtreeFlags&16384&&y!==null)y.return=c,c=y;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function xu(l,c){for(c&=~Gb,c&=~iw,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var y=31-oi(c),x=1<<y;l[y]=-1,c&=~x}}function fR(l){if((Ut&6)!==0)throw Error(t(327));Xf();var c=hh(l,0);if((c&1)===0)return Pi(l,ln()),null;var y=cw(l,c);if(l.tag!==0&&y===2){var x=zi(l);x!==0&&(c=x,y=Xb(l,x))}if(y===1)throw y=Vg,Sh(l,0),xu(l,c),Pi(l,ln()),y;if(y===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Th(l,Ri,Ka),Pi(l,ln()),null}function Zb(l,c){var y=Ut;Ut|=1;try{return l(c)}finally{Ut=y,Ut===0&&(Yf=ln()+500,M2&&vu())}}function xh(l){Eu!==null&&Eu.tag===0&&(Ut&6)===0&&Xf();var c=Ut;Ut|=1;var y=Rs.transition,x=Lt;try{if(Rs.transition=null,Lt=1,l)return l()}finally{Lt=x,Rs.transition=y,Ut=c,(Ut&6)===0&&vu()}}function eE(){Ji=Jf.current,fn(Jf)}function Sh(l,c){l.finishedWork=null,l.finishedLanes=0;var y=l.timeoutHandle;if(y!==-1&&(l.timeoutHandle=-1,o9(y)),$n!==null)for(y=$n.return;y!==null;){var x=y;switch(ub(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&L2();break;case 3:Wf(),fn(Ii),fn(Gr),bb();break;case 5:_b(x);break;case 4:Wf();break;case 13:fn(Sn);break;case 19:fn(Sn);break;case 10:mb(x.type._context);break;case 22:case 23:eE()}y=y.return}if(yr=l,$n=l=Su(l.current,null),Rr=Ji=c,rr=0,Vg=null,Gb=iw=Ch=0,Ri=Hg=null,Ah!==null){for(c=0;c<Ah.length;c++)if(y=Ah[c],x=y.interleaved,x!==null){y.interleaved=null;var O=x.next,j=y.pending;if(j!==null){var K=j.next;j.next=O,x.next=K}y.pending=x}Ah=null}return l}function pR(l,c){do{var y=$n;try{if(pb(),G2.current=X2,K2){for(var x=Tn.memoizedState;x!==null;){var O=x.queue;O!==null&&(O.pending=null),x=x.next}K2=!1}if(Eh=0,gr=nr=Tn=null,Fg=!1,Mg=0,Wb.current=null,y===null||y.return===null){rr=1,Vg=c,$n=null;break}e:{var j=l,K=y.return,oe=y,ce=c;if(c=Rr,oe.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var we=ce,Te=oe,De=Te.tag;if((Te.mode&1)===0&&(De===0||De===11||De===15)){var Se=Te.alternate;Se?(Te.updateQueue=Se.updateQueue,Te.memoizedState=Se.memoizedState,Te.lanes=Se.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var je=jk(K);if(je!==null){je.flags&=-257,qk(je,K,oe,j,c),je.mode&1&&Bk(j,we,c),c=je,ce=we;var Xe=c.updateQueue;if(Xe===null){var Ze=new Set;Ze.add(ce),c.updateQueue=Ze}else Xe.add(ce);break e}else{if((c&1)===0){Bk(j,we,c),tE();break e}ce=Error(t(426))}}else if(_n&&oe.mode&1){var Bn=jk(K);if(Bn!==null){(Bn.flags&65536)===0&&(Bn.flags|=256),qk(Bn,K,oe,j,c),db(Gf(ce,oe));break e}}j=ce=Gf(ce,oe),rr!==4&&(rr=2),Hg===null?Hg=[j]:Hg.push(j),j=K;do{switch(j.tag){case 3:j.flags|=65536,c&=-c,j.lanes|=c;var me=Fk(j,ce,c);uk(j,me);break e;case 1:oe=ce;var he=j.type,ge=j.stateNode;if((j.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(bu===null||!bu.has(ge)))){j.flags|=65536,c&=-c,j.lanes|=c;var Pe=Mk(j,oe,c);uk(j,Pe);break e}}j=j.return}while(j!==null)}yR(y)}catch(et){c=et,$n===y&&y!==null&&($n=y=y.return);continue}break}while(!0)}function mR(){var l=rw.current;return rw.current=X2,l===null?X2:l}function tE(){(rr===0||rr===3||rr===2)&&(rr=4),yr===null||(Ch&268435455)===0&&(iw&268435455)===0||xu(yr,Rr)}function cw(l,c){var y=Ut;Ut|=2;var x=mR();(yr!==l||Rr!==c)&&(Ka=null,Sh(l,c));do try{R9();break}catch(O){pR(l,O)}while(!0);if(pb(),Ut=y,rw.current=x,$n!==null)throw Error(t(261));return yr=null,Rr=0,rr}function R9(){for(;$n!==null;)gR($n)}function P9(){for(;$n!==null&&!a2();)gR($n)}function gR(l){var c=_R(l.alternate,l,Ji);l.memoizedProps=l.pendingProps,c===null?yR(l):$n=c,Wb.current=null}function yR(l){var c=l;do{var y=c.alternate;if(l=c.return,(c.flags&32768)===0){if(y=C9(y,c,Ji),y!==null){$n=y;return}}else{if(y=x9(y,c),y!==null){y.flags&=32767,$n=y;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{rr=6,$n=null;return}}if(c=c.sibling,c!==null){$n=c;return}$n=c=l}while(c!==null);rr===0&&(rr=5)}function Th(l,c,y){var x=Lt,O=Rs.transition;try{Rs.transition=null,Lt=1,N9(l,c,y,x)}finally{Rs.transition=O,Lt=x}return null}function N9(l,c,y,x){do Xf();while(Eu!==null);if((Ut&6)!==0)throw Error(t(327));y=l.finishedWork;var O=l.finishedLanes;if(y===null)return null;if(l.finishedWork=null,l.finishedLanes=0,y===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var j=y.lanes|y.childLanes;if(sn(l,j),l===yr&&($n=yr=null,Rr=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||ow||(ow=!0,AR(Cs,function(){return Xf(),null})),j=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||j){j=Rs.transition,Rs.transition=null;var K=Lt;Lt=1;var oe=Ut;Ut|=4,Wb.current=null,T9(l,y),aR(y,l),Zj(tb),du=!!eb,tb=eb=null,l.current=y,I9(y),BA(),Ut=oe,Lt=K,Rs.transition=j}else l.current=y;if(ow&&(ow=!1,Eu=l,aw=O),j=l.pendingLanes,j===0&&(bu=null),c2(y.stateNode),Pi(l,ln()),c!==null)for(x=l.onRecoverableError,y=0;y<c.length;y++)O=c[y],x(O.value,{componentStack:O.stack,digest:O.digest});if(sw)throw sw=!1,l=Jb,Jb=null,l;return(aw&1)!==0&&l.tag!==0&&Xf(),j=l.pendingLanes,(j&1)!==0?l===Yb?zg++:(zg=0,Yb=l):zg=0,vu(),null}function Xf(){if(Eu!==null){var l=cu(aw),c=Rs.transition,y=Lt;try{if(Rs.transition=null,Lt=16>l?16:l,Eu===null)var x=!1;else{if(l=Eu,Eu=null,aw=0,(Ut&6)!==0)throw Error(t(331));var O=Ut;for(Ut|=4,We=l.current;We!==null;){var j=We,K=j.child;if((We.flags&16)!==0){var oe=j.deletions;if(oe!==null){for(var ce=0;ce<oe.length;ce++){var we=oe[ce];for(We=we;We!==null;){var Te=We;switch(Te.tag){case 0:case 11:case 15:Ug(8,Te,j)}var De=Te.child;if(De!==null)De.return=Te,We=De;else for(;We!==null;){Te=We;var Se=Te.sibling,je=Te.return;if(nR(Te),Te===we){We=null;break}if(Se!==null){Se.return=je,We=Se;break}We=je}}}var Xe=j.alternate;if(Xe!==null){var Ze=Xe.child;if(Ze!==null){Xe.child=null;do{var Bn=Ze.sibling;Ze.sibling=null,Ze=Bn}while(Ze!==null)}}We=j}}if((j.subtreeFlags&2064)!==0&&K!==null)K.return=j,We=K;else e:for(;We!==null;){if(j=We,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Ug(9,j,j.return)}var me=j.sibling;if(me!==null){me.return=j.return,We=me;break e}We=j.return}}var he=l.current;for(We=he;We!==null;){K=We;var ge=K.child;if((K.subtreeFlags&2064)!==0&&ge!==null)ge.return=K,We=ge;else e:for(K=he;We!==null;){if(oe=We,(oe.flags&2048)!==0)try{switch(oe.tag){case 0:case 11:case 15:nw(9,oe)}}catch(et){Nn(oe,oe.return,et)}if(oe===K){We=null;break e}var Pe=oe.sibling;if(Pe!==null){Pe.return=oe.return,We=Pe;break e}We=oe.return}}if(Ut=O,vu(),Hi&&typeof Hi.onPostCommitFiberRoot=="function")try{Hi.onPostCommitFiberRoot(ch,l)}catch{}x=!0}return x}finally{Lt=y,Rs.transition=c}}return!1}function vR(l,c,y){c=Gf(y,c),c=Fk(l,c,1),l=_u(l,c,1),c=ui(),l!==null&&(lu(l,1,c),Pi(l,c))}function Nn(l,c,y){if(l.tag===3)vR(l,l,y);else for(;c!==null;){if(c.tag===3){vR(c,l,y);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(bu===null||!bu.has(x))){l=Gf(y,l),l=Mk(c,l,1),c=_u(c,l,1),l=ui(),c!==null&&(lu(c,1,l),Pi(c,l));break}}c=c.return}}function O9(l,c,y){var x=l.pingCache;x!==null&&x.delete(c),c=ui(),l.pingedLanes|=l.suspendedLanes&y,yr===l&&(Rr&y)===y&&(rr===4||rr===3&&(Rr&130023424)===Rr&&500>ln()-Kb?Sh(l,0):Gb|=y),Pi(l,c)}function wR(l,c){c===0&&((l.mode&1)===0?c=1:(c=_f,_f<<=1,(_f&130023424)===0&&(_f=4194304)));var y=ui();l=$a(l,c),l!==null&&(lu(l,c,y),Pi(l,y))}function L9(l){var c=l.memoizedState,y=0;c!==null&&(y=c.retryLane),wR(l,y)}function F9(l,c){var y=0;switch(l.tag){case 13:var x=l.stateNode,O=l.memoizedState;O!==null&&(y=O.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(c),wR(l,y)}var _R;_R=function(l,c,y){if(l!==null)if(l.memoizedProps!==c.pendingProps||Ii.current)ki=!0;else{if((l.lanes&y)===0&&(c.flags&128)===0)return ki=!1,E9(l,c,y);ki=(l.flags&131072)!==0}else ki=!1,_n&&(c.flags&1048576)!==0&&ZD(c,j2,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;ew(l,c),l=c.pendingProps;var O=jf(c,Gr.current);$f(c,y),O=xb(null,c,x,l,O,y);var j=Sb();return c.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Di(x)?(j=!0,F2(c)):j=!1,c.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,vb(c),O.updater=Q2,c.stateNode=O,O._reactInternals=c,Pb(c,x,l,y),c=Fb(null,c,x,!0,j,y)):(c.tag=0,_n&&j&&lb(c),li(null,c,O,y),c=c.child),c;case 16:x=c.elementType;e:{switch(ew(l,c),l=c.pendingProps,O=x._init,x=O(x._payload),c.type=x,O=c.tag=B9(x),l=lo(x,l),O){case 0:c=Lb(null,c,x,l,y);break e;case 1:c=Wk(null,c,x,l,y);break e;case 11:c=Uk(null,c,x,l,y);break e;case 14:c=Vk(null,c,x,lo(x.type,l),y);break e}throw Error(t(306,x,""))}return c;case 0:return x=c.type,O=c.pendingProps,O=c.elementType===x?O:lo(x,O),Lb(l,c,x,O,y);case 1:return x=c.type,O=c.pendingProps,O=c.elementType===x?O:lo(x,O),Wk(l,c,x,O,y);case 3:e:{if(Gk(c),l===null)throw Error(t(387));x=c.pendingProps,j=c.memoizedState,O=j.element,lk(l,c),$2(c,x,null,y);var K=c.memoizedState;if(x=K.element,j.isDehydrated)if(j={element:x,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},c.updateQueue.baseState=j,c.memoizedState=j,c.flags&256){O=Gf(Error(t(423)),c),c=Kk(l,c,x,y,O);break e}else if(x!==O){O=Gf(Error(t(424)),c),c=Kk(l,c,x,y,O);break e}else for(Ki=mu(c.stateNode.containerInfo.firstChild),Gi=c,_n=!0,ao=null,y=ok(c,null,x,y),c.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Vf(),x===O){c=Ga(l,c,y);break e}li(l,c,x,y)}c=c.child}return c;case 5:return hk(c),l===null&&hb(c),x=c.type,O=c.pendingProps,j=l!==null?l.memoizedProps:null,K=O.children,nb(x,O)?K=null:j!==null&&nb(x,j)&&(c.flags|=32),$k(l,c),li(l,c,K,y),c.child;case 6:return l===null&&hb(c),null;case 13:return Jk(l,c,y);case 4:return wb(c,c.stateNode.containerInfo),x=c.pendingProps,l===null?c.child=Hf(c,null,x,y):li(l,c,x,y),c.child;case 11:return x=c.type,O=c.pendingProps,O=c.elementType===x?O:lo(x,O),Uk(l,c,x,O,y);case 7:return li(l,c,c.pendingProps,y),c.child;case 8:return li(l,c,c.pendingProps.children,y),c.child;case 12:return li(l,c,c.pendingProps.children,y),c.child;case 10:e:{if(x=c.type._context,O=c.pendingProps,j=c.memoizedProps,K=O.value,un(V2,x._currentValue),x._currentValue=K,j!==null)if(oo(j.value,K)){if(j.children===O.children&&!Ii.current){c=Ga(l,c,y);break e}}else for(j=c.child,j!==null&&(j.return=c);j!==null;){var oe=j.dependencies;if(oe!==null){K=j.child;for(var ce=oe.firstContext;ce!==null;){if(ce.context===x){if(j.tag===1){ce=Wa(-1,y&-y),ce.tag=2;var we=j.updateQueue;if(we!==null){we=we.shared;var Te=we.pending;Te===null?ce.next=ce:(ce.next=Te.next,Te.next=ce),we.pending=ce}}j.lanes|=y,ce=j.alternate,ce!==null&&(ce.lanes|=y),gb(j.return,y,c),oe.lanes|=y;break}ce=ce.next}}else if(j.tag===10)K=j.type===c.type?null:j.child;else if(j.tag===18){if(K=j.return,K===null)throw Error(t(341));K.lanes|=y,oe=K.alternate,oe!==null&&(oe.lanes|=y),gb(K,y,c),K=j.sibling}else K=j.child;if(K!==null)K.return=j;else for(K=j;K!==null;){if(K===c){K=null;break}if(j=K.sibling,j!==null){j.return=K.return,K=j;break}K=K.return}j=K}li(l,c,O.children,y),c=c.child}return c;case 9:return O=c.type,x=c.pendingProps.children,$f(c,y),O=Ds(O),x=x(O),c.flags|=1,li(l,c,x,y),c.child;case 14:return x=c.type,O=lo(x,c.pendingProps),O=lo(x.type,O),Vk(l,c,x,O,y);case 15:return Hk(l,c,c.type,c.pendingProps,y);case 17:return x=c.type,O=c.pendingProps,O=c.elementType===x?O:lo(x,O),ew(l,c),c.tag=1,Di(x)?(l=!0,F2(c)):l=!1,$f(c,y),Ok(c,x,O),Pb(c,x,O,y),Fb(null,c,x,!0,l,y);case 19:return Xk(l,c,y);case 22:return zk(l,c,y)}throw Error(t(156,c.tag))};function AR(l,c){return vf(l,c)}function M9(l,c,y,x){this.tag=l,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(l,c,y,x){return new M9(l,c,y,x)}function nE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function B9(l){if(typeof l=="function")return nE(l)?1:0;if(l!=null){if(l=l.$$typeof,l===L)return 11;if(l===Q)return 14}return 2}function Su(l,c){var y=l.alternate;return y===null?(y=Ps(l.tag,c,l.key,l.mode),y.elementType=l.elementType,y.type=l.type,y.stateNode=l.stateNode,y.alternate=l,l.alternate=y):(y.pendingProps=c,y.type=l.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=l.flags&14680064,y.childLanes=l.childLanes,y.lanes=l.lanes,y.child=l.child,y.memoizedProps=l.memoizedProps,y.memoizedState=l.memoizedState,y.updateQueue=l.updateQueue,c=l.dependencies,y.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},y.sibling=l.sibling,y.index=l.index,y.ref=l.ref,y}function hw(l,c,y,x,O,j){var K=2;if(x=l,typeof l=="function")nE(l)&&(K=1);else if(typeof l=="string")K=5;else e:switch(l){case k:return Ih(y.children,O,j,c);case T:K=8,O|=8;break;case D:return l=Ps(12,y,c,O|2),l.elementType=D,l.lanes=j,l;case M:return l=Ps(13,y,c,O),l.elementType=M,l.lanes=j,l;case $:return l=Ps(19,y,c,O),l.elementType=$,l.lanes=j,l;case ee:return dw(y,O,j,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case P:K=10;break e;case N:K=9;break e;case L:K=11;break e;case Q:K=14;break e;case re:K=16,x=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return c=Ps(K,y,c,O),c.elementType=l,c.type=x,c.lanes=j,c}function Ih(l,c,y,x){return l=Ps(7,l,x,c),l.lanes=y,l}function dw(l,c,y,x){return l=Ps(22,l,x,c),l.elementType=ee,l.lanes=y,l.stateNode={isHidden:!1},l}function rE(l,c,y){return l=Ps(6,l,null,c),l.lanes=y,l}function iE(l,c,y){return c=Ps(4,l.children!==null?l.children:[],l.key,c),c.lanes=y,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function j9(l,c,y,x,O){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=au(0),this.expirationTimes=au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=au(0),this.identifierPrefix=x,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function sE(l,c,y,x,O,j,K,oe,ce){return l=new j9(l,c,y,oe,ce),c===1?(c=1,j===!0&&(c|=8)):c=0,j=Ps(3,null,null,c),l.current=j,j.stateNode=l,j.memoizedState={element:x,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},vb(j),l}function q9(l,c,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:x==null?null:""+x,children:l,containerInfo:c,implementation:y}}function bR(l){if(!l)return yu;l=l._reactInternals;e:{if(Zs(l)!==l||l.tag!==1)throw Error(t(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Di(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(l.tag===1){var y=l.type;if(Di(y))return YD(l,y,c)}return c}function ER(l,c,y,x,O,j,K,oe,ce){return l=sE(y,x,!0,l,O,j,K,oe,ce),l.context=bR(null),y=l.current,x=ui(),O=Cu(y),j=Wa(x,O),j.callback=c??null,_u(y,j,O),l.current.lanes=O,lu(l,O,x),Pi(l,x),l}function fw(l,c,y,x){var O=c.current,j=ui(),K=Cu(O);return y=bR(y),c.context===null?c.context=y:c.pendingContext=y,c=Wa(j,K),c.payload={element:l},x=x===void 0?null:x,x!==null&&(c.callback=x),l=_u(O,c,K),l!==null&&(ho(l,O,K,j),z2(l,O,K)),K}function pw(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function CR(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var y=l.retryLane;l.retryLane=y!==0&&y<c?y:c}}function oE(l,c){CR(l,c),(l=l.alternate)&&CR(l,c)}function U9(){return null}var xR=typeof reportError=="function"?reportError:function(l){console.error(l)};function aE(l){this._internalRoot=l}mw.prototype.render=aE.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(t(409));fw(l,c,null,null)},mw.prototype.unmount=aE.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;xh(function(){fw(null,l,null,null)}),c[Ua]=null}};function mw(l){this._internalRoot=l}mw.prototype.unstable_scheduleHydration=function(l){if(l){var c=m2();l={blockedOn:null,target:l,priority:c};for(var y=0;y<Mo.length&&c!==0&&c<Mo[y].priority;y++);Mo.splice(y,0,l),y===0&&v2(l)}};function lE(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function gw(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function SR(){}function V9(l,c,y,x,O){if(O){if(typeof x=="function"){var j=x;x=function(){var we=pw(K);j.call(we)}}var K=ER(c,x,l,0,null,!1,!1,"",SR);return l._reactRootContainer=K,l[Ua]=K.current,Ig(l.nodeType===8?l.parentNode:l),xh(),K}for(;O=l.lastChild;)l.removeChild(O);if(typeof x=="function"){var oe=x;x=function(){var we=pw(ce);oe.call(we)}}var ce=sE(l,0,!1,null,null,!1,!1,"",SR);return l._reactRootContainer=ce,l[Ua]=ce.current,Ig(l.nodeType===8?l.parentNode:l),xh(function(){fw(c,ce,y,x)}),ce}function yw(l,c,y,x,O){var j=y._reactRootContainer;if(j){var K=j;if(typeof O=="function"){var oe=O;O=function(){var ce=pw(K);oe.call(ce)}}fw(c,K,l,O)}else K=V9(y,c,l,O,x);return pw(K)}f2=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var y=ou(c.pendingLanes);y!==0&&(uu(c,y|1),Pi(c,ln()),(Ut&6)===0&&(Yf=ln()+500,vu()))}break;case 13:xh(function(){var x=$a(l,1);if(x!==null){var O=ui();ho(x,l,1,O)}}),oE(l,1)}},Af=function(l){if(l.tag===13){var c=$a(l,134217728);if(c!==null){var y=ui();ho(c,l,134217728,y)}oE(l,134217728)}},p2=function(l){if(l.tag===13){var c=Cu(l),y=$a(l,c);if(y!==null){var x=ui();ho(y,l,c,x)}oE(l,c)}},m2=function(){return Lt},g2=function(l,c){var y=Lt;try{return Lt=l,c()}finally{Lt=y}},df=function(l,c,y){switch(c){case"input":if(mt(l,y),c=y.name,y.type==="radio"&&c!=null){for(y=l;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<y.length;c++){var x=y[c];if(x!==l&&x.form===l.form){var O=O2(x);if(!O)throw Error(t(90));xe(x),mt(x,O)}}}break;case"textarea":qe(l,y);break;case"select":c=y.value,c!=null&&Re(l,!!y.multiple,c,!1)}},sh=Zb,ug=xh;var H9={usingClientEntryPoint:!1,Events:[Rg,Mf,O2,Lo,lg,Zb]},$g={findFiberByHostInstance:yh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z9={bundleType:$g.bundleType,version:$g.version,rendererPackageName:$g.rendererPackageName,rendererConfig:$g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=dg(l),l===null?null:l.stateNode},findFiberByHostInstance:$g.findFiberByHostInstance||U9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vw.isDisabled&&vw.supportsFiber)try{ch=vw.inject(z9),Hi=vw}catch{}}return Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H9,Ni.createPortal=function(l,c){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lE(c))throw Error(t(200));return q9(l,c,null,y)},Ni.createRoot=function(l,c){if(!lE(l))throw Error(t(299));var y=!1,x="",O=xR;return c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(O=c.onRecoverableError)),c=sE(l,1,!1,null,null,y,!1,x,O),l[Ua]=c.current,Ig(l.nodeType===8?l.parentNode:l),new aE(c)},Ni.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=dg(c),l=l===null?null:l.stateNode,l},Ni.flushSync=function(l){return xh(l)},Ni.hydrate=function(l,c,y){if(!gw(c))throw Error(t(200));return yw(null,l,c,!0,y)},Ni.hydrateRoot=function(l,c,y){if(!lE(l))throw Error(t(405));var x=y!=null&&y.hydratedSources||null,O=!1,j="",K=xR;if(y!=null&&(y.unstable_strictMode===!0&&(O=!0),y.identifierPrefix!==void 0&&(j=y.identifierPrefix),y.onRecoverableError!==void 0&&(K=y.onRecoverableError)),c=ER(c,null,l,1,y??null,O,!1,j,K),l[Ua]=c.current,Ig(l),x)for(l=0;l<x.length;l++)y=x[l],O=y._getVersion,O=O(y._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[y,O]:c.mutableSourceEagerHydrationData.push(y,O);return new mw(c)},Ni.render=function(l,c,y){if(!gw(c))throw Error(t(200));return yw(null,l,c,!1,y)},Ni.unmountComponentAtNode=function(l){if(!gw(l))throw Error(t(40));return l._reactRootContainer?(xh(function(){yw(null,null,l,!1,function(){l._reactRootContainer=null,l[Ua]=null})}),!0):!1},Ni.unstable_batchedUpdates=Zb,Ni.unstable_renderSubtreeIntoContainer=function(l,c,y,x){if(!gw(y))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return yw(l,c,y,!1,x)},Ni.version="18.3.1-next-f1338f8080-20240426",Ni}var LR;function CT(){if(LR)return dE.exports;LR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),dE.exports=Z9(),dE.exports}var FR;function e6(){if(FR)return ww;FR=1;var i=CT();return ww.createRoot=i.createRoot,ww.hydrateRoot=i.hydrateRoot,ww}var t6=e6();const n6=()=>{};var MR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},r6=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[t++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[t++],o=i[t++],a=i[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[t++],o=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,a=o?i[r+1]:0,u=r+2<i.length,h=u?i[r+2]:0,d=s>>2,m=(s&3)<<4|a>>4;let p=(a&15)<<2|h>>6,g=h&63;u||(g=64,o||(p=64)),n.push(t[d],t[m],t[p],t[g])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(yF(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):r6(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=t[i.charAt(r++)],a=r<i.length?t[i.charAt(r)]:0;++r;const h=r<i.length?t[i.charAt(r)]:64;++r;const m=r<i.length?t[i.charAt(r)]:64;if(++r,s==null||a==null||h==null||m==null)throw new i6;const p=s<<2|a>>4;if(n.push(p),h!==64){const g=a<<4&240|h>>2;if(n.push(g),m!==64){const w=h<<6&192|m;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class i6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s6=function(i){const e=yF(i);return vF.encodeByteArray(e,!0)},O_=function(i){return s6(i).replace(/\./g,"")},wF=function(i){try{return vF.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=()=>o6().__FIREBASE_DEFAULTS__,l6=()=>{if(typeof process>"u"||typeof MR>"u")return;const i=MR.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},u6=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&wF(i[1]);return e&&JSON.parse(e)},B1=()=>{try{return n6()||a6()||l6()||u6()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},_F=i=>{var e,t;return(t=(e=B1())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},AF=i=>{const e=_F(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},bF=()=>{var i;return(i=B1())===null||i===void 0?void 0:i.config},EF=i=>{var e;return(e=B1())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i){return i.endsWith(".cloudworkstations.dev")}async function xT(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[O_(JSON.stringify(t)),O_(JSON.stringify(o)),""].join(".")}const Dy={};function h6(){const i={prod:[],emulator:[]};for(const e of Object.keys(Dy))Dy[e]?i.emulator.push(e):i.prod.push(e);return i}function d6(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let BR=!1;function ST(i,e){if(typeof window>"u"||typeof document>"u"||!Yc(window.location.host)||Dy[i]===e||Dy[i]||BR)return;Dy[i]=e;function t(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=h6().prod.length>0;function o(){const p=document.getElementById(n);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function h(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{BR=!0,o()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=d6(n),g=t("text"),w=document.getElementById(g)||document.createElement("span"),_=t("learnmore"),A=document.getElementById(_)||document.createElement("a"),v=t("preprendIcon"),E=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),d(A,_);const S=h();u(E,v),I.append(E,w,A,S),document.body.appendChild(I)}s?(w.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function p6(){var i;const e=(i=B1())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function g6(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function y6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v6(){const i=si();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function w6(){return!p6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _6(){try{return typeof indexedDB=="object"}catch{return!1}}function A6(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="FirebaseError";class Ra extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=b6,Object.setPrototypeOf(this,Ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,F0.prototype.create)}}class F0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?E6(s,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ra(r,a,n)}}function E6(i,e){return i.replace(C6,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const C6=/\{\$([^}]+)}/g;function x6(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function zd(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const s=i[r],o=e[r];if(jR(s)&&jR(o)){if(!zd(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function jR(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ey(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ty(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function S6(i,e){const t=new T6(i,e);return t.subscribe.bind(t)}class T6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");I6(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=mE),r.error===void 0&&(r.error=mE),r.complete===void 0&&(r.complete=mE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I6(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function mE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(i){return i&&i._delegate?i._delegate:i}class Fc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new c6;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R6(e))try{this.getOrInitializeService({instanceIdentifier:Dh})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=Dh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dh){return this.instances.has(e)}getOptions(e=Dh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:k6(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Dh){return this.component?this.component.multipleInstances?e:Dh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k6(i){return i===Dh?void 0:i}function R6(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pt||(Pt={}));const N6={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},O6=Pt.INFO,L6={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},F6=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=L6[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class TT{constructor(e){this.name=e,this._logLevel=O6,this._logHandler=F6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const M6=(i,e)=>e.some(t=>i instanceof t);let qR,UR;function B6(){return qR||(qR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j6(){return UR||(UR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xF=new WeakMap,Cx=new WeakMap,SF=new WeakMap,gE=new WeakMap,IT=new WeakMap;function q6(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{t(Pc(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&xF.set(t,i)}).catch(()=>{}),IT.set(e,i),e}function U6(i){if(Cx.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});Cx.set(i,e)}let xx={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Cx.get(i);if(e==="objectStoreNames")return i.objectStoreNames||SF.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pc(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function V6(i){xx=i(xx)}function H6(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(yE(this),e,...t);return SF.set(n,e.sort?e.sort():[e]),Pc(n)}:j6().includes(i)?function(...e){return i.apply(yE(this),e),Pc(xF.get(this))}:function(...e){return Pc(i.apply(yE(this),e))}}function z6(i){return typeof i=="function"?H6(i):(i instanceof IDBTransaction&&U6(i),M6(i,B6())?new Proxy(i,xx):i)}function Pc(i){if(i instanceof IDBRequest)return q6(i);if(gE.has(i))return gE.get(i);const e=z6(i);return e!==i&&(gE.set(i,e),IT.set(e,i)),e}const yE=i=>IT.get(i);function $6(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,e),a=Pc(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Pc(o.result),u.oldVersion,u.newVersion,Pc(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const W6=["get","getKey","getAll","getAllKeys","count"],G6=["put","add","delete","clear"],vE=new Map;function VR(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(vE.get(e))return vE.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=G6.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||W6.includes(t)))return;const s=async function(o,...a){const u=this.transaction(o,r?"readwrite":"readonly");let h=u.store;return n&&(h=h.index(a.shift())),(await Promise.all([h[t](...a),r&&u.done]))[0]};return vE.set(e,s),s}V6(i=>({...i,get:(e,t,n)=>VR(e,t)||i.get(e,t,n),has:(e,t)=>!!VR(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(J6(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function J6(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sx="@firebase/app",HR="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new TT("@firebase/app"),Y6="@firebase/app-compat",X6="@firebase/analytics-compat",Q6="@firebase/analytics",Z6="@firebase/app-check-compat",eq="@firebase/app-check",tq="@firebase/auth",nq="@firebase/auth-compat",rq="@firebase/database",iq="@firebase/data-connect",sq="@firebase/database-compat",oq="@firebase/functions",aq="@firebase/functions-compat",lq="@firebase/installations",uq="@firebase/installations-compat",cq="@firebase/messaging",hq="@firebase/messaging-compat",dq="@firebase/performance",fq="@firebase/performance-compat",pq="@firebase/remote-config",mq="@firebase/remote-config-compat",gq="@firebase/storage",yq="@firebase/storage-compat",vq="@firebase/firestore",wq="@firebase/ai",_q="@firebase/firestore-compat",Aq="firebase",bq="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="[DEFAULT]",Eq={[Sx]:"fire-core",[Y6]:"fire-core-compat",[Q6]:"fire-analytics",[X6]:"fire-analytics-compat",[eq]:"fire-app-check",[Z6]:"fire-app-check-compat",[tq]:"fire-auth",[nq]:"fire-auth-compat",[rq]:"fire-rtdb",[iq]:"fire-data-connect",[sq]:"fire-rtdb-compat",[oq]:"fire-fn",[aq]:"fire-fn-compat",[lq]:"fire-iid",[uq]:"fire-iid-compat",[cq]:"fire-fcm",[hq]:"fire-fcm-compat",[dq]:"fire-perf",[fq]:"fire-perf-compat",[pq]:"fire-rc",[mq]:"fire-rc-compat",[gq]:"fire-gcs",[yq]:"fire-gcs-compat",[vq]:"fire-fst",[_q]:"fire-fst-compat",[wq]:"fire-vertex","fire-js":"fire-js",[Aq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map,Cq=new Map,Ix=new Map;function zR(i,e){try{i.container.addComponent(e)}catch(t){Gl.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function $d(i){const e=i.name;if(Ix.has(e))return Gl.debug(`There were multiple attempts to register component ${e}.`),!1;Ix.set(e,i);for(const t of L_.values())zR(t,i);for(const t of Cq.values())zR(t,i);return!0}function j1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ys(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nc=new F0("app","Firebase",xq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=bq;function TF(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Tx,automaticDataCollectionEnabled:!0},e),r=n.name;if(typeof r!="string"||!r)throw Nc.create("bad-app-name",{appName:String(r)});if(t||(t=bF()),!t)throw Nc.create("no-options");const s=L_.get(r);if(s){if(zd(t,s.options)&&zd(n,s.config))return s;throw Nc.create("duplicate-app",{appName:r})}const o=new P6(r);for(const u of Ix.values())o.addComponent(u);const a=new Sq(t,n,o);return L_.set(r,a),a}function DT(i=Tx){const e=L_.get(i);if(!e&&i===Tx&&bF())return TF();if(!e)throw Nc.create("no-app",{appName:i});return e}function _a(i,e,t){var n;let r=(n=Eq[i])!==null&&n!==void 0?n:i;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gl.warn(a.join(" "));return}$d(new Fc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq="firebase-heartbeat-database",Iq=1,By="firebase-heartbeat-store";let wE=null;function IF(){return wE||(wE=$6(Tq,Iq,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(By)}catch(t){console.warn(t)}}}}).catch(i=>{throw Nc.create("idb-open",{originalErrorMessage:i.message})})),wE}async function Dq(i){try{const t=(await IF()).transaction(By),n=await t.objectStore(By).get(DF(i));return await t.done,n}catch(e){if(e instanceof Ra)Gl.warn(e.message);else{const t=Nc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gl.warn(t.message)}}}async function $R(i,e){try{const n=(await IF()).transaction(By,"readwrite");await n.objectStore(By).put(e,DF(i)),await n.done}catch(t){if(t instanceof Ra)Gl.warn(t.message);else{const n=Nc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gl.warn(n.message)}}}function DF(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=1024,Rq=30;class Pq{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Oq(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=WR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Rq){const o=Lq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Gl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=WR(),{heartbeatsToSend:n,unsentEntries:r}=Nq(this._heartbeatsCache.heartbeats),s=O_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Gl.warn(t),""}}}function WR(){return new Date().toISOString().substring(0,10)}function Nq(i,e=kq){const t=[];let n=i.slice();for(const r of i){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),GR(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),GR(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Oq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _6()?A6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Dq(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return $R(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return $R(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function GR(i){return O_(JSON.stringify({version:2,heartbeats:i})).length}function Lq(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(i){$d(new Fc("platform-logger",e=>new K6(e),"PRIVATE")),$d(new Fc("heartbeat",e=>new Pq(e),"PRIVATE")),_a(Sx,HR,i),_a(Sx,HR,"esm2017"),_a("fire-js","")}Fq("");var Mq="firebase",Bq="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_a(Mq,Bq,"app");var KR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oc,kF;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,T){function D(){}D.prototype=T.prototype,k.D=T.prototype,k.prototype=new D,k.prototype.constructor=k,k.C=function(P,N,L){for(var M=Array(arguments.length-2),$=2;$<arguments.length;$++)M[$-2]=arguments[$];return T.prototype[N].apply(P,M)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,T,D){D||(D=0);var P=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)P[N]=T.charCodeAt(D++)|T.charCodeAt(D++)<<8|T.charCodeAt(D++)<<16|T.charCodeAt(D++)<<24;else for(N=0;16>N;++N)P[N]=T[D++]|T[D++]<<8|T[D++]<<16|T[D++]<<24;T=k.g[0],D=k.g[1],N=k.g[2];var L=k.g[3],M=T+(L^D&(N^L))+P[0]+3614090360&4294967295;T=D+(M<<7&4294967295|M>>>25),M=L+(N^T&(D^N))+P[1]+3905402710&4294967295,L=T+(M<<12&4294967295|M>>>20),M=N+(D^L&(T^D))+P[2]+606105819&4294967295,N=L+(M<<17&4294967295|M>>>15),M=D+(T^N&(L^T))+P[3]+3250441966&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(L^D&(N^L))+P[4]+4118548399&4294967295,T=D+(M<<7&4294967295|M>>>25),M=L+(N^T&(D^N))+P[5]+1200080426&4294967295,L=T+(M<<12&4294967295|M>>>20),M=N+(D^L&(T^D))+P[6]+2821735955&4294967295,N=L+(M<<17&4294967295|M>>>15),M=D+(T^N&(L^T))+P[7]+4249261313&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(L^D&(N^L))+P[8]+1770035416&4294967295,T=D+(M<<7&4294967295|M>>>25),M=L+(N^T&(D^N))+P[9]+2336552879&4294967295,L=T+(M<<12&4294967295|M>>>20),M=N+(D^L&(T^D))+P[10]+4294925233&4294967295,N=L+(M<<17&4294967295|M>>>15),M=D+(T^N&(L^T))+P[11]+2304563134&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(L^D&(N^L))+P[12]+1804603682&4294967295,T=D+(M<<7&4294967295|M>>>25),M=L+(N^T&(D^N))+P[13]+4254626195&4294967295,L=T+(M<<12&4294967295|M>>>20),M=N+(D^L&(T^D))+P[14]+2792965006&4294967295,N=L+(M<<17&4294967295|M>>>15),M=D+(T^N&(L^T))+P[15]+1236535329&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(N^L&(D^N))+P[1]+4129170786&4294967295,T=D+(M<<5&4294967295|M>>>27),M=L+(D^N&(T^D))+P[6]+3225465664&4294967295,L=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(L^T))+P[11]+643717713&4294967295,N=L+(M<<14&4294967295|M>>>18),M=D+(L^T&(N^L))+P[0]+3921069994&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(N^L&(D^N))+P[5]+3593408605&4294967295,T=D+(M<<5&4294967295|M>>>27),M=L+(D^N&(T^D))+P[10]+38016083&4294967295,L=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(L^T))+P[15]+3634488961&4294967295,N=L+(M<<14&4294967295|M>>>18),M=D+(L^T&(N^L))+P[4]+3889429448&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(N^L&(D^N))+P[9]+568446438&4294967295,T=D+(M<<5&4294967295|M>>>27),M=L+(D^N&(T^D))+P[14]+3275163606&4294967295,L=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(L^T))+P[3]+4107603335&4294967295,N=L+(M<<14&4294967295|M>>>18),M=D+(L^T&(N^L))+P[8]+1163531501&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(N^L&(D^N))+P[13]+2850285829&4294967295,T=D+(M<<5&4294967295|M>>>27),M=L+(D^N&(T^D))+P[2]+4243563512&4294967295,L=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(L^T))+P[7]+1735328473&4294967295,N=L+(M<<14&4294967295|M>>>18),M=D+(L^T&(N^L))+P[12]+2368359562&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(D^N^L)+P[5]+4294588738&4294967295,T=D+(M<<4&4294967295|M>>>28),M=L+(T^D^N)+P[8]+2272392833&4294967295,L=T+(M<<11&4294967295|M>>>21),M=N+(L^T^D)+P[11]+1839030562&4294967295,N=L+(M<<16&4294967295|M>>>16),M=D+(N^L^T)+P[14]+4259657740&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(D^N^L)+P[1]+2763975236&4294967295,T=D+(M<<4&4294967295|M>>>28),M=L+(T^D^N)+P[4]+1272893353&4294967295,L=T+(M<<11&4294967295|M>>>21),M=N+(L^T^D)+P[7]+4139469664&4294967295,N=L+(M<<16&4294967295|M>>>16),M=D+(N^L^T)+P[10]+3200236656&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(D^N^L)+P[13]+681279174&4294967295,T=D+(M<<4&4294967295|M>>>28),M=L+(T^D^N)+P[0]+3936430074&4294967295,L=T+(M<<11&4294967295|M>>>21),M=N+(L^T^D)+P[3]+3572445317&4294967295,N=L+(M<<16&4294967295|M>>>16),M=D+(N^L^T)+P[6]+76029189&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(D^N^L)+P[9]+3654602809&4294967295,T=D+(M<<4&4294967295|M>>>28),M=L+(T^D^N)+P[12]+3873151461&4294967295,L=T+(M<<11&4294967295|M>>>21),M=N+(L^T^D)+P[15]+530742520&4294967295,N=L+(M<<16&4294967295|M>>>16),M=D+(N^L^T)+P[2]+3299628645&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(N^(D|~L))+P[0]+4096336452&4294967295,T=D+(M<<6&4294967295|M>>>26),M=L+(D^(T|~N))+P[7]+1126891415&4294967295,L=T+(M<<10&4294967295|M>>>22),M=N+(T^(L|~D))+P[14]+2878612391&4294967295,N=L+(M<<15&4294967295|M>>>17),M=D+(L^(N|~T))+P[5]+4237533241&4294967295,D=N+(M<<21&4294967295|M>>>11),M=T+(N^(D|~L))+P[12]+1700485571&4294967295,T=D+(M<<6&4294967295|M>>>26),M=L+(D^(T|~N))+P[3]+2399980690&4294967295,L=T+(M<<10&4294967295|M>>>22),M=N+(T^(L|~D))+P[10]+4293915773&4294967295,N=L+(M<<15&4294967295|M>>>17),M=D+(L^(N|~T))+P[1]+2240044497&4294967295,D=N+(M<<21&4294967295|M>>>11),M=T+(N^(D|~L))+P[8]+1873313359&4294967295,T=D+(M<<6&4294967295|M>>>26),M=L+(D^(T|~N))+P[15]+4264355552&4294967295,L=T+(M<<10&4294967295|M>>>22),M=N+(T^(L|~D))+P[6]+2734768916&4294967295,N=L+(M<<15&4294967295|M>>>17),M=D+(L^(N|~T))+P[13]+1309151649&4294967295,D=N+(M<<21&4294967295|M>>>11),M=T+(N^(D|~L))+P[4]+4149444226&4294967295,T=D+(M<<6&4294967295|M>>>26),M=L+(D^(T|~N))+P[11]+3174756917&4294967295,L=T+(M<<10&4294967295|M>>>22),M=N+(T^(L|~D))+P[2]+718787259&4294967295,N=L+(M<<15&4294967295|M>>>17),M=D+(L^(N|~T))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+T&4294967295,k.g[1]=k.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+L&4294967295}n.prototype.u=function(k,T){T===void 0&&(T=k.length);for(var D=T-this.blockSize,P=this.B,N=this.h,L=0;L<T;){if(N==0)for(;L<=D;)r(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<T;)if(P[N++]=k.charCodeAt(L++),N==this.blockSize){r(this,P),N=0;break}}else for(;L<T;)if(P[N++]=k[L++],N==this.blockSize){r(this,P),N=0;break}}this.h=N,this.o+=T},n.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var T=1;T<k.length-8;++T)k[T]=0;var D=8*this.o;for(T=k.length-8;T<k.length;++T)k[T]=D&255,D/=256;for(this.u(k),k=Array(16),T=D=0;4>T;++T)for(var P=0;32>P;P+=8)k[D++]=this.g[T]>>>P&255;return k};function s(k,T){var D=a;return Object.prototype.hasOwnProperty.call(D,k)?D[k]:D[k]=T(k)}function o(k,T){this.h=T;for(var D=[],P=!0,N=k.length-1;0<=N;N--){var L=k[N]|0;P&&L==T||(D[N]=L,P=!1)}this.g=D}var a={};function u(k){return-128<=k&&128>k?s(k,function(T){return new o([T|0],0>T?-1:0)}):new o([k|0],0>k?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return A(h(-k));for(var T=[],D=1,P=0;k>=D;P++)T[P]=k/D|0,D*=4294967296;return new o(T,0)}function d(k,T){if(k.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k.charAt(0)=="-")return A(d(k.substring(1),T));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=h(Math.pow(T,8)),P=m,N=0;N<k.length;N+=8){var L=Math.min(8,k.length-N),M=parseInt(k.substring(N,N+L),T);8>L?(L=h(Math.pow(T,L)),P=P.j(L).add(h(M))):(P=P.j(D),P=P.add(h(M)))}return P}var m=u(0),p=u(1),g=u(16777216);i=o.prototype,i.m=function(){if(_(this))return-A(this).m();for(var k=0,T=1,D=0;D<this.g.length;D++){var P=this.i(D);k+=(0<=P?P:4294967296+P)*T,T*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(_(this))return"-"+A(this).toString(k);for(var T=h(Math.pow(k,6)),D=this,P="";;){var N=S(D,T).g;D=v(D,N.j(T));var L=((0<D.g.length?D.g[0]:D.h)>>>0).toString(k);if(D=N,w(D))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(var T=0;T<k.g.length;T++)if(k.g[T]!=0)return!1;return!0}function _(k){return k.h==-1}i.l=function(k){return k=v(this,k),_(k)?-1:w(k)?0:1};function A(k){for(var T=k.g.length,D=[],P=0;P<T;P++)D[P]=~k.g[P];return new o(D,~k.h).add(p)}i.abs=function(){return _(this)?A(this):this},i.add=function(k){for(var T=Math.max(this.g.length,k.g.length),D=[],P=0,N=0;N<=T;N++){var L=P+(this.i(N)&65535)+(k.i(N)&65535),M=(L>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);P=M>>>16,L&=65535,M&=65535,D[N]=M<<16|L}return new o(D,D[D.length-1]&-2147483648?-1:0)};function v(k,T){return k.add(A(T))}i.j=function(k){if(w(this)||w(k))return m;if(_(this))return _(k)?A(this).j(A(k)):A(A(this).j(k));if(_(k))return A(this.j(A(k)));if(0>this.l(g)&&0>k.l(g))return h(this.m()*k.m());for(var T=this.g.length+k.g.length,D=[],P=0;P<2*T;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<k.g.length;N++){var L=this.i(P)>>>16,M=this.i(P)&65535,$=k.i(N)>>>16,Q=k.i(N)&65535;D[2*P+2*N]+=M*Q,E(D,2*P+2*N),D[2*P+2*N+1]+=L*Q,E(D,2*P+2*N+1),D[2*P+2*N+1]+=M*$,E(D,2*P+2*N+1),D[2*P+2*N+2]+=L*$,E(D,2*P+2*N+2)}for(P=0;P<T;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=T;P<2*T;P++)D[P]=0;return new o(D,0)};function E(k,T){for(;(k[T]&65535)!=k[T];)k[T+1]+=k[T]>>>16,k[T]&=65535,T++}function I(k,T){this.g=k,this.h=T}function S(k,T){if(w(T))throw Error("division by zero");if(w(k))return new I(m,m);if(_(k))return T=S(A(k),T),new I(A(T.g),A(T.h));if(_(T))return T=S(k,A(T)),new I(A(T.g),T.h);if(30<k.g.length){if(_(k)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var D=p,P=T;0>=P.l(k);)D=R(D),P=R(P);var N=F(D,1),L=F(P,1);for(P=F(P,2),D=F(D,2);!w(P);){var M=L.add(P);0>=M.l(k)&&(N=N.add(D),L=M),P=F(P,1),D=F(D,1)}return T=v(k,N.j(T)),new I(N,T)}for(N=m;0<=k.l(T);){for(D=Math.max(1,Math.floor(k.m()/T.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=h(D),M=L.j(T);_(M)||0<M.l(k);)D-=P,L=h(D),M=L.j(T);w(L)&&(L=p),N=N.add(L),k=v(k,M)}return new I(N,k)}i.A=function(k){return S(this,k).h},i.and=function(k){for(var T=Math.max(this.g.length,k.g.length),D=[],P=0;P<T;P++)D[P]=this.i(P)&k.i(P);return new o(D,this.h&k.h)},i.or=function(k){for(var T=Math.max(this.g.length,k.g.length),D=[],P=0;P<T;P++)D[P]=this.i(P)|k.i(P);return new o(D,this.h|k.h)},i.xor=function(k){for(var T=Math.max(this.g.length,k.g.length),D=[],P=0;P<T;P++)D[P]=this.i(P)^k.i(P);return new o(D,this.h^k.h)};function R(k){for(var T=k.g.length+1,D=[],P=0;P<T;P++)D[P]=k.i(P)<<1|k.i(P-1)>>>31;return new o(D,k.h)}function F(k,T){var D=T>>5;T%=32;for(var P=k.g.length-D,N=[],L=0;L<P;L++)N[L]=0<T?k.i(L+D)>>>T|k.i(L+D+1)<<32-T:k.i(L+D);return new o(N,k.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,kF=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Oc=o}).apply(typeof KR<"u"?KR:typeof self<"u"?self:typeof window<"u"?window:{});var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RF,ny,PF,Uw,Dx,NF,OF,LF;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,B,V){return b==Array.prototype||b==Object.prototype||(b[B]=V.value),b};function t(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof _w=="object"&&_w];for(var B=0;B<b.length;++B){var V=b[B];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=t(this);function r(b,B){if(B)e:{var V=n;b=b.split(".");for(var Z=0;Z<b.length-1;Z++){var pe=b[Z];if(!(pe in V))break e;V=V[pe]}b=b[b.length-1],Z=V[b],B=B(Z),B!=Z&&B!=null&&e(V,b,{configurable:!0,writable:!0,value:B})}}function s(b,B){b instanceof String&&(b+="");var V=0,Z=!1,pe={next:function(){if(!Z&&V<b.length){var _e=V++;return{value:B(_e,b[_e]),done:!1}}return Z=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}r("Array.prototype.values",function(b){return b||function(){return s(this,function(B,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(b){var B=typeof b;return B=B!="object"?B:b?Array.isArray(b)?"array":B:"null",B=="array"||B=="object"&&typeof b.length=="number"}function h(b){var B=typeof b;return B=="object"&&b!=null||B=="function"}function d(b,B,V){return b.call.apply(b.bind,arguments)}function m(b,B,V){if(!b)throw Error();if(2<arguments.length){var Z=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,Z),b.apply(B,pe)}}return function(){return b.apply(B,arguments)}}function p(b,B,V){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,p.apply(null,arguments)}function g(b,B){var V=Array.prototype.slice.call(arguments,1);return function(){var Z=V.slice();return Z.push.apply(Z,arguments),b.apply(this,Z)}}function w(b,B){function V(){}V.prototype=B.prototype,b.aa=B.prototype,b.prototype=new V,b.prototype.constructor=b,b.Qb=function(Z,pe,_e){for(var Le=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)Le[Yt-2]=arguments[Yt];return B.prototype[pe].apply(Z,Le)}}function _(b){const B=b.length;if(0<B){const V=Array(B);for(let Z=0;Z<B;Z++)V[Z]=b[Z];return V}return[]}function A(b,B){for(let V=1;V<arguments.length;V++){const Z=arguments[V];if(u(Z)){const pe=b.length||0,_e=Z.length||0;b.length=pe+_e;for(let Le=0;Le<_e;Le++)b[pe+Le]=Z[Le]}else b.push(Z)}}class v{constructor(B,V){this.i=B,this.j=V,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function E(b){return/^[\s\xa0]*$/.test(b)}function I(){var b=a.navigator;return b&&(b=b.userAgent)?b:""}function S(b){return S[" "](b),b}S[" "]=function(){};var R=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function F(b,B,V){for(const Z in b)B.call(V,b[Z],Z,b)}function k(b,B){for(const V in b)B.call(void 0,b[V],V,b)}function T(b){const B={};for(const V in b)B[V]=b[V];return B}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(b,B){let V,Z;for(let pe=1;pe<arguments.length;pe++){Z=arguments[pe];for(V in Z)b[V]=Z[V];for(let _e=0;_e<D.length;_e++)V=D[_e],Object.prototype.hasOwnProperty.call(Z,V)&&(b[V]=Z[V])}}function N(b){var B=1;b=b.split(":");const V=[];for(;0<B&&b.length;)V.push(b.shift()),B--;return b.length&&V.push(b.join(":")),V}function L(b){a.setTimeout(()=>{throw b},0)}function M(){var b=Y;let B=null;return b.g&&(B=b.g,b.g=b.g.next,b.g||(b.h=null),B.next=null),B}class ${constructor(){this.h=this.g=null}add(B,V){const Z=Q.get();Z.set(B,V),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var Q=new v(()=>new re,b=>b.reset());class re{constructor(){this.next=this.g=this.h=null}set(B,V){this.h=B,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ue=!1,Y=new $,J=()=>{const b=a.Promise.resolve(void 0);ee=()=>{b.then(q)}};var q=()=>{for(var b;b=M();){try{b.h.call(b.g)}catch(V){L(V)}var B=Q;B.j(b),100>B.h&&(B.h++,b.next=B.g,B.g=b)}ue=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(b,B){this.type=b,this.g=this.target=B,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,B=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const V=()=>{};a.addEventListener("test",V,B),a.removeEventListener("test",V,B)}catch{}return b}();function se(b,B){if(G.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var V=this.type=b.type,Z=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=B,B=b.relatedTarget){if(R){e:{try{S(B.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(B=null)}}else V=="mouseover"?B=b.fromElement:V=="mouseout"&&(B=b.toElement);this.relatedTarget=B,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:X[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&se.aa.h.call(this)}}w(se,G);var X={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),te=0;function ae(b,B,V,Z,pe){this.listener=b,this.proxy=null,this.src=B,this.type=V,this.capture=!!Z,this.ha=pe,this.key=++te,this.da=this.fa=!1}function de(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function ye(b){this.src=b,this.g={},this.h=0}ye.prototype.add=function(b,B,V,Z,pe){var _e=b.toString();b=this.g[_e],b||(b=this.g[_e]=[],this.h++);var Le=Oe(b,B,Z,pe);return-1<Le?(B=b[Le],V||(B.fa=!1)):(B=new ae(B,this.src,_e,!!Z,pe),B.fa=V,b.push(B)),B};function xe(b,B){var V=B.type;if(V in b.g){var Z=b.g[V],pe=Array.prototype.indexOf.call(Z,B,void 0),_e;(_e=0<=pe)&&Array.prototype.splice.call(Z,pe,1),_e&&(de(B),b.g[V].length==0&&(delete b.g[V],b.h--))}}function Oe(b,B,V,Z){for(var pe=0;pe<b.length;++pe){var _e=b[pe];if(!_e.da&&_e.listener==B&&_e.capture==!!V&&_e.ha==Z)return pe}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),Be={};function $e(b,B,V,Z,pe){if(Array.isArray(B)){for(var _e=0;_e<B.length;_e++)$e(b,B[_e],V,Z,pe);return null}return V=Qe(V),b&&b[ne]?b.K(B,V,h(Z)?!!Z.capture:!1,pe):mt(b,B,V,!1,Z,pe)}function mt(b,B,V,Z,pe,_e){if(!B)throw Error("Invalid event type");var Le=h(pe)?!!pe.capture:!!pe,Yt=rt(b);if(Yt||(b[Fe]=Yt=new ye(b)),V=Yt.add(B,V,Z,Le,_e),V.proxy)return V;if(Z=fe(),V.proxy=Z,Z.src=b,Z.listener=V,b.addEventListener)le||(pe=Le),pe===void 0&&(pe=!1),b.addEventListener(B.toString(),Z,pe);else if(b.attachEvent)b.attachEvent(Re(B.toString()),Z);else if(b.addListener&&b.removeListener)b.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return V}function fe(){function b(V){return B.call(b.src,b.listener,V)}const B=Ae;return b}function ve(b,B,V,Z,pe){if(Array.isArray(B))for(var _e=0;_e<B.length;_e++)ve(b,B[_e],V,Z,pe);else Z=h(Z)?!!Z.capture:!!Z,V=Qe(V),b&&b[ne]?(b=b.i,B=String(B).toString(),B in b.g&&(_e=b.g[B],V=Oe(_e,V,Z,pe),-1<V&&(de(_e[V]),Array.prototype.splice.call(_e,V,1),_e.length==0&&(delete b.g[B],b.h--)))):b&&(b=rt(b))&&(B=b.g[B.toString()],b=-1,B&&(b=Oe(B,V,Z,pe)),(V=-1<b?B[b]:null)&&Ie(V))}function Ie(b){if(typeof b!="number"&&b&&!b.da){var B=b.src;if(B&&B[ne])xe(B.i,b);else{var V=b.type,Z=b.proxy;B.removeEventListener?B.removeEventListener(V,Z,b.capture):B.detachEvent?B.detachEvent(Re(V),Z):B.addListener&&B.removeListener&&B.removeListener(Z),(V=rt(B))?(xe(V,b),V.h==0&&(V.src=null,B[Fe]=null)):de(b)}}}function Re(b){return b in Be?Be[b]:Be[b]="on"+b}function Ae(b,B){if(b.da)b=!0;else{B=new se(B,this);var V=b.listener,Z=b.ha||b.src;b.fa&&Ie(b),b=V.call(Z,B)}return b}function rt(b){return b=b[Fe],b instanceof ye?b:null}var qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qe(b){return typeof b=="function"?b:(b[qe]||(b[qe]=function(B){return b.handleEvent(B)}),b[qe])}function st(){H.call(this),this.i=new ye(this),this.M=this,this.F=null}w(st,H),st.prototype[ne]=!0,st.prototype.removeEventListener=function(b,B,V,Z){ve(this,b,B,V,Z)};function ft(b,B){var V,Z=b.F;if(Z)for(V=[];Z;Z=Z.F)V.push(Z);if(b=b.M,Z=B.type||B,typeof B=="string")B=new G(B,b);else if(B instanceof G)B.target=B.target||b;else{var pe=B;B=new G(Z,b),P(B,pe)}if(pe=!0,V)for(var _e=V.length-1;0<=_e;_e--){var Le=B.g=V[_e];pe=gt(Le,Z,!0,B)&&pe}if(Le=B.g=b,pe=gt(Le,Z,!0,B)&&pe,pe=gt(Le,Z,!1,B)&&pe,V)for(_e=0;_e<V.length;_e++)Le=B.g=V[_e],pe=gt(Le,Z,!1,B)&&pe}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var b=this.i,B;for(B in b.g){for(var V=b.g[B],Z=0;Z<V.length;Z++)de(V[Z]);delete b.g[B],b.h--}}this.F=null},st.prototype.K=function(b,B,V,Z){return this.i.add(String(b),B,!1,V,Z)},st.prototype.L=function(b,B,V,Z){return this.i.add(String(b),B,!0,V,Z)};function gt(b,B,V,Z){if(B=b.i.g[String(B)],!B)return!0;B=B.concat();for(var pe=!0,_e=0;_e<B.length;++_e){var Le=B[_e];if(Le&&!Le.da&&Le.capture==V){var Yt=Le.listener,tr=Le.ha||Le.src;Le.fa&&xe(b.i,Le),pe=Yt.call(tr,Z)!==!1&&pe}}return pe&&!Z.defaultPrevented}function xi(b,B,V){if(typeof b=="function")V&&(b=p(b,V));else if(b&&typeof b.handleEvent=="function")b=p(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:a.setTimeout(b,B||0)}function Mt(b){b.g=xi(()=>{b.g=null,b.i&&(b.i=!1,Mt(b))},b.l);const B=b.h;b.h=null,b.m.apply(null,B)}class an extends H{constructor(B,V){super(),this.m=B,this.l=V,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:Mt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hn(b){H.call(this),this.h=b,this.g={}}w(Hn,H);var Ys=[];function iu(b){F(b.g,function(B,V){this.g.hasOwnProperty(V)&&Ie(B)},b),b.g={}}Hn.prototype.N=function(){Hn.aa.N.call(this),iu(this)},Hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sg=a.JSON.stringify,og=a.JSON.parse,ag=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function ih(){}ih.prototype.h=null;function hf(b){return b.h||(b.h=b.i())}function df(){}var Es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oo(){G.call(this,"d")}w(Oo,G);function ff(){G.call(this,"c")}w(ff,G);var Lo={},lg=null;function sh(){return lg=lg||new st}Lo.La="serverreachability";function ug(b){G.call(this,Lo.La,b)}w(ug,G);function La(b){const B=sh();ft(B,new ug(B))}Lo.STAT_EVENT="statevent";function cg(b,B){G.call(this,Lo.STAT_EVENT,b),this.stat=B}w(cg,G);function Mn(b){const B=sh();ft(B,new cg(B,b))}Lo.Ma="timingevent";function pf(b,B){G.call(this,Lo.Ma,b),this.size=B}w(pf,G);function Xs(b,B){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},B)}function oh(){this.g=!0}oh.prototype.xa=function(){this.g=!1};function ah(b,B,V,Z,pe,_e){b.info(function(){if(b.g)if(_e)for(var Le="",Yt=_e.split("&"),tr=0;tr<Yt.length;tr++){var Bt=Yt[tr].split("=");if(1<Bt.length){var mr=Bt[0];Bt=Bt[1];var zn=mr.split("_");Le=2<=zn.length&&zn[1]=="type"?Le+(mr+"="+Bt+"&"):Le+(mr+"=redacted&")}}else Le=null;else Le=_e;return"XMLHTTP REQ ("+Z+") [attempt "+pe+"]: "+B+`
`+V+`
`+Le})}function mf(b,B,V,Z,pe,_e,Le){b.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+pe+"]: "+B+`
`+V+`
`+_e+" "+Le})}function Qs(b,B,V,Z){b.info(function(){return"XMLHTTP TEXT ("+B+"): "+MA(b,V)+(Z?" "+Z:"")})}function hg(b,B){b.info(function(){return"TIMEOUT: "+B})}oh.prototype.info=function(){};function MA(b,B){if(!b.g)return B;if(!B)return null;try{var V=JSON.parse(B);if(V){for(b=0;b<V.length;b++)if(Array.isArray(V[b])){var Z=V[b];if(!(2>Z.length)){var pe=Z[1];if(Array.isArray(pe)&&!(1>pe.length)){var _e=pe[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(var Le=1;Le<pe.length;Le++)pe[Le]=""}}}}return sg(V)}catch{return B}}var gf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},s2={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zs;function lh(){}w(lh,ih),lh.prototype.g=function(){return new XMLHttpRequest},lh.prototype.i=function(){return{}},Zs=new lh;function eo(b,B,V,Z){this.j=b,this.i=B,this.l=V,this.R=Z||1,this.U=new Hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new o2}function o2(){this.i=null,this.g="",this.h=!1}var dg={},yf={};function vf(b,B,V){b.L=1,b.v=uu(zi(B)),b.m=V,b.P=!0,fg(b,null)}function fg(b,B){b.F=Date.now(),ln(b),b.A=zi(b.v);var V=b.A,Z=b.R;Array.isArray(Z)||(Z=[String(Z)]),hu(V.i,"t",Z),b.C=0,V=b.j.J,b.h=new o2,b.g=C2(b.j,V?B:null,!b.m),0<b.O&&(b.M=new an(p(b.Y,b,b.g),b.O)),B=b.U,V=b.g,Z=b.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Ys[0]=pe.toString()),pe=Ys);for(var _e=0;_e<pe.length;_e++){var Le=$e(V,pe[_e],Z||B.handleEvent,!1,B.h||B);if(!Le)break;B.g[Le.key]=Le}B=b.H?T(b.H):{},b.m?(b.u||(b.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,B)):(b.u="GET",b.g.ea(b.A,b.u,null,B)),La(),ah(b.i,b.u,b.A,b.l,b.R,b.m)}eo.prototype.ca=function(b){b=b.target;const B=this.M;B&&Ti(b)==3?B.j():this.Y(b)},eo.prototype.Y=function(b){try{if(b==this.g)e:{const zn=Ti(this.g);var B=this.g.Ba();const Ss=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||wg(this.g)))){this.J||zn!=4||B==7||(B==8||0>=Ss?La(3):La(2)),uh(this);var V=this.g.Z();this.X=V;t:if(a2(this)){var Z=wg(this.g);b="";var pe=Z.length,_e=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),su(this);var Le="";break t}this.h.i=new a.TextDecoder}for(B=0;B<pe;B++)this.h.h=!0,b+=this.h.i.decode(Z[B],{stream:!(_e&&B==pe-1)});Z.length=0,this.h.g+=b,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=V==200,mf(this.i,this.u,this.A,this.l,this.R,zn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Yt,tr=this.g;if((Yt=tr.g?tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Yt)){var Bt=Yt;break t}}Bt=null}if(V=Bt)Qs(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pg(this,V);else{this.o=!1,this.s=3,Mn(12),Cs(this),su(this);break e}}if(this.P){V=!0;let Wi;for(;!this.J&&this.C<Le.length;)if(Wi=BA(this,Le),Wi==yf){zn==4&&(this.s=4,Mn(14),V=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(Wi==dg){this.s=4,Mn(15),Qs(this.i,this.l,Le,"[Invalid Chunk]"),V=!1;break}else Qs(this.i,this.l,Wi,null),pg(this,Wi);if(a2(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||Le.length!=0||this.h.h||(this.s=1,Mn(16),V=!1),this.o=this.o&&V,!V)Qs(this.i,this.l,Le,"[Invalid Chunked Response]"),Cs(this),su(this);else if(0<Le.length&&!this.W){this.W=!0;var mr=this.j;mr.g==this&&mr.ba&&!mr.M&&(mr.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),Ag(mr),mr.M=!0,Mn(11))}}else Qs(this.i,this.l,Le,null),pg(this,Le);zn==4&&Cs(this),this.o&&!this.J&&(zn==4?Df(this.j,this):(this.o=!1,ln(this)))}else Cf(this.g),V==400&&0<Le.indexOf("Unknown SID")?(this.s=3,Mn(12)):(this.s=0,Mn(13)),Cs(this),su(this)}}}catch{}finally{}};function a2(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function BA(b,B){var V=b.C,Z=B.indexOf(`
`,V);return Z==-1?yf:(V=Number(B.substring(V,Z)),isNaN(V)?dg:(Z+=1,Z+V>B.length?yf:(B=B.slice(Z,Z+V),b.C=Z+V,B)))}eo.prototype.cancel=function(){this.J=!0,Cs(this)};function ln(b){b.S=Date.now()+b.I,l2(b,b.I)}function l2(b,B){if(b.B!=null)throw Error("WatchDog timer not null");b.B=Xs(p(b.ba,b),B)}function uh(b){b.B&&(a.clearTimeout(b.B),b.B=null)}eo.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(hg(this.i,this.A),this.L!=2&&(La(),Mn(17)),Cs(this),this.s=2,su(this)):l2(this,this.S-b)};function su(b){b.j.G==0||b.J||Df(b.j,b)}function Cs(b){uh(b);var B=b.M;B&&typeof B.ma=="function"&&B.ma(),b.M=null,iu(b.U),b.g&&(B=b.g,b.g=null,B.abort(),B.ma())}function pg(b,B){try{var V=b.j;if(V.G!=0&&(V.g==b||oi(V.h,b))){if(!b.K&&oi(V.h,b)&&V.G==3){try{var Z=V.Da.g.parse(B)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var pe=Z;if(pe[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<b.F)If(V),so(V);else break e;Tf(V),Mn(18)}}else V.za=pe[1],0<V.za-V.T&&37500>pe[2]&&V.F&&V.v==0&&!V.C&&(V.C=Xs(p(V.Za,V),6e3));if(1>=c2(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else qa(V,11)}else if((b.K||V.g==b)&&If(V),!E(B))for(pe=V.Da.g.parse(B),B=0;B<pe.length;B++){let Bt=pe[B];if(V.T=Bt[0],Bt=Bt[1],V.G==2)if(Bt[0]=="c"){V.K=Bt[1],V.ia=Bt[2];const mr=Bt[3];mr!=null&&(V.la=mr,V.j.info("VER="+V.la));const zn=Bt[4];zn!=null&&(V.Aa=zn,V.j.info("SVER="+V.Aa));const Ss=Bt[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(Z=1.5*Ss,V.L=Z,V.j.info("backChannelRequestTimeoutMs_="+Z)),Z=V;const Wi=b.g;if(Wi){const gh=Wi.g?Wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gh){var _e=Z.h;_e.g||gh.indexOf("spdy")==-1&&gh.indexOf("quic")==-1&&gh.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(mg(_e,_e.h),_e.h=null))}if(Z.D){const Rf=Wi.g?Wi.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(Z.ya=Rf,sn(Z.I,Z.D,Rf))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-b.F,V.j.info("Handshake RTT: "+V.R+"ms")),Z=V;var Le=b;if(Z.qa=E2(Z,Z.J?Z.ia:null,Z.W),Le.K){h2(Z.h,Le);var Yt=Le,tr=Z.L;tr&&(Yt.I=tr),Yt.B&&(uh(Yt),ln(Yt)),Z.g=Le}else mh(Z);0<V.i.length&&jo(V)}else Bt[0]!="stop"&&Bt[0]!="close"||qa(V,7);else V.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?qa(V,7):Dr(V):Bt[0]!="noop"&&V.l&&V.l.ta(Bt),V.v=0)}}La(4)}catch{}}var u2=class{constructor(b,B){this.g=b,this.map=B}};function ch(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hi(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function c2(b){return b.h?1:b.g?b.g.size:0}function oi(b,B){return b.h?b.h==B:b.g?b.g.has(B):!1}function mg(b,B){b.g?b.g.add(B):b.h=B}function h2(b,B){b.h&&b.h==B?b.h=null:b.g&&b.g.has(B)&&b.g.delete(B)}ch.prototype.cancel=function(){if(this.i=d2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function d2(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let B=b.i;for(const V of b.g.values())B=B.concat(V.D);return B}return _(b.i)}function wf(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(u(b)){for(var B=[],V=b.length,Z=0;Z<V;Z++)B.push(b[Z]);return B}B=[],V=0;for(Z in b)B[V++]=b[Z];return B}function _f(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(u(b)||typeof b=="string"){var B=[];b=b.length;for(var V=0;V<b;V++)B.push(V);return B}B=[],V=0;for(const Z in b)B[V++]=Z;return B}}}function ou(b,B){if(b.forEach&&typeof b.forEach=="function")b.forEach(B,void 0);else if(u(b)||typeof b=="string")Array.prototype.forEach.call(b,B,void 0);else for(var V=_f(b),Z=wf(b),pe=Z.length,_e=0;_e<pe;_e++)B.call(void 0,Z[_e],V&&V[_e],b)}var hh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jA(b,B){if(b){b=b.split("&");for(var V=0;V<b.length;V++){var Z=b[V].indexOf("="),pe=null;if(0<=Z){var _e=b[V].substring(0,Z);pe=b[V].substring(Z+1)}else _e=b[V];B(_e,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Fa(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof Fa){this.h=b.h,dh(this,b.j),this.o=b.o,this.g=b.g,au(this,b.s),this.l=b.l;var B=b.i,V=new Fo;V.i=B.i,B.g&&(V.g=new Map(B.g),V.h=B.h),lu(this,V),this.m=b.m}else b&&(B=String(b).match(hh))?(this.h=!1,dh(this,B[1]||"",!0),this.o=Lt(B[2]||""),this.g=Lt(B[3]||"",!0),au(this,B[4]),this.l=Lt(B[5]||"",!0),lu(this,B[6]||"",!0),this.m=Lt(B[7]||"")):(this.h=!1,this.i=new Fo(null,this.h))}Fa.prototype.toString=function(){var b=[],B=this.j;B&&b.push(cu(B,Af,!0),":");var V=this.g;return(V||B=="file")&&(b.push("//"),(B=this.o)&&b.push(cu(B,Af,!0),"@"),b.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&b.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&b.push("/"),b.push(cu(V,V.charAt(0)=="/"?m2:p2,!0))),(V=this.i.toString())&&b.push("?",V),(V=this.m)&&b.push("#",cu(V,gg)),b.join("")};function zi(b){return new Fa(b)}function dh(b,B,V){b.j=V?Lt(B,!0):B,b.j&&(b.j=b.j.replace(/:$/,""))}function au(b,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);b.s=B}else b.s=null}function lu(b,B,V){B instanceof Fo?(b.i=B,Mo(b.i,b.h)):(V||(B=cu(B,g2)),b.i=new Fo(B,b.h))}function sn(b,B,V){b.i.set(B,V)}function uu(b){return sn(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function Lt(b,B){return b?B?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function cu(b,B,V){return typeof b=="string"?(b=encodeURI(b).replace(B,f2),V&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function f2(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Af=/[#\/\?@]/g,p2=/[#\?:]/g,m2=/[#\?]/g,g2=/[#\?@]/g,gg=/#/g;function Fo(b,B){this.h=this.g=null,this.i=b||null,this.j=!!B}function Ir(b){b.g||(b.g=new Map,b.h=0,b.i&&jA(b.i,function(B,V){b.add(decodeURIComponent(B.replace(/\+/g," ")),V)}))}i=Fo.prototype,i.add=function(b,B){Ir(this),this.i=null,b=xs(this,b);var V=this.g.get(b);return V||this.g.set(b,V=[]),V.push(B),this.h+=1,this};function to(b,B){Ir(b),B=xs(b,B),b.g.has(B)&&(b.i=null,b.h-=b.g.get(B).length,b.g.delete(B))}function no(b,B){return Ir(b),B=xs(b,B),b.g.has(B)}i.forEach=function(b,B){Ir(this),this.g.forEach(function(V,Z){V.forEach(function(pe){b.call(B,pe,Z,this)},this)},this)},i.na=function(){Ir(this);const b=Array.from(this.g.values()),B=Array.from(this.g.keys()),V=[];for(let Z=0;Z<B.length;Z++){const pe=b[Z];for(let _e=0;_e<pe.length;_e++)V.push(B[Z])}return V},i.V=function(b){Ir(this);let B=[];if(typeof b=="string")no(this,b)&&(B=B.concat(this.g.get(xs(this,b))));else{b=Array.from(this.g.values());for(let V=0;V<b.length;V++)B=B.concat(b[V])}return B},i.set=function(b,B){return Ir(this),this.i=null,b=xs(this,b),no(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[B]),this.h+=1,this},i.get=function(b,B){return b?(b=this.V(b),0<b.length?String(b[0]):B):B};function hu(b,B,V){to(b,B),0<V.length&&(b.i=null,b.g.set(xs(b,B),_(V)),b.h+=V.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],B=Array.from(this.g.keys());for(var V=0;V<B.length;V++){var Z=B[V];const _e=encodeURIComponent(String(Z)),Le=this.V(Z);for(Z=0;Z<Le.length;Z++){var pe=_e;Le[Z]!==""&&(pe+="="+encodeURIComponent(String(Le[Z]))),b.push(pe)}}return this.i=b.join("&")};function xs(b,B){return B=String(B),b.j&&(B=B.toLowerCase()),B}function Mo(b,B){B&&!b.j&&(Ir(b),b.i=null,b.g.forEach(function(V,Z){var pe=Z.toLowerCase();Z!=pe&&(to(this,Z),hu(this,pe,V))},b)),b.j=B}function qA(b,B){const V=new oh;if(a.Image){const Z=new Image;Z.onload=g(Si,V,"TestLoadImage: loaded",!0,B,Z),Z.onerror=g(Si,V,"TestLoadImage: error",!1,B,Z),Z.onabort=g(Si,V,"TestLoadImage: abort",!1,B,Z),Z.ontimeout=g(Si,V,"TestLoadImage: timeout",!1,B,Z),a.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=b}else B(!1)}function y2(b,B){const V=new oh,Z=new AbortController,pe=setTimeout(()=>{Z.abort(),Si(V,"TestPingServer: timeout",!1,B)},1e4);fetch(b,{signal:Z.signal}).then(_e=>{clearTimeout(pe),_e.ok?Si(V,"TestPingServer: ok",!0,B):Si(V,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(pe),Si(V,"TestPingServer: error",!1,B)})}function Si(b,B,V,Z,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),Z(V)}catch{}}function UA(){this.g=new ag}function v2(b,B,V){const Z=V||"";try{ou(b,function(pe,_e){let Le=pe;h(pe)&&(Le=sg(pe)),B.push(Z+_e+"="+encodeURIComponent(Le))})}catch(pe){throw B.push(Z+"type="+encodeURIComponent("_badmap")),pe}}function Ma(b){this.l=b.Ub||null,this.j=b.eb||!1}w(Ma,ih),Ma.prototype.g=function(){return new fh(this.l,this.j)},Ma.prototype.i=function(b){return function(){return b}}({});function fh(b,B){st.call(this),this.D=b,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(fh,st),i=fh.prototype,i.open=function(b,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=B,this.readyState=1,io(this)},i.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(B.body=b),(this.D||a).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},i.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;w2(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function w2(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}i.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var B=b.value?b.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!b.done}))&&(this.response=this.responseText+=B)}b.done?ro(this):io(this),this.readyState==3&&w2(this)}},i.Ra=function(b){this.g&&(this.response=this.responseText=b,ro(this))},i.Qa=function(b){this.g&&(this.response=b,ro(this))},i.ga=function(){this.g&&ro(this)};function ro(b){b.readyState=4,b.l=null,b.j=null,b.v=null,io(b)}i.setRequestHeader=function(b,B){this.u.append(b,B)},i.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],B=this.h.entries();for(var V=B.next();!V.done;)V=V.value,b.push(V[0]+": "+V[1]),V=B.next();return b.join(`\r
`)};function io(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(fh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function Ba(b){let B="";return F(b,function(V,Z){B+=Z,B+=":",B+=V,B+=`\r
`}),B}function du(b,B,V){e:{for(Z in V){var Z=!1;break e}Z=!0}Z||(V=Ba(V),typeof b=="string"?V!=null&&encodeURIComponent(String(V)):sn(b,B,V))}function wn(b){st.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(wn,st);var VA=/^https?$/i,yg=["POST","PUT"];i=wn.prototype,i.Ha=function(b){this.J=b},i.ea=function(b,B,V,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);B=B?B.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zs.g(),this.v=this.o?hf(this.o):hf(Zs),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(B,String(b),!0),this.B=!1}catch(_e){ph(this,_e);return}if(b=V||"",V=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var pe in Z)V.set(pe,Z[pe]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const _e of Z.keys())V.set(_e,Z.get(_e));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(V.keys()).find(_e=>_e.toLowerCase()=="content-type"),pe=a.FormData&&b instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yg,B,void 0))||Z||pe||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Le]of V)this.g.setRequestHeader(_e,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ef(this),this.u=!0,this.g.send(b),this.u=!1}catch(_e){ph(this,_e)}};function ph(b,B){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=B,b.m=5,bf(b),$i(b)}function bf(b){b.A||(b.A=!0,ft(b,"complete"),ft(b,"error"))}i.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,ft(this,"complete"),ft(this,"abort"),$i(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),wn.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?vg(this):this.bb())},i.bb=function(){vg(this)};function vg(b){if(b.h&&typeof o<"u"&&(!b.v[1]||Ti(b)!=4||b.Z()!=2)){if(b.u&&Ti(b)==4)xi(b.Ea,0,b);else if(ft(b,"readystatechange"),Ti(b)==4){b.h=!1;try{const Le=b.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var V;if(!(V=B)){var Z;if(Z=Le===0){var pe=String(b.D).match(hh)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),Z=!VA.test(pe?pe.toLowerCase():"")}V=Z}if(V)ft(b,"complete"),ft(b,"success");else{b.m=6;try{var _e=2<Ti(b)?b.g.statusText:""}catch{_e=""}b.l=_e+" ["+b.Z()+"]",bf(b)}}finally{$i(b)}}}}function $i(b,B){if(b.g){Ef(b);const V=b.g,Z=b.v[0]?()=>{}:null;b.g=null,b.v=null,B||ft(b,"ready");try{V.onreadystatechange=Z}catch{}}}function Ef(b){b.I&&(a.clearTimeout(b.I),b.I=null)}i.isActive=function(){return!!this.g};function Ti(b){return b.g?b.g.readyState:0}i.Z=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(b){if(this.g){var B=this.g.responseText;return b&&B.indexOf(b)==0&&(B=B.substring(b.length)),og(B)}};function wg(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Cf(b){const B={};b=(b.g&&2<=Ti(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<b.length;Z++){if(E(b[Z]))continue;var V=N(b[Z]);const pe=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const _e=B[pe]||[];B[pe]=_e,_e.push(V)}k(B,function(Z){return Z.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(b,B,V){return V&&V.internalChannelParams&&V.internalChannelParams[b]||B}function _g(b){this.Aa=0,this.i=[],this.j=new oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bo("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bo("baseRetryDelayMs",5e3,b),this.cb=Bo("retryDelaySeedMs",1e4,b),this.Wa=Bo("forwardChannelMaxRetries",2,b),this.wa=Bo("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new ch(b&&b.concurrentRequestLimit),this.Da=new UA,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=_g.prototype,i.la=8,i.G=1,i.connect=function(b,B,V,Z){Mn(0),this.W=b,this.H=B||{},V&&Z!==void 0&&(this.H.OSID=V,this.H.OAID=Z),this.F=this.X,this.I=E2(this,null,this.W),jo(this)};function Dr(b){if(xf(b),b.G==3){var B=b.U++,V=zi(b.I);if(sn(V,"SID",b.K),sn(V,"RID",B),sn(V,"TYPE","terminate"),ja(b,V),B=new eo(b,b.j,B),B.L=2,B.v=uu(zi(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(B.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=B.v,V=!0),V||(B.g=C2(B.j,null),B.g.ea(B.v)),B.F=Date.now(),ln(B)}b2(b)}function so(b){b.g&&(Ag(b),b.g.cancel(),b.g=null)}function xf(b){so(b),b.u&&(a.clearTimeout(b.u),b.u=null),If(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&a.clearTimeout(b.s),b.s=null)}function jo(b){if(!Hi(b.h)&&!b.s){b.s=!0;var B=b.Ga;ee||J(),ue||(ee(),ue=!0),Y.add(B,b),b.B=0}}function HA(b,B){return c2(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=B.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=Xs(p(b.Ga,b,B),A2(b,b.B)),b.B++,!0)}i.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const pe=new eo(this,this.j,b);let _e=this.o;if(this.S&&(_e?(_e=T(_e),P(_e,this.S)):_e=this.S),this.m!==null||this.O||(pe.H=_e,_e=null),this.P)e:{for(var B=0,V=0;V<this.i.length;V++){t:{var Z=this.i[V];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(B+=Z,4096<B){B=V;break e}if(B===4096||V===this.i.length-1){B=V+1;break e}}B=1e3}else B=1e3;B=fu(this,pe,B),V=zi(this.I),sn(V,"RID",b),sn(V,"CVER",22),this.D&&sn(V,"X-HTTP-Session-Id",this.D),ja(this,V),_e&&(this.O?B="headers="+encodeURIComponent(String(Ba(_e)))+"&"+B:this.m&&du(V,this.m,_e)),mg(this.h,pe),this.Ua&&sn(V,"TYPE","init"),this.P?(sn(V,"$req",B),sn(V,"SID","null"),pe.T=!0,vf(pe,V,null)):vf(pe,V,B),this.G=2}}else this.G==3&&(b?Sf(this,b):this.i.length==0||Hi(this.h)||Sf(this))};function Sf(b,B){var V;B?V=B.l:V=b.U++;const Z=zi(b.I);sn(Z,"SID",b.K),sn(Z,"RID",V),sn(Z,"AID",b.T),ja(b,Z),b.m&&b.o&&du(Z,b.m,b.o),V=new eo(b,b.j,V,b.B+1),b.m===null&&(V.H=b.o),B&&(b.i=B.D.concat(b.i)),B=fu(b,V,1e3),V.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),mg(b.h,V),vf(V,Z,B)}function ja(b,B){b.H&&F(b.H,function(V,Z){sn(B,Z,V)}),b.l&&ou({},function(V,Z){sn(B,Z,V)})}function fu(b,B,V){V=Math.min(b.i.length,V);var Z=b.l?p(b.l.Na,b.l,b):null;e:{var pe=b.i;let _e=-1;for(;;){const Le=["count="+V];_e==-1?0<V?(_e=pe[0].g,Le.push("ofs="+_e)):_e=0:Le.push("ofs="+_e);let Yt=!0;for(let tr=0;tr<V;tr++){let Bt=pe[tr].g;const mr=pe[tr].map;if(Bt-=_e,0>Bt)_e=Math.max(0,pe[tr].g-100),Yt=!1;else try{v2(mr,Le,"req"+Bt+"_")}catch{Z&&Z(mr)}}if(Yt){Z=Le.join("&");break e}}}return b=b.i.splice(0,V),B.D=b,Z}function mh(b){if(!b.g&&!b.u){b.Y=1;var B=b.Fa;ee||J(),ue||(ee(),ue=!0),Y.add(B,b),b.v=0}}function Tf(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=Xs(p(b.Fa,b),A2(b,b.v)),b.v++,!0)}i.Fa=function(){if(this.u=null,_2(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=Xs(p(this.ab,this),b)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mn(10),so(this),_2(this))};function Ag(b){b.A!=null&&(a.clearTimeout(b.A),b.A=null)}function _2(b){b.g=new eo(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var B=zi(b.qa);sn(B,"RID","rpc"),sn(B,"SID",b.K),sn(B,"AID",b.T),sn(B,"CI",b.F?"0":"1"),!b.F&&b.ja&&sn(B,"TO",b.ja),sn(B,"TYPE","xmlhttp"),ja(b,B),b.m&&b.o&&du(B,b.m,b.o),b.L&&(b.g.I=b.L);var V=b.g;b=b.ia,V.L=1,V.v=uu(zi(B)),V.m=null,V.P=!0,fg(V,b)}i.Za=function(){this.C!=null&&(this.C=null,so(this),Tf(this),Mn(19))};function If(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function Df(b,B){var V=null;if(b.g==B){If(b),Ag(b),b.g=null;var Z=2}else if(oi(b.h,B))V=B.D,h2(b.h,B),Z=1;else return;if(b.G!=0){if(B.o)if(Z==1){V=B.m?B.m.length:0,B=Date.now()-B.F;var pe=b.B;Z=sh(),ft(Z,new pf(Z,V)),jo(b)}else mh(b);else if(pe=B.s,pe==3||pe==0&&0<B.X||!(Z==1&&HA(b,B)||Z==2&&Tf(b)))switch(V&&0<V.length&&(B=b.h,B.i=B.i.concat(V)),pe){case 1:qa(b,5);break;case 4:qa(b,10);break;case 3:qa(b,6);break;default:qa(b,2)}}}function A2(b,B){let V=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(V*=2),V*B}function qa(b,B){if(b.j.info("Error code "+B),B==2){var V=p(b.fb,b),Z=b.Xa;const pe=!Z;Z=new Fa(Z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dh(Z,"https"),uu(Z),pe?qA(Z.toString(),V):y2(Z.toString(),V)}else Mn(2);b.G=0,b.l&&b.l.sa(B),b2(b),xf(b)}i.fb=function(b){b?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function b2(b){if(b.G=0,b.ka=[],b.l){const B=d2(b.h);(B.length!=0||b.i.length!=0)&&(A(b.ka,B),A(b.ka,b.i),b.h.i.length=0,_(b.i),b.i.length=0),b.l.ra()}}function E2(b,B,V){var Z=V instanceof Fa?zi(V):new Fa(V);if(Z.g!="")B&&(Z.g=B+"."+Z.g),au(Z,Z.s);else{var pe=a.location;Z=pe.protocol,B=B?B+"."+pe.hostname:pe.hostname,pe=+pe.port;var _e=new Fa(null);Z&&dh(_e,Z),B&&(_e.g=B),pe&&au(_e,pe),V&&(_e.l=V),Z=_e}return V=b.D,B=b.ya,V&&B&&sn(Z,V,B),sn(Z,"VER",b.la),ja(b,Z),Z}function C2(b,B,V){if(B&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=b.Ca&&!b.pa?new wn(new Ma({eb:V})):new wn(b.pa),B.Ha(b.J),B}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function bg(){}i=bg.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function kf(){}kf.prototype.g=function(b,B){return new ai(b,B)};function ai(b,B){st.call(this),this.g=new _g(B),this.l=b,this.h=B&&B.messageUrlParams||null,b=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(b?b["X-WebChannel-Content-Type"]=B.messageContentType:b={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(b?b["X-WebChannel-Client-Profile"]=B.va:b={"X-WebChannel-Client-Profile":B.va}),this.g.S=b,(b=B&&B.Sb)&&!E(b)&&(this.g.m=b),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!E(B)&&(this.g.D=B,b=this.h,b!==null&&B in b&&(b=this.h,B in b&&delete b[B])),this.j=new qo(this)}w(ai,st),ai.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ai.prototype.close=function(){Dr(this.g)},ai.prototype.o=function(b){var B=this.g;if(typeof b=="string"){var V={};V.__data__=b,b=V}else this.u&&(V={},V.__data__=sg(b),b=V);B.i.push(new u2(B.Ya++,b)),B.G==3&&jo(B)},ai.prototype.N=function(){this.g.l=null,delete this.j,Dr(this.g),delete this.g,ai.aa.N.call(this)};function x2(b){Oo.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var B=b.__sm__;if(B){e:{for(const V in B){b=V;break e}b=void 0}(this.i=b)&&(b=this.i,B=B!==null&&b in B?B[b]:void 0),this.data=B}else this.data=b}w(x2,Oo);function S2(){ff.call(this),this.status=1}w(S2,ff);function qo(b){this.g=b}w(qo,bg),qo.prototype.ua=function(){ft(this.g,"a")},qo.prototype.ta=function(b){ft(this.g,new x2(b))},qo.prototype.sa=function(b){ft(this.g,new S2)},qo.prototype.ra=function(){ft(this.g,"b")},kf.prototype.createWebChannel=kf.prototype.g,ai.prototype.send=ai.prototype.o,ai.prototype.open=ai.prototype.m,ai.prototype.close=ai.prototype.close,LF=function(){return new kf},OF=function(){return sh()},NF=Lo,Dx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gf.NO_ERROR=0,gf.TIMEOUT=8,gf.HTTP_ERROR=6,Uw=gf,s2.COMPLETE="complete",PF=s2,df.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",st.prototype.listen=st.prototype.K,ny=df,wn.prototype.listenOnce=wn.prototype.L,wn.prototype.getLastError=wn.prototype.Ka,wn.prototype.getLastErrorCode=wn.prototype.Ba,wn.prototype.getStatus=wn.prototype.Z,wn.prototype.getResponseJson=wn.prototype.Oa,wn.prototype.getResponseText=wn.prototype.oa,wn.prototype.send=wn.prototype.ea,wn.prototype.setWithCredentials=wn.prototype.Ha,RF=wn}).apply(typeof _w<"u"?_w:typeof self<"u"?self:typeof window<"u"?window:{});const JR="@firebase/firestore",YR="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new TT("@firebase/firestore");function Zf(){return Wd.logLevel}function Ue(i,...e){if(Wd.logLevel<=Pt.DEBUG){const t=e.map(kT);Wd.debug(`Firestore (${Wm}): ${i}`,...t)}}function Kl(i,...e){if(Wd.logLevel<=Pt.ERROR){const t=e.map(kT);Wd.error(`Firestore (${Wm}): ${i}`,...t)}}function Mm(i,...e){if(Wd.logLevel<=Pt.WARN){const t=e.map(kT);Wd.warn(`Firestore (${Wm}): ${i}`,...t)}}function kT(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,FF(i,n,t)}function FF(i,e,t){let n=`FIRESTORE (${Wm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Kl(n),new Error(n)}function Wt(i,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,i||FF(e,r,n)}function wt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Ra{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ni.UNAUTHENTICATED))}shutdown(){}}class qq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Uq{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Wt(this.o===void 0,42304);let n=this.i;const r=u=>this.i!==n?(n=this.i,t(u)):Promise.resolve();let s=new Ul;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ul,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},a=u=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ul)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Wt(typeof n.accessToken=="string",31837,{l:n}),new MF(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string",2055,{h:e}),new ni(e)}}class Vq{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hq{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Vq(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zq{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ys(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Wt(this.o===void 0,3512);const n=s=>{s.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const r=s=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new XR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new XR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=$q(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Tt(i,e){return i<e?-1:i>e?1:0}function kx(i,e){let t=0;for(;t<i.length&&t<e.length;){const n=i.codePointAt(t),r=e.codePointAt(t);if(n!==r){if(n<128&&r<128)return Tt(n,r);{const s=BF(),o=Wq(s.encode(QR(i,t)),s.encode(QR(e,t)));return o!==0?o:Tt(n,r)}}t+=n>65535?2:1}return Tt(i.length,e.length)}function QR(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function Wq(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Tt(i[t],e[t]);return Tt(i.length,e.length)}function Bm(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=-62135596800,eP=1e6;class Qn{static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*eP);return new Qn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZR)throw new ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eP}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ZR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(e){return new At(e)}static min(){return new At(new Qn(0,0))}static max(){return new At(new Qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="__name__";class Ko{constructor(e,t,n){t===void 0?t=0:t>e.length&&ht(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ht(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ko.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ko?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=Ko.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return Tt(e.length,t.length)}static compareSegments(e,t){const n=Ko.isNumericId(e),r=Ko.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ko.extractNumericId(e).compare(Ko.extractNumericId(t)):kx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oc.fromString(e.substring(4,e.length-2))}}class mn extends Ko{construct(e,t,n){return new mn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ze(Ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const Gq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Ko{construct(e,t,n){return new Vr(e,t,n)}static isValidIdentifier(e){return Gq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tP}static keyField(){return new Vr([tP])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(n.length===0)throw new ze(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ze(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ze(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(n+=a,r++):(s(),r++)}if(s(),o)throw new ze(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(t)}static emptyPath(){return new Vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(mn.fromString(e))}static fromName(e){return new ot(mn.fromString(e).popFirst(5))}static empty(){return new ot(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new mn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=-1;function Kq(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=At.fromTimestamp(n===1e9?new Qn(t+1,0):new Qn(t,n));return new Mc(r,ot.empty(),e)}function Jq(i){return new Mc(i.readTime,i.key,jy)}class Mc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mc(At.min(),ot.empty(),jy)}static max(){return new Mc(At.max(),ot.empty(),jy)}}function Yq(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(i.documentKey,e.documentKey),t!==0?t:Tt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gm(i){if(i.code!==Ee.FAILED_PRECONDITION||i.message!==Xq)throw i;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(t){return Ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},u=>n(u))}),o=!0,s===r&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(r=>r?Ce.resolve(r):n());return t}static forEach(e,t){const n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,r)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const h=u;t(e[h]).next(d=>{o[h]=d,++a,a===s&&n(o)},d=>r(d))}})}static doWhile(e,t){return new Ce((n,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}}function Zq(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Km(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>t.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}q1.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=-1;function U1(i){return i==null}function F_(i){return i===0&&1/i==-1/0}function e8(i){return typeof i=="number"&&Number.isInteger(i)&&!F_(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="";function t8(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=nP(e)),e=n8(i.get(t),e);return nP(e)}function n8(i,e){let t=e;const n=i.length;for(let r=0;r<n;r++){const s=i.charAt(r);switch(s){case"\0":t+="";break;case qF:t+="";break;default:t+=s}}return t}function nP(i){return i+qF+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Xc(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function r8(i,e){const t=[];for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.push(e(i[n],n,i));return t}function UF(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Aw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Aw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Aw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Aw(this.root,e,this.comparator,!0)}}class Aw{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??jr.RED,this.left=r??jr.EMPTY,this.right=s??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new jr(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return jr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ht(27949);return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht(57766)}get value(){throw ht(16141)}get color(){throw ht(16727)}get left(){throw ht(29726)}get right(){throw ht(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iP(this.data.getIterator())}getIteratorFrom(e){return new iP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class iP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new ws([])}unionWith(e){let t=new fr(Vr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bm(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new VF("Invalid base64 string: "+s):s}}(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const i8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bc(i){if(Wt(!!i,39018),typeof i=="string"){let e=0;const t=i8.exec(i);if(Wt(!!t,46558,{timestamp:i}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Un(i.seconds),nanos:Un(i.nanos)}}function Un(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function jc(i){return typeof i=="string"?Wr.fromBase64String(i):Wr.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="server_timestamp",zF="__type__",$F="__previous_value__",WF="__local_write_time__";function PT(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[zF])===null||t===void 0?void 0:t.stringValue)===HF}function V1(i){const e=i.mapValue.fields[$F];return PT(e)?V1(e):e}function qy(i){const e=Bc(i.mapValue.fields[WF].timestampValue);return new Qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,t,n,r,s,o,a,u,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const M_="(default)";class Uy{constructor(e,t){this.projectId=e,this.database=t||M_}static empty(){return new Uy("","")}get isDefaultDatabase(){return this.database===M_}isEqual(e){return e instanceof Uy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="__type__",o8="__max__",bw={mapValue:{}},KF="__vector__",B_="value";function qc(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?PT(i)?4:l8(i)?9007199254740991:a8(i)?10:11:ht(28295,{value:i})}function Sa(i,e){if(i===e)return!0;const t=qc(i);if(t!==qc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return qy(i).isEqual(qy(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Bc(r.timestampValue),a=Bc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(r,s){return jc(r.bytesValue).isEqual(jc(s.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(r,s){return Un(r.geoPointValue.latitude)===Un(s.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(s.geoPointValue.longitude)}(i,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Un(r.integerValue)===Un(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Un(r.doubleValue),a=Un(s.doubleValue);return o===a?F_(o)===F_(a):isNaN(o)&&isNaN(a)}return!1}(i,e);case 9:return Bm(i.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(rP(o)!==rP(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Sa(o[u],a[u])))return!1;return!0}(i,e);default:return ht(52216,{left:i})}}function Vy(i,e){return(i.values||[]).find(t=>Sa(t,e))!==void 0}function jm(i,e){if(i===e)return 0;const t=qc(i),n=qc(e);if(t!==n)return Tt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(i.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Un(s.integerValue||s.doubleValue),u=Un(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(i,e);case 3:return sP(i.timestampValue,e.timestampValue);case 4:return sP(qy(i),qy(e));case 5:return kx(i.stringValue,e.stringValue);case 6:return function(s,o){const a=jc(s),u=jc(o);return a.compareTo(u)}(i.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let h=0;h<a.length&&h<u.length;h++){const d=Tt(a[h],u[h]);if(d!==0)return d}return Tt(a.length,u.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(Un(s.latitude),Un(o.latitude));return a!==0?a:Tt(Un(s.longitude),Un(o.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return oP(i.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,h,d;const m=s.fields||{},p=o.fields||{},g=(a=m[B_])===null||a===void 0?void 0:a.arrayValue,w=(u=p[B_])===null||u===void 0?void 0:u.arrayValue,_=Tt(((h=g==null?void 0:g.values)===null||h===void 0?void 0:h.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:oP(g,w)}(i.mapValue,e.mapValue);case 11:return function(s,o){if(s===bw.mapValue&&o===bw.mapValue)return 0;if(s===bw.mapValue)return 1;if(o===bw.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const p=kx(u[m],d[m]);if(p!==0)return p;const g=jm(a[u[m]],h[d[m]]);if(g!==0)return g}return Tt(u.length,d.length)}(i.mapValue,e.mapValue);default:throw ht(23264,{Pe:t})}}function sP(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Tt(i,e);const t=Bc(i),n=Bc(e),r=Tt(t.seconds,n.seconds);return r!==0?r:Tt(t.nanos,n.nanos)}function oP(i,e){const t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const s=jm(t[r],n[r]);if(s)return s}return Tt(t.length,n.length)}function qm(i){return Rx(i)}function Rx(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const n=Bc(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return jc(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ot.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",r=!0;for(const s of t.values||[])r?r=!1:n+=",",n+=Rx(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${Rx(t.fields[o])}`;return r+"}"}(i.mapValue):ht(61005,{value:i})}function Vw(i){switch(qc(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=V1(i);return e?16+Vw(e):16;case 5:return 2*i.stringValue.length;case 6:return jc(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((r,s)=>r+Vw(s),0)}(i.arrayValue);case 10:case 11:return function(n){let r=0;return Xc(n.fields,(s,o)=>{r+=s.length+Vw(o)}),r}(i.mapValue);default:throw ht(13486,{value:i})}}function aP(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Px(i){return!!i&&"integerValue"in i}function NT(i){return!!i&&"arrayValue"in i}function lP(i){return!!i&&"nullValue"in i}function uP(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Hw(i){return!!i&&"mapValue"in i}function a8(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[GF])===null||t===void 0?void 0:t.stringValue)===KF}function ky(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Xc(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=ky(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ky(i.arrayValue.values[t]);return e}return Object.assign({},i)}function l8(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===o8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.value=e}static empty(){return new Ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ky(t)}setAll(e){let t=Vr.emptyPath(),n={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,n,r),n={},r=[],t=a.popLast()}o?n[a.lastSegment()]=ky(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Hw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Hw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xc(t,(r,s)=>e[r]=s);for(const r of n)delete e[r]}clone(){return new Ui(ky(this.value))}}function JF(i){const e=[];return Xc(i.fields,(t,n)=>{const r=new Vr([t]);if(Hw(n)){const s=JF(n.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ws(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t,n,r,s,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ri(e,0,At.min(),At.min(),At.min(),Ui.empty(),0)}static newFoundDocument(e,t,n,r){return new ri(e,1,t,At.min(),n,r,0)}static newNoDocument(e,t){return new ri(e,2,t,At.min(),At.min(),Ui.empty(),0)}static newUnknownDocument(e,t){return new ri(e,3,t,At.min(),At.min(),Ui.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.position=e,this.inclusive=t}}function cP(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){const s=e[r],o=i.position[r];if(s.field.isKeyField()?n=ot.comparator(ot.fromName(o.referenceValue),t.key):n=jm(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function hP(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Sa(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t="asc"){this.field=e,this.dir=t}}function u8(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{}class Yn extends YF{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new h8(e,t,n):t==="array-contains"?new p8(e,n):t==="in"?new m8(e,n):t==="not-in"?new g8(e,n):t==="array-contains-any"?new y8(e,n):new Yn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new d8(e,n):new f8(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jm(t,this.value)):t!==null&&qc(this.value)===qc(t)&&this.matchesComparison(jm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Io extends YF{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Io(e,t)}matches(e){return XF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function XF(i){return i.op==="and"}function QF(i){return c8(i)&&XF(i)}function c8(i){for(const e of i.filters)if(e instanceof Io)return!1;return!0}function Nx(i){if(i instanceof Yn)return i.field.canonicalString()+i.op.toString()+qm(i.value);if(QF(i))return i.filters.map(e=>Nx(e)).join(",");{const e=i.filters.map(t=>Nx(t)).join(",");return`${i.op}(${e})`}}function ZF(i,e){return i instanceof Yn?function(n,r){return r instanceof Yn&&n.op===r.op&&n.field.isEqual(r.field)&&Sa(n.value,r.value)}(i,e):i instanceof Io?function(n,r){return r instanceof Io&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,a)=>s&&ZF(o,r.filters[a]),!0):!1}(i,e):void ht(19439)}function e3(i){return i instanceof Yn?function(t){return`${t.field.canonicalString()} ${t.op} ${qm(t.value)}`}(i):i instanceof Io?function(t){return t.op.toString()+" {"+t.getFilters().map(e3).join(" ,")+"}"}(i):"Filter"}class h8 extends Yn{constructor(e,t,n){super(e,t,n),this.key=ot.fromName(n.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class d8 extends Yn{constructor(e,t){super(e,"in",t),this.keys=t3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class f8 extends Yn{constructor(e,t){super(e,"not-in",t),this.keys=t3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function t3(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>ot.fromName(n.referenceValue))}class p8 extends Yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return NT(t)&&Vy(t.arrayValue,this.value)}}class m8 extends Yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vy(this.value.arrayValue,t)}}class g8 extends Yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vy(this.value.arrayValue,t)}}class y8 extends Yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!NT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Vy(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,t=null,n=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function dP(i,e=null,t=[],n=[],r=null,s=null,o=null){return new v8(i,e,t,n,r,s,o)}function OT(i){const e=wt(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Nx(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),U1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>qm(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>qm(n)).join(",")),e.Ie=t}return e.Ie}function LT(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!u8(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!ZF(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!hP(i.startAt,e.startAt)&&hP(i.endAt,e.endAt)}function Ox(i){return ot.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t=null,n=[],r=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function w8(i,e,t,n,r,s,o,a){return new Jm(i,e,t,n,r,s,o,a)}function FT(i){return new Jm(i)}function fP(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function n3(i){return i.collectionGroup!==null}function Ry(i){const e=wt(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fr(Vr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Hy(s,n))}),t.has(Vr.keyField().canonicalString())||e.Ee.push(new Hy(Vr.keyField(),n))}return e.Ee}function Aa(i){const e=wt(i);return e.de||(e.de=r3(e,Ry(i))),e.de}function _8(i){const e=wt(i);return e.Ae||(e.Ae=r3(e,i.explicitOrderBy)),e.Ae}function r3(i,e){if(i.limitType==="F")return dP(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Hy(r.field,s)});const t=i.endAt?new j_(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new j_(i.startAt.position,i.startAt.inclusive):null;return dP(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function Lx(i,e){const t=i.filters.concat([e]);return new Jm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function q_(i,e,t){return new Jm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function H1(i,e){return LT(Aa(i),Aa(e))&&i.limitType===e.limitType}function i3(i){return`${OT(Aa(i))}|lt:${i.limitType}`}function ep(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>e3(r)).join(", ")}]`),U1(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>qm(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>qm(r)).join(",")),`Target(${n})`}(Aa(i))}; limitType=${i.limitType})`}function z1(i,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ot.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,e)&&function(n,r){for(const s of Ry(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,e)&&function(n,r){return!(n.startAt&&!function(o,a,u){const h=cP(o,a,u);return o.inclusive?h<=0:h<0}(n.startAt,Ry(n),r)||n.endAt&&!function(o,a,u){const h=cP(o,a,u);return o.inclusive?h>=0:h>0}(n.endAt,Ry(n),r))}(i,e)}function A8(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function s3(i){return(e,t)=>{let n=!1;for(const r of Ry(i)){const s=b8(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function b8(i,e,t){const n=i.field.isKeyField()?ot.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),h=a.data.field(s);return u!==null&&h!==null?jm(u,h):ht(42886)}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return ht(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xc(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return UF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=new Pn(ot.comparator);function Jl(){return E8}const o3=new Pn(ot.comparator);function ry(...i){let e=o3;for(const t of i)e=e.insert(t.key,t);return e}function a3(i){let e=o3;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Fh(){return Py()}function l3(){return Py()}function Py(){return new nf(i=>i.toString(),(i,e)=>i.isEqual(e))}const C8=new Pn(ot.comparator),x8=new fr(ot.comparator);function Nt(...i){let e=x8;for(const t of i)e=e.add(t);return e}const S8=new fr(Tt);function T8(){return S8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F_(e)?"-0":e}}function u3(i){return{integerValue:""+i}}function I8(i,e){return e8(e)?u3(e):MT(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this._=void 0}}function D8(i,e,t){return i instanceof zy?function(r,s){const o={fields:{[zF]:{stringValue:HF},[WF]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&PT(s)&&(s=V1(s)),s&&(o.fields[$F]=s),{mapValue:o}}(t,e):i instanceof $y?h3(i,e):i instanceof Wy?d3(i,e):function(r,s){const o=c3(r,s),a=pP(o)+pP(r.Re);return Px(o)&&Px(r.Re)?u3(a):MT(r.serializer,a)}(i,e)}function k8(i,e,t){return i instanceof $y?h3(i,e):i instanceof Wy?d3(i,e):t}function c3(i,e){return i instanceof U_?function(n){return Px(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class zy extends $1{}class $y extends $1{constructor(e){super(),this.elements=e}}function h3(i,e){const t=f3(e);for(const n of i.elements)t.some(r=>Sa(r,n))||t.push(n);return{arrayValue:{values:t}}}class Wy extends $1{constructor(e){super(),this.elements=e}}function d3(i,e){let t=f3(e);for(const n of i.elements)t=t.filter(r=>!Sa(r,n));return{arrayValue:{values:t}}}class U_ extends $1{constructor(e,t){super(),this.serializer=e,this.Re=t}}function pP(i){return Un(i.integerValue||i.doubleValue)}function f3(i){return NT(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,t){this.field=e,this.transform=t}}function P8(i,e){return i.field.isEqual(e.field)&&function(n,r){return n instanceof $y&&r instanceof $y||n instanceof Wy&&r instanceof Wy?Bm(n.elements,r.elements,Sa):n instanceof U_&&r instanceof U_?Sa(n.Re,r.Re):n instanceof zy&&r instanceof zy}(i.transform,e.transform)}class N8{constructor(e,t){this.version=e,this.transformResults=t}}class To{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new To}static exists(e){return new To(void 0,e)}static updateTime(e){return new To(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zw(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class W1{}function p3(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new BT(i.key,To.none()):new B0(i.key,i.data,To.none());{const t=i.data,n=Ui.empty();let r=new fr(Vr.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Qc(i.key,n,new ws(r.toArray()),To.none())}}function O8(i,e,t){i instanceof B0?function(r,s,o){const a=r.value.clone(),u=gP(r.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(i,e,t):i instanceof Qc?function(r,s,o){if(!zw(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gP(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(m3(r)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ny(i,e,t,n){return i instanceof B0?function(s,o,a,u){if(!zw(s.precondition,o))return a;const h=s.value.clone(),d=yP(s.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(i,e,t,n):i instanceof Qc?function(s,o,a,u){if(!zw(s.precondition,o))return a;const h=yP(s.fieldTransforms,u,o),d=o.data;return d.setAll(m3(s)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(i,e,t,n):function(s,o,a){return zw(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(i,e,t)}function L8(i,e){let t=null;for(const n of i.fieldTransforms){const r=e.data.field(n.field),s=c3(n.transform,r||null);s!=null&&(t===null&&(t=Ui.empty()),t.set(n.field,s))}return t||null}function mP(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Bm(n,r,(s,o)=>P8(s,o))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class B0 extends W1{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qc extends W1{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function m3(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function gP(i,e,t){const n=new Map;Wt(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let r=0;r<t.length;r++){const s=i[r],o=s.transform,a=e.data.field(s.field);n.set(s.field,k8(o,a,t[r]))}return n}function yP(i,e,t){const n=new Map;for(const r of i){const s=r.transform,o=t.data.field(r.field);n.set(r.field,D8(s,o,e))}return n}class BT extends W1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F8 extends W1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&O8(s,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ny(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ny(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=l3();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const u=p3(o,a);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(At.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&Bm(this.mutations,e.mutations,(t,n)=>mP(t,n))&&Bm(this.baseMutations,e.baseMutations,(t,n)=>mP(t,n))}}class jT{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Wt(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=function(){return C8}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new jT(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn,jt;function U8(i){switch(i){case Ee.OK:return ht(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return ht(15467,{code:i})}}function g3(i){if(i===void 0)return Kl("GRPC error has no .code"),Ee.UNKNOWN;switch(i){case Kn.OK:return Ee.OK;case Kn.CANCELLED:return Ee.CANCELLED;case Kn.UNKNOWN:return Ee.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return Ee.INTERNAL;case Kn.UNAVAILABLE:return Ee.UNAVAILABLE;case Kn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Kn.NOT_FOUND:return Ee.NOT_FOUND;case Kn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Kn.ABORTED:return Ee.ABORTED;case Kn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Kn.DATA_LOSS:return Ee.DATA_LOSS;default:return ht(39323,{code:i})}}(jt=Kn||(Kn={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=new Oc([4294967295,4294967295],0);function vP(i){const e=BF().encode(i),t=new kF;return t.update(e),new Uint8Array(t.digest())}function wP(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Oc([t,n],0),new Oc([r,s],0)]}class qT{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new iy(`Invalid padding: ${t}`);if(n<0)throw new iy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new iy(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new iy(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Oc.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Oc.fromNumber(n)));return r.compare(V8)===1&&(r=new Oc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=vP(e),[n,r]=wP(t);for(let s=0;s<this.hashCount;s++){const o=this.we(n,r,s);if(!this.be(o))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new qT(s,r,t);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=vP(e),[n,r]=wP(t);for(let s=0;s<this.hashCount;s++){const o=this.we(n,r,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class iy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,j0.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new G1(At.min(),r,new Pn(Tt),Jl(),Nt())}}class j0{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new j0(n,t,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class y3{constructor(e,t){this.targetId=e,this.Ce=t}}class v3{constructor(e,t,n=Wr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class _P{constructor(){this.Fe=0,this.Me=AP(),this.xe=Wr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Nt(),t=Nt(),n=Nt();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ht(38017,{changeType:s})}}),new j0(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=AP()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class H8{constructor(e){this.ze=e,this.je=new Map,this.He=Jl(),this.Je=Ew(),this.Ye=Ew(),this.Ze=new Pn(Tt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:ht(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((n,r)=>{this.it(r)&&t(r)})}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(Ox(s))if(n===0){const o=new ot(s.path);this.tt(t,o,ri.newNoDocument(o,At.min()))}else Wt(n===1,20013,{expectedCount:n});else{const o=this.ut(t);if(o!==n){const a=this.ct(e),u=a?this.lt(a,e,o):1;if(u!==0){this.st(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=jc(n).toUint8Array()}catch(u){if(u instanceof VF)return Mm("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new qT(o,r,s)}catch(u){return Mm(u instanceof iy?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),r++)}),r}It(e){const t=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&Ox(a.target)){const u=new ot(a.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,ri.newNoDocument(u,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let n=Nt();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const r=new G1(e,t,this.Ze,this.He,n);return this.He=Jl(),this.Je=Ew(),this.Ye=Ew(),this.Ze=new Pn(Tt),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new _P,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new fr(Tt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new fr(Tt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new _P),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ew(){return new Pn(ot.comparator)}function AP(){return new Pn(ot.comparator)}const z8={asc:"ASCENDING",desc:"DESCENDING"},$8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W8={and:"AND",or:"OR"};class G8{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fx(i,e){return i.useProto3Json||U1(e)?e:{value:e}}function V_(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w3(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function K8(i,e){return V_(i,e.toTimestamp())}function ba(i){return Wt(!!i,49232),At.fromTimestamp(function(t){const n=Bc(t);return new Qn(n.seconds,n.nanos)}(i))}function UT(i,e){return Mx(i,e).canonicalString()}function Mx(i,e){const t=function(r){return new mn(["projects",r.projectId,"databases",r.database])}(i).child("documents");return e===void 0?t:t.child(e)}function _3(i){const e=mn.fromString(i);return Wt(S3(e),10190,{key:e.toString()}),e}function Bx(i,e){return UT(i.databaseId,e.path)}function _E(i,e){const t=_3(e);if(t.get(1)!==i.databaseId.projectId)throw new ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ot(b3(t))}function A3(i,e){return UT(i.databaseId,e)}function J8(i){const e=_3(i);return e.length===4?mn.emptyPath():b3(e)}function jx(i){return new mn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function b3(i){return Wt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function bP(i,e,t){return{name:Bx(i,e),fields:t.value.mapValue.fields}}function Y8(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ht(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(Wt(d===void 0||typeof d=="string",58123),Wr.fromBase64String(d||"")):(Wt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Wr.fromUint8Array(d||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const d=h.code===void 0?Ee.UNKNOWN:g3(h.code);return new ze(d,h.message||"")}(o);t=new v3(n,r,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=_E(i,n.document.name),s=ba(n.document.updateTime),o=n.document.createTime?ba(n.document.createTime):At.min(),a=new Ui({mapValue:{fields:n.document.fields}}),u=ri.newFoundDocument(r,s,o,a),h=n.targetIds||[],d=n.removedTargetIds||[];t=new $w(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=_E(i,n.document),s=n.readTime?ba(n.readTime):At.min(),o=ri.newNoDocument(r,s),a=n.removedTargetIds||[];t=new $w([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=_E(i,n.document),s=n.removedTargetIds||[];t=new $w([],s,r,null)}else{if(!("filter"in e))return ht(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new q8(r,s),a=n.targetId;t=new y3(a,o)}}return t}function X8(i,e){let t;if(e instanceof B0)t={update:bP(i,e.key,e.value)};else if(e instanceof BT)t={delete:Bx(i,e.key)};else if(e instanceof Qc)t={update:bP(i,e.key,e.data),updateMask:oU(e.fieldMask)};else{if(!(e instanceof F8))return ht(16599,{ft:e.type});t={verify:Bx(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const a=o.transform;if(a instanceof zy)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $y)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wy)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof U_)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw ht(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:K8(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ht(27497)}(i,e.precondition)),t}function Q8(i,e){return i&&i.length>0?(Wt(e!==void 0,14353),i.map(t=>function(r,s){let o=r.updateTime?ba(r.updateTime):ba(s);return o.isEqual(At.min())&&(o=ba(s)),new N8(o,r.transformResults||[])}(t,e))):[]}function Z8(i,e){return{documents:[A3(i,e.path)]}}function E3(i,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=A3(i,r);const s=function(h){if(h.length!==0)return x3(Io.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(d=>function(p){return{field:Ru(p.field),direction:rU(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Fx(i,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:t,parent:r}}function eU(i,e,t,n){const{gt:r,parent:s}=E3(i,e),o={},a=[];let u=0;return t.forEach(h=>{const d="aggregate_"+u++;o[d]=h.alias,h.aggregateType==="count"?a.push({alias:d,count:{}}):h.aggregateType==="avg"?a.push({alias:d,avg:{field:Ru(h.fieldPath)}}):h.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ru(h.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:r.structuredQuery},parent:r.parent},yt:o,parent:s}}function tU(i){let e=J8(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){Wt(n===1,65062);const d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(m){const p=C3(m);return p instanceof Io&&QF(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(p=>function(w){return new Hy(tp(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(m){let p;return p=typeof m=="object"?m.value:m,U1(p)?null:p}(t.limit));let u=null;t.startAt&&(u=function(m){const p=!!m.before,g=m.values||[];return new j_(g,p)}(t.startAt));let h=null;return t.endAt&&(h=function(m){const p=!m.before,g=m.values||[];return new j_(g,p)}(t.endAt)),w8(e,r,o,s,a,"F",u,h)}function nU(i,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht(28987,{purpose:r})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C3(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=tp(t.unaryFilter.field);return Yn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=tp(t.unaryFilter.field);return Yn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tp(t.unaryFilter.field);return Yn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tp(t.unaryFilter.field);return Yn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ht(61313);default:return ht(60726)}}(i):i.fieldFilter!==void 0?function(t){return Yn.create(tp(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ht(58110);default:return ht(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Io.create(t.compositeFilter.filters.map(n=>C3(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ht(1026)}}(t.compositeFilter.op))}(i):ht(30097,{filter:i})}function rU(i){return z8[i]}function iU(i){return $8[i]}function sU(i){return W8[i]}function Ru(i){return{fieldPath:i.canonicalString()}}function tp(i){return Vr.fromServerFormat(i.fieldPath)}function x3(i){return i instanceof Yn?function(t){if(t.op==="=="){if(uP(t.value))return{unaryFilter:{field:Ru(t.field),op:"IS_NAN"}};if(lP(t.value))return{unaryFilter:{field:Ru(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uP(t.value))return{unaryFilter:{field:Ru(t.field),op:"IS_NOT_NAN"}};if(lP(t.value))return{unaryFilter:{field:Ru(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ru(t.field),op:iU(t.op),value:t.value}}}(i):i instanceof Io?function(t){const n=t.getFilters().map(r=>x3(r));return n.length===1?n[0]:{compositeFilter:{op:sU(t.op),filters:n}}}(i):ht(54877,{filter:i})}function oU(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function S3(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,n,r,s=At.min(),o=At.min(),a=Wr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.wt=e}}function lU(i){const e=tU({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?q_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(){this.Cn=new cU}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(Mc.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(Mc.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class cU{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fr(mn.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fr(mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T3=41943040;class qi{static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(T3,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Um(0)}static lr(){return new Um(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="LruGarbageCollector",hU=1048576;function xP([i,e],[t,n]){const r=Tt(i,t);return r===0?Tt(e,n):r}class dU{constructor(e){this.Er=e,this.buffer=new fr(xP),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();xP(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fU{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ue(CP,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Km(t)?Ue(CP,"Ignoring IndexedDB error during garbage collection: ",t):await Gm(t)}await this.mr(3e5)})}}class pU{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Ce.resolve(q1.le);const n=new dU(t);return this.gr.forEachTarget(e,r=>n.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>n.Rr(r))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(EP)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EP):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,s,o,a,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(n=m,a=Date.now(),this.removeTargets(e,n,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(h=Date.now(),Zf()<=Pt.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:m})))}}function mU(i,e){return new pU(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(){this.changes=new nf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&Ny(n.mutation,r,ws.empty(),Qn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Nt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Nt()){const r=Fh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let o=ry();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=Fh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Nt()))}populateOverlays(e,t,n){const r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,n,r){let s=Jl();const o=Py(),a=function(){return Py()}();return t.forEach((u,h)=>{const d=n.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof Qc)?s=s.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ny(d.mutation,h,d.mutation.getFieldMask(),Qn.now())):o.set(h.key,ws.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>o.set(h,d)),t.forEach((h,d)=>{var m;return a.set(h,new yU(d,(m=o.get(h))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Py();let r=new Pn((o,a)=>o-a),s=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const h=t.get(u);if(h===null)return;let d=n.get(u)||ws.empty();d=a.applyToLocalView(h,d),n.set(u,d);const m=(r.get(a.batchId)||Nt()).add(u);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),h=u.key,d=u.value,m=l3();d.forEach(p=>{if(!s.has(p)){const g=p3(t.get(p),n.get(p));g!==null&&m.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ce.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return function(o){return ot.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ce.resolve(Fh());let a=jy,u=s;return o.next(h=>Ce.forEach(h,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(d)?Ce.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Nt())).next(d=>({batchId:a,changes:a3(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next(n=>{let r=ry();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let o=ry();return this.indexManager.getCollectionParents(e,s).next(a=>Ce.forEach(a,u=>{const h=function(m,p){return new Jm(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,n,r).next(d=>{d.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(o=>{s.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,ri.newInvalidDocument(d)))});let a=ry();return o.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Ny(d.mutation,h,ws.empty(),Qn.now()),z1(t,h)&&(a=a.insert(u,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:ba(r.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(r){return{name:r.name,query:lU(r.bundledQuery),readTime:ba(r.readTime)}}(t)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.overlays=new Pn(ot.comparator),this.Qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fh();return Ce.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.St(e,t,s)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const r=Fh(),s=t.length+1,o=new ot(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Pn((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let d=s.get(h.largestBatchId);d===null&&(d=Fh(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const a=Fh(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>a.set(h,d)),!(a.size()>=r)););return Ce.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new B8(t,n));let s=this.Qr.get(t);s===void 0&&(s=Nt(),this.Qr.set(t,s)),this.Qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(){this.sessionToken=Wr.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.$r=new fr(xr.Ur),this.Kr=new fr(xr.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new xr(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.zr(new xr(e,t))}jr(e,t){e.forEach(n=>this.removeReference(n,t))}Hr(e){const t=new ot(new mn([])),n=new xr(t,e),r=new xr(t,e+1),s=[];return this.Kr.forEachInRange([n,r],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ot(new mn([])),n=new xr(t,e),r=new xr(t,e+1);let s=Nt();return this.Kr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new xr(e,0),n=this.$r.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class xr{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ot.comparator(e.key,t.key)||Tt(e.Zr,t.Zr)}static Wr(e,t){return Tt(e.Zr,t.Zr)||ot.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new fr(xr.Ur)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M8(s,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new xr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ce.resolve(o)}lookupMutationBatch(e,t){return Ce.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),s=r<0?0:r;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?RT:this.nr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xr(t,0),r=new xr(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,r],o=>{const a=this.ei(o.Zr);s.push(a)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fr(Tt);return t.forEach(r=>{const s=new xr(r,0),o=new xr(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],a=>{n=n.add(a.Zr)})}),Ce.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ot.isDocumentKey(s)||(s=s.child(""));const o=new xr(new ot(s),0);let a=new fr(Tt);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!n.isPrefixOf(h)&&(h.length===r&&(a=a.add(u.Zr)),!0)},o),Ce.resolve(this.ni(a))}ni(e){const t=[];return e.forEach(n=>{const r=this.ei(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Wt(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Xr;return Ce.forEach(t.mutations,r=>{const s=new xr(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,t){const n=new xr(t,0),r=this.Xr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.ii=e,this.docs=function(){return new Pn(ot.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let n=Jl();return t.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():ri.newInvalidDocument(r))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Jl();const o=t.path,a=new ot(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Yq(Jq(d),n)<=0||(r.has(d.key)||z1(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,t,n,r){ht(9500)}si(e,t){return Ce.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new CU(this)}getSize(e){return Ce.resolve(this.size)}}class CU extends gU{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.persistence=e,this.oi=new nf(t=>OT(t),LT),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this._i=0,this.ai=new VT,this.targetCount=0,this.ui=Um.cr()}forEachTarget(e,t){return this.oi.forEach((n,r)=>t(r)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),Ce.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Um(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Tr(t),Ce.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=t&&n.get(a.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ce.waitFor(s).next(()=>r)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t){this.ci={},this.overlays={},this.li=new q1(0),this.hi=!1,this.hi=!0,this.Pi=new AU,this.referenceDelegate=e(this),this.Ti=new xU(this),this.indexManager=new uU,this.remoteDocumentCache=function(r){return new EU(r)}(n=>this.referenceDelegate.Ii(n)),this.serializer=new aU(t),this.Ei=new wU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _U,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new bU(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){Ue("MemoryPersistence","Starting transaction:",e);const r=new SU(this.li.next());return this.referenceDelegate.di(),n(r).next(s=>this.referenceDelegate.Ai(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ri(e,t){return Ce.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,t)))}}class SU extends Qq{constructor(e){super(),this.currentSequenceNumber=e}}class HT{constructor(e){this.persistence=e,this.Vi=new VT,this.mi=null}static fi(e){return new HT(e)}get gi(){if(this.mi)return this.mi;throw ht(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(r=>this.gi.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.gi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.gi,n=>{const r=ot.fromPath(n);return this.pi(e,r).next(s=>{s||t.removeEntry(r,At.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(n=>{n?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Ce.or([()=>Ce.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class H_{constructor(e,t){this.persistence=e,this.yi=new nf(n=>t8(n.path),(n,r)=>n.isEqual(r)),this.garbageCollector=mU(this,t)}static fi(e,t){return new H_(e,t)}di(){}Ai(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(r=>n+r))}br(e){let t=0;return this.yr(e,n=>{t++}).next(()=>t)}yr(e,t){return Ce.forEach(this.yi,(n,r)=>this.Dr(e,n,r).next(s=>s?Ce.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,t).next(a=>{a||(n++,s.removeEntry(o,At.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Ce.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vw(e.data.value)),t}Dr(e,t,n){return Ce.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.yi.get(t);return Ce.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Nt(),r=Nt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new zT(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return w6()?8:Zq(si())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.bs(e,t,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new TU;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.fs)return this.Ds(e,t,o,a.size)})}).next(()=>s.result)}Ds(e,t,n,r){return n.documentReadCount<this.gs?(Zf()<=Pt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",ep(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Ce.resolve()):(Zf()<=Pt.DEBUG&&Ue("QueryEngine","Query:",ep(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(Zf()<=Pt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",ep(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(t))):Ce.resolve())}ws(e,t){if(fP(t))return Ce.resolve(null);let n=Aa(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=q_(t,null,"F"),n=Aa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Nt(...s);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(u=>{const h=this.vs(t,a);return this.Cs(t,h,o,u.readTime)?this.ws(e,q_(t,null,"F")):this.Fs(e,h,t,u)}))})))}bs(e,t,n,r){return fP(t)||r.isEqual(At.min())?Ce.resolve(null):this.ys.getDocuments(e,n).next(s=>{const o=this.vs(t,s);return this.Cs(t,o,n,r)?Ce.resolve(null):(Zf()<=Pt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ep(t)),this.Fs(e,o,t,Kq(r,jy)).next(a=>a))})}vs(e,t){let n=new fr(s3(e));return t.forEach((r,s)=>{z1(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return Zf()<=Pt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",ep(t)),this.ys.getDocumentsMatchingQuery(e,t,Mc.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="LocalStore",DU=3e8;class kU{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Pn(Tt),this.Os=new nf(s=>OT(s),LT),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vU(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function RU(i,e,t,n){return new kU(i,e,t,n)}async function D3(i,e){const t=wt(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],a=[];let u=Nt();for(const h of r){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(n,u).next(h=>({ks:h,removedBatchIds:o,addedBatchIds:a}))})})}function PU(i,e){const t=wt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,h,d){const m=h.batch,p=m.keys();let g=Ce.resolve();return p.forEach(w=>{g=g.next(()=>d.getEntry(u,w)).next(_=>{const A=h.docVersions.get(w);Wt(A!==null,48541),_.version.compareTo(A)<0&&(m.applyToRemoteDocument(_,h),_.isValidDocument()&&(_.setReadTime(h.commitVersion),d.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let u=Nt();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(u=u.add(a.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function k3(i){const e=wt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function NU(i,e){const t=wt(i),n=e.snapshotVersion;let r=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});r=t.xs;const a=[];e.targetChanges.forEach((d,m)=>{const p=r.get(m);if(!p)return;a.push(t.Ti.removeMatchingKeys(s,d.removedDocuments,m).next(()=>t.Ti.addMatchingKeys(s,d.addedDocuments,m)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(Wr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),r=r.insert(m,g),function(_,A,v){return _.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=DU?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,d)&&a.push(t.Ti.updateTargetData(s,g))});let u=Jl(),h=Nt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(OU(s,o,e.documentUpdates).next(d=>{u=d.qs,h=d.Qs})),!n.isEqual(At.min())){const d=t.Ti.getLastRemoteSnapshotVersion(s).next(m=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(d)}return Ce.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.xs=r,s))}function OU(i,e,t){let n=Nt(),r=Nt();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let o=Jl();return t.forEach((a,u)=>{const h=s.get(a);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(a)),u.isNoDocument()&&u.version.isEqual(At.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ue($T,"Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",u.version)}),{qs:o,Qs:r}})}function LU(i,e){const t=wt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=RT),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function FU(i,e){const t=wt(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Ti.getTargetData(n,e).next(s=>s?(r=s,Ce.resolve(r)):t.Ti.allocateTargetId(n).next(o=>(r=new kc(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Ti.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=t.xs.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.xs=t.xs.insert(n.targetId,n),t.Os.set(e,n.targetId)),n})}async function qx(i,e,t){const n=wt(i),r=n.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Km(o))throw o;Ue($T,`Failed to update sequence numbers for target ${e}: ${o}`)}n.xs=n.xs.remove(e),n.Os.delete(r.target)}function SP(i,e,t){const n=wt(i);let r=At.min(),s=Nt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const m=wt(u),p=m.Os.get(d);return p!==void 0?Ce.resolve(m.xs.get(p)):m.Ti.getTargetData(h,d)}(n,o,Aa(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.Ti.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>n.Ms.getDocumentsMatchingQuery(o,e,t?r:At.min(),t?s:Nt())).next(a=>(MU(n,A8(e),a),{documents:a,$s:s})))}function MU(i,e,t){let n=i.Ns.get(e)||At.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.Ns.set(e,n)}class TP{constructor(){this.activeTargetIds=T8()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BU{constructor(){this.xo=new TP,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new TP,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="ConnectivityMonitor";class DP{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ue(IP,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ue(IP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cw=null;function Ux(){return Cw===null?Cw=function(){return 268435456+Math.round(2147483648*Math.random())}():Cw++,"0x"+Cw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="RestConnection",qU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UU{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${n}/databases/${r}`,this.Go=this.databaseId.database===M_?`project_id=${n}`:`project_id=${n}&database_id=${r}`}zo(e,t,n,r,s){const o=Ux(),a=this.jo(e,t.toUriEncodedString());Ue(AE,`Sending RPC '${e}' ${o}:`,a,n);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,r,s);const{host:h}=new URL(a),d=Yc(h);return this.Jo(e,a,u,n,d).then(m=>(Ue(AE,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Mm(AE,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",n),m})}Yo(e,t,n,r,s,o){return this.zo(e,t,n,r,s)}Ho(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),n&&n.headers.forEach((r,s)=>e[s]=r)}jo(e,t){const n=qU[e];return`${this.Ko}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="WebChannelConnection";class HU extends UU{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const o=Ux();return new Promise((a,u)=>{const h=new RF;h.setWithCredentials(!0),h.listenOnce(PF.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Uw.NO_ERROR:const m=h.getResponseJson();Ue(Xr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Uw.TIMEOUT:Ue(Xr,`RPC '${e}' ${o} timed out`),u(new ze(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Uw.HTTP_ERROR:const p=h.getStatus();if(Ue(Xr,`RPC '${e}' ${o} failed with status:`,p,"response text:",h.getResponseText()),p>0){let g=h.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const _=function(v){const E=v.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(E)>=0?E:Ee.UNKNOWN}(w.status);u(new ze(_,w.message))}else u(new ze(Ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ze(Ee.UNAVAILABLE,"Connection failed."));break;default:ht(9055,{h_:e,streamId:o,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{Ue(Xr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);Ue(Xr,`RPC '${e}' ${o} sending request:`,r),h.send(t,"POST",d,n,15)})}I_(e,t,n){const r=Ux(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LF(),a=OF(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const d=s.join("");Ue(Xr,`Creating RPC '${e}' stream ${r}: ${d}`,u);const m=o.createWebChannel(d,u);this.E_(m);let p=!1,g=!1;const w=new VU({Zo:A=>{g?Ue(Xr,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(p||(Ue(Xr,`Opening RPC '${e}' stream ${r} transport.`),m.open(),p=!0),Ue(Xr,`RPC '${e}' stream ${r} sending:`,A),m.send(A))},Xo:()=>m.close()}),_=(A,v,E)=>{A.listen(v,I=>{try{E(I)}catch(S){setTimeout(()=>{throw S},0)}})};return _(m,ny.EventType.OPEN,()=>{g||(Ue(Xr,`RPC '${e}' stream ${r} transport opened.`),w.__())}),_(m,ny.EventType.CLOSE,()=>{g||(g=!0,Ue(Xr,`RPC '${e}' stream ${r} transport closed`),w.u_(),this.d_(m))}),_(m,ny.EventType.ERROR,A=>{g||(g=!0,Mm(Xr,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),w.u_(new ze(Ee.UNAVAILABLE,"The operation could not be completed")))}),_(m,ny.EventType.MESSAGE,A=>{var v;if(!g){const E=A.data[0];Wt(!!E,16349);const I=E,S=(I==null?void 0:I.error)||((v=I[0])===null||v===void 0?void 0:v.error);if(S){Ue(Xr,`RPC '${e}' stream ${r} received error:`,S);const R=S.status;let F=function(D){const P=Kn[D];if(P!==void 0)return g3(P)}(R),k=S.message;F===void 0&&(F=Ee.INTERNAL,k="Unknown error status: "+R+" with message "+S.message),g=!0,w.u_(new ze(F,k)),m.close()}else Ue(Xr,`RPC '${e}' stream ${r} received:`,E),w.c_(E)}}),_(a,NF.STAT_EVENT,A=>{A.stat===Dx.PROXY?Ue(Xr,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===Dx.NOPROXY&&Ue(Xr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function bE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(i){return new G8(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t,n=1e3,r=1.5,s=6e4){this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&Ue("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="PersistentStream";class P3{constructor(e,t,n,r,s,o,a,u){this.xi=e,this.S_=n,this.D_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new R3(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(Kl(t.toString()),Kl("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.v_===t&&this.z_(n,r)},n=>{e(()=>{const r=new ze(Ee.UNKNOWN,"Fetching auth token failed: "+n.message);return this.j_(r)})})}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{n(()=>this.j_(r))}),this.stream.onMessage(r=>{n(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Ue(kP,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Ue(kP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zU extends P3{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=Y8(this.serializer,e),n=function(s){if(!("targetChange"in s))return At.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?At.min():o.readTime?ba(o.readTime):At.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=jx(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=Ox(u)?{documents:Z8(s,u)}:{query:E3(s,u).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=w3(s,o.resumeToken);const h=Fx(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(At.min())>0){a.readTime=V_(s,o.snapshotVersion.toTimestamp());const h=Fx(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const n=nU(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=jx(this.serializer),t.removeTarget=e,this.Q_(t)}}class $U extends P3{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=Q8(e.writeResults,e.commitTime),n=ba(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=jx(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>X8(this.serializer,n))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{}class GU extends WU{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,Mx(t,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(Ee.UNKNOWN,s.toString())})}Yo(e,t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,Mx(t,n),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ze(Ee.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class KU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Kl(t),this.ua=!1):Ue("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RemoteStore";class JU{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(o=>{n.enqueueAndForget(async()=>{rf(this)&&(Ue(Gd,"Restarting streams for network reachability change."),await async function(u){const h=wt(u);h.da.add(4),await q0(h),h.Va.set("Unknown"),h.da.delete(4),await J1(h)}(this))})}),this.Va=new KU(n,r)}}async function J1(i){if(rf(i))for(const e of i.Aa)await e(!0)}async function q0(i){for(const e of i.Aa)await e(!1)}function N3(i,e){const t=wt(i);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),JT(t)?KT(t):Ym(t).N_()&&GT(t,e))}function WT(i,e){const t=wt(i),n=Ym(t);t.Ea.delete(e),n.N_()&&O3(t,e),t.Ea.size===0&&(n.N_()?n.k_():rf(t)&&t.Va.set("Unknown"))}function GT(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ym(i).Z_(e)}function O3(i,e){i.ma.Ke(e),Ym(i).X_(e)}function KT(i){i.ma=new H8({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Ym(i).start(),i.Va.ca()}function JT(i){return rf(i)&&!Ym(i).O_()&&i.Ea.size>0}function rf(i){return wt(i).da.size===0}function L3(i){i.ma=void 0}async function YU(i){i.Va.set("Online")}async function XU(i){i.Ea.forEach((e,t)=>{GT(i,e)})}async function QU(i,e){L3(i),JT(i)?(i.Va.Pa(e),KT(i)):i.Va.set("Unknown")}async function ZU(i,e,t){if(i.Va.set("Online"),e instanceof v3&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(i,e)}catch(n){Ue(Gd,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await z_(i,n)}else if(e instanceof $w?i.ma.Xe(e):e instanceof y3?i.ma.ot(e):i.ma.nt(e),!t.isEqual(At.min()))try{const n=await k3(i.localStore);t.compareTo(n)>=0&&await function(s,o){const a=s.ma.It(o);return a.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ea.get(h);d&&s.Ea.set(h,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,h)=>{const d=s.Ea.get(u);if(!d)return;s.Ea.set(u,d.withResumeToken(Wr.EMPTY_BYTE_STRING,d.snapshotVersion)),O3(s,u);const m=new kc(d.target,u,h,d.sequenceNumber);GT(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(i,t)}catch(n){Ue(Gd,"Failed to raise snapshot:",n),await z_(i,n)}}async function z_(i,e,t){if(!Km(e))throw e;i.da.add(1),await q0(i),i.Va.set("Offline"),t||(t=()=>k3(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ue(Gd,"Retrying IndexedDB access"),await t(),i.da.delete(1),await J1(i)})}function F3(i,e){return e().catch(t=>z_(i,t,e))}async function Y1(i){const e=wt(i),t=Uc(e);let n=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:RT;for(;eV(e);)try{const r=await LU(e.localStore,n);if(r===null){e.Ia.length===0&&t.k_();break}n=r.batchId,tV(e,r)}catch(r){await z_(e,r)}M3(e)&&B3(e)}function eV(i){return rf(i)&&i.Ia.length<10}function tV(i,e){i.Ia.push(e);const t=Uc(i);t.N_()&&t.ea&&t.ta(e.mutations)}function M3(i){return rf(i)&&!Uc(i).O_()&&i.Ia.length>0}function B3(i){Uc(i).start()}async function nV(i){Uc(i).ia()}async function rV(i){const e=Uc(i);for(const t of i.Ia)e.ta(t.mutations)}async function iV(i,e,t){const n=i.Ia.shift(),r=jT.from(n,e,t);await F3(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await Y1(i)}async function sV(i,e){e&&Uc(i).ea&&await async function(n,r){if(function(o){return U8(o)&&o!==Ee.ABORTED}(r.code)){const s=n.Ia.shift();Uc(n).L_(),await F3(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Y1(n)}}(i,e),M3(i)&&B3(i)}async function RP(i,e){const t=wt(i);t.asyncQueue.verifyOperationInProgress(),Ue(Gd,"RemoteStore received new credentials");const n=rf(t);t.da.add(3),await q0(t),n&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await J1(t)}async function oV(i,e){const t=wt(i);e?(t.da.delete(2),await J1(t)):e||(t.da.add(2),await q0(t),t.Va.set("Unknown"))}function Ym(i){return i.fa||(i.fa=function(t,n,r){const s=wt(t);return s.oa(),new zU(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{e_:YU.bind(null,i),n_:XU.bind(null,i),i_:QU.bind(null,i),Y_:ZU.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),JT(i)?KT(i):i.Va.set("Unknown")):(await i.fa.stop(),L3(i))})),i.fa}function Uc(i){return i.ga||(i.ga=function(t,n,r){const s=wt(t);return s.oa(),new $U(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:nV.bind(null,i),i_:sV.bind(null,i),na:rV.bind(null,i),ra:iV.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await Y1(i)):(await i.ga.stop(),i.Ia.length>0&&(Ue(Gd,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Ul,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const o=Date.now()+n,a=new YT(e,t,o,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function XT(i,e){if(Kl("AsyncQueue",`${e}: ${i}`),Km(i))return new ze(Ee.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{static emptySet(e){return new mp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ot.comparator(t.key,n.key):(t,n)=>ot.comparator(t.key,n.key),this.keyedMap=ry(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new mp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.pa=new Pn(ot.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?e.type!==0&&n.type===3?this.pa=this.pa.insert(t,e):e.type===3&&n.type!==1?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.pa=this.pa.remove(t):e.type===1&&n.type===2?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):ht(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Vm{constructor(e,t,n,r,s,o,a,u,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Vm(e,t,mp.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&H1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class lV{constructor(){this.queries=NP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=wt(t),s=r.queries;r.queries=NP(),s.forEach((o,a)=>{for(const u of a.Sa)u.onError(n)})})(this,new ze(Ee.ABORTED,"Firestore shutting down"))}}function NP(){return new nf(i=>i3(i),H1)}async function j3(i,e){const t=wt(i);let n=3;const r=e.query;let s=t.queries.get(r);s?!s.Da()&&e.va()&&(n=2):(s=new aV,n=e.va()?0:1);try{switch(n){case 0:s.ba=await t.onListen(r,!0);break;case 1:s.ba=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=XT(o,`Initialization of query '${ep(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Sa.push(e),e.Fa(t.onlineState),s.ba&&e.Ma(s.ba)&&QT(t)}async function q3(i,e){const t=wt(i),n=e.query;let r=3;const s=t.queries.get(n);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?r=e.va()?0:1:!s.Da()&&e.va()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function uV(i,e){const t=wt(i);let n=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.Sa)a.Ma(r)&&(n=!0);o.ba=r}}n&&QT(t)}function cV(i,e,t){const n=wt(i),r=n.queries.get(e);if(r)for(const s of r.Sa)s.onError(t);n.queries.delete(e)}function QT(i){i.Ca.forEach(e=>{e.next()})}var Vx,OP;(OP=Vx||(Vx={})).xa="default",OP.Cache="cache";class U3{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new Vm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const n=t!=="Offline";return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Vm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Vx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.key=e}}class H3{constructor(e){this.key=e}}class hV{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Nt(),this.mutatedKeys=Nt(),this.Za=s3(e),this.Xa=new mp(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new PP,r=t?t.Xa:this.Xa;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,m)=>{const p=r.get(d),g=z1(this.query,m)?m:null,w=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;p&&g?p.data.isEqual(g.data)?w!==_&&(n.track({type:3,doc:g}),A=!0):this.ru(p,g)||(n.track({type:2,doc:g}),A=!0,(u&&this.Za(g,u)>0||h&&this.Za(g,h)<0)&&(a=!0)):!p&&g?(n.track({type:0,doc:g}),A=!0):p&&!g&&(n.track({type:1,doc:p}),A=!0,(u||h)&&(a=!0)),A&&(g?(o=o.add(g),s=_?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Xa:o,nu:n,Cs:a,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((d,m)=>function(g,w){const _=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht(20277,{Vt:A})}};return _(g)-_(w)}(d.type,m.type)||this.Za(d.doc,m.doc)),this.iu(n),r=r!=null&&r;const a=t&&!r?this.su():[],u=this.Ya.size===0&&this.current&&!r?1:0,h=u!==this.Ja;return this.Ja=u,o.length!==0||h?{snapshot:new Vm(this.query,e.Xa,s,o,e.mutatedKeys,u===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new PP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Nt(),this.Xa.forEach(n=>{this._u(n.key)&&(this.Ya=this.Ya.add(n.key))});const t=[];return e.forEach(n=>{this.Ya.has(n)||t.push(new H3(n))}),this.Ya.forEach(n=>{e.has(n)||t.push(new V3(n))}),t}au(e){this.Ha=e.$s,this.Ya=Nt();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Vm.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ZT="SyncEngine";class dV{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fV{constructor(e){this.key=e,this.cu=!1}}class pV{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new nf(a=>i3(a),H1),this.Pu=new Map,this.Tu=new Set,this.Iu=new Pn(ot.comparator),this.Eu=new Map,this.du=new VT,this.Au={},this.Ru=new Map,this.Vu=Um.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function mV(i,e,t=!0){const n=J3(i);let r;const s=n.hu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=await z3(n,e,t,!0),r}async function gV(i,e){const t=J3(i);await z3(t,e,!0,!1)}async function z3(i,e,t,n){const r=await FU(i.localStore,Aa(e)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,t);let a;return n&&(a=await yV(i,e,s,o==="current",r.resumeToken)),i.isPrimaryClient&&t&&N3(i.remoteStore,r),a}async function yV(i,e,t,n,r){i.fu=(m,p,g)=>async function(_,A,v,E){let I=A.view.tu(v);I.Cs&&(I=await SP(_.localStore,A.query,!1).then(({documents:k})=>A.view.tu(k,I)));const S=E&&E.targetChanges.get(A.targetId),R=E&&E.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(I,_.isPrimaryClient,S,R);return FP(_,A.targetId,F.ou),F.snapshot}(i,m,p,g);const s=await SP(i.localStore,e,!0),o=new hV(e,s.$s),a=o.tu(s.documents),u=j0.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),h=o.applyChanges(a,i.isPrimaryClient,u);FP(i,t,h.ou);const d=new dV(e,t,o);return i.hu.set(e,d),i.Pu.has(t)?i.Pu.get(t).push(e):i.Pu.set(t,[e]),h.snapshot}async function vV(i,e,t){const n=wt(i),r=n.hu.get(e),s=n.Pu.get(r.targetId);if(s.length>1)return n.Pu.set(r.targetId,s.filter(o=>!H1(o,e))),void n.hu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qx(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&WT(n.remoteStore,r.targetId),Hx(n,r.targetId)}).catch(Gm)):(Hx(n,r.targetId),await qx(n.localStore,r.targetId,!0))}async function wV(i,e){const t=wt(i),n=t.hu.get(e),r=t.Pu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),WT(t.remoteStore,n.targetId))}async function _V(i,e,t){const n=TV(i);try{const r=await function(o,a){const u=wt(o),h=Qn.now(),d=a.reduce((g,w)=>g.add(w.key),Nt());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Jl(),_=Nt();return u.Bs.getEntries(g,d).next(A=>{w=A,w.forEach((v,E)=>{E.isValidDocument()||(_=_.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,w)).next(A=>{m=A;const v=[];for(const E of a){const I=L8(E,m.get(E.key).overlayedDocument);I!=null&&v.push(new Qc(E.key,I,JF(I.value.mapValue),To.exists(!0)))}return u.mutationQueue.addMutationBatch(g,h,v,a)}).next(A=>{p=A;const v=A.applyToLocalDocumentSet(m,_);return u.documentOverlayCache.saveOverlays(g,A.batchId,v)})}).then(()=>({batchId:p.batchId,changes:a3(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(o,a,u){let h=o.Au[o.currentUser.toKey()];h||(h=new Pn(Tt)),h=h.insert(a,u),o.Au[o.currentUser.toKey()]=h}(n,r.batchId,t),await U0(n,r.changes),await Y1(n.remoteStore)}catch(r){const s=XT(r,"Failed to persist write");t.reject(s)}}async function $3(i,e){const t=wt(i);try{const n=await NU(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Eu.get(s);o&&(Wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?Wt(o.cu,14607):r.removedDocuments.size>0&&(Wt(o.cu,42227),o.cu=!1))}),await U0(t,n,e)}catch(n){await Gm(n)}}function LP(i,e,t){const n=wt(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.hu.forEach((s,o)=>{const a=o.view.Fa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const u=wt(o);u.onlineState=a;let h=!1;u.queries.forEach((d,m)=>{for(const p of m.Sa)p.Fa(a)&&(h=!0)}),h&&QT(u)}(n.eventManager,e),r.length&&n.lu.Y_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function AV(i,e,t){const n=wt(i);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Eu.get(e),s=r&&r.key;if(s){let o=new Pn(ot.comparator);o=o.insert(s,ri.newNoDocument(s,At.min()));const a=Nt().add(s),u=new G1(At.min(),new Map,new Pn(Tt),o,a);await $3(n,u),n.Iu=n.Iu.remove(s),n.Eu.delete(e),eI(n)}else await qx(n.localStore,e,!1).then(()=>Hx(n,e,t)).catch(Gm)}async function bV(i,e){const t=wt(i),n=e.batch.batchId;try{const r=await PU(t.localStore,e);G3(t,n,null),W3(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await U0(t,r)}catch(r){await Gm(r)}}async function EV(i,e,t){const n=wt(i);try{const r=await function(o,a){const u=wt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,a).next(m=>(Wt(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(n.localStore,e);G3(n,e,t),W3(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await U0(n,r)}catch(r){await Gm(r)}}function W3(i,e){(i.Ru.get(e)||[]).forEach(t=>{t.resolve()}),i.Ru.delete(e)}function G3(i,e,t){const n=wt(i);let r=n.Au[n.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.Au[n.currentUser.toKey()]=r}}function Hx(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Pu.get(e))i.hu.delete(n),t&&i.lu.gu(n,t);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(n=>{i.du.containsKey(n)||K3(i,n)})}function K3(i,e){i.Tu.delete(e.path.canonicalString());const t=i.Iu.get(e);t!==null&&(WT(i.remoteStore,t),i.Iu=i.Iu.remove(e),i.Eu.delete(t),eI(i))}function FP(i,e,t){for(const n of t)n instanceof V3?(i.du.addReference(n.key,e),CV(i,n)):n instanceof H3?(Ue(ZT,"Document no longer in limbo: "+n.key),i.du.removeReference(n.key,e),i.du.containsKey(n.key)||K3(i,n.key)):ht(19791,{pu:n})}function CV(i,e){const t=e.key,n=t.path.canonicalString();i.Iu.get(t)||i.Tu.has(n)||(Ue(ZT,"New document in limbo: "+t),i.Tu.add(n),eI(i))}function eI(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const t=new ot(mn.fromString(e)),n=i.Vu.next();i.Eu.set(n,new fV(t)),i.Iu=i.Iu.insert(t,n),N3(i.remoteStore,new kc(Aa(FT(t.path)),n,"TargetPurposeLimboResolution",q1.le))}}async function U0(i,e,t){const n=wt(i),r=[],s=[],o=[];n.hu.isEmpty()||(n.hu.forEach((a,u)=>{o.push(n.fu(u,e,t).then(h=>{var d;if((h||t)&&n.isPrimaryClient){const m=h?!h.fromCache:(d=t==null?void 0:t.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){r.push(h);const m=zT.Rs(u.targetId,h);s.push(m)}}))}),await Promise.all(o),n.lu.Y_(r),await async function(u,h){const d=wt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Ce.forEach(h,p=>Ce.forEach(p.ds,g=>d.persistence.referenceDelegate.addReference(m,p.targetId,g)).next(()=>Ce.forEach(p.As,g=>d.persistence.referenceDelegate.removeReference(m,p.targetId,g)))))}catch(m){if(!Km(m))throw m;Ue($T,"Failed to update sequence numbers: "+m)}for(const m of h){const p=m.targetId;if(!m.fromCache){const g=d.xs.get(p),w=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(w);d.xs=d.xs.insert(p,_)}}}(n.localStore,s))}async function xV(i,e){const t=wt(i);if(!t.currentUser.isEqual(e)){Ue(ZT,"User change. New user:",e.toKey());const n=await D3(t.localStore,e);t.currentUser=e,function(s,o){s.Ru.forEach(a=>{a.forEach(u=>{u.reject(new ze(Ee.CANCELLED,o))})}),s.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await U0(t,n.ks)}}function SV(i,e){const t=wt(i),n=t.Eu.get(e);if(n&&n.cu)return Nt().add(n.key);{let r=Nt();const s=t.Pu.get(e);if(!s)return r;for(const o of s){const a=t.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function J3(i){const e=wt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=$3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AV.bind(null,e),e.lu.Y_=uV.bind(null,e.eventManager),e.lu.gu=cV.bind(null,e.eventManager),e}function TV(i){const e=wt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EV.bind(null,e),e}class $_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=K1(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return RU(this.persistence,new IU,e.initialUser,this.serializer)}Su(e){return new I3(HT.fi,this.serializer)}bu(e){return new BU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$_.provider={build:()=>new $_};class IV extends $_{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Wt(this.persistence.referenceDelegate instanceof H_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new fU(n,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new I3(n=>H_.fi(n,t),this.serializer)}}class zx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>LP(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=xV.bind(null,this.syncEngine),await oV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lV}()}createDatastore(e){const t=K1(e.databaseInfo.databaseId),n=function(s){return new HU(s)}(e.databaseInfo);return function(s,o,a,u){return new GU(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,r,s,o,a){return new JU(n,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>LP(this.syncEngine,t,0),function(){return DP.C()?new DP:new jU}())}createSyncEngine(e,t){return function(r,s,o,a,u,h,d){const m=new pV(r,s,o,a,u,h);return d&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=wt(r);Ue(Gd,"RemoteStore shutting down."),s.da.add(5),await q0(s),s.Ra.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zx.provider={build:()=>new zx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Kl("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="FirestoreClient";class DV{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ni.UNAUTHENTICATED,this.clientId=jF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{Ue(Vc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Ue(Vc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ul;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=XT(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function EE(i,e){i.asyncQueue.verifyOperationInProgress(),Ue(Vc,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await D3(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function MP(i,e){i.asyncQueue.verifyOperationInProgress();const t=await kV(i);Ue(Vc,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>RP(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>RP(e.remoteStore,r)),i._onlineComponents=e}async function kV(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ue(Vc,"Using user provided OfflineComponentProvider");try{await EE(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===Ee.FAILED_PRECONDITION||r.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Mm("Error using user provided cache. Falling back to memory cache: "+t),await EE(i,new $_)}}else Ue(Vc,"Using default OfflineComponentProvider"),await EE(i,new IV(void 0));return i._offlineComponents}async function tI(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ue(Vc,"Using user provided OnlineComponentProvider"),await MP(i,i._uninitializedComponentsProvider._online)):(Ue(Vc,"Using default OnlineComponentProvider"),await MP(i,new zx))),i._onlineComponents}function RV(i){return tI(i).then(e=>e.syncEngine)}function PV(i){return tI(i).then(e=>e.datastore)}async function $x(i){const e=await tI(i),t=e.eventManager;return t.onListen=mV.bind(null,e.syncEngine),t.onUnlisten=vV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wV.bind(null,e.syncEngine),t}function NV(i,e,t={}){const n=new Ul;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,h){const d=new Y3({next:p=>{d.xu(),o.enqueueAndForget(()=>q3(s,m)),p.fromCache&&u.source==="server"?h.reject(new ze(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(p)},error:p=>h.reject(p)}),m=new U3(a,d,{includeMetadataChanges:!0,Qa:!0});return j3(s,m)}(await $x(i),i.asyncQueue,e,t,n)),n.promise}function OV(i,e,t){const n=new Ul;return i.asyncQueue.enqueueAndForget(async()=>{try{const r=await PV(i);n.resolve(async function(o,a,u){var h;const d=wt(o),{request:m,yt:p,parent:g}=eU(d.serializer,_8(a),u);d.connection.Uo||delete m.parent;const w=(await d.Yo("RunAggregationQuery",d.serializer.databaseId,g,m,1)).filter(A=>!!A.result);Wt(w.length===1,64727);const _=(h=w[0].result)===null||h===void 0?void 0:h.aggregateFields;return Object.keys(_).reduce((A,v)=>(A[p[v]]=_[v],A),{})}(r,e,t))}catch(r){n.reject(r)}}),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(i,e,t){if(!t)throw new ze(Ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function LV(i,e,t,n){if(e===!0&&n===!0)throw new ze(Ee.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function jP(i){if(!ot.isDocumentKey(i))throw new ze(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qP(i){if(ot.isDocumentKey(i))throw new ze(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function X1(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ht(12329,{type:typeof i})}function Gs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ze(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=X1(i);throw new ze(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function FV(i,e){if(e<=0)throw new ze(Ee.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="firestore.googleapis.com",UP=!0;class VP{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z3,this.ssl=UP}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:UP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hU)throw new ze(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X3((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Q1{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new jq;switch(n.type){case"firstParty":return new Hq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ze(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=BP.get(t);n&&(Ue("ComponentProvider","Removing Datastore"),BP.delete(t),n.terminate())}(this),Promise.resolve()}}function MV(i,e,t,n={}){var r;i=Gs(i,Q1);const s=Yc(e),o=i._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:i._getEmulatorOptions()}),u=`${e}:${t}`;s&&(xT(`https://${u}`),ST("Firestore",!0)),o.host!==Z3&&o.host!==u&&Mm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:n});if(!zd(h,a)&&(i._setSettings(h),n.mockUserToken)){let d,m;if(typeof n.mockUserToken=="string")d=n.mockUserToken,m=ni.MOCK_USER;else{d=CF(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new ze(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ni(p)}i._authCredentials=new qq(new MF(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new eu(this.firestore,e,this._query)}}class _i{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _i(this.firestore,e,this._key)}}class Lc extends eu{constructor(e,t,n){super(e,t,FT(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _i(this.firestore,null,new ot(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function BV(i,e,...t){if(i=hn(i),Q3("collection","path",e),i instanceof Q1){const n=mn.fromString(e,...t);return qP(n),new Lc(i,null,n)}{if(!(i instanceof _i||i instanceof Lc))throw new ze(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(mn.fromString(e,...t));return qP(n),new Lc(i.firestore,null,n)}}function jV(i,e,...t){if(i=hn(i),arguments.length===1&&(e=jF.newId()),Q3("doc","path",e),i instanceof Q1){const n=mn.fromString(e,...t);return jP(n),new _i(i,null,new ot(n))}{if(!(i instanceof _i||i instanceof Lc))throw new ze(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(mn.fromString(e,...t));return jP(n),new _i(i.firestore,i instanceof Lc?i.converter:null,new ot(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="AsyncQueue";class zP{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new R3(this,"async_queue_retry"),this.rc=()=>{const n=bE();n&&Ue(HP,"Visibility state changed to "+n.visibilityState),this.x_.b_()},this.sc=e;const t=bE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=bE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Ul;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Km(e))throw e;Ue(HP,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(n=>{throw this.Xu=n,this.ec=!1,Kl("INTERNAL UNHANDLED ERROR: ",$P(n)),n}).then(n=>(this.ec=!1,n))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=YT.createAndSchedule(this,e,t,n,s=>this.uc(s));return this.Zu.push(r),r}oc(){this.Xu&&ht(47125,{cc:$P(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function $P(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(i){return function(t,n){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class Hc extends Q1{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zP,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zP(e),this._firestoreClient=void 0,await e}}}function qV(i,e){const t=typeof i=="object"?i:DT(),n=typeof i=="string"?i:M_,r=j1(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=AF("firestore");s&&MV(r,...s)}return r}function Z1(i){if(i._terminated)throw new ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||UV(i),i._firestoreClient}function UV(i){var e,t,n;const r=i._freezeSettings(),s=function(a,u,h,d){return new s8(a,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,X3(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,r);i._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),i._firestoreClient=new DV(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class HV{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hm(Wr.fromBase64String(e))}catch(t){throw new ze(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hm(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ze(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=/^__.*__$/;class $V{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Qc(e,this.data,this.fieldMask,t,this.fieldTransforms):new B0(e,this.data,t,this.fieldTransforms)}}class eM{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Qc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tM(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht(40011,{Ic:i})}}class iI{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new iI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return W_(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(tM(this.Ic)&&zV.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class WV{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||K1(e)}bc(e,t,n,r=!1){return new iI({Ic:e,methodName:t,wc:n,path:Vr.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sI(i){const e=i._freezeSettings(),t=K1(i._databaseId);return new WV(i._databaseId,!!e.ignoreUndefinedProperties,t)}function GV(i,e,t,n,r,s={}){const o=i.bc(s.merge||s.mergeFields?2:0,e,t,r);aI("Data must be an object, but it was:",o,n);const a=nM(n,o);let u,h;if(s.merge)u=new ws(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const m of s.mergeFields){const p=Wx(e,m,t);if(!o.contains(p))throw new ze(Ee.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);iM(d,p)||d.push(p)}u=new ws(d),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new $V(new Ui(a),u,h)}class nA extends tA{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nA}}class oI extends tA{_toFieldTransform(e){return new R8(e.path,new zy)}isEqual(e){return e instanceof oI}}function KV(i,e,t,n){const r=i.bc(1,e,t);aI("Data must be an object, but it was:",r,n);const s=[],o=Ui.empty();Xc(n,(u,h)=>{const d=lI(e,u,t);h=hn(h);const m=r.mc(d);if(h instanceof nA)s.push(d);else{const p=V0(h,m);p!=null&&(s.push(d),o.set(d,p))}});const a=new ws(s);return new eM(o,a,r.fieldTransforms)}function JV(i,e,t,n,r,s){const o=i.bc(1,e,t),a=[Wx(e,n,t)],u=[r];if(s.length%2!=0)throw new ze(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Wx(e,s[p])),u.push(s[p+1]);const h=[],d=Ui.empty();for(let p=a.length-1;p>=0;--p)if(!iM(h,a[p])){const g=a[p];let w=u[p];w=hn(w);const _=o.mc(g);if(w instanceof nA)h.push(g);else{const A=V0(w,_);A!=null&&(h.push(g),d.set(g,A))}}const m=new ws(h);return new eM(d,m,o.fieldTransforms)}function YV(i,e,t,n=!1){return V0(t,i.bc(n?4:3,e))}function V0(i,e){if(rM(i=hn(i)))return aI("Unsupported field value:",e,i),nM(i,e);if(i instanceof tA)return function(n,r){if(!tM(r.Ic))throw r.gc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const a of n){let u=V0(a,r.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,e)}return function(n,r){if((n=hn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return I8(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Qn.fromDate(n);return{timestampValue:V_(r.serializer,s)}}if(n instanceof Qn){const s=new Qn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:V_(r.serializer,s)}}if(n instanceof nI)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hm)return{bytesValue:w3(r.serializer,n._byteString)};if(n instanceof _i){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:UT(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof rI)return function(o,a){return{mapValue:{fields:{[GF]:{stringValue:KF},[B_]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw a.gc("VectorValues must only contain numeric values.");return MT(a.serializer,h)})}}}}}}(n,r);throw r.gc(`Unsupported field value: ${X1(n)}`)}(i,e)}function nM(i,e){const t={};return UF(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xc(i,(n,r)=>{const s=V0(r,e.Ac(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function rM(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Qn||i instanceof nI||i instanceof Hm||i instanceof _i||i instanceof tA||i instanceof rI)}function aI(i,e,t){if(!rM(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const n=X1(t);throw n==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+n)}}function Wx(i,e,t){if((e=hn(e))instanceof eA)return e._internalPath;if(typeof e=="string")return lI(i,e);throw W_("Field path arguments must be of type string or ",i,!1,void 0,t)}const XV=new RegExp("[~\\*/\\[\\]]");function lI(i,e,t){if(e.search(XV)>=0)throw W_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new eA(...e.split("."))._internalPath}catch{throw W_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function W_(i,e,t,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new ze(Ee.INVALID_ARGUMENT,a+i+u)}function iM(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QV extends sM{data(){return super.data()}}function rA(i,e){return typeof e=="string"?lI(i,e):e instanceof eA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ze(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uI{}class cI extends uI{}function ZV(i,e,...t){let n=[];e instanceof uI&&n.push(e),n=n.concat(t),function(s){const o=s.filter(u=>u instanceof hI).length,a=s.filter(u=>u instanceof iA).length;if(o>1||o>0&&a>0)throw new ze(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const r of n)i=r._apply(i);return i}class iA extends cI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new iA(e,t,n)}_apply(e){const t=this._parse(e);return aM(e._query,t),new eu(e.firestore,e.converter,Lx(e._query,t))}_parse(e){const t=sI(e.firestore);return function(s,o,a,u,h,d,m){let p;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ze(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){JP(m,d);const w=[];for(const _ of m)w.push(KP(u,s,_));p={arrayValue:{values:w}}}else p=KP(u,s,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||JP(m,d),p=YV(a,o,m,d==="in"||d==="not-in");return Yn.create(h,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function GP(i,e,t){const n=e,r=rA("where",i);return iA._create(r,n,t)}class hI extends uI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hI(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Io.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const u of a)aM(o,u),o=Lx(o,u)}(e._query,t),new eu(e.firestore,e.converter,Lx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dI extends cI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dI(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hy(s,o)}(e._query,this._field,this._direction);return new eu(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Jm(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function e7(i,e="asc"){const t=e,n=rA("orderBy",i);return dI._create(n,t)}class fI extends cI{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new fI(e,t,n)}_apply(e){return new eu(e.firestore,e.converter,q_(e._query,this._limit,this._limitType))}}function t7(i){return FV("limit",i),fI._create("limit",i,"F")}function KP(i,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new ze(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n3(e)&&t.indexOf("/")!==-1)throw new ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(mn.fromString(t));if(!ot.isDocumentKey(n))throw new ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return aP(i,new ot(n))}if(t instanceof _i)return aP(i,t._key);throw new ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X1(t)}.`)}function JP(i,e){if(!Array.isArray(i)||i.length===0)throw new ze(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aM(i,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class n7{convertValue(e,t="none"){switch(qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ht(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Xc(e,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,r;const s=(r=(n=(t=e.fields)===null||t===void 0?void 0:t[B_].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>Un(o.doubleValue));return new rI(s)}convertGeoPoint(e){return new nI(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=V1(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qy(e));default:return null}}convertTimestamp(e){const t=Bc(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=mn.fromString(e);Wt(S3(n),9688,{name:e});const r=new Uy(n.get(1),n.get(3)),s=new ot(n.popFirst(5));return r.isEqual(t)||Kl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}function i7(){return new VV("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lM extends sM{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(rA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ww extends lM{data(e={}){return super.data(e)}}class uM{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ww(this._firestore,this._userDataWriter,n.key,n,new sy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const u=new Ww(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sy(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Ww(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sy(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:s7(a.type),doc:u,oldIndex:h,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function s7(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht(61501,{type:i})}}class sA extends n7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}function o7(i){i=Gs(i,eu);const e=Gs(i.firestore,Hc),t=Z1(e),n=new sA(e);return oM(i._query),NV(t,i._query).then(r=>new uM(e,n,i,r))}function a7(i,e,t){i=Gs(i,_i);const n=Gs(i.firestore,Hc),r=r7(i.converter,e,t);return pI(n,[GV(sI(n),"setDoc",i._key,r,i.converter!==null,t).toMutation(i._key,To.none())])}function l7(i,e,t,...n){i=Gs(i,_i);const r=Gs(i.firestore,Hc),s=sI(r);let o;return o=typeof(e=hn(e))=="string"||e instanceof eA?JV(s,"updateDoc",i._key,e,t,n):KV(s,"updateDoc",i._key,e),pI(r,[o.toMutation(i._key,To.exists(!0))])}function YP(i){return pI(Gs(i.firestore,Hc),[new BT(i._key,To.none())])}function u7(i,...e){var t,n,r;i=hn(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||WP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(WP(e[o])){const m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let u,h,d;if(i instanceof _i)h=Gs(i.firestore,Hc),d=FT(i._key.path),u={next:m=>{e[o]&&e[o](c7(h,i,m))},error:e[o+1],complete:e[o+2]};else{const m=Gs(i,eu);h=Gs(m.firestore,Hc),d=m._query;const p=new sA(h);u={next:g=>{e[o]&&e[o](new uM(h,p,m,g))},error:e[o+1],complete:e[o+2]},oM(i._query)}return function(p,g,w,_){const A=new Y3(_),v=new U3(g,A,w);return p.asyncQueue.enqueueAndForget(async()=>j3(await $x(p),v)),()=>{A.xu(),p.asyncQueue.enqueueAndForget(async()=>q3(await $x(p),v))}}(Z1(h),d,a,u)}function pI(i,e){return function(n,r){const s=new Ul;return n.asyncQueue.enqueueAndForget(async()=>_V(await RV(n),r,s)),s.promise}(Z1(i),e)}function c7(i,e,t){const n=t.docs.get(e._key),r=new sA(i);return new lM(i,r,e._key,n,new sy(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(i){return d7(i,{count:i7()})}function d7(i,e){const t=Gs(i.firestore,Hc),n=Z1(t),r=r8(e,(s,o)=>new j8(o,s.aggregateType,s._internalFieldPath));return OV(n,i._query,r).then(s=>function(a,u,h){const d=new sA(a);return new HV(u,d,h)}(t,i,s))}function f7(){return new oI("serverTimestamp")}(function(e,t=!0){(function(r){Wm=r})(tf),$d(new Fc("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),a=new Hc(new Uq(n.getProvider("auth-internal")),new zq(o,n.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ze(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uy(h.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_a(JR,YR,e),_a(JR,YR,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="firebasestorage.googleapis.com",hM="storageBucket",p7=2*60*1e3,m7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends Ra{constructor(e,t,n=0){super(CE(e),`Firebase Storage: ${t} (${CE(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return CE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ln;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ln||(Ln={}));function CE(i){return"storage/"+i}function mI(){const i="An unknown error occurred, please check the error payload for server response.";return new Fn(Ln.UNKNOWN,i)}function g7(i){return new Fn(Ln.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function y7(i){return new Fn(Ln.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v7(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fn(Ln.UNAUTHENTICATED,i)}function w7(){return new Fn(Ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _7(i){return new Fn(Ln.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function A7(){return new Fn(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function b7(){return new Fn(Ln.CANCELED,"User canceled the upload/download.")}function E7(i){return new Fn(Ln.INVALID_URL,"Invalid URL '"+i+"'.")}function C7(i){return new Fn(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function x7(){return new Fn(Ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hM+"' property when initializing the app?")}function S7(){return new Fn(Ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function T7(){return new Fn(Ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I7(i){return new Fn(Ln.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gx(i){return new Fn(Ln.INVALID_ARGUMENT,i)}function dM(){return new Fn(Ln.APP_DELETED,"The Firebase app was deleted.")}function D7(i){return new Fn(Ln.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oy(i,e){return new Fn(Ln.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Gg(i){throw new Fn(Ln.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=_s.makeFromUrl(e,t)}catch{return new _s(e,"")}if(n.path==="")return n;throw C7(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function h(S){S.path_=decodeURIComponent(S.path)}const d="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${m}/${d}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},_=t===cM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",v=new RegExp(`^https?://${_}/${r}/${A}`,"i"),I=[{regex:a,indices:u,postModify:s},{regex:g,indices:w,postModify:h},{regex:v,indices:{bucket:1,path:2},postModify:h}];for(let S=0;S<I.length;S++){const R=I[S],F=R.regex.exec(e);if(F){const k=F[R.indices.bucket];let T=F[R.indices.path];T||(T=""),n=new _s(k,T),R.postModify(n);break}}if(n==null)throw E7(e);return n}}class k7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(i,e,t){let n=1,r=null,s=null,o=!1,a=0;function u(){return a===2}let h=!1;function d(...A){h||(h=!0,e.apply(null,A))}function m(A){r=setTimeout(()=>{r=null,i(g,u())},A)}function p(){s&&clearTimeout(s)}function g(A,...v){if(h){p();return}if(A){p(),d.call(null,A,...v);return}if(u()||o){p(),d.call(null,A,...v);return}n<64&&(n*=2);let I;a===1?(a=2,I=0):I=(n+Math.random())*1e3,m(I)}let w=!1;function _(A){w||(w=!0,p(),!h&&(r!==null?(A||(a=2),clearTimeout(r),m(0)):A||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,_(!0)},t),_}function P7(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(i){return i!==void 0}function O7(i){return typeof i=="object"&&!Array.isArray(i)}function gI(i){return typeof i=="string"||i instanceof String}function XP(i){return yI()&&i instanceof Blob}function yI(){return typeof Blob<"u"}function QP(i,e,t,n){if(n<e)throw Gx(`Invalid value for '${i}'. Expected ${e} or greater.`);if(n>t)throw Gx(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(i,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${i}`}function fM(i){const e=encodeURIComponent;let t="?";for(const n in i)if(i.hasOwnProperty(n)){const r=e(n)+"="+e(i[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var Hd;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Hd||(Hd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(i,e){const t=i>=500&&i<600,r=[408,429].indexOf(i)!==-1,s=e.indexOf(i)!==-1;return t||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,t,n,r,s,o,a,u,h,d,m,p=!0,g=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=d,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new xw(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,h=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Hd.NO_ERROR,u=s.getStatus();if(!a||L7(u,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Hd.ABORT;n(!1,new xw(!1,null,d));return}const h=this.successCodes_.indexOf(u)!==-1;n(!0,new xw(h,s))})},t=(n,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());N7(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=mI();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(r.canceled){const u=this.appDelete_?dM():b7();o(u)}else{const u=A7();o(u)}};this.canceled_?t(!1,new xw(!1,null,!0)):this.backoffId_=R7(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&P7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xw{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function M7(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function B7(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j7(i,e){e&&(i["X-Firebase-GMPID"]=e)}function q7(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function U7(i,e,t,n,r,s,o=!0,a=!1){const u=fM(i.urlParams),h=i.url+u,d=Object.assign({},i.headers);return j7(d,e),M7(d,t),B7(d,s),q7(d,n),new F7(h,i.method,d,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function H7(...i){const e=V7();if(e!==void 0){const t=new e;for(let n=0;n<i.length;n++)t.append(i[n]);return t.getBlob()}else{if(yI())return new Blob(i);throw new Fn(Ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function z7(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(i){if(typeof atob>"u")throw I7("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xE{constructor(e,t){this.data=e,this.contentType=t||null}}function W7(i,e){switch(i){case va.RAW:return new xE(pM(e));case va.BASE64:case va.BASE64URL:return new xE(mM(i,e));case va.DATA_URL:return new xE(K7(e),J7(e))}throw mI()}function pM(i){const e=[];for(let t=0;t<i.length;t++){let n=i.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=i.charCodeAt(++t);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function G7(i){let e;try{e=decodeURIComponent(i)}catch{throw Oy(va.DATA_URL,"Malformed data URL.")}return pM(e)}function mM(i,e){switch(i){case va.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Oy(i,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case va.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Oy(i,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=$7(e)}catch(r){throw r.message.includes("polyfill")?r:Oy(i,"Invalid character found")}const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class gM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Oy(va.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=Y7(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function K7(i){const e=new gM(i);return e.base64?mM(va.BASE64,e.rest):G7(e.rest)}function J7(i){return new gM(i).contentType}function Y7(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t){let n=0,r="";XP(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(XP(this.data_)){const n=this.data_,r=z7(n,e,t);return r===null?null:new Pu(r)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Pu(n,!0)}}static getBlob(...e){if(yI()){const t=e.map(n=>n instanceof Pu?n.data_:n);return new Pu(H7.apply(null,t))}else{const t=e.map(o=>gI(o)?W7(va.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const r=new Uint8Array(n);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Pu(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(i){let e;try{e=JSON.parse(i)}catch{return null}return O7(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function Q7(i,e){const t=e.split("/").filter(n=>n.length>0).join("/");return i.length===0?t:i+"/"+t}function vM(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(i,e){return e}class ci{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Z7}}let Sw=null;function eH(i){return!gI(i)||i.length<2?i:vM(i)}function wM(){if(Sw)return Sw;const i=[];i.push(new ci("bucket")),i.push(new ci("generation")),i.push(new ci("metageneration")),i.push(new ci("name","fullPath",!0));function e(s,o){return eH(o)}const t=new ci("name");t.xform=e,i.push(t);function n(s,o){return o!==void 0?Number(o):o}const r=new ci("size");return r.xform=n,i.push(r),i.push(new ci("timeCreated")),i.push(new ci("updated")),i.push(new ci("md5Hash",null,!0)),i.push(new ci("cacheControl",null,!0)),i.push(new ci("contentDisposition",null,!0)),i.push(new ci("contentEncoding",null,!0)),i.push(new ci("contentLanguage",null,!0)),i.push(new ci("contentType",null,!0)),i.push(new ci("metadata","customMetadata",!0)),Sw=i,Sw}function tH(i,e){function t(){const n=i.bucket,r=i.fullPath,s=new _s(n,r);return e._makeStorageReference(s)}Object.defineProperty(i,"ref",{get:t})}function nH(i,e,t){const n={};n.type="file";const r=t.length;for(let s=0;s<r;s++){const o=t[s];n[o.local]=o.xform(n,e[o.server])}return tH(n,i),n}function _M(i,e,t){const n=yM(e);return n===null?null:nH(i,n,t)}function rH(i,e,t,n){const r=yM(e);if(r===null||!gI(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const d=i.bucket,m=i.fullPath,p="/b/"+o(d)+"/o/"+o(m),g=oA(p,t,n),w=fM({alt:"media",token:h});return g+w})[0]}function iH(i,e){const t={},n=e.length;for(let r=0;r<n;r++){const s=e[r];s.writable&&(t[s.server]=i[s.local])}return JSON.stringify(t)}class vI{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(i){if(!i)throw mI()}function sH(i,e){function t(n,r){const s=_M(i,r,e);return AM(s!==null),s}return t}function oH(i,e){function t(n,r){const s=_M(i,r,e);return AM(s!==null),rH(s,r,i.host,i._protocol)}return t}function bM(i){function e(t,n){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=w7():r=v7():t.getStatus()===402?r=y7(i.bucket):t.getStatus()===403?r=_7(i.path):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return e}function EM(i){const e=bM(i);function t(n,r){let s=e(n,r);return n.getStatus()===404&&(s=g7(i.path)),s.serverResponse=r.serverResponse,s}return t}function aH(i,e,t){const n=e.fullServerUrl(),r=oA(n,i.host,i._protocol),s="GET",o=i.maxOperationRetryTime,a=new vI(r,s,oH(i,t),o);return a.errorHandler=EM(e),a}function lH(i,e){const t=e.fullServerUrl(),n=oA(t,i.host,i._protocol),r="DELETE",s=i.maxOperationRetryTime;function o(u,h){}const a=new vI(n,r,o,s);return a.successCodes=[200,204],a.errorHandler=EM(e),a}function uH(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function cH(i,e,t){const n=Object.assign({},t);return n.fullPath=i.path,n.size=e.size(),n.contentType||(n.contentType=uH(null,e)),n}function hH(i,e,t,n,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let S=0;S<2;S++)I=I+Math.random().toString().slice(2);return I}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const h=cH(e,n,r),d=iH(h,t),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,p=`\r
--`+u+"--",g=Pu.getBlob(m,n,p);if(g===null)throw S7();const w={name:h.fullPath},_=oA(s,i.host,i._protocol),A="POST",v=i.maxUploadRetryTime,E=new vI(_,A,sH(i,t),v);return E.urlParams=w,E.headers=o,E.body=g.uploadData(),E.errorHandler=bM(e),E}class dH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,s){if(this.sent_)throw Gg("cannot .send() more than once");if(Yc(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fH extends dH{initXhr(){this.xhr_.responseType="text"}}function wI(){return new fH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this._service=e,t instanceof _s?this._location=t:this._location=_s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Kd(e,t)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vM(this._location.path)}get storage(){return this._service}get parent(){const e=X7(this._location.path);if(e===null)return null;const t=new _s(this._location.bucket,e);return new Kd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw D7(e)}}function pH(i,e,t){i._throwIfRoot("uploadBytes");const n=hH(i.storage,i._location,wM(),new Pu(e,!0),t);return i.storage.makeRequestWithTokens(n,wI).then(r=>({metadata:r,ref:i}))}function mH(i){i._throwIfRoot("getDownloadURL");const e=aH(i.storage,i._location,wM());return i.storage.makeRequestWithTokens(e,wI).then(t=>{if(t===null)throw T7();return t})}function gH(i){i._throwIfRoot("deleteObject");const e=lH(i.storage,i._location);return i.storage.makeRequestWithTokens(e,wI)}function yH(i,e){const t=Q7(i._location.path,e),n=new _s(i._location.bucket,t);return new Kd(i.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(i){return/^[A-Za-z]+:\/\//.test(i)}function wH(i,e){return new Kd(i,e)}function CM(i,e){if(i instanceof _I){const t=i;if(t._bucket==null)throw x7();const n=new Kd(t,t._bucket);return e!=null?CM(n,e):n}else return e!==void 0?yH(i,e):i}function _H(i,e){if(e&&vH(e)){if(i instanceof _I)return wH(i,e);throw Gx("To use ref(service, url), the first argument must be a Storage instance.")}else return CM(i,e)}function ZP(i,e){const t=e==null?void 0:e[hM];return t==null?null:_s.makeFromBucketSpec(t,i)}function AH(i,e,t,n={}){i.host=`${e}:${t}`;const r=Yc(e);r&&(xT(`https://${i.host}/b`),ST("Storage",!0)),i._isUsingEmulator=!0,i._protocol=r?"https":"http";const{mockUserToken:s}=n;s&&(i._overrideAuthToken=typeof s=="string"?s:CF(s,i.app.options.projectId))}class _I{constructor(e,t,n,r,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=cM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p7,this._maxUploadRetryTime=m7,this._requests=new Set,r!=null?this._bucket=_s.makeFromBucketSpec(r,this._host):this._bucket=ZP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_s.makeFromBucketSpec(this._url,e):this._bucket=ZP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kd(this,e)}_makeRequest(e,t,n,r,s=!0){if(this._deleted)return new k7(dM());{const o=U7(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const eN="@firebase/storage",tN="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="storage";function bH(i,e,t){return i=hn(i),pH(i,e,t)}function EH(i){return i=hn(i),mH(i)}function CH(i){return i=hn(i),gH(i)}function SE(i,e){return i=hn(i),_H(i,e)}function xH(i=DT(),e){i=hn(i);const n=j1(i,xM).getImmediate({identifier:e}),r=AF("storage");return r&&SH(n,...r),n}function SH(i,e,t,n={}){AH(i,e,t,n)}function TH(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new _I(t,n,r,e,tf)}function IH(){$d(new Fc(xM,TH,"PUBLIC").setMultipleInstances(!0)),_a(eN,tN,""),_a(eN,tN,"esm2017")}IH();function AI(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function SM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DH=SM,TM=new F0("auth","Firebase",SM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new TT("@firebase/auth");function kH(i,...e){G_.logLevel<=Pt.WARN&&G_.warn(`Auth (${tf}): ${i}`,...e)}function Gw(i,...e){G_.logLevel<=Pt.ERROR&&G_.error(`Auth (${tf}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(i,...e){throw bI(i,...e)}function Ea(i,...e){return bI(i,...e)}function IM(i,e,t){const n=Object.assign(Object.assign({},DH()),{[e]:t});return new F0("auth","Firebase",n).create(e,{appName:i.name})}function Vl(i){return IM(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bI(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return TM.create(i,...e)}function ct(i,e,...t){if(!i)throw bI(e,...t)}function jl(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Gw(e),new Error(e)}function Yl(i,e){i||jl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function RH(){return nN()==="http:"||nN()==="https:"}function nN(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RH()||g6()||"connection"in navigator)?navigator.onLine:!0}function NH(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yl(t>e,"Short delay should be less than long delay!"),this.isMobile=f6()||y6()}get(){return PH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(i,e){Yl(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FH=new H0(3e4,6e4);function tu(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Pa(i,e,t,n,r={}){return kM(i,r,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const a=M0(Object.assign({key:i.config.apiKey},o)).slice(1),u=await i._getAdditionalHeaders();u["Content-Type"]="application/json",i.languageCode&&(u["X-Firebase-Locale"]=i.languageCode);const h=Object.assign({method:e,headers:u},s);return m6()||(h.referrerPolicy="no-referrer"),i.emulatorConfig&&Yc(i.emulatorConfig.host)&&(h.credentials="include"),DM.fetch()(await RM(i,i.config.apiHost,t,a),h)})}async function kM(i,e,t){i._canInitEmulator=!1;const n=Object.assign(Object.assign({},OH),e);try{const r=new BH(i),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Tw(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,h]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tw(i,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Tw(i,"email-already-in-use",o);if(u==="USER_DISABLED")throw Tw(i,"user-disabled",o);const d=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw IM(i,d,h);Do(i,d)}}catch(r){if(r instanceof Ra)throw r;Do(i,"network-request-failed",{message:String(r)})}}async function z0(i,e,t,n,r={}){const s=await Pa(i,e,t,n,r);return"mfaPendingCredential"in s&&Do(i,"multi-factor-auth-required",{_serverResponse:s}),s}async function RM(i,e,t,n){const r=`${e}${t}?${n}`,s=i,o=s.config.emulator?EI(i.config,r):`${i.config.apiScheme}://${r}`;return LH.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function MH(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ea(this.auth,"network-request-failed")),FH.get())})}}function Tw(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Ea(i,e,n);return r.customData._tokenResponse=t,r}function rN(i){return i!==void 0&&i.enterprise!==void 0}class jH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qH(i,e){return Pa(i,"GET","/v2/recaptchaConfig",tu(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UH(i,e){return Pa(i,"POST","/v1/accounts:delete",e)}async function K_(i,e){return Pa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VH(i,e=!1){const t=hn(i),n=await t.getIdToken(e),r=CI(n);ct(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:Ly(TE(r.auth_time)),issuedAtTime:Ly(TE(r.iat)),expirationTime:Ly(TE(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function TE(i){return Number(i)*1e3}function CI(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Gw("JWT malformed, contained fewer than 3 sections"),null;try{const r=wF(t);return r?JSON.parse(r):(Gw("Failed to decode base64 JWT payload"),null)}catch(r){return Gw("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function iN(i){const e=CI(i);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zm(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Ra&&HH(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function HH({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ly(this.lastLoginAt),this.creationTime=Ly(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J_(i){var e;const t=i.auth,n=await i.getIdToken(),r=await zm(i,K_(t,{idToken:n}));ct(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];i._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?PM(s.providerUserInfo):[],a=WH(i.providerData,o),u=i.isAnonymous,h=!(i.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jx(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(i,m)}async function $H(i){const e=hn(i);await J_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WH(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function PM(i){return i.map(e=>{var{providerId:t}=e,n=AI(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GH(i,e){const t=await kM(i,{},async()=>{const n=M0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=await RM(i,r,"/v1/token",`key=${s}`),a=await i._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:n};return i.emulatorConfig&&Yc(i.emulatorConfig.host)&&(u.credentials="include"),DM.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KH(i,e){return Pa(i,"POST","/v2/accounts:revokeToken",tu(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const t=iN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await GH(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new gp;return n&&(ct(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(ct(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ct(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gp,this.toJSON())}_performRefresh(){return jl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i,e){ct(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class xo{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=AI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zm(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VH(this,e)}reload(){return $H(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await J_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ys(this.auth.app))return Promise.reject(Vl(this.auth));const e=await this.getIdToken();return await zm(this,UH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,a,u,h,d;const m=(n=t.displayName)!==null&&n!==void 0?n:void 0,p=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,v=(h=t.createdAt)!==null&&h!==void 0?h:void 0,E=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:S,isAnonymous:R,providerData:F,stsTokenManager:k}=t;ct(I&&k,e,"internal-error");const T=gp.fromJSON(this.name,k);ct(typeof I=="string",e,"internal-error"),Iu(m,e.name),Iu(p,e.name),ct(typeof S=="boolean",e,"internal-error"),ct(typeof R=="boolean",e,"internal-error"),Iu(g,e.name),Iu(w,e.name),Iu(_,e.name),Iu(A,e.name),Iu(v,e.name),Iu(E,e.name);const D=new xo({uid:I,auth:e,email:p,emailVerified:S,displayName:m,isAnonymous:R,photoURL:w,phoneNumber:g,tenantId:_,stsTokenManager:T,createdAt:v,lastLoginAt:E});return F&&Array.isArray(F)&&(D.providerData=F.map(P=>Object.assign({},P))),A&&(D._redirectEventId=A),D}static async _fromIdTokenResponse(e,t,n=!1){const r=new gp;r.updateFromServerResponse(t);const s=new xo({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await J_(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ct(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?PM(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new gp;a.updateFromIdToken(n);const u=new xo({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Jx(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new Map;function ql(i){Yl(i instanceof Function,"Expected a class definition");let e=sN.get(i);return e?(Yl(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,sN.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}NM.type="NONE";const oN=NM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(i,e,t){return`firebase:${i}:${e}:${t}`}class yp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Kw(this.userKey,r.apiKey,s),this.fullPersistenceKey=Kw("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await K_(this.auth,{idToken:e}).catch(()=>{});return t?xo._fromGetAccountInfoResponse(this.auth,t,e):null}return xo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new yp(ql(oN),e,n);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||ql(oN);const o=Kw(n,e.config.apiKey,e.name);let a=null;for(const h of t)try{const d=await h._get(o);if(d){let m;if(typeof d=="string"){const p=await K_(e,{idToken:d}).catch(()=>{});if(!p)break;m=await xo._fromGetAccountInfoResponse(e,p,d)}else m=xo._fromJSON(e,d);h!==s&&(a=m),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new yp(s,e,n):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new yp(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jM(e))return"Blackberry";if(qM(e))return"Webos";if(LM(e))return"Safari";if((e.includes("chrome/")||FM(e))&&!e.includes("edge/"))return"Chrome";if(BM(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function OM(i=si()){return/firefox\//i.test(i)}function LM(i=si()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FM(i=si()){return/crios\//i.test(i)}function MM(i=si()){return/iemobile/i.test(i)}function BM(i=si()){return/android/i.test(i)}function jM(i=si()){return/blackberry/i.test(i)}function qM(i=si()){return/webos/i.test(i)}function xI(i=si()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function JH(i=si()){var e;return xI(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YH(){return v6()&&document.documentMode===10}function UM(i=si()){return xI(i)||BM(i)||qM(i)||jM(i)||/windows phone/i.test(i)||MM(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(i,e=[]){let t;switch(i){case"Browser":t=aN(si());break;case"Worker":t=`${aN(si())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tf}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QH(i,e={}){return Pa(i,"GET","/v2/passwordPolicy",tu(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=6;class ez{constructor(e){var t,n,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:ZH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lN(this),this.idTokenSubscription=new lN(this),this.beforeStateQueue=new XH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ql(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await yp.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await K_(this,{idToken:e}),n=await xo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await J_(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ys(this.app))return Promise.reject(Vl(this));const t=e?hn(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ys(this.app)?Promise.reject(Vl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ys(this.app)?Promise.reject(Vl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ql(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QH(this),t=new ez(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new F0("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await KH(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ql(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await yp.create(this,[ql(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,n,r);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ys(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kH(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Zc(i){return hn(i)}class lN{constructor(e){this.auth=e,this.observer=null,this.addObserver=S6(t=>this.observer=t)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nz(i){aA=i}function HM(i){return aA.loadJS(i)}function rz(){return aA.recaptchaEnterpriseScript}function iz(){return aA.gapiScript}function sz(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class oz{constructor(){this.enterprise=new az}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class az{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const lz="recaptcha-enterprise",zM="NO_RECAPTCHA";class uz{constructor(e){this.type=lz,this.auth=Zc(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{qH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new jH(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{a(u)})})}function r(s,o,a){const u=window.grecaptcha;rN(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(zM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oz().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(a=>{if(!t&&rN(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=rz();u.length!==0&&(u+=a),HM(u).then(()=>{r(a,s,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function uN(i,e,t,n=!1,r=!1){const s=new uz(i);let o;if(r)o=zM;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,h=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Y_(i,e,t,n,r){var s;if(!((s=i._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await uN(i,e,t,t==="getOobCode");return n(i,o)}else return n(i,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await uN(i,e,t,t==="getOobCode");return n(i,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(i,e){const t=j1(i,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(zd(s,e??{}))return r;Do(r,"already-initialized")}return t.initialize({options:e})}function hz(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(ql);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function dz(i,e,t){const n=Zc(i);ct(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,s=$M(e),{host:o,port:a}=fz(e),u=a===null?"":`:${a}`,h={url:`${s}//${o}${u}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){ct(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ct(zd(h,n.config.emulator)&&zd(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Yc(o)?(xT(`${s}//${o}${u}`),ST("Auth",!0)):pz()}function $M(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function fz(i){const e=$M(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const s=r[1];return{host:s,port:cN(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:cN(o)}}}function cN(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function pz(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jl("not implemented")}_getIdTokenResponse(e){return jl("not implemented")}_linkToIdToken(e,t){return jl("not implemented")}_getReauthenticationResolver(e){return jl("not implemented")}}async function mz(i,e){return Pa(i,"POST","/v1/accounts:update",e)}async function gz(i,e){return Pa(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(i,e){return z0(i,"POST","/v1/accounts:signInWithPassword",tu(i,e))}async function vz(i,e){return Pa(i,"POST","/v1/accounts:sendOobCode",tu(i,e))}async function wz(i,e){return vz(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(i,e){return z0(i,"POST","/v1/accounts:signInWithEmailLink",tu(i,e))}async function Az(i,e){return z0(i,"POST","/v1/accounts:signInWithEmailLink",tu(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends SI{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Gy(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Gy(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Y_(e,t,"signInWithPassword",yz);case"emailLink":return _z(e,{email:this._email,oobCode:this._password});default:Do(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Y_(e,n,"signUpPassword",gz);case"emailLink":return Az(e,{idToken:t,email:this._email,oobCode:this._password});default:Do(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(i,e){return z0(i,"POST","/v1/accounts:signInWithIdp",tu(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz="http://localhost";class Jd extends SI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Do("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=AI(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Jd(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return vp(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,vp(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vp(e,t)}buildRequest(){const e={requestUri:bz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=M0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Cz(i){const e=ey(ty(i)).link,t=e?ey(ty(e)).deep_link_id:null,n=ey(ty(i)).deep_link_id;return(n?ey(ty(n)).link:null)||n||t||e||i}class TI{constructor(e){var t,n,r,s,o,a;const u=ey(ty(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,d=(n=u.oobCode)!==null&&n!==void 0?n:null,m=Ez((r=u.mode)!==null&&r!==void 0?r:null);ct(h&&d&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Cz(e);try{return new TI(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.providerId=Xm.PROVIDER_ID}static credential(e,t){return Gy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=TI.parseLink(t);return ct(n,"argument-error"),Gy._fromEmailAndCode(e,n.code,n.tenantId)}}Xm.PROVIDER_ID="password";Xm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends WM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends $0{constructor(){super("facebook.com")}static credential(e){return Jd._fromParams({providerId:Nu.PROVIDER_ID,signInMethod:Nu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nu.credentialFromTaggedObject(e)}static credentialFromError(e){return Nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nu.credential(e.oauthAccessToken)}catch{return null}}}Nu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends $0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jd._fromParams({providerId:Ou.PROVIDER_ID,signInMethod:Ou.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ou.credentialFromTaggedObject(e)}static credentialFromError(e){return Ou.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ou.credential(t,n)}catch{return null}}}Ou.GOOGLE_SIGN_IN_METHOD="google.com";Ou.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends $0{constructor(){super("github.com")}static credential(e){return Jd._fromParams({providerId:Lu.PROVIDER_ID,signInMethod:Lu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lu.credentialFromTaggedObject(e)}static credentialFromError(e){return Lu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lu.credential(e.oauthAccessToken)}catch{return null}}}Lu.GITHUB_SIGN_IN_METHOD="github.com";Lu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends $0{constructor(){super("twitter.com")}static credential(e,t){return Jd._fromParams({providerId:Fu.PROVIDER_ID,signInMethod:Fu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fu.credentialFromTaggedObject(e)}static credentialFromError(e){return Fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Fu.credential(t,n)}catch{return null}}}Fu.TWITTER_SIGN_IN_METHOD="twitter.com";Fu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xz(i,e){return z0(i,"POST","/v1/accounts:signUp",tu(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await xo._fromIdTokenResponse(e,n,r),o=hN(n);return new Yd({user:s,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hN(n);return new Yd({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hN(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends Ra{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,X_.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new X_(e,t,n,r)}}function GM(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?X_._fromErrorAndOperation(i,s,e,n):s})}async function Sz(i,e,t=!1){const n=await zm(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Yd._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tz(i,e,t=!1){const{auth:n}=i;if(ys(n.app))return Promise.reject(Vl(n));const r="reauthenticate";try{const s=await zm(i,GM(n,r,e,i),t);ct(s.idToken,n,"internal-error");const o=CI(s.idToken);ct(o,n,"internal-error");const{sub:a}=o;return ct(i.uid===a,n,"user-mismatch"),Yd._forOperation(i,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Do(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(i,e,t=!1){if(ys(i.app))return Promise.reject(Vl(i));const n="signIn",r=await GM(i,n,e),s=await Yd._fromIdTokenResponse(i,n,r);return t||await i._updateCurrentUser(s.user),s}async function Iz(i,e){return KM(Zc(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(i){const e=Zc(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Dz(i,e,t){const n=Zc(i);await Y_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",wz)}async function kz(i,e,t){if(ys(i.app))return Promise.reject(Vl(i));const n=Zc(i),o=await Y_(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xz).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JM(i),u}),a=await Yd._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(a.user),a}function dN(i,e,t){return ys(i.app)?Promise.reject(Vl(i)):Iz(hn(i),Xm.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JM(i),n})}function Rz(i,e){return Pz(hn(i),null,e)}async function Pz(i,e,t){const{auth:n}=i,s={idToken:await i.getIdToken(),returnSecureToken:!0};t&&(s.password=t);const o=await zm(i,mz(n,s));await i._updateTokensIfNecessary(o,!0)}function Nz(i,e,t,n){return hn(i).onIdTokenChanged(e,t,n)}function Oz(i,e,t){return hn(i).beforeAuthStateChanged(e,t)}function IE(i,e,t,n){return hn(i).onAuthStateChanged(e,t,n)}function fN(i){return hn(i).signOut()}async function Lz(i){return hn(i).delete()}const Q_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Q_,"1"),this.storage.removeItem(Q_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=1e3,Mz=10;class XM extends YM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);YH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Mz):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Fz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XM.type="LOCAL";const Bz=XM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM extends YM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QM.type="SESSION";const ZM=QM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new lA(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async h=>h(t.origin,s)),u=await jz(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const h=II("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(m){const p=m;if(p.data.eventId===h)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(){return window}function Uz(i){Ca().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(){return typeof Ca().WorkerGlobalScope<"u"&&typeof Ca().importScripts=="function"}async function Vz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hz(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function zz(){return eB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="firebaseLocalStorageDb",$z=1,Z_="firebaseLocalStorage",nB="fbase_key";class W0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uA(i,e){return i.transaction([Z_],e?"readwrite":"readonly").objectStore(Z_)}function Wz(){const i=indexedDB.deleteDatabase(tB);return new W0(i).toPromise()}function Yx(){const i=indexedDB.open(tB,$z);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(Z_,{keyPath:nB})}catch(r){t(r)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(Z_)?e(n):(n.close(),await Wz(),e(await Yx()))})})}async function pN(i,e,t){const n=uA(i,!0).put({[nB]:e,value:t});return new W0(n).toPromise()}async function Gz(i,e){const t=uA(i,!1).get(e),n=await new W0(t).toPromise();return n===void 0?null:n.value}function mN(i,e){const t=uA(i,!0).delete(e);return new W0(t).toPromise()}const Kz=800,Jz=3;class rB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yx(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Jz)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lA._getInstance(zz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Vz(),!this.activeServiceWorker)return;this.sender=new qz(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yx();return await pN(e,Q_,"1"),await mN(e,Q_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pN(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Gz(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mN(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=uA(r,!1).getAll();return new W0(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rB.type="LOCAL";const Yz=rB;new H0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(i,e){return e?ql(e):(ct(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI extends SI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qz(i){return KM(i.auth,new DI(i),i.bypassAuthState)}function Zz(i){const{auth:e,user:t}=i;return ct(t,e,"internal-error"),Tz(t,new DI(i),i.bypassAuthState)}async function e$(i){const{auth:e,user:t}=i;return ct(t,e,"internal-error"),Sz(t,new DI(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qz;case"linkViaPopup":case"linkViaRedirect":return e$;case"reauthViaPopup":case"reauthViaRedirect":return Zz;default:Do(this.auth,"internal-error")}}resolve(e){Yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=new H0(2e3,1e4);class hp extends iB{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,hp.currentPopupAction&&hp.currentPopupAction.cancel(),hp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){Yl(this.filter.length===1,"Popup operations only handle one event");const e=II();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t$.get())};e()}}hp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$="pendingRedirect",Jw=new Map;class r$ extends iB{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Jw.get(this.auth._key());if(!e){try{const n=await i$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Jw.set(this.auth._key(),e)}return this.bypassAuthState||Jw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i$(i,e){const t=a$(e),n=o$(i);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function s$(i,e){Jw.set(i._key(),e)}function o$(i){return ql(i._redirectPersistence)}function a$(i){return Kw(n$,i.config.apiKey,i.name)}async function l$(i,e,t=!1){if(ys(i.app))return Promise.reject(Vl(i));const n=Zc(i),r=Xz(n,e),o=await new r$(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=10*60*1e3;class c${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!sB(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ea(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u$&&this.cachedEventUids.clear(),this.cachedEventUids.has(gN(e))}saveEventToCache(e){this.cachedEventUids.add(gN(e)),this.lastProcessedEventTime=Date.now()}}function gN(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function sB({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h$(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sB(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d$(i,e={}){return Pa(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p$=/^https?/;async function m$(i){if(i.config.emulator)return;const{authorizedDomains:e}=await d$(i);for(const t of e)try{if(g$(t))return}catch{}Do(i,"unauthorized-domain")}function g$(i){const e=Kx(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!p$.test(t))return!1;if(f$.test(i))return n===i;const r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new H0(3e4,6e4);function yN(){const i=Ca().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function v$(i){return new Promise((e,t)=>{var n,r,s;function o(){yN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yN(),t(Ea(i,"network-request-failed"))},timeout:y$.get()})}if(!((r=(n=Ca().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ca().gapi)===null||s===void 0)&&s.load)o();else{const a=sz("iframefcb");return Ca()[a]=()=>{gapi.load?o():t(Ea(i,"network-request-failed"))},HM(`${iz()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Yw=null,e})}let Yw=null;function w$(i){return Yw=Yw||v$(i),Yw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=new H0(5e3,15e3),A$="__/auth/iframe",b$="emulator/auth/iframe",E$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x$(i){const e=i.config;ct(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?EI(e,b$):`https://${i.config.authDomain}/${A$}`,n={apiKey:e.apiKey,appName:i.name,v:tf},r=C$.get(i.config.apiHost);r&&(n.eid=r);const s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${M0(n).slice(1)}`}async function S$(i){const e=await w$(i),t=Ca().gapi;return ct(t,i,"internal-error"),e.open({where:document.body,url:x$(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E$,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const o=Ea(i,"network-request-failed"),a=Ca().setTimeout(()=>{s(o)},_$.get());function u(){Ca().clearTimeout(a),r(n)}n.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I$=500,D$=600,k$="_blank",R$="http://localhost";class vN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P$(i,e,t,n=I$,r=D$){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const u=Object.assign(Object.assign({},T$),{width:n.toString(),height:r.toString(),top:s,left:o}),h=si().toLowerCase();t&&(a=FM(h)?k$:t),OM(h)&&(e=e||R$,u.scrollbars="yes");const d=Object.entries(u).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(JH(h)&&a!=="_self")return N$(e||"",a),new vN(null);const m=window.open(e||"",a,d);ct(m,i,"popup-blocked");try{m.focus()}catch{}return new vN(m)}function N$(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="__/auth/handler",L$="emulator/auth/handler",F$=encodeURIComponent("fac");async function wN(i,e,t,n,r,s){ct(i.config.authDomain,i,"auth-domain-config-required"),ct(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:tf,eventId:r};if(e instanceof WM){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",x6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof $0){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}i.tenantId&&(o.tid=i.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await i._getAppCheckToken(),h=u?`#${F$}=${encodeURIComponent(u)}`:"";return`${M$(i)}?${M0(a).slice(1)}${h}`}function M$({config:i}){return i.emulator?EI(i,L$):`https://${i.authDomain}/${O$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="webStorageSupport";class B${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZM,this._completeRedirectFn=l$,this._overrideRedirectResult=s$}async _openPopup(e,t,n,r){var s;Yl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await wN(e,t,n,Kx(),r);return P$(e,o,II())}async _openRedirect(e,t,n,r){await this._originValidation(e);const s=await wN(e,t,n,Kx(),r);return Uz(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Yl(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await S$(e),n=new c$(e);return t.register("authEvent",r=>(ct(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DE,{type:DE},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[DE];o!==void 0&&t(!!o),Do(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=m$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UM()||LM()||xI()}}const j$=B$;var _N="@firebase/auth",AN="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V$(i){$d(new Fc("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;ct(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:a,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VM(i)},h=new tz(n,r,s,u);return hz(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$d(new Fc("auth-internal",e=>{const t=Zc(e.getProvider("auth").getImmediate());return(n=>new q$(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_a(_N,AN,U$(i)),_a(_N,AN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=5*60,z$=EF("authIdTokenMaxAge")||H$;let bN=null;const $$=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>z$)return;const r=t==null?void 0:t.token;bN!==r&&(bN=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Xw(i=DT()){const e=j1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=cz(i,{popupRedirectResolver:j$,persistence:[Yz,Bz,ZM]}),n=EF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=$$(s.toString());Oz(t,o,()=>o(t.currentUser)),Nz(t,a=>o(a))}}const r=_F("auth");return r&&dz(t,`http://${r}`),t}function W$(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}nz({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{const s=Ea("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",W$().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V$("Browser");const G$={apiKey:"AIzaSyC1ejMnWWe98bFa29RwIiBBB7UndNdJ1cA",authDomain:"salescaptureai.firebaseapp.com",projectId:"salescaptureai",storageBucket:"salescaptureai.firebasestorage.app",messagingSenderId:"392166418592",appId:"1:392166418592:web:7807d9aafec37b8c0581c5",measurementId:"G-BTPP6403LT"},oB=TF(G$),K$=xH(),J$=qV(oB),Y$=Xw(oB);class X${constructor(){ie(this,"doNotInclude",["render","forceUpdate","setState"])}bind(e){var n;let t=Object.getPrototypeOf(e);for(;t&&t!==Object.prototype;){const r=Object.getOwnPropertyNames(t).filter(s=>typeof t[s]=="function"&&s!=="constructor");for(let s of r)this.doNotInclude.includes(s)||(e[s]=(n=e[s])==null?void 0:n.bind(e));t=Object.getPrototypeOf(t)}}setDoNotIncludeList(e){this.doNotInclude=e}leaveOut(e){this.doNotInclude.push(e)}include(e){this.doNotInclude=this.doNotInclude.filter(t=>t!==e)}}let bi=new X$;class Hl{constructor(){ie(this,"list",[]);bi.bind(this)}setList(e){e=e.filter(t=>t!==void 0),this.list=e}getList(){return this.list}subscribe(e){e&&this.list.push(e)}unsubscribe(e){this.list=this.list.filter(t=>t!==e)}run(...e){for(let t of this.list)t&&t(...e)}}var Kg={},EN;function Q$(){if(EN)return Kg;EN=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.parse=o,Kg.serialize=h;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function o(p,g){const w=new s,_=p.length;if(_<2)return w;const A=(g==null?void 0:g.decode)||d;let v=0;do{const E=p.indexOf("=",v);if(E===-1)break;const I=p.indexOf(";",v),S=I===-1?_:I;if(E>S){v=p.lastIndexOf(";",E-1)+1;continue}const R=a(p,v,E),F=u(p,E,R),k=p.slice(R,F);if(w[k]===void 0){let T=a(p,E+1,S),D=u(p,S,T);const P=A(p.slice(T,D));w[k]=P}v=S+1}while(v<_);return w}function a(p,g,w){do{const _=p.charCodeAt(g);if(_!==32&&_!==9)return g}while(++g<w);return w}function u(p,g,w){for(;g>w;){const _=p.charCodeAt(--g);if(_!==32&&_!==9)return g+1}return w}function h(p,g,w){const _=(w==null?void 0:w.encode)||encodeURIComponent;if(!i.test(p))throw new TypeError(`argument name is invalid: ${p}`);const A=_(g);if(!e.test(A))throw new TypeError(`argument val is invalid: ${g}`);let v=p+"="+A;if(!w)return v;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);v+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);v+="; Domain="+w.domain}if(w.path){if(!n.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);v+="; Path="+w.path}if(w.expires){if(!m(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);v+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(v+="; HttpOnly"),w.secure&&(v+="; Secure"),w.partitioned&&(v+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return v}function d(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return r.call(p)==="[object Date]"}return Kg}Q$();var CN="popstate";function Z$(i={}){function e(n,r){let{pathname:s,search:o,hash:a}=n.location;return Xx("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Ky(r)}return tW(e,t,null,i)}function Rn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ta(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eW(){return Math.random().toString(36).substring(2,10)}function xN(i,e){return{usr:i.state,key:i.key,idx:e}}function Xx(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Qm(e):e,state:t,key:e&&e.key||n||eW()}}function Ky({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Qm(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function tW(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,o=r.history,a="POP",u=null,h=d();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function d(){return(o.state||{idx:null}).idx}function m(){a="POP";let A=d(),v=A==null?null:A-h;h=A,u&&u({action:a,location:_.location,delta:v})}function p(A,v){a="PUSH";let E=Xx(_.location,A,v);h=d()+1;let I=xN(E,h),S=_.createHref(E);try{o.pushState(I,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(S)}s&&u&&u({action:a,location:_.location,delta:1})}function g(A,v){a="REPLACE";let E=Xx(_.location,A,v);h=d();let I=xN(E,h),S=_.createHref(E);o.replaceState(I,"",S),s&&u&&u({action:a,location:_.location,delta:0})}function w(A){return nW(A)}let _={get action(){return a},get location(){return i(r,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(CN,m),u=A,()=>{r.removeEventListener(CN,m),u=null}},createHref(A){return e(r,A)},createURL:w,encodeLocation(A){let v=w(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(A){return o.go(A)}};return _}function nW(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Rn(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Ky(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function aB(i,e,t="/"){return rW(i,e,t,!1)}function rW(i,e,t,n){let r=typeof e=="string"?Qm(e):e,s=Xl(r.pathname||"/",t);if(s==null)return null;let o=lB(i);iW(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let h=mW(s);a=fW(o[u],h,n)}return a}function lB(i,e=[],t=[],n=""){let r=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Rn(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length));let h=zl([n,u.relativePath]),d=t.concat(u);s.children&&s.children.length>0&&(Rn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),lB(s.children,e,d,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:hW(h,s.index),routesMeta:d})};return i.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let u of uB(s.path))r(s,o,u)}),e}function uB(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let o=uB(n.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),r&&a.push(...o),a.map(u=>i.startsWith("/")&&u===""?"/":u)}function iW(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:dW(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var sW=/^:[\w-]+$/,oW=3,aW=2,lW=1,uW=10,cW=-2,SN=i=>i==="*";function hW(i,e){let t=i.split("/"),n=t.length;return t.some(SN)&&(n+=cW),e&&(n+=aW),t.filter(r=>!SN(r)).reduce((r,s)=>r+(sW.test(s)?oW:s===""?lW:uW),n)}function dW(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function fW(i,e,t=!1){let{routesMeta:n}=i,r={},s="/",o=[];for(let a=0;a<n.length;++a){let u=n[a],h=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",m=e1({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),p=u.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=e1({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:zl([s,m.pathname]),pathnameBase:wW(zl([s,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(s=zl([s,m.pathnameBase]))}return o}function e1(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=pW(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:n.reduce((h,{paramName:d,isOptional:m},p)=>{if(d==="*"){let w=a[p]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[p];return m&&!g?h[d]=void 0:h[d]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:i}}function pW(i,e=!1,t=!0){Ta(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(n.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function mW(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ta(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Xl(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function gW(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Qm(i):i;return{pathname:t?t.startsWith("/")?t:yW(t,e):e,search:_W(n),hash:AW(r)}}function yW(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function kE(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vW(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cB(i){let e=vW(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function hB(i,e,t,n=!1){let r;typeof i=="string"?r=Qm(i):(r={...i},Rn(!r.pathname||!r.pathname.includes("?"),kE("?","pathname","search",r)),Rn(!r.pathname||!r.pathname.includes("#"),kE("#","pathname","hash",r)),Rn(!r.search||!r.search.includes("#"),kE("#","search","hash",r)));let s=i===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let m=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;r.pathname=p.join("/")}a=m>=0?e[m]:"/"}let u=gW(r,a),h=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}var zl=i=>i.join("/").replace(/\/\/+/g,"/"),wW=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),_W=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,AW=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function bW(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var dB=["POST","PUT","PATCH","DELETE"];new Set(dB);var EW=["GET",...dB];new Set(EW);var Zm=be.createContext(null);Zm.displayName="DataRouter";var cA=be.createContext(null);cA.displayName="DataRouterState";var fB=be.createContext({isTransitioning:!1});fB.displayName="ViewTransition";var CW=be.createContext(new Map);CW.displayName="Fetchers";var xW=be.createContext(null);xW.displayName="Await";var Na=be.createContext(null);Na.displayName="Navigation";var G0=be.createContext(null);G0.displayName="Location";var nu=be.createContext({outlet:null,matches:[],isDataRoute:!1});nu.displayName="Route";var kI=be.createContext(null);kI.displayName="RouteError";function SW(i,{relative:e}={}){Rn(K0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=be.useContext(Na),{hash:r,pathname:s,search:o}=J0(i,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:zl([t,s])),n.createHref({pathname:a,search:o,hash:r})}function K0(){return be.useContext(G0)!=null}function sf(){return Rn(K0(),"useLocation() may be used only in the context of a <Router> component."),be.useContext(G0).location}var pB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mB(i){be.useContext(Na).static||be.useLayoutEffect(i)}function TW(){let{isDataRoute:i}=be.useContext(nu);return i?qW():IW()}function IW(){Rn(K0(),"useNavigate() may be used only in the context of a <Router> component.");let i=be.useContext(Zm),{basename:e,navigator:t}=be.useContext(Na),{matches:n}=be.useContext(nu),{pathname:r}=sf(),s=JSON.stringify(cB(n)),o=be.useRef(!1);return mB(()=>{o.current=!0}),be.useCallback((u,h={})=>{if(Ta(o.current,pB),!o.current)return;if(typeof u=="number"){t.go(u);return}let d=hB(u,JSON.parse(s),r,h.relative==="path");i==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:zl([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,s,r,i])}be.createContext(null);function J0(i,{relative:e}={}){let{matches:t}=be.useContext(nu),{pathname:n}=sf(),r=JSON.stringify(cB(t));return be.useMemo(()=>hB(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function DW(i,e){return gB(i,e)}function gB(i,e,t,n){var v;Rn(K0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=be.useContext(Na),{matches:s}=be.useContext(nu),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let E=d&&d.path||"";yB(u,!d||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=sf(),p;if(e){let E=typeof e=="string"?Qm(e):e;Rn(h==="/"||((v=E.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),p=E}else p=m;let g=p.pathname||"/",w=g;if(h!=="/"){let E=h.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=aB(i,{pathname:w});Ta(d||_!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Ta(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=OW(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:zl([h,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:zl([h,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,t,n);return e&&A?be.createElement(G0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},A):A}function kW(){let i=jW(),e=bW(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=be.createElement(be.Fragment,null,be.createElement("p",null," Hey developer "),be.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",be.createElement("code",{style:s},"ErrorBoundary")," or"," ",be.createElement("code",{style:s},"errorElement")," prop on your route.")),be.createElement(be.Fragment,null,be.createElement("h2",null,"Unexpected Application Error!"),be.createElement("h3",{style:{fontStyle:"italic"}},e),t?be.createElement("pre",{style:r},t):null,o)}var RW=be.createElement(kW,null),PW=class extends be.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?be.createElement(nu.Provider,{value:this.props.routeContext},be.createElement(kI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NW({routeContext:i,match:e,children:t}){let n=be.useContext(Zm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),be.createElement(nu.Provider,{value:i},t)}function OW(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,s=t==null?void 0:t.errors;if(s!=null){let u=r.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);Rn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let o=!1,a=-1;if(t)for(let u=0;u<r.length;u++){let h=r[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(a=u),h.route.id){let{loaderData:d,errors:m}=t,p=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){o=!0,a>=0?r=r.slice(0,a+1):r=[r[0]];break}}}return r.reduceRight((u,h,d)=>{let m,p=!1,g=null,w=null;t&&(m=s&&h.route.id?s[h.route.id]:void 0,g=h.route.errorElement||RW,o&&(a<0&&d===0?(yB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):a===d&&(p=!0,w=h.route.hydrateFallbackElement||null)));let _=e.concat(r.slice(0,d+1)),A=()=>{let v;return m?v=g:p?v=w:h.route.Component?v=be.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,be.createElement(NW,{match:h,routeContext:{outlet:u,matches:_,isDataRoute:t!=null},children:v})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?be.createElement(PW,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:A(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):A()},null)}function RI(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LW(i){let e=be.useContext(Zm);return Rn(e,RI(i)),e}function FW(i){let e=be.useContext(cA);return Rn(e,RI(i)),e}function MW(i){let e=be.useContext(nu);return Rn(e,RI(i)),e}function PI(i){let e=MW(i),t=e.matches[e.matches.length-1];return Rn(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function BW(){return PI("useRouteId")}function jW(){var n;let i=be.useContext(kI),e=FW("useRouteError"),t=PI("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function qW(){let{router:i}=LW("useNavigate"),e=PI("useNavigate"),t=be.useRef(!1);return mB(()=>{t.current=!0}),be.useCallback(async(r,s={})=>{Ta(t.current,pB),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...s}))},[i,e])}var TN={};function yB(i,e,t){!e&&!TN[i]&&(TN[i]=!0,Ta(!1,t))}be.memo(UW);function UW({routes:i,future:e,state:t}){return gB(i,void 0,t,e)}function Du(i){Rn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VW({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:s=!1}){Rn(!K0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),a=be.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=Qm(t));let{pathname:u="/",search:h="",hash:d="",state:m=null,key:p="default"}=t,g=be.useMemo(()=>{let w=Xl(u,o);return w==null?null:{location:{pathname:w,search:h,hash:d,state:m,key:p},navigationType:n}},[o,u,h,d,m,p,n]);return Ta(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:be.createElement(Na.Provider,{value:a},be.createElement(G0.Provider,{children:e,value:g}))}function IN({children:i,location:e}){return DW(Qx(i),e)}function Qx(i,e=[]){let t=[];return be.Children.forEach(i,(n,r)=>{if(!be.isValidElement(n))return;let s=[...e,r];if(n.type===be.Fragment){t.push.apply(t,Qx(n.props.children,s));return}Rn(n.type===Du,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qx(n.props.children,s)),t.push(o)}),t}var Qw="get",Zw="application/x-www-form-urlencoded";function hA(i){return i!=null&&typeof i.tagName=="string"}function HW(i){return hA(i)&&i.tagName.toLowerCase()==="button"}function zW(i){return hA(i)&&i.tagName.toLowerCase()==="form"}function $W(i){return hA(i)&&i.tagName.toLowerCase()==="input"}function WW(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function GW(i,e){return i.button===0&&(!e||e==="_self")&&!WW(i)}var Iw=null;function KW(){if(Iw===null)try{new FormData(document.createElement("form"),0),Iw=!1}catch{Iw=!0}return Iw}var JW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function RE(i){return i!=null&&!JW.has(i)?(Ta(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zw}"`),null):i}function YW(i,e){let t,n,r,s,o;if(zW(i)){let a=i.getAttribute("action");n=a?Xl(a,e):null,t=i.getAttribute("method")||Qw,r=RE(i.getAttribute("enctype"))||Zw,s=new FormData(i)}else if(HW(i)||$W(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=i.getAttribute("formaction")||a.getAttribute("action");if(n=u?Xl(u,e):null,t=i.getAttribute("formmethod")||a.getAttribute("method")||Qw,r=RE(i.getAttribute("formenctype"))||RE(a.getAttribute("enctype"))||Zw,s=new FormData(a,i),!KW()){let{name:h,type:d,value:m}=i;if(d==="image"){let p=h?`${h}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else h&&s.append(h,m)}}else{if(hA(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qw,n=null,r=Zw,o=i}return s&&r==="text/plain"&&(o=s,s=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:s,body:o}}function NI(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function XW(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QW(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function ZW(i,e,t){let n=await Promise.all(i.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await XW(s,t);return o.links?o.links():[]}return[]}));return rG(n.flat(1).filter(QW).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function DN(i,e,t,n,r,s){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,a=(u,h)=>{var d;return t[h].pathname!==u.pathname||((d=t[h].route.path)==null?void 0:d.endsWith("*"))&&t[h].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,h)=>o(u,h)||a(u,h)):s==="data"?e.filter((u,h)=>{var m;let d=n.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,h)||a(u,h))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(i,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function eG(i,e,{includeHydrateFallback:t}={}){return tG(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function tG(i){return[...new Set(i)]}function nG(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function rG(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let s=JSON.stringify(nG(r));return t.has(s)||(t.add(s),n.push({key:s,link:r})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iG=new Set([100,101,204,205]);function sG(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&Xl(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function vB(){let i=be.useContext(Zm);return NI(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function oG(){let i=be.useContext(cA);return NI(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var OI=be.createContext(void 0);OI.displayName="FrameworkContext";function wB(){let i=be.useContext(OI);return NI(i,"You must render this element inside a <HydratedRouter> element"),i}function aG(i,e){let t=be.useContext(OI),[n,r]=be.useState(!1),[s,o]=be.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:h,onMouseLeave:d,onTouchStart:m}=e,p=be.useRef(null);be.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let _=v=>{v.forEach(E=>{o(E.isIntersecting)})},A=new IntersectionObserver(_,{threshold:.5});return p.current&&A.observe(p.current),()=>{A.disconnect()}}},[i]),be.useEffect(()=>{if(n){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[n]);let g=()=>{r(!0)},w=()=>{r(!1),o(!1)};return t?i!=="intent"?[s,p,{}]:[s,p,{onFocus:Jg(a,g),onBlur:Jg(u,w),onMouseEnter:Jg(h,g),onMouseLeave:Jg(d,w),onTouchStart:Jg(m,g)}]:[!1,p,{}]}function Jg(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function lG({page:i,...e}){let{router:t}=vB(),n=be.useMemo(()=>aB(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?be.createElement(cG,{page:i,matches:n,...e}):null}function uG(i){let{manifest:e,routeModules:t}=wB(),[n,r]=be.useState([]);return be.useEffect(()=>{let s=!1;return ZW(i,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[i,e,t]),n}function cG({page:i,matches:e,...t}){let n=sf(),{manifest:r,routeModules:s}=wB(),{basename:o}=vB(),{loaderData:a,matches:u}=oG(),h=be.useMemo(()=>DN(i,e,u,r,n,"data"),[i,e,u,r,n]),d=be.useMemo(()=>DN(i,e,u,r,n,"assets"),[i,e,u,r,n]),m=be.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let w=new Set,_=!1;if(e.forEach(v=>{var I;let E=r.routes[v.route.id];!E||!E.hasLoader||(!h.some(S=>S.route.id===v.route.id)&&v.route.id in a&&((I=s[v.route.id])!=null&&I.shouldRevalidate)||E.hasClientLoader?_=!0:w.add(v.route.id))}),w.size===0)return[];let A=sG(i,o);return _&&w.size>0&&A.searchParams.set("_routes",e.filter(v=>w.has(v.route.id)).map(v=>v.route.id).join(",")),[A.pathname+A.search]},[o,a,n,r,h,e,i,s]),p=be.useMemo(()=>eG(d,r),[d,r]),g=uG(d);return be.createElement(be.Fragment,null,m.map(w=>be.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),p.map(w=>be.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),g.map(({key:w,link:_})=>be.createElement("link",{key:w,..._})))}function hG(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _B=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_B&&(window.__reactRouterVersion="7.6.2")}catch{}function dG({basename:i,children:e,window:t}){let n=be.useRef();n.current==null&&(n.current=Z$({window:t,v5Compat:!0}));let r=n.current,[s,o]=be.useState({action:r.action,location:r.location}),a=be.useCallback(u=>{be.startTransition(()=>o(u))},[o]);return be.useLayoutEffect(()=>r.listen(a),[r,a]),be.createElement(VW,{basename:i,children:e,location:s.location,navigationType:s.action,navigator:r})}var AB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yn=be.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:s,replace:o,state:a,target:u,to:h,preventScrollReset:d,viewTransition:m,...p},g){let{basename:w}=be.useContext(Na),_=typeof h=="string"&&AB.test(h),A,v=!1;if(typeof h=="string"&&_&&(A=h,_B))try{let D=new URL(window.location.href),P=h.startsWith("//")?new URL(D.protocol+h):new URL(h),N=Xl(P.pathname,w);P.origin===D.origin&&N!=null?h=N+P.search+P.hash:v=!0}catch{Ta(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=SW(h,{relative:r}),[I,S,R]=aG(n,p),F=gG(h,{replace:o,state:a,target:u,preventScrollReset:d,relative:r,viewTransition:m});function k(D){e&&e(D),D.defaultPrevented||F(D)}let T=be.createElement("a",{...p,...R,href:A||E,onClick:v||s?e:k,ref:hG(g,S),target:u,"data-discover":!_&&t==="render"?"true":void 0});return I&&!_?be.createElement(be.Fragment,null,T,be.createElement(lG,{page:E})):T});yn.displayName="Link";var fG=be.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:s,to:o,viewTransition:a,children:u,...h},d){let m=J0(o,{relative:h.relative}),p=sf(),g=be.useContext(cA),{navigator:w,basename:_}=be.useContext(Na),A=g!=null&&AG(m)&&a===!0,v=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,E=p.pathname,I=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(E=E.toLowerCase(),I=I?I.toLowerCase():null,v=v.toLowerCase()),I&&_&&(I=Xl(I,_)||I);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let R=E===v||!r&&E.startsWith(v)&&E.charAt(S)==="/",F=I!=null&&(I===v||!r&&I.startsWith(v)&&I.charAt(v.length)==="/"),k={isActive:R,isPending:F,isTransitioning:A},T=R?e:void 0,D;typeof n=="function"?D=n(k):D=[n,R?"active":null,F?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(k):s;return be.createElement(yn,{...h,"aria-current":T,className:D,ref:d,style:P,to:o,viewTransition:a},typeof u=="function"?u(k):u)});fG.displayName="NavLink";var pG=be.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:s,method:o=Qw,action:a,onSubmit:u,relative:h,preventScrollReset:d,viewTransition:m,...p},g)=>{let w=wG(),_=_G(a,{relative:h}),A=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&AB.test(a),E=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let S=I.nativeEvent.submitter,R=(S==null?void 0:S.getAttribute("formmethod"))||o;w(S||I.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:r,state:s,relative:h,preventScrollReset:d,viewTransition:m})};return be.createElement("form",{ref:g,method:A,action:_,onSubmit:n?u:E,...p,"data-discover":!v&&i==="render"?"true":void 0})});pG.displayName="Form";function mG(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bB(i){let e=be.useContext(Zm);return Rn(e,mG(i)),e}function gG(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:s,viewTransition:o}={}){let a=TW(),u=sf(),h=J0(i,{relative:s});return be.useCallback(d=>{if(GW(d,e)){d.preventDefault();let m=t!==void 0?t:Ky(u)===Ky(h);a(i,{replace:m,state:n,preventScrollReset:r,relative:s,viewTransition:o})}},[u,a,h,t,n,e,i,r,s,o])}var yG=0,vG=()=>`__${String(++yG)}__`;function wG(){let{router:i}=bB("useSubmit"),{basename:e}=be.useContext(Na),t=BW();return be.useCallback(async(n,r={})=>{let{action:s,method:o,encType:a,formData:u,body:h}=YW(n,e);if(r.navigate===!1){let d=r.fetcherKey||vG();await i.fetch(d,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:h,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await i.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:u,body:h,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function _G(i,{relative:e}={}){let{basename:t}=be.useContext(Na),n=be.useContext(nu);Rn(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...J0(i||".",{relative:e})},o=sf();if(i==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(d=>d==="")){a.delete("index"),u.filter(m=>m).forEach(m=>a.append("index",m));let d=a.toString();s.search=d?`?${d}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:zl([t,s.pathname])),Ky(s)}function AG(i,e={}){let t=be.useContext(fB);Rn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bB("useViewTransitionState"),r=J0(i,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Xl(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Xl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return e1(r.pathname,o)!=null||e1(r.pathname,s)!=null}[...iG];var bG=CT();const EG=L0(bG);class CG{constructor(e){bi.bind(this),this.props={...e},this.content=e.content||"",this.type="div"}setHtmlType(e){this.type=e}getHtmlType(){return this.type}setProp(e,t){this.props[e]=t}setProps(e){this.props={...e},e.content&&(this.content=e.content)}updateProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}addProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}getProps(){return this.props}getProp(e){return this.props[e]}setStyle(e){this.props.style=e}updateStyle(e){this.props.style={...this.props.style,...e}}getStyle(){return this.props.style}setClass(e){this.props.className=e}getClass(){return this.props.className}setOnChange(e){this.props.onChange=e}setOnClick(e){this.props.onClick=e}getOnClick(){return this.props.onClick}setContent(e){this.content=e}getContent(){return this.content}getHtml(e){let{content:t,props:n}=e,r=e==null?void 0:e.type;t&&(this.content=t),n={...this.props,...n};const s={a:C.jsx("a",{...n,children:this.content}),button:C.jsx("button",{...n,children:this.content}),div:C.jsx("div",{...n,children:this.content}),h1:C.jsx("h1",{...n,children:this.content}),h2:C.jsx("h2",{...n,children:this.content}),h3:C.jsx("h3",{...n,children:this.content}),h4:C.jsx("h4",{...n,children:this.content}),h5:C.jsx("h5",{...n,children:this.content}),h6:C.jsx("h6",{...n,children:this.content}),img:C.jsx("img",{...n}),input:C.jsx("input",{...n}),p:C.jsx("p",{...n,children:this.content}),span:C.jsx("span",{...n,children:this.content}),table:C.jsx("table",{...n,children:this.content}),tr:C.jsx("tr",{...n,children:this.content}),td:C.jsx("td",{...n,children:this.content}),th:C.jsx("th",{...n,children:this.content}),ul:C.jsx("ul",{...n,children:this.content}),li:C.jsx("li",{...n,children:this.content}),ol:C.jsx("ol",{...n,children:this.content}),form:C.jsx("form",{...n,children:this.content}),textarea:C.jsx("textarea",{...n,children:this.content}),select:C.jsx("select",{...n,children:this.content}),option:C.jsx("option",{...n,children:this.content}),label:C.jsx("label",{...n,children:this.content}),nav:C.jsx("nav",{...n,children:this.content}),footer:C.jsx("footer",{...n,children:this.content}),header:C.jsx("header",{...n,children:this.content}),article:C.jsx("article",{...n,children:this.content}),section:C.jsx("section",{...n,children:this.content}),aside:C.jsx("aside",{...n,children:this.content}),main:C.jsx("main",{...n,children:this.content}),video:C.jsx("video",{...n,children:this.content}),audio:C.jsx("audio",{...n,children:this.content}),iframe:C.jsx("iframe",{...n,children:this.content}),canvas:C.jsx("canvas",{...n,children:this.content}),content:C.jsx(C.Fragment,{}),fragment:C.jsx(C.Fragment,{children:this.content}),link:C.jsx(yn,{...n,children:this.content})};if(r==="content"||this.type==="conent"){let a=this.content;s.content=C.jsx(a,{...n})}return r?s[r]:s[this.type]}}class xG extends Hl{constructor(){super(...arguments);ie(this,"component");ie(this,"setAttribute")}setObserverFunction(t){this.setAttribute=t}setComponent(t){this.component=t}getComponent(){return this.component}run(){for(let t of this.list)this.setAttribute(t.name,new CG(t))}}class eg{constructor(){ie(this,"factory");ie(this,"componentList");ie(this,"themeFactory");ie(this,"appComponent");ie(this,"mainFunc");ie(this,"appObserver",new Hl);bi.bind(this),this.getFactory(),this.getThemeFactory()}subscribeToAppObserver(e){this.appObserver.subscribe(e)}getMainFunc(){return this.mainFunc}getFactory(){}getThemeFactory(){}getAppComponent(){return this.appComponent}setAppComponent(e){this.appComponent=e,this.appObserver.run(e)}getComponentList(){var e,t;return this.componentList||(this.componentList=(t=(e=this.appComponent)==null?void 0:e.state)==null?void 0:t.componentList),this.componentList}}class SG extends eg{constructor(){super(...arguments);ie(this,"type","appInterface")}}const EB=new SG;class dt extends be.Component{constructor(t){super(t);ie(this,"resize");bi.bind(this),this.initialBuilderSetupFunctions=[],this.setInterface(),this.setInitialApp(),this.initialPropsSetupFunctions=[this.setInterface,this.setAppOnInterace,this.setInitialApp,this.setObj,this.setThemeFactory,this.setTheme,this.createReactRefsForComponents],this.setupObserver=new Hl,this.builderObserver=new xG,this.ObserverForSetupFunction=new Hl,this.builderObserver.setComponent(this),this.builderObserver.setObserverFunction(this.setHtmlBuilderSingleton),this.initialSetupFunctions=[this.builderObserver.run,this.additionalSetup],this.components=[]}setInitialApp(){var n,r,s,o,a,u;this.interface||(this.app=(n=this.props)==null?void 0:n.app);let t=this.interface.getAppComponent();t&&(this.app=t),this.app&&(this.propsState=(r=this.app)==null?void 0:r.state,this.dispatch=(s=this.app)==null?void 0:s.dispatch,this.componentList=(o=this.propsState)==null?void 0:o.componentList,this.APIService=(a=this.componentList)==null?void 0:a.getAPIService(),this.operationsFactory=(u=this.componentList)==null?void 0:u.getOperationsFactory())}setInterface(t){var n;this.interface=t||((n=this.props)==null?void 0:n.interface)||this.interface||EB,this.interface.type==="appInterface"&&this.subscribeToAppObserverBool===void 0&&(this.subscribeToAppObserverBool=!0,this.interface.subscribeToAppObserver(this.setInitialApp))}setAppOnInterace(){this.interface&&(this.props.app&&this.interface.setAppComponent(this.props.app),this.app=this.interface.getAppComponent())}setComponents(t){this.components=t}getComponents(){return this.components}createReactRefsForComponents(){for(let t of this.components)this[t+"Ref"]||(this[t+"Ref"]=Je.createRef())}createPropObj(t,n){n=n||this.state.propType;let r,s=this[n||"props"][t+"Class"];return s||(s=this.theme&&typeof this.theme!="string"?this.theme[this.state[t+"Class"]]:this["default"+t+"Class"]||""),r={name:t,ref:this[t+"Ref"],style:this[t+"Click"]?{...this[n||"props"][t+"Style"],cursor:"pointer"}:this[n||"props"][t+"Style"],className:s,content:this[n||"props"][t],onClick:this[n||"props"][t+"Click"]||this[t+"Click"],obj:this.obj},r.onClick&&(r.onClick=r.onClick.bind(this,this.obj)),r}builderPropsSubscribe(t){this[t+"Props"]=this.createPropObj(t),this.builderObserver.subscribe(this[t+"Props"])}setInitialBuilderPropFunctions(){for(let t of this.components)this["set"+t+"props"]||(this["set"+t+"props"]=this.builderPropsSubscribe(t)),this.initialBuilderSetupFunctions.push(this["set"+t+"props"]);return this.initialBuilderSetupFunctions}loadObserver(){this.setupObserver.setList(this.initialSetupFunctions)}setInitialSetupFunctions(){const t=[...this.initialPropsSetupFunctions,...this.initialBuilderSetupFunctions,...this.initialSetupFunctions,this.additionalPostSetup],n=[...new Set(t)];return this.initialSetupFunctions=n,this.initialSetupFunctions}runInitialPropsSetup(){for(let t of this.initialPropsSetupFunctions)t&&t()}isArray(t){return Array.isArray(t)?t:[t]}setObj(){this.obj=this.props.obj}setThemeFactory(){this.interface!==void 0&&(this.themeFactory=this.interface.getThemeFactory())}setTheme(){var t,n;this.themeFactory&&(this.theme=this.themeFactory.getComponent(((t=this.props)==null?void 0:t.theme)||((n=this.state)==null?void 0:n.defaultTheme)||"default"))}clearLists(){this.setupObserver.setList([]),this.builderObserver.setList([])}setupItem(...t){this.clearLists(),this.preSetup(),this.runInitialPropsSetup(),this.setInitialBuilderPropFunctions(),this.setInitialSetupFunctions(),this.loadObserver(),this.setupObserver.run(...t)}preSetup(){}setAttribute(t,n){this[t]=n}setHtmlBuilderSingleton(t,n){this[t]||(this[t]=n)}getInnerContent(){return this.innerContent}getAdditionalInnerContent(){return this.innerContent}mapList(t){return C.jsx(C.Fragment,{children:t.filter(n=>n!==void 0&&n!==!1).map(n=>n)})}additionalSetup(){}additionalPostSetup(){}mapInnerContent(){return this.getInnerContent(),this.getAdditionalInnerContent(),this.innerContent=this.mapList(this.innerContent),this.innerContent}getHtml(){return this.html}getFactoryTypeString(t){let n=this.propsState.componentListInterface.getFactory().getRegistry(),r=n.find(s=>t.toLowerCase()===s);return r=r||n.find(s=>t.toLowerCase().includes(s)),r}getCapitalFirstLetter(t){var n;return((n=t==null?void 0:t.charAt(0))==null?void 0:n.toUpperCase())+(t==null?void 0:t.slice(1))}classNameToString(t){let n=t.name;return n.charAt(0).toLowerCase()+n.slice(1)}render(){return this.setupItem(),this.html=this.getHtml(),this.html}}class TG extends eg{}const CB=new TG;class pr extends dt{constructor(t){super(t);ie(this,"type");ie(this,"theme");ie(this,"interface");this.wrapperRef=Je.createRef(),this.setWrapperRef=this.setWrapperRef,this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setApp,this.setType,this.setClassStr],this.state={defaultType:this.props.type?this.props.type:"fit",defaultTheme:this.props.theme?this.props.theme:"Default",typeKey:"type",themeKey:"theme"},this.interface=CB}componentDidMount(){this.props.popup&&document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){this.props.popup&&document.removeEventListener("mousedown",this.handleClickOutside)}handleClickOutside(t){this.wrapperRef&&!this.wrapperRef.current.contains(t.target)&&this.props.handleClose&&this.props.handleClose()}isPopup(t){if(this.props.popup){let n=this.closePopup.getHtml({content:this.props.closeUI||C.jsx(C.Fragment,{children:"X"}),props:{onClick:()=>{this.props.handleClose&&this.props.handleClose()}}}),r=this.popupContent.getHtml({content:C.jsxs(C.Fragment,{children:[n,t]}),props:{ref:this.wrapperRef}});t=this.backDrop.getHtml({content:r})}return t}setTheme(){this.theme=this.props[this.state.themeKey]?this.props[this.state.themeKey]:this.state.defaultTheme}setType(){this.type=this.props[this.state.typeKey]?this.props[this.state.typeKey]:this.state.defaultType}setClassStr(){this.defaultcardClass=this.type+this.theme+" scroller",this.defaultcardClass=this.props.popup?this.defaultcardClass+" cardPopup":this.defaultcardClass,this.props.popup&&(this.defaultbackDropClass="backDropPopup",this.defaultpopupContentClass="popupContent",this.defaultclosePopupClass="closePopup")}getHtml(){let t=this.getContent();return this.html=this.card.getHtml({content:t}),this.html=this.isPopup(this.html),this.html}getContent(){return this.content=this.props.content,this.content}preSetup(){let t=["card"];this.props.popup&&(t=[...t,"backDrop","popupContent","closePopup"]),this.setComponents(t)}}let IG=class{constructor(e){ie(this,"operationsFactory");ie(this,"dispatch");ie(this,"json",{_id:"",backendKeys:[],backendAttributes:[],backendFilterKeys:[],orderMatters:!1,orderFilterKey:"",filterKey:"",removeOwnerQuery:[]});ie(this,"componentList");ie(this,"APIService");bi.bind(this),this.operationsFactory=e,this.json._id=this.createId()}getAssociatedItemsHelper(e){let t=this.json._id,n=this.json.type+"Id";return this.json.backendAttributes.length>0&&(t=this.json[this.json.backendAttributes[e]]),this.json.backendFilterKeys.length>0&&(n=this.json.backendFilterKeys[e]),{attribute:t,filterKey:n}}async getAssociatedItems(e){e=e||this.json.backendKeys;const t=e==null?void 0:e.map((n,r)=>{let{attribute:s,filterKey:o}=this.getAssociatedItemsHelper(r);return this.componentList.getList(n,s,o)});return await Promise.all(t)}async getAssociatedItemsFromBackend(e,t){e=e||this.json.backendKeys;let n=!0;const r=e==null?void 0:e.map((s,o)=>{this.json.removeOwnerQuery.includes(s)&&(n=!1);let{attribute:a,filterKey:u}=this.getAssociatedItemsHelper(o);return this.componentList.getComponentsFromBackend({type:s,ids:a,filterKeys:u,owner:n,...t})});return await Promise.all(r)}setComponentList(e){this.componentList=e,this.componentList.getAPIService&&this.setAPIService(this.componentList.getAPIService()),this.componentList.getDispatch&&this.setDispatch(this.componentList.getDispatch())}setDispatch(e){this.dispatch=e}getDispatch(){return this.dispatch}getComponentList(){return this.componentList}setAPIService(e){this.APIService=e}getAPIService(){return this.APIService}update(...e){this.APIService&&this.APIService.update([this],...e)}del(...e){this.componentList.del(this,{...e})}updateOrder(e,t){e=e||-1,e===!0&&(e=1);let n=this.componentList.getList(this.json.type,this.json[this.json.orderFilterKey],this.json.orderFilterKey);t=t||(this.json.orderKey?this.json[this.json.orderKey]:"order");let r=n.indexOf(this),s;e<0&&r===0?this.json[t]=n.length:e>0&&r===n.length-1?(this.json[t]=0,this.componentList.shiftOrderedList(this,t)):(s=n[r+e],s.setCompState({[t]:r},{run:!0,clean:!0}),this.json[t]=r+e),this.componentList.sortSelectedList(this.json.type,this.json.orderKey||"order"),this.componentList.resetOrder(this,t),this.update()}prepare(){this.operationsFactory.prepare({prepare:this})}setAttribute(e,t){this[e]=t}setAttributes(e){for(let t in e)this[t]=e[t]}getAttribute(e){return this[e]}getJsonAttribute(e){return this.json[e]}setCompState(e,t,n,r){this.subscribeToOperations(t),this.json={...this.json,...e},n&&this.dispatch({updated:this}),r&&r(e),t!=null&&t.run&&this.operationsFactory.runOperations()}getOperationsFactory(){return this.operationsFactory}setJson(e,t,n,r){this.subscribeToOperations(t),this.json=e,n&&this.dispatch({updated:this}),r&&r(this),t!=null&&t.run&&this.operationsFactory.runOperations()}getJson(){return this.json}subscribeToOperations(e){e&&this.operationsFactory.subscribeToOperations(e.operation||this.update,e.clean)}copyJson(e){return{...this.json,_id:"",...e}}copy(e){let t=this.copyJson(e);this.componentList.addComponents(t)}updateObjInsideJson(e,t){this.json[e]={...this.json[e],...t}}removeObjInsideJson(e,t){let n={};for(const r in this.json[e])t.includes(r)||(n[r]=this.json[e][r]);this.json[e]=n}randomFiveDigitNumber(){let e=Math.floor(Math.random()*9e4)+1e4;e=e.toString();let t=String.fromCharCode(97+Math.floor(Math.random()*26)),n=Math.floor(Math.random()*5);if(e=e.substring(0,n)+t+e.substring(n+1),Math.floor(Math.random()*2)===1){let s=String.fromCharCode(97+Math.floor(Math.random()*26)),o;do o=Math.floor(Math.random()*5);while(o===n);e=e.substring(0,o)+s+e.substring(o+1)}return e}createId(){const e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),r=e.getFullYear().toString().slice(-2);return this.randomFiveDigitNumber().toString()+t+n+r}createUUID(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789",r=n.length;for(let s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*r));return t}};class DG{constructor(){ie(this,"operationsFactory");ie(this,"factory",{})}registerComponents(e){this.factory[e.name]=e.component}setOperationsFactory(e){this.operationsFactory=e}getRegistry(){return Object.keys(this.factory)}async getComponent(e){if(Object.keys(this.factory).includes(e.type)){let t=e.type,n=new this.factory[t](this.operationsFactory);return[void 0,"",!1].includes(e._id)&&(e._id=n.getJson()._id),n.setCompState({...e}),n}}}class kG extends Hl{clear(){this.list=[]}cleanSubscibe(e){this.clear(),this.subscribe(e)}run(...e){for(let t of this.list)t&&t(...e);this.clear()}}class kN{constructor(e){ie(this,"register");ie(this,"factory");ie(this,"operationsObserver");bi.bind(this),this.add=[],this.lastChange=[],this.factory=e.getFactory(),this.operationsObserver=new kG}removeFromList(e){this.add=this.add.filter(t=>t!==e)}getOperationsObserver(){return this.operationsObserver}setOperationsObserver(e){this.operationsObserver=e}subscribeToOperations(e,t){t&&this.operationsObserver.clear(),this.operationsObserver.subscribe(e)}runOperations(...e){this.operationsObserver.run(...e)}setAddList(e){this.add=[...e],this.lastChange=[...this.add]}getAddList(){return this.add}getLastPrepare(){return this.lastChange}async prepare(e,t){let{prepare:n,amount:r,clean:s}=e;r=r||1;let o=Array.isArray(n)?n:[n];o=o.flatMap(u=>Array(r).fill(u));let a=[];for(let u of o){let h=await this.factory.getComponent({...u});a.push(h)}return o=[...a],this.setAddList(s?[...o]:[...this.add,...o]),t&&t(this.add),e.run&&await this.addToComponentList(),this.add}clear(){this.setAddList([])}removeFromRegister(e){this.setAddList(this.add.filter(t=>t!==e))}run(e){this.addToComponentList(e)}addToComponentList(e){let t=[...this.add];return this.clear(),this.register(t,{skipBackendUpdate:e}),t}setRegister(e){this.register=e}}class RG{constructor(e){ie(this,"components",[]);ie(this,"dispatch");ie(this,"backArray",{});ie(this,"operationsFactory");ie(this,"componentListInterface");ie(this,"componentsList",{});ie(this,"completionObserver",new Hl);ie(this,"factory");ie(this,"APIService");bi.bind(this),this.operationsFactory=e.getOperationsFactory(),this.operationsFactory.setRegister(this.add),this.componentListInterface=e,this.factory=e.getFactory(),this.dispatch=e.dispatch,this.APIService=e.getAPIService(),this.APIService.setComponentList(this),this.completionObserver.subscribe(this.setComponentsList),this.completionObserver.subscribe(this.setOrderAfterAddorDel)}getFactory(){return this.factory}getDispatch(){return this.dispatch}setDispatch(e){this.dispatch=e}getCompletionObserver(){return this.completionObserver}setCompoletionObserver(e){this.completionObserver=e}subscribeToOperationCompletion(e){this.completionObserver.subscribe(e)}getAPIService(){return this.APIService}setAPIService(e){this.APIService=e}getComponents(){return this.components}filterOutErrors(e){let t=this.components.map(r=>r.getJson()._id);e=e.filter(r=>r!==void 0),e=e.map(r=>{if(r!==void 0&&t.includes(r.getJson()._id)){let s=this.components.find(o=>o.getJson()._id===r.getJson()._id);r.setJson({...s.getJson(),...r.getJson()})}return r}),e=e.filter(r=>!t.includes(r.getJson()._id));let n=this.factory.getRegistry();return e=e.filter(r=>n.includes(r.getJson().type)),e}add(e,t){return e=Array.isArray(e)?e:[e],e=this.filterOutErrors(e),e.forEach(n=>{n.setComponentList(this)}),this.components=[...this.components,...e],this.operationComplete(e,"add",t)}setComponentsList(){let e={};this.componentListInterface.getFactory().getRegistry().forEach(n=>{e[n]=[]});for(let n of this.components){let r=n.getJson().type;e[r].push(n)}this.componentsList=e}async addComponents(e,t){e.prepare||(e={prepare:Array.isArray(e)?e:[e]}),await this.operationsFactory.prepare({...e}),this.operationsFactory.addToComponentList(t);let n=e==null?void 0:e.prepare.map(s=>s._id);return await this.components.filter(s=>n.includes(s.getJson()._id))}del(e,t){return e=Array.isArray(e)?e:[e],this.components=this.components.filter(n=>!e.includes(n)),this.operationComplete(e,"del",t)}setOrderAfterAddorDel(e){for(let t of e){let n=t.getJson();if(n.orderMatters){let r=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey),s=n.orderKey?n[n.orderKey]:"order",o=t.getJson()[s],u=r.filter(d=>{let m=parseInt(d.getJson()[s]);return o=parseInt(o),m===o}).find(d=>!e.includes(d)),h=r.indexOf(t);u&&u!==t&&t.setCompState({[s]:h}),this.sortSelectedList(n.type,n.orderKey||"order"),this.resetOrder(t,s)}}}shiftOrderedList(e,t){let n=e.getJson();this.sortSelectedList(n.type,n.orderKey||"order");let r=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);t=t||(n.orderKey?n[n.orderKey]:"order"),r=r.filter(s=>s!==e);for(let s=1;s<r.length;s++)r[s-1].setCompState({[t]:s},{run:!0,clean:!0})}resetOrder(e,t){let n=e.getJson();t=t||(n.orderKey?n[n.orderKey]:n.order);let r=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);for(let s=0;s<r.length;s++)r[s][t]!==s&&(r[s].setCompState({[t]:s}),r[s]!==e&&r[s].update())}operationComplete(e,t,n){return this.completionObserver.run(e,t,n),this.backArray={[t]:e},n.skipBackendUpdate||this.updateBackend(e,t,n),e}updateBackend(e,t,n){this.dispatch({backend:!0,backendUpdate:{...this.backArray}});let r=[n.path,n.dispatchKey];t==="add"&&r.push(n.timeKey),this.APIService[t](e,...r),this.backArray={}}getOperationsFactory(){return this.operationsFactory}createQueryJson(e,t,n,r,s="type"){r=r||{},n===void 0&&t&&(n="_id"),t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];let o={where:[{attribute:s,val:e}],...r};return t.length>0&&t[0]!==void 0&&(o.where=[...o.where,...t.map((a,u)=>({attribute:n[u]||n[0],val:a}))]),o}async getComponentsFromBackend(e,t){typeof e=="string"&&(e={type:e,owner:t===!1?t:!0});let n=await this.createQueryJson(e.type,e.ids,e.filterKeys,e.obj,e.typeAttribute);return await this.APIService[e.snapshot?"firebaseGetterSnapshot":"firebaseGetter"](n,e.path,e.owner)}async getComponentFromBackend(e){return(await this.getComponentsFromBackend(e))[0]}getList(e,t,n){n=n||"owner",e=Array.isArray(e)?e:[e];let r=[];for(let s of e){let o=this.componentsList[s]||[];r=[...r,...o]}return Array.isArray(t)||(t=t?[t]:[]),Array.isArray(n)||(n=[n]),t.length>0&&(r=r.filter(s=>n.some((o,a)=>{var d;const u=(d=s.getJson())==null?void 0:d[o],h=t[a]||t[0];return typeof u=="object"?Object.keys(u).includes(h):u===h}))),r}getComponent(e,t,n){return this.getList(e,t,n||"_id")[0]}clearList(){this.components=[],this.componentsList={}}clearSelectedList(e,t){let n=[...this.components],r=[];for(const s in n)n[s].getJson()[t]!==e&&r.push(n[s]);this.components=[...r],this.setComponentsList()}setComponentList(e){this.componentsList=e}setSelectedList(e,t){this.componentsList[e]=t}sortSelectedList(e,t,n){if(t&&this.componentsList[e]){let r=[...this.componentsList[e]];r=r.sort(function(s,o){const a=s.getJson()[t],u=o.getJson()[t],h=isNaN(Number(a))?a:Number(a),d=isNaN(Number(u))?u:Number(u);return typeof h=="number"&&typeof d=="number"?n?d-h:h-d:n?(""+d).localeCompare(""+h):(""+h).localeCompare(""+d)}),this.setSelectedList(e,r)}}sortSelectedListbyFirebaseDate(e,t){if(this.componentsList[e]){let n=[...this.componentsList[e]];n=n.sort(function(r,s){var u,h;let o=r.getJson().date||r.getJson().date!==""?(u=r.getJson().date)==null?void 0:u.seconds:new Date(0),a=s.getJson().date||s.getJson().date!==""?(h=s.getJson().date)==null?void 0:h.seconds:new Date(0);return t?a-o:o-a}),this.setSelectedList(e,n)}}}class PG{constructor(e,t){ie(this,"DB");ie(this,"url");ie(this,"path",[]);ie(this,"orderStr","date");bi.bind(this),this.setDB(e),this.setUrl(t),this.path=[this.DB,this.url+"users",this.url+"APP","components"]}setDB(e){this.DB=e}setUrl(e){this.url=e}setPath(e){this.path=e}setOrderStr(e){this.orderStr=e}async generateQueary(e,t,n){let r=e.where.map(u=>{if(u.attribute!==void 0)return GP(u.attribute,u.type||"==",u.val)}).filter(u=>u!==void 0);n&&r.push(GP("owner","==",n)),t=t||this.path;let s=[...r],o=e.order||this.orderStr;return o!=="noOrder"&&o!==void 0&&s.push(e7(o)),e.limit&&s.push(t7(e.limit)),ZV(BV(...t),...s)}}class NG{constructor(e,t,n,r,s){ie(this,"urlEndpoint","");ie(this,"dispatch");ie(this,"componentList");ie(this,"userStr","flinnappsUser");ie(this,"QuearyGenerator");ie(this,"DB");ie(this,"storage");ie(this,"auth");ie(this,"userEmail");ie(this,"path",[]);ie(this,"postObserver",new Hl);ie(this,"dispatchObserver",new Hl);ie(this,"readObserver",new Hl);bi.bind(this),this.urlEndpoint=e,this.DB=t,this.storage=n,this.auth=r,this.dispatch=s,this.path=[this.DB,`${this.urlEndpoint}users`,`${this.urlEndpoint}APP`,"components"],this.QuearyGenerator=new PG(this.DB,this.urlEndpoint)}setAuth(e){this.auth=e}setStorage(e){this.storage=e}setPath(e){this.path=e}setDB(e){this.DB=e,this.QuearyGenerator.setDB(e)}setDispatch(e){this.dispatch=e}setComponentList(e){this.componentList=e}setUserStr(e){this.userStr=e,this.QuearyGenerator.setUrl(e)}getPostObserver(){return this.postObserver}setPostObserver(e){this.postObserver=e}subscribeToPostObserver(e){this.postObserver.subscribe(e)}getReadObserver(){return this.readObserver}setReadObserver(e){this.readObserver=e}subscribeToReadObserver(e){this.readObserver.subscribe(e)}getPath(){return this.path}getDispatchObserver(){return this.dispatchObserver}setDispatchObserver(e){this.dispatchObserver=e}subscribeToDispatchObserver(e){this.dispatchObserver.subscribe(e)}getQueryGenerator(){return this.QuearyGenerator}setQueryGenerator(e){this.QuearyGenerator=e}async login(e,t){let n,r;if(await dN(this.auth,e,t).then(s=>{n=s.user}).catch(s=>{const o=s.message;r={error:o.slice(9,o.length-1)},console.log(r)}),n){let s=n;this.dispatch({login:!0}),await localStorage.setItem(this.userStr,JSON.stringify(s)),this.componentList!==void 0&&this.dispatch!==void 0&&(n=await this.getuser(e))}else n=r;return n}async register(e,t,n){let r;return await kz(this.auth,e,t).then(s=>{r=s.user}).catch(s=>{s.code;let o=s.message,a=o.length-1;r={error:o.slice(9,a)}}),r.error||(this.userEmail=r.email,localStorage.setItem(this.userStr,JSON.stringify(r))),r}async logout(){await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let e;await IE(this.auth,t=>{t&&(e=t.uid)}),e&&await fN(this.auth),await localStorage.setItem(this.userStr,null),window.location.href="/"}sendForgotPasswordChange(e){const t=Xw();Dz(t,e).then(()=>{}).catch(n=>{n.code,n.message})}async checkIfLoggedIn(){return new Promise((e,t)=>{IE(this.auth,async n=>{if(n)e(n);else{await localStorage.setItem(this.userStr,null),await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let r;await IE(this.auth,s=>{s&&(r=s.uid)}),r&&await fN(this.auth),await window.location.reload()}})})}async getCurrentUser(){let e=await localStorage.getItem(this.userStr);return e=await JSON.parse(e),e}async setCurrentUser(e){await localStorage.setItem(this.userStr,JSON.stringify(e))}async loginToDel(e,t){await dN(this.auth,e,t).then(n=>{}).catch(n=>{n.code,n.message})}async delAccount(){const t=Xw().currentUser;await Lz(t).then(()=>{}).catch(n=>{})}async notify(e,t){fetch(t,{method:"POST",mode:"no-cors",body:JSON.stringify(e),headers:{"Conent-Type":"application/json"}})}async changePassword(e){const n=Xw().currentUser;return await Rz(n,e).then(()=>{}).catch(s=>{}),!0}async firebaseGetterSnapshot(e,t,n){n=n===!0?this.userEmail:void 0;let r=await this.QuearyGenerator.generateQueary(e,t,n),s=[];return await u7(r,async o=>{s=await this.getRawData(o)}),s}async firebaseGetter(e,t,n){n=n===!0?this.userEmail:void 0;let r=await this.QuearyGenerator.generateQueary(e,t,n),s=await o7(r);return await this.getRawData(s)}async getRawData(e){let t=[];for(const r in e.docs){let s=e.docs[r].data();t.push(s)}let n=await this.componentList.addComponents(t,!0);return this.dispatch&&await this.dispatch({snapShot:{dataRetrieved:n}}),this.readObserver.run(n,t),n}async getCount(e,t,n){n=n===!0?this.userEmail:void 0;let r=await this.QuearyGenerator.generateQueary(e,t,n);return(await h7(r)).data().count}async getuser(e){this.userEmail=e;let t=await this.componentList.getComponentFromBackend({type:"user",ids:e});return t&&this.dispatch({currentUser:t,email:e,gotUser:!0}),t}async GetAllData(e,t){t=t||[this.db,this.urlEndpoint+"users"],this.firebaseGetter(e,t)}async uploadPics(e,t){const n=SE(this.storage,t);await bH(n,e).then(r=>{console.log("Uploaded a file!")})}async downloadPics(e){let t;return await EH(SE(this.storage,e)).then(n=>{t=n}),t}deletePics(e){const t=SE(this.storage,e);CH(t).then(()=>{}).catch(n=>{})}prep(e){return e=Array.isArray(e)?e:[e],e=e.map(t=>{let n=t;return t.getJson&&(n=t.getJson()),n}),e=e.filter(t=>t!==void 0),e}async add(e,t,n,r){return e=await e.map(s=>((s.getJson().owner===""||s.getJson().owner===void 0)&&s.setCompState({owner:this.userEmail}),s)),await this.operate(e,a7,t,n||"added",r||"date")}async update(e,t,n,r){return await this.operate(e,l7,t,r||"updated",n||"lastUpdated")}async del(e,t,n){return await this.operate(e,YP,t,n||"deleted")}async operate(e,t,n,r,s){try{e=await this.prep(e),n=n||this.path;for(let o of e){s&&(o[s]=await f7()),await this.postObserver.run([o]);let a=[jV(...n,o._id)];t!==YP&&a.push(o),await t(...a)}return this.dispatch&&this.dispatch({[r]:e,dispatchComplete:!0}),this.dispatchObserver.run([{[r]:e}]),e}catch(o){console.log(o),console.error(e,"something went wrong with this operation")}}}class OG{constructor(e,t,n,r,s){ie(this,"factory");ie(this,"updater");ie(this,"operationsFactory");ie(this,"dispatch");ie(this,"APIService");bi.bind(this),this.dispatch=e,this.getFactory(),this.getAPIService(t,n,r,s,e)}getFactory(){return this.factory===void 0&&(this.factory=new DG(this)),this.factory}getAPIService(e,t,n,r,s){return this.APIService===void 0&&(this.APIService=new NG(e,t,n,r,s)),this.APIService}createComponentList(){return new RG(this)}getOperationsFactory(){return this.operationsFactory===void 0&&(this.operationsFactory=new kN(this),this.factory.setOperationsFactory(this.operationsFactory)),this.operationsFactory}getNewOperationsFactory(){return new kN(this)}}class wp extends dt{constructor(e){super(e),this.domList=["a","button","div","h1","h2","h3","h4","h5","h6","img","input","p","span","table","tr","td","th","ul","li","ol","form","textarea","select","option","label","nav","footer","header","article","section","aside","main","video","audio","iframe","canvas"],this.state={...this.state,wrapperClass:"FCWrapper",formClass:"FCInputForm",labelClass:"defaultLabel",errorClass:"defaultErrorMessage",interface:"form"}}setObj(){var e,t;if(!this.props.prepareOnClick){let n=this.props.obj||(this.props.inPopup?(e=this.propsState)==null?void 0:e.currentPopupComponent:(t=this.propsState)==null?void 0:t.currentComponent);this.obj=this.isArray(n)}}preSetup(){this.setComponents(["wrapper","form","label","error"])}getInnerContent(){return this.innerContent=[this.props.label&&this.label.getHtml(),this.getFormHtml(),this.props.errorText&&this.error.getHtml()],this.innerContent}getHtml(){this.mapInnerContent();let e=this.wrapper.getHtml({type:"div",content:this.innerContent});return this.html=C.jsx(C.Fragment,{children:e}),this.html}getFormHtml(){const e=this.props.type||"input";return e==="select"&&(this.content=this.generateSelectOptions()),this.getInputProps(e),this.additionalPropsSetup(),this.form.getHtml({type:e,content:this.content,props:this.inputProps})}additionalPropsSetup(){}handleChange(e){let{name:t,value:n}=e.target;for(let r of this.obj){if(this.props.isPropArray){let s=r.getJson()[this.props.name]||[];Array.isArray(s)||(s=[s]),Array.isArray(s[0])||(s[0]=[s[0]]),s[0]=n,n=s}r.setCompState({[this.props.name]:n})}this.afterChange(e)}afterChange(e){if(this.props.update)for(let t of this.obj){let n=this.props.update===!0?void 0:{...this.props.update};t==null||t.update(n)}this.props.sendUpdate&&this.props.app&&this.app.dispatch({formUpdate:this.props.type}),this.props.callbackFunc&&this.props.callbackFunc(this.obj),this.additionalChanges(e),this.setState({})}additionalChanges(e){}async prepareOnClick(){var e;if(this.props.prepareOnClick&&this.props.app){let t=this.props.obj;t&&(t=this.isArray(t)),t=await((e=this.props.app)==null?void 0:e.state.componentList.getOperationsFactory().prepare({...t})),t&&(t=this.isArray(t)),this.obj=t}}objDispatch(e){for(let t of this.obj)t.setCompState({[this.props.name]:e});this.afterChange()}handleChangeWithoutEvent(e){for(let t in this.obj)t.setCompState({[e.name]:e.value});this.afterChange()}generateSelectOptions(){const{selectOptions:e,textOptions:t,useIndexForValue:n}=this.props;return Array.isArray(e)?t&&(!Array.isArray(t)||e.length!==t.length)?(console.error("'selectOptions' and 'textOptions' must be arrays of the same length."),null):e.map((r,s)=>{var u;const o=t?t[s]:r;let a=t?n?s:(u=r==null?void 0:r.getJson)==null?void 0:u.call(r)._id:r;return a===void 0?(console.warn(`Could not determine a value for the option at index ${s}.`),null):C.jsx("option",{value:a,children:o},a)}):null}getInputProps(e){var t;return this.inputProps={onChange:this.props.handleChange?n=>{this.props.handleChange(n,this.obj)}:this.handleChange,value:this.obj[0]?(t=this.obj[0])==null?void 0:t.getJson()[this.props.name]:this.props.value,type:this.props.inputType||this.props.type,onFocus:this.props.onFocus||this.onFocus,placeholder:this.props.placeholder,name:this.props.name,min:this.props.min,max:this.props.max,cols:this.props.cols||"",rows:this.props.rows||5,resize:this.props.resize||"true",autoComplete:this.props.autoComplete?this.props.autoComplete:"off",id:this.props.id,checked:this.props.checked,spellCheck:this.props.type==="password"||this.props.spellCheck===void 0?!1:this.props.spellCheck,minLength:this.props.minLength,maxLength:this.props.maxLength},this.domList.includes(e)||(this.inputProps.handleChangeWithoutEvent=this.props.update?()=>{console.log("")}:this.props.handleChangeWithoutEvent?this.props.handleChangeWithoutEvent:this.handleChangeWithoutEvent,this.inputProps.selectOptions=this.props.selectOptions,this.inputProps.textOptions=this.props.textOptions,this.inputProps.unit=this.props.unit?this.props.unit:"$",this.inputProps.tickClass=this.props.tickClass,this.inputProps.handleHTMLChange=this.props.handleHTMLChange||this.objDispatch,this.inputProps.doesMath=this.props.doesMath,this.inputProps.objDispatch=this.objDispatch,this.inputProps.emitClickedOutside=this.props.emitClickedOutside,this.inputProps.updateOnClickOutside=this.props.updateOnClickOutside),this.props.required&&(this.inputProps.required=!0),this.props.disabled&&(this.inputProps.disabled=!0),this.inputProps}}class eh extends wp{constructor(e){super(e),this.state.formClass="FCDefaultButton"}buttonClick(){this.props.buttonClick?this.props.buttonClick(this.obj):this.buttonClickFunc(),this.props.callbackFunc&&this.props.callbackFunc(this.obj)}buttonClickFunc(){}additionalSetup(){this.form.setOnClick(this.buttonClick)}getFormHtml(){return this.form.setStyle({cursor:"pointer"}),this.content=this.props.content||this.content||C.jsx(C.Fragment,{children:"button"}),this.form.getHtml({type:"div",content:this.content})}}let xB=class{constructor(){ie(this,"FCInputForm","defaultInputForm");ie(this,"FCWrapper","defaultWrapper");ie(this,"FCError","defaultErrorMessage");ie(this,"FCLabel","defaultLabel");ie(this,"FCDefaultButton","defaultButton");ie(this,"FCDefaultDelButton","delButton");ie(this,"FCImgButton","imgButton")}};const LG=Object.freeze(Object.defineProperty({__proto__:null,DefaultRegistry:xB},Symbol.toStringTag,{value:"Module"}));class LI{constructor(e){ie(this,"factory",{});bi.bind(this),e&&(this.registry=e,this.registerListWithFactory())}registerListWithFactory(){for(const e in this.registry)if(Object.prototype.hasOwnProperty.call(this.registry,e)){const t=e.charAt(0).toLowerCase()+e.slice(1);this.factory[t]=this.registry[e]}}getComponent(e){let t;return this.factory[e]&&(t=new this.factory[e]),t}registerComponent(e,t){this.factory[e]=t}}let FG=class extends LI{constructor(){super(LG),this.factory.default=xB}};class SB{constructor(){ie(this,"factory",{})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),C.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class MG extends eh{buttonClickFunc(){let e=this.props.add;this.componentList.addComponents(e)}}class BG{constructor(){bi.bind(this)}doMath(e){e=e.replace(/\s+/g,"");const t=/(\d+)([+\-*/])(\d+)/,n=e.match(t);if(!n)throw new Error("Invalid input");const r=parseFloat(n[1]),s=n[2],o=parseFloat(n[3]);return{"+":r+o,"-":r-o,"*":r*o,"/":r/o}[s]}}let jG=new BG;class qG extends wp{constructor(e){super(e)}componentDidMount(){document.addEventListener("keyup",this.doMath)}componentWillUnmount(){document.removeEventListener("keyup",this.doMath)}additionalChanges(e){let{name:t,value:n}=e.target;this.setState({val:n})}async doMath(e){if(e.key==="Enter"&&this.state.val!==void 0){let t=this.obj[0],n=await jG.doMath(this.state.val).toString();await t.setCompState({[this.props.name]:n}),t.update(),await this.setState({val:void 0})}}}let UG=class extends eh{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},r={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...r})}},VG=class extends eh{buttonClickFunc(){for(let e of this.obj)e.update(this.props.updateParams);this.props.isPopup&&this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}},HG=class extends eh{buttonClickFunc(){let e=this.operationsFactory.addToComponentList(this.props.skipBackendUpdate),t=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(e[0].getJson().type)]:e[0]},n={};this.props.isPopup&&(n={popupSwitch:"",currentPopupComponent:void 0}),this.dispatch({...n,...t})}};var PE,RN;function zG(){if(RN)return PE;RN=1;function i(){this.__data__=[],this.size=0}return PE=i,PE}var NE,PN;function TB(){if(PN)return NE;PN=1;function i(e,t){return e===t||e!==e&&t!==t}return NE=i,NE}var OE,NN;function dA(){if(NN)return OE;NN=1;var i=TB();function e(t,n){for(var r=t.length;r--;)if(i(t[r][0],n))return r;return-1}return OE=e,OE}var LE,ON;function $G(){if(ON)return LE;ON=1;var i=dA(),e=Array.prototype,t=e.splice;function n(r){var s=this.__data__,o=i(s,r);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return LE=n,LE}var FE,LN;function WG(){if(LN)return FE;LN=1;var i=dA();function e(t){var n=this.__data__,r=i(n,t);return r<0?void 0:n[r][1]}return FE=e,FE}var ME,FN;function GG(){if(FN)return ME;FN=1;var i=dA();function e(t){return i(this.__data__,t)>-1}return ME=e,ME}var BE,MN;function KG(){if(MN)return BE;MN=1;var i=dA();function e(t,n){var r=this.__data__,s=i(r,t);return s<0?(++this.size,r.push([t,n])):r[s][1]=n,this}return BE=e,BE}var jE,BN;function fA(){if(BN)return jE;BN=1;var i=zG(),e=$G(),t=WG(),n=GG(),r=KG();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var h=o[a];this.set(h[0],h[1])}}return s.prototype.clear=i,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,jE=s,jE}var qE,jN;function JG(){if(jN)return qE;jN=1;var i=fA();function e(){this.__data__=new i,this.size=0}return qE=e,qE}var UE,qN;function YG(){if(qN)return UE;qN=1;function i(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return UE=i,UE}var VE,UN;function XG(){if(UN)return VE;UN=1;function i(e){return this.__data__.get(e)}return VE=i,VE}var HE,VN;function QG(){if(VN)return HE;VN=1;function i(e){return this.__data__.has(e)}return HE=i,HE}var zE,HN;function IB(){if(HN)return zE;HN=1;var i=typeof cp=="object"&&cp&&cp.Object===Object&&cp;return zE=i,zE}var $E,zN;function ru(){if(zN)return $E;zN=1;var i=IB(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=i||e||Function("return this")();return $E=t,$E}var WE,$N;function FI(){if($N)return WE;$N=1;var i=ru(),e=i.Symbol;return WE=e,WE}var GE,WN;function ZG(){if(WN)return GE;WN=1;var i=FI(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,r=i?i.toStringTag:void 0;function s(o){var a=t.call(o,r),u=o[r];try{o[r]=void 0;var h=!0}catch{}var d=n.call(o);return h&&(a?o[r]=u:delete o[r]),d}return GE=s,GE}var KE,GN;function eK(){if(GN)return KE;GN=1;var i=Object.prototype,e=i.toString;function t(n){return e.call(n)}return KE=t,KE}var JE,KN;function pA(){if(KN)return JE;KN=1;var i=FI(),e=ZG(),t=eK(),n="[object Null]",r="[object Undefined]",s=i?i.toStringTag:void 0;function o(a){return a==null?a===void 0?r:n:s&&s in Object(a)?e(a):t(a)}return JE=o,JE}var YE,JN;function DB(){if(JN)return YE;JN=1;function i(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return YE=i,YE}var XE,YN;function kB(){if(YN)return XE;YN=1;var i=pA(),e=DB(),t="[object AsyncFunction]",n="[object Function]",r="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var u=i(a);return u==n||u==r||u==t||u==s}return XE=o,XE}var QE,XN;function tK(){if(XN)return QE;XN=1;var i=ru(),e=i["__core-js_shared__"];return QE=e,QE}var ZE,QN;function nK(){if(QN)return ZE;QN=1;var i=tK(),e=function(){var n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return ZE=t,ZE}var eC,ZN;function RB(){if(ZN)return eC;ZN=1;var i=Function.prototype,e=i.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return eC=t,eC}var tC,eO;function rK(){if(eO)return tC;eO=1;var i=kB(),e=nK(),t=DB(),n=RB(),r=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,h=a.hasOwnProperty,d=RegExp("^"+u.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!t(p)||e(p))return!1;var g=i(p)?d:s;return g.test(n(p))}return tC=m,tC}var nC,tO;function iK(){if(tO)return nC;tO=1;function i(e,t){return e==null?void 0:e[t]}return nC=i,nC}var rC,nO;function tg(){if(nO)return rC;nO=1;var i=rK(),e=iK();function t(n,r){var s=e(n,r);return i(s)?s:void 0}return rC=t,rC}var iC,rO;function MI(){if(rO)return iC;rO=1;var i=tg(),e=ru(),t=i(e,"Map");return iC=t,iC}var sC,iO;function mA(){if(iO)return sC;iO=1;var i=tg(),e=i(Object,"create");return sC=e,sC}var oC,sO;function sK(){if(sO)return oC;sO=1;var i=mA();function e(){this.__data__=i?i(null):{},this.size=0}return oC=e,oC}var aC,oO;function oK(){if(oO)return aC;oO=1;function i(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return aC=i,aC}var lC,aO;function aK(){if(aO)return lC;aO=1;var i=mA(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function r(s){var o=this.__data__;if(i){var a=o[s];return a===e?void 0:a}return n.call(o,s)?o[s]:void 0}return lC=r,lC}var uC,lO;function lK(){if(lO)return uC;lO=1;var i=mA(),e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=this.__data__;return i?s[r]!==void 0:t.call(s,r)}return uC=n,uC}var cC,uO;function uK(){if(uO)return cC;uO=1;var i=mA(),e="__lodash_hash_undefined__";function t(n,r){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=i&&r===void 0?e:r,this}return cC=t,cC}var hC,cO;function cK(){if(cO)return hC;cO=1;var i=sK(),e=oK(),t=aK(),n=lK(),r=uK();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var h=o[a];this.set(h[0],h[1])}}return s.prototype.clear=i,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,hC=s,hC}var dC,hO;function hK(){if(hO)return dC;hO=1;var i=cK(),e=fA(),t=MI();function n(){this.size=0,this.__data__={hash:new i,map:new(t||e),string:new i}}return dC=n,dC}var fC,dO;function dK(){if(dO)return fC;dO=1;function i(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return fC=i,fC}var pC,fO;function gA(){if(fO)return pC;fO=1;var i=dK();function e(t,n){var r=t.__data__;return i(n)?r[typeof n=="string"?"string":"hash"]:r.map}return pC=e,pC}var mC,pO;function fK(){if(pO)return mC;pO=1;var i=gA();function e(t){var n=i(this,t).delete(t);return this.size-=n?1:0,n}return mC=e,mC}var gC,mO;function pK(){if(mO)return gC;mO=1;var i=gA();function e(t){return i(this,t).get(t)}return gC=e,gC}var yC,gO;function mK(){if(gO)return yC;gO=1;var i=gA();function e(t){return i(this,t).has(t)}return yC=e,yC}var vC,yO;function gK(){if(yO)return vC;yO=1;var i=gA();function e(t,n){var r=i(this,t),s=r.size;return r.set(t,n),this.size+=r.size==s?0:1,this}return vC=e,vC}var wC,vO;function PB(){if(vO)return wC;vO=1;var i=hK(),e=fK(),t=pK(),n=mK(),r=gK();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var h=o[a];this.set(h[0],h[1])}}return s.prototype.clear=i,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,wC=s,wC}var _C,wO;function yK(){if(wO)return _C;wO=1;var i=fA(),e=MI(),t=PB(),n=200;function r(s,o){var a=this.__data__;if(a instanceof i){var u=a.__data__;if(!e||u.length<n-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(u)}return a.set(s,o),this.size=a.size,this}return _C=r,_C}var AC,_O;function vK(){if(_O)return AC;_O=1;var i=fA(),e=JG(),t=YG(),n=XG(),r=QG(),s=yK();function o(a){var u=this.__data__=new i(a);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=s,AC=o,AC}var bC,AO;function wK(){if(AO)return bC;AO=1;var i="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,i),this}return bC=e,bC}var EC,bO;function _K(){if(bO)return EC;bO=1;function i(e){return this.__data__.has(e)}return EC=i,EC}var CC,EO;function AK(){if(EO)return CC;EO=1;var i=PB(),e=wK(),t=_K();function n(r){var s=-1,o=r==null?0:r.length;for(this.__data__=new i;++s<o;)this.add(r[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,CC=n,CC}var xC,CO;function bK(){if(CO)return xC;CO=1;function i(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}return xC=i,xC}var SC,xO;function EK(){if(xO)return SC;xO=1;function i(e,t){return e.has(t)}return SC=i,SC}var TC,SO;function NB(){if(SO)return TC;SO=1;var i=AK(),e=bK(),t=EK(),n=1,r=2;function s(o,a,u,h,d,m){var p=u&n,g=o.length,w=a.length;if(g!=w&&!(p&&w>g))return!1;var _=m.get(o),A=m.get(a);if(_&&A)return _==a&&A==o;var v=-1,E=!0,I=u&r?new i:void 0;for(m.set(o,a),m.set(a,o);++v<g;){var S=o[v],R=a[v];if(h)var F=p?h(R,S,v,a,o,m):h(S,R,v,o,a,m);if(F!==void 0){if(F)continue;E=!1;break}if(I){if(!e(a,function(k,T){if(!t(I,T)&&(S===k||d(S,k,u,h,m)))return I.push(T)})){E=!1;break}}else if(!(S===R||d(S,R,u,h,m))){E=!1;break}}return m.delete(o),m.delete(a),E}return TC=s,TC}var IC,TO;function CK(){if(TO)return IC;TO=1;var i=ru(),e=i.Uint8Array;return IC=e,IC}var DC,IO;function xK(){if(IO)return DC;IO=1;function i(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n}return DC=i,DC}var kC,DO;function SK(){if(DO)return kC;DO=1;function i(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}return kC=i,kC}var RC,kO;function TK(){if(kO)return RC;kO=1;var i=FI(),e=CK(),t=TB(),n=NB(),r=xK(),s=SK(),o=1,a=2,u="[object Boolean]",h="[object Date]",d="[object Error]",m="[object Map]",p="[object Number]",g="[object RegExp]",w="[object Set]",_="[object String]",A="[object Symbol]",v="[object ArrayBuffer]",E="[object DataView]",I=i?i.prototype:void 0,S=I?I.valueOf:void 0;function R(F,k,T,D,P,N,L){switch(T){case E:if(F.byteLength!=k.byteLength||F.byteOffset!=k.byteOffset)return!1;F=F.buffer,k=k.buffer;case v:return!(F.byteLength!=k.byteLength||!N(new e(F),new e(k)));case u:case h:case p:return t(+F,+k);case d:return F.name==k.name&&F.message==k.message;case g:case _:return F==k+"";case m:var M=r;case w:var $=D&o;if(M||(M=s),F.size!=k.size&&!$)return!1;var Q=L.get(F);if(Q)return Q==k;D|=a,L.set(F,k);var re=n(M(F),M(k),D,P,N,L);return L.delete(F),re;case A:if(S)return S.call(F)==S.call(k)}return!1}return RC=R,RC}var PC,RO;function IK(){if(RO)return PC;RO=1;function i(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}return PC=i,PC}var NC,PO;function BI(){if(PO)return NC;PO=1;var i=Array.isArray;return NC=i,NC}var OC,NO;function DK(){if(NO)return OC;NO=1;var i=IK(),e=BI();function t(n,r,s){var o=r(n);return e(n)?o:i(o,s(n))}return OC=t,OC}var LC,OO;function kK(){if(OO)return LC;OO=1;function i(e,t){for(var n=-1,r=e==null?0:e.length,s=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[s++]=a)}return o}return LC=i,LC}var FC,LO;function RK(){if(LO)return FC;LO=1;function i(){return[]}return FC=i,FC}var MC,FO;function PK(){if(FO)return MC;FO=1;var i=kK(),e=RK(),t=Object.prototype,n=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,s=r?function(o){return o==null?[]:(o=Object(o),i(r(o),function(a){return n.call(o,a)}))}:e;return MC=s,MC}var BC,MO;function NK(){if(MO)return BC;MO=1;function i(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}return BC=i,BC}var jC,BO;function yA(){if(BO)return jC;BO=1;function i(e){return e!=null&&typeof e=="object"}return jC=i,jC}var qC,jO;function OK(){if(jO)return qC;jO=1;var i=pA(),e=yA(),t="[object Arguments]";function n(r){return e(r)&&i(r)==t}return qC=n,qC}var UC,qO;function LK(){if(qO)return UC;qO=1;var i=OK(),e=yA(),t=Object.prototype,n=t.hasOwnProperty,r=t.propertyIsEnumerable,s=i(function(){return arguments}())?i:function(o){return e(o)&&n.call(o,"callee")&&!r.call(o,"callee")};return UC=s,UC}var oy={exports:{}},VC,UO;function FK(){if(UO)return VC;UO=1;function i(){return!1}return VC=i,VC}oy.exports;var VO;function OB(){return VO||(VO=1,function(i,e){var t=ru(),n=FK(),r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,o=s&&s.exports===r,a=o?t.Buffer:void 0,u=a?a.isBuffer:void 0,h=u||n;i.exports=h}(oy,oy.exports)),oy.exports}var HC,HO;function MK(){if(HO)return HC;HO=1;var i=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,r){var s=typeof n;return r=r??i,!!r&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<r}return HC=t,HC}var zC,zO;function LB(){if(zO)return zC;zO=1;var i=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=i}return zC=e,zC}var $C,$O;function BK(){if($O)return $C;$O=1;var i=pA(),e=LB(),t=yA(),n="[object Arguments]",r="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",h="[object Map]",d="[object Number]",m="[object Object]",p="[object RegExp]",g="[object Set]",w="[object String]",_="[object WeakMap]",A="[object ArrayBuffer]",v="[object DataView]",E="[object Float32Array]",I="[object Float64Array]",S="[object Int8Array]",R="[object Int16Array]",F="[object Int32Array]",k="[object Uint8Array]",T="[object Uint8ClampedArray]",D="[object Uint16Array]",P="[object Uint32Array]",N={};N[E]=N[I]=N[S]=N[R]=N[F]=N[k]=N[T]=N[D]=N[P]=!0,N[n]=N[r]=N[A]=N[s]=N[v]=N[o]=N[a]=N[u]=N[h]=N[d]=N[m]=N[p]=N[g]=N[w]=N[_]=!1;function L(M){return t(M)&&e(M.length)&&!!N[i(M)]}return $C=L,$C}var WC,WO;function jK(){if(WO)return WC;WO=1;function i(e){return function(t){return e(t)}}return WC=i,WC}var ay={exports:{}};ay.exports;var GO;function qK(){return GO||(GO=1,function(i,e){var t=IB(),n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,o=s&&t.process,a=function(){try{var u=r&&r.require&&r.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();i.exports=a}(ay,ay.exports)),ay.exports}var GC,KO;function FB(){if(KO)return GC;KO=1;var i=BK(),e=jK(),t=qK(),n=t&&t.isTypedArray,r=n?e(n):i;return GC=r,GC}var KC,JO;function UK(){if(JO)return KC;JO=1;var i=NK(),e=LK(),t=BI(),n=OB(),r=MK(),s=FB(),o=Object.prototype,a=o.hasOwnProperty;function u(h,d){var m=t(h),p=!m&&e(h),g=!m&&!p&&n(h),w=!m&&!p&&!g&&s(h),_=m||p||g||w,A=_?i(h.length,String):[],v=A.length;for(var E in h)(d||a.call(h,E))&&!(_&&(E=="length"||g&&(E=="offset"||E=="parent")||w&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||r(E,v)))&&A.push(E);return A}return KC=u,KC}var JC,YO;function VK(){if(YO)return JC;YO=1;var i=Object.prototype;function e(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||i;return t===r}return JC=e,JC}var YC,XO;function HK(){if(XO)return YC;XO=1;function i(e,t){return function(n){return e(t(n))}}return YC=i,YC}var XC,QO;function zK(){if(QO)return XC;QO=1;var i=HK(),e=i(Object.keys,Object);return XC=e,XC}var QC,ZO;function $K(){if(ZO)return QC;ZO=1;var i=VK(),e=zK(),t=Object.prototype,n=t.hasOwnProperty;function r(s){if(!i(s))return e(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return QC=r,QC}var ZC,eL;function WK(){if(eL)return ZC;eL=1;var i=kB(),e=LB();function t(n){return n!=null&&e(n.length)&&!i(n)}return ZC=t,ZC}var ex,tL;function GK(){if(tL)return ex;tL=1;var i=UK(),e=$K(),t=WK();function n(r){return t(r)?i(r):e(r)}return ex=n,ex}var tx,nL;function KK(){if(nL)return tx;nL=1;var i=DK(),e=PK(),t=GK();function n(r){return i(r,t,e)}return tx=n,tx}var nx,rL;function JK(){if(rL)return nx;rL=1;var i=KK(),e=1,t=Object.prototype,n=t.hasOwnProperty;function r(s,o,a,u,h,d){var m=a&e,p=i(s),g=p.length,w=i(o),_=w.length;if(g!=_&&!m)return!1;for(var A=g;A--;){var v=p[A];if(!(m?v in o:n.call(o,v)))return!1}var E=d.get(s),I=d.get(o);if(E&&I)return E==o&&I==s;var S=!0;d.set(s,o),d.set(o,s);for(var R=m;++A<g;){v=p[A];var F=s[v],k=o[v];if(u)var T=m?u(k,F,v,o,s,d):u(F,k,v,s,o,d);if(!(T===void 0?F===k||h(F,k,a,u,d):T)){S=!1;break}R||(R=v=="constructor")}if(S&&!R){var D=s.constructor,P=o.constructor;D!=P&&"constructor"in s&&"constructor"in o&&!(typeof D=="function"&&D instanceof D&&typeof P=="function"&&P instanceof P)&&(S=!1)}return d.delete(s),d.delete(o),S}return nx=r,nx}var rx,iL;function YK(){if(iL)return rx;iL=1;var i=tg(),e=ru(),t=i(e,"DataView");return rx=t,rx}var ix,sL;function XK(){if(sL)return ix;sL=1;var i=tg(),e=ru(),t=i(e,"Promise");return ix=t,ix}var sx,oL;function QK(){if(oL)return sx;oL=1;var i=tg(),e=ru(),t=i(e,"Set");return sx=t,sx}var ox,aL;function ZK(){if(aL)return ox;aL=1;var i=tg(),e=ru(),t=i(e,"WeakMap");return ox=t,ox}var ax,lL;function eJ(){if(lL)return ax;lL=1;var i=YK(),e=MI(),t=XK(),n=QK(),r=ZK(),s=pA(),o=RB(),a="[object Map]",u="[object Object]",h="[object Promise]",d="[object Set]",m="[object WeakMap]",p="[object DataView]",g=o(i),w=o(e),_=o(t),A=o(n),v=o(r),E=s;return(i&&E(new i(new ArrayBuffer(1)))!=p||e&&E(new e)!=a||t&&E(t.resolve())!=h||n&&E(new n)!=d||r&&E(new r)!=m)&&(E=function(I){var S=s(I),R=S==u?I.constructor:void 0,F=R?o(R):"";if(F)switch(F){case g:return p;case w:return a;case _:return h;case A:return d;case v:return m}return S}),ax=E,ax}var lx,uL;function tJ(){if(uL)return lx;uL=1;var i=vK(),e=NB(),t=TK(),n=JK(),r=eJ(),s=BI(),o=OB(),a=FB(),u=1,h="[object Arguments]",d="[object Array]",m="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function w(_,A,v,E,I,S){var R=s(_),F=s(A),k=R?d:r(_),T=F?d:r(A);k=k==h?m:k,T=T==h?m:T;var D=k==m,P=T==m,N=k==T;if(N&&o(_)){if(!o(A))return!1;R=!0,D=!1}if(N&&!D)return S||(S=new i),R||a(_)?e(_,A,v,E,I,S):t(_,A,k,v,E,I,S);if(!(v&u)){var L=D&&g.call(_,"__wrapped__"),M=P&&g.call(A,"__wrapped__");if(L||M){var $=L?_.value():_,Q=M?A.value():A;return S||(S=new i),I($,Q,v,E,S)}}return N?(S||(S=new i),n(_,A,v,E,I,S)):!1}return lx=w,lx}var ux,cL;function nJ(){if(cL)return ux;cL=1;var i=tJ(),e=yA();function t(n,r,s,o,a){return n===r?!0:n==null||r==null||!e(n)&&!e(r)?n!==n&&r!==r:i(n,r,s,o,t,a)}return ux=t,ux}var cx,hL;function rJ(){if(hL)return cx;hL=1;var i=nJ();function e(t,n){return i(t,n)}return cx=e,cx}var e_={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var iJ=e_.exports,dL;function sJ(){return dL||(dL=1,function(i,e){(function(n,r){i.exports=r()})(typeof self<"u"?self:iJ,function(){return function(t){var n={};function r(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(s,o,a){r.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=109)}([function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(17),o=r(18),a=r(19),u=r(45),h=r(46),d=r(47),m=r(48),p=r(49),g=r(12),w=r(32),_=r(33),A=r(31),v=r(1),E={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:m.default,Scroll:u.default,Block:d.default,Inline:h.default,Text:p.default,Attributor:{Attribute:g.default,Class:w.default,Style:_.default,Store:A.default}};n.default=E},function(t,n,r){var s=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,E){v.__proto__=E}||function(v,E){for(var I in E)E.hasOwnProperty(I)&&(v[I]=E[I])};return function(v,E){A(v,E);function I(){this.constructor=v}v.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(A){s(v,A);function v(E){var I=this;return E="[Parchment] "+E,I=A.call(this,E)||this,I.message=E,I.name=I.constructor.name,I}return v}(Error);n.ParchmentError=o;var a={},u={},h={},d={};n.DATA_KEY="__blot";var m;(function(A){A[A.TYPE=3]="TYPE",A[A.LEVEL=12]="LEVEL",A[A.ATTRIBUTE=13]="ATTRIBUTE",A[A.BLOT=14]="BLOT",A[A.INLINE=7]="INLINE",A[A.BLOCK=11]="BLOCK",A[A.BLOCK_BLOT=10]="BLOCK_BLOT",A[A.INLINE_BLOT=6]="INLINE_BLOT",A[A.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",A[A.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",A[A.ANY=15]="ANY"})(m=n.Scope||(n.Scope={}));function p(A,v){var E=w(A);if(E==null)throw new o("Unable to create "+A+" blot");var I=E,S=A instanceof Node||A.nodeType===Node.TEXT_NODE?A:I.create(v);return new I(S,v)}n.create=p;function g(A,v){return v===void 0&&(v=!1),A==null?null:A[n.DATA_KEY]!=null?A[n.DATA_KEY].blot:v?g(A.parentNode,v):null}n.find=g;function w(A,v){v===void 0&&(v=m.ANY);var E;if(typeof A=="string")E=d[A]||a[A];else if(A instanceof Text||A.nodeType===Node.TEXT_NODE)E=d.text;else if(typeof A=="number")A&m.LEVEL&m.BLOCK?E=d.block:A&m.LEVEL&m.INLINE&&(E=d.inline);else if(A instanceof HTMLElement){var I=(A.getAttribute("class")||"").split(/\s+/);for(var S in I)if(E=u[I[S]],E)break;E=E||h[A.tagName]}return E==null?null:v&m.LEVEL&E.scope&&v&m.TYPE&E.scope?E:null}n.query=w;function _(){for(var A=[],v=0;v<arguments.length;v++)A[v]=arguments[v];if(A.length>1)return A.map(function(S){return _(S)});var E=A[0];if(typeof E.blotName!="string"&&typeof E.attrName!="string")throw new o("Invalid definition");if(E.blotName==="abstract")throw new o("Cannot register abstract class");if(d[E.blotName||E.attrName]=E,typeof E.keyName=="string")a[E.keyName]=E;else if(E.className!=null&&(u[E.className]=E),E.tagName!=null){Array.isArray(E.tagName)?E.tagName=E.tagName.map(function(S){return S.toUpperCase()}):E.tagName=E.tagName.toUpperCase();var I=Array.isArray(E.tagName)?E.tagName:[E.tagName];I.forEach(function(S){(h[S]==null||E.className==null)&&(h[S]=E)})}return E}n.register=_},function(t,n,r){var s=r(51),o=r(11),a=r(3),u=r(20),h="\0",d=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};d.prototype.insert=function(m,p){var g={};return m.length===0?this:(g.insert=m,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(g.attributes=p),this.push(g))},d.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},d.prototype.retain=function(m,p){if(m<=0)return this;var g={retain:m};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(g.attributes=p),this.push(g)},d.prototype.push=function(m){var p=this.ops.length,g=this.ops[p-1];if(m=a(!0,{},m),typeof g=="object"){if(typeof m.delete=="number"&&typeof g.delete=="number")return this.ops[p-1]={delete:g.delete+m.delete},this;if(typeof g.delete=="number"&&m.insert!=null&&(p-=1,g=this.ops[p-1],typeof g!="object"))return this.ops.unshift(m),this;if(o(m.attributes,g.attributes)){if(typeof m.insert=="string"&&typeof g.insert=="string")return this.ops[p-1]={insert:g.insert+m.insert},typeof m.attributes=="object"&&(this.ops[p-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof g.retain=="number")return this.ops[p-1]={retain:g.retain+m.retain},typeof m.attributes=="object"&&(this.ops[p-1].attributes=m.attributes),this}}return p===this.ops.length?this.ops.push(m):this.ops.splice(p,0,m),this},d.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},d.prototype.filter=function(m){return this.ops.filter(m)},d.prototype.forEach=function(m){this.ops.forEach(m)},d.prototype.map=function(m){return this.ops.map(m)},d.prototype.partition=function(m){var p=[],g=[];return this.forEach(function(w){var _=m(w)?p:g;_.push(w)}),[p,g]},d.prototype.reduce=function(m,p){return this.ops.reduce(m,p)},d.prototype.changeLength=function(){return this.reduce(function(m,p){return p.insert?m+u.length(p):p.delete?m-p.delete:m},0)},d.prototype.length=function(){return this.reduce(function(m,p){return m+u.length(p)},0)},d.prototype.slice=function(m,p){m=m||0,typeof p!="number"&&(p=1/0);for(var g=[],w=u.iterator(this.ops),_=0;_<p&&w.hasNext();){var A;_<m?A=w.next(m-_):(A=w.next(p-_),g.push(A)),_+=u.length(A)}return new d(g)},d.prototype.compose=function(m){var p=u.iterator(this.ops),g=u.iterator(m.ops),w=[],_=g.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){for(var A=_.retain;p.peekType()==="insert"&&p.peekLength()<=A;)A-=p.peekLength(),w.push(p.next());_.retain-A>0&&g.next(_.retain-A)}for(var v=new d(w);p.hasNext()||g.hasNext();)if(g.peekType()==="insert")v.push(g.next());else if(p.peekType()==="delete")v.push(p.next());else{var E=Math.min(p.peekLength(),g.peekLength()),I=p.next(E),S=g.next(E);if(typeof S.retain=="number"){var R={};typeof I.retain=="number"?R.retain=E:R.insert=I.insert;var F=u.attributes.compose(I.attributes,S.attributes,typeof I.retain=="number");if(F&&(R.attributes=F),v.push(R),!g.hasNext()&&o(v.ops[v.ops.length-1],R)){var k=new d(p.rest());return v.concat(k).chop()}}else typeof S.delete=="number"&&typeof I.retain=="number"&&v.push(S)}return v.chop()},d.prototype.concat=function(m){var p=new d(this.ops.slice());return m.ops.length>0&&(p.push(m.ops[0]),p.ops=p.ops.concat(m.ops.slice(1))),p},d.prototype.diff=function(m,p){if(this.ops===m.ops)return new d;var g=[this,m].map(function(E){return E.map(function(I){if(I.insert!=null)return typeof I.insert=="string"?I.insert:h;var S=E===m?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),w=new d,_=s(g[0],g[1],p),A=u.iterator(this.ops),v=u.iterator(m.ops);return _.forEach(function(E){for(var I=E[1].length;I>0;){var S=0;switch(E[0]){case s.INSERT:S=Math.min(v.peekLength(),I),w.push(v.next(S));break;case s.DELETE:S=Math.min(I,A.peekLength()),A.next(S),w.delete(S);break;case s.EQUAL:S=Math.min(A.peekLength(),v.peekLength(),I);var R=A.next(S),F=v.next(S);o(R.insert,F.insert)?w.retain(S,u.attributes.diff(R.attributes,F.attributes)):w.push(F).delete(S);break}I-=S}}),w.chop()},d.prototype.eachLine=function(m,p){p=p||`
`;for(var g=u.iterator(this.ops),w=new d,_=0;g.hasNext();){if(g.peekType()!=="insert")return;var A=g.peek(),v=u.length(A)-g.peekLength(),E=typeof A.insert=="string"?A.insert.indexOf(p,v)-v:-1;if(E<0)w.push(g.next());else if(E>0)w.push(g.next(E));else{if(m(w,g.next(1).attributes||{},_)===!1)return;_+=1,w=new d}}w.length()>0&&m(w,{},_)},d.prototype.transform=function(m,p){if(p=!!p,typeof m=="number")return this.transformPosition(m,p);for(var g=u.iterator(this.ops),w=u.iterator(m.ops),_=new d;g.hasNext()||w.hasNext();)if(g.peekType()==="insert"&&(p||w.peekType()!=="insert"))_.retain(u.length(g.next()));else if(w.peekType()==="insert")_.push(w.next());else{var A=Math.min(g.peekLength(),w.peekLength()),v=g.next(A),E=w.next(A);if(v.delete)continue;E.delete?_.push(E):_.retain(A,u.attributes.transform(v.attributes,E.attributes,p))}return _.chop()},d.prototype.transformPosition=function(m,p){p=!!p;for(var g=u.iterator(this.ops),w=0;g.hasNext()&&w<=m;){var _=g.peekLength(),A=g.peekType();if(g.next(),A==="delete"){m-=Math.min(_,m-w);continue}else A==="insert"&&(w<m||!p)&&(m+=_);w+=_}return m},t.exports=d},function(t,n){var r=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=function(g){return typeof Array.isArray=="function"?Array.isArray(g):s.call(g)==="[object Array]"},h=function(g){if(!g||s.call(g)!=="[object Object]")return!1;var w=r.call(g,"constructor"),_=g.constructor&&g.constructor.prototype&&r.call(g.constructor.prototype,"isPrototypeOf");if(g.constructor&&!w&&!_)return!1;var A;for(A in g);return typeof A>"u"||r.call(g,A)},d=function(g,w){o&&w.name==="__proto__"?o(g,w.name,{enumerable:!0,configurable:!0,value:w.newValue,writable:!0}):g[w.name]=w.newValue},m=function(g,w){if(w==="__proto__")if(r.call(g,w)){if(a)return a(g,w).value}else return;return g[w]};t.exports=function p(){var g,w,_,A,v,E,I=arguments[0],S=1,R=arguments.length,F=!1;for(typeof I=="boolean"&&(F=I,I=arguments[1]||{},S=2),(I==null||typeof I!="object"&&typeof I!="function")&&(I={});S<R;++S)if(g=arguments[S],g!=null)for(w in g)_=m(I,w),A=m(g,w),I!==A&&(F&&A&&(h(A)||(v=u(A)))?(v?(v=!1,E=_&&u(_)?_:[]):E=_&&h(_)?_:{},d(I,{name:w,newValue:p(F,E,A)})):typeof A<"u"&&d(I,{name:w,newValue:A}));return I}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var s=function(){function N(L,M){for(var $=0;$<M.length;$++){var Q=M[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(L,Q.key,Q)}}return function(L,M,$){return M&&N(L.prototype,M),$&&N(L,$),L}}(),o=function N(L,M,$){L===null&&(L=Function.prototype);var Q=Object.getOwnPropertyDescriptor(L,M);if(Q===void 0){var re=Object.getPrototypeOf(L);return re===null?void 0:N(re,M,$)}else{if("value"in Q)return Q.value;var ee=Q.get;return ee===void 0?void 0:ee.call($)}},a=r(3),u=I(a),h=r(2),d=I(h),m=r(0),p=I(m),g=r(16),w=I(g),_=r(6),A=I(_),v=r(7),E=I(v);function I(N){return N&&N.__esModule?N:{default:N}}function S(N,L){if(!(N instanceof L))throw new TypeError("Cannot call a class as a function")}function R(N,L){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:N}function F(N,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);N.prototype=Object.create(L&&L.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(N,L):N.__proto__=L)}var k=1,T=function(N){F(L,N);function L(){return S(this,L),R(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return s(L,[{key:"attach",value:function(){o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function($,Q){var re=p.default.query($,p.default.Scope.BLOCK_ATTRIBUTE);re!=null&&this.attributes.attribute(re,Q)}},{key:"formatAt",value:function($,Q,re,ee){this.format(re,ee)}},{key:"insertAt",value:function($,Q,re){if(typeof Q=="string"&&Q.endsWith(`
`)){var ee=p.default.create(D.blotName);this.parent.insertBefore(ee,$===0?this:this.next),ee.insertAt(0,Q.slice(0,-1))}else o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertAt",this).call(this,$,Q,re)}}]),L}(p.default.Embed);T.scope=p.default.Scope.BLOCK_BLOT;var D=function(N){F(L,N);function L(M){S(this,L);var $=R(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,M));return $.cache={},$}return s(L,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function($,Q){return Q.length()===0?$:$.insert(Q.value(),P(Q))},new d.default).insert(`
`,P(this))),this.cache.delta}},{key:"deleteAt",value:function($,Q){o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"deleteAt",this).call(this,$,Q),this.cache={}}},{key:"formatAt",value:function($,Q,re,ee){Q<=0||(p.default.query(re,p.default.Scope.BLOCK)?$+Q===this.length()&&this.format(re,ee):o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"formatAt",this).call(this,$,Math.min(Q,this.length()-$-1),re,ee),this.cache={})}},{key:"insertAt",value:function($,Q,re){if(re!=null)return o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertAt",this).call(this,$,Q,re);if(Q.length!==0){var ee=Q.split(`
`),ue=ee.shift();ue.length>0&&($<this.length()-1||this.children.tail==null?o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertAt",this).call(this,Math.min($,this.length()-1),ue):this.children.tail.insertAt(this.children.tail.length(),ue),this.cache={});var Y=this;ee.reduce(function(J,q){return Y=Y.split(J,!0),Y.insertAt(0,q),q.length},$+ue.length)}}},{key:"insertBefore",value:function($,Q){var re=this.children.head;o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertBefore",this).call(this,$,Q),re instanceof w.default&&re.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"length",this).call(this)+k),this.cache.length}},{key:"moveChildren",value:function($,Q){o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"moveChildren",this).call(this,$,Q),this.cache={}}},{key:"optimize",value:function($){o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,$),this.cache={}}},{key:"path",value:function($){return o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"path",this).call(this,$,!0)}},{key:"removeChild",value:function($){o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"removeChild",this).call(this,$),this.cache={}}},{key:"split",value:function($){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Q&&($===0||$>=this.length()-k)){var re=this.clone();return $===0?(this.parent.insertBefore(re,this),this):(this.parent.insertBefore(re,this.next),re)}else{var ee=o(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"split",this).call(this,$,Q);return this.cache={},ee}}}]),L}(p.default.Block);D.blotName="block",D.tagName="P",D.defaultChild="break",D.allowedChildren=[A.default,p.default.Embed,E.default];function P(N){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return N==null||(typeof N.formats=="function"&&(L=(0,u.default)(L,N.formats())),N.parent==null||N.parent.blotName=="scroll"||N.parent.statics.scope!==N.statics.scope)?L:P(N.parent,L)}n.bubbleFormats=P,n.BlockEmbed=T,n.default=D},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},o=function(){function Y(J,q){var H=[],G=!0,le=!1,se=void 0;try{for(var X=J[Symbol.iterator](),ne;!(G=(ne=X.next()).done)&&(H.push(ne.value),!(q&&H.length===q));G=!0);}catch(te){le=!0,se=te}finally{try{!G&&X.return&&X.return()}finally{if(le)throw se}}return H}return function(J,q){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return Y(J,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function Y(J,q){for(var H=0;H<q.length;H++){var G=q[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(J,G.key,G)}}return function(J,q,H){return q&&Y(J.prototype,q),H&&Y(J,H),J}}();r(50);var u=r(2),h=P(u),d=r(14),m=P(d),p=r(8),g=P(p),w=r(9),_=P(w),A=r(0),v=P(A),E=r(15),I=P(E),S=r(3),R=P(S),F=r(10),k=P(F),T=r(34),D=P(T);function P(Y){return Y&&Y.__esModule?Y:{default:Y}}function N(Y,J,q){return J in Y?Object.defineProperty(Y,J,{value:q,enumerable:!0,configurable:!0,writable:!0}):Y[J]=q,Y}function L(Y,J){if(!(Y instanceof J))throw new TypeError("Cannot call a class as a function")}var M=(0,k.default)("quill"),$=function(){a(Y,null,[{key:"debug",value:function(q){q===!0&&(q="log"),k.default.level(q)}},{key:"find",value:function(q){return q.__quill||v.default.find(q)}},{key:"import",value:function(q){return this.imports[q]==null&&M.error("Cannot import "+q+". Are you sure it was registered?"),this.imports[q]}},{key:"register",value:function(q,H){var G=this,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof q!="string"){var se=q.attrName||q.blotName;typeof se=="string"?this.register("formats/"+se,q,H):Object.keys(q).forEach(function(X){G.register(X,q[X],H)})}else this.imports[q]!=null&&!le&&M.warn("Overwriting "+q+" with",H),this.imports[q]=H,(q.startsWith("blots/")||q.startsWith("formats/"))&&H.blotName!=="abstract"?v.default.register(H):q.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]);function Y(J){var q=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(this,Y),this.options=Q(J,H),this.container=this.options.container,this.container==null)return M.error("Invalid Quill container",J);this.options.debug&&Y.debug(this.options.debug);var G=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new I.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,function(se){se===g.default.events.TEXT_CHANGE&&q.root.classList.toggle("ql-blank",q.editor.isBlank())}),this.emitter.on(g.default.events.SCROLL_UPDATE,function(se,X){var ne=q.selection.lastRange,te=ne&&ne.length===0?ne.index:void 0;re.call(q,function(){return q.editor.update(null,X,te)},se)});var le=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+G+"<p><br></p></div>");this.setContents(le),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(Y,[{key:"addContainer",value:function(q){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof q=="string"){var G=q;q=document.createElement("div"),q.classList.add(G)}return this.container.insertBefore(q,H),q}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(q,H,G){var le=this,se=ee(q,H,G),X=o(se,4);return q=X[0],H=X[1],G=X[3],re.call(this,function(){return le.editor.deleteText(q,H)},G,q,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(q),this.container.classList.toggle("ql-disabled",!q)}},{key:"focus",value:function(){var q=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=q,this.scrollIntoView()}},{key:"format",value:function(q,H){var G=this,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;return re.call(this,function(){var se=G.getSelection(!0),X=new h.default;if(se==null)return X;if(v.default.query(q,v.default.Scope.BLOCK))X=G.editor.formatLine(se.index,se.length,N({},q,H));else{if(se.length===0)return G.selection.format(q,H),X;X=G.editor.formatText(se.index,se.length,N({},q,H))}return G.setSelection(se,g.default.sources.SILENT),X},le)}},{key:"formatLine",value:function(q,H,G,le,se){var X=this,ne=void 0,te=ee(q,H,G,le,se),ae=o(te,4);return q=ae[0],H=ae[1],ne=ae[2],se=ae[3],re.call(this,function(){return X.editor.formatLine(q,H,ne)},se,q,0)}},{key:"formatText",value:function(q,H,G,le,se){var X=this,ne=void 0,te=ee(q,H,G,le,se),ae=o(te,4);return q=ae[0],H=ae[1],ne=ae[2],se=ae[3],re.call(this,function(){return X.editor.formatText(q,H,ne)},se,q,0)}},{key:"getBounds",value:function(q){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,G=void 0;typeof q=="number"?G=this.selection.getBounds(q,H):G=this.selection.getBounds(q.index,q.length);var le=this.container.getBoundingClientRect();return{bottom:G.bottom-le.top,height:G.height,left:G.left-le.left,right:G.right-le.left,top:G.top-le.top,width:G.width}}},{key:"getContents",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,G=ee(q,H),le=o(G,2);return q=le[0],H=le[1],this.editor.getContents(q,H)}},{key:"getFormat",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof q=="number"?this.editor.getFormat(q,H):this.editor.getFormat(q.index,q.length)}},{key:"getIndex",value:function(q){return q.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(q){return this.scroll.leaf(q)}},{key:"getLine",value:function(q){return this.scroll.line(q)}},{key:"getLines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof q!="number"?this.scroll.lines(q.index,q.length):this.scroll.lines(q,H)}},{key:"getModule",value:function(q){return this.theme.modules[q]}},{key:"getSelection",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return q&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,G=ee(q,H),le=o(G,2);return q=le[0],H=le[1],this.editor.getText(q,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(q,H,G){var le=this,se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Y.sources.API;return re.call(this,function(){return le.editor.insertEmbed(q,H,G)},se,q)}},{key:"insertText",value:function(q,H,G,le,se){var X=this,ne=void 0,te=ee(q,0,G,le,se),ae=o(te,4);return q=ae[0],ne=ae[2],se=ae[3],re.call(this,function(){return X.editor.insertText(q,H,ne)},se,q,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(q,H,G){this.clipboard.dangerouslyPasteHTML(q,H,G)}},{key:"removeFormat",value:function(q,H,G){var le=this,se=ee(q,H,G),X=o(se,4);return q=X[0],H=X[1],G=X[3],re.call(this,function(){return le.editor.removeFormat(q,H)},G,q)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(q){var H=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return re.call(this,function(){q=new h.default(q);var le=H.getLength(),se=H.editor.deleteText(0,le),X=H.editor.applyDelta(q),ne=X.ops[X.ops.length-1];ne!=null&&typeof ne.insert=="string"&&ne.insert[ne.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),X.delete(1));var te=se.compose(X);return te},G)}},{key:"setSelection",value:function(q,H,G){if(q==null)this.selection.setRange(null,H||Y.sources.API);else{var le=ee(q,H,G),se=o(le,4);q=se[0],H=se[1],G=se[3],this.selection.setRange(new E.Range(q,H),G),G!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(q){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API,G=new h.default().insert(q);return this.setContents(G,H)}},{key:"update",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,H=this.scroll.update(q);return this.selection.update(q),H}},{key:"updateContents",value:function(q){var H=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return re.call(this,function(){return q=new h.default(q),H.editor.applyDelta(q,G)},G,!0)}}]),Y}();$.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},$.events=g.default.events,$.sources=g.default.sources,$.version="1.3.7",$.imports={delta:h.default,parchment:v.default,"core/module":_.default,"core/theme":D.default};function Q(Y,J){if(J=(0,R.default)(!0,{container:Y,modules:{clipboard:!0,keyboard:!0,history:!0}},J),!J.theme||J.theme===$.DEFAULTS.theme)J.theme=D.default;else if(J.theme=$.import("themes/"+J.theme),J.theme==null)throw new Error("Invalid theme "+J.theme+". Did you register it?");var q=(0,R.default)(!0,{},J.theme.DEFAULTS);[q,J].forEach(function(le){le.modules=le.modules||{},Object.keys(le.modules).forEach(function(se){le.modules[se]===!0&&(le.modules[se]={})})});var H=Object.keys(q.modules).concat(Object.keys(J.modules)),G=H.reduce(function(le,se){var X=$.import("modules/"+se);return X==null?M.error("Cannot load "+se+" module. Are you sure you registered it?"):le[se]=X.DEFAULTS||{},le},{});return J.modules!=null&&J.modules.toolbar&&J.modules.toolbar.constructor!==Object&&(J.modules.toolbar={container:J.modules.toolbar}),J=(0,R.default)(!0,{},$.DEFAULTS,{modules:G},q,J),["bounds","container","scrollingContainer"].forEach(function(le){typeof J[le]=="string"&&(J[le]=document.querySelector(J[le]))}),J.modules=Object.keys(J.modules).reduce(function(le,se){return J.modules[se]&&(le[se]=J.modules[se]),le},{}),J}function re(Y,J,q,H){if(this.options.strict&&!this.isEnabled()&&J===g.default.sources.USER)return new h.default;var G=q==null?null:this.getSelection(),le=this.editor.delta,se=Y();if(G!=null&&(q===!0&&(q=G.index),H==null?G=ue(G,se,J):H!==0&&(G=ue(G,q,H,J)),this.setSelection(G,g.default.sources.SILENT)),se.length()>0){var X,ne=[g.default.events.TEXT_CHANGE,se,le,J];if((X=this.emitter).emit.apply(X,[g.default.events.EDITOR_CHANGE].concat(ne)),J!==g.default.sources.SILENT){var te;(te=this.emitter).emit.apply(te,ne)}}return se}function ee(Y,J,q,H,G){var le={};return typeof Y.index=="number"&&typeof Y.length=="number"?typeof J!="number"?(G=H,H=q,q=J,J=Y.length,Y=Y.index):(J=Y.length,Y=Y.index):typeof J!="number"&&(G=H,H=q,q=J,J=0),(typeof q>"u"?"undefined":s(q))==="object"?(le=q,G=H):typeof q=="string"&&(H!=null?le[q]=H:G=q),G=G||g.default.sources.API,[Y,J,le,G]}function ue(Y,J,q,H){if(Y==null)return null;var G=void 0,le=void 0;if(J instanceof h.default){var se=[Y.index,Y.index+Y.length].map(function(ae){return J.transformPosition(ae,H!==g.default.sources.USER)}),X=o(se,2);G=X[0],le=X[1]}else{var ne=[Y.index,Y.index+Y.length].map(function(ae){return ae<J||ae===J&&H===g.default.sources.USER?ae:q>=0?ae+q:Math.max(J,ae+q)}),te=o(ne,2);G=te[0],le=te[1]}return new E.Range(G,le-G)}n.expandConfig=Q,n.overload=ee,n.default=$},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function A(v,E){for(var I=0;I<E.length;I++){var S=E[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,E,I){return E&&A(v.prototype,E),I&&A(v,I),v}}(),o=function A(v,E,I){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,E);if(S===void 0){var R=Object.getPrototypeOf(v);return R===null?void 0:A(R,E,I)}else{if("value"in S)return S.value;var F=S.get;return F===void 0?void 0:F.call(I)}},a=r(7),u=m(a),h=r(0),d=m(h);function m(A){return A&&A.__esModule?A:{default:A}}function p(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function g(A,v){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:A}function w(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);A.prototype=Object.create(v&&v.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(A,v):A.__proto__=v)}var _=function(A){w(v,A);function v(){return p(this,v),g(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"formatAt",value:function(I,S,R,F){if(v.compare(this.statics.blotName,R)<0&&d.default.query(R,d.default.Scope.BLOT)){var k=this.isolate(I,S);F&&k.wrap(R,F)}else o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,I,S,R,F)}},{key:"optimize",value:function(I){if(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,I),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(I,S){var R=v.order.indexOf(I),F=v.order.indexOf(S);return R>=0||F>=0?R-F:I===S?0:I<S?-1:1}}]),v}(d.default.Inline);_.allowedChildren=[_,d.default.Embed,u.default],_.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(0),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var m=function(p){d(g,p);function g(){return u(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default.Text);n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function E(I,S){for(var R=0;R<S.length;R++){var F=S[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,F.key,F)}}return function(I,S,R){return S&&E(I.prototype,S),R&&E(I,R),I}}(),o=function E(I,S,R){I===null&&(I=Function.prototype);var F=Object.getOwnPropertyDescriptor(I,S);if(F===void 0){var k=Object.getPrototypeOf(I);return k===null?void 0:E(k,S,R)}else{if("value"in F)return F.value;var T=F.get;return T===void 0?void 0:T.call(R)}},a=r(54),u=m(a),h=r(10),d=m(h);function m(E){return E&&E.__esModule?E:{default:E}}function p(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function g(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function w(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var _=(0,d.default)("quill:events"),A=["selectionchange","mousedown","mouseup","click"];A.forEach(function(E){document.addEventListener(E,function(){for(var I=arguments.length,S=Array(I),R=0;R<I;R++)S[R]=arguments[R];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(F){if(F.__quill&&F.__quill.emitter){var k;(k=F.__quill.emitter).handleDOM.apply(k,S)}})})});var v=function(E){w(I,E);function I(){p(this,I);var S=g(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));return S.listeners={},S.on("error",_.error),S}return s(I,[{key:"emit",value:function(){_.log.apply(_,arguments),o(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(R){for(var F=arguments.length,k=Array(F>1?F-1:0),T=1;T<F;T++)k[T-1]=arguments[T];(this.listeners[R.type]||[]).forEach(function(D){var P=D.node,N=D.handler;(R.target===P||P.contains(R.target))&&N.apply(void 0,[R].concat(k))})}},{key:"listenDOM",value:function(R,F,k){this.listeners[R]||(this.listeners[R]=[]),this.listeners[R].push({node:F,handler:k})}}]),I}(u.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},n.default=v},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});function s(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function a(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=u,this.options=h};o.DEFAULTS={},n.default=o},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(h){if(s.indexOf(h)<=s.indexOf(o)){for(var d,m=arguments.length,p=Array(m>1?m-1:0),g=1;g<m;g++)p[g-1]=arguments[g];(d=console)[h].apply(d,p)}}function u(h){return s.reduce(function(d,m){return d[m]=a.bind(console,m,h),d},{})}a.level=u.level=function(h){o=h},n.default=u},function(t,n,r){var s=Array.prototype.slice,o=r(52),a=r(53),u=t.exports=function(p,g,w){return w||(w={}),p===g?!0:p instanceof Date&&g instanceof Date?p.getTime()===g.getTime():!p||!g||typeof p!="object"&&typeof g!="object"?w.strict?p===g:p==g:m(p,g,w)};function h(p){return p==null}function d(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function m(p,g,w){var _,A;if(h(p)||h(g)||p.prototype!==g.prototype)return!1;if(a(p))return a(g)?(p=s.call(p),g=s.call(g),u(p,g,w)):!1;if(d(p)){if(!d(g)||p.length!==g.length)return!1;for(_=0;_<p.length;_++)if(p[_]!==g[_])return!1;return!0}try{var v=o(p),E=o(g)}catch{return!1}if(v.length!=E.length)return!1;for(v.sort(),E.sort(),_=v.length-1;_>=0;_--)if(v[_]!=E[_])return!1;for(_=v.length-1;_>=0;_--)if(A=v[_],!u(p[A],g[A],w))return!1;return typeof p==typeof g}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),o=function(){function a(u,h,d){d===void 0&&(d={}),this.attrName=u,this.keyName=h;var m=s.Scope.TYPE&s.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&s.Scope.LEVEL|m:this.scope=s.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return a.keys=function(u){return[].map.call(u.attributes,function(h){return h.name})},a.prototype.add=function(u,h){return this.canAdd(u,h)?(u.setAttribute(this.keyName,h),!0):!1},a.prototype.canAdd=function(u,h){var d=s.query(u,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},a.prototype.remove=function(u){u.removeAttribute(this.keyName)},a.prototype.value=function(u){var h=u.getAttribute(this.keyName);return this.canAdd(u,h)&&h?h:""},a}();n.default=o},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var s=function(){function T(D,P){var N=[],L=!0,M=!1,$=void 0;try{for(var Q=D[Symbol.iterator](),re;!(L=(re=Q.next()).done)&&(N.push(re.value),!(P&&N.length===P));L=!0);}catch(ee){M=!0,$=ee}finally{try{!L&&Q.return&&Q.return()}finally{if(M)throw $}}return N}return function(D,P){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return T(D,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(D,P){for(var N=0;N<P.length;N++){var L=P[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}return function(D,P,N){return P&&T(D.prototype,P),N&&T(D,N),D}}(),a=function T(D,P,N){D===null&&(D=Function.prototype);var L=Object.getOwnPropertyDescriptor(D,P);if(L===void 0){var M=Object.getPrototypeOf(D);return M===null?void 0:T(M,P,N)}else{if("value"in L)return L.value;var $=L.get;return $===void 0?void 0:$.call(N)}},u=r(2),h=E(u),d=r(0),m=E(d),p=r(4),g=E(p),w=r(6),_=E(w),A=r(7),v=E(A);function E(T){return T&&T.__esModule?T:{default:T}}function I(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}function S(T,D){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:T}function R(T,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);T.prototype=Object.create(D&&D.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(T,D):T.__proto__=D)}var F=function(T){R(D,T);function D(){return I(this,D),S(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return D}(_.default);F.blotName="code",F.tagName="CODE";var k=function(T){R(D,T);function D(){return I(this,D),S(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return o(D,[{key:"delta",value:function(){var N=this,L=this.domNode.textContent;return L.endsWith(`
`)&&(L=L.slice(0,-1)),L.split(`
`).reduce(function(M,$){return M.insert($).insert(`
`,N.formats())},new h.default)}},{key:"format",value:function(N,L){if(!(N===this.statics.blotName&&L)){var M=this.descendant(v.default,this.length()-1),$=s(M,1),Q=$[0];Q!=null&&Q.deleteAt(Q.length()-1,1),a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"format",this).call(this,N,L)}}},{key:"formatAt",value:function(N,L,M,$){if(L!==0&&!(m.default.query(M,m.default.Scope.BLOCK)==null||M===this.statics.blotName&&$===this.statics.formats(this.domNode))){var Q=this.newlineIndex(N);if(!(Q<0||Q>=N+L)){var re=this.newlineIndex(N,!0)+1,ee=Q-re+1,ue=this.isolate(re,ee),Y=ue.next;ue.format(M,$),Y instanceof D&&Y.formatAt(0,N-re+L-ee,M,$)}}}},{key:"insertAt",value:function(N,L,M){if(M==null){var $=this.descendant(v.default,N),Q=s($,2),re=Q[0],ee=Q[1];re.insertAt(ee,L)}}},{key:"length",value:function(){var N=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?N:N+1}},{key:"newlineIndex",value:function(N){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L)return this.domNode.textContent.slice(0,N).lastIndexOf(`
`);var M=this.domNode.textContent.slice(N).indexOf(`
`);return M>-1?N+M:-1}},{key:"optimize",value:function(N){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,N);var L=this.next;L!=null&&L.prev===this&&L.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===L.statics.formats(L.domNode)&&(L.optimize(N),L.moveChildren(this),L.remove())}},{key:"replace",value:function(N){a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replace",this).call(this,N),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(L){var M=m.default.find(L);M==null?L.parentNode.removeChild(L):M instanceof m.default.Embed?M.remove():M.unwrap()})}}],[{key:"create",value:function(N){var L=a(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,N);return L.setAttribute("spellcheck",!1),L}},{key:"formats",value:function(){return!0}}]),D}(g.default);k.blotName="code-block",k.tagName="PRE",k.TAB="  ",n.Code=F,n.default=k},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},o=function(){function Y(J,q){var H=[],G=!0,le=!1,se=void 0;try{for(var X=J[Symbol.iterator](),ne;!(G=(ne=X.next()).done)&&(H.push(ne.value),!(q&&H.length===q));G=!0);}catch(te){le=!0,se=te}finally{try{!G&&X.return&&X.return()}finally{if(le)throw se}}return H}return function(J,q){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return Y(J,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function Y(J,q){for(var H=0;H<q.length;H++){var G=q[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(J,G.key,G)}}return function(J,q,H){return q&&Y(J.prototype,q),H&&Y(J,H),J}}(),u=r(2),h=L(u),d=r(20),m=L(d),p=r(0),g=L(p),w=r(13),_=L(w),A=r(24),v=L(A),E=r(4),I=L(E),S=r(16),R=L(S),F=r(21),k=L(F),T=r(11),D=L(T),P=r(3),N=L(P);function L(Y){return Y&&Y.__esModule?Y:{default:Y}}function M(Y,J,q){return J in Y?Object.defineProperty(Y,J,{value:q,enumerable:!0,configurable:!0,writable:!0}):Y[J]=q,Y}function $(Y,J){if(!(Y instanceof J))throw new TypeError("Cannot call a class as a function")}var Q=/^[ -~]*$/,re=function(){function Y(J){$(this,Y),this.scroll=J,this.delta=this.getDelta()}return a(Y,[{key:"applyDelta",value:function(q){var H=this,G=!1;this.scroll.update();var le=this.scroll.length();return this.scroll.batchStart(),q=ue(q),q.reduce(function(se,X){var ne=X.retain||X.delete||X.insert.length||1,te=X.attributes||{};if(X.insert!=null){if(typeof X.insert=="string"){var ae=X.insert;ae.endsWith(`
`)&&G&&(G=!1,ae=ae.slice(0,-1)),se>=le&&!ae.endsWith(`
`)&&(G=!0),H.scroll.insertAt(se,ae);var de=H.scroll.line(se),ye=o(de,2),xe=ye[0],Oe=ye[1],Fe=(0,N.default)({},(0,E.bubbleFormats)(xe));if(xe instanceof I.default){var Be=xe.descendant(g.default.Leaf,Oe),$e=o(Be,1),mt=$e[0];Fe=(0,N.default)(Fe,(0,E.bubbleFormats)(mt))}te=m.default.attributes.diff(Fe,te)||{}}else if(s(X.insert)==="object"){var fe=Object.keys(X.insert)[0];if(fe==null)return se;H.scroll.insertAt(se,fe,X.insert[fe])}le+=ne}return Object.keys(te).forEach(function(ve){H.scroll.formatAt(se,ne,ve,te[ve])}),se+ne},0),q.reduce(function(se,X){return typeof X.delete=="number"?(H.scroll.deleteAt(se,X.delete),se):se+(X.retain||X.insert.length||1)},0),this.scroll.batchEnd(),this.update(q)}},{key:"deleteText",value:function(q,H){return this.scroll.deleteAt(q,H),this.update(new h.default().retain(q).delete(H))}},{key:"formatLine",value:function(q,H){var G=this,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(le).forEach(function(se){if(!(G.scroll.whitelist!=null&&!G.scroll.whitelist[se])){var X=G.scroll.lines(q,Math.max(H,1)),ne=H;X.forEach(function(te){var ae=te.length();if(!(te instanceof _.default))te.format(se,le[se]);else{var de=q-te.offset(G.scroll),ye=te.newlineIndex(de+ne)-de+1;te.formatAt(de,ye,se,le[se])}ne-=ae})}}),this.scroll.optimize(),this.update(new h.default().retain(q).retain(H,(0,k.default)(le)))}},{key:"formatText",value:function(q,H){var G=this,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(le).forEach(function(se){G.scroll.formatAt(q,H,se,le[se])}),this.update(new h.default().retain(q).retain(H,(0,k.default)(le)))}},{key:"getContents",value:function(q,H){return this.delta.slice(q,q+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(q,H){return q.concat(H.delta())},new h.default)}},{key:"getFormat",value:function(q){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,G=[],le=[];H===0?this.scroll.path(q).forEach(function(X){var ne=o(X,1),te=ne[0];te instanceof I.default?G.push(te):te instanceof g.default.Leaf&&le.push(te)}):(G=this.scroll.lines(q,H),le=this.scroll.descendants(g.default.Leaf,q,H));var se=[G,le].map(function(X){if(X.length===0)return{};for(var ne=(0,E.bubbleFormats)(X.shift());Object.keys(ne).length>0;){var te=X.shift();if(te==null)return ne;ne=ee((0,E.bubbleFormats)(te),ne)}return ne});return N.default.apply(N.default,se)}},{key:"getText",value:function(q,H){return this.getContents(q,H).filter(function(G){return typeof G.insert=="string"}).map(function(G){return G.insert}).join("")}},{key:"insertEmbed",value:function(q,H,G){return this.scroll.insertAt(q,H,G),this.update(new h.default().retain(q).insert(M({},H,G)))}},{key:"insertText",value:function(q,H){var G=this,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(q,H),Object.keys(le).forEach(function(se){G.scroll.formatAt(q,H.length,se,le[se])}),this.update(new h.default().retain(q).insert(H,(0,k.default)(le)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var q=this.scroll.children.head;return q.statics.blotName!==I.default.blotName||q.children.length>1?!1:q.children.head instanceof R.default}},{key:"removeFormat",value:function(q,H){var G=this.getText(q,H),le=this.scroll.line(q+H),se=o(le,2),X=se[0],ne=se[1],te=0,ae=new h.default;X!=null&&(X instanceof _.default?te=X.newlineIndex(ne)-ne+1:te=X.length()-ne,ae=X.delta().slice(ne,ne+te-1).insert(`
`));var de=this.getContents(q,H+te),ye=de.diff(new h.default().insert(G).concat(ae)),xe=new h.default().retain(q).concat(ye);return this.applyDelta(xe)}},{key:"update",value:function(q){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,le=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(Q)&&g.default.find(H[0].target)){var se=g.default.find(H[0].target),X=(0,E.bubbleFormats)(se),ne=se.offset(this.scroll),te=H[0].oldValue.replace(v.default.CONTENTS,""),ae=new h.default().insert(te),de=new h.default().insert(se.value()),ye=new h.default().retain(ne).concat(ae.diff(de,G));q=ye.reduce(function(xe,Oe){return Oe.insert?xe.insert(Oe.insert,X):xe.push(Oe)},new h.default),this.delta=le.compose(q)}else this.delta=this.getDelta(),(!q||!(0,D.default)(le.compose(q),this.delta))&&(q=le.diff(this.delta,G));return q}}]),Y}();function ee(Y,J){return Object.keys(J).reduce(function(q,H){return Y[H]==null||(J[H]===Y[H]?q[H]=J[H]:Array.isArray(J[H])?J[H].indexOf(Y[H])<0&&(q[H]=J[H].concat([Y[H]])):q[H]=[J[H],Y[H]]),q},{})}function ue(Y){return Y.reduce(function(J,q){if(q.insert===1){var H=(0,k.default)(q.attributes);return delete H.image,J.insert({image:q.attributes.image},H)}if(q.attributes!=null&&(q.attributes.list===!0||q.attributes.bullet===!0)&&(q=(0,k.default)(q),q.attributes.list?q.attributes.list="ordered":(q.attributes.list="bullet",delete q.attributes.bullet)),typeof q.insert=="string"){var G=q.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return J.insert(G,q.attributes)}return J.push(q)},new h.default)}n.default=re},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var s=function(){function T(D,P){var N=[],L=!0,M=!1,$=void 0;try{for(var Q=D[Symbol.iterator](),re;!(L=(re=Q.next()).done)&&(N.push(re.value),!(P&&N.length===P));L=!0);}catch(ee){M=!0,$=ee}finally{try{!L&&Q.return&&Q.return()}finally{if(M)throw $}}return N}return function(D,P){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return T(D,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(D,P){for(var N=0;N<P.length;N++){var L=P[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}return function(D,P,N){return P&&T(D.prototype,P),N&&T(D,N),D}}(),a=r(0),u=v(a),h=r(21),d=v(h),m=r(11),p=v(m),g=r(8),w=v(g),_=r(10),A=v(_);function v(T){return T&&T.__esModule?T:{default:T}}function E(T){if(Array.isArray(T)){for(var D=0,P=Array(T.length);D<T.length;D++)P[D]=T[D];return P}else return Array.from(T)}function I(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}var S=(0,A.default)("quill:selection"),R=function T(D){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;I(this,T),this.index=D,this.length=P},F=function(){function T(D,P){var N=this;I(this,T),this.emitter=P,this.scroll=D,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new R(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){N.mouseDown||setTimeout(N.update.bind(N,w.default.sources.USER),1)}),this.emitter.on(w.default.events.EDITOR_CHANGE,function(L,M){L===w.default.events.TEXT_CHANGE&&M.length()>0&&N.update(w.default.sources.SILENT)}),this.emitter.on(w.default.events.SCROLL_BEFORE_UPDATE,function(){if(N.hasFocus()){var L=N.getNativeRange();L!=null&&L.start.node!==N.cursor.textNode&&N.emitter.once(w.default.events.SCROLL_UPDATE,function(){try{N.setNativeRange(L.start.node,L.start.offset,L.end.node,L.end.offset)}catch{}})}}),this.emitter.on(w.default.events.SCROLL_OPTIMIZE,function(L,M){if(M.range){var $=M.range,Q=$.startNode,re=$.startOffset,ee=$.endNode,ue=$.endOffset;N.setNativeRange(Q,re,ee,ue)}}),this.update(w.default.sources.SILENT)}return o(T,[{key:"handleComposition",value:function(){var P=this;this.root.addEventListener("compositionstart",function(){P.composing=!0}),this.root.addEventListener("compositionend",function(){if(P.composing=!1,P.cursor.parent){var N=P.cursor.restore();if(!N)return;setTimeout(function(){P.setNativeRange(N.startNode,N.startOffset,N.endNode,N.endOffset)},1)}})}},{key:"handleDragging",value:function(){var P=this;this.emitter.listenDOM("mousedown",document.body,function(){P.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){P.mouseDown=!1,P.update(w.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(P,N){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[P])){this.scroll.update();var L=this.getNativeRange();if(!(L==null||!L.native.collapsed||u.default.query(P,u.default.Scope.BLOCK))){if(L.start.node!==this.cursor.textNode){var M=u.default.find(L.start.node,!1);if(M==null)return;if(M instanceof u.default.Leaf){var $=M.split(L.start.offset);M.parent.insertBefore(this.cursor,$)}else M.insertBefore(this.cursor,L.start.node);this.cursor.attach()}this.cursor.format(P,N),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,L=this.scroll.length();P=Math.min(P,L-1),N=Math.min(P+N,L-1)-P;var M=void 0,$=this.scroll.leaf(P),Q=s($,2),re=Q[0],ee=Q[1];if(re==null)return null;var ue=re.position(ee,!0),Y=s(ue,2);M=Y[0],ee=Y[1];var J=document.createRange();if(N>0){J.setStart(M,ee);var q=this.scroll.leaf(P+N),H=s(q,2);if(re=H[0],ee=H[1],re==null)return null;var G=re.position(ee,!0),le=s(G,2);return M=le[0],ee=le[1],J.setEnd(M,ee),J.getBoundingClientRect()}else{var se="left",X=void 0;return M instanceof Text?(ee<M.data.length?(J.setStart(M,ee),J.setEnd(M,ee+1)):(J.setStart(M,ee-1),J.setEnd(M,ee),se="right"),X=J.getBoundingClientRect()):(X=re.domNode.getBoundingClientRect(),ee>0&&(se="right")),{bottom:X.top+X.height,height:X.height,left:X[se],right:X[se],top:X.top,width:0}}}},{key:"getNativeRange",value:function(){var P=document.getSelection();if(P==null||P.rangeCount<=0)return null;var N=P.getRangeAt(0);if(N==null)return null;var L=this.normalizeNative(N);return S.info("getNativeRange",L),L}},{key:"getRange",value:function(){var P=this.getNativeRange();if(P==null)return[null,null];var N=this.normalizedToRange(P);return[N,P]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(P){var N=this,L=[[P.start.node,P.start.offset]];P.native.collapsed||L.push([P.end.node,P.end.offset]);var M=L.map(function(re){var ee=s(re,2),ue=ee[0],Y=ee[1],J=u.default.find(ue,!0),q=J.offset(N.scroll);return Y===0?q:J instanceof u.default.Container?q+J.length():q+J.index(ue,Y)}),$=Math.min(Math.max.apply(Math,E(M)),this.scroll.length()-1),Q=Math.min.apply(Math,[$].concat(E(M)));return new R(Q,$-Q)}},{key:"normalizeNative",value:function(P){if(!k(this.root,P.startContainer)||!P.collapsed&&!k(this.root,P.endContainer))return null;var N={start:{node:P.startContainer,offset:P.startOffset},end:{node:P.endContainer,offset:P.endOffset},native:P};return[N.start,N.end].forEach(function(L){for(var M=L.node,$=L.offset;!(M instanceof Text)&&M.childNodes.length>0;)if(M.childNodes.length>$)M=M.childNodes[$],$=0;else if(M.childNodes.length===$)M=M.lastChild,$=M instanceof Text?M.data.length:M.childNodes.length+1;else break;L.node=M,L.offset=$}),N}},{key:"rangeToNative",value:function(P){var N=this,L=P.collapsed?[P.index]:[P.index,P.index+P.length],M=[],$=this.scroll.length();return L.forEach(function(Q,re){Q=Math.min($-1,Q);var ee=void 0,ue=N.scroll.leaf(Q),Y=s(ue,2),J=Y[0],q=Y[1],H=J.position(q,re!==0),G=s(H,2);ee=G[0],q=G[1],M.push(ee,q)}),M.length<2&&(M=M.concat(M)),M}},{key:"scrollIntoView",value:function(P){var N=this.lastRange;if(N!=null){var L=this.getBounds(N.index,N.length);if(L!=null){var M=this.scroll.length()-1,$=this.scroll.line(Math.min(N.index,M)),Q=s($,1),re=Q[0],ee=re;if(N.length>0){var ue=this.scroll.line(Math.min(N.index+N.length,M)),Y=s(ue,1);ee=Y[0]}if(!(re==null||ee==null)){var J=P.getBoundingClientRect();L.top<J.top?P.scrollTop-=J.top-L.top:L.bottom>J.bottom&&(P.scrollTop+=L.bottom-J.bottom)}}}}},{key:"setNativeRange",value:function(P,N){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",P,N,L,M),!(P!=null&&(this.root.parentNode==null||P.parentNode==null||L.parentNode==null))){var Q=document.getSelection();if(Q!=null)if(P!=null){this.hasFocus()||this.root.focus();var re=(this.getNativeRange()||{}).native;if(re==null||$||P!==re.startContainer||N!==re.startOffset||L!==re.endContainer||M!==re.endOffset){P.tagName=="BR"&&(N=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode),L.tagName=="BR"&&(M=[].indexOf.call(L.parentNode.childNodes,L),L=L.parentNode);var ee=document.createRange();ee.setStart(P,N),ee.setEnd(L,M),Q.removeAllRanges(),Q.addRange(ee)}}else Q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof N=="string"&&(L=N,N=!1),S.info("setRange",P),P!=null){var M=this.rangeToNative(P);this.setNativeRange.apply(this,E(M).concat([N]))}else this.setNativeRange(null);this.update(L)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,N=this.lastRange,L=this.getRange(),M=s(L,2),$=M[0],Q=M[1];if(this.lastRange=$,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(N,this.lastRange)){var re;!this.composing&&Q!=null&&Q.native.collapsed&&Q.start.node!==this.cursor.textNode&&this.cursor.restore();var ee=[w.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(N),P];if((re=this.emitter).emit.apply(re,[w.default.events.EDITOR_CHANGE].concat(ee)),P!==w.default.sources.SILENT){var ue;(ue=this.emitter).emit.apply(ue,ee)}}}}]),T}();function k(T,D){try{D.parentNode}catch{return!1}return D instanceof Text&&(D=D.parentNode),T.contains(D)}n.Range=R,n.default=F},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(_,A){for(var v=0;v<A.length;v++){var E=A[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,A,v){return A&&w(_.prototype,A),v&&w(_,v),_}}(),o=function w(_,A,v){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,A);if(E===void 0){var I=Object.getPrototypeOf(_);return I===null?void 0:w(I,A,v)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(v)}},a=r(0),u=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function m(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function p(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){p(_,w);function _(){return d(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"insertInto",value:function(v,E){v.children.length===0?o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertInto",this).call(this,v,E):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),_}(u.default.Embed);g.blotName="break",g.tagName="BR",n.default=g},function(t,n,r){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var w in g)g.hasOwnProperty(w)&&(p[w]=g[w])};return function(p,g){m(p,g);function w(){this.constructor=p}p.prototype=g===null?Object.create(g):(w.prototype=g.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(44),a=r(30),u=r(1),h=function(m){s(p,m);function p(g){var w=m.call(this,g)||this;return w.build(),w}return p.prototype.appendChild=function(g){this.insertBefore(g)},p.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(g){g.attach()})},p.prototype.build=function(){var g=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(w){try{var _=d(w);g.insertBefore(_,g.children.head||void 0)}catch(A){if(A instanceof u.ParchmentError)return;throw A}})},p.prototype.deleteAt=function(g,w){if(g===0&&w===this.length())return this.remove();this.children.forEachAt(g,w,function(_,A,v){_.deleteAt(A,v)})},p.prototype.descendant=function(g,w){var _=this.children.find(w),A=_[0],v=_[1];return g.blotName==null&&g(A)||g.blotName!=null&&A instanceof g?[A,v]:A instanceof p?A.descendant(g,v):[null,-1]},p.prototype.descendants=function(g,w,_){w===void 0&&(w=0),_===void 0&&(_=Number.MAX_VALUE);var A=[],v=_;return this.children.forEachAt(w,_,function(E,I,S){(g.blotName==null&&g(E)||g.blotName!=null&&E instanceof g)&&A.push(E),E instanceof p&&(A=A.concat(E.descendants(g,I,v))),v-=S}),A},p.prototype.detach=function(){this.children.forEach(function(g){g.detach()}),m.prototype.detach.call(this)},p.prototype.formatAt=function(g,w,_,A){this.children.forEachAt(g,w,function(v,E,I){v.formatAt(E,I,_,A)})},p.prototype.insertAt=function(g,w,_){var A=this.children.find(g),v=A[0],E=A[1];if(v)v.insertAt(E,w,_);else{var I=_==null?u.create("text",w):u.create(w,_);this.appendChild(I)}},p.prototype.insertBefore=function(g,w){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(_){return g instanceof _}))throw new u.ParchmentError("Cannot insert "+g.statics.blotName+" into "+this.statics.blotName);g.insertInto(this,w)},p.prototype.length=function(){return this.children.reduce(function(g,w){return g+w.length()},0)},p.prototype.moveChildren=function(g,w){this.children.forEach(function(_){g.insertBefore(_,w)})},p.prototype.optimize=function(g){if(m.prototype.optimize.call(this,g),this.children.length===0)if(this.statics.defaultChild!=null){var w=u.create(this.statics.defaultChild);this.appendChild(w),w.optimize(g)}else this.remove()},p.prototype.path=function(g,w){w===void 0&&(w=!1);var _=this.children.find(g,w),A=_[0],v=_[1],E=[[this,g]];return A instanceof p?E.concat(A.path(v,w)):(A!=null&&E.push([A,v]),E)},p.prototype.removeChild=function(g){this.children.remove(g)},p.prototype.replace=function(g){g instanceof p&&g.moveChildren(this),m.prototype.replace.call(this,g)},p.prototype.split=function(g,w){if(w===void 0&&(w=!1),!w){if(g===0)return this;if(g===this.length())return this.next}var _=this.clone();return this.parent.insertBefore(_,this.next),this.children.forEachAt(g,this.length(),function(A,v,E){A=A.split(v,w),_.appendChild(A)}),_},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(g,w){var _=this,A=[],v=[];g.forEach(function(E){E.target===_.domNode&&E.type==="childList"&&(A.push.apply(A,E.addedNodes),v.push.apply(v,E.removedNodes))}),v.forEach(function(E){if(!(E.parentNode!=null&&E.tagName!=="IFRAME"&&document.body.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var I=u.find(E);I!=null&&(I.domNode.parentNode==null||I.domNode.parentNode===_.domNode)&&I.detach()}}),A.filter(function(E){return E.parentNode==_.domNode}).sort(function(E,I){return E===I?0:E.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(E){var I=null;E.nextSibling!=null&&(I=u.find(E.nextSibling));var S=d(E);(S.next!=I||S.next==null)&&(S.parent!=null&&S.parent.removeChild(_),_.insertBefore(S,I||void 0))})},p}(a.default);function d(m){var p=u.find(m);if(p==null)try{p=u.create(m)}catch{p=u.create(u.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(w){p.domNode.appendChild(w)}),m.parentNode&&m.parentNode.replaceChild(p.domNode,m),p.attach()}return p}n.default=h},function(t,n,r){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var w in g)g.hasOwnProperty(w)&&(p[w]=g[w])};return function(p,g){m(p,g);function w(){this.constructor=p}p.prototype=g===null?Object.create(g):(w.prototype=g.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(12),a=r(31),u=r(17),h=r(1),d=function(m){s(p,m);function p(g){var w=m.call(this,g)||this;return w.attributes=new a.default(w.domNode),w}return p.formats=function(g){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return g.tagName.toLowerCase()},p.prototype.format=function(g,w){var _=h.query(g);_ instanceof o.default?this.attributes.attribute(_,w):w&&_!=null&&(g!==this.statics.blotName||this.formats()[g]!==w)&&this.replaceWith(g,w)},p.prototype.formats=function(){var g=this.attributes.values(),w=this.statics.formats(this.domNode);return w!=null&&(g[this.statics.blotName]=w),g},p.prototype.replaceWith=function(g,w){var _=m.prototype.replaceWith.call(this,g,w);return this.attributes.copy(_),_},p.prototype.update=function(g,w){var _=this;m.prototype.update.call(this,g,w),g.some(function(A){return A.target===_.domNode&&A.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(g,w){var _=m.prototype.wrap.call(this,g,w);return _ instanceof p&&_.statics.scope===this.statics.scope&&this.attributes.move(_),_},p}(u.default);n.default=d},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){h(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(30),a=r(1),u=function(h){s(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.value=function(m){return!0},d.prototype.index=function(m,p){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},d.prototype.position=function(m,p){var g=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(g+=1),[this.parent.domNode,g]},d.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},d.scope=a.Scope.INLINE_BLOT,d}(o.default);n.default=u},function(t,n,r){var s=r(11),o=r(3),a={attributes:{compose:function(h,d,m){typeof h!="object"&&(h={}),typeof d!="object"&&(d={});var p=o(!0,{},d);m||(p=Object.keys(p).reduce(function(w,_){return p[_]!=null&&(w[_]=p[_]),w},{}));for(var g in h)h[g]!==void 0&&d[g]===void 0&&(p[g]=h[g]);return Object.keys(p).length>0?p:void 0},diff:function(h,d){typeof h!="object"&&(h={}),typeof d!="object"&&(d={});var m=Object.keys(h).concat(Object.keys(d)).reduce(function(p,g){return s(h[g],d[g])||(p[g]=d[g]===void 0?null:d[g]),p},{});return Object.keys(m).length>0?m:void 0},transform:function(h,d,m){if(typeof h!="object")return d;if(typeof d=="object"){if(!m)return d;var p=Object.keys(d).reduce(function(g,w){return h[w]===void 0&&(g[w]=d[w]),g},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(h){return new u(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function u(h){this.ops=h,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(h){h||(h=1/0);var d=this.ops[this.index];if(d){var m=this.offset,p=a.length(d);if(h>=p-m?(h=p-m,this.index+=1,this.offset=0):this.offset+=h,typeof d.delete=="number")return{delete:h};var g={};return d.attributes&&(g.attributes=d.attributes),typeof d.retain=="number"?g.retain=h:typeof d.insert=="string"?g.insert=d.insert.substr(m,h):g.insert=d.insert,g}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,d=this.index,m=this.next(),p=this.ops.slice(this.index);return this.offset=h,this.index=d,[m].concat(p)}else return[]},t.exports=a},function(t,n){var r=function(){function s(_,A){return A!=null&&_ instanceof A}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var u;try{u=Promise}catch{u=function(){}}function h(_,A,v,E,I){typeof A=="object"&&(v=A.depth,E=A.prototype,I=A.includeNonEnumerable,A=A.circular);var S=[],R=[],F=typeof Buffer<"u";typeof A>"u"&&(A=!0),typeof v>"u"&&(v=1/0);function k(T,D){if(T===null)return null;if(D===0)return T;var P,N;if(typeof T!="object")return T;if(s(T,o))P=new o;else if(s(T,a))P=new a;else if(s(T,u))P=new u(function(J,q){T.then(function(H){J(k(H,D-1))},function(H){q(k(H,D-1))})});else if(h.__isArray(T))P=[];else if(h.__isRegExp(T))P=new RegExp(T.source,w(T)),T.lastIndex&&(P.lastIndex=T.lastIndex);else if(h.__isDate(T))P=new Date(T.getTime());else{if(F&&Buffer.isBuffer(T))return Buffer.allocUnsafe?P=Buffer.allocUnsafe(T.length):P=new Buffer(T.length),T.copy(P),P;s(T,Error)?P=Object.create(T):typeof E>"u"?(N=Object.getPrototypeOf(T),P=Object.create(N)):(P=Object.create(E),N=E)}if(A){var L=S.indexOf(T);if(L!=-1)return R[L];S.push(T),R.push(P)}s(T,o)&&T.forEach(function(J,q){var H=k(q,D-1),G=k(J,D-1);P.set(H,G)}),s(T,a)&&T.forEach(function(J){var q=k(J,D-1);P.add(q)});for(var M in T){var $;N&&($=Object.getOwnPropertyDescriptor(N,M)),!($&&$.set==null)&&(P[M]=k(T[M],D-1))}if(Object.getOwnPropertySymbols)for(var Q=Object.getOwnPropertySymbols(T),M=0;M<Q.length;M++){var re=Q[M],ee=Object.getOwnPropertyDescriptor(T,re);ee&&!ee.enumerable&&!I||(P[re]=k(T[re],D-1),ee.enumerable||Object.defineProperty(P,re,{enumerable:!1}))}if(I)for(var ue=Object.getOwnPropertyNames(T),M=0;M<ue.length;M++){var Y=ue[M],ee=Object.getOwnPropertyDescriptor(T,Y);ee&&ee.enumerable||(P[Y]=k(T[Y],D-1),Object.defineProperty(P,Y,{enumerable:!1}))}return P}return k(_,v)}h.clonePrototype=function(A){if(A===null)return null;var v=function(){};return v.prototype=A,new v};function d(_){return Object.prototype.toString.call(_)}h.__objToStr=d;function m(_){return typeof _=="object"&&d(_)==="[object Date]"}h.__isDate=m;function p(_){return typeof _=="object"&&d(_)==="[object Array]"}h.__isArray=p;function g(_){return typeof _=="object"&&d(_)==="[object RegExp]"}h.__isRegExp=g;function w(_){var A="";return _.global&&(A+="g"),_.ignoreCase&&(A+="i"),_.multiline&&(A+="m"),A}return h.__getRegExpFlags=w,h}();typeof t=="object"&&t.exports&&(t.exports=r)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function P(N,L){var M=[],$=!0,Q=!1,re=void 0;try{for(var ee=N[Symbol.iterator](),ue;!($=(ue=ee.next()).done)&&(M.push(ue.value),!(L&&M.length===L));$=!0);}catch(Y){Q=!0,re=Y}finally{try{!$&&ee.return&&ee.return()}finally{if(Q)throw re}}return M}return function(N,L){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return P(N,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(N,L){for(var M=0;M<L.length;M++){var $=L[M];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}return function(N,L,M){return L&&P(N.prototype,L),M&&P(N,M),N}}(),a=function P(N,L,M){N===null&&(N=Function.prototype);var $=Object.getOwnPropertyDescriptor(N,L);if($===void 0){var Q=Object.getPrototypeOf(N);return Q===null?void 0:P(Q,L,M)}else{if("value"in $)return $.value;var re=$.get;return re===void 0?void 0:re.call(M)}},u=r(0),h=S(u),d=r(8),m=S(d),p=r(4),g=S(p),w=r(16),_=S(w),A=r(13),v=S(A),E=r(25),I=S(E);function S(P){return P&&P.__esModule?P:{default:P}}function R(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function F(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:P}function k(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}function T(P){return P instanceof g.default||P instanceof p.BlockEmbed}var D=function(P){k(N,P);function N(L,M){R(this,N);var $=F(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L));return $.emitter=M.emitter,Array.isArray(M.whitelist)&&($.whitelist=M.whitelist.reduce(function(Q,re){return Q[re]=!0,Q},{})),$.domNode.addEventListener("DOMNodeInserted",function(){}),$.optimize(),$.enable(),$}return o(N,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(M,$){var Q=this.line(M),re=s(Q,2),ee=re[0],ue=re[1],Y=this.line(M+$),J=s(Y,1),q=J[0];if(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,M,$),q!=null&&ee!==q&&ue>0){if(ee instanceof p.BlockEmbed||q instanceof p.BlockEmbed){this.optimize();return}if(ee instanceof v.default){var H=ee.newlineIndex(ee.length(),!0);if(H>-1&&(ee=ee.split(H+1),ee===q)){this.optimize();return}}else if(q instanceof v.default){var G=q.newlineIndex(0);G>-1&&q.split(G+1)}var le=q.children.head instanceof _.default?null:q.children.head;ee.moveChildren(q,le),ee.remove()}this.optimize()}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",M)}},{key:"formatAt",value:function(M,$,Q,re){this.whitelist!=null&&!this.whitelist[Q]||(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,M,$,Q,re),this.optimize())}},{key:"insertAt",value:function(M,$,Q){if(!(Q!=null&&this.whitelist!=null&&!this.whitelist[$])){if(M>=this.length())if(Q==null||h.default.query($,h.default.Scope.BLOCK)==null){var re=h.default.create(this.statics.defaultChild);this.appendChild(re),Q==null&&$.endsWith(`
`)&&($=$.slice(0,-1)),re.insertAt(0,$,Q)}else{var ee=h.default.create($,Q);this.appendChild(ee)}else a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,M,$,Q);this.optimize()}}},{key:"insertBefore",value:function(M,$){if(M.statics.scope===h.default.Scope.INLINE_BLOT){var Q=h.default.create(this.statics.defaultChild);Q.appendChild(M),M=Q}a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,M,$)}},{key:"leaf",value:function(M){return this.path(M).pop()||[null,-1]}},{key:"line",value:function(M){return M===this.length()?this.line(M-1):this.descendant(T,M)}},{key:"lines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Q=function re(ee,ue,Y){var J=[],q=Y;return ee.children.forEachAt(ue,Y,function(H,G,le){T(H)?J.push(H):H instanceof h.default.Container&&(J=J.concat(re(H,G,q))),q-=le}),J};return Q(this,M,$)}},{key:"optimize",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,M,$),M.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,M,$))}},{key:"path",value:function(M){return a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,M).slice(1)}},{key:"update",value:function(M){if(this.batch!==!0){var $=m.default.sources.USER;typeof M=="string"&&($=M),Array.isArray(M)||(M=this.observer.takeRecords()),M.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,$,M),a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"update",this).call(this,M.concat([])),M.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,$,M)}}}]),N}(h.default.Scroll);D.blotName="scroll",D.className="ql-editor",D.tagName="DIV",D.defaultChild="block",D.allowedChildren=[g.default,p.BlockEmbed,I.default],n.default=D},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=function(){function X(ne,te){var ae=[],de=!0,ye=!1,xe=void 0;try{for(var Oe=ne[Symbol.iterator](),Fe;!(de=(Fe=Oe.next()).done)&&(ae.push(Fe.value),!(te&&ae.length===te));de=!0);}catch(Be){ye=!0,xe=Be}finally{try{!de&&Oe.return&&Oe.return()}finally{if(ye)throw xe}}return ae}return function(ne,te){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return X(ne,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function X(ne,te){for(var ae=0;ae<te.length;ae++){var de=te[ae];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ne,de.key,de)}}return function(ne,te,ae){return te&&X(ne.prototype,te),ae&&X(ne,ae),ne}}(),u=r(21),h=P(u),d=r(11),m=P(d),p=r(3),g=P(p),w=r(2),_=P(w),A=r(20),v=P(A),E=r(0),I=P(E),S=r(5),R=P(S),F=r(10),k=P(F),T=r(9),D=P(T);function P(X){return X&&X.__esModule?X:{default:X}}function N(X,ne,te){return ne in X?Object.defineProperty(X,ne,{value:te,enumerable:!0,configurable:!0,writable:!0}):X[ne]=te,X}function L(X,ne){if(!(X instanceof ne))throw new TypeError("Cannot call a class as a function")}function M(X,ne){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:X}function $(X,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);X.prototype=Object.create(ne&&ne.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ne):X.__proto__=ne)}var Q=(0,k.default)("quill:keyboard"),re=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",ee=function(X){$(ne,X),a(ne,null,[{key:"match",value:function(ae,de){return de=se(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ye){return!!de[ye]!==ae[ye]&&de[ye]!==null})?!1:de.key===(ae.which||ae.keyCode)}}]);function ne(te,ae){L(this,ne);var de=M(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this,te,ae));return de.bindings={},Object.keys(de.options.bindings).forEach(function(ye){ye==="list autofill"&&te.scroll.whitelist!=null&&!te.scroll.whitelist.list||de.options.bindings[ye]&&de.addBinding(de.options.bindings[ye])}),de.addBinding({key:ne.keys.ENTER,shiftKey:null},H),de.addBinding({key:ne.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0},Y),de.addBinding({key:ne.keys.DELETE},{collapsed:!0},J)):(de.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Y),de.addBinding({key:ne.keys.DELETE},{collapsed:!0,suffix:/^.?$/},J)),de.addBinding({key:ne.keys.BACKSPACE},{collapsed:!1},q),de.addBinding({key:ne.keys.DELETE},{collapsed:!1},q),de.addBinding({key:ne.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Y),de.listen(),de}return a(ne,[{key:"addBinding",value:function(ae){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},xe=se(ae);if(xe==null||xe.key==null)return Q.warn("Attempted to add invalid keyboard binding",xe);typeof de=="function"&&(de={handler:de}),typeof ye=="function"&&(ye={handler:ye}),xe=(0,g.default)(xe,de,ye),this.bindings[xe.key]=this.bindings[xe.key]||[],this.bindings[xe.key].push(xe)}},{key:"listen",value:function(){var ae=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var ye=de.which||de.keyCode,xe=(ae.bindings[ye]||[]).filter(function(Mt){return ne.match(de,Mt)});if(xe.length!==0){var Oe=ae.quill.getSelection();if(!(Oe==null||!ae.quill.hasFocus())){var Fe=ae.quill.getLine(Oe.index),Be=o(Fe,2),$e=Be[0],mt=Be[1],fe=ae.quill.getLeaf(Oe.index),ve=o(fe,2),Ie=ve[0],Re=ve[1],Ae=Oe.length===0?[Ie,Re]:ae.quill.getLeaf(Oe.index+Oe.length),rt=o(Ae,2),qe=rt[0],Qe=rt[1],st=Ie instanceof I.default.Text?Ie.value().slice(0,Re):"",ft=qe instanceof I.default.Text?qe.value().slice(Qe):"",gt={collapsed:Oe.length===0,empty:Oe.length===0&&$e.length()<=1,format:ae.quill.getFormat(Oe),offset:mt,prefix:st,suffix:ft},xi=xe.some(function(Mt){if(Mt.collapsed!=null&&Mt.collapsed!==gt.collapsed||Mt.empty!=null&&Mt.empty!==gt.empty||Mt.offset!=null&&Mt.offset!==gt.offset)return!1;if(Array.isArray(Mt.format)){if(Mt.format.every(function(an){return gt.format[an]==null}))return!1}else if(s(Mt.format)==="object"&&!Object.keys(Mt.format).every(function(an){return Mt.format[an]===!0?gt.format[an]!=null:Mt.format[an]===!1?gt.format[an]==null:(0,m.default)(Mt.format[an],gt.format[an])}))return!1;return Mt.prefix!=null&&!Mt.prefix.test(gt.prefix)||Mt.suffix!=null&&!Mt.suffix.test(gt.suffix)?!1:Mt.handler.call(ae,Oe,gt)!==!0});xi&&de.preventDefault()}}}})}}]),ne}(D.default);ee.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},ee.DEFAULTS={bindings:{bold:le("bold"),italic:le("italic"),underline:le("underline"),indent:{key:ee.keys.TAB,format:["blockquote","indent","list"],handler:function(ne,te){if(te.collapsed&&te.offset!==0)return!0;this.quill.format("indent","+1",R.default.sources.USER)}},outdent:{key:ee.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ne,te){if(te.collapsed&&te.offset!==0)return!0;this.quill.format("indent","-1",R.default.sources.USER)}},"outdent backspace":{key:ee.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ne,te){te.format.indent!=null?this.quill.format("indent","-1",R.default.sources.USER):te.format.list!=null&&this.quill.format("list",!1,R.default.sources.USER)}},"indent code-block":G(!0),"outdent code-block":G(!1),"remove tab":{key:ee.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ne){this.quill.deleteText(ne.index-1,1,R.default.sources.USER)}},tab:{key:ee.keys.TAB,handler:function(ne){this.quill.history.cutoff();var te=new _.default().retain(ne.index).delete(ne.length).insert("	");this.quill.updateContents(te,R.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index+1,R.default.sources.SILENT)}},"list empty enter":{key:ee.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ne,te){this.quill.format("list",!1,R.default.sources.USER),te.format.indent&&this.quill.format("indent",!1,R.default.sources.USER)}},"checklist enter":{key:ee.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ne){var te=this.quill.getLine(ne.index),ae=o(te,2),de=ae[0],ye=ae[1],xe=(0,g.default)({},de.formats(),{list:"checked"}),Oe=new _.default().retain(ne.index).insert(`
`,xe).retain(de.length()-ye-1).retain(1,{list:"unchecked"});this.quill.updateContents(Oe,R.default.sources.USER),this.quill.setSelection(ne.index+1,R.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:ee.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ne,te){var ae=this.quill.getLine(ne.index),de=o(ae,2),ye=de[0],xe=de[1],Oe=new _.default().retain(ne.index).insert(`
`,te.format).retain(ye.length()-xe-1).retain(1,{header:null});this.quill.updateContents(Oe,R.default.sources.USER),this.quill.setSelection(ne.index+1,R.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ne,te){var ae=te.prefix.length,de=this.quill.getLine(ne.index),ye=o(de,2),xe=ye[0],Oe=ye[1];if(Oe>ae)return!0;var Fe=void 0;switch(te.prefix.trim()){case"[]":case"[ ]":Fe="unchecked";break;case"[x]":Fe="checked";break;case"-":case"*":Fe="bullet";break;default:Fe="ordered"}this.quill.insertText(ne.index," ",R.default.sources.USER),this.quill.history.cutoff();var Be=new _.default().retain(ne.index-Oe).delete(ae+1).retain(xe.length()-2-Oe).retain(1,{list:Fe});this.quill.updateContents(Be,R.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index-ae,R.default.sources.SILENT)}},"code exit":{key:ee.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ne){var te=this.quill.getLine(ne.index),ae=o(te,2),de=ae[0],ye=ae[1],xe=new _.default().retain(ne.index+de.length()-ye-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(xe,R.default.sources.USER)}},"embed left":ue(ee.keys.LEFT,!1),"embed left shift":ue(ee.keys.LEFT,!0),"embed right":ue(ee.keys.RIGHT,!1),"embed right shift":ue(ee.keys.RIGHT,!0)}};function ue(X,ne){var te,ae=X===ee.keys.LEFT?"prefix":"suffix";return te={key:X,shiftKey:ne,altKey:null},N(te,ae,/^$/),N(te,"handler",function(ye){var xe=ye.index;X===ee.keys.RIGHT&&(xe+=ye.length+1);var Oe=this.quill.getLeaf(xe),Fe=o(Oe,1),Be=Fe[0];return Be instanceof I.default.Embed?(X===ee.keys.LEFT?ne?this.quill.setSelection(ye.index-1,ye.length+1,R.default.sources.USER):this.quill.setSelection(ye.index-1,R.default.sources.USER):ne?this.quill.setSelection(ye.index,ye.length+1,R.default.sources.USER):this.quill.setSelection(ye.index+ye.length+1,R.default.sources.USER),!1):!0}),te}function Y(X,ne){if(!(X.index===0||this.quill.getLength()<=1)){var te=this.quill.getLine(X.index),ae=o(te,1),de=ae[0],ye={};if(ne.offset===0){var xe=this.quill.getLine(X.index-1),Oe=o(xe,1),Fe=Oe[0];if(Fe!=null&&Fe.length()>1){var Be=de.formats(),$e=this.quill.getFormat(X.index-1,1);ye=v.default.attributes.diff(Be,$e)||{}}}var mt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ne.prefix)?2:1;this.quill.deleteText(X.index-mt,mt,R.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(X.index-mt,mt,ye,R.default.sources.USER),this.quill.focus()}}function J(X,ne){var te=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ne.suffix)?2:1;if(!(X.index>=this.quill.getLength()-te)){var ae={},de=0,ye=this.quill.getLine(X.index),xe=o(ye,1),Oe=xe[0];if(ne.offset>=Oe.length()-1){var Fe=this.quill.getLine(X.index+1),Be=o(Fe,1),$e=Be[0];if($e){var mt=Oe.formats(),fe=this.quill.getFormat(X.index,1);ae=v.default.attributes.diff(mt,fe)||{},de=$e.length()}}this.quill.deleteText(X.index,te,R.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(X.index+de-1,te,ae,R.default.sources.USER)}}function q(X){var ne=this.quill.getLines(X),te={};if(ne.length>1){var ae=ne[0].formats(),de=ne[ne.length-1].formats();te=v.default.attributes.diff(de,ae)||{}}this.quill.deleteText(X,R.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(X.index,1,te,R.default.sources.USER),this.quill.setSelection(X.index,R.default.sources.SILENT),this.quill.focus()}function H(X,ne){var te=this;X.length>0&&this.quill.scroll.deleteAt(X.index,X.length);var ae=Object.keys(ne.format).reduce(function(de,ye){return I.default.query(ye,I.default.Scope.BLOCK)&&!Array.isArray(ne.format[ye])&&(de[ye]=ne.format[ye]),de},{});this.quill.insertText(X.index,`
`,ae,R.default.sources.USER),this.quill.setSelection(X.index+1,R.default.sources.SILENT),this.quill.focus(),Object.keys(ne.format).forEach(function(de){ae[de]==null&&(Array.isArray(ne.format[de])||de!=="link"&&te.quill.format(de,ne.format[de],R.default.sources.USER))})}function G(X){return{key:ee.keys.TAB,shiftKey:!X,format:{"code-block":!0},handler:function(te){var ae=I.default.query("code-block"),de=te.index,ye=te.length,xe=this.quill.scroll.descendant(ae,de),Oe=o(xe,2),Fe=Oe[0],Be=Oe[1];if(Fe!=null){var $e=this.quill.getIndex(Fe),mt=Fe.newlineIndex(Be,!0)+1,fe=Fe.newlineIndex($e+Be+ye),ve=Fe.domNode.textContent.slice(mt,fe).split(`
`);Be=0,ve.forEach(function(Ie,Re){X?(Fe.insertAt(mt+Be,ae.TAB),Be+=ae.TAB.length,Re===0?de+=ae.TAB.length:ye+=ae.TAB.length):Ie.startsWith(ae.TAB)&&(Fe.deleteAt(mt+Be,ae.TAB.length),Be-=ae.TAB.length,Re===0?de-=ae.TAB.length:ye-=ae.TAB.length),Be+=Ie.length+1}),this.quill.update(R.default.sources.USER),this.quill.setSelection(de,ye,R.default.sources.SILENT)}}}}function le(X){return{key:X[0].toUpperCase(),shortKey:!0,handler:function(te,ae){this.quill.format(X,!ae.format[X],R.default.sources.USER)}}}function se(X){if(typeof X=="string"||typeof X=="number")return se({key:X});if((typeof X>"u"?"undefined":s(X))==="object"&&(X=(0,h.default)(X,!1)),typeof X.key=="string")if(ee.keys[X.key.toUpperCase()]!=null)X.key=ee.keys[X.key.toUpperCase()];else if(X.key.length===1)X.key=X.key.toUpperCase().charCodeAt(0);else return null;return X.shortKey&&(X[re]=X.shortKey,delete X.shortKey),X}n.default=ee,n.SHORTKEY=re},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(E,I){var S=[],R=!0,F=!1,k=void 0;try{for(var T=E[Symbol.iterator](),D;!(R=(D=T.next()).done)&&(S.push(D.value),!(I&&S.length===I));R=!0);}catch(P){F=!0,k=P}finally{try{!R&&T.return&&T.return()}finally{if(F)throw k}}return S}return function(E,I){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return v(E,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function v(E,I,S){E===null&&(E=Function.prototype);var R=Object.getOwnPropertyDescriptor(E,I);if(R===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:v(F,I,S)}else{if("value"in R)return R.value;var k=R.get;return k===void 0?void 0:k.call(S)}},a=function(){function v(E,I){for(var S=0;S<I.length;S++){var R=I[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,I,S){return I&&v(E.prototype,I),S&&v(E,S),E}}(),u=r(0),h=p(u),d=r(7),m=p(d);function p(v){return v&&v.__esModule?v:{default:v}}function g(v,E){if(!(v instanceof E))throw new TypeError("Cannot call a class as a function")}function w(v,E){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:v}function _(v,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);v.prototype=Object.create(E&&E.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(v,E):v.__proto__=E)}var A=function(v){_(E,v),a(E,null,[{key:"value",value:function(){}}]);function E(I,S){g(this,E);var R=w(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I));return R.selection=S,R.textNode=document.createTextNode(E.CONTENTS),R.domNode.appendChild(R.textNode),R._length=0,R}return a(E,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,R){if(this._length!==0)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,S,R);for(var F=this,k=0;F!=null&&F.statics.scope!==h.default.Scope.BLOCK_BLOT;)k+=F.offset(F.parent),F=F.parent;F!=null&&(this._length=E.CONTENTS.length,F.optimize(),F.formatAt(k,E.CONTENTS.length,S,R),this._length=0)}},{key:"index",value:function(S,R){return S===this.textNode?0:o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"index",this).call(this,S,R)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,R=this.selection.getNativeRange(),F=void 0,k=void 0,T=void 0;if(R!=null&&R.start.node===S&&R.end.node===S){var D=[S,R.start.offset,R.end.offset];F=D[0],k=D[1],T=D[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==E.CONTENTS){var P=this.textNode.data.split(E.CONTENTS).join("");this.next instanceof m.default?(F=this.next.domNode,this.next.insertAt(0,P),this.textNode.data=E.CONTENTS):(this.textNode.data=P,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(E.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),k!=null){var N=[k,T].map(function(M){return Math.max(0,Math.min(F.data.length,M-1))}),L=s(N,2);return k=L[0],T=L[1],{startNode:F,startOffset:k,endNode:F,endOffset:T}}}}},{key:"update",value:function(S,R){var F=this;if(S.some(function(T){return T.type==="characterData"&&T.target===F.textNode})){var k=this.restore();k&&(R.range=k)}}},{key:"value",value:function(){return""}}]),E}(h.default.Embed);A.blotName="cursor",A.className="ql-cursor",A.tagName="span",A.CONTENTS="\uFEFF",n.default=A},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(0),o=h(s),a=r(4),u=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function m(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function p(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){p(_,w);function _(){return d(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return _}(o.default.Container);g.allowedChildren=[u.default,a.BlockEmbed,g],n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var s=function(){function A(v,E){for(var I=0;I<E.length;I++){var S=E[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,E,I){return E&&A(v.prototype,E),I&&A(v,I),v}}(),o=function A(v,E,I){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,E);if(S===void 0){var R=Object.getPrototypeOf(v);return R===null?void 0:A(R,E,I)}else{if("value"in S)return S.value;var F=S.get;return F===void 0?void 0:F.call(I)}},a=r(0),u=h(a);function h(A){return A&&A.__esModule?A:{default:A}}function d(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function m(A,v){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:A}function p(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);A.prototype=Object.create(v&&v.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(A,v):A.__proto__=v)}var g=function(A){p(v,A);function v(){return d(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(I){var S=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,I);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(R){return("00"+parseInt(R).toString(16)).slice(-2)}).join("")):S}}]),v}(u.default.Attributor.Style),w=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),_=new g("color","color",{scope:u.default.Scope.INLINE});n.ColorAttributor=g,n.ColorClass=w,n.ColorStyle=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var s=function(){function _(A,v){for(var E=0;E<v.length;E++){var I=v[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,v,E){return v&&_(A.prototype,v),E&&_(A,E),A}}(),o=function _(A,v,E){A===null&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,v);if(I===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:_(S,v,E)}else{if("value"in I)return I.value;var R=I.get;return R===void 0?void 0:R.call(E)}},a=r(6),u=h(a);function h(_){return _&&_.__esModule?_:{default:_}}function d(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function m(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function p(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var g=function(_){p(A,_);function A(){return d(this,A),m(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"format",value:function(E,I){if(E!==this.statics.blotName||!I)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,E,I);I=this.constructor.sanitize(I),this.domNode.setAttribute("href",I)}}],[{key:"create",value:function(E){var I=o(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,E);return E=this.sanitize(E),I.setAttribute("href",E),I.setAttribute("rel","noopener noreferrer"),I.setAttribute("target","_blank"),I}},{key:"formats",value:function(E){return E.getAttribute("href")}},{key:"sanitize",value:function(E){return w(E,this.PROTOCOL_WHITELIST)?E:this.SANITIZED_URL}}]),A}(u.default);g.blotName="link",g.tagName="A",g.SANITIZED_URL="about:blank",g.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function w(_,A){var v=document.createElement("a");v.href=_;var E=v.href.slice(0,v.href.indexOf(":"));return A.indexOf(E)>-1}n.default=g,n.sanitize=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},o=function(){function A(v,E){for(var I=0;I<E.length;I++){var S=E[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,E,I){return E&&A(v.prototype,E),I&&A(v,I),v}}(),a=r(23),u=m(a),h=r(107),d=m(h);function m(A){return A&&A.__esModule?A:{default:A}}function p(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}var g=0;function w(A,v){A.setAttribute(v,A.getAttribute(v)!=="true")}var _=function(){function A(v){var E=this;p(this,A),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){E.togglePicker()}),this.label.addEventListener("keydown",function(I){switch(I.keyCode){case u.default.keys.ENTER:E.togglePicker();break;case u.default.keys.ESCAPE:E.escape(),I.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(A,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),w(this.label,"aria-expanded"),w(this.options,"aria-hidden")}},{key:"buildItem",value:function(E){var I=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),E.hasAttribute("value")&&S.setAttribute("data-value",E.getAttribute("value")),E.textContent&&S.setAttribute("data-label",E.textContent),S.addEventListener("click",function(){I.selectItem(S,!0)}),S.addEventListener("keydown",function(R){switch(R.keyCode){case u.default.keys.ENTER:I.selectItem(S,!0),R.preventDefault();break;case u.default.keys.ESCAPE:I.escape(),R.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var E=document.createElement("span");return E.classList.add("ql-picker-label"),E.innerHTML=d.default,E.tabIndex="0",E.setAttribute("role","button"),E.setAttribute("aria-expanded","false"),this.container.appendChild(E),E}},{key:"buildOptions",value:function(){var E=this,I=document.createElement("span");I.classList.add("ql-picker-options"),I.setAttribute("aria-hidden","true"),I.tabIndex="-1",I.id="ql-picker-options-"+g,g+=1,this.label.setAttribute("aria-controls",I.id),this.options=I,[].slice.call(this.select.options).forEach(function(S){var R=E.buildItem(S);I.appendChild(R),S.selected===!0&&E.selectItem(R)}),this.container.appendChild(I)}},{key:"buildPicker",value:function(){var E=this;[].slice.call(this.select.attributes).forEach(function(I){E.container.setAttribute(I.name,I.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var E=this;this.close(),setTimeout(function(){return E.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(E!==S&&(S!=null&&S.classList.remove("ql-selected"),E!=null&&(E.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(E.parentNode.children,E),E.hasAttribute("data-value")?this.label.setAttribute("data-value",E.getAttribute("data-value")):this.label.removeAttribute("data-value"),E.hasAttribute("data-label")?this.label.setAttribute("data-label",E.getAttribute("data-label")):this.label.removeAttribute("data-label"),I))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var R=document.createEvent("Event");R.initEvent("change",!0,!0),this.select.dispatchEvent(R)}this.close()}}},{key:"update",value:function(){var E=void 0;if(this.select.selectedIndex>-1){var I=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];E=this.select.options[this.select.selectedIndex],this.selectItem(I)}else this.selectItem(null);var S=E!=null&&E!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),A}();n.default=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(0),o=Q(s),a=r(5),u=Q(a),h=r(4),d=Q(h),m=r(16),p=Q(m),g=r(25),w=Q(g),_=r(24),A=Q(_),v=r(35),E=Q(v),I=r(6),S=Q(I),R=r(22),F=Q(R),k=r(7),T=Q(k),D=r(55),P=Q(D),N=r(42),L=Q(N),M=r(23),$=Q(M);function Q(re){return re&&re.__esModule?re:{default:re}}u.default.register({"blots/block":d.default,"blots/block/embed":h.BlockEmbed,"blots/break":p.default,"blots/container":w.default,"blots/cursor":A.default,"blots/embed":E.default,"blots/inline":S.default,"blots/scroll":F.default,"blots/text":T.default,"modules/clipboard":P.default,"modules/history":L.default,"modules/keyboard":$.default}),o.default.register(d.default,p.default,A.default,S.default,F.default,T.default),n.default=u.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),o=function(){function a(u){this.domNode=u,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(u){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?h=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?h=document.createElement(u):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return s.create(u)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(u,h){var d=this.isolate(u,h);d.remove()},a.prototype.formatAt=function(u,h,d,m){var p=this.isolate(u,h);if(s.query(d,s.Scope.BLOT)!=null&&m)p.wrap(d,m);else if(s.query(d,s.Scope.ATTRIBUTE)!=null){var g=s.create(this.statics.scope);p.wrap(g),g.format(d,m)}},a.prototype.insertAt=function(u,h,d){var m=d==null?s.create("text",h):s.create(h,d),p=this.split(u);this.parent.insertBefore(m,p)},a.prototype.insertInto=function(u,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var d=null;u.children.insertBefore(this,h),h!=null&&(d=h.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=d)&&u.domNode.insertBefore(this.domNode,d),this.parent=u,this.attach()},a.prototype.isolate=function(u,h){var d=this.split(u);return d.split(h),d},a.prototype.length=function(){return 1},a.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},a.prototype.optimize=function(u){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},a.prototype.replaceWith=function(u,h){var d=typeof u=="string"?s.create(u,h):u;return d.replace(this),d},a.prototype.split=function(u,h){return u===0?this:this.next},a.prototype.update=function(u,h){},a.prototype.wrap=function(u,h){var d=typeof u=="string"?s.create(u,h):u;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},a.blotName="abstract",a}();n.default=o},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(12),o=r(32),a=r(33),u=r(1),h=function(){function d(m){this.attributes={},this.domNode=m,this.build()}return d.prototype.attribute=function(m,p){p?m.add(this.domNode,p)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},d.prototype.build=function(){var m=this;this.attributes={};var p=s.default.keys(this.domNode),g=o.default.keys(this.domNode),w=a.default.keys(this.domNode);p.concat(g).concat(w).forEach(function(_){var A=u.query(_,u.Scope.ATTRIBUTE);A instanceof s.default&&(m.attributes[A.attrName]=A)})},d.prototype.copy=function(m){var p=this;Object.keys(this.attributes).forEach(function(g){var w=p.attributes[g].value(p.domNode);m.format(g,w)})},d.prototype.move=function(m){var p=this;this.copy(m),Object.keys(this.attributes).forEach(function(g){p.attributes[g].remove(p.domNode)}),this.attributes={}},d.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(p,g){return p[g]=m.attributes[g].value(m.domNode),p},{})},d}();n.default=h},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){h(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(12);function a(h,d){var m=h.getAttribute("class")||"";return m.split(/\s+/).filter(function(p){return p.indexOf(d+"-")===0})}var u=function(h){s(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},d.prototype.add=function(m,p){return this.canAdd(m,p)?(this.remove(m),m.classList.add(this.keyName+"-"+p),!0):!1},d.prototype.remove=function(m){var p=a(m,this.keyName);p.forEach(function(g){m.classList.remove(g)}),m.classList.length===0&&m.removeAttribute("class")},d.prototype.value=function(m){var p=a(m,this.keyName)[0]||"",g=p.slice(this.keyName.length+1);return this.canAdd(m,g)?g:""},d}(o.default);n.default=u},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){h(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(12);function a(h){var d=h.split("-"),m=d.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return d[0]+m}var u=function(h){s(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(p){var g=p.split(":");return g[0].trim()})},d.prototype.add=function(m,p){return this.canAdd(m,p)?(m.style[a(this.keyName)]=p,!0):!1},d.prototype.remove=function(m){m.style[a(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},d.prototype.value=function(m){var p=m.style[a(this.keyName)];return this.canAdd(m,p)?p:""},d}(o.default);n.default=u},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function u(h,d){for(var m=0;m<d.length;m++){var p=d[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,d,m){return d&&u(h.prototype,d),m&&u(h,m),h}}();function o(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(h,d){o(this,u),this.quill=h,this.options=d,this.modules={}}return s(u,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(m){d.modules[m]==null&&d.addModule(m)})}},{key:"addModule",value:function(d){var m=this.quill.constructor.import("modules/"+d);return this.modules[d]=new m(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),u}();a.DEFAULTS={modules:{}},a.themes={default:a},n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(E,I){for(var S=0;S<I.length;S++){var R=I[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,I,S){return I&&v(E.prototype,I),S&&v(E,S),E}}(),o=function v(E,I,S){E===null&&(E=Function.prototype);var R=Object.getOwnPropertyDescriptor(E,I);if(R===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:v(F,I,S)}else{if("value"in R)return R.value;var k=R.get;return k===void 0?void 0:k.call(S)}},a=r(0),u=m(a),h=r(7),d=m(h);function m(v){return v&&v.__esModule?v:{default:v}}function p(v,E){if(!(v instanceof E))throw new TypeError("Cannot call a class as a function")}function g(v,E){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:v}function w(v,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);v.prototype=Object.create(E&&E.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(v,E):v.__proto__=E)}var _="\uFEFF",A=function(v){w(E,v);function E(I){p(this,E);var S=g(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(R){S.contentNode.appendChild(R)}),S.leftGuard=document.createTextNode(_),S.rightGuard=document.createTextNode(_),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return s(E,[{key:"index",value:function(S,R){return S===this.leftGuard?0:S===this.rightGuard?1:o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"index",this).call(this,S,R)}},{key:"restore",value:function(S){var R=void 0,F=void 0,k=S.data.split(_).join("");if(S===this.leftGuard)if(this.prev instanceof d.default){var T=this.prev.length();this.prev.insertAt(T,k),R={startNode:this.prev.domNode,startOffset:T+k.length}}else F=document.createTextNode(k),this.parent.insertBefore(u.default.create(F),this),R={startNode:F,startOffset:k.length};else S===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,k),R={startNode:this.next.domNode,startOffset:k.length}):(F=document.createTextNode(k),this.parent.insertBefore(u.default.create(F),this.next),R={startNode:F,startOffset:k.length}));return S.data=_,R}},{key:"update",value:function(S,R){var F=this;S.forEach(function(k){if(k.type==="characterData"&&(k.target===F.leftGuard||k.target===F.rightGuard)){var T=F.restore(k.target);T&&(R.range=T)}})}}]),E}(u.default.Embed);n.default=A},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=r(0),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}var u={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",u),d=new o.default.Attributor.Class("align","ql-align",u),m=new o.default.Attributor.Style("align","text-align",u);n.AlignAttribute=h,n.AlignClass=d,n.AlignStyle=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=r(0),o=u(s),a=r(26);function u(m){return m&&m.__esModule?m:{default:m}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),d=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=h,n.BackgroundStyle=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=r(0),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}var u={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",u),d=new o.default.Attributor.Class("direction","ql-direction",u),m=new o.default.Attributor.Style("direction","direction",u);n.DirectionAttribute=h,n.DirectionClass=d,n.DirectionStyle=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var s=function(){function v(E,I){for(var S=0;S<I.length;S++){var R=I[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,I,S){return I&&v(E.prototype,I),S&&v(E,S),E}}(),o=function v(E,I,S){E===null&&(E=Function.prototype);var R=Object.getOwnPropertyDescriptor(E,I);if(R===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:v(F,I,S)}else{if("value"in R)return R.value;var k=R.get;return k===void 0?void 0:k.call(S)}},a=r(0),u=h(a);function h(v){return v&&v.__esModule?v:{default:v}}function d(v,E){if(!(v instanceof E))throw new TypeError("Cannot call a class as a function")}function m(v,E){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:v}function p(v,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);v.prototype=Object.create(E&&E.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(v,E):v.__proto__=E)}var g={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},w=new u.default.Attributor.Class("font","ql-font",g),_=function(v){p(E,v);function E(){return d(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"value",value:function(S){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),E}(u.default.Attributor.Style),A=new _("font","font-family",g);n.FontStyle=A,n.FontClass=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=r(0),o=a(s);function a(d){return d&&d.__esModule?d:{default:d}}var u=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=u,n.SizeStyle=h},function(t,n,r){t.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var s=function(){function I(S,R){for(var F=0;F<R.length;F++){var k=R[F];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(S,k.key,k)}}return function(S,R,F){return R&&I(S.prototype,R),F&&I(S,F),S}}(),o=r(0),a=p(o),u=r(5),h=p(u),d=r(9),m=p(d);function p(I){return I&&I.__esModule?I:{default:I}}function g(I,S){if(!(I instanceof S))throw new TypeError("Cannot call a class as a function")}function w(I,S){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:I}function _(I,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);I.prototype=Object.create(S&&S.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(I,S):I.__proto__=S)}var A=function(I){_(S,I);function S(R,F){g(this,S);var k=w(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,R,F));return k.lastRecorded=0,k.ignoreChange=!1,k.clear(),k.quill.on(h.default.events.EDITOR_CHANGE,function(T,D,P,N){T!==h.default.events.TEXT_CHANGE||k.ignoreChange||(!k.options.userOnly||N===h.default.sources.USER?k.record(D,P):k.transform(D))}),k.quill.keyboard.addBinding({key:"Z",shortKey:!0},k.undo.bind(k)),k.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},k.redo.bind(k)),/Win/i.test(navigator.platform)&&k.quill.keyboard.addBinding({key:"Y",shortKey:!0},k.redo.bind(k)),k}return s(S,[{key:"change",value:function(F,k){if(this.stack[F].length!==0){var T=this.stack[F].pop();this.stack[k].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[F],h.default.sources.USER),this.ignoreChange=!1;var D=E(T[F]);this.quill.setSelection(D)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(F,k){if(F.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(k),D=Date.now();if(this.lastRecorded+this.options.delay>D&&this.stack.undo.length>0){var P=this.stack.undo.pop();T=T.compose(P.undo),F=P.redo.compose(F)}else this.lastRecorded=D;this.stack.undo.push({redo:F,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(F){this.stack.undo.forEach(function(k){k.undo=F.transform(k.undo,!0),k.redo=F.transform(k.redo,!0)}),this.stack.redo.forEach(function(k){k.undo=F.transform(k.undo,!0),k.redo=F.transform(k.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(m.default);A.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(I){var S=I.ops[I.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(R){return a.default.query(R,a.default.Scope.BLOCK)!=null}):!1}function E(I){var S=I.reduce(function(F,k){return F+=k.delete||0,F},0),R=I.length()-S;return v(I)&&(R-=1),R}n.default=A,n.getLastChangeIndex=E},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var s=function(){function H(G,le){for(var se=0;se<le.length;se++){var X=le[se];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(G,X.key,X)}}return function(G,le,se){return le&&H(G.prototype,le),se&&H(G,se),G}}(),o=function H(G,le,se){G===null&&(G=Function.prototype);var X=Object.getOwnPropertyDescriptor(G,le);if(X===void 0){var ne=Object.getPrototypeOf(G);return ne===null?void 0:H(ne,le,se)}else{if("value"in X)return X.value;var te=X.get;return te===void 0?void 0:te.call(se)}},a=r(3),u=D(a),h=r(2),d=D(h),m=r(8),p=D(m),g=r(23),w=D(g),_=r(34),A=D(_),v=r(59),E=D(v),I=r(60),S=D(I),R=r(28),F=D(R),k=r(61),T=D(k);function D(H){return H&&H.__esModule?H:{default:H}}function P(H,G){if(!(H instanceof G))throw new TypeError("Cannot call a class as a function")}function N(H,G){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:H}function L(H,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);H.prototype=Object.create(G&&G.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(H,G):H.__proto__=G)}var M=[!1,"center","right","justify"],$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Q=[!1,"serif","monospace"],re=["1","2","3",!1],ee=["small",!1,"large","huge"],ue=function(H){L(G,H);function G(le,se){P(this,G);var X=N(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,le,se)),ne=function te(ae){if(!document.body.contains(le.root))return document.body.removeEventListener("click",te);X.tooltip!=null&&!X.tooltip.root.contains(ae.target)&&document.activeElement!==X.tooltip.textbox&&!X.quill.hasFocus()&&X.tooltip.hide(),X.pickers!=null&&X.pickers.forEach(function(de){de.container.contains(ae.target)||de.close()})};return le.emitter.listenDOM("click",document.body,ne),X}return s(G,[{key:"addModule",value:function(se){var X=o(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"addModule",this).call(this,se);return se==="toolbar"&&this.extendToolbar(X),X}},{key:"buildButtons",value:function(se,X){se.forEach(function(ne){var te=ne.getAttribute("class")||"";te.split(/\s+/).forEach(function(ae){if(ae.startsWith("ql-")&&(ae=ae.slice(3),X[ae]!=null))if(ae==="direction")ne.innerHTML=X[ae][""]+X[ae].rtl;else if(typeof X[ae]=="string")ne.innerHTML=X[ae];else{var de=ne.value||"";de!=null&&X[ae][de]&&(ne.innerHTML=X[ae][de])}})})}},{key:"buildPickers",value:function(se,X){var ne=this;this.pickers=se.map(function(ae){if(ae.classList.contains("ql-align"))return ae.querySelector("option")==null&&q(ae,M),new S.default(ae,X.align);if(ae.classList.contains("ql-background")||ae.classList.contains("ql-color")){var de=ae.classList.contains("ql-background")?"background":"color";return ae.querySelector("option")==null&&q(ae,$,de==="background"?"#ffffff":"#000000"),new E.default(ae,X[de])}else return ae.querySelector("option")==null&&(ae.classList.contains("ql-font")?q(ae,Q):ae.classList.contains("ql-header")?q(ae,re):ae.classList.contains("ql-size")&&q(ae,ee)),new F.default(ae)});var te=function(){ne.pickers.forEach(function(de){de.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,te)}}]),G}(A.default);ue.DEFAULTS=(0,u.default)(!0,{},A.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var G=this,le=this.container.querySelector("input.ql-image[type=file]");le==null&&(le=document.createElement("input"),le.setAttribute("type","file"),le.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),le.classList.add("ql-image"),le.addEventListener("change",function(){if(le.files!=null&&le.files[0]!=null){var se=new FileReader;se.onload=function(X){var ne=G.quill.getSelection(!0);G.quill.updateContents(new d.default().retain(ne.index).delete(ne.length).insert({image:X.target.result}),p.default.sources.USER),G.quill.setSelection(ne.index+1,p.default.sources.SILENT),le.value=""},se.readAsDataURL(le.files[0])}}),this.container.appendChild(le)),le.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Y=function(H){L(G,H);function G(le,se){P(this,G);var X=N(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,le,se));return X.textbox=X.root.querySelector('input[type="text"]'),X.listen(),X}return s(G,[{key:"listen",value:function(){var se=this;this.textbox.addEventListener("keydown",function(X){w.default.match(X,"enter")?(se.save(),X.preventDefault()):w.default.match(X,"escape")&&(se.cancel(),X.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),X!=null?this.textbox.value=X:se!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+se)||""),this.root.setAttribute("data-mode",se)}},{key:"restoreFocus",value:function(){var se=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=se}},{key:"save",value:function(){var se=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var X=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",se,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",se,p.default.sources.USER)),this.quill.root.scrollTop=X;break}case"video":se=J(se);case"formula":{if(!se)break;var ne=this.quill.getSelection(!0);if(ne!=null){var te=ne.index+ne.length;this.quill.insertEmbed(te,this.root.getAttribute("data-mode"),se,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(te+1," ",p.default.sources.USER),this.quill.setSelection(te+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),G}(T.default);function J(H){var G=H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return G?(G[1]||"https")+"://www.youtube.com/embed/"+G[2]+"?showinfo=0":(G=H.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(G[1]||"https")+"://player.vimeo.com/video/"+G[2]+"/":H}function q(H,G){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;G.forEach(function(se){var X=document.createElement("option");se===le?X.setAttribute("selected","selected"):X.setAttribute("value",se),H.appendChild(X)})}n.BaseTooltip=Y,n.default=ue},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var u,h=this.iterator();u=h();)if(u===a)return!0;return!1},o.prototype.insertBefore=function(a,u){a&&(a.next=u,u!=null?(a.prev=u.prev,u.prev!=null&&(u.prev.next=a),u.prev=a,u===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var u=0,h=this.head;h!=null;){if(h===a)return u;u+=h.length(),h=h.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var u=a;return a!=null&&(a=a.next),u}},o.prototype.find=function(a,u){u===void 0&&(u=!1);for(var h,d=this.iterator();h=d();){var m=h.length();if(a<m||u&&a===m&&(h.next==null||h.next.length()!==0))return[h,a];a-=m}return[null,0]},o.prototype.forEach=function(a){for(var u,h=this.iterator();u=h();)a(u)},o.prototype.forEachAt=function(a,u,h){if(!(u<=0))for(var d=this.find(a),m=d[0],p=d[1],g,w=a-p,_=this.iterator(m);(g=_())&&w<a+u;){var A=g.length();a>w?h(g,a-w,Math.min(u,w+A-a)):h(g,0,Math.min(A,a+u-w)),w+=A}},o.prototype.map=function(a){return this.reduce(function(u,h){return u.push(a(h)),u},[])},o.prototype.reduce=function(a,u){for(var h,d=this.iterator();h=d();)u=a(u,h);return u},o}();n.default=s},function(t,n,r){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var w in g)g.hasOwnProperty(w)&&(p[w]=g[w])};return function(p,g){m(p,g);function w(){this.constructor=p}p.prototype=g===null?Object.create(g):(w.prototype=g.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(17),a=r(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,d=function(m){s(p,m);function p(g){var w=m.call(this,g)||this;return w.scroll=w,w.observer=new MutationObserver(function(_){w.update(_)}),w.observer.observe(w.domNode,u),w.attach(),w}return p.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(g,w){this.update(),g===0&&w===this.length()?this.children.forEach(function(_){_.remove()}):m.prototype.deleteAt.call(this,g,w)},p.prototype.formatAt=function(g,w,_,A){this.update(),m.prototype.formatAt.call(this,g,w,_,A)},p.prototype.insertAt=function(g,w,_){this.update(),m.prototype.insertAt.call(this,g,w,_)},p.prototype.optimize=function(g,w){var _=this;g===void 0&&(g=[]),w===void 0&&(w={}),m.prototype.optimize.call(this,w);for(var A=[].slice.call(this.observer.takeRecords());A.length>0;)g.push(A.pop());for(var v=function(R,F){F===void 0&&(F=!0),!(R==null||R===_)&&R.domNode.parentNode!=null&&(R.domNode[a.DATA_KEY].mutations==null&&(R.domNode[a.DATA_KEY].mutations=[]),F&&v(R.parent))},E=function(R){R.domNode[a.DATA_KEY]==null||R.domNode[a.DATA_KEY].mutations==null||(R instanceof o.default&&R.children.forEach(E),R.optimize(w))},I=g,S=0;I.length>0;S+=1){if(S>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(I.forEach(function(R){var F=a.find(R.target,!0);F!=null&&(F.domNode===R.target&&(R.type==="childList"?(v(a.find(R.previousSibling,!1)),[].forEach.call(R.addedNodes,function(k){var T=a.find(k,!1);v(T,!1),T instanceof o.default&&T.children.forEach(function(D){v(D,!1)})})):R.type==="attributes"&&v(F.prev)),v(F))}),this.children.forEach(E),I=[].slice.call(this.observer.takeRecords()),A=I.slice();A.length>0;)g.push(A.pop())}},p.prototype.update=function(g,w){var _=this;w===void 0&&(w={}),g=g||this.observer.takeRecords(),g.map(function(A){var v=a.find(A.target,!0);return v==null?null:v.domNode[a.DATA_KEY].mutations==null?(v.domNode[a.DATA_KEY].mutations=[A],v):(v.domNode[a.DATA_KEY].mutations.push(A),null)}).forEach(function(A){A==null||A===_||A.domNode[a.DATA_KEY]==null||A.update(A.domNode[a.DATA_KEY].mutations||[],w)}),this.domNode[a.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,w),this.optimize(g,w)},p.blotName="scroll",p.defaultChild="block",p.scope=a.Scope.BLOCK_BLOT,p.tagName="DIV",p}(o.default);n.default=d},function(t,n,r){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var g in p)p.hasOwnProperty(g)&&(m[g]=p[g])};return function(m,p){d(m,p);function g(){this.constructor=m}m.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(18),a=r(1);function u(d,m){if(Object.keys(d).length!==Object.keys(m).length)return!1;for(var p in d)if(d[p]!==m[p])return!1;return!0}var h=function(d){s(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return m.formats=function(p){if(p.tagName!==m.tagName)return d.formats.call(this,p)},m.prototype.format=function(p,g){var w=this;p===this.statics.blotName&&!g?(this.children.forEach(function(_){_ instanceof o.default||(_=_.wrap(m.blotName,!0)),w.attributes.copy(_)}),this.unwrap()):d.prototype.format.call(this,p,g)},m.prototype.formatAt=function(p,g,w,_){if(this.formats()[w]!=null||a.query(w,a.Scope.ATTRIBUTE)){var A=this.isolate(p,g);A.format(w,_)}else d.prototype.formatAt.call(this,p,g,w,_)},m.prototype.optimize=function(p){d.prototype.optimize.call(this,p);var g=this.formats();if(Object.keys(g).length===0)return this.unwrap();var w=this.next;w instanceof m&&w.prev===this&&u(g,w.formats())&&(w.moveChildren(this),w.remove())},m.blotName="inline",m.scope=a.Scope.INLINE_BLOT,m.tagName="SPAN",m}(o.default);n.default=h},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){h(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(18),a=r(1),u=function(h){s(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.formats=function(m){var p=a.query(d.blotName).tagName;if(m.tagName!==p)return h.formats.call(this,m)},d.prototype.format=function(m,p){a.query(m,a.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!p?this.replaceWith(d.blotName):h.prototype.format.call(this,m,p))},d.prototype.formatAt=function(m,p,g,w){a.query(g,a.Scope.BLOCK)!=null?this.format(g,w):h.prototype.formatAt.call(this,m,p,g,w)},d.prototype.insertAt=function(m,p,g){if(g==null||a.query(p,a.Scope.INLINE)!=null)h.prototype.insertAt.call(this,m,p,g);else{var w=this.split(m),_=a.create(p,g);w.parent.insertBefore(_,w)}},d.prototype.update=function(m,p){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,m,p)},d.blotName="block",d.scope=a.Scope.BLOCK_BLOT,d.tagName="P",d}(o.default);n.default=u},function(t,n,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var m in d)d.hasOwnProperty(m)&&(h[m]=d[m])};return function(h,d){u(h,d);function m(){this.constructor=h}h.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(19),a=function(u){s(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.formats=function(d){},h.prototype.format=function(d,m){u.prototype.formatAt.call(this,0,this.length(),d,m)},h.prototype.formatAt=function(d,m,p,g){d===0&&m===this.length()?this.format(p,g):u.prototype.formatAt.call(this,d,m,p,g)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);n.default=a},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){h(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(19),a=r(1),u=function(h){s(d,h);function d(m){var p=h.call(this,m)||this;return p.text=p.statics.value(p.domNode),p}return d.create=function(m){return document.createTextNode(m)},d.value=function(m){var p=m.data;return p.normalize&&(p=p.normalize()),p},d.prototype.deleteAt=function(m,p){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+p)},d.prototype.index=function(m,p){return this.domNode===m?p:-1},d.prototype.insertAt=function(m,p,g){g==null?(this.text=this.text.slice(0,m)+p+this.text.slice(m),this.domNode.data=this.text):h.prototype.insertAt.call(this,m,p,g)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(m){h.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(m,p){return[this.domNode,m]},d.prototype.split=function(m,p){if(p===void 0&&(p=!1),!p){if(m===0)return this;if(m===this.length())return this.next}var g=a.create(this.domNode.splitText(m));return this.parent.insertBefore(g,this.next),this.text=this.statics.value(this.domNode),g},d.prototype.update=function(m,p){var g=this;m.some(function(w){return w.type==="characterData"&&w.target===g.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=a.Scope.INLINE_BLOT,d}(o.default);n.default=u},function(t,n,r){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,u){return arguments.length>1&&!this.contains(a)==!u?u:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,u){return u=u||0,this.substr(u,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,u){var h=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>h.length)&&(u=h.length),u-=a.length;var d=h.indexOf(a,u);return d!==-1&&d===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),d=h.length>>>0,m=arguments[1],p,g=0;g<d;g++)if(p=h[g],u.call(m,p,g,h))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var r=-1,s=1,o=0;function a(S,R,F){if(S==R)return S?[[o,S]]:[];(F<0||S.length<F)&&(F=null);var k=m(S,R),T=S.substring(0,k);S=S.substring(k),R=R.substring(k),k=p(S,R);var D=S.substring(S.length-k);S=S.substring(0,S.length-k),R=R.substring(0,R.length-k);var P=u(S,R);return T&&P.unshift([o,T]),D&&P.push([o,D]),w(P),F!=null&&(P=v(P,F)),P=E(P),P}function u(S,R){var F;if(!S)return[[s,R]];if(!R)return[[r,S]];var k=S.length>R.length?S:R,T=S.length>R.length?R:S,D=k.indexOf(T);if(D!=-1)return F=[[s,k.substring(0,D)],[o,T],[s,k.substring(D+T.length)]],S.length>R.length&&(F[0][0]=F[2][0]=r),F;if(T.length==1)return[[r,S],[s,R]];var P=g(S,R);if(P){var N=P[0],L=P[1],M=P[2],$=P[3],Q=P[4],re=a(N,M),ee=a(L,$);return re.concat([[o,Q]],ee)}return h(S,R)}function h(S,R){for(var F=S.length,k=R.length,T=Math.ceil((F+k)/2),D=T,P=2*T,N=new Array(P),L=new Array(P),M=0;M<P;M++)N[M]=-1,L[M]=-1;N[D+1]=0,L[D+1]=0;for(var $=F-k,Q=$%2!=0,re=0,ee=0,ue=0,Y=0,J=0;J<T;J++){for(var q=-J+re;q<=J-ee;q+=2){var H=D+q,G;q==-J||q!=J&&N[H-1]<N[H+1]?G=N[H+1]:G=N[H-1]+1;for(var le=G-q;G<F&&le<k&&S.charAt(G)==R.charAt(le);)G++,le++;if(N[H]=G,G>F)ee+=2;else if(le>k)re+=2;else if(Q){var se=D+$-q;if(se>=0&&se<P&&L[se]!=-1){var X=F-L[se];if(G>=X)return d(S,R,G,le)}}}for(var ne=-J+ue;ne<=J-Y;ne+=2){var se=D+ne,X;ne==-J||ne!=J&&L[se-1]<L[se+1]?X=L[se+1]:X=L[se-1]+1;for(var te=X-ne;X<F&&te<k&&S.charAt(F-X-1)==R.charAt(k-te-1);)X++,te++;if(L[se]=X,X>F)Y+=2;else if(te>k)ue+=2;else if(!Q){var H=D+$-ne;if(H>=0&&H<P&&N[H]!=-1){var G=N[H],le=D+G-H;if(X=F-X,G>=X)return d(S,R,G,le)}}}}return[[r,S],[s,R]]}function d(S,R,F,k){var T=S.substring(0,F),D=R.substring(0,k),P=S.substring(F),N=R.substring(k),L=a(T,D),M=a(P,N);return L.concat(M)}function m(S,R){if(!S||!R||S.charAt(0)!=R.charAt(0))return 0;for(var F=0,k=Math.min(S.length,R.length),T=k,D=0;F<T;)S.substring(D,T)==R.substring(D,T)?(F=T,D=F):k=T,T=Math.floor((k-F)/2+F);return T}function p(S,R){if(!S||!R||S.charAt(S.length-1)!=R.charAt(R.length-1))return 0;for(var F=0,k=Math.min(S.length,R.length),T=k,D=0;F<T;)S.substring(S.length-T,S.length-D)==R.substring(R.length-T,R.length-D)?(F=T,D=F):k=T,T=Math.floor((k-F)/2+F);return T}function g(S,R){var F=S.length>R.length?S:R,k=S.length>R.length?R:S;if(F.length<4||k.length*2<F.length)return null;function T(ee,ue,Y){for(var J=ee.substring(Y,Y+Math.floor(ee.length/4)),q=-1,H="",G,le,se,X;(q=ue.indexOf(J,q+1))!=-1;){var ne=m(ee.substring(Y),ue.substring(q)),te=p(ee.substring(0,Y),ue.substring(0,q));H.length<te+ne&&(H=ue.substring(q-te,q)+ue.substring(q,q+ne),G=ee.substring(0,Y-te),le=ee.substring(Y+ne),se=ue.substring(0,q-te),X=ue.substring(q+ne))}return H.length*2>=ee.length?[G,le,se,X,H]:null}var D=T(F,k,Math.ceil(F.length/4)),P=T(F,k,Math.ceil(F.length/2)),N;if(!D&&!P)return null;P?D?N=D[4].length>P[4].length?D:P:N=P:N=D;var L,M,$,Q;S.length>R.length?(L=N[0],M=N[1],$=N[2],Q=N[3]):($=N[0],Q=N[1],L=N[2],M=N[3]);var re=N[4];return[L,M,$,Q,re]}function w(S){S.push([o,""]);for(var R=0,F=0,k=0,T="",D="",P;R<S.length;)switch(S[R][0]){case s:k++,D+=S[R][1],R++;break;case r:F++,T+=S[R][1],R++;break;case o:F+k>1?(F!==0&&k!==0&&(P=m(D,T),P!==0&&(R-F-k>0&&S[R-F-k-1][0]==o?S[R-F-k-1][1]+=D.substring(0,P):(S.splice(0,0,[o,D.substring(0,P)]),R++),D=D.substring(P),T=T.substring(P)),P=p(D,T),P!==0&&(S[R][1]=D.substring(D.length-P)+S[R][1],D=D.substring(0,D.length-P),T=T.substring(0,T.length-P))),F===0?S.splice(R-k,F+k,[s,D]):k===0?S.splice(R-F,F+k,[r,T]):S.splice(R-F-k,F+k,[r,T],[s,D]),R=R-F-k+(F?1:0)+(k?1:0)+1):R!==0&&S[R-1][0]==o?(S[R-1][1]+=S[R][1],S.splice(R,1)):R++,k=0,F=0,T="",D="";break}S[S.length-1][1]===""&&S.pop();var N=!1;for(R=1;R<S.length-1;)S[R-1][0]==o&&S[R+1][0]==o&&(S[R][1].substring(S[R][1].length-S[R-1][1].length)==S[R-1][1]?(S[R][1]=S[R-1][1]+S[R][1].substring(0,S[R][1].length-S[R-1][1].length),S[R+1][1]=S[R-1][1]+S[R+1][1],S.splice(R-1,1),N=!0):S[R][1].substring(0,S[R+1][1].length)==S[R+1][1]&&(S[R-1][1]+=S[R+1][1],S[R][1]=S[R][1].substring(S[R+1][1].length)+S[R+1][1],S.splice(R+1,1),N=!0)),R++;N&&w(S)}var _=a;_.INSERT=s,_.DELETE=r,_.EQUAL=o,t.exports=_;function A(S,R){if(R===0)return[o,S];for(var F=0,k=0;k<S.length;k++){var T=S[k];if(T[0]===r||T[0]===o){var D=F+T[1].length;if(R===D)return[k+1,S];if(R<D){S=S.slice();var P=R-F,N=[T[0],T[1].slice(0,P)],L=[T[0],T[1].slice(P)];return S.splice(k,1,N,L),[k+1,S]}else F=D}}throw new Error("cursor_pos is out of bounds!")}function v(S,R){var F=A(S,R),k=F[1],T=F[0],D=k[T],P=k[T+1];if(D==null)return S;if(D[0]!==o)return S;if(P!=null&&D[1]+P[1]===P[1]+D[1])return k.splice(T,2,P,D),I(k,T,2);if(P!=null&&P[1].indexOf(D[1])===0){k.splice(T,2,[P[0],D[1]],[0,D[1]]);var N=P[1].slice(D[1].length);return N.length>0&&k.splice(T+2,0,[P[0],N]),I(k,T,3)}else return S}function E(S){for(var R=!1,F=function(P){return P.charCodeAt(0)>=56320&&P.charCodeAt(0)<=57343},k=function(P){return P.charCodeAt(P.length-1)>=55296&&P.charCodeAt(P.length-1)<=56319},T=2;T<S.length;T+=1)S[T-2][0]===o&&k(S[T-2][1])&&S[T-1][0]===r&&F(S[T-1][1])&&S[T][0]===s&&F(S[T][1])&&(R=!0,S[T-1][1]=S[T-2][1].slice(-1)+S[T-1][1],S[T][1]=S[T-2][1].slice(-1)+S[T][1],S[T-2][1]=S[T-2][1].slice(0,-1));if(!R)return S;for(var D=[],T=0;T<S.length;T+=1)S[T][1].length>0&&D.push(S[T]);return D}function I(S,R,F){for(var k=R+F-1;k>=0&&k>=R-1;k--)if(k+1<S.length){var T=S[k],D=S[k+1];T[0]===D[1]&&S.splice(k,2,[T[0],T[1]+D[1]])}return S}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:r,n.shim=r;function r(s){var o=[];for(var a in s)o.push(a);return o}},function(t,n){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=r?s:o,n.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}n.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(t,n){var r=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(h,d,m){this.fn=h,this.context=d,this.once=m||!1}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],m,p;if(this._eventsCount===0)return d;for(p in m=this._events)r.call(m,p)&&d.push(s?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},u.prototype.listeners=function(d,m){var p=s?s+d:d,g=this._events[p];if(m)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var w=0,_=g.length,A=new Array(_);w<_;w++)A[w]=g[w].fn;return A},u.prototype.emit=function(d,m,p,g,w,_){var A=s?s+d:d;if(!this._events[A])return!1;var v=this._events[A],E=arguments.length,I,S;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),E){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,m),!0;case 3:return v.fn.call(v.context,m,p),!0;case 4:return v.fn.call(v.context,m,p,g),!0;case 5:return v.fn.call(v.context,m,p,g,w),!0;case 6:return v.fn.call(v.context,m,p,g,w,_),!0}for(S=1,I=new Array(E-1);S<E;S++)I[S-1]=arguments[S];v.fn.apply(v.context,I)}else{var R=v.length,F;for(S=0;S<R;S++)switch(v[S].once&&this.removeListener(d,v[S].fn,void 0,!0),E){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,m);break;case 3:v[S].fn.call(v[S].context,m,p);break;case 4:v[S].fn.call(v[S].context,m,p,g);break;default:if(!I)for(F=1,I=new Array(E-1);F<E;F++)I[F-1]=arguments[F];v[S].fn.apply(v[S].context,I)}}return!0},u.prototype.on=function(d,m,p){var g=new a(m,p||this),w=s?s+d:d;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],g]:this._events[w].push(g):(this._events[w]=g,this._eventsCount++),this},u.prototype.once=function(d,m,p){var g=new a(m,p||this,!0),w=s?s+d:d;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],g]:this._events[w].push(g):(this._events[w]=g,this._eventsCount++),this},u.prototype.removeListener=function(d,m,p,g){var w=s?s+d:d;if(!this._events[w])return this;if(!m)return--this._eventsCount===0?this._events=new o:delete this._events[w],this;var _=this._events[w];if(_.fn)_.fn===m&&(!g||_.once)&&(!p||_.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[w]);else{for(var A=0,v=[],E=_.length;A<E;A++)(_[A].fn!==m||g&&!_[A].once||p&&_[A].context!==p)&&v.push(_[A]);v.length?this._events[w]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new o:delete this._events[w]}return this},u.prototype.removeAllListeners=function(d){var m;return d?(m=s?s+d:d,this._events[m]&&(--this._eventsCount===0?this._events=new o:delete this._events[m])):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=s,u.EventEmitter=u,typeof t<"u"&&(t.exports=u)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe},o=function(){function fe(ve,Ie){var Re=[],Ae=!0,rt=!1,qe=void 0;try{for(var Qe=ve[Symbol.iterator](),st;!(Ae=(st=Qe.next()).done)&&(Re.push(st.value),!(Ie&&Re.length===Ie));Ae=!0);}catch(ft){rt=!0,qe=ft}finally{try{!Ae&&Qe.return&&Qe.return()}finally{if(rt)throw qe}}return Re}return function(ve,Ie){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return fe(ve,Ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function fe(ve,Ie){for(var Re=0;Re<Ie.length;Re++){var Ae=Ie[Re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(ve,Ae.key,Ae)}}return function(ve,Ie,Re){return Ie&&fe(ve.prototype,Ie),Re&&fe(ve,Re),ve}}(),u=r(3),h=L(u),d=r(2),m=L(d),p=r(0),g=L(p),w=r(5),_=L(w),A=r(10),v=L(A),E=r(9),I=L(E),S=r(36),R=r(37),F=r(13),k=L(F),T=r(26),D=r(38),P=r(39),N=r(40);function L(fe){return fe&&fe.__esModule?fe:{default:fe}}function M(fe,ve,Ie){return ve in fe?Object.defineProperty(fe,ve,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):fe[ve]=Ie,fe}function $(fe,ve){if(!(fe instanceof ve))throw new TypeError("Cannot call a class as a function")}function Q(fe,ve){if(!fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve&&(typeof ve=="object"||typeof ve=="function")?ve:fe}function re(fe,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ve);fe.prototype=Object.create(ve&&ve.prototype,{constructor:{value:fe,enumerable:!1,writable:!0,configurable:!0}}),ve&&(Object.setPrototypeOf?Object.setPrototypeOf(fe,ve):fe.__proto__=ve)}var ee=(0,v.default)("quill:clipboard"),ue="__ql-matcher",Y=[[Node.TEXT_NODE,mt],[Node.TEXT_NODE,Fe],["br",ye],[Node.ELEMENT_NODE,Fe],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,Be],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,$e],["li",Oe],["b",te.bind(te,"bold")],["i",te.bind(te,"italic")],["style",xe]],J=[S.AlignAttribute,D.DirectionAttribute].reduce(function(fe,ve){return fe[ve.keyName]=ve,fe},{}),q=[S.AlignStyle,R.BackgroundStyle,T.ColorStyle,D.DirectionStyle,P.FontStyle,N.SizeStyle].reduce(function(fe,ve){return fe[ve.keyName]=ve,fe},{}),H=function(fe){re(ve,fe);function ve(Ie,Re){$(this,ve);var Ae=Q(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,Ie,Re));return Ae.quill.root.addEventListener("paste",Ae.onPaste.bind(Ae)),Ae.container=Ae.quill.addContainer("ql-clipboard"),Ae.container.setAttribute("contenteditable",!0),Ae.container.setAttribute("tabindex",-1),Ae.matchers=[],Y.concat(Ae.options.matchers).forEach(function(rt){var qe=o(rt,2),Qe=qe[0],st=qe[1];!Re.matchVisual&&st===Be||Ae.addMatcher(Qe,st)}),Ae}return a(ve,[{key:"addMatcher",value:function(Re,Ae){this.matchers.push([Re,Ae])}},{key:"convert",value:function(Re){if(typeof Re=="string")return this.container.innerHTML=Re.replace(/\>\r?\n +\</g,"><"),this.convert();var Ae=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ae[k.default.blotName]){var rt=this.container.innerText;return this.container.innerHTML="",new m.default().insert(rt,M({},k.default.blotName,Ae[k.default.blotName]))}var qe=this.prepareMatching(),Qe=o(qe,2),st=Qe[0],ft=Qe[1],gt=ne(this.container,st,ft);return se(gt,`
`)&&gt.ops[gt.ops.length-1].attributes==null&&(gt=gt.compose(new m.default().retain(gt.length()-1).delete(1))),ee.log("convert",this.container.innerHTML,gt),this.container.innerHTML="",gt}},{key:"dangerouslyPasteHTML",value:function(Re,Ae){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof Re=="string")this.quill.setContents(this.convert(Re),Ae),this.quill.setSelection(0,_.default.sources.SILENT);else{var qe=this.convert(Ae);this.quill.updateContents(new m.default().retain(Re).concat(qe),rt),this.quill.setSelection(Re+qe.length(),_.default.sources.SILENT)}}},{key:"onPaste",value:function(Re){var Ae=this;if(!(Re.defaultPrevented||!this.quill.isEnabled())){var rt=this.quill.getSelection(),qe=new m.default().retain(rt.index),Qe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(_.default.sources.SILENT),setTimeout(function(){qe=qe.concat(Ae.convert()).delete(rt.length),Ae.quill.updateContents(qe,_.default.sources.USER),Ae.quill.setSelection(qe.length()-rt.length,_.default.sources.SILENT),Ae.quill.scrollingContainer.scrollTop=Qe,Ae.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Re=this,Ae=[],rt=[];return this.matchers.forEach(function(qe){var Qe=o(qe,2),st=Qe[0],ft=Qe[1];switch(st){case Node.TEXT_NODE:rt.push(ft);break;case Node.ELEMENT_NODE:Ae.push(ft);break;default:[].forEach.call(Re.container.querySelectorAll(st),function(gt){gt[ue]=gt[ue]||[],gt[ue].push(ft)});break}}),[Ae,rt]}}]),ve}(I.default);H.DEFAULTS={matchers:[],matchVisual:!0};function G(fe,ve,Ie){return(typeof ve>"u"?"undefined":s(ve))==="object"?Object.keys(ve).reduce(function(Re,Ae){return G(Re,Ae,ve[Ae])},fe):fe.reduce(function(Re,Ae){return Ae.attributes&&Ae.attributes[ve]?Re.push(Ae):Re.insert(Ae.insert,(0,h.default)({},M({},ve,Ie),Ae.attributes))},new m.default)}function le(fe){if(fe.nodeType!==Node.ELEMENT_NODE)return{};var ve="__ql-computed-style";return fe[ve]||(fe[ve]=window.getComputedStyle(fe))}function se(fe,ve){for(var Ie="",Re=fe.ops.length-1;Re>=0&&Ie.length<ve.length;--Re){var Ae=fe.ops[Re];if(typeof Ae.insert!="string")break;Ie=Ae.insert+Ie}return Ie.slice(-1*ve.length)===ve}function X(fe){if(fe.childNodes.length===0)return!1;var ve=le(fe);return["block","list-item"].indexOf(ve.display)>-1}function ne(fe,ve,Ie){return fe.nodeType===fe.TEXT_NODE?Ie.reduce(function(Re,Ae){return Ae(fe,Re)},new m.default):fe.nodeType===fe.ELEMENT_NODE?[].reduce.call(fe.childNodes||[],function(Re,Ae){var rt=ne(Ae,ve,Ie);return Ae.nodeType===fe.ELEMENT_NODE&&(rt=ve.reduce(function(qe,Qe){return Qe(Ae,qe)},rt),rt=(Ae[ue]||[]).reduce(function(qe,Qe){return Qe(Ae,qe)},rt)),Re.concat(rt)},new m.default):new m.default}function te(fe,ve,Ie){return G(Ie,fe,!0)}function ae(fe,ve){var Ie=g.default.Attributor.Attribute.keys(fe),Re=g.default.Attributor.Class.keys(fe),Ae=g.default.Attributor.Style.keys(fe),rt={};return Ie.concat(Re).concat(Ae).forEach(function(qe){var Qe=g.default.query(qe,g.default.Scope.ATTRIBUTE);Qe!=null&&(rt[Qe.attrName]=Qe.value(fe),rt[Qe.attrName])||(Qe=J[qe],Qe!=null&&(Qe.attrName===qe||Qe.keyName===qe)&&(rt[Qe.attrName]=Qe.value(fe)||void 0),Qe=q[qe],Qe!=null&&(Qe.attrName===qe||Qe.keyName===qe)&&(Qe=q[qe],rt[Qe.attrName]=Qe.value(fe)||void 0))}),Object.keys(rt).length>0&&(ve=G(ve,rt)),ve}function de(fe,ve){var Ie=g.default.query(fe);if(Ie==null)return ve;if(Ie.prototype instanceof g.default.Embed){var Re={},Ae=Ie.value(fe);Ae!=null&&(Re[Ie.blotName]=Ae,ve=new m.default().insert(Re,Ie.formats(fe)))}else typeof Ie.formats=="function"&&(ve=G(ve,Ie.blotName,Ie.formats(fe)));return ve}function ye(fe,ve){return se(ve,`
`)||ve.insert(`
`),ve}function xe(){return new m.default}function Oe(fe,ve){var Ie=g.default.query(fe);if(Ie==null||Ie.blotName!=="list-item"||!se(ve,`
`))return ve;for(var Re=-1,Ae=fe.parentNode;!Ae.classList.contains("ql-clipboard");)(g.default.query(Ae)||{}).blotName==="list"&&(Re+=1),Ae=Ae.parentNode;return Re<=0?ve:ve.compose(new m.default().retain(ve.length()-1).retain(1,{indent:Re}))}function Fe(fe,ve){return se(ve,`
`)||(X(fe)||ve.length()>0&&fe.nextSibling&&X(fe.nextSibling))&&ve.insert(`
`),ve}function Be(fe,ve){if(X(fe)&&fe.nextElementSibling!=null&&!se(ve,`

`)){var Ie=fe.offsetHeight+parseFloat(le(fe).marginTop)+parseFloat(le(fe).marginBottom);fe.nextElementSibling.offsetTop>fe.offsetTop+Ie*1.5&&ve.insert(`
`)}return ve}function $e(fe,ve){var Ie={},Re=fe.style||{};return Re.fontStyle&&le(fe).fontStyle==="italic"&&(Ie.italic=!0),Re.fontWeight&&(le(fe).fontWeight.startsWith("bold")||parseInt(le(fe).fontWeight)>=700)&&(Ie.bold=!0),Object.keys(Ie).length>0&&(ve=G(ve,Ie)),parseFloat(Re.textIndent||0)>0&&(ve=new m.default().insert("	").concat(ve)),ve}function mt(fe,ve){var Ie=fe.data;if(fe.parentNode.tagName==="O:P")return ve.insert(Ie.trim());if(Ie.trim().length===0&&fe.parentNode.classList.contains("ql-clipboard"))return ve;if(!le(fe.parentNode).whiteSpace.startsWith("pre")){var Re=function(rt,qe){return qe=qe.replace(/[^\u00a0]/g,""),qe.length<1&&rt?" ":qe};Ie=Ie.replace(/\r\n/g," ").replace(/\n/g," "),Ie=Ie.replace(/\s\s+/g,Re.bind(Re,!0)),(fe.previousSibling==null&&X(fe.parentNode)||fe.previousSibling!=null&&X(fe.previousSibling))&&(Ie=Ie.replace(/^\s+/,Re.bind(Re,!1))),(fe.nextSibling==null&&X(fe.parentNode)||fe.nextSibling!=null&&X(fe.nextSibling))&&(Ie=Ie.replace(/\s+$/,Re.bind(Re,!1)))}return ve.insert(Ie)}n.default=H,n.matchAttributor=ae,n.matchBlot=de,n.matchNewline=Fe,n.matchSpacing=Be,n.matchText=mt},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(_,A){for(var v=0;v<A.length;v++){var E=A[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,A,v){return A&&w(_.prototype,A),v&&w(_,v),_}}(),o=function w(_,A,v){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,A);if(E===void 0){var I=Object.getPrototypeOf(_);return I===null?void 0:w(I,A,v)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(v)}},a=r(6),u=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function m(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function p(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){p(_,w);function _(){return d(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"optimize",value:function(v){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),_}(u.default);g.blotName="bold",g.tagName=["STRONG","B"],n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var s=function(){function N(L,M){var $=[],Q=!0,re=!1,ee=void 0;try{for(var ue=L[Symbol.iterator](),Y;!(Q=(Y=ue.next()).done)&&($.push(Y.value),!(M&&$.length===M));Q=!0);}catch(J){re=!0,ee=J}finally{try{!Q&&ue.return&&ue.return()}finally{if(re)throw ee}}return $}return function(L,M){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return N(L,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function N(L,M){for(var $=0;$<M.length;$++){var Q=M[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(L,Q.key,Q)}}return function(L,M,$){return M&&N(L.prototype,M),$&&N(L,$),L}}(),a=r(2),u=v(a),h=r(0),d=v(h),m=r(5),p=v(m),g=r(10),w=v(g),_=r(9),A=v(_);function v(N){return N&&N.__esModule?N:{default:N}}function E(N,L,M){return L in N?Object.defineProperty(N,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):N[L]=M,N}function I(N,L){if(!(N instanceof L))throw new TypeError("Cannot call a class as a function")}function S(N,L){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:N}function R(N,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);N.prototype=Object.create(L&&L.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(N,L):N.__proto__=L)}var F=(0,w.default)("quill:toolbar"),k=function(N){R(L,N);function L(M,$){I(this,L);var Q=S(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,M,$));if(Array.isArray(Q.options.container)){var re=document.createElement("div");D(re,Q.options.container),M.container.parentNode.insertBefore(re,M.container),Q.container=re}else typeof Q.options.container=="string"?Q.container=document.querySelector(Q.options.container):Q.container=Q.options.container;if(!(Q.container instanceof HTMLElement)){var ee;return ee=F.error("Container required for toolbar",Q.options),S(Q,ee)}return Q.container.classList.add("ql-toolbar"),Q.controls=[],Q.handlers={},Object.keys(Q.options.handlers).forEach(function(ue){Q.addHandler(ue,Q.options.handlers[ue])}),[].forEach.call(Q.container.querySelectorAll("button, select"),function(ue){Q.attach(ue)}),Q.quill.on(p.default.events.EDITOR_CHANGE,function(ue,Y){ue===p.default.events.SELECTION_CHANGE&&Q.update(Y)}),Q.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var ue=Q.quill.selection.getRange(),Y=s(ue,1),J=Y[0];Q.update(J)}),Q}return o(L,[{key:"addHandler",value:function($,Q){this.handlers[$]=Q}},{key:"attach",value:function($){var Q=this,re=[].find.call($.classList,function(ue){return ue.indexOf("ql-")===0});if(re){if(re=re.slice(3),$.tagName==="BUTTON"&&$.setAttribute("type","button"),this.handlers[re]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[re]==null){F.warn("ignoring attaching to disabled format",re,$);return}if(d.default.query(re)==null){F.warn("ignoring attaching to nonexistent format",re,$);return}}var ee=$.tagName==="SELECT"?"change":"click";$.addEventListener(ee,function(ue){var Y=void 0;if($.tagName==="SELECT"){if($.selectedIndex<0)return;var J=$.options[$.selectedIndex];J.hasAttribute("selected")?Y=!1:Y=J.value||!1}else $.classList.contains("ql-active")?Y=!1:Y=$.value||!$.hasAttribute("value"),ue.preventDefault();Q.quill.focus();var q=Q.quill.selection.getRange(),H=s(q,1),G=H[0];if(Q.handlers[re]!=null)Q.handlers[re].call(Q,Y);else if(d.default.query(re).prototype instanceof d.default.Embed){if(Y=prompt("Enter "+re),!Y)return;Q.quill.updateContents(new u.default().retain(G.index).delete(G.length).insert(E({},re,Y)),p.default.sources.USER)}else Q.quill.format(re,Y,p.default.sources.USER);Q.update(G)}),this.controls.push([re,$])}}},{key:"update",value:function($){var Q=$==null?{}:this.quill.getFormat($);this.controls.forEach(function(re){var ee=s(re,2),ue=ee[0],Y=ee[1];if(Y.tagName==="SELECT"){var J=void 0;if($==null)J=null;else if(Q[ue]==null)J=Y.querySelector("option[selected]");else if(!Array.isArray(Q[ue])){var q=Q[ue];typeof q=="string"&&(q=q.replace(/\"/g,'\\"')),J=Y.querySelector('option[value="'+q+'"]')}J==null?(Y.value="",Y.selectedIndex=-1):J.selected=!0}else if($==null)Y.classList.remove("ql-active");else if(Y.hasAttribute("value")){var H=Q[ue]===Y.getAttribute("value")||Q[ue]!=null&&Q[ue].toString()===Y.getAttribute("value")||Q[ue]==null&&!Y.getAttribute("value");Y.classList.toggle("ql-active",H)}else Y.classList.toggle("ql-active",Q[ue]!=null)})}}]),L}(A.default);k.DEFAULTS={};function T(N,L,M){var $=document.createElement("button");$.setAttribute("type","button"),$.classList.add("ql-"+L),M!=null&&($.value=M),N.appendChild($)}function D(N,L){Array.isArray(L[0])||(L=[L]),L.forEach(function(M){var $=document.createElement("span");$.classList.add("ql-formats"),M.forEach(function(Q){if(typeof Q=="string")T($,Q);else{var re=Object.keys(Q)[0],ee=Q[re];Array.isArray(ee)?P($,re,ee):T($,re,ee)}}),N.appendChild($)})}function P(N,L,M){var $=document.createElement("select");$.classList.add("ql-"+L),M.forEach(function(Q){var re=document.createElement("option");Q!==!1?re.setAttribute("value",Q):re.setAttribute("selected","selected"),$.appendChild(re)}),N.appendChild($)}k.DEFAULTS={container:null,handlers:{clean:function(){var L=this,M=this.quill.getSelection();if(M!=null)if(M.length==0){var $=this.quill.getFormat();Object.keys($).forEach(function(Q){d.default.query(Q,d.default.Scope.INLINE)!=null&&L.quill.format(Q,!1)})}else this.quill.removeFormat(M,p.default.sources.USER)},direction:function(L){var M=this.quill.getFormat().align;L==="rtl"&&M==null?this.quill.format("align","right",p.default.sources.USER):!L&&M==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",L,p.default.sources.USER)},indent:function(L){var M=this.quill.getSelection(),$=this.quill.getFormat(M),Q=parseInt($.indent||0);if(L==="+1"||L==="-1"){var re=L==="+1"?1:-1;$.direction==="rtl"&&(re*=-1),this.quill.format("indent",Q+re,p.default.sources.USER)}},link:function(L){L===!0&&(L=prompt("Enter link URL:")),this.quill.format("link",L,p.default.sources.USER)},list:function(L){var M=this.quill.getSelection(),$=this.quill.getFormat(M);L==="check"?$.list==="checked"||$.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",L,p.default.sources.USER)}}},n.default=k,n.addControls=D},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(_,A){for(var v=0;v<A.length;v++){var E=A[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,A,v){return A&&w(_.prototype,A),v&&w(_,v),_}}(),o=function w(_,A,v){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,A);if(E===void 0){var I=Object.getPrototypeOf(_);return I===null?void 0:w(I,A,v)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(v)}},a=r(28),u=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function m(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function p(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){p(_,w);function _(A,v){d(this,_);var E=m(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A));return E.label.innerHTML=v,E.container.classList.add("ql-color-picker"),[].slice.call(E.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(I){I.classList.add("ql-primary")}),E}return s(_,[{key:"buildItem",value:function(v){var E=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"buildItem",this).call(this,v);return E.style.backgroundColor=v.getAttribute("value")||"",E}},{key:"selectItem",value:function(v,E){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,v,E);var I=this.label.querySelector(".ql-color-label"),S=v&&v.getAttribute("data-value")||"";I&&(I.tagName==="line"?I.style.stroke=S:I.style.fill=S)}}]),_}(u.default);n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(_,A){for(var v=0;v<A.length;v++){var E=A[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,A,v){return A&&w(_.prototype,A),v&&w(_,v),_}}(),o=function w(_,A,v){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,A);if(E===void 0){var I=Object.getPrototypeOf(_);return I===null?void 0:w(I,A,v)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(v)}},a=r(28),u=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function m(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function p(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){p(_,w);function _(A,v){d(this,_);var E=m(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A));return E.container.classList.add("ql-icon-picker"),[].forEach.call(E.container.querySelectorAll(".ql-picker-item"),function(I){I.innerHTML=v[I.getAttribute("data-value")||""]}),E.defaultItem=E.container.querySelector(".ql-selected"),E.selectItem(E.defaultItem),E}return s(_,[{key:"selectItem",value:function(v,E){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,v,E),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),_}(u.default);n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function u(h,d){for(var m=0;m<d.length;m++){var p=d[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,d,m){return d&&u(h.prototype,d),m&&u(h,m),h}}();function o(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(h,d){var m=this;o(this,u),this.quill=h,this.boundsContainer=d||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return s(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var m=d.left+d.width/2-this.root.offsetWidth/2,p=d.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var g=this.boundsContainer.getBoundingClientRect(),w=this.root.getBoundingClientRect(),_=0;if(w.right>g.right&&(_=g.right-w.right,this.root.style.left=m+_+"px"),w.left<g.left&&(_=g.left-w.left,this.root.style.left=m+_+"px"),w.bottom>g.bottom){var A=w.bottom-w.top,v=d.bottom-d.top+A;this.root.style.top=p-v+"px",this.root.classList.add("ql-flip")}return _}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u}();n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function P(N,L){var M=[],$=!0,Q=!1,re=void 0;try{for(var ee=N[Symbol.iterator](),ue;!($=(ue=ee.next()).done)&&(M.push(ue.value),!(L&&M.length===L));$=!0);}catch(Y){Q=!0,re=Y}finally{try{!$&&ee.return&&ee.return()}finally{if(Q)throw re}}return M}return function(N,L){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return P(N,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function P(N,L,M){N===null&&(N=Function.prototype);var $=Object.getOwnPropertyDescriptor(N,L);if($===void 0){var Q=Object.getPrototypeOf(N);return Q===null?void 0:P(Q,L,M)}else{if("value"in $)return $.value;var re=$.get;return re===void 0?void 0:re.call(M)}},a=function(){function P(N,L){for(var M=0;M<L.length;M++){var $=L[M];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}return function(N,L,M){return L&&P(N.prototype,L),M&&P(N,M),N}}(),u=r(3),h=I(u),d=r(8),m=I(d),p=r(43),g=I(p),w=r(27),_=I(w),A=r(15),v=r(41),E=I(v);function I(P){return P&&P.__esModule?P:{default:P}}function S(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function R(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:P}function F(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}var k=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(P){F(N,P);function N(L,M){S(this,N),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=k);var $=R(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,M));return $.quill.container.classList.add("ql-snow"),$}return a(N,[{key:"extendToolbar",value:function(M){M.container.classList.add("ql-snow"),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),E.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),E.default),this.tooltip=new D(this.quill,this.options.bounds),M.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function($,Q){M.handlers.link.call(M,!Q.format.link)})}}]),N}(g.default);T.DEFAULTS=(0,h.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){if(N){var L=this.quill.getSelection();if(L==null||L.length==0)return;var M=this.quill.getText(L);/^\S+@\S+\.\S+$/.test(M)&&M.indexOf("mailto:")!==0&&(M="mailto:"+M);var $=this.quill.theme.tooltip;$.edit("link",M)}else this.quill.format("link",!1)}}}}});var D=function(P){F(N,P);function N(L,M){S(this,N);var $=R(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,L,M));return $.preview=$.root.querySelector("a.ql-preview"),$}return a(N,[{key:"listen",value:function(){var M=this;o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function($){M.root.classList.contains("ql-editing")?M.save():M.edit("link",M.preview.textContent),$.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function($){if(M.linkRange!=null){var Q=M.linkRange;M.restoreFocus(),M.quill.formatText(Q,"link",!1,m.default.sources.USER),delete M.linkRange}$.preventDefault(),M.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function($,Q,re){if($!=null){if($.length===0&&re===m.default.sources.USER){var ee=M.quill.scroll.descendant(_.default,$.index),ue=s(ee,2),Y=ue[0],J=ue[1];if(Y!=null){M.linkRange=new A.Range($.index-J,Y.length());var q=_.default.formats(Y.domNode);M.preview.textContent=q,M.preview.setAttribute("href",q),M.show(),M.position(M.quill.getBounds(M.linkRange));return}}else delete M.linkRange;M.hide()}})}},{key:"show",value:function(){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),N}(p.BaseTooltip);D.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=T},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(29),o=Ae(s),a=r(36),u=r(38),h=r(64),d=r(65),m=Ae(d),p=r(66),g=Ae(p),w=r(67),_=Ae(w),A=r(37),v=r(26),E=r(39),I=r(40),S=r(56),R=Ae(S),F=r(68),k=Ae(F),T=r(27),D=Ae(T),P=r(69),N=Ae(P),L=r(70),M=Ae(L),$=r(71),Q=Ae($),re=r(72),ee=Ae(re),ue=r(73),Y=Ae(ue),J=r(13),q=Ae(J),H=r(74),G=Ae(H),le=r(75),se=Ae(le),X=r(57),ne=Ae(X),te=r(41),ae=Ae(te),de=r(28),ye=Ae(de),xe=r(59),Oe=Ae(xe),Fe=r(60),Be=Ae(Fe),$e=r(61),mt=Ae($e),fe=r(108),ve=Ae(fe),Ie=r(62),Re=Ae(Ie);function Ae(rt){return rt&&rt.__esModule?rt:{default:rt}}o.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":A.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":E.FontClass,"attributors/class/size":I.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":A.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":E.FontStyle,"attributors/style/size":I.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":h.IndentClass,"formats/background":A.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":E.FontClass,"formats/size":I.SizeClass,"formats/blockquote":m.default,"formats/code-block":q.default,"formats/header":g.default,"formats/list":_.default,"formats/bold":R.default,"formats/code":J.Code,"formats/italic":k.default,"formats/link":D.default,"formats/script":N.default,"formats/strike":M.default,"formats/underline":Q.default,"formats/image":ee.default,"formats/video":Y.default,"formats/list/item":w.ListItem,"modules/formula":G.default,"modules/syntax":se.default,"modules/toolbar":ne.default,"themes/bubble":ve.default,"themes/snow":Re.default,"ui/icons":ae.default,"ui/picker":ye.default,"ui/icon-picker":Be.default,"ui/color-picker":Oe.default,"ui/tooltip":mt.default},!0),n.default=o.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var s=function(){function _(A,v){for(var E=0;E<v.length;E++){var I=v[E];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,v,E){return v&&_(A.prototype,v),E&&_(A,E),A}}(),o=function _(A,v,E){A===null&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,v);if(I===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:_(S,v,E)}else{if("value"in I)return I.value;var R=I.get;return R===void 0?void 0:R.call(E)}},a=r(0),u=h(a);function h(_){return _&&_.__esModule?_:{default:_}}function d(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function m(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function p(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var g=function(_){p(A,_);function A(){return d(this,A),m(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"add",value:function(E,I){if(I==="+1"||I==="-1"){var S=this.value(E)||0;I=I==="+1"?S+1:S-1}return I===0?(this.remove(E),!0):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"add",this).call(this,E,I)}},{key:"canAdd",value:function(E,I){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"canAdd",this).call(this,E,I)||o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"canAdd",this).call(this,E,parseInt(I))}},{key:"value",value:function(E){return parseInt(o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,E))||void 0}}]),A}(u.default.Attributor.Class),w=new g("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(4),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var m=function(p){d(g,p);function g(){return u(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default);m.blotName="blockquote",m.tagName="blockquote",n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(w,_){for(var A=0;A<_.length;A++){var v=_[A];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(w,v.key,v)}}return function(w,_,A){return _&&g(w.prototype,_),A&&g(w,A),w}}(),o=r(4),a=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function h(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function d(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function m(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){m(w,g);function w(){return h(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,null,[{key:"formats",value:function(A){return this.tagName.indexOf(A.tagName)+1}}]),w}(a.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var s=function(){function S(R,F){for(var k=0;k<F.length;k++){var T=F[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(R,T.key,T)}}return function(R,F,k){return F&&S(R.prototype,F),k&&S(R,k),R}}(),o=function S(R,F,k){R===null&&(R=Function.prototype);var T=Object.getOwnPropertyDescriptor(R,F);if(T===void 0){var D=Object.getPrototypeOf(R);return D===null?void 0:S(D,F,k)}else{if("value"in T)return T.value;var P=T.get;return P===void 0?void 0:P.call(k)}},a=r(0),u=g(a),h=r(4),d=g(h),m=r(25),p=g(m);function g(S){return S&&S.__esModule?S:{default:S}}function w(S,R,F){return R in S?Object.defineProperty(S,R,{value:F,enumerable:!0,configurable:!0,writable:!0}):S[R]=F,S}function _(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}function A(S,R){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:S}function v(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(S,R):S.__proto__=R)}var E=function(S){v(R,S);function R(){return _(this,R),A(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return s(R,[{key:"format",value:function(k,T){k===I.blotName&&!T?this.replaceWith(u.default.create(this.statics.scope)):o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,k,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(k,T){return this.parent.isolate(this.offset(this.parent),this.length()),k===this.parent.statics.blotName?(this.parent.replaceWith(k,T),this):(this.parent.unwrap(),o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replaceWith",this).call(this,k,T))}}],[{key:"formats",value:function(k){return k.tagName===this.tagName?void 0:o(R.__proto__||Object.getPrototypeOf(R),"formats",this).call(this,k)}}]),R}(d.default);E.blotName="list-item",E.tagName="LI";var I=function(S){v(R,S),s(R,null,[{key:"create",value:function(k){var T=k==="ordered"?"OL":"UL",D=o(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,T);return(k==="checked"||k==="unchecked")&&D.setAttribute("data-checked",k==="checked"),D}},{key:"formats",value:function(k){if(k.tagName==="OL")return"ordered";if(k.tagName==="UL")return k.hasAttribute("data-checked")?k.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function R(F){_(this,R);var k=A(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,F)),T=function(P){if(P.target.parentNode===F){var N=k.statics.formats(F),L=u.default.find(P.target);N==="checked"?L.format("list","unchecked"):N==="unchecked"&&L.format("list","checked")}};return F.addEventListener("touchstart",T),F.addEventListener("mousedown",T),k}return s(R,[{key:"format",value:function(k,T){this.children.length>0&&this.children.tail.format(k,T)}},{key:"formats",value:function(){return w({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(k,T){if(k instanceof E)o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,k,T);else{var D=T==null?this.length():T.offset(this),P=this.split(D);P.parent.insertBefore(k,P)}}},{key:"optimize",value:function(k){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,k);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(k){if(k.statics.blotName!==this.statics.blotName){var T=u.default.create(this.statics.defaultChild);k.moveChildren(T),this.appendChild(T)}o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replace",this).call(this,k)}}]),R}(p.default);I.blotName="list",I.scope=u.default.Scope.BLOCK_BLOT,I.tagName=["OL","UL"],I.defaultChild="list-item",I.allowedChildren=[E],n.ListItem=E,n.default=I},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(56),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var m=function(p){d(g,p);function g(){return u(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default);m.blotName="italic",m.tagName=["EM","I"],n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function w(_,A){for(var v=0;v<A.length;v++){var E=A[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,A,v){return A&&w(_.prototype,A),v&&w(_,v),_}}(),o=function w(_,A,v){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,A);if(E===void 0){var I=Object.getPrototypeOf(_);return I===null?void 0:w(I,A,v)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(v)}},a=r(6),u=h(a);function h(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function m(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function p(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){p(_,w);function _(){return d(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),_}(u.default);g.blotName="script",g.tagName=["SUB","SUP"],n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var m=function(p){d(g,p);function g(){return u(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default);m.blotName="strike",m.tagName="S",n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),o=a(s);function a(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var m=function(p){d(g,p);function g(){return u(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default);m.blotName="underline",m.tagName="U",n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function A(v,E){for(var I=0;I<E.length;I++){var S=E[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,E,I){return E&&A(v.prototype,E),I&&A(v,I),v}}(),o=function A(v,E,I){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,E);if(S===void 0){var R=Object.getPrototypeOf(v);return R===null?void 0:A(R,E,I)}else{if("value"in S)return S.value;var F=S.get;return F===void 0?void 0:F.call(I)}},a=r(0),u=d(a),h=r(27);function d(A){return A&&A.__esModule?A:{default:A}}function m(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function p(A,v){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:A}function g(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);A.prototype=Object.create(v&&v.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(A,v):A.__proto__=v)}var w=["alt","height","width"],_=function(A){g(v,A);function v(){return m(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(I,S){w.indexOf(I)>-1?S?this.domNode.setAttribute(I,S):this.domNode.removeAttribute(I):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,I,S)}}],[{key:"create",value:function(I){var S=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,I);return typeof I=="string"&&S.setAttribute("src",this.sanitize(I)),S}},{key:"formats",value:function(I){return w.reduce(function(S,R){return I.hasAttribute(R)&&(S[R]=I.getAttribute(R)),S},{})}},{key:"match",value:function(I){return/\.(jpe?g|gif|png)$/.test(I)||/^data:image\/.+;base64/.test(I)}},{key:"sanitize",value:function(I){return(0,h.sanitize)(I,["http","https","data"])?I:"//:0"}},{key:"value",value:function(I){return I.getAttribute("src")}}]),v}(u.default.Embed);_.blotName="image",_.tagName="IMG",n.default=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function A(v,E){for(var I=0;I<E.length;I++){var S=E[I];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,E,I){return E&&A(v.prototype,E),I&&A(v,I),v}}(),o=function A(v,E,I){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,E);if(S===void 0){var R=Object.getPrototypeOf(v);return R===null?void 0:A(R,E,I)}else{if("value"in S)return S.value;var F=S.get;return F===void 0?void 0:F.call(I)}},a=r(4),u=r(27),h=d(u);function d(A){return A&&A.__esModule?A:{default:A}}function m(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function p(A,v){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:A}function g(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);A.prototype=Object.create(v&&v.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(A,v):A.__proto__=v)}var w=["height","width"],_=function(A){g(v,A);function v(){return m(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(I,S){w.indexOf(I)>-1?S?this.domNode.setAttribute(I,S):this.domNode.removeAttribute(I):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,I,S)}}],[{key:"create",value:function(I){var S=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,I);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(I)),S}},{key:"formats",value:function(I){return w.reduce(function(S,R){return I.hasAttribute(R)&&(S[R]=I.getAttribute(R)),S},{})}},{key:"sanitize",value:function(I){return h.default.sanitize(I)}},{key:"value",value:function(I){return I.getAttribute("src")}}]),v}(a.BlockEmbed);_.blotName="video",_.className="ql-video",_.tagName="IFRAME",n.default=_},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var s=function(){function I(S,R){for(var F=0;F<R.length;F++){var k=R[F];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(S,k.key,k)}}return function(S,R,F){return R&&I(S.prototype,R),F&&I(S,F),S}}(),o=function I(S,R,F){S===null&&(S=Function.prototype);var k=Object.getOwnPropertyDescriptor(S,R);if(k===void 0){var T=Object.getPrototypeOf(S);return T===null?void 0:I(T,R,F)}else{if("value"in k)return k.value;var D=k.get;return D===void 0?void 0:D.call(F)}},a=r(35),u=g(a),h=r(5),d=g(h),m=r(9),p=g(m);function g(I){return I&&I.__esModule?I:{default:I}}function w(I,S){if(!(I instanceof S))throw new TypeError("Cannot call a class as a function")}function _(I,S){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:I}function A(I,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);I.prototype=Object.create(S&&S.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(I,S):I.__proto__=S)}var v=function(I){A(S,I);function S(){return w(this,S),_(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return s(S,null,[{key:"create",value:function(F){var k=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,F);return typeof F=="string"&&(window.katex.render(F,k,{throwOnError:!1,errorColor:"#f00"}),k.setAttribute("data-value",F)),k}},{key:"value",value:function(F){return F.getAttribute("data-value")}}]),S}(u.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var E=function(I){A(S,I),s(S,null,[{key:"register",value:function(){d.default.register(v,!0)}}]);function S(){w(this,S);var R=_(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return R}return S}(p.default);n.FormulaBlot=v,n.default=E},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var s=function(){function F(k,T){for(var D=0;D<T.length;D++){var P=T[D];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,P.key,P)}}return function(k,T,D){return T&&F(k.prototype,T),D&&F(k,D),k}}(),o=function F(k,T,D){k===null&&(k=Function.prototype);var P=Object.getOwnPropertyDescriptor(k,T);if(P===void 0){var N=Object.getPrototypeOf(k);return N===null?void 0:F(N,T,D)}else{if("value"in P)return P.value;var L=P.get;return L===void 0?void 0:L.call(D)}},a=r(0),u=_(a),h=r(5),d=_(h),m=r(9),p=_(m),g=r(13),w=_(g);function _(F){return F&&F.__esModule?F:{default:F}}function A(F,k){if(!(F instanceof k))throw new TypeError("Cannot call a class as a function")}function v(F,k){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:F}function E(F,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);F.prototype=Object.create(k&&k.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(F,k):F.__proto__=k)}var I=function(F){E(k,F);function k(){return A(this,k),v(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return s(k,[{key:"replaceWith",value:function(D){this.domNode.textContent=this.domNode.textContent,this.attach(),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,D)}},{key:"highlight",value:function(D){var P=this.domNode.textContent;this.cachedText!==P&&((P.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=D(P),this.domNode.normalize(),this.attach()),this.cachedText=P)}}]),k}(w.default);I.className="ql-syntax";var S=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),R=function(F){E(k,F),s(k,null,[{key:"register",value:function(){d.default.register(S,!0),d.default.register(I,!0)}}]);function k(T,D){A(this,k);var P=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,T,D));if(typeof P.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var N=null;return P.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(N),N=setTimeout(function(){P.highlight(),N=null},P.options.interval)}),P.highlight(),P}return s(k,[{key:"highlight",value:function(){var D=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var P=this.quill.getSelection();this.quill.scroll.descendants(I).forEach(function(N){N.highlight(D.options.highlight)}),this.quill.update(d.default.sources.SILENT),P!=null&&this.quill.setSelection(P,d.default.sources.SILENT)}}}]),k}(p.default);R.DEFAULTS={highlight:function(){return window.hljs==null?null:function(F){var k=window.hljs.highlightAuto(F);return k.value}}(),interval:1e3},n.CodeBlock=I,n.CodeToken=S,n.default=R},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var s=function k(T,D,P){T===null&&(T=Function.prototype);var N=Object.getOwnPropertyDescriptor(T,D);if(N===void 0){var L=Object.getPrototypeOf(T);return L===null?void 0:k(L,D,P)}else{if("value"in N)return N.value;var M=N.get;return M===void 0?void 0:M.call(P)}},o=function(){function k(T,D){for(var P=0;P<D.length;P++){var N=D[P];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(T,N.key,N)}}return function(T,D,P){return D&&k(T.prototype,D),P&&k(T,P),T}}(),a=r(3),u=A(a),h=r(8),d=A(h),m=r(43),p=A(m),g=r(15),w=r(41),_=A(w);function A(k){return k&&k.__esModule?k:{default:k}}function v(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")}function E(k,T){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:k}function I(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);k.prototype=Object.create(T&&T.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(k,T):k.__proto__=T)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],R=function(k){I(T,k);function T(D,P){v(this,T),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=S);var N=E(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,D,P));return N.quill.container.classList.add("ql-bubble"),N}return o(T,[{key:"extendToolbar",value:function(P){this.tooltip=new F(this.quill,this.options.bounds),this.tooltip.root.appendChild(P.container),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),_.default)}}]),T}(p.default);R.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var F=function(k){I(T,k);function T(D,P){v(this,T);var N=E(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,D,P));return N.quill.on(d.default.events.EDITOR_CHANGE,function(L,M,$,Q){if(L===d.default.events.SELECTION_CHANGE)if(M!=null&&M.length>0&&Q===d.default.sources.USER){N.show(),N.root.style.left="0px",N.root.style.width="",N.root.style.width=N.root.offsetWidth+"px";var re=N.quill.getLines(M.index,M.length);if(re.length===1)N.position(N.quill.getBounds(M));else{var ee=re[re.length-1],ue=N.quill.getIndex(ee),Y=Math.min(ee.length()-1,M.index+M.length-ue),J=N.quill.getBounds(new g.Range(ue,Y));N.position(J)}}else document.activeElement!==N.textbox&&N.quill.hasFocus()&&N.hide()}),N}return o(T,[{key:"listen",value:function(){var P=this;s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){P.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!P.root.classList.contains("ql-hidden")){var N=P.quill.getSelection();N!=null&&P.position(P.quill.getBounds(N))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(P){var N=s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,P),L=this.root.querySelector(".ql-tooltip-arrow");if(L.style.marginLeft="",N===0)return N;L.style.marginLeft=-1*N-L.offsetWidth/2+"px"}}]),T}(m.BaseTooltip);F.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=F,n.default=R},function(t,n,r){t.exports=r(63)}]).default})}(e_)),e_.exports}var fo,fL;function oJ(){if(fL)return fo;fL=1;var i=fo&&fo.__extends||function(){var d=function(m,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var _ in w)w.hasOwnProperty(_)&&(g[_]=w[_])},d(m,p)};return function(m,p){d(m,p);function g(){this.constructor=m}m.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),e=fo&&fo.__assign||function(){return e=Object.assign||function(d){for(var m,p=1,g=arguments.length;p<g;p++){m=arguments[p];for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(d[w]=m[w])}return d},e.apply(this,arguments)},t=fo&&fo.__spreadArrays||function(){for(var d=0,m=0,p=arguments.length;m<p;m++)d+=arguments[m].length;for(var g=Array(d),w=0,m=0;m<p;m++)for(var _=arguments[m],A=0,v=_.length;A<v;A++,w++)g[w]=_[A];return g},n=fo&&fo.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},r=n(M1()),s=n(CT()),o=n(rJ()),a=n(sJ()),u=function(d){i(m,d);function m(p){var g=d.call(this,p)||this;g.dirtyProps=["modules","formats","bounds","theme","children"],g.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],g.state={generation:0},g.selection=null,g.onEditorChange=function(_,A,v,E){var I,S,R,F;_==="text-change"?(S=(I=g).onEditorChangeText)===null||S===void 0||S.call(I,g.editor.root.innerHTML,A,E,g.unprivilegedEditor):_==="selection-change"&&((F=(R=g).onEditorChangeSelection)===null||F===void 0||F.call(R,A,E,g.unprivilegedEditor))};var w=g.isControlled()?p.value:p.defaultValue;return g.value=w??"",g}return m.prototype.validateProps=function(p){var g;if(r.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(r.default.Children.count(p.children)){var w=r.default.Children.only(p.children);if(((g=w)===null||g===void 0?void 0:g.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},m.prototype.shouldComponentUpdate=function(p,g){var w=this,_;if(this.validateProps(p),!this.editor||this.state.generation!==g.generation)return!0;if("value"in p){var A=this.getEditorContents(),v=(_=p.value,_??"");this.isEqualValue(v,A)||this.setEditorContents(this.editor,v)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),t(this.cleanProps,this.dirtyProps).some(function(E){return!o.default(p[E],w.props[E])})},m.prototype.shouldComponentRegenerate=function(p){var g=this;return this.dirtyProps.some(function(w){return!o.default(p[w],g.props[w])})},m.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},m.prototype.componentWillUnmount=function(){this.destroyEditor()},m.prototype.componentDidUpdate=function(p,g){var w=this;if(this.editor&&this.shouldComponentRegenerate(p)){var _=this.editor.getContents(),A=this.editor.getSelection();this.regenerationSnapshot={delta:_,selection:A},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==g.generation){var v=this.regenerationSnapshot,_=v.delta,E=v.selection;delete this.regenerationSnapshot,this.instantiateEditor();var I=this.editor;I.setContents(_),h(function(){return w.setEditorSelection(I,E)})}},m.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},m.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},m.prototype.isControlled=function(){return"value"in this.props},m.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},m.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},m.prototype.createEditor=function(p,g){var w=new a.default(p,g);return g.tabIndex!=null&&this.setEditorTabIndex(w,g.tabIndex),this.hookEditor(w),w},m.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},m.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},m.prototype.getEditorContents=function(){return this.value},m.prototype.getEditorSelection=function(){return this.selection},m.prototype.isDelta=function(p){return p&&p.ops},m.prototype.isEqualValue=function(p,g){return this.isDelta(p)&&this.isDelta(g)?o.default(p.ops,g.ops):o.default(p,g)},m.prototype.setEditorContents=function(p,g){var w=this;this.value=g;var _=this.getEditorSelection();typeof g=="string"?p.setContents(p.clipboard.convert(g)):p.setContents(g),h(function(){return w.setEditorSelection(p,_)})},m.prototype.setEditorSelection=function(p,g){if(this.selection=g,g){var w=p.getLength();g.index=Math.max(0,Math.min(g.index,w-1)),g.length=Math.max(0,Math.min(g.length,w-1-g.index)),p.setSelection(g)}},m.prototype.setEditorTabIndex=function(p,g){var w,_;!((_=(w=p)===null||w===void 0?void 0:w.scroll)===null||_===void 0)&&_.domNode&&(p.scroll.domNode.tabIndex=g)},m.prototype.setEditorReadOnly=function(p,g){g?p.disable():p.enable()},m.prototype.makeUnprivilegedEditor=function(p){var g=p;return{getHTML:function(){return g.root.innerHTML},getLength:g.getLength.bind(g),getText:g.getText.bind(g),getContents:g.getContents.bind(g),getSelection:g.getSelection.bind(g),getBounds:g.getBounds.bind(g)}},m.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=s.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},m.prototype.renderEditingArea=function(){var p=this,g=this.props,w=g.children,_=g.preserveWhitespace,A=this.state.generation,v={key:A,ref:function(E){p.editingArea=E}};return r.default.Children.count(w)?r.default.cloneElement(r.default.Children.only(w),v):_?r.default.createElement("pre",e({},v)):r.default.createElement("div",e({},v))},m.prototype.render=function(){var p;return r.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},m.prototype.onEditorChangeText=function(p,g,w,_){var A,v;if(this.editor){var E=this.isDelta(this.value)?_.getContents():_.getHTML();E!==this.getEditorContents()&&(this.lastDeltaChangeSet=g,this.value=E,(v=(A=this.props).onChange)===null||v===void 0||v.call(A,p,g,w,_))}},m.prototype.onEditorChangeSelection=function(p,g,w){var _,A,v,E,I,S;if(this.editor){var R=this.getEditorSelection(),F=!R&&p,k=R&&!p;o.default(p,R)||(this.selection=p,(A=(_=this.props).onChangeSelection)===null||A===void 0||A.call(_,p,g,w),F?(E=(v=this.props).onFocus)===null||E===void 0||E.call(v,p,g,w):k&&((S=(I=this.props).onBlur)===null||S===void 0||S.call(I,R,g,w)))}},m.prototype.focus=function(){this.editor&&this.editor.focus()},m.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},m.displayName="React Quill",m.Quill=a.default,m.defaultProps={theme:"snow",modules:{},readOnly:!1},m}(r.default.Component);function h(d){Promise.resolve().then(d)}return fo=u,fo}var aJ=oJ();const lJ=L0(aJ);class uJ extends wp{constructor(e){super(e),this.quillRef=Je.createRef()}getFormHtml(){return C.jsx("div",{children:C.jsx(lJ,{ref:this.quillRef,modules:{toolbar:[["bold","italic","underline","blockquote"],[{color:["#F4F5F8","#E6FFFD","#99AFD1","#ecd23a","#fd5259","#D7ABF7","#9EFFA0","#F4F5F888","#E6FFFD77","#99AFD188","#ecd23a88","#fd525988","#D7ABF788","#9EFFA088","#000000","#E6FFFD44","#99AFD155","#ecd23a55","#fd525955","#D7ABF755","#9EFFA055"]},{background:[!1,"black","#00274D","#C1A71B","#5F0C0C","#4B0082","#002E07"]}],[,"code-block"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[],["clean"]]},style:this.props.wrapperStyle?{...this.props.wrapperStyle}:{minHeight:"100%",padding:"8px",minWidth:"99%",width:"100%"},theme:"snow",value:this.obj[0].getJson()[this.props.name],onChange:this.objDispatch})})}}class MB extends eh{constructor(e){super(e)}createFileInfo(e){const t=new Date,n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");let o="images/"+`${Math.floor(Math.random()*9999)}-${n+r}`+e.target.files[0].name;return this.fileInfo={selectedFile:e.target.files[0],path:o,pic:URL.createObjectURL(e.target.files[0])},this.setState({...this.fileInfo}),this.fileInfo}async prepareOnChange(){let e=await this.operationsFactory.prepare({prepare:{...this.props.prepareOnChange},clean:!0});e=e[0],this.obj=e}async changeHandler(e){var n;await this.createFileInfo(e),this.props.prepareOnChange&&await this.prepareOnChange(),this.props.callBackFunc&&await this.props.callBackFunc(this.obj,this.fileInfo);let t;if(await this.APIService.uploadPics(this.fileInfo.selectedFile,this.fileInfo.path),!this.obj.getPicSrc){if(t=await this.APIService.downloadPics(this.fileInfo.path),!this.props.skipUpdate&&!this.state.skipUpdate)if((n=this.obj)!=null&&n.length)for(let r of this.obj)await r.setCompState({[this.props.uploadAttribute||"picURL"]:t});else await this.obj.setCompState({[this.props.uploadAttribute||"picURL"]:t});this.props.downloadPicsCallBackFunc&&this.props.downloadPicsCallBackFunc(this.obj,this.fileInfo)}return this.props.runOnChange&&this.onSubmit(),t}async onSubmit(){this.props.prepareOnChange&&await this.operationsFactory.addToComponentList(),await this.obj.update(),this.props.finishCallBackFunc&&this.props.finishCallBackFunc(this.obj),this.dispatch({imgUploaded:this.obj})}additionalSetup(){this.wrapper.setStyle({maxWidth:"300px",maxHeight:"30px",width:"fit-content"}),this.label.setStyle({display:"inline-block",height:"35px",maxWidth:"fit-content",cursor:"pointer",position:"relative"}),this.form.updateProps({accept:"image/png, image/gif, image/jpeg, image/jpg, image/webp, image/svg+xml, application/pdf",style:{position:"absolute",top:0,left:0,cursor:"pointer",width:"100%",height:"100%",opacity:0},size:"6",type:"file",name:"file",onChange:this.changeHandler})}getInnerContent(){let e=this.getFormHtml();return this.innerContent=[this.label.getHtml({content:e,type:"label"}),this.props.errorText&&this.error.getHtml()],this.innerContent}getFormHtml(){return this.content=this.props.content||C.jsx(C.Fragment,{children:"Upload"}),C.jsxs("div",{className:this.props.containerStyle||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]})}}class cJ extends MB{constructor(e){super(e)}getFormHtml(){var t,n;this.content=this.props.content||C.jsx(C.Fragment,{children:"Upload"});let e=(n=(t=this.obj)==null?void 0:t[0])==null?void 0:n.getJson()[this.props.uploadImgAttribute||"picURL"];return C.jsxs(C.Fragment,{children:[C.jsxs("div",{style:this.props.containerStyle,className:this.props.containerClass||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]}),(this.state.pic||e)&&C.jsx("img",{style:this.props.uploadedImgStyle,className:this.props.uploadedImgClass||"uploadedImg",src:this.state.pic||e})]})}}let hJ=class extends eh{constructor(e){super(e),this.state.formClass="FCDefaultDelButton",this.content="Delete"}buttonClickFunc(){this.props.obj.del()}};class dJ extends SB{constructor(){super(...arguments);ie(this,"factory",{input:wp,textarea:wp,select:wp,math:qG,addButton:MG,baseButton:eh,popupButton:UG,updateButton:VG,runButton:HG,quill:uJ,upload:MB,showUpload:cJ,del:hJ})}}class jI extends dt{constructor(){super();ie(this,"addToProps",{});ie(this,"addToInitialSetup",[]);ie(this,"getterFunc");this.state={}}getProps(){return{interface:this.interface,app:this.app,theme:this.props.theme,type:this.props.type,...this.props,...this.addToProps}}setComponentList(){var t;this.componentList=(t=this.interface)==null?void 0:t.getComponentList()}setProps(){}getHtml(){this.setProps();let t=this.getProps();return this.setGetterFunc(this.props.getterFunc),this.getterFunc&&(this.html=this.getterFunc({...t},t.type||this.state.type)),C.jsx(C.Fragment,{children:this.html})}setGetterFunc(t){this.getterFunc=t||this.interface.getMainFunc()||this.getterFunc}addToFactory(){if(this.props.addToFactory){let t=this.interface.getFactory();for(let n of this.props.addToFactory)t.registerComponent(n.type,n.comp)}}preSetup(){this.componentPreSetup(),this.initialSetupFunctions=[...this.initialSetupFunctions,this.setComponentList,this.addToFactory,...this.addToInitialSetup]}componentPreSetup(){}}class BB extends eg{constructor(){super(...arguments);ie(this,"mainFunc",this.getFormComponent)}getFactory(){return this.factory===void 0&&(this.factory=new dJ),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new FG),this.themeFactory}getFormComponent(t,n){return n=n||"input",this.factory.getComponent(n,t)}}const jB=new BB;class nt extends jI{constructor(e){super(e),this.state={type:"input"},this.interface=jB}}class vA extends nt{constructor(e){super(e),this.state={type:"popupButton"}}}class qI extends nt{constructor(e){super(e),this.state={type:"updateButton"}}}class No extends nt{constructor(e){super(e),this.state={type:"runButton"}}}class fJ extends nt{constructor(e){super(e),this.state={type:e.uploadType||"upload"}}}class wA extends nt{constructor(e){super(e),this.state={type:e.uploadType||"del"}}}class Ei extends dt{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setCell,this.getUseId],this.state={...this.state,defaultTheme:"defaultColumn",interface:"map",wrapperClass:"MCCell",linkClass:"MCLink"},this.setItemPropsRan=!1}setCell(){this.cell=this.props.cell}preSetup(){this.setComponents(["link","wrapper","item","option"])}setitemprops(){let e={...this.createPropObj("item","cell"),className:this.cell.class||this.theme[this.state.classKey],style:this.cell.style};this.cell.itemClick&&(e.checkItemClick=!0),this.setItemPropsRan?this.item.setProps(e):(this.builderObserver.subscribe(e),this.setItemPropsRan=!0)}setwrapperprops(){let e={...this.createPropObj("wrapper","cell")};this.setWrapperPropsRan?this.wrapper.setProps(e):(this.builderObserver.subscribe(e),this.setWrapperPropsRan=!0)}getOption(){return C.jsx(C.Fragment,{})}getUseId(){return this.cell&&this.obj.getJson&&(this.useId=this.cell.useId===!1?"":this.cell.useId===void 0?this.obj.getJson()._id:this.obj.getJson()[this.cell.useId]),this.useId}getInnerContent(){return this.innerContent=[this.item.getHtml({type:this.state.itemType||"span",content:this.getOption()})],this.innerContent}getLinkUrl(){var t,n,r;return(t=this.cell)!=null&&t.to?this.cell.to:`/${(r=(n=this.obj)==null?void 0:n.getJson())==null?void 0:r.type}/${this.useId}`}getLinkFunc(){if(this.cell.forceUpdate){let e=()=>{this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}if(this.cell.linkClick){let e=()=>{this.cell.linkClick(this.obj),this.cell.forceUpdate&&this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}}getHtml(){var t;this.mapInnerContent(),this.getLinkFunc(),this.cell.type;let e=(t=this.cell)!=null&&t.hasLink?this.link.getHtml({type:this.state.linkType||"link",content:this.innerContent,props:{to:this.getLinkUrl()}}):this.wrapper.getHtml({type:this.state.wrapperType||"span",content:this.innerContent});return this.html=C.jsx(C.Fragment,{children:e}),this.html}}class UI extends Ei{constructor(e){super(e),this.state.classKey="MCDelItem",this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setDel]}setDel(){this.cell.itemClick=this.del}del(){let e=this.props.app;this.cell.popop?e.dispatch({popupSwitch:"del",delComponent:this.obj}):this.obj.del()}getOption(){return C.jsx("div",{children:"X"})}}class VI extends Ei{constructor(e){super(e),this.state.classKey="MCEditItem",this.state.itemClick=this.edit}edit(){this.props.app.dispatch({popupSwitch:"edit",currentPopupComponent:this.obj})}getOption(){return"edit"}}class _A extends Ei{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getName(){let e=this.cell;this.name=e.name,this.name||(this.name=e)}getOption(){return this.getName(),this.obj.getJson()[this.name]}}class pJ extends _A{constructor(e){super(e),this.state.classKey="MCTextItem"}getOption(){return C.jsx(C.Fragment,{children:this.cell.name})}}class mJ extends Ei{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){let e=this.cell.custom;return C.jsx(e,{...this.props,masterCell:this})}}class qB extends Ei{constructor(e){super(e),this.state.defaultClassName="MCImgItem",this.state.itemType="img"}getPicSrc(){var e,t;return this.obj.getJson&&(this.src=(t=this.obj)==null?void 0:t.getJson()[((e=this.state.cell)==null?void 0:e.src)||"picURL"]),this.cell.imgSrc&&(this.src=this.cell.imgSrc),this.src}additionalPostSetup(){this.getPicSrc(),this.src&&this.item.addProps({src:this.src,alt:"picture goes here"})}}class gJ extends Ei{constructor(e){super(e)}getOption(){({...this.cell,...this.props})}}class HI extends Ei{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setList,this.setFactory],this.state={...this.state,mapContainerClass:"MCMapContainer",interface:"map",mapSectionClass:"MCMapSection"},this.defaultTypes=["del","edit","img"]}setFactory(){this.factory=this.interface.getFactory()}getDefaultTypes(){return this.defaultTypes}checkCellForDefaults(e){let t=this.getDefaultTypes();return t[t.indexOf(e)]}textOrAttribute(e,t){return e.getJson&&(e!=null&&e.getJson()[t])?"attribute":"text"}getType(e,t){let n=e.type;return n||(n=this.checkCellForDefaults(e),n||(n=this.textOrAttribute(t,e))),n}getProps(e,t){return{obj:t,...this.props,interface:this.interface,cell:e,theme:this.props.theme}}getCellList(e){let t=this.props.cells;return C.jsx(C.Fragment,{children:t.map((n,r)=>{let s=this.getType(n,e),o=this.getProps(n,e);return this.factory.getComponent(s,o)})})}getListHtml(){return C.jsx(C.Fragment,{children:this.list.map((e,t)=>this.mapSection.getHtml({type:"div",content:this.getCellList(e)}))})}setList(){this.list=this.props.list}preSetup(){this.setComponents(["mapContainer","mapSection","link"])}getHtml(){let e=this.mapContainer.getHtml({type:"div",content:this.getListHtml()});return this.html=C.jsx(C.Fragment,{children:e}),this.html}}class pL extends UI{constructor(e){super(e),this.state.classKey="MCCustomDelItem"}getOption(){return C.jsx(this.cell.custom,{...this.props,masterCell:this})}}class yJ extends UI{constructor(e){super(e),this.state.classKey="MCDelItem"}getOption(){return this.props.delText||"delete"}}const vJ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDgiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0OCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0OCIKICAgdGlmZjpJbWFnZVdpZHRoPSI0OCIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDktMDhUMTQ6NDQ6MzYtMDY6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgeG1wTU06YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgeG1wTU06c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgeG1wTU06d2hlbj0iMjAyMy0wOC0wNFQxMDoyNTozOC0wNjowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+zw4Y8wAAAYFpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/ZshgRJmFhcUkZGE0KLGxmMmvwmJmlF+bmee9GTUzXu89SbbKVlFi49eCv4CtslaKSMmWNbFhes7z1Ejm3M49n/u995zuPRc8iaySM8vDkMtbRmw4EpyanglWPlGFjwDthJOKqY/HhxKUtPdbypx4HXJqlT73r9XMq6YCZT7hAUU3LOER4bFlS3d4SzigZJLzwifCHYZcUPjG0VMuPzucdvnTYSMRi4KnXjiY/sWpX6xkjJywvJyWXHZJ+bmP8xK/mp+MS2wWb8IkxjARgowySJReuuiXuZcQ3XTKihL54e/8CRYlV5FZZwWDBdJksOgQdUmqqxI10VUZWVac/v/tq6n1dLvV/RGoeLTt11ao3ITChm1/HNh24RC8D3CeL+Yv7kPfm+gbRa1lD+rW4PSiqKW24WwdGu/1pJH8lrziHk2Dl2OonYaGK6iedXv2s8/RHSRW5asuYWcX2uR83dwXqRtoBLx59Y4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAU5SURBVGiB1ZpfbFNVHMc/bW/H7d3WGujaMeqy8ECMEcgiICDDOI0hEpco8iDECMHEByBRSAwvxCgJ0ZhIzEBjAma8QEyEBwUejEyibg/GYcKYYRCIQEHaVZa2621v/10f7m1pu/5d/9B9k5vc3nvOuZ9v77nn3+8YqIFsdpcIPA88CzhyDgBvzjEGjPh97ki1zzbMNaPN7rIBLwH9aPBihUVEgBHgIjDs97n9c+Go2IDN7rIAO4B3AWkuD82jEHACGPL73OFKMpZtwGZ3mYA3gT2AvSK88jUFHAXO+H3uRDkZyjJgs7s6gUHgmbmzVaSrwB6/z+0pldBUKoHN7loBDAE9VWMVkNEI/WstrZtfbG1f+qTZ/J8/sWgmpL4qStYxRQ4UNVH0DdjsrgHgENBSS+BMdTkF4ehH9q6VT7Wkvyc5oiYPfzX94PS5GR9w0O9z/1Aof8E3oMN/VixNtVriFITTRxzdy3rMWS2YWTAY+tdZ2uWwql6eUPpEyXpXkQOT+crIC6dXm8FC92uhJU5BOHXE0e3qFAq+3b5VYpscVuOXJ5TnRMk6mq86zQLUP9ghoL2mxDn6/MCizt6nF2Q1w6oKhpxK3bdKbPM9TCTHr0fXipL1giIHQpn3swzoTeW31PGDTem3PyOhvtWi1LHQZE5dMxg0E6nzlNb1iq0/DsuJwEyyV5SsZxU5oKbuGXPK3UKDmkp/MJncvs97d+JGNKvjyn0DABbRYHx5vaUVWA68kXkvbUDvYffWhRbocQnmbQNttsxrgRnNxPj10iYcdpOgn+7VWYHsN7CDOvWwPS7BfOoLZ/eh9xcu3rW1/YnMe8FQMvn2fu/dK9eicrEyJm/GFP20A3gndd0E6YHZl4B5dtbqlIJ32rW63rfa0haSk/G//o6mR6LRmKqevyQH1/UusHR2CLMYJm5Ew58cm/aq6ZrPclGyfqfIAcUEIErWzcCmesOnVNhEOLh25QLLYscjE+4H8ejOA1PuQDCZzCiiBbilyIFrKQO7gaWNgC9mIhZT1XOX5OCaFaLY5RRa3A/i0bc+8N6574nH85WhyIELJn0y8jEg5EtUD/iiJuKo5y/JwS6HIOz/9OG/heCBLlGynjSJkvUFYKDe8L/+EQke/nra+8oGqV0wPWpn8pmIx+Gn38MzwVBWtcmVAIybRMm6FeitN/x7B6fu37gdi169Hgtv2ljaRJnymETJ+jqwrN7w0ZjWhty+F49N3opFXutvzeoT+lZb2nzTidj4ZFShfN0z8mjiXXd4gBazwbB9ILsvAPD4ErHRy5GifUEeOao2UCn8N4c6ujauEbMGih5fIrZtn+fOP+54rMLHV2fgMcODbmBOagJ4QBsLeecrPOCt2EATwUOlBpoMHiox0ITwoBsYm6fwAGNGtAXWgl14E8NHgFGjvsQ9Ms/gQV+eT/UDw/MMHrRl+fSc+CLaEndaTQ4fQv/TjQB6cOFEZoomhgc4ngqIZA4lhtDW5/OqieCngJOpH2kDemTkaKFcTQIPMJgZxckdzJ1BCy4U1GOGHwfOZl6YtQZms7ucwPc3h7s3lFtqg+CngK25UZtZw2k9we5yS20QfJQCIae88wG/z32lnFIbBA9alCYv05wnNA385z8sFmIqGaXUozXHqF9otZCm0KpN0dpQMoSkyAGPKFkvAKuowQpGmRoHdvp97lulElYa6N6CFkOoZ6B7EDhb00B3pjK2GuwCWivNX0Ah4Dhwsm5bDXKlxxT60TZ8VLPZ42fgl4Zt9sgnfYV7PZVttxmtxXab/wFJap9Ow0di3gAAAABJRU5ErkJggg==";class wJ extends VI{constructor(e){super(e),this.state.classKey="MCEditImgItem",this.state.itemType="img"}additionalPostSetup(){this.getImg(),this.item.setProps({src:this.src})}getImg(){return this.src=this.cell.imgSrc||vJ,this.src}}class _J extends VI{constructor(e){super(e),this.state.classKey="MCCustomEditItem"}getOption(){return C.jsx(this.cell.custom,{...this.props,masterCell:this})}}let AJ=class extends HI{constructor(e){super(e),this.mapContainer=Je.createRef(),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getPicObj,this.getAddComponentButton],this.state={...this.state,index:0,isDragging:void 0,defaultTheme:"interactiveMap"}}_addEventListeners(){var t;this.props;let e=[];for(let n of this.list){let r=document.getElementById(n.getJson()._id);r.addEventListener("mousedown",s=>{this.setState({isDragging:r})}),r.addEventListener("mouseup",s=>{this.setState({isDragging:void 0})}),e.push(r),this.setState({saveList:e})}(t=this.mapContainer)!=null&&t.current&&(this.mapContainer.current.addEventListener("mouseup",n=>{this.currentComp!==void 0&&this.currentComp.update(),this.setState({isDragging:void 0})}),this.mapContainer.current.addEventListener("mousemove",n=>{if(this.state.isDragging!==void 0){let r=this.state.isDragging,s=r.id,o=this.list.find(a=>a.getJson()._id===s);if((o==null?void 0:o.getJson().draggable)!==!1){const a=this.mapContainer.current.getBoundingClientRect(),u=n.pageX-a.left-25,h=n.pageY-a.top-25;o.setCompState({x:u,y:h}),this.currentComp=o,r.style.left=`${u}px`,r.style.top=`${h}px`}}}))}componentDidMount(){this._addEventListeners()}zoom(e){let t=this.mapContainer.current.getBoundingClientRect(),n=t.width*e,r=t.height*e;this.mapContainer.current.style.width=n+"px",this.mapContainer.current.style.height=r+"px";let s=this.state.saveList;for(let o of s){const a=o.style.left||"0",u=o.style.top||"0",h=a.match(/(-?\d*\.?\d+)/),d=u.match(/(-?\d*\.?\d+)/),m=h?parseFloat(h[0]):0,p=d?parseFloat(d[0]):0,g=m*e,w=p*e;o.style.left=g+"px",o.style.top=w+"px"}}componentDidUpdate(e,t){this.props.list.length!==e.list.length&&this._addEventListeners()}getAddComponentButton(){var e,t;if(this.addComponentButton=this.props.addComponentButton,this.addComponentButton!==void 0){let n=typeof this.addComponentButton=="string"?this.addComponentButton:this.addComponentButton.type||"addComponentButton",r=this.props.pinKey||((e=this.mapObj)==null?void 0:e.getJson().pinType)||"pin";this.addComponentButton=this.factory.getComponent(n,{...this.props,theme:this.props.theme||this.state.defaultTheme,mapId:this.mapObj?(t=this.mapObj)==null?void 0:t.getJson()._id:void 0,addType:r,addPinProps:this.props.addPinProps,pinAdded:this._addEventListeners})}}getPicObj(){var t;let e=this.props.imgAttribute||"picURL";this.mapObj&&(this.picSrc=(t=this.mapObj)==null?void 0:t.getJson()[e])}preSetup(){this.setComponents([])}async changePic(e){let t=this.props.list;e=e<0?e=t.length-1:e,e=e>=t.length?0:e,this.mapObj=t[e],await this.setState({index:e}),this._addEventListeners()}setList(){if(!this.listSet){let t=this.props.list[this.state.index];this.mapObj=t;let n=this.props.pinKey||(t==null?void 0:t.getJson().pinType)||"pin",r=this.props.pinAttribute||(t==null?void 0:t.getJson().type)+"Id"||"mapId",s=this.props.mapId||(t==null?void 0:t.getJson()._id);this.list=this.componentList.getList(n,s,r)}}preSetup(){this.setComponents(["mapContainer","right","left","image","zoomIn","zoomOut"])}getIndexAndChangeMap(e){let t=this.props.list.indexOf(this.mapObj)+e;this.changePic(t)}getListHtml(){let e=this.props,t=this.theme,n=this.factory;return C.jsx(C.Fragment,{children:this.list.map((r,s)=>{let o={obj:r,props:e,interface:this.interface,cell:e.pinCell,theme:this.props.them||this.state.defaultTheme,pinProps:this.props.pinProps};return C.jsx("div",{id:r.getJson()._id,className:e.mapSectionClass?e.mapSectionClass:t.MCMapSection,style:{...e.mapSectionStyle,left:r.getJson().x+"px",top:r.getJson().y+"px"},children:C.jsx(C.Fragment,{children:n.getComponent(e.pinType?e.pinType:"attribute",o)})},s)})})}getHtml(){if(this.props.list.length>0){let e=this.props,t=this.theme;return C.jsxs("div",{ref:this.mapContainer,className:e.mapContainerClass?e.mapContainerClass:t.MCMapContainer,style:{...e.mapContainerStyle},children:[C.jsx("img",{src:this.picSrc,className:e.mapClass?e.mapClass:t.MCMap,style:{...e.mapStyle}}),this.getListHtml(),e.addComponentButton&&C.jsx(C.Fragment,{children:this.addComponentButton}),C.jsx("div",{style:{position:"absolute",top:"0px",right:"0px"},onClick:()=>{this.zoom(.5)},children:"zoom out"}),C.jsx("div",{style:{position:"absolute",top:"20px",right:"0px"},onClick:()=>{this.zoom(2)},children:"zoom in"}),C.jsx("div",{style:{position:"absolute",top:"0px",left:"-20px"},onClick:()=>{this.getIndexAndChangeMap(-1)},children:"prev"}),C.jsx("div",{style:{position:"absolute",top:"20px",right:"-20px"},onClick:()=>{this.getIndexAndChangeMap(1)},children:"next"})]})}else this.list=[]}};class bJ extends Ei{constructor(e){super(e)}preSetup(){this.setComponents([])}async createObjType(){let e=this.operationsFactory,t=this.props.addType;await e.prepare({prepare:{type:t,mapId:this.props.mapId,...this.props.addPinProps},clean:!0,run:!0}),this.props.pinAdded()}getHtml(){let e=this.props.text||"+ Add Item";return C.jsxs("div",{onClick:this.createObjType,style:this.props.style,className:this.props.class||this.theme.MCAddButton,children:[e," "]})}}class EJ extends Ei{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getOption(){return this.state.obj}}class CJ extends _A{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getItemClass(){var r;let e=this.cell,t=e.activeAttribute?e.activeAttribute:"_id";if(this.state.obj.getJson()[t]===((r=e.activeItem)==null?void 0:r.getJson()[t])){let s=e.activeClass?e.activeClass:this.theme.MCActiveItem;this.item.setClass(this.item.getClass()+" "+s)}}additionalPostSetup(){this.getItemClass()}}class xJ extends qB{constructor(e){super(e),this.state.classKey="MCLogoItem"}}class SJ extends Ei{constructor(e){super(e),this.state.itemType="div"}getList(){return this.list=this.props.cell.links.filter(e=>(e==null?void 0:e.name)!==void 0),this.list}getHome(){var e;if(!this.state.active){this.home=this.list.find(t=>t.path==="/");for(let t of this.list)t.active=(e=this.home)==null?void 0:e.name}}getOption(){let e=this.props.cell.links.filter(t=>(t==null?void 0:t.name)!==void 0&&t.display!==!1);return C.jsx(er,{list:e,theme:this.cell.linksTheme||"links",mapSectionClass:this.props.cell.linkSectionClass||void 0,mapSectionStyle:this.props.cell.linkSectionStyle||void 0,cells:[{type:"linkItem",class:this.props.cell.linkItemClass||void 0,activeClass:this.props.cell.activeClass||void 0,style:this.props.cell.linkItemStyle||void 0,linkClick:t=>{for(let n of this.props.cell.links)n.active=t==null?void 0:t.name;this.setState({active:t==null?void 0:t.name})}}]})}additionalSetup(){this.getList(),this.getHome()}}class TJ extends Ei{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setUpLinks],this.state.classKey="MCLinkItem",this.state.itemType="div"}setUpLinks(){this.cell.to=this.obj.path,this.useId="",this.cell.hasLink=!0}getActiveClass(){return this.activeClass=this.cell.activeClass||this.theme.MCActiveLink,this.activeClass}setActiveClass(){var n,r,s,o,a;const e=((n=this.obj)==null?void 0:n.path)==="/"||((r=this.obj)==null?void 0:r.path)==="/home",t=window.location.pathname;if(e){const u=t.split("/").filter(Boolean);if(u.length>0&&u[0]!=="home")return}if(((s=this.obj)==null?void 0:s.active)===((o=this.obj)==null?void 0:o.name)||t.includes((a=this.obj)==null?void 0:a.path)){let u=this.obj.name===""?"none":this.getActiveClass();u=u||"",this.item.setClass(this.item.getClass()+" "+u)}}additionalSetup(){this.setActiveClass()}getOption(){var e;return(e=this.props.obj)==null?void 0:e.name}}class IJ extends Ei{constructor(e){super(e),this.state.classKey="MCTextItem"}additionalPostSetup(){this.item.setOnClick(this.cell.logoutFunc||this.APIService.logout)}getOption(){return"logout"}}class DJ extends Ei{constructor(e){super(e),this.state.classKey="MCOrderedArrows",this.state.increment=1,this.state.decrement=-1}increasePosition(){this.obj.updateOrder(this.state.increment)}decreasePosition(){this.obj.updateOrder(this.state.decrement)}increaseArrowUI(){return this.increaseArrow=C.jsx("div",{className:"upward-arrow",onClick:this.decreasePosition}),this.increaseArrow}decreaseArrowUI(){return this.decreaseArrow=C.jsx("div",{style:{marginTop:"5px"},className:"downward-arrow",onClick:this.increasePosition}),this.decreaseArrow}getOption(){return this.increaseArrowUI(),this.decreaseArrowUI(),C.jsxs("div",{style:{marginTop:"-4px"},className:"fitCC",children:[this.increaseArrow,this.decreaseArrow]})}}class kJ extends Ei{constructor(e){super(e),this.state.displayState=!1,this.state.itemType="div"}displayOption(){return C.jsx("div",{style:{position:"absolute",left:"0px",top:"0px"},className:this.state.displayState?"downward-arrow":"right-arrow",onClick:()=>{this.wrapper.setStyle({...this.wrapper.getStyle(),height:"200px"}),this.setState({displayState:!this.state.displayState})}})}mapOption(){return C.jsx(er,{name:this.props.name,filter:{attribute:this.props.filter.attribute,search:this.obj.getJson()._id},cells:[...this.props.cells]})}additionalPostSetup(){this.item.setStyle({...this.item.getStyle(),position:"relative"})}getOption(){return C.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[this.displayOption(),"  ",this.state.displayState&&this.mapOption(),"  "]})}}class RJ extends _A{constructor(){super(),this.state.classKey="MCBackgroundItem",this.state.wrapperClass="MCCellBackground",this.state.linkClass="MCBackgroundLink"}additionalPostSetup(){let t={width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",textAlign:"center",fontSize:"50px",background:`linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${this.cell.pirSRC||this.obj.getJson()[this.cell.picAttribute||"picURL"]}) no-repeat center center`,backgroundSize:"cover",textDecoration:"none"};this.wrapper.setStyle({...this.wrapper.getStyle(),...t}),this.link.setStyle({...this.wrapper.getStyle(),...t})}}class PJ extends Ei{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){return this.cell.custom}}const AA=0,th=1,ng=2,UB=4;function mL(i){return()=>i}function NJ(i){i()}function VB(i,e){return t=>i(e(t))}function gL(i,e){return()=>i(e)}function OJ(i,e){return t=>i(e,t)}function zI(i){return i!==void 0}function LJ(...i){return()=>{i.map(NJ)}}function rg(){}function bA(i,e){return e(i),i}function FJ(i,e){return e(i)}function vn(...i){return i}function Zt(i,e){return i(th,e)}function St(i,e){i(AA,e)}function $I(i){i(ng)}function Sr(i){return i(UB)}function it(i,e){return Zt(i,OJ(e,AA))}function Ia(i,e){const t=i(th,n=>{t(),e(n)});return t}function yL(i){let e,t;return n=>r=>{e=r,t&&clearTimeout(t),t=setTimeout(()=>{n(e)},i)}}function HB(i,e){return i===e}function gn(i=HB){let e;return t=>n=>{i(e,n)||(e=n,t(n))}}function vt(i){return e=>t=>{i(t)&&e(t)}}function Ye(i){return e=>VB(e,i)}function ga(i){return e=>()=>{e(i)}}function ke(i,...e){const t=MJ(...e);return(n,r)=>{switch(n){case ng:$I(i);return;case th:return Zt(i,t(r))}}}function wa(i,e){return t=>n=>{t(e=i(e,n))}}function $m(i){return e=>t=>{i>0?i--:e(t)}}function Rc(i){let e=null,t;return n=>r=>{e=r,!t&&(t=setTimeout(()=>{t=void 0,n(e)},i))}}function kt(...i){const e=new Array(i.length);let t=0,n=null;const r=Math.pow(2,i.length)-1;return i.forEach((s,o)=>{const a=Math.pow(2,o);Zt(s,u=>{const h=t;t=t|a,e[o]=u,h!==r&&t===r&&n&&(n(),n=null)})}),s=>o=>{const a=()=>{s([o].concat(e))};t===r?a():n=a}}function MJ(...i){return e=>i.reduceRight(FJ,e)}function BJ(i){let e,t;const n=()=>e==null?void 0:e();return function(r,s){switch(r){case th:return s?t===s?void 0:(n(),t=s,e=Zt(i,s),e):(n(),rg);case ng:n(),t=null;return}}}function Ne(i){let e=i;const t=qt();return(n,r)=>{switch(n){case AA:e=r;break;case th:{r(e);break}case UB:return e}return t(n,r)}}function ii(i,e){return bA(Ne(e),t=>it(i,t))}function qt(){const i=[];return(e,t)=>{switch(e){case AA:i.slice().forEach(n=>{n(t)});return;case ng:i.splice(0,i.length);return;case th:return i.push(t),()=>{const n=i.indexOf(t);n>-1&&i.splice(n,1)}}}}function As(i){return bA(qt(),e=>it(i,e))}function Gt(i,e=[],{singleton:t}={singleton:!0}){return{constructor:i,dependencies:e,id:jJ(),singleton:t}}const jJ=()=>Symbol();function qJ(i){const e=new Map,t=({constructor:n,dependencies:r,id:s,singleton:o})=>{if(o&&e.has(s))return e.get(s);const a=n(r.map(u=>t(u)));return o&&e.set(s,a),a};return t(i)}function hr(...i){const e=qt(),t=new Array(i.length);let n=0;const r=Math.pow(2,i.length)-1;return i.forEach((s,o)=>{const a=Math.pow(2,o);Zt(s,u=>{t[o]=u,n=n|a,n===r&&St(e,t)})}),function(s,o){switch(s){case ng:{$I(e);return}case th:return n===r&&o(t),Zt(e,o)}}}function _t(i,e=HB){return ke(i,gn(e))}function vL(...i){return function(e,t){switch(e){case ng:return;case th:return LJ(...i.map(n=>Zt(n,t)))}}}var Vi=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i))(Vi||{});const UJ={0:"debug",3:"error",1:"log",2:"warn"},VJ=()=>typeof globalThis>"u"?window:globalThis,nh=Gt(()=>{const i=Ne(3);return{log:Ne((e,t,n=1)=>{var r;const s=(r=VJ().VIRTUOSO_LOG_LEVEL)!=null?r:Sr(i);n>=s&&console[UJ[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,t)}),logLevel:i}},[],{singleton:!0});function of(i,e,t){return WI(i,e,t).callbackRef}function WI(i,e,t){const n=Je.useRef(null);let r=o=>{};const s=Je.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(o=>{const a=()=>{const u=o[0].target;u.offsetParent!==null&&i(u)};t?a():requestAnimationFrame(a)}):null,[i,t]);return r=o=>{o&&e?(s==null||s.observe(o),n.current=o):(n.current&&(s==null||s.unobserve(n.current)),n.current=null)},{callbackRef:r,ref:n}}function HJ(i,e,t,n,r,s,o,a,u){const h=Je.useCallback(d=>{const m=zJ(d.children,e,a?"offsetWidth":"offsetHeight",r);let p=d.parentElement;for(;!p.dataset.virtuosoScroller;)p=p.parentElement;const g=p.lastElementChild.dataset.viewportType==="window";let w;g&&(w=p.ownerDocument.defaultView);const _=o?a?o.scrollLeft:o.scrollTop:g?a?w.scrollX||w.document.documentElement.scrollLeft:w.scrollY||w.document.documentElement.scrollTop:a?p.scrollLeft:p.scrollTop,A=o?a?o.scrollWidth:o.scrollHeight:g?a?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight:a?p.scrollWidth:p.scrollHeight,v=o?a?o.offsetWidth:o.offsetHeight:g?a?w.innerWidth:w.innerHeight:a?p.offsetWidth:p.offsetHeight;n({scrollHeight:A,scrollTop:Math.max(_,0),viewportHeight:v}),s==null||s(a?wL("column-gap",getComputedStyle(d).columnGap,r):wL("row-gap",getComputedStyle(d).rowGap,r)),m!==null&&i(m)},[i,e,r,s,o,n,a]);return WI(h,t,u)}function zJ(i,e,t,n){const r=i.length;if(r===0)return null;const s=[];for(let o=0;o<r;o++){const a=i.item(o);if(a.dataset.index===void 0)continue;const u=parseInt(a.dataset.index),h=parseFloat(a.dataset.knownSize),d=e(a,t);if(d===0&&n("Zero-sized element, this should not happen",{child:a},Vi.ERROR),d===h)continue;const m=s[s.length-1];s.length===0||m.size!==d||m.endIndex!==u-1?s.push({endIndex:u,size:d,startIndex:u}):s[s.length-1].endIndex++}return s}function wL(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Vi.WARN),e==="normal"?0:parseInt(e??"0",10)}function zB(i,e,t){const n=Je.useRef(null),r=Je.useCallback(u=>{if(!(u!=null&&u.offsetParent))return;const h=u.getBoundingClientRect(),d=h.width;let m,p;if(e){const g=e.getBoundingClientRect(),w=h.top-g.top;p=g.height-Math.max(0,w),m=w+e.scrollTop}else{const g=o.current.ownerDocument.defaultView;p=g.innerHeight-Math.max(0,h.top),m=h.top+g.scrollY}n.current={offsetTop:m,visibleHeight:p,visibleWidth:d},i(n.current)},[i,e]),{callbackRef:s,ref:o}=WI(r,!0,t),a=Je.useCallback(()=>{r(o.current)},[r,o]);return Je.useEffect(()=>{var u;if(e){e.addEventListener("scroll",a);const h=new ResizeObserver(()=>{requestAnimationFrame(a)});return h.observe(e),()=>{e.removeEventListener("scroll",a),h.unobserve(e)}}else{const h=(u=o.current)==null?void 0:u.ownerDocument.defaultView;return h==null||h.addEventListener("scroll",a),h==null||h.addEventListener("resize",a),()=>{h==null||h.removeEventListener("scroll",a),h==null||h.removeEventListener("resize",a)}}},[a,e,o]),s}const Ci=Gt(()=>{const i=qt(),e=qt(),t=Ne(0),n=qt(),r=Ne(0),s=qt(),o=qt(),a=Ne(0),u=Ne(0),h=Ne(0),d=Ne(0),m=qt(),p=qt(),g=Ne(!1),w=Ne(!1),_=Ne(!1);return it(ke(i,Ye(({scrollTop:A})=>A)),e),it(ke(i,Ye(({scrollHeight:A})=>A)),o),it(e,r),{deviation:t,fixedFooterHeight:h,fixedHeaderHeight:u,footerHeight:d,headerHeight:a,horizontalDirection:w,scrollBy:p,scrollContainerState:i,scrollHeight:o,scrollingInProgress:g,scrollTo:m,scrollTop:e,skipAnimationFrameInResizeObserver:_,smoothScrollTargetReached:n,statefulScrollTop:r,viewportHeight:s}},[],{singleton:!0}),Jy={lvl:0};function $B(i,e){const t=i.length;if(t===0)return[];let{index:n,value:r}=e(i[0]);const s=[];for(let o=1;o<t;o++){const{index:a,value:u}=e(i[o]);s.push({end:a-1,start:n,value:r}),n=a,r=u}return s.push({end:1/0,start:n,value:r}),s}function on(i){return i===Jy}function Yy(i,e){if(!on(i))return e===i.k?i.v:e<i.k?Yy(i.l,e):Yy(i.r,e)}function ko(i,e,t="k"){if(on(i))return[-1/0,void 0];if(Number(i[t])===e)return[i.k,i.v];if(Number(i[t])<e){const n=ko(i.r,e,t);return n[0]===-1/0?[i.k,i.v]:n}return ko(i.l,e,t)}function vs(i,e,t){return on(i)?KB(e,t,1):e===i.k?cr(i,{k:e,v:t}):e<i.k?_L(cr(i,{l:vs(i.l,e,t)})):_L(cr(i,{r:vs(i.r,e,t)}))}function _p(){return Jy}function EA(i,e,t){if(on(i))return[];const n=ko(i,e)[0];return $J(eS(i,n,t))}function Zx(i,e){if(on(i))return Jy;const{k:t,l:n,r}=i;if(e===t){if(on(n))return r;if(on(r))return n;{const[s,o]=GB(n);return t_(cr(i,{k:s,l:WB(n),v:o}))}}else return e<t?t_(cr(i,{l:Zx(n,e)})):t_(cr(i,{r:Zx(r,e)}))}function Mh(i){return on(i)?[]:[...Mh(i.l),{k:i.k,v:i.v},...Mh(i.r)]}function eS(i,e,t){if(on(i))return[];const{k:n,l:r,r:s,v:o}=i;let a=[];return n>e&&(a=a.concat(eS(r,e,t))),n>=e&&n<=t&&a.push({k:n,v:o}),n<=t&&(a=a.concat(eS(s,e,t))),a}function t_(i){const{l:e,lvl:t,r:n}=i;if(n.lvl>=t-1&&e.lvl>=t-1)return i;if(t>n.lvl+1){if(hx(e))return JB(cr(i,{lvl:t-1}));if(!on(e)&&!on(e.r))return cr(e.r,{l:cr(e,{r:e.r.l}),lvl:t,r:cr(i,{l:e.r.r,lvl:t-1})});throw new Error("Unexpected empty nodes")}else{if(hx(i))return tS(cr(i,{lvl:t-1}));if(!on(n)&&!on(n.l)){const r=n.l,s=hx(r)?n.lvl-1:n.lvl;return cr(r,{l:cr(i,{lvl:t-1,r:r.l}),lvl:r.lvl+1,r:tS(cr(n,{l:r.r,lvl:s}))})}else throw new Error("Unexpected empty nodes")}}function cr(i,e){return KB(e.k!==void 0?e.k:i.k,e.v!==void 0?e.v:i.v,e.lvl!==void 0?e.lvl:i.lvl,e.l!==void 0?e.l:i.l,e.r!==void 0?e.r:i.r)}function WB(i){return on(i.r)?i.l:t_(cr(i,{r:WB(i.r)}))}function hx(i){return on(i)||i.lvl>i.r.lvl}function GB(i){return on(i.r)?[i.k,i.v]:GB(i.r)}function KB(i,e,t,n=Jy,r=Jy){return{k:i,l:n,lvl:t,r,v:e}}function _L(i){return tS(JB(i))}function JB(i){const{l:e}=i;return!on(e)&&e.lvl===i.lvl?cr(e,{r:cr(i,{l:e.r})}):i}function tS(i){const{lvl:e,r:t}=i;return!on(t)&&!on(t.r)&&t.lvl===e&&t.r.lvl===e?cr(t,{l:cr(i,{r:t.l}),lvl:e+1}):i}function $J(i){return $B(i,({k:e,v:t})=>({index:e,value:t}))}function YB(i,e){return!!(i&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex)}function Xy(i,e){return!!(i&&i[0]===e[0]&&i[1]===e[1])}const GI=Gt(()=>({recalcInProgress:Ne(!1)}),[],{singleton:!0});function XB(i,e,t){return i[t1(i,e,t)]}function t1(i,e,t,n=0){let r=i.length-1;for(;n<=r;){const s=Math.floor((n+r)/2),o=i[s],a=t(o,e);if(a===0)return s;if(a===-1){if(r-n<2)return s-1;r=s-1}else{if(r===n)return s;n=s+1}}throw new Error(`Failed binary finding record in array - ${i.join(",")}, searched for ${e}`)}function WJ(i,e,t,n){const r=t1(i,e,n),s=t1(i,t,n,r);return i.slice(r,s+1)}function zc(i,e){return Math.round(i.getBoundingClientRect()[e])}function CA(i){return!on(i.groupOffsetTree)}function KI({index:i},e){return e===i?0:e<i?-1:1}function GJ(){return{groupIndices:[],groupOffsetTree:_p(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:_p()}}function KJ(i,e){let t=on(i)?0:1/0;for(const n of e){const{endIndex:r,size:s,startIndex:o}=n;if(t=Math.min(t,o),on(i)){i=vs(i,0,s);continue}const a=EA(i,o-1,r+1);if(a.some(tY(n)))continue;let u=!1,h=!1;for(const{end:d,start:m,value:p}of a)u?(r>=m||s===p)&&(i=Zx(i,m)):(h=p!==s,u=!0),d>r&&r>=m&&p!==s&&(i=vs(i,r+1,p));h&&(i=vs(i,o,s))}return[i,t]}function JJ(i){return typeof i.groupIndex<"u"}function YJ({offset:i},e){return e===i?0:e<i?-1:1}function Qy(i,e,t){if(e.length===0)return 0;const{index:n,offset:r,size:s}=XB(e,i,KI),o=i-n,a=s*o+(o-1)*t+r;return a>0?a+t:a}function QB(i,e){if(!CA(e))return i;let t=0;for(;e.groupIndices[t]<=i+t;)t++;return i+t}function ZB(i,e,t){if(JJ(i))return e.groupIndices[i.groupIndex]+1;{const n=i.index==="LAST"?t:i.index;let r=QB(n,e);return r=Math.max(0,r,Math.min(t,r)),r}}function XJ(i,e,t,n=0){return n>0&&(e=Math.max(e,XB(i,n,KI).offset)),$B(WJ(i,e,t,YJ),eY)}function QJ(i,[e,t,n,r]){e.length>0&&n("received item sizes",e,Vi.DEBUG);const s=i.sizeTree;let o=s,a=0;if(t.length>0&&on(s)&&e.length===2){const p=e[0].size,g=e[1].size;o=t.reduce((w,_)=>vs(vs(w,_,p),_+1,g),o)}else[o,a]=KJ(o,e);if(o===s)return i;const{lastIndex:u,lastOffset:h,lastSize:d,offsetTree:m}=nS(i.offsetTree,a,o,r);return{groupIndices:t,groupOffsetTree:t.reduce((p,g)=>vs(p,g,Qy(g,m,r)),_p()),lastIndex:u,lastOffset:h,lastSize:d,offsetTree:m,sizeTree:o}}function ZJ(i){return Mh(i).map(({k:e,v:t},n,r)=>{const s=r[n+1];return{endIndex:s?s.k-1:1/0,size:t,startIndex:e}})}function AL(i,e){let t=0,n=0;for(;t<i;)t+=e[n+1]-e[n]-1,n++;return n-(t===i?0:1)}function nS(i,e,t,n){let r=i,s=0,o=0,a=0,u=0;if(e!==0){u=t1(r,e-1,KI),a=r[u].offset;const h=ko(t,e-1);s=h[0],o=h[1],r.length&&r[u].size===ko(t,e)[1]&&(u-=1),r=r.slice(0,u+1)}else r=[];for(const{start:h,value:d}of EA(t,e,1/0)){const m=h-s,p=m*o+a+m*n;r.push({index:h,offset:p,size:d}),s=h,a=p,o=d}return{lastIndex:s,lastOffset:a,lastSize:o,offsetTree:r}}function eY(i){return{index:i.index,value:i}}function tY(i){const{endIndex:e,size:t,startIndex:n}=i;return r=>r.start===n&&(r.end===e||r.end===1/0)&&r.value===t}const nY={offsetHeight:"height",offsetWidth:"width"},Oa=Gt(([{log:i},{recalcInProgress:e}])=>{const t=qt(),n=qt(),r=ii(n,0),s=qt(),o=qt(),a=Ne(0),u=Ne([]),h=Ne(void 0),d=Ne(void 0),m=Ne((R,F)=>zc(R,nY[F])),p=Ne(void 0),g=Ne(0),w=GJ(),_=ii(ke(t,kt(u,i,g),wa(QJ,w),gn()),w),A=ii(ke(u,gn(),wa((R,F)=>({current:F,prev:R.current}),{current:[],prev:[]}),Ye(({prev:R})=>R)),[]);it(ke(u,vt(R=>R.length>0),kt(_,g),Ye(([R,F,k])=>{const T=R.reduce((D,P,N)=>vs(D,P,Qy(P,F.offsetTree,k)||N),_p());return{...F,groupIndices:R,groupOffsetTree:T}})),_),it(ke(n,kt(_),vt(([R,{lastIndex:F}])=>R<F),Ye(([R,{lastIndex:F,lastSize:k}])=>[{endIndex:F,size:k,startIndex:R}])),t),it(h,d);const v=ii(ke(h,Ye(R=>R===void 0)),!0);it(ke(d,vt(R=>R!==void 0&&on(Sr(_).sizeTree)),Ye(R=>[{endIndex:0,size:R,startIndex:0}])),t);const E=As(ke(t,kt(_),wa(({sizes:R},[F,k])=>({changed:k!==R,sizes:k}),{changed:!1,sizes:w}),Ye(R=>R.changed)));Zt(ke(a,wa((R,F)=>({diff:R.prev-F,prev:F}),{diff:0,prev:0}),Ye(R=>R.diff)),R=>{const{groupIndices:F}=Sr(_);if(R>0)St(e,!0),St(s,R+AL(R,F));else if(R<0){const k=Sr(A);k.length>0&&(R-=AL(-R,k)),St(o,R)}}),Zt(ke(a,kt(i)),([R,F])=>{R<0&&F("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:a},Vi.ERROR)});const I=As(s);it(ke(s,kt(_),Ye(([R,F])=>{const k=F.groupIndices.length>0,T=[],D=F.lastSize;if(k){const P=Yy(F.sizeTree,0);let N=0,L=0;for(;N<R;){const $=F.groupIndices[L],Q=F.groupIndices.length===L+1?1/0:F.groupIndices[L+1]-$-1;T.push({endIndex:$,size:P,startIndex:$}),T.push({endIndex:$+1+Q-1,size:D,startIndex:$+1}),L++,N+=Q+1}const M=Mh(F.sizeTree);return N!==R&&M.shift(),M.reduce(($,{k:Q,v:re})=>{let ee=$.ranges;return $.prevSize!==0&&(ee=[...$.ranges,{endIndex:Q+R-1,size:$.prevSize,startIndex:$.prevIndex}]),{prevIndex:Q+R,prevSize:re,ranges:ee}},{prevIndex:R,prevSize:0,ranges:T}).ranges}return Mh(F.sizeTree).reduce((P,{k:N,v:L})=>({prevIndex:N+R,prevSize:L,ranges:[...P.ranges,{endIndex:N+R-1,size:P.prevSize,startIndex:P.prevIndex}]}),{prevIndex:0,prevSize:D,ranges:[]}).ranges})),t);const S=As(ke(o,kt(_,g),Ye(([R,{offsetTree:F},k])=>{const T=-R;return Qy(T,F,k)})));return it(ke(o,kt(_,g),Ye(([R,F,k])=>{if(F.groupIndices.length>0){if(on(F.sizeTree))return F;let T=_p();const D=Sr(A);let P=0,N=0,L=0;for(;P<-R;){L=D[N];const M=D[N+1]-L-1;N++,P+=M+1}if(T=Mh(F.sizeTree).reduce((M,{k:$,v:Q})=>vs(M,Math.max(0,$+R),Q),T),P!==-R){const M=Yy(F.sizeTree,L);T=vs(T,0,M);const $=ko(F.sizeTree,-R+1)[1];T=vs(T,1,$)}return{...F,sizeTree:T,...nS(F.offsetTree,0,T,k)}}else{const T=Mh(F.sizeTree).reduce((D,{k:P,v:N})=>vs(D,Math.max(0,P+R),N),_p());return{...F,sizeTree:T,...nS(F.offsetTree,0,T,k)}}})),_),{beforeUnshiftWith:I,data:p,defaultItemSize:d,firstItemIndex:a,fixedItemSize:h,gap:g,groupIndices:u,itemSize:m,listRefresh:E,shiftWith:o,shiftWithOffset:S,sizeRanges:t,sizes:_,statefulTotalCount:r,totalCount:n,trackItemSizes:v,unshiftWith:s}},vn(nh,GI),{singleton:!0});function rY(i){return i.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{groupIndices:[],totalCount:0})}const e5=Gt(([{groupIndices:i,sizes:e,totalCount:t},{headerHeight:n,scrollTop:r}])=>{const s=qt(),o=qt(),a=As(ke(s,Ye(rY)));return it(ke(a,Ye(u=>u.totalCount)),t),it(ke(a,Ye(u=>u.groupIndices)),i),it(ke(hr(r,e,n),vt(([u,h])=>CA(h)),Ye(([u,h,d])=>ko(h.groupOffsetTree,Math.max(u-d,0),"v")[0]),gn(),Ye(u=>[u])),o),{groupCounts:s,topItemsIndexes:o}},vn(Oa,Ci)),rh=Gt(([{log:i}])=>{const e=Ne(!1),t=As(ke(e,vt(n=>n),gn()));return Zt(e,n=>{n&&Sr(i)("props updated",{},Vi.DEBUG)}),{didMount:t,propsReady:e}},vn(nh),{singleton:!0}),iY=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function t5(i){const e=typeof i=="number"?{index:i}:i;return e.align||(e.align="start"),(!e.behavior||!iY)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Y0=Gt(([{gap:i,listRefresh:e,sizes:t,totalCount:n},{fixedFooterHeight:r,fixedHeaderHeight:s,footerHeight:o,headerHeight:a,scrollingInProgress:u,scrollTo:h,smoothScrollTargetReached:d,viewportHeight:m},{log:p}])=>{const g=qt(),w=qt(),_=Ne(0);let A=null,v=null,E=null;function I(){A&&(A(),A=null),E&&(E(),E=null),v&&(clearTimeout(v),v=null),St(u,!1)}return it(ke(g,kt(t,m,n,_,a,o,p),kt(i,s,r),Ye(([[S,R,F,k,T,D,P,N],L,M,$])=>{const Q=t5(S),{align:re,behavior:ee,offset:ue}=Q,Y=k-1,J=ZB(Q,R,Y);let q=Qy(J,R.offsetTree,L)+D;re==="end"?(q+=M+ko(R.sizeTree,J)[1]-F+$,J===Y&&(q+=P)):re==="center"?q+=(M+ko(R.sizeTree,J)[1]-F+$)/2:q-=T,ue&&(q+=ue);const H=G=>{I(),G?(N("retrying to scroll to",{location:S},Vi.DEBUG),St(g,S)):(St(w,!0),N("list did not change, scroll successful",{},Vi.DEBUG))};if(I(),ee==="smooth"){let G=!1;E=Zt(e,le=>{G=G||le}),A=Ia(d,()=>{H(G)})}else A=Ia(ke(e,sY(150)),H);return v=setTimeout(()=>{I()},1200),St(u,!0),N("scrolling from index to",{behavior:ee,index:J,top:q},Vi.DEBUG),{behavior:ee,top:q}})),h),{scrollTargetReached:w,scrollToIndex:g,topListHeight:_}},vn(Oa,Ci,nh),{singleton:!0});function sY(i){return e=>{const t=setTimeout(()=>{e(!1)},i);return n=>{n&&(e(!0),clearTimeout(t))}}}function JI(i,e){i==0?e():requestAnimationFrame(()=>{JI(i-1,e)})}function YI(i,e){const t=e-1;return typeof i=="number"?i:i.index==="LAST"?t:i.index}const X0=Gt(([{defaultItemSize:i,listRefresh:e,sizes:t},{scrollTop:n},{scrollTargetReached:r,scrollToIndex:s},{didMount:o}])=>{const a=Ne(!0),u=Ne(0),h=Ne(!0);return it(ke(o,kt(u),vt(([d,m])=>!!m),ga(!1)),a),it(ke(o,kt(u),vt(([d,m])=>!!m),ga(!1)),h),Zt(ke(hr(e,o),kt(a,t,i,h),vt(([[,d],m,{sizeTree:p},g,w])=>d&&(!on(p)||zI(g))&&!m&&!w),kt(u)),([,d])=>{Ia(r,()=>{St(h,!0)}),JI(4,()=>{Ia(n,()=>{St(a,!0)}),St(s,d)})}),{initialItemFinalLocationReached:h,initialTopMostItemIndex:u,scrolledToInitialItem:a}},vn(Oa,Ci,Y0,rh),{singleton:!0});function n5(i,e){return Math.abs(i-e)<1.01}const Zy="up",Fy="down",oY="none",aY={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},lY=0,Q0=Gt(([{footerHeight:i,headerHeight:e,scrollBy:t,scrollContainerState:n,scrollTop:r,viewportHeight:s}])=>{const o=Ne(!1),a=Ne(!0),u=qt(),h=qt(),d=Ne(4),m=Ne(lY),p=ii(ke(vL(ke(_t(r),$m(1),ga(!0)),ke(_t(r),$m(1),ga(!1),yL(100))),gn()),!1),g=ii(ke(vL(ke(t,ga(!0)),ke(t,ga(!1),yL(200))),gn()),!1);it(ke(hr(_t(r),_t(m)),Ye(([E,I])=>E<=I),gn()),a),it(ke(a,Rc(50)),h);const w=As(ke(hr(n,_t(s),_t(e),_t(i),_t(d)),wa((E,[{scrollHeight:I,scrollTop:S},R,F,k,T])=>{const D=S+R-I>-T,P={scrollHeight:I,scrollTop:S,viewportHeight:R};if(D){let L,M;return S>E.state.scrollTop?(L="SCROLLED_DOWN",M=E.state.scrollTop-S):(L="SIZE_DECREASED",M=E.state.scrollTop-S||E.scrollTopDelta),{atBottom:!0,atBottomBecause:L,scrollTopDelta:M,state:P}}let N;return P.scrollHeight>E.state.scrollHeight?N="SIZE_INCREASED":R<E.state.viewportHeight?N="VIEWPORT_HEIGHT_DECREASING":S<E.state.scrollTop?N="SCROLLING_UPWARDS":N="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:N,state:P}},aY),gn((E,I)=>E&&E.atBottom===I.atBottom))),_=ii(ke(n,wa((E,{scrollHeight:I,scrollTop:S,viewportHeight:R})=>{if(n5(E.scrollHeight,I))return{changed:!1,jump:0,scrollHeight:I,scrollTop:S};{const F=I-(S+R)<1;return E.scrollTop!==S&&F?{changed:!0,jump:E.scrollTop-S,scrollHeight:I,scrollTop:S}:{changed:!0,jump:0,scrollHeight:I,scrollTop:S}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),vt(E=>E.changed),Ye(E=>E.jump)),0);it(ke(w,Ye(E=>E.atBottom)),o),it(ke(o,Rc(50)),u);const A=Ne(Fy);it(ke(n,Ye(({scrollTop:E})=>E),gn(),wa((E,I)=>Sr(g)?{direction:E.direction,prevScrollTop:I}:{direction:I<E.prevScrollTop?Zy:Fy,prevScrollTop:I},{direction:Fy,prevScrollTop:0}),Ye(E=>E.direction)),A),it(ke(n,Rc(50),ga(oY)),A);const v=Ne(0);return it(ke(p,vt(E=>!E),ga(0)),v),it(ke(r,Rc(100),kt(p),vt(([E,I])=>!!I),wa(([E,I],[S])=>[I,S],[0,0]),Ye(([E,I])=>I-E)),v),{atBottomState:w,atBottomStateChange:u,atBottomThreshold:d,atTopStateChange:h,atTopThreshold:m,isAtBottom:o,isAtTop:a,isScrolling:p,lastJumpDueToItemResize:_,scrollDirection:A,scrollVelocity:v}},vn(Ci)),n1="top",r1="bottom",bL="none";function EL(i,e,t){return typeof i=="number"?t===Zy&&e===n1||t===Fy&&e===r1?i:0:t===Zy?e===n1?i.main:i.reverse:e===r1?i.main:i.reverse}function CL(i,e){var t;return typeof i=="number"?i:(t=i[e])!=null?t:0}const XI=Gt(([{deviation:i,fixedHeaderHeight:e,headerHeight:t,scrollTop:n,viewportHeight:r}])=>{const s=qt(),o=Ne(0),a=Ne(0),u=Ne(0),h=ii(ke(hr(_t(n),_t(r),_t(t),_t(s,Xy),_t(u),_t(o),_t(e),_t(i),_t(a)),Ye(([d,m,p,[g,w],_,A,v,E,I])=>{const S=d-E,R=A+v,F=Math.max(p-S,0);let k=bL;const T=CL(I,n1),D=CL(I,r1);return g-=E,g+=p+v,w+=p+v,w-=E,g>d+R-T&&(k=Zy),w<d-F+m+D&&(k=Fy),k!==bL?[Math.max(S-p-EL(_,n1,k)-T,0),S-F-v+m+EL(_,r1,k)+D]:null}),vt(d=>d!=null),gn(Xy)),[0,0]);return{increaseViewportBy:a,listBoundary:s,overscan:u,topListHeight:o,visibleRange:h}},vn(Ci),{singleton:!0});function uY(i,e,t){if(CA(e)){const n=QB(i,e);return[{index:ko(e.groupOffsetTree,n)[0],offset:0,size:0},{data:t==null?void 0:t[0],index:n,offset:0,size:0}]}return[{data:t==null?void 0:t[0],index:i,offset:0,size:0}]}const dx={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function n_(i,e,t,n,r,s){const{lastIndex:o,lastOffset:a,lastSize:u}=r;let h=0,d=0;if(i.length>0){h=i[0].offset;const _=i[i.length-1];d=_.offset+_.size}const m=t-o,p=a+m*u+(m-1)*n,g=h,w=p-d;return{bottom:d,firstItemIndex:s,items:xL(i,r,s),offsetBottom:w,offsetTop:h,top:g,topItems:xL(e,r,s),topListHeight:e.reduce((_,A)=>A.size+_,0),totalCount:t}}function r5(i,e,t,n,r,s){let o=0;if(t.groupIndices.length>0)for(const d of t.groupIndices){if(d-o>=i)break;o++}const a=i+o,u=YI(e,a),h=Array.from({length:a}).map((d,m)=>({data:s[m+u],index:m+u,offset:0,size:0}));return n_(h,[],a,r,t,n)}function xL(i,e,t){if(i.length===0)return[];if(!CA(e))return i.map(h=>({...h,index:h.index+t,originalIndex:h.index}));const n=i[0].index,r=i[i.length-1].index,s=[],o=EA(e.groupOffsetTree,n,r);let a,u=0;for(const h of i){(!a||a.end<h.index)&&(a=o.shift(),u=e.groupIndices.indexOf(a.start));let d;h.index===a.start?d={index:u,type:"group"}:d={groupIndex:u,index:h.index-(u+1)+t},s.push({...d,data:h.data,offset:h.offset,originalIndex:h.index,size:h.size})}return s}const af=Gt(([{data:i,firstItemIndex:e,gap:t,sizes:n,totalCount:r},s,{listBoundary:o,topListHeight:a,visibleRange:u},{initialTopMostItemIndex:h,scrolledToInitialItem:d},{topListHeight:m},p,{didMount:g},{recalcInProgress:w}])=>{const _=Ne([]),A=Ne(0),v=qt();it(s.topItemsIndexes,_);const E=ii(ke(hr(g,w,_t(u,Xy),_t(r),_t(n),_t(h),d,_t(_),_t(e),_t(t),i),vt(([F,k,,T,,,,,,,D])=>{const P=D&&D.length!==T;return F&&!k&&!P}),Ye(([,,[F,k],T,D,P,N,L,M,$,Q])=>{const re=D,{offsetTree:ee,sizeTree:ue}=re,Y=Sr(A);if(T===0)return{...dx,totalCount:T};if(F===0&&k===0)return Y===0?{...dx,totalCount:T}:r5(Y,P,D,M,$,Q||[]);if(on(ue))return Y>0?null:n_(uY(YI(P,T),re,Q),[],T,$,re,M);const J=[];if(L.length>0){const se=L[0],X=L[L.length-1];let ne=0;for(const te of EA(ue,se,X)){const ae=te.value,de=Math.max(te.start,se),ye=Math.min(te.end,X);for(let xe=de;xe<=ye;xe++)J.push({data:Q==null?void 0:Q[xe],index:xe,offset:ne,size:ae}),ne+=ae}}if(!N)return n_([],J,T,$,re,M);const q=L.length>0?L[L.length-1]+1:0,H=XJ(ee,F,k,q);if(H.length===0)return null;const G=T-1,le=bA([],se=>{for(const X of H){const ne=X.value;let te=ne.offset,ae=X.start;const de=ne.size;if(ne.offset<F){ae+=Math.floor((F-ne.offset+$)/(de+$));const xe=ae-X.start;te+=xe*de+xe*$}ae<q&&(te+=(q-ae)*de,ae=q);const ye=Math.min(X.end,G);for(let xe=ae;xe<=ye&&!(te>=k);xe++)se.push({data:Q==null?void 0:Q[xe],index:xe,offset:te,size:de}),te+=de+$}});return n_(le,J,T,$,re,M)}),vt(F=>F!==null),gn()),dx);it(ke(i,vt(zI),Ye(F=>F==null?void 0:F.length)),r),it(ke(E,Ye(F=>F.topListHeight)),m),it(m,a),it(ke(E,Ye(F=>[F.top,F.bottom])),o),it(ke(E,Ye(F=>F.items)),v);const I=As(ke(E,vt(({items:F})=>F.length>0),kt(r,i),vt(([{items:F},k])=>F[F.length-1].originalIndex===k-1),Ye(([,F,k])=>[F-1,k]),gn(Xy),Ye(([F])=>F))),S=As(ke(E,Rc(200),vt(({items:F,topItems:k})=>F.length>0&&F[0].originalIndex===k.length),Ye(({items:F})=>F[0].index),gn())),R=As(ke(E,vt(({items:F})=>F.length>0),Ye(({items:F})=>{let k=0,T=F.length-1;for(;F[k].type==="group"&&k<T;)k++;for(;F[T].type==="group"&&T>k;)T--;return{endIndex:F[T].index,startIndex:F[k].index}}),gn(YB)));return{endReached:I,initialItemCount:A,itemsRendered:v,listState:E,rangeChanged:R,startReached:S,topItemsIndexes:_,...p}},vn(Oa,e5,XI,X0,Y0,Q0,rh,GI),{singleton:!0}),i5=Gt(([{fixedFooterHeight:i,fixedHeaderHeight:e,footerHeight:t,headerHeight:n},{listState:r}])=>{const s=qt(),o=ii(ke(hr(t,i,n,e,r),Ye(([a,u,h,d,m])=>a+u+h+d+m.offsetBottom+m.bottom)),0);return it(_t(o),s),{totalListHeight:o,totalListHeightChanged:s}},vn(Ci,af),{singleton:!0}),cY=Gt(([{viewportHeight:i},{totalListHeight:e}])=>{const t=Ne(!1),n=ii(ke(hr(t,i,e),vt(([r])=>r),Ye(([,r,s])=>Math.max(0,r-s)),Rc(0),gn()),0);return{alignToBottom:t,paddingTopAddition:n}},vn(Ci,i5),{singleton:!0});function SL(i){return i?i==="smooth"?"smooth":"auto":!1}const hY=(i,e)=>typeof i=="function"?SL(i(e)):e&&SL(i),dY=Gt(([{listRefresh:i,totalCount:e,fixedItemSize:t},{atBottomState:n,isAtBottom:r},{scrollToIndex:s},{scrolledToInitialItem:o},{didMount:a,propsReady:u},{log:h},{scrollingInProgress:d}])=>{const m=Ne(!1),p=qt();let g=null;function w(A){St(s,{align:"end",behavior:A,index:"LAST"})}Zt(ke(hr(ke(_t(e),$m(1)),a),kt(_t(m),r,o,d),Ye(([[A,v],E,I,S,R])=>{let F=v&&S,k="auto";return F&&(k=hY(E,I||R),F=F&&!!k),{followOutputBehavior:k,shouldFollow:F,totalCount:A}}),vt(({shouldFollow:A})=>A)),({followOutputBehavior:A,totalCount:v})=>{g&&(g(),g=null),Sr(t)?requestAnimationFrame(()=>{Sr(h)("following output to ",{totalCount:v},Vi.DEBUG),w(A)}):g=Ia(i,()=>{Sr(h)("following output to ",{totalCount:v},Vi.DEBUG),w(A),g=null})});function _(A){const v=Ia(n,E=>{A&&!E.atBottom&&E.notAtBottomBecause==="SIZE_INCREASED"&&!g&&(Sr(h)("scrolling to bottom due to increased size",{},Vi.DEBUG),w("auto"))});setTimeout(v,100)}return Zt(ke(hr(_t(m),e,u),vt(([A,,v])=>A&&v),wa(({value:A},[,v])=>({refreshed:A===v,value:v}),{refreshed:!1,value:0}),vt(({refreshed:A})=>A),kt(m,e)),([,A])=>{Sr(o)&&_(A!==!1)}),Zt(p,()=>{_(Sr(m)!==!1)}),Zt(hr(_t(m),n),([A,v])=>{A&&!v.atBottom&&v.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&w("auto")}),{autoscrollToBottom:p,followOutput:m}},vn(Oa,Q0,Y0,X0,rh,nh,Ci)),fY=Gt(([{data:i,firstItemIndex:e,gap:t,sizes:n},{initialTopMostItemIndex:r},{initialItemCount:s,listState:o},{didMount:a}])=>(it(ke(a,kt(s),vt(([,u])=>u!==0),kt(r,n,e,t,i),Ye(([[,u],h,d,m,p,g=[]])=>r5(u,h,d,m,p,g))),o),{}),vn(Oa,X0,af,rh),{singleton:!0}),pY=Gt(([{didMount:i},{scrollTo:e},{listState:t}])=>{const n=Ne(0);return Zt(ke(i,kt(n),vt(([,r])=>r!==0),Ye(([,r])=>({top:r}))),r=>{Ia(ke(t,$m(1),vt(s=>s.items.length>1)),()=>{requestAnimationFrame(()=>{St(e,r)})})}),{initialScrollTop:n}},vn(rh,Ci,af),{singleton:!0}),mY=({itemBottom:i,itemTop:e,locationParams:{align:t,behavior:n,...r},viewportBottom:s,viewportTop:o})=>e<o?{...r,align:t??"start",behavior:n}:i>s?{...r,align:t??"end",behavior:n}:null,gY=Gt(([{gap:i,sizes:e,totalCount:t},{fixedFooterHeight:n,fixedHeaderHeight:r,headerHeight:s,scrollingInProgress:o,scrollTop:a,viewportHeight:u},{scrollToIndex:h}])=>{const d=qt();return it(ke(d,kt(e,u,t,s,r,n,a),kt(i),Ye(([[m,p,g,w,_,A,v,E],I])=>{const{align:S,behavior:R,calculateViewLocation:F=mY,done:k,...T}=m,D=ZB(m,p,w-1),P=Qy(D,p.offsetTree,I)+_+A,N=P+ko(p.sizeTree,D)[1],L=E+A,M=E+g-v,$=F({itemBottom:N,itemTop:P,locationParams:{align:S,behavior:R,...T},viewportBottom:M,viewportTop:L});return $?k&&Ia(ke(o,vt(Q=>!Q),$m(Sr(o)?1:2)),k):k&&k(),$}),vt(m=>m!==null)),h),{scrollIntoView:d}},vn(Oa,Ci,Y0,af,nh),{singleton:!0}),s5=Gt(([{scrollVelocity:i}])=>{const e=Ne(!1),t=qt(),n=Ne(!1);return it(ke(i,kt(n,e,t),vt(([r,s])=>!!s),Ye(([r,s,o,a])=>{const{enter:u,exit:h}=s;if(o){if(h(r,a))return!1}else if(u(r,a))return!0;return o}),gn()),e),Zt(ke(hr(e,i,t),kt(n)),([[r,s,o],a])=>{r&&a&&a.change&&a.change(s,o)}),{isSeeking:e,scrollSeekConfiguration:n,scrollSeekRangeChanged:t,scrollVelocity:i}},vn(Q0),{singleton:!0}),QI=Gt(([{scrollContainerState:i,scrollTo:e}])=>{const t=qt(),n=qt(),r=qt(),s=Ne(!1),o=Ne(void 0);return it(ke(hr(t,n),Ye(([{scrollHeight:a,scrollTop:u,viewportHeight:h},{offsetTop:d}])=>({scrollHeight:a,scrollTop:Math.max(0,u-d),viewportHeight:h}))),i),it(ke(e,kt(n),Ye(([a,{offsetTop:u}])=>({...a,top:a.top+u}))),r),{customScrollParent:o,useWindowScroll:s,windowScrollContainerState:t,windowScrollTo:r,windowViewportRect:n}},vn(Ci)),yY=Gt(([{sizeRanges:i,sizes:e},{headerHeight:t,scrollTop:n},{initialTopMostItemIndex:r},{didMount:s},{useWindowScroll:o,windowScrollContainerState:a,windowViewportRect:u}])=>{const h=qt(),d=Ne(void 0),m=Ne(null),p=Ne(null);return it(a,m),it(u,p),Zt(ke(h,kt(e,n,o,m,p,t)),([g,w,_,A,v,E,I])=>{const S=ZJ(w.sizeTree);A&&v!==null&&E!==null&&(_=v.scrollTop-E.offsetTop),_-=I,g({ranges:S,scrollTop:_})}),it(ke(d,vt(zI),Ye(vY)),r),it(ke(s,kt(d),vt(([,g])=>g!==void 0),gn(),Ye(([,g])=>g.ranges)),i),{getState:h,restoreStateFrom:d}},vn(Oa,Ci,X0,rh,QI));function vY(i){return{align:"start",index:0,offset:i.scrollTop}}const wY=Gt(([{topItemsIndexes:i}])=>{const e=Ne(0);return it(ke(e,vt(t=>t>=0),Ye(t=>Array.from({length:t}).map((n,r)=>r))),i),{topItemCount:e}},vn(af));function o5(i){let e=!1,t;return()=>(e||(e=!0,t=i()),t)}const _Y=o5(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),AY=Gt(([{deviation:i,scrollBy:e,scrollingInProgress:t,scrollTop:n},{isAtBottom:r,isScrolling:s,lastJumpDueToItemResize:o,scrollDirection:a},{listState:u},{beforeUnshiftWith:h,gap:d,shiftWithOffset:m,sizes:p},{log:g},{recalcInProgress:w}])=>{const _=As(ke(u,kt(o),wa(([,v,E,I],[{bottom:S,items:R,offsetBottom:F,totalCount:k},T])=>{const D=S+F;let P=0;return E===k&&v.length>0&&R.length>0&&(R[0].originalIndex===0&&v[0].originalIndex===0||(P=D-I,P!==0&&(P+=T))),[P,R,k,D]},[0,[],0,0]),vt(([v])=>v!==0),kt(n,a,t,r,g,w),vt(([,v,E,I,,,S])=>!S&&!I&&v!==0&&E===Zy),Ye(([[v],,,,,E])=>(E("Upward scrolling compensation",{amount:v},Vi.DEBUG),v))));function A(v){v>0?(St(e,{behavior:"auto",top:-v}),St(i,0)):(St(i,0),St(e,{behavior:"auto",top:-v}))}return Zt(ke(_,kt(i,s)),([v,E,I])=>{I&&_Y()?St(i,E-v):A(-v)}),Zt(ke(hr(ii(s,!1),i,w),vt(([v,E,I])=>!v&&!I&&E!==0),Ye(([v,E])=>E),Rc(1)),A),it(ke(m,Ye(v=>({top:-v}))),e),Zt(ke(h,kt(p,d),Ye(([v,{groupIndices:E,lastSize:I,sizeTree:S},R])=>{function F(k){return k*(I+R)}if(E.length===0)return F(v);{let k=0;const T=Yy(S,0);let D=0,P=0;for(;D<v;){D++,k+=T;let N=E.length===P+1?1/0:E[P+1]-E[P]-1;D+N>v&&(k-=T,N=v-D+1),D+=N,k+=F(N),P++}return k}})),v=>{St(i,v),requestAnimationFrame(()=>{St(e,{top:v}),requestAnimationFrame(()=>{St(i,0),St(w,!1)})})}),{deviation:i}},vn(Ci,Q0,af,Oa,nh,GI)),bY=Gt(([i,e,t,n,r,s,o,a,u,h])=>({...i,...e,...t,...n,...r,...s,...o,...a,...u,...h}),vn(XI,fY,rh,s5,i5,pY,cY,QI,gY,nh)),a5=Gt(([{data:i,defaultItemSize:e,firstItemIndex:t,fixedItemSize:n,gap:r,groupIndices:s,itemSize:o,sizeRanges:a,sizes:u,statefulTotalCount:h,totalCount:d,trackItemSizes:m},{initialItemFinalLocationReached:p,initialTopMostItemIndex:g,scrolledToInitialItem:w},_,A,v,{listState:E,topItemsIndexes:I,...S},{scrollToIndex:R},F,{topItemCount:k},{groupCounts:T},D])=>(it(S.rangeChanged,D.scrollSeekRangeChanged),it(ke(D.windowViewportRect,Ye(P=>P.visibleHeight)),_.viewportHeight),{data:i,defaultItemHeight:e,firstItemIndex:t,fixedItemHeight:n,gap:r,groupCounts:T,initialItemFinalLocationReached:p,initialTopMostItemIndex:g,scrolledToInitialItem:w,sizeRanges:a,topItemCount:k,topItemsIndexes:I,totalCount:d,...v,groupIndices:s,itemSize:o,listState:E,scrollToIndex:R,statefulTotalCount:h,trackItemSizes:m,...S,...D,..._,sizes:u,...A}),vn(Oa,X0,Ci,yY,dY,af,Y0,AY,wY,e5,bY));function EY(i,e){const t={},n={};let r=0;const s=i.length;for(;r<s;)n[i[r]]=1,r+=1;for(const o in e)Object.hasOwn(n,o)||(t[o]=e[o]);return t}const Dw=typeof document<"u"?Je.useLayoutEffect:Je.useEffect;function l5(i,e,t){const n=Object.keys(e.required||{}),r=Object.keys(e.optional||{}),s=Object.keys(e.methods||{}),o=Object.keys(e.events||{}),a=Je.createContext({});function u(A,v){A.propsReady&&St(A.propsReady,!1);for(const E of n){const I=A[e.required[E]];St(I,v[E])}for(const E of r)if(E in v){const I=A[e.optional[E]];St(I,v[E])}A.propsReady&&St(A.propsReady,!0)}function h(A){return s.reduce((v,E)=>(v[E]=I=>{const S=A[e.methods[E]];St(S,I)},v),{})}function d(A){return o.reduce((v,E)=>(v[E]=BJ(A[e.events[E]]),v),{})}const m=Je.forwardRef((A,v)=>{const{children:E,...I}=A,[S]=Je.useState(()=>bA(qJ(i),k=>{u(k,I)})),[R]=Je.useState(gL(d,S));Dw(()=>{for(const k of o)k in I&&Zt(R[k],I[k]);return()=>{Object.values(R).map($I)}},[I,R,S]),Dw(()=>{u(S,I)}),Je.useImperativeHandle(v,mL(h(S)));const F=t;return C.jsx(a.Provider,{value:S,children:t?C.jsx(F,{...EY([...n,...r,...o],I),children:E}):E})}),p=A=>{const v=Je.useContext(a);return Je.useCallback(E=>{St(v[A],E)},[v,A])},g=A=>{const v=Je.useContext(a)[A],E=Je.useCallback(I=>Zt(v,I),[v]);return Je.useSyncExternalStore(E,()=>Sr(v),()=>Sr(v))},w=A=>{const v=Je.useContext(a)[A],[E,I]=Je.useState(gL(Sr,v));return Dw(()=>Zt(v,S=>{S!==E&&I(mL(S))}),[v,E]),E},_=Je.version.startsWith("18")?g:w;return{Component:m,useEmitter:(A,v)=>{const E=Je.useContext(a)[A];Dw(()=>Zt(E,v),[v,E])},useEmitterValue:_,usePublisher:p}}const u5=Je.createContext(void 0),c5=Je.createContext(void 0),h5=typeof document<"u"?Je.useLayoutEffect:Je.useEffect;function fx(i){return"self"in i}function CY(i){return"body"in i}function d5(i,e,t,n=rg,r,s){const o=Je.useRef(null),a=Je.useRef(null),u=Je.useRef(null),h=Je.useCallback(p=>{let g,w,_;const A=p.target;if(CY(A)||fx(A)){const E=fx(A)?A:A.defaultView;_=s?E.scrollX:E.scrollY,g=s?E.document.documentElement.scrollWidth:E.document.documentElement.scrollHeight,w=s?E.innerWidth:E.innerHeight}else _=s?A.scrollLeft:A.scrollTop,g=s?A.scrollWidth:A.scrollHeight,w=s?A.offsetWidth:A.offsetHeight;const v=()=>{i({scrollHeight:g,scrollTop:Math.max(_,0),viewportHeight:w})};p.suppressFlushSync?v():EG.flushSync(v),a.current!==null&&(_===a.current||_<=0||_===g-w)&&(a.current=null,e(!0),u.current&&(clearTimeout(u.current),u.current=null))},[i,e,s]);Je.useEffect(()=>{const p=r||o.current;return n(r||o.current),h({suppressFlushSync:!0,target:p}),p.addEventListener("scroll",h,{passive:!0}),()=>{n(null),p.removeEventListener("scroll",h)}},[o,h,t,n,r]);function d(p){const g=o.current;if(!g||(s?"offsetWidth"in g&&g.offsetWidth===0:"offsetHeight"in g&&g.offsetHeight===0))return;const w=p.behavior==="smooth";let _,A,v;fx(g)?(A=Math.max(zc(g.document.documentElement,s?"width":"height"),s?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight),_=s?g.innerWidth:g.innerHeight,v=s?window.scrollX:window.scrollY):(A=g[s?"scrollWidth":"scrollHeight"],_=zc(g,s?"width":"height"),v=g[s?"scrollLeft":"scrollTop"]);const E=A-_;if(p.top=Math.ceil(Math.max(Math.min(E,p.top),0)),n5(_,A)||p.top===v){i({scrollHeight:A,scrollTop:v,viewportHeight:_}),w&&e(!0);return}w?(a.current=p.top,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{u.current=null,a.current=null,e(!0)},1e3)):a.current=null,s&&(p={behavior:p.behavior,left:p.top}),g.scrollTo(p)}function m(p){s&&(p={behavior:p.behavior,left:p.top}),o.current.scrollBy(p)}return{scrollByCallback:m,scrollerRef:o,scrollToCallback:d}}const px="-webkit-sticky",TL="sticky",ZI=o5(()=>{if(typeof document>"u")return TL;const i=document.createElement("div");return i.style.position=px,i.style.position===px?px:TL});function eD(i){return i}const xY=Gt(()=>{const i=Ne(u=>`Item ${u}`),e=Ne(null),t=Ne(u=>`Group ${u}`),n=Ne({}),r=Ne(eD),s=Ne("div"),o=Ne(rg),a=(u,h=null)=>ii(ke(n,Ye(d=>d[u]),gn()),h);return{components:n,computeItemKey:r,context:e,EmptyPlaceholder:a("EmptyPlaceholder"),FooterComponent:a("Footer"),GroupComponent:a("Group","div"),groupContent:t,HeaderComponent:a("Header"),HeaderFooterTag:s,ItemComponent:a("Item","div"),itemContent:i,ListComponent:a("List","div"),ScrollerComponent:a("Scroller","div"),scrollerRef:o,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),TopItemListComponent:a("TopItemList")}}),SY=Gt(([i,e])=>({...i,...e}),vn(a5,xY)),TY=({height:i})=>C.jsx("div",{style:{height:i}}),IY={overflowAnchor:"none",position:ZI(),zIndex:1},f5={overflowAnchor:"none"},DY={...f5,display:"inline-block",height:"100%"},IL=Je.memo(function({showTopList:i=!1}){const e=bt("listState"),t=$s("sizeRanges"),n=bt("useWindowScroll"),r=bt("customScrollParent"),s=$s("windowScrollContainerState"),o=$s("scrollContainerState"),a=r||n?s:o,u=bt("itemContent"),h=bt("context"),d=bt("groupContent"),m=bt("trackItemSizes"),p=bt("itemSize"),g=bt("log"),w=$s("gap"),_=bt("horizontalDirection"),{callbackRef:A}=HJ(t,p,m,i?rg:a,g,w,r,_,bt("skipAnimationFrameInResizeObserver")),[v,E]=Je.useState(0);tD("deviation",$=>{v!==$&&E($)});const I=bt("EmptyPlaceholder"),S=bt("ScrollSeekPlaceholder")||TY,R=bt("ListComponent"),F=bt("ItemComponent"),k=bt("GroupComponent"),T=bt("computeItemKey"),D=bt("isSeeking"),P=bt("groupIndices").length>0,N=bt("alignToBottom"),L=bt("initialItemFinalLocationReached"),M=i?{}:{boxSizing:"border-box",..._?{display:"inline-block",height:"100%",marginLeft:v!==0?v:N?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:v!==0?v:N?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...L?{}:{visibility:"hidden"}};return!i&&e.totalCount===0&&I?C.jsx(I,{...Hr(I,h)}):C.jsx(R,{...Hr(R,h),"data-testid":i?"virtuoso-top-item-list":"virtuoso-item-list",ref:A,style:M,children:(i?e.topItems:e.items).map($=>{const Q=$.originalIndex,re=T(Q+e.firstItemIndex,$.data,h);return D?be.createElement(S,{...Hr(S,h),height:$.size,index:$.index,key:re,type:$.type||"item",...$.type==="group"?{}:{groupIndex:$.groupIndex}}):$.type==="group"?be.createElement(k,{...Hr(k,h),"data-index":Q,"data-item-index":$.index,"data-known-size":$.size,key:re,style:IY},d($.index,h)):be.createElement(F,{...Hr(F,h),...NY(F,$.data),"data-index":Q,"data-item-group-index":$.groupIndex,"data-item-index":$.index,"data-known-size":$.size,key:re,style:_?DY:f5},P?u($.index,$.groupIndex,$.data,h):u($.index,$.data,h))})})}),kY={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},RY={outline:"none",overflowX:"auto",position:"relative"},xA=i=>({height:"100%",position:"absolute",top:0,width:"100%",...i?{display:"flex",flexDirection:"column"}:{}}),PY={position:ZI(),top:0,width:"100%",zIndex:1};function Hr(i,e){if(typeof i!="string")return{context:e}}function NY(i,e){return{item:typeof i=="string"?void 0:e}}const OY=Je.memo(function(){const i=bt("HeaderComponent"),e=$s("headerHeight"),t=bt("HeaderFooterTag"),n=of(Je.useMemo(()=>s=>{e(zc(s,"height"))},[e]),!0,bt("skipAnimationFrameInResizeObserver")),r=bt("context");return i?C.jsx(t,{ref:n,children:C.jsx(i,{...Hr(i,r)})}):null}),LY=Je.memo(function(){const i=bt("FooterComponent"),e=$s("footerHeight"),t=bt("HeaderFooterTag"),n=of(Je.useMemo(()=>s=>{e(zc(s,"height"))},[e]),!0,bt("skipAnimationFrameInResizeObserver")),r=bt("context");return i?C.jsx(t,{ref:n,children:C.jsx(i,{...Hr(i,r)})}):null});function p5({useEmitter:i,useEmitterValue:e,usePublisher:t}){return Je.memo(function({children:n,style:r,...s}){const o=t("scrollContainerState"),a=e("ScrollerComponent"),u=t("smoothScrollTargetReached"),h=e("scrollerRef"),d=e("context"),m=e("horizontalDirection")||!1,{scrollByCallback:p,scrollerRef:g,scrollToCallback:w}=d5(o,u,a,h,void 0,m);return i("scrollTo",w),i("scrollBy",p),C.jsx(a,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:g,style:{...m?RY:kY,...r},tabIndex:0,...s,...Hr(a,d),children:n})})}function m5({useEmitter:i,useEmitterValue:e,usePublisher:t}){return Je.memo(function({children:n,style:r,...s}){const o=t("windowScrollContainerState"),a=e("ScrollerComponent"),u=t("smoothScrollTargetReached"),h=e("totalListHeight"),d=e("deviation"),m=e("customScrollParent"),p=e("context"),g=Je.useRef(null),w=e("scrollerRef"),{scrollByCallback:_,scrollerRef:A,scrollToCallback:v}=d5(o,u,a,w,m);return h5(()=>{var E;return A.current=m||((E=g.current)==null?void 0:E.ownerDocument.defaultView),()=>{A.current=null}},[A,m]),i("windowScrollTo",v),i("scrollBy",_),C.jsx(a,{ref:g,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...h!==0?{height:h+d}:{}},...s,...Hr(a,p),children:n})})}const FY=({children:i})=>{const e=Je.useContext(u5),t=$s("viewportHeight"),n=$s("fixedItemHeight"),r=bt("alignToBottom"),s=bt("horizontalDirection"),o=Je.useMemo(()=>VB(t,u=>zc(u,s?"width":"height")),[t,s]),a=of(o,!0,bt("skipAnimationFrameInResizeObserver"));return Je.useEffect(()=>{e&&(t(e.viewportHeight),n(e.itemHeight))},[e,t,n]),C.jsx("div",{"data-viewport-type":"element",ref:a,style:xA(r),children:i})},MY=({children:i})=>{const e=Je.useContext(u5),t=$s("windowViewportRect"),n=$s("fixedItemHeight"),r=bt("customScrollParent"),s=zB(t,r,bt("skipAnimationFrameInResizeObserver")),o=bt("alignToBottom");return Je.useEffect(()=>{e&&(n(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,n]),C.jsx("div",{"data-viewport-type":"window",ref:s,style:xA(o),children:i})},BY=({children:i})=>{const e=bt("TopItemListComponent")||"div",t=bt("headerHeight"),n={...PY,marginTop:`${t}px`},r=bt("context");return C.jsx(e,{style:n,...Hr(e,r),children:i})},jY=Je.memo(function(i){const e=bt("useWindowScroll"),t=bt("topItemsIndexes").length>0,n=bt("customScrollParent"),r=bt("context"),s=n||e?VY:UY,o=n||e?MY:FY;return C.jsxs(s,{...i,...Hr(s,r),children:[t&&C.jsx(BY,{children:C.jsx(IL,{showTopList:!0})}),C.jsxs(o,{children:[C.jsx(OY,{}),C.jsx(IL,{}),C.jsx(LY,{})]})]})}),{Component:qY,useEmitter:tD,useEmitterValue:bt,usePublisher:$s}=l5(SY,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},jY),UY=p5({useEmitter:tD,useEmitterValue:bt,usePublisher:$s}),VY=m5({useEmitter:tD,useEmitterValue:bt,usePublisher:$s}),HY=qY,zY=Gt(()=>{const i=Ne(h=>C.jsxs("td",{children:["Item $",h]})),e=Ne(null),t=Ne(h=>C.jsxs("td",{colSpan:1e3,children:["Group ",h]})),n=Ne(null),r=Ne(null),s=Ne({}),o=Ne(eD),a=Ne(rg),u=(h,d=null)=>ii(ke(s,Ye(m=>m[h]),gn()),d);return{components:s,computeItemKey:o,context:e,EmptyPlaceholder:u("EmptyPlaceholder"),FillerRow:u("FillerRow"),fixedFooterContent:r,fixedHeaderContent:n,itemContent:i,groupContent:t,ScrollerComponent:u("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),TableBodyComponent:u("TableBody","tbody"),TableComponent:u("Table","table"),TableFooterComponent:u("TableFoot","tfoot"),TableHeadComponent:u("TableHead","thead"),TableRowComponent:u("TableRow","tr"),GroupComponent:u("Group","tr")}});vn(a5,zY);ZI();const DL={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},$Y={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:kL,floor:i1,max:My,min:mx,round:RL}=Math;function PL(i,e,t){return Array.from({length:e-i+1}).map((n,r)=>({data:t===null?null:t[r+i],index:r+i}))}function WY(i){return{...$Y,items:i}}function kw(i,e){return i&&i.width===e.width&&i.height===e.height}function GY(i,e){return i&&i.column===e.column&&i.row===e.row}const KY=Gt(([{increaseViewportBy:i,listBoundary:e,overscan:t,visibleRange:n},{footerHeight:r,headerHeight:s,scrollBy:o,scrollContainerState:a,scrollTo:u,scrollTop:h,smoothScrollTargetReached:d,viewportHeight:m},p,g,{didMount:w,propsReady:_},{customScrollParent:A,useWindowScroll:v,windowScrollContainerState:E,windowScrollTo:I,windowViewportRect:S},R])=>{const F=Ne(0),k=Ne(0),T=Ne(DL),D=Ne({height:0,width:0}),P=Ne({height:0,width:0}),N=qt(),L=qt(),M=Ne(0),$=Ne(null),Q=Ne({column:0,row:0}),re=qt(),ee=qt(),ue=Ne(!1),Y=Ne(0),J=Ne(!0),q=Ne(!1),H=Ne(!1);Zt(ke(w,kt(Y),vt(([te,ae])=>!!ae)),()=>{St(J,!1)}),Zt(ke(hr(w,J,P,D,Y,q),vt(([te,ae,de,ye,,xe])=>te&&!ae&&de.height!==0&&ye.height!==0&&!xe)),([,,,,te])=>{St(q,!0),JI(1,()=>{St(N,te)}),Ia(ke(h),()=>{St(e,[0,0]),St(J,!0)})}),it(ke(ee,vt(te=>te!=null&&te.scrollTop>0),ga(0)),k),Zt(ke(w,kt(ee),vt(([,te])=>te!=null)),([,te])=>{te&&(St(D,te.viewport),St(P,te.item),St(Q,te.gap),te.scrollTop>0&&(St(ue,!0),Ia(ke(h,$m(1)),ae=>{St(ue,!1)}),St(u,{top:te.scrollTop})))}),it(ke(D,Ye(({height:te})=>te)),m),it(ke(hr(_t(D,kw),_t(P,kw),_t(Q,(te,ae)=>te&&te.column===ae.column&&te.row===ae.row),_t(h)),Ye(([te,ae,de,ye])=>({gap:de,item:ae,scrollTop:ye,viewport:te}))),re),it(ke(hr(_t(F),n,_t(Q,GY),_t(P,kw),_t(D,kw),_t($),_t(k),_t(ue),_t(J),_t(Y)),vt(([,,,,,,,te])=>!te),Ye(([te,[ae,de],ye,xe,Oe,Fe,Be,,$e,mt])=>{const{column:fe,row:ve}=ye,{height:Ie,width:Re}=xe,{width:Ae}=Oe;if(Be===0&&(te===0||Ae===0))return DL;if(Re===0){const an=YI(mt,te),Hn=an+Math.max(Be-1,0);return WY(PL(an,Hn,Fe))}const rt=g5(Ae,Re,fe);let qe,Qe;$e?ae===0&&de===0&&Be>0?(qe=0,Qe=Be-1):(qe=rt*i1((ae+ve)/(Ie+ve)),Qe=rt*kL((de+ve)/(Ie+ve))-1,Qe=mx(te-1,My(Qe,rt-1)),qe=mx(Qe,My(0,qe))):(qe=0,Qe=-1);const st=PL(qe,Qe,Fe),{bottom:ft,top:gt}=NL(Oe,ye,xe,st),xi=kL(te/rt),Mt=xi*Ie+(xi-1)*ve-ft;return{bottom:ft,itemHeight:Ie,items:st,itemWidth:Re,offsetBottom:Mt,offsetTop:gt,top:gt}})),T),it(ke($,vt(te=>te!==null),Ye(te=>te.length)),F),it(ke(hr(D,P,T,Q),vt(([te,ae,{items:de}])=>de.length>0&&ae.height!==0&&te.height!==0),Ye(([te,ae,{items:de},ye])=>{const{bottom:xe,top:Oe}=NL(te,ye,ae,de);return[Oe,xe]}),gn(Xy)),e);const G=Ne(!1);it(ke(h,kt(G),Ye(([te,ae])=>ae||te!==0)),G);const le=As(ke(hr(T,F),vt(([{items:te}])=>te.length>0),kt(G),vt(([[te,ae],de])=>{const ye=te.items[te.items.length-1].index===ae-1;return(de||te.bottom>0&&te.itemHeight>0&&te.offsetBottom===0&&te.items.length===ae)&&ye}),Ye(([[,te]])=>te-1),gn())),se=As(ke(_t(T),vt(({items:te})=>te.length>0&&te[0].index===0),ga(0),gn())),X=As(ke(_t(T),kt(ue),vt(([{items:te},ae])=>te.length>0&&!ae),Ye(([{items:te}])=>({endIndex:te[te.length-1].index,startIndex:te[0].index})),gn(YB),Rc(0)));it(X,g.scrollSeekRangeChanged),it(ke(N,kt(D,P,F,Q),Ye(([te,ae,de,ye,xe])=>{const Oe=t5(te),{align:Fe,behavior:Be,offset:$e}=Oe;let mt=Oe.index;mt==="LAST"&&(mt=ye-1),mt=My(0,mt,mx(ye-1,mt));let fe=rS(ae,xe,de,mt);return Fe==="end"?fe=RL(fe-ae.height+de.height):Fe==="center"&&(fe=RL(fe-ae.height/2+de.height/2)),$e&&(fe+=$e),{behavior:Be,top:fe}})),u);const ne=ii(ke(T,Ye(te=>te.offsetBottom+te.bottom)),0);return it(ke(S,Ye(te=>({height:te.visibleHeight,width:te.visibleWidth}))),D),{customScrollParent:A,data:$,deviation:M,footerHeight:r,gap:Q,headerHeight:s,increaseViewportBy:i,initialItemCount:k,itemDimensions:P,overscan:t,restoreStateFrom:ee,scrollBy:o,scrollContainerState:a,scrollHeight:L,scrollTo:u,scrollToIndex:N,scrollTop:h,smoothScrollTargetReached:d,totalCount:F,useWindowScroll:v,viewportDimensions:D,windowScrollContainerState:E,windowScrollTo:I,windowViewportRect:S,...g,gridState:T,horizontalDirection:H,initialTopMostItemIndex:Y,totalListHeight:ne,...p,endReached:le,propsReady:_,rangeChanged:X,startReached:se,stateChanged:re,stateRestoreInProgress:ue,...R}},vn(XI,Ci,Q0,s5,rh,QI,nh));function g5(i,e,t){return My(1,i1((i+t)/(i1(e)+t)))}function NL(i,e,t,n){const{height:r}=t;if(r===void 0||n.length===0)return{bottom:0,top:0};const s=rS(i,e,t,n[0].index);return{bottom:rS(i,e,t,n[n.length-1].index)+r,top:s}}function rS(i,e,t,n){const r=g5(i.width,t.width,e.column),s=i1(n/r),o=s*t.height+My(0,s-1)*e.row;return o>0?o+e.row:o}const JY=Gt(()=>{const i=Ne(m=>`Item ${m}`),e=Ne({}),t=Ne(null),n=Ne("virtuoso-grid-item"),r=Ne("virtuoso-grid-list"),s=Ne(eD),o=Ne("div"),a=Ne(rg),u=(m,p=null)=>ii(ke(e,Ye(g=>g[m]),gn()),p),h=Ne(!1),d=Ne(!1);return it(_t(d),h),{components:e,computeItemKey:s,context:t,FooterComponent:u("Footer"),HeaderComponent:u("Header"),headerFooterTag:o,itemClassName:n,ItemComponent:u("Item","div"),itemContent:i,listClassName:r,ListComponent:u("List","div"),readyStateChanged:h,reportReadyState:d,ScrollerComponent:u("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),YY=Gt(([i,e])=>({...i,...e}),vn(KY,JY)),XY=Je.memo(function(){const i=Cn("gridState"),e=Cn("listClassName"),t=Cn("itemClassName"),n=Cn("itemContent"),r=Cn("computeItemKey"),s=Cn("isSeeking"),o=Ws("scrollHeight"),a=Cn("ItemComponent"),u=Cn("ListComponent"),h=Cn("ScrollSeekPlaceholder"),d=Cn("context"),m=Ws("itemDimensions"),p=Ws("gap"),g=Cn("log"),w=Cn("stateRestoreInProgress"),_=Ws("reportReadyState"),A=of(Je.useMemo(()=>v=>{const E=v.parentElement.parentElement.scrollHeight;o(E);const I=v.firstChild;if(I){const{height:S,width:R}=I.getBoundingClientRect();m({height:S,width:R})}p({column:OL("column-gap",getComputedStyle(v).columnGap,g),row:OL("row-gap",getComputedStyle(v).rowGap,g)})},[o,m,p,g]),!0,!1);return h5(()=>{i.itemHeight>0&&i.itemWidth>0&&_(!0)},[i]),w?null:C.jsx(u,{className:e,ref:A,...Hr(u,d),"data-testid":"virtuoso-item-list",style:{paddingBottom:i.offsetBottom,paddingTop:i.offsetTop},children:i.items.map(v=>{const E=r(v.index,v.data,d);return s?C.jsx(h,{...Hr(h,d),height:i.itemHeight,index:v.index,width:i.itemWidth},E):be.createElement(a,{...Hr(a,d),className:t,"data-index":v.index,key:E},n(v.index,v.data,d))})})}),QY=Je.memo(function(){const i=Cn("HeaderComponent"),e=Ws("headerHeight"),t=Cn("headerFooterTag"),n=of(Je.useMemo(()=>s=>{e(zc(s,"height"))},[e]),!0,!1),r=Cn("context");return i?C.jsx(t,{ref:n,children:C.jsx(i,{...Hr(i,r)})}):null}),ZY=Je.memo(function(){const i=Cn("FooterComponent"),e=Ws("footerHeight"),t=Cn("headerFooterTag"),n=of(Je.useMemo(()=>s=>{e(zc(s,"height"))},[e]),!0,!1),r=Cn("context");return i?C.jsx(t,{ref:n,children:C.jsx(i,{...Hr(i,r)})}):null}),eX=({children:i})=>{const e=Je.useContext(c5),t=Ws("itemDimensions"),n=Ws("viewportDimensions"),r=of(Je.useMemo(()=>s=>{n(s.getBoundingClientRect())},[n]),!0,!1);return Je.useEffect(()=>{e&&(n({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,n,t]),C.jsx("div",{ref:r,style:xA(!1),children:i})},tX=({children:i})=>{const e=Je.useContext(c5),t=Ws("windowViewportRect"),n=Ws("itemDimensions"),r=Cn("customScrollParent"),s=zB(t,r,!1);return Je.useEffect(()=>{e&&(n({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,n]),C.jsx("div",{ref:s,style:xA(!1),children:i})},nX=Je.memo(function({...i}){const e=Cn("useWindowScroll"),t=Cn("customScrollParent"),n=t||e?iX:rX,r=t||e?tX:eX,s=Cn("context");return C.jsx(n,{...i,...Hr(n,s),children:C.jsxs(r,{children:[C.jsx(QY,{}),C.jsx(XY,{}),C.jsx(ZY,{})]})})}),{useEmitter:y5,useEmitterValue:Cn,usePublisher:Ws}=l5(YY,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},nX),rX=p5({useEmitter:y5,useEmitterValue:Cn,usePublisher:Ws}),iX=m5({useEmitter:y5,useEmitterValue:Cn,usePublisher:Ws});function OL(i,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${i} was not resolved to pixel value correctly`,e,Vi.WARN),e==="normal"?0:parseInt(e??"0",10)}class sX extends HI{getListHtml(){return C.jsx(C.Fragment,{children:C.jsx(HY,{className:this.props.ViewPortMCClassName||"flinnTechVirtuoso",style:{height:this.props.vHeight||"100%"},totalCount:this.list.length,itemContent:e=>{const t=this.list[e];return this.mapSection.getHtml({type:"div",content:this.getCellList(t)})}})})}}class oX extends SB{constructor(){super(...arguments);ie(this,"factory",{text:pJ,attribute:_A,custom:mJ,customBuilt:PJ,img:qB,form:gJ,del:UI,delIcon:pL,delCustom:pL,delText:yJ,edit:VI,editIcon:wJ,editCustom:_J,interactiveMap:AJ,addComponentButton:bJ,plain:EJ,select:CJ,logo:xJ,links:SJ,linkItem:TJ,logout:IJ,default:er,map:HI,order:DJ,innerMap:kJ,backgroundImage:RJ,viewPortMap:sX})}}class nD{constructor(){ie(this,"MCMapContainer","Map-Container");ie(this,"MCMapSection","Map-Section");ie(this,"MCLink","Map-Link");ie(this,"MCCell","Map-Cell");ie(this,"MCCustomDelItem","Map-Custom-Del-Item");ie(this,"MCDelItem","Map-Del-Item");ie(this,"MCDelImgItem","Map-Del-imgItem");ie(this,"MCCustomEditItem","Map-Custom-Edit-Item");ie(this,"MCEditImgItem","Map-Edit-imgItem");ie(this,"MCEditItem","Map-Edit-Item");ie(this,"MCAttributeItem","Map-Attribute-Item");ie(this,"MCImgItem","Map-imgItem");ie(this,"MCTextItem","Map-Text-Item");ie(this,"MCActiveItem","Map-Active-Item");ie(this,"MCCustom","");ie(this,"MCBackgroundItem","background-item");ie(this,"MCCellBackground","cell-background");ie(this,"MCBackgroundLink","cell-background");ie(this,"MCLogoItem","navLogo")}}class SA extends nD{constructor(){super(...arguments);ie(this,"MCSectionHover","DC-Map-Section:hover");ie(this,"MCCustomDelItem","DC-Custom-Del-Item");ie(this,"MCDelItem","DC-Del-Item");ie(this,"MCDelImgItem","DC-Del-imgItem");ie(this,"MCCustomEditItem","Map-Custom-Edit-Item");ie(this,"MCEditImgItem","DC-Edit-imgItem");ie(this,"MCEditItem","DC-Edit-Item")}}class TA extends SA{constructor(){super(...arguments);ie(this,"MCMapContainer","DR-Map-Container");ie(this,"MCMapSection","DR-Map-Section")}}class aX extends TA{constructor(){super(...arguments);ie(this,"MCMapContainer","DRW-Map-Container")}}class lX extends TA{constructor(){super(...arguments);ie(this,"MCMapContainer","IM-Map-Container");ie(this,"MCMapSection","IM-Map-Section");ie(this,"MCMap","IM-Map");ie(this,"MCAddButton","IM-addButton");ie(this,"MCActiveItem","IM-Active-Item");ie(this,"MCCell","IM-Cell")}}class uX extends TA{constructor(){super(...arguments);ie(this,"MCActiveLink",this.MCActiveItem);ie(this,"MCLinkItem",this.MCLink);ie(this,"MCMapSection","SB-Map-Section")}}class cX extends SA{constructor(){super(...arguments);ie(this,"MCActiveLink",this.MCActiveItem);ie(this,"MCLinkItem",this.MCLink);ie(this,"MCMapSection","SB-link");ie(this,"MCCell","SB-Cell-Link");ie(this,"MCLink","SB-Map-Link");ie(this,"MCLinkItem","SB-Map-Link")}}class hX extends SA{constructor(){super(...arguments);ie(this,"MCActiveLink",this.MCActiveItem);ie(this,"MCLinkItem",this.MCLink)}}const dX=Object.freeze(Object.defineProperty({__proto__:null,DefaultColumn:SA,DefaultRegistry:nD,DefaultRow:TA,DefaultWrapRow:aX,InteractiveMap:lX,Links:cX,SideBar:uX,TopBar:hX},Symbol.toStringTag,{value:"Module"}));class fX extends LI{constructor(){super(dX),this.factory.default=nD}}class pX{constructor(){ie(this,"factory",{text:ev,tag:v5,plain:vX,textAndTag:yX,textAndTag2:gX,bool:_X,textAttributeList:wX})}getFilter(e){if(e)return this.factory[e]}registerFilter(e,t){this.factory[e]=t}}function v5(i){let{list:e,attribute:t,tagList:n}=i;return e.length>0&&(e=e.filter(r=>!!n.find(o=>(t?o.getJson()[t]:o.getJson().connectedId)===r.getJson()._id))),e}function mX(i){let e=[];if(i.search&&i.list){const t=i.search.toLowerCase().split(" ").map(n=>n.trim());e=i.list.filter(n=>{const r=n.getJson()[i.attribute||"tags"];if(r){let s=r.split(i.splitStr||",");s=s.map(o=>o.toLowerCase());for(let o of t)if(s.includes(o))return!0}else return!1})}return e}function gX(i){let{list:e,attributes:t,search:n}=i,r=[],s=[],o=t.split(",");for(let u of o)s.push(ev({...i,attribute:u}));let a=mX({...i});return r=[...s[0],...a,...s[1],...s[2]],r=rD(r),r}function yX(i){let{list:e,attribute:t,tagList:n,attribute2:r,attributeTag:s,search:o}=i,a=ev({...i,attribute:t}),u=v5({...i,attribute:s}),h=ev({...i,attribute:r});return e=[...a,...u,...h],rD(e)}function rD(i){const e=new Map;return i.forEach(t=>{const r=t.getJson()._id;e.has(r)||e.set(r,t)}),Array.from(e.values())}function ev(i){let{list:e,attribute:t,search:n}=i;return n&&n.length>0&&(e=e.filter(r=>{var s;return(s=r.getJson()[t])==null?void 0:s.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function vX(i){let{list:e,attribute:t,search:n}=i;return n&&n.length>0&&(e=e.filter(r=>{var s;return(s=r[t])==null?void 0:s.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function wX(i){let{attributeList:e}=i,t=[];for(let n of e)t=[...t,...ev({...i,attribute:n})];return t=rD(t),t}function _X(i){let{list:e,attribute:t,search:n}=i;return e=e.filter(r=>r.getJson()[t]===n),e}class w5 extends eg{constructor(){super();ie(this,"FilterFactory");this.getFilterFactory(),this.mainFunc=this.getMapComponent}getFactory(){return this.factory===void 0&&(this.factory=new oX),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new fX),this.themeFactory}getFilterFactory(){return this.filterFactory===void 0&&(this.filterFactory=new pX),this.filterFactory}getMapComponent(t,n){return n=n||"default",this.factory.getComponent(n,t)}}class er extends jI{constructor(e){super(e),this.state={type:"map"},this.interface=_5}setFilterInfo(){this.filterFacotry=this.interface.getFilterFactory(),this.filters=this.props.filters,this.filterFunc=this.props.filterFunc,this.filter=this.props.filter}getFilterFunc(){var e;if(!this.filterFunc&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filterFunc");t&&(this.filterFunc=t.func)}}getFilter(){var e;if(!this.filter&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filter");t&&(this.filter={...t})}}getList(){var t,n,r,s;let e=this.props.name;this.list=this.props.list?this.props.list:this.filter?(r=this.componentList)==null?void 0:r.getList(e,(t=this.filter)==null?void 0:t.search,(n=this.filter)==null?void 0:n.attribute):(s=this.componentList)==null?void 0:s.getList(e)}filterListByFilterFunc(){this.list&&(this.list=this.list.filter(e=>this.filterFunc?this.filterFunc(e):!0))}filterListByFilterFactory(){if(this.filters)for(let e of this.filters){let t=this.filterFacotry.getFilter(e.type);t&&(this.list=t({list:this.list,...e}))}}setProps(){let e=this.props.cells;this.addToProps={cells:e,list:this.list}}componentPreSetup(){this.addToInitialSetup=[this.setFilterInfo,this.getFilterFunc,this.getFilter,this.getList,this.filterListByFilterFunc,this.filterListByFilterFactory]}}const _5=new w5;class A5 extends dt{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getNavLists],this.state={}}getLinks(){var e,t;return this.props.links?this.props.links:(t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes}getDefaultNavItem(e){return{logo:{imgSrc:this.props.logoURL,label:this.props.logoLabel,...this.props},links:{links:this.getLinks(),...this.props,class:"fit"},logout:{logoutFunc:this.props.logoutFunc,auth:this.props.auth,wrapperClass:"SB-logout",...this.props}}[e]}getList(){let e=this.props.navList,t=e.getList();for(let n=0;n<t.length;n++)if(t[n].default){let r=this.getDefaultNavItem(t[n].type);r.type=t[n].type,e.update(n,r)}return this.props.type==="topBar"&&(t=t.filter(n=>n.type!=="links")),t}getHtml(){return C.jsx(er,{theme:this.props.mapTheme,list:this.mapList,cells:this.list,...this.props.navMapProps})}getNavLists(){this.list=this.props.list?this.props.list:this.getList(),this.mapList=this.props.mapList?this.props.mapList:[{}]}}class AX{constructor(){ie(this,"factory",{default:A5})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),C.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class bX extends dt{constructor(e){super(e),this.state={defaultStyle:"navMenu",renderComp:void 0}}async open(){let e=await this.props.open();this.props.type==="topBar"&&(this.state.renderComp?this.setState({renderComp:void 0}):this.setState({renderComp:e}))}render(){return this.props.app,C.jsxs("div",{children:[C.jsxs("div",{onClick:this.open,className:this.props.menuClass?this.props.menuClass:this.state.defaultStyle,children:[this.props.menuContent&&C.jsx(C.Fragment,{children:this.props.menuContent})," "]}),this.state.renderComp&&C.jsx(C.Fragment,{children:this.state.renderComp})]})}}class EX extends pr{constructor(e){super(e),this.state={...this.state,defaultType:this.props.type?this.props.type:"sideBar",typeKey:"layout",defaultNavType:"default",phoneSize:850,left:-400}}getProps(){var e,t;return{mapTheme:this.props.mapTheme||this.state.defaultType,links:this.props.links||((t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes),...this.props}}getFactoryComponent(e){let t=this.props.mapType?this.props.mapType:this.state.defaultNavType;return this.props.factory.getComponent(t,e)}componentDidMount(){this.resize!==void 0&&(window.addEventListener("resize",this.resize),this.resize())}componentWillUnmount(){this.resize!==void 0&&window.removeEventListener("resize",this.resize)}resize(){if(window.innerWidth<850){this.setState({phone:!0,tablet:!1,defaultType:this.props.phoneLayout?this.props.phoneLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}if(window.innerWidth<1224){this.setState({phone:!1,tablet:!0,defaultType:this.props.tabletLayout?this.props.tabletLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}window.innerWidth>1224&&(this.state.phone&&this.setState({phone:!1,defaultType:this.state.ogType}),this.state.tablet&&this.setState({tablet:!1,defaultType:this.state.ogType}))}async setStyleOnMenuClick(e){const t=n=>new Promise(r=>setTimeout(r,n));this.card.setStyle({...this.card.getStyle(),left:e.toString()+"px"}),await this.setState({left:e}),await t(10)}async setNavOpenClose(){if(this.state.left===-400)for(let e=-400;e<600;e=e+15){if(e>0){this.setState({left:0});break}await this.setStyleOnMenuClick(e)}else for(let e=0;e>-450;e=e-15){if(e<-400){this.setState({left:-400});break}await this.setStyleOnMenuClick(e)}}async openCloseLinks(){var n,r;let e=C.jsx(er,{list:this.props.links||((r=(n=this.props.app)==null?void 0:n.state)==null?void 0:r.routes),cells:[{type:"link"}]});return C.jsx(pr,{content:e})}async openCloseNavFun(){return await{topBar:this.openCloseLinks,sideBar:this.setNavOpenClose}[this.state.defaultType]()}getMenu(){return this.props.menuComponent?C.jsx(this.props.menuComponent,{...this.props.menuComponentProps,open:this.openCloseNavFun,type:this.state.defaultType}):C.jsx(bX,{open:this.openCloseNavFun,type:this.state.defaultType,...this.props.menuComponentProps})}getContent(){let e=this.getProps(),t=this.getFactoryComponent(e);return this.content=C.jsxs(C.Fragment,{children:[t,this.props.type!=="type"&&(this.state.phone||window.innerWidth<this.state.phoneSize)&&C.jsx(C.Fragment,{children:this.getMenu()})]}),this.content}}class CX{constructor(){bi.bind(this),this.list=[{type:"logo",picURL:void 0,label:void 0,default:!0},{type:"links",linkJson:void 0,default:!0},{type:"logout",logoutFunc:void 0,auth:void 0,default:!0}]}setList(e){this.list=e}getList(){return this.list}insert(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,0,t)}add(e,t){t?this.list.unshift(e):this.list.push(e)}addCustomJSX(e,t,n){let r={type:"custom",custom:e};t?this.insert(t,r):this.add(r,n)}update(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list[e]={...this.list[e],...t}}remove(e){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,1)}}class b5 extends eg{constructor(){super();ie(this,"factory");ie(this,"navList");bi.bind(this),this.getFactory(),this.getNavList(),this.mainFunc=this.getNav}getFactory(){return this.factory||(this.factory=new AX),this.factory}getNav(t){return C.jsx(EX,{factory:this.factory,navInterface:this,navList:this.navList,...t})}getNewNavList(){return new CX}setNavListForce(t){this.navList=t}getNavList(){return this.navList||(this.navList=this.getNewNavList()),this.navList}}const s1=new b5;class xX extends jI{constructor(e){super(e),this.interface=s1}}class SX{constructor(){ie(this,"factory",{})}getComponent(e){return this.factory[e]}registerComponent(e,t){this.factory[e]=t}}class TX extends SX{constructor(){super(...arguments);ie(this,"factory",{})}}class IX extends dt{constructor(e){super(e),this.state={}}checkPopupSwitch(e){var t,n;return this.popupSwitch=this.props.popupSwitch||((n=(t=this.props.app)==null?void 0:t.state)==null?void 0:n.popupSwitch),this.popupSwitch!==""&&this.popupSwitch!==void 0&&(e=!0),e}checkType(e){var r,s,o,a,u;let t=this.props.currentPopupComponent||((s=(r=this.props.app)==null?void 0:r.state)==null?void 0:s.currentPopupComponent),n=(o=this.popupFactory.getComponent(this.popupSwitch))==null?void 0:o.componentType;return n&&(t=this.isArray(t),e=((u=(a=t[0])==null?void 0:a.getJson())==null?void 0:u.type)===n&&t.length>0),e}render(){var n;let e=this.checkPopupSwitch(!1);e&&(e=this.checkType(e)),this.popupFactory=this.props.factory||this.props.app.state.popupFactory;let t=(n=this.popupFactory)==null?void 0:n.getComponent(this.popupSwitch);return C.jsx(C.Fragment,{children:e&&(t==null?void 0:t.content)&&C.jsx(pr,{content:C.jsx(t.content,{}),popup:!0,type:t.popupType||"biggerCard",theme:t.popupTheme||"Default",handleClose:()=>{if(t.handleClose)t.handleClose();else{let r=this.props.app.state.currentPopupComponent;r&&this.props.app.state.operationsFactory.removeFromList(r),this.props.app.dispatch({currentPopupComponent:void 0,popupSwitch:void 0})}}})})}}class DX extends eg{constructor(){super();ie(this,"factory");bi.bind(this),this.getFactory()}getFactory(){return this.factory||(this.factory=new TX),this.factory}createPopupMachine(t){return C.jsx(IX,{app:(t==null?void 0:t.app)||this.getAppComponent(),factory:this.factory})}}let LL=new DX;class kX{constructor(){ie(this,"convertStringToLink",e=>e&&(!e.startsWith("http://")&&!e.startsWith("https://")?"https://"+e:e))}isLikelyUrl(e){return/\.(com|net|org|io|gov|edu|co)\b/.test(e)||/^(?:f|ht)tps?\:\/\//.test(e)||/^mailto\:/i.test(e)}checkURLforString(e){return window.location.href.includes(e)}getIdFromURL(e,t){let r=window.location.href.split("/"),s=r[r.length-1],o=e?s.split("-"):[s];return t?o[t]:o[0]}getTypeFromURL(){let t=window.location.href.split("/");return t[t.length-2]}}let xa=new kX;class E5 extends dt{constructor(t,n){super(t);ie(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:!0},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:r,path:s,snapShot:o,owner:a}=this.state;this.compList=await this.componentList.getList(t,n,r),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:t,ids:n,filterKeys:r,path:s,snapShot:o,owner:a}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}async componentDidMount(){this.getComponentsFromBackend();let t=this;window.addEventListener("popstate",function(n){t.onBackClick(n)})}onBackClick(t){this.getComponentsFromBackend()}componentDidUpdate(){this.getComponentsAgain()}async getComponentsAgain(t,n){this.getFromURL(),(this.app.state.urlChange||this.state.reRender&&this.urlId!==this.state.urlId)&&(await this.setState({urlId:this.urlId}),await this.dispatch({urlChange:void 0}),this.forceRerender=!1,this.getComponentsFromBackend())}async getFromURL(){this.urlType=xa.getTypeFromURL(),this.urlId=xa.getIdFromURL()}}class lf extends E5{constructor(t,n){super(t,n);ie(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:n==null?void 0:n.owner},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:r,path:s,snapShot:o,owner:a}=this.state;this.compList=await this.componentList.getComponents(),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:this.state.owner,ids:n,filterKeys:r,path:s,snapShot:o,typeAttribute:"owner"}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}}class ig extends E5{async getComponentsFromBackend(){await this.getFromURL(),await this.getFirstComponent(),this.comp&&await this.getAssociatedItems(),this.setGotComponents()}async getFirstComponent(e,t){let n=e||this.urlType,r=t||this.urlId;this.comp=this.componentList.getComponent(n,r),this.comp||(this.comp=await this.componentList.getComponentsFromBackend({type:n,ids:r,filterKeys:"_id",owner:this.state.owner}),this.comp=this.comp.length>0?this.comp[0]:void 0)}async getAssociatedItems(){this.compList=await this.comp.getAssociatedItems(this.state.itemTypes),this.compList.length>0&&this.setState({gotComponents:!0}),this.compList=await this.comp.getAssociatedItemsFromBackend(this.state.itemTypes),await this.setCurrentItems()}setCurrentItems(){this.dispatch({currentComponent:this.comp,["current"+this.getCapitalFirstLetter(this.comp.getJson().type)]:this.comp,...this.dispatchItems})}setGotComponents(){this.setState({gotComponents:!0,gotComponentsFromBackend:!0,components:this.compList,urlId:this.urlId})}}class C5 extends dt{constructor(e){super(e),this.state={...this.state,email:"",password:""}}validate(){return!0}onChange(e){let{name:t,value:n}=e.target;this.setState({[t]:n})}onSub(){this.validate()&&this.APIService.login(this.state.email,this.state.password)}getSwitchLink(){return C.jsxs("div",{id:"signUpFT",children:["Don't have an Account? ",C.jsx(yn,{to:"/register",children:"Sign Up"})]})}preSetup(){this.setComponents(["container","header","form","submitButton"])}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Login"})}getFormHtml(){let e=C.jsxs(C.Fragment,{children:[C.jsx("div",{children:"Email"}),C.jsx("input",{className:"defaultInputFormAuth",name:"email",onChange:this.onChange,value:this.state.email}),C.jsx("div",{style:{marginTop:"10px"},children:"Password"}),C.jsx("input",{className:"defaultInputFormAuth",name:"password",type:"password",onChange:this.onChange,value:this.state.password})]});return this.form.setClass("defaultLoginForm"),this.form.getHtml({type:"div",content:e})}getSubmitHtml(){return this.submitButton.setClass("defaultLoginButton"),this.submitButton.setOnClick(this.onSub),this.submitButton.getHtml({type:"div",content:"Submit"})}getContainerHtml(){this.container.setClass(this.props.loginContainer||"fitCC");let e=C.jsxs(C.Fragment,{children:[this.getHeaderHtml(),this.getFormHtml(),this.getSubmitHtml(),this.getSwitchLink()]});return this.container.getHtml({type:"div",content:e})}getHtml(){let e=this.getContainerHtml();return C.jsx("div",{className:"fullCCLayoutRow",children:C.jsx(pr,{type:this.props.loginCardType||"biggerCard",content:e})})}}class RX extends C5{async onSub(){if(this.validate()){let e=await this.APIService.register(this.state.email,this.state.password);if(!e.error){let t={type:"user",email:this.state.email,_id:this.state.email};e=await this.componentList.addComponents(t),window.history.pushState({},"","/"),this.dispatch({currentUser:e})}}}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Register"})}getSwitchLink(){return C.jsxs("div",{children:["Have an Account? ",C.jsx(yn,{to:"/login",children:"Login"})]})}}class PX extends dt{constructor(e){super(e),this.state={...this.state,routes:[],loginComp:C5,registerComp:RX}}addToRouter(e){let t=[...this.state.routes,e];this.setState({routes:t})}getRouteMap(e,t){let n=C.jsx(C.Fragment,{});return e&&(e=[...e],n=e==null?void 0:e.map((r,s)=>(r.path||(r.path=this.classNameToString(r.comp),s===0&&(r.path="/")),C.jsxs(C.Fragment,{children:[C.jsx(Du,{path:r.path,element:C.jsx(r.comp,{props:{...t,...r.props}})}),C.jsx(Du,{path:r.path+"/:id",element:C.jsx(r.idComp,{props:{...t,...r.props}})})]})))),n}getRoutes(e,t){var r;let n=C.jsxs(IN,{children:[this.getRouteMap(e,t),this.state.routes.map((s,o)=>C.jsx(C.Fragment,{children:s}))]});return(r=this.app)!=null&&r.state.currentUser||(n=this.getUserAuthRoutes(t)),n}getUserAuthRoutes(e){let t=e.extraAuthRoutes,n=e.loginComp||this.state.loginComp,r=e.registerComp||this.state.registerComp;return C.jsxs(IN,{children:[C.jsx(Du,{path:"/",element:C.jsx(n,{props:{...e}})}),C.jsx(Du,{path:"/login",element:C.jsx(n,{props:{...e}})}),C.jsx(Du,{path:"/register",element:C.jsx(r,{props:{...e}})}),t==null?void 0:t.map((o,a)=>C.jsxs(C.Fragment,{children:[C.jsx(Du,{path:o.path,element:C.jsx(o.comp,{props:{...e,...o.props}})}),C.jsx(Du,{path:o.path+"/:id",element:C.jsx(o.idComp,{props:{...e,...o.props}})})]}))]})}getHtml(){var s;let e={...this.props};e.app=this.app;let t=(s=this.app)==null?void 0:s.state,n=this.props.routes||(t==null?void 0:t.routes),r=this.getRoutes(n,e);return C.jsx(C.Fragment,{children:r})}}class NX{constructor(){ie(this,"registry",{})}getRegistry(){return this.registry}addToRegistry(e,t){this.registry[e]=t}getItemFromRegistry(e){return this.registry[e]}}class OX extends dt{constructor(t,n,r){super(t);ie(this,"endpoint");ie(this,"db");ie(this,"storage");ie(this,"auth");ie(this,"popupComponents");ie(this,"popupComponentsProps");n=this.props.config||n,this.popupComponents=this.props.popupComponents,this.componentListInterface=new OG(this.dispatch,n.endpoint,n.db,n.storage,n.auth),this.componentList=this.componentListInterface.createComponentList(),this.factory=this.componentListInterface.getFactory(),this.operationsFactory=this.componentList.getOperationsFactory(),this.interfaceRegistry=new NX,this.initialPropsSetupFunctions=[this.propogateApp,...this.initialPropsSetupFunctions],this.state={componentList:this.componentList,componentListInterface:this.componentListInterface,operationsFactory:this.operationsFactory,factory:this.factory,theme:this.props.theme||"default",pageClass:this.props.pageClass||"fullScreen",pageStyle:this.props.pageStyle,extraRouteKey:this.props.extraRouteKey||"extraRoutes",navBarProps:this.props.NavBarProps||{},popupFactory:LL.getFactory(),popups:this.props.popups||[],global:this.props.global||{},routes:this.props.routes||[]},r&&this.registerListWithFactory(r)}async checkForUser(){let t=await this.APIService.getCurrentUser();t&&await this.APIService.checkIfLoggedIn()&&this.APIService.getuser(t.email)}componentDidMount(){this.checkForUser()}registerListWithFactory(t){for(let n of t){let s=new n().getJson().type;this.factory.registerComponents({name:s,component:n}),this.createPopupDefaultsByType(s)}}createPopupDefaultsByType(t){var n;if((n=this.popupComponents)!=null&&n[t]){let r=this.getCapitalFirstLetter(t),s={content:this.popupComponents[t],popupSwitch:"add"+r,componentType:t},o={...s,popupSwitch:"update"+r};this.state.popups=[...this.state.popups,s,o]}}dispatch(t){t=t||{},this.setState({...t})}setPopups(){for(let t of this.state.popups){let n=t.componentType;n&&(t={...t,...this.popupComponentsProps[n]}),t.popupSwitch||(t.popupSwitch=this.classNameToString(t.content)),this.state.popupFactory.registerComponent(t.popupSwitch,t)}}propogateApp(){this.app={state:this.state,dispatch:this.dispatch.bind(this),...this.state.global},_5.setAppComponent(this.app),jB.setAppComponent(this.app),CB.setAppComponent(this.app),s1.setAppComponent(this.app),EB.setAppComponent(this.app)}getHtml(t){this.setPopups();let n=[...this.state.routes];return this.state[this.state.extraRouteKey]&&(n=[...n,...this.state[this.state.extraRouteKey]]),C.jsx("div",{className:this.state.pageClass,style:this.state.pageStyle,children:C.jsxs(dG,{children:[LL.createPopupMachine({app:this.app}),this.state.currentUser&&C.jsx(xX,{...this.state.navBarProps}),t?C.jsx(t.content,{props:{...t.props}}):C.jsx(C.Fragment,{}),C.jsx(PX,{routes:n,extraAuthRoutes:this.state.extraAuthRoutes})]})})}}class x5 extends LI{constructor(){super(...arguments);ie(this,"factory",{form:BB,map:w5,nav:b5})}}new x5;new x5;class Tr extends IG{constructor(t){super(t);ie(this,"json",{...this.json,type:"",name:"",owner:"",picURL:""})}}class LX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"user"})}}class iD extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"contact",phone:"",autoAI:!0,email:"",title:"",company:"",mobile:"",firstName:"",lastName:"",address:"",city:"",state:"",zip:"",source:"",finishedSequenceTags:"",tags:"",conversationIds:[]})}}let FX=class extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"conversation",contactIds:[]})}};class MX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"template",content:""})}}class BX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"sequence",steps:[],finished:0,replyRate:0,limit:"20"})}}class jX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"step",delay:0,messageId:""})}}class S5 extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,conversationIds:[],ownerMessage:!1})}}class qX extends S5{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"textMessage",content:"",timestamp:""})}}class UX extends S5{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"email",subject:"",body:"",timeStamp:""})}}class VX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"potentialProspect",phone:"",email:"",researchId:"",conversationIds:[]})}}class HX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"research",searchFrequency:"",AIPrompt:"",active:!0,skipCompanySearch:!1,hasPeopleCsv:!1,hasCompanyCsv:!1})}}class zX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"client",name:"",email:"",researchId:"",conversationIds:[]})}}class $X extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"AIPrompt"})}}class WX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"aiSettings",autoAI:""})}}class GX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"todo",attribute1:"Create Authenticated User",attribute2:"Create User Data",attribute3:"Create Limiter",attribute4:"Set Up Google Auth",attribute5:"Setting Obj",attribute6:"Firebase AI Training",complete1:!1,complete2:!1,complete3:!1,complete4:!1,complete5:!1,complete6:!1,clientId:""})}}class KX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"limit",limit:500})}}let JX=class extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"csv"})}};class YX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"open"})}}class XX extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"outreachUser",mailboxId:"",mailboxEmail:""})}}class QX extends iD{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"peopleToResearch"})}}class ZX extends iD{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"companiesToResearch"})}}class eQ extends Tr{constructor(){super(...arguments);ie(this,"json",{...this.json,type:"training"})}}const tQ=Object.freeze(Object.defineProperty({__proto__:null,AIPrompt:$X,AISettings:WX,Client:zX,CompaniesToResearch:ZX,Contact:iD,Conversations:FX,CsvUpload:JX,Email:UX,Limit:KX,Open:YX,OutreachUser:XX,PeopleToResearch:QX,PotentialProspect:VX,Research:HX,Sequence:BX,Step:jX,Template:MX,TextMessage:qX,Todo:GX,Training:eQ,User:LX},Symbol.toStringTag,{value:"Module"})),nQ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23505050'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'/%3e%3c/svg%3e",rQ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='%23505050'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M20.01%2015.38c-1.23%200-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57%201.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53%200-.54-.45-.99-.99-.99H4.19C3.65%203%203%203.24%203%203.99%203%2013.28%2010.73%2021%2020.01%2021c.71%200%20.99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z'/%3e%3c/svg%3e";class o1 extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}formatDate(e){console.log(this);const t=new Date((e==null?void 0:e.seconds)*1e3+(e==null?void 0:e.nanoseconds)/1e6),r=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],s=t.getDate(),o=t.getFullYear();return`${r} ${s}, ${o}`}render(){var u,h,d,m,p,g,w,_,A;let e=window.innerWidth>600;(u=this.propsState.popupSwitch)!=null&&u.includes("addContact")&&(e=!1);let t=e?this.propsState.currentContact:this.props.obj,n=t&&(t!=null&&t.getJson().date)?this.formatDate(t==null?void 0:t.getJson().date):"";const r=e?this.propsState.currentContact:this.propsState.currentPopupComponent,s=!e;let o=t?"Edit":"Add",a=C.jsx(No,{formClass:"dark-button-1",content:"Save",isPopup:s});return((h=this.propsState.popupSwitch)!=null&&h.includes("updateContact")||window.innerWidth>600&&!((d=this.propsState.popupSwitch)!=null&&d.includes("addContact")))&&(a=C.jsx(qI,{formClass:"dark-button-1",obj:r,content:"Save",isPopup:s,callbackFunc:this.props.callbackFunc})),C.jsxs(C.Fragment,{children:[C.jsxs("h2",{style:{position:"sticky",top:0,padding:"2%",width:"80%"},children:[o," Contact"]}),e&&C.jsx("div",{className:"close-contact-button",onClick:()=>{this.dispatch({currentContact:null})},children:"X"}),t&&C.jsxs("h3",{style:{padding:"10px",font:"normal normal 900 15px/16px Satoshi"},children:[t.getJson().firstName," ",t.getJson().lastName]}),C.jsxs("div",{style:{padding:"2%",paddingBottom:"80px",height:"100%",paddingTop:"12px"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsxs("div",{className:"contact-Add-container",children:[C.jsxs("div",{className:"contact-contact-data",children:[C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().firstName?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"First Name:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,formClass:"underline-form",name:"firstName",placeholder:"FirstName",inPopup:s})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().lastName?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Last Name:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,placeholder:"LastName",formClass:"underline-form",name:"lastName",inPopup:s})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().email?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:C.jsx("span",{children:C.jsx("img",{src:nQ,className:"contact-img-ico"})})}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"email",inPopup:s,placeholder:"1234@mail.com"})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().mobile?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:C.jsx("span",{children:C.jsx("img",{src:rQ,className:"contact-img-ico"})})}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"mobile",inPopup:s,placeholder:"XXX-XXX-XXXX"})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().company?"":"unfilled-container"}`,style:{marginTop:"24px"},children:[C.jsx("div",{className:"row-name",children:"Company:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"company",inPopup:s,placeholder:"SalesCapture AI"})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().title?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Title:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,placeholder:"ie. Vice President of People",name:"title",inPopup:s})})]}),t&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().address?"":"unfilled-container"}`,style:{marginTop:"24px"},children:[C.jsx("div",{className:"row-name",children:"Address:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"address",inPopup:s,placeholder:"123 Street Way"})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().city?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"City:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"city",inPopup:s,placeholder:"Sales Lake City"})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().state?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"State:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"state",inPopup:s,placeholder:"State/Territory"})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().zip?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"ZIPcode:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"zip",inPopup:s,placeholder:"ZIP"})})]})]})]}),C.jsxs("div",{className:"contact-contact-data",children:[C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().source?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Lead Source:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{formClass:"underline-form",obj:t,name:"source",inPopup:s,placeholder:"unknown"})})]}),C.jsxs("div",{className:"row-container",title:"Comma separated",children:[C.jsx("div",{className:"row-name",style:{width:"fit-content"},children:"Tags:"}),C.jsx("div",{className:"row-field",title:"comma seperated",children:C.jsx(nt,{formClass:"underline-form",obj:t,placeholder:"ie. contacted, tag1, tag3",name:"tags",inPopup:s})})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column",marginTop:"12px"},children:[C.jsx("div",{className:"row-name",style:{borderRight:"none"},children:"Notes"}),C.jsx("div",{children:C.jsx(nt,{obj:t,type:"quill",name:"notes",inPopup:s})})]}),t&&(t==null?void 0:t.getJson().date)&&C.jsx(C.Fragment,{children:C.jsxs("div",{className:"row-container",style:{flexDirection:"column",marginTop:"12px"},children:[C.jsx("div",{className:"row-name",style:{borderRight:"none"},children:"Contact Create Date"}),C.jsx("div",{style:{fontSize:"14px"},children:n})]})})]}),C.jsxs("div",{style:{paddingBottom:"20px",width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end",gap:"8px"},children:[C.jsx("div",{style:{marginRight:"0px"}}),!((p=(m=this.propsState)==null?void 0:m.currentContact)!=null&&p.getJson().finished)&&!((w=(g=this.propsState)==null?void 0:g.popupSwitch)!=null&&w.includes("add"))?C.jsx("div",{onClick:()=>{var v;if((v=this.propsState.currentContact)==null||v.setCompState({autoAI:!1},{run:!0},!0),sequence){let E=parseInt(sequence.getJson().finished)+1;sequence.setCompState({finished:E}),sequence.update()}},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Turn off AI"}):C.jsx("div",{onClick:()=>{var v;(v=this.propsState.currentContact)==null||v.setCompState({autoAI:!0},{run:!0},!0)},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Turn on AI"}),!((_=this.propsState.currentContact)!=null&&_.getJson().finished)&&C.jsxs(C.Fragment,{children:[" ",!((A=this.propsState.currentContact)!=null&&A.getJson().finished)&&C.jsx("div",{onClick:()=>{var I,S,R;(I=this.propsState.currentContact)==null||I.setCompState({finished:!0}),(S=this.propsState.currentContact)==null||S.update();let v=this.componentList.getComponent("sequence",(R=this.propsState.currentContact)==null?void 0:R.getJson().sequenceId),E=parseInt(v==null?void 0:v.getJson().finished)+1;v.setCompState({finished:E}),v.update()},className:"dark-button-1",style:{position:"relative",width:"fit-content",height:"fit-content"},children:"Remove From Sequence"})]}),a]})]})," "]})]})}}class IA extends dt{constructor(e){super(e),this.state={...this.state,checked:!1,activeBool:!1}}componentDidMount(){this.checkIfActive()}async componentDidUpdate(e,t){var r,s;let n=this.props.obj;n&&((r=this.propsState[this.props.checkKey])!=null&&r.includes(n)&&this.state.activeBool===!1?this.setState({checked:!0,activeBool:!0}):!((s=this.propsState[this.props.checkKey])!=null&&s.includes(n))&&this.state.activeBool===!0&&this.setState({checked:!1,activeBool:!1}))}checkIfActive(){var t;let e=this.props.obj;e&&(t=this.propsState[this.props.checkKey])!=null&&t.includes(e)&&this.setState({checked:!0})}async handleToggle(){await this.setState(e=>({checked:!e.checked})),this.state.checked?this.check(this.props.obj):this.uncheck(this.props.obj)}check(e){this.setState({checked:!0}),this.props.check?this.props.check(e):this.props.cell.check(this.props.obj)}uncheck(e){this.setState({checked:!1}),this.props.uncheck?this.props.uncheck(e):this.props.cell.uncheck(this.props.obj)}render(){const{checked:e}=this.state;return C.jsxs("label",{className:this.props.class||"checkbox-container",children:[this.props.label||"",C.jsx("input",{type:"checkbox",checked:e,onChange:this.handleToggle}),C.jsx("span",{className:"checkmark"})]})}}class DA extends eh{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},r={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...r})}}class T5 extends dt{constructor(t){super(t);ie(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});ie(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(r=>r!==t),this.dispatch({selectedContacts:n})})}getTagUI(t){var n,r,s,o,a,u;return C.jsxs("div",{className:"contact-tag-container active",children:[(n=t.tags)==null?void 0:n.split(",").filter(h=>h!=="").map((h,d)=>C.jsx("button",{className:"contact-tag-btn",children:h},d)),((r=t.finishedSequenceTags)==null?void 0:r.length)>0&&C.jsx(C.Fragment,{children:(s=t.finishedSequenceTags)==null?void 0:s.split(",").map((h,d)=>C.jsx(C.Fragment,{children:h.length>0&&C.jsx("button",{className:"contact-tag-btn finished-sequence-tags",children:h},d)}))}),t.sequenceId&&C.jsxs(C.Fragment,{children:[t.finishedSequenceTags.includes((o=this.componentList.getComponent("sequence",t.sequenceId))==null?void 0:o.getJson().name)&&t.finished?C.jsx(C.Fragment,{}):C.jsx(C.Fragment,{children:((a=this.componentList.getComponent("sequence",t.sequenceId))==null?void 0:a.getJson().name.length)>0&&C.jsx("button",{className:`contact-tag-btn ${t.finished?"finished-sequence-tags":"unfinished-sequence-tags"}`,children:(u=this.componentList.getComponent("sequence",t.sequenceId))==null?void 0:u.getJson().name})}),t.replied&&C.jsx("button",{className:"contact-tag-btn unfinished-sequence-tags",children:"Replied"})]})]})}render(){const{obj:t}=this.props;let n=t.getJson(),s=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[C.jsxs("div",{className:"contact-item hover-darken",style:{background:s?"#2374ab10":"white",position:"relative",paddingLeft:"5px"},children:[C.jsx(IA,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),C.jsxs("div",{className:"contact-info-expanded",style:{cursor:"pointer",display:"flex",width:"100%"},onClick:()=>{window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},children:[C.jsx("div",{className:"contact-avatar",children:C.jsx("i",{className:"fa-solid fa-user"})}),C.jsxs("div",{className:"contact-info",children:[C.jsx("div",{className:"contact-name",children:`${n.firstName} ${n.lastName}`}),C.jsx("div",{className:"contact-desc",children:(n==null?void 0:n.company)||(n==null?void 0:n.title)||(n==null?void 0:n.email)||(n==null?void 0:n.mobile)||""})]})]}),C.jsx(DA,{formClass:"hover-basic",wrapperClass:"icon-row",newProp:"asdf",content:C.jsx("div",{style:{width:"fit-content"},onClick:async()=>{await this.operationsFactory.clear();let o=t,a=this.componentList.getComponent("conversation",o.getJson().email,"contact");a||(await this.componentList.addComponents({type:"conversation",contact:o.getJson().email,contactName:`${o.getJson().firstName} ${o.getJson().lastName}`,conversationOwner:this.propsState.currentUser.getJson()._id,ownerName:`${this.propsState.currentUser.getJson().firstName} ${this.propsState.currentUser.getJson().lastName}`}),a=this.componentList.getComponent("conversation",o.getJson().email,"contact"));let u={type:"email"};u={prepare:{...u},clean:!0},u=await this.operationsFactory.prepare(u),Array.isArray(u)&&u.length===1&&(u=u[0]);let h={popupSwitch:"addEmail",currentPopupComponent:u};await this.dispatch({...h,currentConversation:a,currentContact:o})},className:"contact-icon",children:C.jsx("i",{className:"fa-solid fa-message"})})})]}),this.getTagUI(n)]})}}var r_={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var iQ=r_.exports,FL;function sQ(){return FL||(FL=1,function(i,e){((t,n)=>{i.exports=n()})(iQ,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},r,s=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},u=0,h={};function d(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(D){var P=R(D);P.chunkSize=parseInt(P.chunkSize),D.step||D.chunk||(P.chunkSize=null),this._handle=new _(P),(this._handle.streamer=this)._config=P}).call(this,T),this.parseChunk=function(D,P){var N=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<N){let M=this._config.newline;M||(L=this._config.quoteChar||'"',M=this._handle.guessLineEndings(D,L)),D=[...D.split(M).slice(N)].join(M)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(D))!==void 0&&(D=L),this.isFirstChunk=!1,this._halted=!1;var N=this._partialLine+D,L=(this._partialLine="",this._handle.parse(N,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(D=L.meta.cursor,N=(this._finished||(this._partialLine=N.substring(D-this._baseIndex),this._baseIndex=D),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)n.postMessage({results:L,workerId:h.WORKER_ID,finished:N});else if(k(this._config.chunk)&&!P){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!N||!k(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),N||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(D){k(this._config.error)?this._config.error(D):o&&this._config.error&&n.postMessage({workerId:h.WORKER_ID,error:D,finished:!1})}}function m(T){var D;(T=T||{}).chunkSize||(T.chunkSize=h.RemoteChunkSize),d.call(this,T),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(D=new XMLHttpRequest,this._config.withCredentials&&(D.withCredentials=this._config.withCredentials),s||(D.onload=F(this._chunkLoaded,this),D.onerror=F(this._chunkError,this)),D.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var P,N=this._config.downloadRequestHeaders;for(P in N)D.setRequestHeader(P,N[P])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,D.setRequestHeader("Range","bytes="+this._start+"-"+L));try{D.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}s&&D.status===0&&this._chunkError()}},this._chunkLoaded=function(){D.readyState===4&&(D.status<200||400<=D.status?this._chunkError():(this._start+=this._config.chunkSize||D.responseText.length,this._finished=!this._config.chunkSize||this._start>=(P=>(P=P.getResponseHeader("Content-Range"))!==null?parseInt(P.substring(P.lastIndexOf("/")+1)):-1)(D),this.parseChunk(D.responseText)))},this._chunkError=function(P){P=D.statusText||P,this._sendError(new Error(P))}}function p(T){(T=T||{}).chunkSize||(T.chunkSize=h.LocalChunkSize),d.call(this,T);var D,P,N=typeof FileReader<"u";this.stream=function(L){this._input=L,P=L.slice||L.webkitSlice||L.mozSlice,N?((D=new FileReader).onload=F(this._chunkLoaded,this),D.onerror=F(this._chunkError,this)):D=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),L=P.call(L,this._start,M)),D.readAsText(L,this._config.encoding));N||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(D.error)}}function g(T){var D;d.call(this,T=T||{}),this.stream=function(P){return D=P,this._nextChunk()},this._nextChunk=function(){var P,N;if(!this._finished)return P=this._config.chunkSize,D=P?(N=D.substring(0,P),D.substring(P)):(N=D,""),this._finished=!D,this.parseChunk(N)}}function w(T){d.call(this,T=T||{});var D=[],P=!0,N=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){N&&D.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),D.length?this.parseChunk(D.shift()):P=!0},this._streamData=F(function(L){try{D.push(typeof L=="string"?L:L.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(D.shift()))}catch(M){this._streamError(M)}},this),this._streamError=F(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=F(function(){this._streamCleanUp(),N=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function _(T){var D,P,N,L,M=Math.pow(2,53),$=-M,Q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ee=this,ue=0,Y=0,J=!1,q=!1,H=[],G={data:[],errors:[],meta:{}};function le(te){return T.skipEmptyLines==="greedy"?te.join("").trim()==="":te.length===1&&te[0].length===0}function se(){if(G&&N&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),N=!1),T.skipEmptyLines&&(G.data=G.data.filter(function(ye){return!le(ye)})),X()){let ye=function(xe,Oe){k(T.transformHeader)&&(xe=T.transformHeader(xe,Oe)),H.push(xe)};if(G)if(Array.isArray(G.data[0])){for(var te=0;X()&&te<G.data.length;te++)G.data[te].forEach(ye);G.data.splice(0,1)}else G.data.forEach(ye)}function ae(ye,xe){for(var Oe=T.header?{}:[],Fe=0;Fe<ye.length;Fe++){var Be=Fe,$e=ye[Fe],$e=((mt,fe)=>(ve=>(T.dynamicTypingFunction&&T.dynamicTyping[ve]===void 0&&(T.dynamicTyping[ve]=T.dynamicTypingFunction(ve)),(T.dynamicTyping[ve]||T.dynamicTyping)===!0))(mt)?fe==="true"||fe==="TRUE"||fe!=="false"&&fe!=="FALSE"&&((ve=>{if(Q.test(ve)&&(ve=parseFloat(ve),$<ve&&ve<M))return 1})(fe)?parseFloat(fe):re.test(fe)?new Date(fe):fe===""?null:fe):fe)(Be=T.header?Fe>=H.length?"__parsed_extra":H[Fe]:Be,$e=T.transform?T.transform($e,Be):$e);Be==="__parsed_extra"?(Oe[Be]=Oe[Be]||[],Oe[Be].push($e)):Oe[Be]=$e}return T.header&&(Fe>H.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+Fe,Y+xe):Fe<H.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+Fe,Y+xe)),Oe}var de;G&&(T.header||T.dynamicTyping||T.transform)&&(de=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(ae),de=G.data.length):G.data=ae(G.data,0),T.header&&G.meta&&(G.meta.fields=H),Y+=de)}function X(){return T.header&&H.length===0}function ne(te,ae,de,ye){te={type:te,code:ae,message:de},ye!==void 0&&(te.row=ye),G.errors.push(te)}k(T.step)&&(L=T.step,T.step=function(te){G=te,X()?se():(se(),G.data.length!==0&&(ue+=te.data.length,T.preview&&ue>T.preview?P.abort():(G.data=G.data[0],L(G,ee))))}),this.parse=function(te,ae,de){var ye=T.quoteChar||'"',ye=(T.newline||(T.newline=this.guessLineEndings(te,ye)),N=!1,T.delimiter?k(T.delimiter)&&(T.delimiter=T.delimiter(te),G.meta.delimiter=T.delimiter):((ye=((xe,Oe,Fe,Be,$e)=>{var mt,fe,ve,Ie;$e=$e||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Re=0;Re<$e.length;Re++){for(var Ae,rt=$e[Re],qe=0,Qe=0,st=0,ft=(ve=void 0,new v({comments:Be,delimiter:rt,newline:Oe,preview:10}).parse(xe)),gt=0;gt<ft.data.length;gt++)Fe&&le(ft.data[gt])?st++:(Ae=ft.data[gt].length,Qe+=Ae,ve===void 0?ve=Ae:0<Ae&&(qe+=Math.abs(Ae-ve),ve=Ae));0<ft.data.length&&(Qe/=ft.data.length-st),(fe===void 0||qe<=fe)&&(Ie===void 0||Ie<Qe)&&1.99<Qe&&(fe=qe,mt=rt,Ie=Qe)}return{successful:!!(T.delimiter=mt),bestDelimiter:mt}})(te,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=ye.bestDelimiter:(N=!0,T.delimiter=h.DefaultDelimiter),G.meta.delimiter=T.delimiter),R(T));return T.preview&&T.header&&ye.preview++,D=te,P=new v(ye),G=P.parse(D,ae,de),se(),J?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,P.abort(),D=k(T.chunk)?"":D.substring(P.getCharIndex())},this.resume=function(){ee.streamer._halted?(J=!1,ee.streamer.parseChunk(D,!0)):setTimeout(ee.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,P.abort(),G.meta.aborted=!0,k(T.complete)&&T.complete(G),D=""},this.guessLineEndings=function(xe,ye){xe=xe.substring(0,1048576);var ye=new RegExp(A(ye)+"([^]*?)"+A(ye),"gm"),de=(xe=xe.replace(ye,"")).split("\r"),ye=xe.split(`
`),xe=1<ye.length&&ye[0].length<de[0].length;if(de.length===1||xe)return`
`;for(var Oe=0,Fe=0;Fe<de.length;Fe++)de[Fe][0]===`
`&&Oe++;return Oe>=de.length/2?`\r
`:"\r"}}function A(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(T){var D=(T=T||{}).delimiter,P=T.newline,N=T.comments,L=T.step,M=T.preview,$=T.fastMode,Q=null,re=!1,ee=T.quoteChar==null?'"':T.quoteChar,ue=ee;if(T.escapeChar!==void 0&&(ue=T.escapeChar),(typeof D!="string"||-1<h.BAD_DELIMITERS.indexOf(D))&&(D=","),N===D)throw new Error("Comment character same as delimiter");N===!0?N="#":(typeof N!="string"||-1<h.BAD_DELIMITERS.indexOf(N))&&(N=!1),P!==`
`&&P!=="\r"&&P!==`\r
`&&(P=`
`);var Y=0,J=!1;this.parse=function(q,H,G){if(typeof q!="string")throw new Error("Input must be a string");var le=q.length,se=D.length,X=P.length,ne=N.length,te=k(L),ae=[],de=[],ye=[],xe=Y=0;if(!q)return qe();if($||$!==!1&&q.indexOf(ee)===-1){for(var Oe=q.split(P),Fe=0;Fe<Oe.length;Fe++){if(ye=Oe[Fe],Y+=ye.length,Fe!==Oe.length-1)Y+=P.length;else if(G)return qe();if(!N||ye.substring(0,ne)!==N){if(te){if(ae=[],Ie(ye.split(D)),Qe(),J)return qe()}else Ie(ye.split(D));if(M&&M<=Fe)return ae=ae.slice(0,M),qe(!0)}}return qe()}for(var Be=q.indexOf(D,Y),$e=q.indexOf(P,Y),mt=new RegExp(A(ue)+A(ee),"g"),fe=q.indexOf(ee,Y);;)if(q[Y]===ee)for(fe=Y,Y++;;){if((fe=q.indexOf(ee,fe+1))===-1)return G||de.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ae.length,index:Y}),Ae();if(fe===le-1)return Ae(q.substring(Y,fe).replace(mt,ee));if(ee===ue&&q[fe+1]===ue)fe++;else if(ee===ue||fe===0||q[fe-1]!==ue){Be!==-1&&Be<fe+1&&(Be=q.indexOf(D,fe+1));var ve=Re(($e=$e!==-1&&$e<fe+1?q.indexOf(P,fe+1):$e)===-1?Be:Math.min(Be,$e));if(q.substr(fe+1+ve,se)===D){ye.push(q.substring(Y,fe).replace(mt,ee)),q[Y=fe+1+ve+se]!==ee&&(fe=q.indexOf(ee,Y)),Be=q.indexOf(D,Y),$e=q.indexOf(P,Y);break}if(ve=Re($e),q.substring(fe+1+ve,fe+1+ve+X)===P){if(ye.push(q.substring(Y,fe).replace(mt,ee)),rt(fe+1+ve+X),Be=q.indexOf(D,Y),fe=q.indexOf(ee,Y),te&&(Qe(),J))return qe();if(M&&ae.length>=M)return qe(!0);break}de.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ae.length,index:Y}),fe++}}else if(N&&ye.length===0&&q.substring(Y,Y+ne)===N){if($e===-1)return qe();Y=$e+X,$e=q.indexOf(P,Y),Be=q.indexOf(D,Y)}else if(Be!==-1&&(Be<$e||$e===-1))ye.push(q.substring(Y,Be)),Y=Be+se,Be=q.indexOf(D,Y);else{if($e===-1)break;if(ye.push(q.substring(Y,$e)),rt($e+X),te&&(Qe(),J))return qe();if(M&&ae.length>=M)return qe(!0)}return Ae();function Ie(st){ae.push(st),xe=Y}function Re(st){var ft=0;return ft=st!==-1&&(st=q.substring(fe+1,st))&&st.trim()===""?st.length:ft}function Ae(st){return G||(st===void 0&&(st=q.substring(Y)),ye.push(st),Y=le,Ie(ye),te&&Qe()),qe()}function rt(st){Y=st,Ie(ye),ye=[],$e=q.indexOf(P,Y)}function qe(st){if(T.header&&!H&&ae.length&&!re){var ft=ae[0],gt=Object.create(null),xi=new Set(ft);let Mt=!1;for(let an=0;an<ft.length;an++){let Hn=ft[an];if(gt[Hn=k(T.transformHeader)?T.transformHeader(Hn,an):Hn]){let Ys,iu=gt[Hn];for(;Ys=Hn+"_"+iu,iu++,xi.has(Ys););xi.add(Ys),ft[an]=Ys,gt[Hn]++,Mt=!0,(Q=Q===null?{}:Q)[Ys]=Hn}else gt[Hn]=1,ft[an]=Hn;xi.add(Hn)}Mt&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:ae,errors:de,meta:{delimiter:D,linebreak:P,aborted:J,truncated:!!st,cursor:xe+(H||0),renamedHeaders:Q}}}function Qe(){L(qe()),ae=[],de=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return Y}}function E(T){var D=T.data,P=a[D.workerId],N=!1;if(D.error)P.userError(D.error,D.file);else if(D.results&&D.results.data){var L={abort:function(){N=!0,I(D.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(k(P.userStep)){for(var M=0;M<D.results.data.length&&(P.userStep({data:D.results.data[M],errors:D.results.errors,meta:D.results.meta},L),!N);M++);delete D.results}else k(P.userChunk)&&(P.userChunk(D.results,L,D.file),delete D.results)}D.finished&&!N&&I(D.workerId,D.results)}function I(T,D){var P=a[T];k(P.userComplete)&&P.userComplete(D),P.terminate(),delete a[T]}function S(){throw new Error("Not implemented.")}function R(T){if(typeof T!="object"||T===null)return T;var D,P=Array.isArray(T)?[]:{};for(D in T)P[D]=R(T[D]);return P}function F(T,D){return function(){T.apply(D,arguments)}}function k(T){return typeof T=="function"}return h.parse=function(T,D){var P=(D=D||{}).dynamicTyping||!1;if(k(P)&&(D.dynamicTypingFunction=P,P={}),D.dynamicTyping=P,D.transform=!!k(D.transform)&&D.transform,!D.worker||!h.WORKERS_SUPPORTED)return P=null,h.NODE_STREAM_INPUT,typeof T=="string"?(T=(N=>N.charCodeAt(0)!==65279?N:N.slice(1))(T),P=new(D.download?m:g)(D)):T.readable===!0&&k(T.read)&&k(T.on)?P=new w(D):(n.File&&T instanceof File||T instanceof Object)&&(P=new p(D)),P.stream(T);(P=(()=>{var N;return!!h.WORKERS_SUPPORTED&&(N=(()=>{var L=n.URL||n.webkitURL||null,M=t.toString();return h.BLOB_URL||(h.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(N=new n.Worker(N)).onmessage=E,N.id=u++,a[N.id]=N)})()).userStep=D.step,P.userChunk=D.chunk,P.userComplete=D.complete,P.userError=D.error,D.step=k(D.step),D.chunk=k(D.chunk),D.complete=k(D.complete),D.error=k(D.error),delete D.worker,P.postMessage({input:T,config:D,workerId:P.id})},h.unparse=function(T,D){var P=!1,N=!0,L=",",M=`\r
`,$='"',Q=$+$,re=!1,ee=null,ue=!1,Y=((()=>{if(typeof D=="object"){if(typeof D.delimiter!="string"||h.BAD_DELIMITERS.filter(function(H){return D.delimiter.indexOf(H)!==-1}).length||(L=D.delimiter),typeof D.quotes!="boolean"&&typeof D.quotes!="function"&&!Array.isArray(D.quotes)||(P=D.quotes),typeof D.skipEmptyLines!="boolean"&&typeof D.skipEmptyLines!="string"||(re=D.skipEmptyLines),typeof D.newline=="string"&&(M=D.newline),typeof D.quoteChar=="string"&&($=D.quoteChar),typeof D.header=="boolean"&&(N=D.header),Array.isArray(D.columns)){if(D.columns.length===0)throw new Error("Option columns is empty");ee=D.columns}D.escapeChar!==void 0&&(Q=D.escapeChar+$),D.escapeFormulae instanceof RegExp?ue=D.escapeFormulae:typeof D.escapeFormulae=="boolean"&&D.escapeFormulae&&(ue=/^[=+\-@\t\r].*$/)}})(),new RegExp(A($),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return J(null,T,re);if(typeof T[0]=="object")return J(ee||Object.keys(T[0]),T,re)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||ee),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),J(T.fields||[],T.data||[],re);throw new Error("Unable to serialize unrecognized input");function J(H,G,le){var se="",X=(typeof H=="string"&&(H=JSON.parse(H)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(H)&&0<H.length),ne=!Array.isArray(G[0]);if(X&&N){for(var te=0;te<H.length;te++)0<te&&(se+=L),se+=q(H[te],te);0<G.length&&(se+=M)}for(var ae=0;ae<G.length;ae++){var de=(X?H:G[ae]).length,ye=!1,xe=X?Object.keys(G[ae]).length===0:G[ae].length===0;if(le&&!X&&(ye=le==="greedy"?G[ae].join("").trim()==="":G[ae].length===1&&G[ae][0].length===0),le==="greedy"&&X){for(var Oe=[],Fe=0;Fe<de;Fe++){var Be=ne?H[Fe]:Fe;Oe.push(G[ae][Be])}ye=Oe.join("").trim()===""}if(!ye){for(var $e=0;$e<de;$e++){0<$e&&!xe&&(se+=L);var mt=X&&ne?H[$e]:$e;se+=q(G[ae][mt],$e)}ae<G.length-1&&(!le||0<de&&!xe)&&(se+=M)}}return se}function q(H,G){var le,se;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(se=!1,ue&&typeof H=="string"&&ue.test(H)&&(H="'"+H,se=!0),le=H.toString().replace(Y,Q),(se=se||P===!0||typeof P=="function"&&P(H,G)||Array.isArray(P)&&P[G]||((X,ne)=>{for(var te=0;te<ne.length;te++)if(-1<X.indexOf(ne[te]))return!0;return!1})(le,h.BAD_DELIMITERS)||-1<le.indexOf(L)||le.charAt(0)===" "||le.charAt(le.length-1)===" ")?$+le+$:le)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!s&&!!n.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=v,h.ParserHandle=_,h.NetworkStreamer=m,h.FileStreamer=p,h.StringStreamer=g,h.ReadableStreamStreamer=w,n.jQuery&&((r=n.jQuery).fn.parse=function(T){var D=T.config||{},P=[];return this.each(function(M){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)P.push({file:this.files[$],inputElem:this,instanceConfig:r.extend({},D)})}),N(),this;function N(){if(P.length===0)k(T.complete)&&T.complete();else{var M,$,Q,re,ee=P[0];if(k(T.before)){var ue=T.before(ee.file,ee.inputElem);if(typeof ue=="object"){if(ue.action==="abort")return M="AbortError",$=ee.file,Q=ee.inputElem,re=ue.reason,void(k(T.error)&&T.error({name:M},$,Q,re));if(ue.action==="skip")return void L();typeof ue.config=="object"&&(ee.instanceConfig=r.extend(ee.instanceConfig,ue.config))}else if(ue==="skip")return void L()}var Y=ee.instanceConfig.complete;ee.instanceConfig.complete=function(J){k(Y)&&Y(J,ee.file,ee.inputElem),L()},h.parse(ee.file,ee.instanceConfig)}}function L(){P.splice(0,1),N()}}),o&&(n.onmessage=function(T){T=T.data,h.WORKER_ID===void 0&&T&&(h.WORKER_ID=T.workerId),typeof T.input=="string"?n.postMessage({workerId:h.WORKER_ID,results:h.parse(T.input,T.config),finished:!0}):(n.File&&T.input instanceof File||T.input instanceof Object)&&(T=h.parse(T.input,T.config))&&n.postMessage({workerId:h.WORKER_ID,results:T,finished:!0})}),(m.prototype=Object.create(d.prototype)).constructor=m,(p.prototype=Object.create(d.prototype)).constructor=p,(g.prototype=Object.create(g.prototype)).constructor=g,(w.prototype=Object.create(d.prototype)).constructor=w,h})}(r_)),r_.exports}var oQ=sQ();const I5=L0(oQ);class iS extends be.Component{constructor(e){super(e),this.state={data:[]},this.handleFileUpload=this.handleFileUpload.bind(this)}handleFileUpload(e){const t=e.target.files[0];t&&I5.parse(t,{header:!0,skipEmptyLines:!0,complete:n=>{console.log("Parsed CSV data:",n.data),this.props.callBack({data:n.data})},error:n=>{console.error("Error while parsing:",n)}})}render(){const{data:e}=this.state;return C.jsxs("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:[C.jsx("label",{htmlFor:"file-upload",className:"",children:"Upload"}),C.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:this.handleFileUpload})]})}}class aQ extends dt{constructor(t){super(t);ie(this,"handleClickOutside",t=>{this.dropdownRef.current&&!this.dropdownRef.current.contains(t.target)&&!this.buttonRef.current.contains(t.target)&&this.state.showFilter&&this.setState({showFilter:!1})});ie(this,"toggleFilter",()=>{this.setState({showFilter:!this.state.showFilter})});ie(this,"onAllChange",t=>{const n=t.target.checked;this.setState({filterAll:n,filterTags:n,filterCompany:n,filterName:n})});ie(this,"onFilterChange",t=>n=>{this.setState({[t]:n.target.checked,filterAll:!1})});this.state={...this.state,defaultClass:"fit",title:"Contacts",showFilter:!1,filterAll:!0,filterTags:!0,filterCompany:!0,filterName:!0},this.dropdownRef=Je.createRef(),this.buttonRef=Je.createRef()}async componentDidMount(){this.dispatch({selectedContacts:[]}),this.APIService.subscribeToReadObserver(async()=>{await this.componentList.sortSelectedListbyFirebaseDate("contact",!0),this.setState({start:!0})}),this.APIService.subscribeToDispatchObserver(async t=>{debugger;const n=this.componentList.getList("contact");for(let r of t)if(r.added){for(let s of r.added)if(s.type==="contact"){const o=n.findIndex(u=>u.getJson()._id===s._id);let a=n[o];o>-1&&n.splice(o,1),n.unshift(a)}}await this.componentList.setSelectedList("contact",n),await this.componentList.sortSelectedListbyFirebaseDate("contact",!0),this.dispatch({})}),document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}filterFunc(){const{tags:t}=this.propsState,n=this.componentList.getList("contact");if(!t){this.dispatch({selectedContacts:[...n]});return}if(!this.state.filterName&&!this.state.filterCompany&&!this.state.filterTags){this.dispatch({selectedContacts:[]});return}const s=t.toLowerCase().split(",").map(a=>a.trim()).filter(a=>a),o=n.filter(a=>{const u=a.getJson();return s.some(h=>{if(this.state.filterName){const d=(u.firstName||"").toLowerCase(),m=(u.lastName||"").toLowerCase();if(`${d} ${m}`.includes(h))return!0}return!!(this.state.filterCompany&&u.company&&u.company.toLowerCase().includes(h)||this.state.filterTags&&(typeof u.tags=="string"&&u.tags.toLowerCase().split(",").map(m=>m.trim()).some(m=>m.includes(h))||typeof u.finishedSequenceTags=="string"&&u.finishedSequenceTags.toLowerCase().split(",").map(m=>m.trim()).some(m=>m.includes(h))||h==="replied"&&u.replied))})});this.dispatch({selectedContacts:o})}getInnerContent(){var a,u;let t=this.propsState.selectedContacts,n=this.propsState.componentList.getList("contact"),r=(t==null?void 0:t.length)>0,s=n!=null&&n.length?"/"+(n==null?void 0:n.length):"",o=(t==null?void 0:t.length)===(n==null?void 0:n.length);return C.jsx(C.Fragment,{children:this.state.start&&C.jsxs("div",{className:"map-container",children:[C.jsxs("div",{className:"top-nav-float",children:[C.jsxs("nav",{className:"top-nav",children:[C.jsxs("div",{className:"nav-left",children:[C.jsx("div",{className:"nav-icon",children:C.jsx("i",{className:"fas fa-circle"})}),C.jsx("div",{className:"nav-title",children:"Contacts"})]}),C.jsx("div",{className:"nav-right",children:C.jsxs("div",{className:"nav-icon",children:[C.jsx("button",{ref:this.buttonRef,onClick:()=>{this.setState({showFilter:!this.state.showFilter})},className:"btn",children:C.jsx("i",{className:"fa-solid fa-filter"})}),C.jsx("div",{children:this.state.showFilter&&C.jsxs("div",{className:"filter-dropdown",ref:this.dropdownRef,children:[C.jsx("div",{style:{fontWeight:"bold",marginBottom:8},children:"Search:"}),C.jsxs("label",{className:"filter-row",children:[C.jsx("input",{style:{marginRight:"8px"},type:"checkbox",checked:this.state.filterAll,onChange:this.onAllChange})," All:"]}),C.jsxs("label",{className:"filter-row",children:[C.jsx("input",{className:"filter-check",type:"checkbox",checked:this.state.filterTags,onChange:this.onFilterChange("filterTags")})," Tags"]}),C.jsxs("label",{className:"filter-row",children:[C.jsx("input",{className:"filter-check",type:"checkbox",checked:this.state.filterCompany,onChange:this.onFilterChange("filterCompany")})," Company"]}),C.jsxs("label",{className:"filter-row",children:[C.jsx("input",{className:"filter-check",type:"checkbox",checked:this.state.filterName,onChange:this.onFilterChange("filterName")})," Name"]})]})})]})})]}),C.jsx("div",{className:"search-container",children:C.jsxs("div",{className:"search-bar",children:[C.jsx("i",{className:"fas fa-search search-icon"}),C.jsx("input",{onChange:h=>{this.dispatch({tags:h.target.value})},className:"search-input",placeholder:"Search"})]})}),C.jsxs("div",{className:"filter-nav",children:[C.jsxs("div",{className:"filter-nav-left",children:[C.jsx(C.Fragment,{children:C.jsx("div",{id:"selectBtn",style:{height:"fit-content",marginLeft:"5px",alignContent:"center"},children:C.jsx(IA,{label:o?"Deselect All":"Select All",check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}})})}),C.jsx("span",{className:"count-desc",children:(a=this.propsState.selectedContacts)!=null&&a.length?this.propsState.selectedContacts.length+`${s} Selected`:""})]}),!r&&C.jsxs("div",{className:"filter-nav-right",children:[C.jsx(iS,{callBack:async h=>{h=h.data.map((d,m)=>(d.owner=this.propsState.currentUser.getJson()._id,d.type="contact",d.companyOwnerId=this.propsState.currentUser.getJson().companyId,d)),this.dispatch({uploadData:h,popupSwitch:"uploadData"}),await this.operationsFactory.prepare({prepare:h}),this.operationsFactory.run()}}),C.jsx(DA,{wrapperclassName:"none",content:C.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Add Contact"}),popupSwitch:"addContact"})]})]})]}),C.jsxs("div",{style:{paddingBottom:"60px"},children:[" ",C.jsx(er,{filterFunc:h=>{if(!this.propsState.tags)return!0;if(!this.state.filterName&&!this.state.filterCompany&&!this.state.filterTags)return!1;const m=this.propsState.tags.toLowerCase().split(",").map(g=>g.trim()).filter(g=>g),p=h.getJson();for(const g of m){if(this.state.filterName){const w=(p.firstName||"").toLowerCase(),_=(p.lastName||"").toLowerCase();if(`${w} ${_}`.includes(g))return!0}if(this.state.filterCompany&&p.company&&p.company.toLowerCase().includes(g))return!0;if(this.state.filterTags){if(p.tags&&typeof p.tags=="string"){const w=p.tags.split(",").map(_=>_.trim().toLowerCase());for(let _ of w)if(_.includes(g))return!0}if(p.finishedSequenceTags&&typeof p.finishedSequenceTags=="string"){const w=p.finishedSequenceTags.split(",").map(_=>_.trim().toLowerCase());for(let _ of w)if(_.includes(g))return!0}if(g==="replied"&&p.replied)return!0}}return!1},name:"contact",type:"viewPortMap",mapContainerClass:"contact-list",mapSectionClass:"contact",wrapperClass:"none",cells:[{type:"custom",custom:T5,wrapperClass:"none"}],hasLink:!0})," "]}),((u=this.propsState.selectedContacts)==null?void 0:u.length)>0&&C.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[C.jsx("button",{onClick:()=>{this.dispatch({popupSwitch:"addTags"})},className:"floating-select-btn",children:C.jsx("span",{className:"floating-select-btn-text",children:"Tags"})}),C.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:C.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),C.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:C.jsx(vA,{content:C.jsx("span",{className:"floating-select-btn-text",style:{color:"white"},children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class ML extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id,visible:!0}}async componentDidMount(){await this.getComponentsFromBackend()}componentWillUnmount(){this.dispatch({selectedContacts:[]})}render(){return C.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex"},children:[C.jsx("div",{style:{width:window.innerWidth>600?"50%":"100%"},children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(aQ,{})})}),C.jsx("div",{style:{width:window.innerWidth>600?"50%":"0%",position:"relative"},children:this.propsState.currentContact&&window.innerWidth>600&&this.state.visible&&C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(o1,{})})})]})}}var ly={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var lQ=ly.exports,BL;function uQ(){return BL||(BL=1,function(i,e){(function(t){var n=e,r=i&&i.exports==n&&i,s=typeof cp=="object"&&cp;(s.global===s||s.window===s)&&(t=s);var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[\x01-\x7F]/g,u=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,h=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,d={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},m=/["&'<>`]/g,p={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},g=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,w=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,A={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},v={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},E={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},I=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],S=String.fromCharCode,R={},F=R.hasOwnProperty,k=function(Y,J){return F.call(Y,J)},T=function(Y,J){for(var q=-1,H=Y.length;++q<H;)if(Y[q]==J)return!0;return!1},D=function(Y,J){if(!Y)return J;var q={},H;for(H in J)q[H]=k(Y,H)?Y[H]:J[H];return q},P=function(Y,J){var q="";return Y>=55296&&Y<=57343||Y>1114111?(J&&M("character reference outside the permissible Unicode range"),""):k(E,Y)?(J&&M("disallowed character reference"),E[Y]):(J&&T(I,Y)&&M("disallowed character reference"),Y>65535&&(Y-=65536,q+=S(Y>>>10&1023|55296),Y=56320|Y&1023),q+=S(Y),q)},N=function(Y){return"&#x"+Y.toString(16).toUpperCase()+";"},L=function(Y){return"&#"+Y+";"},M=function(Y){throw Error("Parse error: "+Y)},$=function(Y,J){J=D(J,$.options);var q=J.strict;q&&w.test(Y)&&M("forbidden code point");var H=J.encodeEverything,G=J.useNamedReferences,le=J.allowUnsafeSymbols,se=J.decimal?L:N,X=function(ne){return se(ne.charCodeAt(0))};return H?(Y=Y.replace(a,function(ne){return G&&k(d,ne)?"&"+d[ne]+";":X(ne)}),G&&(Y=Y.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),G&&(Y=Y.replace(h,function(ne){return"&"+d[ne]+";"}))):G?(le||(Y=Y.replace(m,function(ne){return"&"+d[ne]+";"})),Y=Y.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),Y=Y.replace(h,function(ne){return"&"+d[ne]+";"})):le||(Y=Y.replace(m,X)),Y.replace(o,function(ne){var te=ne.charCodeAt(0),ae=ne.charCodeAt(1),de=(te-55296)*1024+ae-56320+65536;return se(de)}).replace(u,X)};$.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var Q=function(Y,J){J=D(J,Q.options);var q=J.strict;return q&&g.test(Y)&&M("malformed character reference"),Y.replace(_,function(H,G,le,se,X,ne,te,ae,de){var ye,xe,Oe,Fe,Be,$e;return G?(Be=G,A[Be]):le?(Be=le,$e=se,$e&&J.isAttributeValue?(q&&$e=="="&&M("`&` did not start a character reference"),H):(q&&M("named character reference was not terminated by a semicolon"),v[Be]+($e||""))):X?(Oe=X,xe=ne,q&&!xe&&M("character reference was not terminated by a semicolon"),ye=parseInt(Oe,10),P(ye,q)):te?(Fe=te,xe=ae,q&&!xe&&M("character reference was not terminated by a semicolon"),ye=parseInt(Fe,16),P(ye,q)):(q&&M("named character reference was not terminated by a semicolon"),H)})};Q.options={isAttributeValue:!1,strict:!1};var re=function(Y){return Y.replace(m,function(J){return p[J]})},ee={version:"1.2.0",encode:$,decode:Q,escape:re,unescape:Q};if(n&&!n.nodeType)if(r)r.exports=ee;else for(var ue in ee)k(ee,ue)&&(n[ue]=ee[ue]);else t.he=ee})(lQ)}(ly,ly.exports)),ly.exports}var cQ=uQ();const hQ=L0(cQ);function Ro(i){if(typeof i=="string"){const e=i.replace(/<[^>]+>/g,"");return hQ.decode(e).replace(/\s+/g," ").trim()}}class dQ extends dt{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().body,t=Ro(e);this.setState({plainText:t})}componentDidUpdate(e){const t=this.props.obj.getJson().body,n=e.obj.getJson().body;if(t!==n){const r=Ro(t);this.setState({plainText:r})}}render(){let e=this.props.obj.getJson().ownerMessage?"outgoing":"incoming";return C.jsx("div",{children:this.props.obj.getJson().suggestion?C.jsxs("div",{className:"message-item outgoing",children:[C.jsxs("div",{className:"close-or-accept",children:[C.jsx("div",{className:"accept-suggested-message hover-darken",onClick:async()=>{let t=this.props.obj;t.setCompState({suggestion:!1,ownerMessage:!0},{run:!0});let n={originalMessageId:t.getJson().originalMessageId||"",from:this.propsState.currentUser.getJson()._id,to:this.propsState.currentConversation.getJson().contact,subject:t.getJson().subject,text:t.getJson().body},r=this.propsState.currentUser.getJson().gmailAuthenticated?"https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app":"https://sendgridemailhandler-7c5i3vsqma-uc.a.run.app";await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(s=>{if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);return s.json()}).then(s=>{console.log("Reply sent successfully in thread.",s)}).catch(s=>{console.error("Error sending reply:",s)})},children:C.jsx("i",{className:"fas fa-check"})}),C.jsx(wA,{obj:this.props.obj,formClass:"none",content:C.jsx("div",{className:"decline-suggested-message hover-darken",children:C.jsx("i",{className:"fas fa-times"})})})]}),C.jsx("div",{className:"message message-item-suggested",children:this.state.plainText})]}):C.jsxs(C.Fragment,{children:[this.props.obj.getJson().timeStamp&&C.jsx("div",{className:"date-divider",children:C.jsx("span",{className:"timestamp",children:this.props.obj.getJson().timeStamp})}),C.jsx("div",{className:"message-item "+e,children:C.jsx("div",{className:"message "+e,children:this.state.plainText})})]})})}}const fQ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23696969'%3e%3cpath%20d='M400-80%200-480l400-400%2071%2071-329%20329%20329%20329-71%2071Z'/%3e%3c/svg%3e";class pQ extends dt{constructor(t){super(t);ie(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});ie(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(r=>r!==t),this.dispatch({selectedContacts:n})})}render(){var o;const{obj:t}=this.props;let n=t.getJson(),s=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[C.jsxs("div",{className:"contact-item hover-darken",style:{background:s?"#2374ab10":"white",position:"relative",paddingLeft:"5px"},children:[C.jsx(IA,{checkKey:"selectedContacts",obj:t,check:this.handleCheckContact,uncheck:this.handleUncheckContact}),C.jsx("div",{className:"contact-avatar",children:C.jsx("i",{className:"fa-solid fa-user"})}),C.jsxs("div",{className:"contact-info",children:[C.jsx("div",{onClick:()=>{window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentContact:t,currentPopupComponent:t,popupSwitch:"viewPotentialProspect"})},className:"contact-name",children:`${n.firstName} ${n.lastName}`}),C.jsx("div",{className:"contact-desc",children:n.company})]}),C.jsx("div",{style:{cursor:"pointer",width:"fit-content"},children:C.jsx("div",{className:"contact-icon",children:C.jsx("i",{className:"fa-solid fa-message"})})})]}),C.jsx("div",{className:"contact-tag-container active",children:(o=n.tags)==null?void 0:o.split(",").map((a,u)=>C.jsx("button",{className:"contact-tag-btn",children:a},u))})]})}}class mQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}componentDidMount(){this.dispatch({selectedContacts:[]})}filterFunc(){var s;let e=xa.getIdFromURL(),t=((s=this.propsState.tags)==null?void 0:s.split(","))||"",n=this.componentList.getList("potentialProspect",e,"researchId"),r=[];if(t)for(let o of t){let a=n.filter(u=>u.getJson().tags.includes(o));r=[...r,...a]}else r=[...n];this.dispatch({selectedContacts:r})}getInnerContent(){var a,u;let e=xa.getIdFromURL(),t=this.componentList.getComponent("research",e),n=this.propsState.selectedContacts,r=this.propsState.componentList.getList("potentialProspect",e,"researchId");(n==null?void 0:n.length)>0;let s=r!=null&&r.length?"/"+(r==null?void 0:r.length):"",o=(n==null?void 0:n.length)===(r==null?void 0:r.length);return C.jsxs("div",{className:"mobile-container",children:[C.jsxs("div",{className:"top-nav-float",children:[C.jsxs("nav",{className:"top-nav",children:[C.jsxs("div",{className:"nav-left",children:[C.jsx("div",{className:"nav-icon",children:C.jsx("i",{className:"fas fa-circle"})}),C.jsx("div",{className:"nav-title",children:"Researched Potential Prospects"})]}),C.jsx("div",{onClick:()=>{t.setCompState({active:!t.getJson().active}),t.update(),this.setState()},children:t!=null&&t.getJson().active?"Pause":"activate"})]}),C.jsx("div",{className:"search-container",children:C.jsxs("div",{className:"search-bar",children:[C.jsx("i",{className:"fas fa-search search-icon"}),C.jsx("input",{onChange:h=>{this.dispatch({tags:h.target.value})},className:"search-input",placeholder:"Search"})]})}),C.jsx("div",{className:"filter-nav",children:C.jsxs("div",{className:"filter-nav-left",children:[C.jsx(C.Fragment,{children:C.jsx("div",{id:"selectBtn",style:{height:"fit-content",marginLeft:"5px",alignContent:"center"},children:C.jsx(IA,{label:o?"Deselect All":"Select All",check:this.filterFunc,uncheck:()=>{this.dispatch({selectedContacts:[]})}})})}),C.jsx("span",{className:"count-desc",children:(a=this.propsState.selectedContacts)!=null&&a.length?this.propsState.selectedContacts.length+`${s} Selected`:""})]})})]}),C.jsx(er,{filterFunc:h=>{if(!this.propsState.tags)return!0;let d=this.propsState.tags.split(",");for(let m of d)if(m!==""&&h.getJson().tags.includes(m))return!0;return!1},filter:{search:e,attribute:"researchId"},name:"potentialProspect",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:pQ}],hasLink:!0}),((u=this.propsState.selectedContacts)==null?void 0:u.length)>0&&C.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[C.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn hover-basic",children:C.jsx("span",{className:"floating-select-btn-text",children:"Remove"})}),C.jsx("button",{onClick:()=>{for(let h of this.propsState.selectedContacts)h.copy({type:"contact",ogPPId:h.getJson()._id})},className:"floating-select-btn floating-select-primary-btn hover-basic",children:C.jsx("span",{className:"floating-select-btn-text",children:"Add Prospect"})}),C.jsx("button",{style:{width:"110px"},className:"floating-select-btn floating-select-primary-btn hover-basic",children:C.jsx(vA,{formclassName:"FCImgButton",content:C.jsx("span",{onClick:()=>{let h=this.propsState.selectedContacts;for(let d of h)d.copy({type:"contact",ogPPId:d.getJson()._id});this.dispatch({sequenceDataType:"research"})},className:"floating-select-btn-text",style:{color:"white"},children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class gQ extends T5{constructor(e){super(e),this.state={...this.state,count:0}}componentDidMount(){if(this.state.count<=0){const{app:e,obj:t}=this.props;let s=e.state.componentList.getList("potentialProspect",t==null?void 0:t.getJson()._id,"researchId").length;this.setState({count:s})}}render(){const{obj:e,app:t}=this.props;let n=e.getJson(),r=n.active;return C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[C.jsx("div",{style:{alignSelf:"flex-end"},children:C.jsx(vA,{obj:e,formClass:"none",wrapperClass:"none",content:C.jsx("span",{className:"floating-select-btn-text",style:{color:"black",marginRight:"10px"},children:"edit"}),popupSwitch:"updateResearch"})}),C.jsxs(yn,{to:`./${n==null?void 0:n._id}`,style:{padding:"20px"},className:`contact-item ${r?"contact-item-active":""}`,children:[C.jsxs("div",{className:"contact-info",children:[C.jsx("div",{onClick:()=>{this.dispatch({currentPopupComponent:e,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.name} `}),C.jsx("div",{className:"contact-desc",children:`${this.state.count} Contact${this.state.count!==1?"s":""} Found`})]}),C.jsxs("div",{className:`profile-status ${r?"profile-status-active":""}`,children:[C.jsx("i",{className:"fa-solid fa-circle"}),C.jsx("span",{children:r?"Active":"Paused"})]})]}),C.jsx("div",{className:"contact-tag-container active",children:this.getTagUI(n)})]})}}class yQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}filterFunc(){var r;let e=((r=this.propsState.tags)==null?void 0:r.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let s of e){let o=t.filter(a=>a.getJson().tags.includes(s));n=[...n,...o]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){return C.jsxs("div",{className:"map-container",children:[C.jsxs("div",{className:"top-nav-float",children:[C.jsx("nav",{className:"top-nav",children:C.jsxs("div",{className:"nav-left",children:[C.jsx("div",{className:"nav-icon",children:C.jsx("i",{className:"fas fa-circle"})}),C.jsx("div",{className:"nav-title",children:"Research"})]})}),C.jsx("div",{className:"search-container",children:C.jsxs("div",{className:"search-bar",children:[C.jsx("i",{className:"fas fa-search search-icon"}),C.jsx("input",{onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input",placeholder:"Search"})]})}),C.jsx("div",{className:"filter-nav"}),C.jsx(DA,{wrapperClass:"icon-row",newProp:"asdf",content:C.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"New Research Profile"}),popupSwitch:"addResearch"})]}),C.jsx("div",{className:"card-header",children:"Customer Profiles"}),C.jsxs("div",{children:[" ",C.jsx(er,{filterFunc:e=>{var r;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;return(r=e.getJson().name)!=null&&r.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0),t},name:"research",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:gQ}]})]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class jL extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(yQ,{})})})}}class vQ extends dt{constructor(e){super(e),this.state={...this.state,opens:"0"}}async componentDidMount(){const{obj:e}=this.props;let t=await this.componentList.getComponentsFromBackend({type:"open",ids:e.getJson()._id,filterKeys:"sequenceId"});this.setState({opens:t.length})}render(){var n,r;const{obj:e}=this.props;let t=e.getJson();return C.jsxs("div",{className:"sequence",children:[C.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[C.jsx(yn,{to:"/sequence/"+t._id,style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:C.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})}),C.jsx(yn,{to:"/sequence/"+t._id,style:{marginRight:"10px"},onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]}),C.jsxs("div",{className:"row row-space-around",style:{fontSize:"14px"},children:[C.jsxs("div",{className:"col",children:[C.jsx("div",{children:"Active"}),C.jsx("div",{children:((r=(n=this.componentList.getList("contact",t._id,"sequenceId"))==null?void 0:n.filter(s=>s.getJson().finished===!1))==null?void 0:r.length)||"0"})]}),C.jsxs("div",{className:"col",children:[C.jsx("div",{children:"Completed"}),C.jsx("div",{children:(t==null?void 0:t.finished)||"0"})]}),C.jsxs("div",{className:"col",children:[C.jsx("div",{children:"Opened"}),C.jsx("div",{children:this.state.opens||"N/A"})]}),C.jsxs("div",{className:"col",children:[C.jsx("div",{children:"Reply"}),C.jsx("div",{children:(t==null?void 0:t.replyRate)!=null?`${t.replyRate}`:"N/A"}),"                "]}),C.jsxs("div",{className:"col",children:[C.jsx("div",{children:"Bounce"}),C.jsx("div",{children:t!=null&&t.bounceRate?`${t==null?void 0:t.bounceRate}%`:"N/A"})]})]}),C.jsx("div",{style:{position:"absolute",right:"4px",cursor:"pointer"},className:"del-icon",children:C.jsx("div",{onClick:()=>{this.dispatch({popupSwitch:"delSequence",delSequence:this.props.obj})},children:C.jsx("i",{className:"fa-solid fa-xmark"})})})]})}}class wQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return C.jsxs("div",{className:"fit",children:[C.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Sequences"}),C.jsx(er,{name:"sequence",filterFunc:e=>{var r;if(e.getJson().name===void 0||e.getJson().name==="")return!1;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;return(r=e.getJson().name)!=null&&r.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0),t},cells:[{type:"custom",custom:vQ}]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class _Q extends dt{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Ro(e);this.setState({plainText:t})}componentDidUpdate(e){var r,s;const t=(r=this.props.obj)==null?void 0:r.getJson().content,n=(s=this.props.obj)==null?void 0:s.getJson().content;if(t!==n){const o=Ro(t);this.setState({plainText:o})}}render(){const{obj:e}=this.props;let t=e.getJson();return C.jsx("div",{className:"sequence",children:C.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[C.jsx(yn,{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:C.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:this.state.plainText})}),C.jsx(yn,{style:{marginRight:"0px"},to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class AQ extends dt{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Ro(e);this.setState({plainText:t})}componentDidUpdate(e){var r,s;const t=(r=this.props.obj)==null?void 0:r.getJson().content,n=(s=this.props.obj)==null?void 0:s.getJson().content;if(t!==n){const o=Ro(t);this.setState({plainText:o})}}render(){const{obj:e}=this.props;let t=e.getJson();return C.jsx("div",{className:"sequence",children:C.jsx("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:C.jsx("div",{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},onClick:()=>{let n=this.props.changeItem||"currentPopupComponent",r=this.props.changeAttribute||"content";this.propsState[n].setCompState({[r]:t.content}),this.dispatch({update:this.propsState[n]})},className:"title-left",children:C.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:this.state.plainText})})})})}}class bQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return C.jsxs(C.Fragment,{children:[C.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Templates"}),C.jsx(er,{name:"template",filterFunc:e=>{var r;if(e.getJson().content===void 0||e.getJson().content==="")return!1;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;return(r=e.getJson().content)!=null&&r.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0),t},cells:[{type:"custom",custom:_Q}]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class EQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return C.jsxs("div",{className:"map-container",style:{paddingBottom:"62px"},children:[C.jsxs("div",{className:"top-nav-float",children:[C.jsx("nav",{className:"top-nav",children:C.jsxs("div",{className:"nav-left",children:[C.jsx("div",{className:"nav-icon",children:C.jsx("i",{className:"fas fa-circle"})}),C.jsx("div",{className:"title-name",children:"Content"})]})}),C.jsx("div",{className:"search-container",children:C.jsxs("div",{className:"search-bar",children:[C.jsx("i",{className:"fas fa-search search-icon"}),C.jsx("input",{onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input",placeholder:"Search"})]})}),C.jsx("div",{className:"filter",children:C.jsxs("div",{className:"row row-space-between",children:[C.jsx(yn,{to:"/sequence",className:"btn-gray",children:"New Sequence"}),C.jsx(yn,{to:"/template",className:"btn-gray",children:"New Template"})]})})]}),C.jsx("div",{children:C.jsx(pr,{theme:"defaultCard",content:C.jsx(wQ,{})})}),C.jsx("div",{children:C.jsx(pr,{theme:"defaultCard",content:C.jsx(bQ,{})})})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class qL extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.propsState.currentUser.getJson()._id}}async componentDidMount(){this.getComponentsFromBackend()}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.state.gotComponents&&C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(EQ,{})})})}}class CQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){var t;let e=this.componentList.getComponent("aiSettings");return C.jsxs("div",{id:"aiSettings",className:"map-container",style:{width:"fit-content",minWidth:"400px",height:"fit-content",padding:"12px",borderRadius:"8px",border:"1px solid #d1d1d1"},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[C.jsx("div",{className:"contact-avatar",style:{maxWidth:"45px",maxHeight:"45px",background:"#323232"},children:C.jsx("i",{className:"fa-solid fa-gears"})}),C.jsx("h1",{children:"AI Settings"})]}),C.jsx("p",{style:{color:"#333333",margin:"12px 0px 12px 0px"},children:"Enable AI functionality within the platform"}),(t=e==null?void 0:e.getJson())!=null&&t.autoAI?C.jsx("div",{onClick:()=>{e.setCompState({autoAI:!1},{run:!0},!0)},className:"blue-button-1",style:{position:"relative",width:"fit-content"},children:"Turn off AI"}):C.jsx("div",{onClick:()=>{e.setCompState({autoAI:!0},{run:!0},!0)},className:"blue-button-1",style:{position:"relative",width:"fit-content"},children:"Turn on AI"})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class xQ extends dt{constructor(t){super(t);ie(this,"expectedState","xyz123");this.state={...this.state,defaultClass:"fit",loading:!1,error:null}}componentDidMount(){const n=new URLSearchParams(window.location.search).get("code");n&&!this.state.hasExchanged&&(this.setState({hasExchanged:!0}),setTimeout(()=>{this.exchangeCodeForTokens(n)},100))}async exchangeCodeForTokens(t){this.setState({loading:!0,error:null});let n={code:t,user:this.propsState.currentUser.getJson()};console.log(n);let r=await JSON.stringify(n);try{const s=await fetch("https://exchangecode-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:r});if(!s.ok)throw new Error(`HTTP ${s.status}`);const{access_token:o,refresh_token:a,expires_in:u}=await s.json();console.log(o),await this.propsState.currentUser.setCompState({outreachAccessToken:o,outreachRefreshToken:a,outreachTokenExpiresAt:Date.now()+u*1e3},{run:!0},!0),window.history.replaceState({},"",window.location.pathname)}catch(s){console.error(s),this.setState({error:s.message})}finally{this.setState({loading:!1})}}getInnerContent(){const{loading:t,error:n}=this.state;return C.jsxs("div",{id:"outreachSettings",style:{width:"fit-content",height:"fit-content",minWidth:"400px",padding:"12px",borderRadius:"8px",border:"1px solid #d1d1d1"},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[C.jsx("div",{className:"contact-avatar",style:{maxWidth:"25px",maxHeight:"25px",background:"#323232"},children:C.jsx("i",{class:"fa-solid fa-envelope"})}),C.jsx("h1",{children:"Outreach Settings"})]}),C.jsx("p",{style:{color:"#333333",margin:"12px 0px 12px 0px"},children:"Integrate with Outreach for sales engagement"}),t&&C.jsx("p",{children:"Linking your Outreach account"}),n&&C.jsxs("p",{style:{color:"red"},children:["Error: ",n]}),!t&&!n&&C.jsx("div",{className:"blue-button-1",onClick:()=>{window.location.href=`https://accounts.outreach.io/oauth/authorize?client_id=FVmbvVzJuXA7v1QqONeErtezeL-Rth2L6.UWzJW8IeZL&redirect_uri=${encodeURIComponent("https://app.salescapture.ai/settings")}&response_type=code&scope=sequences.read%20sequenceStates.write%20users.all%20mailboxes.all%20prospects.all&state=xyz123`},children:"Connect Outreach"})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}const D5="/assets/logo_google_g-DjEGDao7.png";class SQ extends dt{constructor(t){super(t);ie(this,"handleAuthClick",()=>{this.setState({statusMessage:"Redirecting to Google..."});const t="786362911238-7q3lb2icdev4ives0ho4loi21n1r1t1g.apps.googleusercontent.com",n="https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid",r="https://scaiuserauthentication-7c5i3vsqma-uc.a.run.app/oauth2callback",s=new URL("https://accounts.google.com/o/oauth2/v2/auth");s.searchParams.set("client_id",t),s.searchParams.set("redirect_uri",r),s.searchParams.set("response_type","code"),s.searchParams.set("scope",n),s.searchParams.set("access_type","offline"),s.searchParams.set("prompt","consent");const o=this.propsState.currentUser.getJson()._id,a=window.location.href,h=JSON.stringify({userId:o,postAuthRedirect:a});s.searchParams.set("state",h),window.location.href=s.toString()});this.state={statusMessage:""}}render(){const{statusMessage:t}=this.state;return C.jsxs("div",{className:"gmail-auth-container",children:[C.jsx("h1",{style:{fontSize:"22px"},children:"Gmail API Authorization"}),C.jsx("p",{style:{fontSize:"16px"},children:"Click the button below to authorize your Google account for use with the Firebase Function."}),C.jsx("p",{style:{fontSize:"14px"},children:"- This process will redirect you to Google for authorization and then back to your function, which will save your token to Firestore, linked by your email address."}),C.jsxs("button",{className:"auth-button dark-button-1",style:{fontSize:"14px",background:"#333333"},onClick:this.handleAuthClick,children:[C.jsx("img",{src:D5,style:{width:"30px"}}),C.jsx("div",{children:"Authorize with Google"})]}),t&&C.jsx("div",{className:"status-message",children:t})]})}}class TQ extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return C.jsx("div",{id:"googleSettings",style:{border:"1px solid #d1d1d1",width:"fit-content",height:"fit-content",minWidth:"400px",padding:"12px",borderRadius:"8px"},children:this.propsState.currentUser.getJson().gmailAuthenticated?C.jsxs("div",{style:{font:"normal normal 900 12px/18px Satoshi"},children:["Gmail Authenticated:",C.jsxs("div",{style:{font:"normal normal 400 12px/16px Satoshi",color:"#696969",alignItems:"center",display:"flex",marginTop:"20px"},children:[C.jsx("img",{src:D5,style:{width:"30px"}}),this.propsState.currentUser.getJson()._id]})]}):C.jsx(SQ,{})})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class UL extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return C.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex",flexDirection:"column"},children:[C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(CQ,{})}),C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(xQ,{})}),C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(TQ,{})})]})}}class IQ extends dt{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Ro(e);this.setState({plainText:t})}componentDidUpdate(e){var r,s;const t=(r=this.props.obj)==null?void 0:r.getJson().content,n=(s=this.props.obj)==null?void 0:s.getJson().content;if(t!==n){const o=Ro(t);this.setState({plainText:o})}}render(){return C.jsx("div",{onClick:()=>{this.dispatch({popupSwitch:"updateStep",currentPopupComponent:this.props.obj})},children:C.jsxs("div",{className:"icon-row",children:[C.jsx("div",{className:"icon-container",children:C.jsxs("div",{className:"col",children:[C.jsx("div",{className:"icon",style:{cursor:"pointer"},children:C.jsx("i",{className:"fa-solid fa-envelope"})}),C.jsx("div",{className:"svg",children:C.jsx("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("line",{x1:"50%",y1:"0",x2:"50%",y2:"50",stroke:"var(--app-green)",strokeWidth:"3"})})})]})}),C.jsxs("div",{className:"message-container",children:[C.jsx("b",{children:this.props.obj.getJson().subject}),C.jsx("br",{}),C.jsx("span",{children:this.state.plainText})]})]})})}}class DQ extends dt{constructor(e){super(e),this.state={...this.state,style:{width:"fit-content",font:"normal normal 900 10px / 14px Satoshi",padding:"6px 17px",letterSpacing:".5px",color:"white",borderRadius:"53px",marginTop:"0px"},plainText:""}}getText(e){let t="Active",n="#9a9a9a";return e.getJson().finished&&(t="Finished",e.getJson().bounced&&(t="Bounced",n="#BE5858"),e.getJson().replied&&(t="Replied",n="#2374AB")),C.jsx("div",{className:"contact-tag-btn",style:{...this.state.style,background:n+" 0% 0% no-repeat"},children:t})}render(){var r,s;let e=(r=this.props.obj)==null?void 0:r.getJson(),t=e!=null&&e.mobile?e==null?void 0:e.mobile:e==null?void 0:e.email;(e.firstName||e.lastName)&&`${e.firstName}${e.lastName}`;let n=this.getText((s=this.props)==null?void 0:s.obj);return C.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[C.jsxs("div",{className:"contact-info",style:{flex:2},children:[C.jsx("div",{className:"contact-name",children:`${e.firstName} ${e.lastName}`}),C.jsxs("div",{className:"contact-desc",children:[(e==null?void 0:e.company)||(e==null?void 0:e.title)||(e==null?void 0:e.email)||(e==null?void 0:e.mobile)||"",C.jsxs("div",{children:["step: ",parseInt(e.emailNumber)+1]})]})]}),C.jsxs("div",{style:{display:"flex",flex:1,gap:"3px",justifyContent:"flex-end"},children:[C.jsx("div",{children:n}),!this.props.obj.getJson().finished&&C.jsx("div",{title:"Remove from Sequence",onClick:()=>{this.props.obj.setCompState({finished:!0}),this.props.obj.update();let o=this.propsState.currentSequence,a=parseInt(o.getJson().finished)+1;o.setCompState({finished:a}),o.update()},className:"dark-button-1",children:"Remove"})]})]})}}class Rw extends ig{constructor(e){super(e),this.state={...this.state,list:null,spState:"sequenceSteps"}}async componentDidMount(){var n;let e;await this.getComponentsFromBackend(),await this.componentList.getComponentsFromBackend("template"),await this.componentList.getComponentsFromBackend("step"),await this.componentList.getComponentsFromBackend("contact"),e=this.comp,e||(e=await this.operationsFactory.prepare({prepare:{type:"sequence"},clean:!0}),e=e[0]);let t=await this.componentList.getList("step",(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,"sequenceId");this.state.list||this.setState({list:t}),await this.dispatch({currentSequence:e}),this.componentList.sortSelectedList("step","order")}componentWillUnmount(){this.operationsFactory.clear()}async createStep(e){let t=this.componentList.getList("step",e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,"sequenceId");this.state.list||this.setState({list:t});const n=await this.operationsFactory.prepare({prepare:{type:"step",sequenceId:e?e.getJson()._id:this.propsState.currentSequence.getJson()._id,step:t.length}});this.dispatch({currentStep:n.length===2?n[1]:n[0]})}getStepJson(){var n,r;let e=this.componentList.getList("step",(n=this.propsState.currentSequence)==null?void 0:n.getJson()._id,"sequenceId");return{type:"step",sequenceId:(r=this.propsState.currentSequence)==null?void 0:r.getJson()._id,step:e.length}}getInnerContent(){var n,r,s,o,a,u;let t=((n=this.state.list)==null?void 0:n.length)>0?(r=this.state)==null?void 0:r.list[0].getJson().content:void 0;return C.jsx("div",{className:"fit",children:C.jsxs("div",{className:"mobile-container",children:[C.jsxs("div",{className:"title-bar",children:[C.jsxs("div",{className:"title-left",children:[C.jsx("div",{className:"title-icon",children:C.jsx("i",{className:"fas fa-angle-left",onClick:()=>{history.back()}})}),((s=this.propsState.currentSequence)==null?void 0:s.getJson().name)===""||this.state.edit?C.jsxs("div",{className:"name-a-sequence",children:[C.jsx(nt,{obj:this.propsState.currentSequence,name:"name"}),C.jsx(No,{callbackFunc:()=>{this.setState({edit:!1}),this.propsState.currentSequence.update()},content:"save",className:"dark-button-1"})]}):C.jsx(C.Fragment,{children:C.jsxs("div",{className:"title-name",children:[(o=this.propsState.currentSequence)==null?void 0:o.getJson().name,C.jsx("span",{onClick:()=>{this.setState({edit:!0})},children:C.jsx("span",{className:"name-a-sequence-edit-btn",children:"Edit"})})]})})]}),"limit contacts per day:",C.jsx(nt,{name:"limit",obj:this.propsState.currentSequence,update:!0}),C.jsxs("div",{className:"title-right active-seq-container",children:[C.jsx("div",{className:"title-icon",children:C.jsx("i",{className:"fas fa-circle"})}),C.jsx("div",{className:"title-name",children:"Active"})]})]}),C.jsx("div",{className:"switch-tab",children:C.jsxs("div",{className:"row row-space-around",children:[C.jsxs("div",{onClick:()=>{this.setState({spState:"assignedProspects"})},className:this.state.spState==="sequenceSteps"?"switch-tab-btn":"switch-tab-btn active",children:["Assigned",C.jsx("br",{}),"Prospects"]}),C.jsxs("div",{onClick:()=>{this.setState({spState:"sequenceSteps"})},className:this.state.spState==="assignedProspects"?"switch-tab-btn":"switch-tab-btn active",children:["Sequence",C.jsx("br",{}),"Steps"]})]})}),this.state.spState==="sequenceSteps"?C.jsxs("div",{className:"icon-list",children:[C.jsx(er,{name:"step",mapSectionClass:"none",mapContainerClass:"none",filter:{search:(a=this.propsState.currentSequence)==null?void 0:a.getJson()._id,attribute:"sequenceId"},filterFunc:h=>!(h.getJson().content===void 0||h.getJson().content===""),cells:[{type:"custom",custom:IQ,wrapperClass:"none"}]}),C.jsx(vA,{formClass:"svg-last",newProp:"asdf",obj:this.getStepJson(),content:C.jsxs(C.Fragment,{children:[C.jsx("svg",{width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",children:t&&this.state.list&&C.jsx(C.Fragment,{children:C.jsx("path",{d:"M25,0 Q25,25 50,25 H50",fill:"none",stroke:"var(--app-green)",strokeWidth:"3",strokeLinecap:"round"})})}),C.jsx("div",{className:"icon-last",children:C.jsx("i",{className:"fa-solid fa-plus"})})]}),popupSwitch:"addStep"}),C.jsx("div",{className:"icon-row",children:C.jsx("div",{className:"svg-last"})})]}):C.jsx("div",{className:"layoutColumn conversation-container",style:{padding:"20px"},children:C.jsx(er,{name:"contact",mapSectionClass:"none",mapContainerClass:"none",filter:{search:(u=this.propsState.currentSequence)==null?void 0:u.getJson()._id,attribute:"sequenceId"},cells:[{type:"custom",custom:DQ,wrapperClass:"none"}]})})]})})}render(){return C.jsx("div",{className:[this.props.pageClass||this.state.defaultClass,"sequence-margin"].join(" "),children:this.getInnerContent()})}}class kQ{async _makeApiCall(e){try{const t=await fetch("https://getemailfromai-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||`Request failed with status ${t.status}`)}const n=await t.json();if(n.success)return n.data;throw new Error(n.error||"The API call was not successful.")}catch(t){throw console.error("Failed to fetch from AI service:",t),t}}async generateMessage(e,t,n={}){const r={companyID:e.getJson().companyId,emailType:t,currentAIOptions:{model:"gpt-4o-mini",temperature:.9},context:{persona:n.persona||"",details:n.details||"",conversationHistory:n.conversationHistory||{}}};return await this._makeApiCall(r)}extractSubjectAndBody(e){const t=e.match(/^{{\s*([^}]+?)\s*}}/);let n="",r="";t?(n=t[1].trim(),r=e.slice(t[0].length).trim()):r=e.trim();const s=r.split(`

`).map(o=>`<p>${o.replace(/\n/g,"<br>")}</p>`).join(`
`);return{subject:n,body:s}}}const $c=new kQ;class Pw extends ig{async componentDidMount(){await this.getComponentsFromBackend();const e=this.urlId;if(!e||e==="template"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}async bridgeAiService(){let{persona:e,details:t,messageType:n}=this.state;n||(n="template");const r=this.propsState.currentComponent,s=this.propsState.currentUser;if(!n){alert("Please select a message type.");return}const o={persona:e,details:t,conversationHistory:{}};switch(n){case"reply":o.conversationHistory={fullHistory:t,lastProspectReply:t};break;case"sequence":o.conversationHistory={lastSentEmail:t};break;default:o.details=t;break}try{const a=await $c.generateMessage(s,n,o),{subject:u,body:h}=$c.extractSubjectAndBody(a);r.setCompState({content:h,subject:u}),console.log(h),this.dispatch({})}catch(a){console.error("Failed to generate AI message:",a),alert("There was an error generating the message. Please check the console.")}}getInnerContent(){const e=["Template","Follow Up","Reply","Event","Proposal","Attached Document","Referral","Network","Re-Engage"],t=["template","sequence","reply","event","proposal","document","referral","network","reEngage"];let n="Optional: Add Additional Details or Instructions",r="e.g., Mention our upcoming promotion...";return this.state.messageType==="reply"?(n="Paste Email Thread to Reply To:",r="e.g., On Fri, Jul 25, 2025, Jane Smith wrote: I'm interested..."):this.state.messageType==="sequence"&&(n="Paste Last Email Sent in Sequence:",r="e.g., Subject: Checking In..."),C.jsxs("div",{className:"fit",children:[C.jsx("h1",{children:"Template Details"}),C.jsx("div",{onClick:()=>this.setState({showAIDraft:!this.state.showAIDraft}),className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:this.state.showAIDraft?"Cancel":"Draft With AI"}),this.state.showAIDraft&&C.jsxs("div",{children:["Select Message Type:",C.jsx(nt,{type:"select",selectOptions:e,handleChange:s=>{let o=e.indexOf(s.target.value),a=t[o];this.setState({messageType:a})}}),'Optional: Specify a Persona (e.g., "friendly and casual" or "formal and direct")',C.jsx("input",{name:"persona",onChange:s=>this.setState({persona:s.target.value})}),"Optional: Add Additional Details or Instructions",C.jsx("div",{children:n}),C.jsx("input",{name:"details",placeholder:r,value:this.state.details||"",onChange:s=>this.setState({details:s.target.value})}),C.jsx("div",{className:"dark-button-1",onClick:()=>this.bridgeAiService(),children:"Generate"})]}),C.jsx("div",{className:"input-container",children:C.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&C.jsx(nt,{name:"subject",obj:this.propsState.currentComponent})})}),C.jsx("div",{className:"input-container",children:C.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&C.jsx(nt,{type:"quill",name:"content",obj:this.propsState.currentComponent})})}),C.jsx(No,{content:"Save Template"})]})}render(){return C.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class RQ extends dt{constructor(e){super(e),this.state={...this.state}}render(){const{obj:e}=this.props;let t=e.getJson();return C.jsx("div",{className:"sequence",children:C.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[C.jsx(yn,{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},to:"/client/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:C.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name})}),C.jsx(yn,{style:{marginRight:"0px"},to:"/client/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}const yi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sS=[.001,0,0,.001,0,0],gx=1.35,ps={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Mu={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},k5="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ft={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PQ={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},i_={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Gn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},np={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},kA={ERRORS:0,WARNINGS:1,INFOS:5},tv={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Nw={moveTo:0,lineTo:1,curveTo:2,closePath:3},NQ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let RA=kA.WARNINGS;function OQ(i){Number.isInteger(i)&&(RA=i)}function LQ(){return RA}function PA(i){RA>=kA.INFOS&&console.log(`Info: ${i}`)}function Et(i){RA>=kA.WARNINGS&&console.log(`Warning: ${i}`)}function rn(i){throw new Error(i)}function Xn(i,e){i||rn(e)}function FQ(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function R5(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=UQ(i)}catch{}}const n=e?URL.parse(i,e):URL.parse(i);return FQ(n)?n:null}function P5(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&R5(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Rt(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const uf=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class VL extends uf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class yx extends uf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class oS extends uf{constructor(e){super(e,"InvalidPDFException")}}class a1 extends uf{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class MQ extends uf{constructor(e){super(e,"FormatError")}}class Wc extends uf{constructor(e){super(e,"AbortException")}}function N5(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&rn("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=i.subarray(r,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Z0(i){typeof i!="string"&&rn("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function BQ(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function jQ(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function qQ(){try{return new Function(""),!0}catch{return!1}}class $r{static get isLittleEndian(){return Rt(this,"isLittleEndian",jQ())}static get isEvalSupported(){return Rt(this,"isEvalSupported",qQ())}static get isOffscreenCanvasSupported(){return Rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Rt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Rt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const vx=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var $l,s_,aS;class Ke{static makeHexColor(e,t,n){return`#${vx[e]}${vx[t]}${vx[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],s=e[n+1];e[n]=r*t[0]+s*t[2]+t[4],e[n+1]=r*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],h=t[5];for(let d=0;d<6;d+=2){const m=e[n+d],p=e[n+d+1];e[n+d]=m*r+p*o+u,e[n+d+1]=m*s+p*a+h}}static applyInverseTransform(e,t){const n=e[0],r=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],h=t[5],d=e[0],m=e[1],p=e[2],g=e[3];let w=r*d+u,_=w,A=r*p+u,v=A,E=a*m+h,I=E,S=a*g+h,R=S;if(s!==0||o!==0){const F=s*d,k=s*p,T=o*m,D=o*g;w+=T,v+=T,A+=D,_+=D,E+=F,R+=F,S+=k,I+=k}n[0]=Math.min(n[0],w,A,_,v),n[1]=Math.min(n[1],E,S,I,R),n[2]=Math.max(n[2],w,A,_,v),n[3]=Math.max(n[3],E,S,I,R)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],s=e[2],o=e[3],a=n**2+r**2,u=n*s+r*o,h=s**2+o**2,d=(a+h)/2,m=Math.sqrt(d**2-(a*h-u**2));t[0]=Math.sqrt(d+m||1),t[1]=Math.sqrt(d-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[n,s,r,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,r),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,r)}static bezierBoundingBox(e,t,n,r,s,o,a,u,h){h[0]=Math.min(h[0],e,a),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,a),h[3]=Math.max(h[3],t,u),W(this,$l,aS).call(this,e,n,s,a,t,r,o,u,3*(-e+3*(n-s)+a),6*(e-2*n+s),3*(n-e),h),W(this,$l,aS).call(this,e,n,s,a,t,r,o,u,3*(-t+3*(r-o)+u),6*(t-2*r+o),3*(r-t),h)}}$l=new WeakSet,s_=function(e,t,n,r,s,o,a,u,h,d){if(h<=0||h>=1)return;const m=1-h,p=h*h,g=p*h,w=m*(m*(m*e+3*h*t)+3*p*n)+g*r,_=m*(m*(m*s+3*h*o)+3*p*a)+g*u;d[0]=Math.min(d[0],w),d[1]=Math.min(d[1],_),d[2]=Math.max(d[2],w),d[3]=Math.max(d[3],_)},aS=function(e,t,n,r,s,o,a,u,h,d,m,p){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&W(this,$l,s_).call(this,e,t,n,r,s,o,a,u,-m/d,p);return}const g=d**2-4*m*h;if(g<0)return;const w=Math.sqrt(g),_=2*h;W(this,$l,s_).call(this,e,t,n,r,s,o,a,u,(-d+w)/_,p),W(this,$l,s_).call(this,e,t,n,r,s,o,a,u,(-d-w)/_,p)},z(Ke,$l);function UQ(i){return decodeURIComponent(escape(i))}let wx=null,HL=null;function VQ(i){return wx||(wx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,HL=new Map([["","t"]])),i.replaceAll(wx,(e,t,n)=>t?t.normalize("NFKC"):HL.get(n))}function O5(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),N5(i)}const sD="pdfjs_internal_id_";function HQ(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...s]=t;if(!i(n)&&!Number.isInteger(n)||!e(r))return!1;const o=s.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const u of s)if(!(typeof u=="number"||a&&u===null))return!1;return!0}function vi(i,e,t){return Math.min(Math.max(i,e),t)}function L5(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(N5(i))}function zQ(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Z0(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});const Ja="http://www.w3.org/2000/svg",Nh=class Nh{};ie(Nh,"CSS",96),ie(Nh,"PDF",72),ie(Nh,"PDF_TO_CSS_UNITS",Nh.CSS/Nh.PDF);let Gc=Nh;async function e2(i,e="text"){if(uy(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class t2{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=o,n*=t;const u=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let d,m,p,g;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,m=0,p=0,g=1;break;case 90:d=0,m=1,p=1,g=0;break;case 270:d=0,m=-1,p=-1,g=0;break;case 0:d=1,m=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,g=-g);let w,_,A,v;d===0?(w=Math.abs(h-e[1])*n+s,_=Math.abs(u-e[0])*n+o,A=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(w=Math.abs(u-e[0])*n+s,_=Math.abs(h-e[1])*n+o,A=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[d*n,m*n,p*n,g*n,w-d*n*u-p*n*h,_-m*n*u-g*n*h],this.width=A,this.height=v}get rawDims(){const e=this.viewBox;return Rt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new t2({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return Ke.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Ke.applyTransform(t,this.transform);const n=[e[2],e[3]];return Ke.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Ke.applyInverseTransform(n,this.transform),n}}class oD extends uf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function NA(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function aD(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function $Q(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function WQ(i,e="document.pdf"){if(typeof i!="string")return e;if(NA(i))return Et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return e;const r=a=>{try{let u=decodeURIComponent(a);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:a):u}catch{return a}},s=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(s.test(o))return r(o);if(n.searchParams.size>0){const a=Array.from(n.searchParams.values()).reverse();for(const h of a)if(s.test(h))return r(h);const u=Array.from(n.searchParams.keys()).reverse();for(const h of u)if(s.test(h))return r(h)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return r(u[0])}return e}class zL{constructor(){ie(this,"started",Object.create(null));ie(this,"times",[])}time(e){e in this.started&&Et(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Et(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}}function uy(i,e){const t=e?URL.parse(i,e):URL.parse(i);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Js(i){i.preventDefault()}function Jn(i){i.preventDefault(),i.stopPropagation()}function GQ(i){console.log("Deprecated API usage: "+i)}var sv;class l1{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;f(this,sv)||U(this,sv,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=f(this,sv).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(o+=d,a+=m):h==="+"&&(o-=d,a-=m),new Date(Date.UTC(n,r,s,o,a,u))}}sv=new WeakMap,z(l1,sv);function KQ(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new t2({viewBox:s,userUnit:1,scale:e,rotation:t})}function OA(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Et(`Not a valid color format: "${i}"`),[0,0,0])}function JQ(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,OA(n))}e.remove()}function kn(i){const{a:e,b:t,c:n,d:r,e:s,f:o}=i.getTransform();return[e,t,n,r,s,o]}function $o(i){const{a:e,b:t,c:n,d:r,e:s,f:o}=i.getTransform().invertSelf();return[e,t,n,r,s,o]}function Xd(i,e,t=!1,n=!0){if(e instanceof t2){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=i,a=$r.isCSSRoundSupported,u=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${s}px`,d=a?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,m=a?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=d,o.height=m):(o.width=m,o.height=d)}n&&i.setAttribute("data-main-rotation",e.rotation)}class Da{constructor(){const{pixelRatio:e}=Da;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,s=-1){let o=1/0,a=1/0,u=1/0;n=Da.capPixels(n,s),n>0&&(o=Math.sqrt(n/(e*t))),r!==-1&&(a=r/e,u=r/t);const h=Math.min(o,a,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const lS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Bu,ju,Ls,el,ov,bp,Ep,av,v1,F5,zr,M5,B5,rp,cy;const Qa=class Qa{constructor(e){z(this,zr);z(this,Bu,null);z(this,ju,null);z(this,Ls);z(this,el,null);z(this,ov,null);z(this,bp,null);z(this,Ep,null);U(this,Ls,e),f(Qa,av)||U(Qa,av,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=U(this,Bu,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=f(this,Ls)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Js,{signal:t}),e.addEventListener("pointerdown",W(Qa,v1,F5),{signal:t}));const n=U(this,el,document.createElement("div"));n.className="buttons",e.append(n);const r=f(this,Ls).toolbarPosition;if(r){const{style:s}=e,o=f(this,Ls)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return f(this,Bu)}hide(){var e;f(this,Bu).classList.add("hidden"),(e=f(this,ju))==null||e.hideDropdown()}show(){var e,t;f(this,Bu).classList.remove("hidden"),(e=f(this,ov))==null||e.shown(),(t=f(this,bp))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=f(this,Ls),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",f(Qa,av)[e]),W(this,zr,rp).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),f(this,el).append(n)}async addAltText(e){const t=await e.render();W(this,zr,rp).call(this,t),f(this,el).append(t,f(this,zr,cy)),U(this,ov,e)}addComment(e){if(f(this,bp))return;const t=e.render();t&&(W(this,zr,rp).call(this,t),f(this,el).append(t,f(this,zr,cy)),U(this,bp,e),e.toolbar=this)}addColorPicker(e){if(f(this,ju))return;U(this,ju,e);const t=e.renderButton();W(this,zr,rp).call(this,t),f(this,el).append(t,f(this,zr,cy))}async addEditSignatureButton(e){const t=U(this,Ep,await e.renderEditButton(f(this,Ls)));W(this,zr,rp).call(this,t),f(this,el).append(t,f(this,zr,cy))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){f(this,Ep)&&(f(this,Ep).title=e)}remove(){var e;f(this,Bu).remove(),(e=f(this,ju))==null||e.destroy(),U(this,ju,null)}};Bu=new WeakMap,ju=new WeakMap,Ls=new WeakMap,el=new WeakMap,ov=new WeakMap,bp=new WeakMap,Ep=new WeakMap,av=new WeakMap,v1=new WeakSet,F5=function(e){e.stopPropagation()},zr=new WeakSet,M5=function(e){f(this,Ls)._focusEventsAllowed=!1,Jn(e)},B5=function(e){f(this,Ls)._focusEventsAllowed=!0,Jn(e)},rp=function(e){const t=f(this,Ls)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",W(this,zr,M5).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",W(this,zr,B5).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Js,{signal:t}),!0)},cy=function(){const e=document.createElement("div");return e.className="divider",e},z(Qa,v1),z(Qa,av,null);let uS=Qa;var lv,Bh,tl,Ql,j5,q5,cS;class YQ{constructor(e){z(this,Ql);z(this,lv,null);z(this,Bh,null);z(this,tl);U(this,tl,e)}show(e,t,n){const[r,s]=W(this,Ql,q5).call(this,t,n),{style:o}=f(this,Bh)||U(this,Bh,W(this,Ql,j5).call(this));e.append(f(this,Bh)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,Bh).remove()}}lv=new WeakMap,Bh=new WeakMap,tl=new WeakMap,Ql=new WeakSet,j5=function(){const e=U(this,Bh,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=f(this,tl)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Js,{signal:t});const n=U(this,lv,document.createElement("div"));return n.className="buttons",e.append(n),f(this,tl).hasCommentManager()&&W(this,Ql,cS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{f(this,tl).commentSelection("floating_button")}),W(this,Ql,cS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{f(this,tl).highlightSelection("floating_button")}),e},q5=function(e,t){let n=0,r=0;for(const s of e){const o=s.y+s.height;if(o<n)continue;const a=s.x+(t?s.width:0);if(o>n){r=a,n=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]},cS=function(e,t,n,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const a=f(this,tl)._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",Js,{signal:a}),s.addEventListener("click",r,{signal:a})),f(this,lv).append(s)};function U5(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}var w1;class XQ{constructor(){z(this,w1,0)}get id(){return`${k5}${ir(this,w1)._++}`}}w1=new WeakMap;var Cp,uv,Zr,xp,o_;const mD=class mD{constructor(){z(this,xp);z(this,Cp,O5());z(this,uv,0);z(this,Zr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Rt(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return W(this,xp,o_).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return W(this,xp,o_).call(this,e,e)}async getFromBlob(e,t){const n=await t;return W(this,xp,o_).call(this,e,n)}async getFromId(e){f(this,Zr)||U(this,Zr,new Map);const t=f(this,Zr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){f(this,Zr)||U(this,Zr,new Map);let n=f(this,Zr).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${f(this,Cp)}_${ir(this,uv)._++}`,refCounter:1,isSvg:!1},f(this,Zr).set(e,n),f(this,Zr).set(n.id,n),n}getSvgUrl(e){const t=f(this,Zr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;f(this,Zr)||U(this,Zr,new Map);const t=f(this,Zr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${f(this,Cp)}_`)}};Cp=new WeakMap,uv=new WeakMap,Zr=new WeakMap,xp=new WeakSet,o_=async function(e,t){f(this,Zr)||U(this,Zr,new Map);let n=f(this,Zr).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${f(this,Cp)}_${ir(this,uv)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await e2(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=mD._isSVGFittingCanvas,o=new FileReader,a=new Image,u=new Promise((h,d)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,h()},o.onload=async()=>{const m=n.svgUrl=o.result;a.src=await s?`${m}#svgView(preserveAspectRatio(none))`:m},a.onerror=o.onerror=d});o.readAsDataURL(r),await u}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Et(r),n=null}return f(this,Zr).set(e,n),n&&f(this,Zr).set(n.id,n),n};let hS=mD;var jn,qu,cv,In;class QQ{constructor(e=128){z(this,jn,[]);z(this,qu,!1);z(this,cv);z(this,In,-1);U(this,cv,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),f(this,qu))return;const u={cmd:e,undo:t,post:n,type:s};if(f(this,In)===-1){f(this,jn).length>0&&(f(this,jn).length=0),U(this,In,0),f(this,jn).push(u);return}if(o&&f(this,jn)[f(this,In)].type===s){a&&(u.undo=f(this,jn)[f(this,In)].undo),f(this,jn)[f(this,In)]=u;return}const h=f(this,In)+1;h===f(this,cv)?f(this,jn).splice(0,1):(U(this,In,h),h<f(this,jn).length&&f(this,jn).splice(h)),f(this,jn).push(u)}undo(){if(f(this,In)===-1)return;U(this,qu,!0);const{undo:e,post:t}=f(this,jn)[f(this,In)];e(),t==null||t(),U(this,qu,!1),U(this,In,f(this,In)-1)}redo(){if(f(this,In)<f(this,jn).length-1){U(this,In,f(this,In)+1),U(this,qu,!0);const{cmd:e,post:t}=f(this,jn)[f(this,In)];e(),t==null||t(),U(this,qu,!1)}}hasSomethingToUndo(){return f(this,In)!==-1}hasSomethingToRedo(){return f(this,In)<f(this,jn).length-1}cleanType(e){if(f(this,In)!==-1){for(let t=f(this,In);t>=0;t--)if(f(this,jn)[t].type!==e){f(this,jn).splice(t+1,f(this,In)-t),U(this,In,t);return}f(this,jn).length=0,U(this,In,-1)}}destroy(){U(this,jn,null)}}jn=new WeakMap,qu=new WeakMap,cv=new WeakMap,In=new WeakMap;var _1,V5;class n2{constructor(e){z(this,_1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=$r.platform;for(const[n,r,s={}]of e)for(const o of n){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(W(this,_1,V5).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...o,t)(),s||Jn(t))}}_1=new WeakSet,V5=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const A1=class A1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return JQ(e),Rt(this,"_colors",e)}convert(e){const t=OA(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((s,o)=>s===t[o]))return A1._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ke.makeHexColor(...t):e}};ie(A1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let dS=A1;var Sp,Xi,Tp,ar,Nr,Ip,nl,Dp,Fs,rl,Uu,Vu,kp,jh,Jo,Ms,qh,hv,dv,Rp,fv,Yo,Hu,Pp,zu,Xo,b1,$u,Np,pv,Wu,Uh,Op,Gu,mv,lr,Xt,il,Ku,Ju,gv,Lp,yv,Yu,Qo,sl,vv,wv,Bs,Me,a_,fS,H5,z5,hy,$5,W5,G5,pS,K5,mS,gS,J5,hi,Ya,Y5,X5,yS,Q5,dy,vS;const fp=class fp{constructor(e,t,n,r,s,o,a,u,h,d,m,p,g,w,_,A){z(this,Me);z(this,Sp,new AbortController);z(this,Xi,null);z(this,Tp,null);z(this,ar,new Map);z(this,Nr,new Map);z(this,Ip,null);z(this,nl,null);z(this,Dp,null);z(this,Fs,new QQ);z(this,rl,null);z(this,Uu,null);z(this,Vu,null);z(this,kp,0);z(this,jh,new Set);z(this,Jo,null);z(this,Ms,null);z(this,qh,new Set);ie(this,"_editorUndoBar",null);z(this,hv,!1);z(this,dv,!1);z(this,Rp,!1);z(this,fv,null);z(this,Yo,null);z(this,Hu,null);z(this,Pp,null);z(this,zu,!1);z(this,Xo,null);z(this,b1,new XQ);z(this,$u,!1);z(this,Np,!1);z(this,pv,!1);z(this,Wu,null);z(this,Uh,null);z(this,Op,null);z(this,Gu,null);z(this,mv,null);z(this,lr,yt.NONE);z(this,Xt,new Set);z(this,il,null);z(this,Ku,null);z(this,Ju,null);z(this,gv,null);z(this,Lp,null);z(this,yv,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});z(this,Yu,[0,0]);z(this,Qo,null);z(this,sl,null);z(this,vv,null);z(this,wv,null);z(this,Bs,null);const v=this._signal=f(this,Sp).signal;U(this,sl,e),U(this,vv,t),U(this,wv,n),U(this,Ip,r),U(this,rl,s),U(this,Ku,o),U(this,Lp,u),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:v}),window.addEventListener("pointerdown",()=>{U(this,Np,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{U(this,Np,!1)},{capture:!0,signal:v}),W(this,Me,$5).call(this),W(this,Me,J5).call(this),W(this,Me,pS).call(this),U(this,nl,u.annotationStorage),U(this,fv,u.filterFactory),U(this,Ju,h),U(this,Pp,d||null),U(this,hv,m),U(this,dv,p),U(this,Rp,g),U(this,mv,w||null),this.viewParameters={realScale:Gc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const e=fp.prototype,t=o=>f(o,sl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:u}=a;return u!=="text"&&u!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Rt(this,"_keyboardManager",new n2([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&f(o,sl).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&f(o,sl).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,r,s,o,a,u,h;(e=f(this,Bs))==null||e.resolve(),U(this,Bs,null),(t=f(this,Sp))==null||t.abort(),U(this,Sp,null),this._signal=null;for(const d of f(this,Nr).values())d.destroy();f(this,Nr).clear(),f(this,ar).clear(),f(this,qh).clear(),(n=f(this,Gu))==null||n.clear(),U(this,Xi,null),f(this,Xt).clear(),f(this,Fs).destroy(),(r=f(this,Ip))==null||r.destroy(),(s=f(this,rl))==null||s.destroy(),(o=f(this,Ku))==null||o.destroy(),(a=f(this,Xo))==null||a.hide(),U(this,Xo,null),(u=f(this,Op))==null||u.destroy(),U(this,Op,null),U(this,Tp,null),f(this,Yo)&&(clearTimeout(f(this,Yo)),U(this,Yo,null)),f(this,Qo)&&(clearTimeout(f(this,Qo)),U(this,Qo,null)),(h=this._editorUndoBar)==null||h.destroy(),U(this,Lp,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return f(this,mv)}get useNewAltTextFlow(){return f(this,dv)}get useNewAltTextWhenAddingImage(){return f(this,Rp)}get hcmFilter(){return Rt(this,"hcmFilter",f(this,Ju)?f(this,fv).addHCMFilter(f(this,Ju).foreground,f(this,Ju).background):"none")}get direction(){return Rt(this,"direction",getComputedStyle(f(this,sl)).direction)}get _highlightColors(){return Rt(this,"_highlightColors",f(this,Pp)?new Map(f(this,Pp).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Rt(this,"highlightColors",null);const t=new Map,n=!!f(this,Ju);for(const[r,s]of e){const o=r.endsWith("_HCM");if(n&&o){t.set(r.replace("_HCM",""),s);continue}!n&&!o&&t.set(r,s)}return Rt(this,"highlightColors",t)}get highlightColorNames(){return Rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),U(this,Vu,e)}setMainHighlightColorPicker(e){U(this,Op,e)}editAltText(e,t=!1){var n;(n=f(this,Ip))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!f(this,rl)}editComment(e,t){var n;(n=f(this,rl))==null||n.open(this,e,t)}getSignature(e){var t;(t=f(this,Ku))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return f(this,Ku)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":U(this,Rp,t);break}}onPageChanging({pageNumber:e}){U(this,kp,e-1)}focusMainContainer(){f(this,sl).focus()}findParent(e,t){for(const n of f(this,Nr).values()){const{x:r,y:s,width:o,height:a}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=s&&t<=s+a)return n}return null}disableUserSelect(e=!1){f(this,vv).classList.toggle("noUserSelect",e)}addShouldRescale(e){f(this,qh).add(e)}removeShouldRescale(e){f(this,qh).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Gc.PDF_TO_CSS_UNITS;for(const n of f(this,qh))n.onScaleChanging();(t=f(this,Vu))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a}=n,u=n.toString(),d=W(this,Me,a_).call(this,n).closest(".textLayer"),m=this.getSelectionBoxes(d);if(!m)return;n.empty();const p=W(this,Me,fS).call(this,d),g=f(this,lr)===yt.NONE,w=()=>{const _=p==null?void 0:p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a,text:u});g&&this.showAllEditors("highlight",!0,!0),t&&(_==null||_.editComment())};if(g){this.switchToMode(yt.HIGHLIGHT,w);return}w()}commentSelection(e=""){this.highlightSelection(e,!0)}addToAnnotationStorage(e){!e.isEmpty()&&f(this,nl)&&!f(this,nl).has(e.id)&&f(this,nl).setValue(e.id,e)}a11yAlert(e,t=null){const n=f(this,wv);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,f(this,zu)&&(U(this,zu,!1),W(this,Me,hy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of f(this,Xt))if(t.div.contains(e)){U(this,Uh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!f(this,Uh))return;const[e,t]=f(this,Uh);U(this,Uh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){W(this,Me,pS).call(this),W(this,Me,mS).call(this)}removeEditListeners(){W(this,Me,K5).call(this),W(this,Me,gS).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of f(this,Ms))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of f(this,Ms))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=f(this,Xi))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of f(this,Xt)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of f(this,Ms))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Et(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const u of n){const h=await r.deserialize(u);if(!h)return;s.push(h)}const o=()=>{for(const u of s)W(this,Me,yS).call(this,u);W(this,Me,vS).call(this,s)},a=()=>{for(const u of s)u.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Et(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,lr)!==yt.NONE&&!this.isEditorHandlingKeyboard&&fp._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,zu)&&(U(this,zu,!1),W(this,Me,hy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(W(this,Me,W5).call(this),W(this,Me,mS).call(this),W(this,Me,hi).call(this,{isEditing:f(this,lr)!==yt.NONE,isEmpty:W(this,Me,dy).call(this),hasSomethingToUndo:f(this,Fs).hasSomethingToUndo(),hasSomethingToRedo:f(this,Fs).hasSomethingToRedo(),hasSelectedEditor:!1})):(W(this,Me,G5).call(this),W(this,Me,gS).call(this),W(this,Me,hi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!f(this,Ms)){U(this,Ms,e);for(const t of f(this,Ms))W(this,Me,Ya).call(this,t.defaultPropertiesToUpdate)}}getId(){return f(this,b1).id}get currentLayer(){return f(this,Nr).get(f(this,kp))}getLayer(e){return f(this,Nr).get(e)}get currentPageIndex(){return f(this,kp)}addLayer(e){f(this,Nr).set(e.pageIndex,e),f(this,$u)?e.enable():e.disable()}removeLayer(e){f(this,Nr).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,s=!1){var o,a,u,h,d;if(f(this,lr)!==e&&!(f(this,Bs)&&(await f(this,Bs).promise,!f(this,Bs)))){if(U(this,Bs,Promise.withResolvers()),(o=f(this,Vu))==null||o.commitOrRemove(),f(this,lr)===yt.POPUP&&((a=f(this,rl))==null||a.hideSidebar()),U(this,lr,e),e===yt.NONE){this.setEditingState(!1),W(this,Me,X5).call(this),(u=this._editorUndoBar)==null||u.hide(),f(this,Bs).resolve();return}e===yt.SIGNATURE&&await((h=f(this,Ku))==null?void 0:h.loadSignatures()),e===yt.POPUP&&(f(this,Tp)||U(this,Tp,await f(this,Lp).getAnnotationsByType(new Set(f(this,Ms).map(m=>m._editorType)))),(d=f(this,rl))==null||d.showSidebar(f(this,Tp))),this.setEditingState(!0),await W(this,Me,Y5).call(this),this.unselectAll();for(const m of f(this,Nr).values())m.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),f(this,Bs).resolve();return}for(const m of f(this,ar).values())m.annotationElementId===t||m.id===t?(this.setSelected(m),s?m.editComment():r&&m.enterInEditMode()):m.unselect();f(this,Bs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==f(this,lr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(f(this,Ms)){switch(e){case Ft.CREATE:this.currentLayer.addNewEditor(t);return;case Ft.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,gv)||U(this,gv,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of f(this,Xt))n.updateParams(e,t);else for(const n of f(this,Ms))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const o of f(this,ar).values())o.editorType===e&&o.show(t);(((s=f(this,gv))==null?void 0:s.get(Ft.HIGHLIGHT_SHOW_ALL))??!0)!==t&&W(this,Me,Ya).call(this,[[Ft.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(f(this,pv)!==e){U(this,pv,e);for(const t of f(this,Nr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of f(this,ar).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return f(this,ar).get(e)}addEditor(e){f(this,ar).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(f(this,Yo)&&clearTimeout(f(this,Yo)),U(this,Yo,setTimeout(()=>{this.focusMainContainer(),U(this,Yo,null)},0))),f(this,ar).delete(e.id),e.annotationElementId&&((t=f(this,Gu))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!f(this,jh).has(e.annotationElementId))&&((n=f(this,nl))==null||n.remove(e.id))}addDeletedAnnotationElement(e){f(this,jh).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return f(this,jh).has(e)}removeDeletedAnnotationElement(e){f(this,jh).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){f(this,Xi)!==e&&(U(this,Xi,e),e&&W(this,Me,Ya).call(this,e.propertiesToUpdate))}updateUI(e){f(this,Me,Q5)===e&&W(this,Me,Ya).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){W(this,Me,Ya).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(f(this,Xt).has(e)){f(this,Xt).delete(e),e.unselect(),W(this,Me,hi).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,Xt).add(e),e.select(),W(this,Me,Ya).call(this,e.propertiesToUpdate),W(this,Me,hi).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=f(this,Vu))==null||t.commitOrRemove();for(const n of f(this,Xt))n!==e&&n.unselect();f(this,Xt).clear(),f(this,Xt).add(e),e.select(),W(this,Me,Ya).call(this,e.propertiesToUpdate),W(this,Me,hi).call(this,{hasSelectedEditor:!0})}isSelected(e){return f(this,Xt).has(e)}get firstSelectedEditor(){return f(this,Xt).values().next().value}unselect(e){e.unselect(),f(this,Xt).delete(e),W(this,Me,hi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,Xt).size!==0}get isEnterHandled(){return f(this,Xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;f(this,Fs).undo(),W(this,Me,hi).call(this,{hasSomethingToUndo:f(this,Fs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:W(this,Me,dy).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){f(this,Fs).redo(),W(this,Me,hi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,Fs).hasSomethingToRedo(),isEmpty:W(this,Me,dy).call(this)})}addCommands(e){f(this,Fs).add(e),W(this,Me,hi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:W(this,Me,dy).call(this)})}cleanUndoStack(e){f(this,Fs).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...f(this,Xt)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)W(this,Me,yS).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=f(this,Xi))==null||e.commitOrRemove()}hasSomethingToControl(){return f(this,Xi)||this.hasSelection}selectAll(){for(const e of f(this,Xt))e.commit();W(this,Me,vS).call(this,f(this,ar).values())}unselectAll(){var e;if(!(f(this,Xi)&&(f(this,Xi).commitOrRemove(),f(this,lr)!==yt.NONE))&&!((e=f(this,Vu))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of f(this,Xt))t.unselect();f(this,Xt).clear(),W(this,Me,hi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;f(this,Yu)[0]+=e,f(this,Yu)[1]+=t;const[r,s]=f(this,Yu),o=[...f(this,Xt)],a=1e3;f(this,Qo)&&clearTimeout(f(this,Qo)),U(this,Qo,setTimeout(()=>{U(this,Qo,null),f(this,Yu)[0]=f(this,Yu)[1]=0,this.addCommands({cmd:()=>{for(const u of o)f(this,ar).has(u.id)&&(u.translateInPage(r,s),u.translationDone())},undo:()=>{for(const u of o)f(this,ar).has(u.id)&&(u.translateInPage(-r,-s),u.translationDone())},mustExec:!1})},a));for(const u of o)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),U(this,Jo,new Map);for(const e of f(this,Xt))f(this,Jo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,Jo))return!1;this.disableUserSelect(!1);const e=f(this,Jo);U(this,Jo,null);let t=!1;for(const[{x:r,y:s,pageIndex:o},a]of e)a.newX=r,a.newY=s,a.newPageIndex=o,t||(t=r!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const n=(r,s,o,a)=>{if(f(this,ar).has(r.id)){const u=f(this,Nr).get(a);u?r._setParentAndPosition(u,s,o):(r.pageIndex=a,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:a}]of e)n(r,s,o,a)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:a}]of e)n(r,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(f(this,Jo))for(const n of f(this,Jo).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||f(this,Xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return f(this,Xi)===e}getActive(){return f(this,Xi)}getMode(){return f(this,lr)}get imageManager(){return Rt(this,"imageManager",new hS)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,d=t.rangeCount;h<d;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(h,d,m,p)=>({x:(d-r)/o,y:1-(h+m-n)/s,width:p/o,height:m/s});break;case"180":a=(h,d,m,p)=>({x:1-(h+m-n)/s,y:1-(d+p-r)/o,width:m/s,height:p/o});break;case"270":a=(h,d,m,p)=>({x:1-(d+p-r)/o,y:(h-n)/s,width:p/o,height:m/s});break;default:a=(h,d,m,p)=>({x:(h-n)/s,y:(d-r)/o,width:m/s,height:p/o});break}const u=[];for(let h=0,d=t.rangeCount;h<d;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:p,y:g,width:w,height:_}of m.getClientRects())w===0||_===0||u.push(a(p,g,w,_))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(f(this,Dp)||U(this,Dp,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=f(this,Dp))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=f(this,Dp))==null?void 0:r.get(e.data.id);if(!t)return;const n=f(this,nl).getRawValue(t);n&&(f(this,lr)===yt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var s;const r=(s=f(this,Gu))==null?void 0:s.get(e);r&&(r.setCanvas(t,n),f(this,Gu).delete(e))}addMissingCanvas(e,t){(f(this,Gu)||U(this,Gu,new Map)).set(e,t)}};Sp=new WeakMap,Xi=new WeakMap,Tp=new WeakMap,ar=new WeakMap,Nr=new WeakMap,Ip=new WeakMap,nl=new WeakMap,Dp=new WeakMap,Fs=new WeakMap,rl=new WeakMap,Uu=new WeakMap,Vu=new WeakMap,kp=new WeakMap,jh=new WeakMap,Jo=new WeakMap,Ms=new WeakMap,qh=new WeakMap,hv=new WeakMap,dv=new WeakMap,Rp=new WeakMap,fv=new WeakMap,Yo=new WeakMap,Hu=new WeakMap,Pp=new WeakMap,zu=new WeakMap,Xo=new WeakMap,b1=new WeakMap,$u=new WeakMap,Np=new WeakMap,pv=new WeakMap,Wu=new WeakMap,Uh=new WeakMap,Op=new WeakMap,Gu=new WeakMap,mv=new WeakMap,lr=new WeakMap,Xt=new WeakMap,il=new WeakMap,Ku=new WeakMap,Ju=new WeakMap,gv=new WeakMap,Lp=new WeakMap,yv=new WeakMap,Yu=new WeakMap,Qo=new WeakMap,sl=new WeakMap,vv=new WeakMap,wv=new WeakMap,Bs=new WeakMap,Me=new WeakSet,a_=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},fS=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of f(this,Nr).values())if(n.hasTextLayer(e))return n;return null},H5=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=W(this,Me,a_).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(f(this,Xo)||U(this,Xo,new YQ(this)),f(this,Xo).show(n,r,this.direction==="ltr"))},z5=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){f(this,il)&&((s=f(this,Xo))==null||s.hide(),U(this,il,null),W(this,Me,hi).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===f(this,il))return;const r=W(this,Me,a_).call(this,e).closest(".textLayer");if(!r){f(this,il)&&((o=f(this,Xo))==null||o.hide(),U(this,il,null),W(this,Me,hi).call(this,{hasSelectedText:!1}));return}if((a=f(this,Xo))==null||a.hide(),U(this,il,t),W(this,Me,hi).call(this,{hasSelectedText:!0}),!(f(this,lr)!==yt.HIGHLIGHT&&f(this,lr)!==yt.NONE)&&(f(this,lr)===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),U(this,zu,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=f(this,lr)===yt.HIGHLIGHT?W(this,Me,fS).call(this,r):null;if(u==null||u.toggleDrawing(),f(this,Np)){const h=new AbortController,d=this.combinedSignal(h),m=p=>{p.type==="pointerup"&&p.button!==0||(h.abort(),u==null||u.toggleDrawing(!0),p.type==="pointerup"&&W(this,Me,hy).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:d}),window.addEventListener("blur",m,{signal:d})}else u==null||u.toggleDrawing(!0),W(this,Me,hy).call(this,"main_toolbar")}},hy=function(e=""){f(this,lr)===yt.HIGHLIGHT?this.highlightSelection(e):f(this,hv)&&W(this,Me,H5).call(this)},$5=function(){document.addEventListener("selectionchange",W(this,Me,z5).bind(this),{signal:this._signal})},W5=function(){if(f(this,Hu))return;U(this,Hu,new AbortController);const e=this.combinedSignal(f(this,Hu));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},G5=function(){var e;(e=f(this,Hu))==null||e.abort(),U(this,Hu,null)},pS=function(){if(f(this,Wu))return;U(this,Wu,new AbortController);const e=this.combinedSignal(f(this,Wu));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},K5=function(){var e;(e=f(this,Wu))==null||e.abort(),U(this,Wu,null)},mS=function(){if(f(this,Uu))return;U(this,Uu,new AbortController);const e=this.combinedSignal(f(this,Uu));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},gS=function(){var e;(e=f(this,Uu))==null||e.abort(),U(this,Uu,null)},J5=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},hi=function(e){Object.entries(e).some(([n,r])=>f(this,yv)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,yv),e)}),f(this,lr)===yt.HIGHLIGHT&&e.hasSelectedEditor===!1&&W(this,Me,Ya).call(this,[[Ft.HIGHLIGHT_FREE,!0]]))},Ya=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Y5=async function(){if(!f(this,$u)){U(this,$u,!0);const e=[];for(const t of f(this,Nr).values())e.push(t.enable());await Promise.all(e);for(const t of f(this,ar).values())t.enable()}},X5=function(){if(this.unselectAll(),f(this,$u)){U(this,$u,!1);for(const e of f(this,Nr).values())e.disable();for(const e of f(this,ar).values())e.disable()}},yS=function(e){const t=f(this,Nr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Q5=function(){let e=null;for(e of f(this,Xt));return e},dy=function(){if(f(this,ar).size===0)return!0;if(f(this,ar).size===1)for(const e of f(this,ar).values())return e.isEmpty();return!1},vS=function(e){for(const t of f(this,Xt))t.unselect();f(this,Xt).clear();for(const t of e)t.isEmpty()||(f(this,Xt).add(t),t.select());W(this,Me,hi).call(this,{hasSelectedEditor:this.hasSelection})},ie(fp,"TRANSLATE_SMALL",1),ie(fp,"TRANSLATE_BIG",10);let Qd=fp;var wr,Zo,mo,Fp,ea,Qi,Mp,ta,Fi,ol,Vh,na,Xu,So,fy,l_;const di=class di{constructor(e){z(this,So);z(this,wr,null);z(this,Zo,!1);z(this,mo,null);z(this,Fp,null);z(this,ea,null);z(this,Qi,null);z(this,Mp,!1);z(this,ta,null);z(this,Fi,null);z(this,ol,null);z(this,Vh,null);z(this,na,!1);U(this,Fi,e),U(this,na,e._uiManager.useNewAltTextFlow),f(di,Xu)||U(di,Xu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){di._l10n??(di._l10n=e)}async render(){const e=U(this,mo,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=U(this,Fp,document.createElement("span"));e.append(t),f(this,na)?(e.classList.add("new"),e.setAttribute("data-l10n-id",f(di,Xu).missing),t.setAttribute("data-l10n-id",f(di,Xu)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=f(this,Fi)._uiManager._signal;e.addEventListener("contextmenu",Js,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),f(this,Fi)._uiManager.editAltText(f(this,Fi)),f(this,na)&&f(this,Fi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,So,fy)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(U(this,Mp,!0),r(s))},{signal:n}),await W(this,So,l_).call(this),e}finish(){f(this,mo)&&(f(this,mo).focus({focusVisible:f(this,Mp)}),U(this,Mp,!1))}isEmpty(){return f(this,na)?f(this,wr)===null:!f(this,wr)&&!f(this,Zo)}hasData(){return f(this,na)?f(this,wr)!==null||!!f(this,ol):this.isEmpty()}get guessedText(){return f(this,ol)}async setGuessedText(e){f(this,wr)===null&&(U(this,ol,e),U(this,Vh,await di._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),W(this,So,l_).call(this))}toggleAltTextBadge(e=!1){var t;if(!f(this,na)||f(this,wr)){(t=f(this,ta))==null||t.remove(),U(this,ta,null);return}if(!f(this,ta)){const n=U(this,ta,document.createElement("div"));n.className="noAltTextBadge",f(this,Fi).div.append(n)}f(this,ta).classList.toggle("hidden",!e)}serialize(e){let t=f(this,wr);return!e&&f(this,ol)===t&&(t=f(this,Vh)),{altText:t,decorative:f(this,Zo),guessedText:f(this,ol),textWithDisclaimer:f(this,Vh)}}get data(){return{altText:f(this,wr),decorative:f(this,Zo)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(U(this,ol,n),U(this,Vh,r)),!(f(this,wr)===e&&f(this,Zo)===t)&&(s||(U(this,wr,e),U(this,Zo,t)),W(this,So,l_).call(this))}toggle(e=!1){f(this,mo)&&(!e&&f(this,Qi)&&(clearTimeout(f(this,Qi)),U(this,Qi,null)),f(this,mo).disabled=!e)}shown(){f(this,Fi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,So,fy)}})}destroy(){var e,t;(e=f(this,mo))==null||e.remove(),U(this,mo,null),U(this,Fp,null),U(this,ea,null),(t=f(this,ta))==null||t.remove(),U(this,ta,null)}};wr=new WeakMap,Zo=new WeakMap,mo=new WeakMap,Fp=new WeakMap,ea=new WeakMap,Qi=new WeakMap,Mp=new WeakMap,ta=new WeakMap,Fi=new WeakMap,ol=new WeakMap,Vh=new WeakMap,na=new WeakMap,Xu=new WeakMap,So=new WeakSet,fy=function(){return f(this,wr)&&"added"||f(this,wr)===null&&this.guessedText&&"review"||"missing"},l_=async function(){var r,s,o;const e=f(this,mo);if(!e)return;if(f(this,na)){if(e.classList.toggle("done",!!f(this,wr)),e.setAttribute("data-l10n-id",f(di,Xu)[f(this,So,fy)]),(r=f(this,Fp))==null||r.setAttribute("data-l10n-id",f(di,Xu)[`${f(this,So,fy)}-label`]),!f(this,wr)){(s=f(this,ea))==null||s.remove();return}}else{if(!f(this,wr)&&!f(this,Zo)){e.classList.remove("done"),(o=f(this,ea))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=f(this,ea);if(!t){U(this,ea,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${f(this,Fi).id}`;const a=100,u=f(this,Fi)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(f(this,Qi)),U(this,Qi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{U(this,Qi,setTimeout(()=>{U(this,Qi,null),f(this,ea).classList.add("show"),f(this,Fi)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:u}),e.addEventListener("mouseleave",()=>{var h;f(this,Qi)&&(clearTimeout(f(this,Qi)),U(this,Qi,null)),(h=f(this,ea))==null||h.classList.remove("show")},{signal:u})}f(this,Zo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=f(this,wr)),t.parentNode||e.append(t);const n=f(this,Fi).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},z(di,Xu,null),ie(di,"_l10n",null);let u1=di;var ra,Hh,go,_v,al,Bp,Qu;class Ow{constructor(e){z(this,ra,null);z(this,Hh,!1);z(this,go,null);z(this,_v,null);z(this,al,null);z(this,Bp,null);z(this,Qu,!1);U(this,go,e),this.toolbar=null}render(){if(!f(this,go)._uiManager.hasCommentManager())return null;const e=U(this,ra,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=f(this,go)._uiManager._signal;if(!(t instanceof AbortSignal)||t.aborted)return e;e.addEventListener("contextmenu",Js,{signal:t}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:t});const n=r=>{r.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(U(this,Hh,!0),n(r))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=f(this,go).getClientDimensions(),r={top:e};f(this,go)._uiManager.direction==="ltr"?r.right=n:r.left=t,f(this,go)._uiManager.editComment(f(this,go),r)}finish(){f(this,ra)&&(f(this,ra).focus({focusVisible:f(this,Hh)}),U(this,Hh,!1))}isDeleted(){return f(this,Qu)||f(this,al)===""}hasBeenEdited(){return this.isDeleted()||f(this,al)!==f(this,_v)}serialize(){return this.data}get data(){return{text:f(this,al),date:f(this,Bp),deleted:f(this,Qu)}}set data(e){if(e===null){U(this,al,""),U(this,Qu,!0);return}U(this,al,e),U(this,Bp,new Date),U(this,Qu,!1)}setInitialText(e){U(this,_v,e),this.data=e}toggle(e=!1){f(this,ra)&&(f(this,ra).disabled=!e)}shown(){}destroy(){var e;(e=f(this,ra))==null||e.remove(),U(this,ra,null),U(this,al,""),U(this,Bp,null),U(this,go,null),U(this,Hh,!1),U(this,Qu,!1)}}ra=new WeakMap,Hh=new WeakMap,go=new WeakMap,_v=new WeakMap,al=new WeakMap,Bp=new WeakMap,Qu=new WeakMap;var jp,zh,Av,bv,Ev,Cv,xv,ll,$h,ul,Wh,cl,Kc,Z5,e4,t4;const gD=class gD{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){z(this,Kc);z(this,jp);z(this,zh,!1);z(this,Av,null);z(this,bv);z(this,Ev);z(this,Cv);z(this,xv);z(this,ll,null);z(this,$h);z(this,ul,null);z(this,Wh);z(this,cl,null);U(this,jp,e),U(this,Av,n),U(this,bv,t),U(this,Ev,r),U(this,Cv,s),U(this,xv,o),U(this,Wh,new AbortController),U(this,$h,AbortSignal.any([a,f(this,Wh).signal])),e.addEventListener("touchstart",W(this,Kc,Z5).bind(this),{passive:!1,signal:f(this,$h)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Da.pixelRatio}destroy(){var e,t;(e=f(this,Wh))==null||e.abort(),U(this,Wh,null),(t=f(this,ll))==null||t.abort(),U(this,ll,null)}};jp=new WeakMap,zh=new WeakMap,Av=new WeakMap,bv=new WeakMap,Ev=new WeakMap,Cv=new WeakMap,xv=new WeakMap,ll=new WeakMap,$h=new WeakMap,ul=new WeakMap,Wh=new WeakMap,cl=new WeakMap,Kc=new WeakSet,Z5=function(e){var r,s,o;if((r=f(this,bv))!=null&&r.call(this))return;if(e.touches.length===1){if(f(this,ll))return;const a=U(this,ll,new AbortController),u=AbortSignal.any([f(this,$h),a.signal]),h=f(this,jp),d={capture:!0,signal:u,passive:!1},m=p=>{var g;p.pointerType==="touch"&&((g=f(this,ll))==null||g.abort(),U(this,ll,null))};h.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Jn(p),m(p))},d),h.addEventListener("pointerup",m,d),h.addEventListener("pointercancel",m,d);return}if(!f(this,cl)){U(this,cl,new AbortController);const a=AbortSignal.any([f(this,$h),f(this,cl).signal]),u=f(this,jp),h={signal:a,capture:!1,passive:!1};u.addEventListener("touchmove",W(this,Kc,e4).bind(this),h);const d=W(this,Kc,t4).bind(this);u.addEventListener("touchend",d,h),u.addEventListener("touchcancel",d,h),h.capture=!0,u.addEventListener("pointerdown",Jn,h),u.addEventListener("pointermove",Jn,h),u.addEventListener("pointercancel",Jn,h),u.addEventListener("pointerup",Jn,h),(s=f(this,Ev))==null||s.call(this)}if(Jn(e),e.touches.length!==2||(o=f(this,Av))!=null&&o.call(this)){U(this,ul,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),U(this,ul,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},e4=function(e){var S;if(!f(this,ul)||e.touches.length!==2)return;Jn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:s}=t,{screenX:o,screenY:a}=n,u=f(this,ul),{touch0X:h,touch0Y:d,touch1X:m,touch1Y:p}=u,g=m-h,w=p-d,_=o-r,A=a-s,v=Math.hypot(_,A)||1,E=Math.hypot(g,w)||1;if(!f(this,zh)&&Math.abs(E-v)<=gD.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=r,u.touch0Y=s,u.touch1X=o,u.touch1Y=a,!f(this,zh)){U(this,zh,!0);return}const I=[(r+o)/2,(s+a)/2];(S=f(this,Cv))==null||S.call(this,I,E,v)},t4=function(e){var t;e.touches.length>=2||(f(this,cl)&&(f(this,cl).abort(),U(this,cl,null),(t=f(this,xv))==null||t.call(this)),f(this,ul)&&(Jn(e),U(this,ul,null),U(this,zh,!1)))};let c1=gD;var Gh,yo,bn,Or,qp,Zu,Sv,Kh,Lr,Jh,hl,ec,Tv,Yh,Zi,Iv,Xh,dl,ia,Up,Vp,js,Qh,Dv,E1,ut,wS,kv,_S,u_,n4,r4,AS,c_,bS,i4,s4,o4,ES,a4,CS,l4,u4,c4,xS,py;const xt=class xt{constructor(e){z(this,ut);z(this,Gh,null);z(this,yo,null);z(this,bn,null);z(this,Or,null);z(this,qp,!1);z(this,Zu,null);z(this,Sv,"");z(this,Kh,!1);z(this,Lr,null);z(this,Jh,null);z(this,hl,null);z(this,ec,null);z(this,Tv,"");z(this,Yh,!1);z(this,Zi,null);z(this,Iv,!1);z(this,Xh,!1);z(this,dl,!1);z(this,ia,null);z(this,Up,0);z(this,Vp,0);z(this,js,null);z(this,Qh,null);ie(this,"isSelected",!1);ie(this,"_isCopy",!1);ie(this,"_editToolbar",null);ie(this,"_initialOptions",Object.create(null));ie(this,"_initialData",null);ie(this,"_isVisible",!0);ie(this,"_uiManager",null);ie(this,"_focusEventsAllowed",!0);z(this,Dv,!1);z(this,E1,xt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,o];const[a,u]=this.parentDimensions;this.x=e.x/a,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=xt.prototype._resizeWithKeyboard,t=Qd.TRANSLATE_SMALL,n=Qd.TRANSLATE_BIG;return Rt(this,"_resizerKeyboardManager",new n2([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],xt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ZQ({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(xt._l10n??(xt._l10n=e),xt._l10nResizer||(xt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),xt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);xt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){rn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,Dv)}set _isDraggable(e){var t;U(this,Dv,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,E1)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):W(this,ut,py).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(f(this,Yh)?U(this,Yh,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){W(this,ut,wS).call(this,this.parentDimensions,e,t)}translateInPage(e,t){f(this,Zi)||U(this,Zi,[this.x,this.y,this.width,this.height]),W(this,ut,wS).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){f(this,Zi)||U(this,Zi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[u,h]=this.getBaseTranslation();o+=u,a+=h;const{style:d}=n;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!f(this,Zi)&&(f(this,Zi)[0]!==this.x||f(this,Zi)[1]!==this.y)}get _hasBeenResized(){return!!f(this,Zi)&&(f(this,Zi)[2]!==this.width||f(this,Zi)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=xt,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:s,y:o,width:a,height:u}=this;if(a*=n,u*=r,s*=n,o*=r,this._mustFixPosition)switch(e){case 0:s=vi(s,0,n-a),o=vi(o,0,r-u);break;case 90:s=vi(s,0,n-u),o=vi(o,a,r);break;case 180:s=vi(s,a,n),o=vi(o,u,r);break;case 270:s=vi(s,u,n),o=vi(o,0,r-a);break}this.x=s/=n,this.y=o/=r;const[h,d]=this.getBaseTranslation();s+=h,o+=d,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return W(n=xt,kv,_S).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return W(n=xt,kv,_S).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/n).toFixed(2)}%`,f(this,Kh)||(s.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!f(this,Kh)&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!f(this,Kh)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=f(this,bn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||f(this,Xh))return this._editToolbar;this._editToolbar=new uS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=f(this,bn))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return f(this,bn)||(u1.initialize(xt._l10n),U(this,bn,new u1(this)),f(this,Gh)&&(f(this,bn).data=f(this,Gh),U(this,Gh,null))),f(this,bn)}get altTextData(){var e;return(e=f(this,bn))==null?void 0:e.data}set altTextData(e){f(this,bn)&&(f(this,bn).data=e)}get guessedAltText(){var e;return(e=f(this,bn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=f(this,bn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=f(this,bn))==null?void 0:t.serialize(e)}hasAltText(){return!!f(this,bn)&&!f(this,bn).isEmpty()}hasAltTextData(){var e;return((e=f(this,bn))==null?void 0:e.hasData())??!1}addCommentButton(){return f(this,Or)?f(this,Or):U(this,Or,new Ow(this))}get commentColor(){return null}get comment(){const e=f(this,Or);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){f(this,Or)||U(this,Or,new Ow(this)),f(this,Or).data=e}setCommentData(e){f(this,Or)||U(this,Or,new Ow(this)),f(this,Or).setInitialText(e)}get hasEditedComment(){var e;return(e=f(this,Or))==null?void 0:e.hasBeenEdited()}async editComment(){f(this,Or)||U(this,Or,new Ow(this)),f(this,Or).edit()}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,a=o+s+1,u=r-100,h=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,u,h,r]}}}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=f(this,qp)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),W(this,ut,CS).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),U5(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(f(this,Qh)||U(this,Qh,new c1({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:W(this,ut,i4).bind(this),onPinching:W(this,ut,s4).bind(this),onPinchEnd:W(this,ut,o4).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=$r.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(U(this,Yh,!0),this._isDraggable){W(this,ut,a4).call(this,e);return}W(this,ut,ES).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){f(this,ia)&&clearTimeout(f(this,ia)),U(this,ia,setTimeout(()=>{var e;U(this,ia,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,u]=this.pageTranslation,h=e/r,d=t/r,m=this.x*s,p=this.y*o,g=this.width*s,w=this.height*o;switch(n){case 0:return[m+h+a,o-p-d-w+u,m+h+g+a,o-p-d+u];case 90:return[m+d+a,o-p+h+u,m+d+w+a,o-p+h+g+u];case 180:return[m-h-g+a,o-p+d+u,m-h+a,o-p+d+w+u];case 270:return[m-d-w+a,o-p-h-g+u,m-d+a,o-p-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,o]=e,a=s-n,u=o-r;switch(this.rotation){case 0:return[n,t-o,a,u];case 90:return[n,t-r,u,a];case 180:return[s,t-r,a,u];case 270:return[s,t-o,u,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),U(this,Xh,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),U(this,Xh,!1),!0):!1}isInEditMode(){return f(this,Xh)}shouldGetKeyboardEvents(){return f(this,dl)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return t<o&&r>0&&e<s&&n>0}rebuild(){W(this,ut,CS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){rn("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});r.rotation=e.rotation,U(r,Gh,e.accessibilityData),r._isCopy=e.isCopy||!1;const[s,o]=r.pageDimensions,[a,u,h,d]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=u/o,r.width=h/s,r.height=d/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=f(this,ec))==null||e.abort(),U(this,ec,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,ia)&&(clearTimeout(f(this,ia)),U(this,ia,null)),W(this,ut,py).call(this),this.removeEditToolbar(),f(this,js)){for(const n of f(this,js).values())clearTimeout(n);U(this,js,null)}this.parent=null,(t=f(this,Qh))==null||t.destroy(),U(this,Qh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(W(this,ut,n4).call(this),f(this,Lr).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),U(this,hl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=f(this,Lr).children;if(!f(this,yo)){U(this,yo,Array.from(t));const o=W(this,ut,l4).bind(this),a=W(this,ut,u4).bind(this),u=this._uiManager._signal;for(const h of f(this,yo)){const d=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:u}),h.addEventListener("blur",a,{signal:u}),h.addEventListener("focus",W(this,ut,c4).bind(this,d),{signal:u}),h.setAttribute("data-l10n-id",xt._l10nResizer[d])}}const n=f(this,yo)[0];let r=0;for(const o of t){if(o===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(f(this,yo).length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)f(this,Lr).append(f(this,Lr).firstChild);else if(s>r)for(let a=0;a<s-r;a++)f(this,Lr).firstChild.before(f(this,Lr).lastChild);let o=0;for(const a of t){const h=f(this,yo)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",xt._l10nResizer[h])}}W(this,ut,xS).call(this,0),U(this,dl,!0),f(this,Lr).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){f(this,dl)&&W(this,ut,bS).call(this,f(this,Tv),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){W(this,ut,py).call(this),this.div.focus()}select(){var e,t,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=f(this,bn))==null||n.toggleAltTextBadge(!1)}}unselect(){var e,t,n,r,s;this.isSelected&&(this.isSelected=!1,(e=f(this,Lr))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=f(this,bn))==null||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return f(this,Iv)}set isEditing(e){U(this,Iv,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){U(this,Kh,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){f(this,js)||U(this,js,new Map);const{action:n}=e;let r=f(this,js).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),f(this,js).delete(n),f(this,js).size===0&&U(this,js,null)},xt._telemetryTimeout),f(this,js).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),U(this,qp,!1)}disable(){this.div&&(this.div.tabIndex=-1),U(this,qp,!0)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Gh=new WeakMap,yo=new WeakMap,bn=new WeakMap,Or=new WeakMap,qp=new WeakMap,Zu=new WeakMap,Sv=new WeakMap,Kh=new WeakMap,Lr=new WeakMap,Jh=new WeakMap,hl=new WeakMap,ec=new WeakMap,Tv=new WeakMap,Yh=new WeakMap,Zi=new WeakMap,Iv=new WeakMap,Xh=new WeakMap,dl=new WeakMap,ia=new WeakMap,Up=new WeakMap,Vp=new WeakMap,js=new WeakMap,Qh=new WeakMap,Dv=new WeakMap,E1=new WeakMap,ut=new WeakSet,wS=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},kv=new WeakSet,_S=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},u_=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},n4=function(){if(f(this,Lr))return;U(this,Lr,document.createElement("div")),f(this,Lr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");f(this,Lr).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",W(this,ut,r4).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Js,{signal:t}),r.tabIndex=-1}this.div.prepend(f(this,Lr))},r4=function(e,t){var d;t.preventDefault();const{isMac:n}=$r.platform;if(t.button!==0||t.ctrlKey&&n)return;(d=f(this,bn))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,U(this,Jh,[t.screenX,t.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",W(this,ut,bS).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Jn,{passive:!1,signal:o}),window.addEventListener("contextmenu",Js,{signal:o}),U(this,hl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var m;s.abort(),this.parent.togglePointerEvents(!0),(m=f(this,bn))==null||m.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=u,W(this,ut,c_).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},AS=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[s,o]=this.parentDimensions;this.setDims(s*n,o*r),this.fixAndSetPosition(),this._onResized()},c_=function(){if(!f(this,hl))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=f(this,hl);U(this,hl,null);const s=this.x,o=this.y,a=this.width,u=this.height;s===e&&o===t&&a===n&&u===r||this.addCommands({cmd:W(this,ut,AS).bind(this,s,o,a,u),undo:W(this,ut,AS).bind(this,e,t,n,r),mustExec:!0})},bS=function(e,t){const[n,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,u=this.height,h=xt.MIN_SIZE/n,d=xt.MIN_SIZE/r,m=W(this,ut,u_).call(this,this.rotation),p=(re,ee)=>[m[0]*re+m[2]*ee,m[1]*re+m[3]*ee],g=W(this,ut,u_).call(this,360-this.rotation),w=(re,ee)=>[g[0]*re+g[2]*ee,g[1]*re+g[3]*ee];let _,A,v=!1,E=!1;switch(e){case"topLeft":v=!0,_=(re,ee)=>[0,0],A=(re,ee)=>[re,ee];break;case"topMiddle":_=(re,ee)=>[re/2,0],A=(re,ee)=>[re/2,ee];break;case"topRight":v=!0,_=(re,ee)=>[re,0],A=(re,ee)=>[0,ee];break;case"middleRight":E=!0,_=(re,ee)=>[re,ee/2],A=(re,ee)=>[0,ee/2];break;case"bottomRight":v=!0,_=(re,ee)=>[re,ee],A=(re,ee)=>[0,0];break;case"bottomMiddle":_=(re,ee)=>[re/2,ee],A=(re,ee)=>[re/2,0];break;case"bottomLeft":v=!0,_=(re,ee)=>[0,ee],A=(re,ee)=>[re,0];break;case"middleLeft":E=!0,_=(re,ee)=>[0,ee/2],A=(re,ee)=>[re,ee/2];break}const I=_(a,u),S=A(a,u);let R=p(...S);const F=xt._round(s+R[0]),k=xt._round(o+R[1]);let T=1,D=1,P,N;if(t.fromKeyboard)({deltaX:P,deltaY:N}=t);else{const{screenX:re,screenY:ee}=t,[ue,Y]=f(this,Jh);[P,N]=this.screenToPageTranslation(re-ue,ee-Y),f(this,Jh)[0]=re,f(this,Jh)[1]=ee}if([P,N]=w(P/n,N/r),v){const re=Math.hypot(a,u);T=D=Math.max(Math.min(Math.hypot(S[0]-I[0]-P,S[1]-I[1]-N)/re,1/a,1/u),h/a,d/u)}else E?T=vi(Math.abs(S[0]-I[0]-P),h,1)/a:D=vi(Math.abs(S[1]-I[1]-N),d,1)/u;const L=xt._round(a*T),M=xt._round(u*D);R=p(...A(L,M));const $=F-R[0],Q=k-R[1];f(this,Zi)||U(this,Zi,[this.x,this.y,this.width,this.height]),this.width=L,this.height=M,this.x=$,this.y=Q,this.setDims(n*L,r*M),this.fixAndSetPosition(),this._onResizing()},i4=function(){var e;U(this,hl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=f(this,bn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},s4=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const o=W(this,ut,u_).call(this,this.rotation),a=(F,k)=>[o[0]*F+o[2]*k,o[1]*F+o[3]*k],[u,h]=this.parentDimensions,d=this.x,m=this.y,p=this.width,g=this.height,w=xt.MIN_SIZE/u,_=xt.MIN_SIZE/h;s=Math.max(Math.min(s,1/p,1/g),w/p,_/g);const A=xt._round(p*s),v=xt._round(g*s);if(A===p&&v===g)return;f(this,Zi)||U(this,Zi,[d,m,p,g]);const E=a(p/2,g/2),I=xt._round(d+E[0]),S=xt._round(m+E[1]),R=a(A/2,v/2);this.x=I-R[0],this.y=S-R[1],this.width=A,this.height=v,this.setDims(u*A,h*v),this.fixAndSetPosition(),this._onResizing()},o4=function(){var e;(e=f(this,bn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),W(this,ut,c_).call(this)},ES=function(e){const{isMac:t}=$r.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},a4=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:s},a=h=>{r.abort(),U(this,Zu,null),U(this,Yh,!1),this._uiManager.endDragSession()||W(this,ut,ES).call(this,h),n&&this._onStopDragging()};t&&(U(this,Up,e.clientX),U(this,Vp,e.clientY),U(this,Zu,e.pointerId),U(this,Sv,e.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._onStartDragging());const{clientX:d,clientY:m,pointerId:p}=h;if(p!==f(this,Zu)){Jn(h);return}const[g,w]=this.screenToPageTranslation(d-f(this,Up),m-f(this,Vp));U(this,Up,d),U(this,Vp,m),this._uiManager.dragSelectedEditors(g,w)},o),window.addEventListener("touchmove",Jn,o),window.addEventListener("pointerdown",h=>{h.pointerType===f(this,Sv)&&(f(this,Qh)||h.isPrimary)&&a(h),Jn(h)},o));const u=h=>{if(!f(this,Zu)||f(this,Zu)===h.pointerId){a(h);return}Jn(h)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},CS=function(){if(f(this,ec)||!this.div)return;U(this,ec,new AbortController);const e=this._uiManager.combinedSignal(f(this,ec));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},l4=function(e){xt._resizerKeyboardManager.exec(this,e)},u4=function(e){var t;f(this,dl)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==f(this,Lr)&&W(this,ut,py).call(this)},c4=function(e){U(this,Tv,f(this,dl)?e:"")},xS=function(e){if(f(this,yo))for(const t of f(this,yo))t.tabIndex=e},py=function(){U(this,dl,!1),W(this,ut,xS).call(this,-1),W(this,ut,c_).call(this)},z(xt,kv),ie(xt,"_l10n",null),ie(xt,"_l10nResizer",null),ie(xt,"_borderLineWidth",-1),ie(xt,"_colorManager",new dS),ie(xt,"_zIndex",1),ie(xt,"_telemetryTimeout",1e3);let cn=xt;class ZQ extends cn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const $L=3285377520,Ns=4294901760,Wo=65535;class h4{constructor(e){this.h1=e?e&4294967295:$L,this.h2=e?e&4294967295:$L}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let _=0,A=e.length;_<A;_++){const v=e.charCodeAt(_);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,u=0,h=this.h1,d=this.h2;const m=3432918353,p=461845907,g=m&Wo,w=p&Wo;for(let _=0;_<r;_++)_&1?(a=o[_],a=a*m&Ns|a*g&Wo,a=a<<15|a>>>17,a=a*p&Ns|a*w&Wo,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(u=o[_],u=u*m&Ns|u*g&Wo,u=u<<15|u>>>17,u=u*p&Ns|u*w&Wo,d^=u,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,s){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*m&Ns|a*g&Wo,a=a<<15|a>>>17,a=a*p&Ns|a*w&Wo,r&1?h^=a:d^=a}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ns|e*36045&Wo,t=t*4283543511&Ns|((t<<16|e>>>16)*2950163797&Ns)>>>16,e^=t>>>1,e=e*444984403&Ns|e*60499&Wo,t=t*3301882366&Ns|((t<<16|e>>>16)*3120437893&Ns)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const SS=Object.freeze({map:null,hash:"",transfer:void 0});var Zh,ed,Fr,C1,d4;class lD{constructor(){z(this,C1);z(this,Zh,!1);z(this,ed,null);z(this,Fr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=f(this,Fr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return f(this,Fr).get(e)}remove(e){if(f(this,Fr).delete(e),f(this,Fr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of f(this,Fr).values())if(t instanceof cn)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=f(this,Fr).get(e);let r=!1;if(n!==void 0)for(const[s,o]of Object.entries(t))n[s]!==o&&(r=!0,n[s]=o);else r=!0,f(this,Fr).set(e,t);r&&W(this,C1,d4).call(this),t instanceof cn&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return f(this,Fr).has(e)}get size(){return f(this,Fr).size}resetModified(){f(this,Zh)&&(U(this,Zh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new f4(this)}get serializable(){if(f(this,Fr).size===0)return SS;const e=new Map,t=new h4,n=[],r=Object.create(null);let s=!1;for(const[o,a]of f(this,Fr)){const u=a instanceof cn?a.serialize(!1,r):a;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),s||(s=!!u.bitmap))}if(s)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:SS}get editorStats(){let e=null;const t=new Map;for(const n of f(this,Fr).values()){if(!(n instanceof cn))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,u]of Object.entries(r)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const d=h.get(u)??0;h.set(u,d+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){U(this,ed,null)}get modifiedIds(){if(f(this,ed))return f(this,ed);const e=[];for(const t of f(this,Fr).values())!(t instanceof cn)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return U(this,ed,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return f(this,Fr).entries()}}Zh=new WeakMap,ed=new WeakMap,Fr=new WeakMap,C1=new WeakSet,d4=function(){f(this,Zh)||(U(this,Zh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Rv;class f4 extends lD{constructor(t){super();z(this,Rv);const{map:n,hash:r,transfer:s}=t.serializable,o=structuredClone(n,s?{transfer:s}:null);U(this,Rv,{map:o,hash:r,transfer:s})}get print(){rn("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,Rv)}get modifiedIds(){return Rt(this,"modifiedIds",{ids:new Set,hash:""})}}Rv=new WeakMap;var Hp;class eZ{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){z(this,Hp,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),f(this,Hp).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||f(this,Hp).has(e.loadedName))){if(Xn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:o}=e,a=new FontFace(r,s,o);this.addNativeFontFace(a);try{await a.load(),f(this,Hp).add(r),n==null||n(e)}catch{Et(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}rn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Et(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Rt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Rt(this,"isSyncFontLoadingSupported",yi||$r.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xn(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Rt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(S,R){return S.charCodeAt(R)<<24|S.charCodeAt(R+1)<<16|S.charCodeAt(R+2)<<8|S.charCodeAt(R+3)&255}function r(S,R,F,k){const T=S.substring(0,R),D=S.substring(R+F);return T+k+D}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const u=a.getContext("2d");let h=0;function d(S,R){if(++h>30){Et("Load test font never loaded."),R();return}if(u.font="30px "+S,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(d.bind(null,S,R))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,m.length,m);const w=16,_=1482184792;let A=n(p,w);for(s=0,o=m.length-3;s<o;s+=4)A=A-_+n(m,s)|0;s<m.length&&(A=A-_+n(m+"XXX",s)|0),p=r(p,w,4,BQ(A));const v=`url(data:font/opentype;base64,${btoa(p)});`,E=`@font-face {font-family:"${m}";src:${v}}`;this.insertRule(E);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const S of[e.loadedName,m]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=S,I.append(R)}this._document.body.append(I),d(m,()=>{I.remove(),t.complete()})}}Hp=new WeakMap;class tZ{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${L5(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(o){Et(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}}function nZ(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(yi)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function rZ(i){if(yi&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Z0(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Lw(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const TS=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,iZ=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",sZ=HQ.bind(null,TS,iZ);var fl,x1;class oZ{constructor(){z(this,fl,new Map);z(this,x1,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};f(this,x1).then(()=>{for(const[r]of f(this,fl))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){Et("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}f(this,fl).set(t,r)}removeEventListener(e,t){const n=f(this,fl).get(t);n==null||n(),f(this,fl).delete(t)}terminate(){for(const[,e]of f(this,fl))e==null||e();f(this,fl).clear()}}fl=new WeakMap,x1=new WeakMap;const Fw={DATA:1,ERROR:2},Wn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function WL(){}function Oi(i){if(i instanceof Wc||i instanceof oS||i instanceof VL||i instanceof a1||i instanceof yx)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||rn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Wc(i.message);case"InvalidPDFException":return new oS(i.message);case"PasswordException":return new VL(i.message,i.code);case"ResponseException":return new a1(i.message,i.status,i.missing);case"UnknownErrorException":return new yx(i.message,i.details)}return new yx(i.message,i.toString())}var zp,Ks,p4,m4,g4,h_;class my{constructor(e,t,n){z(this,Ks);z(this,zp,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",W(this,Ks,p4).bind(this),{signal:f(this,zp).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:h.desiredSize},r),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,u.postMessage({sourceName:o,targetName:a,stream:Wn.PULL,streamId:s,desiredSize:h.desiredSize}),d.promise},cancel:h=>{Xn(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,u.postMessage({sourceName:o,targetName:a,stream:Wn.CANCEL,streamId:s,reason:Oi(h)}),d.promise}},n)}destroy(){var e;(e=f(this,zp))==null||e.abort(),U(this,zp,null)}}zp=new WeakMap,Ks=new WeakSet,p4=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){W(this,Ks,g4).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Fw.DATA)r.resolve(e.data);else if(e.callback===Fw.ERROR)r.reject(Oi(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(o){s.postMessage({sourceName:n,targetName:r,callback:Fw.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:n,targetName:r,callback:Fw.ERROR,callbackId:e.callbackId,reason:Oi(o)})});return}if(e.streamId){W(this,Ks,m4).call(this,e);return}t(e.data)},m4=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],u={enqueue(h,d=1,m){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:Wn.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:Wn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){Xn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:Wn.ERROR,streamId:t,reason:Oi(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(a,e.data,u).then(function(){s.postMessage({sourceName:n,targetName:r,stream:Wn.START_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:Wn.START_COMPLETE,streamId:t,reason:Oi(h)})})},g4=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Wn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Oi(e.reason));break;case Wn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Oi(e.reason));break;case Wn.PULL:if(!a){s.postMessage({sourceName:n,targetName:r,stream:Wn.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||WL).then(function(){s.postMessage({sourceName:n,targetName:r,stream:Wn.PULL_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:Wn.PULL_COMPLETE,streamId:t,reason:Oi(h)})});break;case Wn.ENQUEUE:if(Xn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Wn.CLOSE:if(Xn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),W(this,Ks,h_).call(this,o,t);break;case Wn.ERROR:Xn(o,"error should have stream controller"),o.controller.error(Oi(e.reason)),W(this,Ks,h_).call(this,o,t);break;case Wn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Oi(e.reason)),W(this,Ks,h_).call(this,o,t);break;case Wn.CANCEL:if(!a)break;const u=Oi(e.reason);Promise.try(a.onCancel||WL,u).then(function(){s.postMessage({sourceName:n,targetName:r,stream:Wn.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:Wn.CANCEL_COMPLETE,streamId:t,reason:Oi(h)})}),a.sinkCapability.reject(u),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},h_=async function(e,t){var n,r,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Pv;class y4{constructor({enableHWA:e=!1}){z(this,Pv,!1);U(this,Pv,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!f(this,Pv)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){rn("Abstract method `_createCanvas` called.")}}Pv=new WeakMap;class aZ extends y4{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class v4{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){rn("Abstract method `_fetch` called.")}}class GL extends v4{async _fetch(e){const t=await e2(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Z0(t)}}class w4{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}var td,$p,pl,ml,ei,nd,rd,Ve,Qr,gy,ip,d_,sp,_4,IS,op,yy,vy,DS,wy;class lZ extends w4{constructor({docId:t,ownerDocument:n=globalThis.document}){super();z(this,Ve);z(this,td);z(this,$p);z(this,pl);z(this,ml);z(this,ei);z(this,nd);z(this,rd,0);U(this,ml,t),U(this,ei,n)}addFilter(t){if(!t)return"none";let n=f(this,Ve,Qr).get(t);if(n)return n;const[r,s,o]=W(this,Ve,d_).call(this,t),a=t.length===1?r:`${r}${s}${o}`;if(n=f(this,Ve,Qr).get(a),n)return f(this,Ve,Qr).set(t,n),n;const u=`g_${f(this,ml)}_transfer_map_${ir(this,rd)._++}`,h=W(this,Ve,sp).call(this,u);f(this,Ve,Qr).set(t,h),f(this,Ve,Qr).set(a,h);const d=W(this,Ve,op).call(this,u);return W(this,Ve,vy).call(this,r,s,o,d),h}addHCMFilter(t,n){var w;const r=`${t}-${n}`,s="base";let o=f(this,Ve,gy).get(s);if((o==null?void 0:o.key)===r||(o?((w=o.filter)==null||w.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},f(this,Ve,gy).set(s,o)),!t||!n))return o.url;const a=W(this,Ve,wy).call(this,t);t=Ke.makeHexColor(...a);const u=W(this,Ve,wy).call(this,n);if(n=Ke.makeHexColor(...u),f(this,Ve,ip).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const h=new Array(256);for(let _=0;_<=255;_++){const A=_/255;h[_]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=h.join(","),m=`g_${f(this,ml)}_hcm_filter`,p=o.filter=W(this,Ve,op).call(this,m);W(this,Ve,vy).call(this,d,d,d,p),W(this,Ve,IS).call(this,p);const g=(_,A)=>{const v=a[_]/255,E=u[_]/255,I=new Array(A+1);for(let S=0;S<=A;S++)I[S]=v+S/A*(E-v);return I.join(",")};return W(this,Ve,vy).call(this,g(0,5),g(1,5),g(2,5),p),o.url=W(this,Ve,sp).call(this,m),o.url}addAlphaFilter(t){let n=f(this,Ve,Qr).get(t);if(n)return n;const[r]=W(this,Ve,d_).call(this,[t]),s=`alpha_${r}`;if(n=f(this,Ve,Qr).get(s),n)return f(this,Ve,Qr).set(t,n),n;const o=`g_${f(this,ml)}_alpha_map_${ir(this,rd)._++}`,a=W(this,Ve,sp).call(this,o);f(this,Ve,Qr).set(t,a),f(this,Ve,Qr).set(s,a);const u=W(this,Ve,op).call(this,o);return W(this,Ve,DS).call(this,r,u),a}addLuminosityFilter(t){let n=f(this,Ve,Qr).get(t||"luminosity");if(n)return n;let r,s;if(t?([r]=W(this,Ve,d_).call(this,[t]),s=`luminosity_${r}`):s="luminosity",n=f(this,Ve,Qr).get(s),n)return f(this,Ve,Qr).set(t,n),n;const o=`g_${f(this,ml)}_luminosity_map_${ir(this,rd)._++}`,a=W(this,Ve,sp).call(this,o);f(this,Ve,Qr).set(t,a),f(this,Ve,Qr).set(s,a);const u=W(this,Ve,op).call(this,o);return W(this,Ve,_4).call(this,u),t&&W(this,Ve,DS).call(this,r,u),a}addHighlightHCMFilter(t,n,r,s,o){var E;const a=`${n}-${r}-${s}-${o}`;let u=f(this,Ve,gy).get(t);if((u==null?void 0:u.key)===a||(u?((E=u.filter)==null||E.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},f(this,Ve,gy).set(t,u)),!n||!r))return u.url;const[h,d]=[n,r].map(W(this,Ve,wy).bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,w]=[s,o].map(W(this,Ve,wy).bind(this));p<m&&([m,p,g,w]=[p,m,w,g]),f(this,Ve,ip).style.color="";const _=(I,S,R)=>{const F=new Array(256),k=(p-m)/R,T=I/255,D=(S-I)/(255*R);let P=0;for(let N=0;N<=R;N++){const L=Math.round(m+N*k),M=T+N*D;for(let $=P;$<=L;$++)F[$]=M;P=L+1}for(let N=P;N<256;N++)F[N]=F[P-1];return F.join(",")},A=`g_${f(this,ml)}_hcm_${t}_filter`,v=u.filter=W(this,Ve,op).call(this,A);return W(this,Ve,IS).call(this,v),W(this,Ve,vy).call(this,_(g[0],w[0],5),_(g[1],w[1],5),_(g[2],w[2],5),v),u.url=W(this,Ve,sp).call(this,A),u.url}destroy(t=!1){var n,r,s,o;t&&((n=f(this,nd))!=null&&n.size)||((r=f(this,pl))==null||r.parentNode.parentNode.remove(),U(this,pl,null),(s=f(this,$p))==null||s.clear(),U(this,$p,null),(o=f(this,nd))==null||o.clear(),U(this,nd,null),U(this,rd,0))}}td=new WeakMap,$p=new WeakMap,pl=new WeakMap,ml=new WeakMap,ei=new WeakMap,nd=new WeakMap,rd=new WeakMap,Ve=new WeakSet,Qr=function(){return f(this,$p)||U(this,$p,new Map)},gy=function(){return f(this,nd)||U(this,nd,new Map)},ip=function(){if(!f(this,pl)){const t=f(this,ei).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=f(this,ei).createElementNS(Ja,"svg");r.setAttribute("width",0),r.setAttribute("height",0),U(this,pl,f(this,ei).createElementNS(Ja,"defs")),t.append(r),r.append(f(this,pl)),f(this,ei).body.append(t)}return f(this,pl)},d_=function(t){if(t.length===1){const h=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=h[p]/255;const m=d.join(",");return[m,m,m]}const[n,r,s]=t,o=new Array(256),a=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=n[h]/255,a[h]=r[h]/255,u[h]=s[h]/255;return[o.join(","),a.join(","),u.join(",")]},sp=function(t){if(f(this,td)===void 0){U(this,td,"");const n=f(this,ei).URL;n!==f(this,ei).baseURI&&(NA(n)?Et('#createUrl: ignore "data:"-URL for performance reasons.'):U(this,td,P5(n,"")))}return`url(${f(this,td)}#${t})`},_4=function(t){const n=f(this,ei).createElementNS(Ja,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},IS=function(t){const n=f(this,ei).createElementNS(Ja,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},op=function(t){const n=f(this,ei).createElementNS(Ja,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),f(this,Ve,ip).append(n),n},yy=function(t,n,r){const s=f(this,ei).createElementNS(Ja,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},vy=function(t,n,r,s){const o=f(this,ei).createElementNS(Ja,"feComponentTransfer");s.append(o),W(this,Ve,yy).call(this,o,"feFuncR",t),W(this,Ve,yy).call(this,o,"feFuncG",n),W(this,Ve,yy).call(this,o,"feFuncB",r)},DS=function(t,n){const r=f(this,ei).createElementNS(Ja,"feComponentTransfer");n.append(r),W(this,Ve,yy).call(this,r,"feFuncA",t)},wy=function(t){return f(this,Ve,ip).style.color=t,OA(getComputedStyle(f(this,Ve,ip)).getPropertyValue("color"))};class A4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){rn("Abstract method `_fetch` called.")}}class KL extends A4{async _fetch(e){const t=await e2(e,"arraybuffer");return new Uint8Array(t)}}class b4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){rn("Abstract method `_fetch` called.")}}class JL extends b4{async _fetch(e){const t=await e2(e,"arraybuffer");return new Uint8Array(t)}}yi&&Et("Please use the `legacy` build in Node.js environments.");async function uD(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class uZ extends w4{}class cZ extends y4{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class hZ extends v4{async _fetch(e){return uD(e)}}class dZ extends A4{async _fetch(e){return uD(e)}}class fZ extends b4{async _fetch(e){return uD(e)}}const Qf="__forcedDependency";var es,fi,Wp,sa,Gp,gl,Qt,en,yl,ts,tc,Kp,nc,rc;class pZ{constructor(e){z(this,es,{__proto__:null});z(this,fi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Qf]:[]});z(this,Wp,new Map);z(this,sa,[]);z(this,Gp,[]);z(this,gl,[[1,0,0,1,0,0]]);z(this,Qt,[-1/0,-1/0,1/0,1/0]);z(this,en,new Float64Array([1/0,1/0,-1/0,-1/0]));z(this,yl,-1);z(this,ts,new Set);z(this,tc,new Map);z(this,Kp,new Map);z(this,nc);z(this,rc);U(this,nc,e.width),U(this,rc,e.height)}save(e){return U(this,es,{__proto__:f(this,es)}),U(this,fi,{__proto__:f(this,fi),transform:{__proto__:f(this,fi).transform},moveText:{__proto__:f(this,fi).moveText},sameLineText:{__proto__:f(this,fi).sameLineText},[Qf]:{__proto__:f(this,fi)[Qf]}}),U(this,Qt,{__proto__:f(this,Qt)}),f(this,sa).push([e,null]),this}restore(e){const t=Object.getPrototypeOf(f(this,es));if(t===null)return this;U(this,es,t),U(this,fi,Object.getPrototypeOf(f(this,fi))),U(this,Qt,Object.getPrototypeOf(f(this,Qt)));const n=f(this,sa).pop();return n!==void 0&&(n[1]=e),this}recordOpenMarker(e){return f(this,sa).push([e,null]),this}getOpenMarker(){return f(this,sa).length===0?null:f(this,sa).at(-1)[0]}recordCloseMarker(e){const t=f(this,sa).pop();return t!==void 0&&(t[1]=e),this}beginMarkedContent(e){return f(this,Gp).push([e,null]),this}endMarkedContent(e){const t=f(this,Gp).pop();return t!==void 0&&(t[1]=e),this}pushBaseTransform(e){return f(this,gl).push(Ke.multiplyByDOMMatrix(f(this,gl).at(-1),e.getTransform())),this}popBaseTransform(){return f(this,gl).length>1&&f(this,gl).pop(),this}recordSimpleData(e,t){return f(this,es)[e]=t,this}recordIncrementalData(e,t){return f(this,fi)[e].push(t),this}resetIncrementalData(e,t){return f(this,fi)[e].length=0,this}recordNamedData(e,t){return f(this,Wp).set(e,t),this}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Qf,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in f(this,es)&&this.recordFutureForcedDependency(t,f(this,es)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of f(this,ts))this.recordFutureForcedDependency(Qf,e);return this}resetBBox(e){return U(this,yl,e),f(this,en)[0]=1/0,f(this,en)[1]=1/0,f(this,en)[2]=-1/0,f(this,en)[3]=-1/0,this}get hasPendingBBox(){return f(this,yl)!==-1}recordClipBox(e,t,n,r,s,o){const a=Ke.multiplyByDOMMatrix(f(this,gl).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];Ke.axialAlignedBoundingBox([n,s,r,o],a,u);const h=Ke.intersect(f(this,Qt),u);return h?(f(this,Qt)[0]=h[0],f(this,Qt)[1]=h[1],f(this,Qt)[2]=h[2],f(this,Qt)[3]=h[3]):(f(this,Qt)[0]=f(this,Qt)[1]=1/0,f(this,Qt)[2]=f(this,Qt)[3]=-1/0),this}recordBBox(e,t,n,r,s,o){const a=f(this,Qt);if(a[0]===1/0)return this;const u=Ke.multiplyByDOMMatrix(f(this,gl).at(-1),t.getTransform());if(a[0]===-1/0)return Ke.axialAlignedBoundingBox([n,s,r,o],u,f(this,en)),this;const h=[1/0,1/0,-1/0,-1/0];return Ke.axialAlignedBoundingBox([n,s,r,o],u,h),f(this,en)[0]=Math.min(f(this,en)[0],Math.max(h[0],a[0])),f(this,en)[1]=Math.min(f(this,en)[1],Math.max(h[1],a[1])),f(this,en)[2]=Math.max(f(this,en)[2],Math.min(h[2],a[2])),f(this,en)[3]=Math.max(f(this,en)[3],Math.min(h[3],a[3])),this}recordCharacterBBox(e,t,n,r=1,s=0,o=0,a){const u=n.bbox;let h,d;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&f(this,Kp).get(n),h!==!1&&(d=[0,0,0,0],Ke.axialAlignedBoundingBox(u,n.fontMatrix,d),(r!==1||s!==0||o!==0)&&Ke.scaleMinMax([r,0,0,-r,s,o],d),h)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const m=a();return u&&d&&h===void 0&&(h=d[0]<=s-m.actualBoundingBoxLeft&&d[2]>=s+m.actualBoundingBoxRight&&d[1]<=o-m.actualBoundingBoxAscent&&d[3]>=o+m.actualBoundingBoxDescent,f(this,Kp).set(n,h),h)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,s-m.actualBoundingBoxLeft,s+m.actualBoundingBoxRight,o-m.actualBoundingBoxAscent,o+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return f(this,en)[0]=Math.max(0,f(this,Qt)[0]),f(this,en)[1]=Math.max(0,f(this,Qt)[1]),f(this,en)[2]=Math.min(f(this,nc),f(this,Qt)[2]),f(this,en)[3]=Math.min(f(this,rc),f(this,Qt)[3]),this}getSimpleIndex(e){return f(this,es)[e]}recordDependencies(e,t){const n=f(this,ts),r=f(this,es),s=f(this,fi);for(const o of t)o in f(this,es)?n.add(r[o]):o in s&&s[o].forEach(n.add,n);return this}copyDependenciesFromIncrementalOperation(e,t){const n=f(this,tc),r=f(this,ts);for(const s of f(this,fi)[t])n.get(s).dependencies.forEach(r.add,r.add(s));return this}recordNamedDependency(e,t){return f(this,Wp).has(t)&&f(this,ts).add(f(this,Wp).get(t)),this}recordOperation(e,t=!1){this.recordDependencies(e,[Qf]);const n=new Set(f(this,ts)),r=f(this,sa).concat(f(this,Gp)),s=f(this,yl)===e?{minX:f(this,en)[0],minY:f(this,en)[1],maxX:f(this,en)[2],maxY:f(this,en)[3]}:null;return f(this,tc).set(e,{bbox:s,pairs:r,dependencies:n}),t||U(this,yl,-1),f(this,ts).clear(),this}bboxToClipBoxDropOperation(e){return f(this,yl)!==-1&&(U(this,yl,-1),f(this,Qt)[0]=Math.max(f(this,Qt)[0],f(this,en)[0]),f(this,Qt)[1]=Math.max(f(this,Qt)[1],f(this,en)[1]),f(this,Qt)[2]=Math.min(f(this,Qt)[2],f(this,en)[2]),f(this,Qt)[3]=Math.min(f(this,Qt)[3],f(this,en)[3])),f(this,ts).clear(),this}_takePendingDependencies(){const e=f(this,ts);return U(this,ts,new Set),e}_extractOperation(e){const t=f(this,tc).get(e);return f(this,tc).delete(e),t}_pushPendingDependencies(e){for(const t of e)f(this,ts).add(t)}take(){return f(this,Kp).clear(),Array.from(f(this,tc),([e,{bbox:t,pairs:n,dependencies:r}])=>(n.forEach(s=>s.forEach(r.add,r)),r.delete(e),{minX:((t==null?void 0:t.minX)??0)/f(this,nc),maxX:((t==null?void 0:t.maxX)??f(this,nc))/f(this,nc),minY:((t==null?void 0:t.minY)??0)/f(this,rc),maxY:((t==null?void 0:t.maxY)??f(this,rc))/f(this,rc),dependencies:Array.from(r).sort((s,o)=>s-o),idx:e}))}}es=new WeakMap,fi=new WeakMap,Wp=new WeakMap,sa=new WeakMap,Gp=new WeakMap,gl=new WeakMap,Qt=new WeakMap,en=new WeakMap,yl=new WeakMap,ts=new WeakMap,tc=new WeakMap,Kp=new WeakMap,nc=new WeakMap,rc=new WeakMap;var Kt,Dn,Jp,ic,Yp;const yD=class yD{constructor(e,t){z(this,Kt);z(this,Dn);z(this,Jp,0);z(this,ic);z(this,Yp,0);if(e instanceof yD)return e;U(this,Kt,e),U(this,ic,e._takePendingDependencies()),U(this,Dn,t)}save(e){return ir(this,Yp)._++,f(this,Kt).save(f(this,Dn)),this}restore(e){return f(this,Yp)>0&&(f(this,Kt).restore(f(this,Dn)),ir(this,Yp)._--),this}recordOpenMarker(e){return ir(this,Jp)._++,this}getOpenMarker(){return f(this,Jp)>0?f(this,Dn):f(this,Kt).getOpenMarker()}recordCloseMarker(e){return ir(this,Jp)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return f(this,Kt).pushBaseTransform(e),this}popBaseTransform(){return f(this,Kt).popBaseTransform(),this}recordSimpleData(e,t){return f(this,Kt).recordSimpleData(e,f(this,Dn)),this}recordIncrementalData(e,t){return f(this,Kt).recordIncrementalData(e,f(this,Dn)),this}resetIncrementalData(e,t){return f(this,Kt).resetIncrementalData(e,f(this,Dn)),this}recordNamedData(e,t){return this}recordFutureForcedDependency(e,t){return f(this,Kt).recordFutureForcedDependency(e,f(this,Dn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return f(this,Kt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return f(this,Kt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return f(this,Kt).hasPendingBBox||f(this,Kt).resetBBox(f(this,Dn)),this}get hasPendingBBox(){return f(this,Kt).hasPendingBBox}recordClipBox(e,t,n,r,s,o){return f(this,Kt).recordClipBox(f(this,Dn),t,n,r,s,o),this}recordBBox(e,t,n,r,s,o){return f(this,Kt).recordBBox(f(this,Dn),t,n,r,s,o),this}recordCharacterBBox(e,t,n,r,s,o,a){return f(this,Kt).recordCharacterBBox(f(this,Dn),t,n,r,s,o,a),this}recordFullPageBBox(e){return f(this,Kt).recordFullPageBBox(f(this,Dn)),this}getSimpleIndex(e){return f(this,Kt).getSimpleIndex(e)}recordDependencies(e,t){return f(this,Kt).recordDependencies(f(this,Dn),t),this}copyDependenciesFromIncrementalOperation(e,t){return f(this,Kt).copyDependenciesFromIncrementalOperation(f(this,Dn),t),this}recordNamedDependency(e,t){return f(this,Kt).recordNamedDependency(f(this,Dn),t),this}recordOperation(e){f(this,Kt).recordOperation(f(this,Dn),!0);const t=f(this,Kt)._extractOperation(f(this,Dn));for(const n of t.dependencies)f(this,ic).add(n);return f(this,ic).delete(f(this,Dn)),f(this,ic).delete(null),this}bboxToClipBoxDropOperation(e){return f(this,Kt).bboxToClipBoxDropOperation(f(this,Dn)),this}recordNestedDependencies(){f(this,Kt)._pushPendingDependencies(f(this,ic))}take(){throw new Error("Unreachable")}};Kt=new WeakMap,Dn=new WeakMap,Jp=new WeakMap,ic=new WeakMap,Yp=new WeakMap;let h1=yD;const Os={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},qr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function kS(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class cD{isModifyingCurrentTransform(){return!1}getPattern(){rn("Abstract method `getPattern` called.")}}class mZ extends cD{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===qr.STROKE||r===qr.FILL){const o=t.current.getClippedPathBoundingBox(r,kn(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",a,u),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),n=Ke.transform(n,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),kS(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);s.setTransform(m)}else kS(e,this._bbox),s=this._createGradient(e);return s}}function _x(i,e,t,n,r,s,o,a){const u=e.coords,h=e.colors,d=i.data,m=i.width*4;let p;u[t+1]>u[n+1]&&(p=t,t=n,n=p,p=s,s=o,o=p),u[n+1]>u[r+1]&&(p=n,n=r,r=p,p=o,o=a,a=p),u[t+1]>u[n+1]&&(p=t,t=n,n=p,p=s,s=o,o=p);const g=(u[t]+e.offsetX)*e.scaleX,w=(u[t+1]+e.offsetY)*e.scaleY,_=(u[n]+e.offsetX)*e.scaleX,A=(u[n+1]+e.offsetY)*e.scaleY,v=(u[r]+e.offsetX)*e.scaleX,E=(u[r+1]+e.offsetY)*e.scaleY;if(w>=E)return;const I=h[s],S=h[s+1],R=h[s+2],F=h[o],k=h[o+1],T=h[o+2],D=h[a],P=h[a+1],N=h[a+2],L=Math.round(w),M=Math.round(E);let $,Q,re,ee,ue,Y,J,q;for(let H=L;H<=M;H++){if(H<A){const ne=H<w?0:(w-H)/(w-A);$=g-(g-_)*ne,Q=I-(I-F)*ne,re=S-(S-k)*ne,ee=R-(R-T)*ne}else{let ne;H>E?ne=1:A===E?ne=0:ne=(A-H)/(A-E),$=_-(_-v)*ne,Q=F-(F-D)*ne,re=k-(k-P)*ne,ee=T-(T-N)*ne}let G;H<w?G=0:H>E?G=1:G=(w-H)/(w-E),ue=g-(g-v)*G,Y=I-(I-D)*G,J=S-(S-P)*G,q=R-(R-N)*G;const le=Math.round(Math.min($,ue)),se=Math.round(Math.max($,ue));let X=m*H+le*4;for(let ne=le;ne<=se;ne++)G=($-ne)/($-ue),G<0?G=0:G>1&&(G=1),d[X++]=Q-(Q-Y)*G|0,d[X++]=re-(re-J)*G|0,d[X++]=ee-(ee-q)*G|0,d[X++]=255}}function gZ(i,e,t){const n=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,u=Math.floor(n.length/a)-1,h=a-1;for(s=0;s<u;s++){let d=s*a;for(let m=0;m<h;m++,d++)_x(i,t,n[d],n[d+1],n[d+a],r[d],r[d+1],r[d+a]),_x(i,t,n[d+a+1],n[d+1],n[d+a],r[d+a+1],r[d+1],r[d+a])}break;case"triangles":for(s=0,o=n.length;s<o;s+=3)_x(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class yZ extends cD{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-u,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),g=h/m,w=d/p,_={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-u,scaleX:1/g,scaleY:1/w},A=m+2*2,v=p+2*2,E=n.getCanvas("mesh",A,v),I=E.context,S=I.createImageData(m,p);if(t){const F=S.data;for(let k=0,T=F.length;k<T;k+=4)F[k]=t[0],F[k+1]=t[1],F[k+2]=t[2],F[k+3]=255}for(const F of this._figures)gZ(S,F,_);return I.putImageData(S,2,2),{canvas:E.canvas,offsetX:a-2*g,offsetY:u-2*w,scaleX:g,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){kS(e,this._bbox);const s=new Float32Array(2);if(r===qr.SHADING)Ke.singularValueDecompose2dScale(kn(e),s);else if(this.matrix){Ke.singularValueDecompose2dScale(this.matrix,s);const[a,u]=s;Ke.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=a,s[1]*=u}else Ke.singularValueDecompose2dScale(t.baseTransform,s);const o=this._createMeshCanvas(s,r===qr.SHADING?null:this._background,t.cachedCanvases);return r!==qr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class vZ extends cD{getPattern(){return"hotpink"}}function wZ(i){switch(i[0]){case"RadialAxial":return new mZ(i);case"Mesh":return new yZ(i);case"Dummy":return new vZ}throw new Error(`Unknown IR type: ${i[0]}`)}const YL={COLORED:1,UNCOLORED:2},S1=class S1{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e){var ue,Y,J,q;const{bbox:t,operatorList:n,paintType:r,tilingType:s,color:o,canvasGraphicsFactory:a}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),PA("TilingType: "+s);const d=t[0],m=t[1],p=t[2],g=t[3],w=p-d,_=g-m,A=new Float32Array(2);Ke.singularValueDecompose2dScale(this.matrix,A);const[v,E]=A;Ke.singularValueDecompose2dScale(this.baseTransform,A);const I=v*A[0],S=E*A[1];let R=w,F=_,k=!1,T=!1;const D=Math.ceil(u*I),P=Math.ceil(h*S),N=Math.ceil(w*I),L=Math.ceil(_*S);D>=N?R=u:k=!0,P>=L?F=h:T=!0;const M=this.getSizeAndScale(R,this.ctx.canvas.width,I),$=this.getSizeAndScale(F,this.ctx.canvas.height,S),Q=e.cachedCanvases.getCanvas("pattern",M.size,$.size),re=Q.context,ee=a.createCanvasGraphics(re);if(ee.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ee,r,o),re.translate(-M.scale*d,-$.scale*m),ee.transform(0,M.scale,0,0,$.scale,0,0),re.save(),(ue=ee.dependencyTracker)==null||ue.save(),this.clipBbox(ee,d,m,p,g),ee.baseTransform=kn(ee.ctx),ee.executeOperatorList(n),ee.endDrawing(),(q=(Y=ee.dependencyTracker)==null?void 0:(J=Y.restore()).recordNestedDependencies)==null||q.call(J),re.restore(),k||T){const H=Q.canvas;k&&(R=u),T&&(F=h);const G=this.getSizeAndScale(R,this.ctx.canvas.width,I),le=this.getSizeAndScale(F,this.ctx.canvas.height,S),se=G.size,X=le.size,ne=e.cachedCanvases.getCanvas("pattern-workaround",se,X),te=ne.context,ae=k?Math.floor(w/u):0,de=T?Math.floor(_/h):0;for(let ye=0;ye<=ae;ye++)for(let xe=0;xe<=de;xe++)te.drawImage(H,se*ye,X*xe,se,X,0,0,se,X);return{canvas:ne.canvas,scaleX:G.scale,scaleY:le.scale,offsetX:d,offsetY:m}}return{canvas:Q.canvas,scaleX:M.scale,scaleY:$.scale,offsetX:d,offsetY:m}}getSizeAndScale(e,t,n){const r=Math.max(S1.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const o=r-t,a=s-n;e.ctx.rect(t,n,o,a),Ke.axialAlignedBoundingBox([t,n,r,s],kn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case YL.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=s.fillColor=o,r.strokeStyle=s.strokeColor=a;break;case YL.UNCOLORED:r.fillStyle=r.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new MQ(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r){let s=n;r!==qr.SHADING&&(s=Ke.transform(s,t.baseTransform),this.matrix&&(s=Ke.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(a),u}};ie(S1,"MAX_PATTERN_SIZE",3e3);let RS=S1;function _Z({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=$r.isLittleEndian?4278190080:255,[u,h]=o?[s,a]:[a,s],d=n>>3,m=n&7,p=i.length;t=new Uint32Array(t.buffer);let g=0;for(let w=0;w<r;w++){for(const A=e+d;e<A;e++){const v=e<p?i[e]:255;t[g++]=v&128?h:u,t[g++]=v&64?h:u,t[g++]=v&32?h:u,t[g++]=v&16?h:u,t[g++]=v&8?h:u,t[g++]=v&4?h:u,t[g++]=v&2?h:u,t[g++]=v&1?h:u}if(m===0)continue;const _=e<p?i[e++]:255;for(let A=0;A<m;A++)t[g++]=_&1<<7-A?h:u}return{srcPos:e,destPos:g}}const XL=16,QL=100,AZ=15,ZL=10,ji=16,Ax=new DOMMatrix,ms=new Float32Array(2),dp=new Float32Array([1/0,1/0,-1/0,-1/0]);function bZ(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,r,s,o,a){e.transform(t,n,r,s,o,a),this.__originalTransform(t,n,r,s,o,a)},i.setTransform=function(t,n,r,s,o,a){e.setTransform(t,n,r,s,o,a),this.__originalSetTransform(t,n,r,s,o,a)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,o,a){e.bezierCurveTo(t,n,r,s,o,a),this.__originalBezierCurveTo(t,n,r,s,o,a)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class EZ{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Mw(i,e,t,n,r,s,o,a,u,h){const[d,m,p,g,w,_]=kn(i);if(m===0&&p===0){const E=o*d+w,I=Math.round(E),S=a*g+_,R=Math.round(S),F=(o+u)*d+w,k=Math.abs(Math.round(F)-I)||1,T=(a+h)*g+_,D=Math.abs(Math.round(T)-R)||1;return i.setTransform(Math.sign(d),0,0,Math.sign(g),I,R),i.drawImage(e,t,n,r,s,0,0,k,D),i.setTransform(d,m,p,g,w,_),[k,D]}if(d===0&&g===0){const E=a*p+w,I=Math.round(E),S=o*m+_,R=Math.round(S),F=(a+h)*p+w,k=Math.abs(Math.round(F)-I)||1,T=(o+u)*m+_,D=Math.abs(Math.round(T)-R)||1;return i.setTransform(0,Math.sign(m),Math.sign(p),0,I,R),i.drawImage(e,t,n,r,s,0,0,D,k),i.setTransform(d,m,p,g,w,_),[D,k]}i.drawImage(e,t,n,r,s,o,a,u,h);const A=Math.hypot(d,m),v=Math.hypot(p,g);return[A*u,v*h]}class eF{constructor(e,t,n){ie(this,"alphaIsShape",!1);ie(this,"fontSize",0);ie(this,"fontSizeScale",1);ie(this,"textMatrix",null);ie(this,"textMatrixScale",1);ie(this,"fontMatrix",sS);ie(this,"leading",0);ie(this,"x",0);ie(this,"y",0);ie(this,"lineX",0);ie(this,"lineY",0);ie(this,"charSpacing",0);ie(this,"wordSpacing",0);ie(this,"textHScale",1);ie(this,"textRenderingMode",Pr.FILL);ie(this,"textRise",0);ie(this,"fillColor","#000000");ie(this,"strokeColor","#000000");ie(this,"patternFill",!1);ie(this,"patternStroke",!1);ie(this,"fillAlpha",1);ie(this,"strokeAlpha",1);ie(this,"lineWidth",1);ie(this,"activeSMask",null);ie(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=dp.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=qr.FILL,t=null){const n=this.minMax.slice();if(e===qr.STROKE){t||rn("Stroke bounding box must include transform."),Ke.singularValueDecompose2dScale(t,ms);const r=ms[0]*this.lineWidth/2,s=ms[1]*this.lineWidth/2;n[0]-=r,n[1]-=s,n[2]+=r,n[3]+=s}return n}updateClipFromPath(){const e=Ke.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(dp,0)}getClippedPathBoundingBox(e=qr.FILL,t=null){return Ke.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function tF(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%ji,s=(t-r)/ji,o=r===0?s:s+1,a=i.createImageData(n,ji);let u=0,h;const d=e.data,m=a.data;let p,g,w,_;if(e.kind===i_.GRAYSCALE_1BPP){const A=d.byteLength,v=new Uint32Array(m.buffer,0,m.byteLength>>2),E=v.length,I=n+7>>3,S=4294967295,R=$r.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(w=p<s?ji:r,h=0,g=0;g<w;g++){const F=A-u;let k=0;const T=F>I?n:F*8-7,D=T&-8;let P=0,N=0;for(;k<D;k+=8)N=d[u++],v[h++]=N&128?S:R,v[h++]=N&64?S:R,v[h++]=N&32?S:R,v[h++]=N&16?S:R,v[h++]=N&8?S:R,v[h++]=N&4?S:R,v[h++]=N&2?S:R,v[h++]=N&1?S:R;for(;k<T;k++)P===0&&(N=d[u++],P=128),v[h++]=N&P?S:R,P>>=1}for(;h<E;)v[h++]=0;i.putImageData(a,0,p*ji)}}else if(e.kind===i_.RGBA_32BPP){for(g=0,_=n*ji*4,p=0;p<s;p++)m.set(d.subarray(u,u+_)),u+=_,i.putImageData(a,0,g),g+=ji;p<o&&(_=n*r*4,m.set(d.subarray(u,u+_)),i.putImageData(a,0,g))}else if(e.kind===i_.RGB_24BPP)for(w=ji,_=n*w,p=0;p<o;p++){for(p>=s&&(w=r,_=n*w),h=0,g=_;g--;)m[h++]=d[u++],m[h++]=d[u++],m[h++]=d[u++],m[h++]=255;i.putImageData(a,0,p*ji)}else throw new Error(`bad image kind: ${e.kind}`)}function nF(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%ji,s=(t-r)/ji,o=r===0?s:s+1,a=i.createImageData(n,ji);let u=0;const h=e.data,d=a.data;for(let m=0;m<o;m++){const p=m<s?ji:r;({srcPos:u}=_Z({src:h,srcPos:u,dest:d,width:n,height:p,nonBlackColor:0})),i.putImageData(a,0,m*ji)}}function Yg(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Bw(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function rF(i,e){if(e)return!0;Ke.singularValueDecompose2dScale(i,ms);const t=Math.fround(Da.pixelRatio*Gc.PDF_TO_CSS_UNITS);return ms[0]<=t&&ms[1]<=t}const CZ=["butt","round","square"],xZ=["miter","round","bevel"],SZ={},iF={};var Po,PS,NS,OS;const vD=class vD{constructor(e,t,n,r,s,{optionalContentConfig:o,markedContentStack:a=null},u,h,d){z(this,Po);this.ctx=e,this.current=new eF(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new EZ(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,n){const u=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...kn(this.compositeCtx))}this.ctx.save(),Bw(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=kn(this.ctx)}executeOperatorList(e,t,n,r,s){var v;const o=e.argsArray,a=e.fnArray;let u=t||0;const h=o.length;if(h===u)return u;const d=h-u>ZL&&typeof n=="function",m=d?Date.now()+AZ:0;let p=0;const g=this.commonObjs,w=this.objs;let _,A;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,n),u;if(!s||s.has(u))if(_=a[u],A=o[u]??null,_!==tv.dependency)A===null?this[_](u):this[_](u,...A);else for(const E of A){(v=this.dependencyTracker)==null||v.recordNamedData(E,u);const I=E.startsWith("g_")?g:w;if(!I.has(E))return I.get(E,n),u}if(u++,u===h)return u;if(d&&++p>ZL){if(Date.now()>m)return n(),u;p=0}}}endDrawing(){W(this,Po,PS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),W(this,Po,NS).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=n,u=r,h="prescale1",d,m;for(;s>2&&a>1||o>2&&u>1;){let p=a,g=u;s>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/p),o>2&&u>1&&(g=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/g),d=this.cachedCanvases.getCanvas(h,p,g),m=d.context,m.clearRect(0,0,p,g),m.drawImage(e,0,0,a,u,0,0,p,g),e=d.canvas,a=p,u=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:u}}_createMaskCanvas(e,t){var P,N;const n=this.ctx,{width:r,height:s}=t,o=this.current.fillColor,a=this.current.patternFill,u=kn(n);let h,d,m,p;if((t.bitmap||t.data)&&t.count>1){const L=t.bitmap||t.data.buffer;d=JSON.stringify(a?u:[u.slice(0,4),o]),h=this._cachedBitmapsMap.get(L),h||(h=new Map,this._cachedBitmapsMap.set(L,h));const M=h.get(d);if(M&&!a){const $=Math.round(Math.min(u[0],u[2])+u[4]),Q=Math.round(Math.min(u[1],u[3])+u[5]);return(P=this.dependencyTracker)==null||P.recordDependencies(e,Os.transformAndFill),{canvas:M,offsetX:$,offsetY:Q}}m=M}m||(p=this.cachedCanvases.getCanvas("maskCanvas",r,s),nF(p.context,t));let g=Ke.transform(u,[1/r,0,0,-1/s,0,0]);g=Ke.transform(g,[1,0,0,1,0,-s]);const w=dp.slice();Ke.axialAlignedBoundingBox([0,0,r,s],g,w);const[_,A,v,E]=w,I=Math.round(v-_)||1,S=Math.round(E-A)||1,R=this.cachedCanvases.getCanvas("fillCanvas",I,S),F=R.context,k=_,T=A;F.translate(-k,-T),F.transform(...g),m||(m=this._scaleImage(p.canvas,$o(F)),m=m.img,h&&a&&h.set(d,m)),F.imageSmoothingEnabled=rF(kn(F),t.interpolate),Mw(F,m,0,0,m.width,m.height,0,0,r,s),F.globalCompositeOperation="source-in";const D=Ke.transform($o(F),[1,0,0,1,-k,-T]);return F.fillStyle=a?o.getPattern(n,this,D,qr.FILL):o,F.fillRect(0,0,r,s),h&&!a&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,R.canvas)),(N=this.dependencyTracker)==null||N.recordDependencies(e,Os.transformAndFill),{canvas:R.canvas,offsetX:Math.round(k),offsetY:Math.round(T)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=CZ[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=xZ[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,s,o,a;for(const[u,h]of t)switch(u){case"LW":this.setLineWidth(e,h);break;case"LC":this.setLineCap(e,h);break;case"LJ":this.setLineJoin(e,h);break;case"ML":this.setMiterLimit(e,h);break;case"D":this.setDash(e,h[0],h[1]);break;case"RI":this.setRenderingIntent(e,h);break;case"FL":this.setFlatness(e,h);break;case"Font":this.setFont(e,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=h;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=h;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),Yg(this.suspendedCtx,o),bZ(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],o=r[1],a=r[2]-s,u=r[3]-o;a===0||u===0||(this.genericComposeSMask(t.context,n,a,u,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,o,a,u,h,d,m){let p=e.canvas,g=u-d,w=h-m;if(o)if(g<0||w<0||g+n>p.width||w+r>p.height){const A=this.cachedCanvases.getCanvas("maskExtension",n,r),v=A.context;v.drawImage(p,-g,-w),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,n,r),v.globalCompositeOperation="source-over",p=A.canvas,g=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(g,w,n,r),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(g,w,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const _=new Path2D;_.rect(u,h,n,r),t.clip(_),t.globalCompositeOperation="destination-in",t.drawImage(p,g,w,n,r,u,h,n,r),t.restore()}save(e){var n;this.inSMaskMode&&Yg(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Yg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,s,o,a){var u;(u=this.dependencyTracker)==null||u.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,s,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[s]=n;if(!r){s||(s=n[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const o=t===tv.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(s instanceof Path2D)){const o=n[0]=new Path2D;for(let a=0,u=s.length;a<u;)switch(s[a++]){case Nw.moveTo:o.moveTo(s[a++],s[a++]);break;case Nw.lineTo:o.lineTo(s[a++],s[a++]);break;case Nw.curveTo:o.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case Nw.closePath:o.closePath();break;default:Et(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=o}Ke.axialAlignedBoundingBox(r,kn(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var o;const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const a=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,$o(r),qr.STROKE),a){const u=new Path2D;u.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=u}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Os.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(qr.STROKE,kn(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var h,d,m;const r=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const p=s.isModifyingCurrentTransform()?r.getTransform():null;if((h=this.dependencyTracker)==null||h.save(e),r.save(),r.fillStyle=s.getPattern(r,this,$o(r),qr.FILL),p){const g=new Path2D;g.addPath(t,r.getTransform().invertSelf().multiplySelf(p)),t=g}a=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Os.fill),a&&(r.restore(),(m=this.dependencyTracker)==null||m.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,Os.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=SZ}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=iF}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,s=n.getTransform().invertSelf();for(const{transform:o,x:a,y:u,fontSize:h,path:d}of t)d&&r.addPath(d,new DOMMatrix(o).preMultiplySelf(s).translate(a,u).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var m,p;(m=this.dependencyTracker)==null||m.recordSimpleData("font",e).recordNamedDependency(e,t);const r=this.commonObjs.get(t),s=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=r.fontMatrix||sS,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Et("Invalid font matrix for font "+t),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const o=r.loadedName||"sans-serif",a=((p=r.systemFontInfo)==null?void 0:p.css)||`"${o}", ${r.fallbackName}`;let u="normal";r.black?u="900":r.bold&&(u="bold");const h=r.italic?"italic":"normal";let d=n;n<XL?d=XL:n>QL&&(d=QL),this.current.fontSizeScale=n/d,this.ctx.font=`${h} ${u} ${d}px ${a}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,s,o){var v,E,I,S;const a=this.ctx,u=this.current,h=u.font,d=u.textRenderingMode,m=u.fontSize/u.fontSizeScale,p=d&Pr.FILL_STROKE_MASK,g=!!(d&Pr.ADD_TO_PATH_FLAG),w=u.patternFill&&!h.missingFile,_=u.patternStroke&&!h.missingFile;let A;if((h.disableFontFace||g||w||_)&&!h.missingFile&&(A=h.getPathGenerator(this.commonObjs,t)),A&&(h.disableFontFace||w||_)){a.save(),a.translate(n,r),a.scale(m,-m),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,a,h);let R;if(p===Pr.FILL||p===Pr.FILL_STROKE)if(s){R=a.getTransform(),a.setTransform(...s);const F=W(this,Po,OS).call(this,A,R,s);a.fill(F)}else a.fill(A);if(p===Pr.STROKE||p===Pr.FILL_STROKE)if(o){R||(R=a.getTransform()),a.setTransform(...o);const{a:F,b:k,c:T,d:D}=R,P=Ke.inverseTransform(o),N=Ke.transform([F,k,T,D,0,0],P);Ke.singularValueDecompose2dScale(N,ms),a.lineWidth*=Math.max(ms[0],ms[1])/m,a.stroke(W(this,Po,OS).call(this,A,R,o))}else a.lineWidth/=m,a.stroke(A);a.restore()}else(p===Pr.FILL||p===Pr.FILL_STROKE)&&(a.fillText(t,n,r),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,h,m,n,r,()=>a.measureText(t))),(p===Pr.STROKE||p===Pr.FILL_STROKE)&&(this.dependencyTracker&&((I=this.dependencyTracker)==null||I.recordCharacterBBox(e,a,h,m,n,r,()=>a.measureText(t)).recordDependencies(e,Os.stroke)),a.strokeText(t,n,r));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:kn(a),x:n,y:r,fontSize:m,path:A}),(S=this.dependencyTracker)==null||S.recordCharacterBBox(e,a,h,m,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Rt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var T,D,P,N;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Os.showText).copyDependenciesFromIncrementalOperation(e,"sameLineText").resetBBox(e),this.current.textRenderingMode&Pr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),(T=this.dependencyTracker)==null||T.recordOperation(e).recordIncrementalData("sameLineText",e);return}const s=n.fontSize;if(s===0){(D=this.dependencyTracker)==null||D.recordOperation(e);return}const o=this.ctx,a=n.fontSizeScale,u=n.charSpacing,h=n.wordSpacing,d=n.fontDirection,m=n.textHScale*d,p=t.length,g=r.vertical,w=g?1:-1,_=r.defaultVMetrics,A=s*n.fontMatrix[0],v=n.textRenderingMode===Pr.FILL&&!r.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),d>0?o.scale(m,-1):o.scale(m,1);let E,I;if(n.patternFill){o.save();const L=n.fillColor.getPattern(o,this,$o(o),qr.FILL);E=kn(o),o.restore(),o.fillStyle=L}if(n.patternStroke){o.save();const L=n.strokeColor.getPattern(o,this,$o(o),qr.STROKE);I=kn(o),o.restore(),o.strokeStyle=L}let S=n.lineWidth;const R=n.textMatrixScale;if(R===0||S===0){const L=n.textRenderingMode&Pr.FILL_STROKE_MASK;(L===Pr.STROKE||L===Pr.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=R;if(a!==1&&(o.scale(a,a),S/=a),o.lineWidth=S,r.isInvalidPDFjsFont){const L=[];let M=0;for(const Q of t)L.push(Q.unicode),M+=Q.width;const $=L.join("");if(o.fillText($,0,0),this.dependencyTracker!==null){const Q=o.measureText($);this.dependencyTracker.recordBBox(e,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordOperation(e).recordIncrementalData("sameLineText",e)}n.x+=M*A*m,o.restore(),this.compose();return}let F=0,k;for(k=0;k<p;++k){const L=t[k];if(typeof L=="number"){F+=w*L*s/1e3;continue}let M=!1;const $=(L.isSpace?h:0)+u,Q=L.fontChar,re=L.accent;let ee,ue,Y=L.width;if(g){const H=L.vmetric||_,G=-(L.vmetric?H[1]:Y*.5)*A,le=H[2]*A;Y=H?-H[0]:Y,ee=G/a,ue=(F+le)/a}else ee=F/a,ue=0;let J;if(r.remeasure&&Y>0){J=o.measureText(Q);const H=J.width*1e3/s*a;if(Y<H&&this.isFontSubpixelAAEnabled){const G=Y/H;M=!0,o.save(),o.scale(G,1),ee/=G}else Y!==H&&(ee+=(Y-H)/2e3*s/a)}if(this.contentVisible&&(L.isInFont||r.missingFile)){if(v&&!re)o.fillText(Q,ee,ue),(P=this.dependencyTracker)==null||P.recordCharacterBBox(e,o,J?{bbox:null}:r,s/a,ee,ue,()=>J??o.measureText(Q));else if(this.paintChar(e,Q,ee,ue,E,I),re){const H=ee+s*re.offset.x/a,G=ue-s*re.offset.y/a;this.paintChar(e,re.fontChar,H,G,E,I)}}const q=g?Y*A-$*d:Y*A+$*d;F+=q,M&&o.restore()}g?n.y-=F:n.x+=F*m,o.restore(),this.compose(),(N=this.dependencyTracker)==null||N.recordOperation(e).recordIncrementalData("sameLineText",e)}showType3Text(e,t){const n=this.ctx,r=this.current,s=r.font,o=r.fontSize,a=r.fontDirection,u=s.vertical?1:-1,h=r.charSpacing,d=r.wordSpacing,m=r.textHScale*a,p=r.fontMatrix||sS,g=t.length,w=r.textRenderingMode===Pr.INVISIBLE;let _,A,v,E;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(m,a);const I=this.dependencyTracker;for(this.dependencyTracker=I?new h1(I,e):null,_=0;_<g;++_){if(A=t[_],typeof A=="number"){E=u*A*o/1e3,this.ctx.translate(E,0),r.x+=E*m;continue}const S=(A.isSpace?d:0)+h,R=s.charProcOperatorList[A.operatorListId];R?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...p),this.executeOperatorList(R),this.restore()):Et(`Type3 character "${A.operatorListId}" is not available.`);const F=[A.width,0];Ke.applyTransform(F,p),v=F[0]*o+S,n.translate(v,0),r.x+=v*m}n.restore(),I&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=I)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,s,o,a){var h;const u=new Path2D;u.rect(r,s,o-r,a-s),this.ctx.clip(u),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,r,o,s,a).recordClipBox(e,this.ctx,r,o,s,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||kn(this.ctx),s={createCanvasGraphics:o=>new vD(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new h1(this.dependencyTracker,e):null)};n=new RS(t,this.ctx,s,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=wZ(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,$o(n),qr.SHADING);const s=$o(n);if(s){const{width:a,height:u}=n.canvas,h=dp.slice();Ke.axialAlignedBoundingBox([0,0,a,u],s,h);const[d,m,p,g]=h;this.ctx.fillRect(d,m,p-d,g-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Os.transform).recordDependencies(e,Os.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){rn("Should not call beginInlineImage")}beginImageData(){rn("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=kn(this.ctx),n)){Ke.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,o,a,u]=n,h=new Path2D;h.rect(s,o,a-s,u-o),this.ctx.clip(h),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,s,a,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var I;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||PA("TODO: Support non-isolated groups."),t.knockout&&Et("Knockout groups not supported.");const r=kn(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=dp.slice();Ke.axialAlignedBoundingBox(t.bbox,kn(n),s);const o=[0,0,n.canvas.width,n.canvas.height];s=Ke.intersect(s,o)||[0,0,0,0];const a=Math.floor(s[0]),u=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-a,1),d=Math.max(Math.ceil(s[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,d]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(m,h,d),g=p.context;g.translate(-a,-u),g.transform(...r);let w=new Path2D;const[_,A,v,E]=t.bbox;if(w.rect(_,A,v-_,E-A),t.matrix){const S=new Path2D;S.addPath(w,new DOMMatrix(t.matrix)),w=S}g.clip(w),t.smask&&this.smaskStack.push({canvas:p.canvas,context:g,offsetX:a,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(a,u),n.save()),Yg(n,g),this.ctx=g,(I=this.dependencyTracker)==null||I.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=kn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=dp.slice();Ke.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,a),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,n,r,s,o){if(W(this,Po,PS).call(this),Bw(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const a=n[2]-n[0],u=n[3]-n[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=u,Ke.singularValueDecompose2dScale(kn(this.ctx),ms);const{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),m=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,m);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(ms[0],0,0,-ms[1],0,u*ms[1]),Bw(this.ctx)}else{Bw(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],a,u),this.ctx.clip(h)}}this.current=new eF(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),W(this,Po,NS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,s=this._createMaskCanvas(e,t),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,s=0,o,a){var m,p,g;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const h=kn(u);u.transform(n,r,s,o,0,0);const d=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]),(m=this.dependencyTracker)==null||m.resetBBox(e);for(let w=0,_=a.length;w<_;w+=2){const A=Ke.transform(h,[n,r,s,o,a[w],a[w+1]]);u.drawImage(d.canvas,A[4],A[5]),(p=this.dependencyTracker)==null||p.recordBBox(e,this.ctx,A[4],A[4]+d.canvas.width,A[5],A[5]+d.canvas.height)}u.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,u;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,s=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Os.transformAndFill);for(const h of t){const{data:d,width:m,height:p,transform:g}=h,w=this.cachedCanvases.getCanvas("maskCanvas",m,p),_=w.context;_.save();const A=this.getObject(e,d,h);nF(_,A),_.globalCompositeOperation="source-in",_.fillStyle=s?r.getPattern(_,this,$o(n),qr.FILL):r,_.fillRect(0,0,m,p),_.restore(),n.save(),n.transform(...g),n.scale(1,-1),Mw(n,w.canvas,0,0,m,p,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,n,0,m,0,p),n.restore()}this.compose(),(u=this.dependencyTracker)==null||u.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,s){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Et("Dependent image isn't ready yet");return}const a=o.width,u=o.height,h=[];for(let d=0,m=s.length;d<m;d+=2)h.push({transform:[n,0,0,r,s[d],s[d+1]],x:0,y:0,w:a,h:u});this.paintInlineImageXObjectGroup(e,o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e,t){var h;if(!this.contentVisible)return;const n=t.width,r=t.height,s=this.ctx;this.save(e);const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/n,-1/r);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const m=this.cachedCanvases.getCanvas("inlineImage",n,r).context;tF(m,t),a=this.applyTransferMapsToCanvas(m)}const u=this._scaleImage(a,$o(s));s.imageSmoothingEnabled=rF(kn(s),t.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(e).recordBBox(e,s,0,n,-r,0).recordDependencies(e,Os.imageXObject).recordOperation(e),Mw(s,u.img,0,0,u.paintWidth,u.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var o,a,u;if(!this.contentVisible)return;const r=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const h=t.width,d=t.height,p=this.cachedCanvases.getCanvas("inlineImage",h,d).context;tF(p,t),s=this.applyTransferMapsToCanvas(p)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const h of n)r.save(),r.transform(...h.transform),r.scale(1,-1),Mw(r,s,h.x,h.y,h.w,h.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,1,-1,0),r.restore();(u=this.dependencyTracker)==null||u.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Os.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var o,a;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===iF?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=kn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let o,a;if(n===0&&r===0){const u=Math.abs(t),h=Math.abs(s);if(u===h)if(e===0)o=a=1/u;else{const d=u*e;o=a=d<1?1/d:1}else if(e===0)o=1/u,a=1/h;else{const d=u*e,m=h*e;o=d<1?1/d:1,a=m<1?1/m:1}}else{const u=Math.abs(t*s-n*r),h=Math.hypot(t,n),d=Math.hypot(r,s);if(e===0)o=d/u,a=h/u;else{const m=e*u;o=d>m?d/m:1,a=h>m?h/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[s,o]=this.getScaleForStroking();if(s===o){n.lineWidth=(r||1)*s,n.stroke(e);return}const a=n.getLineDash();t&&n.save(),n.scale(s,o),Ax.a=1/s,Ax.d=1/o;const u=new Path2D;if(u.addPath(e,Ax),a.length>0){const h=Math.max(s,o);n.setLineDash(a.map(d=>d/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Po=new WeakSet,PS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},NS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},OS=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let Ap=vD;for(const i in tv)Ap.prototype[i]!==void 0&&(Ap.prototype[tv[i]]=Ap.prototype[i]);var Nv,Ov;class ya{static get workerPort(){return f(this,Nv)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");U(this,Nv,e)}static get workerSrc(){return f(this,Ov)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");U(this,Ov,e)}}Nv=new WeakMap,Ov=new WeakMap,z(ya,Nv,null),z(ya,Ov,"");var Xp,Lv;class TZ{constructor({parsedData:e,rawData:t}){z(this,Xp);z(this,Lv);U(this,Xp,e),U(this,Lv,t)}getRaw(){return f(this,Lv)}get(e){return f(this,Xp).get(e)??null}[Symbol.iterator](){return f(this,Xp).entries()}}Xp=new WeakMap,Lv=new WeakMap;const ap=Symbol("INTERNAL");var Fv,Mv,Bv,Qp;class IZ{constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){z(this,Fv,!1);z(this,Mv,!1);z(this,Bv,!1);z(this,Qp,!0);U(this,Fv,!!(e&ps.DISPLAY)),U(this,Mv,!!(e&ps.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(f(this,Bv))return f(this,Qp);if(!f(this,Qp))return!1;const{print:e,view:t}=this.usage;return f(this,Fv)?(t==null?void 0:t.viewState)!=="OFF":f(this,Mv)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==ap&&rn("Internal method `_setVisible` called."),U(this,Bv,n),U(this,Qp,t)}}Fv=new WeakMap,Mv=new WeakMap,Bv=new WeakMap,Qp=new WeakMap;var sc,tn,Zp,em,jv,LS;class DZ{constructor(e,t=ps.DISPLAY){z(this,jv);z(this,sc,null);z(this,tn,new Map);z(this,Zp,null);z(this,em,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,U(this,em,e.order);for(const n of e.groups)f(this,tn).set(n.id,new IZ(t,n));if(e.baseState==="OFF")for(const n of f(this,tn).values())n._setVisible(ap,!1);for(const n of e.on)f(this,tn).get(n)._setVisible(ap,!0);for(const n of e.off)f(this,tn).get(n)._setVisible(ap,!1);U(this,Zp,this.getHash())}}isVisible(e){if(f(this,tn).size===0)return!0;if(!e)return PA("Optional content group not defined."),!0;if(e.type==="OCG")return f(this,tn).has(e.id)?f(this,tn).get(e.id).visible:(Et(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return W(this,jv,LS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!f(this,tn).has(t))return Et(`Optional content group not found: ${t}`),!0;if(f(this,tn).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!f(this,tn).has(t))return Et(`Optional content group not found: ${t}`),!0;if(!f(this,tn).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!f(this,tn).has(t))return Et(`Optional content group not found: ${t}`),!0;if(!f(this,tn).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!f(this,tn).has(t))return Et(`Optional content group not found: ${t}`),!0;if(f(this,tn).get(t).visible)return!1}return!0}return Et(`Unknown optional content policy ${e.policy}.`),!0}return Et(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const r=f(this,tn).get(e);if(!r){Et(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((s=f(this,tn).get(a))==null||s._setVisible(ap,!1,!0));r._setVisible(ap,!!t,!0),U(this,sc,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=f(this,tn).get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}U(this,sc,null)}get hasInitialVisibility(){return f(this,Zp)===null||this.getHash()===f(this,Zp)}getOrder(){return f(this,tn).size?f(this,em)?f(this,em).slice():[...f(this,tn).keys()]:null}getGroup(e){return f(this,tn).get(e)||null}getHash(){if(f(this,sc)!==null)return f(this,sc);const e=new h4;for(const[t,n]of f(this,tn))e.update(`${t}:${n.visible}`);return U(this,sc,e.hexdigest())}[Symbol.iterator](){return f(this,tn).entries()}}sc=new WeakMap,tn=new WeakMap,Zp=new WeakMap,em=new WeakMap,jv=new WeakSet,LS=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=W(this,jv,LS).call(this,s);else if(f(this,tn).has(s))o=f(this,tn).get(s).visible;else return Et(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class kZ{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Xn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Xn(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new RZ(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new PZ(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class RZ{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=aD(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PZ{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function NZ(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let d=a(t);return d=unescape(d),d=u(d),d=h(d),s(d)}if(t=o(i),t){const d=h(t);return s(d)}if(t=n("filename","i").exec(i),t){t=t[1];let d=a(t);return d=h(d),s(d)}function n(d,m){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(d,m){if(d){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const p=new TextDecoder(d,{fatal:!0}),g=Z0(m);m=p.decode(g),e=!1}catch{}}return m}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function o(d){const m=[];let p;const g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(d))!==null;){let[,_,A,v]=p;if(_=parseInt(_,10),_ in m){if(_===0)break;continue}m[_]=[A,v]}const w=[];for(let _=0;_<m.length&&_ in m;++_){let[A,v]=m[_];v=a(v),A&&(v=unescape(v),_===0&&(v=u(v))),w.push(v)}return w.join("")}function a(d){if(d.startsWith('"')){const m=d.slice(1).split('\\"');for(let p=0;p<m.length;++p){const g=m[p].indexOf('"');g!==-1&&(m[p]=m[p].slice(0,g),m.length=p+1),m[p]=m[p].replaceAll(/\\(.)/g,"$1")}d=m.join('"')}return d}function u(d){const m=d.indexOf("'");if(m===-1)return d;const p=d.slice(0,m),w=d.slice(m+1).replace(/^[^']*'/,"");return r(p,w)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,p,g,w){if(g==="q"||g==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,A){return String.fromCharCode(parseInt(A,16))}),r(p,w);try{w=atob(w)}catch{}return r(p,w)})}return""}function E4(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function LA(i){var e;return((e=URL.parse(i))==null?void 0:e.origin)??null}function C4({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function x4(i){const e=i.get("Content-Disposition");if(e){let t=NZ(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(aD(t))return t}return null}function r2(i,e){return new a1(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function S4(i){return i===200||i===206}function T4(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function I4(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Et(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class OZ{constructor(e){ie(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=E4(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new LZ(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new FZ(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LZ{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,T4(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=LA(s.url),!S4(s.status))throw r2(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:u}=C4({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=x4(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Wc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:I4(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class FZ{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const o=r.url;fetch(o,T4(s,this._withCredentials,this._abortController)).then(a=>{const u=LA(a.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!S4(a.status))throw r2(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:I4(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const bx=200,Ex=206;function MZ(i){const e=i.response;return typeof e!="string"?e:Z0(e).buffer}class BZ{constructor({url:e,httpHeaders:t,withCredentials:n}){ie(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=E4(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Ex):r.expectedStatus=bx,t.responseType="arraybuffer",Xn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const s=r.status||bx;if(!(s===bx&&n.expectedStatus===Ex)&&s!==n.expectedStatus){n.onError(r.status);return}const a=MZ(r);if(s===Ex){const u=r.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?n.onDone({begin:parseInt(h[1],10),chunk:a}):(Et('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class jZ{constructor(e){this._source=e,this._manager=new BZ(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new qZ(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new UZ(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class qZ{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=LA(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[u,...h]=a.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=C4({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=x4(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=r2(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class UZ{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=LA((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=r2(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const VZ=/^[a-z][a-z0-9\-+.]+:/i;function HZ(i){if(VZ.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class zZ{constructor(e){this.source=e,this.url=HZ(e.url),Xn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $Z(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new WZ(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class $Z{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=r2(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Wc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class WZ{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Xg=Symbol("INITIAL_DATA");var ns,qv,FS;class D4{constructor(){z(this,qv);z(this,ns,Object.create(null))}get(e,t=null){if(t){const r=W(this,qv,FS).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=f(this,ns)[e];if(!n||n.data===Xg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=f(this,ns)[e];return!!t&&t.data!==Xg}delete(e){const t=f(this,ns)[e];return!t||t.data===Xg?!1:(delete f(this,ns)[e],!0)}resolve(e,t=null){const n=W(this,qv,FS).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in f(this,ns)){const{data:n}=f(this,ns)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}U(this,ns,Object.create(null))}*[Symbol.iterator](){for(const e in f(this,ns)){const{data:t}=f(this,ns)[e];t!==Xg&&(yield[e,t])}}}ns=new WeakMap,qv=new WeakSet,FS=function(e){var t;return(t=f(this,ns))[e]||(t[e]={...Promise.withResolvers(),data:Xg})};const GZ=1e5,sF=30;var gF,oc,Mi,Uv,Vv,id,vl,Hv,zv,sd,tm,nm,ac,rm,$v,im,od,Wv,Gv,sm,ad,Kv,lc,om,Zl,k4,R4,MS,bs,f_,BS,P4,N4;const sr=class sr{constructor({textContentSource:e,container:t,viewport:n}){z(this,Zl);z(this,oc,Promise.withResolvers());z(this,Mi,null);z(this,Uv,!1);z(this,Vv,!!((gF=globalThis.FontInspector)!=null&&gF.enabled));z(this,id,null);z(this,vl,null);z(this,Hv,0);z(this,zv,0);z(this,sd,null);z(this,tm,null);z(this,nm,0);z(this,ac,0);z(this,rm,Object.create(null));z(this,$v,[]);z(this,im,null);z(this,od,[]);z(this,Wv,new WeakMap);z(this,Gv,null);var u;if(e instanceof ReadableStream)U(this,im,e);else if(typeof e=="object")U(this,im,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');U(this,Mi,U(this,tm,t)),U(this,ac,n.scale*Da.pixelRatio),U(this,nm,n.rotation),U(this,vl,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=n.rawDims;U(this,Gv,[1,0,0,-1,-o,a+s]),U(this,zv,r),U(this,Hv,s),W(u=sr,bs,P4).call(u),Xd(t,n),f(this,oc).promise.finally(()=>{f(sr,om).delete(this),U(this,vl,null),U(this,rm,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=$r.platform;return Rt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{f(this,sd).read().then(({value:t,done:n})=>{if(n){f(this,oc).resolve();return}f(this,id)??U(this,id,t.lang),Object.assign(f(this,rm),t.styles),W(this,Zl,k4).call(this,t.items),e()},f(this,oc).reject)};return U(this,sd,f(this,im).getReader()),f(sr,om).add(this),e(),f(this,oc).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*Da.pixelRatio,r=e.rotation;if(r!==f(this,nm)&&(t==null||t(),U(this,nm,r),Xd(f(this,tm),{rotation:r})),n!==f(this,ac)){t==null||t(),U(this,ac,n);const o={div:null,properties:null,ctx:W(s=sr,bs,f_).call(s,f(this,id))};for(const a of f(this,od))o.properties=f(this,Wv).get(a),o.div=a,W(this,Zl,MS).call(this,o)}}cancel(){var t;const e=new Wc("TextLayer task cancelled.");(t=f(this,sd))==null||t.cancel(e).catch(()=>{}),U(this,sd,null),f(this,oc).reject(e)}get textDivs(){return f(this,od)}get textContentItemsStr(){return f(this,$v)}static cleanup(){if(!(f(this,om).size>0)){f(this,sm).clear();for(const{canvas:e}of f(this,ad).values())e.remove();f(this,ad).clear()}}};oc=new WeakMap,Mi=new WeakMap,Uv=new WeakMap,Vv=new WeakMap,id=new WeakMap,vl=new WeakMap,Hv=new WeakMap,zv=new WeakMap,sd=new WeakMap,tm=new WeakMap,nm=new WeakMap,ac=new WeakMap,rm=new WeakMap,$v=new WeakMap,im=new WeakMap,od=new WeakMap,Wv=new WeakMap,Gv=new WeakMap,sm=new WeakMap,ad=new WeakMap,Kv=new WeakMap,lc=new WeakMap,om=new WeakMap,Zl=new WeakSet,k4=function(e){var r,s;if(f(this,Uv))return;(s=f(this,vl)).ctx??(s.ctx=W(r=sr,bs,f_).call(r,f(this,id)));const t=f(this,od),n=f(this,$v);for(const o of e){if(t.length>GZ){Et("Ignoring additional textDivs for performance reasons."),U(this,Uv,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=f(this,Mi);U(this,Mi,document.createElement("span")),f(this,Mi).classList.add("markedContent"),o.id&&f(this,Mi).setAttribute("id",`${o.id}`),a.append(f(this,Mi))}else o.type==="endMarkedContent"&&U(this,Mi,f(this,Mi).parentNode);continue}n.push(o.str),W(this,Zl,R4).call(this,o)}},R4=function(e){var _;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};f(this,od).push(t);const r=Ke.transform(f(this,Gv),e.transform);let s=Math.atan2(r[1],r[0]);const o=f(this,rm)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=f(this,Vv)&&o.fontSubstitution||o.fontFamily;a=sr.fontFamilyMap.get(a)||a;const u=Math.hypot(r[2],r[3]),h=u*W(_=sr,bs,N4).call(_,a,o,f(this,id));let d,m;s===0?(d=r[4],m=r[5]-h):(d=r[4]+h*Math.sin(s),m=r[5]-h*Math.cos(s));const p="calc(var(--total-scale-factor) *",g=t.style;f(this,Mi)===f(this,tm)?(g.left=`${(100*d/f(this,zv)).toFixed(2)}%`,g.top=`${(100*m/f(this,Hv)).toFixed(2)}%`):(g.left=`${p}${d.toFixed(2)}px)`,g.top=`${p}${m.toFixed(2)}px)`),g.fontSize=`${p}${(f(sr,lc)*u).toFixed(2)}px)`,g.fontFamily=a,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,f(this,Vv)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);A!==v&&Math.max(A,v)/Math.min(A,v)>1.5&&(w=!0)}if(w&&(n.canvasWidth=o.vertical?e.height:e.width),f(this,Wv).set(t,n),f(this,vl).div=t,f(this,vl).properties=n,W(this,Zl,MS).call(this,f(this,vl)),n.hasText&&f(this,Mi).append(t),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),f(this,Mi).append(A)}},MS=function(e){var a;const{div:t,properties:n,ctx:r}=e,{style:s}=t;let o="";if(f(sr,lc)>1&&(o=`scale(${1/f(sr,lc)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=s,{canvasWidth:h,fontSize:d}=n;W(a=sr,bs,BS).call(a,r,d*f(this,ac),u);const{width:m}=r.measureText(t.textContent);m>0&&(o=`scaleX(${h*f(this,ac)/m}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(s.transform=o)},bs=new WeakSet,f_=function(e=null){let t=f(this,ad).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,ad).set(e,t),f(this,Kv).set(t,{size:0,family:""})}return t},BS=function(e,t,n){const r=f(this,Kv).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},P4=function(){if(f(this,lc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),U(this,lc,e.getBoundingClientRect().height),e.remove()},N4=function(e,t,n){const r=f(this,sm).get(e);if(r)return r;const s=W(this,bs,f_).call(this,n);s.canvas.width=s.canvas.height=sF,W(this,bs,BS).call(this,s,sF,e);const o=s.measureText(""),a=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let h=.8;return a?h=a/(a+u):($r.platform.isFirefox&&Et("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),f(this,sm).set(e,h),h},z(sr,bs),z(sr,sm,new Map),z(sr,ad,new Map),z(sr,Kv,new WeakMap),z(sr,lc,null),z(sr,om,new Set);let nv=sr;class rv{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(s){var u;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(rv.shouldBuildText(a))(u=s==null?void 0:s.attributes)!=null&&u.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const h of s.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const KZ=100;function O4(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new jS,{docId:t}=e,n=i.url?nZ(i.url):null,r=i.data?rZ(i.data):null,s=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,u=i.range instanceof L4?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let d=i.worker instanceof iv?i.worker:null;const m=i.verbosity,p=typeof i.docBaseUrl=="string"&&!NA(i.docBaseUrl)?i.docBaseUrl:null,g=Lw(i.cMapUrl),w=i.cMapPacked!==!1,_=i.CMapReaderFactory||(yi?hZ:GL),A=Lw(i.iccUrl),v=Lw(i.standardFontDataUrl),E=i.StandardFontDataFactory||(yi?dZ:KL),I=Lw(i.wasmUrl),S=i.WasmFactory||(yi?fZ:JL),R=i.stopAtErrors!==!0,F=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=i.isEvalSupported!==!1,T=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!yi,D=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!yi&&($r.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,N=typeof i.disableFontFace=="boolean"?i.disableFontFace:yi,L=i.fontExtraProperties===!0,M=i.enableXfa===!0,$=i.ownerDocument||globalThis.document,Q=i.disableRange===!0,re=i.disableStream===!0,ee=i.disableAutoFetch===!0,ue=i.pdfBug===!0,Y=i.CanvasFactory||(yi?cZ:aZ),J=i.FilterFactory||(yi?uZ:lZ),q=i.enableHWA===!0,H=i.useWasm!==!1,G=u?u.length:i.length??NaN,le=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!yi&&!N,se=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(_===GL&&E===KL&&S===JL&&g&&v&&I&&uy(g,document.baseURI)&&uy(v,document.baseURI)&&uy(I,document.baseURI)),X=null;OQ(m);const ne={canvasFactory:new Y({ownerDocument:$,enableHWA:q}),filterFactory:new J({docId:t,ownerDocument:$}),cMapReaderFactory:se?null:new _({baseUrl:g,isCompressed:w}),standardFontDataFactory:se?null:new E({baseUrl:v}),wasmFactory:se?null:new S({baseUrl:I})};d||(d=iv.create({verbosity:m,port:ya.workerPort}),e._worker=d);const te={docId:t,apiVersion:"5.4.149",data:r,password:a,disableAutoFetch:ee,rangeChunkSize:h,length:G,docBaseUrl:p,enableXfa:M,evaluatorOptions:{maxImageSize:F,disableFontFace:N,ignoreErrors:R,isEvalSupported:k,isOffscreenCanvasSupported:T,isImageDecoderSupported:D,canvasMaxAreaInBytes:P,fontExtraProperties:L,useSystemFonts:le,useWasm:H,useWorkerFetch:se,cMapUrl:g,iccUrl:A,standardFontDataUrl:v,wasmUrl:I}},ae={ownerDocument:$,pdfBug:ue,styleElement:X,loadingParams:{disableAutoFetch:ee,enableXfa:M}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const de=d.messageHandler.sendWithPromise("GetDocRequest",te,r?[r.buffer]:null);let ye;if(u)ye=new kZ(u,{disableRange:Q,disableStream:re});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const xe=uy(n)?OZ:yi?zZ:jZ;ye=new xe({url:n,length:G,httpHeaders:s,withCredentials:o,rangeChunkSize:h,disableRange:Q,disableStream:re})}return de.then(xe=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Oe=new my(t,xe,d.port),Fe=new XZ(Oe,e,ye,ae,ne,q);e._transport=Fe,Oe.send("Ready",null)})}).catch(e._capability.reject),e}var T1;const I1=class I1{constructor(){ie(this,"_capability",Promise.withResolvers());ie(this,"_transport",null);ie(this,"_worker",null);ie(this,"docId",`d${ir(I1,T1)._++}`);ie(this,"destroyed",!1);ie(this,"onPassword",null);ie(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};T1=new WeakMap,z(I1,T1,0);let jS=I1;var ld,Jv,Yv,Xv,Qv;class L4{constructor(e,t,n=!1,r=null){z(this,ld,Promise.withResolvers());z(this,Jv,[]);z(this,Yv,[]);z(this,Xv,[]);z(this,Qv,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){f(this,Qv).push(e)}addProgressListener(e){f(this,Xv).push(e)}addProgressiveReadListener(e){f(this,Yv).push(e)}addProgressiveDoneListener(e){f(this,Jv).push(e)}onDataRange(e,t){for(const n of f(this,Qv))n(e,t)}onDataProgress(e,t){f(this,ld).promise.then(()=>{for(const n of f(this,Xv))n(e,t)})}onDataProgressiveRead(e){f(this,ld).promise.then(()=>{for(const t of f(this,Yv))t(e)})}onDataProgressiveDone(){f(this,ld).promise.then(()=>{for(const e of f(this,Jv))e()})}transportReady(){f(this,ld).resolve()}requestDataRange(e,t){rn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}ld=new WeakMap,Jv=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,Qv=new WeakMap;class JZ{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var wl,ud,_y;class YZ{constructor(e,t,n,r=!1){z(this,ud);z(this,wl,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new zL:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new D4,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new t2({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:s=Mu.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:d=null,printAnnotationStorage:m=null,isEditing:p=!1,recordOperations:g=!1,filteredOperationIndexes:w=null}){var T,D,P;(T=this._stats)==null||T.time("Overall");const _=this._transport.getRenderingIntent(r,s,m,p),{renderingIntent:A,cacheKey:v}=_;U(this,wl,!1),u||(u=this._transport.getOptionalContentConfig(A));let E=this._intentStates.get(v);E||(E=Object.create(null),this._intentStates.set(v,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const I=!!(A&ps.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(_));const S=!this.recordedGroups&&(g||this._pdfBug&&((P=globalThis.StepperManager)==null?void 0:P.enabled)),R=N=>{var L,M,$;if(E.renderTasks.delete(F),S){const Q=(L=F.gfx)==null?void 0:L.dependencyTracker.take();Q?((M=F.stepper)==null||M.setOperatorGroups(Q),g&&(this.recordedGroups=Q)):g&&(this.recordedGroups=[])}I&&U(this,wl,!0),W(this,ud,_y).call(this),N?(F.capability.reject(N),this._abortOperatorList({intentState:E,reason:N instanceof Error?N:new Error(N)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),($=globalThis.Stats)!=null&&$.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new qS({callback:R,params:{canvas:t,canvasContext:e,dependencyTracker:S?new pZ(t):null,viewport:n,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!I,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,filteredOperationIndexes:w});(E.renderTasks||(E.renderTasks=new Set)).add(F);const k=F.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([N,L])=>{var M;if(this.destroyed){R();return}if((M=this._stats)==null||M.time("Rendering"),!(L.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:N,optionalContentConfig:L}),F.operatorListChanged()}).catch(R),k}getOperatorList({intent:e="display",annotationMode:t=Mu.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let u;return a.opListReadCapability||(u=Object.create(null),u.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(u),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>rv.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function s(){o.read().then(function({value:u,done:h}){if(h){n(a);return}a.lang??(a.lang=u.lang),Object.assign(a.styles,u.styles),a.items.push(...u.items),s()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),U(this,wl,!1),Promise.all(e)}cleanup(e=!1){U(this,wl,!0);const t=W(this,ud,_y).call(this);return e&&t&&this._stats&&(this._stats=new zL),t}_startRenderPage(e,t){var r,s;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&W(this,ud,_y).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},o).getReader(),h=this._intentStates.get(t);h.streamReader=u;const d=()=>{u.read().then(({value:m,done:p})=>{if(p){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),d())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const p of h.renderTasks)p.operatorListChanged();W(this,ud,_y).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};d()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof oD){let r=KZ;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Wc(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}wl=new WeakMap,ud=new WeakSet,_y=function(){if(!f(this,wl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),U(this,wl,!1),!0};var uc,vo,_l,cd,D1,hd,dd,wi,p_,F4,M4,Ay,am,m_;const An=class An{constructor({name:e=null,port:t=null,verbosity:n=LQ()}={}){z(this,wi);z(this,uc,Promise.withResolvers());z(this,vo,null);z(this,_l,null);z(this,cd,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(f(An,dd).has(t))throw new Error("Cannot use more than one PDFWorker per port.");f(An,dd).set(t,this),W(this,wi,F4).call(this,t)}else W(this,wi,M4).call(this)}get promise(){return f(this,uc).promise}get port(){return f(this,_l)}get messageHandler(){return f(this,vo)}destroy(){var e,t;this.destroyed=!0,(e=f(this,cd))==null||e.terminate(),U(this,cd,null),f(An,dd).delete(f(this,_l)),U(this,_l,null),(t=f(this,vo))==null||t.destroy(),U(this,vo,null)}static create(e){const t=f(this,dd).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new An(e)}static get workerSrc(){if(ya.workerSrc)return ya.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Rt(this,"_setupFakeWorkerGlobal",(async()=>f(this,am,m_)?f(this,am,m_):(await import(this.workerSrc)).WorkerMessageHandler)())}};uc=new WeakMap,vo=new WeakMap,_l=new WeakMap,cd=new WeakMap,D1=new WeakMap,hd=new WeakMap,dd=new WeakMap,wi=new WeakSet,p_=function(){f(this,uc).resolve(),f(this,vo).send("configure",{verbosity:this.verbosity})},F4=function(e){U(this,_l,e),U(this,vo,new my("main","worker",e)),f(this,vo).on("ready",()=>{}),W(this,wi,p_).call(this)},M4=function(){if(f(An,hd)||f(An,am,m_)){W(this,wi,Ay).call(this);return}let{workerSrc:e}=An;try{An._isSameOrigin(window.location,e)||(e=An._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new my("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?f(this,uc).reject(new Error("Worker was destroyed")):W(this,wi,Ay).call(this)},s=new AbortController;t.addEventListener("error",()=>{f(this,cd)||r()},{signal:s.signal}),n.on("test",a=>{if(s.abort(),this.destroyed||!a){r();return}U(this,vo,n),U(this,_l,t),U(this,cd,t),W(this,wi,p_).call(this)}),n.on("ready",a=>{if(s.abort(),this.destroyed){r();return}try{o()}catch{W(this,wi,Ay).call(this)}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{PA("The worker has been disabled.")}W(this,wi,Ay).call(this)},Ay=function(){f(An,hd)||(Et("Setting up fake worker."),U(An,hd,!0)),An._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){f(this,uc).reject(new Error("Worker was destroyed"));return}const t=new oZ;U(this,_l,t);const n=`fake${ir(An,D1)._++}`,r=new my(n+"_worker",n,t);e.setup(r,t),U(this,vo,new my(n,n+"_worker",t)),W(this,wi,p_).call(this)}).catch(e=>{f(this,uc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},am=new WeakSet,m_=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},z(An,am),z(An,D1,0),z(An,hd,!1),z(An,dd,new WeakMap),yi&&(U(An,hd,!0),ya.workerSrc||(ya.workerSrc="./pdf.worker.mjs")),An._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},An._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},An.fromPort=e=>{if(GQ("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return An.create(e)};let iv=An;var Al,oa,lm,um,bl,fd,by;class XZ{constructor(e,t,n,r,s,o){z(this,fd);z(this,Al,new Map);z(this,oa,new Map);z(this,lm,new Map);z(this,um,new Map);z(this,bl,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new D4,this.fontLoader=new eZ({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Rt(this,"annotationStorage",new lD)}getRenderingIntent(e,t=Mu.ENABLE,n=null,r=!1,s=!1){let o=ps.DISPLAY,a=SS;switch(e){case"any":o=ps.ANY;break;case"display":break;case"print":o=ps.PRINT;break;default:Et(`getRenderingIntent - invalid intent: ${e}`)}const u=o&ps.PRINT&&n instanceof f4?n:this.annotationStorage;switch(t){case Mu.DISABLE:o+=ps.ANNOTATIONS_DISABLE;break;case Mu.ENABLE:break;case Mu.ENABLE_FORMS:o+=ps.ANNOTATIONS_FORMS;break;case Mu.ENABLE_STORAGE:o+=ps.ANNOTATIONS_STORAGE,a=u.serializable;break;default:Et(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=ps.IS_EDITING),s&&(o+=ps.OPLIST);const{ids:h,hash:d}=u.modifiedIds,m=[o,a.hash,d];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=f(this,bl))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of f(this,oa).values())e.push(r._destroy());f(this,oa).clear(),f(this,lm).clear(),f(this,um).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),f(this,Al).clear(),this.filterFactory.destroy(),nv.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Wc("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Xn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}Xn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:o}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{Xn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){r.close();return}Xn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new JZ(n,this))}),e.on("DocException",n=>{t._capability.reject(Oi(n))}),e.on("PasswordRequest",n=>{U(this,bl,Promise.withResolvers());try{if(!t.onPassword)throw Oi(n);const r=s=>{s instanceof Error?f(this,bl).reject(s):f(this,bl).resolve({password:s})};t.onPassword(r,n.code)}catch(r){f(this,bl).reject(r)}return f(this,bl).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;f(this,oa).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in s){const d=s.error;Et(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,m)=>globalThis.FontInspector.fontAdded(d,m):null,u=new tZ(s,a);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:h}=s;Xn(h,"The imageRef must be defined.");for(const d of f(this,oa).values())for(const[,m]of d.objs)if((m==null?void 0:m.ref)===h)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,o])=>{var u;if(this.destroyed)return;const a=f(this,oa).get(r);if(!a.objs.has(n)){if(a._intentStates.size===0){(u=o==null?void 0:o.bitmap)==null||u.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=f(this,lm).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&f(this,um).set(s.refStr,e);const o=new YZ(t,s,this,this._params.pdfBug);return f(this,oa).set(t,o),o});return f(this,lm).set(t,r),r}getPageIndex(e){return TS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return W(this,fd,by).call(this,"GetFieldObjects")}hasJSActions(){return W(this,fd,by).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return W(this,fd,by).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return W(this,fd,by).call(this,"GetOptionalContentConfig").then(t=>new DZ(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=f(this,Al).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new TZ(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return f(this,Al).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of f(this,oa).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),f(this,Al).clear(),this.filterFactory.destroy(!0),nv.cleanup()}}cachedPageNumber(e){if(!TS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return f(this,um).get(t)??null}}Al=new WeakMap,oa=new WeakMap,lm=new WeakMap,um=new WeakMap,bl=new WeakMap,fd=new WeakSet,by=function(e,t=null){const n=f(this,Al).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return f(this,Al).set(e,r),r};var cc;class QZ{constructor(e){z(this,cc,null);ie(this,"onContinue",null);ie(this,"onError",null);U(this,cc,e)}get promise(){return f(this,cc).capability.promise}cancel(e=0){f(this,cc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=f(this,cc).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=f(this,cc);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}cc=new WeakMap;var hc,pd;const Oh=class Oh{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:m=!1,pageColors:p=null,enableHWA:g=!1,filteredOperationIndexes:w=null}){z(this,hc,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=m,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new QZ(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=g,this._dependencyTracker=t.dependencyTracker,this._filteredOperationIndexes=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,h;if(this.cancelled)return;if(this._canvas){if(f(Oh,pd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(Oh,pd).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:s,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ap(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(e=null,t=0){var n,r,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),f(this,hc)&&(window.cancelAnimationFrame(f(this,hc)),U(this,hc,null)),f(Oh,pd).delete(this._canvas),e||(e=new oD(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(r=this.task).onError)==null||s.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?U(this,hc,window.requestAnimationFrame(()=>{U(this,hc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(Oh,pd).delete(this._canvas),this.callback())))}};hc=new WeakMap,pd=new WeakMap,z(Oh,pd,new WeakSet);let qS=Oh;const ZZ="5.4.149",eee="9e2e9e209";var rs,md,cm,ur,Zv,hm,El,e0,dc,wo,t0,nn,US,VS,HS,kh,B4,ku;const Li=class Li{constructor({editor:e=null,uiManager:t=null}){z(this,nn);z(this,rs,null);z(this,md,null);z(this,cm);z(this,ur,null);z(this,Zv,!1);z(this,hm,!1);z(this,El,null);z(this,e0);z(this,dc,null);z(this,wo,null);var n,r;e?(U(this,hm,!1),U(this,El,e)):U(this,hm,!0),U(this,wo,(e==null?void 0:e._uiManager)||t),U(this,e0,f(this,wo)._eventBus),U(this,cm,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=f(this,wo))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),f(Li,t0)||U(Li,t0,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Rt(this,"_keyboardManager",new n2([[["Escape","mac+Escape"],Li.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Li.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Li.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Li.prototype._moveToPrevious],[["Home","mac+Home"],Li.prototype._moveToBeginning],[["End","mac+End"],Li.prototype._moveToEnd]]))}renderButton(){const e=U(this,rs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",f(this,El)&&(e.ariaControls=`${f(this,El).id}_colorpicker_dropdown`);const t=f(this,wo)._signal;e.addEventListener("click",W(this,nn,kh).bind(this),{signal:t}),e.addEventListener("keydown",W(this,nn,HS).bind(this),{signal:t});const n=U(this,md,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=f(this,cm),e.append(n),e}renderMainDropdown(){const e=U(this,ur,W(this,nn,US).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===f(this,rs)){W(this,nn,kh).call(this,e);return}const t=e.target.getAttribute("data-color");t&&W(this,nn,VS).call(this,t,e)}_moveToNext(e){var t,n;if(!f(this,nn,ku)){W(this,nn,kh).call(this,e);return}if(e.target===f(this,rs)){(t=f(this,ur).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=f(this,ur))==null?void 0:t.firstChild)||e.target===f(this,rs)){f(this,nn,ku)&&this._hideDropdownFromKeyboard();return}f(this,nn,ku)||W(this,nn,kh).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!f(this,nn,ku)){W(this,nn,kh).call(this,e);return}(t=f(this,ur).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!f(this,nn,ku)){W(this,nn,kh).call(this,e);return}(t=f(this,ur).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=f(this,ur))==null||e.classList.add("hidden"),f(this,rs).ariaExpanded="false",(t=f(this,dc))==null||t.abort(),U(this,dc,null)}_hideDropdownFromKeyboard(){var e;if(!f(this,hm)){if(!f(this,nn,ku)){(e=f(this,El))==null||e.unselect();return}this.hideDropdown(),f(this,rs).focus({preventScroll:!0,focusVisible:f(this,Zv)})}}updateColor(e){if(f(this,md)&&(f(this,md).style.backgroundColor=e),!f(this,ur))return;const t=f(this,wo).highlightColors.values();for(const n of f(this,ur).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=f(this,rs))==null||e.remove(),U(this,rs,null),U(this,md,null),(t=f(this,ur))==null||t.remove(),U(this,ur,null)}};rs=new WeakMap,md=new WeakMap,cm=new WeakMap,ur=new WeakMap,Zv=new WeakMap,hm=new WeakMap,El=new WeakMap,e0=new WeakMap,dc=new WeakMap,wo=new WeakMap,t0=new WeakMap,nn=new WeakSet,US=function(){const e=document.createElement("div"),t=f(this,wo)._signal;e.addEventListener("contextmenu",Js,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),f(this,El)&&(e.id=`${f(this,El).id}_colorpicker_dropdown`);for(const[n,r]of f(this,wo).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",f(Li,t0)[n]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.ariaSelected=r===f(this,cm),s.addEventListener("click",W(this,nn,VS).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",W(this,nn,HS).bind(this),{signal:t}),e},VS=function(e,t){t.stopPropagation(),f(this,e0).dispatch("switchannotationeditorparams",{source:this,type:Ft.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},HS=function(e){Li._keyboardManager.exec(this,e)},kh=function(e){if(f(this,nn,ku)){this.hideDropdown();return}if(U(this,Zv,e.detail===0),f(this,dc)||(U(this,dc,new AbortController),window.addEventListener("pointerdown",W(this,nn,B4).bind(this),{signal:f(this,wo).combinedSignal(f(this,dc))})),f(this,rs).ariaExpanded="true",f(this,ur)){f(this,ur).classList.remove("hidden");return}const t=U(this,ur,W(this,nn,US).call(this));f(this,rs).append(t)},B4=function(e){var t;(t=f(this,ur))!=null&&t.contains(e.target)||this.hideDropdown()},ku=function(){return f(this,ur)&&!f(this,ur).classList.contains("hidden")},z(Li,t0,null);let d1=Li;var aa,n0,dm,r0;const Lh=class Lh{constructor(e){z(this,aa,null);z(this,n0,null);z(this,dm,null);U(this,n0,e),U(this,dm,e._uiManager),f(Lh,r0)||U(Lh,r0,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(f(this,aa))return f(this,aa);const{editorType:e,colorType:t,colorValue:n}=f(this,n0),r=U(this,aa,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",f(Lh,r0)[e]),r.addEventListener("input",()=>{f(this,dm).updateParams(t,r.value)},{signal:f(this,dm)._signal}),r}update(e){f(this,aa)&&(f(this,aa).value=e)}destroy(){var e;(e=f(this,aa))==null||e.remove(),U(this,aa,null)}hideDropdown(){}};aa=new WeakMap,n0=new WeakMap,dm=new WeakMap,r0=new WeakMap,z(Lh,r0,null);let f1=Lh;function oF(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Qg(i){return Math.max(0,Math.min(255,255*i))}class aF{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Qg(e),[e,e,e]}static G_HTML([e]){const t=oF(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Qg)}static RGB_HTML(e){return`#${e.map(oF).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Qg(1-Math.min(1,e+r)),Qg(1-Math.min(1,n+r)),Qg(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,o=1-n,a=Math.min(r,s,o);return["CMYK",r,s,o,a]}}class tee{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rn("Abstract method `_createSVG` called.")}}class p1 extends tee{_createSVG(e){return document.createElementNS(Ja,e)}}class j4{static setupStorage(e,t,n,r,s){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const u=a.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[u,h]of Object.entries(o))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!a||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}a&&s.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var m,p;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:n});const a=s!=="richText",u=e.div;if(u.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=g}a&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);o.append(g),a&&rv.shouldBuildText(r.name)&&h.push(g)}return{textDivs:h}}const d=[[r,-1,o]];for(;d.length>0;){const[g,w,_]=d.at(-1);if(w+1===g.children.length){d.pop();continue}const A=g.children[++d.at(-1)[1]];if(A===null)continue;const{name:v}=A;if(v==="#text"){const I=document.createTextNode(A.value);h.push(I),_.append(I);continue}const E=(m=A==null?void 0:A.attributes)!=null&&m.xmlns?document.createElementNS(A.attributes.xmlns,v):document.createElement(v);if(_.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:t,intent:s,linkService:n}),((p=A.children)==null?void 0:p.length)>0)d.push([A,-1,E]);else if(A.value){const I=document.createTextNode(A.value);a&&rv.shouldBuildText(v)&&h.push(I),E.append(I)}}for(const g of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const nee=9,Zd=new WeakSet,ree=new Date().getTimezoneOffset()*60*1e3;class lF{static create(e){switch(e.data.annotationType){case Gn.LINK:return new hD(e);case Gn.TEXT:return new iee(e);case Gn.WIDGET:switch(e.data.fieldType){case"Tx":return new see(e);case"Btn":return e.data.radioButton?new H4(e):e.data.checkBox?new aee(e):new lee(e);case"Ch":return new uee(e);case"Sig":return new oee(e)}return new cf(e);case Gn.POPUP:return new $S(e);case Gn.FREETEXT:return new Y4(e);case Gn.LINE:return new hee(e);case Gn.SQUARE:return new dee(e);case Gn.CIRCLE:return new fee(e);case Gn.POLYLINE:return new X4(e);case Gn.CARET:return new mee(e);case Gn.INK:return new dD(e);case Gn.POLYGON:return new pee(e);case Gn.HIGHLIGHT:return new Q4(e);case Gn.UNDERLINE:return new gee(e);case Gn.SQUIGGLY:return new yee(e);case Gn.STRIKEOUT:return new vee(e);case Gn.STAMP:return new Z4(e);case Gn.FILEATTACHMENT:return new wee(e);default:return new Vn(e)}}}var gd,fm,Cl,ef,q4,zS;const wD=class wD{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){z(this,ef);z(this,gd,null);z(this,fm,!1);z(this,Cl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return wD._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:e,rect:t}=this.data;let n=-1/0,r=-1/0;if((e==null?void 0:e.length)>=8){for(let s=0;s<e.length;s+=8)e[s+1]>r?(r=e[s+1],n=e[s+2]):e[s+1]===r&&(n=Math.max(n,e[s+2]));return[n,r]}return t?[t[2],t[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[e,t,n]=this.data.color,s=255*(1-(this.data.opacity??1));return W(this,ef,q4).call(this,Math.min(e+s,255),Math.min(t+s,255),Math.min(n+s,255))}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-o)/r,e}updateEdited(e){var s;if(!this.container)return;e.rect&&(f(this,gd)||U(this,gd,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&W(this,ef,zS).call(this,t);let r=((s=f(this,Cl))==null?void 0:s.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=f(this,Cl).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),U(this,Cl,null),this.popup=null))}resetEdited(){var e;f(this,gd)&&(W(this,ef,zS).call(this,f(this,gd).rect),(e=f(this,Cl))==null||e.popup.resetEdited(),U(this,gd,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof cf)&&!(this instanceof hD)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof $S){const{rotation:_}=t;return!t.hasOwnCanvas&&_!==0&&this.setRotation(_,s),s}const{width:a,height:u}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const _=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(_>0||A>0){const E=`calc(${_}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=E}else if(this instanceof H4){const E=`calc(${a}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=E}switch(t.borderStyle.style){case np.SOLID:o.borderStyle="solid";break;case np.DASHED:o.borderStyle="dashed";break;case np.BEVELED:Et("Unimplemented border style: beveled");break;case np.INSET:Et("Unimplemented border style: inset");break;case np.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(U(this,fm,!0),o.borderColor=Ke.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const h=Ke.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:m,pageX:p,pageY:g}=r.rawDims;o.left=`${100*(h[0]-p)/d}%`,o.top=`${100*(h[1]-g)/m}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(o.width=`${100*a/d}%`,o.height=`${100*u/m}%`):this.setRotation(w,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!==0&&([s,o]=[o,s]),t.style.width=`${100*s/n}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[n]=aF[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:aF[`${o}_rgb`](a)})};return Rt(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const o=n[r];if(o){const a={detail:{[r]:s},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map(_=>Math.fround(_));if(e.length===8){const[_,A,v,E]=e.subarray(2,6);if(r===_&&s===A&&t===v&&n===E)return}const{style:o}=this.container;let a;if(f(this,fm)){const{borderColor:_,borderWidth:A}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const u=r-t,h=s-n,{svgFactory:d}=this,m=d.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const p=d.createElement("defs");m.append(p);const g=d.createElement("clipPath"),w=`clippath_${this.data.id}`;g.setAttribute("id",w),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let _=2,A=e.length;_<A;_+=8){const v=e[_],E=e[_+1],I=e[_+2],S=e[_+3],R=d.createElement("rect"),F=(I-t)/u,k=(s-E)/h,T=(v-I)/u,D=(E-S)/h;R.setAttribute("x",F),R.setAttribute("y",k),R.setAttribute("width",T),R.setAttribute("height",D),g.append(R),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${k}" width="${T}" height="${D}"/>`)}f(this,fm)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(m),this.container.style.clipPath=`url(#${w})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const s=U(this,Cl,new $S({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}get hasPopupElement(){return!!(f(this,Cl)||this.popup||this.data.popupRef)}render(){rn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(s===-1||o===t)continue;const u=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Zd.has(h)){Et(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:u,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&Zd.has(r)&&n.push({id:o,exportValue:s,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};gd=new WeakMap,fm=new WeakMap,Cl=new WeakMap,ef=new WeakSet,q4=function(e,t,n){e/=255,t/=255,n/=255;const r=Math.max(e,t,n),s=Math.min(e,t,n),o=(r+s)/2,a=((1+Math.sqrt(o))/2*100).toFixed(2);if(r===s)return`hsl(0, 0%, ${a}%)`;const u=r-s;let h;r===e?h=(t-n)/u+(t<n?6:0):r===t?h=(n-e)/u+2:h=(e-t)/u+4,h=(h*60).toFixed(2);const d=(u/(1-Math.abs(2*o-1))*100).toFixed(2);return`hsl(${h}, ${d}%, ${a}%)`},zS=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:u}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+u)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let Vn=wD;var gs,Rh,U4,V4;class hD extends Vn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});z(this,gs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),s=!0):t.attachment?(W(this,gs,U4).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(W(this,gs,V4).call(this,r,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&W(this,gs,Rh).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),W(this,gs,Rh).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const o=r.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),W(this,gs,Rh).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),W(this,gs,Rh).call(this),!this._fieldObjects){Et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var m;r==null||r();const{fields:s,refs:o,include:a}=n,u=[];if(s.length!==0||o.length!==0){const p=new Set(o);for(const g of s){const w=this._fieldObjects[g]||[];for(const{id:_}of w)p.add(_)}for(const g of Object.values(this._fieldObjects))for(const w of g)p.has(w.id)===a&&u.push(w)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,d=[];for(const p of u){const{id:g}=p;switch(d.push(g),p.type){case"text":{const _=p.defaultValue||"";h.setValue(g,{value:_});break}case"checkbox":case"radiobutton":{const _=p.defaultValue===p.exportValues;h.setValue(g,{value:_});break}case"combobox":case"listbox":{const _=p.defaultValue||"";h.setValue(g,{value:_});break}default:continue}const w=document.querySelector(`[data-element-id="${g}"]`);if(w){if(!Zd.has(w)){Et(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}gs=new WeakSet,Rh=function(){this.container.setAttribute("data-internal-link","")},U4=function(t,n,r="",s=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,s),!1},W(this,gs,Rh).call(this)},V4=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),W(this,gs,Rh).call(this)};class iee extends Vn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class cf extends Vn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return $r.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var a;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(e,t,n,r){var s,o,a;for(const[u,h]of n)(h==="Action"||(s=this.data.actions)!=null&&s[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,h,r),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ke.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||nee,s=e.style;let o;const a=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(h/(gx*r))||1,m=h/d;o=Math.min(r,u(m/gx))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,u(h/gx))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=Ke.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class see extends cf{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),s.setValue(o.id,{[r]:n})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&a.length>u&&(a=a.slice(0,u));let h=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Zd.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:m,datetimeType:p,timeStep:g}=this.data,w=!!p&&this.enableScripting;m&&(n.title=m),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",A=>{const v=this.data.defaultFieldValue??"";n.value=d.userValue=v,d.formattedValue=null});let _=A=>{const{formattedValue:v}=d;v!=null&&(A.target.value=v),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var I;if(d.focused)return;const{target:E}=v;if(w&&(E.type=p,g&&(E.step=g)),d.userValue){const S=d.userValue;if(w)if(p==="time"){const R=new Date(S),F=[R.getHours(),R.getMinutes(),R.getSeconds()];E.value=F.map(k=>k.toString().padStart(2,"0")).join(":")}else E.value=new Date(S-ree).toISOString().split(p==="date"?"T":".",1)[0];else E.value=S}d.lastCommittedValue=E.value,d.commitKey=1,(I=this.data.actions)!=null&&I.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const E={value(I){d.userValue=I.detail.value??"",w||e.setValue(t,{value:d.userValue.toString()}),I.target.value=d.userValue},formattedValue(I){const{formattedValue:S}=I.detail;d.formattedValue=S,S!=null&&I.target!==document.activeElement&&(I.target.value=S);const R={formattedValue:S};w&&(R.value=S),e.setValue(t,R)},selRange(I){I.target.setSelectionRange(...I.detail.selRange)},charLimit:I=>{var k;const{charLimit:S}=I.detail,{target:R}=I;if(S===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",S);let F=d.userValue;!F||F.length<=S||(F=F.slice(0,S),R.value=d.userValue=F,e.setValue(t,{value:F}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(E,v)}),n.addEventListener("keydown",v=>{var S;d.commitKey=1;let E=-1;if(v.key==="Escape"?E=0:v.key==="Enter"&&!this.data.multiLine?E=2:v.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:I}=v.target;d.lastCommittedValue!==I&&(d.lastCommittedValue=I,d.userValue=I,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:E,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const A=_;_=null,n.addEventListener("blur",v=>{var S,R;if(!d.focused||!v.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(d.focused=!1);const{target:E}=v;let{value:I}=E;if(w){if(I&&p==="time"){const F=I.split(":").map(k=>parseInt(k,10));I=new Date(2e3,0,1,F[0],F[1],F[2]||0).valueOf(),E.step=""}else I=new Date(I).valueOf();E.type="text"}d.userValue=I,d.lastCommittedValue!==I&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),A(v)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",v=>{var D;d.lastCommittedValue=null;const{data:E,target:I}=v,{value:S,selectionStart:R,selectionEnd:F}=I;let k=R,T=F;switch(v.inputType){case"deleteWordBackward":{const P=S.substring(0,R).match(/\w*[^\w]*$/);P&&(k-=P[0].length);break}case"deleteWordForward":{const P=S.substring(R).match(/^[^\w]*\w*/);P&&(T+=P[0].length);break}case"deleteContentBackward":R===F&&(k-=1);break;case"deleteContentForward":R===F&&(T+=1);break}v.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:E||"",willCommit:!1,selStart:k,selEnd:T}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(_&&n.addEventListener("blur",_),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class oee extends cf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class aee extends cf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Zd.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:u}=o.target;for(const h of this._getElementsByName(a,n)){const d=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}e.setValue(n,{value:u})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class H4 extends cf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Zd.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:u}=o.target;for(const h of this._getElementsByName(a,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:u})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const u={value:h=>{const d=o===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const p=d&&m.id===n;m.domElement&&(m.domElement.checked=p),e.setValue(m.id,{value:p})}}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class lee extends hD{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class uee extends cf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Zd.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const m=this.data.defaultFieldValue;for(const p of r.options)p.selected=p.value===m});for(const d of this.data.options){const m=document.createElement("option");m.textContent=d.displayValue,m.value=d.exportValue,n.value.includes(d.exportValue)&&(m.setAttribute("selected",!0),s=!1),r.append(m)}let o=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),o=()=>{d.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=d=>{const m=d?"value":"textContent",{options:p,multiple:g}=r;return g?Array.prototype.filter.call(p,w=>w.selected).map(w=>w[m]):p.selectedIndex===-1?null:p[p.selectedIndex][m]};let u=a(!1);const h=d=>{const m=d.target.options;return Array.prototype.map.call(m,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const m={value(p){o==null||o();const g=p.detail.value,w=new Set(Array.isArray(g)?g:[g]);for(const _ of r.options)_.selected=w.has(_.value);e.setValue(t,{value:a(!0)}),u=a(!1)},multipleSelection(p){r.multiple=!0},remove(p){const g=r.options,w=p.detail.remove;g[w].selected=!1,r.remove(w),g.length>0&&Array.prototype.findIndex.call(g,A=>A.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:h(p)}),u=a(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),u=a(!1)},insert(p){const{index:g,displayValue:w,exportValue:_}=p.detail.insert,A=r.children[g],v=document.createElement("option");v.textContent=w,v.value=_,A?A.before(v):r.append(v),e.setValue(t,{value:a(!0),items:h(p)}),u=a(!1)},items(p){const{items:g}=p.detail;for(;r.length!==0;)r.remove(0);for(const w of g){const{displayValue:_,exportValue:A}=w,v=document.createElement("option");v.textContent=_,v.value=A,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:h(p)}),u=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const w of p.target.options)w.selected=g.has(w.index);e.setValue(t,{value:a(!0)}),u=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(m,d)}),r.addEventListener("input",d=>{var g;const m=a(!0),p=a(!1);e.setValue(t,{value:m}),d.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:p,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $S extends Vn{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Vn._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new cee({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${sD}${r}`).join(",")),this.container}}var yd,k1,R1,vd,pm,On,xl,fc,Sl,i0,s0,mm,la,is,Tl,Il,o0,pc,gm,a0,Dl,ym,wd,mc,Ot,g_,z4,$4,y_,WS,W4,G4,K4,J4,v_,w_,GS;class cee{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:u,rect:h,parentRect:d,open:m,eventBus:p=null}){z(this,Ot);z(this,yd,W(this,Ot,K4).bind(this));z(this,k1,W(this,Ot,GS).bind(this));z(this,R1,W(this,Ot,w_).bind(this));z(this,vd,W(this,Ot,v_).bind(this));z(this,pm,null);z(this,On,null);z(this,xl,null);z(this,fc,null);z(this,Sl,null);z(this,i0,null);z(this,s0,null);z(this,mm,null);z(this,la,!1);z(this,is,null);z(this,Tl,null);z(this,Il,null);z(this,o0,null);z(this,pc,null);z(this,gm,null);z(this,a0,null);z(this,Dl,null);z(this,ym,null);z(this,wd,null);z(this,mc,!1);U(this,On,e),U(this,ym,r),U(this,xl,o),U(this,Dl,a),U(this,s0,u),U(this,pm,t),U(this,a0,h),U(this,mm,d),U(this,Sl,n),U(this,i0,p),U(this,fc,l1.toDateObject(s)),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup()),W(this,Ot,g_).call(this),f(this,On).hidden=!0,m&&W(this,Ot,v_).call(this)}render(){var r;if(f(this,is))return;const e=U(this,is,document.createElement("div"));if(e.className="popup",f(this,pm)){const s=e.style.outlineColor=Ke.makeHexColor(...f(this,pm));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=f(this,ym))!=null&&r.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=f(this,ym)}if(e.append(t),f(this,fc)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,fc).valueOf()})),s.dateTime=f(this,fc).toISOString(),t.append(s)}const n=f(this,Ot,y_);if(n)j4.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(f(this,xl));e.append(s)}f(this,On).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const a=r[s];n.append(document.createTextNode(a)),s<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popup:t,deleted:n}){var r;if(n||t!=null&&t.deleted){this.remove();return}W(this,Ot,g_).call(this),f(this,wd)||U(this,wd,{contentsObj:f(this,xl),richText:f(this,Dl)}),e&&U(this,Il,null),t&&(U(this,Dl,W(this,Ot,G4).call(this,t.text)),U(this,fc,l1.toDateObject(t.date)),U(this,xl,null)),(r=f(this,is))==null||r.remove(),U(this,is,null)}resetEdited(){var e;f(this,wd)&&({contentsObj:ir(this,xl)._,richText:ir(this,Dl)._}=f(this,wd),U(this,wd,null),(e=f(this,is))==null||e.remove(),U(this,is,null),U(this,Il,null))}remove(){var e,t;(e=f(this,Tl))==null||e.abort(),U(this,Tl,null),(t=f(this,is))==null||t.remove(),U(this,is,null),U(this,mc,!1),U(this,la,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){U(this,mc,this.isVisible),f(this,mc)&&(f(this,On).hidden=!0)}maybeShow(){W(this,Ot,g_).call(this),f(this,mc)&&(f(this,is)||W(this,Ot,w_).call(this),U(this,mc,!1),f(this,On).hidden=!1)}get isVisible(){return f(this,On).hidden===!1}}yd=new WeakMap,k1=new WeakMap,R1=new WeakMap,vd=new WeakMap,pm=new WeakMap,On=new WeakMap,xl=new WeakMap,fc=new WeakMap,Sl=new WeakMap,i0=new WeakMap,s0=new WeakMap,mm=new WeakMap,la=new WeakMap,is=new WeakMap,Tl=new WeakMap,Il=new WeakMap,o0=new WeakMap,pc=new WeakMap,gm=new WeakMap,a0=new WeakMap,Dl=new WeakMap,ym=new WeakMap,wd=new WeakMap,mc=new WeakMap,Ot=new WeakSet,g_=function(){var t;if(f(this,Tl))return;U(this,Tl,new AbortController);const{signal:e}=f(this,Tl);for(const n of this.trigger)n.addEventListener("click",f(this,vd),{signal:e}),n.addEventListener("mouseenter",f(this,R1),{signal:e}),n.addEventListener("mouseleave",f(this,k1),{signal:e}),n.classList.add("popupTriggerArea");for(const n of f(this,Sl))(t=n.container)==null||t.addEventListener("keydown",f(this,yd),{signal:e});W(this,Ot,$4).call(this)},z4=function(){const e=f(this,Sl).find(t=>t.hasCommentButton);e&&(U(this,pc,e._normalizePoint(e.commentButtonPosition)),U(this,gm,e.commentButtonColor))},$4=function(){if(f(this,o0)||(f(this,pc)||W(this,Ot,z4).call(this),!f(this,pc)))return;const e=U(this,o0,document.createElement("button"));e.className="annotationCommentButton";const t=f(this,Sl)[0].container;e.style.zIndex=t.style.zIndex+1,e.tabIndex=0;const{signal:n}=f(this,Tl);e.addEventListener("hover",f(this,vd),{signal:n}),e.addEventListener("keydown",f(this,yd),{signal:n}),e.addEventListener("click",()=>{var a;const[{data:{id:s},annotationEditorType:o}]=f(this,Sl);(a=f(this,i0))==null||a.dispatch("switchannotationeditormode",{source:this,editId:s,mode:o,editComment:!0})},{signal:n});const{style:r}=e;r.left=`calc(${f(this,pc)[0]}%)`,r.top=`calc(${f(this,pc)[1]}% - var(--comment-button-dim))`,f(this,gm)&&(r.backgroundColor=f(this,gm)),t.after(e)},y_=function(){const e=f(this,Dl),t=f(this,xl);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&f(this,Dl).html||null},WS=function(){var e,t,n;return((n=(t=(e=f(this,Ot,y_))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},W4=function(){var e,t,n;return((n=(t=(e=f(this,Ot,y_))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},G4=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:f(this,Ot,W4),fontSize:f(this,Ot,WS)?`calc(${f(this,Ot,WS)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n},K4=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&f(this,la))&&W(this,Ot,v_).call(this)},J4=function(){if(f(this,Il)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=f(this,s0);let o=!!f(this,mm),a=o?f(this,mm):f(this,a0);for(const w of f(this,Sl))if(!a||Ke.intersect(w.data.rect,a)!==null){a=w.data.rect,o=!0;break}const u=Ke.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,m=u[0]+d,p=u[1];U(this,Il,[100*(m-r)/t,100*(p-s)/n]);const{style:g}=f(this,On);g.left=`${f(this,Il)[0]}%`,g.top=`${f(this,Il)[1]}%`},v_=function(){U(this,la,!f(this,la)),f(this,la)?(W(this,Ot,w_).call(this),f(this,On).addEventListener("click",f(this,vd)),f(this,On).addEventListener("keydown",f(this,yd))):(W(this,Ot,GS).call(this),f(this,On).removeEventListener("click",f(this,vd)),f(this,On).removeEventListener("keydown",f(this,yd)))},w_=function(){f(this,is)||this.render(),this.isVisible?f(this,la)&&f(this,On).classList.add("focused"):(W(this,Ot,J4).call(this),f(this,On).hidden=!1,f(this,On).style.zIndex=parseInt(f(this,On).style.zIndex)+1e3)},GS=function(){f(this,On).classList.remove("focused"),!(f(this,la)||!this.isVisible)&&(f(this,On).hidden=!0,f(this,On).style.zIndex=parseInt(f(this,On).style.zIndex)-1e3)};class Y4 extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var l0;class hee extends Vn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});z(this,l0,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),o=U(this,l0,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,l0)}addHighlightArea(){this.container.classList.add("highlightArea")}}l0=new WeakMap;var u0;class dee extends Vn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});z(this,u0,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,a=U(this,u0,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,u0)}addHighlightArea(){this.container.classList.add("highlightArea")}}u0=new WeakMap;var c0;class fee extends Vn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});z(this,c0,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,a=U(this,c0,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",r/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,c0)}addHighlightArea(){this.container.classList.add("highlightArea")}}c0=new WeakMap;var h0;class X4 extends Vn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});z(this,h0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:s},width:o,height:a}=this;if(!n)return this.container;const u=this.svgFactory.create(o,a,!0);let h=[];for(let m=0,p=n.length;m<p;m+=2){const g=n[m]-t[0],w=t[3]-n[m+1];h.push(`${g},${w}`)}h=h.join(" ");const d=U(this,h0,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",h),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d),this.container.append(u),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,h0)}addHighlightArea(){this.container.classList.add("highlightArea")}}h0=new WeakMap;class pee extends X4{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mee extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var d0,_d,f0,KS;class dD extends Vn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});z(this,f0);z(this,d0,null);z(this,_d,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:s,popupRef:o}}=this,{transform:a,width:u,height:h}=W(this,f0,KS).call(this,n,t),d=this.svgFactory.create(u,h,!0),m=U(this,d0,this.svgFactory.createElement("svg:g"));d.append(m),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",a);for(let p=0,g=r.length;p<g;p++){const w=this.svgFactory.createElement(this.svgElementName);f(this,_d).push(w),w.setAttribute("points",r[p].join(",")),m.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:s}=t,o=f(this,d0);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let a=0,u=f(this,_d).length;a<u;a++)f(this,_d)[a].setAttribute("points",r[a].join(","));if(s){const{transform:a,width:u,height:h}=W(this,f0,KS).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return f(this,_d)}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:n}=this.data;if((t==null?void 0:t.length)>=1){let r=-1/0,s=-1/0;for(const o of t)for(let a=0,u=o.length;a<u;a+=2)o[a+1]>s?(s=o[a+1],r=o[a]):o[a+1]===s&&(r=Math.max(r,o[a]));if(r!==1/0)return[r,s]}return n?[n[2],n[3]]:null}}d0=new WeakMap,_d=new WeakMap,f0=new WeakSet,KS=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Q4 extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class gee extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class yee extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class vee extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Z4 extends Vn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var p0,m0,JS;class wee extends Vn{constructor(t){var r;super(t,{isRenderable:!0});z(this,m0);z(this,p0,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",W(this,m0,JS).bind(this)),U(this,p0,r);const{isMac:s}=$r.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&W(this,m0,JS).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return f(this,p0)}addHighlightArea(){this.container.classList.add("highlightArea")}}p0=new WeakMap,m0=new WeakSet,JS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var g0,Ad,gc,y0,Jc,XS,QS;const _D=class _D{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:a}){z(this,Jc);z(this,g0,null);z(this,Ad,null);z(this,gc,new Map);z(this,y0,null);this.div=e,U(this,g0,t),U(this,Ad,n),U(this,y0,a||null),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return f(this,gc).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;Xd(n,this.viewport);const r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new p1,annotationStorage:e.annotationStorage||new lD,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const u=a.annotationType===Gn.POPUP;if(u){const m=r.get(a.id);if(!m)continue;s.elements=m}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;const h=lF.create(s);if(!h.isRenderable)continue;if(!u&&a.popupRef){const m=r.get(a.popupRef);m?m.push(h):r.set(a.popupRef,[h])}const d=h.render();a.hidden&&(d.style.visibility="hidden"),await W(this,Jc,XS).call(this,d,a.id,s.elements),h._isEditable&&(f(this,gc).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}W(this,Jc,QS).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new p1,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=_D._defaultBorderStyle),n.data=r;const s=lF.create(n);if(!s.isRenderable)continue;const o=s.render();await W(this,Jc,XS).call(this,o,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Xd(t,{rotation:e.rotation}),W(this,Jc,QS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(f(this,gc).values())}getEditableAnnotation(e){return f(this,gc).get(e)}static get _defaultBorderStyle(){return Rt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:np.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};g0=new WeakMap,Ad=new WeakMap,gc=new WeakMap,y0=new WeakMap,Jc=new WeakSet,XS=async function(e,t,n){var a,u;const r=e.firstChild||e,s=r.id=`${sD}${t}`,o=await((a=f(this,y0))==null?void 0:a.getAriaAttributes(s));if(o)for(const[h,d]of o)r.setAttribute(h,d);n?n.at(-1).container.after(e):(this.div.append(e),(u=f(this,g0))==null||u.moveElementInDOM(this.div,e,r,!1))},QS=function(){var t;if(!f(this,Ad))return;const e=this.div;for(const[n,r]of f(this,Ad)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):s.append(r);const a=f(this,gc).get(n);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,s.id,r),a._hasNoCanvas=!1):a.canvas=r)}f(this,Ad).clear()};let YS=_D;const jw=/\r\n?|\n/g;var qs,ss,v0,bd,os,Zn,ej,tj,nj,__,Wl,A_,b_,rj,eT,ij;const pn=class pn extends cn{constructor(t){super({...t,name:"freeTextEditor"});z(this,Zn);z(this,qs);z(this,ss,"");z(this,v0,`${this.id}-editor`);z(this,bd,null);z(this,os);ie(this,"_colorPicker",null);U(this,qs,t.color||pn._defaultColor||cn._defaultLineColor),U(this,os,t.fontSize||pn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=pn.prototype,n=o=>o.isEmpty(),r=Qd.TRANSLATE_SMALL,s=Qd.TRANSLATE_BIG;return Rt(this,"_keyboardManager",new n2([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){cn.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ft.FREETEXT_SIZE:pn._defaultFontSize=n;break;case Ft.FREETEXT_COLOR:pn._defaultColor=n;break}}updateParams(t,n){switch(t){case Ft.FREETEXT_SIZE:W(this,Zn,ej).call(this,n);break;case Ft.FREETEXT_COLOR:W(this,Zn,tj).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ft.FREETEXT_SIZE,pn._defaultFontSize],[Ft.FREETEXT_COLOR,pn._defaultColor||cn._defaultLineColor]]}get propertiesToUpdate(){return[[Ft.FREETEXT_SIZE,f(this,os)],[Ft.FREETEXT_COLOR,f(this,qs)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new f1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ft.FREETEXT_COLOR}get colorValue(){return f(this,qs)}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-pn._internalPadding*t,-(pn._internalPadding+f(this,os))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),U(this,bd,new AbortController);const t=this._uiManager.combinedSignal(f(this,bd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,v0)),this._isDraggable=!0,(t=f(this,bd))==null||t.abort(),U(this,bd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=f(this,ss),n=U(this,ss,W(this,Zn,nj).call(this).trimEnd());if(t===n)return;const r=s=>{if(U(this,ss,s),!s){this.remove();return}W(this,Zn,b_).call(this),this._uiManager.rebuild(this),W(this,Zn,__).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),W(this,Zn,__).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){pn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,v0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${f(this,os)}px * var(--total-scale-factor))`,r.color=f(this,qs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[d,m]=this.pageDimensions,[p,g]=this.pageTranslation;let w,_;switch(this.rotation){case 0:w=t+(a[0]-p)/d,_=n+this.height-(a[1]-g)/m;break;case 90:w=t+(a[0]-p)/d,_=n-(a[1]-g)/m,[u,h]=[h,-u];break;case 180:w=t-this.width+(a[0]-p)/d,_=n-(a[1]-g)/m,[u,h]=[-u,-h];break;case 270:w=t+(a[0]-p-this.height*m)/d,_=n+(a[1]-g-this.width*d)/m,[u,h]=[-h,u];break}this.setAt(w*s,_*o,u,h)}else this._moveAfterPaste(t,n);W(this,Zn,b_).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var w,_,A;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=W(w=pn,Wl,eT).call(w,n.getData("text")||"").replaceAll(jw,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=a,d=[],m=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(m.push(u.nodeValue.slice(h).replaceAll(jw,"")),v!==this.editorDiv){let E=d;for(const I of this.editorDiv.childNodes){if(I===v){E=m;continue}E.push(W(_=pn,Wl,A_).call(_,I))}}d.push(u.nodeValue.slice(0,h).replaceAll(jw,""))}else if(u===this.editorDiv){let v=d,E=0;for(const I of this.editorDiv.childNodes)E++===h&&(v=m),v.push(W(A=pn,Wl,A_).call(A,I))}U(this,ss,`${d.join(`
`)}${s}${m.join(`
`)}`),W(this,Zn,b_).call(this);const p=new Range;let g=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const E=v.nodeValue.length;if(g<=E){p.setStart(v,g),p.setEnd(v,g);break}g-=E}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=pn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var a;let s=null;if(t instanceof Y4){const{data:{defaultAppearanceData:{fontSize:u,fontColor:h},rect:d,rotation:m,id:p,popupRef:g,contentsObj:w},textContent:_,textPosition:A,parent:{page:{pageNumber:v}}}=t;if(!_||_.length===0)return null;s=t={annotationType:yt.FREETEXT,color:Array.from(h),fontSize:u,value:_.join(`
`),position:A,pageIndex:v-1,rect:d.slice(0),rotation:m,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:(w==null?void 0:w.str)||null}}const o=await super.deserialize(t,n,r);return U(o,os,t.fontSize),U(o,qs,Ke.makeHexColor(...t.color)),U(o,ss,W(a=pn,Wl,eT).call(a,t.value)),o._initialData=s,t.comment&&o.setCommentData(t.comment),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),r=cn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,qs)),s={annotationType:yt.FREETEXT,color:r,fontSize:f(this,os),value:W(this,Zn,rj).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!W(this,Zn,ij).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${f(this,os)}px * var(--total-scale-factor))`,r.color=f(this,qs),n.replaceChildren();for(const o of f(this,ss).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const s={rect:this.getPDFRect()};return s.popup=this.hasEditedComment?this.comment:{text:f(this,ss)},t.updateEdited(s),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};qs=new WeakMap,ss=new WeakMap,v0=new WeakMap,bd=new WeakMap,os=new WeakMap,Zn=new WeakSet,ej=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-f(this,os))*this.parentScale),U(this,os,s),W(this,Zn,__).call(this)},r=f(this,os);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},tj=function(t){const n=s=>{var o;U(this,qs,this.editorDiv.style.color=s),(o=this._colorPicker)==null||o.update(s)},r=f(this,qs);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},nj=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(W(r=pn,Wl,A_).call(r,s)),n=s);return t.join(`
`)},__=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Wl=new WeakSet,A_=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(jw,"")},b_=function(){if(this.editorDiv.replaceChildren(),!!f(this,ss))for(const t of f(this,ss).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},rj=function(){return f(this,ss).replaceAll(""," ")},eT=function(t){return t.replaceAll(" ","")},ij=function(t){const{value:n,fontSize:r,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((a,u)=>a!==s[u])||t.pageIndex!==o},z(pn,Wl),ie(pn,"_freeTextDefaultContent",""),ie(pn,"_internalPadding",0),ie(pn,"_defaultColor",null),ie(pn,"_defaultFontSize",10),ie(pn,"_type","freetext"),ie(pn,"_editorType",yt.FREETEXT);let ZS=pn;class He{toSVGPath(){rn("Abstract method `toSVGPath` must be implemented.")}get box(){rn("Abstract getter `box` must be implemented.")}serialize(e,t){rn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,s,o){o||(o=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)o[a]=t+e[a]*r,o[a+1]=n+e[a+1]*s;return o}static _rescaleAndSwap(e,t,n,r,s,o){o||(o=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)o[a]=t+e[a+1]*r,o[a+1]=n+e[a]*s;return o}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)r[s]=t+e[s],r[s+1]=n+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,s){switch(s){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,s,o){return[(e+5*n)/6,(t+5*r)/6,(5*n+s)/6,(5*r+o)/6,(n+s)/2,(r+o)/2]}}ie(He,"PRECISION",1e-4);var as,_o,vm,wm,ua,Dt,Ed,Cd,w0,_0,_m,Am,yc,A0,P1,N1,dr,Ey,sj,oj,aj,lj,uj,cj;const Za=class Za{constructor({x:e,y:t},n,r,s,o,a=0){z(this,dr);z(this,as);z(this,_o,[]);z(this,vm);z(this,wm);z(this,ua,[]);z(this,Dt,new Float32Array(18));z(this,Ed);z(this,Cd);z(this,w0);z(this,_0);z(this,_m);z(this,Am);z(this,yc,[]);U(this,as,n),U(this,Am,s*r),U(this,wm,o),f(this,Dt).set([NaN,NaN,NaN,NaN,e,t],6),U(this,vm,a),U(this,_0,f(Za,A0)*r),U(this,w0,f(Za,N1)*r),U(this,_m,r),f(this,yc).push(e,t)}isEmpty(){return isNaN(f(this,Dt)[8])}add({x:e,y:t}){var D;U(this,Ed,e),U(this,Cd,t);const[n,r,s,o]=f(this,as);let[a,u,h,d]=f(this,Dt).subarray(8,12);const m=e-h,p=t-d,g=Math.hypot(m,p);if(g<f(this,w0))return!1;const w=g-f(this,_0),_=w/g,A=_*m,v=_*p;let E=a,I=u;a=h,u=d,h+=A,d+=v,(D=f(this,yc))==null||D.push(e,t);const S=-v/w,R=A/w,F=S*f(this,Am),k=R*f(this,Am);return f(this,Dt).set(f(this,Dt).subarray(2,8),0),f(this,Dt).set([h+F,d+k],4),f(this,Dt).set(f(this,Dt).subarray(14,18),12),f(this,Dt).set([h-F,d-k],16),isNaN(f(this,Dt)[6])?(f(this,ua).length===0&&(f(this,Dt).set([a+F,u+k],2),f(this,ua).push(NaN,NaN,NaN,NaN,(a+F-n)/s,(u+k-r)/o),f(this,Dt).set([a-F,u-k],14),f(this,_o).push(NaN,NaN,NaN,NaN,(a-F-n)/s,(u-k-r)/o)),f(this,Dt).set([E,I,a,u,h,d],6),!this.isEmpty()):(f(this,Dt).set([E,I,a,u,h,d],6),Math.abs(Math.atan2(I-u,E-a)-Math.atan2(v,A))<Math.PI/2?([a,u,h,d]=f(this,Dt).subarray(2,6),f(this,ua).push(NaN,NaN,NaN,NaN,((a+h)/2-n)/s,((u+d)/2-r)/o),[a,u,E,I]=f(this,Dt).subarray(14,18),f(this,_o).push(NaN,NaN,NaN,NaN,((E+a)/2-n)/s,((I+u)/2-r)/o),!0):([E,I,a,u,h,d]=f(this,Dt).subarray(0,6),f(this,ua).push(((E+5*a)/6-n)/s,((I+5*u)/6-r)/o,((5*a+h)/6-n)/s,((5*u+d)/6-r)/o,((a+h)/2-n)/s,((u+d)/2-r)/o),[h,d,a,u,E,I]=f(this,Dt).subarray(12,18),f(this,_o).push(((E+5*a)/6-n)/s,((I+5*u)/6-r)/o,((5*a+h)/6-n)/s,((5*u+d)/6-r)/o,((a+h)/2-n)/s,((u+d)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=f(this,ua),t=f(this,_o);if(isNaN(f(this,Dt)[6])&&!this.isEmpty())return W(this,dr,sj).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);W(this,dr,aj).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return W(this,dr,oj).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,s,o){return new hj(e,t,n,r,s,o)}getOutlines(){var m;const e=f(this,ua),t=f(this,_o),n=f(this,Dt),[r,s,o,a]=f(this,as),u=new Float32Array((((m=f(this,yc))==null?void 0:m.length)??0)+2);for(let p=0,g=u.length-2;p<g;p+=2)u[p]=(f(this,yc)[p]-r)/o,u[p+1]=(f(this,yc)[p+1]-s)/a;if(u[u.length-2]=(f(this,Ed)-r)/o,u[u.length-1]=(f(this,Cd)-s)/a,isNaN(n[6])&&!this.isEmpty())return W(this,dr,lj).call(this,u);const h=new Float32Array(f(this,ua).length+24+f(this,_o).length);let d=e.length;for(let p=0;p<d;p+=2){if(isNaN(e[p])){h[p]=h[p+1]=NaN;continue}h[p]=e[p],h[p+1]=e[p+1]}d=W(this,dr,cj).call(this,h,d);for(let p=t.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(t[p+g])){h[d]=h[d+1]=NaN,d+=2;continue}h[d]=t[p+g],h[d+1]=t[p+g+1],d+=2}return W(this,dr,uj).call(this,h,d),this.newFreeDrawOutline(h,u,f(this,as),f(this,_m),f(this,vm),f(this,wm))}};as=new WeakMap,_o=new WeakMap,vm=new WeakMap,wm=new WeakMap,ua=new WeakMap,Dt=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,w0=new WeakMap,_0=new WeakMap,_m=new WeakMap,Am=new WeakMap,yc=new WeakMap,A0=new WeakMap,P1=new WeakMap,N1=new WeakMap,dr=new WeakSet,Ey=function(){const e=f(this,Dt).subarray(4,6),t=f(this,Dt).subarray(16,18),[n,r,s,o]=f(this,as);return[(f(this,Ed)+(e[0]-t[0])/2-n)/s,(f(this,Cd)+(e[1]-t[1])/2-r)/o,(f(this,Ed)+(t[0]-e[0])/2-n)/s,(f(this,Cd)+(t[1]-e[1])/2-r)/o]},sj=function(){const[e,t,n,r]=f(this,as),[s,o,a,u]=W(this,dr,Ey).call(this);return`M${(f(this,Dt)[2]-e)/n} ${(f(this,Dt)[3]-t)/r} L${(f(this,Dt)[4]-e)/n} ${(f(this,Dt)[5]-t)/r} L${s} ${o} L${a} ${u} L${(f(this,Dt)[16]-e)/n} ${(f(this,Dt)[17]-t)/r} L${(f(this,Dt)[14]-e)/n} ${(f(this,Dt)[15]-t)/r} Z`},oj=function(e){const t=f(this,_o);e.push(`L${t[4]} ${t[5]} Z`)},aj=function(e){const[t,n,r,s]=f(this,as),o=f(this,Dt).subarray(4,6),a=f(this,Dt).subarray(16,18),[u,h,d,m]=W(this,dr,Ey).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/s} L${u} ${h} L${d} ${m} L${(a[0]-t)/r} ${(a[1]-n)/s}`)},lj=function(e){const t=f(this,Dt),[n,r,s,o]=f(this,as),[a,u,h,d]=W(this,dr,Ey).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/o],0),this.newFreeDrawOutline(m,e,f(this,as),f(this,_m),f(this,vm),f(this,wm))},uj=function(e,t){const n=f(this,_o);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},cj=function(e,t){const n=f(this,Dt).subarray(4,6),r=f(this,Dt).subarray(16,18),[s,o,a,u]=f(this,as),[h,d,m,p]=W(this,dr,Ey).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-o)/u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/u],t),t+=24},z(Za,A0,8),z(Za,P1,2),z(Za,N1,f(Za,A0)+f(Za,P1));let m1=Za;var bm,xd,kl,b0,ls,E0,qn,O1,dj;class hj extends He{constructor(t,n,r,s,o,a){super();z(this,O1);z(this,bm);z(this,xd,new Float32Array(4));z(this,kl);z(this,b0);z(this,ls);z(this,E0);z(this,qn);U(this,qn,t),U(this,ls,n),U(this,bm,r),U(this,E0,s),U(this,kl,o),U(this,b0,a),this.lastPoint=[NaN,NaN],W(this,O1,dj).call(this,a);const[u,h,d,m]=f(this,xd);for(let p=0,g=t.length;p<g;p+=2)t[p]=(t[p]-u)/d,t[p+1]=(t[p+1]-h)/m;for(let p=0,g=n.length;p<g;p+=2)n[p]=(n[p]-u)/d,n[p+1]=(n[p+1]-h)/m}toSVGPath(){const t=[`M${f(this,qn)[4]} ${f(this,qn)[5]}`];for(let n=6,r=f(this,qn).length;n<r;n+=6){if(isNaN(f(this,qn)[n])){t.push(`L${f(this,qn)[n+4]} ${f(this,qn)[n+5]}`);continue}t.push(`C${f(this,qn)[n]} ${f(this,qn)[n+1]} ${f(this,qn)[n+2]} ${f(this,qn)[n+3]} ${f(this,qn)[n+4]} ${f(this,qn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,s],o){const a=r-t,u=s-n;let h,d;switch(o){case 0:h=He._rescale(f(this,qn),t,s,a,-u),d=He._rescale(f(this,ls),t,s,a,-u);break;case 90:h=He._rescaleAndSwap(f(this,qn),t,n,a,u),d=He._rescaleAndSwap(f(this,ls),t,n,a,u);break;case 180:h=He._rescale(f(this,qn),r,n,-a,u),d=He._rescale(f(this,ls),r,n,-a,u);break;case 270:h=He._rescaleAndSwap(f(this,qn),r,s,-a,-u),d=He._rescaleAndSwap(f(this,ls),r,s,-a,-u);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return f(this,xd)}newOutliner(t,n,r,s,o,a=0){return new m1(t,n,r,s,o,a)}getNewOutline(t,n){const[r,s,o,a]=f(this,xd),[u,h,d,m]=f(this,bm),p=o*d,g=a*m,w=r*d+u,_=s*m+h,A=this.newOutliner({x:f(this,ls)[0]*p+w,y:f(this,ls)[1]*g+_},f(this,bm),f(this,E0),t,f(this,b0),n??f(this,kl));for(let v=2;v<f(this,ls).length;v+=2)A.add({x:f(this,ls)[v]*p+w,y:f(this,ls)[v+1]*g+_});return A.getOutlines()}}bm=new WeakMap,xd=new WeakMap,kl=new WeakMap,b0=new WeakMap,ls=new WeakMap,E0=new WeakMap,qn=new WeakMap,O1=new WeakSet,dj=function(t){const n=f(this,qn);let r=n[4],s=n[5];const o=[r,s,r,s];let a=r,u=s;const h=t?Math.max:Math.min;for(let m=6,p=n.length;m<p;m+=6){const g=n[m+4],w=n[m+5];if(isNaN(n[m]))Ke.pointBoundingBox(g,w,o),u<w?(a=g,u=w):u===w&&(a=h(a,g));else{const _=[1/0,1/0,-1/0,-1/0];Ke.bezierBoundingBox(r,s,...n.slice(m,m+6),_),Ke.rectBoundingBox(..._,o),u<_[3]?(a=_[2],u=_[3]):u===_[3]&&(a=h(a,_[2]))}r=g,s=w}const d=f(this,xd);d[0]=o[0]-f(this,kl),d[1]=o[1]-f(this,kl),d[2]=o[2]-o[0]+2*f(this,kl),d[3]=o[3]-o[1]+2*f(this,kl),this.lastPoint=[a,u]};var C0,x0,vc,Ao,Ai,fj,E_,pj,mj,nT;class tT{constructor(e,t=0,n=0,r=!0){z(this,Ai);z(this,C0);z(this,x0);z(this,vc,[]);z(this,Ao,[]);const s=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:w,width:_,height:A}of e){const v=Math.floor((g-t)/o)*o,E=Math.ceil((g+_+t)/o)*o,I=Math.floor((w-t)/o)*o,S=Math.ceil((w+A+t)/o)*o,R=[v,I,S,!0],F=[E,I,S,!1];f(this,vc).push(R,F),Ke.rectBoundingBox(v,I,E,S,s)}const a=s[2]-s[0]+2*n,u=s[3]-s[1]+2*n,h=s[0]-n,d=s[1]-n,m=f(this,vc).at(r?-1:-2),p=[m[0],m[2]];for(const g of f(this,vc)){const[w,_,A]=g;g[0]=(w-h)/a,g[1]=(_-d)/u,g[2]=(A-d)/u}U(this,C0,new Float32Array([h,d,a,u])),U(this,x0,p)}getOutlines(){f(this,vc).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of f(this,vc))t[3]?(e.push(...W(this,Ai,nT).call(this,t)),W(this,Ai,pj).call(this,t)):(W(this,Ai,mj).call(this,t),e.push(...W(this,Ai,nT).call(this,t)));return W(this,Ai,fj).call(this,e)}}C0=new WeakMap,x0=new WeakMap,vc=new WeakMap,Ao=new WeakMap,Ai=new WeakSet,fj=function(e){const t=[],n=new Set;for(const o of e){const[a,u,h]=o;t.push([a,u,o],[a,h,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const u=t[o][2],h=t[o+1][2];u.push(h),h.push(u),n.add(u),n.add(h)}const r=[];let s;for(;n.size>0;){const o=n.values().next().value;let[a,u,h,d,m]=o;n.delete(o);let p=a,g=u;for(s=[a,h],r.push(s);;){let w;if(n.has(d))w=d;else if(n.has(m))w=m;else break;n.delete(w),[a,u,h,d,m]=w,p!==a&&(s.push(p,g,a,g===u?u:h),p=a),g=g===u?h:u}s.push(p,g)}return new _ee(r,f(this,C0),f(this,x0))},E_=function(e){const t=f(this,Ao);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,o=t[s][0];if(o===e)return s;o<e?n=s+1:r=s-1}return r+1},pj=function([,e,t]){const n=W(this,Ai,E_).call(this,e);f(this,Ao).splice(n,0,[e,t])},mj=function([,e,t]){const n=W(this,Ai,E_).call(this,e);for(let r=n;r<f(this,Ao).length;r++){const[s,o]=f(this,Ao)[r];if(s!==e)break;if(s===e&&o===t){f(this,Ao).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,o]=f(this,Ao)[r];if(s!==e)break;if(s===e&&o===t){f(this,Ao).splice(r,1);return}}},nT=function(e){const[t,n,r]=e,s=[[t,n,r]],o=W(this,Ai,E_).call(this,r);for(let a=0;a<o;a++){const[u,h]=f(this,Ao)[a];for(let d=0,m=s.length;d<m;d++){const[,p,g]=s[d];if(!(h<=p||g<=u)){if(p>=u){if(g>h)s[d][1]=h;else{if(m===1)return[];s.splice(d,1),d--,m--}continue}s[d][2]=u,g>h&&s.push([t,h,g])}}}return s};var S0,Em;class _ee extends He{constructor(t,n,r){super();z(this,S0);z(this,Em);U(this,Em,t),U(this,S0,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of f(this,Em)){let[r,s]=n;t.push(`M${r} ${s}`);for(let o=2;o<n.length;o+=2){const a=n[o],u=n[o+1];a===r?(t.push(`V${u}`),s=u):u===s&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,n,r,s],o){const a=[],u=r-t,h=s-n;for(const d of f(this,Em)){const m=new Array(d.length);for(let p=0;p<d.length;p+=2)m[p]=t+d[p]*u,m[p+1]=s-d[p+1]*h;a.push(m)}return a}get box(){return f(this,S0)}get classNamesForOutlining(){return["highlightOutline"]}}S0=new WeakMap,Em=new WeakMap;class rT extends m1{newFreeDrawOutline(e,t,n,r,s,o){return new Aee(e,t,n,r,s,o)}}class Aee extends hj{newOutliner(e,t,n,r,s,o=0){return new rT(e,t,n,r,s,o)}}var Cm,T0,Rl,Sd,I0,Bi,D0,k0,Td,Us,us,Mr,xm,Pl,ti,Sm,Vs,R0,Ct,iT,C_,gj,yj,vj,sT,Ph,zs,lp,wj,x_,Cy,_j,Aj,bj,Ej,Cj;const $t=class $t extends cn{constructor(t){super({...t,name:"highlightEditor"});z(this,Ct);z(this,Cm,null);z(this,T0,0);z(this,Rl);z(this,Sd,null);z(this,I0,null);z(this,Bi,null);z(this,D0,null);z(this,k0,0);z(this,Td,null);z(this,Us,null);z(this,us,null);z(this,Mr,!1);z(this,xm,null);z(this,Pl);z(this,ti,null);z(this,Sm,"");z(this,Vs);z(this,R0,"");this.color=t.color||$t._defaultColor,U(this,Vs,t.thickness||$t._defaultThickness),U(this,Pl,t.opacity||$t._defaultOpacity),U(this,Rl,t.boxes||null),U(this,R0,t.methodOfCreation||""),U(this,Sm,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(U(this,Mr,!0),W(this,Ct,C_).call(this,t),W(this,Ct,Ph).call(this)):f(this,Rl)&&(U(this,Cm,t.anchorNode),U(this,T0,t.anchorOffset),U(this,D0,t.focusNode),U(this,k0,t.focusOffset),W(this,Ct,iT).call(this),W(this,Ct,Ph).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=$t.prototype;return Rt(this,"_keyboardManager",new n2([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,Mr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:f(this,Vs),methodOfCreation:f(this,R0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;cn.initialize(t,n),$t._defaultColor||($t._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ft.HIGHLIGHT_COLOR:$t._defaultColor=n;break;case Ft.HIGHLIGHT_THICKNESS:$t._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return f(this,xm)}updateParams(t,n){switch(t){case Ft.HIGHLIGHT_COLOR:W(this,Ct,gj).call(this,n);break;case Ft.HIGHLIGHT_THICKNESS:W(this,Ct,yj).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ft.HIGHLIGHT_COLOR,$t._defaultColor],[Ft.HIGHLIGHT_THICKNESS,$t._defaultThickness]]}get propertiesToUpdate(){return[[Ft.HIGHLIGHT_COLOR,this.color||$t._defaultColor],[Ft.HIGHLIGHT_THICKNESS,f(this,Vs)||$t._defaultThickness],[Ft.HIGHLIGHT_FREE,f(this,Mr)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",U(this,I0,new d1({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(W(this,Ct,Cy).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,W(this,Ct,Cy).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){W(this,Ct,sT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(W(this,Ct,Ph).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?W(this,Ct,sT).call(this):t&&(W(this,Ct,Ph).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,o,a;const{drawLayer:n}=this.parent;let r;f(this,Mr)?(t=(t-this.rotation+360)%360,r=W(s=$t,zs,lp).call(s,f(this,Us).box,t)):r=W(o=$t,zs,lp).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(f(this,us),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(f(this,ti),{bbox:W(a=$t,zs,lp).call(a,f(this,Bi).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();f(this,Sm)&&(t.setAttribute("aria-label",f(this,Sm)),t.setAttribute("role","mark")),f(this,Mr)?t.classList.add("free"):this.div.addEventListener("keydown",W(this,Ct,wj).bind(this),{signal:this._uiManager._signal});const n=U(this,Td,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=f(this,Sd);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),U5(this,f(this,Td),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,ti),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,ti),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:W(this,Ct,x_).call(this,!0);break;case 1:case 3:W(this,Ct,x_).call(this,!1);break}}select(){var t;super.select(),f(this,ti)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,ti),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),f(this,ti)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,ti),{rootClass:{selected:!1}}),f(this,Mr)||W(this,Ct,x_).call(this,!1))}get _mustFixPosition(){return!f(this,Mr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(f(this,us),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(f(this,ti),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:s,y:o}){const{x:a,y:u,width:h,height:d}=r.getBoundingClientRect(),m=new AbortController,p=t.combinedSignal(m),g=w=>{m.abort(),W(this,zs,Ej).call(this,t,w)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Jn,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Js,{signal:p}),r.addEventListener("pointermove",W(this,zs,bj).bind(this,t),{signal:p}),this._freeHighlight=new rT({x:s,y:o},[a,u,h,d],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var _,A,v,E;let s=null;if(t instanceof Q4){const{data:{quadPoints:I,rect:S,rotation:R,id:F,color:k,opacity:T,popupRef:D,contentsObj:P},parent:{page:{pageNumber:N}}}=t;s=t={annotationType:yt.HIGHLIGHT,color:Array.from(k),opacity:T,quadPoints:I,boxes:null,pageIndex:N-1,rect:S.slice(0),rotation:R,annotationElementId:F,id:F,deleted:!1,popupRef:D,comment:(P==null?void 0:P.str)||null}}else if(t instanceof dD){const{data:{inkLists:I,rect:S,rotation:R,id:F,color:k,borderStyle:{rawWidth:T},popupRef:D,contentsObj:P},parent:{page:{pageNumber:N}}}=t;s=t={annotationType:yt.HIGHLIGHT,color:Array.from(k),thickness:T,inkLists:I,boxes:null,pageIndex:N-1,rect:S.slice(0),rotation:R,annotationElementId:F,id:F,deleted:!1,popupRef:D,comment:(P==null?void 0:P.str)||null}}const{color:o,quadPoints:a,inkLists:u,opacity:h}=t,d=await super.deserialize(t,n,r);d.color=Ke.makeHexColor(...o),U(d,Pl,h||1),u&&U(d,Vs,t.thickness),d._initialData=s,t.comment&&d.setCommentData(t.comment);const[m,p]=d.pageDimensions,[g,w]=d.pageTranslation;if(a){const I=U(d,Rl,[]);for(let S=0;S<a.length;S+=8)I.push({x:(a[S]-g)/m,y:1-(a[S+1]-w)/p,width:(a[S+2]-a[S])/m,height:(a[S+1]-a[S+5])/p});W(_=d,Ct,iT).call(_),W(A=d,Ct,Ph).call(A),d.rotate(d.rotation)}else if(u){U(d,Mr,!0);const I=u[0],S={x:I[0]-g,y:p-(I[1]-w)},R=new rT(S,[0,0,m,p],1,f(d,Vs)/2,!0,.001);for(let T=0,D=I.length;T<D;T+=2)S.x=I[T]-g,S.y=p-(I[T+1]-w),R.add(S);const{id:F,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:R.toSVGPath()}},!0,!0);W(v=d,Ct,C_).call(v,{highlightOutlines:R.getOutlines(),highlightId:F,clipPathId:k}),W(E=d,Ct,Ph).call(E),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),r=cn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s={annotationType:yt.HIGHLIGHT,color:r,opacity:f(this,Pl),thickness:f(this,Vs),quadPoints:W(this,Ct,_j).call(this),outlines:W(this,Ct,Aj).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:W(this,Ct,Cy).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(s),this.annotationElementId&&!W(this,Ct,Cj).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};Cm=new WeakMap,T0=new WeakMap,Rl=new WeakMap,Sd=new WeakMap,I0=new WeakMap,Bi=new WeakMap,D0=new WeakMap,k0=new WeakMap,Td=new WeakMap,Us=new WeakMap,us=new WeakMap,Mr=new WeakMap,xm=new WeakMap,Pl=new WeakMap,ti=new WeakMap,Sm=new WeakMap,Vs=new WeakMap,R0=new WeakMap,Ct=new WeakSet,iT=function(){const t=new tT(f(this,Rl),.001);U(this,Us,t.getOutlines()),[this.x,this.y,this.width,this.height]=f(this,Us).box;const n=new tT(f(this,Rl),.0025,.001,this._uiManager.direction==="ltr");U(this,Bi,n.getOutlines());const{lastPoint:r}=f(this,Bi);U(this,xm,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},C_=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var m,p;if(U(this,Us,t),U(this,Bi,t.getNewOutline(f(this,Vs)/2+1.5,.0025)),n>=0)U(this,us,n),U(this,Sd,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),U(this,ti,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:f(this,Bi).box,path:{d:f(this,Bi).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(f(this,us),{bbox:W(m=$t,zs,lp).call(m,f(this,Us).box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(f(this,ti),{bbox:W(p=$t,zs,lp).call(p,f(this,Bi).box,g),path:{d:f(this,Bi).toSVGPath()}})}const[o,a,u,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=u,this.height=h;break;case 90:{const[g,w]=this.parentDimensions;this.x=a,this.y=1-o,this.width=u*w/g,this.height=h*g/w;break}case 180:this.x=1-o,this.y=1-a,this.width=u,this.height=h;break;case 270:{const[g,w]=this.parentDimensions;this.x=1-a,this.y=o,this.width=u*w/g,this.height=h*g/w;break}}const{lastPoint:d}=f(this,Bi);U(this,xm,[(d[0]-o)/u,(d[1]-a)/h])},gj=function(t){const n=(o,a)=>{var u,h;this.color=o,U(this,Pl,a),(u=this.parent)==null||u.drawLayer.updateProperties(f(this,us),{root:{fill:o,"fill-opacity":a}}),(h=f(this,I0))==null||h.updateColor(o)},r=this.color,s=f(this,Pl);this.addCommands({cmd:n.bind(this,t,$t._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},yj=function(t){const n=f(this,Vs),r=s=>{U(this,Vs,s),W(this,Ct,vj).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ft.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},vj=function(t){if(!f(this,Mr))return;W(this,Ct,C_).call(this,{highlightOutlines:f(this,Us).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},sT=function(){f(this,us)===null||!this.parent||(this.parent.drawLayer.remove(f(this,us)),U(this,us,null),this.parent.drawLayer.remove(f(this,ti)),U(this,ti,null))},Ph=function(t=this.parent){f(this,us)===null&&({id:ir(this,us)._,clipPathId:ir(this,Sd)._}=t.drawLayer.draw({bbox:f(this,Us).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":f(this,Pl)},rootClass:{highlight:!0,free:f(this,Mr)},path:{d:f(this,Us).toSVGPath()}},!1,!0),U(this,ti,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:f(this,Mr)},bbox:f(this,Bi).box,path:{d:f(this,Bi).toSVGPath()}},f(this,Mr))),f(this,Td)&&(f(this,Td).style.clipPath=f(this,Sd)))},zs=new WeakSet,lp=function([t,n,r,s],o){switch(o){case 90:return[1-n-s,t,s,r];case 180:return[1-t-r,1-n-s,r,s];case 270:return[n,1-t-r,s,r]}return[t,n,r,s]},wj=function(t){$t._keyboardManager.exec(this,t)},x_=function(t){if(!f(this,Cm))return;const n=window.getSelection();t?n.setPosition(f(this,Cm),f(this,T0)):n.setPosition(f(this,D0),f(this,k0))},Cy=function(){return f(this,Mr)?this.rotation:0},_j=function(){if(f(this,Mr))return null;const[t,n]=this.pageDimensions,[r,s]=this.pageTranslation,o=f(this,Rl),a=new Float32Array(o.length*8);let u=0;for(const{x:h,y:d,width:m,height:p}of o){const g=h*t+r,w=(1-d)*n+s;a[u]=a[u+4]=g,a[u+1]=a[u+3]=w,a[u+2]=a[u+6]=g+m*t,a[u+5]=a[u+7]=w-p*n,u+=8}return a},Aj=function(t){return f(this,Us).serialize(t,W(this,Ct,Cy).call(this))},bj=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Ej=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Cj=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,s)=>r!==n[s])},z($t,zs),ie($t,"_defaultColor",null),ie($t,"_defaultOpacity",1),ie($t,"_defaultThickness",12),ie($t,"_type","highlight"),ie($t,"_editorType",yt.HIGHLIGHT),ie($t,"_freeHighlightId",-1),ie($t,"_freeHighlight",null),ie($t,"_freeHighlightClipId","");let g1=$t;var Id;class xj{constructor(){z(this,Id,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){f(this,Id)[e]=t}toSVGProperties(){const e=f(this,Id);return U(this,Id,Object.create(null)),{root:e}}reset(){U(this,Id,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){rn("Not implemented")}}Id=new WeakMap;var cs,Tm,_r,Dd,kd,wc,_c,Ac,Rd,Vt,oT,aT,lT,xy,Sj,S_,Sy,up;const Ge=class Ge extends cn{constructor(t){super(t);z(this,Vt);z(this,cs,null);z(this,Tm);ie(this,"_colorPicker",null);ie(this,"_drawId",null);U(this,Tm,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(W(this,Vt,oT).call(this,t),W(this,Vt,xy).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[s,o]of Object.entries(n))r.has(s)?Object.assign(t[s],o):t[s]=o;return t}static getDefaultDrawingOptions(t){rn("Not implemented")}static get typesMap(){rn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(f(Ge,_r).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)t.push([r,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,s]of this.constructor.typesMap)t.push([r,n[s]]);return t}_updateProperty(t,n,r){const s=this._drawingOptions,o=s[n],a=u=>{var d,m;s.updateProperty(n,u);const h=f(this,cs).updateProperty(n,u);h&&W(this,Vt,Sy).call(this,h),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&((m=this._colorPicker)==null||m.update(u))};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ge._mergeSVGProperties(f(this,cs).getPathResizingSVGProperties(W(this,Vt,S_).call(this)),{bbox:W(this,Vt,up).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ge._mergeSVGProperties(f(this,cs).getPathResizedSVGProperties(W(this,Vt,S_).call(this)),{bbox:W(this,Vt,up).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:W(this,Vt,up).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ge._mergeSVGProperties(f(this,cs).getPathTranslatedSVGProperties(W(this,Vt,S_).call(this),this.parentDimensions),{bbox:W(this,Vt,up).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,f(this,Tm)&&(U(this,Tm,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){W(this,Vt,lT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(W(this,Vt,xy).call(this),W(this,Vt,Sy).call(this,f(this,cs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),W(this,Vt,lT).call(this)):t&&(this._uiManager.addShouldRescale(this),W(this,Vt,xy).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ge._mergeSVGProperties({bbox:W(this,Vt,up).call(this)},f(this,cs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&W(this,Vt,Sy).call(this,f(this,cs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,s,o){rn("Not implemented")}static startDrawing(t,n,r,s){var A;const{target:o,offsetX:a,offsetY:u,pointerId:h,pointerType:d}=s;if(f(Ge,_c)&&f(Ge,_c)!==d)return;const{viewport:{rotation:m}}=t,{width:p,height:g}=o.getBoundingClientRect(),w=U(Ge,Dd,new AbortController),_=t.combinedSignal(w);if(f(Ge,wc)||U(Ge,wc,h),f(Ge,_c)??U(Ge,_c,d),window.addEventListener("pointerup",v=>{var E;f(Ge,wc)===v.pointerId?this._endDraw(v):(E=f(Ge,Ac))==null||E.delete(v.pointerId)},{signal:_}),window.addEventListener("pointercancel",v=>{var E;f(Ge,wc)===v.pointerId?this._currentParent.endDrawingSession():(E=f(Ge,Ac))==null||E.delete(v.pointerId)},{signal:_}),window.addEventListener("pointerdown",v=>{f(Ge,_c)===v.pointerType&&((f(Ge,Ac)||U(Ge,Ac,new Set)).add(v.pointerId),f(Ge,_r).isCancellable()&&(f(Ge,_r).removeLastElement(),f(Ge,_r).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",Js,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",v=>{v.timeStamp===f(Ge,Rd)&&Jn(v)},{signal:_}),t.toggleDrawing(),(A=n._editorUndoBar)==null||A.hide(),f(Ge,_r)){t.drawLayer.updateProperties(this._currentDrawId,f(Ge,_r).startNew(a,u,p,g,m));return}n.updateUIForDefaultProperties(this),U(Ge,_r,this.createDrawerInstance(a,u,p,g,m)),U(Ge,kd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(f(Ge,kd).toSVGProperties(),f(Ge,_r).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(U(Ge,Rd,-1),!f(Ge,_r))return;const{offsetX:n,offsetY:r,pointerId:s}=t;if(f(Ge,wc)===s){if(((o=f(Ge,Ac))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,f(Ge,_r).add(n,r)),U(Ge,Rd,t.timeStamp),Jn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,U(Ge,_r,null),U(Ge,kd,null),U(Ge,_c,null),U(Ge,Rd,NaN)),f(Ge,Dd)&&(f(Ge,Dd).abort(),U(Ge,Dd,null),U(Ge,wc,NaN),U(Ge,Ac,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,f(Ge,_r).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=f(Ge,_r),s=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:Ft.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ft.DRAW_STEP),!f(Ge,_r).isEmpty()){const{pageDimensions:[r,s],scale:o}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:f(Ge,_r).getOutlines(r*o,s*o,o,this._INNER_MARGIN),drawingOptions:f(Ge,kd),mustBeCommitted:!t});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,s,o,a){rn("Not implemented")}static async deserialize(t,n,r){var m,p;const{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:u}}=n.viewport,h=this.deserializeDraw(a,u,s,o,this._INNER_MARGIN,t),d=await super.deserialize(t,n,r);return d.createDrawingOptions(t),W(m=d,Vt,oT).call(m,{drawOutlines:h}),W(p=d,Vt,xy).call(p),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[n,r]=this.pageTranslation,[s,o]=this.pageDimensions;return f(this,cs).serialize([n,r,s,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};cs=new WeakMap,Tm=new WeakMap,_r=new WeakMap,Dd=new WeakMap,kd=new WeakMap,wc=new WeakMap,_c=new WeakMap,Ac=new WeakMap,Rd=new WeakMap,Vt=new WeakSet,oT=function({drawOutlines:t,drawId:n,drawingOptions:r}){U(this,cs,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=W(this,Vt,aT).call(this,t,this.parent),W(this,Vt,Sy).call(this,t.box)},aT=function(t,n){const{id:r}=n.drawLayer.draw(Ge._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},lT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},xy=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=W(this,Vt,aT).call(this,f(this,cs),t)}},Sj=function([t,n,r,s]){const{parentDimensions:[o,a],rotation:u}=this;switch(u){case 90:return[n,1-t,r*(a/o),s*(o/a)];case 180:return[1-t,1-n,r,s];case 270:return[1-n,t,r*(a/o),s*(o/a)];default:return[t,n,r,s]}},S_=function(){const{x:t,y:n,width:r,height:s,parentDimensions:[o,a],rotation:u}=this;switch(u){case 90:return[1-n,t,r*(o/a),s*(a/o)];case 180:return[1-t,1-n,r,s];case 270:return[n,1-t,r*(o/a),s*(a/o)];default:return[t,n,r,s]}},Sy=function(t){if([this.x,this.y,this.width,this.height]=W(this,Vt,Sj).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},up=function(){const{x:t,y:n,width:r,height:s,rotation:o,parentRotation:a,parentDimensions:[u,h]}=this;switch((o*4+a)/90){case 1:return[1-n-s,t,s,r];case 2:return[1-t-r,1-n-s,r,s];case 3:return[n,1-t-r,s,r];case 4:return[t,n-r*(u/h),s*(h/u),r*(u/h)];case 5:return[1-n,t,r*(u/h),s*(h/u)];case 6:return[1-t-s*(h/u),1-n,s*(h/u),r*(u/h)];case 7:return[n-r*(u/h),1-t-s*(h/u),r*(u/h),s*(h/u)];case 8:return[t-r,n-s,r,s];case 9:return[1-n,t-r,s,r];case 10:return[1-t,1-n,r,s];case 11:return[n-s,1-t,s,r];case 12:return[t-s*(h/u),n,s*(h/u),r*(u/h)];case 13:return[1-n-r*(u/h),t-s*(h/u),r*(u/h),s*(h/u)];case 14:return[1-t,1-n-r*(u/h),s*(h/u),r*(u/h)];case 15:return[n,1-t,r*(u/h),s*(h/u)];default:return[t,n,r,s]}},ie(Ge,"_currentDrawId",-1),ie(Ge,"_currentParent",null),z(Ge,_r,null),z(Ge,Dd,null),z(Ge,kd,null),z(Ge,wc,NaN),z(Ge,_c,null),z(Ge,Ac,null),z(Ge,Rd,NaN),ie(Ge,"_INNER_MARGIN",3);let y1=Ge;var ca,Ar,br,Pd,Im,pi,Br,Hs,Nd,Od,Ld,Dm,T_;class bee{constructor(e,t,n,r,s,o){z(this,Dm);z(this,ca,new Float64Array(6));z(this,Ar);z(this,br);z(this,Pd);z(this,Im);z(this,pi);z(this,Br,"");z(this,Hs,0);z(this,Nd,new i2);z(this,Od);z(this,Ld);U(this,Od,n),U(this,Ld,r),U(this,Pd,s),U(this,Im,o),[e,t]=W(this,Dm,T_).call(this,e,t);const a=U(this,Ar,[NaN,NaN,NaN,NaN,e,t]);U(this,pi,[e,t]),U(this,br,[{line:a,points:f(this,pi)}]),f(this,ca).set(a,0)}updateProperty(e,t){e==="stroke-width"&&U(this,Im,t)}isEmpty(){return!f(this,br)||f(this,br).length===0}isCancellable(){return f(this,pi).length<=10}add(e,t){[e,t]=W(this,Dm,T_).call(this,e,t);const[n,r,s,o]=f(this,ca).subarray(2,6),a=e-s,u=t-o;return Math.hypot(f(this,Od)*a,f(this,Ld)*u)<=2?null:(f(this,pi).push(e,t),isNaN(n)?(f(this,ca).set([s,o,e,t],2),f(this,Ar).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(f(this,ca)[0])&&f(this,Ar).splice(6,6),f(this,ca).set([n,r,s,o,e,t],0),f(this,Ar).push(...He.createBezierPoints(n,r,s,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(f(this,pi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,s){U(this,Od,n),U(this,Ld,r),U(this,Pd,s),[e,t]=W(this,Dm,T_).call(this,e,t);const o=U(this,Ar,[NaN,NaN,NaN,NaN,e,t]);U(this,pi,[e,t]);const a=f(this,br).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),f(this,br).push({line:o,points:f(this,pi)}),f(this,ca).set(o,0),U(this,Hs,0),this.toSVGPath(),null}getLastElement(){return f(this,br).at(-1)}setLastElement(e){return f(this,br)?(f(this,br).push(e),U(this,Ar,e.line),U(this,pi,e.points),U(this,Hs,0),{path:{d:this.toSVGPath()}}):f(this,Nd).setLastElement(e)}removeLastElement(){if(!f(this,br))return f(this,Nd).removeLastElement();f(this,br).pop(),U(this,Br,"");for(let e=0,t=f(this,br).length;e<t;e++){const{line:n,points:r}=f(this,br)[e];U(this,Ar,n),U(this,pi,r),U(this,Hs,0),this.toSVGPath()}return{path:{d:f(this,Br)}}}toSVGPath(){const e=He.svgRound(f(this,Ar)[4]),t=He.svgRound(f(this,Ar)[5]);if(f(this,pi).length===2)return U(this,Br,`${f(this,Br)} M ${e} ${t} Z`),f(this,Br);if(f(this,pi).length<=6){const r=f(this,Br).lastIndexOf("M");U(this,Br,`${f(this,Br).slice(0,r)} M ${e} ${t}`),U(this,Hs,6)}if(f(this,pi).length===4){const r=He.svgRound(f(this,Ar)[10]),s=He.svgRound(f(this,Ar)[11]);return U(this,Br,`${f(this,Br)} L ${r} ${s}`),U(this,Hs,12),f(this,Br)}const n=[];f(this,Hs)===0&&(n.push(`M ${e} ${t}`),U(this,Hs,6));for(let r=f(this,Hs),s=f(this,Ar).length;r<s;r+=6){const[o,a,u,h,d,m]=f(this,Ar).slice(r,r+6).map(He.svgRound);n.push(`C${o} ${a} ${u} ${h} ${d} ${m}`)}return U(this,Br,f(this,Br)+n.join(" ")),U(this,Hs,f(this,Ar).length),f(this,Br)}getOutlines(e,t,n,r){const s=f(this,br).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),f(this,Nd).build(f(this,br),e,t,n,f(this,Pd),f(this,Im),r),U(this,ca,null),U(this,Ar,null),U(this,br,null),U(this,Br,null),f(this,Nd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ca=new WeakMap,Ar=new WeakMap,br=new WeakMap,Pd=new WeakMap,Im=new WeakMap,pi=new WeakMap,Br=new WeakMap,Hs=new WeakMap,Nd=new WeakMap,Od=new WeakMap,Ld=new WeakMap,Dm=new WeakSet,T_=function(e,t){return He._normalizePoint(e,t,f(this,Od),f(this,Ld),f(this,Pd))};var mi,P0,N0,hs,ha,da,km,Rm,Fd,Ur,Xa,Tj,Ij,Dj;class i2 extends He{constructor(){super(...arguments);z(this,Ur);z(this,mi);z(this,P0,0);z(this,N0);z(this,hs);z(this,ha);z(this,da);z(this,km);z(this,Rm);z(this,Fd)}build(t,n,r,s,o,a,u){U(this,ha,n),U(this,da,r),U(this,km,s),U(this,Rm,o),U(this,Fd,a),U(this,N0,u??0),U(this,hs,t),W(this,Ur,Ij).call(this)}get thickness(){return f(this,Fd)}setLastElement(t){return f(this,hs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return f(this,hs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of f(this,hs)){if(t.push(`M${He.svgRound(n[4])} ${He.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${He.svgRound(n[10])} ${He.svgRound(n[11])}`);continue}for(let r=6,s=n.length;r<s;r+=6){const[o,a,u,h,d,m]=n.subarray(r,r+6).map(He.svgRound);t.push(`C${o} ${a} ${u} ${h} ${d} ${m}`)}}return t.join("")}serialize([t,n,r,s],o){const a=[],u=[],[h,d,m,p]=W(this,Ur,Tj).call(this);let g,w,_,A,v,E,I,S,R;switch(f(this,Rm)){case 0:R=He._rescale,g=t,w=n+s,_=r,A=-s,v=t+h*r,E=n+(1-d-p)*s,I=t+(h+m)*r,S=n+(1-d)*s;break;case 90:R=He._rescaleAndSwap,g=t,w=n,_=r,A=s,v=t+d*r,E=n+h*s,I=t+(d+p)*r,S=n+(h+m)*s;break;case 180:R=He._rescale,g=t+r,w=n,_=-r,A=s,v=t+(1-h-m)*r,E=n+d*s,I=t+(1-h)*r,S=n+(d+p)*s;break;case 270:R=He._rescaleAndSwap,g=t+r,w=n+s,_=-r,A=-s,v=t+(1-d-p)*r,E=n+(1-h-m)*s,I=t+(1-d)*r,S=n+(1-h)*s;break}for(const{line:F,points:k}of f(this,hs))a.push(R(F,g,w,_,A,o?new Array(F.length):null)),u.push(R(k,g,w,_,A,o?new Array(k.length):null));return{lines:a,points:u,rect:[v,E,I,S]}}static deserialize(t,n,r,s,o,{paths:{lines:a,points:u},rotation:h,thickness:d}){const m=[];let p,g,w,_,A;switch(h){case 0:A=He._rescale,p=-t/r,g=n/s+1,w=1/r,_=-1/s;break;case 90:A=He._rescaleAndSwap,p=-n/s,g=-t/r,w=1/s,_=1/r;break;case 180:A=He._rescale,p=t/r+1,g=-n/s,w=-1/r,_=1/s;break;case 270:A=He._rescaleAndSwap,p=n/s+1,g=t/r+1,w=-1/s,_=-1/r;break}if(!a){a=[];for(const E of u){const I=E.length;if(I===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(I===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const S=new Float32Array(3*(I-2));a.push(S);let[R,F,k,T]=E.subarray(0,4);S.set([NaN,NaN,NaN,NaN,R,F],0);for(let D=4;D<I;D+=2){const P=E[D],N=E[D+1];S.set(He.createBezierPoints(R,F,k,T,P,N),(D-2)*3),[R,F,k,T]=[k,T,P,N]}}}for(let E=0,I=a.length;E<I;E++)m.push({line:A(a[E].map(S=>S??NaN),p,g,w,_),points:A(u[E].map(S=>S??NaN),p,g,w,_)});const v=new this.prototype.constructor;return v.build(m,r,s,1,h,d,o),v}get box(){return f(this,mi)}updateProperty(t,n){return t==="stroke-width"?W(this,Ur,Dj).call(this,n):null}updateParentDimensions([t,n],r){const[s,o]=W(this,Ur,Xa).call(this);U(this,ha,t),U(this,da,n),U(this,km,r);const[a,u]=W(this,Ur,Xa).call(this),h=a-s,d=u-o,m=f(this,mi);return m[0]-=h,m[1]-=d,m[2]+=2*h,m[3]+=2*d,m}updateRotation(t){return U(this,P0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return f(this,mi).map(He.svgRound).join(" ")}get defaultProperties(){const[t,n]=f(this,mi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${He.svgRound(t)} ${He.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=f(this,mi);let r=0,s=0,o=0,a=0,u=0,h=0;switch(f(this,P0)){case 90:s=n/t,o=-t/n,u=t;break;case 180:r=-1,a=-1,u=t,h=n;break;case 270:s=-n/t,o=t/n,h=n;break;default:return""}return`matrix(${r} ${s} ${o} ${a} ${He.svgRound(u)} ${He.svgRound(h)})`}getPathResizingSVGProperties([t,n,r,s]){const[o,a]=W(this,Ur,Xa).call(this),[u,h,d,m]=f(this,mi);if(Math.abs(d-o)<=He.PRECISION||Math.abs(m-a)<=He.PRECISION){const A=t+r/2-(u+d/2),v=n+s/2-(h+m/2);return{path:{"transform-origin":`${He.svgRound(t)} ${He.svgRound(n)}`,transform:`${this.rotationTransform} translate(${A} ${v})`}}}const p=(r-2*o)/(d-2*o),g=(s-2*a)/(m-2*a),w=d/r,_=m/s;return{path:{"transform-origin":`${He.svgRound(u)} ${He.svgRound(h)}`,transform:`${this.rotationTransform} scale(${w} ${_}) translate(${He.svgRound(o)} ${He.svgRound(a)}) scale(${p} ${g}) translate(${He.svgRound(-o)} ${He.svgRound(-a)})`}}}getPathResizedSVGProperties([t,n,r,s]){const[o,a]=W(this,Ur,Xa).call(this),u=f(this,mi),[h,d,m,p]=u;if(u[0]=t,u[1]=n,u[2]=r,u[3]=s,Math.abs(m-o)<=He.PRECISION||Math.abs(p-a)<=He.PRECISION){const v=t+r/2-(h+m/2),E=n+s/2-(d+p/2);for(const{line:I,points:S}of f(this,hs))He._translate(I,v,E,I),He._translate(S,v,E,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${He.svgRound(t)} ${He.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*o)/(m-2*o),w=(s-2*a)/(p-2*a),_=-g*(h+o)+t+o,A=-w*(d+a)+n+a;if(g!==1||w!==1||_!==0||A!==0)for(const{line:v,points:E}of f(this,hs))He._rescale(v,_,A,g,w,v),He._rescale(E,_,A,g,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${He.svgRound(t)} ${He.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[s,o]=r,a=f(this,mi),u=t-a[0],h=n-a[1];if(f(this,ha)===s&&f(this,da)===o)for(const{line:d,points:m}of f(this,hs))He._translate(d,u,h,d),He._translate(m,u,h,m);else{const d=f(this,ha)/s,m=f(this,da)/o;U(this,ha,s),U(this,da,o);for(const{line:p,points:g}of f(this,hs))He._rescale(p,u,h,d,m,p),He._rescale(g,u,h,d,m,g);a[2]*=d,a[3]*=m}return a[0]=t,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${He.svgRound(t)} ${He.svgRound(n)}`}}}get defaultSVGProperties(){const t=f(this,mi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${He.svgRound(t[0])} ${He.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}mi=new WeakMap,P0=new WeakMap,N0=new WeakMap,hs=new WeakMap,ha=new WeakMap,da=new WeakMap,km=new WeakMap,Rm=new WeakMap,Fd=new WeakMap,Ur=new WeakSet,Xa=function(t=f(this,Fd)){const n=f(this,N0)+t/2*f(this,km);return f(this,Rm)%180===0?[n/f(this,ha),n/f(this,da)]:[n/f(this,da),n/f(this,ha)]},Tj=function(){const[t,n,r,s]=f(this,mi),[o,a]=W(this,Ur,Xa).call(this,0);return[t+o,n+a,r-2*o,s-2*a]},Ij=function(){const t=U(this,mi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of f(this,hs)){if(s.length<=12){for(let u=4,h=s.length;u<h;u+=6)Ke.pointBoundingBox(s[u],s[u+1],t);continue}let o=s[4],a=s[5];for(let u=6,h=s.length;u<h;u+=6){const[d,m,p,g,w,_]=s.subarray(u,u+6);Ke.bezierBoundingBox(o,a,d,m,p,g,w,_,t),o=w,a=_}}const[n,r]=W(this,Ur,Xa).call(this);t[0]=vi(t[0]-n,0,1),t[1]=vi(t[1]-r,0,1),t[2]=vi(t[2]+n,0,1),t[3]=vi(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},Dj=function(t){const[n,r]=W(this,Ur,Xa).call(this);U(this,Fd,t);const[s,o]=W(this,Ur,Xa).call(this),[a,u]=[s-n,o-r],h=f(this,mi);return h[0]-=a,h[1]-=u,h[2]+=2*a,h[3]+=2*u,h};class FA extends xj{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:cn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new FA(this._viewParameters);return e.updateAll(this),e}}var L1,kj;const pp=class pp extends y1{constructor(t){super({...t,name:"inkEditor"});z(this,L1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){cn.initialize(t,n),this._defaultDrawingOptions=new FA(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Rt(this,"typesMap",new Map([[Ft.INK_THICKNESS,"stroke-width"],[Ft.INK_COLOR,"stroke"],[Ft.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,s,o){return new bee(t,n,r,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,s,o,a){return i2.deserialize(t,n,r,s,o,a)}static async deserialize(t,n,r){let s=null;if(t instanceof dD){const{data:{inkLists:a,rect:u,rotation:h,id:d,color:m,opacity:p,borderStyle:{rawWidth:g},popupRef:w,contentsObj:_},parent:{page:{pageNumber:A}}}=t;s=t={annotationType:yt.INK,color:Array.from(m),thickness:g,opacity:p,paths:{points:a},boxes:null,pageIndex:A-1,rect:u.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:w,comment:(_==null?void 0:_.str)||null}}const o=await super.deserialize(t,n,r);return o._initialData=s,t.comment&&o.setCommentData(t.comment),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new f1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ft.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=pp.getDefaultDrawingOptions({stroke:Ke.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":u}}=this,h={annotationType:yt.INK,color:cn._colorManager.convert(o),opacity:a,thickness:u,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!W(this,L1,kj).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1),s={rect:r,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(s.popup=this.comment),t.updateEdited(s),null}};L1=new WeakSet,kj=function(t){const{color:n,thickness:r,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,u)=>a!==n[u])||t.thickness!==r||t.opacity!==s||t.pageIndex!==o},ie(pp,"_type","ink"),ie(pp,"_editorType",yt.INK),ie(pp,"_defaultDrawingOptions",null);let uT=pp;class cT extends i2{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const qw=8,Zg=3;var Md,Jt,hT,bo,Rj,Pj,dT,I_,Nj,Oj,Lj,fT,pT,Fj;class Bl{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},s,o,a,u){let h=new OffscreenCanvas(1,1),d=h.getContext("2d",{alpha:!1});const m=200,p=d.font=`${n} ${r} ${m}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:w,actualBoundingBoxAscent:_,actualBoundingBoxDescent:A,fontBoundingBoxAscent:v,fontBoundingBoxDescent:E,width:I}=d.measureText(e),S=1.5,R=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||0,I)*S),F=Math.ceil(Math.max(Math.abs(_)+Math.abs(A)||m,Math.abs(v)+Math.abs(E)||m)*S);h=new OffscreenCanvas(R,F),d=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=p,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,R,F),d.fillStyle="black",d.fillText(e,R*(S-1)/2,F*(3-S)/2);const k=W(this,Jt,fT).call(this,d.getImageData(0,0,R,F).data),T=W(this,Jt,Lj).call(this,k),D=W(this,Jt,pT).call(this,T),P=W(this,Jt,dT).call(this,k,R,F,D);return this.processDrawnLines({lines:{curves:P,width:R,height:F},pageWidth:s,pageHeight:o,rotation:a,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,s){const[o,a,u]=W(this,Jt,Fj).call(this,e),[h,d]=W(this,Jt,Oj).call(this,o,a,u,Math.hypot(a,u)*f(this,Md).sigmaSFactor,f(this,Md).sigmaR,f(this,Md).kernelSize),m=W(this,Jt,pT).call(this,d),p=W(this,Jt,dT).call(this,h,a,u,m);return this.processDrawnLines({lines:{curves:p,width:a,height:u},pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:o,areContours:a}){r%180!==0&&([t,n]=[n,t]);const{curves:u,width:h,height:d}=e,m=e.thickness??0,p=[],g=Math.min(t/h,n/d),w=g/t,_=g/n,A=[];for(const{points:E}of u){const I=o?W(this,Jt,Nj).call(this,E):E;if(!I)continue;A.push(I);const S=I.length,R=new Float32Array(S),F=new Float32Array(3*(S===2?2:S-2));if(p.push({line:F,points:R}),S===2){R[0]=I[0]*w,R[1]=I[1]*_,F.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[k,T,D,P]=I;k*=w,T*=_,D*=w,P*=_,R.set([k,T,D,P],0),F.set([NaN,NaN,NaN,NaN,k,T],0);for(let N=4;N<S;N+=2){const L=R[N]=I[N]*w,M=R[N+1]=I[N+1]*_;F.set(He.createBezierPoints(k,T,D,P,L,M),(N-2)*3),[k,T,D,P]=[D,P,L,M]}}if(p.length===0)return null;const v=a?new cT:new i2;return v.build(p,t,n,1,r,a?0:m,s),{outline:v,newCurves:A,areContours:a,thickness:m,width:h,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:s}){let o=1/0,a=-1/0,u=0;for(const I of e){u+=I.length;for(let S=2,R=I.length;S<R;S++){const F=I[S]-I[S-2];o=Math.min(o,F),a=Math.max(a,F)}}let h;o>=-128&&a<=127?h=Int8Array:o>=-32768&&a<=32767?h=Int16Array:h=Int32Array;const d=e.length,m=qw+Zg*d,p=new Uint32Array(m);let g=0;p[g++]=m*Uint32Array.BYTES_PER_ELEMENT+(u-2*d)*h.BYTES_PER_ELEMENT,p[g++]=0,p[g++]=r,p[g++]=s,p[g++]=t?0:1,p[g++]=Math.max(0,Math.floor(n??0)),p[g++]=d,p[g++]=h.BYTES_PER_ELEMENT;for(const I of e)p[g++]=I.length-2,p[g++]=I[0],p[g++]=I[1];const w=new CompressionStream("deflate-raw"),_=w.writable.getWriter();await _.ready,_.write(p);const A=h.prototype.constructor;for(const I of e){const S=new A(I.length-2);for(let R=2,F=I.length;R<F;R++)S[R-2]=I[R]-I[R-2];_.write(S)}_.close();const v=await new Response(w.readable).arrayBuffer(),E=new Uint8Array(v);return L5(E)}static async decompressSignature(e){try{const t=zQ(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,a=0;for await(const I of n)o||(o=new Uint8Array(new Uint32Array(I.buffer,0,4)[0])),o.set(I,a),a+=I.length;const u=new Uint32Array(o.buffer,0,o.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const d=u[2],m=u[3],p=u[4]===0,g=u[5],w=u[6],_=u[7],A=[],v=(qw+Zg*w)*Uint32Array.BYTES_PER_ELEMENT;let E;switch(_){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(o.buffer,v);break}a=0;for(let I=0;I<w;I++){const S=u[Zg*I+qw],R=new Float32Array(S+2);A.push(R);for(let F=0;F<Zg-1;F++)R[F]=u[Zg*I+qw+F+1];for(let F=0;F<S;F++)R[F+2]=R[F]+E[a++]}return{areContours:p,thickness:g,outlines:A,width:d,height:m}}catch(t){return Et(`decompressSignature: ${t}`),null}}}Md=new WeakMap,Jt=new WeakSet,hT=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},bo=new WeakMap,Rj=function(e,t,n,r,s,o,a){const u=W(this,Jt,hT).call(this,n,r,s,o);for(let h=0;h<8;h++){const d=(-h+u-a+16)%8,m=f(this,bo)[2*d],p=f(this,bo)[2*d+1];if(e[(n+m)*t+(r+p)]!==0)return d}return-1},Pj=function(e,t,n,r,s,o,a){const u=W(this,Jt,hT).call(this,n,r,s,o);for(let h=0;h<8;h++){const d=(h+u+a+16)%8,m=f(this,bo)[2*d],p=f(this,bo)[2*d+1];if(e[(n+m)*t+(r+p)]!==0)return d}return-1},dT=function(e,t,n,r){const s=e.length,o=new Int32Array(s);for(let d=0;d<s;d++)o[d]=e[d]<=r?1:0;for(let d=1;d<n-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*n-1-d]=0;let a=1,u;const h=[];for(let d=1;d<n-1;d++){u=1;for(let m=1;m<t-1;m++){const p=d*t+m,g=o[p];if(g===0)continue;let w=d,_=m;if(g===1&&o[p-1]===0)a+=1,_-=1;else if(g>=1&&o[p+1]===0)a+=1,_+=1,g>1&&(u=g);else{g!==1&&(u=Math.abs(g));continue}const A=[m,d],v=_===m+1,E={isHole:v,points:A,id:a,parent:0};h.push(E);let I;for(const N of h)if(N.id===u){I=N;break}I?I.isHole?E.parent=v?I.parent:u:E.parent=v?u:I.parent:E.parent=v?u:0;const S=W(this,Jt,Rj).call(this,o,t,d,m,w,_,0);if(S===-1){o[p]=-a,o[p]!==1&&(u=Math.abs(o[p]));continue}let R=f(this,bo)[2*S],F=f(this,bo)[2*S+1];const k=d+R,T=m+F;w=k,_=T;let D=d,P=m;for(;;){const N=W(this,Jt,Pj).call(this,o,t,D,P,w,_,1);R=f(this,bo)[2*N],F=f(this,bo)[2*N+1];const L=D+R,M=P+F;A.push(M,L);const $=D*t+P;if(o[$+1]===0?o[$]=-a:o[$]===1&&(o[$]=a),L===d&&M===m&&D===k&&P===T){o[p]!==1&&(u=Math.abs(o[p]));break}else w=D,_=P,D=L,P=M}}}return h},I_=function(e,t,n,r){if(n-t<=4){for(let k=t;k<n-2;k+=2)r.push(e[k],e[k+1]);return}const s=e[t],o=e[t+1],a=e[n-4]-s,u=e[n-3]-o,h=Math.hypot(a,u),d=a/h,m=u/h,p=d*o-m*s,g=u/a,w=1/h,_=Math.atan(g),A=Math.cos(_),v=Math.sin(_),E=w*(Math.abs(A)+Math.abs(v)),I=w*(1-E+E**2),S=Math.max(Math.atan(Math.abs(v+A)*I),Math.atan(Math.abs(v-A)*I));let R=0,F=t;for(let k=t+2;k<n-2;k+=2){const T=Math.abs(p-d*e[k+1]+m*e[k]);T>R&&(F=k,R=T)}R>(h*S)**2?(W(this,Jt,I_).call(this,e,t,F+2,r),W(this,Jt,I_).call(this,e,F,n,r)):r.push(s,o)},Nj=function(e){const t=[],n=e.length;return W(this,Jt,I_).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},Oj=function(e,t,n,r,s,o){const a=new Float32Array(o**2),u=-2*r**2,h=o>>1;for(let _=0;_<o;_++){const A=(_-h)**2;for(let v=0;v<o;v++)a[_*o+v]=Math.exp((A+(v-h)**2)/u)}const d=new Float32Array(256),m=-2*s**2;for(let _=0;_<256;_++)d[_]=Math.exp(_**2/m);const p=e.length,g=new Uint8Array(p),w=new Uint32Array(256);for(let _=0;_<n;_++)for(let A=0;A<t;A++){const v=_*t+A,E=e[v];let I=0,S=0;for(let F=0;F<o;F++){const k=_+F-h;if(!(k<0||k>=n))for(let T=0;T<o;T++){const D=A+T-h;if(D<0||D>=t)continue;const P=e[k*t+D],N=a[F*o+T]*d[Math.abs(P-E)];I+=P*N,S+=N}}const R=g[v]=Math.round(I/S);w[R]++}return[g,w]},Lj=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},fT=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,s=1/0;for(let a=0,u=n.length;a<u;a++){const h=n[a]=e[a<<2];r=Math.max(r,h),s=Math.min(s,h)}const o=255/(r-s);for(let a=0,u=n.length;a<u;a++)n[a]=(n[a]-s)*o;return n},pT=function(e){let t,n=-1/0,r=-1/0;const s=e.findIndex(u=>u!==0);let o=s,a=s;for(t=s;t<256;t++){const u=e[t];u>n&&(t-o>r&&(r=t-o,a=t-1),n=u,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Fj=function(e){const t=e,{width:n,height:r}=e,{maxDim:s}=f(this,Md);let o=n,a=r;if(n>s||r>s){let p=n,g=r,w=Math.log2(Math.max(n,r)/s);const _=Math.floor(w);w=w===_?_-1:_;for(let v=0;v<w;v++){o=Math.ceil(p/2),a=Math.ceil(g/2);const E=new OffscreenCanvas(o,a);E.getContext("2d").drawImage(e,0,0,p,g,0,0,o,a),p=o,g=a,e!==t&&e.close(),e=E.transferToImageBitmap()}const A=Math.min(s/o,s/a);o=Math.round(o*A),a=Math.round(a*A)}const h=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,a),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=h.getImageData(0,0,o,a).data;return[W(this,Jt,fT).call(this,d),o,a]},z(Bl,Jt),z(Bl,Md,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),z(Bl,bo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class fD extends xj{constructor(){super(),super.updateProperties({fill:cn._defaultLineColor,"stroke-width":0})}clone(){const e=new fD;return e.updateAll(this),e}}class pD extends FA{constructor(e){super(e),super.updateProperties({stroke:cn._defaultLineColor,"stroke-width":1})}clone(){const e=new pD(this._viewParameters);return e.updateAll(this),e}}var bc,fa,Ec,Bd;const Yi=class Yi extends y1{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});z(this,bc,!1);z(this,fa,null);z(this,Ec,null);z(this,Bd,null);this._willKeepAspectRatio=!0,U(this,Ec,t.signatureData||null),U(this,fa,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){cn.initialize(t,n),this._defaultDrawingOptions=new fD,this._defaultDrawnSignatureOptions=new pD(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Rt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!f(this,fa)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(f(this,Ec)){const{lines:s,mustSmooth:o,areContours:a,description:u,uuid:h,heightInPage:d}=f(this,Ec),{rawDims:{pageWidth:m,pageHeight:p},rotation:g}=this.parent.viewport,w=Bl.processDrawnLines({lines:s,pageWidth:m,pageHeight:p,rotation:g,innerMargin:Yi._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(w,d,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:f(this,fa)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){U(this,Bd,t),this.addEditToolbar()}getUuid(){return f(this,Bd)}get description(){return f(this,fa)}set description(t){U(this,fa,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:s,height:o}=f(this,Ec),a=Math.max(s,o),u=Bl.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:r,width:s,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,s){const{x:o,y:a}=this,{outline:u}=U(this,Ec,t);U(this,bc,u instanceof cT),this.description=r;let h;f(this,bc)?h=Yi.getDefaultDrawingOptions():(h=Yi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[d,m]=this.parentDimensions,[,p]=this.pageDimensions;let g=n/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(d*this.width,m*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Bl.process(t,n,r,s,Yi._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:s},rotation:o}=this.parent.viewport;return Bl.extractContoursFromText(t,n,r,s,o,Yi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Bl.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:s,innerMargin:Yi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Yi.getDefaultDrawingOptions():(this._drawingOptions=Yi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:yt.SIGNATURE,isSignature:!0,areContours:f(this,bc),color:[0,0,0],thickness:f(this,bc)?0:o,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.paths={lines:n,points:r},a.uuid=f(this,Bd),a.isCopy=!0):a.lines=n,f(this,fa)&&(a.accessibilityData={type:"Figure",alt:f(this,fa)}),a}static deserializeDraw(t,n,r,s,o,a){return a.areContours?cT.deserialize(t,n,r,s,o,a):i2.deserialize(t,n,r,s,o,a)}static async deserialize(t,n,r){var o;const s=await super.deserialize(t,n,r);return U(s,bc,t.areContours),s.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",U(s,Bd,t.uuid),s}};bc=new WeakMap,fa=new WeakMap,Ec=new WeakMap,Bd=new WeakMap,ie(Yi,"_type","signature"),ie(Yi,"_editorType",yt.SIGNATURE),ie(Yi,"_defaultDrawingOptions",null);let mT=Yi;var En,Er,Cc,Nl,xc,Pm,Ol,jd,pa,ds,Nm,Ht,Ty,Iy,D_,k_,R_,yT,P_,Mj;class gT extends cn{constructor(t){super({...t,name:"stampEditor"});z(this,Ht);z(this,En,null);z(this,Er,null);z(this,Cc,null);z(this,Nl,null);z(this,xc,null);z(this,Pm,"");z(this,Ol,null);z(this,jd,!1);z(this,pa,null);z(this,ds,!1);z(this,Nm,!1);U(this,Nl,t.bitmapUrl),U(this,xc,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){cn.initialize(t,n)}static isHandlingMimeForPasting(t){return lS.includes(t)}static paste(t,n){n.pasteEditor({mode:yt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,u=await r.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;f(this,Er)&&(U(this,En,null),this._uiManager.imageManager.deleteId(f(this,Er)),(t=f(this,Ol))==null||t.remove(),U(this,Ol,null),f(this,pa)&&(clearTimeout(f(this,pa)),U(this,pa,null))),super.remove()}rebuild(){if(!this.parent){f(this,Er)&&W(this,Ht,D_).call(this);return}super.rebuild(),this.div!==null&&(f(this,Er)&&f(this,Ol)===null&&W(this,Ht,D_).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(f(this,Cc)||f(this,En)||f(this,Nl)||f(this,xc)||f(this,Er)||f(this,jd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),f(this,jd)||(f(this,En)?W(this,Ht,k_).call(this):W(this,Ht,D_).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(U(this,Er,r),s&&U(this,En,s),U(this,jd,!1),W(this,Ht,k_).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;f(this,pa)!==null&&clearTimeout(f(this,pa)),U(this,pa,setTimeout(()=>{U(this,pa,null),W(this,Ht,yT).call(this)},200))}copyCanvas(t,n,r=!1){var g;t||(t=224);const{width:s,height:o}=f(this,En),a=new Da;let u=f(this,En),h=s,d=o,m=null;if(n){if(s>n||o>n){const T=Math.min(n/s,n/o);h=Math.floor(s*T),d=Math.floor(o*T)}m=document.createElement("canvas");const w=m.width=Math.ceil(h*a.sx),_=m.height=Math.ceil(d*a.sy);f(this,ds)||(u=W(this,Ht,R_).call(this,w,_));const A=m.getContext("2d");A.filter=this._uiManager.hcmFilter;let v="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",E="#42414d");const I=15,S=I*a.sx,R=I*a.sy,F=new OffscreenCanvas(S*2,R*2),k=F.getContext("2d");k.fillStyle=v,k.fillRect(0,0,S*2,R*2),k.fillStyle=E,k.fillRect(0,0,S,R),k.fillRect(S,R,S,R),A.fillStyle=A.createPattern(F,"repeat"),A.fillRect(0,0,w,_),A.drawImage(u,0,0,u.width,u.height,0,0,w,_)}let p=null;if(r){let w,_;if(a.symmetric&&u.width<t&&u.height<t)w=u.width,_=u.height;else if(u=f(this,En),s>t||o>t){const E=Math.min(t/s,t/o);w=Math.floor(s*E),_=Math.floor(o*E),f(this,ds)||(u=W(this,Ht,R_).call(this,w,_))}const v=new OffscreenCanvas(w,_).getContext("2d",{willReadFrequently:!0});v.drawImage(u,0,0,u.width,u.height,0,0,w,_),p={width:w,height:_,data:v.getImageData(0,0,w,_).data}}return{canvas:m,width:h,height:d,imageData:p}}static async deserialize(t,n,r){var A;let s=null,o=!1;if(t instanceof Z4){const{data:{rect:v,rotation:E,id:I,structParent:S,popupRef:R,contentsObj:F},container:k,parent:{page:{pageNumber:T}},canvas:D}=t;let P,N;D?(delete t.canvas,{id:P,bitmap:N}=r.imageManager.getFromCanvas(k.id,D),D.remove()):(o=!0,t._hasNoCanvas=!0);const L=((A=await n._structTree.getAriaAttributes(`${sD}${I}`))==null?void 0:A.get("aria-label"))||"";s=t={annotationType:yt.STAMP,bitmapId:P,bitmap:N,pageIndex:T-1,rect:v.slice(0),rotation:E,annotationElementId:I,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:S,popupRef:R,comment:(F==null?void 0:F.str)||null}}const a=await super.deserialize(t,n,r),{rect:u,bitmap:h,bitmapUrl:d,bitmapId:m,isSvg:p,accessibilityData:g}=t;o?(r.addMissingCanvas(t.id,a),U(a,jd,!0)):m&&r.imageManager.isValidId(m)?(U(a,Er,m),h&&U(a,En,h)):U(a,Nl,d),U(a,ds,p);const[w,_]=a.pageDimensions;return a.width=(u[2]-u[0])/w,a.height=(u[3]-u[1])/_,g&&(a.altTextData=g),a._initialData=s,t.comment&&a.setCommentData(t.comment),U(a,Nm,!!s),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:yt.STAMP,bitmapId:f(this,Er),pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:f(this,ds),structTreeParentId:this._structTreeParentId};if(this.addComment(r),t)return r.bitmapUrl=W(this,Ht,P_).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=W(this,Ht,Mj).call(this,r);if(u.isSame)return null;u.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const a=f(this,ds)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(f(this,Er)))n.stamps.set(f(this,Er),{area:a,serialized:r}),r.bitmap=W(this,Ht,P_).call(this,!1);else if(f(this,ds)){const u=n.stamps.get(f(this,Er));a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=W(this,Ht,P_).call(this,!1))}return r}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}}En=new WeakMap,Er=new WeakMap,Cc=new WeakMap,Nl=new WeakMap,xc=new WeakMap,Pm=new WeakMap,Ol=new WeakMap,jd=new WeakMap,pa=new WeakMap,ds=new WeakMap,Nm=new WeakMap,Ht=new WeakSet,Ty=function(t,n=!1){if(!t){this.remove();return}U(this,En,t.bitmap),n||(U(this,Er,t.id),U(this,ds,t.isSvg)),t.file&&U(this,Pm,t.file.name),W(this,Ht,k_).call(this)},Iy=function(){if(U(this,Cc,null),this._uiManager.enableWaiting(!1),!!f(this,Ol)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,En)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,En)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},D_=function(){if(f(this,Er)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,Er)).then(r=>W(this,Ht,Ty).call(this,r,!0)).finally(()=>W(this,Ht,Iy).call(this));return}if(f(this,Nl)){const r=f(this,Nl);U(this,Nl,null),this._uiManager.enableWaiting(!0),U(this,Cc,this._uiManager.imageManager.getFromUrl(r).then(s=>W(this,Ht,Ty).call(this,s)).finally(()=>W(this,Ht,Iy).call(this)));return}if(f(this,xc)){const r=f(this,xc);U(this,xc,null),this._uiManager.enableWaiting(!0),U(this,Cc,this._uiManager.imageManager.getFromFile(r).then(s=>W(this,Ht,Ty).call(this,s)).finally(()=>W(this,Ht,Iy).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=lS.join(",");const n=this._uiManager._signal;U(this,Cc,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),W(this,Ht,Ty).call(this,s)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>W(this,Ht,Iy).call(this))),t.click()},k_=function(){var m;const{div:t}=this;let{width:n,height:r}=f(this,En);const[s,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*s,r=this.height*o;else if(n>a*s||r>a*o){const p=Math.min(a*s/n,a*o/r);n*=p,r*=p}const[u,h]=this.parentDimensions;this.setDims(n*u/s,r*h/o),this._uiManager.enableWaiting(!1);const d=U(this,Ol,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/s,this.height=r/o,(m=this._initialOptions)!=null&&m.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),W(this,Ht,yT).call(this),f(this,Nm)||(this.parent.addUndoableEditor(this),U(this,Nm,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,Pm)&&this.div.setAttribute("aria-description",f(this,Pm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},R_=function(t,n){const{width:r,height:s}=f(this,En);let o=r,a=s,u=f(this,En);for(;o>2*t||a>2*n;){const h=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const m=new OffscreenCanvas(o,a);m.getContext("2d").drawImage(u,0,0,h,d,0,0,o,a),u=m.transferToImageBitmap()}return u},yT=function(){const[t,n]=this.parentDimensions,{width:r,height:s}=this,o=new Da,a=Math.ceil(r*t*o.sx),u=Math.ceil(s*n*o.sy),h=f(this,Ol);if(!h||h.width===a&&h.height===u)return;h.width=a,h.height=u;const d=f(this,ds)?f(this,En):W(this,Ht,R_).call(this,a,u),m=h.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(d,0,0,d.width,d.height,0,0,a,u)},P_=function(t){if(t){if(f(this,ds)){const s=this._uiManager.imageManager.getSvgUrl(f(this,Er));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=f(this,En),n.getContext("2d").drawImage(f(this,En),0,0),n.toDataURL()}if(f(this,ds)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Gc.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Gc.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(f(this,En),0,0,f(this,En).width,f(this,En).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(f(this,En))},Mj=function(t){var a;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=t.pageIndex===n,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},ie(gT,"_type","stamp"),ie(gT,"_editorType",yt.STAMP);var qd,Om,ma,Sc,Ll,fs,Tc,Lm,Ud,Eo,Fl,Cr,Ml,Ic,Fm,tt,Dc,xn,Bj,Go,wT,_T,N_;const po=class po{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:u,viewport:h,l10n:d}){z(this,xn);z(this,qd);z(this,Om,!1);z(this,ma,null);z(this,Sc,null);z(this,Ll,null);z(this,fs,new Map);z(this,Tc,!1);z(this,Lm,!1);z(this,Ud,!1);z(this,Eo,null);z(this,Fl,null);z(this,Cr,null);z(this,Ml,null);z(this,Ic,null);z(this,Fm,-1);z(this,tt);const m=[...f(po,Dc).values()];if(!po._initialized){po._initialized=!0;for(const p of m)p.initialize(d,e)}e.registerEditorTypes(m),U(this,tt,e),this.pageIndex=t,this.div=n,U(this,qd,s),U(this,ma,o),this.viewport=h,U(this,Cr,u),this.drawLayer=a,this._structTree=r,f(this,tt).addLayer(this)}get isEmpty(){return f(this,fs).size===0}get isInvisible(){return this.isEmpty&&f(this,tt).getMode()===yt.NONE}updateToolbar(e){f(this,tt).updateToolbar(e)}updateMode(e=f(this,tt).getMode()){switch(W(this,xn,N_).call(this),e){case yt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of f(po,Dc).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=f(this,Cr))==null?void 0:t.div)}setEditingState(e){f(this,tt).setEditingState(e)}addCommands(e){f(this,tt).addCommands(e)}cleanUndoStack(e){f(this,tt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=f(this,ma))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;U(this,Ud,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=f(this,Ic))==null||n.abort(),U(this,Ic,null);const e=new Set;for(const r of f(this,fs).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(f(this,tt).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!f(this,ma)){U(this,Ud,!1);return}const t=f(this,ma).getEditableAnnotations();for(const r of t){if(r.hide(),f(this,tt).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}U(this,Ud,!1)}disable(){var r;if(U(this,Lm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),f(this,Cr)&&!f(this,Ic)){U(this,Ic,new AbortController);const s=f(this,tt).combinedSignal(f(this,Ic));f(this,Cr).div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:d}=o,m=f(this,Fm);if(d-m>500){U(this,Fm,d);return}U(this,Fm,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const g=document.elementsFromPoint(u,h);if(p.toggle("getElements",!1),!this.div.contains(g[0]))return;let w;const _=new RegExp(`^${k5}[0-9]+$`);for(const v of g)if(_.test(v.id)){w=v.id;break}if(!w)return;const A=f(this,fs).get(w);(A==null?void 0:A.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),A.dblclick())},{signal:s,capture:!0})}const e=new Map,t=new Map;for(const s of f(this,fs).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(f(this,ma)){const s=f(this,ma).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(f(this,tt).isDeletedAnnotationElement(a)){o.updateEdited({deleted:!0});continue}let u=t.get(a);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=e.get(a),u&&(f(this,tt).addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}W(this,xn,N_).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of f(po,Dc).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),U(this,Lm,!1)}getEditableAnnotation(e){var t;return((t=f(this,ma))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){f(this,tt).getActive()!==e&&f(this,tt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=f(this,Cr))!=null&&e.div&&!f(this,Ml)){U(this,Ml,new AbortController);const t=f(this,tt).combinedSignal(f(this,Ml));f(this,Cr).div.addEventListener("pointerdown",W(this,xn,Bj).bind(this),{signal:t}),f(this,Cr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=f(this,Cr))!=null&&e.div&&f(this,Ml)&&(f(this,Ml).abort(),U(this,Ml,null),f(this,Cr).div.classList.remove("highlighting"))}enableClick(){if(f(this,Sc))return;U(this,Sc,new AbortController);const e=f(this,tt).combinedSignal(f(this,Sc));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=f(this,Sc))==null||e.abort(),U(this,Sc,null)}attach(e){f(this,fs).set(e.id,e);const{annotationElementId:t}=e;t&&f(this,tt).isDeletedAnnotationElement(t)&&f(this,tt).removeDeletedAnnotationElement(e)}detach(e){var t;f(this,fs).delete(e.id),(t=f(this,qd))==null||t.removePointerInTextLayer(e.contentDiv),!f(this,Lm)&&e.annotationElementId&&f(this,tt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),f(this,tt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(f(this,tt).addDeletedAnnotationElement(e.annotationElementId),cn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),f(this,tt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!f(this,Ud)),f(this,tt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!f(this,Ll)&&(e._focusEventsAllowed=!1,U(this,Ll,setTimeout(()=>{U(this,Ll,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:f(this,tt)._signal}),t.focus())},0))),e._structTreeParentId=(n=f(this,qd))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return f(this,tt).getId()}combinedSignal(e){return f(this,tt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=f(this,xn,Go))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await f(this,tt).updateMode(e.mode);const{offsetX:n,offsetY:r}=W(this,xn,_T).call(this),s=this.getNextId(),o=W(this,xn,wT).call(this,{parent:this,id:s,x:n,y:r,uiManager:f(this,tt),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=f(po,Dc).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,f(this,tt)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=W(this,xn,wT).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:f(this,tt),isCentered:t,...n});return s&&this.add(s),s}addNewEditor(e={}){this.createAndAddNewEditor(W(this,xn,_T).call(this),!0,e)}setSelected(e){f(this,tt).setSelected(e)}toggleSelected(e){f(this,tt).toggleSelected(e)}unselect(e){f(this,tt).unselect(e)}pointerup(e){var r;const{isMac:t}=$r.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!f(this,Tc)||(U(this,Tc,!1),(r=f(this,xn,Go))!=null&&r.isDrawer&&f(this,xn,Go).supportMultipleDrawings))return;if(!f(this,Om)){U(this,Om,!0);return}const n=f(this,tt).getMode();if(n===yt.STAMP||n===yt.SIGNATURE){f(this,tt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(f(this,tt).getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),f(this,Tc)){U(this,Tc,!1);return}const{isMac:t}=$r.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(U(this,Tc,!0),(r=f(this,xn,Go))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=f(this,tt).getActive();U(this,Om,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),f(this,Eo)){f(this,xn,Go).startDrawing(this,f(this,tt),!1,e);return}f(this,tt).setCurrentDrawingSession(this),U(this,Eo,new AbortController);const t=f(this,tt).combinedSignal(f(this,Eo));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(U(this,Fl,null),this.commitOrRemove())},{signal:t}),f(this,xn,Go).startDrawing(this,f(this,tt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&U(this,Fl,t);return}f(this,Fl)&&setTimeout(()=>{var t;(t=f(this,Fl))==null||t.focus(),U(this,Fl,null)},0)}endDrawingSession(e=!1){return f(this,Eo)?(f(this,tt).setCurrentDrawingSession(null),f(this,Eo).abort(),U(this,Eo,null),U(this,Fl,null),f(this,xn,Go).endDrawing(e)):null}findNewParent(e,t,n){const r=f(this,tt).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return f(this,Eo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){f(this,Eo)&&f(this,xn,Go).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=f(this,tt).getActive())==null?void 0:e.parent)===this&&(f(this,tt).commitOrRemove(),f(this,tt).setActiveEditor(null)),f(this,Ll)&&(clearTimeout(f(this,Ll)),U(this,Ll,null));for(const n of f(this,fs).values())(t=f(this,qd))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,f(this,fs).clear(),f(this,tt).removeLayer(this)}render({viewport:e}){this.viewport=e,Xd(this.div,e);for(const t of f(this,tt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){f(this,tt).commitOrRemove(),W(this,xn,N_).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Xd(this.div,{rotation:n}),t!==n)for(const r of f(this,fs).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return f(this,tt).viewParameters.realScale}};qd=new WeakMap,Om=new WeakMap,ma=new WeakMap,Sc=new WeakMap,Ll=new WeakMap,fs=new WeakMap,Tc=new WeakMap,Lm=new WeakMap,Ud=new WeakMap,Eo=new WeakMap,Fl=new WeakMap,Cr=new WeakMap,Ml=new WeakMap,Ic=new WeakMap,Fm=new WeakMap,tt=new WeakMap,Dc=new WeakMap,xn=new WeakSet,Bj=function(e){f(this,tt).unselectAll();const{target:t}=e;if(t===f(this,Cr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&f(this,Cr).div.contains(t)){const{isMac:n}=$r.platform;if(e.button!==0||e.ctrlKey&&n)return;f(this,tt).showAllEditors("highlight",!0,!0),f(this,Cr).div.classList.add("free"),this.toggleDrawing(),g1.startHighlighting(this,f(this,tt).direction==="ltr",{target:f(this,Cr).div,x:e.x,y:e.y}),f(this,Cr).div.addEventListener("pointerup",()=>{f(this,Cr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,tt)._signal}),e.preventDefault()}},Go=function(){return f(po,Dc).get(f(this,tt).getMode())},wT=function(e){const t=f(this,xn,Go);return t?new t.prototype.constructor(e):null},_T=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+r),h=(s+a)/2-e,d=(o+u)/2-t,[m,p]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:m,offsetY:p}},N_=function(){for(const e of f(this,fs).values())e.isEmpty()&&e.remove()},ie(po,"_initialized",!1),z(po,Dc,new Map([ZS,uT,gT,g1,mT].map(e=>[e._editorType,e])));let vT=po;var Co,gi,Vd,O0,F1,jj,ka,bT,qj,ET;const or=class or{constructor({pageIndex:e}){z(this,ka);z(this,Co,null);z(this,gi,new Map);z(this,Vd,new Map);this.pageIndex=e}setParent(e){if(!f(this,Co)){U(this,Co,e);return}if(f(this,Co)!==e){if(f(this,gi).size>0)for(const t of f(this,gi).values())t.remove(),e.append(t);U(this,Co,e)}}static get _svgFactory(){return Rt(this,"_svgFactory",new p1)}draw(e,t=!1,n=!1){const r=ir(or,O0)._++,s=W(this,ka,bT).call(this),o=or._svgFactory.createElement("defs");s.append(o);const a=or._svgFactory.createElement("path");o.append(a);const u=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke"),t&&f(this,Vd).set(r,a);const h=n?W(this,ka,qj).call(this,o,u):null,d=or._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${u}`),this.updateProperties(s,e),f(this,gi).set(r,s),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=ir(or,O0)._++,r=W(this,ka,bT).call(this),s=or._svgFactory.createElement("defs");r.append(s);const o=or._svgFactory.createElement("path");s.append(o);const a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const m=or._svgFactory.createElement("mask");s.append(m),u=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const p=or._svgFactory.createElement("rect");m.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const g=or._svgFactory.createElement("use");m.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=or._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${a}`),u&&h.setAttribute("mask",`url(#${u})`);const d=h.cloneNode();return r.append(d),h.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),f(this,gi).set(n,r),n}finalizeDraw(e,t){f(this,Vd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;const{root:n,bbox:r,rootClass:s,path:o}=t,a=typeof e=="number"?f(this,gi).get(e):e;if(a){if(n&&W(this,ka,ET).call(this,a,n),r&&W(u=or,F1,jj).call(u,a,r),s){const{classList:h}=a;for(const[d,m]of Object.entries(s))h.toggle(d,m)}if(o){const d=a.firstChild.firstChild;W(this,ka,ET).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const n=f(this,gi).get(e);n&&(f(t,Co).append(n),f(this,gi).delete(e),f(t,gi).set(e,n))}remove(e){f(this,Vd).delete(e),f(this,Co)!==null&&(f(this,gi).get(e).remove(),f(this,gi).delete(e))}destroy(){U(this,Co,null);for(const e of f(this,gi).values())e.remove();f(this,gi).clear(),f(this,Vd).clear()}};Co=new WeakMap,gi=new WeakMap,Vd=new WeakMap,O0=new WeakMap,F1=new WeakSet,jj=function(e,[t,n,r,s]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},ka=new WeakSet,bT=function(){const e=or._svgFactory.create(1,1,!0);return f(this,Co).append(e),e.setAttribute("aria-hidden",!0),e},qj=function(e,t){const n=or._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=or._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},ET=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},z(or,F1),z(or,O0,0);let AT=or;globalThis._pdfjsTestingUtils={HighlightOutliner:tT};globalThis.pdfjsLib={AbortException:Wc,AnnotationEditorLayer:vT,AnnotationEditorParamsType:Ft,AnnotationEditorType:yt,AnnotationEditorUIManager:Qd,AnnotationLayer:YS,AnnotationMode:Mu,AnnotationType:Gn,build:eee,ColorPicker:d1,createValidAbsoluteUrl:R5,DOMSVGFactory:p1,DrawLayer:AT,FeatureTest:$r,fetchData:e2,getDocument:O4,getFilenameFromUrl:$Q,getPdfFilenameFromUrl:WQ,getRGB:OA,getUuid:O5,getXfaPageViewport:KQ,GlobalWorkerOptions:ya,ImageKind:i_,InvalidPDFException:oS,isDataScheme:NA,isPdfFile:aD,isValidExplicitDest:sZ,MathClamp:vi,noContextMenu:Js,normalizeUnicode:VQ,OPS:tv,OutputScale:Da,PasswordResponses:NQ,PDFDataRangeTransport:L4,PDFDateString:l1,PDFWorker:iv,PermissionFlag:PQ,PixelsPerInch:Gc,RenderingCancelledException:oD,ResponseException:a1,setLayerDimensions:Xd,shadow:Rt,SignatureExtractor:Bl,stopEvent:Jn,SupportedImageMimeTypes:lS,TextLayer:nv,TouchManager:c1,updateUrlHash:P5,Util:Ke,VerbosityLevel:kA,version:ZZ,XfaLayer:j4};const Eee="/assets/pdf.worker.min-r-TJsTTt.mjs";ya.workerSrc=Eee;class Uj extends dt{constructor(t){super(t);ie(this,"handleFileUpload",async t=>{var r,s,o,a,u;const n=(r=t.target.files)==null?void 0:r[0];if(n){this.setState({loading:!0,error:null});try{const h=(n.name.split(".").pop()||"").toLowerCase();if(h==="pdf"){const d=await this._parsePdf(n);(o=(s=this.props)==null?void 0:s.callBack)==null||o.call(s,{data:d})}else if(["txt","md","log"].includes(h)){const d=await this._parseText(n);(u=(a=this.props)==null?void 0:a.callBack)==null||u.call(a,{data:d})}else throw new Error("Unsupported file type. Please upload a .pdf or .txt/.md/.log file.")}catch(h){console.error("Upload/parse error:",h),this.setState({error:(h==null?void 0:h.message)||"Failed to parse file."})}finally{this.setState({loading:!1}),t.target.value=""}}});ie(this,"_parseText",async t=>{const n=await t.text();return{type:"text",fileName:t.name,size:t.size,text:n,lines:n.split(/\r?\n/)}});ie(this,"_parsePdf",async t=>{const n=await t.arrayBuffer(),r=await O4({data:n}).promise,s=[];for(let o=1;o<=r.numPages;o++){const h=(await(await r.getPage(o)).getTextContent()).items.map(d=>"str"in d?d.str:(d==null?void 0:d.text)||"").join(" ").replace(/\s+([.,;:!?])/g,"$1").replace(/\s+/g," ").trim();s.push(h)}return{type:"pdf",fileName:t.name,size:t.size,numPages:r.numPages,pages:s,fullText:s.join(`

`)}});this.state={loading:!1,error:null}}render(){const{loading:t,error:n}=this.state;return C.jsxs("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:[C.jsx("label",{style:{cursor:"pointer"},children:t?"Processing":"Upload PDF/Text"}),C.jsx("input",{type:"file",accept:".pdf,.txt,.md,.log",onChange:this.handleFileUpload,style:{display:"block"}}),n&&C.jsx("div",{style:{color:"#ff6b6b",fontSize:12,marginTop:6},children:n})]})}}class Cee extends dt{constructor(t){super(t);ie(this,"types",{dataTraining:"profile",dataPreference:"training",chatbot:"content",valueProp:"valueProposition",genTraining:"content",companyVetting:"training",rules:"rules",other:"training"});this.state={...this.state}}render(){const{obj:t}=this.props;let n=t.getJson(),r=this.types[n.trainingType];return n.trainingType==="rules"&&(r=this.types.rules),r||(r=this.types.other),C.jsxs("div",{className:"sequence",children:[C.jsxs("div",{children:["owner: ",n.owner]}),C.jsxs("div",{children:["type: ",n.trainingType]}),C.jsxs("div",{children:["id/name: ",n._id]}),C.jsxs("div",{children:["Messaging Type ",n.emailType]}),C.jsxs("div",{children:["Training: ",n[r]]}),C.jsx(Uj,{callBack:async({data:s})=>{var h;debugger;const a={pdf:"fullText",text:"text"}[s.type];let u=this.types[n.trainingType];n.trainingType==="rules"&&(u=this.types.rules),u||(u=this.types.other),await t.setCompState({[u]:s[a]}),this.dispatch({uploadText:s}),(h=t.update)==null||h.call(t)}})]})}}class xee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return C.jsxs(C.Fragment,{children:[C.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Admin"}),C.jsx(er,{name:"client",cells:[{type:"custom",custom:RQ}]}),"ALL TRAINING DOCS",C.jsx(DA,{wrapperclassName:"none",content:C.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Add Training"}),popupSwitch:"addTraining"}),C.jsx(er,{name:"training",cells:[{type:"custom",custom:Cee}]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class See extends dt{constructor(t){super(t);ie(this,"handleCsvUpload",async t=>{debugger;const r=(await this.operationsFactory.prepare({prepare:{type:"csv",researchId:this.researchId}}))[0],s=xa.getIdFromURL();let o=this.componentList.getComponent("user",s,"_id");const a=t.map(d=>({...d,owner:s,type:"potentialProspect",researchId:this.researchId,companyOwnerId:o.getJson().companyId,csvId:r.getJson()._id}));let u=await this.operationsFactory.prepare({prepare:a});this.operationsFactory.run();let h=this.componentList.getComponent("research",this.researchId,"_id");if(h!=null&&h.getJson().autoSequence){debugger;let d=this.componentList.getComponent("user",xa.getIdFromURL(!1),"_id");d||(await this.componentList.getComponentFromBackend({type:"user"}),d=this.componentList.getComponent("user",xa.getIdFromURL(!1),"_id"));for(let p of u)p.copy({type:"contact",ogPPId:p.getJson()._id,outreach:!0});const m={contacts:a,user:d.getJson(),research:h.getJson()};try{const p=await fetch("https://autosequence-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),g=await p.json();if(!p.ok)throw g;console.log(" Contacts created & enrolled:",g)}catch(p){console.error(" Error adding to sequence:",p)}}});this.state={...this.state},this.handleFileUpload=this.handleFileUpload.bind(this)}componentDidUpdate(t){const n=this.props.obj.getJson()._id;n!==this.researchId&&(this.researchId=n)}handleFileUpload(t){debugger;const n=t.target.files[0];n&&I5.parse(n,{header:!0,skipEmptyLines:!0,complete:r=>{console.log("Parsed CSV data:",r.data),this.handleCsvUpload(r.data)},error:r=>{console.error("Error while parsing:",r)}})}async componentDidMount(){var s;const t=(s=this.props.obj)==null?void 0:s.getJson().content,n=Ro(t);this.setState({plainText:n});let{obj:r}=this.props;await this.componentList.getComponentsFromBackend({type:"csv",ids:r.getJson()._id,filterKeys:"researchId"}),this.setState({})}render(){const{obj:t}=this.props;let n=t.getJson();return C.jsxs("div",{children:[C.jsx("div",{className:"sequence",children:C.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[C.jsx("div",{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},className:"title-left",children:C.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.name})}),C.jsxs("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:[C.jsx("label",{htmlFor:`file-upload${this.props.obj.getJson()._id}`,className:"",children:"Upload"}),C.jsx("input",{id:`file-upload${this.props.obj.getJson()._id}`,type:"file",accept:".csv",onChange:this.handleFileUpload})]})]})}),C.jsxs("div",{children:[n.AIPrompt," "]}),C.jsx(er,{name:"csv",filter:{search:n._id,attribute:"researchId"},cells:[{type:"attribute",name:"_id"}]})]})}}class Tee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.componentList.getComponentFromBackend({type:"user"})}getInnerContent(){let e=xa.getIdFromURL();return C.jsxs(C.Fragment,{children:[C.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Admin"}),C.jsx(er,{name:"research",filter:{search:e,attribute:"owner"},cells:[{type:"custom",custom:See}]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Iee extends dt{constructor(e){super(e),this.state={...this.state,plainText:""}}componentDidMount(){var n;const e=(n=this.props.obj)==null?void 0:n.getJson().content,t=Ro(e);this.setState({plainText:t})}componentDidUpdate(e){var r,s;const t=(r=this.props.obj)==null?void 0:r.getJson().content,n=(s=this.props.obj)==null?void 0:s.getJson().content;if(t!==n){const o=Ro(t);this.setState({plainText:o})}}render(){const{obj:e}=this.props;let t=e.getJson();return C.jsx("div",{className:"sequence",children:C.jsxs("div",{className:"title",style:{justifyContent:"space-between",padding:"2px"},children:[C.jsx(yn,{style:{color:"#262626",maxWidth:"50%",minWidth:"50%"},to:"/user/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:C.jsx("span",{style:{width:"100%",display:"inline-block",overflow:"hidden",lineBreak:"anywhere",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t._id})}),C.jsx(yn,{style:{marginRight:"0px"},to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class Dee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return C.jsxs(C.Fragment,{children:[C.jsx("h4",{style:{marginBottom:"10px",font:"normal normal 900 16px/22px Satoshi"},children:"Admin"}),C.jsx(er,{name:"user",filter:{search:this.propsState.currentClient.getJson()._id,attribute:"clientId"},cells:[{type:"custom",custom:Iee}]})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class uF extends ig{async componentDidMount(){let e=xa.getIdFromURL();await this.getComponentsFromBackend(),await this.componentList.getComponentsFromBackend({type:"user",ids:e,filterKeys:"clientId"});let n=(await this.componentList.getComponentsFromBackend({type:"todo",ids:this.propsState.currentUser.getJson()._id,filterKeys:"owner"})).find(r=>r.getJson().clientId===e);n||(n=(await this.operationsFactory.prepare({prepare:{type:"todo",clientId:e},clean:!0}))[0]),this.dispatch({currentTodo:n})}getInnerContent(){return C.jsxs("div",{className:"fit",children:[[1,2,3,4,5,6].map(e=>{var s;const t=`attribute${e}`,n=`complete${e}`,r=(s=this.propsState.currentTodo)==null?void 0:s.getJson();return C.jsxs("div",{children:[r==null?void 0:r[t],C.jsx("div",{onClick:()=>{var a;const o=!r[n];(a=this.propsState.currentTodo)==null||a.setCompState({[n]:o},{run:!0})},children:r!=null&&r[n]?"Done":"Mark Done"})]},e)}),C.jsx(No,{obj:this.propsState.currentTodo,content:"save"}),C.jsx("div",{onClick:async()=>{let e=await this.operationsFactory.prepare({prepare:{type:"user"}});e=e[0],this.dispatch({popupSwitch:"addUser",currentPopupComponent:e})},children:"add user"}),C.jsx("div",{children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(Dee,{})})}),C.jsx("div",{})]})}render(){return C.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class kee extends ig{async componentDidMount(){await this.getComponentsFromBackend();let e=await this.componentList.getComponentsFromBackend({type:"client",ids:"alan@salescapture.com",filterKeys:"owner"});await this.componentList.getComponentsFromBackend("training",!1),console.log(e)}getInnerContent(){return C.jsx("div",{className:"fit",children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(xee,{})})})}render(){return C.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class cF extends ig{async componentDidMount(){await this.getComponentsFromBackend();let e=xa.getIdFromURL(),t=await this.componentList.getComponentsFromBackend({type:"research",ids:e,filterKeys:"owner"});this.dispatch({}),console.log(t)}getInnerContent(){return C.jsx("div",{className:"fit",children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(Tee,{})})})}render(){return C.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class hF extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id,visible:!0}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return C.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex"},children:[C.jsx("div",{style:{width:window.innerWidth>600?"50%":"100%"},children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(mQ,{})})}),C.jsx("div",{style:{width:window.innerWidth>600?"50%":"0%",position:"relative"},children:this.propsState.currentContact&&window.innerWidth>600&&this.state.visible&&C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(o1,{})})})]})}}class Ree extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",currentConversation:null}}async componentDidMount(){await this.prepareMessages()}async prepareMessages(){let e=this.propsState.currentConversation;e||(e=this.componentList.getComponent("conversation"),await this.dispatch({currentConversation:e})),e?(await this.prepNewMessage(),this.setState({start:!0})):this.setState({message:"no current conversations"})}async prepNewMessage(){let e=this.propsState.currentConversation;const t=e.getJson().messageType||"email";let n=this.componentList.getList("email",this.propsState.currentConversation.getJson()._id,"conversationId");n=n[n.length-1];let r=n.getJson().originalMessageId,s=n.getJson().subject;const o=await this.operationsFactory.prepare({prepare:{type:t,conversationId:e.getJson()._id,originalMessageId:r||"",subject:s,ownerMessage:!0},clean:!0});this.dispatch({currentComponent:o[0]}),this.setState({currentConversation:e})}componentDidUpdate(e,t){this.propsState.currentConversation!==this.state.currentConversation&&this.prepNewMessage()}getInnerContent(){var n,r;const{currentConversation:e}=this.propsState;let t=this.componentList.getComponent("contact",e==null?void 0:e.getJson().contact,"email");return C.jsxs("div",{children:[window.innerWidth>1&&C.jsxs("div",{style:{position:"sticky",top:0,zIndex:200,display:"flex",flexDirection:"row",alignItems:"center",justifyItems:"space-between",background:"white",padding:"20px",paddingBottom:"8px",transform:"translateZ(0)"},children:[window.innerWidth<600&&C.jsx("div",{onClick:()=>{this.dispatch({showConversation:void 0})},children:C.jsx("img",{src:fQ,style:{color:"black"}})}),C.jsx("div",{className:"contact-avatar",style:{maxWidth:"45px",maxHeight:"45px"},children:C.jsx("i",{className:"fa-solid fa-user"})}),C.jsxs("div",{className:"message-header-title",children:[C.jsx("span",{className:"sender-title",children:(n=this.propsState.currentConversation)==null?void 0:n.getJson().contactName}),C.jsx("span",{className:"sender-details-button",children:"See Details"})]}),C.jsx("div",{style:{fontSize:".8rem",cursor:"pointer",minWidth:"55px"},className:"hover-basic",children:(r=t==null?void 0:t.getJson())!=null&&r.autoAI?C.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:()=>{t.setCompState({autoAI:!1},{run:!0},!0)},children:C.jsx("i",{class:"fa-solid fa-comment-nodes",style:{fontSize:"35px",color:"#36b593"}})}):C.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:()=>{t.setCompState({autoAI:!0},{run:!0},!0)},children:C.jsx("i",{class:"fa-solid fa-comment-nodes",style:{fontSize:"35px",color:"#363636"}})})})]}),C.jsx("div",{className:"layoutColumn conversation-container",style:{padding:"20px",marginBottom:"12px"},children:this.state.message?C.jsx(C.Fragment,{children:this.state.message}):C.jsx(C.Fragment,{children:this.state.start&&C.jsxs("div",{style:{width:"100%",marginTop:"-20px"},children:[C.jsx(er,{mapContainerClass:"message-list",name:(e==null?void 0:e.getJson().messageType)||"email",cells:[{type:"custom",custom:dQ}],filter:{search:this.propsState.currentConversation.getJson()._id,attribute:"conversationId"},filterFunc:s=>!(s.getJson().body===void 0||s.getJson().body==="")}),C.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"sticky",bottom:0,zIndex:1,width:"100%",minHeight:"70px",paddingBottom:"85px",paddingLeft:"12px",background:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 1%)"},children:[C.jsx("div",{style:{position:"relative",width:"40px",zIndex:2},children:C.jsx(No,{content:C.jsx("button",{className:"footer-btn",style:{marginBottom:"-15px",position:"absolute",left:0},children:C.jsx("i",{className:"fa-solid fa-circle-plus"})}),callbackFunc:()=>{let s=this.propsState.currentComponent;if(s.getJson().body==="")return;this.prepNewMessage();let o={originalMessageId:s.getJson().originalMessageId,from:this.propsState.currentUser.getJson()._id,to:this.propsState.currentConversation.getJson().contact,subject:s.getJson().subject,text:s.getJson().body},a=this.propsState.currentUser.getJson().gmailAuthenticated?"https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app":"https://sendgridemailhandler-7c5i3vsqma-uc.a.run.app";fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(u=>{if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);return u.json()}).then(u=>{console.log("Reply sent successfully in thread.",u)}).catch(u=>{console.error("Error sending reply:",u)})}})}),C.jsx("div",{style:{zIndex:3,width:"100%"},children:C.jsx(nt,{wrapperClass:"footer-input",formClass:"search-input",name:"body",obj:this.propsState.currentComponent})})]})]})})})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}const Vj="/assets/LogoGreen-BKvA74vO.svg";class dF extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.dispatch({currentTopic:void 0,currentSubTopic:void 0,currentComponent:void 0}),await this.getComponentsFromBackend()}componentWillUnmount(){this.operationsFactory.clear(),this.dispatch({currentComponent:void 0})}render(){let e=window.innerWidth>600;return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:C.jsxs("div",{style:{paddingTop:"22px",display:"flex",flexDirection:"column",paddingLeft:e?"0%":"8%"},children:[C.jsx("img",{src:Vj,style:{width:"50%",marginBottom:"40px"}}),C.jsx("span",{style:{fontWeight:"900",fontSize:"1.12em",color:"#323232"},children:"Messaging Management Platform Coming Soon"}),C.jsx("div",{style:{marginTop:"20px",width:"80%"},children:"We're polishing the Messaging experience. In the meantime, you can manage contacts and research from the left navigation."}),C.jsx(yn,{to:"/contacts",className:"inLine-Link",style:{alignSelf:"flex-start",marginTop:"22px"},children:"Go to Contacts"})," "]})})}}class Pee extends dt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return C.jsx("div",{className:"sequence sequence-custom",children:C.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},onClick:()=>{let n=this.props.obj,r=this.propsState.selectedContacts;if(this.propsState.sequenceDataType==="research"){let o=[];for(let a of r)o.push(this.componentList.getComponent("contact",a.getJson()._id,"ogPPId"))}let s=this.componentList.getList("step",[n.getJson()._id],["sequenceId"]);if(s=s.filter(o=>o.getJson().content!==""&&o.getJson().content)[0],(r==null?void 0:r.length)>0){let o=parseFloat(s.getJson().nextSend),a=new Date(Date.now()+o*60*60*1e3);a=Qn.fromDate(a);for(let u of r){const h=n.getJson()._id,d=u.getJson().sequenceId,m=d?this.componentList.getComponent("sequence",d):null,p=String(u.getJson().finishedSequenceTags||"").split(",").map(w=>w.trim()).filter(Boolean),g=u.getJson().finished===!0;if(m&&g){const w=String(m.getJson().name||"");w&&!p.includes(w)&&p.push(w)}u.setCompState({sequenceId:h,finishedSequenceTags:p.join(","),finished:!1,emailNumber:0,nextSend:a},{run:!0})}this.dispatch({popupSwitch:"",selectedContacts:[]})}},children:[C.jsx("div",{className:"title-left",children:t.name}),C.jsx("div",{children:C.jsx("div",{id:"arrow-icon-appear",className:"send-seq-icon",children:C.jsx("i",{class:"fa-solid fa-right-long"})})})]})})}}class Nee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}async componentDidMount(){var e;if(this.propsState.currentUser.getJson().outreachio&&((e=this.componentList.getList("outreachUser"))==null?void 0:e.length)===0){let t=this.propsState.currentUser.getJson().outreachAccessToken;await fetch("https://getusersandmailboxes-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(async n=>{debugger;console.log(n);let r=n.users,s=n.mailboxes,o=r.map(u=>{let h=s.find(m=>m.attributes.email===u.attributes.email);return{_id:u.id.toString(),type:"outreachUser",mailboxId:h.id,type:"outreachUser",mailboxEmail:h.attributes.email}}),a=await this.componentList.addComponents(o,!0);this.dispatch({outreachUsers:a})}),await fetch("https://getsequences-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(async n=>{console.log(n);let r=n.data.map(o=>({type:"sequence",_id:o.id.toString(),outreach:!0,name:o.attributes.name,outreachSequenceId:o.attributes.id})),s=await this.componentList.addComponents(r,!0);this.dispatch({outreachSequences:s})})}}render(){var e;return C.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",position:"relative",paddingTop:"0px"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsxs("div",{style:{paddingTop:"20px",display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:20,background:"white"},children:[C.jsx("h2",{children:"Add to Sequence"})," ",C.jsxs("div",{className:"count-desc",style:{position:"relative",margin:"10px"},children:["Contacts: ",((e=this.propsState.selectedContacts)==null?void 0:e.length)||"0"," "]})]}),this.propsState.currentUser.getJson().outreachio?C.jsxs(C.Fragment,{children:["Select Sequence",C.jsx(nt,{handleChange:t=>{let n=t.target.value;debugger;let r=this.componentList.getComponent("sequence",n);this.dispatch({selectedSequence:r})},type:"select",textOptions:this.componentList.getList("sequence").map(t=>t.getJson().name),selectOptions:this.componentList.getList("sequence")}),"Select User",C.jsx(nt,{handleChange:t=>{debugger;let n=t.target.value,r=this.componentList.getComponent("outreachUser",n);this.dispatch({selectedUser:r})},type:"select",textOptions:this.componentList.getList("outreachUser").map(t=>t.getJson().mailboxEmail),selectOptions:this.componentList.getList("outreachUser")}),C.jsx("div",{onClick:async()=>{debugger;const{selectedContacts:t=[],selectedUser:n,selectedSequence:r,currentUser:s}=this.propsState,o=n.getJson(),a=r.getJson();if(!Array.isArray(t)||t.length===0){console.error("No contacts selected to add.");return}if(!o||!a){console.error("User or sequence not selected.");return}const h={contacts:t.map(d=>({firstName:d.getJson().firstName,lastName:d.getJson().lastName,emails:[d.getJson().email],userId:o._id,company:d.getJson().company,mailboxId:o.mailboxId})),sequenceId:a._id};try{let d=this.propsState.currentUser.getJson().outreachAccessToken;const m=await fetch("https://createcontactsandenroll-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(h)}),p=await m.json();if(!m.ok)throw p;console.log(" Contacts created & enrolled:",p),this.dispatch({popupSwitch:""})}catch(d){console.error(" Error adding to sequence:",d)}},className:"floating-select-btn-text",style:{color:"black"},children:"Add to Sequence"})]}):C.jsx(er,{name:"sequence",cells:[{type:"custom",custom:Pee}]})]})}}class Oee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}extractSubjectAndBody(e){const t=e.match(/^{{\s*([^}]+?)\s*}}/);let n="",r="";t?(n=t[1].trim(),r=e.slice(t[0].length).trim()):r=e.trim();const s=r.split(`

`).map(o=>`<p>${o.replace(/\n/g,"<br>")}</p>`).join(`
`);return{subject:n,body:s}}render(){this.props.obj;let e=C.jsx(No,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(e=C.jsx(qI,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),C.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsxs("div",{style:{display:"flex",gap:"8px"},children:[C.jsx("div",{onClick:async()=>{try{const t=this.propsState.currentUser,n=this.propsState.currentSequence.getJson()._id,r=this.componentList.getList("step",n,"sequenceId");let s="template";const o={};if(r.length>0){const d=r[r.length-1];s="sequence",o.conversationHistory={lastSentEmail:d.getJson().content}}const a=await $c.generateMessage(t,s,o),{subject:u,body:h}=$c.extractSubjectAndBody(a);console.log("Generated Subject:",u),console.log("Generated Body:",h),this.propsState.currentPopupComponent.setCompState({content:h,subject:u}),this.dispatch({})}catch(t){console.error("Failed to draft with AI:",t),alert("An error occurred while generating the draft. Please check the console.")}},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Draft With AI"}),C.jsx("div",{className:"dark-button-1",style:{position:"relative",width:"fit-content"},onClick:()=>{this.setState({selectTemplate:!0})},children:"Select Template"})]}),this.state.selectTemplate&&C.jsx(er,{name:"template",filterFunc:t=>{var s;if(t.getJson().content===void 0||t.getJson().content==="")return!1;let n=!1;this.propsState.searchText||(n=!0);let r=this.propsState.searchText;return(s=t.getJson().content)!=null&&s.toLowerCase().includes(r==null?void 0:r.toLowerCase())&&(n=!0),n},cells:[{type:"custom",custom:AQ}]}),C.jsx("br",{}),C.jsxs("div",{className:"content-home-add",children:[C.jsx("div",{className:"contact-contact-data",children:C.jsxs("div",{className:"row row-container",children:[C.jsx("div",{className:"row-name",style:{maxWidth:"fit-content"},children:"Subject:"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:this.propsState.currentPopupComponent,name:"subject",formClass:"underline-form"})})]})}),C.jsx("div",{className:"row",children:C.jsx(nt,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),C.jsxs("div",{className:"row",children:[C.jsx("div",{children:"Trigger this step in:"}),C.jsx(nt,{obj:this.propsState.currentPopupComponent,name:"nextSend",formClass:"underline-form",wrapperStyle:{width:"10%",marginRight:"8px",borderBottom:"1px solid rgb(212, 212, 212)"}})," days"]}),C.jsxs("div",{className:"row",children:[this.propsState.popupSwitch.includes("update")&&C.jsx(wA,{obj:this.propsState.currentPopupComponent,formClass:"del-button-1",callbackFunc:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}}),C.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"},children:C.jsx(fJ,{obj:this.propsState.currentPopupComponent,content:C.jsx("div",{style:{display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",fontSize:"19px",width:"37px",height:"37px",background:"#378c75",color:"#ade0d3"},children:C.jsx("div",{className:"icon-last",children:C.jsx("i",{className:"fa-solid fa-plus"})})})})}),C.jsx("div",{className:"col",children:e})]}),C.jsx("div",{})]})]})}}const fF="/assets/scailogofake-B3YGBRpn.png";class Lee extends A5{getHtml(){return C.jsxs("div",{className:"bottom-nav",children:[C.jsxs(yn,{to:"/conversation",className:"bottom-nav-item",children:[C.jsx("i",{className:"fa-solid fa-message"}),C.jsx("span",{children:"Messages Beta"})]}),C.jsxs(yn,{to:"/contacts",className:"bottom-nav-item",children:[C.jsx("i",{className:"fa-solid fa-address-book"}),C.jsx("span",{children:"Contacts"})]}),C.jsx("a",{href:"#",className:"bottom-nav-item",children:C.jsx("div",{id:"float-btn-plus",className:"float-btn",children:C.jsx("i",{className:"fas fa-plus"})})}),C.jsxs(yn,{to:"/research",className:"bottom-nav-item",children:[C.jsx("i",{className:"fa-solid fa-graduation-cap"}),C.jsx("span",{children:"Research"})]}),C.jsxs(yn,{to:"/content",className:"bottom-nav-item",children:[C.jsx("i",{className:"fa-solid fa-briefcase"}),C.jsx("span",{children:"Content"})]})]})}}class Fee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}async componentDidMount(){var t;if(this.propsState.currentUser.getJson().outreachio&&((t=this.componentList.getList("outreachUser"))==null?void 0:t.length)===0){let n=this.propsState.currentUser.getJson().outreachAccessToken;await fetch("https://getusersandmailboxes-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${n}`}}).then(r=>r.json()).then(async r=>{console.log(r);let s=r.users,o=r.mailboxes,a=s.map(p=>{let g=o.find(_=>_.attributes.email===p.attributes.email);return{_id:p.id.toString(),type:"outreachUser",mailboxId:g.id,type:"outreachUser",mailboxEmail:g.attributes.email}}),u=this.propsState.componentListInterface.getFactory(),d=[...this.componentList.getList("outreachUser")];for(let p of a){let g=await u.getComponent(p);d=[...d,g]}let m=d;this.componentList.setSelectedList("outreachUser",m),this.dispatch({outreachUsers:m})}),await fetch("https://getsequences-7c5i3vsqma-uc.a.run.app",{headers:{Authorization:`Bearer ${n}`}}).then(r=>r.json()).then(async r=>{console.log(r);let s=r.data.map(d=>({type:"sequence",_id:d.id.toString(),outreach:!0,outreach:"true",name:d.attributes.name,outreachSequenceId:d.attributes.id}));debugger;let o=this.propsState.componentListInterface.getFactory(),u=[...this.componentList.getList("sequence").filter(d=>d.getJson().outreach===void 0)];for(let d of s){let m=await o.getComponent(d);u=[...u,m]}let h=u;this.componentList.setSelectedList("sequence",h),this.dispatch({outreachSequences:h})})}this.propsState.currentPopupComponent.setCompState({companyOwnerId:this.propsState.currentUser.getJson().companyId})}render(){const e=this.propsState.currentPopupComponent;let t=this.propsState.currentPopupComponent.getJson().date?"Edit":"Add",n=this.propsState.currentPopupComponent.getJson().date?C.jsx(qI,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc}):C.jsx(No,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return C.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsxs("h2",{children:[t," Research Prompt"]})," ",C.jsxs("div",{className:"contact-contact-data",style:{padding:"10px",background:"rgb(245, 244, 244)",borderRadius:"12px"},children:[C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Profile Name:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"ie: Daily Research",name:"name",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Search Frequency:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"How often do you want new research results?",name:"searchFrequency",type:"select",inPopup:!0,selectOptions:["Daily","Weekly","Monthly"]})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Description:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"Describe your target prospect. I.e. Research VP of Sales at Tech Companies with less than 100M in sales",name:"AIPrompt",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Source:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"What Sources?",name:"displayDataSrc",type:"select",inPopup:!0,selectOptions:["existing","newData","both"],handleChange:r=>{let s=r.target.value;s==="both"?s=["existing","newData"]:s=[s],this.propsState.currentPopupComponent.setCompState({getDataFrom:s,displayDataSrc:r.target.value})}})]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Keywords:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"Which keywords are in the title of the prospects you are seeking?",name:"keywords",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Company Size by Revenue:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,name:"companySizebyRevenue",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Company Size by # of Employees:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,name:"companySizebyEmployees",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Geographic Location:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,name:"location",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Decision Making Level:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"Any, Non-Manager, Manager, Director, VP, C-Level",name:"contactLevel",inPopup:!0,type:"select",selectOptions:["Any","Non-Manager","Director","VP","C-Level"]})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Department:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"i.e. IT, HR, Sales, Marketing etc.",name:"department",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Industry:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"i.e. Technology, software, SAAS",name:"industry",inPopup:!0})," "]})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Disqualifiers:"}),C.jsxs("div",{className:"row-field",style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,placeholder:"Describe any characteristics, titles, or companies, that you specifically do not want included in the data results. ",name:"disqualifiers",inPopup:!0})," "]})]}),this.propsState.currentUser.getJson().outreachio&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Select Sequence:"}),C.jsx("div",{className:"row-field",style:{width:"100%"},children:C.jsx(nt,{name:"sequenceDisplay",handleChange:r=>{debugger;let s=r.target.value,o=this.componentList.getComponent("sequence",s,"name");e.setCompState({outreachSequenceId:o.getJson()._id,sequenceDisplay:r.target.value}),this.dispatch({})},obj:e,type:"select",selectOptions:this.componentList.getList("sequence").map(r=>r.getJson().name)})})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Select User:"}),C.jsx("div",{className:"row-field",style:{width:"100%"},children:C.jsx(nt,{obj:e,type:"select",name:"outreachUserDisplay",handleChange:r=>{debugger;let s=r.target.value,o=this.componentList.getComponent("outreachUser",s,"mailboxEmail");e.setCompState({outreachUserId:o.getJson()._id,outreachUserDisplay:r.target.value}),this.dispatch({})},selectOptions:this.componentList.getList("outreachUser").map(r=>r.getJson().mailboxEmail)})})]}),C.jsxs("div",{className:"row-container",style:{flexDirection:"column"},children:[C.jsx("div",{className:"row-name",children:"Automatic:"}),C.jsx("div",{className:"row-field",style:{width:"100%"},children:C.jsx(nt,{obj:e,type:"select",handleChange:r=>{let o=r.target.value==="Yes";e.setCompState({autoSequence:o,autoSequenceDisplay:r.target.value})},name:"autoSequenceDisplay",selectOptions:["Yes","No"]})})]})]}),C.jsxs("div",{style:{height:"fit-content",display:"flex",justifyContent:"flex-end",alignSelf:"flex-end",position:"absolute",bottom:20,right:20,borderRadius:"12px"},children:[this.propsState.currentPopupComponent.getJson().date&&C.jsx(wA,{obj:this.propsState.currentPopupComponent,isPopup:!0,inPopup:!0,callbackFunc:()=>{this.dispatch({currentPopupComponent:void 0,popupSwitch:""})},formClass:"dark-button-1",content:"Delete"})," ",C.jsxs("div",{children:[" ",n]})]})]}),C.jsx("div",{onClick:()=>{this.setState({showUpload:"people"})},children:"people upload"}),this.state.showUpload==="people"&&C.jsx(iS,{callBack:async r=>{debugger;let s=await this.componentList.getComponentsFromBackend({type:"peopleToResearch",ids:this.propsState.currentPopupComponent.getJson()._id,filterKeys:"researchId"});for(let o of s)await o.del();r=r.data.map((o,a)=>(o.owner=this.propsState.currentUser.getJson()._id,o.type="peopleToResearch",o.companyOwnerId=this.propsState.currentUser.getJson().companyId,o.researchId=this.propsState.currentPopupComponent.getJson()._id,o)),this.dispatch({uploadPeopleResearchData:r}),await this.operationsFactory.prepare({prepare:r}),await this.propsState.currentPopupComponent.setCompState({hasPeopleCsv:!0,hasCompanyCsv:!1}),await this.propsState.currentPopupComponent.update(),this.operationsFactory.addToComponentList()}}),C.jsx("div",{onClick:()=>{this.setState({showUpload:"company"})},children:"company upload"}),this.state.showUpload==="company"&&C.jsx(iS,{callBack:async r=>{debugger;let s=await this.componentList.getComponentsFromBackend({type:"companiesToResearch",ids:this.propsState.currentPopupComponent.getJson()._id,filterKeys:"researchId"});for(let o of s)await o.del();r=r.data.map((o,a)=>(o.owner=this.propsState.currentUser.getJson()._id,o.type="companiesToResearch",o.companyOwnerId=this.propsState.currentUser.getJson().companyId,o.researchId=this.propsState.currentPopupComponent.getJson()._id,o)),this.dispatch({uploadCompanyResearchData:r}),await this.operationsFactory.prepare({prepare:r}),await this.propsState.currentPopupComponent.setCompState({hasCompanyCsv:!0,hasPeopleCsv:!1}),await this.propsState.currentPopupComponent.update(),this.operationsFactory.addToComponentList()}})]})}}class Mee extends Ree{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}componentDidMount(){var e,t;(t=this.propsState.currentPopupComponent)==null||t.setCompState({conversationId:(e=this.propsState.currentConversation)==null?void 0:e.getJson()._id,originalMessageId:!1,ownerMessage:!0}),this.setState({email:this.propsState.currentPopupComponent})}componentDidUpdate(){}extractSubjectAndBody(e){const t=e.match(/^{{\s*([^}]+?)\s*}}/);let n="",r="";t?(n=t[1].trim(),r=e.slice(t[0].length).trim()):r=e.trim();const s=r.split(`

`).map(o=>`<p>${o.replace(/\n/g,"<br>")}</p>`).join(`
`);return{subject:n,body:s}}render(){var n;const e=this.props.obj;let t=C.jsx(No,{formClass:"dark-button-1",content:C.jsx("div",{children:"Send"}),callbackFunc:()=>{let r=this.state.email,s={from:this.propsState.currentUser.getJson()._id,to:this.propsState.currentConversation.getJson().contact,subject:r.getJson().subject,text:r.getJson().body},o=this.propsState.currentUser.getJson().gmailAuthenticated?"https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app":"https://sendgridemailhandler-7c5i3vsqma-uc.a.run.app";fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(a=>{if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);return a.json()}).then(a=>{console.log("Reply sent successfully in thread.",a)}).catch(a=>{console.error("Error sending reply:",a)}),this.dispatch({currentPopupComponent:void 0,popupSwitch:""})}});return C.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsx("div",{onClick:async()=>{try{const r=this.propsState.currentUser,s="template",o={},a=await $c.generateMessage(r,s,o),{subject:u,body:h}=$c.extractSubjectAndBody(a);this.propsState.currentPopupComponent.setCompState({body:h,subject:u}),this.dispatch({})}catch(r){console.error("Failed to draft with AI:",r),alert("An error occurred while generating the draft. Please check the console.")}},className:"dark-button-1",style:{position:"relative",width:"fit-content"},children:"Draft With AI"}),C.jsx("h2",{children:"Email"})," ",C.jsxs("div",{className:"contact-Add-container",children:[C.jsxs("div",{className:"row",children:[C.jsx("div",{children:"To:"}),C.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",(n=this.propsState.currentConversation)==null?void 0:n.getJson().contactName]})]}),C.jsxs("div",{className:"row",children:[C.jsx("div",{children:"From:"}),C.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ","Me"]})]}),C.jsxs("div",{className:"row",children:[C.jsx("div",{children:"Subject:"}),C.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",C.jsx(nt,{formClass:"underline-form",obj:e,name:"subject",inPopup:!0})," "]})]}),C.jsx("div",{children:C.jsxs("div",{style:{width:"100%"},children:[" ",C.jsx(nt,{obj:e,type:"quill",name:"body",inPopup:!0})," "]})}),C.jsxs("div",{style:{width:"100%",background:"white",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",C.jsxs("div",{style:{marginRight:"-10px"},children:[" ",t]})]})]})]})}}class Bee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){return C.jsxs("div",{style:{padding:"18px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsx("h2",{style:{font:"normal normal 900 18px/25px Satoshi"},children:"Add Tags to Selected"}),C.jsx("div",{className:"contact-contact-data",style:{marginTop:"8%",padding:"24px",border:"none",background:"#f0f0f0"},children:C.jsxs("div",{className:"row-container",children:[C.jsx("div",{className:"row-name",style:{maxWidth:"fit-content"},children:"Tags:"}),C.jsx("div",{className:"row-field",children:C.jsx("input",{class:"underline-form",onChange:e=>{let{value:t}=e.target;this.setState({tags:t})}})})]})}),C.jsx("div",{class:"dark-button-1",style:{justifySelf:"flex-end",marginTop:"20px"},onClick:async()=>{for(let e of this.propsState.selectedContacts){let t=e.getJson().tags||"";t=t.length===0?this.state.tags:","+this.state.tags,await e.setCompState({tags:t}),e.update()}this.dispatch({popupSwitch:""})},children:"Save"})]})}}class jee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return C.jsxs(C.Fragment,{children:[C.jsx(nt,{obj:this.propsState.currentPopupComponent,name:"_id",inPopup:!0}),C.jsx(nt,{obj:this.propsState.currentPopupComponent,name:"email",inPopup:!0}),C.jsx(nt,{obj:this.propsState.currentPopupComponent,name:"collection",inPopup:!0}),C.jsx(nt,{obj:this.propsState.currentPopupComponent,name:"owner",inPopup:!0}),C.jsx(No,{content:"save",callbackFunc:async()=>{let e=this.propsState.currentPopupComponent;await e.setCompState({clientId:this.propsState.currentClient.getJson()._id},{run:!0}),await this.operationsFactory.prepare({prepare:[{type:"aiSettings",owner:e.getJson()._id},{type:"limit",owner:e.getJson()._id}]}),this.operationsFactory.run(),this.dispatch({currentPopupComponent:void 0,popupSwitch:""})}})]})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class qee extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var t;const{sequence:e}=this.propsState;return C.jsxs("div",{style:{padding:"18px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[C.jsx("h2",{style:{font:"normal normal 900 18px/25px Satoshi"},children:"Delete Sequence"}),C.jsx("div",{style:{marginTop:"8%",padding:"24px",border:"none",background:"#f0f0f0"},children:C.jsxs("p",{children:["Are you sure you want to delete the sequence ",C.jsx("strong",{children:((t=this.propsState.delSequence)==null?void 0:t.getJson().name)||"this"}),"? This action cannot be undone."]})}),C.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"20px"},children:[C.jsx("div",{className:"dark-button-1",onClick:()=>{this.dispatch({popupSwitch:"",delSequence:void 0})},children:"Cancel"}),C.jsx(wA,{obj:this.propsState.delSequence,content:"Delete",inPopup:!0,isPopup:!0,callbackFunc:()=>{this.dispatch({popupSwitch:"",delSequence:void 0})},className:"dark-button-1 del-button-red"})]})]})}}class pF extends dt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}componentWillUnmount(){this.operationsFactory.clear(),this.dispatch({currentComponent:void 0})}getInnerContent(){let e=window.innerWidth>600;return C.jsx("div",{className:"layoutRow",style:{width:"100%",height:"100%",padding:"12px"},children:C.jsxs("div",{className:"layoutColumn-welcome",children:[C.jsx("img",{src:Vj,style:{width:"50%",marginBottom:"40px"}}),C.jsxs("div",{children:[C.jsx("span",{style:{fontWeight:"900",fontSize:"2em",color:"#323232"},children:"Welcome to SalesCapture AI"}),C.jsx("div",{style:{marginTop:"20px"},children:"Leverage the power of AI to supercharge your sales process"})]}),C.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:e?"row":"column",gap:"1em",marginTop:"30px",paddingBottom:e?"0px":"64px"},children:[C.jsxs("div",{className:"opener-page-card",children:[C.jsx("div",{style:{maxWidth:"45px",maxHeight:"45px",fontSize:"3em",color:"var(--app-green-3)"},children:C.jsx("i",{class:"fa-solid fa-magnifying-glass"})}),C.jsx("div",{className:"main-title",children:"Research Agent"}),C.jsx("div",{className:"main-message",children:"Identify the next best salees targets"}),C.jsx(yn,{to:"/research",className:"inLine-Link",children:C.jsx("div",{children:"Go to Research"})})]}),C.jsxs("div",{className:"opener-page-card",children:[C.jsx("div",{style:{maxWidth:"45px",maxHeight:"45px",fontSize:"3em",color:"var(--app-green-3)"},children:C.jsx("i",{class:"fa-solid fa-file-contract"})}),C.jsx("div",{className:"main-title",children:"Content Engine"}),C.jsx("div",{className:"main-message",children:"Quickly generate effective sales content"}),C.jsx(yn,{to:"/content",className:"inLine-Link",children:"Create Content"})," "]}),C.jsxs("div",{className:"opener-page-card",children:[C.jsx("div",{style:{maxWidth:"45px",maxHeight:"45px",fontSize:"3em",color:"var(--app-green-3)"},children:C.jsx("i",{class:"fa-solid fa-envelope-circle-check"})}),C.jsx("div",{className:"main-title",children:"Automated BDR"}),C.jsx("div",{className:"main-message",children:"Engage prospects with outbound campaigns"}),C.jsx(yn,{to:"/contacts",className:"inLine-Link",children:"Start Campaign"})," "]})]})]})})}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Uee extends ig{async componentDidMount(){await this.getComponentsFromBackend(),await this.componentList.getComponentsFromBackend("training",!1);const e=this.urlId;if(!e||e==="aigeneration"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}async bridgeAiService(){let{persona:e,details:t,messageType:n}=this.state;n||(n="template");const r=this.propsState.currentComponent,s=this.propsState.currentUser;if(!n){alert("Please select a message type.");return}const o={persona:e,details:t,conversationHistory:{}};switch(n){case"reply":o.conversationHistory={fullHistory:t,lastProspectReply:t};break;case"sequence":o.conversationHistory={lastSentEmail:t};break;default:o.details=t;break}try{const a=await $c.generateMessage(s,n,o),{subject:u,body:h}=$c.extractSubjectAndBody(a);r.setCompState({content:h,subject:u}),console.log(h),this.dispatch({})}catch(a){console.error("Failed to generate AI message:",a),alert("There was an error generating the message. Please check the console.")}}getInnerContent(){function e(a){const u=new Set;return a.filter(h=>{const d=h.getJson().emailType;return u.has(d)?!1:(u.add(d),!0)})}let t=this.componentList.getList("training","genTraining","trainingType");t=e(t);let n=t.map(a=>a.getJson().displayName),r=t.map(a=>a.getJson().emailType),s="Additional Instructions",o="Any extra details or specifications...";return this.state.messageType==="reply"?(s="Paste Email Thread to Reply To:",o="e.g., On Fri, Jul 25, 2025, Jane Smith wrote: I'm interested..."):this.state.messageType==="sequence"&&(s="Paste Last Email Sent in Sequence:",o="e.g., Subject: Checking In..."),C.jsxs("div",{className:"fit",style:{display:"flex",flexDirection:"column"},children:[C.jsx(yn,{to:"/content",className:"inLine-Link white-button-end",children:C.jsx("div",{children:"Go to Sequences"})}),C.jsx("h1",{children:"Content Engine"}),C.jsx("h3",{children:"The SalesCapture AI content engine is configured to optimize content for your products and services."}),C.jsx("div",{onClick:()=>this.setState({showAIDraft:!this.state.showAIDraft}),className:this.state.showAIDraft?"dark-button-1":"green-button-1",style:{position:"relative",width:"fit-content",margin:"1em"},children:this.state.showAIDraft?"Cancel":"Draft With AI"}),C.jsx("div",{className:"input-container",style:{marginTop:"38px"},children:" "}),this.state.showAIDraft&&C.jsxs("div",{style:{padding:"1em",marginLeft:"1em",border:"1px solid gray",borderRadius:"14px"},children:[C.jsx("h2",{children:"Generate Content"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:["Select Message Type:",C.jsx("div",{style:{marginLeft:"8px"},children:C.jsx(nt,{formClass:"input-bar row-container underline-form",type:"select",selectOptions:n,handleChange:a=>{let u=n.indexOf(a.target.value),h=r[u];this.setState({messageType:h})}})})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:["Persona/Tone",C.jsx("input",{className:"input-bar row-container",style:{border:"none",paddingBottom:".3em",margin:".5em"},name:"persona",placeholder:'(e.g., "friendly and casual" or "formal and direct")',onChange:a=>this.setState({persona:a.target.value})})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[C.jsx("div",{children:s}),C.jsx("input",{className:"input-bar row-container",style:{border:"none",paddingBottom:".3em",margin:".5em"},name:"details",placeholder:o,value:this.state.details||"",onChange:a=>this.setState({details:a.target.value})})]}),C.jsx("div",{className:"green-button-1",onClick:()=>this.bridgeAiService(),children:"Generate"})]}),C.jsxs("div",{className:"input-container",style:{marginTop:"38px"},children:[" ","Subject",C.jsx("div",{className:"input-bar row-container",children:this.propsState.currentComponent&&C.jsx(nt,{name:"subject",obj:this.propsState.currentComponent})})]}),C.jsxs("div",{className:"input-container",children:[" ","Content",C.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&C.jsx(nt,{type:"quill",name:"content",obj:this.propsState.currentComponent})})]}),C.jsx("div",{children:C.jsx(No,{content:C.jsx("div",{className:"dark-button-1",children:"Save Template"})})})]})}render(){return C.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class mF extends lf{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return C.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{display:"flex",flexDirection:"column"},children:C.jsx(pr,{theme:"NoBorder",type:"fit",content:C.jsx(Uee,{})})})}}class Vee extends dt{constructor(t){super(t);ie(this,"types",{dataTraining:"profile",dataPreference:"training",chatbot:"content",valueProp:"valueProposition",genTraining:"content",companyVetting:"training",rules:"rules",other:"training"});this.state={...this.state,defaultClass:"fit scroller"}}render(){let t=this.propsState.currentPopupComponent,n=C.jsx(No,{formClass:"dark-button-1",content:"Save",isPopup:!0});return C.jsxs(C.Fragment,{children:[C.jsx("h2",{style:{position:"sticky",top:0,padding:"2%",width:"80%"},children:"Add Training Doc"}),C.jsx("div",{className:"contact-Add-container",children:C.jsxs("div",{className:"contact-contact-data",children:[C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().owner?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Owner"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,formClass:"underline-form",name:"owner",placeholder:"owner",inPopup:!0})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().trainingType?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Training Type"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,formClass:"underline-form",name:"trainingType",placeholder:"e.g., valueProp, content, training",inPopup:!0,callbackFunc:r=>{let s=r[0];this.setState({trainingType:s.getJson().trainingType})}})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().prompt?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Email Type (only if its a type for messaging)"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,formClass:"underline-form",name:"emailType",placeholder:"Template training in general for messaging",inPopup:!0})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().prompt?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Prompt (only if its a type for messaging)"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,formClass:"underline-form",name:"prompt",placeholder:"Add an innitial prompt needed for messaging",inPopup:!0})})]}),C.jsxs("div",{className:`row-container ${t!=null&&t.getJson().prompt?"":"unfilled-container"}`,children:[C.jsx("div",{className:"row-name",children:"Display Name (only if its a type for messaging)"}),C.jsx("div",{className:"row-field",children:C.jsx(nt,{obj:t,formClass:"underline-form",name:"displayName",placeholder:"what is displayed on the dropdown",inPopup:!0})})]}),C.jsx(Uj,{callBack:async({data:r})=>{debugger;const o={pdf:"fullText",text:"text"}[r.type];let a=this.types[this.state.trainingType];this.state.trainingType==="rules"&&(a=this.types.rules),a||(a=this.types.other),await t.setCompState({[a]:r[o]}),this.dispatch({uploadText:r[o]}),this.setState({content:r[o]})}}),"Training Content:",this.state.content]})}),C.jsx("div",{style:{paddingBottom:"20px",width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end",gap:"8px"},children:n})]})}}class Hee extends OX{constructor(e){super(e,{db:J$,endpoint:"salescaptureAI",auth:Y$,storage:K$}),this.popupComponents={contact:o1,step:Oee,research:Fee,email:Mee,user:jee,training:Vee},this.popupComponentsProps={},s1.getFactory().registerComponent("bottomNavMap",Lee),this.state={...this.state,navBarProps:{mapType:window.innerWidth<1e3?"bottomNavMap":void 0,type:window.innerWidth<1e3?"topBar":void 0,style:{backgroundColor:"#35b593",color:"white",fontFamily:"'Satoshi-Variable', sans-serif"},cardStyle:{backgroundColor:"#35b593",position:window.innerWidth<1e3&&"absolute",bottom:window.innerWidth<1e3&&"0px",fontFamily:"'Satoshi-Variable', sans-serif"},logoURL:window.innerWidth>1e3&&fF,linkItemStyle:{color:"white",fontFamily:"'Satoshi-Variable', sans-serif"}},routes:[{comp:pF,name:"Home",path:"/"},{comp:dF,name:"Messages Beta",path:"conversation"},{comp:ML,name:"Contacts",path:"contacts"},{comp:jL,name:"Research",path:"research",idComp:hF},{comp:mF,path:"aigeneration",name:"Content Engine"},{comp:UL,name:"Settings",path:"settings"},{comp:qL,name:"",path:"content"},{comp:Rw,name:"",path:"sequence",idComp:Rw},{comp:Pw,name:"",path:"template",idComp:Pw},{comp:uF,name:"",path:"client",idComp:uF},{comp:kee,name:"Admin",path:"admin"},{comp:cF,name:"",path:"user",idComp:cF}],refresh:!0,popups:[{content:Nee,popupSwitch:"addToSequence"},{content:Bee,popupSwitch:"addTags"},{content:qee,popupSwitch:"delSequence"},{content:o1,popupSwitch:"viewPotentialProspect"}]},this.registerListWithFactory([...Object.values(tQ)]);let t=s1.getNavList();t.update(0,{class:"SCAILogo"}),t.update(1,{activeClass:"SCAILink"}),window.innerWidth<1e3&&(t.remove(2),t.remove(0))}componentDidMount(){super.componentDidMount();let e=document.getElementById("signUpFT");e&&(e.style.display="none");const t="data-login-img-inserted",n=()=>{const o=document.querySelectorAll('h1, h2, h3, [role="heading"]');return Array.from(o).find(a=>/login/i.test(a.textContent.trim()))},r=()=>{const o=n();if(!o)return!1;const a=o.parentElement;if(!a||a.hasAttribute(t))return!1;const u=document.createElement("img");return u.src=fF,u.alt="Login icon",u.style.display="block",u.style.borderRadius="15px",u.style.marginBottom="15px",u.style.width="200px",u.style.padding="10px",a.insertBefore(u,o),a.setAttribute(t,"true"),!0};if(r())return;const s=new MutationObserver(()=>{r()&&s.disconnect()});s.observe(document.body,{childList:!0,subtree:!0})}componentDidUpdate(e,t){this.state.gotUser&&this.state.refresh&&this.state.currentUser.getJson()._id!=="alan@salescapture.com"&&this.dispatch({refresh:!1,routes:[{comp:pF,name:"Home",path:"/"},{comp:dF,name:"Messages Beta",path:"conversation"},{comp:ML,name:"Contacts",path:"contacts"},{comp:jL,name:"Research",path:"research",idComp:hF},{comp:mF,path:"aigeneration",name:"Content Engine"},{comp:UL,name:"Settings",path:"settings"},{comp:qL,name:"",path:"content"},{comp:Rw,name:"",path:"sequence",idComp:Rw},{comp:Pw,name:"",path:"template",idComp:Pw}]})}}t6.createRoot(document.getElementById("root")).render(C.jsx(be.StrictMode,{children:C.jsx(Hee,{})}));
