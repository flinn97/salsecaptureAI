var ib=Object.defineProperty;var sb=(r,e,t)=>e in r?ib(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ae=(r,e,t)=>sb(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _d={exports:{}},al={},wd={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function ob(){if(S_)return rt;S_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function p(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function T(M,B,z){this.props=M,this.context=B,this.refs=S,this.updater=z||y}T.prototype.isReactComponent={},T.prototype.setState=function(M,B){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,B,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function E(){}E.prototype=T.prototype;function b(M,B,z){this.props=M,this.context=B,this.refs=S,this.updater=z||y}var N=b.prototype=new E;N.constructor=b,w(N,T.prototype),N.isPureReactComponent=!0;var I=Array.isArray,F=Object.prototype.hasOwnProperty,U={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function _(M,B,z){var ee,X={},H=null,Y=null;if(B!=null)for(ee in B.ref!==void 0&&(Y=B.ref),B.key!==void 0&&(H=""+B.key),B)F.call(B,ee)&&!P.hasOwnProperty(ee)&&(X[ee]=B[ee]);var ne=arguments.length-2;if(ne===1)X.children=z;else if(1<ne){for(var ie=Array(ne),fe=0;fe<ne;fe++)ie[fe]=arguments[fe+2];X.children=ie}if(M&&M.defaultProps)for(ee in ne=M.defaultProps,ne)X[ee]===void 0&&(X[ee]=ne[ee]);return{$$typeof:r,type:M,key:H,ref:Y,props:X,_owner:U.current}}function A(M,B){return{$$typeof:r,type:M.type,key:B,ref:M.ref,props:M.props,_owner:M._owner}}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function x(M){var B={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(z){return B[z]})}var O=/\/+/g;function D(M,B){return typeof M=="object"&&M!==null&&M.key!=null?x(""+M.key):B.toString(36)}function $(M,B,z,ee,X){var H=typeof M;(H==="undefined"||H==="boolean")&&(M=null);var Y=!1;if(M===null)Y=!0;else switch(H){case"string":case"number":Y=!0;break;case"object":switch(M.$$typeof){case r:case e:Y=!0}}if(Y)return Y=M,X=X(Y),M=ee===""?"."+D(Y,0):ee,I(X)?(z="",M!=null&&(z=M.replace(O,"$&/")+"/"),$(X,B,z,"",function(fe){return fe})):X!=null&&(k(X)&&(X=A(X,z+(!X.key||Y&&Y.key===X.key?"":(""+X.key).replace(O,"$&/")+"/")+M)),B.push(X)),1;if(Y=0,ee=ee===""?".":ee+":",I(M))for(var ne=0;ne<M.length;ne++){H=M[ne];var ie=ee+D(H,ne);Y+=$(H,B,z,ie,X)}else if(ie=p(M),typeof ie=="function")for(M=ie.call(M),ne=0;!(H=M.next()).done;)H=H.value,ie=ee+D(H,ne++),Y+=$(H,B,z,ie,X);else if(H==="object")throw B=String(M),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Y}function J(M,B,z){if(M==null)return M;var ee=[],X=0;return $(M,ee,"","",function(H){return B.call(z,H,X++)}),ee}function se(M){if(M._status===-1){var B=M._result;B=B(),B.then(function(z){(M._status===0||M._status===-1)&&(M._status=1,M._result=z)},function(z){(M._status===0||M._status===-1)&&(M._status=2,M._result=z)}),M._status===-1&&(M._status=0,M._result=B)}if(M._status===1)return M._result.default;throw M._result}var Z={current:null},re={transition:null},G={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:re,ReactCurrentOwner:U};function W(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:J,forEach:function(M,B,z){J(M,function(){B.apply(this,arguments)},z)},count:function(M){var B=0;return J(M,function(){B++}),B},toArray:function(M){return J(M,function(B){return B})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},rt.Component=T,rt.Fragment=t,rt.Profiler=i,rt.PureComponent=b,rt.StrictMode=n,rt.Suspense=h,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,rt.act=W,rt.cloneElement=function(M,B,z){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ee=w({},M.props),X=M.key,H=M.ref,Y=M._owner;if(B!=null){if(B.ref!==void 0&&(H=B.ref,Y=U.current),B.key!==void 0&&(X=""+B.key),M.type&&M.type.defaultProps)var ne=M.type.defaultProps;for(ie in B)F.call(B,ie)&&!P.hasOwnProperty(ie)&&(ee[ie]=B[ie]===void 0&&ne!==void 0?ne[ie]:B[ie])}var ie=arguments.length-2;if(ie===1)ee.children=z;else if(1<ie){ne=Array(ie);for(var fe=0;fe<ie;fe++)ne[fe]=arguments[fe+2];ee.children=ne}return{$$typeof:r,type:M.type,key:X,ref:H,props:ee,_owner:Y}},rt.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},rt.createElement=_,rt.createFactory=function(M){var B=_.bind(null,M);return B.type=M,B},rt.createRef=function(){return{current:null}},rt.forwardRef=function(M){return{$$typeof:c,render:M}},rt.isValidElement=k,rt.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:se}},rt.memo=function(M,B){return{$$typeof:d,type:M,compare:B===void 0?null:B}},rt.startTransition=function(M){var B=re.transition;re.transition={};try{M()}finally{re.transition=B}},rt.unstable_act=W,rt.useCallback=function(M,B){return Z.current.useCallback(M,B)},rt.useContext=function(M){return Z.current.useContext(M)},rt.useDebugValue=function(){},rt.useDeferredValue=function(M){return Z.current.useDeferredValue(M)},rt.useEffect=function(M,B){return Z.current.useEffect(M,B)},rt.useId=function(){return Z.current.useId()},rt.useImperativeHandle=function(M,B,z){return Z.current.useImperativeHandle(M,B,z)},rt.useInsertionEffect=function(M,B){return Z.current.useInsertionEffect(M,B)},rt.useLayoutEffect=function(M,B){return Z.current.useLayoutEffect(M,B)},rt.useMemo=function(M,B){return Z.current.useMemo(M,B)},rt.useReducer=function(M,B,z){return Z.current.useReducer(M,B,z)},rt.useRef=function(M){return Z.current.useRef(M)},rt.useState=function(M){return Z.current.useState(M)},rt.useSyncExternalStore=function(M,B,z){return Z.current.useSyncExternalStore(M,B,z)},rt.useTransition=function(){return Z.current.useTransition()},rt.version="18.3.1",rt}var C_;function ah(){return C_||(C_=1,wd.exports=ob()),wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function ab(){if(I_)return al;I_=1;var r=ah(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var v,g={},p=null,y=null;d!==void 0&&(p=""+d),h.key!==void 0&&(p=""+h.key),h.ref!==void 0&&(y=h.ref);for(v in h)n.call(h,v)&&!a.hasOwnProperty(v)&&(g[v]=h[v]);if(c&&c.defaultProps)for(v in h=c.defaultProps,h)g[v]===void 0&&(g[v]=h[v]);return{$$typeof:e,type:c,key:p,ref:y,props:g,_owner:i.current}}return al.Fragment=t,al.jsx=l,al.jsxs=l,al}var b_;function lb(){return b_||(b_=1,_d.exports=ab()),_d.exports}var R=lb(),ye=ah();const lh=p1(ye);var pc={},Ed={exports:{}},Rn={},Td={exports:{}},Sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function ub(){return A_||(A_=1,function(r){function e(re,G){var W=re.length;re.push(G);e:for(;0<W;){var M=W-1>>>1,B=re[M];if(0<i(B,G))re[M]=G,re[W]=B,W=M;else break e}}function t(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var G=re[0],W=re.pop();if(W!==G){re[0]=W;e:for(var M=0,B=re.length,z=B>>>1;M<z;){var ee=2*(M+1)-1,X=re[ee],H=ee+1,Y=re[H];if(0>i(X,W))H<B&&0>i(Y,X)?(re[M]=Y,re[H]=W,M=H):(re[M]=X,re[ee]=W,M=ee);else if(H<B&&0>i(Y,W))re[M]=Y,re[H]=W,M=H;else break e}}return G}function i(re,G){var W=re.sortIndex-G.sortIndex;return W!==0?W:re.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var h=[],d=[],v=1,g=null,p=3,y=!1,w=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(re){for(var G=t(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=re)n(d),G.sortIndex=G.expirationTime,e(h,G);else break;G=t(d)}}function I(re){if(S=!1,N(re),!w)if(t(h)!==null)w=!0,se(F);else{var G=t(d);G!==null&&Z(I,G.startTime-re)}}function F(re,G){w=!1,S&&(S=!1,E(_),_=-1),y=!0;var W=p;try{for(N(G),g=t(h);g!==null&&(!(g.expirationTime>G)||re&&!x());){var M=g.callback;if(typeof M=="function"){g.callback=null,p=g.priorityLevel;var B=M(g.expirationTime<=G);G=r.unstable_now(),typeof B=="function"?g.callback=B:g===t(h)&&n(h),N(G)}else n(h);g=t(h)}if(g!==null)var z=!0;else{var ee=t(d);ee!==null&&Z(I,ee.startTime-G),z=!1}return z}finally{g=null,p=W,y=!1}}var U=!1,P=null,_=-1,A=5,k=-1;function x(){return!(r.unstable_now()-k<A)}function O(){if(P!==null){var re=r.unstable_now();k=re;var G=!0;try{G=P(!0,re)}finally{G?D():(U=!1,P=null)}}else U=!1}var D;if(typeof b=="function")D=function(){b(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,J=$.port2;$.port1.onmessage=O,D=function(){J.postMessage(null)}}else D=function(){T(O,0)};function se(re){P=re,U||(U=!0,D())}function Z(re,G){_=T(function(){re(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){w||y||(w=!0,se(F))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(re){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var W=p;p=G;try{return re()}finally{p=W}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,G){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var W=p;p=re;try{return G()}finally{p=W}},r.unstable_scheduleCallback=function(re,G,W){var M=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?M+W:M):W=M,re){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,re={id:v++,callback:G,priorityLevel:re,startTime:W,expirationTime:B,sortIndex:-1},W>M?(re.sortIndex=W,e(d,re),t(h)===null&&re===t(d)&&(S?(E(_),_=-1):S=!0,Z(I,W-M))):(re.sortIndex=B,e(h,re),w||y||(w=!0,se(F))),re},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(re){var G=p;return function(){var W=p;p=G;try{return re.apply(this,arguments)}finally{p=W}}}}(Sd)),Sd}var k_;function cb(){return k_||(k_=1,Td.exports=ub()),Td.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function hb(){if(x_)return Rn;x_=1;var r=ah(),e=cb();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function p(s){return h.call(g,s)?!0:h.call(v,s)?!1:d.test(s)?g[s]=!0:(v[s]=!0,!1)}function y(s,o,u,m){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,o,u,m){if(o===null||typeof o>"u"||y(s,o,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(s,o,u,m,C,j,q){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=C,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=j,this.removeEmptyString=q}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];T[o]=new S(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function b(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(E,b);T[o]=new S(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(E,b);T[o]=new S(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(E,b);T[o]=new S(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function N(s,o,u,m){var C=T.hasOwnProperty(o)?T[o]:null;(C!==null?C.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(w(o,u,C,m)&&(u=null),m||C===null?p(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):C.mustUseProperty?s[C.propertyName]=u===null?C.type===3?!1:"":u:(o=C.attributeName,m=C.attributeNamespace,u===null?s.removeAttribute(o):(C=C.type,u=C===3||C===4&&u===!0?"":""+u,m?s.setAttributeNS(m,o,u):s.setAttribute(o,u))))}var I=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),U=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),re=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var W=Object.assign,M;function B(s){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+s}var z=!1;function ee(s,o){if(!s||z)return"";z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var m=pe}Reflect.construct(s,[],o)}else{try{o.call()}catch(pe){m=pe}s.call(o.prototype)}else{try{throw Error()}catch(pe){m=pe}s()}}catch(pe){if(pe&&m&&typeof pe.stack=="string"){for(var C=pe.stack.split(`
`),j=m.stack.split(`
`),q=C.length-1,Q=j.length-1;1<=q&&0<=Q&&C[q]!==j[Q];)Q--;for(;1<=q&&0<=Q;q--,Q--)if(C[q]!==j[Q]){if(q!==1||Q!==1)do if(q--,Q--,0>Q||C[q]!==j[Q]){var te=`
`+C[q].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=q&&0<=Q);break}}}finally{z=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?B(s):""}function X(s){switch(s.tag){case 5:return B(s.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return s=ee(s.type,!1),s;case 11:return s=ee(s.type.render,!1),s;case 1:return s=ee(s.type,!0),s;default:return""}}function H(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case U:return"Portal";case A:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case $:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case x:return(s.displayName||"Context")+".Consumer";case k:return(s._context.displayName||"Context")+".Provider";case O:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case J:return o=s.displayName||null,o!==null?o:H(s.type)||"Memo";case se:o=s._payload,s=s._init;try{return H(s(o))}catch{}}return null}function Y(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(o);case 8:return o===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ne(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ie(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function fe(s){var o=ie(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var C=u.get,j=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return C.call(this)},set:function(q){m=""+q,j.call(this,q)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(q){m=""+q},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ve(s){s._valueTracker||(s._valueTracker=fe(s))}function ke(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=ie(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function xe(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Pe(s,o){var u=o.checked;return W({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function De(s,o){var u=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;u=ne(o.value!=null?o.value:u),s._wrapperState={initialChecked:m,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ue(s,o){o=o.checked,o!=null&&N(s,"checked",o,!1)}function tt(s,o){Ue(s,o);var u=ne(o.value),m=o.type;if(u!=null)m==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?de(s,o.type,u):o.hasOwnProperty("defaultValue")&&de(s,o.type,ne(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function ce(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function de(s,o,u){(o!=="number"||xe(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ee=Array.isArray;function be(s,o,u,m){if(s=s.options,o){o={};for(var C=0;C<u.length;C++)o["$"+u[C]]=!0;for(u=0;u<s.length;u++)C=o.hasOwnProperty("$"+s[u].value),s[u].selected!==C&&(s[u].selected=C),C&&m&&(s[u].defaultSelected=!0)}else{for(u=""+ne(u),o=null,C=0;C<s.length;C++){if(s[C].value===u){s[C].selected=!0,m&&(s[C].defaultSelected=!0);return}o!==null||s[C].disabled||(o=s[C])}o!==null&&(o.selected=!0)}}function ge(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $e(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Ee(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:ne(u)}}function Me(s,o){var u=ne(o.value),m=ne(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),m!=null&&(s.defaultValue=""+m)}function Be(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function We(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ze(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?We(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var et,nr=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,m,C){MSApp.execUnsafeLocalFunction(function(){return s(o,u,m,C)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(et=et||document.createElement("div"),et.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=et.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ct(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$t=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(s){$t.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ct[o]=Ct[s]})});function rr(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ct.hasOwnProperty(s)&&Ct[s]?(""+o).trim():o+"px"}function Ti(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var m=u.indexOf("--")===0,C=rr(u,o[u],m);u==="float"&&(u="cssFloat"),m?s.setProperty(u,C):s[u]=C}}var wa=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ea(s,o){if(o){if(wa[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ta(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=null;function io(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var so=null,Hn=null,Cr=null;function oo(s){if(s=Wa(s)){if(typeof so!="function")throw Error(t(280));var o=s.stateNode;o&&(o=ku(o),so(s.stateNode,s.type,o))}}function Ir(s){Hn?Cr?Cr.push(s):Cr=[s]:Hn=s}function Sa(){if(Hn){var s=Hn,o=Cr;if(Cr=Hn=null,oo(s),o)for(s=0;s<o.length;s++)oo(o[s])}}function _s(s,o){return s(o)}function Ca(){}var Kr=!1;function Ia(s,o,u){if(Kr)return s(o,u);Kr=!0;try{return _s(s,o,u)}finally{Kr=!1,(Hn!==null||Cr!==null)&&(Ca(),Sa())}}function Ot(s,o){var u=s.stateNode;if(u===null)return null;var m=ku(u);if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var ao=!1;if(c)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){ao=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{ao=!1}function ws(s,o,u,m,C,j,q,Q,te){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(u,pe)}catch(Se){this.onError(Se)}}var Es=!1,lo=null,sr=!1,ba=null,Wh={onError:function(s){Es=!0,lo=s}};function uo(s,o,u,m,C,j,q,Q,te){Es=!1,lo=null,ws.apply(Wh,arguments)}function Zl(s,o,u,m,C,j,q,Q,te){if(uo.apply(this,arguments),Es){if(Es){var pe=lo;Es=!1,lo=null}else throw Error(t(198));sr||(sr=!0,ba=pe)}}function or(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Ts(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function ar(s){if(or(s)!==s)throw Error(t(188))}function eu(s){var o=s.alternate;if(!o){if(o=or(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,m=o;;){var C=u.return;if(C===null)break;var j=C.alternate;if(j===null){if(m=C.return,m!==null){u=m;continue}break}if(C.child===j.child){for(j=C.child;j;){if(j===u)return ar(C),s;if(j===m)return ar(C),o;j=j.sibling}throw Error(t(188))}if(u.return!==m.return)u=C,m=j;else{for(var q=!1,Q=C.child;Q;){if(Q===u){q=!0,u=C,m=j;break}if(Q===m){q=!0,m=C,u=j;break}Q=Q.sibling}if(!q){for(Q=j.child;Q;){if(Q===u){q=!0,u=j,m=C;break}if(Q===m){q=!0,m=j,u=C;break}Q=Q.sibling}if(!q)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Aa(s){return s=eu(s),s!==null?co(s):null}function co(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=co(s);if(o!==null)return o;s=s.sibling}return null}var ho=e.unstable_scheduleCallback,ka=e.unstable_cancelCallback,tu=e.unstable_shouldYield,Kh=e.unstable_requestPaint,gt=e.unstable_now,nu=e.unstable_getCurrentPriorityLevel,Ss=e.unstable_ImmediatePriority,Si=e.unstable_UserBlockingPriority,$n=e.unstable_NormalPriority,xa=e.unstable_LowPriority,ru=e.unstable_IdlePriority,Cs=null,Nn=null;function iu(s){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Cs,s,void 0,(s.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:ou,Ra=Math.log,su=Math.LN2;function ou(s){return s>>>=0,s===0?32:31-(Ra(s)/su|0)|0}var fo=64,po=4194304;function Ci(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Is(s,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,C=s.suspendedLanes,j=s.pingedLanes,q=u&268435455;if(q!==0){var Q=q&~C;Q!==0?m=Ci(Q):(j&=q,j!==0&&(m=Ci(j)))}else q=u&~C,q!==0?m=Ci(q):j!==0&&(m=Ci(j));if(m===0)return 0;if(o!==0&&o!==m&&(o&C)===0&&(C=m&-m,j=o&-o,C>=j||C===16&&(j&4194240)!==0))return o;if((m&4)!==0&&(m|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=m;0<o;)u=31-mn(o),C=1<<u,m|=s[u],o&=~C;return m}function Gh(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,C=s.expirationTimes,j=s.pendingLanes;0<j;){var q=31-mn(j),Q=1<<q,te=C[q];te===-1?((Q&u)===0||(Q&m)!==0)&&(C[q]=Gh(Q,o)):te<=o&&(s.expiredLanes|=Q),j&=~Q}}function Ln(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function bs(){var s=fo;return fo<<=1,(fo&4194240)===0&&(fo=64),s}function Ii(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function bi(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-mn(o),s[o]=u}function mt(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<u;){var C=31-mn(u),j=1<<C;o[C]=0,m[C]=-1,s[C]=-1,u&=~j}}function Ai(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-mn(u),C=1<<m;C&o|s[m]&o&&(s[m]|=o),u&=~C}}var ot=0;function ki(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var au,mo,lu,uu,cu,Pa=!1,br=[],Xt=null,lr=null,ur=null,xi=new Map,Wn=new Map,Ar=[],Jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hu(s,o){switch(s){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":xi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(o.pointerId)}}function Sn(s,o,u,m,C,j){return s===null||s.nativeEvent!==j?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:j,targetContainers:[C]},o!==null&&(o=Wa(o),o!==null&&mo(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,C!==null&&o.indexOf(C)===-1&&o.push(C),s)}function Qh(s,o,u,m,C){switch(o){case"focusin":return Xt=Sn(Xt,s,o,u,m,C),!0;case"dragenter":return lr=Sn(lr,s,o,u,m,C),!0;case"mouseover":return ur=Sn(ur,s,o,u,m,C),!0;case"pointerover":var j=C.pointerId;return xi.set(j,Sn(xi.get(j)||null,s,o,u,m,C)),!0;case"gotpointercapture":return j=C.pointerId,Wn.set(j,Sn(Wn.get(j)||null,s,o,u,m,C)),!0}return!1}function fu(s){var o=Ps(s.target);if(o!==null){var u=or(o);if(u!==null){if(o=u.tag,o===13){if(o=Ts(u),o!==null){s.blockedOn=o,cu(s.priority,function(){lu(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jr(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=go(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);vs=m,u.target.dispatchEvent(m),vs=null}else return o=Wa(u),o!==null&&mo(o),s.blockedOn=u,!1;o.shift()}return!0}function As(s,o,u){Jr(s)&&u.delete(o)}function du(){Pa=!1,Xt!==null&&Jr(Xt)&&(Xt=null),lr!==null&&Jr(lr)&&(lr=null),ur!==null&&Jr(ur)&&(ur=null),xi.forEach(As),Wn.forEach(As)}function cr(s,o){s.blockedOn===o&&(s.blockedOn=null,Pa||(Pa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,du)))}function hr(s){function o(C){return cr(C,s)}if(0<br.length){cr(br[0],s);for(var u=1;u<br.length;u++){var m=br[u];m.blockedOn===s&&(m.blockedOn=null)}}for(Xt!==null&&cr(Xt,s),lr!==null&&cr(lr,s),ur!==null&&cr(ur,s),xi.forEach(o),Wn.forEach(o),u=0;u<Ar.length;u++)m=Ar[u],m.blockedOn===s&&(m.blockedOn=null);for(;0<Ar.length&&(u=Ar[0],u.blockedOn===null);)fu(u),u.blockedOn===null&&Ar.shift()}var Qr=I.ReactCurrentBatchConfig,Ri=!0;function Tt(s,o,u,m){var C=ot,j=Qr.transition;Qr.transition=null;try{ot=1,Oa(s,o,u,m)}finally{ot=C,Qr.transition=j}}function Yh(s,o,u,m){var C=ot,j=Qr.transition;Qr.transition=null;try{ot=4,Oa(s,o,u,m)}finally{ot=C,Qr.transition=j}}function Oa(s,o,u,m){if(Ri){var C=go(s,o,u,m);if(C===null)uf(s,o,m,ks,u),hu(s,m);else if(Qh(C,s,o,u,m))m.stopPropagation();else if(hu(s,m),o&4&&-1<Jh.indexOf(s)){for(;C!==null;){var j=Wa(C);if(j!==null&&au(j),j=go(s,o,u,m),j===null&&uf(s,o,m,ks,u),j===C)break;C=j}C!==null&&m.stopPropagation()}else uf(s,o,m,null,u)}}var ks=null;function go(s,o,u,m){if(ks=null,s=io(m),s=Ps(s),s!==null)if(o=or(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Ts(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return ks=s,null}function Na(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nu()){case Ss:return 1;case Si:return 4;case $n:case xa:return 16;case ru:return 536870912;default:return 16}default:return 16}}var Dn=null,yo=null,Cn=null;function La(){if(Cn)return Cn;var s,o=yo,u=o.length,m,C="value"in Dn?Dn.value:Dn.textContent,j=C.length;for(s=0;s<u&&o[s]===C[s];s++);var q=u-s;for(m=1;m<=q&&o[u-m]===C[j-m];m++);return Cn=C.slice(s,1<m?1-m:void 0)}function vo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function kr(){return!0}function Da(){return!1}function Zt(s){function o(u,m,C,j,q){this._reactName=u,this._targetInst=C,this.type=m,this.nativeEvent=j,this.target=q,this.currentTarget=null;for(var Q in s)s.hasOwnProperty(Q)&&(u=s[Q],this[Q]=u?u(j):j[Q]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?kr:Da,this.isPropagationStopped=Da,this}return W(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),o}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Zt(fr),xr=W({},fr,{view:0,detail:0}),Xh=Zt(xr),wo,Yr,Pi,xs=W({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pi&&(Pi&&s.type==="mousemove"?(wo=s.screenX-Pi.screenX,Yr=s.screenY-Pi.screenY):Yr=wo=0,Pi=s),wo)},movementY:function(s){return"movementY"in s?s.movementY:Yr}}),Eo=Zt(xs),ja=W({},xs,{dataTransfer:0}),pu=Zt(ja),To=W({},xr,{relatedTarget:0}),So=Zt(To),mu=W({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xr=Zt(mu),gu=W({},fr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),yu=Zt(gu),vu=W({},fr,{data:0}),Ma=Zt(vu),Co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=_u[s])?!!o[s]:!1}function Rr(){return wu}var f=W({},xr,{key:function(s){if(s.key){var o=Co[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=vo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?gn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(s){return s.type==="keypress"?vo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?vo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),L=Zt(f),V=W({},xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=Zt(V),le=W({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),me=Zt(le),Ae=W({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=Zt(Ae),Ut=W({},xs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),at=Zt(Ut),Wt=[9,13,27,32],jt=c&&"CompositionEvent"in window,Kn=null;c&&"documentMode"in document&&(Kn=document.documentMode);var jn=c&&"TextEvent"in window&&!Kn,Rs=c&&(!jt||Kn&&8<Kn&&11>=Kn),Io=" ",yy=!1;function vy(s,o){switch(s){case"keyup":return Wt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _y(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var bo=!1;function tI(s,o){switch(s){case"compositionend":return _y(o);case"keypress":return o.which!==32?null:(yy=!0,Io);case"textInput":return s=o.data,s===Io&&yy?null:s;default:return null}}function nI(s,o){if(bo)return s==="compositionend"||!jt&&vy(s,o)?(s=La(),Cn=yo=Dn=null,bo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Rs&&o.locale!=="ko"?null:o.data;default:return null}}var rI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!rI[s.type]:o==="textarea"}function Ey(s,o,u,m){Ir(m),o=Iu(o,"onChange"),0<o.length&&(u=new _o("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var Fa=null,Va=null;function iI(s){Vy(s,0)}function Eu(s){var o=Po(s);if(ke(o))return s}function sI(s,o){if(s==="change")return o}var Ty=!1;if(c){var Zh;if(c){var ef="oninput"in document;if(!ef){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),ef=typeof Sy.oninput=="function"}Zh=ef}else Zh=!1;Ty=Zh&&(!document.documentMode||9<document.documentMode)}function Cy(){Fa&&(Fa.detachEvent("onpropertychange",Iy),Va=Fa=null)}function Iy(s){if(s.propertyName==="value"&&Eu(Va)){var o=[];Ey(o,Va,s,io(s)),Ia(iI,o)}}function oI(s,o,u){s==="focusin"?(Cy(),Fa=o,Va=u,Fa.attachEvent("onpropertychange",Iy)):s==="focusout"&&Cy()}function aI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Eu(Va)}function lI(s,o){if(s==="click")return Eu(o)}function uI(s,o){if(s==="input"||s==="change")return Eu(o)}function cI(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var dr=typeof Object.is=="function"?Object.is:cI;function Ua(s,o){if(dr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var C=u[m];if(!h.call(o,C)||!dr(s[C],o[C]))return!1}return!0}function by(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ay(s,o){var u=by(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=by(u)}}function ky(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?ky(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function xy(){for(var s=window,o=xe();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=xe(s.document)}return o}function tf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function hI(s){var o=xy(),u=s.focusedElem,m=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&ky(u.ownerDocument.documentElement,u)){if(m!==null&&tf(u)){if(o=m.start,s=m.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var C=u.textContent.length,j=Math.min(m.start,C);m=m.end===void 0?j:Math.min(m.end,C),!s.extend&&j>m&&(C=m,m=j,j=C),C=Ay(u,j);var q=Ay(u,m);C&&q&&(s.rangeCount!==1||s.anchorNode!==C.node||s.anchorOffset!==C.offset||s.focusNode!==q.node||s.focusOffset!==q.offset)&&(o=o.createRange(),o.setStart(C.node,C.offset),s.removeAllRanges(),j>m?(s.addRange(o),s.extend(q.node,q.offset)):(o.setEnd(q.node,q.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var fI=c&&"documentMode"in document&&11>=document.documentMode,Ao=null,nf=null,Ba=null,rf=!1;function Ry(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;rf||Ao==null||Ao!==xe(m)||(m=Ao,"selectionStart"in m&&tf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ba&&Ua(Ba,m)||(Ba=m,m=Iu(nf,"onSelect"),0<m.length&&(o=new _o("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=Ao)))}function Tu(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var ko={animationend:Tu("Animation","AnimationEnd"),animationiteration:Tu("Animation","AnimationIteration"),animationstart:Tu("Animation","AnimationStart"),transitionend:Tu("Transition","TransitionEnd")},sf={},Py={};c&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Su(s){if(sf[s])return sf[s];if(!ko[s])return s;var o=ko[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Py)return sf[s]=o[u];return s}var Oy=Su("animationend"),Ny=Su("animationiteration"),Ly=Su("animationstart"),Dy=Su("transitionend"),jy=new Map,My="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(s,o){jy.set(s,o),a(o,[s])}for(var of=0;of<My.length;of++){var af=My[of],dI=af.toLowerCase(),pI=af[0].toUpperCase()+af.slice(1);Oi(dI,"on"+pI)}Oi(Oy,"onAnimationEnd"),Oi(Ny,"onAnimationIteration"),Oi(Ly,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Dy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Fy(s,o,u){var m=s.type||"unknown-event";s.currentTarget=u,Zl(m,o,void 0,s),s.currentTarget=null}function Vy(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],C=m.event;m=m.listeners;e:{var j=void 0;if(o)for(var q=m.length-1;0<=q;q--){var Q=m[q],te=Q.instance,pe=Q.currentTarget;if(Q=Q.listener,te!==j&&C.isPropagationStopped())break e;Fy(C,Q,pe),j=te}else for(q=0;q<m.length;q++){if(Q=m[q],te=Q.instance,pe=Q.currentTarget,Q=Q.listener,te!==j&&C.isPropagationStopped())break e;Fy(C,Q,pe),j=te}}}if(sr)throw s=ba,sr=!1,ba=null,s}function _t(s,o){var u=o[mf];u===void 0&&(u=o[mf]=new Set);var m=s+"__bubble";u.has(m)||(Uy(o,s,2,!1),u.add(m))}function lf(s,o,u){var m=0;o&&(m|=4),Uy(u,s,m,o)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function za(s){if(!s[Cu]){s[Cu]=!0,n.forEach(function(u){u!=="selectionchange"&&(mI.has(u)||lf(u,!1,s),lf(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Cu]||(o[Cu]=!0,lf("selectionchange",!1,o))}}function Uy(s,o,u,m){switch(Na(o)){case 1:var C=Tt;break;case 4:C=Yh;break;default:C=Oa}u=C.bind(null,o,u,s),C=void 0,!ao||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(C=!0),m?C!==void 0?s.addEventListener(o,u,{capture:!0,passive:C}):s.addEventListener(o,u,!0):C!==void 0?s.addEventListener(o,u,{passive:C}):s.addEventListener(o,u,!1)}function uf(s,o,u,m,C){var j=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var q=m.tag;if(q===3||q===4){var Q=m.stateNode.containerInfo;if(Q===C||Q.nodeType===8&&Q.parentNode===C)break;if(q===4)for(q=m.return;q!==null;){var te=q.tag;if((te===3||te===4)&&(te=q.stateNode.containerInfo,te===C||te.nodeType===8&&te.parentNode===C))return;q=q.return}for(;Q!==null;){if(q=Ps(Q),q===null)return;if(te=q.tag,te===5||te===6){m=j=q;continue e}Q=Q.parentNode}}m=m.return}Ia(function(){var pe=j,Se=io(u),Ce=[];e:{var Te=jy.get(s);if(Te!==void 0){var Re=_o,je=s;switch(s){case"keypress":if(vo(u)===0)break e;case"keydown":case"keyup":Re=L;break;case"focusin":je="focus",Re=So;break;case"focusout":je="blur",Re=So;break;case"beforeblur":case"afterblur":Re=So;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=Eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=me;break;case Oy:case Ny:case Ly:Re=Xr;break;case Dy:Re=dt;break;case"scroll":Re=Xh;break;case"wheel":Re=at;break;case"copy":case"cut":case"paste":Re=yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=K}var Fe=(o&4)!==0,Nt=!Fe&&s==="scroll",ue=Fe?Te!==null?Te+"Capture":null:Te;Fe=[];for(var oe=pe,he;oe!==null;){he=oe;var Ie=he.stateNode;if(he.tag===5&&Ie!==null&&(he=Ie,ue!==null&&(Ie=Ot(oe,ue),Ie!=null&&Fe.push(Ha(oe,Ie,he)))),Nt)break;oe=oe.return}0<Fe.length&&(Te=new Re(Te,je,null,u,Se),Ce.push({event:Te,listeners:Fe}))}}if((o&7)===0){e:{if(Te=s==="mouseover"||s==="pointerover",Re=s==="mouseout"||s==="pointerout",Te&&u!==vs&&(je=u.relatedTarget||u.fromElement)&&(Ps(je)||je[Zr]))break e;if((Re||Te)&&(Te=Se.window===Se?Se:(Te=Se.ownerDocument)?Te.defaultView||Te.parentWindow:window,Re?(je=u.relatedTarget||u.toElement,Re=pe,je=je?Ps(je):null,je!==null&&(Nt=or(je),je!==Nt||je.tag!==5&&je.tag!==6)&&(je=null)):(Re=null,je=pe),Re!==je)){if(Fe=Eo,Ie="onMouseLeave",ue="onMouseEnter",oe="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=K,Ie="onPointerLeave",ue="onPointerEnter",oe="pointer"),Nt=Re==null?Te:Po(Re),he=je==null?Te:Po(je),Te=new Fe(Ie,oe+"leave",Re,u,Se),Te.target=Nt,Te.relatedTarget=he,Ie=null,Ps(Se)===pe&&(Fe=new Fe(ue,oe+"enter",je,u,Se),Fe.target=he,Fe.relatedTarget=Nt,Ie=Fe),Nt=Ie,Re&&je)t:{for(Fe=Re,ue=je,oe=0,he=Fe;he;he=xo(he))oe++;for(he=0,Ie=ue;Ie;Ie=xo(Ie))he++;for(;0<oe-he;)Fe=xo(Fe),oe--;for(;0<he-oe;)ue=xo(ue),he--;for(;oe--;){if(Fe===ue||ue!==null&&Fe===ue.alternate)break t;Fe=xo(Fe),ue=xo(ue)}Fe=null}else Fe=null;Re!==null&&By(Ce,Te,Re,Fe,!1),je!==null&&Nt!==null&&By(Ce,Nt,je,Fe,!0)}}e:{if(Te=pe?Po(pe):window,Re=Te.nodeName&&Te.nodeName.toLowerCase(),Re==="select"||Re==="input"&&Te.type==="file")var Ve=sI;else if(wy(Te))if(Ty)Ve=uI;else{Ve=aI;var ze=oI}else(Re=Te.nodeName)&&Re.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(Ve=lI);if(Ve&&(Ve=Ve(s,pe))){Ey(Ce,Ve,u,Se);break e}ze&&ze(s,Te,pe),s==="focusout"&&(ze=Te._wrapperState)&&ze.controlled&&Te.type==="number"&&de(Te,"number",Te.value)}switch(ze=pe?Po(pe):window,s){case"focusin":(wy(ze)||ze.contentEditable==="true")&&(Ao=ze,nf=pe,Ba=null);break;case"focusout":Ba=nf=Ao=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Ry(Ce,u,Se);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":Ry(Ce,u,Se)}var He;if(jt)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else bo?vy(s,u)&&(Je="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(Rs&&u.locale!=="ko"&&(bo||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&bo&&(He=La()):(Dn=Se,yo="value"in Dn?Dn.value:Dn.textContent,bo=!0)),ze=Iu(pe,Je),0<ze.length&&(Je=new Ma(Je,s,null,u,Se),Ce.push({event:Je,listeners:ze}),He?Je.data=He:(He=_y(u),He!==null&&(Je.data=He)))),(He=jn?tI(s,u):nI(s,u))&&(pe=Iu(pe,"onBeforeInput"),0<pe.length&&(Se=new Ma("onBeforeInput","beforeinput",null,u,Se),Ce.push({event:Se,listeners:pe}),Se.data=He))}Vy(Ce,o)})}function Ha(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Iu(s,o){for(var u=o+"Capture",m=[];s!==null;){var C=s,j=C.stateNode;C.tag===5&&j!==null&&(C=j,j=Ot(s,u),j!=null&&m.unshift(Ha(s,j,C)),j=Ot(s,o),j!=null&&m.push(Ha(s,j,C))),s=s.return}return m}function xo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function By(s,o,u,m,C){for(var j=o._reactName,q=[];u!==null&&u!==m;){var Q=u,te=Q.alternate,pe=Q.stateNode;if(te!==null&&te===m)break;Q.tag===5&&pe!==null&&(Q=pe,C?(te=Ot(u,j),te!=null&&q.unshift(Ha(u,te,Q))):C||(te=Ot(u,j),te!=null&&q.push(Ha(u,te,Q)))),u=u.return}q.length!==0&&s.push({event:o,listeners:q})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function qy(s){return(typeof s=="string"?s:""+s).replace(gI,`
`).replace(yI,"")}function bu(s,o,u){if(o=qy(o),qy(s)!==o&&u)throw Error(t(425))}function Au(){}var cf=null,hf=null;function ff(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var df=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,_I=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(s){return zy.resolve(null).then(s).catch(wI)}:df;function wI(s){setTimeout(function(){throw s})}function pf(s,o){var u=o,m=0;do{var C=u.nextSibling;if(s.removeChild(u),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(m===0){s.removeChild(C),hr(o);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=C}while(u);hr(o)}function Ni(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Hy(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),Pr="__reactFiber$"+Ro,$a="__reactProps$"+Ro,Zr="__reactContainer$"+Ro,mf="__reactEvents$"+Ro,EI="__reactListeners$"+Ro,TI="__reactHandles$"+Ro;function Ps(s){var o=s[Pr];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Zr]||u[Pr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Hy(s);s!==null;){if(u=s[Pr])return u;s=Hy(s)}return o}s=u,u=s.parentNode}return null}function Wa(s){return s=s[Pr]||s[Zr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Po(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function ku(s){return s[$a]||null}var gf=[],Oo=-1;function Li(s){return{current:s}}function wt(s){0>Oo||(s.current=gf[Oo],gf[Oo]=null,Oo--)}function yt(s,o){Oo++,gf[Oo]=s.current,s.current=o}var Di={},an=Li(Di),In=Li(!1),Os=Di;function No(s,o){var u=s.type.contextTypes;if(!u)return Di;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var C={},j;for(j in u)C[j]=o[j];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=C),C}function bn(s){return s=s.childContextTypes,s!=null}function xu(){wt(In),wt(an)}function $y(s,o,u){if(an.current!==Di)throw Error(t(168));yt(an,o),yt(In,u)}function Wy(s,o,u){var m=s.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var C in m)if(!(C in o))throw Error(t(108,Y(s)||"Unknown",C));return W({},u,m)}function Ru(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Di,Os=an.current,yt(an,s),yt(In,In.current),!0}function Ky(s,o,u){var m=s.stateNode;if(!m)throw Error(t(169));u?(s=Wy(s,o,Os),m.__reactInternalMemoizedMergedChildContext=s,wt(In),wt(an),yt(an,s)):wt(In),yt(In,u)}var ei=null,Pu=!1,yf=!1;function Gy(s){ei===null?ei=[s]:ei.push(s)}function SI(s){Pu=!0,Gy(s)}function ji(){if(!yf&&ei!==null){yf=!0;var s=0,o=ot;try{var u=ei;for(ot=1;s<u.length;s++){var m=u[s];do m=m(!0);while(m!==null)}ei=null,Pu=!1}catch(C){throw ei!==null&&(ei=ei.slice(s+1)),ho(Ss,ji),C}finally{ot=o,yf=!1}}return null}var Lo=[],Do=0,Ou=null,Nu=0,Gn=[],Jn=0,Ns=null,ti=1,ni="";function Ls(s,o){Lo[Do++]=Nu,Lo[Do++]=Ou,Ou=s,Nu=o}function Jy(s,o,u){Gn[Jn++]=ti,Gn[Jn++]=ni,Gn[Jn++]=Ns,Ns=s;var m=ti;s=ni;var C=32-mn(m)-1;m&=~(1<<C),u+=1;var j=32-mn(o)+C;if(30<j){var q=C-C%5;j=(m&(1<<q)-1).toString(32),m>>=q,C-=q,ti=1<<32-mn(o)+C|u<<C|m,ni=j+s}else ti=1<<j|u<<C|m,ni=s}function vf(s){s.return!==null&&(Ls(s,1),Jy(s,1,0))}function _f(s){for(;s===Ou;)Ou=Lo[--Do],Lo[Do]=null,Nu=Lo[--Do],Lo[Do]=null;for(;s===Ns;)Ns=Gn[--Jn],Gn[Jn]=null,ni=Gn[--Jn],Gn[Jn]=null,ti=Gn[--Jn],Gn[Jn]=null}var Mn=null,Fn=null,St=!1,pr=null;function Qy(s,o){var u=Zn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function Yy(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Mn=s,Fn=Ni(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Mn=s,Fn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Ns!==null?{id:ti,overflow:ni}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Zn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,Mn=s,Fn=null,!0):!1;default:return!1}}function wf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ef(s){if(St){var o=Fn;if(o){var u=o;if(!Yy(s,o)){if(wf(s))throw Error(t(418));o=Ni(u.nextSibling);var m=Mn;o&&Yy(s,o)?Qy(m,u):(s.flags=s.flags&-4097|2,St=!1,Mn=s)}}else{if(wf(s))throw Error(t(418));s.flags=s.flags&-4097|2,St=!1,Mn=s}}}function Xy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Mn=s}function Lu(s){if(s!==Mn)return!1;if(!St)return Xy(s),St=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!ff(s.type,s.memoizedProps)),o&&(o=Fn)){if(wf(s))throw Zy(),Error(t(418));for(;o;)Qy(s,o),o=Ni(o.nextSibling)}if(Xy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Fn=Ni(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Fn=null}}else Fn=Mn?Ni(s.stateNode.nextSibling):null;return!0}function Zy(){for(var s=Fn;s;)s=Ni(s.nextSibling)}function jo(){Fn=Mn=null,St=!1}function Tf(s){pr===null?pr=[s]:pr.push(s)}var CI=I.ReactCurrentBatchConfig;function Ka(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,s));var C=m,j=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===j?o.ref:(o=function(q){var Q=C.refs;q===null?delete Q[j]:Q[j]=q},o._stringRef=j,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Du(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function ev(s){var o=s._init;return o(s._payload)}function tv(s){function o(ue,oe){if(s){var he=ue.deletions;he===null?(ue.deletions=[oe],ue.flags|=16):he.push(oe)}}function u(ue,oe){if(!s)return null;for(;oe!==null;)o(ue,oe),oe=oe.sibling;return null}function m(ue,oe){for(ue=new Map;oe!==null;)oe.key!==null?ue.set(oe.key,oe):ue.set(oe.index,oe),oe=oe.sibling;return ue}function C(ue,oe){return ue=Hi(ue,oe),ue.index=0,ue.sibling=null,ue}function j(ue,oe,he){return ue.index=he,s?(he=ue.alternate,he!==null?(he=he.index,he<oe?(ue.flags|=2,oe):he):(ue.flags|=2,oe)):(ue.flags|=1048576,oe)}function q(ue){return s&&ue.alternate===null&&(ue.flags|=2),ue}function Q(ue,oe,he,Ie){return oe===null||oe.tag!==6?(oe=dd(he,ue.mode,Ie),oe.return=ue,oe):(oe=C(oe,he),oe.return=ue,oe)}function te(ue,oe,he,Ie){var Ve=he.type;return Ve===P?Se(ue,oe,he.props.children,Ie,he.key):oe!==null&&(oe.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===se&&ev(Ve)===oe.type)?(Ie=C(oe,he.props),Ie.ref=Ka(ue,oe,he),Ie.return=ue,Ie):(Ie=sc(he.type,he.key,he.props,null,ue.mode,Ie),Ie.ref=Ka(ue,oe,he),Ie.return=ue,Ie)}function pe(ue,oe,he,Ie){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==he.containerInfo||oe.stateNode.implementation!==he.implementation?(oe=pd(he,ue.mode,Ie),oe.return=ue,oe):(oe=C(oe,he.children||[]),oe.return=ue,oe)}function Se(ue,oe,he,Ie,Ve){return oe===null||oe.tag!==7?(oe=qs(he,ue.mode,Ie,Ve),oe.return=ue,oe):(oe=C(oe,he),oe.return=ue,oe)}function Ce(ue,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=dd(""+oe,ue.mode,he),oe.return=ue,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return he=sc(oe.type,oe.key,oe.props,null,ue.mode,he),he.ref=Ka(ue,null,oe),he.return=ue,he;case U:return oe=pd(oe,ue.mode,he),oe.return=ue,oe;case se:var Ie=oe._init;return Ce(ue,Ie(oe._payload),he)}if(Ee(oe)||G(oe))return oe=qs(oe,ue.mode,he,null),oe.return=ue,oe;Du(ue,oe)}return null}function Te(ue,oe,he,Ie){var Ve=oe!==null?oe.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return Ve!==null?null:Q(ue,oe,""+he,Ie);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case F:return he.key===Ve?te(ue,oe,he,Ie):null;case U:return he.key===Ve?pe(ue,oe,he,Ie):null;case se:return Ve=he._init,Te(ue,oe,Ve(he._payload),Ie)}if(Ee(he)||G(he))return Ve!==null?null:Se(ue,oe,he,Ie,null);Du(ue,he)}return null}function Re(ue,oe,he,Ie,Ve){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return ue=ue.get(he)||null,Q(oe,ue,""+Ie,Ve);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case F:return ue=ue.get(Ie.key===null?he:Ie.key)||null,te(oe,ue,Ie,Ve);case U:return ue=ue.get(Ie.key===null?he:Ie.key)||null,pe(oe,ue,Ie,Ve);case se:var ze=Ie._init;return Re(ue,oe,he,ze(Ie._payload),Ve)}if(Ee(Ie)||G(Ie))return ue=ue.get(he)||null,Se(oe,ue,Ie,Ve,null);Du(oe,Ie)}return null}function je(ue,oe,he,Ie){for(var Ve=null,ze=null,He=oe,Je=oe=0,Jt=null;He!==null&&Je<he.length;Je++){He.index>Je?(Jt=He,He=null):Jt=He.sibling;var ht=Te(ue,He,he[Je],Ie);if(ht===null){He===null&&(He=Jt);break}s&&He&&ht.alternate===null&&o(ue,He),oe=j(ht,oe,Je),ze===null?Ve=ht:ze.sibling=ht,ze=ht,He=Jt}if(Je===he.length)return u(ue,He),St&&Ls(ue,Je),Ve;if(He===null){for(;Je<he.length;Je++)He=Ce(ue,he[Je],Ie),He!==null&&(oe=j(He,oe,Je),ze===null?Ve=He:ze.sibling=He,ze=He);return St&&Ls(ue,Je),Ve}for(He=m(ue,He);Je<he.length;Je++)Jt=Re(He,ue,Je,he[Je],Ie),Jt!==null&&(s&&Jt.alternate!==null&&He.delete(Jt.key===null?Je:Jt.key),oe=j(Jt,oe,Je),ze===null?Ve=Jt:ze.sibling=Jt,ze=Jt);return s&&He.forEach(function($i){return o(ue,$i)}),St&&Ls(ue,Je),Ve}function Fe(ue,oe,he,Ie){var Ve=G(he);if(typeof Ve!="function")throw Error(t(150));if(he=Ve.call(he),he==null)throw Error(t(151));for(var ze=Ve=null,He=oe,Je=oe=0,Jt=null,ht=he.next();He!==null&&!ht.done;Je++,ht=he.next()){He.index>Je?(Jt=He,He=null):Jt=He.sibling;var $i=Te(ue,He,ht.value,Ie);if($i===null){He===null&&(He=Jt);break}s&&He&&$i.alternate===null&&o(ue,He),oe=j($i,oe,Je),ze===null?Ve=$i:ze.sibling=$i,ze=$i,He=Jt}if(ht.done)return u(ue,He),St&&Ls(ue,Je),Ve;if(He===null){for(;!ht.done;Je++,ht=he.next())ht=Ce(ue,ht.value,Ie),ht!==null&&(oe=j(ht,oe,Je),ze===null?Ve=ht:ze.sibling=ht,ze=ht);return St&&Ls(ue,Je),Ve}for(He=m(ue,He);!ht.done;Je++,ht=he.next())ht=Re(He,ue,Je,ht.value,Ie),ht!==null&&(s&&ht.alternate!==null&&He.delete(ht.key===null?Je:ht.key),oe=j(ht,oe,Je),ze===null?Ve=ht:ze.sibling=ht,ze=ht);return s&&He.forEach(function(rb){return o(ue,rb)}),St&&Ls(ue,Je),Ve}function Nt(ue,oe,he,Ie){if(typeof he=="object"&&he!==null&&he.type===P&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case F:e:{for(var Ve=he.key,ze=oe;ze!==null;){if(ze.key===Ve){if(Ve=he.type,Ve===P){if(ze.tag===7){u(ue,ze.sibling),oe=C(ze,he.props.children),oe.return=ue,ue=oe;break e}}else if(ze.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===se&&ev(Ve)===ze.type){u(ue,ze.sibling),oe=C(ze,he.props),oe.ref=Ka(ue,ze,he),oe.return=ue,ue=oe;break e}u(ue,ze);break}else o(ue,ze);ze=ze.sibling}he.type===P?(oe=qs(he.props.children,ue.mode,Ie,he.key),oe.return=ue,ue=oe):(Ie=sc(he.type,he.key,he.props,null,ue.mode,Ie),Ie.ref=Ka(ue,oe,he),Ie.return=ue,ue=Ie)}return q(ue);case U:e:{for(ze=he.key;oe!==null;){if(oe.key===ze)if(oe.tag===4&&oe.stateNode.containerInfo===he.containerInfo&&oe.stateNode.implementation===he.implementation){u(ue,oe.sibling),oe=C(oe,he.children||[]),oe.return=ue,ue=oe;break e}else{u(ue,oe);break}else o(ue,oe);oe=oe.sibling}oe=pd(he,ue.mode,Ie),oe.return=ue,ue=oe}return q(ue);case se:return ze=he._init,Nt(ue,oe,ze(he._payload),Ie)}if(Ee(he))return je(ue,oe,he,Ie);if(G(he))return Fe(ue,oe,he,Ie);Du(ue,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,oe!==null&&oe.tag===6?(u(ue,oe.sibling),oe=C(oe,he),oe.return=ue,ue=oe):(u(ue,oe),oe=dd(he,ue.mode,Ie),oe.return=ue,ue=oe),q(ue)):u(ue,oe)}return Nt}var Mo=tv(!0),nv=tv(!1),ju=Li(null),Mu=null,Fo=null,Sf=null;function Cf(){Sf=Fo=Mu=null}function If(s){var o=ju.current;wt(ju),s._currentValue=o}function bf(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function Vo(s,o){Mu=s,Sf=Fo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(An=!0),s.firstContext=null)}function Qn(s){var o=s._currentValue;if(Sf!==s)if(s={context:s,memoizedValue:o,next:null},Fo===null){if(Mu===null)throw Error(t(308));Fo=s,Mu.dependencies={lanes:0,firstContext:s}}else Fo=Fo.next=s;return o}var Ds=null;function Af(s){Ds===null?Ds=[s]:Ds.push(s)}function rv(s,o,u,m){var C=o.interleaved;return C===null?(u.next=u,Af(o)):(u.next=C.next,C.next=u),o.interleaved=u,ri(s,m)}function ri(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Mi=!1;function kf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iv(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ii(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Fi(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var C=m.pending;return C===null?o.next=o:(o.next=C.next,C.next=o),m.pending=o,ri(s,u)}return C=m.interleaved,C===null?(o.next=o,Af(m)):(o.next=C.next,C.next=o),m.interleaved=o,ri(s,u)}function Fu(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Ai(s,u)}}function sv(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var C=null,j=null;if(u=u.firstBaseUpdate,u!==null){do{var q={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};j===null?C=j=q:j=j.next=q,u=u.next}while(u!==null);j===null?C=j=o:j=j.next=o}else C=j=o;u={baseState:m.baseState,firstBaseUpdate:C,lastBaseUpdate:j,shared:m.shared,effects:m.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Vu(s,o,u,m){var C=s.updateQueue;Mi=!1;var j=C.firstBaseUpdate,q=C.lastBaseUpdate,Q=C.shared.pending;if(Q!==null){C.shared.pending=null;var te=Q,pe=te.next;te.next=null,q===null?j=pe:q.next=pe,q=te;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,Q=Se.lastBaseUpdate,Q!==q&&(Q===null?Se.firstBaseUpdate=pe:Q.next=pe,Se.lastBaseUpdate=te))}if(j!==null){var Ce=C.baseState;q=0,Se=pe=te=null,Q=j;do{var Te=Q.lane,Re=Q.eventTime;if((m&Te)===Te){Se!==null&&(Se=Se.next={eventTime:Re,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var je=s,Fe=Q;switch(Te=o,Re=u,Fe.tag){case 1:if(je=Fe.payload,typeof je=="function"){Ce=je.call(Re,Ce,Te);break e}Ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Fe.payload,Te=typeof je=="function"?je.call(Re,Ce,Te):je,Te==null)break e;Ce=W({},Ce,Te);break e;case 2:Mi=!0}}Q.callback!==null&&Q.lane!==0&&(s.flags|=64,Te=C.effects,Te===null?C.effects=[Q]:Te.push(Q))}else Re={eventTime:Re,lane:Te,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Se===null?(pe=Se=Re,te=Ce):Se=Se.next=Re,q|=Te;if(Q=Q.next,Q===null){if(Q=C.shared.pending,Q===null)break;Te=Q,Q=Te.next,Te.next=null,C.lastBaseUpdate=Te,C.shared.pending=null}}while(!0);if(Se===null&&(te=Ce),C.baseState=te,C.firstBaseUpdate=pe,C.lastBaseUpdate=Se,o=C.shared.interleaved,o!==null){C=o;do q|=C.lane,C=C.next;while(C!==o)}else j===null&&(C.shared.lanes=0);Fs|=q,s.lanes=q,s.memoizedState=Ce}}function ov(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var m=s[o],C=m.callback;if(C!==null){if(m.callback=null,m=u,typeof C!="function")throw Error(t(191,C));C.call(m)}}}var Ga={},Or=Li(Ga),Ja=Li(Ga),Qa=Li(Ga);function js(s){if(s===Ga)throw Error(t(174));return s}function xf(s,o){switch(yt(Qa,o),yt(Ja,s),yt(Or,Ga),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ze(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Ze(o,s)}wt(Or),yt(Or,o)}function Uo(){wt(Or),wt(Ja),wt(Qa)}function av(s){js(Qa.current);var o=js(Or.current),u=Ze(o,s.type);o!==u&&(yt(Ja,s),yt(Or,u))}function Rf(s){Ja.current===s&&(wt(Or),wt(Ja))}var It=Li(0);function Uu(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Pf=[];function Of(){for(var s=0;s<Pf.length;s++)Pf[s]._workInProgressVersionPrimary=null;Pf.length=0}var Bu=I.ReactCurrentDispatcher,Nf=I.ReactCurrentBatchConfig,Ms=0,bt=null,Bt=null,Kt=null,qu=!1,Ya=!1,Xa=0,II=0;function ln(){throw Error(t(321))}function Lf(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!dr(s[u],o[u]))return!1;return!0}function Df(s,o,u,m,C,j){if(Ms=j,bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Bu.current=s===null||s.memoizedState===null?xI:RI,s=u(m,C),Ya){j=0;do{if(Ya=!1,Xa=0,25<=j)throw Error(t(301));j+=1,Kt=Bt=null,o.updateQueue=null,Bu.current=PI,s=u(m,C)}while(Ya)}if(Bu.current=$u,o=Bt!==null&&Bt.next!==null,Ms=0,Kt=Bt=bt=null,qu=!1,o)throw Error(t(300));return s}function jf(){var s=Xa!==0;return Xa=0,s}function Nr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?bt.memoizedState=Kt=s:Kt=Kt.next=s,Kt}function Yn(){if(Bt===null){var s=bt.alternate;s=s!==null?s.memoizedState:null}else s=Bt.next;var o=Kt===null?bt.memoizedState:Kt.next;if(o!==null)Kt=o,Bt=s;else{if(s===null)throw Error(t(310));Bt=s,s={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Kt===null?bt.memoizedState=Kt=s:Kt=Kt.next=s}return Kt}function Za(s,o){return typeof o=="function"?o(s):o}function Mf(s){var o=Yn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=Bt,C=m.baseQueue,j=u.pending;if(j!==null){if(C!==null){var q=C.next;C.next=j.next,j.next=q}m.baseQueue=C=j,u.pending=null}if(C!==null){j=C.next,m=m.baseState;var Q=q=null,te=null,pe=j;do{var Se=pe.lane;if((Ms&Se)===Se)te!==null&&(te=te.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),m=pe.hasEagerState?pe.eagerState:s(m,pe.action);else{var Ce={lane:Se,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};te===null?(Q=te=Ce,q=m):te=te.next=Ce,bt.lanes|=Se,Fs|=Se}pe=pe.next}while(pe!==null&&pe!==j);te===null?q=m:te.next=Q,dr(m,o.memoizedState)||(An=!0),o.memoizedState=m,o.baseState=q,o.baseQueue=te,u.lastRenderedState=m}if(s=u.interleaved,s!==null){C=s;do j=C.lane,bt.lanes|=j,Fs|=j,C=C.next;while(C!==s)}else C===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Ff(s){var o=Yn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var m=u.dispatch,C=u.pending,j=o.memoizedState;if(C!==null){u.pending=null;var q=C=C.next;do j=s(j,q.action),q=q.next;while(q!==C);dr(j,o.memoizedState)||(An=!0),o.memoizedState=j,o.baseQueue===null&&(o.baseState=j),u.lastRenderedState=j}return[j,m]}function lv(){}function uv(s,o){var u=bt,m=Yn(),C=o(),j=!dr(m.memoizedState,C);if(j&&(m.memoizedState=C,An=!0),m=m.queue,Vf(fv.bind(null,u,m,s),[s]),m.getSnapshot!==o||j||Kt!==null&&Kt.memoizedState.tag&1){if(u.flags|=2048,el(9,hv.bind(null,u,m,C,o),void 0,null),Gt===null)throw Error(t(349));(Ms&30)!==0||cv(u,o,C)}return C}function cv(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=bt.updateQueue,o===null?(o={lastEffect:null,stores:null},bt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function hv(s,o,u,m){o.value=u,o.getSnapshot=m,dv(o)&&pv(s)}function fv(s,o,u){return u(function(){dv(o)&&pv(s)})}function dv(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!dr(s,u)}catch{return!0}}function pv(s){var o=ri(s,1);o!==null&&vr(o,s,1,-1)}function mv(s){var o=Nr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},o.queue=s,s=s.dispatch=kI.bind(null,bt,s),[o.memoizedState,s]}function el(s,o,u,m){return s={tag:s,create:o,destroy:u,deps:m,next:null},o=bt.updateQueue,o===null?(o={lastEffect:null,stores:null},bt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s)),s}function gv(){return Yn().memoizedState}function zu(s,o,u,m){var C=Nr();bt.flags|=s,C.memoizedState=el(1|o,u,void 0,m===void 0?null:m)}function Hu(s,o,u,m){var C=Yn();m=m===void 0?null:m;var j=void 0;if(Bt!==null){var q=Bt.memoizedState;if(j=q.destroy,m!==null&&Lf(m,q.deps)){C.memoizedState=el(o,u,j,m);return}}bt.flags|=s,C.memoizedState=el(1|o,u,j,m)}function yv(s,o){return zu(8390656,8,s,o)}function Vf(s,o){return Hu(2048,8,s,o)}function vv(s,o){return Hu(4,2,s,o)}function _v(s,o){return Hu(4,4,s,o)}function wv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ev(s,o,u){return u=u!=null?u.concat([s]):null,Hu(4,4,wv.bind(null,o,s),u)}function Uf(){}function Tv(s,o){var u=Yn();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&Lf(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function Sv(s,o){var u=Yn();o=o===void 0?null:o;var m=u.memoizedState;return m!==null&&o!==null&&Lf(o,m[1])?m[0]:(s=s(),u.memoizedState=[s,o],s)}function Cv(s,o,u){return(Ms&21)===0?(s.baseState&&(s.baseState=!1,An=!0),s.memoizedState=u):(dr(u,o)||(u=bs(),bt.lanes|=u,Fs|=u,s.baseState=!0),o)}function bI(s,o){var u=ot;ot=u!==0&&4>u?u:4,s(!0);var m=Nf.transition;Nf.transition={};try{s(!1),o()}finally{ot=u,Nf.transition=m}}function Iv(){return Yn().memoizedState}function AI(s,o,u){var m=qi(s);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},bv(s))Av(o,u);else if(u=rv(s,o,u,m),u!==null){var C=vn();vr(u,s,m,C),kv(u,o,m)}}function kI(s,o,u){var m=qi(s),C={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(bv(s))Av(o,C);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=o.lastRenderedReducer,j!==null))try{var q=o.lastRenderedState,Q=j(q,u);if(C.hasEagerState=!0,C.eagerState=Q,dr(Q,q)){var te=o.interleaved;te===null?(C.next=C,Af(o)):(C.next=te.next,te.next=C),o.interleaved=C;return}}catch{}finally{}u=rv(s,o,C,m),u!==null&&(C=vn(),vr(u,s,m,C),kv(u,o,m))}}function bv(s){var o=s.alternate;return s===bt||o!==null&&o===bt}function Av(s,o){Ya=qu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function kv(s,o,u){if((u&4194240)!==0){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Ai(s,u)}}var $u={readContext:Qn,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},xI={readContext:Qn,useCallback:function(s,o){return Nr().memoizedState=[s,o===void 0?null:o],s},useContext:Qn,useEffect:yv,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,zu(4194308,4,wv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return zu(4194308,4,s,o)},useInsertionEffect:function(s,o){return zu(4,2,s,o)},useMemo:function(s,o){var u=Nr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var m=Nr();return o=u!==void 0?u(o):o,m.memoizedState=m.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},m.queue=s,s=s.dispatch=AI.bind(null,bt,s),[m.memoizedState,s]},useRef:function(s){var o=Nr();return s={current:s},o.memoizedState=s},useState:mv,useDebugValue:Uf,useDeferredValue:function(s){return Nr().memoizedState=s},useTransition:function(){var s=mv(!1),o=s[0];return s=bI.bind(null,s[1]),Nr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var m=bt,C=Nr();if(St){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Gt===null)throw Error(t(349));(Ms&30)!==0||cv(m,o,u)}C.memoizedState=u;var j={value:u,getSnapshot:o};return C.queue=j,yv(fv.bind(null,m,j,s),[s]),m.flags|=2048,el(9,hv.bind(null,m,j,u,o),void 0,null),u},useId:function(){var s=Nr(),o=Gt.identifierPrefix;if(St){var u=ni,m=ti;u=(m&~(1<<32-mn(m)-1)).toString(32)+u,o=":"+o+"R"+u,u=Xa++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=II++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},RI={readContext:Qn,useCallback:Tv,useContext:Qn,useEffect:Vf,useImperativeHandle:Ev,useInsertionEffect:vv,useLayoutEffect:_v,useMemo:Sv,useReducer:Mf,useRef:gv,useState:function(){return Mf(Za)},useDebugValue:Uf,useDeferredValue:function(s){var o=Yn();return Cv(o,Bt.memoizedState,s)},useTransition:function(){var s=Mf(Za)[0],o=Yn().memoizedState;return[s,o]},useMutableSource:lv,useSyncExternalStore:uv,useId:Iv,unstable_isNewReconciler:!1},PI={readContext:Qn,useCallback:Tv,useContext:Qn,useEffect:Vf,useImperativeHandle:Ev,useInsertionEffect:vv,useLayoutEffect:_v,useMemo:Sv,useReducer:Ff,useRef:gv,useState:function(){return Ff(Za)},useDebugValue:Uf,useDeferredValue:function(s){var o=Yn();return Bt===null?o.memoizedState=s:Cv(o,Bt.memoizedState,s)},useTransition:function(){var s=Ff(Za)[0],o=Yn().memoizedState;return[s,o]},useMutableSource:lv,useSyncExternalStore:uv,useId:Iv,unstable_isNewReconciler:!1};function mr(s,o){if(s&&s.defaultProps){o=W({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Bf(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:W({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Wu={isMounted:function(s){return(s=s._reactInternals)?or(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var m=vn(),C=qi(s),j=ii(m,C);j.payload=o,u!=null&&(j.callback=u),o=Fi(s,j,C),o!==null&&(vr(o,s,C,m),Fu(o,s,C))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=vn(),C=qi(s),j=ii(m,C);j.tag=1,j.payload=o,u!=null&&(j.callback=u),o=Fi(s,j,C),o!==null&&(vr(o,s,C,m),Fu(o,s,C))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=vn(),m=qi(s),C=ii(u,m);C.tag=2,o!=null&&(C.callback=o),o=Fi(s,C,m),o!==null&&(vr(o,s,m,u),Fu(o,s,m))}};function xv(s,o,u,m,C,j,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,j,q):o.prototype&&o.prototype.isPureReactComponent?!Ua(u,m)||!Ua(C,j):!0}function Rv(s,o,u){var m=!1,C=Di,j=o.contextType;return typeof j=="object"&&j!==null?j=Qn(j):(C=bn(o)?Os:an.current,m=o.contextTypes,j=(m=m!=null)?No(s,C):Di),o=new o(u,j),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Wu,s.stateNode=o,o._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=C,s.__reactInternalMemoizedMaskedChildContext=j),o}function Pv(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&Wu.enqueueReplaceState(o,o.state,null)}function qf(s,o,u,m){var C=s.stateNode;C.props=u,C.state=s.memoizedState,C.refs={},kf(s);var j=o.contextType;typeof j=="object"&&j!==null?C.context=Qn(j):(j=bn(o)?Os:an.current,C.context=No(s,j)),C.state=s.memoizedState,j=o.getDerivedStateFromProps,typeof j=="function"&&(Bf(s,o,j,u),C.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(o=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),o!==C.state&&Wu.enqueueReplaceState(C,C.state,null),Vu(s,u,C,m),C.state=s.memoizedState),typeof C.componentDidMount=="function"&&(s.flags|=4194308)}function Bo(s,o){try{var u="",m=o;do u+=X(m),m=m.return;while(m);var C=u}catch(j){C=`
Error generating stack: `+j.message+`
`+j.stack}return{value:s,source:o,stack:C,digest:null}}function zf(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Hf(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var OI=typeof WeakMap=="function"?WeakMap:Map;function Ov(s,o,u){u=ii(-1,u),u.tag=3,u.payload={element:null};var m=o.value;return u.callback=function(){Zu||(Zu=!0,sd=m),Hf(s,o)},u}function Nv(s,o,u){u=ii(-1,u),u.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var C=o.value;u.payload=function(){return m(C)},u.callback=function(){Hf(s,o)}}var j=s.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(u.callback=function(){Hf(s,o),typeof m!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var q=o.stack;this.componentDidCatch(o.value,{componentStack:q!==null?q:""})}),u}function Lv(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new OI;var C=new Set;m.set(o,C)}else C=m.get(o),C===void 0&&(C=new Set,m.set(o,C));C.has(u)||(C.add(u),s=WI.bind(null,s,o,u),o.then(s,s))}function Dv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function jv(s,o,u,m,C){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ii(-1,1),o.tag=2,Fi(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=C,s)}var NI=I.ReactCurrentOwner,An=!1;function yn(s,o,u,m){o.child=s===null?nv(o,null,u,m):Mo(o,s.child,u,m)}function Mv(s,o,u,m,C){u=u.render;var j=o.ref;return Vo(o,C),m=Df(s,o,u,m,j,C),u=jf(),s!==null&&!An?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~C,si(s,o,C)):(St&&u&&vf(o),o.flags|=1,yn(s,o,m,C),o.child)}function Fv(s,o,u,m,C){if(s===null){var j=u.type;return typeof j=="function"&&!fd(j)&&j.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=j,Vv(s,o,j,m,C)):(s=sc(u.type,null,m,o,o.mode,C),s.ref=o.ref,s.return=o,o.child=s)}if(j=s.child,(s.lanes&C)===0){var q=j.memoizedProps;if(u=u.compare,u=u!==null?u:Ua,u(q,m)&&s.ref===o.ref)return si(s,o,C)}return o.flags|=1,s=Hi(j,m),s.ref=o.ref,s.return=o,o.child=s}function Vv(s,o,u,m,C){if(s!==null){var j=s.memoizedProps;if(Ua(j,m)&&s.ref===o.ref)if(An=!1,o.pendingProps=m=j,(s.lanes&C)!==0)(s.flags&131072)!==0&&(An=!0);else return o.lanes=s.lanes,si(s,o,C)}return $f(s,o,u,m,C)}function Uv(s,o,u){var m=o.pendingProps,C=m.children,j=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(zo,Vn),Vn|=u;else{if((u&1073741824)===0)return s=j!==null?j.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,yt(zo,Vn),Vn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=j!==null?j.baseLanes:u,yt(zo,Vn),Vn|=m}else j!==null?(m=j.baseLanes|u,o.memoizedState=null):m=u,yt(zo,Vn),Vn|=m;return yn(s,o,C,u),o.child}function Bv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function $f(s,o,u,m,C){var j=bn(u)?Os:an.current;return j=No(o,j),Vo(o,C),u=Df(s,o,u,m,j,C),m=jf(),s!==null&&!An?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~C,si(s,o,C)):(St&&m&&vf(o),o.flags|=1,yn(s,o,u,C),o.child)}function qv(s,o,u,m,C){if(bn(u)){var j=!0;Ru(o)}else j=!1;if(Vo(o,C),o.stateNode===null)Gu(s,o),Rv(o,u,m),qf(o,u,m,C),m=!0;else if(s===null){var q=o.stateNode,Q=o.memoizedProps;q.props=Q;var te=q.context,pe=u.contextType;typeof pe=="object"&&pe!==null?pe=Qn(pe):(pe=bn(u)?Os:an.current,pe=No(o,pe));var Se=u.getDerivedStateFromProps,Ce=typeof Se=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ce||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Q!==m||te!==pe)&&Pv(o,q,m,pe),Mi=!1;var Te=o.memoizedState;q.state=Te,Vu(o,m,q,C),te=o.memoizedState,Q!==m||Te!==te||In.current||Mi?(typeof Se=="function"&&(Bf(o,u,Se,m),te=o.memoizedState),(Q=Mi||xv(o,u,Q,m,Te,te,pe))?(Ce||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(o.flags|=4194308)):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=te),q.props=m,q.state=te,q.context=pe,m=Q):(typeof q.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{q=o.stateNode,iv(s,o),Q=o.memoizedProps,pe=o.type===o.elementType?Q:mr(o.type,Q),q.props=pe,Ce=o.pendingProps,Te=q.context,te=u.contextType,typeof te=="object"&&te!==null?te=Qn(te):(te=bn(u)?Os:an.current,te=No(o,te));var Re=u.getDerivedStateFromProps;(Se=typeof Re=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Q!==Ce||Te!==te)&&Pv(o,q,m,te),Mi=!1,Te=o.memoizedState,q.state=Te,Vu(o,m,q,C);var je=o.memoizedState;Q!==Ce||Te!==je||In.current||Mi?(typeof Re=="function"&&(Bf(o,u,Re,m),je=o.memoizedState),(pe=Mi||xv(o,u,pe,m,Te,je,te)||!1)?(Se||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(m,je,te),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(m,je,te)),typeof q.componentDidUpdate=="function"&&(o.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof q.componentDidUpdate!="function"||Q===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||Q===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=je),q.props=m,q.state=je,q.context=te,m=pe):(typeof q.componentDidUpdate!="function"||Q===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||Q===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),m=!1)}return Wf(s,o,u,m,j,C)}function Wf(s,o,u,m,C,j){Bv(s,o);var q=(o.flags&128)!==0;if(!m&&!q)return C&&Ky(o,u,!1),si(s,o,j);m=o.stateNode,NI.current=o;var Q=q&&typeof u.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,s!==null&&q?(o.child=Mo(o,s.child,null,j),o.child=Mo(o,null,Q,j)):yn(s,o,Q,j),o.memoizedState=m.state,C&&Ky(o,u,!0),o.child}function zv(s){var o=s.stateNode;o.pendingContext?$y(s,o.pendingContext,o.pendingContext!==o.context):o.context&&$y(s,o.context,!1),xf(s,o.containerInfo)}function Hv(s,o,u,m,C){return jo(),Tf(C),o.flags|=256,yn(s,o,u,m),o.child}var Kf={dehydrated:null,treeContext:null,retryLane:0};function Gf(s){return{baseLanes:s,cachePool:null,transitions:null}}function $v(s,o,u){var m=o.pendingProps,C=It.current,j=!1,q=(o.flags&128)!==0,Q;if((Q=q)||(Q=s!==null&&s.memoizedState===null?!1:(C&2)!==0),Q?(j=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(C|=1),yt(It,C&1),s===null)return Ef(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(q=m.children,s=m.fallback,j?(m=o.mode,j=o.child,q={mode:"hidden",children:q},(m&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=q):j=oc(q,m,0,null),s=qs(s,m,u,null),j.return=o,s.return=o,j.sibling=s,o.child=j,o.child.memoizedState=Gf(u),o.memoizedState=Kf,s):Jf(o,q));if(C=s.memoizedState,C!==null&&(Q=C.dehydrated,Q!==null))return LI(s,o,q,m,Q,C,u);if(j){j=m.fallback,q=o.mode,C=s.child,Q=C.sibling;var te={mode:"hidden",children:m.children};return(q&1)===0&&o.child!==C?(m=o.child,m.childLanes=0,m.pendingProps=te,o.deletions=null):(m=Hi(C,te),m.subtreeFlags=C.subtreeFlags&14680064),Q!==null?j=Hi(Q,j):(j=qs(j,q,u,null),j.flags|=2),j.return=o,m.return=o,m.sibling=j,o.child=m,m=j,j=o.child,q=s.child.memoizedState,q=q===null?Gf(u):{baseLanes:q.baseLanes|u,cachePool:null,transitions:q.transitions},j.memoizedState=q,j.childLanes=s.childLanes&~u,o.memoizedState=Kf,m}return j=s.child,s=j.sibling,m=Hi(j,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=u),m.return=o,m.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=m,o.memoizedState=null,m}function Jf(s,o){return o=oc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Ku(s,o,u,m){return m!==null&&Tf(m),Mo(o,s.child,null,u),s=Jf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function LI(s,o,u,m,C,j,q){if(u)return o.flags&256?(o.flags&=-257,m=zf(Error(t(422))),Ku(s,o,q,m)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(j=m.fallback,C=o.mode,m=oc({mode:"visible",children:m.children},C,0,null),j=qs(j,C,q,null),j.flags|=2,m.return=o,j.return=o,m.sibling=j,o.child=m,(o.mode&1)!==0&&Mo(o,s.child,null,q),o.child.memoizedState=Gf(q),o.memoizedState=Kf,j);if((o.mode&1)===0)return Ku(s,o,q,null);if(C.data==="$!"){if(m=C.nextSibling&&C.nextSibling.dataset,m)var Q=m.dgst;return m=Q,j=Error(t(419)),m=zf(j,m,void 0),Ku(s,o,q,m)}if(Q=(q&s.childLanes)!==0,An||Q){if(m=Gt,m!==null){switch(q&-q){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(m.suspendedLanes|q))!==0?0:C,C!==0&&C!==j.retryLane&&(j.retryLane=C,ri(s,C),vr(m,s,C,-1))}return hd(),m=zf(Error(t(421))),Ku(s,o,q,m)}return C.data==="$?"?(o.flags|=128,o.child=s.child,o=KI.bind(null,s),C._reactRetry=o,null):(s=j.treeContext,Fn=Ni(C.nextSibling),Mn=o,St=!0,pr=null,s!==null&&(Gn[Jn++]=ti,Gn[Jn++]=ni,Gn[Jn++]=Ns,ti=s.id,ni=s.overflow,Ns=o),o=Jf(o,m.children),o.flags|=4096,o)}function Wv(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),bf(s.return,o,u)}function Qf(s,o,u,m,C){var j=s.memoizedState;j===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:C}:(j.isBackwards=o,j.rendering=null,j.renderingStartTime=0,j.last=m,j.tail=u,j.tailMode=C)}function Kv(s,o,u){var m=o.pendingProps,C=m.revealOrder,j=m.tail;if(yn(s,o,m.children,u),m=It.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Wv(s,u,o);else if(s.tag===19)Wv(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(yt(It,m),(o.mode&1)===0)o.memoizedState=null;else switch(C){case"forwards":for(u=o.child,C=null;u!==null;)s=u.alternate,s!==null&&Uu(s)===null&&(C=u),u=u.sibling;u=C,u===null?(C=o.child,o.child=null):(C=u.sibling,u.sibling=null),Qf(o,!1,C,u,j);break;case"backwards":for(u=null,C=o.child,o.child=null;C!==null;){if(s=C.alternate,s!==null&&Uu(s)===null){o.child=C;break}s=C.sibling,C.sibling=u,u=C,C=s}Qf(o,!0,u,null,j);break;case"together":Qf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Gu(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function si(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Fs|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=Hi(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Hi(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function DI(s,o,u){switch(o.tag){case 3:zv(o),jo();break;case 5:av(o);break;case 1:bn(o.type)&&Ru(o);break;case 4:xf(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,C=o.memoizedProps.value;yt(ju,m._currentValue),m._currentValue=C;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(yt(It,It.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?$v(s,o,u):(yt(It,It.current&1),s=si(s,o,u),s!==null?s.sibling:null);yt(It,It.current&1);break;case 19:if(m=(u&o.childLanes)!==0,(s.flags&128)!==0){if(m)return Kv(s,o,u);o.flags|=128}if(C=o.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),yt(It,It.current),m)break;return null;case 22:case 23:return o.lanes=0,Uv(s,o,u)}return si(s,o,u)}var Gv,Yf,Jv,Qv;Gv=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Yf=function(){},Jv=function(s,o,u,m){var C=s.memoizedProps;if(C!==m){s=o.stateNode,js(Or.current);var j=null;switch(u){case"input":C=Pe(s,C),m=Pe(s,m),j=[];break;case"select":C=W({},C,{value:void 0}),m=W({},m,{value:void 0}),j=[];break;case"textarea":C=ge(s,C),m=ge(s,m),j=[];break;default:typeof C.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Au)}Ea(u,m);var q;u=null;for(pe in C)if(!m.hasOwnProperty(pe)&&C.hasOwnProperty(pe)&&C[pe]!=null)if(pe==="style"){var Q=C[pe];for(q in Q)Q.hasOwnProperty(q)&&(u||(u={}),u[q]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?j||(j=[]):(j=j||[]).push(pe,null));for(pe in m){var te=m[pe];if(Q=C!=null?C[pe]:void 0,m.hasOwnProperty(pe)&&te!==Q&&(te!=null||Q!=null))if(pe==="style")if(Q){for(q in Q)!Q.hasOwnProperty(q)||te&&te.hasOwnProperty(q)||(u||(u={}),u[q]="");for(q in te)te.hasOwnProperty(q)&&Q[q]!==te[q]&&(u||(u={}),u[q]=te[q])}else u||(j||(j=[]),j.push(pe,u)),u=te;else pe==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Q=Q?Q.__html:void 0,te!=null&&Q!==te&&(j=j||[]).push(pe,te)):pe==="children"?typeof te!="string"&&typeof te!="number"||(j=j||[]).push(pe,""+te):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(te!=null&&pe==="onScroll"&&_t("scroll",s),j||Q===te||(j=[])):(j=j||[]).push(pe,te))}u&&(j=j||[]).push("style",u);var pe=j;(o.updateQueue=pe)&&(o.flags|=4)}},Qv=function(s,o,u,m){u!==m&&(o.flags|=4)};function tl(s,o){if(!St)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function un(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var C=s.child;C!==null;)u|=C.lanes|C.childLanes,m|=C.subtreeFlags&14680064,m|=C.flags&14680064,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)u|=C.lanes|C.childLanes,m|=C.subtreeFlags,m|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function jI(s,o,u){var m=o.pendingProps;switch(_f(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(o),null;case 1:return bn(o.type)&&xu(),un(o),null;case 3:return m=o.stateNode,Uo(),wt(In),wt(an),Of(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Lu(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,pr!==null&&(ld(pr),pr=null))),Yf(s,o),un(o),null;case 5:Rf(o);var C=js(Qa.current);if(u=o.type,s!==null&&o.stateNode!=null)Jv(s,o,u,m,C),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(t(166));return un(o),null}if(s=js(Or.current),Lu(o)){m=o.stateNode,u=o.type;var j=o.memoizedProps;switch(m[Pr]=o,m[$a]=j,s=(o.mode&1)!==0,u){case"dialog":_t("cancel",m),_t("close",m);break;case"iframe":case"object":case"embed":_t("load",m);break;case"video":case"audio":for(C=0;C<qa.length;C++)_t(qa[C],m);break;case"source":_t("error",m);break;case"img":case"image":case"link":_t("error",m),_t("load",m);break;case"details":_t("toggle",m);break;case"input":De(m,j),_t("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!j.multiple},_t("invalid",m);break;case"textarea":$e(m,j),_t("invalid",m)}Ea(u,j),C=null;for(var q in j)if(j.hasOwnProperty(q)){var Q=j[q];q==="children"?typeof Q=="string"?m.textContent!==Q&&(j.suppressHydrationWarning!==!0&&bu(m.textContent,Q,s),C=["children",Q]):typeof Q=="number"&&m.textContent!==""+Q&&(j.suppressHydrationWarning!==!0&&bu(m.textContent,Q,s),C=["children",""+Q]):i.hasOwnProperty(q)&&Q!=null&&q==="onScroll"&&_t("scroll",m)}switch(u){case"input":ve(m),ce(m,j,!0);break;case"textarea":ve(m),Be(m);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(m.onclick=Au)}m=C,o.updateQueue=m,m!==null&&(o.flags|=4)}else{q=C.nodeType===9?C:C.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=We(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=q.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=q.createElement(u,{is:m.is}):(s=q.createElement(u),u==="select"&&(q=s,m.multiple?q.multiple=!0:m.size&&(q.size=m.size))):s=q.createElementNS(s,u),s[Pr]=o,s[$a]=m,Gv(s,o,!1,!1),o.stateNode=s;e:{switch(q=Ta(u,m),u){case"dialog":_t("cancel",s),_t("close",s),C=m;break;case"iframe":case"object":case"embed":_t("load",s),C=m;break;case"video":case"audio":for(C=0;C<qa.length;C++)_t(qa[C],s);C=m;break;case"source":_t("error",s),C=m;break;case"img":case"image":case"link":_t("error",s),_t("load",s),C=m;break;case"details":_t("toggle",s),C=m;break;case"input":De(s,m),C=Pe(s,m),_t("invalid",s);break;case"option":C=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},C=W({},m,{value:void 0}),_t("invalid",s);break;case"textarea":$e(s,m),C=ge(s,m),_t("invalid",s);break;default:C=m}Ea(u,C),Q=C;for(j in Q)if(Q.hasOwnProperty(j)){var te=Q[j];j==="style"?Ti(s,te):j==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&nr(s,te)):j==="children"?typeof te=="string"?(u!=="textarea"||te!=="")&&ct(s,te):typeof te=="number"&&ct(s,""+te):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?te!=null&&j==="onScroll"&&_t("scroll",s):te!=null&&N(s,j,te,q))}switch(u){case"input":ve(s),ce(s,m,!1);break;case"textarea":ve(s),Be(s);break;case"option":m.value!=null&&s.setAttribute("value",""+ne(m.value));break;case"select":s.multiple=!!m.multiple,j=m.value,j!=null?be(s,!!m.multiple,j,!1):m.defaultValue!=null&&be(s,!!m.multiple,m.defaultValue,!0);break;default:typeof C.onClick=="function"&&(s.onclick=Au)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return un(o),null;case 6:if(s&&o.stateNode!=null)Qv(s,o,s.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(t(166));if(u=js(Qa.current),js(Or.current),Lu(o)){if(m=o.stateNode,u=o.memoizedProps,m[Pr]=o,(j=m.nodeValue!==u)&&(s=Mn,s!==null))switch(s.tag){case 3:bu(m.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&bu(m.nodeValue,u,(s.mode&1)!==0)}j&&(o.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[Pr]=o,o.stateNode=m}return un(o),null;case 13:if(wt(It),m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(St&&Fn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Zy(),jo(),o.flags|=98560,j=!1;else if(j=Lu(o),m!==null&&m.dehydrated!==null){if(s===null){if(!j)throw Error(t(318));if(j=o.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[Pr]=o}else jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;un(o),j=!1}else pr!==null&&(ld(pr),pr=null),j=!0;if(!j)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(It.current&1)!==0?qt===0&&(qt=3):hd())),o.updateQueue!==null&&(o.flags|=4),un(o),null);case 4:return Uo(),Yf(s,o),s===null&&za(o.stateNode.containerInfo),un(o),null;case 10:return If(o.type._context),un(o),null;case 17:return bn(o.type)&&xu(),un(o),null;case 19:if(wt(It),j=o.memoizedState,j===null)return un(o),null;if(m=(o.flags&128)!==0,q=j.rendering,q===null)if(m)tl(j,!1);else{if(qt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(q=Uu(s),q!==null){for(o.flags|=128,tl(j,!1),m=q.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=u,u=o.child;u!==null;)j=u,s=m,j.flags&=14680066,q=j.alternate,q===null?(j.childLanes=0,j.lanes=s,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=q.childLanes,j.lanes=q.lanes,j.child=q.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=q.memoizedProps,j.memoizedState=q.memoizedState,j.updateQueue=q.updateQueue,j.type=q.type,s=q.dependencies,j.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return yt(It,It.current&1|2),o.child}s=s.sibling}j.tail!==null&&gt()>Ho&&(o.flags|=128,m=!0,tl(j,!1),o.lanes=4194304)}else{if(!m)if(s=Uu(q),s!==null){if(o.flags|=128,m=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),tl(j,!0),j.tail===null&&j.tailMode==="hidden"&&!q.alternate&&!St)return un(o),null}else 2*gt()-j.renderingStartTime>Ho&&u!==1073741824&&(o.flags|=128,m=!0,tl(j,!1),o.lanes=4194304);j.isBackwards?(q.sibling=o.child,o.child=q):(u=j.last,u!==null?u.sibling=q:o.child=q,j.last=q)}return j.tail!==null?(o=j.tail,j.rendering=o,j.tail=o.sibling,j.renderingStartTime=gt(),o.sibling=null,u=It.current,yt(It,m?u&1|2:u&1),o):(un(o),null);case 22:case 23:return cd(),m=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(Vn&1073741824)!==0&&(un(o),o.subtreeFlags&6&&(o.flags|=8192)):un(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function MI(s,o){switch(_f(o),o.tag){case 1:return bn(o.type)&&xu(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Uo(),wt(In),wt(an),Of(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Rf(o),null;case 13:if(wt(It),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));jo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return wt(It),null;case 4:return Uo(),null;case 10:return If(o.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Ju=!1,cn=!1,FI=typeof WeakSet=="function"?WeakSet:Set,Le=null;function qo(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){xt(s,o,m)}else u.current=null}function Xf(s,o,u){try{u()}catch(m){xt(s,o,m)}}var Yv=!1;function VI(s,o){if(cf=Ri,s=xy(),tf(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var C=m.anchorOffset,j=m.focusNode;m=m.focusOffset;try{u.nodeType,j.nodeType}catch{u=null;break e}var q=0,Q=-1,te=-1,pe=0,Se=0,Ce=s,Te=null;t:for(;;){for(var Re;Ce!==u||C!==0&&Ce.nodeType!==3||(Q=q+C),Ce!==j||m!==0&&Ce.nodeType!==3||(te=q+m),Ce.nodeType===3&&(q+=Ce.nodeValue.length),(Re=Ce.firstChild)!==null;)Te=Ce,Ce=Re;for(;;){if(Ce===s)break t;if(Te===u&&++pe===C&&(Q=q),Te===j&&++Se===m&&(te=q),(Re=Ce.nextSibling)!==null)break;Ce=Te,Te=Ce.parentNode}Ce=Re}u=Q===-1||te===-1?null:{start:Q,end:te}}else u=null}u=u||{start:0,end:0}}else u=null;for(hf={focusedElem:s,selectionRange:u},Ri=!1,Le=o;Le!==null;)if(o=Le,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Le=s;else for(;Le!==null;){o=Le;try{var je=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Fe=je.memoizedProps,Nt=je.memoizedState,ue=o.stateNode,oe=ue.getSnapshotBeforeUpdate(o.elementType===o.type?Fe:mr(o.type,Fe),Nt);ue.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var he=o.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ie){xt(o,o.return,Ie)}if(s=o.sibling,s!==null){s.return=o.return,Le=s;break}Le=o.return}return je=Yv,Yv=!1,je}function nl(s,o,u){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var C=m=m.next;do{if((C.tag&s)===s){var j=C.destroy;C.destroy=void 0,j!==void 0&&Xf(o,u,j)}C=C.next}while(C!==m)}}function Qu(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var m=u.create;u.destroy=m()}u=u.next}while(u!==o)}}function Zf(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function Xv(s){var o=s.alternate;o!==null&&(s.alternate=null,Xv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Pr],delete o[$a],delete o[mf],delete o[EI],delete o[TI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Zv(s){return s.tag===5||s.tag===3||s.tag===4}function e_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Zv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ed(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Au));else if(m!==4&&(s=s.child,s!==null))for(ed(s,o,u),s=s.sibling;s!==null;)ed(s,o,u),s=s.sibling}function td(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(td(s,o,u),s=s.sibling;s!==null;)td(s,o,u),s=s.sibling}var en=null,gr=!1;function Vi(s,o,u){for(u=u.child;u!==null;)t_(s,o,u),u=u.sibling}function t_(s,o,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Cs,u)}catch{}switch(u.tag){case 5:cn||qo(u,o);case 6:var m=en,C=gr;en=null,Vi(s,o,u),en=m,gr=C,en!==null&&(gr?(s=en,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):en.removeChild(u.stateNode));break;case 18:en!==null&&(gr?(s=en,u=u.stateNode,s.nodeType===8?pf(s.parentNode,u):s.nodeType===1&&pf(s,u),hr(s)):pf(en,u.stateNode));break;case 4:m=en,C=gr,en=u.stateNode.containerInfo,gr=!0,Vi(s,o,u),en=m,gr=C;break;case 0:case 11:case 14:case 15:if(!cn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){C=m=m.next;do{var j=C,q=j.destroy;j=j.tag,q!==void 0&&((j&2)!==0||(j&4)!==0)&&Xf(u,o,q),C=C.next}while(C!==m)}Vi(s,o,u);break;case 1:if(!cn&&(qo(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(Q){xt(u,o,Q)}Vi(s,o,u);break;case 21:Vi(s,o,u);break;case 22:u.mode&1?(cn=(m=cn)||u.memoizedState!==null,Vi(s,o,u),cn=m):Vi(s,o,u);break;default:Vi(s,o,u)}}function n_(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new FI),o.forEach(function(m){var C=GI.bind(null,s,m);u.has(m)||(u.add(m),m.then(C,C))})}}function yr(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var C=u[m];try{var j=s,q=o,Q=q;e:for(;Q!==null;){switch(Q.tag){case 5:en=Q.stateNode,gr=!1;break e;case 3:en=Q.stateNode.containerInfo,gr=!0;break e;case 4:en=Q.stateNode.containerInfo,gr=!0;break e}Q=Q.return}if(en===null)throw Error(t(160));t_(j,q,C),en=null,gr=!1;var te=C.alternate;te!==null&&(te.return=null),C.return=null}catch(pe){xt(C,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)r_(o,s),o=o.sibling}function r_(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(yr(o,s),Lr(s),m&4){try{nl(3,s,s.return),Qu(3,s)}catch(Fe){xt(s,s.return,Fe)}try{nl(5,s,s.return)}catch(Fe){xt(s,s.return,Fe)}}break;case 1:yr(o,s),Lr(s),m&512&&u!==null&&qo(u,u.return);break;case 5:if(yr(o,s),Lr(s),m&512&&u!==null&&qo(u,u.return),s.flags&32){var C=s.stateNode;try{ct(C,"")}catch(Fe){xt(s,s.return,Fe)}}if(m&4&&(C=s.stateNode,C!=null)){var j=s.memoizedProps,q=u!==null?u.memoizedProps:j,Q=s.type,te=s.updateQueue;if(s.updateQueue=null,te!==null)try{Q==="input"&&j.type==="radio"&&j.name!=null&&Ue(C,j),Ta(Q,q);var pe=Ta(Q,j);for(q=0;q<te.length;q+=2){var Se=te[q],Ce=te[q+1];Se==="style"?Ti(C,Ce):Se==="dangerouslySetInnerHTML"?nr(C,Ce):Se==="children"?ct(C,Ce):N(C,Se,Ce,pe)}switch(Q){case"input":tt(C,j);break;case"textarea":Me(C,j);break;case"select":var Te=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!j.multiple;var Re=j.value;Re!=null?be(C,!!j.multiple,Re,!1):Te!==!!j.multiple&&(j.defaultValue!=null?be(C,!!j.multiple,j.defaultValue,!0):be(C,!!j.multiple,j.multiple?[]:"",!1))}C[$a]=j}catch(Fe){xt(s,s.return,Fe)}}break;case 6:if(yr(o,s),Lr(s),m&4){if(s.stateNode===null)throw Error(t(162));C=s.stateNode,j=s.memoizedProps;try{C.nodeValue=j}catch(Fe){xt(s,s.return,Fe)}}break;case 3:if(yr(o,s),Lr(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{hr(o.containerInfo)}catch(Fe){xt(s,s.return,Fe)}break;case 4:yr(o,s),Lr(s);break;case 13:yr(o,s),Lr(s),C=s.child,C.flags&8192&&(j=C.memoizedState!==null,C.stateNode.isHidden=j,!j||C.alternate!==null&&C.alternate.memoizedState!==null||(id=gt())),m&4&&n_(s);break;case 22:if(Se=u!==null&&u.memoizedState!==null,s.mode&1?(cn=(pe=cn)||Se,yr(o,s),cn=pe):yr(o,s),Lr(s),m&8192){if(pe=s.memoizedState!==null,(s.stateNode.isHidden=pe)&&!Se&&(s.mode&1)!==0)for(Le=s,Se=s.child;Se!==null;){for(Ce=Le=Se;Le!==null;){switch(Te=Le,Re=Te.child,Te.tag){case 0:case 11:case 14:case 15:nl(4,Te,Te.return);break;case 1:qo(Te,Te.return);var je=Te.stateNode;if(typeof je.componentWillUnmount=="function"){m=Te,u=Te.return;try{o=m,je.props=o.memoizedProps,je.state=o.memoizedState,je.componentWillUnmount()}catch(Fe){xt(m,u,Fe)}}break;case 5:qo(Te,Te.return);break;case 22:if(Te.memoizedState!==null){o_(Ce);continue}}Re!==null?(Re.return=Te,Le=Re):o_(Ce)}Se=Se.sibling}e:for(Se=null,Ce=s;;){if(Ce.tag===5){if(Se===null){Se=Ce;try{C=Ce.stateNode,pe?(j=C.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Q=Ce.stateNode,te=Ce.memoizedProps.style,q=te!=null&&te.hasOwnProperty("display")?te.display:null,Q.style.display=rr("display",q))}catch(Fe){xt(s,s.return,Fe)}}}else if(Ce.tag===6){if(Se===null)try{Ce.stateNode.nodeValue=pe?"":Ce.memoizedProps}catch(Fe){xt(s,s.return,Fe)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===s)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===s)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===s)break e;Se===Ce&&(Se=null),Ce=Ce.return}Se===Ce&&(Se=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:yr(o,s),Lr(s),m&4&&n_(s);break;case 21:break;default:yr(o,s),Lr(s)}}function Lr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(Zv(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var C=m.stateNode;m.flags&32&&(ct(C,""),m.flags&=-33);var j=e_(s);td(s,j,C);break;case 3:case 4:var q=m.stateNode.containerInfo,Q=e_(s);ed(s,Q,q);break;default:throw Error(t(161))}}catch(te){xt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function UI(s,o,u){Le=s,i_(s)}function i_(s,o,u){for(var m=(s.mode&1)!==0;Le!==null;){var C=Le,j=C.child;if(C.tag===22&&m){var q=C.memoizedState!==null||Ju;if(!q){var Q=C.alternate,te=Q!==null&&Q.memoizedState!==null||cn;Q=Ju;var pe=cn;if(Ju=q,(cn=te)&&!pe)for(Le=C;Le!==null;)q=Le,te=q.child,q.tag===22&&q.memoizedState!==null?a_(C):te!==null?(te.return=q,Le=te):a_(C);for(;j!==null;)Le=j,i_(j),j=j.sibling;Le=C,Ju=Q,cn=pe}s_(s)}else(C.subtreeFlags&8772)!==0&&j!==null?(j.return=C,Le=j):s_(s)}}function s_(s){for(;Le!==null;){var o=Le;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:cn||Qu(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!cn)if(u===null)m.componentDidMount();else{var C=o.elementType===o.type?u.memoizedProps:mr(o.type,u.memoizedProps);m.componentDidUpdate(C,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var j=o.updateQueue;j!==null&&ov(o,j,m);break;case 3:var q=o.updateQueue;if(q!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}ov(o,q,u)}break;case 5:var Q=o.stateNode;if(u===null&&o.flags&4){u=Q;var te=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&u.focus();break;case"img":te.src&&(u.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var Se=pe.memoizedState;if(Se!==null){var Ce=Se.dehydrated;Ce!==null&&hr(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}cn||o.flags&512&&Zf(o)}catch(Te){xt(o,o.return,Te)}}if(o===s){Le=null;break}if(u=o.sibling,u!==null){u.return=o.return,Le=u;break}Le=o.return}}function o_(s){for(;Le!==null;){var o=Le;if(o===s){Le=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Le=u;break}Le=o.return}}function a_(s){for(;Le!==null;){var o=Le;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Qu(4,o)}catch(te){xt(o,u,te)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var C=o.return;try{m.componentDidMount()}catch(te){xt(o,C,te)}}var j=o.return;try{Zf(o)}catch(te){xt(o,j,te)}break;case 5:var q=o.return;try{Zf(o)}catch(te){xt(o,q,te)}}}catch(te){xt(o,o.return,te)}if(o===s){Le=null;break}var Q=o.sibling;if(Q!==null){Q.return=o.return,Le=Q;break}Le=o.return}}var BI=Math.ceil,Yu=I.ReactCurrentDispatcher,nd=I.ReactCurrentOwner,Xn=I.ReactCurrentBatchConfig,ut=0,Gt=null,Mt=null,tn=0,Vn=0,zo=Li(0),qt=0,rl=null,Fs=0,Xu=0,rd=0,il=null,kn=null,id=0,Ho=1/0,oi=null,Zu=!1,sd=null,Ui=null,ec=!1,Bi=null,tc=0,sl=0,od=null,nc=-1,rc=0;function vn(){return(ut&6)!==0?gt():nc!==-1?nc:nc=gt()}function qi(s){return(s.mode&1)===0?1:(ut&2)!==0&&tn!==0?tn&-tn:CI.transition!==null?(rc===0&&(rc=bs()),rc):(s=ot,s!==0||(s=window.event,s=s===void 0?16:Na(s.type)),s)}function vr(s,o,u,m){if(50<sl)throw sl=0,od=null,Error(t(185));bi(s,u,m),((ut&2)===0||s!==Gt)&&(s===Gt&&((ut&2)===0&&(Xu|=u),qt===4&&zi(s,tn)),xn(s,m),u===1&&ut===0&&(o.mode&1)===0&&(Ho=gt()+500,Pu&&ji()))}function xn(s,o){var u=s.callbackNode;Gr(s,o);var m=Is(s,s===Gt?tn:0);if(m===0)u!==null&&ka(u),s.callbackNode=null,s.callbackPriority=0;else if(o=m&-m,s.callbackPriority!==o){if(u!=null&&ka(u),o===1)s.tag===0?SI(u_.bind(null,s)):Gy(u_.bind(null,s)),_I(function(){(ut&6)===0&&ji()}),u=null;else{switch(ki(m)){case 1:u=Ss;break;case 4:u=Si;break;case 16:u=$n;break;case 536870912:u=ru;break;default:u=$n}u=y_(u,l_.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function l_(s,o){if(nc=-1,rc=0,(ut&6)!==0)throw Error(t(327));var u=s.callbackNode;if($o()&&s.callbackNode!==u)return null;var m=Is(s,s===Gt?tn:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||o)o=ic(s,m);else{o=m;var C=ut;ut|=2;var j=h_();(Gt!==s||tn!==o)&&(oi=null,Ho=gt()+500,Us(s,o));do try{HI();break}catch(Q){c_(s,Q)}while(!0);Cf(),Yu.current=j,ut=C,Mt!==null?o=0:(Gt=null,tn=0,o=qt)}if(o!==0){if(o===2&&(C=Ln(s),C!==0&&(m=C,o=ad(s,C))),o===1)throw u=rl,Us(s,0),zi(s,m),xn(s,gt()),u;if(o===6)zi(s,m);else{if(C=s.current.alternate,(m&30)===0&&!qI(C)&&(o=ic(s,m),o===2&&(j=Ln(s),j!==0&&(m=j,o=ad(s,j))),o===1))throw u=rl,Us(s,0),zi(s,m),xn(s,gt()),u;switch(s.finishedWork=C,s.finishedLanes=m,o){case 0:case 1:throw Error(t(345));case 2:Bs(s,kn,oi);break;case 3:if(zi(s,m),(m&130023424)===m&&(o=id+500-gt(),10<o)){if(Is(s,0)!==0)break;if(C=s.suspendedLanes,(C&m)!==m){vn(),s.pingedLanes|=s.suspendedLanes&C;break}s.timeoutHandle=df(Bs.bind(null,s,kn,oi),o);break}Bs(s,kn,oi);break;case 4:if(zi(s,m),(m&4194240)===m)break;for(o=s.eventTimes,C=-1;0<m;){var q=31-mn(m);j=1<<q,q=o[q],q>C&&(C=q),m&=~j}if(m=C,m=gt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*BI(m/1960))-m,10<m){s.timeoutHandle=df(Bs.bind(null,s,kn,oi),m);break}Bs(s,kn,oi);break;case 5:Bs(s,kn,oi);break;default:throw Error(t(329))}}}return xn(s,gt()),s.callbackNode===u?l_.bind(null,s):null}function ad(s,o){var u=il;return s.current.memoizedState.isDehydrated&&(Us(s,o).flags|=256),s=ic(s,o),s!==2&&(o=kn,kn=u,o!==null&&ld(o)),s}function ld(s){kn===null?kn=s:kn.push.apply(kn,s)}function qI(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var C=u[m],j=C.getSnapshot;C=C.value;try{if(!dr(j(),C))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function zi(s,o){for(o&=~rd,o&=~Xu,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-mn(o),m=1<<u;s[u]=-1,o&=~m}}function u_(s){if((ut&6)!==0)throw Error(t(327));$o();var o=Is(s,0);if((o&1)===0)return xn(s,gt()),null;var u=ic(s,o);if(s.tag!==0&&u===2){var m=Ln(s);m!==0&&(o=m,u=ad(s,m))}if(u===1)throw u=rl,Us(s,0),zi(s,o),xn(s,gt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Bs(s,kn,oi),xn(s,gt()),null}function ud(s,o){var u=ut;ut|=1;try{return s(o)}finally{ut=u,ut===0&&(Ho=gt()+500,Pu&&ji())}}function Vs(s){Bi!==null&&Bi.tag===0&&(ut&6)===0&&$o();var o=ut;ut|=1;var u=Xn.transition,m=ot;try{if(Xn.transition=null,ot=1,s)return s()}finally{ot=m,Xn.transition=u,ut=o,(ut&6)===0&&ji()}}function cd(){Vn=zo.current,wt(zo)}function Us(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,vI(u)),Mt!==null)for(u=Mt.return;u!==null;){var m=u;switch(_f(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&xu();break;case 3:Uo(),wt(In),wt(an),Of();break;case 5:Rf(m);break;case 4:Uo();break;case 13:wt(It);break;case 19:wt(It);break;case 10:If(m.type._context);break;case 22:case 23:cd()}u=u.return}if(Gt=s,Mt=s=Hi(s.current,null),tn=Vn=o,qt=0,rl=null,rd=Xu=Fs=0,kn=il=null,Ds!==null){for(o=0;o<Ds.length;o++)if(u=Ds[o],m=u.interleaved,m!==null){u.interleaved=null;var C=m.next,j=u.pending;if(j!==null){var q=j.next;j.next=C,m.next=q}u.pending=m}Ds=null}return s}function c_(s,o){do{var u=Mt;try{if(Cf(),Bu.current=$u,qu){for(var m=bt.memoizedState;m!==null;){var C=m.queue;C!==null&&(C.pending=null),m=m.next}qu=!1}if(Ms=0,Kt=Bt=bt=null,Ya=!1,Xa=0,nd.current=null,u===null||u.return===null){qt=1,rl=o,Mt=null;break}e:{var j=s,q=u.return,Q=u,te=o;if(o=tn,Q.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var pe=te,Se=Q,Ce=Se.tag;if((Se.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var Te=Se.alternate;Te?(Se.updateQueue=Te.updateQueue,Se.memoizedState=Te.memoizedState,Se.lanes=Te.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Re=Dv(q);if(Re!==null){Re.flags&=-257,jv(Re,q,Q,j,o),Re.mode&1&&Lv(j,pe,o),o=Re,te=pe;var je=o.updateQueue;if(je===null){var Fe=new Set;Fe.add(te),o.updateQueue=Fe}else je.add(te);break e}else{if((o&1)===0){Lv(j,pe,o),hd();break e}te=Error(t(426))}}else if(St&&Q.mode&1){var Nt=Dv(q);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),jv(Nt,q,Q,j,o),Tf(Bo(te,Q));break e}}j=te=Bo(te,Q),qt!==4&&(qt=2),il===null?il=[j]:il.push(j),j=q;do{switch(j.tag){case 3:j.flags|=65536,o&=-o,j.lanes|=o;var ue=Ov(j,te,o);sv(j,ue);break e;case 1:Q=te;var oe=j.type,he=j.stateNode;if((j.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Ui===null||!Ui.has(he)))){j.flags|=65536,o&=-o,j.lanes|=o;var Ie=Nv(j,Q,o);sv(j,Ie);break e}}j=j.return}while(j!==null)}d_(u)}catch(Ve){o=Ve,Mt===u&&u!==null&&(Mt=u=u.return);continue}break}while(!0)}function h_(){var s=Yu.current;return Yu.current=$u,s===null?$u:s}function hd(){(qt===0||qt===3||qt===2)&&(qt=4),Gt===null||(Fs&268435455)===0&&(Xu&268435455)===0||zi(Gt,tn)}function ic(s,o){var u=ut;ut|=2;var m=h_();(Gt!==s||tn!==o)&&(oi=null,Us(s,o));do try{zI();break}catch(C){c_(s,C)}while(!0);if(Cf(),ut=u,Yu.current=m,Mt!==null)throw Error(t(261));return Gt=null,tn=0,qt}function zI(){for(;Mt!==null;)f_(Mt)}function HI(){for(;Mt!==null&&!tu();)f_(Mt)}function f_(s){var o=g_(s.alternate,s,Vn);s.memoizedProps=s.pendingProps,o===null?d_(s):Mt=o,nd.current=null}function d_(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=jI(u,o,Vn),u!==null){Mt=u;return}}else{if(u=MI(u,o),u!==null){u.flags&=32767,Mt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{qt=6,Mt=null;return}}if(o=o.sibling,o!==null){Mt=o;return}Mt=o=s}while(o!==null);qt===0&&(qt=5)}function Bs(s,o,u){var m=ot,C=Xn.transition;try{Xn.transition=null,ot=1,$I(s,o,u,m)}finally{Xn.transition=C,ot=m}return null}function $I(s,o,u,m){do $o();while(Bi!==null);if((ut&6)!==0)throw Error(t(327));u=s.finishedWork;var C=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var j=u.lanes|u.childLanes;if(mt(s,j),s===Gt&&(Mt=Gt=null,tn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ec||(ec=!0,y_($n,function(){return $o(),null})),j=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||j){j=Xn.transition,Xn.transition=null;var q=ot;ot=1;var Q=ut;ut|=4,nd.current=null,VI(s,u),r_(u,s),hI(hf),Ri=!!cf,hf=cf=null,s.current=u,UI(u),Kh(),ut=Q,ot=q,Xn.transition=j}else s.current=u;if(ec&&(ec=!1,Bi=s,tc=C),j=s.pendingLanes,j===0&&(Ui=null),iu(u.stateNode),xn(s,gt()),o!==null)for(m=s.onRecoverableError,u=0;u<o.length;u++)C=o[u],m(C.value,{componentStack:C.stack,digest:C.digest});if(Zu)throw Zu=!1,s=sd,sd=null,s;return(tc&1)!==0&&s.tag!==0&&$o(),j=s.pendingLanes,(j&1)!==0?s===od?sl++:(sl=0,od=s):sl=0,ji(),null}function $o(){if(Bi!==null){var s=ki(tc),o=Xn.transition,u=ot;try{if(Xn.transition=null,ot=16>s?16:s,Bi===null)var m=!1;else{if(s=Bi,Bi=null,tc=0,(ut&6)!==0)throw Error(t(331));var C=ut;for(ut|=4,Le=s.current;Le!==null;){var j=Le,q=j.child;if((Le.flags&16)!==0){var Q=j.deletions;if(Q!==null){for(var te=0;te<Q.length;te++){var pe=Q[te];for(Le=pe;Le!==null;){var Se=Le;switch(Se.tag){case 0:case 11:case 15:nl(8,Se,j)}var Ce=Se.child;if(Ce!==null)Ce.return=Se,Le=Ce;else for(;Le!==null;){Se=Le;var Te=Se.sibling,Re=Se.return;if(Xv(Se),Se===pe){Le=null;break}if(Te!==null){Te.return=Re,Le=Te;break}Le=Re}}}var je=j.alternate;if(je!==null){var Fe=je.child;if(Fe!==null){je.child=null;do{var Nt=Fe.sibling;Fe.sibling=null,Fe=Nt}while(Fe!==null)}}Le=j}}if((j.subtreeFlags&2064)!==0&&q!==null)q.return=j,Le=q;else e:for(;Le!==null;){if(j=Le,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:nl(9,j,j.return)}var ue=j.sibling;if(ue!==null){ue.return=j.return,Le=ue;break e}Le=j.return}}var oe=s.current;for(Le=oe;Le!==null;){q=Le;var he=q.child;if((q.subtreeFlags&2064)!==0&&he!==null)he.return=q,Le=he;else e:for(q=oe;Le!==null;){if(Q=Le,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Qu(9,Q)}}catch(Ve){xt(Q,Q.return,Ve)}if(Q===q){Le=null;break e}var Ie=Q.sibling;if(Ie!==null){Ie.return=Q.return,Le=Ie;break e}Le=Q.return}}if(ut=C,ji(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Cs,s)}catch{}m=!0}return m}finally{ot=u,Xn.transition=o}}return!1}function p_(s,o,u){o=Bo(u,o),o=Ov(s,o,1),s=Fi(s,o,1),o=vn(),s!==null&&(bi(s,1,o),xn(s,o))}function xt(s,o,u){if(s.tag===3)p_(s,s,u);else for(;o!==null;){if(o.tag===3){p_(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ui===null||!Ui.has(m))){s=Bo(u,s),s=Nv(o,s,1),o=Fi(o,s,1),s=vn(),o!==null&&(bi(o,1,s),xn(o,s));break}}o=o.return}}function WI(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),o=vn(),s.pingedLanes|=s.suspendedLanes&u,Gt===s&&(tn&u)===u&&(qt===4||qt===3&&(tn&130023424)===tn&&500>gt()-id?Us(s,0):rd|=u),xn(s,o)}function m_(s,o){o===0&&((s.mode&1)===0?o=1:(o=po,po<<=1,(po&130023424)===0&&(po=4194304)));var u=vn();s=ri(s,o),s!==null&&(bi(s,o,u),xn(s,u))}function KI(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),m_(s,u)}function GI(s,o){var u=0;switch(s.tag){case 13:var m=s.stateNode,C=s.memoizedState;C!==null&&(u=C.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(o),m_(s,u)}var g_;g_=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||In.current)An=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return An=!1,DI(s,o,u);An=(s.flags&131072)!==0}else An=!1,St&&(o.flags&1048576)!==0&&Jy(o,Nu,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;Gu(s,o),s=o.pendingProps;var C=No(o,an.current);Vo(o,u),C=Df(null,o,m,s,C,u);var j=jf();return o.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,bn(m)?(j=!0,Ru(o)):j=!1,o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,kf(o),C.updater=Wu,o.stateNode=C,C._reactInternals=o,qf(o,m,s,u),o=Wf(null,o,m,!0,j,u)):(o.tag=0,St&&j&&vf(o),yn(null,o,C,u),o=o.child),o;case 16:m=o.elementType;e:{switch(Gu(s,o),s=o.pendingProps,C=m._init,m=C(m._payload),o.type=m,C=o.tag=QI(m),s=mr(m,s),C){case 0:o=$f(null,o,m,s,u);break e;case 1:o=qv(null,o,m,s,u);break e;case 11:o=Mv(null,o,m,s,u);break e;case 14:o=Fv(null,o,m,mr(m.type,s),u);break e}throw Error(t(306,m,""))}return o;case 0:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:mr(m,C),$f(s,o,m,C,u);case 1:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:mr(m,C),qv(s,o,m,C,u);case 3:e:{if(zv(o),s===null)throw Error(t(387));m=o.pendingProps,j=o.memoizedState,C=j.element,iv(s,o),Vu(o,m,null,u);var q=o.memoizedState;if(m=q.element,j.isDehydrated)if(j={element:m,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},o.updateQueue.baseState=j,o.memoizedState=j,o.flags&256){C=Bo(Error(t(423)),o),o=Hv(s,o,m,u,C);break e}else if(m!==C){C=Bo(Error(t(424)),o),o=Hv(s,o,m,u,C);break e}else for(Fn=Ni(o.stateNode.containerInfo.firstChild),Mn=o,St=!0,pr=null,u=nv(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(jo(),m===C){o=si(s,o,u);break e}yn(s,o,m,u)}o=o.child}return o;case 5:return av(o),s===null&&Ef(o),m=o.type,C=o.pendingProps,j=s!==null?s.memoizedProps:null,q=C.children,ff(m,C)?q=null:j!==null&&ff(m,j)&&(o.flags|=32),Bv(s,o),yn(s,o,q,u),o.child;case 6:return s===null&&Ef(o),null;case 13:return $v(s,o,u);case 4:return xf(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=Mo(o,null,m,u):yn(s,o,m,u),o.child;case 11:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:mr(m,C),Mv(s,o,m,C,u);case 7:return yn(s,o,o.pendingProps,u),o.child;case 8:return yn(s,o,o.pendingProps.children,u),o.child;case 12:return yn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(m=o.type._context,C=o.pendingProps,j=o.memoizedProps,q=C.value,yt(ju,m._currentValue),m._currentValue=q,j!==null)if(dr(j.value,q)){if(j.children===C.children&&!In.current){o=si(s,o,u);break e}}else for(j=o.child,j!==null&&(j.return=o);j!==null;){var Q=j.dependencies;if(Q!==null){q=j.child;for(var te=Q.firstContext;te!==null;){if(te.context===m){if(j.tag===1){te=ii(-1,u&-u),te.tag=2;var pe=j.updateQueue;if(pe!==null){pe=pe.shared;var Se=pe.pending;Se===null?te.next=te:(te.next=Se.next,Se.next=te),pe.pending=te}}j.lanes|=u,te=j.alternate,te!==null&&(te.lanes|=u),bf(j.return,u,o),Q.lanes|=u;break}te=te.next}}else if(j.tag===10)q=j.type===o.type?null:j.child;else if(j.tag===18){if(q=j.return,q===null)throw Error(t(341));q.lanes|=u,Q=q.alternate,Q!==null&&(Q.lanes|=u),bf(q,u,o),q=j.sibling}else q=j.child;if(q!==null)q.return=j;else for(q=j;q!==null;){if(q===o){q=null;break}if(j=q.sibling,j!==null){j.return=q.return,q=j;break}q=q.return}j=q}yn(s,o,C.children,u),o=o.child}return o;case 9:return C=o.type,m=o.pendingProps.children,Vo(o,u),C=Qn(C),m=m(C),o.flags|=1,yn(s,o,m,u),o.child;case 14:return m=o.type,C=mr(m,o.pendingProps),C=mr(m.type,C),Fv(s,o,m,C,u);case 15:return Vv(s,o,o.type,o.pendingProps,u);case 17:return m=o.type,C=o.pendingProps,C=o.elementType===m?C:mr(m,C),Gu(s,o),o.tag=1,bn(m)?(s=!0,Ru(o)):s=!1,Vo(o,u),Rv(o,m,C),qf(o,m,C,u),Wf(null,o,m,!0,s,u);case 19:return Kv(s,o,u);case 22:return Uv(s,o,u)}throw Error(t(156,o.tag))};function y_(s,o){return ho(s,o)}function JI(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,o,u,m){return new JI(s,o,u,m)}function fd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function QI(s){if(typeof s=="function")return fd(s)?1:0;if(s!=null){if(s=s.$$typeof,s===O)return 11;if(s===J)return 14}return 2}function Hi(s,o){var u=s.alternate;return u===null?(u=Zn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function sc(s,o,u,m,C,j){var q=2;if(m=s,typeof s=="function")fd(s)&&(q=1);else if(typeof s=="string")q=5;else e:switch(s){case P:return qs(u.children,C,j,o);case _:q=8,C|=8;break;case A:return s=Zn(12,u,o,C|2),s.elementType=A,s.lanes=j,s;case D:return s=Zn(13,u,o,C),s.elementType=D,s.lanes=j,s;case $:return s=Zn(19,u,o,C),s.elementType=$,s.lanes=j,s;case Z:return oc(u,C,j,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:q=10;break e;case x:q=9;break e;case O:q=11;break e;case J:q=14;break e;case se:q=16,m=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Zn(q,u,o,C),o.elementType=s,o.type=m,o.lanes=j,o}function qs(s,o,u,m){return s=Zn(7,s,m,o),s.lanes=u,s}function oc(s,o,u,m){return s=Zn(22,s,m,o),s.elementType=Z,s.lanes=u,s.stateNode={isHidden:!1},s}function dd(s,o,u){return s=Zn(6,s,null,o),s.lanes=u,s}function pd(s,o,u){return o=Zn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function YI(s,o,u,m,C){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=m,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function md(s,o,u,m,C,j,q,Q,te){return s=new YI(s,o,u,Q,te),o===1?(o=1,j===!0&&(o|=8)):o=0,j=Zn(3,null,null,o),s.current=j,j.stateNode=s,j.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},kf(j),s}function XI(s,o,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:m==null?null:""+m,children:s,containerInfo:o,implementation:u}}function v_(s){if(!s)return Di;s=s._reactInternals;e:{if(or(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(bn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(bn(u))return Wy(s,u,o)}return o}function __(s,o,u,m,C,j,q,Q,te){return s=md(u,m,!0,s,C,j,q,Q,te),s.context=v_(null),u=s.current,m=vn(),C=qi(u),j=ii(m,C),j.callback=o??null,Fi(u,j,C),s.current.lanes=C,bi(s,C,m),xn(s,m),s}function ac(s,o,u,m){var C=o.current,j=vn(),q=qi(C);return u=v_(u),o.context===null?o.context=u:o.pendingContext=u,o=ii(j,q),o.payload={element:s},m=m===void 0?null:m,m!==null&&(o.callback=m),s=Fi(C,o,q),s!==null&&(vr(s,C,q,j),Fu(s,C,q)),q}function lc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function w_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function gd(s,o){w_(s,o),(s=s.alternate)&&w_(s,o)}function ZI(){return null}var E_=typeof reportError=="function"?reportError:function(s){console.error(s)};function yd(s){this._internalRoot=s}uc.prototype.render=yd.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));ac(s,o,null,null)},uc.prototype.unmount=yd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Vs(function(){ac(null,s,null,null)}),o[Zr]=null}};function uc(s){this._internalRoot=s}uc.prototype.unstable_scheduleHydration=function(s){if(s){var o=uu();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Ar.length&&o!==0&&o<Ar[u].priority;u++);Ar.splice(u,0,s),u===0&&fu(s)}};function vd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function cc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function T_(){}function eb(s,o,u,m,C){if(C){if(typeof m=="function"){var j=m;m=function(){var pe=lc(q);j.call(pe)}}var q=__(o,m,s,0,null,!1,!1,"",T_);return s._reactRootContainer=q,s[Zr]=q.current,za(s.nodeType===8?s.parentNode:s),Vs(),q}for(;C=s.lastChild;)s.removeChild(C);if(typeof m=="function"){var Q=m;m=function(){var pe=lc(te);Q.call(pe)}}var te=md(s,0,!1,null,null,!1,!1,"",T_);return s._reactRootContainer=te,s[Zr]=te.current,za(s.nodeType===8?s.parentNode:s),Vs(function(){ac(o,te,u,m)}),te}function hc(s,o,u,m,C){var j=u._reactRootContainer;if(j){var q=j;if(typeof C=="function"){var Q=C;C=function(){var te=lc(q);Q.call(te)}}ac(o,q,s,C)}else q=eb(u,o,s,C,m);return lc(q)}au=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ci(o.pendingLanes);u!==0&&(Ai(o,u|1),xn(o,gt()),(ut&6)===0&&(Ho=gt()+500,ji()))}break;case 13:Vs(function(){var m=ri(s,1);if(m!==null){var C=vn();vr(m,s,1,C)}}),gd(s,1)}},mo=function(s){if(s.tag===13){var o=ri(s,134217728);if(o!==null){var u=vn();vr(o,s,134217728,u)}gd(s,134217728)}},lu=function(s){if(s.tag===13){var o=qi(s),u=ri(s,o);if(u!==null){var m=vn();vr(u,s,o,m)}gd(s,o)}},uu=function(){return ot},cu=function(s,o){var u=ot;try{return ot=s,o()}finally{ot=u}},so=function(s,o,u){switch(o){case"input":if(tt(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var C=ku(m);if(!C)throw Error(t(90));ke(m),tt(m,C)}}}break;case"textarea":Me(s,u);break;case"select":o=u.value,o!=null&&be(s,!!u.multiple,o,!1)}},_s=ud,Ca=Vs;var tb={usingClientEntryPoint:!1,Events:[Wa,Po,ku,Ir,Sa,ud]},ol={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nb={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Aa(s),s===null?null:s.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Cs=fc.inject(nb),Nn=fc}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tb,Rn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(o))throw Error(t(200));return XI(s,o,null,u)},Rn.createRoot=function(s,o){if(!vd(s))throw Error(t(299));var u=!1,m="",C=E_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=md(s,1,!1,null,null,u,!1,m,C),s[Zr]=o.current,za(s.nodeType===8?s.parentNode:s),new yd(o)},Rn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Aa(o),s=s===null?null:s.stateNode,s},Rn.flushSync=function(s){return Vs(s)},Rn.hydrate=function(s,o,u){if(!cc(o))throw Error(t(200));return hc(null,s,o,!0,u)},Rn.hydrateRoot=function(s,o,u){if(!vd(s))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,C=!1,j="",q=E_;if(u!=null&&(u.unstable_strictMode===!0&&(C=!0),u.identifierPrefix!==void 0&&(j=u.identifierPrefix),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),o=__(o,null,s,1,u??null,C,!1,j,q),s[Zr]=o.current,za(s),m)for(s=0;s<m.length;s++)u=m[s],C=u._getVersion,C=C(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,C]:o.mutableSourceEagerHydrationData.push(u,C);return new uc(o)},Rn.render=function(s,o,u){if(!cc(o))throw Error(t(200));return hc(null,s,o,!1,u)},Rn.unmountComponentAtNode=function(s){if(!cc(s))throw Error(t(40));return s._reactRootContainer?(Vs(function(){hc(null,null,s,!1,function(){s._reactRootContainer=null,s[Zr]=null})}),!0):!1},Rn.unstable_batchedUpdates=ud,Rn.unstable_renderSubtreeIntoContainer=function(s,o,u,m){if(!cc(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return hc(s,o,u,!1,m)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var R_;function m1(){if(R_)return Ed.exports;R_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ed.exports=hb(),Ed.exports}var P_;function fb(){if(P_)return pc;P_=1;var r=m1();return pc.createRoot=r.createRoot,pc.hydrateRoot=r.hydrateRoot,pc}var db=fb();/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=()=>{};var O_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},mb=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],l=r[t++],c=r[t++],h=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const a=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},y1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],l=i+1<r.length,c=l?r[i+1]:0,h=i+2<r.length,d=h?r[i+2]:0,v=a>>2,g=(a&3)<<4|c>>4;let p=(c&15)<<2|d>>6,y=d&63;h||(y=64,l||(p=64)),n.push(t[v],t[g],t[p],t[y])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(g1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):mb(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const g=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new gb;const p=a<<2|c>>4;if(n.push(p),d!==64){const y=c<<4&240|d>>2;if(n.push(y),g!==64){const w=d<<6&192|g;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class gb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yb=function(r){const e=g1(r);return y1.encodeByteArray(e,!0)},Vc=function(r){return yb(r).replace(/\./g,"")},v1=function(r){try{return y1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=()=>vb().__FIREBASE_DEFAULTS__,wb=()=>{if(typeof process>"u"||typeof O_>"u")return;const r=O_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Eb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&v1(r[1]);return e&&JSON.parse(e)},uh=()=>{try{return pb()||_b()||wb()||Eb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_1=r=>{var e,t;return(t=(e=uh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},w1=r=>{const e=_1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},E1=()=>{var r;return(r=uh())===null||r===void 0?void 0:r.config},T1=r=>{var e;return(e=uh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Vc(JSON.stringify(t)),Vc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function Cb(){var r;const e=(r=uh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ib(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Ab(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kb(){const r=pn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function xb(){return!Cb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rb(){try{return typeof indexedDB=="object"}catch{return!1}}function Pb(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="FirebaseError";class Hr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Ob,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?Nb(a,n):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Hr(i,c,n)}}function Nb(r,e){return r.replace(Lb,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Lb=/\{\$([^}]+)}/g;function Db(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ws(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],l=e[i];if(N_(a)&&N_(l)){if(!Ws(a,l))return!1}else if(a!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function N_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function hl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function fl(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function jb(r,e){const t=new Mb(r,e);return t.subscribe.bind(t)}class Mb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Fb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Cd),i.error===void 0&&(i.error=Cd),i.complete===void 0&&(i.complete=Cd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fb(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r){return r&&r._delegate?r._delegate:r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(r){return r.endsWith(".cloudworkstations.dev")}async function Zm(r){return(await fetch(r,{credentials:"include"})).ok}class ss{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Tb;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bb(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&l.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ub(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ub(r){return r===zs?void 0:r}function Bb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const zb={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},Hb=it.INFO,$b={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},Wb=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=$b[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eg{constructor(e){this.name=e,this._logLevel=Hb,this._logHandler=Wb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const Kb=(r,e)=>e.some(t=>r instanceof t);let L_,D_;function Gb(){return L_||(L_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jb(){return D_||(D_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C1=new WeakMap,wm=new WeakMap,I1=new WeakMap,Id=new WeakMap,tg=new WeakMap;function Qb(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",l)},a=()=>{t(ts(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&C1.set(t,r)}).catch(()=>{}),tg.set(e,r),e}function Yb(r){if(wm.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",l),r.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",l),r.addEventListener("abort",l)});wm.set(r,e)}let Em={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return wm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||I1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Xb(r){Em=r(Em)}function Zb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(bd(this),e,...t);return I1.set(n,e.sort?e.sort():[e]),ts(n)}:Jb().includes(r)?function(...e){return r.apply(bd(this),e),ts(C1.get(this))}:function(...e){return ts(r.apply(bd(this),e))}}function eA(r){return typeof r=="function"?Zb(r):(r instanceof IDBTransaction&&Yb(r),Kb(r,Gb())?new Proxy(r,Em):r)}function ts(r){if(r instanceof IDBRequest)return Qb(r);if(Id.has(r))return Id.get(r);const e=eA(r);return e!==r&&(Id.set(r,e),tg.set(e,r)),e}const bd=r=>tg.get(r);function tA(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const l=indexedDB.open(r,e),c=ts(l);return n&&l.addEventListener("upgradeneeded",h=>{n(ts(l.result),h.oldVersion,h.newVersion,ts(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const nA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],Ad=new Map;function j_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=rA.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||nA.includes(t)))return;const a=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return Ad.set(e,a),a}Xb(r=>({...r,get:(e,t,n)=>j_(e,t)||r.get(e,t,n),has:(e,t)=>!!j_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sA(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function sA(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tm="@firebase/app",M_="0.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new eg("@firebase/app"),oA="@firebase/app-compat",aA="@firebase/analytics-compat",lA="@firebase/analytics",uA="@firebase/app-check-compat",cA="@firebase/app-check",hA="@firebase/auth",fA="@firebase/auth-compat",dA="@firebase/database",pA="@firebase/data-connect",mA="@firebase/database-compat",gA="@firebase/functions",yA="@firebase/functions-compat",vA="@firebase/installations",_A="@firebase/installations-compat",wA="@firebase/messaging",EA="@firebase/messaging-compat",TA="@firebase/performance",SA="@firebase/performance-compat",CA="@firebase/remote-config",IA="@firebase/remote-config-compat",bA="@firebase/storage",AA="@firebase/storage-compat",kA="@firebase/firestore",xA="@firebase/vertexai",RA="@firebase/firestore-compat",PA="firebase",OA="11.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="[DEFAULT]",NA={[Tm]:"fire-core",[oA]:"fire-core-compat",[lA]:"fire-analytics",[aA]:"fire-analytics-compat",[cA]:"fire-app-check",[uA]:"fire-app-check-compat",[hA]:"fire-auth",[fA]:"fire-auth-compat",[dA]:"fire-rtdb",[pA]:"fire-data-connect",[mA]:"fire-rtdb-compat",[gA]:"fire-fn",[yA]:"fire-fn-compat",[vA]:"fire-iid",[_A]:"fire-iid-compat",[wA]:"fire-fcm",[EA]:"fire-fcm-compat",[TA]:"fire-perf",[SA]:"fire-perf-compat",[CA]:"fire-rc",[IA]:"fire-rc-compat",[bA]:"fire-gcs",[AA]:"fire-gcs-compat",[kA]:"fire-fst",[RA]:"fire-fst-compat",[xA]:"fire-vertex","fire-js":"fire-js",[PA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,LA=new Map,Cm=new Map;function F_(r,e){try{r.container.addComponent(e)}catch(t){di.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ks(r){const e=r.name;if(Cm.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,r);for(const t of Uc.values())F_(t,r);for(const t of LA.values())F_(t,r);return!0}function ch(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Un(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new Fl("app","Firebase",DA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=OA;function b1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Sm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ns.create("bad-app-name",{appName:String(i)});if(t||(t=E1()),!t)throw ns.create("no-options");const a=Uc.get(i);if(a){if(Ws(t,a.options)&&Ws(n,a.config))return a;throw ns.create("duplicate-app",{appName:i})}const l=new qb(i);for(const h of Cm.values())l.addComponent(h);const c=new jA(t,n,l);return Uc.set(i,c),c}function ng(r=Sm){const e=Uc.get(r);if(!e&&r===Sm&&E1())return b1();if(!e)throw ns.create("no-app",{appName:r});return e}function Mr(r,e,t){var n;let i=(n=NA[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(c.join(" "));return}Ks(new ss(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebase-heartbeat-database",FA=1,Il="firebase-heartbeat-store";let kd=null;function A1(){return kd||(kd=tA(MA,FA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Il)}catch(t){console.warn(t)}}}}).catch(r=>{throw ns.create("idb-open",{originalErrorMessage:r.message})})),kd}async function VA(r){try{const t=(await A1()).transaction(Il),n=await t.objectStore(Il).get(k1(r));return await t.done,n}catch(e){if(e instanceof Hr)di.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(t.message)}}}async function V_(r,e){try{const n=(await A1()).transaction(Il,"readwrite");await n.objectStore(Il).put(e,k1(r)),await n.done}catch(t){if(t instanceof Hr)di.warn(t.message);else{const n=ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});di.warn(n.message)}}}function k1(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,BA=30;class qA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HA(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=U_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>BA){const l=$A(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){di.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=U_(),{heartbeatsToSend:n,unsentEntries:i}=zA(this._heartbeatsCache.heartbeats),a=Vc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return di.warn(t),""}}}function U_(){return new Date().toISOString().substring(0,10)}function zA(r,e=UA){const t=[];let n=r.slice();for(const i of r){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),B_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),B_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class HA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rb()?Pb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B_(r){return Vc(JSON.stringify({version:2,heartbeats:r})).length}function $A(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){Ks(new ss("platform-logger",e=>new iA(e),"PRIVATE")),Ks(new ss("heartbeat",e=>new qA(e),"PRIVATE")),Mr(Tm,M_,r),Mr(Tm,M_,"esm2017"),Mr("fire-js","")}WA("");var KA="firebase",GA="11.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(KA,GA,"app");var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,x1;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,_){function A(){}A.prototype=_.prototype,P.D=_.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(k,x,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return _.prototype[x].apply(k,D)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,_,A){A||(A=0);var k=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)k[x]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(x=0;16>x;++x)k[x]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=P.g[0],A=P.g[1],x=P.g[2];var O=P.g[3],D=_+(O^A&(x^O))+k[0]+3614090360&4294967295;_=A+(D<<7&4294967295|D>>>25),D=O+(x^_&(A^x))+k[1]+3905402710&4294967295,O=_+(D<<12&4294967295|D>>>20),D=x+(A^O&(_^A))+k[2]+606105819&4294967295,x=O+(D<<17&4294967295|D>>>15),D=A+(_^x&(O^_))+k[3]+3250441966&4294967295,A=x+(D<<22&4294967295|D>>>10),D=_+(O^A&(x^O))+k[4]+4118548399&4294967295,_=A+(D<<7&4294967295|D>>>25),D=O+(x^_&(A^x))+k[5]+1200080426&4294967295,O=_+(D<<12&4294967295|D>>>20),D=x+(A^O&(_^A))+k[6]+2821735955&4294967295,x=O+(D<<17&4294967295|D>>>15),D=A+(_^x&(O^_))+k[7]+4249261313&4294967295,A=x+(D<<22&4294967295|D>>>10),D=_+(O^A&(x^O))+k[8]+1770035416&4294967295,_=A+(D<<7&4294967295|D>>>25),D=O+(x^_&(A^x))+k[9]+2336552879&4294967295,O=_+(D<<12&4294967295|D>>>20),D=x+(A^O&(_^A))+k[10]+4294925233&4294967295,x=O+(D<<17&4294967295|D>>>15),D=A+(_^x&(O^_))+k[11]+2304563134&4294967295,A=x+(D<<22&4294967295|D>>>10),D=_+(O^A&(x^O))+k[12]+1804603682&4294967295,_=A+(D<<7&4294967295|D>>>25),D=O+(x^_&(A^x))+k[13]+4254626195&4294967295,O=_+(D<<12&4294967295|D>>>20),D=x+(A^O&(_^A))+k[14]+2792965006&4294967295,x=O+(D<<17&4294967295|D>>>15),D=A+(_^x&(O^_))+k[15]+1236535329&4294967295,A=x+(D<<22&4294967295|D>>>10),D=_+(x^O&(A^x))+k[1]+4129170786&4294967295,_=A+(D<<5&4294967295|D>>>27),D=O+(A^x&(_^A))+k[6]+3225465664&4294967295,O=_+(D<<9&4294967295|D>>>23),D=x+(_^A&(O^_))+k[11]+643717713&4294967295,x=O+(D<<14&4294967295|D>>>18),D=A+(O^_&(x^O))+k[0]+3921069994&4294967295,A=x+(D<<20&4294967295|D>>>12),D=_+(x^O&(A^x))+k[5]+3593408605&4294967295,_=A+(D<<5&4294967295|D>>>27),D=O+(A^x&(_^A))+k[10]+38016083&4294967295,O=_+(D<<9&4294967295|D>>>23),D=x+(_^A&(O^_))+k[15]+3634488961&4294967295,x=O+(D<<14&4294967295|D>>>18),D=A+(O^_&(x^O))+k[4]+3889429448&4294967295,A=x+(D<<20&4294967295|D>>>12),D=_+(x^O&(A^x))+k[9]+568446438&4294967295,_=A+(D<<5&4294967295|D>>>27),D=O+(A^x&(_^A))+k[14]+3275163606&4294967295,O=_+(D<<9&4294967295|D>>>23),D=x+(_^A&(O^_))+k[3]+4107603335&4294967295,x=O+(D<<14&4294967295|D>>>18),D=A+(O^_&(x^O))+k[8]+1163531501&4294967295,A=x+(D<<20&4294967295|D>>>12),D=_+(x^O&(A^x))+k[13]+2850285829&4294967295,_=A+(D<<5&4294967295|D>>>27),D=O+(A^x&(_^A))+k[2]+4243563512&4294967295,O=_+(D<<9&4294967295|D>>>23),D=x+(_^A&(O^_))+k[7]+1735328473&4294967295,x=O+(D<<14&4294967295|D>>>18),D=A+(O^_&(x^O))+k[12]+2368359562&4294967295,A=x+(D<<20&4294967295|D>>>12),D=_+(A^x^O)+k[5]+4294588738&4294967295,_=A+(D<<4&4294967295|D>>>28),D=O+(_^A^x)+k[8]+2272392833&4294967295,O=_+(D<<11&4294967295|D>>>21),D=x+(O^_^A)+k[11]+1839030562&4294967295,x=O+(D<<16&4294967295|D>>>16),D=A+(x^O^_)+k[14]+4259657740&4294967295,A=x+(D<<23&4294967295|D>>>9),D=_+(A^x^O)+k[1]+2763975236&4294967295,_=A+(D<<4&4294967295|D>>>28),D=O+(_^A^x)+k[4]+1272893353&4294967295,O=_+(D<<11&4294967295|D>>>21),D=x+(O^_^A)+k[7]+4139469664&4294967295,x=O+(D<<16&4294967295|D>>>16),D=A+(x^O^_)+k[10]+3200236656&4294967295,A=x+(D<<23&4294967295|D>>>9),D=_+(A^x^O)+k[13]+681279174&4294967295,_=A+(D<<4&4294967295|D>>>28),D=O+(_^A^x)+k[0]+3936430074&4294967295,O=_+(D<<11&4294967295|D>>>21),D=x+(O^_^A)+k[3]+3572445317&4294967295,x=O+(D<<16&4294967295|D>>>16),D=A+(x^O^_)+k[6]+76029189&4294967295,A=x+(D<<23&4294967295|D>>>9),D=_+(A^x^O)+k[9]+3654602809&4294967295,_=A+(D<<4&4294967295|D>>>28),D=O+(_^A^x)+k[12]+3873151461&4294967295,O=_+(D<<11&4294967295|D>>>21),D=x+(O^_^A)+k[15]+530742520&4294967295,x=O+(D<<16&4294967295|D>>>16),D=A+(x^O^_)+k[2]+3299628645&4294967295,A=x+(D<<23&4294967295|D>>>9),D=_+(x^(A|~O))+k[0]+4096336452&4294967295,_=A+(D<<6&4294967295|D>>>26),D=O+(A^(_|~x))+k[7]+1126891415&4294967295,O=_+(D<<10&4294967295|D>>>22),D=x+(_^(O|~A))+k[14]+2878612391&4294967295,x=O+(D<<15&4294967295|D>>>17),D=A+(O^(x|~_))+k[5]+4237533241&4294967295,A=x+(D<<21&4294967295|D>>>11),D=_+(x^(A|~O))+k[12]+1700485571&4294967295,_=A+(D<<6&4294967295|D>>>26),D=O+(A^(_|~x))+k[3]+2399980690&4294967295,O=_+(D<<10&4294967295|D>>>22),D=x+(_^(O|~A))+k[10]+4293915773&4294967295,x=O+(D<<15&4294967295|D>>>17),D=A+(O^(x|~_))+k[1]+2240044497&4294967295,A=x+(D<<21&4294967295|D>>>11),D=_+(x^(A|~O))+k[8]+1873313359&4294967295,_=A+(D<<6&4294967295|D>>>26),D=O+(A^(_|~x))+k[15]+4264355552&4294967295,O=_+(D<<10&4294967295|D>>>22),D=x+(_^(O|~A))+k[6]+2734768916&4294967295,x=O+(D<<15&4294967295|D>>>17),D=A+(O^(x|~_))+k[13]+1309151649&4294967295,A=x+(D<<21&4294967295|D>>>11),D=_+(x^(A|~O))+k[4]+4149444226&4294967295,_=A+(D<<6&4294967295|D>>>26),D=O+(A^(_|~x))+k[11]+3174756917&4294967295,O=_+(D<<10&4294967295|D>>>22),D=x+(_^(O|~A))+k[2]+718787259&4294967295,x=O+(D<<15&4294967295|D>>>17),D=A+(O^(x|~_))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+_&4294967295,P.g[1]=P.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+O&4294967295}n.prototype.u=function(P,_){_===void 0&&(_=P.length);for(var A=_-this.blockSize,k=this.B,x=this.h,O=0;O<_;){if(x==0)for(;O<=A;)i(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<_;)if(k[x++]=P.charCodeAt(O++),x==this.blockSize){i(this,k),x=0;break}}else for(;O<_;)if(k[x++]=P[O++],x==this.blockSize){i(this,k),x=0;break}}this.h=x,this.o+=_},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var _=1;_<P.length-8;++_)P[_]=0;var A=8*this.o;for(_=P.length-8;_<P.length;++_)P[_]=A&255,A/=256;for(this.u(P),P=Array(16),_=A=0;4>_;++_)for(var k=0;32>k;k+=8)P[A++]=this.g[_]>>>k&255;return P};function a(P,_){var A=c;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=_(P)}function l(P,_){this.h=_;for(var A=[],k=!0,x=P.length-1;0<=x;x--){var O=P[x]|0;k&&O==_||(A[x]=O,k=!1)}this.g=A}var c={};function h(P){return-128<=P&&128>P?a(P,function(_){return new l([_|0],0>_?-1:0)}):new l([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return g;if(0>P)return T(d(-P));for(var _=[],A=1,k=0;P>=A;k++)_[k]=P/A|0,A*=4294967296;return new l(_,0)}function v(P,_){if(P.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(P.charAt(0)=="-")return T(v(P.substring(1),_));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(_,8)),k=g,x=0;x<P.length;x+=8){var O=Math.min(8,P.length-x),D=parseInt(P.substring(x,x+O),_);8>O?(O=d(Math.pow(_,O)),k=k.j(O).add(d(D))):(k=k.j(A),k=k.add(d(D)))}return k}var g=h(0),p=h(1),y=h(16777216);r=l.prototype,r.m=function(){if(S(this))return-T(this).m();for(var P=0,_=1,A=0;A<this.g.length;A++){var k=this.i(A);P+=(0<=k?k:4294967296+k)*_,_*=4294967296}return P},r.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(w(this))return"0";if(S(this))return"-"+T(this).toString(P);for(var _=d(Math.pow(P,6)),A=this,k="";;){var x=I(A,_).g;A=E(A,x.j(_));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=x,w(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},r.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function w(P){if(P.h!=0)return!1;for(var _=0;_<P.g.length;_++)if(P.g[_]!=0)return!1;return!0}function S(P){return P.h==-1}r.l=function(P){return P=E(this,P),S(P)?-1:w(P)?0:1};function T(P){for(var _=P.g.length,A=[],k=0;k<_;k++)A[k]=~P.g[k];return new l(A,~P.h).add(p)}r.abs=function(){return S(this)?T(this):this},r.add=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0,x=0;x<=_;x++){var O=k+(this.i(x)&65535)+(P.i(x)&65535),D=(O>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);k=D>>>16,O&=65535,D&=65535,A[x]=D<<16|O}return new l(A,A[A.length-1]&-2147483648?-1:0)};function E(P,_){return P.add(T(_))}r.j=function(P){if(w(this)||w(P))return g;if(S(this))return S(P)?T(this).j(T(P)):T(T(this).j(P));if(S(P))return T(this.j(T(P)));if(0>this.l(y)&&0>P.l(y))return d(this.m()*P.m());for(var _=this.g.length+P.g.length,A=[],k=0;k<2*_;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var x=0;x<P.g.length;x++){var O=this.i(k)>>>16,D=this.i(k)&65535,$=P.i(x)>>>16,J=P.i(x)&65535;A[2*k+2*x]+=D*J,b(A,2*k+2*x),A[2*k+2*x+1]+=O*J,b(A,2*k+2*x+1),A[2*k+2*x+1]+=D*$,b(A,2*k+2*x+1),A[2*k+2*x+2]+=O*$,b(A,2*k+2*x+2)}for(k=0;k<_;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=_;k<2*_;k++)A[k]=0;return new l(A,0)};function b(P,_){for(;(P[_]&65535)!=P[_];)P[_+1]+=P[_]>>>16,P[_]&=65535,_++}function N(P,_){this.g=P,this.h=_}function I(P,_){if(w(_))throw Error("division by zero");if(w(P))return new N(g,g);if(S(P))return _=I(T(P),_),new N(T(_.g),T(_.h));if(S(_))return _=I(P,T(_)),new N(T(_.g),_.h);if(30<P.g.length){if(S(P)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var A=p,k=_;0>=k.l(P);)A=F(A),k=F(k);var x=U(A,1),O=U(k,1);for(k=U(k,2),A=U(A,2);!w(k);){var D=O.add(k);0>=D.l(P)&&(x=x.add(A),O=D),k=U(k,1),A=U(A,1)}return _=E(P,x.j(_)),new N(x,_)}for(x=g;0<=P.l(_);){for(A=Math.max(1,Math.floor(P.m()/_.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=d(A),D=O.j(_);S(D)||0<D.l(P);)A-=k,O=d(A),D=O.j(_);w(O)&&(O=p),x=x.add(O),P=E(P,D)}return new N(x,P)}r.A=function(P){return I(this,P).h},r.and=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)&P.i(k);return new l(A,this.h&P.h)},r.or=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)|P.i(k);return new l(A,this.h|P.h)},r.xor=function(P){for(var _=Math.max(this.g.length,P.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)^P.i(k);return new l(A,this.h^P.h)};function F(P){for(var _=P.g.length+1,A=[],k=0;k<_;k++)A[k]=P.i(k)<<1|P.i(k-1)>>>31;return new l(A,P.h)}function U(P,_){var A=_>>5;_%=32;for(var k=P.g.length-A,x=[],O=0;O<k;O++)x[O]=0<_?P.i(O+A)>>>_|P.i(O+A+1)<<32-_:P.i(O+A);return new l(x,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,x1=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=v,rs=l}).apply(typeof q_<"u"?q_:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R1,dl,P1,Cc,Im,O1,N1,L1;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,L,V){return f==Array.prototype||f==Object.prototype||(f[L]=V.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var L=0;L<f.length;++L){var V=f[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=t(this);function i(f,L){if(L)e:{var V=n;f=f.split(".");for(var K=0;K<f.length-1;K++){var le=f[K];if(!(le in V))break e;V=V[le]}f=f[f.length-1],K=V[f],L=L(K),L!=K&&L!=null&&e(V,f,{configurable:!0,writable:!0,value:L})}}function a(f,L){f instanceof String&&(f+="");var V=0,K=!1,le={next:function(){if(!K&&V<f.length){var me=V++;return{value:L(me,f[me]),done:!1}}return K=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(f){return f||function(){return a(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var L=typeof f;return L=L!="object"?L:f?Array.isArray(f)?"array":L:"null",L=="array"||L=="object"&&typeof f.length=="number"}function d(f){var L=typeof f;return L=="object"&&f!=null||L=="function"}function v(f,L,V){return f.call.apply(f.bind,arguments)}function g(f,L,V){if(!f)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,K),f.apply(L,le)}}return function(){return f.apply(L,arguments)}}function p(f,L,V){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:g,p.apply(null,arguments)}function y(f,L){var V=Array.prototype.slice.call(arguments,1);return function(){var K=V.slice();return K.push.apply(K,arguments),f.apply(this,K)}}function w(f,L){function V(){}V.prototype=L.prototype,f.aa=L.prototype,f.prototype=new V,f.prototype.constructor=f,f.Qb=function(K,le,me){for(var Ae=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Ae[dt-2]=arguments[dt];return L.prototype[le].apply(K,Ae)}}function S(f){const L=f.length;if(0<L){const V=Array(L);for(let K=0;K<L;K++)V[K]=f[K];return V}return[]}function T(f,L){for(let V=1;V<arguments.length;V++){const K=arguments[V];if(h(K)){const le=f.length||0,me=K.length||0;f.length=le+me;for(let Ae=0;Ae<me;Ae++)f[le+Ae]=K[Ae]}else f.push(K)}}class E{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function b(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function I(f){return I[" "](f),f}I[" "]=function(){};var F=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function U(f,L,V){for(const K in f)L.call(V,f[K],K,f)}function P(f,L){for(const V in f)L.call(void 0,f[V],V,f)}function _(f){const L={};for(const V in f)L[V]=f[V];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,L){let V,K;for(let le=1;le<arguments.length;le++){K=arguments[le];for(V in K)f[V]=K[V];for(let me=0;me<A.length;me++)V=A[me],Object.prototype.hasOwnProperty.call(K,V)&&(f[V]=K[V])}}function x(f){var L=1;f=f.split(":");const V=[];for(;0<L&&f.length;)V.push(f.shift()),L--;return f.length&&V.push(f.join(":")),V}function O(f){c.setTimeout(()=>{throw f},0)}function D(){var f=G;let L=null;return f.g&&(L=f.g,f.g=f.g.next,f.g||(f.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const K=J.get();K.set(L,V),this.h?this.h.next=K:this.g=K,this.h=K}}var J=new E(()=>new se,f=>f.reset());class se{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,re=!1,G=new $,W=()=>{const f=c.Promise.resolve(void 0);Z=()=>{f.then(M)}};var M=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(V){O(V)}var L=J;L.j(f),100>L.h&&(L.h++,f.next=L.g,L.g=f)}re=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(f,L){this.type=f,this.g=this.target=L,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,L=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const V=()=>{};c.addEventListener("test",V,L),c.removeEventListener("test",V,L)}catch{}return f}();function X(f,L){if(z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var V=this.type=f.type,K=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=L,L=f.relatedTarget){if(F){e:{try{I(L.nodeName);var le=!0;break e}catch{}le=!1}le||(L=null)}}else V=="mouseover"?L=f.fromElement:V=="mouseout"&&(L=f.toElement);this.relatedTarget=L,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:H[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&X.aa.h.call(this)}}w(X,z);var H={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ie(f,L,V,K,le){this.listener=f,this.proxy=null,this.src=L,this.type=V,this.capture=!!K,this.ha=le,this.key=++ne,this.da=this.fa=!1}function fe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ve(f){this.src=f,this.g={},this.h=0}ve.prototype.add=function(f,L,V,K,le){var me=f.toString();f=this.g[me],f||(f=this.g[me]=[],this.h++);var Ae=xe(f,L,K,le);return-1<Ae?(L=f[Ae],V||(L.fa=!1)):(L=new ie(L,this.src,me,!!K,le),L.fa=V,f.push(L)),L};function ke(f,L){var V=L.type;if(V in f.g){var K=f.g[V],le=Array.prototype.indexOf.call(K,L,void 0),me;(me=0<=le)&&Array.prototype.splice.call(K,le,1),me&&(fe(L),f.g[V].length==0&&(delete f.g[V],f.h--))}}function xe(f,L,V,K){for(var le=0;le<f.length;++le){var me=f[le];if(!me.da&&me.listener==L&&me.capture==!!V&&me.ha==K)return le}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),De={};function Ue(f,L,V,K,le){if(Array.isArray(L)){for(var me=0;me<L.length;me++)Ue(f,L[me],V,K,le);return null}return V=Be(V),f&&f[Y]?f.K(L,V,d(K)?!!K.capture:!1,le):tt(f,L,V,!1,K,le)}function tt(f,L,V,K,le,me){if(!L)throw Error("Invalid event type");var Ae=d(le)?!!le.capture:!!le,dt=$e(f);if(dt||(f[Pe]=dt=new ve(f)),V=dt.add(L,V,K,Ae,me),V.proxy)return V;if(K=ce(),V.proxy=K,K.src=f,K.listener=V,f.addEventListener)ee||(le=Ae),le===void 0&&(le=!1),f.addEventListener(L.toString(),K,le);else if(f.attachEvent)f.attachEvent(be(L.toString()),K);else if(f.addListener&&f.removeListener)f.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ce(){function f(V){return L.call(f.src,f.listener,V)}const L=ge;return f}function de(f,L,V,K,le){if(Array.isArray(L))for(var me=0;me<L.length;me++)de(f,L[me],V,K,le);else K=d(K)?!!K.capture:!!K,V=Be(V),f&&f[Y]?(f=f.i,L=String(L).toString(),L in f.g&&(me=f.g[L],V=xe(me,V,K,le),-1<V&&(fe(me[V]),Array.prototype.splice.call(me,V,1),me.length==0&&(delete f.g[L],f.h--)))):f&&(f=$e(f))&&(L=f.g[L.toString()],f=-1,L&&(f=xe(L,V,K,le)),(V=-1<f?L[f]:null)&&Ee(V))}function Ee(f){if(typeof f!="number"&&f&&!f.da){var L=f.src;if(L&&L[Y])ke(L.i,f);else{var V=f.type,K=f.proxy;L.removeEventListener?L.removeEventListener(V,K,f.capture):L.detachEvent?L.detachEvent(be(V),K):L.addListener&&L.removeListener&&L.removeListener(K),(V=$e(L))?(ke(V,f),V.h==0&&(V.src=null,L[Pe]=null)):fe(f)}}}function be(f){return f in De?De[f]:De[f]="on"+f}function ge(f,L){if(f.da)f=!0;else{L=new X(L,this);var V=f.listener,K=f.ha||f.src;f.fa&&Ee(f),f=V.call(K,L)}return f}function $e(f){return f=f[Pe],f instanceof ve?f:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(f){return typeof f=="function"?f:(f[Me]||(f[Me]=function(L){return f.handleEvent(L)}),f[Me])}function We(){B.call(this),this.i=new ve(this),this.M=this,this.F=null}w(We,B),We.prototype[Y]=!0,We.prototype.removeEventListener=function(f,L,V,K){de(this,f,L,V,K)};function Ze(f,L){var V,K=f.F;if(K)for(V=[];K;K=K.F)V.push(K);if(f=f.M,K=L.type||L,typeof L=="string")L=new z(L,f);else if(L instanceof z)L.target=L.target||f;else{var le=L;L=new z(K,f),k(L,le)}if(le=!0,V)for(var me=V.length-1;0<=me;me--){var Ae=L.g=V[me];le=et(Ae,K,!0,L)&&le}if(Ae=L.g=f,le=et(Ae,K,!0,L)&&le,le=et(Ae,K,!1,L)&&le,V)for(me=0;me<V.length;me++)Ae=L.g=V[me],le=et(Ae,K,!1,L)&&le}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var f=this.i,L;for(L in f.g){for(var V=f.g[L],K=0;K<V.length;K++)fe(V[K]);delete f.g[L],f.h--}}this.F=null},We.prototype.K=function(f,L,V,K){return this.i.add(String(f),L,!1,V,K)},We.prototype.L=function(f,L,V,K){return this.i.add(String(f),L,!0,V,K)};function et(f,L,V,K){if(L=f.i.g[String(L)],!L)return!0;L=L.concat();for(var le=!0,me=0;me<L.length;++me){var Ae=L[me];if(Ae&&!Ae.da&&Ae.capture==V){var dt=Ae.listener,Ut=Ae.ha||Ae.src;Ae.fa&&ke(f.i,Ae),le=dt.call(Ut,K)!==!1&&le}}return le&&!K.defaultPrevented}function nr(f,L,V){if(typeof f=="function")V&&(f=p(f,V));else if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:c.setTimeout(f,L||0)}function ct(f){f.g=nr(()=>{f.g=null,f.i&&(f.i=!1,ct(f))},f.l);const L=f.h;f.h=null,f.m.apply(null,L)}class Ct extends B{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(f){B.call(this),this.h=f,this.g={}}w($t,B);var rr=[];function Ti(f){U(f.g,function(L,V){this.g.hasOwnProperty(V)&&Ee(L)},f),f.g={}}$t.prototype.N=function(){$t.aa.N.call(this),Ti(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=c.JSON.stringify,Ea=c.JSON.parse,Ta=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function vs(){}vs.prototype.h=null;function io(f){return f.h||(f.h=f.i())}function so(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cr(){z.call(this,"d")}w(Cr,z);function oo(){z.call(this,"c")}w(oo,z);var Ir={},Sa=null;function _s(){return Sa=Sa||new We}Ir.La="serverreachability";function Ca(f){z.call(this,Ir.La,f)}w(Ca,z);function Kr(f){const L=_s();Ze(L,new Ca(L))}Ir.STAT_EVENT="statevent";function Ia(f,L){z.call(this,Ir.STAT_EVENT,f),this.stat=L}w(Ia,z);function Ot(f){const L=_s();Ze(L,new Ia(L,f))}Ir.Ma="timingevent";function ao(f,L){z.call(this,Ir.Ma,f),this.size=L}w(ao,z);function ir(f,L){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},L)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function Es(f,L,V,K,le,me){f.info(function(){if(f.g)if(me)for(var Ae="",dt=me.split("&"),Ut=0;Ut<dt.length;Ut++){var at=dt[Ut].split("=");if(1<at.length){var Wt=at[0];at=at[1];var jt=Wt.split("_");Ae=2<=jt.length&&jt[1]=="type"?Ae+(Wt+"="+at+"&"):Ae+(Wt+"=redacted&")}}else Ae=null;else Ae=me;return"XMLHTTP REQ ("+K+") [attempt "+le+"]: "+L+`
`+V+`
`+Ae})}function lo(f,L,V,K,le,me,Ae){f.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+le+"]: "+L+`
`+V+`
`+me+" "+Ae})}function sr(f,L,V,K){f.info(function(){return"XMLHTTP TEXT ("+L+"): "+Wh(f,V)+(K?" "+K:"")})}function ba(f,L){f.info(function(){return"TIMEOUT: "+L})}ws.prototype.info=function(){};function Wh(f,L){if(!f.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(f=0;f<V.length;f++)if(Array.isArray(V[f])){var K=V[f];if(!(2>K.length)){var le=K[1];if(Array.isArray(le)&&!(1>le.length)){var me=le[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Ae=1;Ae<le.length;Ae++)le[Ae]=""}}}}return wa(V)}catch{return L}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},or;function Ts(){}w(Ts,vs),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},or=new Ts;function ar(f,L,V,K){this.j=f,this.i=L,this.l=V,this.R=K||1,this.U=new $t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eu}function eu(){this.i=null,this.g="",this.h=!1}var Aa={},co={};function ho(f,L,V){f.L=1,f.v=Ai(Ln(L)),f.m=V,f.P=!0,ka(f,null)}function ka(f,L){f.F=Date.now(),gt(f),f.A=Ln(f.v);var V=f.A,K=f.R;Array.isArray(K)||(K=[String(K)]),xi(V.i,"t",K),f.C=0,V=f.j.J,f.h=new eu,f.g=vu(f.j,V?L:null,!f.m),0<f.O&&(f.M=new Ct(p(f.Y,f,f.g),f.O)),L=f.U,V=f.g,K=f.ca;var le="readystatechange";Array.isArray(le)||(le&&(rr[0]=le.toString()),le=rr);for(var me=0;me<le.length;me++){var Ae=Ue(V,le[me],K||L.handleEvent,!1,L.h||L);if(!Ae)break;L.g[Ae.key]=Ae}L=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,L)):(f.u="GET",f.g.ea(f.A,f.u,null,L)),Kr(),Es(f.i,f.u,f.A,f.l,f.R,f.m)}ar.prototype.ca=function(f){f=f.target;const L=this.M;L&&Cn(f)==3?L.j():this.Y(f)},ar.prototype.Y=function(f){try{if(f==this.g)e:{const jt=Cn(this.g);var L=this.g.Ba();const Kn=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||La(this.g)))){this.J||jt!=4||L==7||(L==8||0>=Kn?Kr(3):Kr(2)),Ss(this);var V=this.g.Z();this.X=V;t:if(tu(this)){var K=La(this.g);f="";var le=K.length,me=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),Si(this);var Ae="";break t}this.h.i=new c.TextDecoder}for(L=0;L<le;L++)this.h.h=!0,f+=this.h.i.decode(K[L],{stream:!(me&&L==le-1)});K.length=0,this.h.g+=f,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=V==200,lo(this.i,this.u,this.A,this.l,this.R,jt,V),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,Ut=this.g;if((dt=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(dt)){var at=dt;break t}}at=null}if(V=at)sr(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xa(this,V);else{this.o=!1,this.s=3,Ot(12),$n(this),Si(this);break e}}if(this.P){V=!0;let jn;for(;!this.J&&this.C<Ae.length;)if(jn=Kh(this,Ae),jn==co){jt==4&&(this.s=4,Ot(14),V=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Aa){this.s=4,Ot(15),sr(this.i,this.l,Ae,"[Invalid Chunk]"),V=!1;break}else sr(this.i,this.l,jn,null),xa(this,jn);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||Ae.length!=0||this.h.h||(this.s=1,Ot(16),V=!1),this.o=this.o&&V,!V)sr(this.i,this.l,Ae,"[Invalid Chunked Response]"),$n(this),Si(this);else if(0<Ae.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),ja(Wt),Wt.M=!0,Ot(11))}}else sr(this.i,this.l,Ae,null),xa(this,Ae);jt==4&&$n(this),this.o&&!this.J&&(jt==4?So(this.j,this):(this.o=!1,gt(this)))}else vo(this.g),V==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),$n(this),Si(this)}}}catch{}finally{}};function tu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Kh(f,L){var V=f.C,K=L.indexOf(`
`,V);return K==-1?co:(V=Number(L.substring(V,K)),isNaN(V)?Aa:(K+=1,K+V>L.length?co:(L=L.slice(K,K+V),f.C=K+V,L)))}ar.prototype.cancel=function(){this.J=!0,$n(this)};function gt(f){f.S=Date.now()+f.I,nu(f,f.I)}function nu(f,L){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ir(p(f.ba,f),L)}function Ss(f){f.B&&(c.clearTimeout(f.B),f.B=null)}ar.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ba(this.i,this.A),this.L!=2&&(Kr(),Ot(17)),$n(this),this.s=2,Si(this)):nu(this,this.S-f)};function Si(f){f.j.G==0||f.J||So(f.j,f)}function $n(f){Ss(f);var L=f.M;L&&typeof L.ma=="function"&&L.ma(),f.M=null,Ti(f.U),f.g&&(L=f.g,f.g=null,L.abort(),L.ma())}function xa(f,L){try{var V=f.j;if(V.G!=0&&(V.g==f||mn(V.h,f))){if(!f.K&&mn(V.h,f)&&V.G==3){try{var K=V.Da.g.parse(L)}catch{K=null}if(Array.isArray(K)&&K.length==3){var le=K;if(le[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<f.F)To(V),fr(V);else break e;Eo(V),Ot(18)}}else V.za=le[1],0<V.za-V.T&&37500>le[2]&&V.F&&V.v==0&&!V.C&&(V.C=ir(p(V.Za,V),6e3));if(1>=iu(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Xr(V,11)}else if((f.K||V.g==f)&&To(V),!b(L))for(le=V.Da.g.parse(L),L=0;L<le.length;L++){let at=le[L];if(V.T=at[0],at=at[1],V.G==2)if(at[0]=="c"){V.K=at[1],V.ia=at[2];const Wt=at[3];Wt!=null&&(V.la=Wt,V.j.info("VER="+V.la));const jt=at[4];jt!=null&&(V.Aa=jt,V.j.info("SVER="+V.Aa));const Kn=at[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(K=1.5*Kn,V.L=K,V.j.info("backChannelRequestTimeoutMs_="+K)),K=V;const jn=f.g;if(jn){const Rs=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var me=K.h;me.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Ra(me,me.h),me.h=null))}if(K.D){const Io=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(K.ya=Io,mt(K.I,K.D,Io))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-f.F,V.j.info("Handshake RTT: "+V.R+"ms")),K=V;var Ae=f;if(K.qa=yu(K,K.J?K.ia:null,K.W),Ae.K){su(K.h,Ae);var dt=Ae,Ut=K.L;Ut&&(dt.I=Ut),dt.B&&(Ss(dt),gt(dt)),K.g=Ae}else xs(K);0<V.i.length&&xr(V)}else at[0]!="stop"&&at[0]!="close"||Xr(V,7);else V.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Xr(V,7):Zt(V):at[0]!="noop"&&V.l&&V.l.ta(at),V.v=0)}}Kr(4)}catch{}}var ru=class{constructor(f,L){this.g=f,this.map=L}};function Cs(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function iu(f){return f.h?1:f.g?f.g.size:0}function mn(f,L){return f.h?f.h==L:f.g?f.g.has(L):!1}function Ra(f,L){f.g?f.g.add(L):f.h=L}function su(f,L){f.h&&f.h==L?f.h=null:f.g&&f.g.has(L)&&f.g.delete(L)}Cs.prototype.cancel=function(){if(this.i=ou(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ou(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let L=f.i;for(const V of f.g.values())L=L.concat(V.D);return L}return S(f.i)}function fo(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var L=[],V=f.length,K=0;K<V;K++)L.push(f[K]);return L}L=[],V=0;for(K in f)L[V++]=f[K];return L}function po(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var L=[];f=f.length;for(var V=0;V<f;V++)L.push(V);return L}L=[],V=0;for(const K in f)L[V++]=K;return L}}}function Ci(f,L){if(f.forEach&&typeof f.forEach=="function")f.forEach(L,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,L,void 0);else for(var V=po(f),K=fo(f),le=K.length,me=0;me<le;me++)L.call(void 0,K[me],V&&V[me],f)}var Is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(f,L){if(f){f=f.split("&");for(var V=0;V<f.length;V++){var K=f[V].indexOf("="),le=null;if(0<=K){var me=f[V].substring(0,K);le=f[V].substring(K+1)}else me=f[V];L(me,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Gr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Gr){this.h=f.h,bs(this,f.j),this.o=f.o,this.g=f.g,Ii(this,f.s),this.l=f.l;var L=f.i,V=new br;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),bi(this,V),this.m=f.m}else f&&(L=String(f).match(Is))?(this.h=!1,bs(this,L[1]||"",!0),this.o=ot(L[2]||""),this.g=ot(L[3]||"",!0),Ii(this,L[4]),this.l=ot(L[5]||"",!0),bi(this,L[6]||"",!0),this.m=ot(L[7]||"")):(this.h=!1,this.i=new br(null,this.h))}Gr.prototype.toString=function(){var f=[],L=this.j;L&&f.push(ki(L,mo,!0),":");var V=this.g;return(V||L=="file")&&(f.push("//"),(L=this.o)&&f.push(ki(L,mo,!0),"@"),f.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&f.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&f.push("/"),f.push(ki(V,V.charAt(0)=="/"?uu:lu,!0))),(V=this.i.toString())&&f.push("?",V),(V=this.m)&&f.push("#",ki(V,Pa)),f.join("")};function Ln(f){return new Gr(f)}function bs(f,L,V){f.j=V?ot(L,!0):L,f.j&&(f.j=f.j.replace(/:$/,""))}function Ii(f,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);f.s=L}else f.s=null}function bi(f,L,V){L instanceof br?(f.i=L,Ar(f.i,f.h)):(V||(L=ki(L,cu)),f.i=new br(L,f.h))}function mt(f,L,V){f.i.set(L,V)}function Ai(f){return mt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ot(f,L){return f?L?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ki(f,L,V){return typeof f=="string"?(f=encodeURI(f).replace(L,au),V&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function au(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var mo=/[#\/\?@]/g,lu=/[#\?:]/g,uu=/[#\?]/g,cu=/[#\?@]/g,Pa=/#/g;function br(f,L){this.h=this.g=null,this.i=f||null,this.j=!!L}function Xt(f){f.g||(f.g=new Map,f.h=0,f.i&&Gh(f.i,function(L,V){f.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}r=br.prototype,r.add=function(f,L){Xt(this),this.i=null,f=Wn(this,f);var V=this.g.get(f);return V||this.g.set(f,V=[]),V.push(L),this.h+=1,this};function lr(f,L){Xt(f),L=Wn(f,L),f.g.has(L)&&(f.i=null,f.h-=f.g.get(L).length,f.g.delete(L))}function ur(f,L){return Xt(f),L=Wn(f,L),f.g.has(L)}r.forEach=function(f,L){Xt(this),this.g.forEach(function(V,K){V.forEach(function(le){f.call(L,le,K,this)},this)},this)},r.na=function(){Xt(this);const f=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let K=0;K<L.length;K++){const le=f[K];for(let me=0;me<le.length;me++)V.push(L[K])}return V},r.V=function(f){Xt(this);let L=[];if(typeof f=="string")ur(this,f)&&(L=L.concat(this.g.get(Wn(this,f))));else{f=Array.from(this.g.values());for(let V=0;V<f.length;V++)L=L.concat(f[V])}return L},r.set=function(f,L){return Xt(this),this.i=null,f=Wn(this,f),ur(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[L]),this.h+=1,this},r.get=function(f,L){return f?(f=this.V(f),0<f.length?String(f[0]):L):L};function xi(f,L,V){lr(f,L),0<V.length&&(f.i=null,f.g.set(Wn(f,L),S(V)),f.h+=V.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var K=L[V];const me=encodeURIComponent(String(K)),Ae=this.V(K);for(K=0;K<Ae.length;K++){var le=me;Ae[K]!==""&&(le+="="+encodeURIComponent(String(Ae[K]))),f.push(le)}}return this.i=f.join("&")};function Wn(f,L){return L=String(L),f.j&&(L=L.toLowerCase()),L}function Ar(f,L){L&&!f.j&&(Xt(f),f.i=null,f.g.forEach(function(V,K){var le=K.toLowerCase();K!=le&&(lr(this,K),xi(this,le,V))},f)),f.j=L}function Jh(f,L){const V=new ws;if(c.Image){const K=new Image;K.onload=y(Sn,V,"TestLoadImage: loaded",!0,L,K),K.onerror=y(Sn,V,"TestLoadImage: error",!1,L,K),K.onabort=y(Sn,V,"TestLoadImage: abort",!1,L,K),K.ontimeout=y(Sn,V,"TestLoadImage: timeout",!1,L,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=f}else L(!1)}function hu(f,L){const V=new ws,K=new AbortController,le=setTimeout(()=>{K.abort(),Sn(V,"TestPingServer: timeout",!1,L)},1e4);fetch(f,{signal:K.signal}).then(me=>{clearTimeout(le),me.ok?Sn(V,"TestPingServer: ok",!0,L):Sn(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(le),Sn(V,"TestPingServer: error",!1,L)})}function Sn(f,L,V,K,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),K(V)}catch{}}function Qh(){this.g=new Ta}function fu(f,L,V){const K=V||"";try{Ci(f,function(le,me){let Ae=le;d(le)&&(Ae=wa(le)),L.push(K+me+"="+encodeURIComponent(Ae))})}catch(le){throw L.push(K+"type="+encodeURIComponent("_badmap")),le}}function Jr(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Jr,vs),Jr.prototype.g=function(){return new As(this.l,this.j)},Jr.prototype.i=function(f){return function(){return f}}({});function As(f,L){We.call(this),this.D=f,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(As,We),r=As.prototype,r.open=function(f,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=L,this.readyState=1,hr(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(L.body=f),(this.D||c).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var L=f.value?f.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!f.done}))&&(this.response=this.responseText+=L)}f.done?cr(this):hr(this),this.readyState==3&&du(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,cr(this))},r.Qa=function(f){this.g&&(this.response=f,cr(this))},r.ga=function(){this.g&&cr(this)};function cr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,hr(f)}r.setRequestHeader=function(f,L){this.u.append(f,L)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,f.push(V[0]+": "+V[1]),V=L.next();return f.join(`\r
`)};function hr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(As.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Qr(f){let L="";return U(f,function(V,K){L+=K,L+=":",L+=V,L+=`\r
`}),L}function Ri(f,L,V){e:{for(K in V){var K=!1;break e}K=!0}K||(V=Qr(V),typeof f=="string"?V!=null&&encodeURIComponent(String(V)):mt(f,L,V))}function Tt(f){We.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Tt,We);var Yh=/^https?$/i,Oa=["POST","PUT"];r=Tt.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,L,V,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);L=L?L.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():or.g(),this.v=this.o?io(this.o):io(or),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(L,String(f),!0),this.B=!1}catch(me){ks(this,me);return}if(f=V||"",V=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var le in K)V.set(le,K[le]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const me of K.keys())V.set(me,K.get(me));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(V.keys()).find(me=>me.toLowerCase()=="content-type"),le=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Oa,L,void 0))||K||le||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ae]of V)this.g.setRequestHeader(me,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yo(this),this.u=!0,this.g.send(f),this.u=!1}catch(me){ks(this,me)}};function ks(f,L){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=L,f.m=5,go(f),Dn(f)}function go(f){f.A||(f.A=!0,Ze(f,"complete"),Ze(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ze(this,"complete"),Ze(this,"abort"),Dn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dn(this,!0)),Tt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Na(this):this.bb())},r.bb=function(){Na(this)};function Na(f){if(f.h&&typeof l<"u"&&(!f.v[1]||Cn(f)!=4||f.Z()!=2)){if(f.u&&Cn(f)==4)nr(f.Ea,0,f);else if(Ze(f,"readystatechange"),Cn(f)==4){f.h=!1;try{const Ae=f.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var K;if(K=Ae===0){var le=String(f.D).match(Is)[1]||null;!le&&c.self&&c.self.location&&(le=c.self.location.protocol.slice(0,-1)),K=!Yh.test(le?le.toLowerCase():"")}V=K}if(V)Ze(f,"complete"),Ze(f,"success");else{f.m=6;try{var me=2<Cn(f)?f.g.statusText:""}catch{me=""}f.l=me+" ["+f.Z()+"]",go(f)}}finally{Dn(f)}}}}function Dn(f,L){if(f.g){yo(f);const V=f.g,K=f.v[0]?()=>{}:null;f.g=null,f.v=null,L||Ze(f,"ready");try{V.onreadystatechange=K}catch{}}}function yo(f){f.I&&(c.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function Cn(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var L=this.g.responseText;return f&&L.indexOf(f)==0&&(L=L.substring(f.length)),Ea(L)}};function La(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function vo(f){const L={};f=(f.g&&2<=Cn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<f.length;K++){if(b(f[K]))continue;var V=x(f[K]);const le=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const me=L[le]||[];L[le]=me,me.push(V)}P(L,function(K){return K.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(f,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[f]||L}function Da(f){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kr("baseRetryDelayMs",5e3,f),this.cb=kr("retryDelaySeedMs",1e4,f),this.Wa=kr("forwardChannelMaxRetries",2,f),this.wa=kr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Cs(f&&f.concurrentRequestLimit),this.Da=new Qh,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Da.prototype,r.la=8,r.G=1,r.connect=function(f,L,V,K){Ot(0),this.W=f,this.H=L||{},V&&K!==void 0&&(this.H.OSID=V,this.H.OAID=K),this.F=this.X,this.I=yu(this,null,this.W),xr(this)};function Zt(f){if(_o(f),f.G==3){var L=f.U++,V=Ln(f.I);if(mt(V,"SID",f.K),mt(V,"RID",L),mt(V,"TYPE","terminate"),Yr(f,V),L=new ar(f,f.j,L),L.L=2,L.v=Ai(Ln(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=L.v,V=!0),V||(L.g=vu(L.j,null),L.g.ea(L.v)),L.F=Date.now(),gt(L)}gu(f)}function fr(f){f.g&&(ja(f),f.g.cancel(),f.g=null)}function _o(f){fr(f),f.u&&(c.clearTimeout(f.u),f.u=null),To(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function xr(f){if(!Nn(f.h)&&!f.s){f.s=!0;var L=f.Ga;Z||W(),re||(Z(),re=!0),G.add(L,f),f.B=0}}function Xh(f,L){return iu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=L.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ir(p(f.Ga,f,L),mu(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const le=new ar(this,this.j,f);let me=this.o;if(this.S&&(me?(me=_(me),k(me,this.S)):me=this.S),this.m!==null||this.O||(le.H=me,me=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var K=this.i[V];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(L+=K,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=Pi(this,le,L),V=Ln(this.I),mt(V,"RID",f),mt(V,"CVER",22),this.D&&mt(V,"X-HTTP-Session-Id",this.D),Yr(this,V),me&&(this.O?L="headers="+encodeURIComponent(String(Qr(me)))+"&"+L:this.m&&Ri(V,this.m,me)),Ra(this.h,le),this.Ua&&mt(V,"TYPE","init"),this.P?(mt(V,"$req",L),mt(V,"SID","null"),le.T=!0,ho(le,V,null)):ho(le,V,L),this.G=2}}else this.G==3&&(f?wo(this,f):this.i.length==0||Nn(this.h)||wo(this))};function wo(f,L){var V;L?V=L.l:V=f.U++;const K=Ln(f.I);mt(K,"SID",f.K),mt(K,"RID",V),mt(K,"AID",f.T),Yr(f,K),f.m&&f.o&&Ri(K,f.m,f.o),V=new ar(f,f.j,V,f.B+1),f.m===null&&(V.H=f.o),L&&(f.i=L.D.concat(f.i)),L=Pi(f,V,1e3),V.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ra(f.h,V),ho(V,K,L)}function Yr(f,L){f.H&&U(f.H,function(V,K){mt(L,K,V)}),f.l&&Ci({},function(V,K){mt(L,K,V)})}function Pi(f,L,V){V=Math.min(f.i.length,V);var K=f.l?p(f.l.Na,f.l,f):null;e:{var le=f.i;let me=-1;for(;;){const Ae=["count="+V];me==-1?0<V?(me=le[0].g,Ae.push("ofs="+me)):me=0:Ae.push("ofs="+me);let dt=!0;for(let Ut=0;Ut<V;Ut++){let at=le[Ut].g;const Wt=le[Ut].map;if(at-=me,0>at)me=Math.max(0,le[Ut].g-100),dt=!1;else try{fu(Wt,Ae,"req"+at+"_")}catch{K&&K(Wt)}}if(dt){K=Ae.join("&");break e}}}return f=f.i.splice(0,V),L.D=f,K}function xs(f){if(!f.g&&!f.u){f.Y=1;var L=f.Fa;Z||W(),re||(Z(),re=!0),G.add(L,f),f.v=0}}function Eo(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ir(p(f.Fa,f),mu(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ir(p(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),fr(this),pu(this))};function ja(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function pu(f){f.g=new ar(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var L=Ln(f.qa);mt(L,"RID","rpc"),mt(L,"SID",f.K),mt(L,"AID",f.T),mt(L,"CI",f.F?"0":"1"),!f.F&&f.ja&&mt(L,"TO",f.ja),mt(L,"TYPE","xmlhttp"),Yr(f,L),f.m&&f.o&&Ri(L,f.m,f.o),f.L&&(f.g.I=f.L);var V=f.g;f=f.ia,V.L=1,V.v=Ai(Ln(L)),V.m=null,V.P=!0,ka(V,f)}r.Za=function(){this.C!=null&&(this.C=null,fr(this),Eo(this),Ot(19))};function To(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function So(f,L){var V=null;if(f.g==L){To(f),ja(f),f.g=null;var K=2}else if(mn(f.h,L))V=L.D,su(f.h,L),K=1;else return;if(f.G!=0){if(L.o)if(K==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var le=f.B;K=_s(),Ze(K,new ao(K,V)),xr(f)}else xs(f);else if(le=L.s,le==3||le==0&&0<L.X||!(K==1&&Xh(f,L)||K==2&&Eo(f)))switch(V&&0<V.length&&(L=f.h,L.i=L.i.concat(V)),le){case 1:Xr(f,5);break;case 4:Xr(f,10);break;case 3:Xr(f,6);break;default:Xr(f,2)}}}function mu(f,L){let V=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(V*=2),V*L}function Xr(f,L){if(f.j.info("Error code "+L),L==2){var V=p(f.fb,f),K=f.Xa;const le=!K;K=new Gr(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bs(K,"https"),Ai(K),le?Jh(K.toString(),V):hu(K.toString(),V)}else Ot(2);f.G=0,f.l&&f.l.sa(L),gu(f),_o(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function gu(f){if(f.G=0,f.ka=[],f.l){const L=ou(f.h);(L.length!=0||f.i.length!=0)&&(T(f.ka,L),T(f.ka,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.ra()}}function yu(f,L,V){var K=V instanceof Gr?Ln(V):new Gr(V);if(K.g!="")L&&(K.g=L+"."+K.g),Ii(K,K.s);else{var le=c.location;K=le.protocol,L=L?L+"."+le.hostname:le.hostname,le=+le.port;var me=new Gr(null);K&&bs(me,K),L&&(me.g=L),le&&Ii(me,le),V&&(me.l=V),K=me}return V=f.D,L=f.ya,V&&L&&mt(K,V,L),mt(K,"VER",f.la),Yr(f,K),K}function vu(f,L,V){if(L&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=f.Ca&&!f.pa?new Tt(new Jr({eb:V})):new Tt(f.pa),L.Ha(f.J),L}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ma(){}r=Ma.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Co(){}Co.prototype.g=function(f,L){return new gn(f,L)};function gn(f,L){We.call(this),this.g=new Da(L),this.l=f,this.h=L&&L.messageUrlParams||null,f=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(f?f["X-WebChannel-Content-Type"]=L.messageContentType:f={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(f?f["X-WebChannel-Client-Profile"]=L.va:f={"X-WebChannel-Client-Profile":L.va}),this.g.S=f,(f=L&&L.Sb)&&!b(f)&&(this.g.m=f),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!b(L)&&(this.g.D=L,f=this.h,f!==null&&L in f&&(f=this.h,L in f&&delete f[L])),this.j=new Rr(this)}w(gn,We),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Zt(this.g)},gn.prototype.o=function(f){var L=this.g;if(typeof f=="string"){var V={};V.__data__=f,f=V}else this.u&&(V={},V.__data__=wa(f),f=V);L.i.push(new ru(L.Ya++,f)),L.G==3&&xr(L)},gn.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,gn.aa.N.call(this)};function _u(f){Cr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var L=f.__sm__;if(L){e:{for(const V in L){f=V;break e}f=void 0}(this.i=f)&&(f=this.i,L=L!==null&&f in L?L[f]:void 0),this.data=L}else this.data=f}w(_u,Cr);function wu(){oo.call(this),this.status=1}w(wu,oo);function Rr(f){this.g=f}w(Rr,Ma),Rr.prototype.ua=function(){Ze(this.g,"a")},Rr.prototype.ta=function(f){Ze(this.g,new _u(f))},Rr.prototype.sa=function(f){Ze(this.g,new wu)},Rr.prototype.ra=function(){Ze(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,L1=function(){return new Co},N1=function(){return _s()},O1=Ir,Im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,Cc=uo,Zl.COMPLETE="complete",P1=Zl,so.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",We.prototype.listen=We.prototype.K,dl=so,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,R1=Tt}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const z_="@firebase/firestore",H_="4.7.12";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="11.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new eg("@firebase/firestore");function Wo(){return Gs.logLevel}function Oe(r,...e){if(Gs.logLevel<=it.DEBUG){const t=e.map(rg);Gs.debug(`Firestore (${ua}): ${r}`,...t)}}function pi(r,...e){if(Gs.logLevel<=it.ERROR){const t=e.map(rg);Gs.error(`Firestore (${ua}): ${r}`,...t)}}function ea(r,...e){if(Gs.logLevel<=it.WARN){const t=e.map(rg);Gs.warn(`Firestore (${ua}): ${r}`,...t)}}function rg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,D1(r,n,t)}function D1(r,e,t){let n=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw pi(n),new Error(n)}function ft(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||D1(e,i,n)}function Qe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class QA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YA{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let a=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ui,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ui)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ft(typeof n.accessToken=="string",31837,{l:n}),new j1(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class XA{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZA{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ek{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const n=a=>{a.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=tk(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function nt(r,e){return r<e?-1:r>e?1:0}function bm(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),i=e.codePointAt(t);if(n!==i){if(n<128&&i<128)return nt(n,i);{const a=M1(),l=nk(a.encode(W_(r,t)),a.encode(W_(e,t)));return l!==0?l:nt(n,i)}}t+=n>65535?2:1}return nt(r.length,e.length)}function W_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function nk(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return nt(r[t],e[t]);return nt(r.length,e.length)}function ta(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=-62135596800,G_=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*G_);return new Dt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<K_)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G_}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-K_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Dt(0,0))}static max(){return new Ye(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__name__";class Dr{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ge(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=Dr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return nt(e.length,t.length)}static compareSegments(e,t){const n=Dr.isNumericId(e),i=Dr.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):bm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class Et extends Dr{construct(e,t,n){return new Et(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Dr{construct(e,t,n){return new rn(e,t,n)}static isValidIdentifier(e){return rk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J_}static keyField(){return new rn([J_])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(n+=c,i++):(a(),i++)}if(a(),l)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Et.fromString(e))}static fromName(e){return new qe(Et.fromString(e).popFirst(5))}static empty(){return new qe(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function ik(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(n===1e9?new Dt(t+1,0):new Dt(t,n));return new os(i,qe.empty(),e)}function sk(r){return new os(r.readTime,r.key,bl)}class os{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new os(Ye.min(),qe.empty(),bl)}static max(){return new os(Ye.max(),qe.empty(),bl)}}function ok(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(r.documentKey,e.documentKey),t!==0?t:nt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(r){if(r.code!==_e.FAILED_PRECONDITION||r.message!==ak)throw r;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):we.reject(t)}static resolve(e){return new we((t,n)=>{t(e)})}static reject(e){return new we((t,n)=>{n(e)})}static waitFor(e){return new we((t,n)=>{let i=0,a=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++a,l&&a===i&&t()},h=>n(h))}),l=!0,a===i&&t()})}static or(e){let t=we.resolve(!1);for(const n of e)t=t.next(i=>i?we.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,a)=>{n.push(t.call(this,i,a))}),this.waitFor(n)}static mapArray(e,t){return new we((n,i)=>{const a=e.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const d=h;t(e[d]).next(v=>{l[d]=v,++c,c===a&&n(l)},v=>i(v))}})}static doWhile(e,t){return new we((n,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):n()};a()})}}function uk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ha(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>t.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}hh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=-1;function fh(r){return r==null}function Bc(r){return r===0&&1/r==-1/0}function ck(r){return typeof r=="number"&&Number.isInteger(r)&&!Bc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="";function hk(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Q_(e)),e=fk(r.get(t),e);return Q_(e)}function fk(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case V1:t+="";break;default:t+=a}}return t}function Q_(r){return r+V1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ds(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function dk(r,e){const t=[];for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.push(e(r[n],n,r));return t}function U1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??nn.RED,this.left=i??nn.EMPTY,this.right=a??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new nn(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return nn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,n,i,a){return this}insert(e,t,n){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(e){return new X_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class X_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new Ht(rn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new B1("Invalid base64 string: "+a):a}}(e);return new on(t)}static fromUint8Array(e){const t=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const pk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(r){if(ft(!!r,39018),typeof r=="string"){let e=0;const t=pk.exec(r);if(ft(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Lt(r.seconds),nanos:Lt(r.nanos)}}function Lt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ls(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="server_timestamp",z1="__type__",H1="__previous_value__",$1="__local_write_time__";function sg(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[z1])===null||t===void 0?void 0:t.stringValue)===q1}function dh(r){const e=r.mapValue.fields[H1];return sg(e)?dh(e):e}function Al(r){const e=as(r.mapValue.fields[$1].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,n,i,a,l,c,h,d,v){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=v}}const qc="(default)";class kl{constructor(e,t){this.projectId=e,this.database=t||qc}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===qc}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="__type__",gk="__max__",yc={mapValue:{}},K1="__vector__",zc="value";function us(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?sg(r)?4:vk(r)?9007199254740991:yk(r)?10:11:Ge(28295,{value:r})}function qr(r,e){if(r===e)return!0;const t=us(r);if(t!==us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Al(r).isEqual(Al(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=as(i.timestampValue),c=as(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,a){return ls(i.bytesValue).isEqual(ls(a.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,a){return Lt(i.geoPointValue.latitude)===Lt(a.geoPointValue.latitude)&&Lt(i.geoPointValue.longitude)===Lt(a.geoPointValue.longitude)}(r,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Lt(i.integerValue)===Lt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Lt(i.doubleValue),c=Lt(a.doubleValue);return l===c?Bc(l)===Bc(c):isNaN(l)&&isNaN(c)}return!1}(r,e);case 9:return ta(r.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Y_(l)!==Y_(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!qr(l[h],c[h])))return!1;return!0}(r,e);default:return Ge(52216,{left:r})}}function xl(r,e){return(r.values||[]).find(t=>qr(t,e))!==void 0}function na(r,e){if(r===e)return 0;const t=us(r),n=us(e);if(t!==n)return nt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return nt(r.booleanValue,e.booleanValue);case 2:return function(a,l){const c=Lt(a.integerValue||a.doubleValue),h=Lt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(r,e);case 3:return Z_(r.timestampValue,e.timestampValue);case 4:return Z_(Al(r),Al(e));case 5:return bm(r.stringValue,e.stringValue);case 6:return function(a,l){const c=ls(a),h=ls(l);return c.compareTo(h)}(r.bytesValue,e.bytesValue);case 7:return function(a,l){const c=a.split("/"),h=l.split("/");for(let d=0;d<c.length&&d<h.length;d++){const v=nt(c[d],h[d]);if(v!==0)return v}return nt(c.length,h.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,l){const c=nt(Lt(a.latitude),Lt(l.latitude));return c!==0?c:nt(Lt(a.longitude),Lt(l.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return e0(r.arrayValue,e.arrayValue);case 10:return function(a,l){var c,h,d,v;const g=a.fields||{},p=l.fields||{},y=(c=g[zc])===null||c===void 0?void 0:c.arrayValue,w=(h=p[zc])===null||h===void 0?void 0:h.arrayValue,S=nt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((v=w==null?void 0:w.values)===null||v===void 0?void 0:v.length)||0);return S!==0?S:e0(y,w)}(r.mapValue,e.mapValue);case 11:return function(a,l){if(a===yc.mapValue&&l===yc.mapValue)return 0;if(a===yc.mapValue)return 1;if(l===yc.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),d=l.fields||{},v=Object.keys(d);h.sort(),v.sort();for(let g=0;g<h.length&&g<v.length;++g){const p=bm(h[g],v[g]);if(p!==0)return p;const y=na(c[h[g]],d[v[g]]);if(y!==0)return y}return nt(h.length,v.length)}(r.mapValue,e.mapValue);default:throw Ge(23264,{Pe:t})}}function Z_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return nt(r,e);const t=as(r),n=as(e),i=nt(t.seconds,n.seconds);return i!==0?i:nt(t.nanos,n.nanos)}function e0(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=na(t[i],n[i]);if(a)return a}return nt(t.length,n.length)}function ra(r){return Am(r)}function Am(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=as(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ls(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return qe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=Am(a);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of n)a?a=!1:i+=",",i+=`${l}:${Am(t.fields[l])}`;return i+"}"}(r.mapValue):Ge(61005,{value:r})}function Ic(r){switch(us(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dh(r);return e?16+Ic(e):16;case 5:return 2*r.stringValue.length;case 6:return ls(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+Ic(a),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return ds(n.fields,(a,l)=>{i+=a.length+Ic(l)}),i}(r.mapValue);default:throw Ge(13486,{value:r})}}function t0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function km(r){return!!r&&"integerValue"in r}function og(r){return!!r&&"arrayValue"in r}function n0(r){return!!r&&"nullValue"in r}function r0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function bc(r){return!!r&&"mapValue"in r}function yk(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[W1])===null||t===void 0?void 0:t.stringValue)===K1}function _l(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ds(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=_l(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_l(r.arrayValue.values[t]);return e}return Object.assign({},r)}function vk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===gk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!bc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(t)}setAll(e){let t=rn.emptyPath(),n={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,n,i),n={},i=[],t=c.popLast()}l?n[c.lastSegment()]=_l(l):i.push(c.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];bc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){ds(t,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new On(_l(this.value))}}function G1(r){const e=[];return ds(r.fields,(t,n)=>{const i=new rn([t]);if(bc(n)){const a=G1(n.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,n,i,a,l,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new dn(e,0,Ye.min(),Ye.min(),Ye.min(),On.empty(),0)}static newFoundDocument(e,t,n,i){return new dn(e,1,t,Ye.min(),n,i,0)}static newNoDocument(e,t){return new dn(e,2,t,Ye.min(),Ye.min(),On.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Ye.min(),Ye.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.position=e,this.inclusive=t}}function i0(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],l=r.position[i];if(a.field.isKeyField()?n=qe.comparator(qe.fromName(l.referenceValue),t.key):n=na(l,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function s0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!qr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function _k(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{}class Vt extends J1{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Ek(e,t,n):t==="array-contains"?new Ck(e,n):t==="in"?new Ik(e,n):t==="not-in"?new bk(e,n):t==="array-contains-any"?new Ak(e,n):new Vt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Tk(e,n):new Sk(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(na(t,this.value)):t!==null&&us(this.value)===us(t)&&this.matchesComparison(na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends J1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Tr(e,t)}matches(e){return Q1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Q1(r){return r.op==="and"}function Y1(r){return wk(r)&&Q1(r)}function wk(r){for(const e of r.filters)if(e instanceof Tr)return!1;return!0}function xm(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+ra(r.value);if(Y1(r))return r.filters.map(e=>xm(e)).join(",");{const e=r.filters.map(t=>xm(t)).join(",");return`${r.op}(${e})`}}function X1(r,e){return r instanceof Vt?function(n,i){return i instanceof Vt&&n.op===i.op&&n.field.isEqual(i.field)&&qr(n.value,i.value)}(r,e):r instanceof Tr?function(n,i){return i instanceof Tr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,l,c)=>a&&X1(l,i.filters[c]),!0):!1}(r,e):void Ge(19439)}function Z1(r){return r instanceof Vt?function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`}(r):r instanceof Tr?function(t){return t.op.toString()+" {"+t.getFilters().map(Z1).join(" ,")+"}"}(r):"Filter"}class Ek extends Vt{constructor(e,t,n){super(e,t,n),this.key=qe.fromName(n.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tk extends Vt{constructor(e,t){super(e,"in",t),this.keys=eT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sk extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=eT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eT(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>qe.fromName(n.referenceValue))}class Ck extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return og(t)&&xl(t.arrayValue,this.value)}}class Ik extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xl(this.value.arrayValue,t)}}class bk extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xl(this.value.arrayValue,t)}}class Ak extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!og(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>xl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t=null,n=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.Ie=null}}function o0(r,e=null,t=[],n=[],i=null,a=null,l=null){return new kk(r,e,t,n,i,a,l)}function ag(r){const e=Qe(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>xm(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>ra(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>ra(n)).join(",")),e.Ie=t}return e.Ie}function lg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!_k(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!X1(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!s0(r.startAt,e.startAt)&&s0(r.endAt,e.endAt)}function Rm(r){return qe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t=null,n=[],i=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function xk(r,e,t,n,i,a,l,c){return new fa(r,e,t,n,i,a,l,c)}function ug(r){return new fa(r)}function a0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function tT(r){return r.collectionGroup!==null}function wl(r){const e=Qe(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ht(rn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Rl(a,n))}),t.has(rn.keyField().canonicalString())||e.Ee.push(new Rl(rn.keyField(),n))}return e.Ee}function Fr(r){const e=Qe(r);return e.de||(e.de=nT(e,wl(r))),e.de}function Rk(r){const e=Qe(r);return e.Ae||(e.Ae=nT(e,r.explicitOrderBy)),e.Ae}function nT(r,e){if(r.limitType==="F")return o0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Rl(i.field,a)});const t=r.endAt?new Hc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Hc(r.startAt.position,r.startAt.inclusive):null;return o0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Pm(r,e){const t=r.filters.concat([e]);return new fa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function $c(r,e,t){return new fa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ph(r,e){return lg(Fr(r),Fr(e))&&r.limitType===e.limitType}function rT(r){return`${ag(Fr(r))}|lt:${r.limitType}`}function Ko(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>Z1(i)).join(", ")}]`),fh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ra(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ra(i)).join(",")),`Target(${n})`}(Fr(r))}; limitType=${r.limitType})`}function mh(r,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):qe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(r,e)&&function(n,i){for(const a of wl(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(l,c,h){const d=i0(l,c,h);return l.inclusive?d<=0:d<0}(n.startAt,wl(n),i)||n.endAt&&!function(l,c,h){const d=i0(l,c,h);return l.inclusive?d>=0:d>0}(n.endAt,wl(n),i))}(r,e)}function Pk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function iT(r){return(e,t)=>{let n=!1;for(const i of wl(r)){const a=Ok(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Ok(r,e,t){const n=r.field.isKeyField()?qe.comparator(e.key,t.key):function(a,l,c){const h=l.data.field(a),d=c.data.field(a);return h!==null&&d!==null?na(h,d):Ge(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ge(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(t,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return U1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new kt(qe.comparator);function mi(){return Nk}const sT=new kt(qe.comparator);function pl(...r){let e=sT;for(const t of r)e=e.insert(t.key,t);return e}function oT(r){let e=sT;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Hs(){return El()}function aT(){return El()}function El(){return new eo(r=>r.toString(),(r,e)=>r.isEqual(e))}const Lk=new kt(qe.comparator),Dk=new Ht(qe.comparator);function st(...r){let e=Dk;for(const t of r)e=e.add(t);return e}const jk=new Ht(nt);function Mk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function lT(r){return{integerValue:""+r}}function Fk(r,e){return ck(e)?lT(e):cg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this._=void 0}}function Vk(r,e,t){return r instanceof Pl?function(i,a){const l={fields:{[z1]:{stringValue:q1},[$1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&sg(a)&&(a=dh(a)),a&&(l.fields[H1]=a),{mapValue:l}}(t,e):r instanceof Ol?cT(r,e):r instanceof Nl?hT(r,e):function(i,a){const l=uT(i,a),c=l0(l)+l0(i.Re);return km(l)&&km(i.Re)?lT(c):cg(i.serializer,c)}(r,e)}function Uk(r,e,t){return r instanceof Ol?cT(r,e):r instanceof Nl?hT(r,e):t}function uT(r,e){return r instanceof Wc?function(n){return km(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Pl extends gh{}class Ol extends gh{constructor(e){super(),this.elements=e}}function cT(r,e){const t=fT(e);for(const n of r.elements)t.some(i=>qr(i,n))||t.push(n);return{arrayValue:{values:t}}}class Nl extends gh{constructor(e){super(),this.elements=e}}function hT(r,e){let t=fT(e);for(const n of r.elements)t=t.filter(i=>!qr(i,n));return{arrayValue:{values:t}}}class Wc extends gh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function l0(r){return Lt(r.integerValue||r.doubleValue)}function fT(r){return og(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.field=e,this.transform=t}}function qk(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof Ol&&i instanceof Ol||n instanceof Nl&&i instanceof Nl?ta(n.elements,i.elements,qr):n instanceof Wc&&i instanceof Wc?qr(n.Re,i.Re):n instanceof Pl&&i instanceof Pl}(r.transform,e.transform)}class zk{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class yh{}function dT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new hg(r.key,Er.none()):new Ul(r.key,r.data,Er.none());{const t=r.data,n=On.empty();let i=new Ht(rn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?n.delete(a):n.set(a,l),i=i.add(a)}return new ps(r.key,n,new Bn(i.toArray()),Er.none())}}function Hk(r,e,t){r instanceof Ul?function(i,a,l){const c=i.value.clone(),h=c0(i.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(r,e,t):r instanceof ps?function(i,a,l){if(!Ac(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=c0(i.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(pT(i)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(r,e,t):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Tl(r,e,t,n){return r instanceof Ul?function(a,l,c,h){if(!Ac(a.precondition,l))return c;const d=a.value.clone(),v=h0(a.fieldTransforms,h,l);return d.setAll(v),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(r,e,t,n):r instanceof ps?function(a,l,c,h){if(!Ac(a.precondition,l))return c;const d=h0(a.fieldTransforms,h,l),v=l.data;return v.setAll(pT(a)),v.setAll(d),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(g=>g.field))}(r,e,t,n):function(a,l,c){return Ac(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(r,e,t)}function $k(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),a=uT(n.transform,i||null);a!=null&&(t===null&&(t=On.empty()),t.set(n.field,a))}return t||null}function u0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ta(n,i,(a,l)=>qk(a,l))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ul extends yh{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ps extends yh{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pT(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function c0(r,e,t){const n=new Map;ft(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let i=0;i<t.length;i++){const a=r[i],l=a.transform,c=e.data.field(a.field);n.set(a.field,Uk(l,c,t[i]))}return n}function h0(r,e,t){const n=new Map;for(const i of r){const a=i.transform,l=t.data.field(i.field);n.set(i.field,Vk(a,l,e))}return n}class hg extends yh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wk extends yh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Hk(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Tl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Tl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=aT();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(i.key)?null:c;const h=dT(l,c);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),st())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(t,n)=>u0(t,n))&&ta(this.baseMutations,e.baseMutations,(t,n)=>u0(t,n))}}class fg{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ft(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let i=function(){return Lk}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,n[l].version);return new fg(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,lt;function Yk(r){switch(r){case _e.OK:return Ge(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Ge(15467,{code:r})}}function mT(r){if(r===void 0)return pi("GRPC error has no .code"),_e.UNKNOWN;switch(r){case Ft.OK:return _e.OK;case Ft.CANCELLED:return _e.CANCELLED;case Ft.UNKNOWN:return _e.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return _e.INTERNAL;case Ft.UNAVAILABLE:return _e.UNAVAILABLE;case Ft.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Ft.NOT_FOUND:return _e.NOT_FOUND;case Ft.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Ft.ABORTED:return _e.ABORTED;case Ft.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Ft.DATA_LOSS:return _e.DATA_LOSS;default:return Ge(39323,{code:r})}}(lt=Ft||(Ft={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new rs([4294967295,4294967295],0);function f0(r){const e=M1().encode(r),t=new x1;return t.update(e),new Uint8Array(t.digest())}function d0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new rs([t,n],0),new rs([i,a],0)]}class dg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ml(`Invalid padding: ${t}`);if(n<0)throw new ml(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ml(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=rs.fromNumber(this.pe)}we(e,t,n){let i=e.add(t.multiply(rs.fromNumber(n)));return i.compare(Xk)===1&&(i=new rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=f0(e),[n,i]=d0(t);for(let a=0;a<this.hashCount;a++){const l=this.we(n,i,a);if(!this.be(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new dg(a,i,t);return n.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const t=f0(e),[n,i]=d0(t);for(let a=0;a<this.hashCount;a++){const l=this.we(n,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vh(Ye.min(),i,new kt(nt),mi(),st())}}class Bl{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Bl(n,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,n,i){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=i}}class gT{constructor(e,t){this.targetId=e,this.Ce=t}}class yT{constructor(e,t,n=on.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class p0{constructor(){this.Fe=0,this.Me=m0(),this.xe=on.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=st(),t=st(),n=st();return this.Me.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ge(38017,{changeType:a})}}),new Bl(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=m0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ft(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Zk{constructor(e){this.ze=e,this.je=new Map,this.He=mi(),this.Je=vc(),this.Ye=vc(),this.Ze=new kt(nt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Ge(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((n,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,n=e.Ce.count,i=this._t(t);if(i){const a=i.target;if(Rm(a))if(n===0){const l=new qe(a.path);this.tt(t,l,dn.newNoDocument(l,Ye.min()))}else ft(n===1,20013,{expectedCount:n});else{const l=this.ut(t);if(l!==n){const c=this.ct(e),h=c?this.lt(c,e,l):1;if(h!==0){this.st(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,d)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let l,c;try{l=ls(n).toUint8Array()}catch(h){if(h instanceof B1)return ea("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new dg(l,i,a)}catch(h){return ea(h instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.pe===0?null:c}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let i=0;return n.forEach(a=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,a,null),i++)}),i}It(e){const t=new Map;this.je.forEach((a,l)=>{const c=this._t(l);if(c){if(a.current&&Rm(c.target)){const h=new qe(c.target.path);this.Et(h).has(l)||this.dt(l,h)||this.tt(l,h,dn.newNoDocument(h,e))}a.Le&&(t.set(l,a.qe()),a.Qe())}});let n=st();this.Ye.forEach((a,l)=>{let c=!0;l.forEachWhile(h=>{const d=this._t(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(a))}),this.He.forEach((a,l)=>l.setReadTime(e));const i=new vh(e,t,this.Ze,this.He,n);return this.He=mi(),this.Je=vc(),this.Ye=vc(),this.Ze=new kt(nt),i}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new p0,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ht(nt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ht(nt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new p0),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function vc(){return new kt(qe.comparator)}function m0(){return new kt(qe.comparator)}const ex={asc:"ASCENDING",desc:"DESCENDING"},tx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nx={and:"AND",or:"OR"};class rx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Om(r,e){return r.useProto3Json||fh(e)?e:{value:e}}function Kc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ix(r,e){return Kc(r,e.toTimestamp())}function Vr(r){return ft(!!r,49232),Ye.fromTimestamp(function(t){const n=as(t);return new Dt(n.seconds,n.nanos)}(r))}function pg(r,e){return Nm(r,e).canonicalString()}function Nm(r,e){const t=function(i){return new Et(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function _T(r){const e=Et.fromString(r);return ft(IT(e),10190,{key:e.toString()}),e}function Lm(r,e){return pg(r.databaseId,e.path)}function xd(r,e){const t=_T(e);if(t.get(1)!==r.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new qe(ET(t))}function wT(r,e){return pg(r.databaseId,e)}function sx(r){const e=_T(r);return e.length===4?Et.emptyPath():ET(e)}function Dm(r){return new Et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ET(r){return ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function g0(r,e,t){return{name:Lm(r,e),fields:t.value.mapValue.fields}}function ox(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ge(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,v){return d.useProto3Json?(ft(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(ft(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(d){const v=d.code===void 0?_e.UNKNOWN:mT(d.code);return new Ne(v,d.message||"")}(l);t=new yT(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=xd(r,n.document.name),a=Vr(n.document.updateTime),l=n.document.createTime?Vr(n.document.createTime):Ye.min(),c=new On({mapValue:{fields:n.document.fields}}),h=dn.newFoundDocument(i,a,l,c),d=n.targetIds||[],v=n.removedTargetIds||[];t=new kc(d,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=xd(r,n.document),a=n.readTime?Vr(n.readTime):Ye.min(),l=dn.newNoDocument(i,a),c=n.removedTargetIds||[];t=new kc([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=xd(r,n.document),a=n.removedTargetIds||[];t=new kc([],a,i,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,l=new Qk(i,a),c=n.targetId;t=new gT(c,l)}}return t}function ax(r,e){let t;if(e instanceof Ul)t={update:g0(r,e.key,e.value)};else if(e instanceof hg)t={delete:Lm(r,e.key)};else if(e instanceof ps)t={update:g0(r,e.key,e.data),updateMask:gx(e.fieldMask)};else{if(!(e instanceof Wk))return Ge(16599,{ft:e.type});t={verify:Lm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,l){const c=l.transform;if(c instanceof Pl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ol)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Nl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wc)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw Ge(20930,{transform:l.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:ix(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ge(27497)}(r,e.precondition)),t}function lx(r,e){return r&&r.length>0?(ft(e!==void 0,14353),r.map(t=>function(i,a){let l=i.updateTime?Vr(i.updateTime):Vr(a);return l.isEqual(Ye.min())&&(l=Vr(a)),new zk(l,i.transformResults||[])}(t,e))):[]}function ux(r,e){return{documents:[wT(r,e.path)]}}function TT(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=wT(r,i);const a=function(d){if(d.length!==0)return CT(Tr.create(d,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(d){if(d.length!==0)return d.map(v=>function(p){return{field:Gi(p.field),direction:dx(p.dir)}}(v))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Om(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:t,parent:i}}function cx(r,e,t,n){const{gt:i,parent:a}=TT(r,e),l={},c=[];let h=0;return t.forEach(d=>{const v="aggregate_"+h++;l[v]=d.alias,d.aggregateType==="count"?c.push({alias:v,count:{}}):d.aggregateType==="avg"?c.push({alias:v,avg:{field:Gi(d.fieldPath)}}):d.aggregateType==="sum"&&c.push({alias:v,sum:{field:Gi(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:i.structuredQuery},parent:i.parent},yt:l,parent:a}}function hx(r){let e=sx(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ft(n===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(g){const p=ST(g);return p instanceof Tr&&Y1(p)?p.getFilters():[p]}(t.where));let l=[];t.orderBy&&(l=function(g){return g.map(p=>function(w){return new Rl(Go(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(t.orderBy));let c=null;t.limit&&(c=function(g){let p;return p=typeof g=="object"?g.value:g,fh(p)?null:p}(t.limit));let h=null;t.startAt&&(h=function(g){const p=!!g.before,y=g.values||[];return new Hc(y,p)}(t.startAt));let d=null;return t.endAt&&(d=function(g){const p=!g.before,y=g.values||[];return new Hc(y,p)}(t.endAt)),xk(e,i,l,a,c,"F",h,d)}function fx(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ST(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Go(t.unaryFilter.field);return Vt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Go(t.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Go(t.unaryFilter.field);return Vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Go(t.unaryFilter.field);return Vt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}}(r):r.fieldFilter!==void 0?function(t){return Vt.create(Go(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Tr.create(t.compositeFilter.filters.map(n=>ST(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}}(t.compositeFilter.op))}(r):Ge(30097,{filter:r})}function dx(r){return ex[r]}function px(r){return tx[r]}function mx(r){return nx[r]}function Gi(r){return{fieldPath:r.canonicalString()}}function Go(r){return rn.fromServerFormat(r.fieldPath)}function CT(r){return r instanceof Vt?function(t){if(t.op==="=="){if(r0(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NAN"}};if(n0(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(r0(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NOT_NAN"}};if(n0(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gi(t.field),op:px(t.op),value:t.value}}}(r):r instanceof Tr?function(t){const n=t.getFilters().map(i=>CT(i));return n.length===1?n[0]:{compositeFilter:{op:mx(t.op),filters:n}}}(r):Ge(54877,{filter:r})}function gx(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,n,i,a=Ye.min(),l=Ye.min(),c=on.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.wt=e}}function vx(r){const e=hx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?$c(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.yn=new wx}addToCollectionParentIndex(e,t){return this.yn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(os.min())}updateCollectionGroup(e,t,n){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class wx{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Ht(Et.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Ht(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bT=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(bT,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ia(0)}static ir(){return new ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="LruGarbageCollector",Ex=1048576;function _0([r,e],[t,n]){const i=nt(r,t);return i===0?nt(e,n):i}class Tx{constructor(e){this.cr=e,this.buffer=new Ht(_0),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();_0(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Sx{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Oe(v0,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ha(t)?Oe(v0,"Ignoring IndexedDB error during garbage collection: ",t):await ca(t)}await this.Ir(3e5)})}}class Cx{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return we.resolve(hh.le);const n=new Tx(t);return this.Er.forEachTarget(e,i=>n.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>n.Pr(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(y0)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y0):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,i,a,l,c,h,d;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(n=g,c=Date.now(),this.removeTargets(e,n,t))).next(g=>(a=g,h=Date.now(),this.removeOrphanedDocuments(e,n))).next(g=>(d=Date.now(),Wo()<=it.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${g} documents in `+(d-h)+`ms
Total Duration: ${d-v}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g})))}}function Ix(r,e){return new Cx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.changes=new eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?we.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&Tl(n.mutation,i,Bn.empty(),Dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,st()).next(()=>n))}getLocalViewOfDocuments(e,t,n=st()){const i=Hs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(a=>{let l=pl();return a.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const n=Hs();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,st()))}populateOverlays(e,t,n){const i=[];return n.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,n,i){let a=mi();const l=El(),c=function(){return El()}();return t.forEach((h,d)=>{const v=n.get(d.key);i.has(d.key)&&(v===void 0||v.mutation instanceof ps)?a=a.insert(d.key,d):v!==void 0?(l.set(d.key,v.mutation.getFieldMask()),Tl(v.mutation,d,v.mutation.getFieldMask(),Dt.now())):l.set(d.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((d,v)=>l.set(d,v)),t.forEach((d,v)=>{var g;return c.set(d,new Ax(v,(g=l.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){const n=El();let i=new kt((l,c)=>l-c),a=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let v=n.get(h)||Bn.empty();v=c.applyToLocalView(d,v),n.set(h,v);const g=(i.get(c.batchId)||st()).add(h);i=i.insert(c.batchId,g)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,v=h.value,g=aT();v.forEach(p=>{if(!a.has(p)){const y=dT(t.get(p),n.get(p));y!==null&&g.set(p,y),a=a.add(p)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,g))}return we.waitFor(l)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(l){return qe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):we.resolve(Hs());let c=bl,h=a;return l.next(d=>we.forEach(d,(v,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(v)?we.resolve():this.remoteDocumentCache.getEntry(e,v).next(p=>{h=h.insert(v,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,h,d,st())).next(v=>({batchId:c,changes:oT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(n=>{let i=pl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let l=pl();return this.indexManager.getCollectionParents(e,a).next(c=>we.forEach(c,h=>{const d=function(g,p){return new fa(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(v=>{v.forEach((g,p)=>{l=l.insert(g,p)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i))).next(l=>{a.forEach((h,d)=>{const v=d.getKey();l.get(v)===null&&(l=l.insert(v,dn.newInvalidDocument(v)))});let c=pl();return l.forEach((h,d)=>{const v=a.get(h);v!==void 0&&Tl(v.mutation,d,Bn.empty(),Dt.now()),mh(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return we.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Vr(i.createTime)}}(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:vx(i.bundledQuery),readTime:Vr(i.readTime)}}(t)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.overlays=new kt(qe.comparator),this.Or=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Hs();return we.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,a)=>{this.St(e,t,a)}),we.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Or.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Or.delete(n)),we.resolve()}getOverlaysForCollection(e,t,n){const i=Hs(),a=t.length+1,l=new qe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&h.largestBatchId>n&&i.set(h.getKey(),h)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new kt((d,v)=>d-v);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let v=a.get(d.largestBatchId);v===null&&(v=Hs(),a=a.insert(d.largestBatchId,v)),v.set(d.getKey(),d)}}const c=Hs(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,v)=>c.set(d,v)),!(c.size()>=i)););return we.resolve(c)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.Or.get(i.largestBatchId).delete(n.key);this.Or.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new Gk(t,n));let a=this.Or.get(t);a===void 0&&(a=st(),this.Or.set(t,a)),this.Or.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Nr=new Ht(Qt.Br),this.Lr=new Ht(Qt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new Qt(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Qr(new Qt(e,t))}$r(e,t){e.forEach(n=>this.removeReference(n,t))}Ur(e){const t=new qe(new Et([])),n=new Qt(t,e),i=new Qt(t,e+1),a=[];return this.Lr.forEachInRange([n,i],l=>{this.Qr(l),a.push(l.key)}),a}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new qe(new Et([])),n=new Qt(t,e),i=new Qt(t,e+1);let a=st();return this.Lr.forEachInRange([n,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Qt(e,0),n=this.Nr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Qt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return qe.comparator(e.key,t.key)||nt(e.Gr,t.Gr)}static kr(e,t){return nt(e.Gr,t.Gr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ht(Qt.Br)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Kk(a,t,n,i);this.mutationQueue.push(l);for(const c of i)this.zr=this.zr.add(new Qt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(l)}lookupMutationBatch(e,t){return we.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Hr(n),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?ig:this.Jn-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Qt(t,0),i=new Qt(t,Number.POSITIVE_INFINITY),a=[];return this.zr.forEachInRange([n,i],l=>{const c=this.jr(l.Gr);a.push(c)}),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ht(nt);return t.forEach(i=>{const a=new Qt(i,0),l=new Qt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([a,l],c=>{n=n.add(c.Gr)})}),we.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;qe.isDocumentKey(a)||(a=a.child(""));const l=new Qt(new qe(a),0);let c=new Ht(nt);return this.zr.forEachWhile(h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.Gr)),!0)},l),we.resolve(this.Jr(c))}Jr(e){const t=[];return e.forEach(n=>{const i=this.jr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.zr;return we.forEach(t.mutations,i=>{const a=new Qt(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=n})}Xn(e){}containsKey(e,t){const n=new Qt(t,0),i=this.zr.firstAfterOrEqual(n);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.Zr=e,this.docs=function(){return new kt(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,l=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return we.resolve(n?n.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let n=mi();return t.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():dn.newInvalidDocument(i))}),we.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=mi();const l=t.path,c=new qe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:v}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||ok(sk(v),n)<=0||(i.has(v.key)||mh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,t,n,i){Ge(9500)}Xr(e,t){return we.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new Lx(this)}getSize(e){return we.resolve(this.size)}}class Lx extends bx{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(n)}),we.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.persistence=e,this.ei=new eo(t=>ag(t),lg),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ti=0,this.ni=new mg,this.targetCount=0,this.ri=ia.rr()}forEachTarget(e,t){return this.ei.forEach((n,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),we.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ia(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.ar(t),we.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.ei.forEach((l,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.ei.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),we.waitFor(a).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return we.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),we.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),we.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),we.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return we.resolve(n)}containsKey(e,t){return we.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.ii={},this.overlays={},this.si=new hh(0),this.oi=!1,this.oi=!0,this._i=new Px,this.referenceDelegate=e(this),this.ai=new Dx(this),this.indexManager=new _x,this.remoteDocumentCache=function(i){return new Nx(i)}(n=>this.referenceDelegate.ui(n)),this.serializer=new yx(t),this.ci=new xx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new Ox(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){Oe("MemoryPersistence","Starting transaction:",e);const i=new jx(this.si.next());return this.referenceDelegate.li(),n(i).next(a=>this.referenceDelegate.hi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Pi(e,t){return we.or(Object.values(this.ii).map(n=>()=>n.containsKey(e,t)))}}class jx extends lk{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ti=new mg,this.Ii=null}static Ei(e){return new gg(e)}get di(){if(this.Ii)return this.Ii;throw Ge(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),we.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.di.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.di,n=>{const i=qe.fromPath(n);return this.Ai(e,i).next(a=>{a||t.removeEntry(i,Ye.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return we.or([()=>we.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Gc{constructor(e,t){this.persistence=e,this.Ri=new eo(n=>hk(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=Ix(this,t)}static Ei(e,t){return new Gc(e,t)}li(){}hi(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}Vr(e){let t=0;return this.Ar(e,n=>{t++}).next(()=>t)}Ar(e,t){return we.forEach(this.Ri,(n,i)=>this.gr(e,n,i).next(a=>a?we.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.Xr(e,l=>this.gr(e,l,t).next(c=>{c||(n++,a.removeEntry(l,Ye.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),we.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),we.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ic(e.data.value)),t}gr(e,t,n){return we.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return we.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=i}static Ps(e,t){let n=st(),i=st();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new yg(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return xb()?8:uk(pn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.Rs(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.Vs(e,t,i,n).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new Mx;return this.fs(e,t,l).next(c=>{if(a.result=c,this.Is)return this.gs(e,t,l,c.size)})}).next(()=>a.result)}gs(e,t,n,i){return n.documentReadCount<this.Es?(Wo()<=it.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),we.resolve()):(Wo()<=it.DEBUG&&Oe("QueryEngine","Query:",Ko(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ds*i?(Wo()<=it.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):we.resolve())}Rs(e,t){if(a0(t))return we.resolve(null);let n=Fr(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=$c(t,null,"F"),n=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const l=st(...a);return this.As.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,n).next(h=>{const d=this.ps(t,c);return this.ys(t,d,l,h.readTime)?this.Rs(e,$c(t,null,"F")):this.ws(e,d,t,h)}))})))}Vs(e,t,n,i){return a0(t)||i.isEqual(Ye.min())?we.resolve(null):this.As.getDocuments(e,n).next(a=>{const l=this.ps(t,a);return this.ys(t,l,n,i)?we.resolve(null):(Wo()<=it.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ko(t)),this.ws(e,l,t,ik(i,bl)).next(c=>c))})}ps(e,t){let n=new Ht(iT(e));return t.forEach((i,a)=>{mh(e,a)&&(n=n.add(a))}),n}ys(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}fs(e,t,n){return Wo()<=it.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Ko(t)),this.As.getDocumentsMatchingQuery(e,t,os.min(),n)}ws(e,t,n,i){return this.As.getDocumentsMatchingQuery(e,n,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LocalStore",Vx=3e8;class Ux{constructor(e,t,n,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new kt(nt),this.Ds=new eo(a=>ag(a),lg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kx(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function Bx(r,e,t,n){return new Ux(r,e,t,n)}async function kT(r,e){const t=Qe(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,t.Fs(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const l=[],c=[];let h=st();for(const d of i){l.push(d.batchId);for(const v of d.mutations)h=h.add(v.key)}for(const d of a){c.push(d.batchId);for(const v of d.mutations)h=h.add(v.key)}return t.localDocuments.getDocuments(n,h).next(d=>({Ms:d,removedBatchIds:l,addedBatchIds:c}))})})}function qx(r,e){const t=Qe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=t.Cs.newChangeBuffer({trackRemovals:!0});return function(c,h,d,v){const g=d.batch,p=g.keys();let y=we.resolve();return p.forEach(w=>{y=y.next(()=>v.getEntry(h,w)).next(S=>{const T=d.docVersions.get(w);ft(T!==null,48541),S.version.compareTo(T)<0&&(g.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),v.addEntry(S)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(h,g))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let h=st();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function xT(r){const e=Qe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function zx(r,e){const t=Qe(r),n=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const c=[];e.targetChanges.forEach((v,g)=>{const p=i.get(g);if(!p)return;c.push(t.ai.removeMatchingKeys(a,v.removedDocuments,g).next(()=>t.ai.addMatchingKeys(a,v.addedDocuments,g)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?y=y.withResumeToken(on.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):v.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(v.resumeToken,n)),i=i.insert(g,y),function(S,T,E){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=Vx?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,y,v)&&c.push(t.ai.updateTargetData(a,y))});let h=mi(),d=st();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),c.push(Hx(a,l,e.documentUpdates).next(v=>{h=v.xs,d=v.Os})),!n.isEqual(Ye.min())){const v=t.ai.getLastRemoteSnapshotVersion(a).next(g=>t.ai.setTargetsMetadata(a,a.currentSequenceNumber,n));c.push(v)}return we.waitFor(c).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,d)).next(()=>h)}).then(a=>(t.Ss=i,a))}function Hx(r,e,t){let n=st(),i=st();return t.forEach(a=>n=n.add(a)),e.getEntries(r,n).next(a=>{let l=mi();return t.forEach((c,h)=>{const d=a.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Ye.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):Oe(vg,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{xs:l,Os:i}})}function $x(r,e){const t=Qe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=ig),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Wx(r,e){const t=Qe(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.ai.getTargetData(n,e).next(a=>a?(i=a,we.resolve(i)):t.ai.allocateTargetId(n).next(l=>(i=new es(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.ai.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ss.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(n.targetId,n),t.Ds.set(e,n.targetId)),n})}async function jm(r,e,t){const n=Qe(r),i=n.Ss.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,l=>n.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!ha(l))throw l;Oe(vg,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ss=n.Ss.remove(e),n.Ds.delete(i.target)}function w0(r,e,t){const n=Qe(r);let i=Ye.min(),a=st();return n.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,v){const g=Qe(h),p=g.Ds.get(v);return p!==void 0?we.resolve(g.Ss.get(p)):g.ai.getTargetData(d,v)}(n,l,Fr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.ai.getMatchingKeysForTargetId(l,c.targetId).next(h=>{a=h})}).next(()=>n.bs.getDocumentsMatchingQuery(l,e,t?i:Ye.min(),t?a:st())).next(c=>(Kx(n,Pk(e),c),{documents:c,Ns:a})))}function Kx(r,e,t){let n=r.vs.get(e)||Ye.min();t.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),r.vs.set(e,n)}class E0{constructor(){this.activeTargetIds=Mk()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gx{constructor(){this.So=new E0,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new E0,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="ConnectivityMonitor";class S0{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Oe(T0,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Oe(T0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function Mm(){return _c===null?_c=function(){return 268435456+Math.round(2147483648*Math.random())}():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="RestConnection",Qx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yx{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${i}`,this.qo=this.databaseId.database===qc?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Qo(e,t,n,i,a){const l=Mm(),c=this.$o(e,t.toUriEncodedString());Oe(Rd,`Sending RPC '${e}' ${l}:`,c,n);const h={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(h,i,a);const{host:d}=new URL(c),v=la(d);return this.Ko(e,c,h,n,v).then(g=>(Oe(Rd,`Received RPC '${e}' ${l}: `,g),g),g=>{throw ea(Rd,`RPC '${e}' ${l} failed with error: `,g,"url: ",c,"request:",n),g})}Wo(e,t,n,i,a,l){return this.Qo(e,t,n,i,a)}Uo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}$o(e,t){const n=Qx[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class Zx extends Yx{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,i,a){const l=Mm();return new Promise((c,h)=>{const d=new R1;d.setWithCredentials(!0),d.listenOnce(P1.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Cc.NO_ERROR:const g=d.getResponseJson();Oe(hn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),c(g);break;case Cc.TIMEOUT:Oe(hn,`RPC '${e}' ${l} timed out`),h(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const p=d.getStatus();if(Oe(hn,`RPC '${e}' ${l} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const S=function(E){const b=E.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(b)>=0?b:_e.UNKNOWN}(w.status);h(new Ne(S,w.message))}else h(new Ne(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{s_:e,streamId:l,o_:d.getLastErrorCode(),__:d.getLastError()})}}finally{Oe(hn,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(i);Oe(hn,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",v,n,15)})}a_(e,t,n){const i=Mm(),a=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=L1(),c=N1(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Uo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const v=a.join("");Oe(hn,`Creating RPC '${e}' stream ${i}: ${v}`,h);const g=l.createWebChannel(v,h);let p=!1,y=!1;const w=new Xx({Go:T=>{y?Oe(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(p||(Oe(hn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),p=!0),Oe(hn,`RPC '${e}' stream ${i} sending:`,T),g.send(T))},zo:()=>g.close()}),S=(T,E,b)=>{T.listen(E,N=>{try{b(N)}catch(I){setTimeout(()=>{throw I},0)}})};return S(g,dl.EventType.OPEN,()=>{y||(Oe(hn,`RPC '${e}' stream ${i} transport opened.`),w.t_())}),S(g,dl.EventType.CLOSE,()=>{y||(y=!0,Oe(hn,`RPC '${e}' stream ${i} transport closed`),w.r_())}),S(g,dl.EventType.ERROR,T=>{y||(y=!0,ea(hn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),w.r_(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),S(g,dl.EventType.MESSAGE,T=>{var E;if(!y){const b=T.data[0];ft(!!b,16349);const N=b,I=(N==null?void 0:N.error)||((E=N[0])===null||E===void 0?void 0:E.error);if(I){Oe(hn,`RPC '${e}' stream ${i} received error:`,I);const F=I.status;let U=function(A){const k=Ft[A];if(k!==void 0)return mT(k)}(F),P=I.message;U===void 0&&(U=_e.INTERNAL,P="Unknown error status: "+F+" with message "+I.message),y=!0,w.r_(new Ne(U,P)),g.close()}else Oe(hn,`RPC '${e}' stream ${i} received:`,b),w.i_(b)}}),S(c,O1.STAT_EVENT,T=>{T.stat===Im.PROXY?Oe(hn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Im.NOPROXY&&Oe(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.n_()},0),w}}function Pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(r){return new rx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,n=1e3,i=1.5,a=6e4){this.bi=e,this.timerId=t,this.u_=n,this.c_=i,this.l_=a,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-n);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="PersistentStream";class PT{constructor(e,t,n,i,a,l,c,h){this.bi=e,this.R_=n,this.V_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new RT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(pi(t.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.m_===t&&this.B_(n,i)},n=>{e(()=>{const i=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.L_(i)})})}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{n(()=>this.listener.jo())}),this.stream.Jo(()=>{n(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{n(()=>this.L_(i))}),this.stream.onMessage(i=>{n(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Oe(C0,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Oe(C0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eR extends PT{constructor(e,t,n,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=ox(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ye.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ye.min():l.readTime?Vr(l.readTime):Ye.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=Dm(this.serializer),t.addTarget=function(a,l){let c;const h=l.target;if(c=Rm(h)?{documents:ux(a,h)}:{query:TT(a,h).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=vT(a,l.resumeToken);const d=Om(a,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(Ye.min())>0){c.readTime=Kc(a,l.snapshotVersion.toTimestamp());const d=Om(a,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=fx(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=Dm(this.serializer),t.removeTarget=e,this.F_(t)}}class tR extends PT{constructor(e,t,n,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=a}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=lx(e.writeResults,e.commitTime),n=Vr(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=Dm(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>ax(this.serializer,n))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{}class rR extends nR{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Qo(e,Nm(t,n),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(_e.UNKNOWN,a.toString())})}Wo(e,t,n,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,Nm(t,n),i,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(_e.UNKNOWN,l.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class iR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(pi(t),this.ea=!1):Oe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class sR{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=a,this.ca.vo(l=>{n.enqueueAndForget(async()=>{to(this)&&(Oe(Js,"Restarting streams for network reachability change."),await async function(h){const d=Qe(h);d.aa.add(4),await ql(d),d.la.set("Unknown"),d.aa.delete(4),await wh(d)}(this))})}),this.la=new iR(n,i)}}async function wh(r){if(to(r))for(const e of r.ua)await e(!0)}async function ql(r){for(const e of r.ua)await e(!1)}function OT(r,e){const t=Qe(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Tg(t)?Eg(t):da(t).b_()&&wg(t,e))}function _g(r,e){const t=Qe(r),n=da(t);t._a.delete(e),n.b_()&&NT(t,e),t._a.size===0&&(n.b_()?n.v_():to(t)&&t.la.set("Unknown"))}function wg(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}da(r).U_(e)}function NT(r,e){r.ha.Ke(e),da(r).K_(e)}function Eg(r){r.ha=new Zk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),da(r).start(),r.la.ta()}function Tg(r){return to(r)&&!da(r).w_()&&r._a.size>0}function to(r){return Qe(r).aa.size===0}function LT(r){r.ha=void 0}async function oR(r){r.la.set("Online")}async function aR(r){r._a.forEach((e,t)=>{wg(r,e)})}async function lR(r,e){LT(r),Tg(r)?(r.la.ia(e),Eg(r)):r.la.set("Unknown")}async function uR(r,e,t){if(r.la.set("Online"),e instanceof yT&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const c of a.targetIds)i._a.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i._a.delete(c),i.ha.removeTarget(c))}(r,e)}catch(n){Oe(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Jc(r,n)}else if(e instanceof kc?r.ha.Xe(e):e instanceof gT?r.ha.ot(e):r.ha.nt(e),!t.isEqual(Ye.min()))try{const n=await xT(r.localStore);t.compareTo(n)>=0&&await function(a,l){const c=a.ha.It(l);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const v=a._a.get(d);v&&a._a.set(d,v.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,d)=>{const v=a._a.get(h);if(!v)return;a._a.set(h,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),NT(a,h);const g=new es(v.target,h,d,v.sequenceNumber);wg(a,g)}),a.remoteSyncer.applyRemoteEvent(c)}(r,t)}catch(n){Oe(Js,"Failed to raise snapshot:",n),await Jc(r,n)}}async function Jc(r,e,t){if(!ha(e))throw e;r.aa.add(1),await ql(r),r.la.set("Offline"),t||(t=()=>xT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Oe(Js,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await wh(r)})}function DT(r,e){return e().catch(t=>Jc(r,t,e))}async function Eh(r){const e=Qe(r),t=cs(e);let n=e.oa.length>0?e.oa[e.oa.length-1].batchId:ig;for(;cR(e);)try{const i=await $x(e.localStore,n);if(i===null){e.oa.length===0&&t.v_();break}n=i.batchId,hR(e,i)}catch(i){await Jc(e,i)}jT(e)&&MT(e)}function cR(r){return to(r)&&r.oa.length<10}function hR(r,e){r.oa.push(e);const t=cs(r);t.b_()&&t.W_&&t.G_(e.mutations)}function jT(r){return to(r)&&!cs(r).w_()&&r.oa.length>0}function MT(r){cs(r).start()}async function fR(r){cs(r).H_()}async function dR(r){const e=cs(r);for(const t of r.oa)e.G_(t.mutations)}async function pR(r,e,t){const n=r.oa.shift(),i=fg.from(n,e,t);await DT(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await Eh(r)}async function mR(r,e){e&&cs(r).W_&&await async function(n,i){if(function(l){return Yk(l)&&l!==_e.ABORTED}(i.code)){const a=n.oa.shift();cs(n).D_(),await DT(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Eh(n)}}(r,e),jT(r)&&MT(r)}async function I0(r,e){const t=Qe(r);t.asyncQueue.verifyOperationInProgress(),Oe(Js,"RemoteStore received new credentials");const n=to(t);t.aa.add(3),await ql(t),n&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await wh(t)}async function gR(r,e){const t=Qe(r);e?(t.aa.delete(2),await wh(t)):e||(t.aa.add(2),await ql(t),t.la.set("Unknown"))}function da(r){return r.Pa||(r.Pa=function(t,n,i){const a=Qe(t);return a.Y_(),new eR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{jo:oR.bind(null,r),Jo:aR.bind(null,r),Zo:lR.bind(null,r),Q_:uR.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),Tg(r)?Eg(r):r.la.set("Unknown")):(await r.Pa.stop(),LT(r))})),r.Pa}function cs(r){return r.Ta||(r.Ta=function(t,n,i){const a=Qe(t);return a.Y_(),new tR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:fR.bind(null,r),Zo:mR.bind(null,r),z_:dR.bind(null,r),j_:pR.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await Eh(r)):(await r.Ta.stop(),r.oa.length>0&&(Oe(Js,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const l=Date.now()+n,c=new Sg(e,t,l,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(r,e){if(pi("AsyncQueue",`${e}: ${r}`),ha(r))return new Ne(_e.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||qe.comparator(t.key,n.key):(t,n)=>qe.comparator(t.key,n.key),this.keyedMap=pl(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Qo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.Ia=new kt(qe.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?e.type!==0&&n.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&n.type!==1?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Ia=this.Ia.remove(t):e.type===1&&n.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,n)=>{e.push(n)}),e}}class sa{constructor(e,t,n,i,a,l,c,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,a){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new sa(e,t,Qo.emptySet(t),l,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class vR{constructor(){this.queries=A0(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,n){const i=Qe(t),a=i.queries;i.queries=A0(),a.forEach((l,c)=>{for(const h of c.Ra)h.onError(n)})})(this,new Ne(_e.ABORTED,"Firestore shutting down"))}}function A0(){return new eo(r=>rT(r),ph)}async function FT(r,e){const t=Qe(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.Va()&&e.ma()&&(n=2):(a=new yR,n=e.ma()?0:1);try{switch(n){case 0:a.Aa=await t.onListen(i,!0);break;case 1:a.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Cg(l,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Ra.push(e),e.ga(t.onlineState),a.Aa&&e.pa(a.Aa)&&Ig(t)}async function VT(r,e){const t=Qe(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const l=a.Ra.indexOf(e);l>=0&&(a.Ra.splice(l,1),a.Ra.length===0?i=e.ma()?0:1:!a.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function _R(r,e){const t=Qe(r);let n=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const c of l.Ra)c.pa(i)&&(n=!0);l.Aa=i}}n&&Ig(t)}function wR(r,e,t){const n=Qe(r),i=n.queries.get(e);if(i)for(const a of i.Ra)a.onError(t);n.queries.delete(e)}function Ig(r){r.fa.forEach(e=>{e.next()})}var Fm,k0;(k0=Fm||(Fm={})).ya="default",k0.Cache="cache";class UT{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new sa(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const n=t!=="Offline";return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class ER{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=st(),this.mutatedKeys=st(),this.Ua=iT(e),this.Ka=new Qo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new b0,i=t?t.Ka:this.Ka;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,g)=>{const p=i.get(v),y=mh(this.query,g)?g:null,w=!!p&&this.mutatedKeys.has(p.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;p&&y?p.data.isEqual(y.data)?w!==S&&(n.track({type:3,doc:y}),T=!0):this.ja(p,y)||(n.track({type:2,doc:y}),T=!0,(h&&this.Ua(y,h)>0||d&&this.Ua(y,d)<0)&&(c=!0)):!p&&y?(n.track({type:0,doc:y}),T=!0):p&&!y&&(n.track({type:1,doc:p}),T=!0,(h||d)&&(c=!0)),T&&(y?(l=l.add(y),a=S?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),n.track({type:1,doc:v})}return{Ka:l,za:n,ys:c,mutatedKeys:a}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const l=e.za.da();l.sort((v,g)=>function(y,w){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:T})}};return S(y)-S(w)}(v.type,g.type)||this.Ua(v.doc,g.doc)),this.Ha(n),i=i!=null&&i;const c=t&&!i?this.Ja():[],h=this.$a.size===0&&this.current&&!i?1:0,d=h!==this.Qa;return this.Qa=h,l.length!==0||d?{snapshot:new sa(this.query,e.Ka,a,l,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new b0,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=st(),this.Ka.forEach(n=>{this.Za(n.key)&&(this.$a=this.$a.add(n.key))});const t=[];return e.forEach(n=>{this.$a.has(n)||t.push(new qT(n))}),this.$a.forEach(n=>{e.has(n)||t.push(new BT(n))}),t}Xa(e){this.qa=e.Ns,this.$a=st();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return sa.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const bg="SyncEngine";class TR{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class SR{constructor(e){this.key=e,this.tu=!1}}class CR{constructor(e,t,n,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nu={},this.ru=new eo(c=>rT(c),ph),this.iu=new Map,this.su=new Set,this.ou=new kt(qe.comparator),this._u=new Map,this.au=new mg,this.uu={},this.cu=new Map,this.lu=ia.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function IR(r,e,t=!0){const n=GT(r);let i;const a=n.ru.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.eu()):i=await zT(n,e,t,!0),i}async function bR(r,e){const t=GT(r);await zT(t,e,!0,!1)}async function zT(r,e,t,n){const i=await Wx(r.localStore,Fr(e)),a=i.targetId,l=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await AR(r,e,a,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&OT(r.remoteStore,i),c}async function AR(r,e,t,n,i){r.Pu=(g,p,y)=>async function(S,T,E,b){let N=T.view.Ga(E);N.ys&&(N=await w0(S.localStore,T.query,!1).then(({documents:P})=>T.view.Ga(P,N)));const I=b&&b.targetChanges.get(T.targetId),F=b&&b.targetMismatches.get(T.targetId)!=null,U=T.view.applyChanges(N,S.isPrimaryClient,I,F);return R0(S,T.targetId,U.Ya),U.snapshot}(r,g,p,y);const a=await w0(r.localStore,e,!0),l=new ER(e,a.Ns),c=l.Ga(a.documents),h=Bl.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(c,r.isPrimaryClient,h);R0(r,t,d.Ya);const v=new TR(e,t,l);return r.ru.set(e,v),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),d.snapshot}async function kR(r,e,t){const n=Qe(r),i=n.ru.get(e),a=n.iu.get(i.targetId);if(a.length>1)return n.iu.set(i.targetId,a.filter(l=>!ph(l,e))),void n.ru.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await jm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&_g(n.remoteStore,i.targetId),Vm(n,i.targetId)}).catch(ca)):(Vm(n,i.targetId),await jm(n.localStore,i.targetId,!0))}async function xR(r,e){const t=Qe(r),n=t.ru.get(e),i=t.iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),_g(t.remoteStore,n.targetId))}async function RR(r,e,t){const n=MR(r);try{const i=await function(l,c){const h=Qe(l),d=Dt.now(),v=c.reduce((y,w)=>y.add(w.key),st());let g,p;return h.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=mi(),S=st();return h.Cs.getEntries(y,v).next(T=>{w=T,w.forEach((E,b)=>{b.isValidDocument()||(S=S.add(E))})}).next(()=>h.localDocuments.getOverlayedDocuments(y,w)).next(T=>{g=T;const E=[];for(const b of c){const N=$k(b,g.get(b.key).overlayedDocument);N!=null&&E.push(new ps(b.key,N,G1(N.value.mapValue),Er.exists(!0)))}return h.mutationQueue.addMutationBatch(y,d,E,c)}).next(T=>{p=T;const E=T.applyToLocalDocumentSet(g,S);return h.documentOverlayCache.saveOverlays(y,T.batchId,E)})}).then(()=>({batchId:p.batchId,changes:oT(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let d=l.uu[l.currentUser.toKey()];d||(d=new kt(nt)),d=d.insert(c,h),l.uu[l.currentUser.toKey()]=d}(n,i.batchId,t),await zl(n,i.changes),await Eh(n.remoteStore)}catch(i){const a=Cg(i,"Failed to persist write");t.reject(a)}}async function HT(r,e){const t=Qe(r);try{const n=await zx(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t._u.get(a);l&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.tu=!0:i.modifiedDocuments.size>0?ft(l.tu,14607):i.removedDocuments.size>0&&(ft(l.tu,42227),l.tu=!1))}),await zl(t,n,e)}catch(n){await ca(n)}}function x0(r,e,t){const n=Qe(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.ru.forEach((a,l)=>{const c=l.view.ga(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Qe(l);h.onlineState=c;let d=!1;h.queries.forEach((v,g)=>{for(const p of g.Ra)p.ga(c)&&(d=!0)}),d&&Ig(h)}(n.eventManager,e),i.length&&n.nu.Q_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function PR(r,e,t){const n=Qe(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n._u.get(e),a=i&&i.key;if(a){let l=new kt(qe.comparator);l=l.insert(a,dn.newNoDocument(a,Ye.min()));const c=st().add(a),h=new vh(Ye.min(),new Map,new kt(nt),l,c);await HT(n,h),n.ou=n.ou.remove(a),n._u.delete(e),Ag(n)}else await jm(n.localStore,e,!1).then(()=>Vm(n,e,t)).catch(ca)}async function OR(r,e){const t=Qe(r),n=e.batch.batchId;try{const i=await qx(t.localStore,e);WT(t,n,null),$T(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await zl(t,i)}catch(i){await ca(i)}}async function NR(r,e,t){const n=Qe(r);try{const i=await function(l,c){const h=Qe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let v;return h.mutationQueue.lookupMutationBatch(d,c).next(g=>(ft(g!==null,37113),v=g.keys(),h.mutationQueue.removeMutationBatch(d,g))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,v,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,v)).next(()=>h.localDocuments.getDocuments(d,v))})}(n.localStore,e);WT(n,e,t),$T(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await zl(n,i)}catch(i){await ca(i)}}function $T(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function WT(r,e,t){const n=Qe(r);let i=n.uu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.uu[n.currentUser.toKey()]=i}}function Vm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.iu.get(e))r.ru.delete(n),t&&r.nu.Tu(n,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(n=>{r.au.containsKey(n)||KT(r,n)})}function KT(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(_g(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),Ag(r))}function R0(r,e,t){for(const n of t)n instanceof BT?(r.au.addReference(n.key,e),LR(r,n)):n instanceof qT?(Oe(bg,"Document no longer in limbo: "+n.key),r.au.removeReference(n.key,e),r.au.containsKey(n.key)||KT(r,n.key)):Ge(19791,{Iu:n})}function LR(r,e){const t=e.key,n=t.path.canonicalString();r.ou.get(t)||r.su.has(n)||(Oe(bg,"New document in limbo: "+t),r.su.add(n),Ag(r))}function Ag(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new qe(Et.fromString(e)),n=r.lu.next();r._u.set(n,new SR(t)),r.ou=r.ou.insert(t,n),OT(r.remoteStore,new es(Fr(ug(t.path)),n,"TargetPurposeLimboResolution",hh.le))}}async function zl(r,e,t){const n=Qe(r),i=[],a=[],l=[];n.ru.isEmpty()||(n.ru.forEach((c,h)=>{l.push(n.Pu(h,e,t).then(d=>{var v;if((d||t)&&n.isPrimaryClient){const g=d?!d.fromCache:(v=t==null?void 0:t.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;n.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(d){i.push(d);const g=yg.Ps(h.targetId,d);a.push(g)}}))}),await Promise.all(l),n.nu.Q_(i),await async function(h,d){const v=Qe(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>we.forEach(d,p=>we.forEach(p.ls,y=>v.persistence.referenceDelegate.addReference(g,p.targetId,y)).next(()=>we.forEach(p.hs,y=>v.persistence.referenceDelegate.removeReference(g,p.targetId,y)))))}catch(g){if(!ha(g))throw g;Oe(vg,"Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const y=v.Ss.get(p),w=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(w);v.Ss=v.Ss.insert(p,S)}}}(n.localStore,a))}async function DR(r,e){const t=Qe(r);if(!t.currentUser.isEqual(e)){Oe(bg,"User change. New user:",e.toKey());const n=await kT(t.localStore,e);t.currentUser=e,function(a,l){a.cu.forEach(c=>{c.forEach(h=>{h.reject(new Ne(_e.CANCELLED,l))})}),a.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zl(t,n.Ms)}}function jR(r,e){const t=Qe(r),n=t._u.get(e);if(n&&n.tu)return st().add(n.key);{let i=st();const a=t.iu.get(e);if(!a)return i;for(const l of a){const c=t.ru.get(l);i=i.unionWith(c.view.Wa)}return i}}function GT(r){const e=Qe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PR.bind(null,e),e.nu.Q_=_R.bind(null,e.eventManager),e.nu.Tu=wR.bind(null,e.eventManager),e}function MR(r){const e=Qe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NR.bind(null,e),e}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Bx(this.persistence,new Fx,e.initialUser,this.serializer)}Ru(e){return new AT(gg.Ei,this.serializer)}Au(e){return new Gx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class FR extends Qc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){ft(this.persistence.referenceDelegate instanceof Gc,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Sx(n,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new AT(n=>Gc.Ei(n,t),this.serializer)}}class Um{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>x0(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=DR.bind(null,this.syncEngine),await gR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vR}()}createDatastore(e){const t=_h(e.databaseInfo.databaseId),n=function(a){return new Zx(a)}(e.databaseInfo);return function(a,l,c,h){return new rR(a,l,c,h)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,a,l,c){return new sR(n,i,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>x0(this.syncEngine,t,0),function(){return S0.C()?new S0:new Jx}())}createSyncEngine(e,t){return function(i,a,l,c,h,d,v){const g=new CR(i,a,l,c,h,d);return v&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Qe(i);Oe(Js,"RemoteStore shutting down."),a.aa.add(5),await ql(a),a.ca.shutdown(),a.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Um.provider={build:()=>new Um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class VR{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=F1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async l=>{Oe(hs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(n,l=>(Oe(hs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cg(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Od(r,e){r.asyncQueue.verifyOperationInProgress(),Oe(hs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await kT(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function P0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await UR(r);Oe(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>I0(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>I0(e.remoteStore,i)),r._onlineComponents=e}async function UR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Oe(hs,"Using user provided OfflineComponentProvider");try{await Od(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ea("Error using user provided cache. Falling back to memory cache: "+t),await Od(r,new Qc)}}else Oe(hs,"Using default OfflineComponentProvider"),await Od(r,new FR(void 0));return r._offlineComponents}async function kg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Oe(hs,"Using user provided OnlineComponentProvider"),await P0(r,r._uninitializedComponentsProvider._online)):(Oe(hs,"Using default OnlineComponentProvider"),await P0(r,new Um))),r._onlineComponents}function BR(r){return kg(r).then(e=>e.syncEngine)}function qR(r){return kg(r).then(e=>e.datastore)}async function Bm(r){const e=await kg(r),t=e.eventManager;return t.onListen=IR.bind(null,e.syncEngine),t.onUnlisten=kR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xR.bind(null,e.syncEngine),t}function zR(r,e,t={}){const n=new ui;return r.asyncQueue.enqueueAndForget(async()=>function(a,l,c,h,d){const v=new JT({next:p=>{v.yu(),l.enqueueAndForget(()=>VT(a,g)),p.fromCache&&h.source==="server"?d.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new UT(c,v,{includeMetadataChanges:!0,Fa:!0});return FT(a,g)}(await Bm(r),r.asyncQueue,e,t,n)),n.promise}function HR(r,e,t){const n=new ui;return r.asyncQueue.enqueueAndForget(async()=>{try{const i=await qR(r);n.resolve(async function(l,c,h){var d;const v=Qe(l),{request:g,yt:p,parent:y}=cx(v.serializer,Rk(c),h);v.connection.Bo||delete g.parent;const w=(await v.Wo("RunAggregationQuery",v.serializer.databaseId,y,g,1)).filter(T=>!!T.result);ft(w.length===1,64727);const S=(d=w[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(S).reduce((T,E)=>(T[p[E]]=S[E],T),{})}(i,e,t))}catch(i){n.reject(i)}}),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(r,e,t){if(!t)throw new Ne(_e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $R(r,e,t,n){if(e===!0&&n===!0)throw new Ne(_e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function N0(r){if(!qe.isDocumentKey(r))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function L0(r){if(qe.isDocumentKey(r))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Th(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ge(12329,{type:typeof r})}function er(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Th(r);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function WR(r,e){if(e<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firestore.googleapis.com",D0=!0;class j0{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XT,this.ssl=D0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:D0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ex)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ne(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ne(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ne(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sh{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new JA;switch(n.type){case"firstParty":return new ZA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=O0.get(t);n&&(Oe("ComponentProvider","Removing Datastore"),O0.delete(t),n.terminate())}(this),Promise.resolve()}}function KR(r,e,t,n={}){var i;r=er(r,Sh);const a=la(e),l=r._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:r._getEmulatorOptions()}),h=`${e}:${t}`;a&&Zm(`https://${h}`),l.host!==XT&&l.host!==h&&ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:h,ssl:a,emulatorOptions:n});if(!Ws(d,c)&&(r._setSettings(d),n.mockUserToken)){let v,g;if(typeof n.mockUserToken=="string")v=n.mockUserToken,g=fn.MOCK_USER;else{v=S1(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new fn(p)}r._authCredentials=new QA(new j1(v,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vi(this.firestore,e,this._query)}}class wn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class is extends vi{constructor(e,t,n){super(e,t,ug(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new qe(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function GR(r,e,...t){if(r=vt(r),YT("collection","path",e),r instanceof Sh){const n=Et.fromString(e,...t);return L0(n),new is(r,null,n)}{if(!(r instanceof wn||r instanceof is))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Et.fromString(e,...t));return L0(n),new is(r.firestore,null,n)}}function JR(r,e,...t){if(r=vt(r),arguments.length===1&&(e=F1.newId()),YT("doc","path",e),r instanceof Sh){const n=Et.fromString(e,...t);return N0(n),new wn(r,null,new qe(n))}{if(!(r instanceof wn||r instanceof is))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Et.fromString(e,...t));return N0(n),new wn(r.firestore,r instanceof is?r.converter:null,new qe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="AsyncQueue";class F0{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new RT(this,"async_queue_retry"),this.ju=()=>{const n=Pd();n&&Oe(M0,"Visibility state changed to "+n.visibilityState),this.y_.A_()},this.Hu=e;const t=Pd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Pd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ui;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ha(e))throw e;Oe(M0,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(n=>{throw this.Ku=n,this.Wu=!1,pi("INTERNAL UNHANDLED ERROR: ",V0(n)),n}).then(n=>(this.Wu=!1,n))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=Sg.createAndSchedule(this,e,t,n,a=>this.Xu(a));return this.Uu.push(i),i}Ju(){this.Ku&&Ge(47125,{ec:V0(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function V0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(r,["next","error","complete"])}class fs extends Sh{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new F0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F0(e),this._firestoreClient=void 0,await e}}}function QR(r,e){const t=typeof r=="object"?r:ng(),n=typeof r=="string"?r:qc,i=ch(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=w1("firestore");a&&KR(i,...a)}return i}function Ch(r){if(r._terminated)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YR(r),r._firestoreClient}function YR(r){var e,t,n;const i=r._freezeSettings(),a=function(c,h,d,v){return new mk(c,h,d,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,QT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new VR(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class ZR{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa(on.fromBase64String(e))}catch(t){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oa(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=/^__.*__$/;class tP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ul(e,this.data,t,this.fieldTransforms)}}class ZT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{oc:r})}}class Pg{constructor(e,t,n,i,a,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this._c(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:n,cc:!1});return i.lc(e),i}hc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:n,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Yc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(eS(this.oc)&&eP.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class nP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_h(e)}dc(e,t,n,i=!1){return new Pg({oc:e,methodName:t,Ec:n,path:rn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Og(r){const e=r._freezeSettings(),t=_h(r._databaseId);return new nP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function rP(r,e,t,n,i,a={}){const l=r.dc(a.merge||a.mergeFields?2:0,e,t,i);Lg("Data must be an object, but it was:",l,n);const c=tS(n,l);let h,d;if(a.merge)h=new Bn(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const g of a.mergeFields){const p=qm(e,g,t);if(!l.contains(p))throw new Ne(_e.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rS(v,p)||v.push(p)}h=new Bn(v),d=l.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,d=l.fieldTransforms;return new tP(new On(c),h,d)}class Ah extends bh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ah}}class Ng extends bh{_toFieldTransform(e){return new Bk(e.path,new Pl)}isEqual(e){return e instanceof Ng}}function iP(r,e,t,n){const i=r.dc(1,e,t);Lg("Data must be an object, but it was:",i,n);const a=[],l=On.empty();ds(n,(h,d)=>{const v=Dg(e,h,t);d=vt(d);const g=i.hc(v);if(d instanceof Ah)a.push(v);else{const p=Hl(d,g);p!=null&&(a.push(v),l.set(v,p))}});const c=new Bn(a);return new ZT(l,c,i.fieldTransforms)}function sP(r,e,t,n,i,a){const l=r.dc(1,e,t),c=[qm(e,n,t)],h=[i];if(a.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)c.push(qm(e,a[p])),h.push(a[p+1]);const d=[],v=On.empty();for(let p=c.length-1;p>=0;--p)if(!rS(d,c[p])){const y=c[p];let w=h[p];w=vt(w);const S=l.hc(y);if(w instanceof Ah)d.push(y);else{const T=Hl(w,S);T!=null&&(d.push(y),v.set(y,T))}}const g=new Bn(d);return new ZT(v,g,l.fieldTransforms)}function oP(r,e,t,n=!1){return Hl(t,r.dc(n?4:3,e))}function Hl(r,e){if(nS(r=vt(r)))return Lg("Unsupported field value:",e,r),tS(r,e);if(r instanceof bh)return function(n,i){if(!eS(i.oc))throw i.Tc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(n,i){const a=[];let l=0;for(const c of n){let h=Hl(c,i.Pc(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}}(r,e)}return function(n,i){if((n=vt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Fk(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Dt.fromDate(n);return{timestampValue:Kc(i.serializer,a)}}if(n instanceof Dt){const a=new Dt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Kc(i.serializer,a)}}if(n instanceof xg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof oa)return{bytesValue:vT(i.serializer,n._byteString)};if(n instanceof wn){const a=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(a))throw i.Tc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:pg(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Rg)return function(l,c){return{mapValue:{fields:{[W1]:{stringValue:K1},[zc]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Tc("VectorValues must only contain numeric values.");return cg(c.serializer,d)})}}}}}}(n,i);throw i.Tc(`Unsupported field value: ${Th(n)}`)}(r,e)}function tS(r,e){const t={};return U1(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(r,(n,i)=>{const a=Hl(i,e.uc(n));a!=null&&(t[n]=a)}),{mapValue:{fields:t}}}function nS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Dt||r instanceof xg||r instanceof oa||r instanceof wn||r instanceof bh||r instanceof Rg)}function Lg(r,e,t){if(!nS(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=Th(t);throw n==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+n)}}function qm(r,e,t){if((e=vt(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return Dg(r,e);throw Yc("Field path arguments must be of type string or ",r,!1,void 0,t)}const aP=new RegExp("[~\\*/\\[\\]]");function Dg(r,e,t){if(e.search(aP)>=0)throw Yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ih(...e.split("."))._internalPath}catch{throw Yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Yc(r,e,t,n,i){const a=n&&!n.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new Ne(_e.INVALID_ARGUMENT,c+r+h)}function rS(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lP extends iS{data(){return super.data()}}function kh(r,e){return typeof e=="string"?Dg(r,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jg{}class Mg extends jg{}function uP(r,e,...t){let n=[];e instanceof jg&&n.push(e),n=n.concat(t),function(a){const l=a.filter(h=>h instanceof Fg).length,c=a.filter(h=>h instanceof xh).length;if(l>1||l>0&&c>0)throw new Ne(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class xh extends Mg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new xh(e,t,n)}_apply(e){const t=this._parse(e);return oS(e._query,t),new vi(e.firestore,e.converter,Pm(e._query,t))}_parse(e){const t=Og(e.firestore);return function(a,l,c,h,d,v,g){let p;if(d.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){z0(g,v);const w=[];for(const S of g)w.push(q0(h,a,S));p={arrayValue:{values:w}}}else p=q0(h,a,g)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||z0(g,v),p=oP(c,l,g,v==="in"||v==="not-in");return Vt.create(d,v,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function B0(r,e,t){const n=e,i=kh("where",r);return xh._create(i,n,t)}class Fg extends jg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Tr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let l=i;const c=a.getFlattenedFilters();for(const h of c)oS(l,h),l=Pm(l,h)}(e._query,t),new vi(e.firestore,e.converter,Pm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends Mg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vg(e,t)}_apply(e){const t=function(i,a,l){if(i.startAt!==null)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rl(a,l)}(e._query,this._field,this._direction);return new vi(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new fa(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function cP(r,e="asc"){const t=e,n=kh("orderBy",r);return Vg._create(n,t)}class Ug extends Mg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Ug(e,t,n)}_apply(e){return new vi(e.firestore,e.converter,$c(e._query,this._limit,this._limitType))}}function hP(r){return WR("limit",r),Ug._create("limit",r,"F")}function q0(r,e,t){if(typeof(t=vt(t))=="string"){if(t==="")throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tT(e)&&t.indexOf("/")!==-1)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Et.fromString(t));if(!qe.isDocumentKey(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return t0(r,new qe(n))}if(t instanceof wn)return t0(r,t._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Th(t)}.`)}function z0(r,e){if(!Array.isArray(r)||r.length===0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oS(r,e){const t=function(i,a){for(const l of i)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ne(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class fP{convertValue(e,t="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return ds(e,(i,a)=>{n[i]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t[zc].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(l=>Lt(l.doubleValue));return new Rg(a)}convertGeoPoint(e){return new xg(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dh(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){const t=as(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Et.fromString(e);ft(IT(n),9688,{name:e});const i=new kl(n.get(1),n.get(3)),a=new qe(n.popFirst(5));return i.isEqual(t)||pi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}function pP(){return new XR("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aS extends iS{constructor(e,t,n,i,a,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(kh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class xc extends aS{data(e={}){return super.data(e)}}class lS{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new xc(this._firestore,this._userDataWriter,n.key,n,new gl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new xc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new gl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const h=new xc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new gl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,v=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:mP(c.type),doc:h,oldIndex:d,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:r})}}class Rh extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function gP(r){r=er(r,vi);const e=er(r.firestore,fs),t=Ch(e),n=new Rh(e);return sS(r._query),zR(t,r._query).then(i=>new lS(e,n,r,i))}function yP(r,e,t){r=er(r,wn);const n=er(r.firestore,fs),i=dP(r.converter,e,t);return Bg(n,[rP(Og(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Er.none())])}function vP(r,e,t,...n){r=er(r,wn);const i=er(r.firestore,fs),a=Og(i);let l;return l=typeof(e=vt(e))=="string"||e instanceof Ih?sP(a,"updateDoc",r._key,e,t,n):iP(a,"updateDoc",r._key,e),Bg(i,[l.toMutation(r._key,Er.exists(!0))])}function H0(r){return Bg(er(r.firestore,fs),[new hg(r._key,Er.none())])}function _P(r,...e){var t,n,i;r=vt(r);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||U0(e[l])||(a=e[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(U0(e[l])){const g=e[l];e[l]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[l+1]=(n=g.error)===null||n===void 0?void 0:n.bind(g),e[l+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let h,d,v;if(r instanceof wn)d=er(r.firestore,fs),v=ug(r._key.path),h={next:g=>{e[l]&&e[l](wP(d,r,g))},error:e[l+1],complete:e[l+2]};else{const g=er(r,vi);d=er(g.firestore,fs),v=g._query;const p=new Rh(d);h={next:y=>{e[l]&&e[l](new lS(d,p,g,y))},error:e[l+1],complete:e[l+2]},sS(r._query)}return function(p,y,w,S){const T=new JT(S),E=new UT(y,T,w);return p.asyncQueue.enqueueAndForget(async()=>FT(await Bm(p),E)),()=>{T.yu(),p.asyncQueue.enqueueAndForget(async()=>VT(await Bm(p),E))}}(Ch(d),v,c,h)}function Bg(r,e){return function(n,i){const a=new ui;return n.asyncQueue.enqueueAndForget(async()=>RR(await BR(n),i,a)),a.promise}(Ch(r),e)}function wP(r,e,t){const n=t.docs.get(e._key),i=new Rh(r);return new aS(r,i,e._key,n,new gl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(r){return TP(r,{count:pP()})}function TP(r,e){const t=er(r.firestore,fs),n=Ch(t),i=dk(e,(a,l)=>new Jk(l,a.aggregateType,a._internalFieldPath));return HR(n,r._query,i).then(a=>function(c,h,d){const v=new Rh(c);return new ZR(h,v,d)}(t,r,a))}function SP(){return new Ng("serverTimestamp")}(function(e,t=!0){(function(i){ua=i})(Zs),Ks(new ss("firestore",(n,{instanceIdentifier:i,options:a})=>{const l=n.getProvider("app").getImmediate(),c=new fs(new YA(n.getProvider("auth-internal")),new ek(l,n.getProvider("app-check-internal")),function(d,v){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(d.options.projectId,v)}(l,i),l);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Mr(z_,H_,e),Mr(z_,H_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebasestorage.googleapis.com",cS="storageBucket",CP=2*60*1e3,IP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt extends Hr{constructor(e,t,n=0){super(Nd(e),`Firebase Storage: ${t} (${Nd(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function Nd(r){return"storage/"+r}function qg(){const r="An unknown error occurred, please check the error payload for server response.";return new Pt(Rt.UNKNOWN,r)}function bP(r){return new Pt(Rt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function AP(r){return new Pt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kP(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Rt.UNAUTHENTICATED,r)}function xP(){return new Pt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RP(r){return new Pt(Rt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function PP(){return new Pt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OP(){return new Pt(Rt.CANCELED,"User canceled the upload/download.")}function NP(r){return new Pt(Rt.INVALID_URL,"Invalid URL '"+r+"'.")}function LP(r){return new Pt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function DP(){return new Pt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cS+"' property when initializing the app?")}function jP(){return new Pt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MP(){return new Pt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function FP(r){return new Pt(Rt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zm(r){return new Pt(Rt.INVALID_ARGUMENT,r)}function hS(){return new Pt(Rt.APP_DELETED,"The Firebase app was deleted.")}function VP(r){return new Pt(Rt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sl(r,e){return new Pt(Rt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function ll(r){throw new Pt(Rt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=qn.makeFromUrl(e,t)}catch{return new qn(e,"")}if(n.path==="")return n;throw LP(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const v="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${g}/${v}/b/${i}/o${p}`,"i"),w={bucket:1,path:3},S=t===uS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",E=new RegExp(`^https?://${S}/${i}/${T}`,"i"),N=[{regex:c,indices:h,postModify:a},{regex:y,indices:w,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<N.length;I++){const F=N[I],U=F.regex.exec(e);if(U){const P=U[F.indices.bucket];let _=U[F.indices.path];_||(_=""),n=new qn(P,_),F.postModify(n);break}}if(n==null)throw NP(e);return n}}class UP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(r,e,t){let n=1,i=null,a=null,l=!1,c=0;function h(){return c===2}let d=!1;function v(...T){d||(d=!0,e.apply(null,T))}function g(T){i=setTimeout(()=>{i=null,r(y,h())},T)}function p(){a&&clearTimeout(a)}function y(T,...E){if(d){p();return}if(T){p(),v.call(null,T,...E);return}if(h()||l){p(),v.call(null,T,...E);return}n<64&&(n*=2);let N;c===1?(c=2,N=0):N=(n+Math.random())*1e3,g(N)}let w=!1;function S(T){w||(w=!0,p(),!d&&(i!==null?(T||(c=2),clearTimeout(i),g(0)):T||(c=1)))}return g(0),a=setTimeout(()=>{l=!0,S(!0)},t),S}function qP(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(r){return r!==void 0}function HP(r){return typeof r=="object"&&!Array.isArray(r)}function zg(r){return typeof r=="string"||r instanceof String}function $0(r){return Hg()&&r instanceof Blob}function Hg(){return typeof Blob<"u"}function W0(r,e,t,n){if(n<e)throw zm(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw zm(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function fS(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var $s;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})($s||($s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t,n,i,a,l,c,h,d,v,g,p=!0,y=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=v,this.connectionFactory_=g,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,S)=>{this.resolve_=w,this.reject_=S,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new wc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const h=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===$s.NO_ERROR,h=a.getStatus();if(!c||$P(h,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===$s.ABORT;n(!1,new wc(!1,null,v));return}const d=this.successCodes_.indexOf(h)!==-1;n(!0,new wc(d,a))})},t=(n,i)=>{const a=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());zP(h)?a(h):a()}catch(h){l(h)}else if(c!==null){const h=qg();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?hS():OP();l(h)}else{const h=PP();l(h)}};this.canceled_?t(!1,new wc(!1,null,!0)):this.backoffId_=BP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function KP(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function GP(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JP(r,e){e&&(r["X-Firebase-GMPID"]=e)}function QP(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function YP(r,e,t,n,i,a,l=!0,c=!1){const h=fS(r.urlParams),d=r.url+h,v=Object.assign({},r.headers);return JP(v,e),KP(v,t),GP(v,a),QP(v,n),new WP(d,r.method,v,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ZP(...r){const e=XP();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(Hg())return new Blob(r);throw new Pt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eO(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(r){if(typeof atob>"u")throw FP("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ld{constructor(e,t){this.data=e,this.contentType=t||null}}function nO(r,e){switch(r){case jr.RAW:return new Ld(dS(e));case jr.BASE64:case jr.BASE64URL:return new Ld(pS(r,e));case jr.DATA_URL:return new Ld(iO(e),sO(e))}throw qg()}function dS(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=n,l=r.charCodeAt(++t);n=65536|(a&1023)<<10|l&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function rO(r){let e;try{e=decodeURIComponent(r)}catch{throw Sl(jr.DATA_URL,"Malformed data URL.")}return dS(e)}function pS(r,e){switch(r){case jr.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Sl(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jr.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Sl(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=tO(e)}catch(i){throw i.message.includes("polyfill")?i:Sl(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class mS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Sl(jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=oO(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function iO(r){const e=new mS(r);return e.base64?pS(jr.BASE64,e.rest):rO(e.rest)}function sO(r){return new mS(r).contentType}function oO(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){let n=0,i="";$0(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if($0(this.data_)){const n=this.data_,i=eO(n,e,t);return i===null?null:new Ji(i)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ji(n,!0)}}static getBlob(...e){if(Hg()){const t=e.map(n=>n instanceof Ji?n.data_:n);return new Ji(ZP.apply(null,t))}else{const t=e.map(l=>zg(l)?nO(jr.RAW,l).data:l.data_);let n=0;t.forEach(l=>{n+=l.byteLength});const i=new Uint8Array(n);let a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[a++]=l[c]}),new Ji(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r){let e;try{e=JSON.parse(r)}catch{return null}return HP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function lO(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function yS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(r,e){return e}class _n{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||uO}}let Ec=null;function cO(r){return!zg(r)||r.length<2?r:yS(r)}function vS(){if(Ec)return Ec;const r=[];r.push(new _n("bucket")),r.push(new _n("generation")),r.push(new _n("metageneration")),r.push(new _n("name","fullPath",!0));function e(a,l){return cO(l)}const t=new _n("name");t.xform=e,r.push(t);function n(a,l){return l!==void 0?Number(l):l}const i=new _n("size");return i.xform=n,r.push(i),r.push(new _n("timeCreated")),r.push(new _n("updated")),r.push(new _n("md5Hash",null,!0)),r.push(new _n("cacheControl",null,!0)),r.push(new _n("contentDisposition",null,!0)),r.push(new _n("contentEncoding",null,!0)),r.push(new _n("contentLanguage",null,!0)),r.push(new _n("contentType",null,!0)),r.push(new _n("metadata","customMetadata",!0)),Ec=r,Ec}function hO(r,e){function t(){const n=r.bucket,i=r.fullPath,a=new qn(n,i);return e._makeStorageReference(a)}Object.defineProperty(r,"ref",{get:t})}function fO(r,e,t){const n={};n.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];n[l.local]=l.xform(n,e[l.server])}return hO(n,r),n}function _S(r,e,t){const n=gS(e);return n===null?null:fO(r,n,t)}function dO(r,e,t,n){const i=gS(e);if(i===null||!zg(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(d=>{const v=r.bucket,g=r.fullPath,p="/b/"+l(v)+"/o/"+l(g),y=Ph(p,t,n),w=fS({alt:"media",token:d});return y+w})[0]}function pO(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(t[a.server]=r[a.local])}return JSON.stringify(t)}class $g{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(r){if(!r)throw qg()}function mO(r,e){function t(n,i){const a=_S(r,i,e);return wS(a!==null),a}return t}function gO(r,e){function t(n,i){const a=_S(r,i,e);return wS(a!==null),dO(a,i,r.host,r._protocol)}return t}function ES(r){function e(t,n){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=xP():i=kP():t.getStatus()===402?i=AP(r.bucket):t.getStatus()===403?i=RP(r.path):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}return e}function TS(r){const e=ES(r);function t(n,i){let a=e(n,i);return n.getStatus()===404&&(a=bP(r.path)),a.serverResponse=i.serverResponse,a}return t}function yO(r,e,t){const n=e.fullServerUrl(),i=Ph(n,r.host,r._protocol),a="GET",l=r.maxOperationRetryTime,c=new $g(i,a,gO(r,t),l);return c.errorHandler=TS(e),c}function vO(r,e){const t=e.fullServerUrl(),n=Ph(t,r.host,r._protocol),i="DELETE",a=r.maxOperationRetryTime;function l(h,d){}const c=new $g(n,i,l,a);return c.successCodes=[200,204],c.errorHandler=TS(e),c}function _O(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function wO(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=_O(null,e)),n}function EO(r,e,t,n,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let N="";for(let I=0;I<2;I++)N=N+Math.random().toString().slice(2);return N}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const d=wO(e,n,i),v=pO(d,t),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+h+"--",y=Ji.getBlob(g,n,p);if(y===null)throw jP();const w={name:d.fullPath},S=Ph(a,r.host,r._protocol),T="POST",E=r.maxUploadRetryTime,b=new $g(S,T,mO(r,t),E);return b.urlParams=w,b.headers=l,b.body=y.uploadData(),b.errorHandler=ES(e),b}class TO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i,a){if(this.sent_)throw ll("cannot .send() more than once");if(la(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ll("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ll("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ll("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ll("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class SO extends TO{initXhr(){this.xhr_.responseType="text"}}function Wg(){return new SO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){this._service=e,t instanceof qn?this._location=t:this._location=qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qs(e,t)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yS(this._location.path)}get storage(){return this._service}get parent(){const e=aO(this._location.path);if(e===null)return null;const t=new qn(this._location.bucket,e);return new Qs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw VP(e)}}function CO(r,e,t){r._throwIfRoot("uploadBytes");const n=EO(r.storage,r._location,vS(),new Ji(e,!0),t);return r.storage.makeRequestWithTokens(n,Wg).then(i=>({metadata:i,ref:r}))}function IO(r){r._throwIfRoot("getDownloadURL");const e=yO(r.storage,r._location,vS());return r.storage.makeRequestWithTokens(e,Wg).then(t=>{if(t===null)throw MP();return t})}function bO(r){r._throwIfRoot("deleteObject");const e=vO(r.storage,r._location);return r.storage.makeRequestWithTokens(e,Wg)}function AO(r,e){const t=lO(r._location.path,e),n=new qn(r._location.bucket,t);return new Qs(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(r){return/^[A-Za-z]+:\/\//.test(r)}function xO(r,e){return new Qs(r,e)}function SS(r,e){if(r instanceof Kg){const t=r;if(t._bucket==null)throw DP();const n=new Qs(t,t._bucket);return e!=null?SS(n,e):n}else return e!==void 0?AO(r,e):r}function RO(r,e){if(e&&kO(e)){if(r instanceof Kg)return xO(r,e);throw zm("To use ref(service, url), the first argument must be a Storage instance.")}else return SS(r,e)}function K0(r,e){const t=e==null?void 0:e[cS];return t==null?null:qn.makeFromBucketSpec(t,r)}function PO(r,e,t,n={}){r.host=`${e}:${t}`;const i=la(e);i&&Zm(`https://${r.host}`),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(r._overrideAuthToken=typeof a=="string"?a:S1(a,r.app.options.projectId))}class Kg{constructor(e,t,n,i,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=uS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CP,this._maxUploadRetryTime=IP,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=K0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=K0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qs(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new UP(hS());{const l=YP(e,this._appId,n,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const G0="@firebase/storage",J0="0.13.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="storage";function OO(r,e,t){return r=vt(r),CO(r,e,t)}function NO(r){return r=vt(r),IO(r)}function LO(r){return r=vt(r),bO(r)}function Dd(r,e){return r=vt(r),RO(r,e)}function DO(r=ng(),e){r=vt(r);const n=ch(r,CS).getImmediate({identifier:e}),i=w1("storage");return i&&jO(n,...i),n}function jO(r,e,t,n={}){PO(r,e,t,n)}function MO(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Kg(t,n,i,e,Zs)}function FO(){Ks(new ss(CS,MO,"PUBLIC").setMultipleInstances(!0)),Mr(G0,J0,""),Mr(G0,J0,"esm2017")}FO();function Gg(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function IS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VO=IS,bS=new Fl("auth","Firebase",IS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new eg("@firebase/auth");function UO(r,...e){Xc.logLevel<=it.WARN&&Xc.warn(`Auth (${Zs}): ${r}`,...e)}function Rc(r,...e){Xc.logLevel<=it.ERROR&&Xc.error(`Auth (${Zs}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(r,...e){throw Jg(r,...e)}function Ur(r,...e){return Jg(r,...e)}function AS(r,e,t){const n=Object.assign(Object.assign({},VO()),{[e]:t});return new Fl("auth","Firebase",n).create(e,{appName:r.name})}function ci(r){return AS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jg(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return bS.create(r,...e)}function Ke(r,e,...t){if(!r)throw Jg(e,...t)}function ai(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Rc(e),new Error(e)}function gi(r,e){r||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function BO(){return Q0()==="http:"||Q0()==="https:"}function Q0(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BO()||bb()||"connection"in navigator)?navigator.onLine:!0}function zO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t){this.shortDelay=e,this.longDelay=t,gi(t>e,"Short delay should be less than long delay!"),this.isMobile=Sb()||Ab()}get(){return qO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(r,e){gi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WO=new $l(3e4,6e4);function _i(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function $r(r,e,t,n,i={}){return xS(r,i,async()=>{let a={},l={};n&&(e==="GET"?l=n:a={body:JSON.stringify(n)});const c=Vl(Object.assign({key:r.config.apiKey},l)).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:h},a);return Ib()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&la(r.emulatorConfig.host)&&(d.credentials="include"),kS.fetch()(await RS(r,r.config.apiHost,t,c),d)})}async function xS(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},HO),e);try{const i=new GO(r),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Tc(r,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Tc(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw Tc(r,"user-disabled",l);const v=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw AS(r,v,d);Sr(r,v)}}catch(i){if(i instanceof Hr)throw i;Sr(r,"network-request-failed",{message:String(i)})}}async function Wl(r,e,t,n,i={}){const a=await $r(r,e,t,n,i);return"mfaPendingCredential"in a&&Sr(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function RS(r,e,t,n){const i=`${e}${t}?${n}`,a=r,l=a.config.emulator?Qg(r.config,i):`${r.config.apiScheme}://${i}`;return $O.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function KO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ur(this.auth,"network-request-failed")),WO.get())})}}function Tc(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Ur(r,e,n);return i.customData._tokenResponse=t,i}function Y0(r){return r!==void 0&&r.enterprise!==void 0}class JO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function QO(r,e){return $r(r,"GET","/v2/recaptchaConfig",_i(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(r,e){return $r(r,"POST","/v1/accounts:delete",e)}async function Zc(r,e){return $r(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XO(r,e=!1){const t=vt(r),n=await t.getIdToken(e),i=Yg(n);Ke(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Cl(jd(i.auth_time)),issuedAtTime:Cl(jd(i.iat)),expirationTime:Cl(jd(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function jd(r){return Number(r)*1e3}function Yg(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const i=v1(t);return i?JSON.parse(i):(Rc("Failed to decode base64 JWT payload"),null)}catch(i){return Rc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function X0(r){const e=Yg(r);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Hr&&ZO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function ZO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(r){var e;const t=r.auth,n=await r.getIdToken(),i=await aa(r,Zc(t,{idToken:n}));Ke(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?PS(a.providerUserInfo):[],c=nN(r.providerData,l),h=r.isAnonymous,d=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),v=h?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new $m(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(r,g)}async function tN(r){const e=vt(r);await eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nN(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function PS(r){return r.map(e=>{var{providerId:t}=e,n=Gg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(r,e){const t=await xS(r,{},async()=>{const n=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=r.config,l=await RS(r,i,"/v1/token",`key=${a}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",kS.fetch()(l,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iN(r,e){return $r(r,"POST","/v2/accounts:revokeToken",_i(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=X0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:a}=await rN(e,t);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:a}=t,l=new Yo;return n&&(Ke(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(Ke(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r,e){Ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class wr{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,a=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $m(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await aa(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XO(this,e)}reload(){return tN(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await eh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(ci(this.auth));const e=await this.getIdToken();return await aa(this,YO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,a,l,c,h,d,v;const g=(n=t.displayName)!==null&&n!==void 0?n:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,y=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,w=(l=t.photoURL)!==null&&l!==void 0?l:void 0,S=(c=t.tenantId)!==null&&c!==void 0?c:void 0,T=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,b=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:N,emailVerified:I,isAnonymous:F,providerData:U,stsTokenManager:P}=t;Ke(N&&P,e,"internal-error");const _=Yo.fromJSON(this.name,P);Ke(typeof N=="string",e,"internal-error"),Wi(g,e.name),Wi(p,e.name),Ke(typeof I=="boolean",e,"internal-error"),Ke(typeof F=="boolean",e,"internal-error"),Wi(y,e.name),Wi(w,e.name),Wi(S,e.name),Wi(T,e.name),Wi(E,e.name),Wi(b,e.name);const A=new wr({uid:N,auth:e,email:p,emailVerified:I,displayName:g,isAnonymous:F,photoURL:w,phoneNumber:y,tenantId:S,stsTokenManager:_,createdAt:E,lastLoginAt:b});return U&&Array.isArray(U)&&(A.providerData=U.map(k=>Object.assign({},k))),T&&(A._redirectEventId=T),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new Yo;i.updateFromServerResponse(t);const a=new wr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await eh(a),a}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Ke(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?PS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Yo;c.updateFromIdToken(n);const h=new wr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $m(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Map;function li(r){gi(r instanceof Function,"Expected a class definition");let e=Z0.get(r);return e?(gi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Z0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OS.type="NONE";const ew=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r,e,t){return`firebase:${r}:${e}:${t}`}class Xo{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Pc(this.userKey,i.apiKey,a),this.fullPersistenceKey=Pc("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zc(this.auth,{idToken:e}).catch(()=>{});return t?wr._fromGetAccountInfoResponse(this.auth,t,e):null}return wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Xo(li(ew),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||li(ew);const l=Pc(n,e.config.apiKey,e.name);let c=null;for(const d of t)try{const v=await d._get(l);if(v){let g;if(typeof v=="string"){const p=await Zc(e,{idToken:v}).catch(()=>{});if(!p)break;g=await wr._fromGetAccountInfoResponse(e,p,v)}else g=wr._fromJSON(e,v);d!==a&&(c=g),a=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Xo(a,e,n):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new Xo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FS(e))return"Blackberry";if(VS(e))return"Webos";if(LS(e))return"Safari";if((e.includes("chrome/")||DS(e))&&!e.includes("edge/"))return"Chrome";if(MS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function NS(r=pn()){return/firefox\//i.test(r)}function LS(r=pn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DS(r=pn()){return/crios\//i.test(r)}function jS(r=pn()){return/iemobile/i.test(r)}function MS(r=pn()){return/android/i.test(r)}function FS(r=pn()){return/blackberry/i.test(r)}function VS(r=pn()){return/webos/i.test(r)}function Xg(r=pn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function sN(r=pn()){var e;return Xg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oN(){return kb()&&document.documentMode===10}function US(r=pn()){return Xg(r)||MS(r)||VS(r)||FS(r)||/windows phone/i.test(r)||jS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(r,e=[]){let t;switch(r){case"Browser":t=tw(pn());break;case"Worker":t=`${tw(pn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zs}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((l,c)=>{try{const h=e(a);l(h)}catch(h){c(h)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(r,e={}){return $r(r,"GET","/v2/passwordPolicy",_i(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=6;class cN{constructor(e){var t,n,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:uN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,a,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(n=h.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nw(this),this.idTokenSubscription=new nw(this),this.beforeStateQueue=new aN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var n,i,a;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zc(this,{idToken:e}),n=await wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await eh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(ci(this));const t=e?vt(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lN(this),t=new cN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await iN(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&UO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ms(r){return vt(r)}class nw{constructor(e){this.auth=e,this.observer=null,this.addObserver=jb(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fN(r){Oh=r}function qS(r){return Oh.loadJS(r)}function dN(){return Oh.recaptchaEnterpriseScript}function pN(){return Oh.gapiScript}function mN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class gN{constructor(){this.enterprise=new yN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class yN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vN="recaptcha-enterprise",zS="NO_RECAPTCHA";class _N{constructor(e){this.type=vN,this.auth=ms(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{QO(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new JO(h);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,l(d.siteKey)}}).catch(h=>{c(h)})})}function i(a,l,c){const h=window.grecaptcha;Y0(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l(zS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gN().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{n(this.auth).then(c=>{if(!t&&Y0(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=dN();h.length!==0&&(h+=c),qS(h).then(()=>{i(c,a,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function rw(r,e,t,n=!1,i=!1){const a=new _N(r);let l;if(i)l=zS;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function th(r,e,t,n,i){var a;if(!((a=r._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await rw(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await rw(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(r,e){const t=ch(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ws(a,e??{}))return i;Sr(i,"already-initialized")}return t.initialize({options:e})}function EN(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function TN(r,e,t){const n=ms(r);Ke(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=HS(e),{host:l,port:c}=SN(e),h=c===null?"":`:${c}`,d={url:`${a}//${l}${h}/`},v=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Ke(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ke(Ws(d,n.config.emulator)&&Ws(v,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=v,n.settings.appVerificationDisabledForTesting=!0,CN(),la(l)&&Zm(`${a}//${l}${h}`)}function HS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function SN(r){const e=HS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:iw(n.substr(a.length+1))}}else{const[a,l]=n.split(":");return{host:a,port:iw(l)}}}function iw(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function CN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function IN(r,e){return $r(r,"POST","/v1/accounts:update",e)}async function bN(r,e){return $r(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(r,e){return Wl(r,"POST","/v1/accounts:signInWithPassword",_i(r,e))}async function kN(r,e){return $r(r,"POST","/v1/accounts:sendOobCode",_i(r,e))}async function xN(r,e){return kN(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(r,e){return Wl(r,"POST","/v1/accounts:signInWithEmailLink",_i(r,e))}async function PN(r,e){return Wl(r,"POST","/v1/accounts:signInWithEmailLink",_i(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Zg{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ll(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ll(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(e,t,"signInWithPassword",AN);case"emailLink":return RN(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(e,n,"signUpPassword",bN);case"emailLink":return PN(e,{idToken:t,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(r,e){return Wl(r,"POST","/v1/accounts:signInWithIdp",_i(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="http://localhost";class Ys extends Zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,a=Gg(t,["providerId","signInMethod"]);if(!n||!i)return null;const l=new Ys(n,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:ON,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LN(r){const e=hl(fl(r)).link,t=e?hl(fl(e)).deep_link_id:null,n=hl(fl(r)).deep_link_id;return(n?hl(fl(n)).link:null)||n||t||e||r}class ey{constructor(e){var t,n,i,a,l,c;const h=hl(fl(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,v=(n=h.oobCode)!==null&&n!==void 0?n:null,g=NN((i=h.mode)!==null&&i!==void 0?i:null);Ke(d&&v&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=v,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=h.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=LN(e);try{return new ey(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.providerId=pa.PROVIDER_ID}static credential(e,t){return Ll._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ey.parseLink(t);return Ke(n,"argument-error"),Ll._fromEmailAndCode(e,n.code,n.tenantId)}}pa.PROVIDER_ID="password";pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends $S{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Kl{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ys._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Yi.credential(t,n)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Kl{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.GITHUB_SIGN_IN_METHOD="github.com";Xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Kl{constructor(){super("twitter.com")}static credential(e,t){return Ys._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Zi.credential(t,n)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r,e){return Wl(r,"POST","/v1/accounts:signUp",_i(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const a=await wr._fromIdTokenResponse(e,n,i),l=sw(n);return new Xs({user:a,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=sw(n);return new Xs({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function sw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Hr{constructor(e,t,n,i){var a;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new nh(e,t,n,i)}}function WS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(r,a,e,n):a})}async function jN(r,e,t=!1){const n=await aa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Xs._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(r,e,t=!1){const{auth:n}=r;if(Un(n.app))return Promise.reject(ci(n));const i="reauthenticate";try{const a=await aa(r,WS(n,i,e,r),t);Ke(a.idToken,n,"internal-error");const l=Yg(a.idToken);Ke(l,n,"internal-error");const{sub:c}=l;return Ke(r.uid===c,n,"user-mismatch"),Xs._forOperation(r,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Sr(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(r,e,t=!1){if(Un(r.app))return Promise.reject(ci(r));const n="signIn",i=await WS(r,n,e),a=await Xs._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(a.user),a}async function FN(r,e){return KS(ms(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(r){const e=ms(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VN(r,e,t){const n=ms(r);await th(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",xN)}async function UN(r,e,t){if(Un(r.app))return Promise.reject(ci(r));const n=ms(r),l=await th(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DN).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&GS(r),h}),c=await Xs._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(c.user),c}function ow(r,e,t){return Un(r.app)?Promise.reject(ci(r)):FN(vt(r),pa.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&GS(r),n})}function BN(r,e){return qN(vt(r),null,e)}async function qN(r,e,t){const{auth:n}=r,a={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const l=await aa(r,IN(n,a));await r._updateTokensIfNecessary(l,!0)}function zN(r,e,t,n){return vt(r).onIdTokenChanged(e,t,n)}function HN(r,e,t){return vt(r).beforeAuthStateChanged(e,t)}function Md(r,e,t,n){return vt(r).onAuthStateChanged(e,t,n)}function aw(r){return vt(r).signOut()}async function $N(r){return vt(r).delete()}const rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,"1"),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1e3,KN=10;class QS extends JS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=US(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},a=this.storage.getItem(n);oN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KN):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QS.type="LOCAL";const GN=QS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends JS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}YS.type="SESSION";const XS=YS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Nh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(l).map(async d=>d(t.origin,a)),h=await JN(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const d=ty("",20);i.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(v),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function YN(r){Br().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function XN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function eL(){return ZS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebaseLocalStorageDb",tL=1,ih="firebaseLocalStorage",tC="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lh(r,e){return r.transaction([ih],e?"readwrite":"readonly").objectStore(ih)}function nL(){const r=indexedDB.deleteDatabase(eC);return new Gl(r).toPromise()}function Wm(){const r=indexedDB.open(eC,tL);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(ih,{keyPath:tC})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(ih)?e(n):(n.close(),await nL(),e(await Wm()))})})}async function lw(r,e,t){const n=Lh(r,!0).put({[tC]:e,value:t});return new Gl(n).toPromise()}async function rL(r,e){const t=Lh(r,!1).get(e),n=await new Gl(t).toPromise();return n===void 0?null:n.value}function uw(r,e){const t=Lh(r,!0).delete(e);return new Gl(t).toPromise()}const iL=800,sL=3;class nC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>sL)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(eL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XN(),!this.activeServiceWorker)return;this.sender=new QN(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wm();return await lw(e,rh,"1"),await uw(e,rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>lw(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>rL(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Lh(i,!1).getAll();return new Gl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nC.type="LOCAL";const oL=nC;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(r,e){return e?li(e):(Ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends Zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lL(r){return KS(r.auth,new ny(r),r.bypassAuthState)}function uL(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),MN(t,new ny(r),r.bypassAuthState)}async function cL(r){const{auth:e,user:t}=r;return Ke(t,e,"internal-error"),jN(t,new ny(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lL;case"linkViaPopup":case"linkViaRedirect":return cL;case"reauthViaPopup":case"reauthViaRedirect":return uL;default:Sr(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new $l(2e3,1e4);class Jo extends rC{constructor(e,t,n,i,a){super(e,t,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Jo.currentPopupAction&&Jo.currentPopupAction.cancel(),Jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hL.get())};e()}}Jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="pendingRedirect",Oc=new Map;class dL extends rC{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const n=await pL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pL(r,e){const t=yL(e),n=gL(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function mL(r,e){Oc.set(r._key(),e)}function gL(r){return li(r._redirectPersistence)}function yL(r){return Pc(fL,r.config.apiKey,r.name)}async function vL(r,e,t=!1){if(Un(r.app))return Promise.reject(ci(r));const n=ms(r),i=aL(n,e),l=await new dL(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=10*60*1e3;class wL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!iC(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ur(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_L&&this.cachedEventUids.clear(),this.cachedEventUids.has(cw(e))}saveEventToCache(e){this.cachedEventUids.add(cw(e)),this.lastProcessedEventTime=Date.now()}}function cw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function iC({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EL(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iC(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(r,e={}){return $r(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CL=/^https?/;async function IL(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TL(r);for(const t of e)try{if(bL(t))return}catch{}Sr(r,"unauthorized-domain")}function bL(r){const e=Hm(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!CL.test(t))return!1;if(SL.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new $l(3e4,6e4);function hw(){const r=Br().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function kL(r){return new Promise((e,t)=>{var n,i,a;function l(){hw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hw(),t(Ur(r,"network-request-failed"))},timeout:AL.get()})}if(!((i=(n=Br().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Br().gapi)===null||a===void 0)&&a.load)l();else{const c=mN("iframefcb");return Br()[c]=()=>{gapi.load?l():t(Ur(r,"network-request-failed"))},qS(`${pN()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Nc=null,e})}let Nc=null;function xL(r){return Nc=Nc||kL(r),Nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new $l(5e3,15e3),PL="__/auth/iframe",OL="emulator/auth/iframe",NL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DL(r){const e=r.config;Ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Qg(e,OL):`https://${r.config.authDomain}/${PL}`,n={apiKey:e.apiKey,appName:r.name,v:Zs},i=LL.get(r.config.apiHost);i&&(n.eid=i);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Vl(n).slice(1)}`}async function jL(r){const e=await xL(r),t=Br().gapi;return Ke(t,r,"internal-error"),e.open({where:document.body,url:DL(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NL,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const l=Ur(r,"network-request-failed"),c=Br().setTimeout(()=>{a(l)},RL.get());function h(){Br().clearTimeout(c),i(n)}n.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FL=500,VL=600,UL="_blank",BL="http://localhost";class fw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qL(r,e,t,n=FL,i=VL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const h=Object.assign(Object.assign({},ML),{width:n.toString(),height:i.toString(),top:a,left:l}),d=pn().toLowerCase();t&&(c=DS(d)?UL:t),NS(d)&&(e=e||BL,h.scrollbars="yes");const v=Object.entries(h).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(sN(d)&&c!=="_self")return zL(e||"",c),new fw(null);const g=window.open(e||"",c,v);Ke(g,r,"popup-blocked");try{g.focus()}catch{}return new fw(g)}function zL(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="__/auth/handler",$L="emulator/auth/handler",WL=encodeURIComponent("fac");async function dw(r,e,t,n,i,a){Ke(r.config.authDomain,r,"auth-domain-config-required"),Ke(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Zs,eventId:i};if(e instanceof $S){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",Db(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,g]of Object.entries({}))l[v]=g}if(e instanceof Kl){const v=e.getScopes().filter(g=>g!=="");v.length>0&&(l.scopes=v.join(","))}r.tenantId&&(l.tid=r.tenantId);const c=l;for(const v of Object.keys(c))c[v]===void 0&&delete c[v];const h=await r._getAppCheckToken(),d=h?`#${WL}=${encodeURIComponent(h)}`:"";return`${KL(r)}?${Vl(c).slice(1)}${d}`}function KL({config:r}){return r.emulator?Qg(r,$L):`https://${r.authDomain}/${HL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="webStorageSupport";class GL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XS,this._completeRedirectFn=vL,this._overrideRedirectResult=mL}async _openPopup(e,t,n,i){var a;gi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await dw(e,t,n,Hm(),i);return qL(e,l,ty())}async _openRedirect(e,t,n,i){await this._originValidation(e);const a=await dw(e,t,n,Hm(),i);return YN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(gi(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await jL(e),n=new wL(e);return t.register("authEvent",i=>(Ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fd,{type:Fd},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Fd];l!==void 0&&t(!!l),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return US()||LS()||Xg()}}const JL=GL;var pw="@firebase/auth",mw="1.10.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XL(r){Ks(new ss("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=n.options;Ke(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BS(r)},d=new hN(n,i,a,h);return EN(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ks(new ss("auth-internal",e=>{const t=ms(e.getProvider("auth").getImmediate());return(n=>new QL(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(pw,mw,YL(r)),Mr(pw,mw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=5*60,e2=T1("authIdTokenMaxAge")||ZL;let gw=null;const t2=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>e2)return;const i=t==null?void 0:t.token;gw!==i&&(gw=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Lc(r=ng()){const e=ch(r,"auth");if(e.isInitialized())return e.getImmediate();const t=wN(r,{popupRedirectResolver:JL,persistence:[oL,GN,XS]}),n=T1("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const l=t2(a.toString());HN(t,l,()=>l(t.currentUser)),zN(t,c=>l(c))}}const i=_1("auth");return i&&TN(t,`http://${i}`),t}function n2(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}fN({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const a=Ur("internal-error");a.customData=i,t(a)},n.type="text/javascript",n.charset="UTF-8",n2().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XL("Browser");const r2={apiKey:"AIzaSyAoReJ73uMcZ6FahopnVZmfeMKld4jiIgY",authDomain:"viridian-3afda.firebaseapp.com",projectId:"viridian-3afda",storageBucket:"viridian-3afda.firebasestorage.app",messagingSenderId:"156480615416",appId:"1:156480615416:web:acda86fcfa52a332e51c0d"},sC=b1(r2),i2=DO(),s2=QR(sC),o2=Lc(sC);class a2{constructor(){ae(this,"doNotInclude",["render","forceUpdate","setState"])}bind(e){var n;let t=Object.getPrototypeOf(e);for(;t&&t!==Object.prototype;){const i=Object.getOwnPropertyNames(t).filter(a=>typeof t[a]=="function"&&a!=="constructor");for(let a of i)this.doNotInclude.includes(a)||(e[a]=(n=e[a])==null?void 0:n.bind(e));t=Object.getPrototypeOf(t)}}setDoNotIncludeList(e){this.doNotInclude=e}leaveOut(e){this.doNotInclude.push(e)}include(e){this.doNotInclude=this.doNotInclude.filter(t=>t!==e)}}let En=new a2;class hi{constructor(){ae(this,"list",[]);En.bind(this)}setList(e){e=e.filter(t=>t!==void 0),this.list=e}getList(){return this.list}subscribe(e){e&&this.list.push(e)}unsubscribe(e){this.list=this.list.filter(t=>t!==e)}run(...e){for(let t of this.list)t&&t(...e)}}var ul={},yw;function l2(){if(yw)return ul;yw=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.parse=l,ul.serialize=d;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function l(p,y){const w=new a,S=p.length;if(S<2)return w;const T=(y==null?void 0:y.decode)||v;let E=0;do{const b=p.indexOf("=",E);if(b===-1)break;const N=p.indexOf(";",E),I=N===-1?S:N;if(b>I){E=p.lastIndexOf(";",b-1)+1;continue}const F=c(p,E,b),U=h(p,b,F),P=p.slice(F,U);if(w[P]===void 0){let _=c(p,b+1,I),A=h(p,I,_);const k=T(p.slice(_,A));w[P]=k}E=I+1}while(E<S);return w}function c(p,y,w){do{const S=p.charCodeAt(y);if(S!==32&&S!==9)return y}while(++y<w);return w}function h(p,y,w){for(;y>w;){const S=p.charCodeAt(--y);if(S!==32&&S!==9)return y+1}return w}function d(p,y,w){const S=(w==null?void 0:w.encode)||encodeURIComponent;if(!r.test(p))throw new TypeError(`argument name is invalid: ${p}`);const T=S(y);if(!e.test(T))throw new TypeError(`argument val is invalid: ${y}`);let E=p+"="+T;if(!w)return E;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);E+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);E+="; Domain="+w.domain}if(w.path){if(!n.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);E+="; Path="+w.path}if(w.expires){if(!g(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);E+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(E+="; HttpOnly"),w.secure&&(E+="; Secure"),w.partitioned&&(E+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return E}function v(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function g(p){return i.call(p)==="[object Date]"}return ul}l2();var vw="popstate";function u2(r={}){function e(n,i){let{pathname:a,search:l,hash:c}=n.location;return Km("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Dl(i)}return h2(e,t,null,r)}function At(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function zr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c2(){return Math.random().toString(36).substring(2,10)}function _w(r,e){return{usr:r.state,key:r.key,idx:e}}function Km(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ma(e):e,state:t,key:e&&e.key||n||c2()}}function Dl({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ma(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function h2(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,c="POP",h=null,d=v();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function v(){return(l.state||{idx:null}).idx}function g(){c="POP";let T=v(),E=T==null?null:T-d;d=T,h&&h({action:c,location:S.location,delta:E})}function p(T,E){c="PUSH";let b=Km(S.location,T,E);d=v()+1;let N=_w(b,d),I=S.createHref(b);try{l.pushState(N,"",I)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(I)}a&&h&&h({action:c,location:S.location,delta:1})}function y(T,E){c="REPLACE";let b=Km(S.location,T,E);d=v();let N=_w(b,d),I=S.createHref(b);l.replaceState(N,"",I),a&&h&&h({action:c,location:S.location,delta:0})}function w(T){let E=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof T=="string"?T:Dl(T);return b=b.replace(/ $/,"%20"),At(E,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,E)}let S={get action(){return c},get location(){return r(i,l)},listen(T){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(vw,g),h=T,()=>{i.removeEventListener(vw,g),h=null}},createHref(T){return e(i,T)},createURL:w,encodeLocation(T){let E=w(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:y,go(T){return l.go(T)}};return S}function oC(r,e,t="/"){return f2(r,e,t,!1)}function f2(r,e,t,n){let i=typeof e=="string"?ma(e):e,a=yi(i.pathname||"/",t);if(a==null)return null;let l=aC(r);d2(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let d=C2(a);c=T2(l[h],d,n)}return c}function aC(r,e=[],t=[],n=""){let i=(a,l,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(At(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let d=fi([n,h.relativePath]),v=t.concat(h);a.children&&a.children.length>0&&(At(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),aC(a.children,e,v,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:w2(d,a.index),routesMeta:v})};return r.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let h of lC(a.path))i(a,l,h)}),e}function lC(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let l=lC(n.join("/")),c=[];return c.push(...l.map(h=>h===""?a:[a,h].join("/"))),i&&c.push(...l),c.map(h=>r.startsWith("/")&&h===""?"/":h)}function d2(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:E2(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var p2=/^:[\w-]+$/,m2=3,g2=2,y2=1,v2=10,_2=-2,ww=r=>r==="*";function w2(r,e){let t=r.split("/"),n=t.length;return t.some(ww)&&(n+=_2),e&&(n+=g2),t.filter(i=>!ww(i)).reduce((i,a)=>i+(p2.test(a)?m2:a===""?y2:v2),n)}function E2(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function T2(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",l=[];for(let c=0;c<n.length;++c){let h=n[c],d=c===n.length-1,v=a==="/"?e:e.slice(a.length)||"/",g=sh({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},v),p=h.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=sh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},v)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:fi([a,g.pathname]),pathnameBase:k2(fi([a,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(a=fi([a,g.pathnameBase]))}return l}function sh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=S2(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,{paramName:v,isOptional:g},p)=>{if(v==="*"){let w=c[p]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const y=c[p];return g&&!y?d[v]=void 0:d[v]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:r}}function S2(r,e=!1,t=!0){zr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function C2(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function yi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function I2(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?ma(r):r;return{pathname:t?t.startsWith("/")?t:b2(t,e):e,search:x2(n),hash:R2(i)}}function b2(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Vd(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A2(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uC(r){let e=A2(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function cC(r,e,t,n=!1){let i;typeof r=="string"?i=ma(r):(i={...r},At(!i.pathname||!i.pathname.includes("?"),Vd("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),Vd("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),Vd("#","search","hash",i)));let a=r===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!n&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),g-=1;i.pathname=p.join("/")}c=g>=0?e[g]:"/"}let h=I2(i,c),d=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||v)&&(h.pathname+="/"),h}var fi=r=>r.join("/").replace(/\/\/+/g,"/"),k2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),x2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,R2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function P2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var hC=["POST","PUT","PATCH","DELETE"];new Set(hC);var O2=["GET",...hC];new Set(O2);var ga=ye.createContext(null);ga.displayName="DataRouter";var Dh=ye.createContext(null);Dh.displayName="DataRouterState";var fC=ye.createContext({isTransitioning:!1});fC.displayName="ViewTransition";var N2=ye.createContext(new Map);N2.displayName="Fetchers";var L2=ye.createContext(null);L2.displayName="Await";var Wr=ye.createContext(null);Wr.displayName="Navigation";var Jl=ye.createContext(null);Jl.displayName="Location";var wi=ye.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var ry=ye.createContext(null);ry.displayName="RouteError";function D2(r,{relative:e}={}){At(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ye.useContext(Wr),{hash:i,pathname:a,search:l}=Yl(r,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:fi([t,a])),n.createHref({pathname:c,search:l,hash:i})}function Ql(){return ye.useContext(Jl)!=null}function no(){return At(Ql(),"useLocation() may be used only in the context of a <Router> component."),ye.useContext(Jl).location}var dC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pC(r){ye.useContext(Wr).static||ye.useLayoutEffect(r)}function j2(){let{isDataRoute:r}=ye.useContext(wi);return r?J2():M2()}function M2(){At(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let r=ye.useContext(ga),{basename:e,navigator:t}=ye.useContext(Wr),{matches:n}=ye.useContext(wi),{pathname:i}=no(),a=JSON.stringify(uC(n)),l=ye.useRef(!1);return pC(()=>{l.current=!0}),ye.useCallback((h,d={})=>{if(zr(l.current,dC),!l.current)return;if(typeof h=="number"){t.go(h);return}let v=cC(h,JSON.parse(a),i,d.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:fi([e,v.pathname])),(d.replace?t.replace:t.push)(v,d.state,d)},[e,t,a,i,r])}ye.createContext(null);function Yl(r,{relative:e}={}){let{matches:t}=ye.useContext(wi),{pathname:n}=no(),i=JSON.stringify(uC(t));return ye.useMemo(()=>cC(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function F2(r,e){return mC(r,e)}function mC(r,e,t,n){var b;At(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=ye.useContext(Wr),{matches:l}=ye.useContext(wi),c=l[l.length-1],h=c?c.params:{},d=c?c.pathname:"/",v=c?c.pathnameBase:"/",g=c&&c.route;{let N=g&&g.path||"";gC(d,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let p=no(),y;if(e){let N=typeof e=="string"?ma(e):e;At(v==="/"||((b=N.pathname)==null?void 0:b.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=p;let w=y.pathname||"/",S=w;if(v!=="/"){let N=v.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=!a&&t&&t.matches&&t.matches.length>0?t.matches:oC(r,{pathname:S});zr(g||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),zr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=z2(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},h,N.params),pathname:fi([v,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?v:fi([v,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,t,n);return e&&E?ye.createElement(Jl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function V2(){let r=G2(),e=P2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=ye.createElement(ye.Fragment,null,ye.createElement("p",null,"💿 Hey developer 👋"),ye.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ye.createElement("code",{style:a},"ErrorBoundary")," or"," ",ye.createElement("code",{style:a},"errorElement")," prop on your route.")),ye.createElement(ye.Fragment,null,ye.createElement("h2",null,"Unexpected Application Error!"),ye.createElement("h3",{style:{fontStyle:"italic"}},e),t?ye.createElement("pre",{style:i},t):null,l)}var U2=ye.createElement(V2,null),B2=class extends ye.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?ye.createElement(wi.Provider,{value:this.props.routeContext},ye.createElement(ry.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q2({routeContext:r,match:e,children:t}){let n=ye.useContext(ga);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ye.createElement(wi.Provider,{value:r},t)}function z2(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,a=t==null?void 0:t.errors;if(a!=null){let h=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);At(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:v,errors:g}=t,p=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((h,d,v)=>{let g,p=!1,y=null,w=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||U2,l&&(c<0&&v===0?(gC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):c===v&&(p=!0,w=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,v+1)),T=()=>{let E;return g?E=y:p?E=w:d.route.Component?E=ye.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,ye.createElement(q2,{match:d,routeContext:{outlet:h,matches:S,isDataRoute:t!=null},children:E})};return t&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?ye.createElement(B2,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}function iy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H2(r){let e=ye.useContext(ga);return At(e,iy(r)),e}function $2(r){let e=ye.useContext(Dh);return At(e,iy(r)),e}function W2(r){let e=ye.useContext(wi);return At(e,iy(r)),e}function sy(r){let e=W2(r),t=e.matches[e.matches.length-1];return At(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function K2(){return sy("useRouteId")}function G2(){var n;let r=ye.useContext(ry),e=$2("useRouteError"),t=sy("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function J2(){let{router:r}=H2("useNavigate"),e=sy("useNavigate"),t=ye.useRef(!1);return pC(()=>{t.current=!0}),ye.useCallback(async(i,a={})=>{zr(t.current,dC),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var Ew={};function gC(r,e,t){!e&&!Ew[r]&&(Ew[r]=!0,zr(!1,t))}ye.memo(Q2);function Q2({routes:r,future:e,state:t}){return mC(r,void 0,t,e)}function Ki(r){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y2({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){At(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=ye.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof t=="string"&&(t=ma(t));let{pathname:h="/",search:d="",hash:v="",state:g=null,key:p="default"}=t,y=ye.useMemo(()=>{let w=yi(h,l);return w==null?null:{location:{pathname:w,search:d,hash:v,state:g,key:p},navigationType:n}},[l,h,d,v,g,p,n]);return zr(y!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:ye.createElement(Wr.Provider,{value:c},ye.createElement(Jl.Provider,{children:e,value:y}))}function Tw({children:r,location:e}){return F2(Gm(r),e)}function Gm(r,e=[]){let t=[];return ye.Children.forEach(r,(n,i)=>{if(!ye.isValidElement(n))return;let a=[...e,i];if(n.type===ye.Fragment){t.push.apply(t,Gm(n.props.children,a));return}At(n.type===Ki,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Gm(n.props.children,a)),t.push(l)}),t}var Dc="get",jc="application/x-www-form-urlencoded";function jh(r){return r!=null&&typeof r.tagName=="string"}function X2(r){return jh(r)&&r.tagName.toLowerCase()==="button"}function Z2(r){return jh(r)&&r.tagName.toLowerCase()==="form"}function eD(r){return jh(r)&&r.tagName.toLowerCase()==="input"}function tD(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function nD(r,e){return r.button===0&&(!e||e==="_self")&&!tD(r)}var Sc=null;function rD(){if(Sc===null)try{new FormData(document.createElement("form"),0),Sc=!1}catch{Sc=!0}return Sc}var iD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ud(r){return r!=null&&!iD.has(r)?(zr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jc}"`),null):r}function sD(r,e){let t,n,i,a,l;if(Z2(r)){let c=r.getAttribute("action");n=c?yi(c,e):null,t=r.getAttribute("method")||Dc,i=Ud(r.getAttribute("enctype"))||jc,a=new FormData(r)}else if(X2(r)||eD(r)&&(r.type==="submit"||r.type==="image")){let c=r.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||c.getAttribute("action");if(n=h?yi(h,e):null,t=r.getAttribute("formmethod")||c.getAttribute("method")||Dc,i=Ud(r.getAttribute("formenctype"))||Ud(c.getAttribute("enctype"))||jc,a=new FormData(c,r),!rD()){let{name:d,type:v,value:g}=r;if(v==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,g)}}else{if(jh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dc,n=null,i=jc,l=r}return a&&i==="text/plain"&&(l=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:l}}function oy(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function oD(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aD(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function lD(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await oD(a,t);return l.links?l.links():[]}return[]}));return fD(n.flat(1).filter(aD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Sw(r,e,t,n,i,a){let l=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,c=(h,d)=>{var v;return t[d].pathname!==h.pathname||((v=t[d].route.path)==null?void 0:v.endsWith("*"))&&t[d].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,d)=>l(h,d)||c(h,d)):a==="data"?e.filter((h,d)=>{var g;let v=n.routes[h.route.id];if(!v||!v.hasLoader)return!1;if(l(h,d)||c(h,d))return!0;if(h.route.shouldRevalidate){let p=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function uD(r,e,{includeHydrateFallback:t}={}){return cD(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function cD(r){return[...new Set(r)]}function hD(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function fD(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(hD(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}var dD=new Set([100,101,204,205]);function pD(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&yi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function yC(){let r=ye.useContext(ga);return oy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function mD(){let r=ye.useContext(Dh);return oy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var ay=ye.createContext(void 0);ay.displayName="FrameworkContext";function vC(){let r=ye.useContext(ay);return oy(r,"You must render this element inside a <HydratedRouter> element"),r}function gD(r,e){let t=ye.useContext(ay),[n,i]=ye.useState(!1),[a,l]=ye.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:d,onMouseLeave:v,onTouchStart:g}=e,p=ye.useRef(null);ye.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let S=E=>{E.forEach(b=>{l(b.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return p.current&&T.observe(p.current),()=>{T.disconnect()}}},[r]),ye.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let y=()=>{i(!0)},w=()=>{i(!1),l(!1)};return t?r!=="intent"?[a,p,{}]:[a,p,{onFocus:cl(c,y),onBlur:cl(h,w),onMouseEnter:cl(d,y),onMouseLeave:cl(v,w),onTouchStart:cl(g,y)}]:[!1,p,{}]}function cl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function yD({page:r,...e}){let{router:t}=yC(),n=ye.useMemo(()=>oC(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?ye.createElement(_D,{page:r,matches:n,...e}):null}function vD(r){let{manifest:e,routeModules:t}=vC(),[n,i]=ye.useState([]);return ye.useEffect(()=>{let a=!1;return lD(r,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[r,e,t]),n}function _D({page:r,matches:e,...t}){let n=no(),{manifest:i,routeModules:a}=vC(),{basename:l}=yC(),{loaderData:c,matches:h}=mD(),d=ye.useMemo(()=>Sw(r,e,h,i,n,"data"),[r,e,h,i,n]),v=ye.useMemo(()=>Sw(r,e,h,i,n,"assets"),[r,e,h,i,n]),g=ye.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let w=new Set,S=!1;if(e.forEach(E=>{var N;let b=i.routes[E.route.id];!b||!b.hasLoader||(!d.some(I=>I.route.id===E.route.id)&&E.route.id in c&&((N=a[E.route.id])!=null&&N.shouldRevalidate)||b.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let T=pD(r,l);return S&&w.size>0&&T.searchParams.set("_routes",e.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[T.pathname+T.search]},[l,c,n,i,d,e,r,a]),p=ye.useMemo(()=>uD(v,i),[v,i]),y=vD(v);return ye.createElement(ye.Fragment,null,g.map(w=>ye.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),p.map(w=>ye.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),y.map(({key:w,link:S})=>ye.createElement("link",{key:w,...S})))}function wD(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_C&&(window.__reactRouterVersion="7.5.3")}catch{}function ED({basename:r,children:e,window:t}){let n=ye.useRef();n.current==null&&(n.current=u2({window:t,v5Compat:!0}));let i=n.current,[a,l]=ye.useState({action:i.action,location:i.location}),c=ye.useCallback(h=>{ye.startTransition(()=>l(h))},[l]);return ye.useLayoutEffect(()=>i.listen(c),[i,c]),ye.createElement(Y2,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var wC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zt=ye.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:l,state:c,target:h,to:d,preventScrollReset:v,viewTransition:g,...p},y){let{basename:w}=ye.useContext(Wr),S=typeof d=="string"&&wC.test(d),T,E=!1;if(typeof d=="string"&&S&&(T=d,_C))try{let A=new URL(window.location.href),k=d.startsWith("//")?new URL(A.protocol+d):new URL(d),x=yi(k.pathname,w);k.origin===A.origin&&x!=null?d=x+k.search+k.hash:E=!0}catch{zr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=D2(d,{relative:i}),[N,I,F]=gD(n,p),U=ID(d,{replace:l,state:c,target:h,preventScrollReset:v,relative:i,viewTransition:g});function P(A){e&&e(A),A.defaultPrevented||U(A)}let _=ye.createElement("a",{...p,...F,href:T||b,onClick:E||a?e:P,ref:wD(y,I),target:h,"data-discover":!S&&t==="render"?"true":void 0});return N&&!S?ye.createElement(ye.Fragment,null,_,ye.createElement(yD,{page:b})):_});zt.displayName="Link";var TD=ye.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:l,viewTransition:c,children:h,...d},v){let g=Yl(l,{relative:d.relative}),p=no(),y=ye.useContext(Dh),{navigator:w,basename:S}=ye.useContext(Wr),T=y!=null&&RD(g)&&c===!0,E=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,b=p.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(b=b.toLowerCase(),N=N?N.toLowerCase():null,E=E.toLowerCase()),N&&S&&(N=yi(N,S)||N);const I=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let F=b===E||!i&&b.startsWith(E)&&b.charAt(I)==="/",U=N!=null&&(N===E||!i&&N.startsWith(E)&&N.charAt(E.length)==="/"),P={isActive:F,isPending:U,isTransitioning:T},_=F?e:void 0,A;typeof n=="function"?A=n(P):A=[n,F?"active":null,U?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(P):a;return ye.createElement(zt,{...d,"aria-current":_,className:A,ref:v,style:k,to:l,viewTransition:c},typeof h=="function"?h(P):h)});TD.displayName="NavLink";var SD=ye.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:l=Dc,action:c,onSubmit:h,relative:d,preventScrollReset:v,viewTransition:g,...p},y)=>{let w=kD(),S=xD(c,{relative:d}),T=l.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&wC.test(c),b=N=>{if(h&&h(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,F=(I==null?void 0:I.getAttribute("formmethod"))||l;w(I||N.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:a,relative:d,preventScrollReset:v,viewTransition:g})};return ye.createElement("form",{ref:y,method:T,action:S,onSubmit:n?h:b,...p,"data-discover":!E&&r==="render"?"true":void 0})});SD.displayName="Form";function CD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EC(r){let e=ye.useContext(ga);return At(e,CD(r)),e}function ID(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:l}={}){let c=j2(),h=no(),d=Yl(r,{relative:a});return ye.useCallback(v=>{if(nD(v,e)){v.preventDefault();let g=t!==void 0?t:Dl(h)===Dl(d);c(r,{replace:g,state:n,preventScrollReset:i,relative:a,viewTransition:l})}},[h,c,d,t,n,e,r,i,a,l])}var bD=0,AD=()=>`__${String(++bD)}__`;function kD(){let{router:r}=EC("useSubmit"),{basename:e}=ye.useContext(Wr),t=K2();return ye.useCallback(async(n,i={})=>{let{action:a,method:l,encType:c,formData:h,body:d}=sD(n,e);if(i.navigate===!1){let v=i.fetcherKey||AD();await r.fetch(v,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:d,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function xD(r,{relative:e}={}){let{basename:t}=ye.useContext(Wr),n=ye.useContext(wi);At(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Yl(r||".",{relative:e})},l=no();if(r==null){a.search=l.search;let c=new URLSearchParams(a.search),h=c.getAll("index");if(h.some(v=>v==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let v=c.toString();a.search=v?`?${v}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:fi([t,a.pathname])),Dl(a)}function RD(r,e={}){let t=ye.useContext(fC);At(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=EC("useViewTransitionState"),i=Yl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=yi(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=yi(t.nextLocation.pathname,n)||t.nextLocation.pathname;return sh(i.pathname,l)!=null||sh(i.pathname,a)!=null}new TextEncoder;[...dD];class PD{constructor(e){En.bind(this),this.props={...e},this.content=e.content||"",this.type="div"}setHtmlType(e){this.type=e}getHtmlType(){return this.type}setProp(e,t){this.props[e]=t}setProps(e){this.props={...e},e.content&&(this.content=e.content)}updateProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}addProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}getProps(){return this.props}getProp(e){return this.props[e]}setStyle(e){this.props.style=e}updateStyle(e){this.props.style={...this.props.style,...e}}getStyle(){return this.props.style}setClass(e){this.props.className=e}getClass(){return this.props.className}setOnChange(e){this.props.onChange=e}setOnClick(e){this.props.onClick=e}getOnClick(){return this.props.onClick}setContent(e){this.content=e}getContent(){return this.content}getHtml(e){let{content:t,props:n}=e,i=e==null?void 0:e.type;t&&(this.content=t),n={...this.props,...n};const a={a:R.jsx("a",{...n,children:this.content}),button:R.jsx("button",{...n,children:this.content}),div:R.jsx("div",{...n,children:this.content}),h1:R.jsx("h1",{...n,children:this.content}),h2:R.jsx("h2",{...n,children:this.content}),h3:R.jsx("h3",{...n,children:this.content}),h4:R.jsx("h4",{...n,children:this.content}),h5:R.jsx("h5",{...n,children:this.content}),h6:R.jsx("h6",{...n,children:this.content}),img:R.jsx("img",{...n}),input:R.jsx("input",{...n}),p:R.jsx("p",{...n,children:this.content}),span:R.jsx("span",{...n,children:this.content}),table:R.jsx("table",{...n,children:this.content}),tr:R.jsx("tr",{...n,children:this.content}),td:R.jsx("td",{...n,children:this.content}),th:R.jsx("th",{...n,children:this.content}),ul:R.jsx("ul",{...n,children:this.content}),li:R.jsx("li",{...n,children:this.content}),ol:R.jsx("ol",{...n,children:this.content}),form:R.jsx("form",{...n,children:this.content}),textarea:R.jsx("textarea",{...n,children:this.content}),select:R.jsx("select",{...n,children:this.content}),option:R.jsx("option",{...n,children:this.content}),label:R.jsx("label",{...n,children:this.content}),nav:R.jsx("nav",{...n,children:this.content}),footer:R.jsx("footer",{...n,children:this.content}),header:R.jsx("header",{...n,children:this.content}),article:R.jsx("article",{...n,children:this.content}),section:R.jsx("section",{...n,children:this.content}),aside:R.jsx("aside",{...n,children:this.content}),main:R.jsx("main",{...n,children:this.content}),video:R.jsx("video",{...n,children:this.content}),audio:R.jsx("audio",{...n,children:this.content}),iframe:R.jsx("iframe",{...n,children:this.content}),canvas:R.jsx("canvas",{...n,children:this.content}),content:R.jsx(R.Fragment,{}),fragment:R.jsx(R.Fragment,{children:this.content}),link:R.jsx(zt,{...n,children:this.content})};if(i==="content"||this.type==="conent"){let c=this.content;a.content=R.jsx(c,{...n})}return i?a[i]:a[this.type]}}class OD extends hi{constructor(){super(...arguments);ae(this,"component");ae(this,"setAttribute")}setObserverFunction(t){this.setAttribute=t}setComponent(t){this.component=t}getComponent(){return this.component}run(){for(let t of this.list)this.setAttribute(t.name,new PD(t))}}class ya{constructor(){ae(this,"factory");ae(this,"componentList");ae(this,"themeFactory");ae(this,"appComponent");ae(this,"mainFunc");ae(this,"appObserver",new hi);En.bind(this),this.getFactory(),this.getThemeFactory()}subscribeToAppObserver(e){this.appObserver.subscribe(e)}getMainFunc(){return this.mainFunc}getFactory(){}getThemeFactory(){}getAppComponent(){return this.appComponent}setAppComponent(e){this.appComponent=e,this.appObserver.run(e)}getComponentList(){var e,t;return this.componentList||(this.componentList=(t=(e=this.appComponent)==null?void 0:e.state)==null?void 0:t.componentList),this.componentList}}class ND extends ya{constructor(){super(...arguments);ae(this,"type","appInterface")}}const TC=new ND;class Xe extends ye.Component{constructor(t){super(t);ae(this,"resize");En.bind(this),this.initialBuilderSetupFunctions=[],this.setInterface(),this.setInitialApp(),this.initialPropsSetupFunctions=[this.setInterface,this.setAppOnInterace,this.setInitialApp,this.setObj,this.setThemeFactory,this.setTheme,this.createReactRefsForComponents],this.setupObserver=new hi,this.builderObserver=new OD,this.ObserverForSetupFunction=new hi,this.builderObserver.setComponent(this),this.builderObserver.setObserverFunction(this.setHtmlBuilderSingleton),this.initialSetupFunctions=[this.builderObserver.run,this.additionalSetup],this.components=[]}setInitialApp(){var n,i,a,l,c,h;this.interface||(this.app=(n=this.props)==null?void 0:n.app);let t=this.interface.getAppComponent();t&&(this.app=t),this.app&&(this.propsState=(i=this.app)==null?void 0:i.state,this.dispatch=(a=this.app)==null?void 0:a.dispatch,this.componentList=(l=this.propsState)==null?void 0:l.componentList,this.APIService=(c=this.componentList)==null?void 0:c.getAPIService(),this.operationsFactory=(h=this.componentList)==null?void 0:h.getOperationsFactory())}setInterface(t){var n;this.interface=t||((n=this.props)==null?void 0:n.interface)||this.interface||TC,this.interface.type==="appInterface"&&this.subscribeToAppObserverBool===void 0&&(this.subscribeToAppObserverBool=!0,this.interface.subscribeToAppObserver(this.setInitialApp))}setAppOnInterace(){this.interface&&(this.props.app&&this.interface.setAppComponent(this.props.app),this.app=this.interface.getAppComponent())}setComponents(t){this.components=t}getComponents(){return this.components}createReactRefsForComponents(){for(let t of this.components)this[t+"Ref"]||(this[t+"Ref"]=lh.createRef())}createPropObj(t,n){n=n||this.state.propType;let i,a=this[n||"props"][t+"Class"];return a||(a=this.theme&&typeof this.theme!="string"?this.theme[this.state[t+"Class"]]:this["default"+t+"Class"]||""),i={name:t,ref:this[t+"Ref"],style:this[t+"Click"]?{...this[n||"props"][t+"Style"],cursor:"pointer"}:this[n||"props"][t+"Style"],className:a,content:this[n||"props"][t],onClick:this[n||"props"][t+"Click"]||this[t+"Click"],obj:this.obj},i.onClick&&(i.onClick=i.onClick.bind(this,this.obj)),i}builderPropsSubscribe(t){this[t+"Props"]=this.createPropObj(t),this.builderObserver.subscribe(this[t+"Props"])}setInitialBuilderPropFunctions(){for(let t of this.components)this["set"+t+"props"]||(this["set"+t+"props"]=this.builderPropsSubscribe(t)),this.initialBuilderSetupFunctions.push(this["set"+t+"props"]);return this.initialBuilderSetupFunctions}loadObserver(){this.setupObserver.setList(this.initialSetupFunctions)}setInitialSetupFunctions(){const t=[...this.initialPropsSetupFunctions,...this.initialBuilderSetupFunctions,...this.initialSetupFunctions,this.additionalPostSetup],n=[...new Set(t)];return this.initialSetupFunctions=n,this.initialSetupFunctions}runInitialPropsSetup(){for(let t of this.initialPropsSetupFunctions)t&&t()}isArray(t){return Array.isArray(t)?t:[t]}setObj(){this.obj=this.props.obj}setThemeFactory(){this.interface!==void 0&&(this.themeFactory=this.interface.getThemeFactory())}setTheme(){var t,n;this.themeFactory&&(this.theme=this.themeFactory.getComponent(((t=this.props)==null?void 0:t.theme)||((n=this.state)==null?void 0:n.defaultTheme)||"default"))}clearLists(){this.setupObserver.setList([]),this.builderObserver.setList([])}setupItem(...t){this.clearLists(),this.preSetup(),this.runInitialPropsSetup(),this.setInitialBuilderPropFunctions(),this.setInitialSetupFunctions(),this.loadObserver(),this.setupObserver.run(...t)}preSetup(){}setAttribute(t,n){this[t]=n}setHtmlBuilderSingleton(t,n){this[t]||(this[t]=n)}getInnerContent(){return this.innerContent}getAdditionalInnerContent(){return this.innerContent}mapList(t){return R.jsx(R.Fragment,{children:t.filter(n=>n!==void 0&&n!==!1).map(n=>n)})}additionalSetup(){}additionalPostSetup(){}mapInnerContent(){return this.getInnerContent(),this.getAdditionalInnerContent(),this.innerContent=this.mapList(this.innerContent),this.innerContent}getHtml(){return this.html}getFactoryTypeString(t){let n=this.propsState.componentListInterface.getFactory().getRegistry(),i=n.find(a=>t.toLowerCase()===a);return i=i||n.find(a=>t.toLowerCase().includes(a)),i}getCapitalFirstLetter(t){var n;return((n=t==null?void 0:t.charAt(0))==null?void 0:n.toUpperCase())+(t==null?void 0:t.slice(1))}classNameToString(t){let n=t.name;return n.charAt(0).toLowerCase()+n.slice(1)}render(){return this.setupItem(),this.html=this.getHtml(),this.html}}class LD extends ya{}const SC=new LD;class Yt extends Xe{constructor(t){super(t);ae(this,"type");ae(this,"theme");ae(this,"interface");this.wrapperRef=lh.createRef(),this.setWrapperRef=this.setWrapperRef,this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setApp,this.setType,this.setClassStr],this.state={defaultType:this.props.type?this.props.type:"fit",defaultTheme:this.props.theme?this.props.theme:"Default",typeKey:"type",themeKey:"theme"},this.interface=SC}componentDidMount(){this.props.popup&&document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){this.props.popup&&document.removeEventListener("mousedown",this.handleClickOutside)}handleClickOutside(t){this.wrapperRef&&!this.wrapperRef.current.contains(t.target)&&this.props.handleClose&&this.props.handleClose()}isPopup(t){if(this.props.popup){let n=this.closePopup.getHtml({content:this.props.closeUI||R.jsx(R.Fragment,{children:"X"}),props:{onClick:()=>{this.props.handleClose&&this.props.handleClose()}}}),i=this.popupContent.getHtml({content:R.jsxs(R.Fragment,{children:[n,t]}),props:{ref:this.wrapperRef}});t=this.backDrop.getHtml({content:i})}return t}setTheme(){this.theme=this.props[this.state.themeKey]?this.props[this.state.themeKey]:this.state.defaultTheme}setType(){this.type=this.props[this.state.typeKey]?this.props[this.state.typeKey]:this.state.defaultType}setClassStr(){this.defaultcardClass=this.type+this.theme+" scroller",this.defaultcardClass=this.props.popup?this.defaultcardClass+" cardPopup":this.defaultcardClass,this.props.popup&&(this.defaultbackDropClass="backDropPopup",this.defaultpopupContentClass="popupContent",this.defaultclosePopupClass="closePopup")}getHtml(){let t=this.getContent();return this.html=this.card.getHtml({content:t}),this.html=this.isPopup(this.html),this.html}getContent(){return this.content=this.props.content,this.content}preSetup(){let t=["card"];this.props.popup&&(t=[...t,"backDrop","popupContent","closePopup"]),this.setComponents(t)}}let DD=class{constructor(e){ae(this,"operationsFactory");ae(this,"dispatch");ae(this,"json",{_id:"",backendKeys:[],backendAttributes:[],backendFilterKeys:[],orderMatters:!1,orderFilterKey:"",filterKey:"",removeOwnerQuery:[]});ae(this,"componentList");ae(this,"APIService");En.bind(this),this.operationsFactory=e,this.json._id=this.createId()}getAssociatedItemsHelper(e){let t=this.json._id,n=this.json.type+"Id";return this.json.backendAttributes.length>0&&(t=this.json[this.json.backendAttributes[e]]),this.json.backendFilterKeys.length>0&&(n=this.json.backendFilterKeys[e]),{attribute:t,filterKey:n}}async getAssociatedItems(e){e=e||this.json.backendKeys;const t=e==null?void 0:e.map((n,i)=>{let{attribute:a,filterKey:l}=this.getAssociatedItemsHelper(i);return this.componentList.getList(n,a,l)});return await Promise.all(t)}async getAssociatedItemsFromBackend(e,t){e=e||this.json.backendKeys;let n=!0;const i=e==null?void 0:e.map((a,l)=>{this.json.removeOwnerQuery.includes(a)&&(n=!1);let{attribute:c,filterKey:h}=this.getAssociatedItemsHelper(l);return this.componentList.getComponentsFromBackend({type:a,ids:c,filterKeys:h,owner:n,...t})});return await Promise.all(i)}setComponentList(e){this.componentList=e,this.componentList.getAPIService&&this.setAPIService(this.componentList.getAPIService()),this.componentList.getDispatch&&this.setDispatch(this.componentList.getDispatch())}setDispatch(e){this.dispatch=e}getDispatch(){return this.dispatch}getComponentList(){return this.componentList}setAPIService(e){this.APIService=e}getAPIService(){return this.APIService}update(...e){this.APIService&&this.APIService.update([this],...e)}del(...e){this.componentList.del(this,{...e})}updateOrder(e,t){e=e||-1,e===!0&&(e=1);let n=this.componentList.getList(this.json.type,this.json[this.json.orderFilterKey],this.json.orderFilterKey);t=t||(this.json.orderKey?this.json[this.json.orderKey]:"order");let i=n.indexOf(this),a;e<0&&i===0?this.json[t]=n.length:e>0&&i===n.length-1?(this.json[t]=0,this.componentList.shiftOrderedList(this,t)):(a=n[i+e],a.setCompState({[t]:i},{run:!0,clean:!0}),this.json[t]=i+e),this.componentList.sortSelectedList(this.json.type,this.json.orderKey||"order"),this.componentList.resetOrder(this,t),this.update()}prepare(){this.operationsFactory.prepare({prepare:this})}setAttribute(e,t){this[e]=t}setAttributes(e){for(let t in e)this[t]=e[t]}getAttribute(e){return this[e]}getJsonAttribute(e){return this.json[e]}setCompState(e,t,n,i){this.subscribeToOperations(t),this.json={...this.json,...e},n&&this.dispatch({updated:this}),i&&i(e),t!=null&&t.run&&this.operationsFactory.runOperations()}getOperationsFactory(){return this.operationsFactory}setJson(e,t,n,i){this.subscribeToOperations(t),this.json=e,n&&this.dispatch({updated:this}),i&&i(this),t!=null&&t.run&&this.operationsFactory.runOperations()}getJson(){return this.json}subscribeToOperations(e){e&&this.operationsFactory.subscribeToOperations(e.operation||this.update,e.clean)}copyJson(e){return{...this.json,_id:"",...e}}copy(e){let t=this.copyJson(e);this.componentList.addComponents(t)}updateObjInsideJson(e,t){this.json[e]={...this.json[e],...t}}removeObjInsideJson(e,t){let n={};for(const i in this.json[e])t.includes(i)||(n[i]=this.json[e][i]);this.json[e]=n}randomFiveDigitNumber(){let e=Math.floor(Math.random()*9e4)+1e4;e=e.toString();let t=String.fromCharCode(97+Math.floor(Math.random()*26)),n=Math.floor(Math.random()*5);if(e=e.substring(0,n)+t+e.substring(n+1),Math.floor(Math.random()*2)===1){let a=String.fromCharCode(97+Math.floor(Math.random()*26)),l;do l=Math.floor(Math.random()*5);while(l===n);e=e.substring(0,l)+a+e.substring(l+1)}return e}createId(){const e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=e.getFullYear().toString().slice(-2);return this.randomFiveDigitNumber().toString()+t+n+i}createUUID(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789",i=n.length;for(let a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*i));return t}};class jD{constructor(){ae(this,"operationsFactory");ae(this,"factory",{})}registerComponents(e){this.factory[e.name]=e.component}setOperationsFactory(e){this.operationsFactory=e}getRegistry(){return Object.keys(this.factory)}async getComponent(e){if(Object.keys(this.factory).includes(e.type)){let t=e.type,n=new this.factory[t](this.operationsFactory);return[void 0,"",!1].includes(e._id)&&(e._id=n.getJson()._id),n.setCompState({...e}),n}}}class MD extends hi{clear(){this.list=[]}cleanSubscibe(e){this.clear(),this.subscribe(e)}run(...e){for(let t of this.list)t&&t(...e);this.clear()}}class Cw{constructor(e){ae(this,"register");ae(this,"factory");ae(this,"operationsObserver");En.bind(this),this.add=[],this.lastChange=[],this.factory=e.getFactory(),this.operationsObserver=new MD}removeFromList(e){this.add=this.add.filter(t=>t!==e)}getOperationsObserver(){return this.operationsObserver}setOperationsObserver(e){this.operationsObserver=e}subscribeToOperations(e,t){t&&this.operationsObserver.clear(),this.operationsObserver.subscribe(e)}runOperations(...e){this.operationsObserver.run(...e)}setAddList(e){this.add=[...e],this.lastChange=[...this.add]}getAddList(){return this.add}getLastPrepare(){return this.lastChange}async prepare(e,t){let{prepare:n,amount:i,clean:a}=e;i=i||1;let l=Array.isArray(n)?n:[n];l=l.flatMap(h=>Array(i).fill(h));let c=[];for(let h of l){let d=await this.factory.getComponent({...h});c.push(d)}return l=[...c],this.setAddList(a?[...l]:[...this.add,...l]),t&&t(this.add),e.run&&await this.addToComponentList(),this.add}clear(){this.setAddList([])}removeFromRegister(e){this.setAddList(this.add.filter(t=>t!==e))}run(e){this.addToComponentList(e)}addToComponentList(e){let t=[...this.add];return this.clear(),this.register(t,{skipBackendUpdate:e}),t}setRegister(e){this.register=e}}class FD{constructor(e){ae(this,"components",[]);ae(this,"dispatch");ae(this,"backArray",{});ae(this,"operationsFactory");ae(this,"componentListInterface");ae(this,"componentsList",{});ae(this,"completionObserver",new hi);ae(this,"factory");ae(this,"APIService");En.bind(this),this.operationsFactory=e.getOperationsFactory(),this.operationsFactory.setRegister(this.add),this.componentListInterface=e,this.factory=e.getFactory(),this.dispatch=e.dispatch,this.APIService=e.getAPIService(),this.APIService.setComponentList(this),this.completionObserver.subscribe(this.setComponentsList),this.completionObserver.subscribe(this.setOrderAfterAddorDel)}getFactory(){return this.factory}getDispatch(){return this.dispatch}setDispatch(e){this.dispatch=e}getCompletionObserver(){return this.completionObserver}setCompoletionObserver(e){this.completionObserver=e}subscribeToOperationCompletion(e){this.completionObserver.subscribe(e)}getAPIService(){return this.APIService}setAPIService(e){this.APIService=e}getComponents(){return this.components}filterOutErrors(e){let t=this.components.map(i=>i.getJson()._id);e=e.filter(i=>i!==void 0),e=e.map(i=>{if(i!==void 0&&t.includes(i.getJson()._id)){let a=this.components.find(l=>l.getJson()._id===i.getJson()._id);i.setJson({...a.getJson(),...i.getJson()})}return i}),e=e.filter(i=>!t.includes(i.getJson()._id));let n=this.factory.getRegistry();return e=e.filter(i=>n.includes(i.getJson().type)),e}add(e,t){return e=Array.isArray(e)?e:[e],e=this.filterOutErrors(e),e.forEach(n=>{n.setComponentList(this)}),this.components=[...this.components,...e],this.operationComplete(e,"add",t)}setComponentsList(){let e={};this.componentListInterface.getFactory().getRegistry().forEach(n=>{e[n]=[]});for(let n of this.components){let i=n.getJson().type;e[i].push(n)}this.componentsList=e}async addComponents(e,t){e.prepare||(e={prepare:Array.isArray(e)?e:[e]}),await this.operationsFactory.prepare({...e}),this.operationsFactory.addToComponentList(t);let n=e==null?void 0:e.prepare.map(a=>a._id);return await this.components.filter(a=>n.includes(a.getJson()._id))}del(e,t){return e=Array.isArray(e)?e:[e],this.components=this.components.filter(n=>!e.includes(n)),this.operationComplete(e,"del",t)}setOrderAfterAddorDel(e){for(let t of e){let n=t.getJson();if(n.orderMatters){let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey),a=n.orderKey?n[n.orderKey]:"order",l=t.getJson()[a],h=i.filter(v=>{let g=parseInt(v.getJson()[a]);return l=parseInt(l),g===l}).find(v=>!e.includes(v)),d=i.indexOf(t);h&&h!==t&&t.setCompState({[a]:d}),this.sortSelectedList(n.type,n.orderKey||"order"),this.resetOrder(t,a)}}}shiftOrderedList(e,t){let n=e.getJson();this.sortSelectedList(n.type,n.orderKey||"order");let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);t=t||(n.orderKey?n[n.orderKey]:"order"),i=i.filter(a=>a!==e);for(let a=1;a<i.length;a++)i[a-1].setCompState({[t]:a},{run:!0,clean:!0})}resetOrder(e,t){let n=e.getJson();t=t||(n.orderKey?n[n.orderKey]:n.order);let i=this.getList(n.type,n[n.orderFilterKey],n.orderFilterKey);for(let a=0;a<i.length;a++)i[a][t]!==a&&(i[a].setCompState({[t]:a}),i[a]!==e&&i[a].update())}operationComplete(e,t,n){return this.completionObserver.run(e,t,n),this.backArray={[t]:e},n.skipBackendUpdate||this.updateBackend(e,t,n),e}updateBackend(e,t,n){this.dispatch({backend:!0,backendUpdate:{...this.backArray}});let i=[n.path,n.dispatchKey];t==="add"&&i.push(n.timeKey),this.APIService[t](e,...i),this.backArray={}}getOperationsFactory(){return this.operationsFactory}createQueryJson(e,t,n,i,a="type"){i=i||{},n===void 0&&t&&(n="_id"),t=Array.isArray(t)?t:[t],n=Array.isArray(n)?n:[n];let l={where:[{attribute:a,val:e}],...i};return t.length>0&&t[0]!==void 0&&(l.where=[...l.where,...t.map((c,h)=>({attribute:n[h]||n[0],val:c}))]),l}async getComponentsFromBackend(e,t){typeof e=="string"&&(e={type:e,owner:t===!1?t:!0});let n=await this.createQueryJson(e.type,e.ids,e.filterKeys,e.obj,e.typeAttribute);return await this.APIService[e.snapshot?"firebaseGetterSnapshot":"firebaseGetter"](n,e.path,e.owner)}async getComponentFromBackend(e){return(await this.getComponentsFromBackend(e))[0]}getList(e,t,n){n=n||"owner",e=Array.isArray(e)?e:[e];let i=[];for(let a of e){let l=this.componentsList[a]||[];i=[...i,...l]}return Array.isArray(t)||(t=t?[t]:[]),Array.isArray(n)||(n=[n]),t.length>0&&(i=i.filter(a=>n.some((l,c)=>{var v;const h=(v=a.getJson())==null?void 0:v[l],d=t[c]||t[0];return typeof h=="object"?Object.keys(h).includes(d):h===d}))),i}getComponent(e,t,n){return this.getList(e,t,n||"_id")[0]}clearList(){this.components=[],this.componentsList={}}clearSelectedList(e,t){let n=[...this.components],i=[];for(const a in n)n[a].getJson()[t]!==e&&i.push(n[a]);this.components=[...i],this.setComponentsList()}setComponentList(e){this.componentsList=e}setSelectedList(e,t){this.componentsList[e]=t}sortSelectedList(e,t,n){if(t&&this.componentsList[e]){let i=[...this.componentsList[e]];i=i.sort(function(a,l){const c=a.getJson()[t],h=l.getJson()[t],d=isNaN(Number(c))?c:Number(c),v=isNaN(Number(h))?h:Number(h);return typeof d=="number"&&typeof v=="number"?n?v-d:d-v:n?(""+v).localeCompare(""+d):(""+d).localeCompare(""+v)}),this.setSelectedList(e,i)}}sortSelectedListbyFirebaseDate(e,t){if(this.componentsList[e]){let n=[...this.componentsList[e]];n=n.sort(function(i,a){var h,d;let l=i.getJson().date||i.getJson().date!==""?(h=i.getJson().date)==null?void 0:h.seconds:new Date(0),c=a.getJson().date||a.getJson().date!==""?(d=a.getJson().date)==null?void 0:d.seconds:new Date(0);return t?c-l:l-c}),this.setSelectedList(e,n)}}}class VD{constructor(e,t){ae(this,"DB");ae(this,"url");ae(this,"path",[]);ae(this,"orderStr","date");En.bind(this),this.setDB(e),this.setUrl(t),this.path=[this.DB,this.url+"users",this.url+"APP","components"]}setDB(e){this.DB=e}setUrl(e){this.url=e}setPath(e){this.path=e}setOrderStr(e){this.orderStr=e}async generateQueary(e,t,n){let i=e.where.map(h=>{if(h.attribute!==void 0)return B0(h.attribute,h.type||"==",h.val)}).filter(h=>h!==void 0);n&&i.push(B0("owner","==",n)),t=t||this.path;let a=[...i],l=e.order||this.orderStr;return l!=="noOrder"&&l!==void 0&&a.push(cP(l)),e.limit&&a.push(hP(e.limit)),uP(GR(...t),...a)}}class UD{constructor(e,t,n,i,a){ae(this,"urlEndpoint","");ae(this,"dispatch");ae(this,"componentList");ae(this,"userStr","flinnappsUser");ae(this,"QuearyGenerator");ae(this,"DB");ae(this,"storage");ae(this,"auth");ae(this,"userEmail");ae(this,"path",[]);ae(this,"postObserver",new hi);ae(this,"dispatchObserver",new hi);ae(this,"readObserver",new hi);En.bind(this),this.urlEndpoint=e,this.DB=t,this.storage=n,this.auth=i,this.dispatch=a,this.path=[this.DB,`${this.urlEndpoint}users`,`${this.urlEndpoint}APP`,"components"],this.QuearyGenerator=new VD(this.DB,this.urlEndpoint)}setAuth(e){this.auth=e}setStorage(e){this.storage=e}setPath(e){this.path=e}setDB(e){this.DB=e,this.QuearyGenerator.setDB(e)}setDispatch(e){this.dispatch=e}setComponentList(e){this.componentList=e}setUserStr(e){this.userStr=e,this.QuearyGenerator.setUrl(e)}getPostObserver(){return this.postObserver}setPostObserver(e){this.postObserver=e}subscribeToPostObserver(e){this.postObserver.subscribe(e)}getReadObserver(){return this.readObserver}setReadObserver(e){this.readObserver=e}subscribeToReadObserver(e){this.readObserver.subscribe(e)}getPath(){return this.path}getDispatchObserver(){return this.dispatchObserver}setDispatchObserver(e){this.dispatchObserver=e}subscribeToDispatchObserver(e){this.dispatchObserver.subscribe(e)}getQueryGenerator(){return this.QuearyGenerator}setQueryGenerator(e){this.QuearyGenerator=e}async login(e,t){let n,i;if(await ow(this.auth,e,t).then(a=>{n=a.user}).catch(a=>{const l=a.message;i={error:l.slice(9,l.length-1)},console.log(i)}),n){let a=n;this.dispatch({login:!0}),await localStorage.setItem(this.userStr,JSON.stringify(a)),this.componentList!==void 0&&this.dispatch!==void 0&&(n=await this.getuser(e))}else n=i;return n}async register(e,t,n){let i;return await UN(this.auth,e,t).then(a=>{i=a.user}).catch(a=>{a.code;let l=a.message,c=l.length-1;i={error:l.slice(9,c)}}),i.error||(this.userEmail=i.email,localStorage.setItem(this.userStr,JSON.stringify(i))),i}async logout(){await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let e;await Md(this.auth,t=>{t&&(e=t.uid)}),e&&await aw(this.auth),await localStorage.setItem(this.userStr,null),window.location.href="/"}sendForgotPasswordChange(e){const t=Lc();VN(t,e).then(()=>{}).catch(n=>{n.code,n.message})}async checkIfLoggedIn(){return new Promise((e,t)=>{Md(this.auth,async n=>{if(n)e(n);else{await localStorage.setItem(this.userStr,null),await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let i;await Md(this.auth,a=>{a&&(i=a.uid)}),i&&await aw(this.auth),await window.location.reload()}})})}async getCurrentUser(){let e=await localStorage.getItem(this.userStr);return e=await JSON.parse(e),e}async setCurrentUser(e){await localStorage.setItem(this.userStr,JSON.stringify(e))}async loginToDel(e,t){await ow(this.auth,e,t).then(n=>{}).catch(n=>{n.code,n.message})}async delAccount(){const t=Lc().currentUser;await $N(t).then(()=>{}).catch(n=>{})}async notify(e,t){fetch(t,{method:"POST",mode:"no-cors",body:JSON.stringify(e),headers:{"Conent-Type":"application/json"}})}async changePassword(e){const n=Lc().currentUser;return await BN(n,e).then(()=>{}).catch(a=>{}),!0}async firebaseGetterSnapshot(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),a=[];return await _P(i,async l=>{a=await this.getRawData(l)}),a}async firebaseGetter(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n),a=await gP(i);return await this.getRawData(a)}async getRawData(e){let t=[];for(const i in e.docs){let a=e.docs[i].data();t.push(a)}let n=await this.componentList.addComponents(t,!0);return this.dispatch&&await this.dispatch({snapShot:{dataRetrieved:n}}),this.readObserver.run(n,t),n}async getCount(e,t,n){n=n===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,n);return(await EP(i)).data().count}async getuser(e){this.userEmail=e;let t=await this.componentList.getComponentFromBackend({type:"user",ids:e});return t&&this.dispatch({currentUser:t,email:e,gotUser:!0}),t}async GetAllData(e,t){t=t||[this.db,this.urlEndpoint+"users"],this.firebaseGetter(e,t)}async uploadPics(e,t){const n=Dd(this.storage,t);await OO(n,e).then(i=>{console.log("Uploaded a file!")})}async downloadPics(e){let t;return await NO(Dd(this.storage,e)).then(n=>{t=n}),t}deletePics(e){const t=Dd(this.storage,e);LO(t).then(()=>{}).catch(n=>{})}prep(e){return e=Array.isArray(e)?e:[e],e=e.map(t=>{let n=t;return t.getJson&&(n=t.getJson()),n}),e=e.filter(t=>t!==void 0),e}async add(e,t,n,i){return e=await e.map(a=>((a.getJson().owner===""||a.getJson().owner===void 0)&&a.setCompState({owner:this.userEmail}),a)),await this.operate(e,yP,t,n||"added",i||"date")}async update(e,t,n,i){return await this.operate(e,vP,t,i||"updated",n||"lastUpdated")}async del(e,t,n){return await this.operate(e,H0,t,n||"deleted")}async operate(e,t,n,i,a){try{e=await this.prep(e),n=n||this.path;for(let l of e){a&&(l[a]=await SP()),await this.postObserver.run([l]);let c=[JR(...n,l._id)];t!==H0&&c.push(l),await t(...c)}return this.dispatch&&this.dispatch({[i]:e,dispatchComplete:!0}),this.dispatchObserver.run([{[i]:e}]),e}catch(l){console.log(l),console.error(e,"something went wrong with this operation")}}}class BD{constructor(e,t,n,i,a){ae(this,"factory");ae(this,"updater");ae(this,"operationsFactory");ae(this,"dispatch");ae(this,"APIService");En.bind(this),this.dispatch=e,this.getFactory(),this.getAPIService(t,n,i,a,e)}getFactory(){return this.factory===void 0&&(this.factory=new jD(this)),this.factory}getAPIService(e,t,n,i,a){return this.APIService===void 0&&(this.APIService=new UD(e,t,n,i,a)),this.APIService}createComponentList(){return new FD(this)}getOperationsFactory(){return this.operationsFactory===void 0&&(this.operationsFactory=new Cw(this),this.factory.setOperationsFactory(this.operationsFactory)),this.operationsFactory}getNewOperationsFactory(){return new Cw(this)}}class jl extends Xe{constructor(e){super(e),this.domList=["a","button","div","h1","h2","h3","h4","h5","h6","img","input","p","span","table","tr","td","th","ul","li","ol","form","textarea","select","option","label","nav","footer","header","article","section","aside","main","video","audio","iframe","canvas"],this.state={...this.state,wrapperClass:"FCWrapper",formClass:"FCInputForm",labelClass:"defaultLabel",errorClass:"defaultErrorMessage",interface:"form"}}setObj(){var e,t;if(!this.props.prepareOnClick){let n=this.props.obj||(this.props.inPopup?(e=this.propsState)==null?void 0:e.currentPopupComponent:(t=this.propsState)==null?void 0:t.currentComponent);this.obj=this.isArray(n)}}preSetup(){this.setComponents(["wrapper","form","label","error"])}getInnerContent(){return this.innerContent=[this.props.label&&this.label.getHtml(),this.getFormHtml(),this.props.errorText&&this.error.getHtml()],this.innerContent}getHtml(){this.mapInnerContent();let e=this.wrapper.getHtml({type:"div",content:this.innerContent});return this.html=R.jsx(R.Fragment,{children:e}),this.html}getFormHtml(){return this.getInputProps(this.props.type||"input"),this.additionalPropsSetup(),this.form.getHtml({type:this.props.type?this.props.type:"input",content:this.content,props:this.inputProps})}additionalPropsSetup(){}handleChange(e){let{name:t,value:n}=e.target;for(let i of this.obj){if(this.props.isPropArray){let a=i.getJson()[this.props.name]||[];Array.isArray(a)||(a=[a]),Array.isArray(a[0])||(a[0]=[a[0]]),a[0]=n,n=a}i.setCompState({[this.props.name]:n})}this.afterChange(e)}afterChange(e){if(this.props.update)for(let t of this.obj){let n=this.props.update===!0?void 0:{...this.props.update};t==null||t.update(n)}this.props.sendUpdate&&this.props.app&&this.app.dispatch({formUpdate:this.props.type}),this.props.callbackFunc&&this.props.callbackFunc(this.obj),this.additionalChanges(e),this.setState({})}additionalChanges(e){}async prepareOnClick(){var e;if(this.props.prepareOnClick&&this.props.app){let t=this.props.obj;t&&(t=this.isArray(t)),t=await((e=this.props.app)==null?void 0:e.state.componentList.getOperationsFactory().prepare({...t})),t&&(t=this.isArray(t)),this.obj=t}}objDispatch(e){for(let t of this.obj)t.setCompState({[this.props.name]:e});this.afterChange()}handleChangeWithoutEvent(e){for(let t in this.obj)t.setCompState({[e.name]:e.value});this.afterChange()}getInputProps(e){var t;return this.inputProps={onChange:this.props.handleChange?n=>{this.props.handleChange(n,this.obj)}:this.handleChange,value:this.obj[0]?(t=this.obj[0])==null?void 0:t.getJson()[this.props.name]:this.props.value,type:this.props.inputType||this.props.type,onFocus:this.props.onFocus||this.onFocus,placeholder:this.props.placeholder,name:this.props.name,min:this.props.min,max:this.props.max,cols:this.props.cols||"",rows:this.props.rows||5,resize:this.props.resize||"true",autoComplete:this.props.autoComplete?this.props.autoComplete:"off",id:this.props.id,checked:this.props.checked,spellCheck:this.props.type==="password"||this.props.spellCheck===void 0?!1:this.props.spellCheck,minLength:this.props.minLength,maxLength:this.props.maxLength},this.domList.includes(e)||(this.inputProps.handleChangeWithoutEvent=this.props.update?()=>{console.log("")}:this.props.handleChangeWithoutEvent?this.props.handleChangeWithoutEvent:this.handleChangeWithoutEvent,this.inputProps.selectOptions=this.props.selectOptions,this.inputProps.textOptions=this.props.textOptions,this.inputProps.unit=this.props.unit?this.props.unit:"$",this.inputProps.tickClass=this.props.tickClass,this.inputProps.handleHTMLChange=this.props.handleHTMLChange||this.objDispatch,this.inputProps.doesMath=this.props.doesMath,this.inputProps.objDispatch=this.objDispatch,this.inputProps.emitClickedOutside=this.props.emitClickedOutside,this.inputProps.updateOnClickOutside=this.props.updateOnClickOutside),this.props.required&&(this.inputProps.required=!0),this.props.disabled&&(this.inputProps.disabled=!0),this.inputProps}}class ro extends jl{constructor(e){super(e),this.state.formClass="FCDefaultButton"}buttonClick(){this.props.buttonClick?this.props.buttonClick(this.obj):this.buttonClickFunc(),this.props.callbackFunc&&this.props.callbackFunc(this.obj)}buttonClickFunc(){}additionalSetup(){this.form.setOnClick(this.buttonClick)}getFormHtml(){return this.form.setStyle({cursor:"pointer"}),this.content=this.props.content||this.content||R.jsx(R.Fragment,{children:"button"}),this.form.getHtml({type:"div",content:this.content})}}let CC=class{constructor(){ae(this,"FCInputForm","defaultInputForm");ae(this,"FCWrapper","defaultWrapper");ae(this,"FCError","defaultErrorMessage");ae(this,"FCLabel","defaultLabel");ae(this,"FCDefaultButton","defaultButton");ae(this,"FCDefaultDelButton","delButton");ae(this,"FCImgButton","imgButton")}};const qD=Object.freeze(Object.defineProperty({__proto__:null,DefaultRegistry:CC},Symbol.toStringTag,{value:"Module"}));class ly{constructor(e){ae(this,"factory",{});En.bind(this),e&&(this.registry=e,this.registerListWithFactory())}registerListWithFactory(){for(const e in this.registry)if(Object.prototype.hasOwnProperty.call(this.registry,e)){const t=e.charAt(0).toLowerCase()+e.slice(1);this.factory[t]=this.registry[e]}}getComponent(e){let t;return this.factory[e]&&(t=new this.factory[e]),t}registerComponent(e,t){this.factory[e]=t}}let zD=class extends ly{constructor(){super(qD),this.factory.default=CC}};class IC{constructor(){ae(this,"factory",{})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),R.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class HD extends ro{buttonClickFunc(){let e=this.props.add;this.componentList.addComponents(e)}}class $D{constructor(){En.bind(this)}doMath(e){e=e.replace(/\s+/g,"");const t=/(\d+)([+\-*/])(\d+)/,n=e.match(t);if(!n)throw new Error("Invalid input");const i=parseFloat(n[1]),a=n[2],l=parseFloat(n[3]);return{"+":i+l,"-":i-l,"*":i*l,"/":i/l}[a]}}let WD=new $D;class KD extends jl{constructor(e){super(e)}componentDidMount(){document.addEventListener("keyup",this.doMath)}componentWillUnmount(){document.removeEventListener("keyup",this.doMath)}additionalChanges(e){let{name:t,value:n}=e.target;this.setState({val:n})}async doMath(e){if(e.key==="Enter"&&this.state.val!==void 0){let t=this.obj[0],n=await WD.doMath(this.state.val).toString();await t.setCompState({[this.props.name]:n}),t.update(),await this.setState({val:void 0})}}}let GD=class extends ro{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let n=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...n};await this.dispatch({...i})}},JD=class extends ro{buttonClickFunc(){for(let e of this.obj)e.update(this.props.updateParams);this.props.isPopup&&this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}},QD=class extends ro{buttonClickFunc(){let e=this.operationsFactory.addToComponentList(this.props.skipBackendUpdate),t=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(e[0].getJson().type)]:e[0]},n={};this.props.isPopup&&(n={popupSwitch:"",currentPopupComponent:void 0}),this.dispatch({...n,...t})}};var Bd,Iw;function YD(){if(Iw)return Bd;Iw=1;function r(){this.__data__=[],this.size=0}return Bd=r,Bd}var qd,bw;function bC(){if(bw)return qd;bw=1;function r(e,t){return e===t||e!==e&&t!==t}return qd=r,qd}var zd,Aw;function Mh(){if(Aw)return zd;Aw=1;var r=bC();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return zd=e,zd}var Hd,kw;function XD(){if(kw)return Hd;kw=1;var r=Mh(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,l=r(a,i);if(l<0)return!1;var c=a.length-1;return l==c?a.pop():t.call(a,l,1),--this.size,!0}return Hd=n,Hd}var $d,xw;function ZD(){if(xw)return $d;xw=1;var r=Mh();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return $d=e,$d}var Wd,Rw;function ej(){if(Rw)return Wd;Rw=1;var r=Mh();function e(t){return r(this.__data__,t)>-1}return Wd=e,Wd}var Kd,Pw;function tj(){if(Pw)return Kd;Pw=1;var r=Mh();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return Kd=e,Kd}var Gd,Ow;function Fh(){if(Ow)return Gd;Ow=1;var r=YD(),e=XD(),t=ZD(),n=ej(),i=tj();function a(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Gd=a,Gd}var Jd,Nw;function nj(){if(Nw)return Jd;Nw=1;var r=Fh();function e(){this.__data__=new r,this.size=0}return Jd=e,Jd}var Qd,Lw;function rj(){if(Lw)return Qd;Lw=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return Qd=r,Qd}var Yd,Dw;function ij(){if(Dw)return Yd;Dw=1;function r(e){return this.__data__.get(e)}return Yd=r,Yd}var Xd,jw;function sj(){if(jw)return Xd;jw=1;function r(e){return this.__data__.has(e)}return Xd=r,Xd}var Zd,Mw;function AC(){if(Mw)return Zd;Mw=1;var r=typeof dc=="object"&&dc&&dc.Object===Object&&dc;return Zd=r,Zd}var ep,Fw;function Ei(){if(Fw)return ep;Fw=1;var r=AC(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return ep=t,ep}var tp,Vw;function uy(){if(Vw)return tp;Vw=1;var r=Ei(),e=r.Symbol;return tp=e,tp}var np,Uw;function oj(){if(Uw)return np;Uw=1;var r=uy(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(l){var c=t.call(l,i),h=l[i];try{l[i]=void 0;var d=!0}catch{}var v=n.call(l);return d&&(c?l[i]=h:delete l[i]),v}return np=a,np}var rp,Bw;function aj(){if(Bw)return rp;Bw=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return rp=t,rp}var ip,qw;function Vh(){if(qw)return ip;qw=1;var r=uy(),e=oj(),t=aj(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function l(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):t(c)}return ip=l,ip}var sp,zw;function kC(){if(zw)return sp;zw=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return sp=r,sp}var op,Hw;function xC(){if(Hw)return op;Hw=1;var r=Vh(),e=kC(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function l(c){if(!e(c))return!1;var h=r(c);return h==n||h==i||h==t||h==a}return op=l,op}var ap,$w;function lj(){if($w)return ap;$w=1;var r=Ei(),e=r["__core-js_shared__"];return ap=e,ap}var lp,Ww;function uj(){if(Ww)return lp;Ww=1;var r=lj(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return lp=t,lp}var up,Kw;function RC(){if(Kw)return up;Kw=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return up=t,up}var cp,Gw;function cj(){if(Gw)return cp;Gw=1;var r=xC(),e=uj(),t=kC(),n=RC(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,d=c.hasOwnProperty,v=RegExp("^"+h.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g(p){if(!t(p)||e(p))return!1;var y=r(p)?v:a;return y.test(n(p))}return cp=g,cp}var hp,Jw;function hj(){if(Jw)return hp;Jw=1;function r(e,t){return e==null?void 0:e[t]}return hp=r,hp}var fp,Qw;function va(){if(Qw)return fp;Qw=1;var r=cj(),e=hj();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return fp=t,fp}var dp,Yw;function cy(){if(Yw)return dp;Yw=1;var r=va(),e=Ei(),t=r(e,"Map");return dp=t,dp}var pp,Xw;function Uh(){if(Xw)return pp;Xw=1;var r=va(),e=r(Object,"create");return pp=e,pp}var mp,Zw;function fj(){if(Zw)return mp;Zw=1;var r=Uh();function e(){this.__data__=r?r(null):{},this.size=0}return mp=e,mp}var gp,eE;function dj(){if(eE)return gp;eE=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return gp=r,gp}var yp,tE;function pj(){if(tE)return yp;tE=1;var r=Uh(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var l=this.__data__;if(r){var c=l[a];return c===e?void 0:c}return n.call(l,a)?l[a]:void 0}return yp=i,yp}var vp,nE;function mj(){if(nE)return vp;nE=1;var r=Uh(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return vp=n,vp}var _p,rE;function gj(){if(rE)return _p;rE=1;var r=Uh(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return _p=t,_p}var wp,iE;function yj(){if(iE)return wp;iE=1;var r=fj(),e=dj(),t=pj(),n=mj(),i=gj();function a(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,wp=a,wp}var Ep,sE;function vj(){if(sE)return Ep;sE=1;var r=yj(),e=Fh(),t=cy();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Ep=n,Ep}var Tp,oE;function _j(){if(oE)return Tp;oE=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Tp=r,Tp}var Sp,aE;function Bh(){if(aE)return Sp;aE=1;var r=_j();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Sp=e,Sp}var Cp,lE;function wj(){if(lE)return Cp;lE=1;var r=Bh();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Cp=e,Cp}var Ip,uE;function Ej(){if(uE)return Ip;uE=1;var r=Bh();function e(t){return r(this,t).get(t)}return Ip=e,Ip}var bp,cE;function Tj(){if(cE)return bp;cE=1;var r=Bh();function e(t){return r(this,t).has(t)}return bp=e,bp}var Ap,hE;function Sj(){if(hE)return Ap;hE=1;var r=Bh();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return Ap=e,Ap}var kp,fE;function PC(){if(fE)return kp;fE=1;var r=vj(),e=wj(),t=Ej(),n=Tj(),i=Sj();function a(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var d=l[c];this.set(d[0],d[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,kp=a,kp}var xp,dE;function Cj(){if(dE)return xp;dE=1;var r=Fh(),e=cy(),t=PC(),n=200;function i(a,l){var c=this.__data__;if(c instanceof r){var h=c.__data__;if(!e||h.length<n-1)return h.push([a,l]),this.size=++c.size,this;c=this.__data__=new t(h)}return c.set(a,l),this.size=c.size,this}return xp=i,xp}var Rp,pE;function Ij(){if(pE)return Rp;pE=1;var r=Fh(),e=nj(),t=rj(),n=ij(),i=sj(),a=Cj();function l(c){var h=this.__data__=new r(c);this.size=h.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=n,l.prototype.has=i,l.prototype.set=a,Rp=l,Rp}var Pp,mE;function bj(){if(mE)return Pp;mE=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Pp=e,Pp}var Op,gE;function Aj(){if(gE)return Op;gE=1;function r(e){return this.__data__.has(e)}return Op=r,Op}var Np,yE;function kj(){if(yE)return Np;yE=1;var r=PC(),e=bj(),t=Aj();function n(i){var a=-1,l=i==null?0:i.length;for(this.__data__=new r;++a<l;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Np=n,Np}var Lp,vE;function xj(){if(vE)return Lp;vE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return Lp=r,Lp}var Dp,_E;function Rj(){if(_E)return Dp;_E=1;function r(e,t){return e.has(t)}return Dp=r,Dp}var jp,wE;function OC(){if(wE)return jp;wE=1;var r=kj(),e=xj(),t=Rj(),n=1,i=2;function a(l,c,h,d,v,g){var p=h&n,y=l.length,w=c.length;if(y!=w&&!(p&&w>y))return!1;var S=g.get(l),T=g.get(c);if(S&&T)return S==c&&T==l;var E=-1,b=!0,N=h&i?new r:void 0;for(g.set(l,c),g.set(c,l);++E<y;){var I=l[E],F=c[E];if(d)var U=p?d(F,I,E,c,l,g):d(I,F,E,l,c,g);if(U!==void 0){if(U)continue;b=!1;break}if(N){if(!e(c,function(P,_){if(!t(N,_)&&(I===P||v(I,P,h,d,g)))return N.push(_)})){b=!1;break}}else if(!(I===F||v(I,F,h,d,g))){b=!1;break}}return g.delete(l),g.delete(c),b}return jp=a,jp}var Mp,EE;function Pj(){if(EE)return Mp;EE=1;var r=Ei(),e=r.Uint8Array;return Mp=e,Mp}var Fp,TE;function Oj(){if(TE)return Fp;TE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return Fp=r,Fp}var Vp,SE;function Nj(){if(SE)return Vp;SE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return Vp=r,Vp}var Up,CE;function Lj(){if(CE)return Up;CE=1;var r=uy(),e=Pj(),t=bC(),n=OC(),i=Oj(),a=Nj(),l=1,c=2,h="[object Boolean]",d="[object Date]",v="[object Error]",g="[object Map]",p="[object Number]",y="[object RegExp]",w="[object Set]",S="[object String]",T="[object Symbol]",E="[object ArrayBuffer]",b="[object DataView]",N=r?r.prototype:void 0,I=N?N.valueOf:void 0;function F(U,P,_,A,k,x,O){switch(_){case b:if(U.byteLength!=P.byteLength||U.byteOffset!=P.byteOffset)return!1;U=U.buffer,P=P.buffer;case E:return!(U.byteLength!=P.byteLength||!x(new e(U),new e(P)));case h:case d:case p:return t(+U,+P);case v:return U.name==P.name&&U.message==P.message;case y:case S:return U==P+"";case g:var D=i;case w:var $=A&l;if(D||(D=a),U.size!=P.size&&!$)return!1;var J=O.get(U);if(J)return J==P;A|=c,O.set(U,P);var se=n(D(U),D(P),A,k,x,O);return O.delete(U),se;case T:if(I)return I.call(U)==I.call(P)}return!1}return Up=F,Up}var Bp,IE;function Dj(){if(IE)return Bp;IE=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return Bp=r,Bp}var qp,bE;function hy(){if(bE)return qp;bE=1;var r=Array.isArray;return qp=r,qp}var zp,AE;function jj(){if(AE)return zp;AE=1;var r=Dj(),e=hy();function t(n,i,a){var l=i(n);return e(n)?l:r(l,a(n))}return zp=t,zp}var Hp,kE;function Mj(){if(kE)return Hp;kE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,l=[];++n<i;){var c=e[n];t(c,n,e)&&(l[a++]=c)}return l}return Hp=r,Hp}var $p,xE;function Fj(){if(xE)return $p;xE=1;function r(){return[]}return $p=r,$p}var Wp,RE;function Vj(){if(RE)return Wp;RE=1;var r=Mj(),e=Fj(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(l){return l==null?[]:(l=Object(l),r(i(l),function(c){return n.call(l,c)}))}:e;return Wp=a,Wp}var Kp,PE;function Uj(){if(PE)return Kp;PE=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Kp=r,Kp}var Gp,OE;function qh(){if(OE)return Gp;OE=1;function r(e){return e!=null&&typeof e=="object"}return Gp=r,Gp}var Jp,NE;function Bj(){if(NE)return Jp;NE=1;var r=Vh(),e=qh(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return Jp=n,Jp}var Qp,LE;function qj(){if(LE)return Qp;LE=1;var r=Bj(),e=qh(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(l){return e(l)&&n.call(l,"callee")&&!i.call(l,"callee")};return Qp=a,Qp}var yl={exports:{}},Yp,DE;function zj(){if(DE)return Yp;DE=1;function r(){return!1}return Yp=r,Yp}yl.exports;var jE;function NC(){return jE||(jE=1,function(r,e){var t=Ei(),n=zj(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,l=a&&a.exports===i,c=l?t.Buffer:void 0,h=c?c.isBuffer:void 0,d=h||n;r.exports=d}(yl,yl.exports)),yl.exports}var Xp,ME;function Hj(){if(ME)return Xp;ME=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Xp=t,Xp}var Zp,FE;function LC(){if(FE)return Zp;FE=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Zp=e,Zp}var em,VE;function $j(){if(VE)return em;VE=1;var r=Vh(),e=LC(),t=qh(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",d="[object Map]",v="[object Number]",g="[object Object]",p="[object RegExp]",y="[object Set]",w="[object String]",S="[object WeakMap]",T="[object ArrayBuffer]",E="[object DataView]",b="[object Float32Array]",N="[object Float64Array]",I="[object Int8Array]",F="[object Int16Array]",U="[object Int32Array]",P="[object Uint8Array]",_="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]",x={};x[b]=x[N]=x[I]=x[F]=x[U]=x[P]=x[_]=x[A]=x[k]=!0,x[n]=x[i]=x[T]=x[a]=x[E]=x[l]=x[c]=x[h]=x[d]=x[v]=x[g]=x[p]=x[y]=x[w]=x[S]=!1;function O(D){return t(D)&&e(D.length)&&!!x[r(D)]}return em=O,em}var tm,UE;function Wj(){if(UE)return tm;UE=1;function r(e){return function(t){return e(t)}}return tm=r,tm}var vl={exports:{}};vl.exports;var BE;function Kj(){return BE||(BE=1,function(r,e){var t=AC(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,l=a&&t.process,c=function(){try{var h=i&&i.require&&i.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}}();r.exports=c}(vl,vl.exports)),vl.exports}var nm,qE;function DC(){if(qE)return nm;qE=1;var r=$j(),e=Wj(),t=Kj(),n=t&&t.isTypedArray,i=n?e(n):r;return nm=i,nm}var rm,zE;function Gj(){if(zE)return rm;zE=1;var r=Uj(),e=qj(),t=hy(),n=NC(),i=Hj(),a=DC(),l=Object.prototype,c=l.hasOwnProperty;function h(d,v){var g=t(d),p=!g&&e(d),y=!g&&!p&&n(d),w=!g&&!p&&!y&&a(d),S=g||p||y||w,T=S?r(d.length,String):[],E=T.length;for(var b in d)(v||c.call(d,b))&&!(S&&(b=="length"||y&&(b=="offset"||b=="parent")||w&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,E)))&&T.push(b);return T}return rm=h,rm}var im,HE;function Jj(){if(HE)return im;HE=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return im=e,im}var sm,$E;function Qj(){if($E)return sm;$E=1;function r(e,t){return function(n){return e(t(n))}}return sm=r,sm}var om,WE;function Yj(){if(WE)return om;WE=1;var r=Qj(),e=r(Object.keys,Object);return om=e,om}var am,KE;function Xj(){if(KE)return am;KE=1;var r=Jj(),e=Yj(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var l=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&l.push(c);return l}return am=i,am}var lm,GE;function Zj(){if(GE)return lm;GE=1;var r=xC(),e=LC();function t(n){return n!=null&&e(n.length)&&!r(n)}return lm=t,lm}var um,JE;function eM(){if(JE)return um;JE=1;var r=Gj(),e=Xj(),t=Zj();function n(i){return t(i)?r(i):e(i)}return um=n,um}var cm,QE;function tM(){if(QE)return cm;QE=1;var r=jj(),e=Vj(),t=eM();function n(i){return r(i,t,e)}return cm=n,cm}var hm,YE;function nM(){if(YE)return hm;YE=1;var r=tM(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,l,c,h,d,v){var g=c&e,p=r(a),y=p.length,w=r(l),S=w.length;if(y!=S&&!g)return!1;for(var T=y;T--;){var E=p[T];if(!(g?E in l:n.call(l,E)))return!1}var b=v.get(a),N=v.get(l);if(b&&N)return b==l&&N==a;var I=!0;v.set(a,l),v.set(l,a);for(var F=g;++T<y;){E=p[T];var U=a[E],P=l[E];if(h)var _=g?h(P,U,E,l,a,v):h(U,P,E,a,l,v);if(!(_===void 0?U===P||d(U,P,c,h,v):_)){I=!1;break}F||(F=E=="constructor")}if(I&&!F){var A=a.constructor,k=l.constructor;A!=k&&"constructor"in a&&"constructor"in l&&!(typeof A=="function"&&A instanceof A&&typeof k=="function"&&k instanceof k)&&(I=!1)}return v.delete(a),v.delete(l),I}return hm=i,hm}var fm,XE;function rM(){if(XE)return fm;XE=1;var r=va(),e=Ei(),t=r(e,"DataView");return fm=t,fm}var dm,ZE;function iM(){if(ZE)return dm;ZE=1;var r=va(),e=Ei(),t=r(e,"Promise");return dm=t,dm}var pm,e1;function sM(){if(e1)return pm;e1=1;var r=va(),e=Ei(),t=r(e,"Set");return pm=t,pm}var mm,t1;function oM(){if(t1)return mm;t1=1;var r=va(),e=Ei(),t=r(e,"WeakMap");return mm=t,mm}var gm,n1;function aM(){if(n1)return gm;n1=1;var r=rM(),e=cy(),t=iM(),n=sM(),i=oM(),a=Vh(),l=RC(),c="[object Map]",h="[object Object]",d="[object Promise]",v="[object Set]",g="[object WeakMap]",p="[object DataView]",y=l(r),w=l(e),S=l(t),T=l(n),E=l(i),b=a;return(r&&b(new r(new ArrayBuffer(1)))!=p||e&&b(new e)!=c||t&&b(t.resolve())!=d||n&&b(new n)!=v||i&&b(new i)!=g)&&(b=function(N){var I=a(N),F=I==h?N.constructor:void 0,U=F?l(F):"";if(U)switch(U){case y:return p;case w:return c;case S:return d;case T:return v;case E:return g}return I}),gm=b,gm}var ym,r1;function lM(){if(r1)return ym;r1=1;var r=Ij(),e=OC(),t=Lj(),n=nM(),i=aM(),a=hy(),l=NC(),c=DC(),h=1,d="[object Arguments]",v="[object Array]",g="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function w(S,T,E,b,N,I){var F=a(S),U=a(T),P=F?v:i(S),_=U?v:i(T);P=P==d?g:P,_=_==d?g:_;var A=P==g,k=_==g,x=P==_;if(x&&l(S)){if(!l(T))return!1;F=!0,A=!1}if(x&&!A)return I||(I=new r),F||c(S)?e(S,T,E,b,N,I):t(S,T,P,E,b,N,I);if(!(E&h)){var O=A&&y.call(S,"__wrapped__"),D=k&&y.call(T,"__wrapped__");if(O||D){var $=O?S.value():S,J=D?T.value():T;return I||(I=new r),N($,J,E,b,I)}}return x?(I||(I=new r),n(S,T,E,b,N,I)):!1}return ym=w,ym}var vm,i1;function uM(){if(i1)return vm;i1=1;var r=lM(),e=qh();function t(n,i,a,l,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,l,t,c)}return vm=t,vm}var _m,s1;function cM(){if(s1)return _m;s1=1;var r=uM();function e(t,n){return r(t,n)}return _m=e,_m}var Mc={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var hM=Mc.exports,o1;function fM(){return o1||(o1=1,function(r,e){(function(n,i){r.exports=i()})(typeof self<"u"?self:hM,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var l=n[a]={i:a,l:!1,exports:{}};return t[a].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=n,i.d=function(a,l,c){i.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(l,"a",l),l},i.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},i.p="",i(i.s=109)}([function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),l=i(18),c=i(19),h=i(45),d=i(46),v=i(47),g=i(48),p=i(49),y=i(12),w=i(32),S=i(33),T=i(31),E=i(1),b={Scope:E.Scope,create:E.create,find:E.find,query:E.query,register:E.register,Container:a.default,Format:l.default,Leaf:c.default,Embed:g.default,Scroll:h.default,Block:v.default,Inline:d.default,Text:p.default,Attributor:{Attribute:y.default,Class:w.default,Style:S.default,Store:T.default}};n.default=b},function(t,n,i){var a=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var N in b)b.hasOwnProperty(N)&&(E[N]=b[N])};return function(E,b){T(E,b);function N(){this.constructor=E}E.prototype=b===null?Object.create(b):(N.prototype=b.prototype,new N)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=function(T){a(E,T);function E(b){var N=this;return b="[Parchment] "+b,N=T.call(this,b)||this,N.message=b,N.name=N.constructor.name,N}return E}(Error);n.ParchmentError=l;var c={},h={},d={},v={};n.DATA_KEY="__blot";var g;(function(T){T[T.TYPE=3]="TYPE",T[T.LEVEL=12]="LEVEL",T[T.ATTRIBUTE=13]="ATTRIBUTE",T[T.BLOT=14]="BLOT",T[T.INLINE=7]="INLINE",T[T.BLOCK=11]="BLOCK",T[T.BLOCK_BLOT=10]="BLOCK_BLOT",T[T.INLINE_BLOT=6]="INLINE_BLOT",T[T.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",T[T.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",T[T.ANY=15]="ANY"})(g=n.Scope||(n.Scope={}));function p(T,E){var b=w(T);if(b==null)throw new l("Unable to create "+T+" blot");var N=b,I=T instanceof Node||T.nodeType===Node.TEXT_NODE?T:N.create(E);return new N(I,E)}n.create=p;function y(T,E){return E===void 0&&(E=!1),T==null?null:T[n.DATA_KEY]!=null?T[n.DATA_KEY].blot:E?y(T.parentNode,E):null}n.find=y;function w(T,E){E===void 0&&(E=g.ANY);var b;if(typeof T=="string")b=v[T]||c[T];else if(T instanceof Text||T.nodeType===Node.TEXT_NODE)b=v.text;else if(typeof T=="number")T&g.LEVEL&g.BLOCK?b=v.block:T&g.LEVEL&g.INLINE&&(b=v.inline);else if(T instanceof HTMLElement){var N=(T.getAttribute("class")||"").split(/\s+/);for(var I in N)if(b=h[N[I]],b)break;b=b||d[T.tagName]}return b==null?null:E&g.LEVEL&b.scope&&E&g.TYPE&b.scope?b:null}n.query=w;function S(){for(var T=[],E=0;E<arguments.length;E++)T[E]=arguments[E];if(T.length>1)return T.map(function(I){return S(I)});var b=T[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new l("Invalid definition");if(b.blotName==="abstract")throw new l("Cannot register abstract class");if(v[b.blotName||b.attrName]=b,typeof b.keyName=="string")c[b.keyName]=b;else if(b.className!=null&&(h[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(I){return I.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var N=Array.isArray(b.tagName)?b.tagName:[b.tagName];N.forEach(function(I){(d[I]==null||b.className==null)&&(d[I]=b)})}return b}n.register=S},function(t,n,i){var a=i(51),l=i(11),c=i(3),h=i(20),d="\0",v=function(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]};v.prototype.insert=function(g,p){var y={};return g.length===0?this:(y.insert=g,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y))},v.prototype.delete=function(g){return g<=0?this:this.push({delete:g})},v.prototype.retain=function(g,p){if(g<=0)return this;var y={retain:g};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(y.attributes=p),this.push(y)},v.prototype.push=function(g){var p=this.ops.length,y=this.ops[p-1];if(g=c(!0,{},g),typeof y=="object"){if(typeof g.delete=="number"&&typeof y.delete=="number")return this.ops[p-1]={delete:y.delete+g.delete},this;if(typeof y.delete=="number"&&g.insert!=null&&(p-=1,y=this.ops[p-1],typeof y!="object"))return this.ops.unshift(g),this;if(l(g.attributes,y.attributes)){if(typeof g.insert=="string"&&typeof y.insert=="string")return this.ops[p-1]={insert:y.insert+g.insert},typeof g.attributes=="object"&&(this.ops[p-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof y.retain=="number")return this.ops[p-1]={retain:y.retain+g.retain},typeof g.attributes=="object"&&(this.ops[p-1].attributes=g.attributes),this}}return p===this.ops.length?this.ops.push(g):this.ops.splice(p,0,g),this},v.prototype.chop=function(){var g=this.ops[this.ops.length-1];return g&&g.retain&&!g.attributes&&this.ops.pop(),this},v.prototype.filter=function(g){return this.ops.filter(g)},v.prototype.forEach=function(g){this.ops.forEach(g)},v.prototype.map=function(g){return this.ops.map(g)},v.prototype.partition=function(g){var p=[],y=[];return this.forEach(function(w){var S=g(w)?p:y;S.push(w)}),[p,y]},v.prototype.reduce=function(g,p){return this.ops.reduce(g,p)},v.prototype.changeLength=function(){return this.reduce(function(g,p){return p.insert?g+h.length(p):p.delete?g-p.delete:g},0)},v.prototype.length=function(){return this.reduce(function(g,p){return g+h.length(p)},0)},v.prototype.slice=function(g,p){g=g||0,typeof p!="number"&&(p=1/0);for(var y=[],w=h.iterator(this.ops),S=0;S<p&&w.hasNext();){var T;S<g?T=w.next(g-S):(T=w.next(p-S),y.push(T)),S+=h.length(T)}return new v(y)},v.prototype.compose=function(g){var p=h.iterator(this.ops),y=h.iterator(g.ops),w=[],S=y.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){for(var T=S.retain;p.peekType()==="insert"&&p.peekLength()<=T;)T-=p.peekLength(),w.push(p.next());S.retain-T>0&&y.next(S.retain-T)}for(var E=new v(w);p.hasNext()||y.hasNext();)if(y.peekType()==="insert")E.push(y.next());else if(p.peekType()==="delete")E.push(p.next());else{var b=Math.min(p.peekLength(),y.peekLength()),N=p.next(b),I=y.next(b);if(typeof I.retain=="number"){var F={};typeof N.retain=="number"?F.retain=b:F.insert=N.insert;var U=h.attributes.compose(N.attributes,I.attributes,typeof N.retain=="number");if(U&&(F.attributes=U),E.push(F),!y.hasNext()&&l(E.ops[E.ops.length-1],F)){var P=new v(p.rest());return E.concat(P).chop()}}else typeof I.delete=="number"&&typeof N.retain=="number"&&E.push(I)}return E.chop()},v.prototype.concat=function(g){var p=new v(this.ops.slice());return g.ops.length>0&&(p.push(g.ops[0]),p.ops=p.ops.concat(g.ops.slice(1))),p},v.prototype.diff=function(g,p){if(this.ops===g.ops)return new v;var y=[this,g].map(function(b){return b.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:d;var I=b===g?"on":"with";throw new Error("diff() called "+I+" non-document")}).join("")}),w=new v,S=a(y[0],y[1],p),T=h.iterator(this.ops),E=h.iterator(g.ops);return S.forEach(function(b){for(var N=b[1].length;N>0;){var I=0;switch(b[0]){case a.INSERT:I=Math.min(E.peekLength(),N),w.push(E.next(I));break;case a.DELETE:I=Math.min(N,T.peekLength()),T.next(I),w.delete(I);break;case a.EQUAL:I=Math.min(T.peekLength(),E.peekLength(),N);var F=T.next(I),U=E.next(I);l(F.insert,U.insert)?w.retain(I,h.attributes.diff(F.attributes,U.attributes)):w.push(U).delete(I);break}N-=I}}),w.chop()},v.prototype.eachLine=function(g,p){p=p||`
`;for(var y=h.iterator(this.ops),w=new v,S=0;y.hasNext();){if(y.peekType()!=="insert")return;var T=y.peek(),E=h.length(T)-y.peekLength(),b=typeof T.insert=="string"?T.insert.indexOf(p,E)-E:-1;if(b<0)w.push(y.next());else if(b>0)w.push(y.next(b));else{if(g(w,y.next(1).attributes||{},S)===!1)return;S+=1,w=new v}}w.length()>0&&g(w,{},S)},v.prototype.transform=function(g,p){if(p=!!p,typeof g=="number")return this.transformPosition(g,p);for(var y=h.iterator(this.ops),w=h.iterator(g.ops),S=new v;y.hasNext()||w.hasNext();)if(y.peekType()==="insert"&&(p||w.peekType()!=="insert"))S.retain(h.length(y.next()));else if(w.peekType()==="insert")S.push(w.next());else{var T=Math.min(y.peekLength(),w.peekLength()),E=y.next(T),b=w.next(T);if(E.delete)continue;b.delete?S.push(b):S.retain(T,h.attributes.transform(E.attributes,b.attributes,p))}return S.chop()},v.prototype.transformPosition=function(g,p){p=!!p;for(var y=h.iterator(this.ops),w=0;y.hasNext()&&w<=g;){var S=y.peekLength(),T=y.peekType();if(y.next(),T==="delete"){g-=Math.min(S,g-w);continue}else T==="insert"&&(w<g||!p)&&(g+=S);w+=S}return g},t.exports=v},function(t,n){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h=function(y){return typeof Array.isArray=="function"?Array.isArray(y):a.call(y)==="[object Array]"},d=function(y){if(!y||a.call(y)!=="[object Object]")return!1;var w=i.call(y,"constructor"),S=y.constructor&&y.constructor.prototype&&i.call(y.constructor.prototype,"isPrototypeOf");if(y.constructor&&!w&&!S)return!1;var T;for(T in y);return typeof T>"u"||i.call(y,T)},v=function(y,w){l&&w.name==="__proto__"?l(y,w.name,{enumerable:!0,configurable:!0,value:w.newValue,writable:!0}):y[w.name]=w.newValue},g=function(y,w){if(w==="__proto__")if(i.call(y,w)){if(c)return c(y,w).value}else return;return y[w]};t.exports=function p(){var y,w,S,T,E,b,N=arguments[0],I=1,F=arguments.length,U=!1;for(typeof N=="boolean"&&(U=N,N=arguments[1]||{},I=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});I<F;++I)if(y=arguments[I],y!=null)for(w in y)S=g(N,w),T=g(y,w),N!==T&&(U&&T&&(d(T)||(E=h(T)))?(E?(E=!1,b=S&&h(S)?S:[]):b=S&&d(S)?S:{},v(N,{name:w,newValue:p(U,b,T)})):typeof T<"u"&&v(N,{name:w,newValue:T}));return N}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function x(O,D){for(var $=0;$<D.length;$++){var J=D[$];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(O,J.key,J)}}return function(O,D,$){return D&&x(O.prototype,D),$&&x(O,$),O}}(),l=function x(O,D,$){O===null&&(O=Function.prototype);var J=Object.getOwnPropertyDescriptor(O,D);if(J===void 0){var se=Object.getPrototypeOf(O);return se===null?void 0:x(se,D,$)}else{if("value"in J)return J.value;var Z=J.get;return Z===void 0?void 0:Z.call($)}},c=i(3),h=N(c),d=i(2),v=N(d),g=i(0),p=N(g),y=i(16),w=N(y),S=i(6),T=N(S),E=i(7),b=N(E);function N(x){return x&&x.__esModule?x:{default:x}}function I(x,O){if(!(x instanceof O))throw new TypeError("Cannot call a class as a function")}function F(x,O){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:x}function U(x,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);x.prototype=Object.create(O&&O.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(x,O):x.__proto__=O)}var P=1,_=function(x){U(O,x);function O(){return I(this,O),F(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return a(O,[{key:"attach",value:function(){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function($,J){var se=p.default.query($,p.default.Scope.BLOCK_ATTRIBUTE);se!=null&&this.attributes.attribute(se,J)}},{key:"formatAt",value:function($,J,se,Z){this.format(se,Z)}},{key:"insertAt",value:function($,J,se){if(typeof J=="string"&&J.endsWith(`
`)){var Z=p.default.create(A.blotName);this.parent.insertBefore(Z,$===0?this:this.next),Z.insertAt(0,J.slice(0,-1))}else l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,$,J,se)}}]),O}(p.default.Embed);_.scope=p.default.Scope.BLOCK_BLOT;var A=function(x){U(O,x);function O(D){I(this,O);var $=F(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,D));return $.cache={},$}return a(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function($,J){return J.length()===0?$:$.insert(J.value(),k(J))},new v.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function($,J){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,$,J),this.cache={}}},{key:"formatAt",value:function($,J,se,Z){J<=0||(p.default.query(se,p.default.Scope.BLOCK)?$+J===this.length()&&this.format(se,Z):l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,$,Math.min(J,this.length()-$-1),se,Z),this.cache={})}},{key:"insertAt",value:function($,J,se){if(se!=null)return l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,$,J,se);if(J.length!==0){var Z=J.split(`
`),re=Z.shift();re.length>0&&($<this.length()-1||this.children.tail==null?l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min($,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var G=this;Z.reduce(function(W,M){return G=G.split(W,!0),G.insertAt(0,M),M.length},$+re.length)}}},{key:"insertBefore",value:function($,J){var se=this.children.head;l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,$,J),se instanceof w.default&&se.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function($,J){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,$,J),this.cache={}}},{key:"optimize",value:function($){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,$),this.cache={}}},{key:"path",value:function($){return l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,$,!0)}},{key:"removeChild",value:function($){l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,$),this.cache={}}},{key:"split",value:function($){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(J&&($===0||$>=this.length()-P)){var se=this.clone();return $===0?(this.parent.insertBefore(se,this),this):(this.parent.insertBefore(se,this.next),se)}else{var Z=l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,$,J);return this.cache={},Z}}}]),O}(p.default.Block);A.blotName="block",A.tagName="P",A.defaultChild="break",A.allowedChildren=[T.default,p.default.Embed,b.default];function k(x){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x==null||(typeof x.formats=="function"&&(O=(0,h.default)(O,x.formats())),x.parent==null||x.parent.blotName=="scroll"||x.parent.statics.scope!==x.statics.scope)?O:k(x.parent,O)}n.bubbleFormats=k,n.BlockEmbed=_,n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,M){var B=[],z=!0,ee=!1,X=void 0;try{for(var H=W[Symbol.iterator](),Y;!(z=(Y=H.next()).done)&&(B.push(Y.value),!(M&&B.length===M));z=!0);}catch(ne){ee=!0,X=ne}finally{try{!z&&H.return&&H.return()}finally{if(ee)throw X}}return B}return function(W,M){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function G(W,M){for(var B=0;B<M.length;B++){var z=M[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(W,z.key,z)}}return function(W,M,B){return M&&G(W.prototype,M),B&&G(W,B),W}}();i(50);var h=i(2),d=k(h),v=i(14),g=k(v),p=i(8),y=k(p),w=i(9),S=k(w),T=i(0),E=k(T),b=i(15),N=k(b),I=i(3),F=k(I),U=i(10),P=k(U),_=i(34),A=k(_);function k(G){return G&&G.__esModule?G:{default:G}}function x(G,W,M){return W in G?Object.defineProperty(G,W,{value:M,enumerable:!0,configurable:!0,writable:!0}):G[W]=M,G}function O(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var D=(0,P.default)("quill"),$=function(){c(G,null,[{key:"debug",value:function(M){M===!0&&(M="log"),P.default.level(M)}},{key:"find",value:function(M){return M.__quill||E.default.find(M)}},{key:"import",value:function(M){return this.imports[M]==null&&D.error("Cannot import "+M+". Are you sure it was registered?"),this.imports[M]}},{key:"register",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof M!="string"){var X=M.attrName||M.blotName;typeof X=="string"?this.register("formats/"+X,M,B):Object.keys(M).forEach(function(H){z.register(H,M[H],B)})}else this.imports[M]!=null&&!ee&&D.warn("Overwriting "+M+" with",B),this.imports[M]=B,(M.startsWith("blots/")||M.startsWith("formats/"))&&B.blotName!=="abstract"?E.default.register(B):M.startsWith("modules")&&typeof B.register=="function"&&B.register()}}]);function G(W){var M=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,G),this.options=J(W,B),this.container=this.options.container,this.container==null)return D.error("Invalid Quill container",W);this.options.debug&&G.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new y.default,this.scroll=E.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new g.default(this.scroll),this.selection=new N.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(y.default.events.EDITOR_CHANGE,function(X){X===y.default.events.TEXT_CHANGE&&M.root.classList.toggle("ql-blank",M.editor.isBlank())}),this.emitter.on(y.default.events.SCROLL_UPDATE,function(X,H){var Y=M.selection.lastRange,ne=Y&&Y.length===0?Y.index:void 0;se.call(M,function(){return M.editor.update(null,H,ne)},X)});var ee=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(ee),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(G,[{key:"addContainer",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof M=="string"){var z=M;M=document.createElement("div"),M.classList.add(z)}return this.container.insertBefore(M,B),M}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(M,B,z){var ee=this,X=Z(M,B,z),H=l(X,4);return M=H[0],B=H[1],z=H[3],se.call(this,function(){return ee.editor.deleteText(M,B)},z,M,-1*B)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(M),this.container.classList.toggle("ql-disabled",!M)}},{key:"focus",value:function(){var M=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=M,this.scrollIntoView()}},{key:"format",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;return se.call(this,function(){var X=z.getSelection(!0),H=new d.default;if(X==null)return H;if(E.default.query(M,E.default.Scope.BLOCK))H=z.editor.formatLine(X.index,X.length,x({},M,B));else{if(X.length===0)return z.selection.format(M,B),H;H=z.editor.formatText(X.index,X.length,x({},M,B))}return z.setSelection(X,y.default.sources.SILENT),H},ee)}},{key:"formatLine",value:function(M,B,z,ee,X){var H=this,Y=void 0,ne=Z(M,B,z,ee,X),ie=l(ne,4);return M=ie[0],B=ie[1],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.formatLine(M,B,Y)},X,M,0)}},{key:"formatText",value:function(M,B,z,ee,X){var H=this,Y=void 0,ne=Z(M,B,z,ee,X),ie=l(ne,4);return M=ie[0],B=ie[1],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.formatText(M,B,Y)},X,M,0)}},{key:"getBounds",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof M=="number"?z=this.selection.getBounds(M,B):z=this.selection.getBounds(M.index,M.length);var ee=this.container.getBoundingClientRect();return{bottom:z.bottom-ee.top,height:z.height,left:z.left-ee.left,right:z.right-ee.left,top:z.top-ee.top,width:z.width}}},{key:"getContents",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,z=Z(M,B),ee=l(z,2);return M=ee[0],B=ee[1],this.editor.getContents(M,B)}},{key:"getFormat",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof M=="number"?this.editor.getFormat(M,B):this.editor.getFormat(M.index,M.length)}},{key:"getIndex",value:function(M){return M.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(M){return this.scroll.leaf(M)}},{key:"getLine",value:function(M){return this.scroll.line(M)}},{key:"getLines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof M!="number"?this.scroll.lines(M.index,M.length):this.scroll.lines(M,B)}},{key:"getModule",value:function(M){return this.theme.modules[M]}},{key:"getSelection",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return M&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-M,z=Z(M,B),ee=l(z,2);return M=ee[0],B=ee[1],this.editor.getText(M,B)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(M,B,z){var ee=this,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:G.sources.API;return se.call(this,function(){return ee.editor.insertEmbed(M,B,z)},X,M)}},{key:"insertText",value:function(M,B,z,ee,X){var H=this,Y=void 0,ne=Z(M,0,z,ee,X),ie=l(ne,4);return M=ie[0],Y=ie[2],X=ie[3],se.call(this,function(){return H.editor.insertText(M,B,Y)},X,M,B.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(M,B,z){this.clipboard.dangerouslyPasteHTML(M,B,z)}},{key:"removeFormat",value:function(M,B,z){var ee=this,X=Z(M,B,z),H=l(X,4);return M=H[0],B=H[1],z=H[3],se.call(this,function(){return ee.editor.removeFormat(M,B)},z,M)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(M){var B=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return se.call(this,function(){M=new d.default(M);var ee=B.getLength(),X=B.editor.deleteText(0,ee),H=B.editor.applyDelta(M),Y=H.ops[H.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(B.editor.deleteText(B.getLength()-1,1),H.delete(1));var ne=X.compose(H);return ne},z)}},{key:"setSelection",value:function(M,B,z){if(M==null)this.selection.setRange(null,B||G.sources.API);else{var ee=Z(M,B,z),X=l(ee,4);M=X[0],B=X[1],z=X[3],this.selection.setRange(new b.Range(M,B),z),z!==y.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API,z=new d.default().insert(M);return this.setContents(z,B)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,B=this.scroll.update(M);return this.selection.update(M),B}},{key:"updateContents",value:function(M){var B=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y.default.sources.API;return se.call(this,function(){return M=new d.default(M),B.editor.applyDelta(M,z)},z,!0)}}]),G}();$.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},$.events=y.default.events,$.sources=y.default.sources,$.version="1.3.7",$.imports={delta:d.default,parchment:E.default,"core/module":S.default,"core/theme":A.default};function J(G,W){if(W=(0,F.default)(!0,{container:G,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===$.DEFAULTS.theme)W.theme=A.default;else if(W.theme=$.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var M=(0,F.default)(!0,{},W.theme.DEFAULTS);[M,W].forEach(function(ee){ee.modules=ee.modules||{},Object.keys(ee.modules).forEach(function(X){ee.modules[X]===!0&&(ee.modules[X]={})})});var B=Object.keys(M.modules).concat(Object.keys(W.modules)),z=B.reduce(function(ee,X){var H=$.import("modules/"+X);return H==null?D.error("Cannot load "+X+" module. Are you sure you registered it?"):ee[X]=H.DEFAULTS||{},ee},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,F.default)(!0,{},$.DEFAULTS,{modules:z},M,W),["bounds","container","scrollingContainer"].forEach(function(ee){typeof W[ee]=="string"&&(W[ee]=document.querySelector(W[ee]))}),W.modules=Object.keys(W.modules).reduce(function(ee,X){return W.modules[X]&&(ee[X]=W.modules[X]),ee},{}),W}function se(G,W,M,B){if(this.options.strict&&!this.isEnabled()&&W===y.default.sources.USER)return new d.default;var z=M==null?null:this.getSelection(),ee=this.editor.delta,X=G();if(z!=null&&(M===!0&&(M=z.index),B==null?z=re(z,X,W):B!==0&&(z=re(z,M,B,W)),this.setSelection(z,y.default.sources.SILENT)),X.length()>0){var H,Y=[y.default.events.TEXT_CHANGE,X,ee,W];if((H=this.emitter).emit.apply(H,[y.default.events.EDITOR_CHANGE].concat(Y)),W!==y.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,Y)}}return X}function Z(G,W,M,B,z){var ee={};return typeof G.index=="number"&&typeof G.length=="number"?typeof W!="number"?(z=B,B=M,M=W,W=G.length,G=G.index):(W=G.length,G=G.index):typeof W!="number"&&(z=B,B=M,M=W,W=0),(typeof M>"u"?"undefined":a(M))==="object"?(ee=M,z=B):typeof M=="string"&&(B!=null?ee[M]=B:z=M),z=z||y.default.sources.API,[G,W,ee,z]}function re(G,W,M,B){if(G==null)return null;var z=void 0,ee=void 0;if(W instanceof d.default){var X=[G.index,G.index+G.length].map(function(ie){return W.transformPosition(ie,B!==y.default.sources.USER)}),H=l(X,2);z=H[0],ee=H[1]}else{var Y=[G.index,G.index+G.length].map(function(ie){return ie<W||ie===W&&B===y.default.sources.USER?ie:M>=0?ie+M:Math.max(W,ie+M)}),ne=l(Y,2);z=ne[0],ee=ne[1]}return new b.Range(z,ee-z)}n.expandConfig=J,n.overload=Z,n.default=$},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(E,b){for(var N=0;N<b.length;N++){var I=b[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,b,N){return b&&T(E.prototype,b),N&&T(E,N),E}}(),l=function T(E,b,N){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,b);if(I===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:T(F,b,N)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(N)}},c=i(7),h=g(c),d=i(0),v=g(d);function g(T){return T&&T.__esModule?T:{default:T}}function p(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function y(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function w(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var S=function(T){w(E,T);function E(){return p(this,E),y(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"formatAt",value:function(N,I,F,U){if(E.compare(this.statics.blotName,F)<0&&v.default.query(F,v.default.Scope.BLOT)){var P=this.isolate(N,I);U&&P.wrap(F,U)}else l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,N,I,F,U)}},{key:"optimize",value:function(N){if(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,N),this.parent instanceof E&&E.compare(this.statics.blotName,this.parent.statics.blotName)>0){var I=this.parent.isolate(this.offset(),this.length());this.moveChildren(I),I.wrap(this)}}}],[{key:"compare",value:function(N,I){var F=E.order.indexOf(N),U=E.order.indexOf(I);return F>=0||U>=0?F-U:N===I?0:N<I?-1:1}}]),E}(v.default.Inline);S.allowedChildren=[S,v.default.Embed,h.default],S.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default.Text);n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(N,I){for(var F=0;F<I.length;F++){var U=I[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(N,U.key,U)}}return function(N,I,F){return I&&b(N.prototype,I),F&&b(N,F),N}}(),l=function b(N,I,F){N===null&&(N=Function.prototype);var U=Object.getOwnPropertyDescriptor(N,I);if(U===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:b(P,I,F)}else{if("value"in U)return U.value;var _=U.get;return _===void 0?void 0:_.call(F)}},c=i(54),h=g(c),d=i(10),v=g(d);function g(b){return b&&b.__esModule?b:{default:b}}function p(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function y(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function w(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var S=(0,v.default)("quill:events"),T=["selectionchange","mousedown","mouseup","click"];T.forEach(function(b){document.addEventListener(b,function(){for(var N=arguments.length,I=Array(N),F=0;F<N;F++)I[F]=arguments[F];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(U){if(U.__quill&&U.__quill.emitter){var P;(P=U.__quill.emitter).handleDOM.apply(P,I)}})})});var E=function(b){w(N,b);function N(){p(this,N);var I=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return I.listeners={},I.on("error",S.error),I}return a(N,[{key:"emit",value:function(){S.log.apply(S,arguments),l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(F){for(var U=arguments.length,P=Array(U>1?U-1:0),_=1;_<U;_++)P[_-1]=arguments[_];(this.listeners[F.type]||[]).forEach(function(A){var k=A.node,x=A.handler;(F.target===k||k.contains(F.target))&&x.apply(void 0,[F].concat(P))})}},{key:"listenDOM",value:function(F,U,P){this.listeners[F]||(this.listeners[F]=[]),this.listeners[F].push({node:U,handler:P})}}]),N}(h.default);E.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},E.sources={API:"api",SILENT:"silent",USER:"user"},n.default=E},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});function a(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function c(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=h,this.options=d};l.DEFAULTS={},n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],l="warn";function c(d){if(a.indexOf(d)<=a.indexOf(l)){for(var v,g=arguments.length,p=Array(g>1?g-1:0),y=1;y<g;y++)p[y-1]=arguments[y];(v=console)[d].apply(v,p)}}function h(d){return a.reduce(function(v,g){return v[g]=c.bind(console,g,d),v},{})}c.level=h.level=function(d){l=d},n.default=h},function(t,n,i){var a=Array.prototype.slice,l=i(52),c=i(53),h=t.exports=function(p,y,w){return w||(w={}),p===y?!0:p instanceof Date&&y instanceof Date?p.getTime()===y.getTime():!p||!y||typeof p!="object"&&typeof y!="object"?w.strict?p===y:p==y:g(p,y,w)};function d(p){return p==null}function v(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function g(p,y,w){var S,T;if(d(p)||d(y)||p.prototype!==y.prototype)return!1;if(c(p))return c(y)?(p=a.call(p),y=a.call(y),h(p,y,w)):!1;if(v(p)){if(!v(y)||p.length!==y.length)return!1;for(S=0;S<p.length;S++)if(p[S]!==y[S])return!1;return!0}try{var E=l(p),b=l(y)}catch{return!1}if(E.length!=b.length)return!1;for(E.sort(),b.sort(),S=E.length-1;S>=0;S--)if(E[S]!=b[S])return!1;for(S=E.length-1;S>=0;S--)if(T=E[S],!h(p[T],y[T],w))return!1;return typeof p==typeof y}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),l=function(){function c(h,d,v){v===void 0&&(v={}),this.attrName=h,this.keyName=d;var g=a.Scope.TYPE&a.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&a.Scope.LEVEL|g:this.scope=a.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return c.keys=function(h){return[].map.call(h.attributes,function(d){return d.name})},c.prototype.add=function(h,d){return this.canAdd(h,d)?(h.setAttribute(this.keyName,d),!0):!1},c.prototype.canAdd=function(h,d){var v=a.query(h,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},c.prototype.remove=function(h){h.removeAttribute(this.keyName)},c.prototype.value=function(h){var d=h.getAttribute(this.keyName);return this.canAdd(h,d)&&d?d:""},c}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function _(A,k){var x=[],O=!0,D=!1,$=void 0;try{for(var J=A[Symbol.iterator](),se;!(O=(se=J.next()).done)&&(x.push(se.value),!(k&&x.length===k));O=!0);}catch(Z){D=!0,$=Z}finally{try{!O&&J.return&&J.return()}finally{if(D)throw $}}return x}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(A,k){for(var x=0;x<k.length;x++){var O=k[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,k,x){return k&&_(A.prototype,k),x&&_(A,x),A}}(),c=function _(A,k,x){A===null&&(A=Function.prototype);var O=Object.getOwnPropertyDescriptor(A,k);if(O===void 0){var D=Object.getPrototypeOf(A);return D===null?void 0:_(D,k,x)}else{if("value"in O)return O.value;var $=O.get;return $===void 0?void 0:$.call(x)}},h=i(2),d=b(h),v=i(0),g=b(v),p=i(4),y=b(p),w=i(6),S=b(w),T=i(7),E=b(T);function b(_){return _&&_.__esModule?_:{default:_}}function N(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function I(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function F(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var U=function(_){F(A,_);function A(){return N(this,A),I(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return A}(S.default);U.blotName="code",U.tagName="CODE";var P=function(_){F(A,_);function A(){return N(this,A),I(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return l(A,[{key:"delta",value:function(){var x=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(D,$){return D.insert($).insert(`
`,x.formats())},new d.default)}},{key:"format",value:function(x,O){if(!(x===this.statics.blotName&&O)){var D=this.descendant(E.default,this.length()-1),$=a(D,1),J=$[0];J!=null&&J.deleteAt(J.length()-1,1),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,x,O)}}},{key:"formatAt",value:function(x,O,D,$){if(O!==0&&!(g.default.query(D,g.default.Scope.BLOCK)==null||D===this.statics.blotName&&$===this.statics.formats(this.domNode))){var J=this.newlineIndex(x);if(!(J<0||J>=x+O)){var se=this.newlineIndex(x,!0)+1,Z=J-se+1,re=this.isolate(se,Z),G=re.next;re.format(D,$),G instanceof A&&G.formatAt(0,x-se+O-Z,D,$)}}}},{key:"insertAt",value:function(x,O,D){if(D==null){var $=this.descendant(E.default,x),J=a($,2),se=J[0],Z=J[1];se.insertAt(Z,O)}}},{key:"length",value:function(){var x=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?x:x+1}},{key:"newlineIndex",value:function(x){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,x).lastIndexOf(`
`);var D=this.domNode.textContent.slice(x).indexOf(`
`);return D>-1?x+D:-1}},{key:"optimize",value:function(x){this.domNode.textContent.endsWith(`
`)||this.appendChild(g.default.create("text",`
`)),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,x);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(x),O.moveChildren(this),O.remove())}},{key:"replace",value:function(x){c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replace",this).call(this,x),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var D=g.default.find(O);D==null?O.parentNode.removeChild(O):D instanceof g.default.Embed?D.remove():D.unwrap()})}}],[{key:"create",value:function(x){var O=c(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,x);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),A}(y.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",n.Code=U,n.default=P},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},l=function(){function G(W,M){var B=[],z=!0,ee=!1,X=void 0;try{for(var H=W[Symbol.iterator](),Y;!(z=(Y=H.next()).done)&&(B.push(Y.value),!(M&&B.length===M));z=!0);}catch(ne){ee=!0,X=ne}finally{try{!z&&H.return&&H.return()}finally{if(ee)throw X}}return B}return function(W,M){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function G(W,M){for(var B=0;B<M.length;B++){var z=M[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(W,z.key,z)}}return function(W,M,B){return M&&G(W.prototype,M),B&&G(W,B),W}}(),h=i(2),d=O(h),v=i(20),g=O(v),p=i(0),y=O(p),w=i(13),S=O(w),T=i(24),E=O(T),b=i(4),N=O(b),I=i(16),F=O(I),U=i(21),P=O(U),_=i(11),A=O(_),k=i(3),x=O(k);function O(G){return G&&G.__esModule?G:{default:G}}function D(G,W,M){return W in G?Object.defineProperty(G,W,{value:M,enumerable:!0,configurable:!0,writable:!0}):G[W]=M,G}function $(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}var J=/^[ -~]*$/,se=function(){function G(W){$(this,G),this.scroll=W,this.delta=this.getDelta()}return c(G,[{key:"applyDelta",value:function(M){var B=this,z=!1;this.scroll.update();var ee=this.scroll.length();return this.scroll.batchStart(),M=re(M),M.reduce(function(X,H){var Y=H.retain||H.delete||H.insert.length||1,ne=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var ie=H.insert;ie.endsWith(`
`)&&z&&(z=!1,ie=ie.slice(0,-1)),X>=ee&&!ie.endsWith(`
`)&&(z=!0),B.scroll.insertAt(X,ie);var fe=B.scroll.line(X),ve=l(fe,2),ke=ve[0],xe=ve[1],Pe=(0,x.default)({},(0,b.bubbleFormats)(ke));if(ke instanceof N.default){var De=ke.descendant(y.default.Leaf,xe),Ue=l(De,1),tt=Ue[0];Pe=(0,x.default)(Pe,(0,b.bubbleFormats)(tt))}ne=g.default.attributes.diff(Pe,ne)||{}}else if(a(H.insert)==="object"){var ce=Object.keys(H.insert)[0];if(ce==null)return X;B.scroll.insertAt(X,ce,H.insert[ce])}ee+=Y}return Object.keys(ne).forEach(function(de){B.scroll.formatAt(X,Y,de,ne[de])}),X+Y},0),M.reduce(function(X,H){return typeof H.delete=="number"?(B.scroll.deleteAt(X,H.delete),X):X+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(M)}},{key:"deleteText",value:function(M,B){return this.scroll.deleteAt(M,B),this.update(new d.default().retain(M).delete(B))}},{key:"formatLine",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ee).forEach(function(X){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[X])){var H=z.scroll.lines(M,Math.max(B,1)),Y=B;H.forEach(function(ne){var ie=ne.length();if(!(ne instanceof S.default))ne.format(X,ee[X]);else{var fe=M-ne.offset(z.scroll),ve=ne.newlineIndex(fe+Y)-fe+1;ne.formatAt(fe,ve,X,ee[X])}Y-=ie})}}),this.scroll.optimize(),this.update(new d.default().retain(M).retain(B,(0,P.default)(ee)))}},{key:"formatText",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ee).forEach(function(X){z.scroll.formatAt(M,B,X,ee[X])}),this.update(new d.default().retain(M).retain(B,(0,P.default)(ee)))}},{key:"getContents",value:function(M,B){return this.delta.slice(M,M+B)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(M,B){return M.concat(B.delta())},new d.default)}},{key:"getFormat",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],ee=[];B===0?this.scroll.path(M).forEach(function(H){var Y=l(H,1),ne=Y[0];ne instanceof N.default?z.push(ne):ne instanceof y.default.Leaf&&ee.push(ne)}):(z=this.scroll.lines(M,B),ee=this.scroll.descendants(y.default.Leaf,M,B));var X=[z,ee].map(function(H){if(H.length===0)return{};for(var Y=(0,b.bubbleFormats)(H.shift());Object.keys(Y).length>0;){var ne=H.shift();if(ne==null)return Y;Y=Z((0,b.bubbleFormats)(ne),Y)}return Y});return x.default.apply(x.default,X)}},{key:"getText",value:function(M,B){return this.getContents(M,B).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(M,B,z){return this.scroll.insertAt(M,B,z),this.update(new d.default().retain(M).insert(D({},B,z)))}},{key:"insertText",value:function(M,B){var z=this,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return B=B.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(M,B),Object.keys(ee).forEach(function(X){z.scroll.formatAt(M,B.length,X,ee[X])}),this.update(new d.default().retain(M).insert(B,(0,P.default)(ee)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var M=this.scroll.children.head;return M.statics.blotName!==N.default.blotName||M.children.length>1?!1:M.children.head instanceof F.default}},{key:"removeFormat",value:function(M,B){var z=this.getText(M,B),ee=this.scroll.line(M+B),X=l(ee,2),H=X[0],Y=X[1],ne=0,ie=new d.default;H!=null&&(H instanceof S.default?ne=H.newlineIndex(Y)-Y+1:ne=H.length()-Y,ie=H.delta().slice(Y,Y+ne-1).insert(`
`));var fe=this.getContents(M,B+ne),ve=fe.diff(new d.default().insert(z).concat(ie)),ke=new d.default().retain(M).concat(ve);return this.applyDelta(ke)}},{key:"update",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ee=this.delta;if(B.length===1&&B[0].type==="characterData"&&B[0].target.data.match(J)&&y.default.find(B[0].target)){var X=y.default.find(B[0].target),H=(0,b.bubbleFormats)(X),Y=X.offset(this.scroll),ne=B[0].oldValue.replace(E.default.CONTENTS,""),ie=new d.default().insert(ne),fe=new d.default().insert(X.value()),ve=new d.default().retain(Y).concat(ie.diff(fe,z));M=ve.reduce(function(ke,xe){return xe.insert?ke.insert(xe.insert,H):ke.push(xe)},new d.default),this.delta=ee.compose(M)}else this.delta=this.getDelta(),(!M||!(0,A.default)(ee.compose(M),this.delta))&&(M=ee.diff(this.delta,z));return M}}]),G}();function Z(G,W){return Object.keys(W).reduce(function(M,B){return G[B]==null||(W[B]===G[B]?M[B]=W[B]:Array.isArray(W[B])?W[B].indexOf(G[B])<0&&(M[B]=W[B].concat([G[B]])):M[B]=[W[B],G[B]]),M},{})}function re(G){return G.reduce(function(W,M){if(M.insert===1){var B=(0,P.default)(M.attributes);return delete B.image,W.insert({image:M.attributes.image},B)}if(M.attributes!=null&&(M.attributes.list===!0||M.attributes.bullet===!0)&&(M=(0,P.default)(M),M.attributes.list?M.attributes.list="ordered":(M.attributes.list="bullet",delete M.attributes.bullet)),typeof M.insert=="string"){var z=M.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(z,M.attributes)}return W.push(M)},new d.default)}n.default=se},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function _(A,k){var x=[],O=!0,D=!1,$=void 0;try{for(var J=A[Symbol.iterator](),se;!(O=(se=J.next()).done)&&(x.push(se.value),!(k&&x.length===k));O=!0);}catch(Z){D=!0,$=Z}finally{try{!O&&J.return&&J.return()}finally{if(D)throw $}}return x}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return _(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(A,k){for(var x=0;x<k.length;x++){var O=k[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,k,x){return k&&_(A.prototype,k),x&&_(A,x),A}}(),c=i(0),h=E(c),d=i(21),v=E(d),g=i(11),p=E(g),y=i(8),w=E(y),S=i(10),T=E(S);function E(_){return _&&_.__esModule?_:{default:_}}function b(_){if(Array.isArray(_)){for(var A=0,k=Array(_.length);A<_.length;A++)k[A]=_[A];return k}else return Array.from(_)}function N(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var I=(0,T.default)("quill:selection"),F=function _(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;N(this,_),this.index=A,this.length=k},U=function(){function _(A,k){var x=this;N(this,_),this.emitter=k,this.scroll=A,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new F(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){x.mouseDown||setTimeout(x.update.bind(x,w.default.sources.USER),1)}),this.emitter.on(w.default.events.EDITOR_CHANGE,function(O,D){O===w.default.events.TEXT_CHANGE&&D.length()>0&&x.update(w.default.sources.SILENT)}),this.emitter.on(w.default.events.SCROLL_BEFORE_UPDATE,function(){if(x.hasFocus()){var O=x.getNativeRange();O!=null&&O.start.node!==x.cursor.textNode&&x.emitter.once(w.default.events.SCROLL_UPDATE,function(){try{x.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(w.default.events.SCROLL_OPTIMIZE,function(O,D){if(D.range){var $=D.range,J=$.startNode,se=$.startOffset,Z=$.endNode,re=$.endOffset;x.setNativeRange(J,se,Z,re)}}),this.update(w.default.sources.SILENT)}return l(_,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var x=k.cursor.restore();if(!x)return;setTimeout(function(){k.setNativeRange(x.startNode,x.startOffset,x.endNode,x.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(w.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,x){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||h.default.query(k,h.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var D=h.default.find(O.start.node,!1);if(D==null)return;if(D instanceof h.default.Leaf){var $=D.split(O.start.offset);D.parent.insertBefore(this.cursor,$)}else D.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(k,x),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();k=Math.min(k,O-1),x=Math.min(k+x,O-1)-k;var D=void 0,$=this.scroll.leaf(k),J=a($,2),se=J[0],Z=J[1];if(se==null)return null;var re=se.position(Z,!0),G=a(re,2);D=G[0],Z=G[1];var W=document.createRange();if(x>0){W.setStart(D,Z);var M=this.scroll.leaf(k+x),B=a(M,2);if(se=B[0],Z=B[1],se==null)return null;var z=se.position(Z,!0),ee=a(z,2);return D=ee[0],Z=ee[1],W.setEnd(D,Z),W.getBoundingClientRect()}else{var X="left",H=void 0;return D instanceof Text?(Z<D.data.length?(W.setStart(D,Z),W.setEnd(D,Z+1)):(W.setStart(D,Z-1),W.setEnd(D,Z),X="right"),H=W.getBoundingClientRect()):(H=se.domNode.getBoundingClientRect(),Z>0&&(X="right")),{bottom:H.top+H.height,height:H.height,left:H[X],right:H[X],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var x=k.getRangeAt(0);if(x==null)return null;var O=this.normalizeNative(x);return I.info("getNativeRange",O),O}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var x=this.normalizedToRange(k);return[x,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var x=this,O=[[k.start.node,k.start.offset]];k.native.collapsed||O.push([k.end.node,k.end.offset]);var D=O.map(function(se){var Z=a(se,2),re=Z[0],G=Z[1],W=h.default.find(re,!0),M=W.offset(x.scroll);return G===0?M:W instanceof h.default.Container?M+W.length():M+W.index(re,G)}),$=Math.min(Math.max.apply(Math,b(D)),this.scroll.length()-1),J=Math.min.apply(Math,[$].concat(b(D)));return new F(J,$-J)}},{key:"normalizeNative",value:function(k){if(!P(this.root,k.startContainer)||!k.collapsed&&!P(this.root,k.endContainer))return null;var x={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[x.start,x.end].forEach(function(O){for(var D=O.node,$=O.offset;!(D instanceof Text)&&D.childNodes.length>0;)if(D.childNodes.length>$)D=D.childNodes[$],$=0;else if(D.childNodes.length===$)D=D.lastChild,$=D instanceof Text?D.data.length:D.childNodes.length+1;else break;O.node=D,O.offset=$}),x}},{key:"rangeToNative",value:function(k){var x=this,O=k.collapsed?[k.index]:[k.index,k.index+k.length],D=[],$=this.scroll.length();return O.forEach(function(J,se){J=Math.min($-1,J);var Z=void 0,re=x.scroll.leaf(J),G=a(re,2),W=G[0],M=G[1],B=W.position(M,se!==0),z=a(B,2);Z=z[0],M=z[1],D.push(Z,M)}),D.length<2&&(D=D.concat(D)),D}},{key:"scrollIntoView",value:function(k){var x=this.lastRange;if(x!=null){var O=this.getBounds(x.index,x.length);if(O!=null){var D=this.scroll.length()-1,$=this.scroll.line(Math.min(x.index,D)),J=a($,1),se=J[0],Z=se;if(x.length>0){var re=this.scroll.line(Math.min(x.index+x.length,D)),G=a(re,1);Z=G[0]}if(!(se==null||Z==null)){var W=k.getBoundingClientRect();O.top<W.top?k.scrollTop-=W.top-O.top:O.bottom>W.bottom&&(k.scrollTop+=O.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(k,x){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(I.info("setNativeRange",k,x,O,D),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||O.parentNode==null))){var J=document.getSelection();if(J!=null)if(k!=null){this.hasFocus()||this.root.focus();var se=(this.getNativeRange()||{}).native;if(se==null||$||k!==se.startContainer||x!==se.startOffset||O!==se.endContainer||D!==se.endOffset){k.tagName=="BR"&&(x=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),O.tagName=="BR"&&(D=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var Z=document.createRange();Z.setStart(k,x),Z.setEnd(O,D),J.removeAllRanges(),J.addRange(Z)}}else J.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof x=="string"&&(O=x,x=!1),I.info("setRange",k),k!=null){var D=this.rangeToNative(k);this.setNativeRange.apply(this,b(D).concat([x]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,x=this.lastRange,O=this.getRange(),D=a(O,2),$=D[0],J=D[1];if(this.lastRange=$,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(x,this.lastRange)){var se;!this.composing&&J!=null&&J.native.collapsed&&J.start.node!==this.cursor.textNode&&this.cursor.restore();var Z=[w.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(x),k];if((se=this.emitter).emit.apply(se,[w.default.events.EDITOR_CHANGE].concat(Z)),k!==w.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Z)}}}}]),_}();function P(_,A){try{A.parentNode}catch{return!1}return A instanceof Text&&(A=A.parentNode),_.contains(A)}n.Range=F,n.default=U},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(S,T){for(var E=0;E<T.length;E++){var b=T[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,E){return T&&w(S.prototype,T),E&&w(S,E),S}}(),l=function w(S,T,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var N=Object.getPrototypeOf(S);return N===null?void 0:w(N,T,E)}else{if("value"in b)return b.value;var I=b.get;return I===void 0?void 0:I.call(E)}},c=i(0),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function p(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var y=function(w){p(S,w);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"insertInto",value:function(E,b){E.children.length===0?l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertInto",this).call(this,E,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),S}(h.default.Embed);y.blotName="break",y.tagName="BR",n.default=y},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var w in y)y.hasOwnProperty(w)&&(p[w]=y[w])};return function(p,y){g(p,y);function w(){this.constructor=p}p.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(44),c=i(30),h=i(1),d=function(g){a(p,g);function p(y){var w=g.call(this,y)||this;return w.build(),w}return p.prototype.appendChild=function(y){this.insertBefore(y)},p.prototype.attach=function(){g.prototype.attach.call(this),this.children.forEach(function(y){y.attach()})},p.prototype.build=function(){var y=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(w){try{var S=v(w);y.insertBefore(S,y.children.head||void 0)}catch(T){if(T instanceof h.ParchmentError)return;throw T}})},p.prototype.deleteAt=function(y,w){if(y===0&&w===this.length())return this.remove();this.children.forEachAt(y,w,function(S,T,E){S.deleteAt(T,E)})},p.prototype.descendant=function(y,w){var S=this.children.find(w),T=S[0],E=S[1];return y.blotName==null&&y(T)||y.blotName!=null&&T instanceof y?[T,E]:T instanceof p?T.descendant(y,E):[null,-1]},p.prototype.descendants=function(y,w,S){w===void 0&&(w=0),S===void 0&&(S=Number.MAX_VALUE);var T=[],E=S;return this.children.forEachAt(w,S,function(b,N,I){(y.blotName==null&&y(b)||y.blotName!=null&&b instanceof y)&&T.push(b),b instanceof p&&(T=T.concat(b.descendants(y,N,E))),E-=I}),T},p.prototype.detach=function(){this.children.forEach(function(y){y.detach()}),g.prototype.detach.call(this)},p.prototype.formatAt=function(y,w,S,T){this.children.forEachAt(y,w,function(E,b,N){E.formatAt(b,N,S,T)})},p.prototype.insertAt=function(y,w,S){var T=this.children.find(y),E=T[0],b=T[1];if(E)E.insertAt(b,w,S);else{var N=S==null?h.create("text",w):h.create(w,S);this.appendChild(N)}},p.prototype.insertBefore=function(y,w){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(S){return y instanceof S}))throw new h.ParchmentError("Cannot insert "+y.statics.blotName+" into "+this.statics.blotName);y.insertInto(this,w)},p.prototype.length=function(){return this.children.reduce(function(y,w){return y+w.length()},0)},p.prototype.moveChildren=function(y,w){this.children.forEach(function(S){y.insertBefore(S,w)})},p.prototype.optimize=function(y){if(g.prototype.optimize.call(this,y),this.children.length===0)if(this.statics.defaultChild!=null){var w=h.create(this.statics.defaultChild);this.appendChild(w),w.optimize(y)}else this.remove()},p.prototype.path=function(y,w){w===void 0&&(w=!1);var S=this.children.find(y,w),T=S[0],E=S[1],b=[[this,y]];return T instanceof p?b.concat(T.path(E,w)):(T!=null&&b.push([T,E]),b)},p.prototype.removeChild=function(y){this.children.remove(y)},p.prototype.replace=function(y){y instanceof p&&y.moveChildren(this),g.prototype.replace.call(this,y)},p.prototype.split=function(y,w){if(w===void 0&&(w=!1),!w){if(y===0)return this;if(y===this.length())return this.next}var S=this.clone();return this.parent.insertBefore(S,this.next),this.children.forEachAt(y,this.length(),function(T,E,b){T=T.split(E,w),S.appendChild(T)}),S},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(y,w){var S=this,T=[],E=[];y.forEach(function(b){b.target===S.domNode&&b.type==="childList"&&(T.push.apply(T,b.addedNodes),E.push.apply(E,b.removedNodes))}),E.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var N=h.find(b);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===S.domNode)&&N.detach()}}),T.filter(function(b){return b.parentNode==S.domNode}).sort(function(b,N){return b===N?0:b.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var N=null;b.nextSibling!=null&&(N=h.find(b.nextSibling));var I=v(b);(I.next!=N||I.next==null)&&(I.parent!=null&&I.parent.removeChild(S),S.insertBefore(I,N||void 0))})},p}(c.default);function v(g){var p=h.find(g);if(p==null)try{p=h.create(g)}catch{p=h.create(h.Scope.INLINE),[].slice.call(g.childNodes).forEach(function(w){p.domNode.appendChild(w)}),g.parentNode&&g.parentNode.replaceChild(p.domNode,g),p.attach()}return p}n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var w in y)y.hasOwnProperty(w)&&(p[w]=y[w])};return function(p,y){g(p,y);function w(){this.constructor=p}p.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12),c=i(31),h=i(17),d=i(1),v=function(g){a(p,g);function p(y){var w=g.call(this,y)||this;return w.attributes=new c.default(w.domNode),w}return p.formats=function(y){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return y.tagName.toLowerCase()},p.prototype.format=function(y,w){var S=d.query(y);S instanceof l.default?this.attributes.attribute(S,w):w&&S!=null&&(y!==this.statics.blotName||this.formats()[y]!==w)&&this.replaceWith(y,w)},p.prototype.formats=function(){var y=this.attributes.values(),w=this.statics.formats(this.domNode);return w!=null&&(y[this.statics.blotName]=w),y},p.prototype.replaceWith=function(y,w){var S=g.prototype.replaceWith.call(this,y,w);return this.attributes.copy(S),S},p.prototype.update=function(y,w){var S=this;g.prototype.update.call(this,y,w),y.some(function(T){return T.target===S.domNode&&T.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(y,w){var S=g.prototype.wrap.call(this,y,w);return S instanceof p&&S.statics.scope===this.statics.scope&&this.attributes.move(S),S},p}(h.default);n.default=v},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(30),c=i(1),h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.value=function(g){return!0},v.prototype.index=function(g,p){return this.domNode===g||this.domNode.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},v.prototype.position=function(g,p){var y=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return g>0&&(y+=1),[this.parent.domNode,y]},v.prototype.value=function(){var g;return g={},g[this.statics.blotName]=this.statics.value(this.domNode)||!0,g},v.scope=c.Scope.INLINE_BLOT,v}(l.default);n.default=h},function(t,n,i){var a=i(11),l=i(3),c={attributes:{compose:function(d,v,g){typeof d!="object"&&(d={}),typeof v!="object"&&(v={});var p=l(!0,{},v);g||(p=Object.keys(p).reduce(function(w,S){return p[S]!=null&&(w[S]=p[S]),w},{}));for(var y in d)d[y]!==void 0&&v[y]===void 0&&(p[y]=d[y]);return Object.keys(p).length>0?p:void 0},diff:function(d,v){typeof d!="object"&&(d={}),typeof v!="object"&&(v={});var g=Object.keys(d).concat(Object.keys(v)).reduce(function(p,y){return a(d[y],v[y])||(p[y]=v[y]===void 0?null:v[y]),p},{});return Object.keys(g).length>0?g:void 0},transform:function(d,v,g){if(typeof d!="object")return v;if(typeof v=="object"){if(!g)return v;var p=Object.keys(v).reduce(function(y,w){return d[w]===void 0&&(y[w]=v[w]),y},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new h(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function h(d){this.ops=d,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(d){d||(d=1/0);var v=this.ops[this.index];if(v){var g=this.offset,p=c.length(v);if(d>=p-g?(d=p-g,this.index+=1,this.offset=0):this.offset+=d,typeof v.delete=="number")return{delete:d};var y={};return v.attributes&&(y.attributes=v.attributes),typeof v.retain=="number"?y.retain=d:typeof v.insert=="string"?y.insert=v.insert.substr(g,d):y.insert=v.insert,y}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,v=this.index,g=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=v,[g].concat(p)}else return[]},t.exports=c},function(t,n){var i=function(){function a(S,T){return T!=null&&S instanceof T}var l;try{l=Map}catch{l=function(){}}var c;try{c=Set}catch{c=function(){}}var h;try{h=Promise}catch{h=function(){}}function d(S,T,E,b,N){typeof T=="object"&&(E=T.depth,b=T.prototype,N=T.includeNonEnumerable,T=T.circular);var I=[],F=[],U=typeof Buffer<"u";typeof T>"u"&&(T=!0),typeof E>"u"&&(E=1/0);function P(_,A){if(_===null)return null;if(A===0)return _;var k,x;if(typeof _!="object")return _;if(a(_,l))k=new l;else if(a(_,c))k=new c;else if(a(_,h))k=new h(function(W,M){_.then(function(B){W(P(B,A-1))},function(B){M(P(B,A-1))})});else if(d.__isArray(_))k=[];else if(d.__isRegExp(_))k=new RegExp(_.source,w(_)),_.lastIndex&&(k.lastIndex=_.lastIndex);else if(d.__isDate(_))k=new Date(_.getTime());else{if(U&&Buffer.isBuffer(_))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(_.length):k=new Buffer(_.length),_.copy(k),k;a(_,Error)?k=Object.create(_):typeof b>"u"?(x=Object.getPrototypeOf(_),k=Object.create(x)):(k=Object.create(b),x=b)}if(T){var O=I.indexOf(_);if(O!=-1)return F[O];I.push(_),F.push(k)}a(_,l)&&_.forEach(function(W,M){var B=P(M,A-1),z=P(W,A-1);k.set(B,z)}),a(_,c)&&_.forEach(function(W){var M=P(W,A-1);k.add(M)});for(var D in _){var $;x&&($=Object.getOwnPropertyDescriptor(x,D)),!($&&$.set==null)&&(k[D]=P(_[D],A-1))}if(Object.getOwnPropertySymbols)for(var J=Object.getOwnPropertySymbols(_),D=0;D<J.length;D++){var se=J[D],Z=Object.getOwnPropertyDescriptor(_,se);Z&&!Z.enumerable&&!N||(k[se]=P(_[se],A-1),Z.enumerable||Object.defineProperty(k,se,{enumerable:!1}))}if(N)for(var re=Object.getOwnPropertyNames(_),D=0;D<re.length;D++){var G=re[D],Z=Object.getOwnPropertyDescriptor(_,G);Z&&Z.enumerable||(k[G]=P(_[G],A-1),Object.defineProperty(k,G,{enumerable:!1}))}return k}return P(S,E)}d.clonePrototype=function(T){if(T===null)return null;var E=function(){};return E.prototype=T,new E};function v(S){return Object.prototype.toString.call(S)}d.__objToStr=v;function g(S){return typeof S=="object"&&v(S)==="[object Date]"}d.__isDate=g;function p(S){return typeof S=="object"&&v(S)==="[object Array]"}d.__isArray=p;function y(S){return typeof S=="object"&&v(S)==="[object RegExp]"}d.__isRegExp=y;function w(S){var T="";return S.global&&(T+="g"),S.ignoreCase&&(T+="i"),S.multiline&&(T+="m"),T}return d.__getRegExpFlags=w,d}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function k(x,O){var D=[],$=!0,J=!1,se=void 0;try{for(var Z=x[Symbol.iterator](),re;!($=(re=Z.next()).done)&&(D.push(re.value),!(O&&D.length===O));$=!0);}catch(G){J=!0,se=G}finally{try{!$&&Z.return&&Z.return()}finally{if(J)throw se}}return D}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return k(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function k(x,O){for(var D=0;D<O.length;D++){var $=O[D];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(x,$.key,$)}}return function(x,O,D){return O&&k(x.prototype,O),D&&k(x,D),x}}(),c=function k(x,O,D){x===null&&(x=Function.prototype);var $=Object.getOwnPropertyDescriptor(x,O);if($===void 0){var J=Object.getPrototypeOf(x);return J===null?void 0:k(J,O,D)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(D)}},h=i(0),d=I(h),v=i(8),g=I(v),p=i(4),y=I(p),w=i(16),S=I(w),T=i(13),E=I(T),b=i(25),N=I(b);function I(k){return k&&k.__esModule?k:{default:k}}function F(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function U(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function P(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}function _(k){return k instanceof y.default||k instanceof p.BlockEmbed}var A=function(k){P(x,k);function x(O,D){F(this,x);var $=U(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O));return $.emitter=D.emitter,Array.isArray(D.whitelist)&&($.whitelist=D.whitelist.reduce(function(J,se){return J[se]=!0,J},{})),$.domNode.addEventListener("DOMNodeInserted",function(){}),$.optimize(),$.enable(),$}return l(x,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(D,$){var J=this.line(D),se=a(J,2),Z=se[0],re=se[1],G=this.line(D+$),W=a(G,1),M=W[0];if(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,D,$),M!=null&&Z!==M&&re>0){if(Z instanceof p.BlockEmbed||M instanceof p.BlockEmbed){this.optimize();return}if(Z instanceof E.default){var B=Z.newlineIndex(Z.length(),!0);if(B>-1&&(Z=Z.split(B+1),Z===M)){this.optimize();return}}else if(M instanceof E.default){var z=M.newlineIndex(0);z>-1&&M.split(z+1)}var ee=M.children.head instanceof S.default?null:M.children.head;Z.moveChildren(M,ee),Z.remove()}this.optimize()}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",D)}},{key:"formatAt",value:function(D,$,J,se){this.whitelist!=null&&!this.whitelist[J]||(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,D,$,J,se),this.optimize())}},{key:"insertAt",value:function(D,$,J){if(!(J!=null&&this.whitelist!=null&&!this.whitelist[$])){if(D>=this.length())if(J==null||d.default.query($,d.default.Scope.BLOCK)==null){var se=d.default.create(this.statics.defaultChild);this.appendChild(se),J==null&&$.endsWith(`
`)&&($=$.slice(0,-1)),se.insertAt(0,$,J)}else{var Z=d.default.create($,J);this.appendChild(Z)}else c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,D,$,J);this.optimize()}}},{key:"insertBefore",value:function(D,$){if(D.statics.scope===d.default.Scope.INLINE_BLOT){var J=d.default.create(this.statics.defaultChild);J.appendChild(D),D=J}c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,D,$)}},{key:"leaf",value:function(D){return this.path(D).pop()||[null,-1]}},{key:"line",value:function(D){return D===this.length()?this.line(D-1):this.descendant(_,D)}},{key:"lines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,J=function se(Z,re,G){var W=[],M=G;return Z.children.forEachAt(re,G,function(B,z,ee){_(B)?W.push(B):B instanceof d.default.Container&&(W=W.concat(se(B,z,M))),M-=ee}),W};return J(this,D,$)}},{key:"optimize",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,D,$),D.length>0&&this.emitter.emit(g.default.events.SCROLL_OPTIMIZE,D,$))}},{key:"path",value:function(D){return c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,D).slice(1)}},{key:"update",value:function(D){if(this.batch!==!0){var $=g.default.sources.USER;typeof D=="string"&&($=D),Array.isArray(D)||(D=this.observer.takeRecords()),D.length>0&&this.emitter.emit(g.default.events.SCROLL_BEFORE_UPDATE,$,D),c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"update",this).call(this,D.concat([])),D.length>0&&this.emitter.emit(g.default.events.SCROLL_UPDATE,$,D)}}}]),x}(d.default.Scroll);A.blotName="scroll",A.className="ql-editor",A.tagName="DIV",A.defaultChild="block",A.allowedChildren=[y.default,p.BlockEmbed,N.default],n.default=A},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},l=function(){function H(Y,ne){var ie=[],fe=!0,ve=!1,ke=void 0;try{for(var xe=Y[Symbol.iterator](),Pe;!(fe=(Pe=xe.next()).done)&&(ie.push(Pe.value),!(ne&&ie.length===ne));fe=!0);}catch(De){ve=!0,ke=De}finally{try{!fe&&xe.return&&xe.return()}finally{if(ve)throw ke}}return ie}return function(Y,ne){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return H(Y,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function H(Y,ne){for(var ie=0;ie<ne.length;ie++){var fe=ne[ie];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(Y,fe.key,fe)}}return function(Y,ne,ie){return ne&&H(Y.prototype,ne),ie&&H(Y,ie),Y}}(),h=i(21),d=k(h),v=i(11),g=k(v),p=i(3),y=k(p),w=i(2),S=k(w),T=i(20),E=k(T),b=i(0),N=k(b),I=i(5),F=k(I),U=i(10),P=k(U),_=i(9),A=k(_);function k(H){return H&&H.__esModule?H:{default:H}}function x(H,Y,ne){return Y in H?Object.defineProperty(H,Y,{value:ne,enumerable:!0,configurable:!0,writable:!0}):H[Y]=ne,H}function O(H,Y){if(!(H instanceof Y))throw new TypeError("Cannot call a class as a function")}function D(H,Y){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:H}function $(H,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);H.prototype=Object.create(Y&&Y.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(H,Y):H.__proto__=Y)}var J=(0,P.default)("quill:keyboard"),se=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Z=function(H){$(Y,H),c(Y,null,[{key:"match",value:function(ie,fe){return fe=X(fe),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ve){return!!fe[ve]!==ie[ve]&&fe[ve]!==null})?!1:fe.key===(ie.which||ie.keyCode)}}]);function Y(ne,ie){O(this,Y);var fe=D(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,ne,ie));return fe.bindings={},Object.keys(fe.options.bindings).forEach(function(ve){ve==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||fe.options.bindings[ve]&&fe.addBinding(fe.options.bindings[ve])}),fe.addBinding({key:Y.keys.ENTER,shiftKey:null},B),fe.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},G),fe.addBinding({key:Y.keys.DELETE},{collapsed:!0},W)):(fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},G),fe.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),fe.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},M),fe.addBinding({key:Y.keys.DELETE},{collapsed:!1},M),fe.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},G),fe.listen(),fe}return c(Y,[{key:"addBinding",value:function(ie){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=X(ie);if(ke==null||ke.key==null)return J.warn("Attempted to add invalid keyboard binding",ke);typeof fe=="function"&&(fe={handler:fe}),typeof ve=="function"&&(ve={handler:ve}),ke=(0,y.default)(ke,fe,ve),this.bindings[ke.key]=this.bindings[ke.key]||[],this.bindings[ke.key].push(ke)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(fe){if(!fe.defaultPrevented){var ve=fe.which||fe.keyCode,ke=(ie.bindings[ve]||[]).filter(function(ct){return Y.match(fe,ct)});if(ke.length!==0){var xe=ie.quill.getSelection();if(!(xe==null||!ie.quill.hasFocus())){var Pe=ie.quill.getLine(xe.index),De=l(Pe,2),Ue=De[0],tt=De[1],ce=ie.quill.getLeaf(xe.index),de=l(ce,2),Ee=de[0],be=de[1],ge=xe.length===0?[Ee,be]:ie.quill.getLeaf(xe.index+xe.length),$e=l(ge,2),Me=$e[0],Be=$e[1],We=Ee instanceof N.default.Text?Ee.value().slice(0,be):"",Ze=Me instanceof N.default.Text?Me.value().slice(Be):"",et={collapsed:xe.length===0,empty:xe.length===0&&Ue.length()<=1,format:ie.quill.getFormat(xe),offset:tt,prefix:We,suffix:Ze},nr=ke.some(function(ct){if(ct.collapsed!=null&&ct.collapsed!==et.collapsed||ct.empty!=null&&ct.empty!==et.empty||ct.offset!=null&&ct.offset!==et.offset)return!1;if(Array.isArray(ct.format)){if(ct.format.every(function(Ct){return et.format[Ct]==null}))return!1}else if(a(ct.format)==="object"&&!Object.keys(ct.format).every(function(Ct){return ct.format[Ct]===!0?et.format[Ct]!=null:ct.format[Ct]===!1?et.format[Ct]==null:(0,g.default)(ct.format[Ct],et.format[Ct])}))return!1;return ct.prefix!=null&&!ct.prefix.test(et.prefix)||ct.suffix!=null&&!ct.suffix.test(et.suffix)?!1:ct.handler.call(ie,xe,et)!==!0});nr&&fe.preventDefault()}}}})}}]),Y}(A.default);Z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Z.DEFAULTS={bindings:{bold:ee("bold"),italic:ee("italic"),underline:ee("underline"),indent:{key:Z.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",F.default.sources.USER)}},outdent:{key:Z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",F.default.sources.USER)}},"outdent backspace":{key:Z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,ne){ne.format.indent!=null?this.quill.format("indent","-1",F.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,F.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:Z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,F.default.sources.USER)}},tab:{key:Z.keys.TAB,handler:function(Y){this.quill.history.cutoff();var ne=new S.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(ne,F.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,F.default.sources.SILENT)}},"list empty enter":{key:Z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,ne){this.quill.format("list",!1,F.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,F.default.sources.USER)}},"checklist enter":{key:Z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var ne=this.quill.getLine(Y.index),ie=l(ne,2),fe=ie[0],ve=ie[1],ke=(0,y.default)({},fe.formats(),{list:"checked"}),xe=new S.default().retain(Y.index).insert(`
`,ke).retain(fe.length()-ve-1).retain(1,{list:"unchecked"});this.quill.updateContents(xe,F.default.sources.USER),this.quill.setSelection(Y.index+1,F.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,ne){var ie=this.quill.getLine(Y.index),fe=l(ie,2),ve=fe[0],ke=fe[1],xe=new S.default().retain(Y.index).insert(`
`,ne.format).retain(ve.length()-ke-1).retain(1,{header:null});this.quill.updateContents(xe,F.default.sources.USER),this.quill.setSelection(Y.index+1,F.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,ne){var ie=ne.prefix.length,fe=this.quill.getLine(Y.index),ve=l(fe,2),ke=ve[0],xe=ve[1];if(xe>ie)return!0;var Pe=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":Pe="unchecked";break;case"[x]":Pe="checked";break;case"-":case"*":Pe="bullet";break;default:Pe="ordered"}this.quill.insertText(Y.index," ",F.default.sources.USER),this.quill.history.cutoff();var De=new S.default().retain(Y.index-xe).delete(ie+1).retain(ke.length()-2-xe).retain(1,{list:Pe});this.quill.updateContents(De,F.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-ie,F.default.sources.SILENT)}},"code exit":{key:Z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var ne=this.quill.getLine(Y.index),ie=l(ne,2),fe=ie[0],ve=ie[1],ke=new S.default().retain(Y.index+fe.length()-ve-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ke,F.default.sources.USER)}},"embed left":re(Z.keys.LEFT,!1),"embed left shift":re(Z.keys.LEFT,!0),"embed right":re(Z.keys.RIGHT,!1),"embed right shift":re(Z.keys.RIGHT,!0)}};function re(H,Y){var ne,ie=H===Z.keys.LEFT?"prefix":"suffix";return ne={key:H,shiftKey:Y,altKey:null},x(ne,ie,/^$/),x(ne,"handler",function(ve){var ke=ve.index;H===Z.keys.RIGHT&&(ke+=ve.length+1);var xe=this.quill.getLeaf(ke),Pe=l(xe,1),De=Pe[0];return De instanceof N.default.Embed?(H===Z.keys.LEFT?Y?this.quill.setSelection(ve.index-1,ve.length+1,F.default.sources.USER):this.quill.setSelection(ve.index-1,F.default.sources.USER):Y?this.quill.setSelection(ve.index,ve.length+1,F.default.sources.USER):this.quill.setSelection(ve.index+ve.length+1,F.default.sources.USER),!1):!0}),ne}function G(H,Y){if(!(H.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(H.index),ie=l(ne,1),fe=ie[0],ve={};if(Y.offset===0){var ke=this.quill.getLine(H.index-1),xe=l(ke,1),Pe=xe[0];if(Pe!=null&&Pe.length()>1){var De=fe.formats(),Ue=this.quill.getFormat(H.index-1,1);ve=E.default.attributes.diff(De,Ue)||{}}}var tt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(H.index-tt,tt,F.default.sources.USER),Object.keys(ve).length>0&&this.quill.formatLine(H.index-tt,tt,ve,F.default.sources.USER),this.quill.focus()}}function W(H,Y){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(H.index>=this.quill.getLength()-ne)){var ie={},fe=0,ve=this.quill.getLine(H.index),ke=l(ve,1),xe=ke[0];if(Y.offset>=xe.length()-1){var Pe=this.quill.getLine(H.index+1),De=l(Pe,1),Ue=De[0];if(Ue){var tt=xe.formats(),ce=this.quill.getFormat(H.index,1);ie=E.default.attributes.diff(tt,ce)||{},fe=Ue.length()}}this.quill.deleteText(H.index,ne,F.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(H.index+fe-1,ne,ie,F.default.sources.USER)}}function M(H){var Y=this.quill.getLines(H),ne={};if(Y.length>1){var ie=Y[0].formats(),fe=Y[Y.length-1].formats();ne=E.default.attributes.diff(fe,ie)||{}}this.quill.deleteText(H,F.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(H.index,1,ne,F.default.sources.USER),this.quill.setSelection(H.index,F.default.sources.SILENT),this.quill.focus()}function B(H,Y){var ne=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var ie=Object.keys(Y.format).reduce(function(fe,ve){return N.default.query(ve,N.default.Scope.BLOCK)&&!Array.isArray(Y.format[ve])&&(fe[ve]=Y.format[ve]),fe},{});this.quill.insertText(H.index,`
`,ie,F.default.sources.USER),this.quill.setSelection(H.index+1,F.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(fe){ie[fe]==null&&(Array.isArray(Y.format[fe])||fe!=="link"&&ne.quill.format(fe,Y.format[fe],F.default.sources.USER))})}function z(H){return{key:Z.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(ne){var ie=N.default.query("code-block"),fe=ne.index,ve=ne.length,ke=this.quill.scroll.descendant(ie,fe),xe=l(ke,2),Pe=xe[0],De=xe[1];if(Pe!=null){var Ue=this.quill.getIndex(Pe),tt=Pe.newlineIndex(De,!0)+1,ce=Pe.newlineIndex(Ue+De+ve),de=Pe.domNode.textContent.slice(tt,ce).split(`
`);De=0,de.forEach(function(Ee,be){H?(Pe.insertAt(tt+De,ie.TAB),De+=ie.TAB.length,be===0?fe+=ie.TAB.length:ve+=ie.TAB.length):Ee.startsWith(ie.TAB)&&(Pe.deleteAt(tt+De,ie.TAB.length),De-=ie.TAB.length,be===0?fe-=ie.TAB.length:ve-=ie.TAB.length),De+=Ee.length+1}),this.quill.update(F.default.sources.USER),this.quill.setSelection(fe,ve,F.default.sources.SILENT)}}}}function ee(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(ne,ie){this.quill.format(H,!ie.format[H],F.default.sources.USER)}}}function X(H){if(typeof H=="string"||typeof H=="number")return X({key:H});if((typeof H>"u"?"undefined":a(H))==="object"&&(H=(0,d.default)(H,!1)),typeof H.key=="string")if(Z.keys[H.key.toUpperCase()]!=null)H.key=Z.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[se]=H.shortKey,delete H.shortKey),H}n.default=Z,n.SHORTKEY=se},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function E(b,N){var I=[],F=!0,U=!1,P=void 0;try{for(var _=b[Symbol.iterator](),A;!(F=(A=_.next()).done)&&(I.push(A.value),!(N&&I.length===N));F=!0);}catch(k){U=!0,P=k}finally{try{!F&&_.return&&_.return()}finally{if(U)throw P}}return I}return function(b,N){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return E(b,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function E(b,N,I){b===null&&(b=Function.prototype);var F=Object.getOwnPropertyDescriptor(b,N);if(F===void 0){var U=Object.getPrototypeOf(b);return U===null?void 0:E(U,N,I)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(I)}},c=function(){function E(b,N){for(var I=0;I<N.length;I++){var F=N[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}return function(b,N,I){return N&&E(b.prototype,N),I&&E(b,I),b}}(),h=i(0),d=p(h),v=i(7),g=p(v);function p(E){return E&&E.__esModule?E:{default:E}}function y(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function w(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:E}function S(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);E.prototype=Object.create(b&&b.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(E,b):E.__proto__=b)}var T=function(E){S(b,E),c(b,null,[{key:"value",value:function(){}}]);function b(N,I){y(this,b);var F=w(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,N));return F.selection=I,F.textNode=document.createTextNode(b.CONTENTS),F.domNode.appendChild(F.textNode),F._length=0,F}return c(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(I,F){if(this._length!==0)return l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,I,F);for(var U=this,P=0;U!=null&&U.statics.scope!==d.default.Scope.BLOCK_BLOT;)P+=U.offset(U.parent),U=U.parent;U!=null&&(this._length=b.CONTENTS.length,U.optimize(),U.formatAt(P,b.CONTENTS.length,I,F),this._length=0)}},{key:"index",value:function(I,F){return I===this.textNode?0:l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,I,F)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var I=this.textNode,F=this.selection.getNativeRange(),U=void 0,P=void 0,_=void 0;if(F!=null&&F.start.node===I&&F.end.node===I){var A=[I,F.start.offset,F.end.offset];U=A[0],P=A[1],_=A[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var k=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof g.default?(U=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=b.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var x=[P,_].map(function(D){return Math.max(0,Math.min(U.data.length,D-1))}),O=a(x,2);return P=O[0],_=O[1],{startNode:U,startOffset:P,endNode:U,endOffset:_}}}}},{key:"update",value:function(I,F){var U=this;if(I.some(function(_){return _.type==="characterData"&&_.target===U.textNode})){var P=this.restore();P&&(F.range=P)}}},{key:"value",value:function(){return""}}]),b}(d.default.Embed);T.blotName="cursor",T.className="ql-cursor",T.tagName="span",T.CONTENTS="\uFEFF",n.default=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=d(a),c=i(4),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function p(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var y=function(w){p(S,w);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(l.default.Container);y.allowedChildren=[h.default,c.BlockEmbed,y],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function T(E,b){for(var N=0;N<b.length;N++){var I=b[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,b,N){return b&&T(E.prototype,b),N&&T(E,N),E}}(),l=function T(E,b,N){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,b);if(I===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:T(F,b,N)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(N)}},c=i(0),h=d(c);function d(T){return T&&T.__esModule?T:{default:T}}function v(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function g(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function p(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var y=function(T){p(E,T);function E(){return v(this,E),g(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"value",value:function(N){var I=l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,N);return I.startsWith("rgb(")?(I=I.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+I.split(",").map(function(F){return("00"+parseInt(F).toString(16)).slice(-2)}).join("")):I}}]),E}(h.default.Attributor.Style),w=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),S=new y("color","color",{scope:h.default.Scope.INLINE});n.ColorAttributor=y,n.ColorClass=w,n.ColorStyle=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function S(T,E){for(var b=0;b<E.length;b++){var N=E[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(T,N.key,N)}}return function(T,E,b){return E&&S(T.prototype,E),b&&S(T,b),T}}(),l=function S(T,E,b){T===null&&(T=Function.prototype);var N=Object.getOwnPropertyDescriptor(T,E);if(N===void 0){var I=Object.getPrototypeOf(T);return I===null?void 0:S(I,E,b)}else{if("value"in N)return N.value;var F=N.get;return F===void 0?void 0:F.call(b)}},c=i(6),h=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function v(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function g(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function p(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var y=function(S){p(T,S);function T(){return v(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,[{key:"format",value:function(b,N){if(b!==this.statics.blotName||!N)return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,b,N);N=this.constructor.sanitize(N),this.domNode.setAttribute("href",N)}}],[{key:"create",value:function(b){var N=l(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,b);return b=this.sanitize(b),N.setAttribute("href",b),N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"),N}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return w(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),T}(h.default);y.blotName="link",y.tagName="A",y.SANITIZED_URL="about:blank",y.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function w(S,T){var E=document.createElement("a");E.href=S;var b=E.href.slice(0,E.href.indexOf(":"));return T.indexOf(b)>-1}n.default=y,n.sanitize=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},l=function(){function T(E,b){for(var N=0;N<b.length;N++){var I=b[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,b,N){return b&&T(E.prototype,b),N&&T(E,N),E}}(),c=i(23),h=g(c),d=i(107),v=g(d);function g(T){return T&&T.__esModule?T:{default:T}}function p(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}var y=0;function w(T,E){T.setAttribute(E,T.getAttribute(E)!=="true")}var S=function(){function T(E){var b=this;p(this,T),this.select=E,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(N){switch(N.keyCode){case h.default.keys.ENTER:b.togglePicker();break;case h.default.keys.ESCAPE:b.escape(),N.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(T,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),w(this.label,"aria-expanded"),w(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var N=this,I=document.createElement("span");return I.tabIndex="0",I.setAttribute("role","button"),I.classList.add("ql-picker-item"),b.hasAttribute("value")&&I.setAttribute("data-value",b.getAttribute("value")),b.textContent&&I.setAttribute("data-label",b.textContent),I.addEventListener("click",function(){N.selectItem(I,!0)}),I.addEventListener("keydown",function(F){switch(F.keyCode){case h.default.keys.ENTER:N.selectItem(I,!0),F.preventDefault();break;case h.default.keys.ESCAPE:N.escape(),F.preventDefault();break}}),I}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=v.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,N=document.createElement("span");N.classList.add("ql-picker-options"),N.setAttribute("aria-hidden","true"),N.tabIndex="-1",N.id="ql-picker-options-"+y,y+=1,this.label.setAttribute("aria-controls",N.id),this.options=N,[].slice.call(this.select.options).forEach(function(I){var F=b.buildItem(I);N.appendChild(F),I.selected===!0&&b.selectItem(F)}),this.container.appendChild(N)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(N){b.container.setAttribute(N.name,N.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=this.container.querySelector(".ql-selected");if(b!==I&&(I!=null&&I.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),N))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var F=document.createEvent("Event");F.initEvent("change",!0,!0),this.select.dispatchEvent(F)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var N=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(N)}else this.selectItem(null);var I=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",I)}}]),T}();n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(0),l=J(a),c=i(5),h=J(c),d=i(4),v=J(d),g=i(16),p=J(g),y=i(25),w=J(y),S=i(24),T=J(S),E=i(35),b=J(E),N=i(6),I=J(N),F=i(22),U=J(F),P=i(7),_=J(P),A=i(55),k=J(A),x=i(42),O=J(x),D=i(23),$=J(D);function J(se){return se&&se.__esModule?se:{default:se}}h.default.register({"blots/block":v.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":w.default,"blots/cursor":T.default,"blots/embed":b.default,"blots/inline":I.default,"blots/scroll":U.default,"blots/text":_.default,"modules/clipboard":k.default,"modules/history":O.default,"modules/keyboard":$.default}),l.default.register(v.default,p.default,T.default,I.default,U.default,_.default),n.default=h.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(1),l=function(){function c(h){this.domNode=h,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(h){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?d=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?d=document.createElement(h):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return a.create(h)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(h,d){var v=this.isolate(h,d);v.remove()},c.prototype.formatAt=function(h,d,v,g){var p=this.isolate(h,d);if(a.query(v,a.Scope.BLOT)!=null&&g)p.wrap(v,g);else if(a.query(v,a.Scope.ATTRIBUTE)!=null){var y=a.create(this.statics.scope);p.wrap(y),y.format(v,g)}},c.prototype.insertAt=function(h,d,v){var g=v==null?a.create("text",d):a.create(d,v),p=this.split(h);this.parent.insertBefore(g,p)},c.prototype.insertInto=function(h,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var v=null;h.children.insertBefore(this,d),d!=null&&(v=d.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=v)&&h.domNode.insertBefore(this.domNode,v),this.parent=h,this.attach()},c.prototype.isolate=function(h,d){var v=this.split(h);return v.split(d),v},c.prototype.length=function(){return 1},c.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},c.prototype.optimize=function(h){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},c.prototype.replaceWith=function(h,d){var v=typeof h=="string"?a.create(h,d):h;return v.replace(this),v},c.prototype.split=function(h,d){return h===0?this:this.next},c.prototype.update=function(h,d){},c.prototype.wrap=function(h,d){var v=typeof h=="string"?a.create(h,d):h;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},c.blotName="abstract",c}();n.default=l},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),l=i(32),c=i(33),h=i(1),d=function(){function v(g){this.attributes={},this.domNode=g,this.build()}return v.prototype.attribute=function(g,p){p?g.add(this.domNode,p)&&(g.value(this.domNode)!=null?this.attributes[g.attrName]=g:delete this.attributes[g.attrName]):(g.remove(this.domNode),delete this.attributes[g.attrName])},v.prototype.build=function(){var g=this;this.attributes={};var p=a.default.keys(this.domNode),y=l.default.keys(this.domNode),w=c.default.keys(this.domNode);p.concat(y).concat(w).forEach(function(S){var T=h.query(S,h.Scope.ATTRIBUTE);T instanceof a.default&&(g.attributes[T.attrName]=T)})},v.prototype.copy=function(g){var p=this;Object.keys(this.attributes).forEach(function(y){var w=p.attributes[y].value(p.domNode);g.format(y,w)})},v.prototype.move=function(g){var p=this;this.copy(g),Object.keys(this.attributes).forEach(function(y){p.attributes[y].remove(p.domNode)}),this.attributes={}},v.prototype.values=function(){var g=this;return Object.keys(this.attributes).reduce(function(p,y){return p[y]=g.attributes[y].value(g.domNode),p},{})},v}();n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function c(d,v){var g=d.getAttribute("class")||"";return g.split(/\s+/).filter(function(p){return p.indexOf(v+"-")===0})}var h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.keys=function(g){return(g.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},v.prototype.add=function(g,p){return this.canAdd(g,p)?(this.remove(g),g.classList.add(this.keyName+"-"+p),!0):!1},v.prototype.remove=function(g){var p=c(g,this.keyName);p.forEach(function(y){g.classList.remove(y)}),g.classList.length===0&&g.removeAttribute("class")},v.prototype.value=function(g){var p=c(g,this.keyName)[0]||"",y=p.slice(this.keyName.length+1);return this.canAdd(g,y)?y:""},v}(l.default);n.default=h},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(12);function c(d){var v=d.split("-"),g=v.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return v[0]+g}var h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.keys=function(g){return(g.getAttribute("style")||"").split(";").map(function(p){var y=p.split(":");return y[0].trim()})},v.prototype.add=function(g,p){return this.canAdd(g,p)?(g.style[c(this.keyName)]=p,!0):!1},v.prototype.remove=function(g){g.style[c(this.keyName)]="",g.getAttribute("style")||g.removeAttribute("style")},v.prototype.value=function(g){var p=g.style[c(this.keyName)];return this.canAdd(g,p)?p:""},v}(l.default);n.default=h},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function h(d,v){for(var g=0;g<v.length;g++){var p=v[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,v,g){return v&&h(d.prototype,v),g&&h(d,g),d}}();function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(d,v){l(this,h),this.quill=d,this.options=v,this.modules={}}return a(h,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(g){v.modules[g]==null&&v.addModule(g)})}},{key:"addModule",value:function(v){var g=this.quill.constructor.import("modules/"+v);return this.modules[v]=new g(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),h}();c.DEFAULTS={modules:{}},c.themes={default:c},n.default=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function E(b,N){for(var I=0;I<N.length;I++){var F=N[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}return function(b,N,I){return N&&E(b.prototype,N),I&&E(b,I),b}}(),l=function E(b,N,I){b===null&&(b=Function.prototype);var F=Object.getOwnPropertyDescriptor(b,N);if(F===void 0){var U=Object.getPrototypeOf(b);return U===null?void 0:E(U,N,I)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(I)}},c=i(0),h=g(c),d=i(7),v=g(d);function g(E){return E&&E.__esModule?E:{default:E}}function p(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function y(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:E}function w(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);E.prototype=Object.create(b&&b.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(E,b):E.__proto__=b)}var S="\uFEFF",T=function(E){w(b,E);function b(N){p(this,b);var I=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,N));return I.contentNode=document.createElement("span"),I.contentNode.setAttribute("contenteditable",!1),[].slice.call(I.domNode.childNodes).forEach(function(F){I.contentNode.appendChild(F)}),I.leftGuard=document.createTextNode(S),I.rightGuard=document.createTextNode(S),I.domNode.appendChild(I.leftGuard),I.domNode.appendChild(I.contentNode),I.domNode.appendChild(I.rightGuard),I}return a(b,[{key:"index",value:function(I,F){return I===this.leftGuard?0:I===this.rightGuard?1:l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,I,F)}},{key:"restore",value:function(I){var F=void 0,U=void 0,P=I.data.split(S).join("");if(I===this.leftGuard)if(this.prev instanceof v.default){var _=this.prev.length();this.prev.insertAt(_,P),F={startNode:this.prev.domNode,startOffset:_+P.length}}else U=document.createTextNode(P),this.parent.insertBefore(h.default.create(U),this),F={startNode:U,startOffset:P.length};else I===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,P),F={startNode:this.next.domNode,startOffset:P.length}):(U=document.createTextNode(P),this.parent.insertBefore(h.default.create(U),this.next),F={startNode:U,startOffset:P.length}));return I.data=S,F}},{key:"update",value:function(I,F){var U=this;I.forEach(function(P){if(P.type==="characterData"&&(P.target===U.leftGuard||P.target===U.rightGuard)){var _=U.restore(P.target);_&&(F.range=_)}})}}]),b}(h.default.Embed);n.default=T},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=i(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}var h={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new l.default.Attributor.Attribute("align","align",h),v=new l.default.Attributor.Class("align","ql-align",h),g=new l.default.Attributor.Style("align","text-align",h);n.AlignAttribute=d,n.AlignClass=v,n.AlignStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=i(0),l=h(a),c=i(26);function h(g){return g&&g.__esModule?g:{default:g}}var d=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),v=new c.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=v},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=i(0),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}var h={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},d=new l.default.Attributor.Attribute("direction","dir",h),v=new l.default.Attributor.Class("direction","ql-direction",h),g=new l.default.Attributor.Style("direction","direction",h);n.DirectionAttribute=d,n.DirectionClass=v,n.DirectionStyle=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function E(b,N){for(var I=0;I<N.length;I++){var F=N[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}return function(b,N,I){return N&&E(b.prototype,N),I&&E(b,I),b}}(),l=function E(b,N,I){b===null&&(b=Function.prototype);var F=Object.getOwnPropertyDescriptor(b,N);if(F===void 0){var U=Object.getPrototypeOf(b);return U===null?void 0:E(U,N,I)}else{if("value"in F)return F.value;var P=F.get;return P===void 0?void 0:P.call(I)}},c=i(0),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function v(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function g(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:E}function p(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);E.prototype=Object.create(b&&b.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(E,b):E.__proto__=b)}var y={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},w=new h.default.Attributor.Class("font","ql-font",y),S=function(E){p(b,E);function b(){return v(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"value",value:function(I){return l(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,I).replace(/["']/g,"")}}]),b}(h.default.Attributor.Style),T=new S("font","font-family",y);n.FontStyle=T,n.FontClass=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=i(0),l=c(a);function c(v){return v&&v.__esModule?v:{default:v}}var h=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=h,n.SizeStyle=d},function(t,n,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function N(I,F){for(var U=0;U<F.length;U++){var P=F[U];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,F,U){return F&&N(I.prototype,F),U&&N(I,U),I}}(),l=i(0),c=p(l),h=i(5),d=p(h),v=i(9),g=p(v);function p(N){return N&&N.__esModule?N:{default:N}}function y(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}function w(N,I){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:N}function S(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);N.prototype=Object.create(I&&I.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(N,I):N.__proto__=I)}var T=function(N){S(I,N);function I(F,U){y(this,I);var P=w(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,F,U));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(d.default.events.EDITOR_CHANGE,function(_,A,k,x){_!==d.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||x===d.default.sources.USER?P.record(A,k):P.transform(A))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return a(I,[{key:"change",value:function(U,P){if(this.stack[U].length!==0){var _=this.stack[U].pop();this.stack[P].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[U],d.default.sources.USER),this.ignoreChange=!1;var A=b(_[U]);this.quill.setSelection(A)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(U,P){if(U.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(P),A=Date.now();if(this.lastRecorded+this.options.delay>A&&this.stack.undo.length>0){var k=this.stack.undo.pop();_=_.compose(k.undo),U=k.redo.compose(U)}else this.lastRecorded=A;this.stack.undo.push({redo:U,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(U){this.stack.undo.forEach(function(P){P.undo=U.transform(P.undo,!0),P.redo=U.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=U.transform(P.undo,!0),P.redo=U.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),I}(g.default);T.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function E(N){var I=N.ops[N.ops.length-1];return I==null?!1:I.insert!=null?typeof I.insert=="string"&&I.insert.endsWith(`
`):I.attributes!=null?Object.keys(I.attributes).some(function(F){return c.default.query(F,c.default.Scope.BLOCK)!=null}):!1}function b(N){var I=N.reduce(function(U,P){return U+=P.delete||0,U},0),F=N.length()-I;return E(N)&&(F-=1),F}n.default=T,n.getLastChangeIndex=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function B(z,ee){for(var X=0;X<ee.length;X++){var H=ee[X];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(z,H.key,H)}}return function(z,ee,X){return ee&&B(z.prototype,ee),X&&B(z,X),z}}(),l=function B(z,ee,X){z===null&&(z=Function.prototype);var H=Object.getOwnPropertyDescriptor(z,ee);if(H===void 0){var Y=Object.getPrototypeOf(z);return Y===null?void 0:B(Y,ee,X)}else{if("value"in H)return H.value;var ne=H.get;return ne===void 0?void 0:ne.call(X)}},c=i(3),h=A(c),d=i(2),v=A(d),g=i(8),p=A(g),y=i(23),w=A(y),S=i(34),T=A(S),E=i(59),b=A(E),N=i(60),I=A(N),F=i(28),U=A(F),P=i(61),_=A(P);function A(B){return B&&B.__esModule?B:{default:B}}function k(B,z){if(!(B instanceof z))throw new TypeError("Cannot call a class as a function")}function x(B,z){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:B}function O(B,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);B.prototype=Object.create(z&&z.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(B,z):B.__proto__=z)}var D=[!1,"center","right","justify"],$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],J=[!1,"serif","monospace"],se=["1","2","3",!1],Z=["small",!1,"large","huge"],re=function(B){O(z,B);function z(ee,X){k(this,z);var H=x(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ee,X)),Y=function ne(ie){if(!document.body.contains(ee.root))return document.body.removeEventListener("click",ne);H.tooltip!=null&&!H.tooltip.root.contains(ie.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(fe){fe.container.contains(ie.target)||fe.close()})};return ee.emitter.listenDOM("click",document.body,Y),H}return a(z,[{key:"addModule",value:function(X){var H=l(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,X);return X==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(X,H){X.forEach(function(Y){var ne=Y.getAttribute("class")||"";ne.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),H[ie]!=null))if(ie==="direction")Y.innerHTML=H[ie][""]+H[ie].rtl;else if(typeof H[ie]=="string")Y.innerHTML=H[ie];else{var fe=Y.value||"";fe!=null&&H[ie][fe]&&(Y.innerHTML=H[ie][fe])}})})}},{key:"buildPickers",value:function(X,H){var Y=this;this.pickers=X.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&M(ie,D),new I.default(ie,H.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var fe=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&M(ie,$,fe==="background"?"#ffffff":"#000000"),new b.default(ie,H[fe])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?M(ie,J):ie.classList.contains("ql-header")?M(ie,se):ie.classList.contains("ql-size")&&M(ie,Z)),new U.default(ie)});var ne=function(){Y.pickers.forEach(function(fe){fe.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,ne)}}]),z}(T.default);re.DEFAULTS=(0,h.default)(!0,{},T.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,ee=this.container.querySelector("input.ql-image[type=file]");ee==null&&(ee=document.createElement("input"),ee.setAttribute("type","file"),ee.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ee.classList.add("ql-image"),ee.addEventListener("change",function(){if(ee.files!=null&&ee.files[0]!=null){var X=new FileReader;X.onload=function(H){var Y=z.quill.getSelection(!0);z.quill.updateContents(new v.default().retain(Y.index).delete(Y.length).insert({image:H.target.result}),p.default.sources.USER),z.quill.setSelection(Y.index+1,p.default.sources.SILENT),ee.value=""},X.readAsDataURL(ee.files[0])}}),this.container.appendChild(ee)),ee.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var G=function(B){O(z,B);function z(ee,X){k(this,z);var H=x(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,ee,X));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return a(z,[{key:"listen",value:function(){var X=this;this.textbox.addEventListener("keydown",function(H){w.default.match(H,"enter")?(X.save(),H.preventDefault()):w.default.match(H,"escape")&&(X.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:X!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+X)||""),this.root.setAttribute("data-mode",X)}},{key:"restoreFocus",value:function(){var X=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=X}},{key:"save",value:function(){var X=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",X,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",X,p.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":X=W(X);case"formula":{if(!X)break;var Y=this.quill.getSelection(!0);if(Y!=null){var ne=Y.index+Y.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),X,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",p.default.sources.USER),this.quill.setSelection(ne+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z}(_.default);function W(B){var z=B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=B.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":B}function M(B,z){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(X){var H=document.createElement("option");X===ee?H.setAttribute("selected","selected"):H.setAttribute("value",X),B.appendChild(H)})}n.BaseTooltip=G,n.default=re},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},l.prototype.contains=function(c){for(var h,d=this.iterator();h=d();)if(h===c)return!0;return!1},l.prototype.insertBefore=function(c,h){c&&(c.next=h,h!=null?(c.prev=h.prev,h.prev!=null&&(h.prev.next=c),h.prev=c,h===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},l.prototype.offset=function(c){for(var h=0,d=this.head;d!=null;){if(d===c)return h;h+=d.length(),d=d.next}return-1},l.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},l.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var h=c;return c!=null&&(c=c.next),h}},l.prototype.find=function(c,h){h===void 0&&(h=!1);for(var d,v=this.iterator();d=v();){var g=d.length();if(c<g||h&&c===g&&(d.next==null||d.next.length()!==0))return[d,c];c-=g}return[null,0]},l.prototype.forEach=function(c){for(var h,d=this.iterator();h=d();)c(h)},l.prototype.forEachAt=function(c,h,d){if(!(h<=0))for(var v=this.find(c),g=v[0],p=v[1],y,w=c-p,S=this.iterator(g);(y=S())&&w<c+h;){var T=y.length();c>w?d(y,c-w,Math.min(h,w+T-c)):d(y,0,Math.min(T,c+h-w)),w+=T}},l.prototype.map=function(c){return this.reduce(function(h,d){return h.push(c(d)),h},[])},l.prototype.reduce=function(c,h){for(var d,v=this.iterator();d=v();)h=c(h,d);return h},l}();n.default=a},function(t,n,i){var a=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var w in y)y.hasOwnProperty(w)&&(p[w]=y[w])};return function(p,y){g(p,y);function w(){this.constructor=p}p.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(17),c=i(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,v=function(g){a(p,g);function p(y){var w=g.call(this,y)||this;return w.scroll=w,w.observer=new MutationObserver(function(S){w.update(S)}),w.observer.observe(w.domNode,h),w.attach(),w}return p.prototype.detach=function(){g.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(y,w){this.update(),y===0&&w===this.length()?this.children.forEach(function(S){S.remove()}):g.prototype.deleteAt.call(this,y,w)},p.prototype.formatAt=function(y,w,S,T){this.update(),g.prototype.formatAt.call(this,y,w,S,T)},p.prototype.insertAt=function(y,w,S){this.update(),g.prototype.insertAt.call(this,y,w,S)},p.prototype.optimize=function(y,w){var S=this;y===void 0&&(y=[]),w===void 0&&(w={}),g.prototype.optimize.call(this,w);for(var T=[].slice.call(this.observer.takeRecords());T.length>0;)y.push(T.pop());for(var E=function(F,U){U===void 0&&(U=!0),!(F==null||F===S)&&F.domNode.parentNode!=null&&(F.domNode[c.DATA_KEY].mutations==null&&(F.domNode[c.DATA_KEY].mutations=[]),U&&E(F.parent))},b=function(F){F.domNode[c.DATA_KEY]==null||F.domNode[c.DATA_KEY].mutations==null||(F instanceof l.default&&F.children.forEach(b),F.optimize(w))},N=y,I=0;N.length>0;I+=1){if(I>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(function(F){var U=c.find(F.target,!0);U!=null&&(U.domNode===F.target&&(F.type==="childList"?(E(c.find(F.previousSibling,!1)),[].forEach.call(F.addedNodes,function(P){var _=c.find(P,!1);E(_,!1),_ instanceof l.default&&_.children.forEach(function(A){E(A,!1)})})):F.type==="attributes"&&E(U.prev)),E(U))}),this.children.forEach(b),N=[].slice.call(this.observer.takeRecords()),T=N.slice();T.length>0;)y.push(T.pop())}},p.prototype.update=function(y,w){var S=this;w===void 0&&(w={}),y=y||this.observer.takeRecords(),y.map(function(T){var E=c.find(T.target,!0);return E==null?null:E.domNode[c.DATA_KEY].mutations==null?(E.domNode[c.DATA_KEY].mutations=[T],E):(E.domNode[c.DATA_KEY].mutations.push(T),null)}).forEach(function(T){T==null||T===S||T.domNode[c.DATA_KEY]==null||T.update(T.domNode[c.DATA_KEY].mutations||[],w)}),this.domNode[c.DATA_KEY].mutations!=null&&g.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,w),this.optimize(y,w)},p.blotName="scroll",p.defaultChild="block",p.scope=c.Scope.BLOCK_BLOT,p.tagName="DIV",p}(l.default);n.default=v},function(t,n,i){var a=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var y in p)p.hasOwnProperty(y)&&(g[y]=p[y])};return function(g,p){v(g,p);function y(){this.constructor=g}g.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),c=i(1);function h(v,g){if(Object.keys(v).length!==Object.keys(g).length)return!1;for(var p in v)if(v[p]!==g[p])return!1;return!0}var d=function(v){a(g,v);function g(){return v!==null&&v.apply(this,arguments)||this}return g.formats=function(p){if(p.tagName!==g.tagName)return v.formats.call(this,p)},g.prototype.format=function(p,y){var w=this;p===this.statics.blotName&&!y?(this.children.forEach(function(S){S instanceof l.default||(S=S.wrap(g.blotName,!0)),w.attributes.copy(S)}),this.unwrap()):v.prototype.format.call(this,p,y)},g.prototype.formatAt=function(p,y,w,S){if(this.formats()[w]!=null||c.query(w,c.Scope.ATTRIBUTE)){var T=this.isolate(p,y);T.format(w,S)}else v.prototype.formatAt.call(this,p,y,w,S)},g.prototype.optimize=function(p){v.prototype.optimize.call(this,p);var y=this.formats();if(Object.keys(y).length===0)return this.unwrap();var w=this.next;w instanceof g&&w.prev===this&&h(y,w.formats())&&(w.moveChildren(this),w.remove())},g.blotName="inline",g.scope=c.Scope.INLINE_BLOT,g.tagName="SPAN",g}(l.default);n.default=d},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(18),c=i(1),h=function(d){a(v,d);function v(){return d!==null&&d.apply(this,arguments)||this}return v.formats=function(g){var p=c.query(v.blotName).tagName;if(g.tagName!==p)return d.formats.call(this,g)},v.prototype.format=function(g,p){c.query(g,c.Scope.BLOCK)!=null&&(g===this.statics.blotName&&!p?this.replaceWith(v.blotName):d.prototype.format.call(this,g,p))},v.prototype.formatAt=function(g,p,y,w){c.query(y,c.Scope.BLOCK)!=null?this.format(y,w):d.prototype.formatAt.call(this,g,p,y,w)},v.prototype.insertAt=function(g,p,y){if(y==null||c.query(p,c.Scope.INLINE)!=null)d.prototype.insertAt.call(this,g,p,y);else{var w=this.split(g),S=c.create(p,y);w.parent.insertBefore(S,w)}},v.prototype.update=function(g,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,g,p)},v.blotName="block",v.scope=c.Scope.BLOCK_BLOT,v.tagName="P",v}(l.default);n.default=h},function(t,n,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)v.hasOwnProperty(g)&&(d[g]=v[g])};return function(d,v){h(d,v);function g(){this.constructor=d}d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),c=function(h){a(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.formats=function(v){},d.prototype.format=function(v,g){h.prototype.formatAt.call(this,0,this.length(),v,g)},d.prototype.formatAt=function(v,g,p,y){v===0&&g===this.length()?this.format(p,y):h.prototype.formatAt.call(this,v,g,p,y)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(l.default);n.default=c},function(t,n,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var p in g)g.hasOwnProperty(p)&&(v[p]=g[p])};return function(v,g){d(v,g);function p(){this.constructor=v}v.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=i(19),c=i(1),h=function(d){a(v,d);function v(g){var p=d.call(this,g)||this;return p.text=p.statics.value(p.domNode),p}return v.create=function(g){return document.createTextNode(g)},v.value=function(g){var p=g.data;return p.normalize&&(p=p.normalize()),p},v.prototype.deleteAt=function(g,p){this.domNode.data=this.text=this.text.slice(0,g)+this.text.slice(g+p)},v.prototype.index=function(g,p){return this.domNode===g?p:-1},v.prototype.insertAt=function(g,p,y){y==null?(this.text=this.text.slice(0,g)+p+this.text.slice(g),this.domNode.data=this.text):d.prototype.insertAt.call(this,g,p,y)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(g){d.prototype.optimize.call(this,g),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(g,p){return[this.domNode,g]},v.prototype.split=function(g,p){if(p===void 0&&(p=!1),!p){if(g===0)return this;if(g===this.length())return this.next}var y=c.create(this.domNode.splitText(g));return this.parent.insertBefore(y,this.next),this.text=this.statics.value(this.domNode),y},v.prototype.update=function(g,p){var y=this;g.some(function(w){return w.type==="characterData"&&w.target===y.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=c.Scope.INLINE_BLOT,v}(l.default);n.default=h},function(t,n,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,h){return arguments.length>1&&!this.contains(c)==!h?h:l.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,h){return h=h||0,this.substr(h,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,h){var d=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>d.length)&&(h=d.length),h-=c.length;var v=d.indexOf(c,h);return v!==-1&&v===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),v=d.length>>>0,g=arguments[1],p,y=0;y<v;y++)if(p=d[y],h.call(g,p,y,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var i=-1,a=1,l=0;function c(I,F,U){if(I==F)return I?[[l,I]]:[];(U<0||I.length<U)&&(U=null);var P=g(I,F),_=I.substring(0,P);I=I.substring(P),F=F.substring(P),P=p(I,F);var A=I.substring(I.length-P);I=I.substring(0,I.length-P),F=F.substring(0,F.length-P);var k=h(I,F);return _&&k.unshift([l,_]),A&&k.push([l,A]),w(k),U!=null&&(k=E(k,U)),k=b(k),k}function h(I,F){var U;if(!I)return[[a,F]];if(!F)return[[i,I]];var P=I.length>F.length?I:F,_=I.length>F.length?F:I,A=P.indexOf(_);if(A!=-1)return U=[[a,P.substring(0,A)],[l,_],[a,P.substring(A+_.length)]],I.length>F.length&&(U[0][0]=U[2][0]=i),U;if(_.length==1)return[[i,I],[a,F]];var k=y(I,F);if(k){var x=k[0],O=k[1],D=k[2],$=k[3],J=k[4],se=c(x,D),Z=c(O,$);return se.concat([[l,J]],Z)}return d(I,F)}function d(I,F){for(var U=I.length,P=F.length,_=Math.ceil((U+P)/2),A=_,k=2*_,x=new Array(k),O=new Array(k),D=0;D<k;D++)x[D]=-1,O[D]=-1;x[A+1]=0,O[A+1]=0;for(var $=U-P,J=$%2!=0,se=0,Z=0,re=0,G=0,W=0;W<_;W++){for(var M=-W+se;M<=W-Z;M+=2){var B=A+M,z;M==-W||M!=W&&x[B-1]<x[B+1]?z=x[B+1]:z=x[B-1]+1;for(var ee=z-M;z<U&&ee<P&&I.charAt(z)==F.charAt(ee);)z++,ee++;if(x[B]=z,z>U)Z+=2;else if(ee>P)se+=2;else if(J){var X=A+$-M;if(X>=0&&X<k&&O[X]!=-1){var H=U-O[X];if(z>=H)return v(I,F,z,ee)}}}for(var Y=-W+re;Y<=W-G;Y+=2){var X=A+Y,H;Y==-W||Y!=W&&O[X-1]<O[X+1]?H=O[X+1]:H=O[X-1]+1;for(var ne=H-Y;H<U&&ne<P&&I.charAt(U-H-1)==F.charAt(P-ne-1);)H++,ne++;if(O[X]=H,H>U)G+=2;else if(ne>P)re+=2;else if(!J){var B=A+$-Y;if(B>=0&&B<k&&x[B]!=-1){var z=x[B],ee=A+z-B;if(H=U-H,z>=H)return v(I,F,z,ee)}}}}return[[i,I],[a,F]]}function v(I,F,U,P){var _=I.substring(0,U),A=F.substring(0,P),k=I.substring(U),x=F.substring(P),O=c(_,A),D=c(k,x);return O.concat(D)}function g(I,F){if(!I||!F||I.charAt(0)!=F.charAt(0))return 0;for(var U=0,P=Math.min(I.length,F.length),_=P,A=0;U<_;)I.substring(A,_)==F.substring(A,_)?(U=_,A=U):P=_,_=Math.floor((P-U)/2+U);return _}function p(I,F){if(!I||!F||I.charAt(I.length-1)!=F.charAt(F.length-1))return 0;for(var U=0,P=Math.min(I.length,F.length),_=P,A=0;U<_;)I.substring(I.length-_,I.length-A)==F.substring(F.length-_,F.length-A)?(U=_,A=U):P=_,_=Math.floor((P-U)/2+U);return _}function y(I,F){var U=I.length>F.length?I:F,P=I.length>F.length?F:I;if(U.length<4||P.length*2<U.length)return null;function _(Z,re,G){for(var W=Z.substring(G,G+Math.floor(Z.length/4)),M=-1,B="",z,ee,X,H;(M=re.indexOf(W,M+1))!=-1;){var Y=g(Z.substring(G),re.substring(M)),ne=p(Z.substring(0,G),re.substring(0,M));B.length<ne+Y&&(B=re.substring(M-ne,M)+re.substring(M,M+Y),z=Z.substring(0,G-ne),ee=Z.substring(G+Y),X=re.substring(0,M-ne),H=re.substring(M+Y))}return B.length*2>=Z.length?[z,ee,X,H,B]:null}var A=_(U,P,Math.ceil(U.length/4)),k=_(U,P,Math.ceil(U.length/2)),x;if(!A&&!k)return null;k?A?x=A[4].length>k[4].length?A:k:x=k:x=A;var O,D,$,J;I.length>F.length?(O=x[0],D=x[1],$=x[2],J=x[3]):($=x[0],J=x[1],O=x[2],D=x[3]);var se=x[4];return[O,D,$,J,se]}function w(I){I.push([l,""]);for(var F=0,U=0,P=0,_="",A="",k;F<I.length;)switch(I[F][0]){case a:P++,A+=I[F][1],F++;break;case i:U++,_+=I[F][1],F++;break;case l:U+P>1?(U!==0&&P!==0&&(k=g(A,_),k!==0&&(F-U-P>0&&I[F-U-P-1][0]==l?I[F-U-P-1][1]+=A.substring(0,k):(I.splice(0,0,[l,A.substring(0,k)]),F++),A=A.substring(k),_=_.substring(k)),k=p(A,_),k!==0&&(I[F][1]=A.substring(A.length-k)+I[F][1],A=A.substring(0,A.length-k),_=_.substring(0,_.length-k))),U===0?I.splice(F-P,U+P,[a,A]):P===0?I.splice(F-U,U+P,[i,_]):I.splice(F-U-P,U+P,[i,_],[a,A]),F=F-U-P+(U?1:0)+(P?1:0)+1):F!==0&&I[F-1][0]==l?(I[F-1][1]+=I[F][1],I.splice(F,1)):F++,P=0,U=0,_="",A="";break}I[I.length-1][1]===""&&I.pop();var x=!1;for(F=1;F<I.length-1;)I[F-1][0]==l&&I[F+1][0]==l&&(I[F][1].substring(I[F][1].length-I[F-1][1].length)==I[F-1][1]?(I[F][1]=I[F-1][1]+I[F][1].substring(0,I[F][1].length-I[F-1][1].length),I[F+1][1]=I[F-1][1]+I[F+1][1],I.splice(F-1,1),x=!0):I[F][1].substring(0,I[F+1][1].length)==I[F+1][1]&&(I[F-1][1]+=I[F+1][1],I[F][1]=I[F][1].substring(I[F+1][1].length)+I[F+1][1],I.splice(F+1,1),x=!0)),F++;x&&w(I)}var S=c;S.INSERT=a,S.DELETE=i,S.EQUAL=l,t.exports=S;function T(I,F){if(F===0)return[l,I];for(var U=0,P=0;P<I.length;P++){var _=I[P];if(_[0]===i||_[0]===l){var A=U+_[1].length;if(F===A)return[P+1,I];if(F<A){I=I.slice();var k=F-U,x=[_[0],_[1].slice(0,k)],O=[_[0],_[1].slice(k)];return I.splice(P,1,x,O),[P+1,I]}else U=A}}throw new Error("cursor_pos is out of bounds!")}function E(I,F){var U=T(I,F),P=U[1],_=U[0],A=P[_],k=P[_+1];if(A==null)return I;if(A[0]!==l)return I;if(k!=null&&A[1]+k[1]===k[1]+A[1])return P.splice(_,2,k,A),N(P,_,2);if(k!=null&&k[1].indexOf(A[1])===0){P.splice(_,2,[k[0],A[1]],[0,A[1]]);var x=k[1].slice(A[1].length);return x.length>0&&P.splice(_+2,0,[k[0],x]),N(P,_,3)}else return I}function b(I){for(var F=!1,U=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},P=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},_=2;_<I.length;_+=1)I[_-2][0]===l&&P(I[_-2][1])&&I[_-1][0]===i&&U(I[_-1][1])&&I[_][0]===a&&U(I[_][1])&&(F=!0,I[_-1][1]=I[_-2][1].slice(-1)+I[_-1][1],I[_][1]=I[_-2][1].slice(-1)+I[_][1],I[_-2][1]=I[_-2][1].slice(0,-1));if(!F)return I;for(var A=[],_=0;_<I.length;_+=1)I[_][1].length>0&&A.push(I[_]);return A}function N(I,F,U){for(var P=F+U-1;P>=0&&P>=F-1;P--)if(P+1<I.length){var _=I[P],A=I[P+1];_[0]===A[1]&&I.splice(P,2,[_[0],_[1]+A[1]])}return I}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(a){var l=[];for(var c in a)l.push(c);return l}},function(t,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=i?a:l,n.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}n.unsupported=l;function l(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(t,n){var i=Object.prototype.hasOwnProperty,a="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1));function c(d,v,g){this.fn=d,this.context=v,this.once=g||!1}function h(){this._events=new l,this._eventsCount=0}h.prototype.eventNames=function(){var v=[],g,p;if(this._eventsCount===0)return v;for(p in g=this._events)i.call(g,p)&&v.push(a?p.slice(1):p);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(g)):v},h.prototype.listeners=function(v,g){var p=a?a+v:v,y=this._events[p];if(g)return!!y;if(!y)return[];if(y.fn)return[y.fn];for(var w=0,S=y.length,T=new Array(S);w<S;w++)T[w]=y[w].fn;return T},h.prototype.emit=function(v,g,p,y,w,S){var T=a?a+v:v;if(!this._events[T])return!1;var E=this._events[T],b=arguments.length,N,I;if(E.fn){switch(E.once&&this.removeListener(v,E.fn,void 0,!0),b){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,p),!0;case 4:return E.fn.call(E.context,g,p,y),!0;case 5:return E.fn.call(E.context,g,p,y,w),!0;case 6:return E.fn.call(E.context,g,p,y,w,S),!0}for(I=1,N=new Array(b-1);I<b;I++)N[I-1]=arguments[I];E.fn.apply(E.context,N)}else{var F=E.length,U;for(I=0;I<F;I++)switch(E[I].once&&this.removeListener(v,E[I].fn,void 0,!0),b){case 1:E[I].fn.call(E[I].context);break;case 2:E[I].fn.call(E[I].context,g);break;case 3:E[I].fn.call(E[I].context,g,p);break;case 4:E[I].fn.call(E[I].context,g,p,y);break;default:if(!N)for(U=1,N=new Array(b-1);U<b;U++)N[U-1]=arguments[U];E[I].fn.apply(E[I].context,N)}}return!0},h.prototype.on=function(v,g,p){var y=new c(g,p||this),w=a?a+v:v;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],y]:this._events[w].push(y):(this._events[w]=y,this._eventsCount++),this},h.prototype.once=function(v,g,p){var y=new c(g,p||this,!0),w=a?a+v:v;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],y]:this._events[w].push(y):(this._events[w]=y,this._eventsCount++),this},h.prototype.removeListener=function(v,g,p,y){var w=a?a+v:v;if(!this._events[w])return this;if(!g)return--this._eventsCount===0?this._events=new l:delete this._events[w],this;var S=this._events[w];if(S.fn)S.fn===g&&(!y||S.once)&&(!p||S.context===p)&&(--this._eventsCount===0?this._events=new l:delete this._events[w]);else{for(var T=0,E=[],b=S.length;T<b;T++)(S[T].fn!==g||y&&!S[T].once||p&&S[T].context!==p)&&E.push(S[T]);E.length?this._events[w]=E.length===1?E[0]:E:--this._eventsCount===0?this._events=new l:delete this._events[w]}return this},h.prototype.removeAllListeners=function(v){var g;return v?(g=a?a+v:v,this._events[g]&&(--this._eventsCount===0?this._events=new l:delete this._events[g])):(this._events=new l,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=a,h.EventEmitter=h,typeof t<"u"&&(t.exports=h)},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},l=function(){function ce(de,Ee){var be=[],ge=!0,$e=!1,Me=void 0;try{for(var Be=de[Symbol.iterator](),We;!(ge=(We=Be.next()).done)&&(be.push(We.value),!(Ee&&be.length===Ee));ge=!0);}catch(Ze){$e=!0,Me=Ze}finally{try{!ge&&Be.return&&Be.return()}finally{if($e)throw Me}}return be}return function(de,Ee){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return ce(de,Ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function ce(de,Ee){for(var be=0;be<Ee.length;be++){var ge=Ee[be];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(de,ge.key,ge)}}return function(de,Ee,be){return Ee&&ce(de.prototype,Ee),be&&ce(de,be),de}}(),h=i(3),d=O(h),v=i(2),g=O(v),p=i(0),y=O(p),w=i(5),S=O(w),T=i(10),E=O(T),b=i(9),N=O(b),I=i(36),F=i(37),U=i(13),P=O(U),_=i(26),A=i(38),k=i(39),x=i(40);function O(ce){return ce&&ce.__esModule?ce:{default:ce}}function D(ce,de,Ee){return de in ce?Object.defineProperty(ce,de,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):ce[de]=Ee,ce}function $(ce,de){if(!(ce instanceof de))throw new TypeError("Cannot call a class as a function")}function J(ce,de){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:ce}function se(ce,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);ce.prototype=Object.create(de&&de.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,de):ce.__proto__=de)}var Z=(0,E.default)("quill:clipboard"),re="__ql-matcher",G=[[Node.TEXT_NODE,tt],[Node.TEXT_NODE,Pe],["br",ve],[Node.ELEMENT_NODE,Pe],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,De],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Ue],["li",xe],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",ke]],W=[I.AlignAttribute,A.DirectionAttribute].reduce(function(ce,de){return ce[de.keyName]=de,ce},{}),M=[I.AlignStyle,F.BackgroundStyle,_.ColorStyle,A.DirectionStyle,k.FontStyle,x.SizeStyle].reduce(function(ce,de){return ce[de.keyName]=de,ce},{}),B=function(ce){se(de,ce);function de(Ee,be){$(this,de);var ge=J(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Ee,be));return ge.quill.root.addEventListener("paste",ge.onPaste.bind(ge)),ge.container=ge.quill.addContainer("ql-clipboard"),ge.container.setAttribute("contenteditable",!0),ge.container.setAttribute("tabindex",-1),ge.matchers=[],G.concat(ge.options.matchers).forEach(function($e){var Me=l($e,2),Be=Me[0],We=Me[1];!be.matchVisual&&We===De||ge.addMatcher(Be,We)}),ge}return c(de,[{key:"addMatcher",value:function(be,ge){this.matchers.push([be,ge])}},{key:"convert",value:function(be){if(typeof be=="string")return this.container.innerHTML=be.replace(/\>\r?\n +\</g,"><"),this.convert();var ge=this.quill.getFormat(this.quill.selection.savedRange.index);if(ge[P.default.blotName]){var $e=this.container.innerText;return this.container.innerHTML="",new g.default().insert($e,D({},P.default.blotName,ge[P.default.blotName]))}var Me=this.prepareMatching(),Be=l(Me,2),We=Be[0],Ze=Be[1],et=Y(this.container,We,Ze);return X(et,`
`)&&et.ops[et.ops.length-1].attributes==null&&(et=et.compose(new g.default().retain(et.length()-1).delete(1))),Z.log("convert",this.container.innerHTML,et),this.container.innerHTML="",et}},{key:"dangerouslyPasteHTML",value:function(be,ge){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.default.sources.API;if(typeof be=="string")this.quill.setContents(this.convert(be),ge),this.quill.setSelection(0,S.default.sources.SILENT);else{var Me=this.convert(ge);this.quill.updateContents(new g.default().retain(be).concat(Me),$e),this.quill.setSelection(be+Me.length(),S.default.sources.SILENT)}}},{key:"onPaste",value:function(be){var ge=this;if(!(be.defaultPrevented||!this.quill.isEnabled())){var $e=this.quill.getSelection(),Me=new g.default().retain($e.index),Be=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(S.default.sources.SILENT),setTimeout(function(){Me=Me.concat(ge.convert()).delete($e.length),ge.quill.updateContents(Me,S.default.sources.USER),ge.quill.setSelection(Me.length()-$e.length,S.default.sources.SILENT),ge.quill.scrollingContainer.scrollTop=Be,ge.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var be=this,ge=[],$e=[];return this.matchers.forEach(function(Me){var Be=l(Me,2),We=Be[0],Ze=Be[1];switch(We){case Node.TEXT_NODE:$e.push(Ze);break;case Node.ELEMENT_NODE:ge.push(Ze);break;default:[].forEach.call(be.container.querySelectorAll(We),function(et){et[re]=et[re]||[],et[re].push(Ze)});break}}),[ge,$e]}}]),de}(N.default);B.DEFAULTS={matchers:[],matchVisual:!0};function z(ce,de,Ee){return(typeof de>"u"?"undefined":a(de))==="object"?Object.keys(de).reduce(function(be,ge){return z(be,ge,de[ge])},ce):ce.reduce(function(be,ge){return ge.attributes&&ge.attributes[de]?be.push(ge):be.insert(ge.insert,(0,d.default)({},D({},de,Ee),ge.attributes))},new g.default)}function ee(ce){if(ce.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return ce[de]||(ce[de]=window.getComputedStyle(ce))}function X(ce,de){for(var Ee="",be=ce.ops.length-1;be>=0&&Ee.length<de.length;--be){var ge=ce.ops[be];if(typeof ge.insert!="string")break;Ee=ge.insert+Ee}return Ee.slice(-1*de.length)===de}function H(ce){if(ce.childNodes.length===0)return!1;var de=ee(ce);return["block","list-item"].indexOf(de.display)>-1}function Y(ce,de,Ee){return ce.nodeType===ce.TEXT_NODE?Ee.reduce(function(be,ge){return ge(ce,be)},new g.default):ce.nodeType===ce.ELEMENT_NODE?[].reduce.call(ce.childNodes||[],function(be,ge){var $e=Y(ge,de,Ee);return ge.nodeType===ce.ELEMENT_NODE&&($e=de.reduce(function(Me,Be){return Be(ge,Me)},$e),$e=(ge[re]||[]).reduce(function(Me,Be){return Be(ge,Me)},$e)),be.concat($e)},new g.default):new g.default}function ne(ce,de,Ee){return z(Ee,ce,!0)}function ie(ce,de){var Ee=y.default.Attributor.Attribute.keys(ce),be=y.default.Attributor.Class.keys(ce),ge=y.default.Attributor.Style.keys(ce),$e={};return Ee.concat(be).concat(ge).forEach(function(Me){var Be=y.default.query(Me,y.default.Scope.ATTRIBUTE);Be!=null&&($e[Be.attrName]=Be.value(ce),$e[Be.attrName])||(Be=W[Me],Be!=null&&(Be.attrName===Me||Be.keyName===Me)&&($e[Be.attrName]=Be.value(ce)||void 0),Be=M[Me],Be!=null&&(Be.attrName===Me||Be.keyName===Me)&&(Be=M[Me],$e[Be.attrName]=Be.value(ce)||void 0))}),Object.keys($e).length>0&&(de=z(de,$e)),de}function fe(ce,de){var Ee=y.default.query(ce);if(Ee==null)return de;if(Ee.prototype instanceof y.default.Embed){var be={},ge=Ee.value(ce);ge!=null&&(be[Ee.blotName]=ge,de=new g.default().insert(be,Ee.formats(ce)))}else typeof Ee.formats=="function"&&(de=z(de,Ee.blotName,Ee.formats(ce)));return de}function ve(ce,de){return X(de,`
`)||de.insert(`
`),de}function ke(){return new g.default}function xe(ce,de){var Ee=y.default.query(ce);if(Ee==null||Ee.blotName!=="list-item"||!X(de,`
`))return de;for(var be=-1,ge=ce.parentNode;!ge.classList.contains("ql-clipboard");)(y.default.query(ge)||{}).blotName==="list"&&(be+=1),ge=ge.parentNode;return be<=0?de:de.compose(new g.default().retain(de.length()-1).retain(1,{indent:be}))}function Pe(ce,de){return X(de,`
`)||(H(ce)||de.length()>0&&ce.nextSibling&&H(ce.nextSibling))&&de.insert(`
`),de}function De(ce,de){if(H(ce)&&ce.nextElementSibling!=null&&!X(de,`

`)){var Ee=ce.offsetHeight+parseFloat(ee(ce).marginTop)+parseFloat(ee(ce).marginBottom);ce.nextElementSibling.offsetTop>ce.offsetTop+Ee*1.5&&de.insert(`
`)}return de}function Ue(ce,de){var Ee={},be=ce.style||{};return be.fontStyle&&ee(ce).fontStyle==="italic"&&(Ee.italic=!0),be.fontWeight&&(ee(ce).fontWeight.startsWith("bold")||parseInt(ee(ce).fontWeight)>=700)&&(Ee.bold=!0),Object.keys(Ee).length>0&&(de=z(de,Ee)),parseFloat(be.textIndent||0)>0&&(de=new g.default().insert("	").concat(de)),de}function tt(ce,de){var Ee=ce.data;if(ce.parentNode.tagName==="O:P")return de.insert(Ee.trim());if(Ee.trim().length===0&&ce.parentNode.classList.contains("ql-clipboard"))return de;if(!ee(ce.parentNode).whiteSpace.startsWith("pre")){var be=function($e,Me){return Me=Me.replace(/[^\u00a0]/g,""),Me.length<1&&$e?" ":Me};Ee=Ee.replace(/\r\n/g," ").replace(/\n/g," "),Ee=Ee.replace(/\s\s+/g,be.bind(be,!0)),(ce.previousSibling==null&&H(ce.parentNode)||ce.previousSibling!=null&&H(ce.previousSibling))&&(Ee=Ee.replace(/^\s+/,be.bind(be,!1))),(ce.nextSibling==null&&H(ce.parentNode)||ce.nextSibling!=null&&H(ce.nextSibling))&&(Ee=Ee.replace(/\s+$/,be.bind(be,!1)))}return de.insert(Ee)}n.default=B,n.matchAttributor=ie,n.matchBlot=fe,n.matchNewline=Pe,n.matchSpacing=De,n.matchText=tt},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(S,T){for(var E=0;E<T.length;E++){var b=T[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,E){return T&&w(S.prototype,T),E&&w(S,E),S}}(),l=function w(S,T,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var N=Object.getPrototypeOf(S);return N===null?void 0:w(N,T,E)}else{if("value"in b)return b.value;var I=b.get;return I===void 0?void 0:I.call(E)}},c=i(6),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function p(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var y=function(w){p(S,w);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"optimize",value:function(E){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,E),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),S}(h.default);y.blotName="bold",y.tagName=["STRONG","B"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function x(O,D){var $=[],J=!0,se=!1,Z=void 0;try{for(var re=O[Symbol.iterator](),G;!(J=(G=re.next()).done)&&($.push(G.value),!(D&&$.length===D));J=!0);}catch(W){se=!0,Z=W}finally{try{!J&&re.return&&re.return()}finally{if(se)throw Z}}return $}return function(O,D){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return x(O,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function x(O,D){for(var $=0;$<D.length;$++){var J=D[$];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(O,J.key,J)}}return function(O,D,$){return D&&x(O.prototype,D),$&&x(O,$),O}}(),c=i(2),h=E(c),d=i(0),v=E(d),g=i(5),p=E(g),y=i(10),w=E(y),S=i(9),T=E(S);function E(x){return x&&x.__esModule?x:{default:x}}function b(x,O,D){return O in x?Object.defineProperty(x,O,{value:D,enumerable:!0,configurable:!0,writable:!0}):x[O]=D,x}function N(x,O){if(!(x instanceof O))throw new TypeError("Cannot call a class as a function")}function I(x,O){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:x}function F(x,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);x.prototype=Object.create(O&&O.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(x,O):x.__proto__=O)}var U=(0,w.default)("quill:toolbar"),P=function(x){F(O,x);function O(D,$){N(this,O);var J=I(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,D,$));if(Array.isArray(J.options.container)){var se=document.createElement("div");A(se,J.options.container),D.container.parentNode.insertBefore(se,D.container),J.container=se}else typeof J.options.container=="string"?J.container=document.querySelector(J.options.container):J.container=J.options.container;if(!(J.container instanceof HTMLElement)){var Z;return Z=U.error("Container required for toolbar",J.options),I(J,Z)}return J.container.classList.add("ql-toolbar"),J.controls=[],J.handlers={},Object.keys(J.options.handlers).forEach(function(re){J.addHandler(re,J.options.handlers[re])}),[].forEach.call(J.container.querySelectorAll("button, select"),function(re){J.attach(re)}),J.quill.on(p.default.events.EDITOR_CHANGE,function(re,G){re===p.default.events.SELECTION_CHANGE&&J.update(G)}),J.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var re=J.quill.selection.getRange(),G=a(re,1),W=G[0];J.update(W)}),J}return l(O,[{key:"addHandler",value:function($,J){this.handlers[$]=J}},{key:"attach",value:function($){var J=this,se=[].find.call($.classList,function(re){return re.indexOf("ql-")===0});if(se){if(se=se.slice(3),$.tagName==="BUTTON"&&$.setAttribute("type","button"),this.handlers[se]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[se]==null){U.warn("ignoring attaching to disabled format",se,$);return}if(v.default.query(se)==null){U.warn("ignoring attaching to nonexistent format",se,$);return}}var Z=$.tagName==="SELECT"?"change":"click";$.addEventListener(Z,function(re){var G=void 0;if($.tagName==="SELECT"){if($.selectedIndex<0)return;var W=$.options[$.selectedIndex];W.hasAttribute("selected")?G=!1:G=W.value||!1}else $.classList.contains("ql-active")?G=!1:G=$.value||!$.hasAttribute("value"),re.preventDefault();J.quill.focus();var M=J.quill.selection.getRange(),B=a(M,1),z=B[0];if(J.handlers[se]!=null)J.handlers[se].call(J,G);else if(v.default.query(se).prototype instanceof v.default.Embed){if(G=prompt("Enter "+se),!G)return;J.quill.updateContents(new h.default().retain(z.index).delete(z.length).insert(b({},se,G)),p.default.sources.USER)}else J.quill.format(se,G,p.default.sources.USER);J.update(z)}),this.controls.push([se,$])}}},{key:"update",value:function($){var J=$==null?{}:this.quill.getFormat($);this.controls.forEach(function(se){var Z=a(se,2),re=Z[0],G=Z[1];if(G.tagName==="SELECT"){var W=void 0;if($==null)W=null;else if(J[re]==null)W=G.querySelector("option[selected]");else if(!Array.isArray(J[re])){var M=J[re];typeof M=="string"&&(M=M.replace(/\"/g,'\\"')),W=G.querySelector('option[value="'+M+'"]')}W==null?(G.value="",G.selectedIndex=-1):W.selected=!0}else if($==null)G.classList.remove("ql-active");else if(G.hasAttribute("value")){var B=J[re]===G.getAttribute("value")||J[re]!=null&&J[re].toString()===G.getAttribute("value")||J[re]==null&&!G.getAttribute("value");G.classList.toggle("ql-active",B)}else G.classList.toggle("ql-active",J[re]!=null)})}}]),O}(T.default);P.DEFAULTS={};function _(x,O,D){var $=document.createElement("button");$.setAttribute("type","button"),$.classList.add("ql-"+O),D!=null&&($.value=D),x.appendChild($)}function A(x,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(D){var $=document.createElement("span");$.classList.add("ql-formats"),D.forEach(function(J){if(typeof J=="string")_($,J);else{var se=Object.keys(J)[0],Z=J[se];Array.isArray(Z)?k($,se,Z):_($,se,Z)}}),x.appendChild($)})}function k(x,O,D){var $=document.createElement("select");$.classList.add("ql-"+O),D.forEach(function(J){var se=document.createElement("option");J!==!1?se.setAttribute("value",J):se.setAttribute("selected","selected"),$.appendChild(se)}),x.appendChild($)}P.DEFAULTS={container:null,handlers:{clean:function(){var O=this,D=this.quill.getSelection();if(D!=null)if(D.length==0){var $=this.quill.getFormat();Object.keys($).forEach(function(J){v.default.query(J,v.default.Scope.INLINE)!=null&&O.quill.format(J,!1)})}else this.quill.removeFormat(D,p.default.sources.USER)},direction:function(O){var D=this.quill.getFormat().align;O==="rtl"&&D==null?this.quill.format("align","right",p.default.sources.USER):!O&&D==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",O,p.default.sources.USER)},indent:function(O){var D=this.quill.getSelection(),$=this.quill.getFormat(D),J=parseInt($.indent||0);if(O==="+1"||O==="-1"){var se=O==="+1"?1:-1;$.direction==="rtl"&&(se*=-1),this.quill.format("indent",J+se,p.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,p.default.sources.USER)},list:function(O){var D=this.quill.getSelection(),$=this.quill.getFormat(D);O==="check"?$.list==="checked"||$.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",O,p.default.sources.USER)}}},n.default=P,n.addControls=A},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(S,T){for(var E=0;E<T.length;E++){var b=T[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,E){return T&&w(S.prototype,T),E&&w(S,E),S}}(),l=function w(S,T,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var N=Object.getPrototypeOf(S);return N===null?void 0:w(N,T,E)}else{if("value"in b)return b.value;var I=b.get;return I===void 0?void 0:I.call(E)}},c=i(28),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function p(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var y=function(w){p(S,w);function S(T,E){v(this,S);var b=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T));return b.label.innerHTML=E,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(N){N.classList.add("ql-primary")}),b}return a(S,[{key:"buildItem",value:function(E){var b=l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"buildItem",this).call(this,E);return b.style.backgroundColor=E.getAttribute("value")||"",b}},{key:"selectItem",value:function(E,b){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,E,b);var N=this.label.querySelector(".ql-color-label"),I=E&&E.getAttribute("data-value")||"";N&&(N.tagName==="line"?N.style.stroke=I:N.style.fill=I)}}]),S}(h.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(S,T){for(var E=0;E<T.length;E++){var b=T[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,E){return T&&w(S.prototype,T),E&&w(S,E),S}}(),l=function w(S,T,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var N=Object.getPrototypeOf(S);return N===null?void 0:w(N,T,E)}else{if("value"in b)return b.value;var I=b.get;return I===void 0?void 0:I.call(E)}},c=i(28),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function p(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var y=function(w){p(S,w);function S(T,E){v(this,S);var b=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(N){N.innerHTML=E[N.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return a(S,[{key:"selectItem",value:function(E,b){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,E,b),E=E||this.defaultItem,this.label.innerHTML=E.innerHTML}}]),S}(h.default);n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function h(d,v){for(var g=0;g<v.length;g++){var p=v[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,v,g){return v&&h(d.prototype,v),g&&h(d,g),d}}();function l(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(d,v){var g=this;l(this,h),this.quill=d,this.boundsContainer=v||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){g.root.style.marginTop=-1*g.quill.root.scrollTop+"px"}),this.hide()}return a(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var g=v.left+v.width/2-this.root.offsetWidth/2,p=v.bottom+this.quill.root.scrollTop;this.root.style.left=g+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var y=this.boundsContainer.getBoundingClientRect(),w=this.root.getBoundingClientRect(),S=0;if(w.right>y.right&&(S=y.right-w.right,this.root.style.left=g+S+"px"),w.left<y.left&&(S=y.left-w.left,this.root.style.left=g+S+"px"),w.bottom>y.bottom){var T=w.bottom-w.top,E=v.bottom-v.top+T;this.root.style.top=p-E+"px",this.root.classList.add("ql-flip")}return S}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();n.default=c},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function k(x,O){var D=[],$=!0,J=!1,se=void 0;try{for(var Z=x[Symbol.iterator](),re;!($=(re=Z.next()).done)&&(D.push(re.value),!(O&&D.length===O));$=!0);}catch(G){J=!0,se=G}finally{try{!$&&Z.return&&Z.return()}finally{if(J)throw se}}return D}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return k(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function k(x,O,D){x===null&&(x=Function.prototype);var $=Object.getOwnPropertyDescriptor(x,O);if($===void 0){var J=Object.getPrototypeOf(x);return J===null?void 0:k(J,O,D)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(D)}},c=function(){function k(x,O){for(var D=0;D<O.length;D++){var $=O[D];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(x,$.key,$)}}return function(x,O,D){return O&&k(x.prototype,O),D&&k(x,D),x}}(),h=i(3),d=N(h),v=i(8),g=N(v),p=i(43),y=N(p),w=i(27),S=N(w),T=i(15),E=i(41),b=N(E);function N(k){return k&&k.__esModule?k:{default:k}}function I(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function F(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function U(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=function(k){U(x,k);function x(O,D){I(this,x),D.modules.toolbar!=null&&D.modules.toolbar.container==null&&(D.modules.toolbar.container=P);var $=F(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O,D));return $.quill.container.classList.add("ql-snow"),$}return c(x,[{key:"extendToolbar",value:function(D){D.container.classList.add("ql-snow"),this.buildButtons([].slice.call(D.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(D.container.querySelectorAll("select")),b.default),this.tooltip=new A(this.quill,this.options.bounds),D.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function($,J){D.handlers.link.call(D,!J.format.link)})}}]),x}(y.default);_.DEFAULTS=(0,d.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){if(x){var O=this.quill.getSelection();if(O==null||O.length==0)return;var D=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(D)&&D.indexOf("mailto:")!==0&&(D="mailto:"+D);var $=this.quill.theme.tooltip;$.edit("link",D)}else this.quill.format("link",!1)}}}}});var A=function(k){U(x,k);function x(O,D){I(this,x);var $=F(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,O,D));return $.preview=$.root.querySelector("a.ql-preview"),$}return c(x,[{key:"listen",value:function(){var D=this;l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function($){D.root.classList.contains("ql-editing")?D.save():D.edit("link",D.preview.textContent),$.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function($){if(D.linkRange!=null){var J=D.linkRange;D.restoreFocus(),D.quill.formatText(J,"link",!1,g.default.sources.USER),delete D.linkRange}$.preventDefault(),D.hide()}),this.quill.on(g.default.events.SELECTION_CHANGE,function($,J,se){if($!=null){if($.length===0&&se===g.default.sources.USER){var Z=D.quill.scroll.descendant(S.default,$.index),re=a(Z,2),G=re[0],W=re[1];if(G!=null){D.linkRange=new T.Range($.index-W,G.length());var M=S.default.formats(G.domNode);D.preview.textContent=M,D.preview.setAttribute("href",M),D.show(),D.position(D.quill.getBounds(D.linkRange));return}}else delete D.linkRange;D.hide()}})}},{key:"show",value:function(){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),x}(p.BaseTooltip);A.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=_},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(29),l=ge(a),c=i(36),h=i(38),d=i(64),v=i(65),g=ge(v),p=i(66),y=ge(p),w=i(67),S=ge(w),T=i(37),E=i(26),b=i(39),N=i(40),I=i(56),F=ge(I),U=i(68),P=ge(U),_=i(27),A=ge(_),k=i(69),x=ge(k),O=i(70),D=ge(O),$=i(71),J=ge($),se=i(72),Z=ge(se),re=i(73),G=ge(re),W=i(13),M=ge(W),B=i(74),z=ge(B),ee=i(75),X=ge(ee),H=i(57),Y=ge(H),ne=i(41),ie=ge(ne),fe=i(28),ve=ge(fe),ke=i(59),xe=ge(ke),Pe=i(60),De=ge(Pe),Ue=i(61),tt=ge(Ue),ce=i(108),de=ge(ce),Ee=i(62),be=ge(Ee);function ge($e){return $e&&$e.__esModule?$e:{default:$e}}l.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":T.BackgroundClass,"attributors/class/color":E.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":N.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":T.BackgroundStyle,"attributors/style/color":E.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":N.SizeStyle},!0),l.default.register({"formats/align":c.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":d.IndentClass,"formats/background":T.BackgroundStyle,"formats/color":E.ColorStyle,"formats/font":b.FontClass,"formats/size":N.SizeClass,"formats/blockquote":g.default,"formats/code-block":M.default,"formats/header":y.default,"formats/list":S.default,"formats/bold":F.default,"formats/code":W.Code,"formats/italic":P.default,"formats/link":A.default,"formats/script":x.default,"formats/strike":D.default,"formats/underline":J.default,"formats/image":Z.default,"formats/video":G.default,"formats/list/item":w.ListItem,"modules/formula":z.default,"modules/syntax":X.default,"modules/toolbar":Y.default,"themes/bubble":de.default,"themes/snow":be.default,"ui/icons":ie.default,"ui/picker":ve.default,"ui/icon-picker":De.default,"ui/color-picker":xe.default,"ui/tooltip":tt.default},!0),n.default=l.default},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function S(T,E){for(var b=0;b<E.length;b++){var N=E[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(T,N.key,N)}}return function(T,E,b){return E&&S(T.prototype,E),b&&S(T,b),T}}(),l=function S(T,E,b){T===null&&(T=Function.prototype);var N=Object.getOwnPropertyDescriptor(T,E);if(N===void 0){var I=Object.getPrototypeOf(T);return I===null?void 0:S(I,E,b)}else{if("value"in N)return N.value;var F=N.get;return F===void 0?void 0:F.call(b)}},c=i(0),h=d(c);function d(S){return S&&S.__esModule?S:{default:S}}function v(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function g(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function p(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var y=function(S){p(T,S);function T(){return v(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,[{key:"add",value:function(b,N){if(N==="+1"||N==="-1"){var I=this.value(b)||0;N=N==="+1"?I+1:I-1}return N===0?(this.remove(b),!0):l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"add",this).call(this,b,N)}},{key:"canAdd",value:function(b,N){return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"canAdd",this).call(this,b,N)||l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"canAdd",this).call(this,b,parseInt(N))}},{key:"value",value:function(b){return parseInt(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"value",this).call(this,b))||void 0}}]),T}(h.default.Attributor.Class),w=new y("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=w},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(4),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="blockquote",g.tagName="blockquote",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function y(w,S){for(var T=0;T<S.length;T++){var E=S[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,S,T){return S&&y(w.prototype,S),T&&y(w,T),w}}(),l=i(4),c=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function d(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function v(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function g(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var p=function(y){g(w,y);function w(){return d(this,w),v(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,null,[{key:"formats",value:function(T){return this.tagName.indexOf(T.tagName)+1}}]),w}(c.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function I(F,U){for(var P=0;P<U.length;P++){var _=U[P];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(F,_.key,_)}}return function(F,U,P){return U&&I(F.prototype,U),P&&I(F,P),F}}(),l=function I(F,U,P){F===null&&(F=Function.prototype);var _=Object.getOwnPropertyDescriptor(F,U);if(_===void 0){var A=Object.getPrototypeOf(F);return A===null?void 0:I(A,U,P)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(P)}},c=i(0),h=y(c),d=i(4),v=y(d),g=i(25),p=y(g);function y(I){return I&&I.__esModule?I:{default:I}}function w(I,F,U){return F in I?Object.defineProperty(I,F,{value:U,enumerable:!0,configurable:!0,writable:!0}):I[F]=U,I}function S(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")}function T(I,F){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:I}function E(I,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);I.prototype=Object.create(F&&F.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(I,F):I.__proto__=F)}var b=function(I){E(F,I);function F(){return S(this,F),T(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return a(F,[{key:"format",value:function(P,_){P===N.blotName&&!_?this.replaceWith(h.default.create(this.statics.scope)):l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"format",this).call(this,P,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,_){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,_),this):(this.parent.unwrap(),l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replaceWith",this).call(this,P,_))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:l(F.__proto__||Object.getPrototypeOf(F),"formats",this).call(this,P)}}]),F}(v.default);b.blotName="list-item",b.tagName="LI";var N=function(I){E(F,I),a(F,null,[{key:"create",value:function(P){var _=P==="ordered"?"OL":"UL",A=l(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this,_);return(P==="checked"||P==="unchecked")&&A.setAttribute("data-checked",P==="checked"),A}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function F(U){S(this,F);var P=T(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,U)),_=function(k){if(k.target.parentNode===U){var x=P.statics.formats(U),O=h.default.find(k.target);x==="checked"?O.format("list","unchecked"):x==="unchecked"&&O.format("list","checked")}};return U.addEventListener("touchstart",_),U.addEventListener("mousedown",_),P}return a(F,[{key:"format",value:function(P,_){this.children.length>0&&this.children.tail.format(P,_)}},{key:"formats",value:function(){return w({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,_){if(P instanceof b)l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertBefore",this).call(this,P,_);else{var A=_==null?this.length():_.offset(this),k=this.split(A);k.parent.insertBefore(P,k)}}},{key:"optimize",value:function(P){l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,P);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var _=h.default.create(this.statics.defaultChild);P.moveChildren(_),this.appendChild(_)}l(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"replace",this).call(this,P)}}]),F}(p.default);N.blotName="list",N.scope=h.default.Scope.BLOCK_BLOT,N.tagName=["OL","UL"],N.defaultChild="list-item",N.allowedChildren=[b],n.ListItem=b,n.default=N},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(56),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="italic",g.tagName=["EM","I"],n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(S,T){for(var E=0;E<T.length;E++){var b=T[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}return function(S,T,E){return T&&w(S.prototype,T),E&&w(S,E),S}}(),l=function w(S,T,E){S===null&&(S=Function.prototype);var b=Object.getOwnPropertyDescriptor(S,T);if(b===void 0){var N=Object.getPrototypeOf(S);return N===null?void 0:w(N,T,E)}else{if("value"in b)return b.value;var I=b.get;return I===void 0?void 0:I.call(E)}},c=i(6),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function p(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var y=function(w){p(S,w);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,null,[{key:"create",value:function(E){return E==="super"?document.createElement("sup"):E==="sub"?document.createElement("sub"):l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,E)}},{key:"formats",value:function(E){if(E.tagName==="SUB")return"sub";if(E.tagName==="SUP")return"super"}}]),S}(h.default);y.blotName="script",y.tagName=["SUB","SUP"],n.default=y},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="strike",g.tagName="S",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(6),l=c(a);function c(p){return p&&p.__esModule?p:{default:p}}function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function v(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var g=function(p){v(y,p);function y(){return h(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(l.default);g.blotName="underline",g.tagName="U",n.default=g},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(E,b){for(var N=0;N<b.length;N++){var I=b[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,b,N){return b&&T(E.prototype,b),N&&T(E,N),E}}(),l=function T(E,b,N){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,b);if(I===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:T(F,b,N)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(N)}},c=i(0),h=v(c),d=i(27);function v(T){return T&&T.__esModule?T:{default:T}}function g(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function p(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function y(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var w=["alt","height","width"],S=function(T){y(E,T);function E(){return g(this,E),p(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(N,I){w.indexOf(N)>-1?I?this.domNode.setAttribute(N,I):this.domNode.removeAttribute(N):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,N,I)}}],[{key:"create",value:function(N){var I=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,N);return typeof N=="string"&&I.setAttribute("src",this.sanitize(N)),I}},{key:"formats",value:function(N){return w.reduce(function(I,F){return N.hasAttribute(F)&&(I[F]=N.getAttribute(F)),I},{})}},{key:"match",value:function(N){return/\.(jpe?g|gif|png)$/.test(N)||/^data:image\/.+;base64/.test(N)}},{key:"sanitize",value:function(N){return(0,d.sanitize)(N,["http","https","data"])?N:"//:0"}},{key:"value",value:function(N){return N.getAttribute("src")}}]),E}(h.default.Embed);S.blotName="image",S.tagName="IMG",n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function T(E,b){for(var N=0;N<b.length;N++){var I=b[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,b,N){return b&&T(E.prototype,b),N&&T(E,N),E}}(),l=function T(E,b,N){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,b);if(I===void 0){var F=Object.getPrototypeOf(E);return F===null?void 0:T(F,b,N)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(N)}},c=i(4),h=i(27),d=v(h);function v(T){return T&&T.__esModule?T:{default:T}}function g(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function p(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function y(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var w=["height","width"],S=function(T){y(E,T);function E(){return g(this,E),p(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"format",value:function(N,I){w.indexOf(N)>-1?I?this.domNode.setAttribute(N,I):this.domNode.removeAttribute(N):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,N,I)}}],[{key:"create",value:function(N){var I=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,N);return I.setAttribute("frameborder","0"),I.setAttribute("allowfullscreen",!0),I.setAttribute("src",this.sanitize(N)),I}},{key:"formats",value:function(N){return w.reduce(function(I,F){return N.hasAttribute(F)&&(I[F]=N.getAttribute(F)),I},{})}},{key:"sanitize",value:function(N){return d.default.sanitize(N)}},{key:"value",value:function(N){return N.getAttribute("src")}}]),E}(c.BlockEmbed);S.blotName="video",S.className="ql-video",S.tagName="IFRAME",n.default=S},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function N(I,F){for(var U=0;U<F.length;U++){var P=F[U];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,F,U){return F&&N(I.prototype,F),U&&N(I,U),I}}(),l=function N(I,F,U){I===null&&(I=Function.prototype);var P=Object.getOwnPropertyDescriptor(I,F);if(P===void 0){var _=Object.getPrototypeOf(I);return _===null?void 0:N(_,F,U)}else{if("value"in P)return P.value;var A=P.get;return A===void 0?void 0:A.call(U)}},c=i(35),h=y(c),d=i(5),v=y(d),g=i(9),p=y(g);function y(N){return N&&N.__esModule?N:{default:N}}function w(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}function S(N,I){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:N}function T(N,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);N.prototype=Object.create(I&&I.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(N,I):N.__proto__=I)}var E=function(N){T(I,N);function I(){return w(this,I),S(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return a(I,null,[{key:"create",value:function(U){var P=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,U);return typeof U=="string"&&(window.katex.render(U,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",U)),P}},{key:"value",value:function(U){return U.getAttribute("data-value")}}]),I}(h.default);E.blotName="formula",E.className="ql-formula",E.tagName="SPAN";var b=function(N){T(I,N),a(I,null,[{key:"register",value:function(){v.default.register(E,!0)}}]);function I(){w(this,I);var F=S(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return F}return I}(p.default);n.FormulaBlot=E,n.default=b},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function U(P,_){for(var A=0;A<_.length;A++){var k=_[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}return function(P,_,A){return _&&U(P.prototype,_),A&&U(P,A),P}}(),l=function U(P,_,A){P===null&&(P=Function.prototype);var k=Object.getOwnPropertyDescriptor(P,_);if(k===void 0){var x=Object.getPrototypeOf(P);return x===null?void 0:U(x,_,A)}else{if("value"in k)return k.value;var O=k.get;return O===void 0?void 0:O.call(A)}},c=i(0),h=S(c),d=i(5),v=S(d),g=i(9),p=S(g),y=i(13),w=S(y);function S(U){return U&&U.__esModule?U:{default:U}}function T(U,P){if(!(U instanceof P))throw new TypeError("Cannot call a class as a function")}function E(U,P){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:U}function b(U,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(U,P):U.__proto__=P)}var N=function(U){b(P,U);function P(){return T(this,P),E(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return a(P,[{key:"replaceWith",value:function(A){this.domNode.textContent=this.domNode.textContent,this.attach(),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,A)}},{key:"highlight",value:function(A){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=A(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),P}(w.default);N.className="ql-syntax";var I=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),F=function(U){b(P,U),a(P,null,[{key:"register",value:function(){v.default.register(I,!0),v.default.register(N,!0)}}]);function P(_,A){T(this,P);var k=E(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,_,A));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var x=null;return k.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(x),x=setTimeout(function(){k.highlight(),x=null},k.options.interval)}),k.highlight(),k}return a(P,[{key:"highlight",value:function(){var A=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(N).forEach(function(x){x.highlight(A.options.highlight)}),this.quill.update(v.default.sources.SILENT),k!=null&&this.quill.setSelection(k,v.default.sources.SILENT)}}}]),P}(p.default);F.DEFAULTS={highlight:function(){return window.hljs==null?null:function(U){var P=window.hljs.highlightAuto(U);return P.value}}(),interval:1e3},n.CodeBlock=N,n.CodeToken=I,n.default=F},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function P(_,A,k){_===null&&(_=Function.prototype);var x=Object.getOwnPropertyDescriptor(_,A);if(x===void 0){var O=Object.getPrototypeOf(_);return O===null?void 0:P(O,A,k)}else{if("value"in x)return x.value;var D=x.get;return D===void 0?void 0:D.call(k)}},l=function(){function P(_,A){for(var k=0;k<A.length;k++){var x=A[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(_,x.key,x)}}return function(_,A,k){return A&&P(_.prototype,A),k&&P(_,k),_}}(),c=i(3),h=T(c),d=i(8),v=T(d),g=i(43),p=T(g),y=i(15),w=i(41),S=T(w);function T(P){return P&&P.__esModule?P:{default:P}}function E(P,_){if(!(P instanceof _))throw new TypeError("Cannot call a class as a function")}function b(P,_){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:P}function N(P,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);P.prototype=Object.create(_&&_.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(P,_):P.__proto__=_)}var I=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],F=function(P){N(_,P);function _(A,k){E(this,_),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=I);var x=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return x.quill.container.classList.add("ql-bubble"),x}return l(_,[{key:"extendToolbar",value:function(k){this.tooltip=new U(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),S.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),S.default)}}]),_}(p.default);F.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var U=function(P){N(_,P);function _(A,k){E(this,_);var x=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));return x.quill.on(v.default.events.EDITOR_CHANGE,function(O,D,$,J){if(O===v.default.events.SELECTION_CHANGE)if(D!=null&&D.length>0&&J===v.default.sources.USER){x.show(),x.root.style.left="0px",x.root.style.width="",x.root.style.width=x.root.offsetWidth+"px";var se=x.quill.getLines(D.index,D.length);if(se.length===1)x.position(x.quill.getBounds(D));else{var Z=se[se.length-1],re=x.quill.getIndex(Z),G=Math.min(Z.length()-1,D.index+D.length-re),W=x.quill.getBounds(new y.Range(re,G));x.position(W)}}else document.activeElement!==x.textbox&&x.quill.hasFocus()&&x.hide()}),x}return l(_,[{key:"listen",value:function(){var k=this;a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var x=k.quill.getSelection();x!=null&&k.position(k.quill.getBounds(x))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var x=a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,k),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",x===0)return x;O.style.marginLeft=-1*x-O.offsetWidth/2+"px"}}]),_}(g.BaseTooltip);U.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=U,n.default=F},function(t,n,i){t.exports=i(63)}]).default})}(Mc)),Mc.exports}var _r,a1;function dM(){if(a1)return _r;a1=1;var r=_r&&_r.__extends||function(){var v=function(g,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var S in w)w.hasOwnProperty(S)&&(y[S]=w[S])},v(g,p)};return function(g,p){v(g,p);function y(){this.constructor=g}g.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e=_r&&_r.__assign||function(){return e=Object.assign||function(v){for(var g,p=1,y=arguments.length;p<y;p++){g=arguments[p];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(v[w]=g[w])}return v},e.apply(this,arguments)},t=_r&&_r.__spreadArrays||function(){for(var v=0,g=0,p=arguments.length;g<p;g++)v+=arguments[g].length;for(var y=Array(v),w=0,g=0;g<p;g++)for(var S=arguments[g],T=0,E=S.length;T<E;T++,w++)y[w]=S[T];return y},n=_r&&_r.__importDefault||function(v){return v&&v.__esModule?v:{default:v}},i=n(ah()),a=n(m1()),l=n(cM()),c=n(fM()),h=function(v){r(g,v);function g(p){var y=v.call(this,p)||this;y.dirtyProps=["modules","formats","bounds","theme","children"],y.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],y.state={generation:0},y.selection=null,y.onEditorChange=function(S,T,E,b){var N,I,F,U;S==="text-change"?(I=(N=y).onEditorChangeText)===null||I===void 0||I.call(N,y.editor.root.innerHTML,T,b,y.unprivilegedEditor):S==="selection-change"&&((U=(F=y).onEditorChangeSelection)===null||U===void 0||U.call(F,T,b,y.unprivilegedEditor))};var w=y.isControlled()?p.value:p.defaultValue;return y.value=w??"",y}return g.prototype.validateProps=function(p){var y;if(i.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(p.children)){var w=i.default.Children.only(p.children);if(((y=w)===null||y===void 0?void 0:y.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(p,y){var w=this,S;if(this.validateProps(p),!this.editor||this.state.generation!==y.generation)return!0;if("value"in p){var T=this.getEditorContents(),E=(S=p.value,S??"");this.isEqualValue(E,T)||this.setEditorContents(this.editor,E)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),t(this.cleanProps,this.dirtyProps).some(function(b){return!l.default(p[b],w.props[b])})},g.prototype.shouldComponentRegenerate=function(p){var y=this;return this.dirtyProps.some(function(w){return!l.default(p[w],y.props[w])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(p,y){var w=this;if(this.editor&&this.shouldComponentRegenerate(p)){var S=this.editor.getContents(),T=this.editor.getSelection();this.regenerationSnapshot={delta:S,selection:T},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==y.generation){var E=this.regenerationSnapshot,S=E.delta,b=E.selection;delete this.regenerationSnapshot,this.instantiateEditor();var N=this.editor;N.setContents(S),d(function(){return w.setEditorSelection(N,b)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(p,y){var w=new c.default(p,y);return y.tabIndex!=null&&this.setEditorTabIndex(w,y.tabIndex),this.hookEditor(w),w},g.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(p){return p&&p.ops},g.prototype.isEqualValue=function(p,y){return this.isDelta(p)&&this.isDelta(y)?l.default(p.ops,y.ops):l.default(p,y)},g.prototype.setEditorContents=function(p,y){var w=this;this.value=y;var S=this.getEditorSelection();typeof y=="string"?p.setContents(p.clipboard.convert(y)):p.setContents(y),d(function(){return w.setEditorSelection(p,S)})},g.prototype.setEditorSelection=function(p,y){if(this.selection=y,y){var w=p.getLength();y.index=Math.max(0,Math.min(y.index,w-1)),y.length=Math.max(0,Math.min(y.length,w-1-y.index)),p.setSelection(y)}},g.prototype.setEditorTabIndex=function(p,y){var w,S;!((S=(w=p)===null||w===void 0?void 0:w.scroll)===null||S===void 0)&&S.domNode&&(p.scroll.domNode.tabIndex=y)},g.prototype.setEditorReadOnly=function(p,y){y?p.disable():p.enable()},g.prototype.makeUnprivilegedEditor=function(p){var y=p;return{getHTML:function(){return y.root.innerHTML},getLength:y.getLength.bind(y),getText:y.getText.bind(y),getContents:y.getContents.bind(y),getSelection:y.getSelection.bind(y),getBounds:y.getBounds.bind(y)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=a.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},g.prototype.renderEditingArea=function(){var p=this,y=this.props,w=y.children,S=y.preserveWhitespace,T=this.state.generation,E={key:T,ref:function(b){p.editingArea=b}};return i.default.Children.count(w)?i.default.cloneElement(i.default.Children.only(w),E):S?i.default.createElement("pre",e({},E)):i.default.createElement("div",e({},E))},g.prototype.render=function(){var p;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(p,y,w,S){var T,E;if(this.editor){var b=this.isDelta(this.value)?S.getContents():S.getHTML();b!==this.getEditorContents()&&(this.lastDeltaChangeSet=y,this.value=b,(E=(T=this.props).onChange)===null||E===void 0||E.call(T,p,y,w,S))}},g.prototype.onEditorChangeSelection=function(p,y,w){var S,T,E,b,N,I;if(this.editor){var F=this.getEditorSelection(),U=!F&&p,P=F&&!p;l.default(p,F)||(this.selection=p,(T=(S=this.props).onChangeSelection)===null||T===void 0||T.call(S,p,y,w),U?(b=(E=this.props).onFocus)===null||b===void 0||b.call(E,p,y,w):P&&((I=(N=this.props).onBlur)===null||I===void 0||I.call(N,F,y,w)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=c.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(i.default.Component);function d(v){Promise.resolve().then(v)}return _r=h,_r}var pM=dM();const mM=p1(pM);class gM extends jl{constructor(e){super(e),this.quillRef=lh.createRef()}getFormHtml(){return R.jsx("div",{children:R.jsx(mM,{ref:this.quillRef,modules:{toolbar:[["bold","italic","underline","blockquote"],[{color:["#F4F5F8","#E6FFFD","#99AFD1","#ecd23a","#fd5259","#D7ABF7","#9EFFA0","#F4F5F888","#E6FFFD77","#99AFD188","#ecd23a88","#fd525988","#D7ABF788","#9EFFA088","#000000","#E6FFFD44","#99AFD155","#ecd23a55","#fd525955","#D7ABF755","#9EFFA055"]},{background:[!1,"black","#00274D","#C1A71B","#5F0C0C","#4B0082","#002E07"]}],[,"code-block"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[],["clean"]]},style:this.props.wrapperStyle?{...this.props.wrapperStyle}:{minHeight:"100%",padding:"8px",minWidth:"99%",width:"100%"},theme:"snow",value:this.obj[0].getJson()[this.props.name],onChange:this.objDispatch})})}}class jC extends ro{constructor(e){super(e)}createFileInfo(e){const t=new Date,n=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");let l="images/"+`${Math.floor(Math.random()*9999)}-${n+i}`+e.target.files[0].name;return this.fileInfo={selectedFile:e.target.files[0],path:l,pic:URL.createObjectURL(e.target.files[0])},this.setState({...this.fileInfo}),this.fileInfo}async prepareOnChange(){let e=await this.operationsFactory.prepare({prepare:{...this.props.prepareOnChange},clean:!0});e=e[0],this.obj=e}async changeHandler(e){var n;await this.createFileInfo(e),this.props.prepareOnChange&&await this.prepareOnChange(),this.props.callBackFunc&&await this.props.callBackFunc(this.obj,this.fileInfo);let t;if(await this.APIService.uploadPics(this.fileInfo.selectedFile,this.fileInfo.path),!this.obj.getPicSrc){if(t=await this.APIService.downloadPics(this.fileInfo.path),!this.props.skipUpdate&&!this.state.skipUpdate)if((n=this.obj)!=null&&n.length)for(let i of this.obj)await i.setCompState({[this.props.uploadAttribute||"picURL"]:t});else await this.obj.setCompState({[this.props.uploadAttribute||"picURL"]:t});this.props.downloadPicsCallBackFunc&&this.props.downloadPicsCallBackFunc(this.obj,this.fileInfo)}return this.props.runOnChange&&this.onSubmit(),t}async onSubmit(){this.props.prepareOnChange&&await this.operationsFactory.addToComponentList(),await this.obj.update(),this.props.finishCallBackFunc&&this.props.finishCallBackFunc(this.obj),this.dispatch({imgUploaded:this.obj})}additionalSetup(){this.wrapper.setStyle({maxWidth:"300px",maxHeight:"30px",width:"fit-content"}),this.label.setStyle({display:"inline-block",height:"35px",maxWidth:"fit-content",cursor:"pointer",position:"relative"}),this.form.updateProps({accept:"image/png, image/gif, image/jpeg, image/jpg, image/webp, image/svg+xml, application/pdf",style:{position:"absolute",top:0,left:0,cursor:"pointer",width:"100%",height:"100%",opacity:0},size:"6",type:"file",name:"file",onChange:this.changeHandler})}getInnerContent(){let e=this.getFormHtml();return this.innerContent=[this.label.getHtml({content:e,type:"label"}),this.props.errorText&&this.error.getHtml()],this.innerContent}getFormHtml(){return this.content=this.props.content||R.jsx(R.Fragment,{children:"Upload"}),R.jsxs("div",{className:this.props.containerStyle||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]})}}class yM extends jC{constructor(e){super(e)}getFormHtml(){var t,n;this.content=this.props.content||R.jsx(R.Fragment,{children:"Upload"});let e=(n=(t=this.obj)==null?void 0:t[0])==null?void 0:n.getJson()[this.props.uploadImgAttribute||"picURL"];return R.jsxs(R.Fragment,{children:[R.jsxs("div",{style:this.props.containerStyle,className:this.props.containerClass||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]}),(this.state.pic||e)&&R.jsx("img",{style:this.props.uploadedImgStyle,className:this.props.uploadedImgClass||"uploadedImg",src:this.state.pic||e})]})}}let vM=class extends ro{constructor(e){super(e),this.state.formClass="FCDefaultDelButton",this.content="Delete"}buttonClickFunc(){this.props.obj.del()}};class _M extends IC{constructor(){super(...arguments);ae(this,"factory",{input:jl,textarea:jl,math:KD,addButton:HD,baseButton:ro,popupButton:GD,updateButton:JD,runButton:QD,quill:gM,upload:jC,showUpload:yM,del:vM})}}class fy extends Xe{constructor(){super();ae(this,"addToProps",{});ae(this,"addToInitialSetup",[]);ae(this,"getterFunc");this.state={}}getProps(){return{interface:this.interface,app:this.app,theme:this.props.theme,type:this.props.type,...this.props,...this.addToProps}}setComponentList(){var t;this.componentList=(t=this.interface)==null?void 0:t.getComponentList()}setProps(){}getHtml(){this.setProps();let t=this.getProps();return this.setGetterFunc(this.props.getterFunc),this.getterFunc&&(this.html=this.getterFunc({...t},t.type||this.state.type)),R.jsx(R.Fragment,{children:this.html})}setGetterFunc(t){this.getterFunc=t||this.interface.getMainFunc()||this.getterFunc}addToFactory(){if(this.props.addToFactory){let t=this.interface.getFactory();for(let n of this.props.addToFactory)t.registerComponent(n.type,n.comp)}}preSetup(){this.componentPreSetup(),this.initialSetupFunctions=[...this.initialSetupFunctions,this.setComponentList,this.addToFactory,...this.addToInitialSetup]}componentPreSetup(){}}class MC extends ya{constructor(){super(...arguments);ae(this,"mainFunc",this.getFormComponent)}getFactory(){return this.factory===void 0&&(this.factory=new _M),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new zD),this.themeFactory}getFormComponent(t,n){return n=n||"input",this.factory.getComponent(n,t)}}const FC=new MC;class pt extends fy{constructor(e){super(e),this.state={type:"input"},this.interface=FC}}class zn extends pt{constructor(e){super(e),this.state={type:"popupButton"}}}class Xl extends pt{constructor(e){super(e),this.state={type:"updateButton"}}}class gs extends pt{constructor(e){super(e),this.state={type:"runButton"}}}class wM extends pt{constructor(e){super(e),this.state={type:e.uploadType||"upload"}}}class _a extends pt{constructor(e){super(e),this.state={type:e.uploadType||"del"}}}class Tn extends Xe{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setCell,this.getUseId],this.state={...this.state,defaultTheme:"defaultColumn",interface:"map",wrapperClass:"MCCell",linkClass:"MCLink"},this.setItemPropsRan=!1}setCell(){this.cell=this.props.cell}preSetup(){this.setComponents(["link","wrapper","item","option"])}setitemprops(){let e={...this.createPropObj("item","cell"),className:this.cell.class||this.theme[this.state.classKey],style:this.cell.style};this.cell.itemClick&&(e.checkItemClick=!0),this.setItemPropsRan?this.item.setProps(e):(this.builderObserver.subscribe(e),this.setItemPropsRan=!0)}setwrapperprops(){let e={...this.createPropObj("wrapper","cell")};this.setWrapperPropsRan?this.wrapper.setProps(e):(this.builderObserver.subscribe(e),this.setWrapperPropsRan=!0)}getOption(){return R.jsx(R.Fragment,{})}getUseId(){return this.cell&&this.obj.getJson&&(this.useId=this.cell.useId===!1?"":this.cell.useId===void 0?this.obj.getJson()._id:this.obj.getJson()[this.cell.useId]),this.useId}getInnerContent(){return this.innerContent=[this.item.getHtml({type:this.state.itemType||"span",content:this.getOption()})],this.innerContent}getLinkUrl(){var t,n,i;return(t=this.cell)!=null&&t.to?this.cell.to:`/${(i=(n=this.obj)==null?void 0:n.getJson())==null?void 0:i.type}/${this.useId}`}getLinkFunc(){if(this.cell.forceUpdate){let e=()=>{this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}if(this.cell.linkClick){let e=()=>{this.cell.linkClick(this.obj),this.cell.forceUpdate&&this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}}getHtml(){var t;this.mapInnerContent(),this.getLinkFunc(),this.cell.type;let e=(t=this.cell)!=null&&t.hasLink?this.link.getHtml({type:this.state.linkType||"link",content:this.innerContent,props:{to:this.getLinkUrl()}}):this.wrapper.getHtml({type:this.state.wrapperType||"span",content:this.innerContent});return this.html=R.jsx(R.Fragment,{children:e}),this.html}}class dy extends Tn{constructor(e){super(e),this.state.classKey="MCDelItem",this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setDel]}setDel(){this.cell.itemClick=this.del}del(){let e=this.props.app;this.cell.popop?e.dispatch({popupSwitch:"del",delComponent:this.obj}):this.obj.del()}getOption(){return R.jsx("div",{children:"X"})}}class py extends Tn{constructor(e){super(e),this.state.classKey="MCEditItem",this.state.itemClick=this.edit}edit(){this.props.app.dispatch({popupSwitch:"edit",currentPopupComponent:this.obj})}getOption(){return"edit"}}class zh extends Tn{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getName(){let e=this.cell;this.name=e.name,this.name||(this.name=e)}getOption(){return this.getName(),this.obj.getJson()[this.name]}}class EM extends zh{constructor(e){super(e),this.state.classKey="MCTextItem"}getOption(){return R.jsx(R.Fragment,{children:this.cell.name})}}class TM extends Tn{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){let e=this.cell.custom;return R.jsx(e,{...this.props,masterCell:this})}}class VC extends Tn{constructor(e){super(e),this.state.defaultClassName="MCImgItem",this.state.itemType="img"}getPicSrc(){var e,t;return this.obj.getJson&&(this.src=(t=this.obj)==null?void 0:t.getJson()[((e=this.state.cell)==null?void 0:e.src)||"picURL"]),this.cell.imgSrc&&(this.src=this.cell.imgSrc),this.src}additionalPostSetup(){this.getPicSrc(),this.src&&this.item.addProps({src:this.src,alt:"picture goes here"})}}class SM extends Tn{constructor(e){super(e)}getOption(){({...this.cell,...this.props})}}class UC extends Tn{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setList,this.setFactory],this.state={...this.state,mapContainerClass:"MCMapContainer",interface:"map",mapSectionClass:"MCMapSection"},this.defaultTypes=["del","edit","img"]}setFactory(){this.factory=this.interface.getFactory()}getDefaultTypes(){return this.defaultTypes}checkCellForDefaults(e){let t=this.getDefaultTypes();return t[t.indexOf(e)]}textOrAttribute(e,t){return e.getJson&&(e!=null&&e.getJson()[t])?"attribute":"text"}getType(e,t){let n=e.type;return n||(n=this.checkCellForDefaults(e),n||(n=this.textOrAttribute(t,e))),n}getProps(e,t){return{obj:t,...this.props,interface:this.interface,cell:e,theme:this.props.theme}}getCellList(e){let t=this.props.cells;return R.jsx(R.Fragment,{children:t.map((n,i)=>{let a=this.getType(n,e),l=this.getProps(n,e);return R.jsx(R.Fragment,{children:this.factory.getComponent(a,l)})})})}getListHtml(){return R.jsx(R.Fragment,{children:this.list.map(e=>R.jsx(R.Fragment,{children:this.mapSection.getHtml({type:"div",content:this.getCellList(e)})}))})}setList(){this.list=this.props.list}preSetup(){this.setComponents(["mapContainer","mapSection","link"])}getHtml(){let e=this.mapContainer.getHtml({type:"div",content:this.getListHtml()});return this.html=R.jsx(R.Fragment,{children:e}),this.html}}class l1 extends dy{constructor(e){super(e),this.state.classKey="MCCustomDelItem"}getOption(){return R.jsx(this.cell.custom,{...this.props,masterCell:this})}}class CM extends dy{constructor(e){super(e),this.state.classKey="MCDelItem"}getOption(){return this.props.delText||"delete"}}const IM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDgiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0OCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0OCIKICAgdGlmZjpJbWFnZVdpZHRoPSI0OCIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDktMDhUMTQ6NDQ6MzYtMDY6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgeG1wTU06YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgeG1wTU06c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgeG1wTU06d2hlbj0iMjAyMy0wOC0wNFQxMDoyNTozOC0wNjowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+zw4Y8wAAAYFpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/ZshgRJmFhcUkZGE0KLGxmMmvwmJmlF+bmee9GTUzXu89SbbKVlFi49eCv4CtslaKSMmWNbFhes7z1Ejm3M49n/u995zuPRc8iaySM8vDkMtbRmw4EpyanglWPlGFjwDthJOKqY/HhxKUtPdbypx4HXJqlT73r9XMq6YCZT7hAUU3LOER4bFlS3d4SzigZJLzwifCHYZcUPjG0VMuPzucdvnTYSMRi4KnXjiY/sWpX6xkjJywvJyWXHZJ+bmP8xK/mp+MS2wWb8IkxjARgowySJReuuiXuZcQ3XTKihL54e/8CRYlV5FZZwWDBdJksOgQdUmqqxI10VUZWVac/v/tq6n1dLvV/RGoeLTt11ao3ITChm1/HNh24RC8D3CeL+Yv7kPfm+gbRa1lD+rW4PSiqKW24WwdGu/1pJH8lrziHk2Dl2OonYaGK6iedXv2s8/RHSRW5asuYWcX2uR83dwXqRtoBLx59Y4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAU5SURBVGiB1ZpfbFNVHMc/bW/H7d3WGujaMeqy8ECMEcgiICDDOI0hEpco8iDECMHEByBRSAwvxCgJ0ZhIzEBjAma8QEyEBwUejEyibg/GYcKYYRCIQEHaVZa2621v/10f7m1pu/5d/9B9k5vc3nvOuZ9v77nn3+8YqIFsdpcIPA88CzhyDgBvzjEGjPh97ki1zzbMNaPN7rIBLwH9aPBihUVEgBHgIjDs97n9c+Go2IDN7rIAO4B3AWkuD82jEHACGPL73OFKMpZtwGZ3mYA3gT2AvSK88jUFHAXO+H3uRDkZyjJgs7s6gUHgmbmzVaSrwB6/z+0pldBUKoHN7loBDAE9VWMVkNEI/WstrZtfbG1f+qTZ/J8/sWgmpL4qStYxRQ4UNVH0DdjsrgHgENBSS+BMdTkF4ehH9q6VT7Wkvyc5oiYPfzX94PS5GR9w0O9z/1Aof8E3oMN/VixNtVriFITTRxzdy3rMWS2YWTAY+tdZ2uWwql6eUPpEyXpXkQOT+crIC6dXm8FC92uhJU5BOHXE0e3qFAq+3b5VYpscVuOXJ5TnRMk6mq86zQLUP9ghoL2mxDn6/MCizt6nF2Q1w6oKhpxK3bdKbPM9TCTHr0fXipL1giIHQpn3swzoTeW31PGDTem3PyOhvtWi1LHQZE5dMxg0E6nzlNb1iq0/DsuJwEyyV5SsZxU5oKbuGXPK3UKDmkp/MJncvs97d+JGNKvjyn0DABbRYHx5vaUVWA68kXkvbUDvYffWhRbocQnmbQNttsxrgRnNxPj10iYcdpOgn+7VWYHsN7CDOvWwPS7BfOoLZ/eh9xcu3rW1/YnMe8FQMvn2fu/dK9eicrEyJm/GFP20A3gndd0E6YHZl4B5dtbqlIJ32rW63rfa0haSk/G//o6mR6LRmKqevyQH1/UusHR2CLMYJm5Ew58cm/aq6ZrPclGyfqfIAcUEIErWzcCmesOnVNhEOLh25QLLYscjE+4H8ejOA1PuQDCZzCiiBbilyIFrKQO7gaWNgC9mIhZT1XOX5OCaFaLY5RRa3A/i0bc+8N6574nH85WhyIELJn0y8jEg5EtUD/iiJuKo5y/JwS6HIOz/9OG/heCBLlGynjSJkvUFYKDe8L/+EQke/nra+8oGqV0wPWpn8pmIx+Gn38MzwVBWtcmVAIybRMm6FeitN/x7B6fu37gdi169Hgtv2ljaRJnymETJ+jqwrN7w0ZjWhty+F49N3opFXutvzeoT+lZb2nzTidj4ZFShfN0z8mjiXXd4gBazwbB9ILsvAPD4ErHRy5GifUEeOao2UCn8N4c6ujauEbMGih5fIrZtn+fOP+54rMLHV2fgMcODbmBOagJ4QBsLeecrPOCt2EATwUOlBpoMHiox0ITwoBsYm6fwAGNGtAXWgl14E8NHgFGjvsQ9Ms/gQV+eT/UDw/MMHrRl+fSc+CLaEndaTQ4fQv/TjQB6cOFEZoomhgc4ngqIZA4lhtDW5/OqieCngJOpH2kDemTkaKFcTQIPMJgZxckdzJ1BCy4U1GOGHwfOZl6YtQZms7ucwPc3h7s3lFtqg+CngK25UZtZw2k9we5yS20QfJQCIae88wG/z32lnFIbBA9alCYv05wnNA385z8sFmIqGaXUozXHqF9otZCm0KpN0dpQMoSkyAGPKFkvAKuowQpGmRoHdvp97lulElYa6N6CFkOoZ6B7EDhb00B3pjK2GuwCWivNX0Ah4Dhwsm5bDXKlxxT60TZ8VLPZ42fgl4Zt9sgnfYV7PZVttxmtxXab/wFJap9Ow0di3gAAAABJRU5ErkJggg==";class bM extends py{constructor(e){super(e),this.state.classKey="MCEditImgItem",this.state.itemType="img"}additionalPostSetup(){this.getImg(),this.item.setProps({src:this.src})}getImg(){return this.src=this.cell.imgSrc||IM,this.src}}class AM extends py{constructor(e){super(e),this.state.classKey="MCCustomEditItem"}getOption(){return R.jsx(this.cell.custom,{...this.props,masterCell:this})}}let kM=class extends UC{constructor(e){super(e),this.mapContainer=lh.createRef(),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getPicObj,this.getAddComponentButton],this.state={...this.state,index:0,isDragging:void 0,defaultTheme:"interactiveMap"}}_addEventListeners(){var t;this.props;let e=[];for(let n of this.list){let i=document.getElementById(n.getJson()._id);i.addEventListener("mousedown",a=>{this.setState({isDragging:i})}),i.addEventListener("mouseup",a=>{this.setState({isDragging:void 0})}),e.push(i),this.setState({saveList:e})}(t=this.mapContainer)!=null&&t.current&&(this.mapContainer.current.addEventListener("mouseup",n=>{this.currentComp!==void 0&&this.currentComp.update(),this.setState({isDragging:void 0})}),this.mapContainer.current.addEventListener("mousemove",n=>{if(this.state.isDragging!==void 0){let i=this.state.isDragging,a=i.id,l=this.list.find(c=>c.getJson()._id===a);if((l==null?void 0:l.getJson().draggable)!==!1){const c=this.mapContainer.current.getBoundingClientRect(),h=n.pageX-c.left-25,d=n.pageY-c.top-25;l.setCompState({x:h,y:d}),this.currentComp=l,i.style.left=`${h}px`,i.style.top=`${d}px`}}}))}componentDidMount(){this._addEventListeners()}zoom(e){let t=this.mapContainer.current.getBoundingClientRect(),n=t.width*e,i=t.height*e;this.mapContainer.current.style.width=n+"px",this.mapContainer.current.style.height=i+"px";let a=this.state.saveList;for(let l of a){const c=l.style.left||"0",h=l.style.top||"0",d=c.match(/(-?\d*\.?\d+)/),v=h.match(/(-?\d*\.?\d+)/),g=d?parseFloat(d[0]):0,p=v?parseFloat(v[0]):0,y=g*e,w=p*e;l.style.left=y+"px",l.style.top=w+"px"}}componentDidUpdate(e,t){this.props.list.length!==e.list.length&&this._addEventListeners()}getAddComponentButton(){var e,t;if(this.addComponentButton=this.props.addComponentButton,this.addComponentButton!==void 0){let n=typeof this.addComponentButton=="string"?this.addComponentButton:this.addComponentButton.type||"addComponentButton",i=this.props.pinKey||((e=this.mapObj)==null?void 0:e.getJson().pinType)||"pin";this.addComponentButton=this.factory.getComponent(n,{...this.props,theme:this.props.theme||this.state.defaultTheme,mapId:this.mapObj?(t=this.mapObj)==null?void 0:t.getJson()._id:void 0,addType:i,addPinProps:this.props.addPinProps,pinAdded:this._addEventListeners})}}getPicObj(){var t;let e=this.props.imgAttribute||"picURL";this.mapObj&&(this.picSrc=(t=this.mapObj)==null?void 0:t.getJson()[e])}preSetup(){this.setComponents([])}async changePic(e){let t=this.props.list;e=e<0?e=t.length-1:e,e=e>=t.length?0:e,this.mapObj=t[e],await this.setState({index:e}),this._addEventListeners()}setList(){if(!this.listSet){let t=this.props.list[this.state.index];this.mapObj=t;let n=this.props.pinKey||(t==null?void 0:t.getJson().pinType)||"pin",i=this.props.pinAttribute||(t==null?void 0:t.getJson().type)+"Id"||"mapId",a=this.props.mapId||(t==null?void 0:t.getJson()._id);this.list=this.componentList.getList(n,a,i)}}preSetup(){this.setComponents(["mapContainer","right","left","image","zoomIn","zoomOut"])}getIndexAndChangeMap(e){let t=this.props.list.indexOf(this.mapObj)+e;this.changePic(t)}getListHtml(){let e=this.props,t=this.theme,n=this.factory;return R.jsx(R.Fragment,{children:this.list.map((i,a)=>{let l={obj:i,props:e,interface:this.interface,cell:e.pinCell,theme:this.props.them||this.state.defaultTheme,pinProps:this.props.pinProps};return R.jsx("div",{id:i.getJson()._id,className:e.mapSectionClass?e.mapSectionClass:t.MCMapSection,style:{...e.mapSectionStyle,left:i.getJson().x+"px",top:i.getJson().y+"px"},children:R.jsx(R.Fragment,{children:n.getComponent(e.pinType?e.pinType:"attribute",l)})},a)})})}getHtml(){if(this.props.list.length>0){let e=this.props,t=this.theme;return R.jsxs("div",{ref:this.mapContainer,className:e.mapContainerClass?e.mapContainerClass:t.MCMapContainer,style:{...e.mapContainerStyle},children:[R.jsx("img",{src:this.picSrc,className:e.mapClass?e.mapClass:t.MCMap,style:{...e.mapStyle}}),this.getListHtml(),e.addComponentButton&&R.jsx(R.Fragment,{children:this.addComponentButton}),R.jsx("div",{style:{position:"absolute",top:"0px",right:"0px"},onClick:()=>{this.zoom(.5)},children:"zoom out"}),R.jsx("div",{style:{position:"absolute",top:"20px",right:"0px"},onClick:()=>{this.zoom(2)},children:"zoom in"}),R.jsx("div",{style:{position:"absolute",top:"0px",left:"-20px"},onClick:()=>{this.getIndexAndChangeMap(-1)},children:"prev"}),R.jsx("div",{style:{position:"absolute",top:"20px",right:"-20px"},onClick:()=>{this.getIndexAndChangeMap(1)},children:"next"})]})}else this.list=[]}};class xM extends Tn{constructor(e){super(e)}preSetup(){this.setComponents([])}async createObjType(){let e=this.operationsFactory,t=this.props.addType;await e.prepare({prepare:{type:t,mapId:this.props.mapId,...this.props.addPinProps},clean:!0,run:!0}),this.props.pinAdded()}getHtml(){let e=this.props.text||"+ Add Item";return R.jsxs("div",{onClick:this.createObjType,style:this.props.style,className:this.props.class||this.theme.MCAddButton,children:[e," "]})}}class RM extends Tn{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getOption(){return this.state.obj}}class PM extends zh{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getItemClass(){var i;let e=this.cell,t=e.activeAttribute?e.activeAttribute:"_id";if(this.state.obj.getJson()[t]===((i=e.activeItem)==null?void 0:i.getJson()[t])){let a=e.activeClass?e.activeClass:this.theme.MCActiveItem;this.item.setClass(this.item.getClass()+" "+a)}}additionalPostSetup(){this.getItemClass()}}class OM extends VC{constructor(e){super(e),this.state.classKey="MCLogoItem"}}class NM extends Tn{constructor(e){super(e),this.state.itemType="div"}getList(){return this.list=this.props.cell.links.filter(e=>(e==null?void 0:e.name)!==void 0),this.list}getHome(){var e;if(!this.state.active){this.home=this.list.find(t=>t.path==="/");for(let t of this.list)t.active=(e=this.home)==null?void 0:e.name}}getOption(){let e=this.props.cell.links.filter(t=>(t==null?void 0:t.name)!==void 0&&t.display!==!1);return R.jsx(sn,{list:e,theme:this.cell.linksTheme||"links",mapSectionClass:this.props.cell.linkSectionClass||void 0,mapSectionStyle:this.props.cell.linkSectionStyle||void 0,cells:[{type:"linkItem",class:this.props.cell.linkItemClass||void 0,activeClass:this.props.cell.activeClass||void 0,style:this.props.cell.linkItemStyle||void 0,linkClick:t=>{for(let n of this.props.cell.links)n.active=t==null?void 0:t.name;this.setState({active:t==null?void 0:t.name})}}]})}additionalSetup(){this.getList(),this.getHome()}}class LM extends Tn{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setUpLinks],this.state.classKey="MCLinkItem",this.state.itemType="div"}setUpLinks(){this.cell.to=this.obj.path,this.useId="",this.cell.hasLink=!0}getActiveClass(){return this.activeClass=this.cell.activeClass||this.theme.MCActiveLink,this.activeClass}setActiveClass(){var n,i,a,l,c;const e=((n=this.obj)==null?void 0:n.path)==="/"||((i=this.obj)==null?void 0:i.path)==="/home",t=window.location.pathname;if(e){const h=t.split("/").filter(Boolean);if(h.length>0&&h[0]!=="home")return}if(((a=this.obj)==null?void 0:a.active)===((l=this.obj)==null?void 0:l.name)||t.includes((c=this.obj)==null?void 0:c.path)){let h=this.obj.name===""?"none":this.getActiveClass();h=h||"",this.item.setClass(this.item.getClass()+" "+h)}}additionalSetup(){this.setActiveClass()}getOption(){var e;return(e=this.props.obj)==null?void 0:e.name}}class DM extends Tn{constructor(e){super(e),this.state.classKey="MCTextItem"}additionalPostSetup(){this.item.setOnClick(this.cell.logoutFunc||this.APIService.logout)}getOption(){return"logout"}}class jM extends Tn{constructor(e){super(e),this.state.classKey="MCOrderedArrows",this.state.increment=1,this.state.decrement=-1}increasePosition(){this.obj.updateOrder(this.state.increment)}decreasePosition(){this.obj.updateOrder(this.state.decrement)}increaseArrowUI(){return this.increaseArrow=R.jsx("div",{className:"upward-arrow",onClick:this.decreasePosition}),this.increaseArrow}decreaseArrowUI(){return this.decreaseArrow=R.jsx("div",{style:{marginTop:"5px"},className:"downward-arrow",onClick:this.increasePosition}),this.decreaseArrow}getOption(){return this.increaseArrowUI(),this.decreaseArrowUI(),R.jsxs("div",{style:{marginTop:"-4px"},className:"fitCC",children:[this.increaseArrow,this.decreaseArrow]})}}class MM extends Tn{constructor(e){super(e),this.state.displayState=!1,this.state.itemType="div"}displayOption(){return R.jsx("div",{style:{position:"absolute",left:"0px",top:"0px"},className:this.state.displayState?"downward-arrow":"right-arrow",onClick:()=>{this.wrapper.setStyle({...this.wrapper.getStyle(),height:"200px"}),this.setState({displayState:!this.state.displayState})}})}mapOption(){return R.jsx(sn,{name:this.props.name,filter:{attribute:this.props.filter.attribute,search:this.obj.getJson()._id},cells:[...this.props.cells]})}additionalPostSetup(){this.item.setStyle({...this.item.getStyle(),position:"relative"})}getOption(){return R.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[this.displayOption(),"  ",this.state.displayState&&this.mapOption(),"  "]})}}class FM extends zh{constructor(){super(),this.state.classKey="MCBackgroundItem",this.state.wrapperClass="MCCellBackground",this.state.linkClass="MCBackgroundLink"}additionalPostSetup(){let t={width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",textAlign:"center",fontSize:"50px",background:`linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${this.cell.pirSRC||this.obj.getJson()[this.cell.picAttribute||"picURL"]}) no-repeat center center`,backgroundSize:"cover",textDecoration:"none"};this.wrapper.setStyle({...this.wrapper.getStyle(),...t}),this.link.setStyle({...this.wrapper.getStyle(),...t})}}class VM extends Tn{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){return this.cell.custom}}class UM extends IC{constructor(){super(...arguments);ae(this,"factory",{text:EM,attribute:zh,custom:TM,customBuilt:VM,img:VC,form:SM,del:dy,delIcon:l1,delCustom:l1,delText:CM,edit:py,editIcon:bM,editCustom:AM,interactiveMap:kM,addComponentButton:xM,plain:RM,select:PM,logo:OM,links:NM,linkItem:LM,logout:DM,default:sn,map:UC,order:jM,innerMap:MM,backgroundImage:FM})}}class my{constructor(){ae(this,"MCMapContainer","Map-Container");ae(this,"MCMapSection","Map-Section");ae(this,"MCLink","Map-Link");ae(this,"MCCell","Map-Cell");ae(this,"MCCustomDelItem","Map-Custom-Del-Item");ae(this,"MCDelItem","Map-Del-Item");ae(this,"MCDelImgItem","Map-Del-imgItem");ae(this,"MCCustomEditItem","Map-Custom-Edit-Item");ae(this,"MCEditImgItem","Map-Edit-imgItem");ae(this,"MCEditItem","Map-Edit-Item");ae(this,"MCAttributeItem","Map-Attribute-Item");ae(this,"MCImgItem","Map-imgItem");ae(this,"MCTextItem","Map-Text-Item");ae(this,"MCActiveItem","Map-Active-Item");ae(this,"MCCustom","");ae(this,"MCBackgroundItem","background-item");ae(this,"MCCellBackground","cell-background");ae(this,"MCBackgroundLink","cell-background");ae(this,"MCLogoItem","navLogo")}}class Hh extends my{constructor(){super(...arguments);ae(this,"MCSectionHover","DC-Map-Section:hover");ae(this,"MCCustomDelItem","DC-Custom-Del-Item");ae(this,"MCDelItem","DC-Del-Item");ae(this,"MCDelImgItem","DC-Del-imgItem");ae(this,"MCCustomEditItem","Map-Custom-Edit-Item");ae(this,"MCEditImgItem","DC-Edit-imgItem");ae(this,"MCEditItem","DC-Edit-Item")}}class $h extends Hh{constructor(){super(...arguments);ae(this,"MCMapContainer","DR-Map-Container");ae(this,"MCMapSection","DR-Map-Section")}}class BM extends $h{constructor(){super(...arguments);ae(this,"MCMapContainer","DRW-Map-Container")}}class qM extends $h{constructor(){super(...arguments);ae(this,"MCMapContainer","IM-Map-Container");ae(this,"MCMapSection","IM-Map-Section");ae(this,"MCMap","IM-Map");ae(this,"MCAddButton","IM-addButton");ae(this,"MCActiveItem","IM-Active-Item");ae(this,"MCCell","IM-Cell")}}class zM extends $h{constructor(){super(...arguments);ae(this,"MCActiveLink",this.MCActiveItem);ae(this,"MCLinkItem",this.MCLink);ae(this,"MCMapSection","SB-Map-Section")}}class HM extends Hh{constructor(){super(...arguments);ae(this,"MCActiveLink",this.MCActiveItem);ae(this,"MCLinkItem",this.MCLink);ae(this,"MCMapSection","SB-link");ae(this,"MCCell","SB-Cell-Link");ae(this,"MCLink","SB-Map-Link");ae(this,"MCLinkItem","SB-Map-Link")}}class $M extends Hh{constructor(){super(...arguments);ae(this,"MCActiveLink",this.MCActiveItem);ae(this,"MCLinkItem",this.MCLink)}}const WM=Object.freeze(Object.defineProperty({__proto__:null,DefaultColumn:Hh,DefaultRegistry:my,DefaultRow:$h,DefaultWrapRow:BM,InteractiveMap:qM,Links:HM,SideBar:zM,TopBar:$M},Symbol.toStringTag,{value:"Module"}));class KM extends ly{constructor(){super(WM),this.factory.default=my}}class GM{constructor(){ae(this,"factory",{text:Ml,tag:BC,plain:XM,textAndTag:YM,textAndTag2:QM,bool:eF,textAttributeList:ZM})}getFilter(e){if(e)return this.factory[e]}registerFilter(e,t){this.factory[e]=t}}function BC(r){let{list:e,attribute:t,tagList:n}=r;return e.length>0&&(e=e.filter(i=>!!n.find(l=>(t?l.getJson()[t]:l.getJson().connectedId)===i.getJson()._id))),e}function JM(r){let e=[];if(r.search&&r.list){const t=r.search.toLowerCase().split(" ").map(n=>n.trim());e=r.list.filter(n=>{const i=n.getJson()[r.attribute||"tags"];if(i){let a=i.split(r.splitStr||",");a=a.map(l=>l.toLowerCase());for(let l of t)if(a.includes(l))return!0}else return!1})}return e}function QM(r){let{list:e,attributes:t,search:n}=r,i=[],a=[],l=t.split(",");for(let h of l)a.push(Ml({...r,attribute:h}));let c=JM({...r});return i=[...a[0],...c,...a[1],...a[2]],i=gy(i),i}function YM(r){let{list:e,attribute:t,tagList:n,attribute2:i,attributeTag:a,search:l}=r,c=Ml({...r,attribute:t}),h=BC({...r,attribute:a}),d=Ml({...r,attribute:i});return e=[...c,...h,...d],gy(e)}function gy(r){const e=new Map;return r.forEach(t=>{const i=t.getJson()._id;e.has(i)||e.set(i,t)}),Array.from(e.values())}function Ml(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var a;return(a=i.getJson()[t])==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function XM(r){let{list:e,attribute:t,search:n}=r;return n&&n.length>0&&(e=e.filter(i=>{var a;return(a=i[t])==null?void 0:a.toLowerCase().includes(n==null?void 0:n.toLowerCase())})),e}function ZM(r){let{attributeList:e}=r,t=[];for(let n of e)t=[...t,...Ml({...r,attribute:n})];return t=gy(t),t}function eF(r){let{list:e,attribute:t,search:n}=r;return e=e.filter(i=>i.getJson()[t]===n),e}class qC extends ya{constructor(){super();ae(this,"FilterFactory");this.getFilterFactory(),this.mainFunc=this.getMapComponent}getFactory(){return this.factory===void 0&&(this.factory=new UM),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new KM),this.themeFactory}getFilterFactory(){return this.filterFactory===void 0&&(this.filterFactory=new GM),this.filterFactory}getMapComponent(t,n){return n=n||"default",this.factory.getComponent(n,t)}}class sn extends fy{constructor(e){super(e),this.state={type:"map"},this.interface=zC}setFilterInfo(){this.filterFacotry=this.interface.getFilterFactory(),this.filters=this.props.filters,this.filterFunc=this.props.filterFunc,this.filter=this.props.filter}getFilterFunc(){var e;if(!this.filterFunc&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filterFunc");t&&(this.filterFunc=t.func)}}getFilter(){var e;if(!this.filter&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(n=>n.type==="filter");t&&(this.filter={...t})}}getList(){var t,n,i,a;let e=this.props.name;this.list=this.props.list?this.props.list:this.filter?(i=this.componentList)==null?void 0:i.getList(e,(t=this.filter)==null?void 0:t.search,(n=this.filter)==null?void 0:n.attribute):(a=this.componentList)==null?void 0:a.getList(e)}filterListByFilterFunc(){this.list&&(this.list=this.list.filter(e=>this.filterFunc?this.filterFunc(e):!0))}filterListByFilterFactory(){if(this.filters)for(let e of this.filters){let t=this.filterFacotry.getFilter(e.type);t&&(this.list=t({list:this.list,...e}))}}setProps(){let e=this.props.cells;this.addToProps={cells:e,list:this.list}}componentPreSetup(){this.addToInitialSetup=[this.setFilterInfo,this.getFilterFunc,this.getFilter,this.getList,this.filterListByFilterFunc,this.filterListByFilterFactory]}}const zC=new qC;class HC extends Xe{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getNavLists],this.state={}}getLinks(){var e,t;return this.props.links?this.props.links:(t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes}getDefaultNavItem(e){return{logo:{imgSrc:this.props.logoURL,label:this.props.logoLabel,...this.props},links:{links:this.getLinks(),...this.props,class:"fit"},logout:{logoutFunc:this.props.logoutFunc,auth:this.props.auth,wrapperClass:"SB-logout",...this.props}}[e]}getList(){let e=this.props.navList,t=e.getList();for(let n=0;n<t.length;n++)if(t[n].default){let i=this.getDefaultNavItem(t[n].type);i.type=t[n].type,e.update(n,i)}return this.props.type==="topBar"&&(t=t.filter(n=>n.type!=="links")),t}getHtml(){return R.jsx(sn,{theme:this.props.mapTheme,list:this.mapList,cells:this.list,...this.props.navMapProps})}getNavLists(){this.list=this.props.list?this.props.list:this.getList(),this.mapList=this.props.mapList?this.props.mapList:[{}]}}class tF{constructor(){ae(this,"factory",{default:HC})}getComponent(e,t){let n;return this.factory[e]&&(n=this.factory[e]),R.jsx(n,{...t})}registerComponent(e,t){this.factory[e]=t}}class nF extends Xe{constructor(e){super(e),this.state={defaultStyle:"navMenu",renderComp:void 0}}async open(){let e=await this.props.open();this.props.type==="topBar"&&(this.state.renderComp?this.setState({renderComp:void 0}):this.setState({renderComp:e}))}render(){return this.props.app,R.jsxs("div",{children:[R.jsxs("div",{onClick:this.open,className:this.props.menuClass?this.props.menuClass:this.state.defaultStyle,children:[this.props.menuContent&&R.jsx(R.Fragment,{children:this.props.menuContent})," "]}),this.state.renderComp&&R.jsx(R.Fragment,{children:this.state.renderComp})]})}}class rF extends Yt{constructor(e){super(e),this.state={...this.state,defaultType:this.props.type?this.props.type:"sideBar",typeKey:"layout",defaultNavType:"default",phoneSize:850,left:-400}}getProps(){var e,t;return{mapTheme:this.props.mapTheme||this.state.defaultType,links:this.props.links||((t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes),...this.props}}getFactoryComponent(e){let t=this.props.mapType?this.props.mapType:this.state.defaultNavType;return this.props.factory.getComponent(t,e)}componentDidMount(){this.resize!==void 0&&(window.addEventListener("resize",this.resize),this.resize())}componentWillUnmount(){this.resize!==void 0&&window.removeEventListener("resize",this.resize)}resize(){if(window.innerWidth<850){this.setState({phone:!0,tablet:!1,defaultType:this.props.phoneLayout?this.props.phoneLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}if(window.innerWidth<1224){this.setState({phone:!1,tablet:!0,defaultType:this.props.tabletLayout?this.props.tabletLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}window.innerWidth>1224&&(this.state.phone&&this.setState({phone:!1,defaultType:this.state.ogType}),this.state.tablet&&this.setState({tablet:!1,defaultType:this.state.ogType}))}async setStyleOnMenuClick(e){const t=n=>new Promise(i=>setTimeout(i,n));this.card.setStyle({...this.card.getStyle(),left:e.toString()+"px"}),await this.setState({left:e}),await t(10)}async setNavOpenClose(){if(this.state.left===-400)for(let e=-400;e<600;e=e+15){if(e>0){this.setState({left:0});break}await this.setStyleOnMenuClick(e)}else for(let e=0;e>-450;e=e-15){if(e<-400){this.setState({left:-400});break}await this.setStyleOnMenuClick(e)}}async openCloseLinks(){var n,i;let e=R.jsx(sn,{list:this.props.links||((i=(n=this.props.app)==null?void 0:n.state)==null?void 0:i.routes),cells:[{type:"link"}]});return R.jsx(Yt,{content:e})}async openCloseNavFun(){return await{topBar:this.openCloseLinks,sideBar:this.setNavOpenClose}[this.state.defaultType]()}getMenu(){return this.props.menuComponent?R.jsx(this.props.menuComponent,{...this.props.menuComponentProps,open:this.openCloseNavFun,type:this.state.defaultType}):R.jsx(nF,{open:this.openCloseNavFun,type:this.state.defaultType,...this.props.menuComponentProps})}getContent(){let e=this.getProps(),t=this.getFactoryComponent(e);return this.content=R.jsxs(R.Fragment,{children:[t,this.props.type!=="type"&&(this.state.phone||window.innerWidth<this.state.phoneSize)&&R.jsx(R.Fragment,{children:this.getMenu()})]}),this.content}}class iF{constructor(){En.bind(this),this.list=[{type:"logo",picURL:void 0,label:void 0,default:!0},{type:"links",linkJson:void 0,default:!0},{type:"logout",logoutFunc:void 0,auth:void 0,default:!0}]}setList(e){this.list=e}getList(){return this.list}insert(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,0,t)}add(e,t){t?this.list.unshift(e):this.list.push(e)}addCustomJSX(e,t,n){let i={type:"custom",custom:e};t?this.insert(t,i):this.add(i,n)}update(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list[e]={...this.list[e],...t}}remove(e){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,1)}}class $C extends ya{constructor(){super();ae(this,"factory");ae(this,"navList");En.bind(this),this.getFactory(),this.getNavList(),this.mainFunc=this.getNav}getFactory(){return this.factory||(this.factory=new tF),this.factory}getNav(t){return R.jsx(rF,{factory:this.factory,navInterface:this,navList:this.navList,...t})}getNewNavList(){return new iF}setNavListForce(t){this.navList=t}getNavList(){return this.navList||(this.navList=this.getNewNavList()),this.navList}}const oh=new $C;class sF extends fy{constructor(e){super(e),this.interface=oh}}class oF{constructor(){ae(this,"factory",{})}getComponent(e){return this.factory[e]}registerComponent(e,t){this.factory[e]=t}}class aF extends oF{constructor(){super(...arguments);ae(this,"factory",{})}}class lF extends Xe{constructor(e){super(e),this.state={}}checkPopupSwitch(e){var t,n;return this.popupSwitch=this.props.popupSwitch||((n=(t=this.props.app)==null?void 0:t.state)==null?void 0:n.popupSwitch),this.popupSwitch!==""&&this.popupSwitch!==void 0&&(e=!0),e}checkType(e){var i,a,l,c,h;let t=this.props.currentPopupComponent||((a=(i=this.props.app)==null?void 0:i.state)==null?void 0:a.currentPopupComponent),n=(l=this.popupFactory.getComponent(this.popupSwitch))==null?void 0:l.componentType;return n&&(t=this.isArray(t),e=((h=(c=t[0])==null?void 0:c.getJson())==null?void 0:h.type)===n&&t.length>0),e}render(){var n;let e=this.checkPopupSwitch(!1);e&&(e=this.checkType(e)),this.popupFactory=this.props.factory||this.props.app.state.popupFactory;let t=(n=this.popupFactory)==null?void 0:n.getComponent(this.popupSwitch);return R.jsx(R.Fragment,{children:e&&(t==null?void 0:t.content)&&R.jsx(Yt,{content:R.jsx(t.content,{}),popup:!0,type:t.popupType||"biggerCard",theme:t.popupTheme||"Default",handleClose:()=>{if(t.handleClose)t.handleClose();else{let i=this.props.app.state.currentPopupComponent;i&&this.props.app.state.operationsFactory.removeFromList(i),this.props.app.dispatch({currentPopupComponent:void 0,popupSwitch:void 0})}}})})}}class uF extends ya{constructor(){super();ae(this,"factory");En.bind(this),this.getFactory()}getFactory(){return this.factory||(this.factory=new aF),this.factory}createPopupMachine(t){return R.jsx(lF,{app:(t==null?void 0:t.app)||this.getAppComponent(),factory:this.factory})}}let u1=new uF;class cF{constructor(){ae(this,"convertStringToLink",e=>e&&(!e.startsWith("http://")&&!e.startsWith("https://")?"https://"+e:e))}isLikelyUrl(e){return/\.(com|net|org|io|gov|edu|co)\b/.test(e)||/^(?:f|ht)tps?\:\/\//.test(e)||/^mailto\:/i.test(e)}checkURLforString(e){return window.location.href.includes(e)}getIdFromURL(e,t){let i=window.location.href.split("/"),a=i[i.length-1],l=e?a.split("-"):[a];return t?l[t]:l[0]}getTypeFromURL(){let t=window.location.href.split("/");return t[t.length-2]}}let Jm=new cF;class WC extends Xe{constructor(t,n){super(t);ae(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:!0},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getList(t,n,i),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}async componentDidMount(){this.getComponentsFromBackend();let t=this;window.addEventListener("popstate",function(n){t.onBackClick(n)})}onBackClick(t){this.getComponentsFromBackend()}componentDidUpdate(){this.getComponentsAgain()}async getComponentsAgain(t,n){this.getFromURL(),(this.app.state.urlChange||this.state.reRender&&this.urlId!==this.state.urlId)&&(await this.setState({urlId:this.urlId}),await this.dispatch({urlChange:void 0}),this.forceRerender=!1,this.getComponentsFromBackend())}async getFromURL(){this.urlType=Jm.getTypeFromURL(),this.urlId=Jm.getIdFromURL()}}class ys extends WC{constructor(t,n){super(t,n);ae(this,"dispatchItems",{});this.state={...this.state,type:n==null?void 0:n.type,ids:n==null?void 0:n.ids,filterKeys:n==null?void 0:n.filterKeys,path:n==null?void 0:n.path,snapShot:n==null?void 0:n.snapShot,owner:n==null?void 0:n.owner},(n==null?void 0:n.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:n,filterKeys:i,path:a,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getComponents(),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:this.state.owner,ids:n,filterKeys:i,path:a,snapShot:l,typeAttribute:"owner"}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:n})}}class hF extends WC{async getComponentsFromBackend(){await this.getFromURL(),await this.getFirstComponent(),this.comp&&await this.getAssociatedItems(),this.setGotComponents()}async getFirstComponent(e,t){let n=e||this.urlType,i=t||this.urlId;this.comp=this.componentList.getComponent(n,i),this.comp||(this.comp=await this.componentList.getComponentsFromBackend({type:n,ids:i,filterKeys:"_id",owner:this.state.owner}),this.comp=this.comp.length>0?this.comp[0]:void 0)}async getAssociatedItems(){this.compList=await this.comp.getAssociatedItems(this.state.itemTypes),this.compList.length>0&&this.setState({gotComponents:!0}),this.compList=await this.comp.getAssociatedItemsFromBackend(this.state.itemTypes),await this.setCurrentItems()}setCurrentItems(){this.dispatch({currentComponent:this.comp,["current"+this.getCapitalFirstLetter(this.comp.getJson().type)]:this.comp,...this.dispatchItems})}setGotComponents(){this.setState({gotComponents:!0,gotComponentsFromBackend:!0,components:this.compList,urlId:this.urlId})}}class KC extends Xe{constructor(e){super(e),this.state={...this.state,email:"",password:""}}validate(){return!0}onChange(e){let{name:t,value:n}=e.target;this.setState({[t]:n})}onSub(){this.validate()&&this.APIService.login(this.state.email,this.state.password)}getSwitchLink(){return R.jsxs("div",{id:"signUpFT",children:["Don't have an Account? ",R.jsx(zt,{to:"/register",children:"Sign Up"})]})}preSetup(){this.setComponents(["container","header","form","submitButton"])}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Login"})}getFormHtml(){let e=R.jsxs(R.Fragment,{children:[R.jsx("div",{children:"Email"}),R.jsx("input",{className:"defaultInputFormAuth",name:"email",onChange:this.onChange,value:this.state.email}),R.jsx("div",{style:{marginTop:"10px"},children:"Password"}),R.jsx("input",{className:"defaultInputFormAuth",name:"password",type:"password",onChange:this.onChange,value:this.state.password})]});return this.form.setClass("defaultLoginForm"),this.form.getHtml({type:"div",content:e})}getSubmitHtml(){return this.submitButton.setClass("defaultLoginButton"),this.submitButton.setOnClick(this.onSub),this.submitButton.getHtml({type:"div",content:"Submit"})}getContainerHtml(){this.container.setClass(this.props.loginContainer||"fitCC");let e=R.jsxs(R.Fragment,{children:[this.getHeaderHtml(),this.getFormHtml(),this.getSubmitHtml(),this.getSwitchLink()]});return this.container.getHtml({type:"div",content:e})}getHtml(){let e=this.getContainerHtml();return R.jsx("div",{className:"fullCCLayoutRow",children:R.jsx(Yt,{type:this.props.loginCardType||"biggerCard",content:e})})}}class fF extends KC{async onSub(){if(this.validate()){let e=await this.APIService.register(this.state.email,this.state.password);if(!e.error){let t={type:"user",email:this.state.email,_id:this.state.email};e=await this.componentList.addComponents(t),window.history.pushState({},"","/"),this.dispatch({currentUser:e})}}}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Register"})}getSwitchLink(){return R.jsxs("div",{children:["Have an Account? ",R.jsx(zt,{to:"/login",children:"Login"})]})}}class dF extends Xe{constructor(e){super(e),this.state={...this.state,routes:[],loginComp:KC,registerComp:fF}}addToRouter(e){let t=[...this.state.routes,e];this.setState({routes:t})}getRouteMap(e,t){let n=R.jsx(R.Fragment,{});return e&&(e=[...e],n=e==null?void 0:e.map((i,a)=>(i.path||(i.path=this.classNameToString(i.comp),a===0&&(i.path="/")),R.jsxs(R.Fragment,{children:[R.jsx(Ki,{path:i.path,element:R.jsx(i.comp,{props:{...t,...i.props}})}),R.jsx(Ki,{path:i.path+"/:id",element:R.jsx(i.idComp,{props:{...t,...i.props}})})]})))),n}getRoutes(e,t){var i;let n=R.jsxs(Tw,{children:[this.getRouteMap(e,t),this.state.routes.map((a,l)=>R.jsx(R.Fragment,{children:a}))]});return(i=this.app)!=null&&i.state.currentUser||(n=this.getUserAuthRoutes(t)),n}getUserAuthRoutes(e){let t=e.extraAuthRoutes,n=e.loginComp||this.state.loginComp,i=e.registerComp||this.state.registerComp;return R.jsxs(Tw,{children:[R.jsx(Ki,{path:"/",element:R.jsx(n,{props:{...e}})}),R.jsx(Ki,{path:"/login",element:R.jsx(n,{props:{...e}})}),R.jsx(Ki,{path:"/register",element:R.jsx(i,{props:{...e}})}),t==null?void 0:t.map((l,c)=>R.jsxs(R.Fragment,{children:[R.jsx(Ki,{path:l.path,element:R.jsx(l.comp,{props:{...e,...l.props}})}),R.jsx(Ki,{path:l.path+"/:id",element:R.jsx(l.idComp,{props:{...e,...l.props}})})]}))]})}getHtml(){var a;let e={...this.props};e.app=this.app;let t=(a=this.app)==null?void 0:a.state,n=this.props.routes||(t==null?void 0:t.routes),i=this.getRoutes(n,e);return R.jsx(R.Fragment,{children:i})}}class pF{constructor(){ae(this,"registry",{})}getRegistry(){return this.registry}addToRegistry(e,t){this.registry[e]=t}getItemFromRegistry(e){return this.registry[e]}}class mF extends Xe{constructor(t,n,i){super(t);ae(this,"endpoint");ae(this,"db");ae(this,"storage");ae(this,"auth");ae(this,"popupComponents");ae(this,"popupComponentsProps");n=this.props.config||n,this.popupComponents=this.props.popupComponents,this.componentListInterface=new BD(this.dispatch,n.endpoint,n.db,n.storage,n.auth),this.componentList=this.componentListInterface.createComponentList(),this.factory=this.componentListInterface.getFactory(),this.operationsFactory=this.componentList.getOperationsFactory(),this.interfaceRegistry=new pF,this.initialPropsSetupFunctions=[this.propogateApp,...this.initialPropsSetupFunctions],this.state={componentList:this.componentList,componentListInterface:this.componentListInterface,operationsFactory:this.operationsFactory,factory:this.factory,theme:this.props.theme||"default",pageClass:this.props.pageClass||"fullScreen",pageStyle:this.props.pageStyle,extraRouteKey:this.props.extraRouteKey||"extraRoutes",navBarProps:this.props.NavBarProps||{},popupFactory:u1.getFactory(),popups:this.props.popups||[],global:this.props.global||{},routes:this.props.routes||[]},i&&this.registerListWithFactory(i)}async checkForUser(){let t=await this.APIService.getCurrentUser();t&&await this.APIService.checkIfLoggedIn()&&this.APIService.getuser(t.email)}componentDidMount(){this.checkForUser()}registerListWithFactory(t){for(let n of t){let a=new n().getJson().type;this.factory.registerComponents({name:a,component:n}),this.createPopupDefaultsByType(a)}}createPopupDefaultsByType(t){var n;if((n=this.popupComponents)!=null&&n[t]){let i=this.getCapitalFirstLetter(t),a={content:this.popupComponents[t],popupSwitch:"add"+i,componentType:t},l={...a,popupSwitch:"update"+i};this.state.popups=[...this.state.popups,a,l]}}dispatch(t){t=t||{},this.setState({...t})}setPopups(){for(let t of this.state.popups){let n=t.componentType;n&&(t={...t,...this.popupComponentsProps[n]}),t.popupSwitch||(t.popupSwitch=this.classNameToString(t.content)),this.state.popupFactory.registerComponent(t.popupSwitch,t)}}propogateApp(){this.app={state:this.state,dispatch:this.dispatch.bind(this),...this.state.global},zC.setAppComponent(this.app),FC.setAppComponent(this.app),SC.setAppComponent(this.app),oh.setAppComponent(this.app),TC.setAppComponent(this.app)}getHtml(t){this.setPopups();let n=[...this.state.routes];return this.state[this.state.extraRouteKey]&&(n=[...n,...this.state[this.state.extraRouteKey]]),R.jsx("div",{className:this.state.pageClass,style:this.state.pageStyle,children:R.jsxs(ED,{children:[u1.createPopupMachine({app:this.app}),this.state.currentUser&&R.jsx(sF,{...this.state.navBarProps}),t?R.jsx(t.content,{props:{...t.props}}):R.jsx(R.Fragment,{}),R.jsx(dF,{routes:n,extraAuthRoutes:this.state.extraAuthRoutes})]})})}}class GC extends ly{constructor(){super(...arguments);ae(this,"factory",{form:MC,map:qC,nav:$C})}}new GC;new GC;class tr extends DD{constructor(t){super(t);ae(this,"json",{...this.json,type:"",name:"",owner:"",picURL:""})}}class gF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"user"})}}class yF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"contact",phone:"",email:"",conversationIds:[]})}}let vF=class extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"conversation",contactIds:[]})}};class _F extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"template",content:""})}}class wF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"sequence",steps:[]})}}class EF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"step",delay:0,messageId:""})}}class JC extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,conversationIds:[],ownerMessage:!1})}}class TF extends JC{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"textMessage",content:"",timestamp:""})}}class SF extends JC{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"email",subject:"",body:"",timestamp:""})}}class CF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"potentialProspect",phone:"",email:"",researchId:"",conversationIds:[]})}}class IF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"research"})}}class QC extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"calendarEvent",name:"",dayIndex:0,startTime:"10:00",duration:90,day:"Monday"})}}class bF extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"task",dueDate:"",completed:!1,completeDate:"",name:""})}}class YC extends tr{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"homework",dueDate:"",completed:!1,completeDate:"",content:"",name:""})}}class AF extends YC{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"goal"})}}class kF extends QC{constructor(){super(...arguments);ae(this,"json",{...this.json,type:"session"})}}const xF=Object.freeze(Object.defineProperty({__proto__:null,CalendarEvent:QC,Contact:yF,Conversations:vF,Email:SF,Goal:AF,Homework:YC,PotentialProspect:CF,Research:IF,Sequence:wF,Session:kF,Step:EF,Task:bF,Template:_F,TextMessage:TF,User:gF},Symbol.toStringTag,{value:"Module"}));class RF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var c,h,d;let e=window.innerWidth>600;(c=this.propsState.popupSwitch)!=null&&c.includes("addContact")&&(e=!1);let t=e?this.propsState.currentContact:this.props.obj;const n=e?this.propsState.currentContact:this.propsState.currentPopupComponent,i=!e;let a=t?"Edit":"Add",l=R.jsx(gs,{content:"Save",isPopup:!1,callbackFunc:async v=>{let g=this.propsState.currentPopupComponent;debugger;let p="Welcome to Viridian! Claim Your New Account",y=`http://localhost:5173/clientregister/${g.getJson()._id}`;debugger;let w=`
Hi ${g.getJson().firstName},

Congratulations! You've been successfully added to Viridian.

To get started, please click the link below to claim and activate your account:

${y}

If you have any questions or need help, just reply to this email and we'll be happy to assist.

Welcome aboard!

Best regards,
Viridian 
`;debugger;let S={from:this.propsState.currentUser.getJson()._id,to:g.getJson().email,subject:p,text:w};await fetch("https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}).then(E=>{if(!E.ok)throw new Error(`HTTP error! Status: ${E.status}`);return E.json()}).then(E=>{console.log("Reply sent successfully in thread.",E)}).catch(E=>{console.error("Error sending reply:",E)}),this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}});return((h=this.propsState.popupSwitch)!=null&&h.includes("updateContact")||window.innerWidth>600&&!((d=this.propsState.popupSwitch)!=null&&d.includes("addContact")))&&(l=R.jsx(Xl,{obj:n,content:"Save",isPopup:i,callbackFunc:this.props.callbackFunc})),R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsxs("h2",{children:[a," Contact"]})," ",R.jsxs("div",{className:"contact-Add-container",children:[R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"First Name"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:t,name:"firstName",inPopup:i})," "]})]}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Last Name"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:t,name:"lastName",inPopup:i})," "]})]}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Email"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:t,name:"email",inPopup:i})," "]})]}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Phone"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:t,name:"phone",inPopup:i})," "]})]}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Address"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:t,name:"address",inPopup:i})," "]})]}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Birth"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:t,name:"birth",inPopup:i})," "]})]}),R.jsxs("div",{className:"popupButton",style:{width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",R.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",l]})," "]})]})]})}}class PF extends Xe{constructor(t){super(t);ae(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});ae(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}render(){const{obj:t}=this.props;let n=t.getJson(),a=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return R.jsx("div",{style:{display:"flex",flexDirection:"column"},children:R.jsxs("div",{className:"contact-item",style:{background:a?"#2374ab10":"#eaf4f1"},children:[R.jsx("div",{className:"contact-avatar",children:R.jsx("i",{className:"fa-solid fa-user"})}),R.jsxs("div",{className:"contact-info",children:[R.jsxs("div",{className:"contact-info-first-div row row-space-between padding-0",children:[R.jsx("div",{onClick:()=>{debugger;window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},className:"contact-name",children:`${n.firstName} ${n.lastName}`}),R.jsx("div",{className:"contact-date",children:"Yesterday"})]}),R.jsx("div",{className:"contact-desc",children:n.company})]})]})})}}var Fc={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var OF=Fc.exports,c1;function NF(){return c1||(c1=1,function(r,e){((t,n)=>{r.exports=n()})(OF,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,a=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,c={},h=0,d={};function v(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var k=F(A);k.chunkSize=parseInt(k.chunkSize),A.step||A.chunk||(k.chunkSize=null),this._handle=new S(k),(this._handle.streamer=this)._config=k}).call(this,_),this.parseChunk=function(A,k){var x=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<x){let D=this._config.newline;D||(O=this._config.quoteChar||'"',D=this._handle.guessLineEndings(A,O)),A=[...A.split(D).slice(x)].join(D)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(A))!==void 0&&(A=O),this.isFirstChunk=!1,this._halted=!1;var x=this._partialLine+A,O=(this._partialLine="",this._handle.parse(x,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=O.meta.cursor,x=(this._finished||(this._partialLine=x.substring(A-this._baseIndex),this._baseIndex=A),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)n.postMessage({results:O,workerId:d.WORKER_ID,finished:x});else if(P(this._config.chunk)&&!k){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!x||!P(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),x||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(A){P(this._config.error)?this._config.error(A):l&&this._config.error&&n.postMessage({workerId:d.WORKER_ID,error:A,finished:!1})}}function g(_){var A;(_=_||{}).chunkSize||(_.chunkSize=d.RemoteChunkSize),v.call(this,_),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),a||(A.onload=U(this._chunkLoaded,this),A.onerror=U(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var k,x=this._config.downloadRequestHeaders;for(k in x)A.setRequestHeader(k,x[k])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+O));try{A.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}a&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(k=>(k=k.getResponseHeader("Content-Range"))!==null?parseInt(k.substring(k.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(k){k=A.statusText||k,this._sendError(new Error(k))}}function p(_){(_=_||{}).chunkSize||(_.chunkSize=d.LocalChunkSize),v.call(this,_);var A,k,x=typeof FileReader<"u";this.stream=function(O){this._input=O,k=O.slice||O.webkitSlice||O.mozSlice,x?((A=new FileReader).onload=U(this._chunkLoaded,this),A.onerror=U(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),O=k.call(O,this._start,D)),A.readAsText(O,this._config.encoding));x||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(A.error)}}function y(_){var A;v.call(this,_=_||{}),this.stream=function(k){return A=k,this._nextChunk()},this._nextChunk=function(){var k,x;if(!this._finished)return k=this._config.chunkSize,A=k?(x=A.substring(0,k),A.substring(k)):(x=A,""),this._finished=!A,this.parseChunk(x)}}function w(_){v.call(this,_=_||{});var A=[],k=!0,x=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){x&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):k=!0},this._streamData=U(function(O){try{A.push(typeof O=="string"?O:O.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(D){this._streamError(D)}},this),this._streamError=U(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=U(function(){this._streamCleanUp(),x=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(_){var A,k,x,O,D=Math.pow(2,53),$=-D,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,re=0,G=0,W=!1,M=!1,B=[],z={data:[],errors:[],meta:{}};function ee(ne){return _.skipEmptyLines==="greedy"?ne.join("").trim()==="":ne.length===1&&ne[0].length===0}function X(){if(z&&x&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),x=!1),_.skipEmptyLines&&(z.data=z.data.filter(function(ke){return!ee(ke)})),H()){let ke=function(xe,Pe){P(_.transformHeader)&&(xe=_.transformHeader(xe,Pe)),B.push(xe)};var ve=ke;if(z)if(Array.isArray(z.data[0])){for(var ne=0;H()&&ne<z.data.length;ne++)z.data[ne].forEach(ke);z.data.splice(0,1)}else z.data.forEach(ke)}function ie(ke,xe){for(var Pe=_.header?{}:[],De=0;De<ke.length;De++){var Ue=De,tt=ke[De],tt=((ce,de)=>(Ee=>(_.dynamicTypingFunction&&_.dynamicTyping[Ee]===void 0&&(_.dynamicTyping[Ee]=_.dynamicTypingFunction(Ee)),(_.dynamicTyping[Ee]||_.dynamicTyping)===!0))(ce)?de==="true"||de==="TRUE"||de!=="false"&&de!=="FALSE"&&((Ee=>{if(J.test(Ee)&&(Ee=parseFloat(Ee),$<Ee&&Ee<D))return 1})(de)?parseFloat(de):se.test(de)?new Date(de):de===""?null:de):de)(Ue=_.header?De>=B.length?"__parsed_extra":B[De]:Ue,tt=_.transform?_.transform(tt,Ue):tt);Ue==="__parsed_extra"?(Pe[Ue]=Pe[Ue]||[],Pe[Ue].push(tt)):Pe[Ue]=tt}return _.header&&(De>B.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+De,G+xe):De<B.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+De,G+xe)),Pe}var fe;z&&(_.header||_.dynamicTyping||_.transform)&&(fe=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(ie),fe=z.data.length):z.data=ie(z.data,0),_.header&&z.meta&&(z.meta.fields=B),G+=fe)}function H(){return _.header&&B.length===0}function Y(ne,ie,fe,ve){ne={type:ne,code:ie,message:fe},ve!==void 0&&(ne.row=ve),z.errors.push(ne)}P(_.step)&&(O=_.step,_.step=function(ne){z=ne,H()?X():(X(),z.data.length!==0&&(re+=ne.data.length,_.preview&&re>_.preview?k.abort():(z.data=z.data[0],O(z,Z))))}),this.parse=function(ne,ie,fe){var ve=_.quoteChar||'"',ve=(_.newline||(_.newline=this.guessLineEndings(ne,ve)),x=!1,_.delimiter?P(_.delimiter)&&(_.delimiter=_.delimiter(ne),z.meta.delimiter=_.delimiter):((ve=((ke,xe,Pe,De,Ue)=>{var tt,ce,de,Ee;Ue=Ue||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var be=0;be<Ue.length;be++){for(var ge,$e=Ue[be],Me=0,Be=0,We=0,Ze=(de=void 0,new E({comments:De,delimiter:$e,newline:xe,preview:10}).parse(ke)),et=0;et<Ze.data.length;et++)Pe&&ee(Ze.data[et])?We++:(ge=Ze.data[et].length,Be+=ge,de===void 0?de=ge:0<ge&&(Me+=Math.abs(ge-de),de=ge));0<Ze.data.length&&(Be/=Ze.data.length-We),(ce===void 0||Me<=ce)&&(Ee===void 0||Ee<Be)&&1.99<Be&&(ce=Me,tt=$e,Ee=Be)}return{successful:!!(_.delimiter=tt),bestDelimiter:tt}})(ne,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=ve.bestDelimiter:(x=!0,_.delimiter=d.DefaultDelimiter),z.meta.delimiter=_.delimiter),F(_));return _.preview&&_.header&&ve.preview++,A=ne,k=new E(ve),z=k.parse(A,ie,fe),X(),W?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,k.abort(),A=P(_.chunk)?"":A.substring(k.getCharIndex())},this.resume=function(){Z.streamer._halted?(W=!1,Z.streamer.parseChunk(A,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,k.abort(),z.meta.aborted=!0,P(_.complete)&&_.complete(z),A=""},this.guessLineEndings=function(ke,ve){ke=ke.substring(0,1048576);var ve=new RegExp(T(ve)+"([^]*?)"+T(ve),"gm"),fe=(ke=ke.replace(ve,"")).split("\r"),ve=ke.split(`
`),ke=1<ve.length&&ve[0].length<fe[0].length;if(fe.length===1||ke)return`
`;for(var xe=0,Pe=0;Pe<fe.length;Pe++)fe[Pe][0]===`
`&&xe++;return xe>=fe.length/2?`\r
`:"\r"}}function T(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(_){var A=(_=_||{}).delimiter,k=_.newline,x=_.comments,O=_.step,D=_.preview,$=_.fastMode,J=null,se=!1,Z=_.quoteChar==null?'"':_.quoteChar,re=Z;if(_.escapeChar!==void 0&&(re=_.escapeChar),(typeof A!="string"||-1<d.BAD_DELIMITERS.indexOf(A))&&(A=","),x===A)throw new Error("Comment character same as delimiter");x===!0?x="#":(typeof x!="string"||-1<d.BAD_DELIMITERS.indexOf(x))&&(x=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var G=0,W=!1;this.parse=function(M,B,z){if(typeof M!="string")throw new Error("Input must be a string");var ee=M.length,X=A.length,H=k.length,Y=x.length,ne=P(O),ie=[],fe=[],ve=[],ke=G=0;if(!M)return Me();if($||$!==!1&&M.indexOf(Z)===-1){for(var xe=M.split(k),Pe=0;Pe<xe.length;Pe++){if(ve=xe[Pe],G+=ve.length,Pe!==xe.length-1)G+=k.length;else if(z)return Me();if(!x||ve.substring(0,Y)!==x){if(ne){if(ie=[],Ee(ve.split(A)),Be(),W)return Me()}else Ee(ve.split(A));if(D&&D<=Pe)return ie=ie.slice(0,D),Me(!0)}}return Me()}for(var De=M.indexOf(A,G),Ue=M.indexOf(k,G),tt=new RegExp(T(re)+T(Z),"g"),ce=M.indexOf(Z,G);;)if(M[G]===Z)for(ce=G,G++;;){if((ce=M.indexOf(Z,ce+1))===-1)return z||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:G}),ge();if(ce===ee-1)return ge(M.substring(G,ce).replace(tt,Z));if(Z===re&&M[ce+1]===re)ce++;else if(Z===re||ce===0||M[ce-1]!==re){De!==-1&&De<ce+1&&(De=M.indexOf(A,ce+1));var de=be((Ue=Ue!==-1&&Ue<ce+1?M.indexOf(k,ce+1):Ue)===-1?De:Math.min(De,Ue));if(M.substr(ce+1+de,X)===A){ve.push(M.substring(G,ce).replace(tt,Z)),M[G=ce+1+de+X]!==Z&&(ce=M.indexOf(Z,G)),De=M.indexOf(A,G),Ue=M.indexOf(k,G);break}if(de=be(Ue),M.substring(ce+1+de,ce+1+de+H)===k){if(ve.push(M.substring(G,ce).replace(tt,Z)),$e(ce+1+de+H),De=M.indexOf(A,G),ce=M.indexOf(Z,G),ne&&(Be(),W))return Me();if(D&&ie.length>=D)return Me(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:G}),ce++}}else if(x&&ve.length===0&&M.substring(G,G+Y)===x){if(Ue===-1)return Me();G=Ue+H,Ue=M.indexOf(k,G),De=M.indexOf(A,G)}else if(De!==-1&&(De<Ue||Ue===-1))ve.push(M.substring(G,De)),G=De+X,De=M.indexOf(A,G);else{if(Ue===-1)break;if(ve.push(M.substring(G,Ue)),$e(Ue+H),ne&&(Be(),W))return Me();if(D&&ie.length>=D)return Me(!0)}return ge();function Ee(We){ie.push(We),ke=G}function be(We){var Ze=0;return Ze=We!==-1&&(We=M.substring(ce+1,We))&&We.trim()===""?We.length:Ze}function ge(We){return z||(We===void 0&&(We=M.substring(G)),ve.push(We),G=ee,Ee(ve),ne&&Be()),Me()}function $e(We){G=We,Ee(ve),ve=[],Ue=M.indexOf(k,G)}function Me(We){if(_.header&&!B&&ie.length&&!se){var Ze=ie[0],et={},nr=new Set(Ze);let ct=!1;for(let Ct=0;Ct<Ze.length;Ct++){let $t=Ze[Ct];if(et[$t=P(_.transformHeader)?_.transformHeader($t,Ct):$t]){let rr,Ti=et[$t];for(;rr=$t+"_"+Ti,Ti++,nr.has(rr););nr.add(rr),Ze[Ct]=rr,et[$t]++,ct=!0,(J=J===null?{}:J)[rr]=$t}else et[$t]=1,Ze[Ct]=$t;nr.add($t)}ct&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:ie,errors:fe,meta:{delimiter:A,linebreak:k,aborted:W,truncated:!!We,cursor:ke+(B||0),renamedHeaders:J}}}function Be(){O(Me()),ie=[],fe=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return G}}function b(_){var A=_.data,k=c[A.workerId],x=!1;if(A.error)k.userError(A.error,A.file);else if(A.results&&A.results.data){var O={abort:function(){x=!0,N(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(P(k.userStep)){for(var D=0;D<A.results.data.length&&(k.userStep({data:A.results.data[D],errors:A.results.errors,meta:A.results.meta},O),!x);D++);delete A.results}else P(k.userChunk)&&(k.userChunk(A.results,O,A.file),delete A.results)}A.finished&&!x&&N(A.workerId,A.results)}function N(_,A){var k=c[_];P(k.userComplete)&&k.userComplete(A),k.terminate(),delete c[_]}function I(){throw new Error("Not implemented.")}function F(_){if(typeof _!="object"||_===null)return _;var A,k=Array.isArray(_)?[]:{};for(A in _)k[A]=F(_[A]);return k}function U(_,A){return function(){_.apply(A,arguments)}}function P(_){return typeof _=="function"}return d.parse=function(_,A){var k=(A=A||{}).dynamicTyping||!1;if(P(k)&&(A.dynamicTypingFunction=k,k={}),A.dynamicTyping=k,A.transform=!!P(A.transform)&&A.transform,!A.worker||!d.WORKERS_SUPPORTED)return k=null,d.NODE_STREAM_INPUT,typeof _=="string"?(_=(x=>x.charCodeAt(0)!==65279?x:x.slice(1))(_),k=new(A.download?g:y)(A)):_.readable===!0&&P(_.read)&&P(_.on)?k=new w(A):(n.File&&_ instanceof File||_ instanceof Object)&&(k=new p(A)),k.stream(_);(k=(()=>{var x;return!!d.WORKERS_SUPPORTED&&(x=(()=>{var O=n.URL||n.webkitURL||null,D=t.toString();return d.BLOB_URL||(d.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(x=new n.Worker(x)).onmessage=b,x.id=h++,c[x.id]=x)})()).userStep=A.step,k.userChunk=A.chunk,k.userComplete=A.complete,k.userError=A.error,A.step=P(A.step),A.chunk=P(A.chunk),A.complete=P(A.complete),A.error=P(A.error),delete A.worker,k.postMessage({input:_,config:A,workerId:k.id})},d.unparse=function(_,A){var k=!1,x=!0,O=",",D=`\r
`,$='"',J=$+$,se=!1,Z=null,re=!1,G=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||d.BAD_DELIMITERS.filter(function(B){return A.delimiter.indexOf(B)!==-1}).length||(O=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(k=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(se=A.skipEmptyLines),typeof A.newline=="string"&&(D=A.newline),typeof A.quoteChar=="string"&&($=A.quoteChar),typeof A.header=="boolean"&&(x=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");Z=A.columns}A.escapeChar!==void 0&&(J=A.escapeChar+$),A.escapeFormulae instanceof RegExp?re=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(T($),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return W(null,_,se);if(typeof _[0]=="object")return W(Z||Object.keys(_[0]),_,se)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||Z),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),W(_.fields||[],_.data||[],se);throw new Error("Unable to serialize unrecognized input");function W(B,z,ee){var X="",H=(typeof B=="string"&&(B=JSON.parse(B)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(B)&&0<B.length),Y=!Array.isArray(z[0]);if(H&&x){for(var ne=0;ne<B.length;ne++)0<ne&&(X+=O),X+=M(B[ne],ne);0<z.length&&(X+=D)}for(var ie=0;ie<z.length;ie++){var fe=(H?B:z[ie]).length,ve=!1,ke=H?Object.keys(z[ie]).length===0:z[ie].length===0;if(ee&&!H&&(ve=ee==="greedy"?z[ie].join("").trim()==="":z[ie].length===1&&z[ie][0].length===0),ee==="greedy"&&H){for(var xe=[],Pe=0;Pe<fe;Pe++){var De=Y?B[Pe]:Pe;xe.push(z[ie][De])}ve=xe.join("").trim()===""}if(!ve){for(var Ue=0;Ue<fe;Ue++){0<Ue&&!ke&&(X+=O);var tt=H&&Y?B[Ue]:Ue;X+=M(z[ie][tt],Ue)}ie<z.length-1&&(!ee||0<fe&&!ke)&&(X+=D)}}return X}function M(B,z){var ee,X;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(X=!1,re&&typeof B=="string"&&re.test(B)&&(B="'"+B,X=!0),ee=B.toString().replace(G,J),(X=X||k===!0||typeof k=="function"&&k(B,z)||Array.isArray(k)&&k[z]||((H,Y)=>{for(var ne=0;ne<Y.length;ne++)if(-1<H.indexOf(Y[ne]))return!0;return!1})(ee,d.BAD_DELIMITERS)||-1<ee.indexOf(O)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?$+ee+$:ee)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!n.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=E,d.ParserHandle=S,d.NetworkStreamer=g,d.FileStreamer=p,d.StringStreamer=y,d.ReadableStreamStreamer=w,n.jQuery&&((i=n.jQuery).fn.parse=function(_){var A=_.config||{},k=[];return this.each(function(D){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)k.push({file:this.files[$],inputElem:this,instanceConfig:i.extend({},A)})}),x(),this;function x(){if(k.length===0)P(_.complete)&&_.complete();else{var D,$,J,se,Z=k[0];if(P(_.before)){var re=_.before(Z.file,Z.inputElem);if(typeof re=="object"){if(re.action==="abort")return D="AbortError",$=Z.file,J=Z.inputElem,se=re.reason,void(P(_.error)&&_.error({name:D},$,J,se));if(re.action==="skip")return void O();typeof re.config=="object"&&(Z.instanceConfig=i.extend(Z.instanceConfig,re.config))}else if(re==="skip")return void O()}var G=Z.instanceConfig.complete;Z.instanceConfig.complete=function(W){P(G)&&G(W,Z.file,Z.inputElem),O()},d.parse(Z.file,Z.instanceConfig)}}function O(){k.splice(0,1),x()}}),l&&(n.onmessage=function(_){_=_.data,d.WORKER_ID===void 0&&_&&(d.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:d.WORKER_ID,results:d.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=d.parse(_.input,_.config))&&n.postMessage({workerId:d.WORKER_ID,results:_,finished:!0})}),(g.prototype=Object.create(v.prototype)).constructor=g,(p.prototype=Object.create(v.prototype)).constructor=p,(y.prototype=Object.create(y.prototype)).constructor=y,(w.prototype=Object.create(v.prototype)).constructor=w,d})}(Fc)),Fc.exports}NF();class LF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit client-div",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let a of e){let l=t.filter(c=>c.getJson().tags.includes(a));n=[...n,...l]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){var n;let e=this.propsState.selectedContacts,t=this.propsState.componentList.getList("contact");return(e==null?void 0:e.length)>0,t!=null&&t.length&&""+(t==null?void 0:t.length),R.jsxs("div",{className:"map-container",children:[R.jsxs("div",{className:"Clients-name",children:[R.jsx("div",{children:"Clients"})," ",R.jsx(zn,{formClass:"dark-green-button",content:" Add Client",popupSwitch:"addContact"})]}),R.jsx("div",{className:"search-container",children:R.jsxs("div",{className:"search-bar",children:[R.jsx("i",{className:"fas fa-search search-icon"}),R.jsx("input",{onChange:i=>{this.dispatch({tags:i.target.value})},className:"search-input",placeholder:"Search"})]})}),R.jsxs("div",{children:[" ",R.jsx(sn,{filterFunc:i=>{if(!this.propsState.tags)return!0;let a=this.propsState.tags.split(",");for(let l of a)if(l!==""&&i.getJson().tags.includes(l))return!0;return!1},name:"contact",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:PF}],hasLink:!0})," "]}),((n=this.propsState.selectedContacts)==null?void 0:n.length)>0&&R.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[R.jsx("button",{className:"floating-select-btn",children:R.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),R.jsx("button",{onClick:()=>{for(let i of this.propsState.selectedContacts)i.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:R.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),R.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:R.jsx(zn,{formclassName:"FCImgButton",content:R.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class DF extends Xe{constructor(e){super(e)}formatTime24to12(e){if(!e)return"";const[t,n]=e.split(":");let i=parseInt(t,10);const a=n.padStart(2,"0"),l=i>=12?"PM":"AM";return i=i%12===0?12:i%12,`${i}:${a} ${l}`}render(){var i;const{obj:e}=this.props,t=e.getJson()||{},n=this.formatTime24to12(t.startTime);return R.jsx("div",{className:"appointment",style:{position:"relative"},children:R.jsx("div",{className:"row row-space-between",children:R.jsxs("div",{className:"appointment-left",children:[R.jsx("div",{style:{position:"absolute",right:"7px",top:"0px"},children:R.jsx(_a,{formClass:"none",content:"x",obj:e})}),R.jsx(zn,{formClass:"none",content:R.jsxs("div",{children:[R.jsx("div",{className:"appointment-right",children:R.jsx("div",{className:"appointment-date",children:t.day})}),R.jsx("div",{className:"row row-left padding-0 appointment-time",style:{fontSize:"12px"},children:n})]}),popupSwitch:"updateCalendarEvent",obj:e}),R.jsx(zt,{to:`../session/${(i=this.componentList.getComponent("session",t._id,"eventId"))==null?void 0:i.getJson()._id}`,className:"row row-left padding-0",children:"View Notes"})]})})})}}class jF extends Xe{constructor(e){super(e)}render(){const{obj:e}=this.props,t=e.getJson()||{};return R.jsx("div",{className:"appointment",children:R.jsx("div",{className:"row row-space-between",children:R.jsxs("div",{className:"appointment-left",children:[R.jsx(_a,{content:"x",obj:e}),R.jsx(zn,{content:t==null?void 0:t.name,popupSwitch:"updateGoal",obj:e})]})})})}}class XC extends Xe{constructor(e){super(e)}render(){const{obj:e}=this.props,t=e.getJson()||{};return R.jsx("div",{className:"appointment",children:R.jsx("div",{className:"row row-space-between",children:R.jsxs("div",{className:"appointment-left",children:[R.jsx(_a,{content:"x",obj:e}),R.jsx(zn,{content:t==null?void 0:t.name,popupSwitch:"updateHomework",obj:e})]})})})}}class MF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var i,a,l,c,h,d,v,g;let e=window.innerWidth>600;(i=this.propsState.popupSwitch)!=null&&i.includes("addContact")&&(e=!1),e?this.propsState.currentContact:this.props.obj;const t=e?this.propsState.currentContact:this.propsState.currentPopupComponent,n=!e;return this.props.callbackFunc,((a=this.propsState.popupSwitch)!=null&&a.includes("updateContact")||window.innerWidth>600&&!((l=this.propsState.popupSwitch)!=null&&l.includes("addContact")))&&this.props.callbackFunc,R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsx("div",{children:R.jsxs("div",{className:"div client-profile-dash",children:[R.jsxs("div",{className:"row client-profile",children:[R.jsx("div",{className:"client-avatar",children:R.jsx("i",{className:"fa-solid fa-user"})}),R.jsxs("div",{className:"client-info",children:[R.jsxs("div",{className:"client-name",children:[(c=this.propsState.currentContact)==null?void 0:c.getJson().firstName," ",(d=(h=this.propsState)==null?void 0:h.currentContact)==null?void 0:d.getJson().lastName]}),R.jsx(zn,{obj:this.propsState.currentContact,content:R.jsx("div",{className:"client-desc",children:"Edit Profile"}),popupSwitch:"updateContact"})]})]}),R.jsxs("div",{className:"row row-left padding-0 client-contact-div",style:{position:"relative"},children:[R.jsxs("div",{className:"client-contact col col-left padding-0",children:[R.jsxs("div",{className:"client-contact-phone row",children:[R.jsx("div",{children:R.jsx("i",{className:"fa-solid fa-phone"})}),R.jsx("div",{children:(v=this.propsState.currentContact)==null?void 0:v.getJson().phone})]}),R.jsxs("div",{className:"client-contact-email row",children:[R.jsx("div",{children:R.jsx("i",{className:"fa-solid fa-envelope"})}),R.jsx("div",{children:(g=this.propsState.currentContact)==null?void 0:g.getJson().email})]})]}),R.jsx("div",{style:{position:"absolute",right:"0px",bottom:"0px"},children:R.jsx(_a,{content:"delete",obj:this.propsState.currentContact,callbackFunc:()=>{this.dispatch({currentContact:void 0})}})})]})]})}),R.jsxs("div",{className:"row row-align-start",children:[R.jsxs("div",{className:"col client-appointments",children:[R.jsx("div",{className:"appointment-title",children:"Appointment History"}),R.jsx(zn,{wrapperStyle:{width:"200px"},formClass:"dark-green-button",content:"+ Appointment",popupSwitch:"addCalendarEvent",obj:{type:"calendarEvent",contactId:this.propsState.currentContact.getJson()._id,name:this.propsState.currentContact.getJson().firstName+" "+this.propsState.currentContact.getJson().lastName}}),R.jsxs("div",{className:"row appointment-upcoming",children:[R.jsx("svg",{viewBox:"0 0 100 10",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("line",{x1:"0",y1:"5",x2:"100",y2:"5",stroke:"currentColor","stroke-width":"1"})}),R.jsx("div",{className:"appointment-upcoming-text",children:"Appointments"}),R.jsx("svg",{viewBox:"0 0 100 10",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("line",{x1:"0",y1:"5",x2:"100",y2:"5",stroke:"currentColor","stroke-width":"1"})})]}),R.jsx(sn,{name:"calendarEvent",cells:[{type:"custom",custom:DF}],filter:{search:this.propsState.currentContact.getJson()._id,attribute:"contactId"}})]}),R.jsxs("div",{className:"col client-second-col",children:[R.jsx(zn,{wrapperStyle:{width:"200px"},formClass:"dark-green-button",content:"addHomework",obj:{type:"homework",contactId:this.propsState.currentContact.getJson()._id},popupSwitch:"addHomework"}),R.jsx(zn,{wrapperStyle:{width:"200px"},formClass:"dark-green-button",content:"addGoal",obj:{type:"goal",contactId:this.propsState.currentContact.getJson()._id},popupSwitch:"addGoal"}),R.jsx(sn,{name:"homework",cells:[{type:"custom",custom:XC}],filter:{search:this.propsState.currentContact.getJson()._id,attribute:"contactId"}}),R.jsx(sn,{name:"goal",cells:[{type:"custom",custom:jF}],filter:{search:this.propsState.currentContact.getJson()._id,attribute:"contactId"}}),R.jsxs("div",{className:"row client-modules",children:[R.jsx("div",{className:"col",children:"Billing History"}),R.jsx("div",{className:"col"}),R.jsx("div",{className:"col"})]}),R.jsx("div",{className:"row client-form-responses",children:R.jsx("div",{className:"client-form-responses-cell"})})]})]})]})}}class FF extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit client-dash-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return R.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(LF,{})}),this.propsState.currentContact&&R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(MF,{})})]})}}class VF extends Xe{getTimeStampStr(){var t,n;let e;try{e=(n=(t=this.props.obj)==null?void 0:t.getJson())==null?void 0:n.timeStamp}catch(i){return console.error("Error accessing timestamp property:",i),"Invalid Date"}if(e&&e instanceof Dt)try{return e.toDate().toLocaleDateString()}catch(i){return console.error("Error converting Firebase Timestamp to Date:",i),"Invalid Date"}else return e?(console.warn("Received timeValue is not a Firebase Timestamp:",e),String(e)):""}render(){return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"message-header",children:[R.jsx("span",{className:"sender",children:this.props.obj.getJson().senderName}),R.jsx("span",{className:"date",children:this.getTimeStampStr()})]}),R.jsx("div",{className:"snippet",children:this.props.obj.getJson().recentMessage})]})}}class UF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit messages-container"}}searchFilter(){}getInnerContent(){return R.jsx(sn,{name:"conversation",mapContainerClass:"message-list-scai",mapSectionClass:"message-item-scai",cells:[{type:"customBuilt",custom:R.jsx("div",{className:"chat-avatar",children:R.jsx("i",{className:"fa-solid fa-user"})}),wrapperStyle:{width:"50px"},itemStyle:{width:"50px"}},{type:"custom",custom:VF,itemClick:e=>{this.dispatch({currentConversation:e,showConversation:window.innerWidth<600?!0:void 0}),e.setCompState({seen:!0})}}],filterFunc:e=>{var a,l;let t=!1;this.propsState.searchText||(t=!0);let n=this.propsState.searchText;(a=e.getJson().senderName)!=null&&a.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0);let i=this.componentList.getList("email",e.getJson()._id,"conversationId");for(let c of i)(l=c.getJson().body)!=null&&l.toLowerCase().includes(n==null?void 0:n.toLowerCase())&&(t=!0);return t}})}render(){return R.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[R.jsx("div",{className:"header",children:"Messages"}),R.jsx("div",{className:"search-container",children:R.jsxs("div",{className:"search-bar",children:[R.jsx("i",{className:"fas fa-search search-icon"}),R.jsx("input",{type:"text",placeholder:"Search messages...",onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input"})]})}),this.getInnerContent()]})}}class BF extends Xe{render(){let e=this.props.obj.getJson().ownerMessage?"outgoing":"incoming";return R.jsxs("div",{children:[R.jsx("div",{className:"date-divider",children:R.jsx("span",{className:"timestamp",children:this.props.obj.getJson().timeStamp})}),R.jsx("div",{className:"message-item "+e,children:R.jsx("div",{className:"message "+e,children:this.props.obj.getJson().body})})]})}}class qF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",currentConversation:null}}async componentDidMount(){await this.prepareMessages()}async prepareMessages(){let e=this.propsState.currentConversation;e||(e=this.componentList.getComponent("conversation"),await this.dispatch({currentConversation:e})),e?(await this.prepNewMessage(),this.setState({start:!0})):this.setState({message:"no current conversations"})}async prepNewMessage(){let e=this.propsState.currentConversation;const t=e.getJson().messageType||"email";let n=this.componentList.getList("email",this.propsState.currentConversation.getJson()._id,"conversationId");n=n[n.length-1];let i=n.getJson().originalMessageId,a=n.getJson().subject;const l=await this.operationsFactory.prepare({prepare:{type:t,conversationId:e.getJson()._id,originalMessageId:i,subject:a,ownerMessage:!0}});this.dispatch({currentComponent:l[0]})}getInnerContent(){const{currentConversation:e}=this.propsState;return R.jsxs("div",{className:"layoutColumn fit conversation-container",children:[window.innerWidth<600&&R.jsx("div",{className:"dark-button-1",onClick:()=>{this.dispatch({showConversation:void 0})},children:"< Back"}),this.state.message?R.jsx(R.Fragment,{children:this.state.message}):R.jsx(R.Fragment,{children:this.state.start&&R.jsxs("div",{style:{width:"100%"},children:[R.jsx(sn,{mapContainerClass:"message-list",name:(e==null?void 0:e.getJson().messageType)||"email",cells:[{type:"custom",custom:BF}],filter:{search:this.propsState.currentConversation.getJson()._id,attribute:"conversationId"}}),R.jsx(pt,{wrapperClass:"search-bar",formClass:"search-input",name:"body",obj:this.propsState.currentComponent}),R.jsx(gs,{content:R.jsx("div",{className:"chat-footer",children:R.jsx("input",{type:"text",className:"footer-input",placeholder:"Start typing..."})}),callbackFunc:()=>{let t=this.propsState.currentComponent;this.prepNewMessage();let n={originalMessageId:t.getJson().originalMessageId,from:t.getJson().owner,to:this.propsState.currentConversation.getJson().recipient,subject:t.getJson().subject,text:t.getJson().body};fetch("https://sendgridreplythread-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>{if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);return i.json()}).then(i=>{console.log("Reply sent successfully in thread.",i)}).catch(i=>{console.error("Error sending reply:",i)})}})]})})]})}render(){var e,t;return R.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[R.jsxs("div",{className:"chat-header",children:[R.jsx("div",{className:"header-avatar",children:R.jsx("i",{className:"fa-solid fa-user"})}),R.jsxs("div",{className:"header-info",children:[R.jsx("div",{className:"header-name",children:(t=(e=this.propsState)==null?void 0:e.currentConversation)==null?void 0:t.getJson().senderName}),R.jsx("div",{className:"header-status",children:"View Profile"})]})]}),this.getInnerContent()]})}}class zF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.componentList.getComponentsFromBackend({type:"conversation",ids:this.propsState.currentUser.getJson()._id,filterKeys:"owner"}),this.setState({start:!0})}getInnerContent(){return R.jsxs("div",{className:"layoutRow",style:{width:"100%",height:"100%"},children:[R.jsx("div",{className:"messages-list-container",children:!this.propsState.showConversation&&R.jsx(R.Fragment,{children:this.state.start&&R.jsx(Yt,{theme:"defaultCard",content:R.jsx(UF,{})})})}),R.jsx("div",{className:"message-detail-container",children:(window.innerWidth>600||this.propsState.showConversation!==void 0)&&R.jsx(R.Fragment,{children:this.state.start&&R.jsx(Yt,{theme:"defaultCard",content:R.jsx(qF,{})})})})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Qm extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.dispatch({currentTopic:void 0,currentSubTopic:void 0,currentComponent:void 0}),this.getComponentsFromBackend()}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:R.jsx("div",{className:"fit",children:this.state.getComponentsFromBackend&&R.jsx(Yt,{theme:"defaultCard",content:R.jsx(zF,{})})})})}}class HF extends Xe{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return R.jsxs("div",{className:"sequence",children:[R.jsxs("div",{className:"title",children:[R.jsx(zt,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.name}),R.jsx(zt,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]}),R.jsxs("div",{className:"del-icon",children:[R.jsx("i",{className:"fa-solid fa-xmark"}),R.jsx(_a,{obj:e})]})]})}}class $F extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return R.jsxs("div",{className:"fit",children:[R.jsx("h4",{style:{marginBottom:"10px"},children:"Sequences"}),R.jsx(sn,{name:"sequence",cells:[{type:"custom",custom:HF}]})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class WF extends Xe{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return R.jsx("div",{className:"sequence",children:R.jsxs("div",{className:"title",children:[R.jsx(zt,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.content}),R.jsx(zt,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class KF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return R.jsxs(R.Fragment,{children:[R.jsx("h4",{style:{marginBottom:"10px"},children:"Templates"}),R.jsx(sn,{name:"template",cells:[{type:"custom",custom:WF}]})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class GF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return R.jsxs("div",{className:"map-container",children:[R.jsxs("div",{className:"top-nav-float",children:[R.jsx("nav",{className:"top-nav",children:R.jsxs("div",{className:"nav-left",children:[R.jsx("div",{className:"nav-icon",children:R.jsx("i",{className:"fas fa-circle"})}),R.jsx("div",{className:"title-name",children:"Content"})]})}),R.jsx("div",{className:"search-container",children:R.jsxs("div",{className:"search-bar",children:[R.jsx("i",{className:"fas fa-search search-icon"}),R.jsx("input",{onChange:e=>{this.dispatch({tags:e.target.value})},className:"search-input",placeholder:"Search"})]})}),R.jsx("div",{className:"filter",children:R.jsxs("div",{className:"row row-space-between",children:[R.jsx(zt,{to:"/sequence",className:"btn-gray",children:"New Sequence"}),R.jsx(zt,{to:"/template",className:"btn-gray",children:"New Template"}),R.jsx("div",{className:"btn-gray",children:"New AI"})]})})]}),R.jsx("div",{children:R.jsx(Yt,{theme:"defaultCard",content:R.jsx($F,{})})}),R.jsx("div",{children:R.jsx(Yt,{theme:"defaultCard",content:R.jsx(KF,{})})})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class JF extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.propsState.currentUser.getJson()._id}}async componentDidMount(){this.getComponentsFromBackend()}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.state.gotComponents&&R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(GF,{})})})}}class h1 extends hF{async componentDidMount(){await this.getComponentsFromBackend();const e=this.urlId;if(!e||e==="template"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}getInnerContent(){return R.jsxs("div",{className:"fit",children:[R.jsx("h1",{children:"Template Details"}),R.jsx("div",{className:"input-container",children:R.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&R.jsx(pt,{type:"quill",name:"content",obj:this.propsState.currentComponent})})}),R.jsx(gs,{content:"Save Template"})]})}render(){return R.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class QF extends Xe{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return R.jsx("div",{className:"sequence",children:R.jsx("div",{onClick:()=>{debugger;let n=this.props.obj,i=this.propsState.selectedContacts,a=this.componentList.getList("step",[n.getJson()._id],["sequenceId"]);if(a=a.filter(l=>l.getJson().content!==""&&l.getJson().content)[0],(i==null?void 0:i.length)>0){debugger;let l=parseFloat(a.getJson().nextSend),c=new Date(Date.now()+l*60*60*1e3);c=Dt.fromDate(c);for(let h of i)h.setCompState({sequenceId:n.getJson()._id,finished:!1,emailNumber:0,nextSend:c},{run:!0});this.dispatch({popupSwitch:"",selectedContacts:[]})}},className:"title",children:R.jsx("div",{className:"title-left",children:t.name})})})}}class YF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var e;return R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"65%"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsx("h2",{children:"Add to Sequence"})," ","contacts: ",((e=this.propsState.selectedContacts)==null?void 0:e.length)||"0",R.jsx(sn,{name:"sequence",cells:[{type:"custom",custom:QF}]})]})}}let XF=[{type:"email",body:"Hey John, just wanted to follow up on our conversation yesterday. Do you think the software is a good fit for your team? I'm happy to set up another demo or go over pricing options",conversationId:"123",_id:"email1",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Hey John, just wanted to follow up on our conversation yesterday. Do you think the software is a good fit for your team? I'm happy to set up another demo or go over pricing options",conversationId:"123",_id:"email1",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Can you get me a price estimate that I can bring back to my team?",conversationId:"123",_id:"email2",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"email",body:"Hi Jane, AI can find the contacts you need to reach out to TODAY. Let me know if you can connect today.",conversationId:"1234",_id:"email3",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Sure I have time arround 3pm tomorrow afternoon",conversationId:"1234",_id:"email4",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"email",body:"Hey Taylor Just let me know if it would be good to meet today or not.",conversationId:"1235",_id:"email5",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"No I can't to this week.",conversationId:"1235",_id:"email6",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"conversation",_id:"123",recipient:"taylormdavidson@gmail.com",senderName:"John Doe",timeStamp:"Today 2:15 pm",recentMessage:"Hey, how's it going?",owner:"alan@salescapture.com"},{type:"conversation",_id:"1234",recipient:"taylormdavidson@gmail.com",senderName:"Jane Doe",timeStamp:"Today 2:15 pm",recentMessage:"Hey, how's it going?",owner:"alan@salescapture.com"},{type:"conversation",_id:"1235",recipient:"taylormdavidson@gmail.com",senderName:"Taylor Davidson",timeStamp:"Today 2:15 pm",recentMessage:"Can you get me a price estimate that I can bring back to my team?",owner:"alan@salescapture.com"},{type:"contact",_id:"contact1",mobile:"(365)446-2581",firstName:"Taylor",lastName:"Davidson",name:"Taylor Davidson",email:"taylormdavidson@gmail.com",owner:"alan@salescapture.com "},{type:"potentialProspect",_id:"prospect1",firstName:"Taylor Davidson",email:"taylormdavidson@gmail.com",owner:"alan@salescapture.com ",researchId:"research1"},{type:"research",_id:"research1",name:"research1",owner:"alan@salescapture.com "},{type:"task",name:"my task",dueDate:"April 25, 2025",_id:"task1"},{type:"task",name:"my task",dueDate:"April 25, 2025",_id:"task2"},{_id:1,name:"Jodie Soultfair",dayIndex:0,startTime:"10:00",duration:90,type:"calendarEvent"},{_id:2,name:"Cameron Bates",dayIndex:0,startTime:"11:30",duration:45,type:"calendarEvent"},{_id:3,name:"Tyler Sinclair",dayIndex:3,startTime:"13:00",duration:60,type:"calendarEvent"},{_id:4,name:"Stephanie Moore",dayIndex:5,startTime:"14:30",duration:60,type:"calendarEvent"},{_id:5,name:"Kevin Landry",dayIndex:4,startTime:"17:00",duration:60,type:"calendarEvent"}];class ZF extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){this.props.obj;let e=R.jsx(gs,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(e=R.jsx(Xl,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsx("br",{}),R.jsxs("div",{className:"content-home-add",children:[R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Subject:"}),R.jsx(pt,{obj:this.propsState.currentPopupComponent,name:"subject",wrapperClass:"underline-form"})]}),R.jsx("div",{className:"row",children:R.jsx(pt,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Trigger this step in:"}),R.jsx(pt,{obj:this.propsState.currentPopupComponent,name:"nextSend",wrapperClass:"underline-form",wrapperStyle:{width:"10%",marginRight:"8px"}})," days"]}),R.jsxs("div",{className:"row",children:[this.propsState.popupSwitch.includes("update")&&R.jsx(_a,{obj:this.propsState.currentPopupComponent,formClass:"del-button-1",callbackFunc:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}}),R.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"},children:R.jsx(wM,{obj:this.propsState.currentPopupComponent,content:R.jsx("div",{style:{display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",fontSize:"19px",width:"37px",height:"37px",background:"#378c75",color:"#ade0d3"},children:R.jsx("div",{className:"icon-last",children:R.jsx("i",{className:"fa-solid fa-plus"})})})})}),R.jsx("div",{className:"col",children:e})]}),R.jsx("div",{})]})]})}}const e4="/assets/viridianLogo-BMzd4uKK.png",t4=()=>{const[r,e]=ye.useState(!1),t=ye.useRef(null),n=l=>{if(l.code){const c=l.code;console.log("Received authorization code:",c),i(c)}else console.error("Authorization failed or denied:",l),alert("Failed to connect Gmail. Please try again.")},i=l=>{fetch("http://localhost:3000/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l})}).then(h=>{if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return h.json()}).then(h=>{console.log("Backend response after token exchange:",h),h.success?(e(!0),alert("Gmail connected successfully!")):alert(`Failed to connect Gmail: ${h.error}`)}).catch(h=>{console.error("Error sending code to backend:",h),alert("Failed to complete connection. Please try again."),e(!1)})};ye.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,document.body.appendChild(l),l.onload=()=>{t.current=google.accounts.oauth2.initCodeClient({client_id:"592520451667-0sphkcuj07fg9scli2p8u78bjs1uk86k.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/gmail.modify",redirect_uri:"http://localhost:3000/google",callback:n}),console.log("Google Identity Services client initialized.")},()=>{document.body.removeChild(l)}},[]);const a=()=>{t.current?t.current.requestCode():(console.error("Google Identity Services client not initialized."),alert("Google services are not ready. Please try again in a moment."))};return R.jsxs("div",{style:{padding:"1.5rem",maxWidth:"24rem",margin:"0 auto",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",gap:"1rem"},children:[R.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",marginBottom:"1rem"},children:"Gmail Integration"}),r?R.jsx("p",{style:{color:"#10b981",textAlign:"center",fontWeight:"semibold",marginBottom:"1rem"},children:"Gmail Connected!"}):R.jsx("button",{onClick:a,disabled:!t.current,style:{width:"100%",backgroundColor:"#3b82f6",color:"#fff",fontWeight:"bold",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem",paddingRight:"1rem",borderRadius:"0.25rem",border:"none",cursor:t.current?"pointer":"not-allowed",opacity:t.current?1:.5,transition:"background-color 0.2s ease-in-out"},children:t.current?"Connect Gmail":"Loading..."}),R.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:"Connect your Gmail account to send emails directly through our platform."})]})};class n4 extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return R.jsx("div",{className:"mobile-container",children:R.jsx(t4,{})})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{marginLeft:"300px",width:"80%"},children:this.getInnerContent()})}}class r4 extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(n4,{})})})}}class i4 extends HC{getHtml(){return console.log("this.list",this.list),console.log("this.mapList",this.mapList),R.jsxs("div",{className:"bottom-nav",children:[R.jsxs(zt,{to:"/conversation",className:"bottom-nav-item",children:[R.jsx("i",{className:"fa-solid fa-message"}),R.jsx("span",{children:"Messages"})]}),R.jsxs(zt,{to:"/contacts",className:"bottom-nav-item",children:[R.jsx("i",{className:"fa-solid fa-address-book"}),R.jsx("span",{children:"Contacts"})]}),R.jsx("a",{href:"#",className:"bottom-nav-item",children:R.jsx("div",{id:"float-btn-plus",className:"float-btn",children:R.jsx("i",{className:"fas fa-plus"})})}),R.jsxs(zt,{to:"/research",className:"bottom-nav-item",children:[R.jsx("i",{className:"fa-solid fa-graduation-cap"}),R.jsx("span",{children:"Research"})]}),R.jsxs(zt,{to:"/content",className:"bottom-nav-item",children:[R.jsx("i",{className:"fa-solid fa-briefcase"}),R.jsx("span",{children:"Content"})]})]})}}class s4 extends Xe{constructor(t){super(t);ae(this,"handleCheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n.includes(t)||n.push(t),this.dispatch({selectedContacts:n})});ae(this,"handleUncheckContact",t=>{let n=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];n=n.filter(i=>i!==t),this.dispatch({selectedContacts:n})})}render(){var i,a;const{obj:t}=this.props;let n=t.getJson();return R.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[R.jsx("div",{className:"contact-item",children:R.jsxs("div",{className:"contact-info",children:[R.jsx(zt,{to:`../session/${(i=this.componentList.getComponent("session",n._id,"taskId"))==null?void 0:i.getJson()._id}`,className:"contact-name",children:`${n.name}`}),R.jsx("div",{className:"contact-desc",children:n.dueDate})]})}),R.jsx("div",{className:"contact-tag-container active",children:(a=n.tags)==null?void 0:a.split(",").map((l,c)=>{var h;return R.jsx(zt,{to:`../session/${(h=this.componentList.getComponent("session",n._id,"taskId"))==null?void 0:h.getJson()._id}`,className:"contact-tag-btn",children:l},c)})})]})}}class o4 extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),n=[];if(e)for(let a of e){let l=t.filter(c=>c.getJson().tags.includes(a));n=[...n,...l]}else n=[...t];this.dispatch({selectedContacts:n})}getInnerContent(){var e;return R.jsxs("div",{className:"mobile-container",children:[R.jsx("div",{className:"task-name",children:R.jsx("div",{children:"Tasks"})}),R.jsx(sn,{filterFunc:t=>{if(!this.propsState.tags)return!0;let n=this.propsState.tags.split(",");for(let i of n)if(i!==""&&t.getJson().tags.includes(i))return!0;return!1},name:"task",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:s4}],hasLink:!0}),((e=this.propsState.selectedContacts)==null?void 0:e.length)>0&&R.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[R.jsx("button",{className:"floating-select-btn",children:R.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),R.jsx("button",{onClick:()=>{for(let t of this.propsState.selectedContacts)t.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:R.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),R.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:R.jsx(zn,{formclassName:"FCImgButton",content:R.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Ym extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit task-container-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return R.jsx("div",{style:{marginLeft:"250px"},className:this.props.pageClass||this.state.defaultClass,children:R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(o4,{})})})}}const a4=(r,e)=>{const[t,n]=r.split(":").map(Number),l=(t*60+n-10*60)/60*60,c=e/60*60;return{top:`${l}px`,height:`${c}px`}};class l4 extends Xe{constructor(e){super(e)}render(){var i;const{obj:e}=this.props;let t=e.getJson();const n=a4(t.startTime,t.duration);return R.jsx("div",{className:"weekly-calendar__event",style:n,children:R.jsx(zt,{to:`../session/${(i=this.componentList.getComponent("session",t._id,"eventId"))==null?void 0:i.getJson()._id}`,className:"weekly-calendar__event-name",children:t.name})},t._id)}}const u4=r=>{const e=r.getDay(),t=r.getDate()-e+(e===0?-6:1);return new Date(r.setDate(t))},c4=r=>{const e=[];for(let t=0;t<7;t++){const n=new Date(r);n.setDate(r.getDate()+t),e.push(n)}return e},h4=r=>{const e=r>=12?"PM":"AM";return`${r%12||12} ${e}`};class f4 extends Xe{constructor(t){super(t);ae(this,"handlePreviousWeek",()=>{this.setState(t=>{const n=new Date(t.currentWeekStart);return n.setDate(n.getDate()-7),{currentWeekStart:n}})});ae(this,"handleNextWeek",()=>{this.setState(t=>{const n=new Date(t.currentWeekStart);return n.setDate(n.getDate()+7),{currentWeekStart:n}})});const i=u4(new Date);this.state={...this.state,defaultClass:"fit",title:"Contacts",currentWeekStart:i,events:[]}}filterFunc(){var a;let t=((a=this.propsState.tags)==null?void 0:a.split(","))||"",n=this.componentList.getList("contact"),i=[];if(t)for(let l of t){let c=n.filter(h=>h.getJson().tags.includes(l));i=[...i,...c]}else i=[...n];this.dispatch({selectedContacts:i})}getInnerContent(){const t=c4(this.state.currentWeekStart),n=Array.from({length:10},(i,a)=>10+a);return R.jsxs("div",{className:"weekly-calendar",children:[R.jsxs("div",{className:"weekly-calendar__header",children:[R.jsx("div",{className:"weekly-calendar__title",children:"Schedule"}),R.jsxs("div",{className:"weekly-calendar__nav",children:[R.jsx("button",{onClick:this.handlePreviousWeek,children:"<"}),R.jsx("button",{onClick:this.handleNextWeek,children:">"})]})]}),R.jsxs("div",{className:"weekly-calendar__grid",children:[R.jsx("div",{className:"weekly-calendar__time-axis",children:n.map(i=>R.jsx("div",{className:"weekly-calendar__time-slot-label",children:h4(i)},i))}),R.jsx("div",{className:"weekly-calendar__days",children:t.map((i,a)=>R.jsxs("div",{className:"weekly-calendar__day",children:[R.jsx("div",{className:"weekly-calendar__day-header",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),R.jsxs("div",{className:"weekly-calendar__events-container",children:[n.slice(0,-1).map((l,c)=>R.jsx("div",{className:"weekly-calendar__hour-line"},`line-${a}-${c}`)),R.jsx(sn,{name:"calendarEvent",filterFunc:l=>{let c=l.getJson();const h=new Date(this.state.currentWeekStart);return h.setDate(h.getDate()+c.dayIndex),h.toDateString()===i.toDateString()},cells:[{type:"custom",custom:l4}]})]})]},i.toISOString()))})]})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Xm extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit schedule-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(f4,{})})})}}class d4 extends Xe{constructor(e){var t,n;super(e),this.state={...this.state,day:(t=this.propsState.currentPopupComponent)==null?void 0:t.getJson().day,time:(n=this.propsState.currentPopupComponent)==null?void 0:n.getJson().startTime,defaultClass:"fit scroller"}}render(){var g,p,y;const e={display:"flex",marginBottom:"20px",alignItems:"center"},t={width:"30%",fontWeight:"600",fontSize:"14px"},n={width:"70%"},i={width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #ccc",borderRadius:"4px",boxSizing:"border-box"};let a=window.innerWidth>600;(g=this.propsState.popupSwitch)!=null&&g.includes("addCalendarEvent")&&(a=!1);let l=this.propsState.currentPopupComponent;const c=a?this.propsState.currentPopupComponent:this.propsState.currentPopupComponent,h=!a;let d=l?"Edit":"Add",v=R.jsx(gs,{content:"Save",isPopup:h,callbackFunc:async()=>{debugger;let w=await this.operationsFactory.prepare({prepare:{type:"task",contactId:this.propsState.currentContact.getJson()._id,eventId:l.getJson()._id,name:l.getJson().name}});w=w[0],this.operationsFactory.prepare({prepare:{type:"session",contactId:this.propsState.currentContact.getJson()._id,eventId:l.getJson()._id,taskId:w.getJson()._id},run:!0})}});return((p=this.propsState.popupSwitch)!=null&&p.includes("updateCalendarEvent")||window.innerWidth>600&&!((y=this.propsState.popupSwitch)!=null&&y.includes("addCalendarEvent")))&&(v=R.jsx(Xl,{obj:c,content:"Save",isPopup:h,callbackFunc:this.props.callbackFunc})),R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsxs("h2",{children:[d," Appointment"]})," ",R.jsxs("div",{className:"contact-Add-container",children:[R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Name"}),R.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",R.jsx(pt,{obj:l,name:"name",inPopup:h})," "]})]}),R.jsxs("div",{className:"row",style:e,children:[R.jsx("div",{style:t,children:"Day of Week"}),R.jsx("div",{style:n,children:R.jsxs("select",{value:this.state.day||"",onChange:w=>{debugger;console.log("Day of week changed to",w.target.value);let S=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];this.setState({day:w.target.value});const T=S.findIndex(E=>E===w.target.value);l.setCompState({dayIndex:T,day:w.target.value})},style:i,children:[R.jsx("option",{value:"",children:"Select a day"}),R.jsx("option",{value:"Monday",children:"Monday"}),R.jsx("option",{value:"Tuesday",children:"Tuesday"}),R.jsx("option",{value:"Wednesday",children:"Wednesday"}),R.jsx("option",{value:"Thursday",children:"Thursday"}),R.jsx("option",{value:"Friday",children:"Friday"}),R.jsx("option",{value:"Saturday",children:"Saturday"}),R.jsx("option",{value:"Sunday",children:"Sunday"})]})})]}),R.jsxs("div",{className:"row",style:e,children:[R.jsx("div",{style:t,children:"Time of Day"}),R.jsx("div",{style:n,children:R.jsx("input",{type:"time",value:this.state.time||"",onChange:w=>{this.setState({time:w.target.value}),l.setCompState({startTime:w.target.value})},style:i})})]}),R.jsxs("div",{className:"row",style:e,children:[R.jsx("div",{style:t,children:"Duration"}),R.jsx("div",{style:n,children:R.jsx(pt,{name:"duration",obj:l})})]}),R.jsxs("div",{className:"popupButton",style:{width:"50%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",R.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",v]})," "]})]})]})}}class ZC extends Xe{constructor(e){super(e),this.projectName="Homework",this.state={...this.state,defaultClass:"fit scroller"}}render(){let e=this.props.obj?"Edit":"Add",t=R.jsx(gs,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(t=R.jsx(Xl,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsx("br",{}),R.jsxs("div",{className:"content-home-add",children:[R.jsxs("div",{children:[e," ",this.projectName]}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Name: "}),R.jsx(pt,{obj:this.propsState.currentPopupComponent,name:"name",wrapperClass:"underline-form"})]}),R.jsx("div",{className:"row",children:R.jsx(pt,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),R.jsxs("div",{className:"row",children:[R.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"}}),R.jsx("div",{className:"col",children:t})]}),R.jsx("div",{})]})]})}}class p4 extends ZC{constructor(e){super(e),this.projectName="Goal",this.state={...this.state,defaultClass:"fit scroller"}}}class m4 extends Xe{constructor(e){super(e),this.projectName="Homework",this.state={...this.state,defaultClass:"fit scroller"}}getSessionIdFromPath(){const t=window.location.pathname.match(/^\/session\/([^/]+)/);return t?t[1]:null}componentDidMount(){let e=this.getSessionIdFromPath(),t=this.componentList.getComponent("session",e);this.dispatch({currentSession:t})}render(){this.props.obj;let e=R.jsx(gs,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return R.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[R.jsx("br",{}),this.propsState.currentSession&&R.jsx(R.Fragment,{children:R.jsxs("div",{className:"content-home-add",children:[R.jsx("div",{children:"Session"}),R.jsxs("div",{className:"row",children:[R.jsx("div",{children:"Name: "}),R.jsx(pt,{obj:this.propsState.currentSession,name:"name",wrapperClass:"underline-form"})]}),R.jsx("div",{className:"row",children:R.jsx(pt,{type:"quill",obj:this.propsState.currentSession,name:"content",wrapperClass:"contentWrapper"})}),R.jsxs("div",{className:"row",children:[R.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"}}),R.jsx("div",{className:"col",children:e})]}),R.jsx("div",{})]})})]})}}class f1 extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit task-container-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return R.jsx("div",{style:{marginLeft:"250px"},className:this.props.pageClass||this.state.defaultClass,children:R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(m4,{})})})}}class g4 extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return R.jsxs("div",{className:"mobile-container",children:[R.jsx("div",{className:"task-name",children:R.jsx("div",{children:"Register"})}),R.jsx("input",{type:"text",value:this.state.email,onChange:e=>{let{value:t}=e.target;this.setState({email:t})},placeholder:"Enter Email"}),R.jsx("input",{type:this.state.showPasswords?"text":"password",value:this.state.password,onChange:e=>{let{value:t}=e.target;this.setState({password:t})},placeholder:"Enter password"}),R.jsx("input",{type:this.state.showPasswords?"text":"password",value:this.state.password2,onChange:e=>{let{value:t}=e.target;this.setState({password2:t})},placeholder:"Confirm password"}),R.jsx("div",{children:R.jsxs("label",{children:[R.jsx("input",{type:"checkbox",checked:this.state.showPasswords,onChange:e=>{this.setState({showPasswords:e.target.checked})}}),"Show Passwords"]})}),R.jsx("div",{onClick:async()=>{if(this.state.password!==this.state.password2)this.setState({message:"Please make sure both passwords are the same"});else{debugger;this.setState({message:""});let e=this.state.password,t=this.state.email;await this.componentList.getAPIService().register(t,e);let n=Jm.getIdFromURL(),i=await this.componentList.getComponentFromBackend({type:"contact",ids:n,filterKeys:"_id"}),l=(await this.operationsFactory.prepare({prepare:{type:"user",role:"client",firstTime:!0,coachId:i.getJson().owner,email:i.getJson().email,owner:i.getJson().email,_id:i.getJson().email,collection:i.getJson().email}}))[0];this.dispatch({prepUser:l,clientRegisterState:"startQuestions",currentContact:i})}},children:"Submit"}),this.state.message&&R.jsx("div",{className:"error-message",children:this.state.message})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class y4 extends Xe{constructor(t){super(t);ae(this,"handleBegin",()=>{this.dispatch({clientRegisterState:"clientInfo"})});this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return R.jsxs("div",{className:"welcome-container",children:[R.jsx("h1",{className:"welcome-title",children:"Welcome to Viridian Coaching"}),R.jsx("p",{className:"welcome-subtitle",children:"Your coach has a few questions for you"}),R.jsx("button",{className:"begin-button",onClick:this.handleBegin,children:"Begin"})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class v4 extends Xe{constructor(t){super(t);ae(this,"handleChange",t=>n=>{this.setState({[t]:n.target.value})});ae(this,"handleSubmit",()=>{this.propsState.currentContact.setCompState({birth:`${this.state.month}/${this.state.day}/${this.state.year}`},{run:!0}),this.dispatch({clientRegisterState:"aboutYou"})});this.state={...this.state,name:"",phone:"",email:"",day:"",month:"",year:""}}getInnerContent(){let t=this.propsState.currentContact;return R.jsxs("div",{className:"bio-container",children:[R.jsx("h1",{className:"bio-title",children:"Biographical Info"}),R.jsx(pt,{obj:t,name:"firstName"}),R.jsx(pt,{obj:t,name:"lastName"}),R.jsxs("div",{className:"bio-input-icon",children:[R.jsx("span",{className:"icon",children:"📞"}),R.jsx(pt,{obj:t,name:"phone"})]}),R.jsxs("div",{className:"bio-input-icon",children:[R.jsx("span",{className:"icon",children:"✉️"}),R.jsx(pt,{obj:t,name:"email"})]}),R.jsxs("div",{className:"dob-container",children:[R.jsx("span",{className:"icon",children:"🎂"}),R.jsxs("select",{className:"dob-select",value:this.state.day,onChange:()=>{this.handleChange("day")},children:[R.jsx("option",{value:"",children:"Day"}),Array.from({length:31},(n,i)=>R.jsx("option",{value:i+1,children:i+1},i+1))]}),R.jsxs("select",{className:"dob-select",value:this.state.month,onChange:this.handleChange("month"),children:[R.jsx("option",{value:"",children:"Month"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((n,i)=>R.jsx("option",{value:i+1,children:n},i))]}),R.jsxs("select",{className:"dob-select",value:this.state.year,onChange:this.handleChange("year"),children:[R.jsx("option",{value:"",children:"Year"}),Array.from({length:100},(n,i)=>{const a=new Date().getFullYear()-i;return R.jsx("option",{value:a,children:a},a)})]})]}),R.jsx("button",{className:"submit-button",onClick:this.handleSubmit,children:"Submit"})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class _4 extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"dashboard-container scroller"}}render(){var l,c;const e=(l=this.propsState.currentUser)==null?void 0:l.getJson(),t=this.propsState.currentGoal,n=this.propsState.nextAppointment,i=this.propsState.billingStatus,a=this.propsState.coachProfile;return R.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,style:{padding:"20px",height:"100%",overflowY:"auto"},children:[R.jsxs("div",{className:"row row-align-start",children:[R.jsx("div",{className:"col col-expand",children:R.jsxs("div",{className:"dashboard-card",children:[R.jsx("div",{className:"card-header",children:"Your Current Goal"}),R.jsxs("div",{className:"card-content",children:[R.jsx("h2",{className:"goal-title",children:(t==null?void 0:t.getJson().title)||"No active goal"}),R.jsx(zn,{content:"Mark Complete",obj:t,popupSwitch:"completeGoal"})]})]})}),R.jsx("div",{className:"col col-fixed",children:R.jsxs("div",{className:"dashboard-card",children:[R.jsx("div",{className:"card-header",children:"Your Life Coach"}),R.jsxs("div",{className:"card-content coach-info",children:[(a==null?void 0:a.avatarUrl)&&R.jsx("img",{className:"coach-avatar",src:a.avatarUrl,alt:"Coach avatar"}),R.jsxs("div",{className:"coach-name",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),R.jsxs("div",{className:"coach-contact row row-left",children:[R.jsx("i",{className:"fa-solid fa-phone"})," ",a==null?void 0:a.phone]}),R.jsxs("div",{className:"coach-contact row row-left",children:[R.jsx("i",{className:"fa-solid fa-envelope"})," ",a==null?void 0:a.email]}),R.jsx(zn,{content:"Send Message",popupSwitch:"messageCoach"})]})]})})]}),R.jsxs("div",{className:"row row-align-start",children:[R.jsx("div",{className:"col",children:R.jsxs("div",{className:"dashboard-card",children:[R.jsx("div",{className:"card-header",children:"Next Appointment"}),R.jsx("div",{className:"card-content",children:n?R.jsxs(R.Fragment,{children:[R.jsxs("h3",{children:[n.getJson().dayOfWeek," | ",n.getJson().time]}),R.jsx("div",{children:n.getJson().date})]}):R.jsx("div",{children:"No upcoming appointments"})})]})}),R.jsx("div",{className:"col",children:R.jsxs("div",{className:"dashboard-card",children:[R.jsx("div",{className:"card-header",children:"Billing Status"}),R.jsxs("div",{className:"card-content",children:[R.jsxs("h3",{className:"billing-amount",children:["$",((c=i==null?void 0:i.amount)==null?void 0:c.toFixed(2))||"0.00"]}),R.jsx(zn,{content:"Pay Now",popupSwitch:"payNow"})]})]})}),R.jsx("div",{className:"col",children:R.jsxs("div",{className:"dashboard-card",children:[R.jsx("div",{className:"card-header",children:"Current Tasks"}),R.jsx("div",{className:"card-content",children:R.jsx(sn,{name:"homework",cells:[{type:"custom",custom:XC}],filter:{search:e._id,attribute:"contactId"}})})]})})]})]})}}class eI extends ys{constructor(e){super(e),this.state={...this.state,defaultClass:"fit client-dash-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.propsState.currentContact&&R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(_4,{})})})}}class w4 extends Xe{constructor(t){super(t);ae(this,"handleTextChange",t=>{this.setState({aboutText:t.target.value})});ae(this,"handleCoachChange",t=>()=>{this.setState({hadCoach:t}),this.propsState.currentContact.setCompState({coachAnswer:t})});ae(this,"handleBack",()=>{console.log("Go back")});ae(this,"handleContinue",async()=>{await this.operationsFactory.run(),await this.propsState.currentContact.update(),this.dispatch({currentUser:this.propsState.currentContact,routes:[{comp:eI,name:"Dash",path:"/"},{comp:Ym,name:"Tasks",path:"/tasks"},{comp:Qm,name:"Messages",path:"conversation"},{comp:Xm,name:"Schedule",path:"schedule"},{comp:r4,name:"Billing",path:"billing"}]})});this.state={...this.state,aboutText:"",hadCoach:null}}getInnerContent(){let t=this.propsState.currentContact;return R.jsxs("div",{className:"about-container",children:[R.jsx("h1",{className:"about-title",children:"About You"}),R.jsx("p",{className:"about-question",children:"What's your current occupation and life situation? (e.g. work, relationships, family, etc.)"}),R.jsx(pt,{obj:t,name:"work"}),R.jsxs("div",{className:"about-coach",children:[R.jsx("span",{className:"about-question",children:"Have you worked with a coach or therapist before?"}),R.jsxs("label",{className:"checkbox-label",children:[R.jsx("input",{type:"checkbox",checked:this.state.hadCoach==="yes",onChange:this.handleCoachChange("yes")}),"Yes"]}),R.jsxs("label",{className:"checkbox-label",children:[R.jsx("input",{type:"checkbox",checked:this.state.hadCoach==="no",onChange:this.handleCoachChange("no")}),"No"]})]}),R.jsxs("div",{className:"about-nav",children:[R.jsx("button",{className:"back-button",onClick:this.handleBack,children:"Go Back"}),R.jsx("button",{className:"continue-button",onClick:this.handleContinue,children:"Continue"})]})]})}render(){return R.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class d1 extends Xe{constructor(e){super(e),this.state={...this.state,defaultClass:"fit task-container-div"}}render(){const e={default:g4,startQuestions:y4,clientInfo:v4,aboutYou:w4},t=this.propsState.clientRegisterState||"default",n=e[t]||e.default;return R.jsx("div",{style:{marginLeft:"250px"},className:this.props.pageClass||this.state.defaultClass,children:R.jsx(Yt,{theme:"NoBorder",type:"fit",content:R.jsx(n,{})})})}}class E4 extends mF{constructor(e){super(e,{db:s2,endpoint:"viridian",auth:o2,storage:i2}),this.popupComponents={contact:RF,step:ZF,calendarEvent:d4,homework:ZC,goal:p4},this.popupComponentsProps={},oh.getFactory().registerComponent("bottomNavMap",i4),this.componentList.addComponents([...XF],!0),this.state={...this.state,navBarProps:{mapType:window.innerWidth<600?"bottomNavMap":void 0,type:window.innerWidth<600?"topBar":void 0,style:{backgroundColor:"white",color:"black"},cardStyle:{backgroundColor:"white",position:window.innerWidth<600&&"absolute",bottom:window.innerWidth<600&&"0px"},logoURL:window.innerWidth>600&&e4,linkItemStyle:{color:"black"}},routes:[{comp:Ym,name:"Tasks",path:"/"},{comp:Qm,name:"Messages",path:"conversation"},{comp:Xm,name:"Schedule",path:"schedule"},{comp:FF,name:"Clients",path:"clients"},{comp:JF,name:"Content",path:"content"},{comp:f1,name:"",path:"session",idComp:f1},{comp:h1,name:"",path:"template",idComp:h1}],extraAuthRoutes:[{comp:d1,path:"/clientregister",idComp:d1}],popups:[{content:YF,popupSwitch:"addToSequence"}]},this.registerListWithFactory([...Object.values(xF)]);let t=oh.getNavList();t.update(0,{class:"SCAILogo"}),t.update(1,{activeClass:"SCAILink"}),window.innerWidth<600&&(t.remove(2),t.remove(0))}async checkForUser(){var t;debugger;let e=await this.APIService.getCurrentUser();e&&await this.APIService.checkIfLoggedIn()&&await this.APIService.getuser(e.email),((t=this.state.currentUser)==null?void 0:t.getJson().role)==="client"&&this.dispatch({routes:[{comp:eI,name:"Dash",path:"/"},{comp:Ym,name:"Tasks",path:"/tasks"},{comp:Qm,name:"Messages",path:"conversation"},{comp:Xm,name:"Schedule",path:"schedule"}]})}}db.createRoot(document.getElementById("root")).render(R.jsx(ye.StrictMode,{children:R.jsx(E4,{})}));
