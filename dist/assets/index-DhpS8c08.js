var Vx=Object.defineProperty;var Bx=(n,e,t)=>e in n?Vx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var le=(n,e,t)=>Bx(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Np={exports:{}},Xl={},Lp={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function Ux(){if(uw)return ft;uw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.iterator;function d(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function E(F,U,H){this.props=F,this.context=U,this.refs=S,this.updater=H||g}E.prototype.isReactComponent={},E.prototype.setState=function(F,U){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,U,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=E.prototype;function w(F,U,H){this.props=F,this.context=U,this.refs=S,this.updater=H||g}var O=w.prototype=new _;O.constructor=w,C(O,E.prototype),O.isPureReactComponent=!0;var I=Array.isArray,L=Object.prototype.hasOwnProperty,V={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(F,U,H){var ne,te={},W=null,X=null;if(U!=null)for(ne in U.ref!==void 0&&(X=U.ref),U.key!==void 0&&(W=""+U.key),U)L.call(U,ne)&&!P.hasOwnProperty(ne)&&(te[ne]=U[ne]);var Q=arguments.length-2;if(Q===1)te.children=H;else if(1<Q){for(var ee=Array(Q),ae=0;ae<Q;ae++)ee[ae]=arguments[ae+2];te.children=ee}if(F&&F.defaultProps)for(ne in Q=F.defaultProps,Q)te[ne]===void 0&&(te[ne]=Q[ne]);return{$$typeof:n,type:F,key:W,ref:X,props:te,_owner:V.current}}function b(F,U){return{$$typeof:n,type:F.type,key:U,ref:F.ref,props:F.props,_owner:F._owner}}function A(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function x(F){var U={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(H){return U[H]})}var N=/\/+/g;function D(F,U){return typeof F=="object"&&F!==null&&F.key!=null?x(""+F.key):U.toString(36)}function z(F,U,H,ne,te){var W=typeof F;(W==="undefined"||W==="boolean")&&(F=null);var X=!1;if(F===null)X=!0;else switch(W){case"string":case"number":X=!0;break;case"object":switch(F.$$typeof){case n:case e:X=!0}}if(X)return X=F,te=te(X),F=ne===""?"."+D(X,0):ne,I(te)?(H="",F!=null&&(H=F.replace(N,"$&/")+"/"),z(te,U,H,"",function(ae){return ae})):te!=null&&(A(te)&&(te=b(te,H+(!te.key||X&&X.key===te.key?"":(""+te.key).replace(N,"$&/")+"/")+F)),U.push(te)),1;if(X=0,ne=ne===""?".":ne+":",I(F))for(var Q=0;Q<F.length;Q++){W=F[Q];var ee=ne+D(W,Q);X+=z(W,U,H,ee,te)}else if(ee=d(F),typeof ee=="function")for(F=ee.call(F),Q=0;!(W=F.next()).done;)W=W.value,ee=ne+D(W,Q++),X+=z(W,U,H,ee,te);else if(W==="object")throw U=String(F),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return X}function G(F,U,H){if(F==null)return F;var ne=[],te=0;return z(F,ne,"","",function(W){return U.call(H,W,te++)}),ne}function re(F){if(F._status===-1){var U=F._result;U=U(),U.then(function(H){(F._status===0||F._status===-1)&&(F._status=1,F._result=H)},function(H){(F._status===0||F._status===-1)&&(F._status=2,F._result=H)}),F._status===-1&&(F._status=0,F._result=U)}if(F._status===1)return F._result.default;throw F._result}var Z={current:null},ie={transition:null},J={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:ie,ReactCurrentOwner:V};function $(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:G,forEach:function(F,U,H){G(F,function(){U.apply(this,arguments)},H)},count:function(F){var U=0;return G(F,function(){U++}),U},toArray:function(F){return G(F,function(U){return U})||[]},only:function(F){if(!A(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ft.Component=E,ft.Fragment=t,ft.Profiler=i,ft.PureComponent=w,ft.StrictMode=r,ft.Suspense=h,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,ft.act=$,ft.cloneElement=function(F,U,H){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ne=C({},F.props),te=F.key,W=F.ref,X=F._owner;if(U!=null){if(U.ref!==void 0&&(W=U.ref,X=V.current),U.key!==void 0&&(te=""+U.key),F.type&&F.type.defaultProps)var Q=F.type.defaultProps;for(ee in U)L.call(U,ee)&&!P.hasOwnProperty(ee)&&(ne[ee]=U[ee]===void 0&&Q!==void 0?Q[ee]:U[ee])}var ee=arguments.length-2;if(ee===1)ne.children=H;else if(1<ee){Q=Array(ee);for(var ae=0;ae<ee;ae++)Q[ae]=arguments[ae+2];ne.children=Q}return{$$typeof:n,type:F.type,key:te,ref:W,props:ne,_owner:X}},ft.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},ft.createElement=T,ft.createFactory=function(F){var U=T.bind(null,F);return U.type=F,U},ft.createRef=function(){return{current:null}},ft.forwardRef=function(F){return{$$typeof:c,render:F}},ft.isValidElement=A,ft.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:re}},ft.memo=function(F,U){return{$$typeof:f,type:F,compare:U===void 0?null:U}},ft.startTransition=function(F){var U=ie.transition;ie.transition={};try{F()}finally{ie.transition=U}},ft.unstable_act=$,ft.useCallback=function(F,U){return Z.current.useCallback(F,U)},ft.useContext=function(F){return Z.current.useContext(F)},ft.useDebugValue=function(){},ft.useDeferredValue=function(F){return Z.current.useDeferredValue(F)},ft.useEffect=function(F,U){return Z.current.useEffect(F,U)},ft.useId=function(){return Z.current.useId()},ft.useImperativeHandle=function(F,U,H){return Z.current.useImperativeHandle(F,U,H)},ft.useInsertionEffect=function(F,U){return Z.current.useInsertionEffect(F,U)},ft.useLayoutEffect=function(F,U){return Z.current.useLayoutEffect(F,U)},ft.useMemo=function(F,U){return Z.current.useMemo(F,U)},ft.useReducer=function(F,U,H){return Z.current.useReducer(F,U,H)},ft.useRef=function(F){return Z.current.useRef(F)},ft.useState=function(F){return Z.current.useState(F)},ft.useSyncExternalStore=function(F,U,H){return Z.current.useSyncExternalStore(F,U,H)},ft.useTransition=function(){return Z.current.useTransition()},ft.version="18.3.1",ft}var cw;function vf(){return cw||(cw=1,Lp.exports=Ux()),Lp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function qx(){if(hw)return Xl;hw=1;var n=vf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var y,m={},d=null,g=null;f!==void 0&&(d=""+f),h.key!==void 0&&(d=""+h.key),h.ref!==void 0&&(g=h.ref);for(y in h)r.call(h,y)&&!o.hasOwnProperty(y)&&(m[y]=h[y]);if(c&&c.defaultProps)for(y in h=c.defaultProps,h)m[y]===void 0&&(m[y]=h[y]);return{$$typeof:e,type:c,key:d,ref:g,props:m,_owner:i.current}}return Xl.Fragment=t,Xl.jsx=l,Xl.jsxs=l,Xl}var fw;function zx(){return fw||(fw=1,Np.exports=qx()),Np.exports}var k=zx(),ye=vf();const qe=Cy(ye);var gh={},Dp={exports:{}},er={},Mp={exports:{}},jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function Hx(){return dw||(dw=1,function(n){function e(ie,J){var $=ie.length;ie.push(J);e:for(;0<$;){var F=$-1>>>1,U=ie[F];if(0<i(U,J))ie[F]=J,ie[$]=U,$=F;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var J=ie[0],$=ie.pop();if($!==J){ie[0]=$;e:for(var F=0,U=ie.length,H=U>>>1;F<H;){var ne=2*(F+1)-1,te=ie[ne],W=ne+1,X=ie[W];if(0>i(te,$))W<U&&0>i(X,te)?(ie[F]=X,ie[W]=$,F=W):(ie[F]=te,ie[ne]=$,F=ne);else if(W<U&&0>i(X,$))ie[F]=X,ie[W]=$,F=W;else break e}}return J}function i(ie,J){var $=ie.sortIndex-J.sortIndex;return $!==0?$:ie.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],y=1,m=null,d=3,g=!1,C=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(ie){for(var J=t(f);J!==null;){if(J.callback===null)r(f);else if(J.startTime<=ie)r(f),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(f)}}function I(ie){if(S=!1,O(ie),!C)if(t(h)!==null)C=!0,re(L);else{var J=t(f);J!==null&&Z(I,J.startTime-ie)}}function L(ie,J){C=!1,S&&(S=!1,_(T),T=-1),g=!0;var $=d;try{for(O(J),m=t(h);m!==null&&(!(m.expirationTime>J)||ie&&!x());){var F=m.callback;if(typeof F=="function"){m.callback=null,d=m.priorityLevel;var U=F(m.expirationTime<=J);J=n.unstable_now(),typeof U=="function"?m.callback=U:m===t(h)&&r(h),O(J)}else r(h);m=t(h)}if(m!==null)var H=!0;else{var ne=t(f);ne!==null&&Z(I,ne.startTime-J),H=!1}return H}finally{m=null,d=$,g=!1}}var V=!1,P=null,T=-1,b=5,A=-1;function x(){return!(n.unstable_now()-A<b)}function N(){if(P!==null){var ie=n.unstable_now();A=ie;var J=!0;try{J=P(!0,ie)}finally{J?D():(V=!1,P=null)}}else V=!1}var D;if(typeof w=="function")D=function(){w(N)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=N,D=function(){G.postMessage(null)}}else D=function(){E(N,0)};function re(ie){P=ie,V||(V=!0,D())}function Z(ie,J){T=E(function(){ie(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){C||g||(C=!0,re(L))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ie){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var $=d;d=J;try{return ie()}finally{d=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,J){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var $=d;d=ie;try{return J()}finally{d=$}},n.unstable_scheduleCallback=function(ie,J,$){var F=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?F+$:F):$=F,ie){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=$+U,ie={id:y++,callback:J,priorityLevel:ie,startTime:$,expirationTime:U,sortIndex:-1},$>F?(ie.sortIndex=$,e(f,ie),t(h)===null&&ie===t(f)&&(S?(_(T),T=-1):S=!0,Z(I,$-F))):(ie.sortIndex=U,e(h,ie),C||g||(C=!0,re(L))),ie},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(ie){var J=d;return function(){var $=d;d=J;try{return ie.apply(this,arguments)}finally{d=$}}}}(jp)),jp}var pw;function Wx(){return pw||(pw=1,Mp.exports=Hx()),Mp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function $x(){if(mw)return er;mw=1;var n=vf(),e=Wx();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},m={};function d(s){return h.call(m,s)?!0:h.call(y,s)?!1:f.test(s)?m[s]=!0:(y[s]=!0,!1)}function g(s,a,u,v){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return v?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function C(s,a,u,v){if(a===null||typeof a>"u"||g(s,a,u,v))return!0;if(v)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(s,a,u,v,R,j,q){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=v,this.attributeNamespace=R,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=j,this.removeEmptyString=q}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];E[a]=new S(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function w(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(_,w);E[a]=new S(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(_,w);E[a]=new S(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(_,w);E[a]=new S(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,a,u,v){var R=E.hasOwnProperty(a)?E[a]:null;(R!==null?R.type!==0:v||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(C(a,u,R,v)&&(u=null),v||R===null?d(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):R.mustUseProperty?s[R.propertyName]=u===null?R.type===3?!1:"":u:(a=R.attributeName,v=R.attributeNamespace,u===null?s.removeAttribute(a):(R=R.type,u=R===3||R===4&&u===!0?"":""+u,v?s.setAttributeNS(v,a,u):s.setAttribute(a,u))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),V=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),x=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),ie=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var $=Object.assign,F;function U(s){if(F===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+s}var H=!1;function ne(s,a){if(!s||H)return"";H=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(pe){var v=pe}Reflect.construct(s,[],a)}else{try{a.call()}catch(pe){v=pe}s.call(a.prototype)}else{try{throw Error()}catch(pe){v=pe}s()}}catch(pe){if(pe&&v&&typeof pe.stack=="string"){for(var R=pe.stack.split(`
`),j=v.stack.split(`
`),q=R.length-1,Y=j.length-1;1<=q&&0<=Y&&R[q]!==j[Y];)Y--;for(;1<=q&&0<=Y;q--,Y--)if(R[q]!==j[Y]){if(q!==1||Y!==1)do if(q--,Y--,0>Y||R[q]!==j[Y]){var se=`
`+R[q].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=q&&0<=Y);break}}}finally{H=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?U(s):""}function te(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function W(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case V:return"Portal";case b:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case z:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case x:return(s.displayName||"Context")+".Consumer";case A:return(s._context.displayName||"Context")+".Provider";case N:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return a=s.displayName||null,a!==null?a:W(s.type)||"Memo";case re:a=s._payload,s=s._init;try{return W(s(a))}catch{}}return null}function X(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(a);case 8:return a===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Q(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ee(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ae(s){var a=ee(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),v=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var R=u.get,j=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return R.call(this)},set:function(q){v=""+q,j.call(this,q)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return v},setValue:function(q){v=""+q},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ge(s){s._valueTracker||(s._valueTracker=ae(s))}function Se(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),v="";return s&&(v=ee(s)?s.checked?"true":"false":s.value),s=v,s!==u?(a.setValue(s),!0):!1}function Pe(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Oe(s,a){var u=a.checked;return $({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Ne(s,a){var u=a.defaultValue==null?"":a.defaultValue,v=a.checked!=null?a.checked:a.defaultChecked;u=Q(a.value!=null?a.value:u),s._wrapperState={initialChecked:v,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ue(s,a){a=a.checked,a!=null&&O(s,"checked",a,!1)}function Xe(s,a){Ue(s,a);var u=Q(a.value),v=a.type;if(u!=null)v==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(v==="submit"||v==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?de(s,a.type,u):a.hasOwnProperty("defaultValue")&&de(s,a.type,Q(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ue(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var v=a.type;if(!(v!=="submit"&&v!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function de(s,a,u){(a!=="number"||Pe(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ee=Array.isArray;function Ae(s,a,u,v){if(s=s.options,a){a={};for(var R=0;R<u.length;R++)a["$"+u[R]]=!0;for(u=0;u<s.length;u++)R=a.hasOwnProperty("$"+s[u].value),s[u].selected!==R&&(s[u].selected=R),R&&v&&(s[u].defaultSelected=!0)}else{for(u=""+Q(u),a=null,R=0;R<s.length;R++){if(s[R].value===u){s[R].selected=!0,v&&(s[R].defaultSelected=!0);return}a!==null||s[R].disabled||(a=s[R])}a!==null&&(a.selected=!0)}}function ve(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return $({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $e(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Ee(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Q(u)}}function De(s,a){var u=Q(a.value),v=Q(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),v!=null&&(s.defaultValue=""+v)}function ze(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Ge(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Ge(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var rt,$n=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,v,R){MSApp.execUnsafeLocalFunction(function(){return s(a,u,v,R)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(rt=rt||document.createElement("div"),rt.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=rt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function yt(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(s){Zt.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Rt[a]=Rt[s]})});function Pr(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Rt.hasOwnProperty(s)&&Rt[s]?(""+a).trim():a+"px"}function ts(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var v=u.indexOf("--")===0,R=Pr(u,a[u],v);u==="float"&&(u="cssFloat"),v?s.setProperty(u,R):s[u]=R}}var hl=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(s,a){if(a){if(hl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function dl(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ro=null;function Ko(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Go=null,yr=null,Zr=null;function Jo(s){if(s=jl(s)){if(typeof Go!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Rc(a),Go(s.stateNode,s.type,a))}}function ei(s){yr?Zr?Zr.push(s):Zr=[s]:yr=s}function pl(){if(yr){var s=yr,a=Zr;if(Zr=yr=null,Jo(s),a)for(s=0;s<a.length;s++)Jo(a[s])}}function io(s,a){return s(a)}function ml(){}var bi=!1;function gl(s,a,u){if(bi)return s(a,u);bi=!0;try{return io(s,a,u)}finally{bi=!1,(yr!==null||Zr!==null)&&(ml(),pl())}}function Jt(s,a){var u=s.stateNode;if(u===null)return null;var v=Rc(u);if(v===null)return null;u=v[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Qo=!1;if(c)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Qo=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Qo=!1}function so(s,a,u,v,R,j,q,Y,se){var pe=Array.prototype.slice.call(arguments,3);try{a.apply(u,pe)}catch(Ce){this.onError(Ce)}}var oo=!1,Yo=null,Nr=!1,yl=null,ad={onError:function(s){oo=!0,Yo=s}};function Xo(s,a,u,v,R,j,q,Y,se){oo=!1,Yo=null,so.apply(ad,arguments)}function tc(s,a,u,v,R,j,q,Y,se){if(Xo.apply(this,arguments),oo){if(oo){var pe=Yo;oo=!1,Yo=null}else throw Error(t(198));Nr||(Nr=!0,yl=pe)}}function Lr(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function ao(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Dr(s){if(Lr(s)!==s)throw Error(t(188))}function nc(s){var a=s.alternate;if(!a){if(a=Lr(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,v=a;;){var R=u.return;if(R===null)break;var j=R.alternate;if(j===null){if(v=R.return,v!==null){u=v;continue}break}if(R.child===j.child){for(j=R.child;j;){if(j===u)return Dr(R),s;if(j===v)return Dr(R),a;j=j.sibling}throw Error(t(188))}if(u.return!==v.return)u=R,v=j;else{for(var q=!1,Y=R.child;Y;){if(Y===u){q=!0,u=R,v=j;break}if(Y===v){q=!0,v=R,u=j;break}Y=Y.sibling}if(!q){for(Y=j.child;Y;){if(Y===u){q=!0,u=j,v=R;break}if(Y===v){q=!0,v=j,u=R;break}Y=Y.sibling}if(!q)throw Error(t(189))}}if(u.alternate!==v)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function vl(s){return s=nc(s),s!==null?Zo(s):null}function Zo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Zo(s);if(a!==null)return a;s=s.sibling}return null}var ea=e.unstable_scheduleCallback,_l=e.unstable_cancelCallback,rc=e.unstable_shouldYield,ld=e.unstable_requestPaint,Pt=e.unstable_now,ic=e.unstable_getCurrentPriorityLevel,lo=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,vr=e.unstable_NormalPriority,wl=e.unstable_LowPriority,sc=e.unstable_IdlePriority,uo=null,ir=null;function oc(s){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(uo,s,void 0,(s.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:lc,El=Math.log,ac=Math.LN2;function lc(s){return s>>>=0,s===0?32:31-(El(s)/ac|0)|0}var ta=64,na=4194304;function rs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function co(s,a){var u=s.pendingLanes;if(u===0)return 0;var v=0,R=s.suspendedLanes,j=s.pingedLanes,q=u&268435455;if(q!==0){var Y=q&~R;Y!==0?v=rs(Y):(j&=q,j!==0&&(v=rs(j)))}else q=u&~R,q!==0?v=rs(q):j!==0&&(v=rs(j));if(v===0)return 0;if(a!==0&&a!==v&&(a&R)===0&&(R=v&-v,j=a&-a,R>=j||R===16&&(j&4194240)!==0))return a;if((v&4)!==0&&(v|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=v;0<a;)u=31-jn(a),R=1<<u,v|=s[u],a&=~R;return v}function ud(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(s,a){for(var u=s.suspendedLanes,v=s.pingedLanes,R=s.expirationTimes,j=s.pendingLanes;0<j;){var q=31-jn(j),Y=1<<q,se=R[q];se===-1?((Y&u)===0||(Y&v)!==0)&&(R[q]=ud(Y,a)):se<=a&&(s.expiredLanes|=Y),j&=~Y}}function sr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ho(){var s=ta;return ta<<=1,(ta&4194240)===0&&(ta=64),s}function is(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function ss(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-jn(a),s[a]=u}function xt(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var v=s.eventTimes;for(s=s.expirationTimes;0<u;){var R=31-jn(u),j=1<<R;a[R]=0,v[R]=-1,s[R]=-1,u&=~j}}function os(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var v=31-jn(u),R=1<<v;R&a|s[v]&a&&(s[v]|=a),u&=~R}}var gt=0;function as(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var uc,ra,cc,hc,fc,Tl=!1,ti=[],_n=null,Mr=null,jr=null,ls=new Map,_r=new Map,ni=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(s,a){switch(s){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":ls.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(a.pointerId)}}function Kn(s,a,u,v,R,j){return s===null||s.nativeEvent!==j?(s={blockedOn:a,domEventName:u,eventSystemFlags:v,nativeEvent:j,targetContainers:[R]},a!==null&&(a=jl(a),a!==null&&ra(a)),s):(s.eventSystemFlags|=v,a=s.targetContainers,R!==null&&a.indexOf(R)===-1&&a.push(R),s)}function hd(s,a,u,v,R){switch(a){case"focusin":return _n=Kn(_n,s,a,u,v,R),!0;case"dragenter":return Mr=Kn(Mr,s,a,u,v,R),!0;case"mouseover":return jr=Kn(jr,s,a,u,v,R),!0;case"pointerover":var j=R.pointerId;return ls.set(j,Kn(ls.get(j)||null,s,a,u,v,R)),!0;case"gotpointercapture":return j=R.pointerId,_r.set(j,Kn(_r.get(j)||null,s,a,u,v,R)),!0}return!1}function pc(s){var a=yo(s.target);if(a!==null){var u=Lr(a);if(u!==null){if(a=u.tag,a===13){if(a=ao(u),a!==null){s.blockedOn=a,fc(s.priority,function(){cc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xi(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=ia(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var v=new u.constructor(u.type,u);ro=v,u.target.dispatchEvent(v),ro=null}else return a=jl(u),a!==null&&ra(a),s.blockedOn=u,!1;a.shift()}return!0}function fo(s,a,u){xi(s)&&u.delete(a)}function mc(){Tl=!1,_n!==null&&xi(_n)&&(_n=null),Mr!==null&&xi(Mr)&&(Mr=null),jr!==null&&xi(jr)&&(jr=null),ls.forEach(fo),_r.forEach(fo)}function Fr(s,a){s.blockedOn===a&&(s.blockedOn=null,Tl||(Tl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mc)))}function Vr(s){function a(R){return Fr(R,s)}if(0<ti.length){Fr(ti[0],s);for(var u=1;u<ti.length;u++){var v=ti[u];v.blockedOn===s&&(v.blockedOn=null)}}for(_n!==null&&Fr(_n,s),Mr!==null&&Fr(Mr,s),jr!==null&&Fr(jr,s),ls.forEach(a),_r.forEach(a),u=0;u<ni.length;u++)v=ni[u],v.blockedOn===s&&(v.blockedOn=null);for(;0<ni.length&&(u=ni[0],u.blockedOn===null);)pc(u),u.blockedOn===null&&ni.shift()}var ki=I.ReactCurrentBatchConfig,us=!0;function Vt(s,a,u,v){var R=gt,j=ki.transition;ki.transition=null;try{gt=1,Cl(s,a,u,v)}finally{gt=R,ki.transition=j}}function fd(s,a,u,v){var R=gt,j=ki.transition;ki.transition=null;try{gt=4,Cl(s,a,u,v)}finally{gt=R,ki.transition=j}}function Cl(s,a,u,v){if(us){var R=ia(s,a,u,v);if(R===null)Cd(s,a,v,po,u),dc(s,v);else if(hd(R,s,a,u,v))v.stopPropagation();else if(dc(s,v),a&4&&-1<cd.indexOf(s)){for(;R!==null;){var j=jl(R);if(j!==null&&uc(j),j=ia(s,a,u,v),j===null&&Cd(s,a,v,po,u),j===R)break;R=j}R!==null&&v.stopPropagation()}else Cd(s,a,v,null,u)}}var po=null;function ia(s,a,u,v){if(po=null,s=Ko(v),s=yo(s),s!==null)if(a=Lr(s),a===null)s=null;else if(u=a.tag,u===13){if(s=ao(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return po=s,null}function Sl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ic()){case lo:return 1;case ns:return 4;case vr:case wl:return 16;case sc:return 536870912;default:return 16}default:return 16}}var or=null,sa=null,Gn=null;function Il(){if(Gn)return Gn;var s,a=sa,u=a.length,v,R="value"in or?or.value:or.textContent,j=R.length;for(s=0;s<u&&a[s]===R[s];s++);var q=u-s;for(v=1;v<=q&&a[u-v]===R[j-v];v++);return Gn=R.slice(s,1<v?1-v:void 0)}function oa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ri(){return!0}function bl(){return!1}function wn(s){function a(u,v,R,j,q){this._reactName=u,this._targetInst=R,this.type=v,this.nativeEvent=j,this.target=q,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(u=s[Y],this[Y]=u?u(j):j[Y]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ri:bl,this.isPropagationStopped=bl,this}return $(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),a}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=wn(Br),ii=$({},Br,{view:0,detail:0}),dd=wn(ii),la,Ri,cs,mo=$({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==cs&&(cs&&s.type==="mousemove"?(la=s.screenX-cs.screenX,Ri=s.screenY-cs.screenY):Ri=la=0,cs=s),la)},movementY:function(s){return"movementY"in s?s.movementY:Ri}}),ua=wn(mo),Al=$({},mo,{dataTransfer:0}),gc=wn(Al),ca=$({},ii,{relatedTarget:0}),ha=wn(ca),yc=$({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Pi=wn(yc),vc=$({},Br,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_c=wn(vc),wc=$({},Br,{data:0}),xl=wn(wc),fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tc(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Ec[s])?!!a[s]:!1}function si(){return Tc}var p=$({},ii,{key:function(s){if(s.key){var a=fa[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=oa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Fn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(s){return s.type==="keypress"?oa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?oa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),M=wn(p),B=$({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=wn(B),ce=$({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),me=wn(ce),Re=$({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),It=wn(Re),sn=$({},mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),vt=wn(sn),fn=[9,13,27,32],en=c&&"CompositionEvent"in window,wr=null;c&&"documentMode"in document&&(wr=document.documentMode);var ar=c&&"TextEvent"in window&&!wr,go=c&&(!en||wr&&8<wr&&11>=wr),da=" ",r_=!1;function i_(s,a){switch(s){case"keyup":return fn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var pa=!1;function MA(s,a){switch(s){case"compositionend":return s_(a);case"keypress":return a.which!==32?null:(r_=!0,da);case"textInput":return s=a.data,s===da&&r_?null:s;default:return null}}function jA(s,a){if(pa)return s==="compositionend"||!en&&i_(s,a)?(s=Il(),Gn=sa=or=null,pa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return go&&a.locale!=="ko"?null:a.data;default:return null}}var FA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!FA[s.type]:a==="textarea"}function a_(s,a,u,v){ei(v),a=Ac(a,"onChange"),0<a.length&&(u=new aa("onChange","change",null,u,v),s.push({event:u,listeners:a}))}var kl=null,Rl=null;function VA(s){I_(s,0)}function Cc(s){var a=_a(s);if(Se(a))return s}function BA(s,a){if(s==="change")return a}var l_=!1;if(c){var pd;if(c){var md="oninput"in document;if(!md){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),md=typeof u_.oninput=="function"}pd=md}else pd=!1;l_=pd&&(!document.documentMode||9<document.documentMode)}function c_(){kl&&(kl.detachEvent("onpropertychange",h_),Rl=kl=null)}function h_(s){if(s.propertyName==="value"&&Cc(Rl)){var a=[];a_(a,Rl,s,Ko(s)),gl(VA,a)}}function UA(s,a,u){s==="focusin"?(c_(),kl=a,Rl=u,kl.attachEvent("onpropertychange",h_)):s==="focusout"&&c_()}function qA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Cc(Rl)}function zA(s,a){if(s==="click")return Cc(a)}function HA(s,a){if(s==="input"||s==="change")return Cc(a)}function WA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ur=typeof Object.is=="function"?Object.is:WA;function Pl(s,a){if(Ur(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),v=Object.keys(a);if(u.length!==v.length)return!1;for(v=0;v<u.length;v++){var R=u[v];if(!h.call(a,R)||!Ur(s[R],a[R]))return!1}return!0}function f_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function d_(s,a){var u=f_(s);s=0;for(var v;u;){if(u.nodeType===3){if(v=s+u.textContent.length,s<=a&&v>=a)return{node:u,offset:a-s};s=v}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=f_(u)}}function p_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?p_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function m_(){for(var s=window,a=Pe();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Pe(s.document)}return a}function gd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function $A(s){var a=m_(),u=s.focusedElem,v=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&p_(u.ownerDocument.documentElement,u)){if(v!==null&&gd(u)){if(a=v.start,s=v.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var R=u.textContent.length,j=Math.min(v.start,R);v=v.end===void 0?j:Math.min(v.end,R),!s.extend&&j>v&&(R=v,v=j,j=R),R=d_(u,j);var q=d_(u,v);R&&q&&(s.rangeCount!==1||s.anchorNode!==R.node||s.anchorOffset!==R.offset||s.focusNode!==q.node||s.focusOffset!==q.offset)&&(a=a.createRange(),a.setStart(R.node,R.offset),s.removeAllRanges(),j>v?(s.addRange(a),s.extend(q.node,q.offset)):(a.setEnd(q.node,q.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var KA=c&&"documentMode"in document&&11>=document.documentMode,ma=null,yd=null,Ol=null,vd=!1;function g_(s,a,u){var v=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;vd||ma==null||ma!==Pe(v)||(v=ma,"selectionStart"in v&&gd(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ol&&Pl(Ol,v)||(Ol=v,v=Ac(yd,"onSelect"),0<v.length&&(a=new aa("onSelect","select",null,a,u),s.push({event:a,listeners:v}),a.target=ma)))}function Sc(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var ga={animationend:Sc("Animation","AnimationEnd"),animationiteration:Sc("Animation","AnimationIteration"),animationstart:Sc("Animation","AnimationStart"),transitionend:Sc("Transition","TransitionEnd")},_d={},y_={};c&&(y_=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Ic(s){if(_d[s])return _d[s];if(!ga[s])return s;var a=ga[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in y_)return _d[s]=a[u];return s}var v_=Ic("animationend"),__=Ic("animationiteration"),w_=Ic("animationstart"),E_=Ic("transitionend"),T_=new Map,C_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(s,a){T_.set(s,a),o(a,[s])}for(var wd=0;wd<C_.length;wd++){var Ed=C_[wd],GA=Ed.toLowerCase(),JA=Ed[0].toUpperCase()+Ed.slice(1);hs(GA,"on"+JA)}hs(v_,"onAnimationEnd"),hs(__,"onAnimationIteration"),hs(w_,"onAnimationStart"),hs("dblclick","onDoubleClick"),hs("focusin","onFocus"),hs("focusout","onBlur"),hs(E_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function S_(s,a,u){var v=s.type||"unknown-event";s.currentTarget=u,tc(v,a,void 0,s),s.currentTarget=null}function I_(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var v=s[u],R=v.event;v=v.listeners;e:{var j=void 0;if(a)for(var q=v.length-1;0<=q;q--){var Y=v[q],se=Y.instance,pe=Y.currentTarget;if(Y=Y.listener,se!==j&&R.isPropagationStopped())break e;S_(R,Y,pe),j=se}else for(q=0;q<v.length;q++){if(Y=v[q],se=Y.instance,pe=Y.currentTarget,Y=Y.listener,se!==j&&R.isPropagationStopped())break e;S_(R,Y,pe),j=se}}}if(Nr)throw s=yl,Nr=!1,yl=null,s}function Lt(s,a){var u=a[kd];u===void 0&&(u=a[kd]=new Set);var v=s+"__bubble";u.has(v)||(b_(a,s,2,!1),u.add(v))}function Td(s,a,u){var v=0;a&&(v|=4),b_(u,s,v,a)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Ll(s){if(!s[bc]){s[bc]=!0,r.forEach(function(u){u!=="selectionchange"&&(QA.has(u)||Td(u,!1,s),Td(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[bc]||(a[bc]=!0,Td("selectionchange",!1,a))}}function b_(s,a,u,v){switch(Sl(a)){case 1:var R=Vt;break;case 4:R=fd;break;default:R=Cl}u=R.bind(null,a,u,s),R=void 0,!Qo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(R=!0),v?R!==void 0?s.addEventListener(a,u,{capture:!0,passive:R}):s.addEventListener(a,u,!0):R!==void 0?s.addEventListener(a,u,{passive:R}):s.addEventListener(a,u,!1)}function Cd(s,a,u,v,R){var j=v;if((a&1)===0&&(a&2)===0&&v!==null)e:for(;;){if(v===null)return;var q=v.tag;if(q===3||q===4){var Y=v.stateNode.containerInfo;if(Y===R||Y.nodeType===8&&Y.parentNode===R)break;if(q===4)for(q=v.return;q!==null;){var se=q.tag;if((se===3||se===4)&&(se=q.stateNode.containerInfo,se===R||se.nodeType===8&&se.parentNode===R))return;q=q.return}for(;Y!==null;){if(q=yo(Y),q===null)return;if(se=q.tag,se===5||se===6){v=j=q;continue e}Y=Y.parentNode}}v=v.return}gl(function(){var pe=j,Ce=Ko(u),Ie=[];e:{var Te=T_.get(s);if(Te!==void 0){var Le=aa,Be=s;switch(s){case"keypress":if(oa(u)===0)break e;case"keydown":case"keyup":Le=M;break;case"focusin":Be="focus",Le=ha;break;case"focusout":Be="blur",Le=ha;break;case"beforeblur":case"afterblur":Le=ha;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=me;break;case v_:case __:case w_:Le=Pi;break;case E_:Le=It;break;case"scroll":Le=dd;break;case"wheel":Le=vt;break;case"copy":case"cut":case"paste":Le=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=K}var He=(a&4)!==0,Qt=!He&&s==="scroll",he=He?Te!==null?Te+"Capture":null:Te;He=[];for(var oe=pe,fe;oe!==null;){fe=oe;var xe=fe.stateNode;if(fe.tag===5&&xe!==null&&(fe=xe,he!==null&&(xe=Jt(oe,he),xe!=null&&He.push(Dl(oe,xe,fe)))),Qt)break;oe=oe.return}0<He.length&&(Te=new Le(Te,Be,null,u,Ce),Ie.push({event:Te,listeners:He}))}}if((a&7)===0){e:{if(Te=s==="mouseover"||s==="pointerover",Le=s==="mouseout"||s==="pointerout",Te&&u!==ro&&(Be=u.relatedTarget||u.fromElement)&&(yo(Be)||Be[Oi]))break e;if((Le||Te)&&(Te=Ce.window===Ce?Ce:(Te=Ce.ownerDocument)?Te.defaultView||Te.parentWindow:window,Le?(Be=u.relatedTarget||u.toElement,Le=pe,Be=Be?yo(Be):null,Be!==null&&(Qt=Lr(Be),Be!==Qt||Be.tag!==5&&Be.tag!==6)&&(Be=null)):(Le=null,Be=pe),Le!==Be)){if(He=ua,xe="onMouseLeave",he="onMouseEnter",oe="mouse",(s==="pointerout"||s==="pointerover")&&(He=K,xe="onPointerLeave",he="onPointerEnter",oe="pointer"),Qt=Le==null?Te:_a(Le),fe=Be==null?Te:_a(Be),Te=new He(xe,oe+"leave",Le,u,Ce),Te.target=Qt,Te.relatedTarget=fe,xe=null,yo(Ce)===pe&&(He=new He(he,oe+"enter",Be,u,Ce),He.target=fe,He.relatedTarget=Qt,xe=He),Qt=xe,Le&&Be)t:{for(He=Le,he=Be,oe=0,fe=He;fe;fe=ya(fe))oe++;for(fe=0,xe=he;xe;xe=ya(xe))fe++;for(;0<oe-fe;)He=ya(He),oe--;for(;0<fe-oe;)he=ya(he),fe--;for(;oe--;){if(He===he||he!==null&&He===he.alternate)break t;He=ya(He),he=ya(he)}He=null}else He=null;Le!==null&&A_(Ie,Te,Le,He,!1),Be!==null&&Qt!==null&&A_(Ie,Qt,Be,He,!0)}}e:{if(Te=pe?_a(pe):window,Le=Te.nodeName&&Te.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Te.type==="file")var We=BA;else if(o_(Te))if(l_)We=HA;else{We=qA;var Qe=UA}else(Le=Te.nodeName)&&Le.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(We=zA);if(We&&(We=We(s,pe))){a_(Ie,We,u,Ce);break e}Qe&&Qe(s,Te,pe),s==="focusout"&&(Qe=Te._wrapperState)&&Qe.controlled&&Te.type==="number"&&de(Te,"number",Te.value)}switch(Qe=pe?_a(pe):window,s){case"focusin":(o_(Qe)||Qe.contentEditable==="true")&&(ma=Qe,yd=pe,Ol=null);break;case"focusout":Ol=yd=ma=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,g_(Ie,u,Ce);break;case"selectionchange":if(KA)break;case"keydown":case"keyup":g_(Ie,u,Ce)}var Ye;if(en)e:{switch(s){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else pa?i_(s,u)&&(nt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(nt="onCompositionStart");nt&&(go&&u.locale!=="ko"&&(pa||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&pa&&(Ye=Il()):(or=Ce,sa="value"in or?or.value:or.textContent,pa=!0)),Qe=Ac(pe,nt),0<Qe.length&&(nt=new xl(nt,s,null,u,Ce),Ie.push({event:nt,listeners:Qe}),Ye?nt.data=Ye:(Ye=s_(u),Ye!==null&&(nt.data=Ye)))),(Ye=ar?MA(s,u):jA(s,u))&&(pe=Ac(pe,"onBeforeInput"),0<pe.length&&(Ce=new xl("onBeforeInput","beforeinput",null,u,Ce),Ie.push({event:Ce,listeners:pe}),Ce.data=Ye))}I_(Ie,a)})}function Dl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ac(s,a){for(var u=a+"Capture",v=[];s!==null;){var R=s,j=R.stateNode;R.tag===5&&j!==null&&(R=j,j=Jt(s,u),j!=null&&v.unshift(Dl(s,j,R)),j=Jt(s,a),j!=null&&v.push(Dl(s,j,R))),s=s.return}return v}function ya(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function A_(s,a,u,v,R){for(var j=a._reactName,q=[];u!==null&&u!==v;){var Y=u,se=Y.alternate,pe=Y.stateNode;if(se!==null&&se===v)break;Y.tag===5&&pe!==null&&(Y=pe,R?(se=Jt(u,j),se!=null&&q.unshift(Dl(u,se,Y))):R||(se=Jt(u,j),se!=null&&q.push(Dl(u,se,Y)))),u=u.return}q.length!==0&&s.push({event:a,listeners:q})}var YA=/\r\n?/g,XA=/\u0000|\uFFFD/g;function x_(s){return(typeof s=="string"?s:""+s).replace(YA,`
`).replace(XA,"")}function xc(s,a,u){if(a=x_(a),x_(s)!==a&&u)throw Error(t(425))}function kc(){}var Sd=null,Id=null;function bd(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ad=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(s){return k_.resolve(null).then(s).catch(tx)}:Ad;function tx(s){setTimeout(function(){throw s})}function xd(s,a){var u=a,v=0;do{var R=u.nextSibling;if(s.removeChild(u),R&&R.nodeType===8)if(u=R.data,u==="/$"){if(v===0){s.removeChild(R),Vr(a);return}v--}else u!=="$"&&u!=="$?"&&u!=="$!"||v++;u=R}while(u);Vr(a)}function fs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function R_(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var va=Math.random().toString(36).slice(2),oi="__reactFiber$"+va,Ml="__reactProps$"+va,Oi="__reactContainer$"+va,kd="__reactEvents$"+va,nx="__reactListeners$"+va,rx="__reactHandles$"+va;function yo(s){var a=s[oi];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Oi]||u[oi]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=R_(s);s!==null;){if(u=s[oi])return u;s=R_(s)}return a}s=u,u=s.parentNode}return null}function jl(s){return s=s[oi]||s[Oi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function _a(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Rc(s){return s[Ml]||null}var Rd=[],wa=-1;function ds(s){return{current:s}}function Dt(s){0>wa||(s.current=Rd[wa],Rd[wa]=null,wa--)}function Ot(s,a){wa++,Rd[wa]=s.current,s.current=a}var ps={},xn=ds(ps),Jn=ds(!1),vo=ps;function Ea(s,a){var u=s.type.contextTypes;if(!u)return ps;var v=s.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===a)return v.__reactInternalMemoizedMaskedChildContext;var R={},j;for(j in u)R[j]=a[j];return v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=R),R}function Qn(s){return s=s.childContextTypes,s!=null}function Pc(){Dt(Jn),Dt(xn)}function P_(s,a,u){if(xn.current!==ps)throw Error(t(168));Ot(xn,a),Ot(Jn,u)}function O_(s,a,u){var v=s.stateNode;if(a=a.childContextTypes,typeof v.getChildContext!="function")return u;v=v.getChildContext();for(var R in v)if(!(R in a))throw Error(t(108,X(s)||"Unknown",R));return $({},u,v)}function Oc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ps,vo=xn.current,Ot(xn,s),Ot(Jn,Jn.current),!0}function N_(s,a,u){var v=s.stateNode;if(!v)throw Error(t(169));u?(s=O_(s,a,vo),v.__reactInternalMemoizedMergedChildContext=s,Dt(Jn),Dt(xn),Ot(xn,s)):Dt(Jn),Ot(Jn,u)}var Ni=null,Nc=!1,Pd=!1;function L_(s){Ni===null?Ni=[s]:Ni.push(s)}function ix(s){Nc=!0,L_(s)}function ms(){if(!Pd&&Ni!==null){Pd=!0;var s=0,a=gt;try{var u=Ni;for(gt=1;s<u.length;s++){var v=u[s];do v=v(!0);while(v!==null)}Ni=null,Nc=!1}catch(R){throw Ni!==null&&(Ni=Ni.slice(s+1)),ea(lo,ms),R}finally{gt=a,Pd=!1}}return null}var Ta=[],Ca=0,Lc=null,Dc=0,Er=[],Tr=0,_o=null,Li=1,Di="";function wo(s,a){Ta[Ca++]=Dc,Ta[Ca++]=Lc,Lc=s,Dc=a}function D_(s,a,u){Er[Tr++]=Li,Er[Tr++]=Di,Er[Tr++]=_o,_o=s;var v=Li;s=Di;var R=32-jn(v)-1;v&=~(1<<R),u+=1;var j=32-jn(a)+R;if(30<j){var q=R-R%5;j=(v&(1<<q)-1).toString(32),v>>=q,R-=q,Li=1<<32-jn(a)+R|u<<R|v,Di=j+s}else Li=1<<j|u<<R|v,Di=s}function Od(s){s.return!==null&&(wo(s,1),D_(s,1,0))}function Nd(s){for(;s===Lc;)Lc=Ta[--Ca],Ta[Ca]=null,Dc=Ta[--Ca],Ta[Ca]=null;for(;s===_o;)_o=Er[--Tr],Er[Tr]=null,Di=Er[--Tr],Er[Tr]=null,Li=Er[--Tr],Er[Tr]=null}var lr=null,ur=null,Bt=!1,qr=null;function M_(s,a){var u=br(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function j_(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,lr=s,ur=fs(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,lr=s,ur=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=_o!==null?{id:Li,overflow:Di}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=br(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,lr=s,ur=null,!0):!1;default:return!1}}function Ld(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Dd(s){if(Bt){var a=ur;if(a){var u=a;if(!j_(s,a)){if(Ld(s))throw Error(t(418));a=fs(u.nextSibling);var v=lr;a&&j_(s,a)?M_(v,u):(s.flags=s.flags&-4097|2,Bt=!1,lr=s)}}else{if(Ld(s))throw Error(t(418));s.flags=s.flags&-4097|2,Bt=!1,lr=s}}}function F_(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;lr=s}function Mc(s){if(s!==lr)return!1;if(!Bt)return F_(s),Bt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!bd(s.type,s.memoizedProps)),a&&(a=ur)){if(Ld(s))throw V_(),Error(t(418));for(;a;)M_(s,a),a=fs(a.nextSibling)}if(F_(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){ur=fs(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}ur=null}}else ur=lr?fs(s.stateNode.nextSibling):null;return!0}function V_(){for(var s=ur;s;)s=fs(s.nextSibling)}function Sa(){ur=lr=null,Bt=!1}function Md(s){qr===null?qr=[s]:qr.push(s)}var sx=I.ReactCurrentBatchConfig;function Fl(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var v=u.stateNode}if(!v)throw Error(t(147,s));var R=v,j=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===j?a.ref:(a=function(q){var Y=R.refs;q===null?delete Y[j]:Y[j]=q},a._stringRef=j,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function jc(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function B_(s){var a=s._init;return a(s._payload)}function U_(s){function a(he,oe){if(s){var fe=he.deletions;fe===null?(he.deletions=[oe],he.flags|=16):fe.push(oe)}}function u(he,oe){if(!s)return null;for(;oe!==null;)a(he,oe),oe=oe.sibling;return null}function v(he,oe){for(he=new Map;oe!==null;)oe.key!==null?he.set(oe.key,oe):he.set(oe.index,oe),oe=oe.sibling;return he}function R(he,oe){return he=Cs(he,oe),he.index=0,he.sibling=null,he}function j(he,oe,fe){return he.index=fe,s?(fe=he.alternate,fe!==null?(fe=fe.index,fe<oe?(he.flags|=2,oe):fe):(he.flags|=2,oe)):(he.flags|=1048576,oe)}function q(he){return s&&he.alternate===null&&(he.flags|=2),he}function Y(he,oe,fe,xe){return oe===null||oe.tag!==6?(oe=Ap(fe,he.mode,xe),oe.return=he,oe):(oe=R(oe,fe),oe.return=he,oe)}function se(he,oe,fe,xe){var We=fe.type;return We===P?Ce(he,oe,fe.props.children,xe,fe.key):oe!==null&&(oe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===re&&B_(We)===oe.type)?(xe=R(oe,fe.props),xe.ref=Fl(he,oe,fe),xe.return=he,xe):(xe=ah(fe.type,fe.key,fe.props,null,he.mode,xe),xe.ref=Fl(he,oe,fe),xe.return=he,xe)}function pe(he,oe,fe,xe){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==fe.containerInfo||oe.stateNode.implementation!==fe.implementation?(oe=xp(fe,he.mode,xe),oe.return=he,oe):(oe=R(oe,fe.children||[]),oe.return=he,oe)}function Ce(he,oe,fe,xe,We){return oe===null||oe.tag!==7?(oe=xo(fe,he.mode,xe,We),oe.return=he,oe):(oe=R(oe,fe),oe.return=he,oe)}function Ie(he,oe,fe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Ap(""+oe,he.mode,fe),oe.return=he,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case L:return fe=ah(oe.type,oe.key,oe.props,null,he.mode,fe),fe.ref=Fl(he,null,oe),fe.return=he,fe;case V:return oe=xp(oe,he.mode,fe),oe.return=he,oe;case re:var xe=oe._init;return Ie(he,xe(oe._payload),fe)}if(Ee(oe)||J(oe))return oe=xo(oe,he.mode,fe,null),oe.return=he,oe;jc(he,oe)}return null}function Te(he,oe,fe,xe){var We=oe!==null?oe.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return We!==null?null:Y(he,oe,""+fe,xe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case L:return fe.key===We?se(he,oe,fe,xe):null;case V:return fe.key===We?pe(he,oe,fe,xe):null;case re:return We=fe._init,Te(he,oe,We(fe._payload),xe)}if(Ee(fe)||J(fe))return We!==null?null:Ce(he,oe,fe,xe,null);jc(he,fe)}return null}function Le(he,oe,fe,xe,We){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return he=he.get(fe)||null,Y(oe,he,""+xe,We);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case L:return he=he.get(xe.key===null?fe:xe.key)||null,se(oe,he,xe,We);case V:return he=he.get(xe.key===null?fe:xe.key)||null,pe(oe,he,xe,We);case re:var Qe=xe._init;return Le(he,oe,fe,Qe(xe._payload),We)}if(Ee(xe)||J(xe))return he=he.get(fe)||null,Ce(oe,he,xe,We,null);jc(oe,xe)}return null}function Be(he,oe,fe,xe){for(var We=null,Qe=null,Ye=oe,nt=oe=0,mn=null;Ye!==null&&nt<fe.length;nt++){Ye.index>nt?(mn=Ye,Ye=null):mn=Ye.sibling;var Tt=Te(he,Ye,fe[nt],xe);if(Tt===null){Ye===null&&(Ye=mn);break}s&&Ye&&Tt.alternate===null&&a(he,Ye),oe=j(Tt,oe,nt),Qe===null?We=Tt:Qe.sibling=Tt,Qe=Tt,Ye=mn}if(nt===fe.length)return u(he,Ye),Bt&&wo(he,nt),We;if(Ye===null){for(;nt<fe.length;nt++)Ye=Ie(he,fe[nt],xe),Ye!==null&&(oe=j(Ye,oe,nt),Qe===null?We=Ye:Qe.sibling=Ye,Qe=Ye);return Bt&&wo(he,nt),We}for(Ye=v(he,Ye);nt<fe.length;nt++)mn=Le(Ye,he,nt,fe[nt],xe),mn!==null&&(s&&mn.alternate!==null&&Ye.delete(mn.key===null?nt:mn.key),oe=j(mn,oe,nt),Qe===null?We=mn:Qe.sibling=mn,Qe=mn);return s&&Ye.forEach(function(Ss){return a(he,Ss)}),Bt&&wo(he,nt),We}function He(he,oe,fe,xe){var We=J(fe);if(typeof We!="function")throw Error(t(150));if(fe=We.call(fe),fe==null)throw Error(t(151));for(var Qe=We=null,Ye=oe,nt=oe=0,mn=null,Tt=fe.next();Ye!==null&&!Tt.done;nt++,Tt=fe.next()){Ye.index>nt?(mn=Ye,Ye=null):mn=Ye.sibling;var Ss=Te(he,Ye,Tt.value,xe);if(Ss===null){Ye===null&&(Ye=mn);break}s&&Ye&&Ss.alternate===null&&a(he,Ye),oe=j(Ss,oe,nt),Qe===null?We=Ss:Qe.sibling=Ss,Qe=Ss,Ye=mn}if(Tt.done)return u(he,Ye),Bt&&wo(he,nt),We;if(Ye===null){for(;!Tt.done;nt++,Tt=fe.next())Tt=Ie(he,Tt.value,xe),Tt!==null&&(oe=j(Tt,oe,nt),Qe===null?We=Tt:Qe.sibling=Tt,Qe=Tt);return Bt&&wo(he,nt),We}for(Ye=v(he,Ye);!Tt.done;nt++,Tt=fe.next())Tt=Le(Ye,he,nt,Tt.value,xe),Tt!==null&&(s&&Tt.alternate!==null&&Ye.delete(Tt.key===null?nt:Tt.key),oe=j(Tt,oe,nt),Qe===null?We=Tt:Qe.sibling=Tt,Qe=Tt);return s&&Ye.forEach(function(Fx){return a(he,Fx)}),Bt&&wo(he,nt),We}function Qt(he,oe,fe,xe){if(typeof fe=="object"&&fe!==null&&fe.type===P&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case L:e:{for(var We=fe.key,Qe=oe;Qe!==null;){if(Qe.key===We){if(We=fe.type,We===P){if(Qe.tag===7){u(he,Qe.sibling),oe=R(Qe,fe.props.children),oe.return=he,he=oe;break e}}else if(Qe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===re&&B_(We)===Qe.type){u(he,Qe.sibling),oe=R(Qe,fe.props),oe.ref=Fl(he,Qe,fe),oe.return=he,he=oe;break e}u(he,Qe);break}else a(he,Qe);Qe=Qe.sibling}fe.type===P?(oe=xo(fe.props.children,he.mode,xe,fe.key),oe.return=he,he=oe):(xe=ah(fe.type,fe.key,fe.props,null,he.mode,xe),xe.ref=Fl(he,oe,fe),xe.return=he,he=xe)}return q(he);case V:e:{for(Qe=fe.key;oe!==null;){if(oe.key===Qe)if(oe.tag===4&&oe.stateNode.containerInfo===fe.containerInfo&&oe.stateNode.implementation===fe.implementation){u(he,oe.sibling),oe=R(oe,fe.children||[]),oe.return=he,he=oe;break e}else{u(he,oe);break}else a(he,oe);oe=oe.sibling}oe=xp(fe,he.mode,xe),oe.return=he,he=oe}return q(he);case re:return Qe=fe._init,Qt(he,oe,Qe(fe._payload),xe)}if(Ee(fe))return Be(he,oe,fe,xe);if(J(fe))return He(he,oe,fe,xe);jc(he,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,oe!==null&&oe.tag===6?(u(he,oe.sibling),oe=R(oe,fe),oe.return=he,he=oe):(u(he,oe),oe=Ap(fe,he.mode,xe),oe.return=he,he=oe),q(he)):u(he,oe)}return Qt}var Ia=U_(!0),q_=U_(!1),Fc=ds(null),Vc=null,ba=null,jd=null;function Fd(){jd=ba=Vc=null}function Vd(s){var a=Fc.current;Dt(Fc),s._currentValue=a}function Bd(s,a,u){for(;s!==null;){var v=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,v!==null&&(v.childLanes|=a)):v!==null&&(v.childLanes&a)!==a&&(v.childLanes|=a),s===u)break;s=s.return}}function Aa(s,a){Vc=s,jd=ba=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Yn=!0),s.firstContext=null)}function Cr(s){var a=s._currentValue;if(jd!==s)if(s={context:s,memoizedValue:a,next:null},ba===null){if(Vc===null)throw Error(t(308));ba=s,Vc.dependencies={lanes:0,firstContext:s}}else ba=ba.next=s;return a}var Eo=null;function Ud(s){Eo===null?Eo=[s]:Eo.push(s)}function z_(s,a,u,v){var R=a.interleaved;return R===null?(u.next=u,Ud(a)):(u.next=R.next,R.next=u),a.interleaved=u,Mi(s,v)}function Mi(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var gs=!1;function qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ji(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function ys(s,a,u){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Et&2)!==0){var R=v.pending;return R===null?a.next=a:(a.next=R.next,R.next=a),v.pending=a,Mi(s,u)}return R=v.interleaved,R===null?(a.next=a,Ud(v)):(a.next=R.next,R.next=a),v.interleaved=a,Mi(s,u)}function Bc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var v=a.lanes;v&=s.pendingLanes,u|=v,a.lanes=u,os(s,u)}}function W_(s,a){var u=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,u===v)){var R=null,j=null;if(u=u.firstBaseUpdate,u!==null){do{var q={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};j===null?R=j=q:j=j.next=q,u=u.next}while(u!==null);j===null?R=j=a:j=j.next=a}else R=j=a;u={baseState:v.baseState,firstBaseUpdate:R,lastBaseUpdate:j,shared:v.shared,effects:v.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Uc(s,a,u,v){var R=s.updateQueue;gs=!1;var j=R.firstBaseUpdate,q=R.lastBaseUpdate,Y=R.shared.pending;if(Y!==null){R.shared.pending=null;var se=Y,pe=se.next;se.next=null,q===null?j=pe:q.next=pe,q=se;var Ce=s.alternate;Ce!==null&&(Ce=Ce.updateQueue,Y=Ce.lastBaseUpdate,Y!==q&&(Y===null?Ce.firstBaseUpdate=pe:Y.next=pe,Ce.lastBaseUpdate=se))}if(j!==null){var Ie=R.baseState;q=0,Ce=pe=se=null,Y=j;do{var Te=Y.lane,Le=Y.eventTime;if((v&Te)===Te){Ce!==null&&(Ce=Ce.next={eventTime:Le,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Be=s,He=Y;switch(Te=a,Le=u,He.tag){case 1:if(Be=He.payload,typeof Be=="function"){Ie=Be.call(Le,Ie,Te);break e}Ie=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=He.payload,Te=typeof Be=="function"?Be.call(Le,Ie,Te):Be,Te==null)break e;Ie=$({},Ie,Te);break e;case 2:gs=!0}}Y.callback!==null&&Y.lane!==0&&(s.flags|=64,Te=R.effects,Te===null?R.effects=[Y]:Te.push(Y))}else Le={eventTime:Le,lane:Te,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ce===null?(pe=Ce=Le,se=Ie):Ce=Ce.next=Le,q|=Te;if(Y=Y.next,Y===null){if(Y=R.shared.pending,Y===null)break;Te=Y,Y=Te.next,Te.next=null,R.lastBaseUpdate=Te,R.shared.pending=null}}while(!0);if(Ce===null&&(se=Ie),R.baseState=se,R.firstBaseUpdate=pe,R.lastBaseUpdate=Ce,a=R.shared.interleaved,a!==null){R=a;do q|=R.lane,R=R.next;while(R!==a)}else j===null&&(R.shared.lanes=0);So|=q,s.lanes=q,s.memoizedState=Ie}}function $_(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var v=s[a],R=v.callback;if(R!==null){if(v.callback=null,v=u,typeof R!="function")throw Error(t(191,R));R.call(v)}}}var Vl={},ai=ds(Vl),Bl=ds(Vl),Ul=ds(Vl);function To(s){if(s===Vl)throw Error(t(174));return s}function zd(s,a){switch(Ot(Ul,a),Ot(Bl,s),Ot(ai,Vl),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:tt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=tt(a,s)}Dt(ai),Ot(ai,a)}function xa(){Dt(ai),Dt(Bl),Dt(Ul)}function K_(s){To(Ul.current);var a=To(ai.current),u=tt(a,s.type);a!==u&&(Ot(Bl,s),Ot(ai,u))}function Hd(s){Bl.current===s&&(Dt(ai),Dt(Bl))}var qt=ds(0);function qc(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wd=[];function $d(){for(var s=0;s<Wd.length;s++)Wd[s]._workInProgressVersionPrimary=null;Wd.length=0}var zc=I.ReactCurrentDispatcher,Kd=I.ReactCurrentBatchConfig,Co=0,zt=null,on=null,dn=null,Hc=!1,ql=!1,zl=0,ox=0;function kn(){throw Error(t(321))}function Gd(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Ur(s[u],a[u]))return!1;return!0}function Jd(s,a,u,v,R,j){if(Co=j,zt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,zc.current=s===null||s.memoizedState===null?cx:hx,s=u(v,R),ql){j=0;do{if(ql=!1,zl=0,25<=j)throw Error(t(301));j+=1,dn=on=null,a.updateQueue=null,zc.current=fx,s=u(v,R)}while(ql)}if(zc.current=Kc,a=on!==null&&on.next!==null,Co=0,dn=on=zt=null,Hc=!1,a)throw Error(t(300));return s}function Qd(){var s=zl!==0;return zl=0,s}function li(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?zt.memoizedState=dn=s:dn=dn.next=s,dn}function Sr(){if(on===null){var s=zt.alternate;s=s!==null?s.memoizedState:null}else s=on.next;var a=dn===null?zt.memoizedState:dn.next;if(a!==null)dn=a,on=s;else{if(s===null)throw Error(t(310));on=s,s={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},dn===null?zt.memoizedState=dn=s:dn=dn.next=s}return dn}function Hl(s,a){return typeof a=="function"?a(s):a}function Yd(s){var a=Sr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var v=on,R=v.baseQueue,j=u.pending;if(j!==null){if(R!==null){var q=R.next;R.next=j.next,j.next=q}v.baseQueue=R=j,u.pending=null}if(R!==null){j=R.next,v=v.baseState;var Y=q=null,se=null,pe=j;do{var Ce=pe.lane;if((Co&Ce)===Ce)se!==null&&(se=se.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),v=pe.hasEagerState?pe.eagerState:s(v,pe.action);else{var Ie={lane:Ce,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};se===null?(Y=se=Ie,q=v):se=se.next=Ie,zt.lanes|=Ce,So|=Ce}pe=pe.next}while(pe!==null&&pe!==j);se===null?q=v:se.next=Y,Ur(v,a.memoizedState)||(Yn=!0),a.memoizedState=v,a.baseState=q,a.baseQueue=se,u.lastRenderedState=v}if(s=u.interleaved,s!==null){R=s;do j=R.lane,zt.lanes|=j,So|=j,R=R.next;while(R!==s)}else R===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Xd(s){var a=Sr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var v=u.dispatch,R=u.pending,j=a.memoizedState;if(R!==null){u.pending=null;var q=R=R.next;do j=s(j,q.action),q=q.next;while(q!==R);Ur(j,a.memoizedState)||(Yn=!0),a.memoizedState=j,a.baseQueue===null&&(a.baseState=j),u.lastRenderedState=j}return[j,v]}function G_(){}function J_(s,a){var u=zt,v=Sr(),R=a(),j=!Ur(v.memoizedState,R);if(j&&(v.memoizedState=R,Yn=!0),v=v.queue,Zd(X_.bind(null,u,v,s),[s]),v.getSnapshot!==a||j||dn!==null&&dn.memoizedState.tag&1){if(u.flags|=2048,Wl(9,Y_.bind(null,u,v,R,a),void 0,null),pn===null)throw Error(t(349));(Co&30)!==0||Q_(u,a,R)}return R}function Q_(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=zt.updateQueue,a===null?(a={lastEffect:null,stores:null},zt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Y_(s,a,u,v){a.value=u,a.getSnapshot=v,Z_(a)&&e0(s)}function X_(s,a,u){return u(function(){Z_(a)&&e0(s)})}function Z_(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Ur(s,u)}catch{return!0}}function e0(s){var a=Mi(s,1);a!==null&&$r(a,s,1,-1)}function t0(s){var a=li();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:s},a.queue=s,s=s.dispatch=ux.bind(null,zt,s),[a.memoizedState,s]}function Wl(s,a,u,v){return s={tag:s,create:a,destroy:u,deps:v,next:null},a=zt.updateQueue,a===null?(a={lastEffect:null,stores:null},zt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(v=u.next,u.next=s,s.next=v,a.lastEffect=s)),s}function n0(){return Sr().memoizedState}function Wc(s,a,u,v){var R=li();zt.flags|=s,R.memoizedState=Wl(1|a,u,void 0,v===void 0?null:v)}function $c(s,a,u,v){var R=Sr();v=v===void 0?null:v;var j=void 0;if(on!==null){var q=on.memoizedState;if(j=q.destroy,v!==null&&Gd(v,q.deps)){R.memoizedState=Wl(a,u,j,v);return}}zt.flags|=s,R.memoizedState=Wl(1|a,u,j,v)}function r0(s,a){return Wc(8390656,8,s,a)}function Zd(s,a){return $c(2048,8,s,a)}function i0(s,a){return $c(4,2,s,a)}function s0(s,a){return $c(4,4,s,a)}function o0(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function a0(s,a,u){return u=u!=null?u.concat([s]):null,$c(4,4,o0.bind(null,a,s),u)}function ep(){}function l0(s,a){var u=Sr();a=a===void 0?null:a;var v=u.memoizedState;return v!==null&&a!==null&&Gd(a,v[1])?v[0]:(u.memoizedState=[s,a],s)}function u0(s,a){var u=Sr();a=a===void 0?null:a;var v=u.memoizedState;return v!==null&&a!==null&&Gd(a,v[1])?v[0]:(s=s(),u.memoizedState=[s,a],s)}function c0(s,a,u){return(Co&21)===0?(s.baseState&&(s.baseState=!1,Yn=!0),s.memoizedState=u):(Ur(u,a)||(u=ho(),zt.lanes|=u,So|=u,s.baseState=!0),a)}function ax(s,a){var u=gt;gt=u!==0&&4>u?u:4,s(!0);var v=Kd.transition;Kd.transition={};try{s(!1),a()}finally{gt=u,Kd.transition=v}}function h0(){return Sr().memoizedState}function lx(s,a,u){var v=Es(s);if(u={lane:v,action:u,hasEagerState:!1,eagerState:null,next:null},f0(s))d0(a,u);else if(u=z_(s,a,u,v),u!==null){var R=Bn();$r(u,s,v,R),p0(u,a,v)}}function ux(s,a,u){var v=Es(s),R={lane:v,action:u,hasEagerState:!1,eagerState:null,next:null};if(f0(s))d0(a,R);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=a.lastRenderedReducer,j!==null))try{var q=a.lastRenderedState,Y=j(q,u);if(R.hasEagerState=!0,R.eagerState=Y,Ur(Y,q)){var se=a.interleaved;se===null?(R.next=R,Ud(a)):(R.next=se.next,se.next=R),a.interleaved=R;return}}catch{}finally{}u=z_(s,a,R,v),u!==null&&(R=Bn(),$r(u,s,v,R),p0(u,a,v))}}function f0(s){var a=s.alternate;return s===zt||a!==null&&a===zt}function d0(s,a){ql=Hc=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function p0(s,a,u){if((u&4194240)!==0){var v=a.lanes;v&=s.pendingLanes,u|=v,a.lanes=u,os(s,u)}}var Kc={readContext:Cr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},cx={readContext:Cr,useCallback:function(s,a){return li().memoizedState=[s,a===void 0?null:a],s},useContext:Cr,useEffect:r0,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Wc(4194308,4,o0.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Wc(4194308,4,s,a)},useInsertionEffect:function(s,a){return Wc(4,2,s,a)},useMemo:function(s,a){var u=li();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var v=li();return a=u!==void 0?u(a):a,v.memoizedState=v.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},v.queue=s,s=s.dispatch=lx.bind(null,zt,s),[v.memoizedState,s]},useRef:function(s){var a=li();return s={current:s},a.memoizedState=s},useState:t0,useDebugValue:ep,useDeferredValue:function(s){return li().memoizedState=s},useTransition:function(){var s=t0(!1),a=s[0];return s=ax.bind(null,s[1]),li().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var v=zt,R=li();if(Bt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),pn===null)throw Error(t(349));(Co&30)!==0||Q_(v,a,u)}R.memoizedState=u;var j={value:u,getSnapshot:a};return R.queue=j,r0(X_.bind(null,v,j,s),[s]),v.flags|=2048,Wl(9,Y_.bind(null,v,j,u,a),void 0,null),u},useId:function(){var s=li(),a=pn.identifierPrefix;if(Bt){var u=Di,v=Li;u=(v&~(1<<32-jn(v)-1)).toString(32)+u,a=":"+a+"R"+u,u=zl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=ox++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},hx={readContext:Cr,useCallback:l0,useContext:Cr,useEffect:Zd,useImperativeHandle:a0,useInsertionEffect:i0,useLayoutEffect:s0,useMemo:u0,useReducer:Yd,useRef:n0,useState:function(){return Yd(Hl)},useDebugValue:ep,useDeferredValue:function(s){var a=Sr();return c0(a,on.memoizedState,s)},useTransition:function(){var s=Yd(Hl)[0],a=Sr().memoizedState;return[s,a]},useMutableSource:G_,useSyncExternalStore:J_,useId:h0,unstable_isNewReconciler:!1},fx={readContext:Cr,useCallback:l0,useContext:Cr,useEffect:Zd,useImperativeHandle:a0,useInsertionEffect:i0,useLayoutEffect:s0,useMemo:u0,useReducer:Xd,useRef:n0,useState:function(){return Xd(Hl)},useDebugValue:ep,useDeferredValue:function(s){var a=Sr();return on===null?a.memoizedState=s:c0(a,on.memoizedState,s)},useTransition:function(){var s=Xd(Hl)[0],a=Sr().memoizedState;return[s,a]},useMutableSource:G_,useSyncExternalStore:J_,useId:h0,unstable_isNewReconciler:!1};function zr(s,a){if(s&&s.defaultProps){a=$({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function tp(s,a,u,v){a=s.memoizedState,u=u(v,a),u=u==null?a:$({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Gc={isMounted:function(s){return(s=s._reactInternals)?Lr(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var v=Bn(),R=Es(s),j=ji(v,R);j.payload=a,u!=null&&(j.callback=u),a=ys(s,j,R),a!==null&&($r(a,s,R,v),Bc(a,s,R))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var v=Bn(),R=Es(s),j=ji(v,R);j.tag=1,j.payload=a,u!=null&&(j.callback=u),a=ys(s,j,R),a!==null&&($r(a,s,R,v),Bc(a,s,R))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Bn(),v=Es(s),R=ji(u,v);R.tag=2,a!=null&&(R.callback=a),a=ys(s,R,v),a!==null&&($r(a,s,v,u),Bc(a,s,v))}};function m0(s,a,u,v,R,j,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,j,q):a.prototype&&a.prototype.isPureReactComponent?!Pl(u,v)||!Pl(R,j):!0}function g0(s,a,u){var v=!1,R=ps,j=a.contextType;return typeof j=="object"&&j!==null?j=Cr(j):(R=Qn(a)?vo:xn.current,v=a.contextTypes,j=(v=v!=null)?Ea(s,R):ps),a=new a(u,j),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Gc,s.stateNode=a,a._reactInternals=s,v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=R,s.__reactInternalMemoizedMaskedChildContext=j),a}function y0(s,a,u,v){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,v),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,v),a.state!==s&&Gc.enqueueReplaceState(a,a.state,null)}function np(s,a,u,v){var R=s.stateNode;R.props=u,R.state=s.memoizedState,R.refs={},qd(s);var j=a.contextType;typeof j=="object"&&j!==null?R.context=Cr(j):(j=Qn(a)?vo:xn.current,R.context=Ea(s,j)),R.state=s.memoizedState,j=a.getDerivedStateFromProps,typeof j=="function"&&(tp(s,a,j,u),R.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(a=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),a!==R.state&&Gc.enqueueReplaceState(R,R.state,null),Uc(s,u,R,v),R.state=s.memoizedState),typeof R.componentDidMount=="function"&&(s.flags|=4194308)}function ka(s,a){try{var u="",v=a;do u+=te(v),v=v.return;while(v);var R=u}catch(j){R=`
Error generating stack: `+j.message+`
`+j.stack}return{value:s,source:a,stack:R,digest:null}}function rp(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function ip(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var dx=typeof WeakMap=="function"?WeakMap:Map;function v0(s,a,u){u=ji(-1,u),u.tag=3,u.payload={element:null};var v=a.value;return u.callback=function(){th||(th=!0,_p=v),ip(s,a)},u}function _0(s,a,u){u=ji(-1,u),u.tag=3;var v=s.type.getDerivedStateFromError;if(typeof v=="function"){var R=a.value;u.payload=function(){return v(R)},u.callback=function(){ip(s,a)}}var j=s.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(u.callback=function(){ip(s,a),typeof v!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var q=a.stack;this.componentDidCatch(a.value,{componentStack:q!==null?q:""})}),u}function w0(s,a,u){var v=s.pingCache;if(v===null){v=s.pingCache=new dx;var R=new Set;v.set(a,R)}else R=v.get(a),R===void 0&&(R=new Set,v.set(a,R));R.has(u)||(R.add(u),s=Ax.bind(null,s,a,u),a.then(s,s))}function E0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function T0(s,a,u,v,R){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ji(-1,1),a.tag=2,ys(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=R,s)}var px=I.ReactCurrentOwner,Yn=!1;function Vn(s,a,u,v){a.child=s===null?q_(a,null,u,v):Ia(a,s.child,u,v)}function C0(s,a,u,v,R){u=u.render;var j=a.ref;return Aa(a,R),v=Jd(s,a,u,v,j,R),u=Qd(),s!==null&&!Yn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~R,Fi(s,a,R)):(Bt&&u&&Od(a),a.flags|=1,Vn(s,a,v,R),a.child)}function S0(s,a,u,v,R){if(s===null){var j=u.type;return typeof j=="function"&&!bp(j)&&j.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=j,I0(s,a,j,v,R)):(s=ah(u.type,null,v,a,a.mode,R),s.ref=a.ref,s.return=a,a.child=s)}if(j=s.child,(s.lanes&R)===0){var q=j.memoizedProps;if(u=u.compare,u=u!==null?u:Pl,u(q,v)&&s.ref===a.ref)return Fi(s,a,R)}return a.flags|=1,s=Cs(j,v),s.ref=a.ref,s.return=a,a.child=s}function I0(s,a,u,v,R){if(s!==null){var j=s.memoizedProps;if(Pl(j,v)&&s.ref===a.ref)if(Yn=!1,a.pendingProps=v=j,(s.lanes&R)!==0)(s.flags&131072)!==0&&(Yn=!0);else return a.lanes=s.lanes,Fi(s,a,R)}return sp(s,a,u,v,R)}function b0(s,a,u){var v=a.pendingProps,R=v.children,j=s!==null?s.memoizedState:null;if(v.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Pa,cr),cr|=u;else{if((u&1073741824)===0)return s=j!==null?j.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Ot(Pa,cr),cr|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=j!==null?j.baseLanes:u,Ot(Pa,cr),cr|=v}else j!==null?(v=j.baseLanes|u,a.memoizedState=null):v=u,Ot(Pa,cr),cr|=v;return Vn(s,a,R,u),a.child}function A0(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function sp(s,a,u,v,R){var j=Qn(u)?vo:xn.current;return j=Ea(a,j),Aa(a,R),u=Jd(s,a,u,v,j,R),v=Qd(),s!==null&&!Yn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~R,Fi(s,a,R)):(Bt&&v&&Od(a),a.flags|=1,Vn(s,a,u,R),a.child)}function x0(s,a,u,v,R){if(Qn(u)){var j=!0;Oc(a)}else j=!1;if(Aa(a,R),a.stateNode===null)Qc(s,a),g0(a,u,v),np(a,u,v,R),v=!0;else if(s===null){var q=a.stateNode,Y=a.memoizedProps;q.props=Y;var se=q.context,pe=u.contextType;typeof pe=="object"&&pe!==null?pe=Cr(pe):(pe=Qn(u)?vo:xn.current,pe=Ea(a,pe));var Ce=u.getDerivedStateFromProps,Ie=typeof Ce=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ie||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Y!==v||se!==pe)&&y0(a,q,v,pe),gs=!1;var Te=a.memoizedState;q.state=Te,Uc(a,v,q,R),se=a.memoizedState,Y!==v||Te!==se||Jn.current||gs?(typeof Ce=="function"&&(tp(a,u,Ce,v),se=a.memoizedState),(Y=gs||m0(a,u,Y,v,Te,se,pe))?(Ie||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(a.flags|=4194308)):(typeof q.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=v,a.memoizedState=se),q.props=v,q.state=se,q.context=pe,v=Y):(typeof q.componentDidMount=="function"&&(a.flags|=4194308),v=!1)}else{q=a.stateNode,H_(s,a),Y=a.memoizedProps,pe=a.type===a.elementType?Y:zr(a.type,Y),q.props=pe,Ie=a.pendingProps,Te=q.context,se=u.contextType,typeof se=="object"&&se!==null?se=Cr(se):(se=Qn(u)?vo:xn.current,se=Ea(a,se));var Le=u.getDerivedStateFromProps;(Ce=typeof Le=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Y!==Ie||Te!==se)&&y0(a,q,v,se),gs=!1,Te=a.memoizedState,q.state=Te,Uc(a,v,q,R);var Be=a.memoizedState;Y!==Ie||Te!==Be||Jn.current||gs?(typeof Le=="function"&&(tp(a,u,Le,v),Be=a.memoizedState),(pe=gs||m0(a,u,pe,v,Te,Be,se)||!1)?(Ce||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(v,Be,se),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(v,Be,se)),typeof q.componentDidUpdate=="function"&&(a.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof q.componentDidUpdate!="function"||Y===s.memoizedProps&&Te===s.memoizedState||(a.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&Te===s.memoizedState||(a.flags|=1024),a.memoizedProps=v,a.memoizedState=Be),q.props=v,q.state=Be,q.context=se,v=pe):(typeof q.componentDidUpdate!="function"||Y===s.memoizedProps&&Te===s.memoizedState||(a.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||Y===s.memoizedProps&&Te===s.memoizedState||(a.flags|=1024),v=!1)}return op(s,a,u,v,j,R)}function op(s,a,u,v,R,j){A0(s,a);var q=(a.flags&128)!==0;if(!v&&!q)return R&&N_(a,u,!1),Fi(s,a,j);v=a.stateNode,px.current=a;var Y=q&&typeof u.getDerivedStateFromError!="function"?null:v.render();return a.flags|=1,s!==null&&q?(a.child=Ia(a,s.child,null,j),a.child=Ia(a,null,Y,j)):Vn(s,a,Y,j),a.memoizedState=v.state,R&&N_(a,u,!0),a.child}function k0(s){var a=s.stateNode;a.pendingContext?P_(s,a.pendingContext,a.pendingContext!==a.context):a.context&&P_(s,a.context,!1),zd(s,a.containerInfo)}function R0(s,a,u,v,R){return Sa(),Md(R),a.flags|=256,Vn(s,a,u,v),a.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(s){return{baseLanes:s,cachePool:null,transitions:null}}function P0(s,a,u){var v=a.pendingProps,R=qt.current,j=!1,q=(a.flags&128)!==0,Y;if((Y=q)||(Y=s!==null&&s.memoizedState===null?!1:(R&2)!==0),Y?(j=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(R|=1),Ot(qt,R&1),s===null)return Dd(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(q=v.children,s=v.fallback,j?(v=a.mode,j=a.child,q={mode:"hidden",children:q},(v&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=q):j=lh(q,v,0,null),s=xo(s,v,u,null),j.return=a,s.return=a,j.sibling=s,a.child=j,a.child.memoizedState=lp(u),a.memoizedState=ap,s):up(a,q));if(R=s.memoizedState,R!==null&&(Y=R.dehydrated,Y!==null))return mx(s,a,q,v,Y,R,u);if(j){j=v.fallback,q=a.mode,R=s.child,Y=R.sibling;var se={mode:"hidden",children:v.children};return(q&1)===0&&a.child!==R?(v=a.child,v.childLanes=0,v.pendingProps=se,a.deletions=null):(v=Cs(R,se),v.subtreeFlags=R.subtreeFlags&14680064),Y!==null?j=Cs(Y,j):(j=xo(j,q,u,null),j.flags|=2),j.return=a,v.return=a,v.sibling=j,a.child=v,v=j,j=a.child,q=s.child.memoizedState,q=q===null?lp(u):{baseLanes:q.baseLanes|u,cachePool:null,transitions:q.transitions},j.memoizedState=q,j.childLanes=s.childLanes&~u,a.memoizedState=ap,v}return j=s.child,s=j.sibling,v=Cs(j,{mode:"visible",children:v.children}),(a.mode&1)===0&&(v.lanes=u),v.return=a,v.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=v,a.memoizedState=null,v}function up(s,a){return a=lh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Jc(s,a,u,v){return v!==null&&Md(v),Ia(a,s.child,null,u),s=up(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function mx(s,a,u,v,R,j,q){if(u)return a.flags&256?(a.flags&=-257,v=rp(Error(t(422))),Jc(s,a,q,v)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(j=v.fallback,R=a.mode,v=lh({mode:"visible",children:v.children},R,0,null),j=xo(j,R,q,null),j.flags|=2,v.return=a,j.return=a,v.sibling=j,a.child=v,(a.mode&1)!==0&&Ia(a,s.child,null,q),a.child.memoizedState=lp(q),a.memoizedState=ap,j);if((a.mode&1)===0)return Jc(s,a,q,null);if(R.data==="$!"){if(v=R.nextSibling&&R.nextSibling.dataset,v)var Y=v.dgst;return v=Y,j=Error(t(419)),v=rp(j,v,void 0),Jc(s,a,q,v)}if(Y=(q&s.childLanes)!==0,Yn||Y){if(v=pn,v!==null){switch(q&-q){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(v.suspendedLanes|q))!==0?0:R,R!==0&&R!==j.retryLane&&(j.retryLane=R,Mi(s,R),$r(v,s,R,-1))}return Ip(),v=rp(Error(t(421))),Jc(s,a,q,v)}return R.data==="$?"?(a.flags|=128,a.child=s.child,a=xx.bind(null,s),R._reactRetry=a,null):(s=j.treeContext,ur=fs(R.nextSibling),lr=a,Bt=!0,qr=null,s!==null&&(Er[Tr++]=Li,Er[Tr++]=Di,Er[Tr++]=_o,Li=s.id,Di=s.overflow,_o=a),a=up(a,v.children),a.flags|=4096,a)}function O0(s,a,u){s.lanes|=a;var v=s.alternate;v!==null&&(v.lanes|=a),Bd(s.return,a,u)}function cp(s,a,u,v,R){var j=s.memoizedState;j===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:v,tail:u,tailMode:R}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=v,j.tail=u,j.tailMode=R)}function N0(s,a,u){var v=a.pendingProps,R=v.revealOrder,j=v.tail;if(Vn(s,a,v.children,u),v=qt.current,(v&2)!==0)v=v&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&O0(s,u,a);else if(s.tag===19)O0(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}if(Ot(qt,v),(a.mode&1)===0)a.memoizedState=null;else switch(R){case"forwards":for(u=a.child,R=null;u!==null;)s=u.alternate,s!==null&&qc(s)===null&&(R=u),u=u.sibling;u=R,u===null?(R=a.child,a.child=null):(R=u.sibling,u.sibling=null),cp(a,!1,R,u,j);break;case"backwards":for(u=null,R=a.child,a.child=null;R!==null;){if(s=R.alternate,s!==null&&qc(s)===null){a.child=R;break}s=R.sibling,R.sibling=u,u=R,R=s}cp(a,!0,u,null,j);break;case"together":cp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qc(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Fi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),So|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Cs(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Cs(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function gx(s,a,u){switch(a.tag){case 3:k0(a),Sa();break;case 5:K_(a);break;case 1:Qn(a.type)&&Oc(a);break;case 4:zd(a,a.stateNode.containerInfo);break;case 10:var v=a.type._context,R=a.memoizedProps.value;Ot(Fc,v._currentValue),v._currentValue=R;break;case 13:if(v=a.memoizedState,v!==null)return v.dehydrated!==null?(Ot(qt,qt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?P0(s,a,u):(Ot(qt,qt.current&1),s=Fi(s,a,u),s!==null?s.sibling:null);Ot(qt,qt.current&1);break;case 19:if(v=(u&a.childLanes)!==0,(s.flags&128)!==0){if(v)return N0(s,a,u);a.flags|=128}if(R=a.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Ot(qt,qt.current),v)break;return null;case 22:case 23:return a.lanes=0,b0(s,a,u)}return Fi(s,a,u)}var L0,hp,D0,M0;L0=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},hp=function(){},D0=function(s,a,u,v){var R=s.memoizedProps;if(R!==v){s=a.stateNode,To(ai.current);var j=null;switch(u){case"input":R=Oe(s,R),v=Oe(s,v),j=[];break;case"select":R=$({},R,{value:void 0}),v=$({},v,{value:void 0}),j=[];break;case"textarea":R=ve(s,R),v=ve(s,v),j=[];break;default:typeof R.onClick!="function"&&typeof v.onClick=="function"&&(s.onclick=kc)}fl(u,v);var q;u=null;for(pe in R)if(!v.hasOwnProperty(pe)&&R.hasOwnProperty(pe)&&R[pe]!=null)if(pe==="style"){var Y=R[pe];for(q in Y)Y.hasOwnProperty(q)&&(u||(u={}),u[q]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(i.hasOwnProperty(pe)?j||(j=[]):(j=j||[]).push(pe,null));for(pe in v){var se=v[pe];if(Y=R!=null?R[pe]:void 0,v.hasOwnProperty(pe)&&se!==Y&&(se!=null||Y!=null))if(pe==="style")if(Y){for(q in Y)!Y.hasOwnProperty(q)||se&&se.hasOwnProperty(q)||(u||(u={}),u[q]="");for(q in se)se.hasOwnProperty(q)&&Y[q]!==se[q]&&(u||(u={}),u[q]=se[q])}else u||(j||(j=[]),j.push(pe,u)),u=se;else pe==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,Y=Y?Y.__html:void 0,se!=null&&Y!==se&&(j=j||[]).push(pe,se)):pe==="children"?typeof se!="string"&&typeof se!="number"||(j=j||[]).push(pe,""+se):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(pe)?(se!=null&&pe==="onScroll"&&Lt("scroll",s),j||Y===se||(j=[])):(j=j||[]).push(pe,se))}u&&(j=j||[]).push("style",u);var pe=j;(a.updateQueue=pe)&&(a.flags|=4)}},M0=function(s,a,u,v){u!==v&&(a.flags|=4)};function $l(s,a){if(!Bt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Rn(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,v=0;if(a)for(var R=s.child;R!==null;)u|=R.lanes|R.childLanes,v|=R.subtreeFlags&14680064,v|=R.flags&14680064,R.return=s,R=R.sibling;else for(R=s.child;R!==null;)u|=R.lanes|R.childLanes,v|=R.subtreeFlags,v|=R.flags,R.return=s,R=R.sibling;return s.subtreeFlags|=v,s.childLanes=u,a}function yx(s,a,u){var v=a.pendingProps;switch(Nd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(a),null;case 1:return Qn(a.type)&&Pc(),Rn(a),null;case 3:return v=a.stateNode,xa(),Dt(Jn),Dt(xn),$d(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(s===null||s.child===null)&&(Mc(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qr!==null&&(Tp(qr),qr=null))),hp(s,a),Rn(a),null;case 5:Hd(a);var R=To(Ul.current);if(u=a.type,s!==null&&a.stateNode!=null)D0(s,a,u,v,R),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!v){if(a.stateNode===null)throw Error(t(166));return Rn(a),null}if(s=To(ai.current),Mc(a)){v=a.stateNode,u=a.type;var j=a.memoizedProps;switch(v[oi]=a,v[Ml]=j,s=(a.mode&1)!==0,u){case"dialog":Lt("cancel",v),Lt("close",v);break;case"iframe":case"object":case"embed":Lt("load",v);break;case"video":case"audio":for(R=0;R<Nl.length;R++)Lt(Nl[R],v);break;case"source":Lt("error",v);break;case"img":case"image":case"link":Lt("error",v),Lt("load",v);break;case"details":Lt("toggle",v);break;case"input":Ne(v,j),Lt("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!j.multiple},Lt("invalid",v);break;case"textarea":$e(v,j),Lt("invalid",v)}fl(u,j),R=null;for(var q in j)if(j.hasOwnProperty(q)){var Y=j[q];q==="children"?typeof Y=="string"?v.textContent!==Y&&(j.suppressHydrationWarning!==!0&&xc(v.textContent,Y,s),R=["children",Y]):typeof Y=="number"&&v.textContent!==""+Y&&(j.suppressHydrationWarning!==!0&&xc(v.textContent,Y,s),R=["children",""+Y]):i.hasOwnProperty(q)&&Y!=null&&q==="onScroll"&&Lt("scroll",v)}switch(u){case"input":ge(v),ue(v,j,!0);break;case"textarea":ge(v),ze(v);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(v.onclick=kc)}v=R,a.updateQueue=v,v!==null&&(a.flags|=4)}else{q=R.nodeType===9?R:R.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ge(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=q.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof v.is=="string"?s=q.createElement(u,{is:v.is}):(s=q.createElement(u),u==="select"&&(q=s,v.multiple?q.multiple=!0:v.size&&(q.size=v.size))):s=q.createElementNS(s,u),s[oi]=a,s[Ml]=v,L0(s,a,!1,!1),a.stateNode=s;e:{switch(q=dl(u,v),u){case"dialog":Lt("cancel",s),Lt("close",s),R=v;break;case"iframe":case"object":case"embed":Lt("load",s),R=v;break;case"video":case"audio":for(R=0;R<Nl.length;R++)Lt(Nl[R],s);R=v;break;case"source":Lt("error",s),R=v;break;case"img":case"image":case"link":Lt("error",s),Lt("load",s),R=v;break;case"details":Lt("toggle",s),R=v;break;case"input":Ne(s,v),R=Oe(s,v),Lt("invalid",s);break;case"option":R=v;break;case"select":s._wrapperState={wasMultiple:!!v.multiple},R=$({},v,{value:void 0}),Lt("invalid",s);break;case"textarea":$e(s,v),R=ve(s,v),Lt("invalid",s);break;default:R=v}fl(u,R),Y=R;for(j in Y)if(Y.hasOwnProperty(j)){var se=Y[j];j==="style"?ts(s,se):j==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&$n(s,se)):j==="children"?typeof se=="string"?(u!=="textarea"||se!=="")&&yt(s,se):typeof se=="number"&&yt(s,""+se):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?se!=null&&j==="onScroll"&&Lt("scroll",s):se!=null&&O(s,j,se,q))}switch(u){case"input":ge(s),ue(s,v,!1);break;case"textarea":ge(s),ze(s);break;case"option":v.value!=null&&s.setAttribute("value",""+Q(v.value));break;case"select":s.multiple=!!v.multiple,j=v.value,j!=null?Ae(s,!!v.multiple,j,!1):v.defaultValue!=null&&Ae(s,!!v.multiple,v.defaultValue,!0);break;default:typeof R.onClick=="function"&&(s.onclick=kc)}switch(u){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Rn(a),null;case 6:if(s&&a.stateNode!=null)M0(s,a,s.memoizedProps,v);else{if(typeof v!="string"&&a.stateNode===null)throw Error(t(166));if(u=To(Ul.current),To(ai.current),Mc(a)){if(v=a.stateNode,u=a.memoizedProps,v[oi]=a,(j=v.nodeValue!==u)&&(s=lr,s!==null))switch(s.tag){case 3:xc(v.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&xc(v.nodeValue,u,(s.mode&1)!==0)}j&&(a.flags|=4)}else v=(u.nodeType===9?u:u.ownerDocument).createTextNode(v),v[oi]=a,a.stateNode=v}return Rn(a),null;case 13:if(Dt(qt),v=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Bt&&ur!==null&&(a.mode&1)!==0&&(a.flags&128)===0)V_(),Sa(),a.flags|=98560,j=!1;else if(j=Mc(a),v!==null&&v.dehydrated!==null){if(s===null){if(!j)throw Error(t(318));if(j=a.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[oi]=a}else Sa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rn(a),j=!1}else qr!==null&&(Tp(qr),qr=null),j=!0;if(!j)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(v=v!==null,v!==(s!==null&&s.memoizedState!==null)&&v&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(qt.current&1)!==0?an===0&&(an=3):Ip())),a.updateQueue!==null&&(a.flags|=4),Rn(a),null);case 4:return xa(),hp(s,a),s===null&&Ll(a.stateNode.containerInfo),Rn(a),null;case 10:return Vd(a.type._context),Rn(a),null;case 17:return Qn(a.type)&&Pc(),Rn(a),null;case 19:if(Dt(qt),j=a.memoizedState,j===null)return Rn(a),null;if(v=(a.flags&128)!==0,q=j.rendering,q===null)if(v)$l(j,!1);else{if(an!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(q=qc(s),q!==null){for(a.flags|=128,$l(j,!1),v=q.updateQueue,v!==null&&(a.updateQueue=v,a.flags|=4),a.subtreeFlags=0,v=u,u=a.child;u!==null;)j=u,s=v,j.flags&=14680066,q=j.alternate,q===null?(j.childLanes=0,j.lanes=s,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=q.childLanes,j.lanes=q.lanes,j.child=q.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=q.memoizedProps,j.memoizedState=q.memoizedState,j.updateQueue=q.updateQueue,j.type=q.type,s=q.dependencies,j.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Ot(qt,qt.current&1|2),a.child}s=s.sibling}j.tail!==null&&Pt()>Oa&&(a.flags|=128,v=!0,$l(j,!1),a.lanes=4194304)}else{if(!v)if(s=qc(q),s!==null){if(a.flags|=128,v=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),$l(j,!0),j.tail===null&&j.tailMode==="hidden"&&!q.alternate&&!Bt)return Rn(a),null}else 2*Pt()-j.renderingStartTime>Oa&&u!==1073741824&&(a.flags|=128,v=!0,$l(j,!1),a.lanes=4194304);j.isBackwards?(q.sibling=a.child,a.child=q):(u=j.last,u!==null?u.sibling=q:a.child=q,j.last=q)}return j.tail!==null?(a=j.tail,j.rendering=a,j.tail=a.sibling,j.renderingStartTime=Pt(),a.sibling=null,u=qt.current,Ot(qt,v?u&1|2:u&1),a):(Rn(a),null);case 22:case 23:return Sp(),v=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==v&&(a.flags|=8192),v&&(a.mode&1)!==0?(cr&1073741824)!==0&&(Rn(a),a.subtreeFlags&6&&(a.flags|=8192)):Rn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function vx(s,a){switch(Nd(a),a.tag){case 1:return Qn(a.type)&&Pc(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return xa(),Dt(Jn),Dt(xn),$d(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Hd(a),null;case 13:if(Dt(qt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Sa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Dt(qt),null;case 4:return xa(),null;case 10:return Vd(a.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var Yc=!1,Pn=!1,_x=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Ra(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(v){$t(s,a,v)}else u.current=null}function fp(s,a,u){try{u()}catch(v){$t(s,a,v)}}var j0=!1;function wx(s,a){if(Sd=us,s=m_(),gd(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var v=u.getSelection&&u.getSelection();if(v&&v.rangeCount!==0){u=v.anchorNode;var R=v.anchorOffset,j=v.focusNode;v=v.focusOffset;try{u.nodeType,j.nodeType}catch{u=null;break e}var q=0,Y=-1,se=-1,pe=0,Ce=0,Ie=s,Te=null;t:for(;;){for(var Le;Ie!==u||R!==0&&Ie.nodeType!==3||(Y=q+R),Ie!==j||v!==0&&Ie.nodeType!==3||(se=q+v),Ie.nodeType===3&&(q+=Ie.nodeValue.length),(Le=Ie.firstChild)!==null;)Te=Ie,Ie=Le;for(;;){if(Ie===s)break t;if(Te===u&&++pe===R&&(Y=q),Te===j&&++Ce===v&&(se=q),(Le=Ie.nextSibling)!==null)break;Ie=Te,Te=Ie.parentNode}Ie=Le}u=Y===-1||se===-1?null:{start:Y,end:se}}else u=null}u=u||{start:0,end:0}}else u=null;for(Id={focusedElem:s,selectionRange:u},us=!1,Fe=a;Fe!==null;)if(a=Fe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Fe=s;else for(;Fe!==null;){a=Fe;try{var Be=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Be!==null){var He=Be.memoizedProps,Qt=Be.memoizedState,he=a.stateNode,oe=he.getSnapshotBeforeUpdate(a.elementType===a.type?He:zr(a.type,He),Qt);he.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var fe=a.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xe){$t(a,a.return,xe)}if(s=a.sibling,s!==null){s.return=a.return,Fe=s;break}Fe=a.return}return Be=j0,j0=!1,Be}function Kl(s,a,u){var v=a.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var R=v=v.next;do{if((R.tag&s)===s){var j=R.destroy;R.destroy=void 0,j!==void 0&&fp(a,u,j)}R=R.next}while(R!==v)}}function Xc(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var v=u.create;u.destroy=v()}u=u.next}while(u!==a)}}function dp(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function F0(s){var a=s.alternate;a!==null&&(s.alternate=null,F0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[oi],delete a[Ml],delete a[kd],delete a[nx],delete a[rx])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function V0(s){return s.tag===5||s.tag===3||s.tag===4}function B0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||V0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pp(s,a,u){var v=s.tag;if(v===5||v===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=kc));else if(v!==4&&(s=s.child,s!==null))for(pp(s,a,u),s=s.sibling;s!==null;)pp(s,a,u),s=s.sibling}function mp(s,a,u){var v=s.tag;if(v===5||v===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(v!==4&&(s=s.child,s!==null))for(mp(s,a,u),s=s.sibling;s!==null;)mp(s,a,u),s=s.sibling}var En=null,Hr=!1;function vs(s,a,u){for(u=u.child;u!==null;)U0(s,a,u),u=u.sibling}function U0(s,a,u){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(uo,u)}catch{}switch(u.tag){case 5:Pn||Ra(u,a);case 6:var v=En,R=Hr;En=null,vs(s,a,u),En=v,Hr=R,En!==null&&(Hr?(s=En,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):En.removeChild(u.stateNode));break;case 18:En!==null&&(Hr?(s=En,u=u.stateNode,s.nodeType===8?xd(s.parentNode,u):s.nodeType===1&&xd(s,u),Vr(s)):xd(En,u.stateNode));break;case 4:v=En,R=Hr,En=u.stateNode.containerInfo,Hr=!0,vs(s,a,u),En=v,Hr=R;break;case 0:case 11:case 14:case 15:if(!Pn&&(v=u.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){R=v=v.next;do{var j=R,q=j.destroy;j=j.tag,q!==void 0&&((j&2)!==0||(j&4)!==0)&&fp(u,a,q),R=R.next}while(R!==v)}vs(s,a,u);break;case 1:if(!Pn&&(Ra(u,a),v=u.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=u.memoizedProps,v.state=u.memoizedState,v.componentWillUnmount()}catch(Y){$t(u,a,Y)}vs(s,a,u);break;case 21:vs(s,a,u);break;case 22:u.mode&1?(Pn=(v=Pn)||u.memoizedState!==null,vs(s,a,u),Pn=v):vs(s,a,u);break;default:vs(s,a,u)}}function q0(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new _x),a.forEach(function(v){var R=kx.bind(null,s,v);u.has(v)||(u.add(v),v.then(R,R))})}}function Wr(s,a){var u=a.deletions;if(u!==null)for(var v=0;v<u.length;v++){var R=u[v];try{var j=s,q=a,Y=q;e:for(;Y!==null;){switch(Y.tag){case 5:En=Y.stateNode,Hr=!1;break e;case 3:En=Y.stateNode.containerInfo,Hr=!0;break e;case 4:En=Y.stateNode.containerInfo,Hr=!0;break e}Y=Y.return}if(En===null)throw Error(t(160));U0(j,q,R),En=null,Hr=!1;var se=R.alternate;se!==null&&(se.return=null),R.return=null}catch(pe){$t(R,a,pe)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)z0(a,s),a=a.sibling}function z0(s,a){var u=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Wr(a,s),ui(s),v&4){try{Kl(3,s,s.return),Xc(3,s)}catch(He){$t(s,s.return,He)}try{Kl(5,s,s.return)}catch(He){$t(s,s.return,He)}}break;case 1:Wr(a,s),ui(s),v&512&&u!==null&&Ra(u,u.return);break;case 5:if(Wr(a,s),ui(s),v&512&&u!==null&&Ra(u,u.return),s.flags&32){var R=s.stateNode;try{yt(R,"")}catch(He){$t(s,s.return,He)}}if(v&4&&(R=s.stateNode,R!=null)){var j=s.memoizedProps,q=u!==null?u.memoizedProps:j,Y=s.type,se=s.updateQueue;if(s.updateQueue=null,se!==null)try{Y==="input"&&j.type==="radio"&&j.name!=null&&Ue(R,j),dl(Y,q);var pe=dl(Y,j);for(q=0;q<se.length;q+=2){var Ce=se[q],Ie=se[q+1];Ce==="style"?ts(R,Ie):Ce==="dangerouslySetInnerHTML"?$n(R,Ie):Ce==="children"?yt(R,Ie):O(R,Ce,Ie,pe)}switch(Y){case"input":Xe(R,j);break;case"textarea":De(R,j);break;case"select":var Te=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!j.multiple;var Le=j.value;Le!=null?Ae(R,!!j.multiple,Le,!1):Te!==!!j.multiple&&(j.defaultValue!=null?Ae(R,!!j.multiple,j.defaultValue,!0):Ae(R,!!j.multiple,j.multiple?[]:"",!1))}R[Ml]=j}catch(He){$t(s,s.return,He)}}break;case 6:if(Wr(a,s),ui(s),v&4){if(s.stateNode===null)throw Error(t(162));R=s.stateNode,j=s.memoizedProps;try{R.nodeValue=j}catch(He){$t(s,s.return,He)}}break;case 3:if(Wr(a,s),ui(s),v&4&&u!==null&&u.memoizedState.isDehydrated)try{Vr(a.containerInfo)}catch(He){$t(s,s.return,He)}break;case 4:Wr(a,s),ui(s);break;case 13:Wr(a,s),ui(s),R=s.child,R.flags&8192&&(j=R.memoizedState!==null,R.stateNode.isHidden=j,!j||R.alternate!==null&&R.alternate.memoizedState!==null||(vp=Pt())),v&4&&q0(s);break;case 22:if(Ce=u!==null&&u.memoizedState!==null,s.mode&1?(Pn=(pe=Pn)||Ce,Wr(a,s),Pn=pe):Wr(a,s),ui(s),v&8192){if(pe=s.memoizedState!==null,(s.stateNode.isHidden=pe)&&!Ce&&(s.mode&1)!==0)for(Fe=s,Ce=s.child;Ce!==null;){for(Ie=Fe=Ce;Fe!==null;){switch(Te=Fe,Le=Te.child,Te.tag){case 0:case 11:case 14:case 15:Kl(4,Te,Te.return);break;case 1:Ra(Te,Te.return);var Be=Te.stateNode;if(typeof Be.componentWillUnmount=="function"){v=Te,u=Te.return;try{a=v,Be.props=a.memoizedProps,Be.state=a.memoizedState,Be.componentWillUnmount()}catch(He){$t(v,u,He)}}break;case 5:Ra(Te,Te.return);break;case 22:if(Te.memoizedState!==null){$0(Ie);continue}}Le!==null?(Le.return=Te,Fe=Le):$0(Ie)}Ce=Ce.sibling}e:for(Ce=null,Ie=s;;){if(Ie.tag===5){if(Ce===null){Ce=Ie;try{R=Ie.stateNode,pe?(j=R.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Y=Ie.stateNode,se=Ie.memoizedProps.style,q=se!=null&&se.hasOwnProperty("display")?se.display:null,Y.style.display=Pr("display",q))}catch(He){$t(s,s.return,He)}}}else if(Ie.tag===6){if(Ce===null)try{Ie.stateNode.nodeValue=pe?"":Ie.memoizedProps}catch(He){$t(s,s.return,He)}}else if((Ie.tag!==22&&Ie.tag!==23||Ie.memoizedState===null||Ie===s)&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===s)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===s)break e;Ce===Ie&&(Ce=null),Ie=Ie.return}Ce===Ie&&(Ce=null),Ie.sibling.return=Ie.return,Ie=Ie.sibling}}break;case 19:Wr(a,s),ui(s),v&4&&q0(s);break;case 21:break;default:Wr(a,s),ui(s)}}function ui(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(V0(u)){var v=u;break e}u=u.return}throw Error(t(160))}switch(v.tag){case 5:var R=v.stateNode;v.flags&32&&(yt(R,""),v.flags&=-33);var j=B0(s);mp(s,j,R);break;case 3:case 4:var q=v.stateNode.containerInfo,Y=B0(s);pp(s,Y,q);break;default:throw Error(t(161))}}catch(se){$t(s,s.return,se)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ex(s,a,u){Fe=s,H0(s)}function H0(s,a,u){for(var v=(s.mode&1)!==0;Fe!==null;){var R=Fe,j=R.child;if(R.tag===22&&v){var q=R.memoizedState!==null||Yc;if(!q){var Y=R.alternate,se=Y!==null&&Y.memoizedState!==null||Pn;Y=Yc;var pe=Pn;if(Yc=q,(Pn=se)&&!pe)for(Fe=R;Fe!==null;)q=Fe,se=q.child,q.tag===22&&q.memoizedState!==null?K0(R):se!==null?(se.return=q,Fe=se):K0(R);for(;j!==null;)Fe=j,H0(j),j=j.sibling;Fe=R,Yc=Y,Pn=pe}W0(s)}else(R.subtreeFlags&8772)!==0&&j!==null?(j.return=R,Fe=j):W0(s)}}function W0(s){for(;Fe!==null;){var a=Fe;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Pn||Xc(5,a);break;case 1:var v=a.stateNode;if(a.flags&4&&!Pn)if(u===null)v.componentDidMount();else{var R=a.elementType===a.type?u.memoizedProps:zr(a.type,u.memoizedProps);v.componentDidUpdate(R,u.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var j=a.updateQueue;j!==null&&$_(a,j,v);break;case 3:var q=a.updateQueue;if(q!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}$_(a,q,u)}break;case 5:var Y=a.stateNode;if(u===null&&a.flags&4){u=Y;var se=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&u.focus();break;case"img":se.src&&(u.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var pe=a.alternate;if(pe!==null){var Ce=pe.memoizedState;if(Ce!==null){var Ie=Ce.dehydrated;Ie!==null&&Vr(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pn||a.flags&512&&dp(a)}catch(Te){$t(a,a.return,Te)}}if(a===s){Fe=null;break}if(u=a.sibling,u!==null){u.return=a.return,Fe=u;break}Fe=a.return}}function $0(s){for(;Fe!==null;){var a=Fe;if(a===s){Fe=null;break}var u=a.sibling;if(u!==null){u.return=a.return,Fe=u;break}Fe=a.return}}function K0(s){for(;Fe!==null;){var a=Fe;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Xc(4,a)}catch(se){$t(a,u,se)}break;case 1:var v=a.stateNode;if(typeof v.componentDidMount=="function"){var R=a.return;try{v.componentDidMount()}catch(se){$t(a,R,se)}}var j=a.return;try{dp(a)}catch(se){$t(a,j,se)}break;case 5:var q=a.return;try{dp(a)}catch(se){$t(a,q,se)}}}catch(se){$t(a,a.return,se)}if(a===s){Fe=null;break}var Y=a.sibling;if(Y!==null){Y.return=a.return,Fe=Y;break}Fe=a.return}}var Tx=Math.ceil,Zc=I.ReactCurrentDispatcher,gp=I.ReactCurrentOwner,Ir=I.ReactCurrentBatchConfig,Et=0,pn=null,tn=null,Tn=0,cr=0,Pa=ds(0),an=0,Gl=null,So=0,eh=0,yp=0,Jl=null,Xn=null,vp=0,Oa=1/0,Vi=null,th=!1,_p=null,_s=null,nh=!1,ws=null,rh=0,Ql=0,wp=null,ih=-1,sh=0;function Bn(){return(Et&6)!==0?Pt():ih!==-1?ih:ih=Pt()}function Es(s){return(s.mode&1)===0?1:(Et&2)!==0&&Tn!==0?Tn&-Tn:sx.transition!==null?(sh===0&&(sh=ho()),sh):(s=gt,s!==0||(s=window.event,s=s===void 0?16:Sl(s.type)),s)}function $r(s,a,u,v){if(50<Ql)throw Ql=0,wp=null,Error(t(185));ss(s,u,v),((Et&2)===0||s!==pn)&&(s===pn&&((Et&2)===0&&(eh|=u),an===4&&Ts(s,Tn)),Zn(s,v),u===1&&Et===0&&(a.mode&1)===0&&(Oa=Pt()+500,Nc&&ms()))}function Zn(s,a){var u=s.callbackNode;Ai(s,a);var v=co(s,s===pn?Tn:0);if(v===0)u!==null&&_l(u),s.callbackNode=null,s.callbackPriority=0;else if(a=v&-v,s.callbackPriority!==a){if(u!=null&&_l(u),a===1)s.tag===0?ix(J0.bind(null,s)):L_(J0.bind(null,s)),ex(function(){(Et&6)===0&&ms()}),u=null;else{switch(as(v)){case 1:u=lo;break;case 4:u=ns;break;case 16:u=vr;break;case 536870912:u=sc;break;default:u=vr}u=rw(u,G0.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function G0(s,a){if(ih=-1,sh=0,(Et&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Na()&&s.callbackNode!==u)return null;var v=co(s,s===pn?Tn:0);if(v===0)return null;if((v&30)!==0||(v&s.expiredLanes)!==0||a)a=oh(s,v);else{a=v;var R=Et;Et|=2;var j=Y0();(pn!==s||Tn!==a)&&(Vi=null,Oa=Pt()+500,bo(s,a));do try{Ix();break}catch(Y){Q0(s,Y)}while(!0);Fd(),Zc.current=j,Et=R,tn!==null?a=0:(pn=null,Tn=0,a=an)}if(a!==0){if(a===2&&(R=sr(s),R!==0&&(v=R,a=Ep(s,R))),a===1)throw u=Gl,bo(s,0),Ts(s,v),Zn(s,Pt()),u;if(a===6)Ts(s,v);else{if(R=s.current.alternate,(v&30)===0&&!Cx(R)&&(a=oh(s,v),a===2&&(j=sr(s),j!==0&&(v=j,a=Ep(s,j))),a===1))throw u=Gl,bo(s,0),Ts(s,v),Zn(s,Pt()),u;switch(s.finishedWork=R,s.finishedLanes=v,a){case 0:case 1:throw Error(t(345));case 2:Ao(s,Xn,Vi);break;case 3:if(Ts(s,v),(v&130023424)===v&&(a=vp+500-Pt(),10<a)){if(co(s,0)!==0)break;if(R=s.suspendedLanes,(R&v)!==v){Bn(),s.pingedLanes|=s.suspendedLanes&R;break}s.timeoutHandle=Ad(Ao.bind(null,s,Xn,Vi),a);break}Ao(s,Xn,Vi);break;case 4:if(Ts(s,v),(v&4194240)===v)break;for(a=s.eventTimes,R=-1;0<v;){var q=31-jn(v);j=1<<q,q=a[q],q>R&&(R=q),v&=~j}if(v=R,v=Pt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*Tx(v/1960))-v,10<v){s.timeoutHandle=Ad(Ao.bind(null,s,Xn,Vi),v);break}Ao(s,Xn,Vi);break;case 5:Ao(s,Xn,Vi);break;default:throw Error(t(329))}}}return Zn(s,Pt()),s.callbackNode===u?G0.bind(null,s):null}function Ep(s,a){var u=Jl;return s.current.memoizedState.isDehydrated&&(bo(s,a).flags|=256),s=oh(s,a),s!==2&&(a=Xn,Xn=u,a!==null&&Tp(a)),s}function Tp(s){Xn===null?Xn=s:Xn.push.apply(Xn,s)}function Cx(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var v=0;v<u.length;v++){var R=u[v],j=R.getSnapshot;R=R.value;try{if(!Ur(j(),R))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ts(s,a){for(a&=~yp,a&=~eh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-jn(a),v=1<<u;s[u]=-1,a&=~v}}function J0(s){if((Et&6)!==0)throw Error(t(327));Na();var a=co(s,0);if((a&1)===0)return Zn(s,Pt()),null;var u=oh(s,a);if(s.tag!==0&&u===2){var v=sr(s);v!==0&&(a=v,u=Ep(s,v))}if(u===1)throw u=Gl,bo(s,0),Ts(s,a),Zn(s,Pt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Ao(s,Xn,Vi),Zn(s,Pt()),null}function Cp(s,a){var u=Et;Et|=1;try{return s(a)}finally{Et=u,Et===0&&(Oa=Pt()+500,Nc&&ms())}}function Io(s){ws!==null&&ws.tag===0&&(Et&6)===0&&Na();var a=Et;Et|=1;var u=Ir.transition,v=gt;try{if(Ir.transition=null,gt=1,s)return s()}finally{gt=v,Ir.transition=u,Et=a,(Et&6)===0&&ms()}}function Sp(){cr=Pa.current,Dt(Pa)}function bo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,ZA(u)),tn!==null)for(u=tn.return;u!==null;){var v=u;switch(Nd(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Pc();break;case 3:xa(),Dt(Jn),Dt(xn),$d();break;case 5:Hd(v);break;case 4:xa();break;case 13:Dt(qt);break;case 19:Dt(qt);break;case 10:Vd(v.type._context);break;case 22:case 23:Sp()}u=u.return}if(pn=s,tn=s=Cs(s.current,null),Tn=cr=a,an=0,Gl=null,yp=eh=So=0,Xn=Jl=null,Eo!==null){for(a=0;a<Eo.length;a++)if(u=Eo[a],v=u.interleaved,v!==null){u.interleaved=null;var R=v.next,j=u.pending;if(j!==null){var q=j.next;j.next=R,v.next=q}u.pending=v}Eo=null}return s}function Q0(s,a){do{var u=tn;try{if(Fd(),zc.current=Kc,Hc){for(var v=zt.memoizedState;v!==null;){var R=v.queue;R!==null&&(R.pending=null),v=v.next}Hc=!1}if(Co=0,dn=on=zt=null,ql=!1,zl=0,gp.current=null,u===null||u.return===null){an=1,Gl=a,tn=null;break}e:{var j=s,q=u.return,Y=u,se=a;if(a=Tn,Y.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var pe=se,Ce=Y,Ie=Ce.tag;if((Ce.mode&1)===0&&(Ie===0||Ie===11||Ie===15)){var Te=Ce.alternate;Te?(Ce.updateQueue=Te.updateQueue,Ce.memoizedState=Te.memoizedState,Ce.lanes=Te.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Le=E0(q);if(Le!==null){Le.flags&=-257,T0(Le,q,Y,j,a),Le.mode&1&&w0(j,pe,a),a=Le,se=pe;var Be=a.updateQueue;if(Be===null){var He=new Set;He.add(se),a.updateQueue=He}else Be.add(se);break e}else{if((a&1)===0){w0(j,pe,a),Ip();break e}se=Error(t(426))}}else if(Bt&&Y.mode&1){var Qt=E0(q);if(Qt!==null){(Qt.flags&65536)===0&&(Qt.flags|=256),T0(Qt,q,Y,j,a),Md(ka(se,Y));break e}}j=se=ka(se,Y),an!==4&&(an=2),Jl===null?Jl=[j]:Jl.push(j),j=q;do{switch(j.tag){case 3:j.flags|=65536,a&=-a,j.lanes|=a;var he=v0(j,se,a);W_(j,he);break e;case 1:Y=se;var oe=j.type,fe=j.stateNode;if((j.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(_s===null||!_s.has(fe)))){j.flags|=65536,a&=-a,j.lanes|=a;var xe=_0(j,Y,a);W_(j,xe);break e}}j=j.return}while(j!==null)}Z0(u)}catch(We){a=We,tn===u&&u!==null&&(tn=u=u.return);continue}break}while(!0)}function Y0(){var s=Zc.current;return Zc.current=Kc,s===null?Kc:s}function Ip(){(an===0||an===3||an===2)&&(an=4),pn===null||(So&268435455)===0&&(eh&268435455)===0||Ts(pn,Tn)}function oh(s,a){var u=Et;Et|=2;var v=Y0();(pn!==s||Tn!==a)&&(Vi=null,bo(s,a));do try{Sx();break}catch(R){Q0(s,R)}while(!0);if(Fd(),Et=u,Zc.current=v,tn!==null)throw Error(t(261));return pn=null,Tn=0,an}function Sx(){for(;tn!==null;)X0(tn)}function Ix(){for(;tn!==null&&!rc();)X0(tn)}function X0(s){var a=nw(s.alternate,s,cr);s.memoizedProps=s.pendingProps,a===null?Z0(s):tn=a,gp.current=null}function Z0(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=yx(u,a,cr),u!==null){tn=u;return}}else{if(u=vx(u,a),u!==null){u.flags&=32767,tn=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{an=6,tn=null;return}}if(a=a.sibling,a!==null){tn=a;return}tn=a=s}while(a!==null);an===0&&(an=5)}function Ao(s,a,u){var v=gt,R=Ir.transition;try{Ir.transition=null,gt=1,bx(s,a,u,v)}finally{Ir.transition=R,gt=v}return null}function bx(s,a,u,v){do Na();while(ws!==null);if((Et&6)!==0)throw Error(t(327));u=s.finishedWork;var R=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var j=u.lanes|u.childLanes;if(xt(s,j),s===pn&&(tn=pn=null,Tn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||nh||(nh=!0,rw(vr,function(){return Na(),null})),j=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||j){j=Ir.transition,Ir.transition=null;var q=gt;gt=1;var Y=Et;Et|=4,gp.current=null,wx(s,u),z0(u,s),$A(Id),us=!!Sd,Id=Sd=null,s.current=u,Ex(u),ld(),Et=Y,gt=q,Ir.transition=j}else s.current=u;if(nh&&(nh=!1,ws=s,rh=R),j=s.pendingLanes,j===0&&(_s=null),oc(u.stateNode),Zn(s,Pt()),a!==null)for(v=s.onRecoverableError,u=0;u<a.length;u++)R=a[u],v(R.value,{componentStack:R.stack,digest:R.digest});if(th)throw th=!1,s=_p,_p=null,s;return(rh&1)!==0&&s.tag!==0&&Na(),j=s.pendingLanes,(j&1)!==0?s===wp?Ql++:(Ql=0,wp=s):Ql=0,ms(),null}function Na(){if(ws!==null){var s=as(rh),a=Ir.transition,u=gt;try{if(Ir.transition=null,gt=16>s?16:s,ws===null)var v=!1;else{if(s=ws,ws=null,rh=0,(Et&6)!==0)throw Error(t(331));var R=Et;for(Et|=4,Fe=s.current;Fe!==null;){var j=Fe,q=j.child;if((Fe.flags&16)!==0){var Y=j.deletions;if(Y!==null){for(var se=0;se<Y.length;se++){var pe=Y[se];for(Fe=pe;Fe!==null;){var Ce=Fe;switch(Ce.tag){case 0:case 11:case 15:Kl(8,Ce,j)}var Ie=Ce.child;if(Ie!==null)Ie.return=Ce,Fe=Ie;else for(;Fe!==null;){Ce=Fe;var Te=Ce.sibling,Le=Ce.return;if(F0(Ce),Ce===pe){Fe=null;break}if(Te!==null){Te.return=Le,Fe=Te;break}Fe=Le}}}var Be=j.alternate;if(Be!==null){var He=Be.child;if(He!==null){Be.child=null;do{var Qt=He.sibling;He.sibling=null,He=Qt}while(He!==null)}}Fe=j}}if((j.subtreeFlags&2064)!==0&&q!==null)q.return=j,Fe=q;else e:for(;Fe!==null;){if(j=Fe,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Kl(9,j,j.return)}var he=j.sibling;if(he!==null){he.return=j.return,Fe=he;break e}Fe=j.return}}var oe=s.current;for(Fe=oe;Fe!==null;){q=Fe;var fe=q.child;if((q.subtreeFlags&2064)!==0&&fe!==null)fe.return=q,Fe=fe;else e:for(q=oe;Fe!==null;){if(Y=Fe,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Xc(9,Y)}}catch(We){$t(Y,Y.return,We)}if(Y===q){Fe=null;break e}var xe=Y.sibling;if(xe!==null){xe.return=Y.return,Fe=xe;break e}Fe=Y.return}}if(Et=R,ms(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(uo,s)}catch{}v=!0}return v}finally{gt=u,Ir.transition=a}}return!1}function ew(s,a,u){a=ka(u,a),a=v0(s,a,1),s=ys(s,a,1),a=Bn(),s!==null&&(ss(s,1,a),Zn(s,a))}function $t(s,a,u){if(s.tag===3)ew(s,s,u);else for(;a!==null;){if(a.tag===3){ew(a,s,u);break}else if(a.tag===1){var v=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(_s===null||!_s.has(v))){s=ka(u,s),s=_0(a,s,1),a=ys(a,s,1),s=Bn(),a!==null&&(ss(a,1,s),Zn(a,s));break}}a=a.return}}function Ax(s,a,u){var v=s.pingCache;v!==null&&v.delete(a),a=Bn(),s.pingedLanes|=s.suspendedLanes&u,pn===s&&(Tn&u)===u&&(an===4||an===3&&(Tn&130023424)===Tn&&500>Pt()-vp?bo(s,0):yp|=u),Zn(s,a)}function tw(s,a){a===0&&((s.mode&1)===0?a=1:(a=na,na<<=1,(na&130023424)===0&&(na=4194304)));var u=Bn();s=Mi(s,a),s!==null&&(ss(s,a,u),Zn(s,u))}function xx(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),tw(s,u)}function kx(s,a){var u=0;switch(s.tag){case 13:var v=s.stateNode,R=s.memoizedState;R!==null&&(u=R.retryLane);break;case 19:v=s.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(a),tw(s,u)}var nw;nw=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||Jn.current)Yn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return Yn=!1,gx(s,a,u);Yn=(s.flags&131072)!==0}else Yn=!1,Bt&&(a.flags&1048576)!==0&&D_(a,Dc,a.index);switch(a.lanes=0,a.tag){case 2:var v=a.type;Qc(s,a),s=a.pendingProps;var R=Ea(a,xn.current);Aa(a,u),R=Jd(null,a,v,s,R,u);var j=Qd();return a.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Qn(v)?(j=!0,Oc(a)):j=!1,a.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,qd(a),R.updater=Gc,a.stateNode=R,R._reactInternals=a,np(a,v,s,u),a=op(null,a,v,!0,j,u)):(a.tag=0,Bt&&j&&Od(a),Vn(null,a,R,u),a=a.child),a;case 16:v=a.elementType;e:{switch(Qc(s,a),s=a.pendingProps,R=v._init,v=R(v._payload),a.type=v,R=a.tag=Px(v),s=zr(v,s),R){case 0:a=sp(null,a,v,s,u);break e;case 1:a=x0(null,a,v,s,u);break e;case 11:a=C0(null,a,v,s,u);break e;case 14:a=S0(null,a,v,zr(v.type,s),u);break e}throw Error(t(306,v,""))}return a;case 0:return v=a.type,R=a.pendingProps,R=a.elementType===v?R:zr(v,R),sp(s,a,v,R,u);case 1:return v=a.type,R=a.pendingProps,R=a.elementType===v?R:zr(v,R),x0(s,a,v,R,u);case 3:e:{if(k0(a),s===null)throw Error(t(387));v=a.pendingProps,j=a.memoizedState,R=j.element,H_(s,a),Uc(a,v,null,u);var q=a.memoizedState;if(v=q.element,j.isDehydrated)if(j={element:v,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},a.updateQueue.baseState=j,a.memoizedState=j,a.flags&256){R=ka(Error(t(423)),a),a=R0(s,a,v,u,R);break e}else if(v!==R){R=ka(Error(t(424)),a),a=R0(s,a,v,u,R);break e}else for(ur=fs(a.stateNode.containerInfo.firstChild),lr=a,Bt=!0,qr=null,u=q_(a,null,v,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Sa(),v===R){a=Fi(s,a,u);break e}Vn(s,a,v,u)}a=a.child}return a;case 5:return K_(a),s===null&&Dd(a),v=a.type,R=a.pendingProps,j=s!==null?s.memoizedProps:null,q=R.children,bd(v,R)?q=null:j!==null&&bd(v,j)&&(a.flags|=32),A0(s,a),Vn(s,a,q,u),a.child;case 6:return s===null&&Dd(a),null;case 13:return P0(s,a,u);case 4:return zd(a,a.stateNode.containerInfo),v=a.pendingProps,s===null?a.child=Ia(a,null,v,u):Vn(s,a,v,u),a.child;case 11:return v=a.type,R=a.pendingProps,R=a.elementType===v?R:zr(v,R),C0(s,a,v,R,u);case 7:return Vn(s,a,a.pendingProps,u),a.child;case 8:return Vn(s,a,a.pendingProps.children,u),a.child;case 12:return Vn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(v=a.type._context,R=a.pendingProps,j=a.memoizedProps,q=R.value,Ot(Fc,v._currentValue),v._currentValue=q,j!==null)if(Ur(j.value,q)){if(j.children===R.children&&!Jn.current){a=Fi(s,a,u);break e}}else for(j=a.child,j!==null&&(j.return=a);j!==null;){var Y=j.dependencies;if(Y!==null){q=j.child;for(var se=Y.firstContext;se!==null;){if(se.context===v){if(j.tag===1){se=ji(-1,u&-u),se.tag=2;var pe=j.updateQueue;if(pe!==null){pe=pe.shared;var Ce=pe.pending;Ce===null?se.next=se:(se.next=Ce.next,Ce.next=se),pe.pending=se}}j.lanes|=u,se=j.alternate,se!==null&&(se.lanes|=u),Bd(j.return,u,a),Y.lanes|=u;break}se=se.next}}else if(j.tag===10)q=j.type===a.type?null:j.child;else if(j.tag===18){if(q=j.return,q===null)throw Error(t(341));q.lanes|=u,Y=q.alternate,Y!==null&&(Y.lanes|=u),Bd(q,u,a),q=j.sibling}else q=j.child;if(q!==null)q.return=j;else for(q=j;q!==null;){if(q===a){q=null;break}if(j=q.sibling,j!==null){j.return=q.return,q=j;break}q=q.return}j=q}Vn(s,a,R.children,u),a=a.child}return a;case 9:return R=a.type,v=a.pendingProps.children,Aa(a,u),R=Cr(R),v=v(R),a.flags|=1,Vn(s,a,v,u),a.child;case 14:return v=a.type,R=zr(v,a.pendingProps),R=zr(v.type,R),S0(s,a,v,R,u);case 15:return I0(s,a,a.type,a.pendingProps,u);case 17:return v=a.type,R=a.pendingProps,R=a.elementType===v?R:zr(v,R),Qc(s,a),a.tag=1,Qn(v)?(s=!0,Oc(a)):s=!1,Aa(a,u),g0(a,v,R),np(a,v,R,u),op(null,a,v,!0,s,u);case 19:return N0(s,a,u);case 22:return b0(s,a,u)}throw Error(t(156,a.tag))};function rw(s,a){return ea(s,a)}function Rx(s,a,u,v){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(s,a,u,v){return new Rx(s,a,u,v)}function bp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Px(s){if(typeof s=="function")return bp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===N)return 11;if(s===G)return 14}return 2}function Cs(s,a){var u=s.alternate;return u===null?(u=br(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function ah(s,a,u,v,R,j){var q=2;if(v=s,typeof s=="function")bp(s)&&(q=1);else if(typeof s=="string")q=5;else e:switch(s){case P:return xo(u.children,R,j,a);case T:q=8,R|=8;break;case b:return s=br(12,u,a,R|2),s.elementType=b,s.lanes=j,s;case D:return s=br(13,u,a,R),s.elementType=D,s.lanes=j,s;case z:return s=br(19,u,a,R),s.elementType=z,s.lanes=j,s;case Z:return lh(u,R,j,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:q=10;break e;case x:q=9;break e;case N:q=11;break e;case G:q=14;break e;case re:q=16,v=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=br(q,u,a,R),a.elementType=s,a.type=v,a.lanes=j,a}function xo(s,a,u,v){return s=br(7,s,v,a),s.lanes=u,s}function lh(s,a,u,v){return s=br(22,s,v,a),s.elementType=Z,s.lanes=u,s.stateNode={isHidden:!1},s}function Ap(s,a,u){return s=br(6,s,null,a),s.lanes=u,s}function xp(s,a,u){return a=br(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Ox(s,a,u,v,R){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=is(0),this.expirationTimes=is(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=is(0),this.identifierPrefix=v,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function kp(s,a,u,v,R,j,q,Y,se){return s=new Ox(s,a,u,Y,se),a===1?(a=1,j===!0&&(a|=8)):a=0,j=br(3,null,null,a),s.current=j,j.stateNode=s,j.memoizedState={element:v,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(j),s}function Nx(s,a,u){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:v==null?null:""+v,children:s,containerInfo:a,implementation:u}}function iw(s){if(!s)return ps;s=s._reactInternals;e:{if(Lr(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Qn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Qn(u))return O_(s,u,a)}return a}function sw(s,a,u,v,R,j,q,Y,se){return s=kp(u,v,!0,s,R,j,q,Y,se),s.context=iw(null),u=s.current,v=Bn(),R=Es(u),j=ji(v,R),j.callback=a??null,ys(u,j,R),s.current.lanes=R,ss(s,R,v),Zn(s,v),s}function uh(s,a,u,v){var R=a.current,j=Bn(),q=Es(R);return u=iw(u),a.context===null?a.context=u:a.pendingContext=u,a=ji(j,q),a.payload={element:s},v=v===void 0?null:v,v!==null&&(a.callback=v),s=ys(R,a,q),s!==null&&($r(s,R,q,j),Bc(s,R,q)),q}function ch(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function ow(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Rp(s,a){ow(s,a),(s=s.alternate)&&ow(s,a)}function Lx(){return null}var aw=typeof reportError=="function"?reportError:function(s){console.error(s)};function Pp(s){this._internalRoot=s}hh.prototype.render=Pp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));uh(s,a,null,null)},hh.prototype.unmount=Pp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Io(function(){uh(null,s,null,null)}),a[Oi]=null}};function hh(s){this._internalRoot=s}hh.prototype.unstable_scheduleHydration=function(s){if(s){var a=hc();s={blockedOn:null,target:s,priority:a};for(var u=0;u<ni.length&&a!==0&&a<ni[u].priority;u++);ni.splice(u,0,s),u===0&&pc(s)}};function Op(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function fh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function lw(){}function Dx(s,a,u,v,R){if(R){if(typeof v=="function"){var j=v;v=function(){var pe=ch(q);j.call(pe)}}var q=sw(a,v,s,0,null,!1,!1,"",lw);return s._reactRootContainer=q,s[Oi]=q.current,Ll(s.nodeType===8?s.parentNode:s),Io(),q}for(;R=s.lastChild;)s.removeChild(R);if(typeof v=="function"){var Y=v;v=function(){var pe=ch(se);Y.call(pe)}}var se=kp(s,0,!1,null,null,!1,!1,"",lw);return s._reactRootContainer=se,s[Oi]=se.current,Ll(s.nodeType===8?s.parentNode:s),Io(function(){uh(a,se,u,v)}),se}function dh(s,a,u,v,R){var j=u._reactRootContainer;if(j){var q=j;if(typeof R=="function"){var Y=R;R=function(){var se=ch(q);Y.call(se)}}uh(a,q,s,R)}else q=Dx(u,a,s,R,v);return ch(q)}uc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=rs(a.pendingLanes);u!==0&&(os(a,u|1),Zn(a,Pt()),(Et&6)===0&&(Oa=Pt()+500,ms()))}break;case 13:Io(function(){var v=Mi(s,1);if(v!==null){var R=Bn();$r(v,s,1,R)}}),Rp(s,1)}},ra=function(s){if(s.tag===13){var a=Mi(s,134217728);if(a!==null){var u=Bn();$r(a,s,134217728,u)}Rp(s,134217728)}},cc=function(s){if(s.tag===13){var a=Es(s),u=Mi(s,a);if(u!==null){var v=Bn();$r(u,s,a,v)}Rp(s,a)}},hc=function(){return gt},fc=function(s,a){var u=gt;try{return gt=s,a()}finally{gt=u}},Go=function(s,a,u){switch(a){case"input":if(Xe(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var v=u[a];if(v!==s&&v.form===s.form){var R=Rc(v);if(!R)throw Error(t(90));Se(v),Xe(v,R)}}}break;case"textarea":De(s,u);break;case"select":a=u.value,a!=null&&Ae(s,!!u.multiple,a,!1)}},io=Cp,ml=Io;var Mx={usingClientEntryPoint:!1,Events:[jl,_a,Rc,ei,pl,Cp]},Yl={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jx={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=vl(s),s===null?null:s.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||Lx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{uo=ph.inject(jx),ir=ph}catch{}}return er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mx,er.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Op(a))throw Error(t(200));return Nx(s,a,null,u)},er.createRoot=function(s,a){if(!Op(s))throw Error(t(299));var u=!1,v="",R=aw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(R=a.onRecoverableError)),a=kp(s,1,!1,null,null,u,!1,v,R),s[Oi]=a.current,Ll(s.nodeType===8?s.parentNode:s),new Pp(a)},er.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=vl(a),s=s===null?null:s.stateNode,s},er.flushSync=function(s){return Io(s)},er.hydrate=function(s,a,u){if(!fh(a))throw Error(t(200));return dh(null,s,a,!0,u)},er.hydrateRoot=function(s,a,u){if(!Op(s))throw Error(t(405));var v=u!=null&&u.hydratedSources||null,R=!1,j="",q=aw;if(u!=null&&(u.unstable_strictMode===!0&&(R=!0),u.identifierPrefix!==void 0&&(j=u.identifierPrefix),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),a=sw(a,null,s,1,u??null,R,!1,j,q),s[Oi]=a.current,Ll(s),v)for(s=0;s<v.length;s++)u=v[s],R=u._getVersion,R=R(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,R]:a.mutableSourceEagerHydrationData.push(u,R);return new hh(a)},er.render=function(s,a,u){if(!fh(a))throw Error(t(200));return dh(null,s,a,!1,u)},er.unmountComponentAtNode=function(s){if(!fh(s))throw Error(t(40));return s._reactRootContainer?(Io(function(){dh(null,null,s,!1,function(){s._reactRootContainer=null,s[Oi]=null})}),!0):!1},er.unstable_batchedUpdates=Cp,er.unstable_renderSubtreeIntoContainer=function(s,a,u,v){if(!fh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return dh(s,a,u,!1,v)},er.version="18.3.1-next-f1338f8080-20240426",er}var gw;function Sy(){if(gw)return Dp.exports;gw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dp.exports=$x(),Dp.exports}var yw;function Kx(){if(yw)return gh;yw=1;var n=Sy();return gh.createRoot=n.createRoot,gh.hydrateRoot=n.hydrateRoot,gh}var Gx=Kx();const Jx=()=>{};var vw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Qx=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},TC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,y=o>>2,m=(o&3)<<4|c>>4;let d=(c&15)<<2|f>>6,g=f&63;h||(g=64,l||(d=64)),r.push(t[y],t[m],t[d],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||f==null||m==null)throw new Yx;const d=o<<2|c>>4;if(r.push(d),f!==64){const g=c<<4&240|f>>2;if(r.push(g),m!==64){const C=f<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xx=function(n){const e=EC(n);return TC.encodeByteArray(e,!0)},Wh=function(n){return Xx(n).replace(/\./g,"")},CC=function(n){try{return TC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=()=>Zx().__FIREBASE_DEFAULTS__,tk=()=>{if(typeof process>"u"||typeof vw>"u")return;const n=vw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&CC(n[1]);return e&&JSON.parse(e)},_f=()=>{try{return Jx()||ek()||tk()||nk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},SC=n=>{var e,t;return(t=(e=_f())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},IC=n=>{const e=SC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bC=()=>{var n;return(n=_f())===null||n===void 0?void 0:n.config},AC=n=>{var e;return(e=_f())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(n){return n.endsWith(".cloudworkstations.dev")}async function Iy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wh(JSON.stringify(t)),Wh(JSON.stringify(l)),""].join(".")}const cu={};function ik(){const n={prod:[],emulator:[]};for(const e of Object.keys(cu))cu[e]?n.emulator.push(e):n.prod.push(e);return n}function sk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let _w=!1;function by(n,e){if(typeof window>"u"||typeof document>"u"||!Gs(window.location.host)||cu[n]===e||cu[n]||_w)return;cu[n]=e;function t(d){return`__firebase__banner__${d}`}const r="__firebase__banner",o=ik().prod.length>0;function l(){const d=document.getElementById(r);d&&d.remove()}function c(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function h(d,g){d.setAttribute("width","24"),d.setAttribute("id",g),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function f(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{_w=!0,l()},d}function y(d,g){d.setAttribute("id",g),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function m(){const d=sk(r),g=t("text"),C=document.getElementById(g)||document.createElement("span"),S=t("learnmore"),E=document.getElementById(S)||document.createElement("a"),_=t("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const O=d.element;c(O),y(E,S);const I=f();h(w,_),O.append(w,C,E,I),document.body.appendChild(O)}o?(C.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ok(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function ak(){var n;const e=(n=_f())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ck(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hk(){const n=Mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fk(){return!ak()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dk(){try{return typeof indexedDB=="object"}catch{return!1}}function pk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="FirebaseError";class Ti extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mk,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?gk(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Ti(i,c,r)}}function gk(n,e){return n.replace(yk,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yk=/\{\$([^}]+)}/g;function vk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function No(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(ww(o)&&ww(l)){if(!No(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ww(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ru(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function _k(n,e){const t=new wk(n,e);return t.subscribe.bind(t)}class wk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ek(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Fp),i.error===void 0&&(i.error=Fp),i.complete===void 0&&(i.complete=Fp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ek(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n){return n&&n._delegate?n._delegate:n}class Vs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new rk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sk(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ck(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ck(n){return n===ko?void 0:n}function Sk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(pt||(pt={}));const bk={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},Ak=pt.INFO,xk={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},kk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=xk[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ay{constructor(e){this.name=e,this._logLevel=Ak,this._logHandler=kk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...e),this._logHandler(this,pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...e),this._logHandler(this,pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...e),this._logHandler(this,pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...e),this._logHandler(this,pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...e),this._logHandler(this,pt.ERROR,...e)}}const Rk=(n,e)=>e.some(t=>n instanceof t);let Ew,Tw;function Pk(){return Ew||(Ew=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ok(){return Tw||(Tw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kC=new WeakMap,Vg=new WeakMap,RC=new WeakMap,Vp=new WeakMap,xy=new WeakMap;function Nk(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Ds(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&kC.set(t,n)}).catch(()=>{}),xy.set(e,n),e}function Lk(n){if(Vg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Vg.set(n,e)}let Bg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ds(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Dk(n){Bg=n(Bg)}function Mk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bp(this),e,...t);return RC.set(r,e.sort?e.sort():[e]),Ds(r)}:Ok().includes(n)?function(...e){return n.apply(Bp(this),e),Ds(kC.get(this))}:function(...e){return Ds(n.apply(Bp(this),e))}}function jk(n){return typeof n=="function"?Mk(n):(n instanceof IDBTransaction&&Lk(n),Rk(n,Pk())?new Proxy(n,Bg):n)}function Ds(n){if(n instanceof IDBRequest)return Nk(n);if(Vp.has(n))return Vp.get(n);const e=jk(n);return e!==n&&(Vp.set(n,e),xy.set(e,n)),e}const Bp=n=>xy.get(n);function Fk(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=Ds(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Ds(l.result),h.oldVersion,h.newVersion,Ds(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Vk=["get","getKey","getAll","getAllKeys","count"],Bk=["put","add","delete","clear"],Up=new Map;function Cw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Bk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),i&&h.done]))[0]};return Up.set(e,o),o}Dk(n=>({...n,get:(e,t,r)=>Cw(e,t)||n.get(e,t,r),has:(e,t)=>!!Cw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ug="@firebase/app",Sw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Ay("@firebase/app"),zk="@firebase/app-compat",Hk="@firebase/analytics-compat",Wk="@firebase/analytics",$k="@firebase/app-check-compat",Kk="@firebase/app-check",Gk="@firebase/auth",Jk="@firebase/auth-compat",Qk="@firebase/database",Yk="@firebase/data-connect",Xk="@firebase/database-compat",Zk="@firebase/functions",eR="@firebase/functions-compat",tR="@firebase/installations",nR="@firebase/installations-compat",rR="@firebase/messaging",iR="@firebase/messaging-compat",sR="@firebase/performance",oR="@firebase/performance-compat",aR="@firebase/remote-config",lR="@firebase/remote-config-compat",uR="@firebase/storage",cR="@firebase/storage-compat",hR="@firebase/firestore",fR="@firebase/ai",dR="@firebase/firestore-compat",pR="firebase",mR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="[DEFAULT]",gR={[Ug]:"fire-core",[zk]:"fire-core-compat",[Wk]:"fire-analytics",[Hk]:"fire-analytics-compat",[Kk]:"fire-app-check",[$k]:"fire-app-check-compat",[Gk]:"fire-auth",[Jk]:"fire-auth-compat",[Qk]:"fire-rtdb",[Yk]:"fire-data-connect",[Xk]:"fire-rtdb-compat",[Zk]:"fire-fn",[eR]:"fire-fn-compat",[tR]:"fire-iid",[nR]:"fire-iid-compat",[rR]:"fire-fcm",[iR]:"fire-fcm-compat",[sR]:"fire-perf",[oR]:"fire-perf-compat",[aR]:"fire-rc",[lR]:"fire-rc-compat",[uR]:"fire-gcs",[cR]:"fire-gcs-compat",[hR]:"fire-fst",[dR]:"fire-fst-compat",[fR]:"fire-vertex","fire-js":"fire-js",[pR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,yR=new Map,zg=new Map;function Iw(n,e){try{n.container.addComponent(e)}catch(t){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lo(n){const e=n.name;if(zg.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;zg.set(e,n);for(const t of $h.values())Iw(t,n);for(const t of yR.values())Iw(t,n);return!0}function wf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new ju("app","Firebase",vR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=mR;function PC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ms.create("bad-app-name",{appName:String(i)});if(t||(t=bC()),!t)throw Ms.create("no-options");const o=$h.get(i);if(o){if(No(t,o.options)&&No(r,o.config))return o;throw Ms.create("duplicate-app",{appName:i})}const l=new Ik(i);for(const h of zg.values())l.addComponent(h);const c=new _R(t,r,l);return $h.set(i,c),c}function ky(n=qg){const e=$h.get(n);if(!e&&n===qg&&bC())return PC();if(!e)throw Ms.create("no-app",{appName:n});return e}function pi(n,e,t){var r;let i=(r=gR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(c.join(" "));return}Lo(new Vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="firebase-heartbeat-database",ER=1,_u="firebase-heartbeat-store";let qp=null;function OC(){return qp||(qp=Fk(wR,ER,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_u)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ms.create("idb-open",{originalErrorMessage:n.message})})),qp}async function TR(n){try{const t=(await OC()).transaction(_u),r=await t.objectStore(_u).get(NC(n));return await t.done,r}catch(e){if(e instanceof Ti)$i.warn(e.message);else{const t=Ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$i.warn(t.message)}}}async function bw(n,e){try{const r=(await OC()).transaction(_u,"readwrite");await r.objectStore(_u).put(e,NC(n)),await r.done}catch(t){if(t instanceof Ti)$i.warn(t.message);else{const r=Ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$i.warn(r.message)}}}function NC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1024,SR=30;class IR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Aw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>SR){const l=xR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Aw(),{heartbeatsToSend:r,unsentEntries:i}=bR(this._heartbeatsCache.heartbeats),o=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return $i.warn(t),""}}}function Aw(){return new Date().toISOString().substring(0,10)}function bR(n,e=CR){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),xw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dk()?pk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return bw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return bw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xw(n){return Wh(JSON.stringify({version:2,heartbeats:n})).length}function xR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n){Lo(new Vs("platform-logger",e=>new Uk(e),"PRIVATE")),Lo(new Vs("heartbeat",e=>new IR(e),"PRIVATE")),pi(Ug,Sw,n),pi(Ug,Sw,"esm2017"),pi("fire-js","")}kR("");var RR="firebase",PR="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(RR,PR,"app");var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,LC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function b(){}b.prototype=T.prototype,P.D=T.prototype,P.prototype=new b,P.prototype.constructor=P,P.C=function(A,x,N){for(var D=Array(arguments.length-2),z=2;z<arguments.length;z++)D[z-2]=arguments[z];return T.prototype[x].apply(A,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,b){b||(b=0);var A=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)A[x]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(x=0;16>x;++x)A[x]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=P.g[0],b=P.g[1],x=P.g[2];var N=P.g[3],D=T+(N^b&(x^N))+A[0]+3614090360&4294967295;T=b+(D<<7&4294967295|D>>>25),D=N+(x^T&(b^x))+A[1]+3905402710&4294967295,N=T+(D<<12&4294967295|D>>>20),D=x+(b^N&(T^b))+A[2]+606105819&4294967295,x=N+(D<<17&4294967295|D>>>15),D=b+(T^x&(N^T))+A[3]+3250441966&4294967295,b=x+(D<<22&4294967295|D>>>10),D=T+(N^b&(x^N))+A[4]+4118548399&4294967295,T=b+(D<<7&4294967295|D>>>25),D=N+(x^T&(b^x))+A[5]+1200080426&4294967295,N=T+(D<<12&4294967295|D>>>20),D=x+(b^N&(T^b))+A[6]+2821735955&4294967295,x=N+(D<<17&4294967295|D>>>15),D=b+(T^x&(N^T))+A[7]+4249261313&4294967295,b=x+(D<<22&4294967295|D>>>10),D=T+(N^b&(x^N))+A[8]+1770035416&4294967295,T=b+(D<<7&4294967295|D>>>25),D=N+(x^T&(b^x))+A[9]+2336552879&4294967295,N=T+(D<<12&4294967295|D>>>20),D=x+(b^N&(T^b))+A[10]+4294925233&4294967295,x=N+(D<<17&4294967295|D>>>15),D=b+(T^x&(N^T))+A[11]+2304563134&4294967295,b=x+(D<<22&4294967295|D>>>10),D=T+(N^b&(x^N))+A[12]+1804603682&4294967295,T=b+(D<<7&4294967295|D>>>25),D=N+(x^T&(b^x))+A[13]+4254626195&4294967295,N=T+(D<<12&4294967295|D>>>20),D=x+(b^N&(T^b))+A[14]+2792965006&4294967295,x=N+(D<<17&4294967295|D>>>15),D=b+(T^x&(N^T))+A[15]+1236535329&4294967295,b=x+(D<<22&4294967295|D>>>10),D=T+(x^N&(b^x))+A[1]+4129170786&4294967295,T=b+(D<<5&4294967295|D>>>27),D=N+(b^x&(T^b))+A[6]+3225465664&4294967295,N=T+(D<<9&4294967295|D>>>23),D=x+(T^b&(N^T))+A[11]+643717713&4294967295,x=N+(D<<14&4294967295|D>>>18),D=b+(N^T&(x^N))+A[0]+3921069994&4294967295,b=x+(D<<20&4294967295|D>>>12),D=T+(x^N&(b^x))+A[5]+3593408605&4294967295,T=b+(D<<5&4294967295|D>>>27),D=N+(b^x&(T^b))+A[10]+38016083&4294967295,N=T+(D<<9&4294967295|D>>>23),D=x+(T^b&(N^T))+A[15]+3634488961&4294967295,x=N+(D<<14&4294967295|D>>>18),D=b+(N^T&(x^N))+A[4]+3889429448&4294967295,b=x+(D<<20&4294967295|D>>>12),D=T+(x^N&(b^x))+A[9]+568446438&4294967295,T=b+(D<<5&4294967295|D>>>27),D=N+(b^x&(T^b))+A[14]+3275163606&4294967295,N=T+(D<<9&4294967295|D>>>23),D=x+(T^b&(N^T))+A[3]+4107603335&4294967295,x=N+(D<<14&4294967295|D>>>18),D=b+(N^T&(x^N))+A[8]+1163531501&4294967295,b=x+(D<<20&4294967295|D>>>12),D=T+(x^N&(b^x))+A[13]+2850285829&4294967295,T=b+(D<<5&4294967295|D>>>27),D=N+(b^x&(T^b))+A[2]+4243563512&4294967295,N=T+(D<<9&4294967295|D>>>23),D=x+(T^b&(N^T))+A[7]+1735328473&4294967295,x=N+(D<<14&4294967295|D>>>18),D=b+(N^T&(x^N))+A[12]+2368359562&4294967295,b=x+(D<<20&4294967295|D>>>12),D=T+(b^x^N)+A[5]+4294588738&4294967295,T=b+(D<<4&4294967295|D>>>28),D=N+(T^b^x)+A[8]+2272392833&4294967295,N=T+(D<<11&4294967295|D>>>21),D=x+(N^T^b)+A[11]+1839030562&4294967295,x=N+(D<<16&4294967295|D>>>16),D=b+(x^N^T)+A[14]+4259657740&4294967295,b=x+(D<<23&4294967295|D>>>9),D=T+(b^x^N)+A[1]+2763975236&4294967295,T=b+(D<<4&4294967295|D>>>28),D=N+(T^b^x)+A[4]+1272893353&4294967295,N=T+(D<<11&4294967295|D>>>21),D=x+(N^T^b)+A[7]+4139469664&4294967295,x=N+(D<<16&4294967295|D>>>16),D=b+(x^N^T)+A[10]+3200236656&4294967295,b=x+(D<<23&4294967295|D>>>9),D=T+(b^x^N)+A[13]+681279174&4294967295,T=b+(D<<4&4294967295|D>>>28),D=N+(T^b^x)+A[0]+3936430074&4294967295,N=T+(D<<11&4294967295|D>>>21),D=x+(N^T^b)+A[3]+3572445317&4294967295,x=N+(D<<16&4294967295|D>>>16),D=b+(x^N^T)+A[6]+76029189&4294967295,b=x+(D<<23&4294967295|D>>>9),D=T+(b^x^N)+A[9]+3654602809&4294967295,T=b+(D<<4&4294967295|D>>>28),D=N+(T^b^x)+A[12]+3873151461&4294967295,N=T+(D<<11&4294967295|D>>>21),D=x+(N^T^b)+A[15]+530742520&4294967295,x=N+(D<<16&4294967295|D>>>16),D=b+(x^N^T)+A[2]+3299628645&4294967295,b=x+(D<<23&4294967295|D>>>9),D=T+(x^(b|~N))+A[0]+4096336452&4294967295,T=b+(D<<6&4294967295|D>>>26),D=N+(b^(T|~x))+A[7]+1126891415&4294967295,N=T+(D<<10&4294967295|D>>>22),D=x+(T^(N|~b))+A[14]+2878612391&4294967295,x=N+(D<<15&4294967295|D>>>17),D=b+(N^(x|~T))+A[5]+4237533241&4294967295,b=x+(D<<21&4294967295|D>>>11),D=T+(x^(b|~N))+A[12]+1700485571&4294967295,T=b+(D<<6&4294967295|D>>>26),D=N+(b^(T|~x))+A[3]+2399980690&4294967295,N=T+(D<<10&4294967295|D>>>22),D=x+(T^(N|~b))+A[10]+4293915773&4294967295,x=N+(D<<15&4294967295|D>>>17),D=b+(N^(x|~T))+A[1]+2240044497&4294967295,b=x+(D<<21&4294967295|D>>>11),D=T+(x^(b|~N))+A[8]+1873313359&4294967295,T=b+(D<<6&4294967295|D>>>26),D=N+(b^(T|~x))+A[15]+4264355552&4294967295,N=T+(D<<10&4294967295|D>>>22),D=x+(T^(N|~b))+A[6]+2734768916&4294967295,x=N+(D<<15&4294967295|D>>>17),D=b+(N^(x|~T))+A[13]+1309151649&4294967295,b=x+(D<<21&4294967295|D>>>11),D=T+(x^(b|~N))+A[4]+4149444226&4294967295,T=b+(D<<6&4294967295|D>>>26),D=N+(b^(T|~x))+A[11]+3174756917&4294967295,N=T+(D<<10&4294967295|D>>>22),D=x+(T^(N|~b))+A[2]+718787259&4294967295,x=N+(D<<15&4294967295|D>>>17),D=b+(N^(x|~T))+A[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+N&4294967295}r.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var b=T-this.blockSize,A=this.B,x=this.h,N=0;N<T;){if(x==0)for(;N<=b;)i(this,P,N),N+=this.blockSize;if(typeof P=="string"){for(;N<T;)if(A[x++]=P.charCodeAt(N++),x==this.blockSize){i(this,A),x=0;break}}else for(;N<T;)if(A[x++]=P[N++],x==this.blockSize){i(this,A),x=0;break}}this.h=x,this.o+=T},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var b=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=b&255,b/=256;for(this.u(P),P=Array(16),T=b=0;4>T;++T)for(var A=0;32>A;A+=8)P[b++]=this.g[T]>>>A&255;return P};function o(P,T){var b=c;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=T(P)}function l(P,T){this.h=T;for(var b=[],A=!0,x=P.length-1;0<=x;x--){var N=P[x]|0;A&&N==T||(b[x]=N,A=!1)}this.g=b}var c={};function h(P){return-128<=P&&128>P?o(P,function(T){return new l([T|0],0>T?-1:0)}):new l([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return m;if(0>P)return E(f(-P));for(var T=[],b=1,A=0;P>=b;A++)T[A]=P/b|0,b*=4294967296;return new l(T,0)}function y(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return E(y(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=f(Math.pow(T,8)),A=m,x=0;x<P.length;x+=8){var N=Math.min(8,P.length-x),D=parseInt(P.substring(x,x+N),T);8>N?(N=f(Math.pow(T,N)),A=A.j(N).add(f(D))):(A=A.j(b),A=A.add(f(D)))}return A}var m=h(0),d=h(1),g=h(16777216);n=l.prototype,n.m=function(){if(S(this))return-E(this).m();for(var P=0,T=1,b=0;b<this.g.length;b++){var A=this.i(b);P+=(0<=A?A:4294967296+A)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(C(this))return"0";if(S(this))return"-"+E(this).toString(P);for(var T=f(Math.pow(P,6)),b=this,A="";;){var x=I(b,T).g;b=_(b,x.j(T));var N=((0<b.g.length?b.g[0]:b.h)>>>0).toString(P);if(b=x,C(b))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function C(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function S(P){return P.h==-1}n.l=function(P){return P=_(this,P),S(P)?-1:C(P)?0:1};function E(P){for(var T=P.g.length,b=[],A=0;A<T;A++)b[A]=~P.g[A];return new l(b,~P.h).add(d)}n.abs=function(){return S(this)?E(this):this},n.add=function(P){for(var T=Math.max(this.g.length,P.g.length),b=[],A=0,x=0;x<=T;x++){var N=A+(this.i(x)&65535)+(P.i(x)&65535),D=(N>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);A=D>>>16,N&=65535,D&=65535,b[x]=D<<16|N}return new l(b,b[b.length-1]&-2147483648?-1:0)};function _(P,T){return P.add(E(T))}n.j=function(P){if(C(this)||C(P))return m;if(S(this))return S(P)?E(this).j(E(P)):E(E(this).j(P));if(S(P))return E(this.j(E(P)));if(0>this.l(g)&&0>P.l(g))return f(this.m()*P.m());for(var T=this.g.length+P.g.length,b=[],A=0;A<2*T;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var x=0;x<P.g.length;x++){var N=this.i(A)>>>16,D=this.i(A)&65535,z=P.i(x)>>>16,G=P.i(x)&65535;b[2*A+2*x]+=D*G,w(b,2*A+2*x),b[2*A+2*x+1]+=N*G,w(b,2*A+2*x+1),b[2*A+2*x+1]+=D*z,w(b,2*A+2*x+1),b[2*A+2*x+2]+=N*z,w(b,2*A+2*x+2)}for(A=0;A<T;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=T;A<2*T;A++)b[A]=0;return new l(b,0)};function w(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function O(P,T){this.g=P,this.h=T}function I(P,T){if(C(T))throw Error("division by zero");if(C(P))return new O(m,m);if(S(P))return T=I(E(P),T),new O(E(T.g),E(T.h));if(S(T))return T=I(P,E(T)),new O(E(T.g),T.h);if(30<P.g.length){if(S(P)||S(T))throw Error("slowDivide_ only works with positive integers.");for(var b=d,A=T;0>=A.l(P);)b=L(b),A=L(A);var x=V(b,1),N=V(A,1);for(A=V(A,2),b=V(b,2);!C(A);){var D=N.add(A);0>=D.l(P)&&(x=x.add(b),N=D),A=V(A,1),b=V(b,1)}return T=_(P,x.j(T)),new O(x,T)}for(x=m;0<=P.l(T);){for(b=Math.max(1,Math.floor(P.m()/T.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=f(b),D=N.j(T);S(D)||0<D.l(P);)b-=A,N=f(b),D=N.j(T);C(N)&&(N=d),x=x.add(N),P=_(P,D)}return new O(x,P)}n.A=function(P){return I(this,P).h},n.and=function(P){for(var T=Math.max(this.g.length,P.g.length),b=[],A=0;A<T;A++)b[A]=this.i(A)&P.i(A);return new l(b,this.h&P.h)},n.or=function(P){for(var T=Math.max(this.g.length,P.g.length),b=[],A=0;A<T;A++)b[A]=this.i(A)|P.i(A);return new l(b,this.h|P.h)},n.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),b=[],A=0;A<T;A++)b[A]=this.i(A)^P.i(A);return new l(b,this.h^P.h)};function L(P){for(var T=P.g.length+1,b=[],A=0;A<T;A++)b[A]=P.i(A)<<1|P.i(A-1)>>>31;return new l(b,P.h)}function V(P,T){var b=T>>5;T%=32;for(var A=P.g.length-b,x=[],N=0;N<A;N++)x[N]=0<T?P.i(N+b)>>>T|P.i(N+b+1)<<32-T:P.i(N+b);return new l(x,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=y,js=l}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DC,iu,MC,xh,Hg,jC,FC,VC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,M,B){return p==Array.prototype||p==Object.prototype||(p[M]=B.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var M=0;M<p.length;++M){var B=p[M];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=t(this);function i(p,M){if(M)e:{var B=r;p=p.split(".");for(var K=0;K<p.length-1;K++){var ce=p[K];if(!(ce in B))break e;B=B[ce]}p=p[p.length-1],K=B[p],M=M(K),M!=K&&M!=null&&e(B,p,{configurable:!0,writable:!0,value:M})}}function o(p,M){p instanceof String&&(p+="");var B=0,K=!1,ce={next:function(){if(!K&&B<p.length){var me=B++;return{value:M(me,p[me]),done:!1}}return K=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}i("Array.prototype.values",function(p){return p||function(){return o(this,function(M,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(p){var M=typeof p;return M=M!="object"?M:p?Array.isArray(p)?"array":M:"null",M=="array"||M=="object"&&typeof p.length=="number"}function f(p){var M=typeof p;return M=="object"&&p!=null||M=="function"}function y(p,M,B){return p.call.apply(p.bind,arguments)}function m(p,M,B){if(!p)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,K),p.apply(M,ce)}}return function(){return p.apply(M,arguments)}}function d(p,M,B){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:m,d.apply(null,arguments)}function g(p,M){var B=Array.prototype.slice.call(arguments,1);return function(){var K=B.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function C(p,M){function B(){}B.prototype=M.prototype,p.aa=M.prototype,p.prototype=new B,p.prototype.constructor=p,p.Qb=function(K,ce,me){for(var Re=Array(arguments.length-2),It=2;It<arguments.length;It++)Re[It-2]=arguments[It];return M.prototype[ce].apply(K,Re)}}function S(p){const M=p.length;if(0<M){const B=Array(M);for(let K=0;K<M;K++)B[K]=p[K];return B}return[]}function E(p,M){for(let B=1;B<arguments.length;B++){const K=arguments[B];if(h(K)){const ce=p.length||0,me=K.length||0;p.length=ce+me;for(let Re=0;Re<me;Re++)p[ce+Re]=K[Re]}else p.push(K)}}class _{constructor(M,B){this.i=M,this.j=B,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(p){return/^[\s\xa0]*$/.test(p)}function O(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function I(p){return I[" "](p),p}I[" "]=function(){};var L=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function V(p,M,B){for(const K in p)M.call(B,p[K],K,p)}function P(p,M){for(const B in p)M.call(void 0,p[B],B,p)}function T(p){const M={};for(const B in p)M[B]=p[B];return M}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(p,M){let B,K;for(let ce=1;ce<arguments.length;ce++){K=arguments[ce];for(B in K)p[B]=K[B];for(let me=0;me<b.length;me++)B=b[me],Object.prototype.hasOwnProperty.call(K,B)&&(p[B]=K[B])}}function x(p){var M=1;p=p.split(":");const B=[];for(;0<M&&p.length;)B.push(p.shift()),M--;return p.length&&B.push(p.join(":")),B}function N(p){c.setTimeout(()=>{throw p},0)}function D(){var p=J;let M=null;return p.g&&(M=p.g,p.g=p.g.next,p.g||(p.h=null),M.next=null),M}class z{constructor(){this.h=this.g=null}add(M,B){const K=G.get();K.set(M,B),this.h?this.h.next=K:this.g=K,this.h=K}}var G=new _(()=>new re,p=>p.reset());class re{constructor(){this.next=this.g=this.h=null}set(M,B){this.h=M,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ie=!1,J=new z,$=()=>{const p=c.Promise.resolve(void 0);Z=()=>{p.then(F)}};var F=()=>{for(var p;p=D();){try{p.h.call(p.g)}catch(B){N(B)}var M=G;M.j(p),100>M.h&&(M.h++,p.next=M.g,M.g=p)}ie=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(p,M){this.type=p,this.g=this.target=M,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,M=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const B=()=>{};c.addEventListener("test",B,M),c.removeEventListener("test",B,M)}catch{}return p}();function te(p,M){if(H.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var B=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=M,M=p.relatedTarget){if(L){e:{try{I(M.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(M=null)}}else B=="mouseover"?M=p.fromElement:B=="mouseout"&&(M=p.toElement);this.relatedTarget=M,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:W[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&te.aa.h.call(this)}}C(te,H);var W={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Q=0;function ee(p,M,B,K,ce){this.listener=p,this.proxy=null,this.src=M,this.type=B,this.capture=!!K,this.ha=ce,this.key=++Q,this.da=this.fa=!1}function ae(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ge(p){this.src=p,this.g={},this.h=0}ge.prototype.add=function(p,M,B,K,ce){var me=p.toString();p=this.g[me],p||(p=this.g[me]=[],this.h++);var Re=Pe(p,M,K,ce);return-1<Re?(M=p[Re],B||(M.fa=!1)):(M=new ee(M,this.src,me,!!K,ce),M.fa=B,p.push(M)),M};function Se(p,M){var B=M.type;if(B in p.g){var K=p.g[B],ce=Array.prototype.indexOf.call(K,M,void 0),me;(me=0<=ce)&&Array.prototype.splice.call(K,ce,1),me&&(ae(M),p.g[B].length==0&&(delete p.g[B],p.h--))}}function Pe(p,M,B,K){for(var ce=0;ce<p.length;++ce){var me=p[ce];if(!me.da&&me.listener==M&&me.capture==!!B&&me.ha==K)return ce}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),Ne={};function Ue(p,M,B,K,ce){if(Array.isArray(M)){for(var me=0;me<M.length;me++)Ue(p,M[me],B,K,ce);return null}return B=ze(B),p&&p[X]?p.K(M,B,f(K)?!!K.capture:!1,ce):Xe(p,M,B,!1,K,ce)}function Xe(p,M,B,K,ce,me){if(!M)throw Error("Invalid event type");var Re=f(ce)?!!ce.capture:!!ce,It=$e(p);if(It||(p[Oe]=It=new ge(p)),B=It.add(M,B,K,Re,me),B.proxy)return B;if(K=ue(),B.proxy=K,K.src=p,K.listener=B,p.addEventListener)ne||(ce=Re),ce===void 0&&(ce=!1),p.addEventListener(M.toString(),K,ce);else if(p.attachEvent)p.attachEvent(Ae(M.toString()),K);else if(p.addListener&&p.removeListener)p.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return B}function ue(){function p(B){return M.call(p.src,p.listener,B)}const M=ve;return p}function de(p,M,B,K,ce){if(Array.isArray(M))for(var me=0;me<M.length;me++)de(p,M[me],B,K,ce);else K=f(K)?!!K.capture:!!K,B=ze(B),p&&p[X]?(p=p.i,M=String(M).toString(),M in p.g&&(me=p.g[M],B=Pe(me,B,K,ce),-1<B&&(ae(me[B]),Array.prototype.splice.call(me,B,1),me.length==0&&(delete p.g[M],p.h--)))):p&&(p=$e(p))&&(M=p.g[M.toString()],p=-1,M&&(p=Pe(M,B,K,ce)),(B=-1<p?M[p]:null)&&Ee(B))}function Ee(p){if(typeof p!="number"&&p&&!p.da){var M=p.src;if(M&&M[X])Se(M.i,p);else{var B=p.type,K=p.proxy;M.removeEventListener?M.removeEventListener(B,K,p.capture):M.detachEvent?M.detachEvent(Ae(B),K):M.addListener&&M.removeListener&&M.removeListener(K),(B=$e(M))?(Se(B,p),B.h==0&&(B.src=null,M[Oe]=null)):ae(p)}}}function Ae(p){return p in Ne?Ne[p]:Ne[p]="on"+p}function ve(p,M){if(p.da)p=!0;else{M=new te(M,this);var B=p.listener,K=p.ha||p.src;p.fa&&Ee(p),p=B.call(K,M)}return p}function $e(p){return p=p[Oe],p instanceof ge?p:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(p){return typeof p=="function"?p:(p[De]||(p[De]=function(M){return p.handleEvent(M)}),p[De])}function Ge(){U.call(this),this.i=new ge(this),this.M=this,this.F=null}C(Ge,U),Ge.prototype[X]=!0,Ge.prototype.removeEventListener=function(p,M,B,K){de(this,p,M,B,K)};function tt(p,M){var B,K=p.F;if(K)for(B=[];K;K=K.F)B.push(K);if(p=p.M,K=M.type||M,typeof M=="string")M=new H(M,p);else if(M instanceof H)M.target=M.target||p;else{var ce=M;M=new H(K,p),A(M,ce)}if(ce=!0,B)for(var me=B.length-1;0<=me;me--){var Re=M.g=B[me];ce=rt(Re,K,!0,M)&&ce}if(Re=M.g=p,ce=rt(Re,K,!0,M)&&ce,ce=rt(Re,K,!1,M)&&ce,B)for(me=0;me<B.length;me++)Re=M.g=B[me],ce=rt(Re,K,!1,M)&&ce}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var p=this.i,M;for(M in p.g){for(var B=p.g[M],K=0;K<B.length;K++)ae(B[K]);delete p.g[M],p.h--}}this.F=null},Ge.prototype.K=function(p,M,B,K){return this.i.add(String(p),M,!1,B,K)},Ge.prototype.L=function(p,M,B,K){return this.i.add(String(p),M,!0,B,K)};function rt(p,M,B,K){if(M=p.i.g[String(M)],!M)return!0;M=M.concat();for(var ce=!0,me=0;me<M.length;++me){var Re=M[me];if(Re&&!Re.da&&Re.capture==B){var It=Re.listener,sn=Re.ha||Re.src;Re.fa&&Se(p.i,Re),ce=It.call(sn,K)!==!1&&ce}}return ce&&!K.defaultPrevented}function $n(p,M,B){if(typeof p=="function")B&&(p=d(p,B));else if(p&&typeof p.handleEvent=="function")p=d(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:c.setTimeout(p,M||0)}function yt(p){p.g=$n(()=>{p.g=null,p.i&&(p.i=!1,yt(p))},p.l);const M=p.h;p.h=null,p.m.apply(null,M)}class Rt extends U{constructor(M,B){super(),this.m=M,this.l=B,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(p){U.call(this),this.h=p,this.g={}}C(Zt,U);var Pr=[];function ts(p){V(p.g,function(M,B){this.g.hasOwnProperty(B)&&Ee(M)},p),p.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),ts(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hl=c.JSON.stringify,fl=c.JSON.parse,dl=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function ro(){}ro.prototype.h=null;function Ko(p){return p.h||(p.h=p.i())}function Go(){}var yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){H.call(this,"d")}C(Zr,H);function Jo(){H.call(this,"c")}C(Jo,H);var ei={},pl=null;function io(){return pl=pl||new Ge}ei.La="serverreachability";function ml(p){H.call(this,ei.La,p)}C(ml,H);function bi(p){const M=io();tt(M,new ml(M))}ei.STAT_EVENT="statevent";function gl(p,M){H.call(this,ei.STAT_EVENT,p),this.stat=M}C(gl,H);function Jt(p){const M=io();tt(M,new gl(M,p))}ei.Ma="timingevent";function Qo(p,M){H.call(this,ei.Ma,p),this.size=M}C(Qo,H);function Or(p,M){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},M)}function so(){this.g=!0}so.prototype.xa=function(){this.g=!1};function oo(p,M,B,K,ce,me){p.info(function(){if(p.g)if(me)for(var Re="",It=me.split("&"),sn=0;sn<It.length;sn++){var vt=It[sn].split("=");if(1<vt.length){var fn=vt[0];vt=vt[1];var en=fn.split("_");Re=2<=en.length&&en[1]=="type"?Re+(fn+"="+vt+"&"):Re+(fn+"=redacted&")}}else Re=null;else Re=me;return"XMLHTTP REQ ("+K+") [attempt "+ce+"]: "+M+`
`+B+`
`+Re})}function Yo(p,M,B,K,ce,me,Re){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+ce+"]: "+M+`
`+B+`
`+me+" "+Re})}function Nr(p,M,B,K){p.info(function(){return"XMLHTTP TEXT ("+M+"): "+ad(p,B)+(K?" "+K:"")})}function yl(p,M){p.info(function(){return"TIMEOUT: "+M})}so.prototype.info=function(){};function ad(p,M){if(!p.g)return M;if(!M)return null;try{var B=JSON.parse(M);if(B){for(p=0;p<B.length;p++)if(Array.isArray(B[p])){var K=B[p];if(!(2>K.length)){var ce=K[1];if(Array.isArray(ce)&&!(1>ce.length)){var me=ce[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Re=1;Re<ce.length;Re++)ce[Re]=""}}}}return hl(B)}catch{return M}}var Xo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lr;function ao(){}C(ao,ro),ao.prototype.g=function(){return new XMLHttpRequest},ao.prototype.i=function(){return{}},Lr=new ao;function Dr(p,M,B,K){this.j=p,this.i=M,this.l=B,this.R=K||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nc}function nc(){this.i=null,this.g="",this.h=!1}var vl={},Zo={};function ea(p,M,B){p.L=1,p.v=os(sr(M)),p.m=B,p.P=!0,_l(p,null)}function _l(p,M){p.F=Date.now(),Pt(p),p.A=sr(p.v);var B=p.A,K=p.R;Array.isArray(K)||(K=[String(K)]),ls(B.i,"t",K),p.C=0,B=p.j.J,p.h=new nc,p.g=wc(p.j,B?M:null,!p.m),0<p.O&&(p.M=new Rt(d(p.Y,p,p.g),p.O)),M=p.U,B=p.g,K=p.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(Pr[0]=ce.toString()),ce=Pr);for(var me=0;me<ce.length;me++){var Re=Ue(B,ce[me],K||M.handleEvent,!1,M.h||M);if(!Re)break;M.g[Re.key]=Re}M=p.H?T(p.H):{},p.m?(p.u||(p.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,M)):(p.u="GET",p.g.ea(p.A,p.u,null,M)),bi(),oo(p.i,p.u,p.A,p.l,p.R,p.m)}Dr.prototype.ca=function(p){p=p.target;const M=this.M;M&&Gn(p)==3?M.j():this.Y(p)},Dr.prototype.Y=function(p){try{if(p==this.g)e:{const en=Gn(this.g);var M=this.g.Ba();const wr=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||Il(this.g)))){this.J||en!=4||M==7||(M==8||0>=wr?bi(3):bi(2)),lo(this);var B=this.g.Z();this.X=B;t:if(rc(this)){var K=Il(this.g);p="";var ce=K.length,me=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vr(this),ns(this);var Re="";break t}this.h.i=new c.TextDecoder}for(M=0;M<ce;M++)this.h.h=!0,p+=this.h.i.decode(K[M],{stream:!(me&&M==ce-1)});K.length=0,this.h.g+=p,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=B==200,Yo(this.i,this.u,this.A,this.l,this.R,en,B),this.o){if(this.T&&!this.K){t:{if(this.g){var It,sn=this.g;if((It=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(It)){var vt=It;break t}}vt=null}if(B=vt)Nr(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wl(this,B);else{this.o=!1,this.s=3,Jt(12),vr(this),ns(this);break e}}if(this.P){B=!0;let ar;for(;!this.J&&this.C<Re.length;)if(ar=ld(this,Re),ar==Zo){en==4&&(this.s=4,Jt(14),B=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==vl){this.s=4,Jt(15),Nr(this.i,this.l,Re,"[Invalid Chunk]"),B=!1;break}else Nr(this.i,this.l,ar,null),wl(this,ar);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||Re.length!=0||this.h.h||(this.s=1,Jt(16),B=!1),this.o=this.o&&B,!B)Nr(this.i,this.l,Re,"[Invalid Chunked Response]"),vr(this),ns(this);else if(0<Re.length&&!this.W){this.W=!0;var fn=this.j;fn.g==this&&fn.ba&&!fn.M&&(fn.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),Al(fn),fn.M=!0,Jt(11))}}else Nr(this.i,this.l,Re,null),wl(this,Re);en==4&&vr(this),this.o&&!this.J&&(en==4?ha(this.j,this):(this.o=!1,Pt(this)))}else oa(this.g),B==400&&0<Re.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),vr(this),ns(this)}}}catch{}finally{}};function rc(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function ld(p,M){var B=p.C,K=M.indexOf(`
`,B);return K==-1?Zo:(B=Number(M.substring(B,K)),isNaN(B)?vl:(K+=1,K+B>M.length?Zo:(M=M.slice(K,K+B),p.C=K+B,M)))}Dr.prototype.cancel=function(){this.J=!0,vr(this)};function Pt(p){p.S=Date.now()+p.I,ic(p,p.I)}function ic(p,M){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Or(d(p.ba,p),M)}function lo(p){p.B&&(c.clearTimeout(p.B),p.B=null)}Dr.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(yl(this.i,this.A),this.L!=2&&(bi(),Jt(17)),vr(this),this.s=2,ns(this)):ic(this,this.S-p)};function ns(p){p.j.G==0||p.J||ha(p.j,p)}function vr(p){lo(p);var M=p.M;M&&typeof M.ma=="function"&&M.ma(),p.M=null,ts(p.U),p.g&&(M=p.g,p.g=null,M.abort(),M.ma())}function wl(p,M){try{var B=p.j;if(B.G!=0&&(B.g==p||jn(B.h,p))){if(!p.K&&jn(B.h,p)&&B.G==3){try{var K=B.Da.g.parse(M)}catch{K=null}if(Array.isArray(K)&&K.length==3){var ce=K;if(ce[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<p.F)ca(B),Br(B);else break e;ua(B),Jt(18)}}else B.za=ce[1],0<B.za-B.T&&37500>ce[2]&&B.F&&B.v==0&&!B.C&&(B.C=Or(d(B.Za,B),6e3));if(1>=oc(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else Pi(B,11)}else if((p.K||B.g==p)&&ca(B),!w(M))for(ce=B.Da.g.parse(M),M=0;M<ce.length;M++){let vt=ce[M];if(B.T=vt[0],vt=vt[1],B.G==2)if(vt[0]=="c"){B.K=vt[1],B.ia=vt[2];const fn=vt[3];fn!=null&&(B.la=fn,B.j.info("VER="+B.la));const en=vt[4];en!=null&&(B.Aa=en,B.j.info("SVER="+B.Aa));const wr=vt[5];wr!=null&&typeof wr=="number"&&0<wr&&(K=1.5*wr,B.L=K,B.j.info("backChannelRequestTimeoutMs_="+K)),K=B;const ar=p.g;if(ar){const go=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var me=K.h;me.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(El(me,me.h),me.h=null))}if(K.D){const da=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;da&&(K.ya=da,xt(K.I,K.D,da))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-p.F,B.j.info("Handshake RTT: "+B.R+"ms")),K=B;var Re=p;if(K.qa=_c(K,K.J?K.ia:null,K.W),Re.K){ac(K.h,Re);var It=Re,sn=K.L;sn&&(It.I=sn),It.B&&(lo(It),Pt(It)),K.g=Re}else mo(K);0<B.i.length&&ii(B)}else vt[0]!="stop"&&vt[0]!="close"||Pi(B,7);else B.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Pi(B,7):wn(B):vt[0]!="noop"&&B.l&&B.l.ta(vt),B.v=0)}}bi(4)}catch{}}var sc=class{constructor(p,M){this.g=p,this.map=M}};function uo(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ir(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function oc(p){return p.h?1:p.g?p.g.size:0}function jn(p,M){return p.h?p.h==M:p.g?p.g.has(M):!1}function El(p,M){p.g?p.g.add(M):p.h=M}function ac(p,M){p.h&&p.h==M?p.h=null:p.g&&p.g.has(M)&&p.g.delete(M)}uo.prototype.cancel=function(){if(this.i=lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function lc(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let M=p.i;for(const B of p.g.values())M=M.concat(B.D);return M}return S(p.i)}function ta(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var M=[],B=p.length,K=0;K<B;K++)M.push(p[K]);return M}M=[],B=0;for(K in p)M[B++]=p[K];return M}function na(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var M=[];p=p.length;for(var B=0;B<p;B++)M.push(B);return M}M=[],B=0;for(const K in p)M[B++]=K;return M}}}function rs(p,M){if(p.forEach&&typeof p.forEach=="function")p.forEach(M,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,M,void 0);else for(var B=na(p),K=ta(p),ce=K.length,me=0;me<ce;me++)M.call(void 0,K[me],B&&B[me],p)}var co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ud(p,M){if(p){p=p.split("&");for(var B=0;B<p.length;B++){var K=p[B].indexOf("="),ce=null;if(0<=K){var me=p[B].substring(0,K);ce=p[B].substring(K+1)}else me=p[B];M(me,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Ai(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ai){this.h=p.h,ho(this,p.j),this.o=p.o,this.g=p.g,is(this,p.s),this.l=p.l;var M=p.i,B=new ti;B.i=M.i,M.g&&(B.g=new Map(M.g),B.h=M.h),ss(this,B),this.m=p.m}else p&&(M=String(p).match(co))?(this.h=!1,ho(this,M[1]||"",!0),this.o=gt(M[2]||""),this.g=gt(M[3]||"",!0),is(this,M[4]),this.l=gt(M[5]||"",!0),ss(this,M[6]||"",!0),this.m=gt(M[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Ai.prototype.toString=function(){var p=[],M=this.j;M&&p.push(as(M,ra,!0),":");var B=this.g;return(B||M=="file")&&(p.push("//"),(M=this.o)&&p.push(as(M,ra,!0),"@"),p.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&p.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&p.push("/"),p.push(as(B,B.charAt(0)=="/"?hc:cc,!0))),(B=this.i.toString())&&p.push("?",B),(B=this.m)&&p.push("#",as(B,Tl)),p.join("")};function sr(p){return new Ai(p)}function ho(p,M,B){p.j=B?gt(M,!0):M,p.j&&(p.j=p.j.replace(/:$/,""))}function is(p,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);p.s=M}else p.s=null}function ss(p,M,B){M instanceof ti?(p.i=M,ni(p.i,p.h)):(B||(M=as(M,fc)),p.i=new ti(M,p.h))}function xt(p,M,B){p.i.set(M,B)}function os(p){return xt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function gt(p,M){return p?M?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function as(p,M,B){return typeof p=="string"?(p=encodeURI(p).replace(M,uc),B&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function uc(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var ra=/[#\/\?@]/g,cc=/[#\?:]/g,hc=/[#\?]/g,fc=/[#\?@]/g,Tl=/#/g;function ti(p,M){this.h=this.g=null,this.i=p||null,this.j=!!M}function _n(p){p.g||(p.g=new Map,p.h=0,p.i&&ud(p.i,function(M,B){p.add(decodeURIComponent(M.replace(/\+/g," ")),B)}))}n=ti.prototype,n.add=function(p,M){_n(this),this.i=null,p=_r(this,p);var B=this.g.get(p);return B||this.g.set(p,B=[]),B.push(M),this.h+=1,this};function Mr(p,M){_n(p),M=_r(p,M),p.g.has(M)&&(p.i=null,p.h-=p.g.get(M).length,p.g.delete(M))}function jr(p,M){return _n(p),M=_r(p,M),p.g.has(M)}n.forEach=function(p,M){_n(this),this.g.forEach(function(B,K){B.forEach(function(ce){p.call(M,ce,K,this)},this)},this)},n.na=function(){_n(this);const p=Array.from(this.g.values()),M=Array.from(this.g.keys()),B=[];for(let K=0;K<M.length;K++){const ce=p[K];for(let me=0;me<ce.length;me++)B.push(M[K])}return B},n.V=function(p){_n(this);let M=[];if(typeof p=="string")jr(this,p)&&(M=M.concat(this.g.get(_r(this,p))));else{p=Array.from(this.g.values());for(let B=0;B<p.length;B++)M=M.concat(p[B])}return M},n.set=function(p,M){return _n(this),this.i=null,p=_r(this,p),jr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[M]),this.h+=1,this},n.get=function(p,M){return p?(p=this.V(p),0<p.length?String(p[0]):M):M};function ls(p,M,B){Mr(p,M),0<B.length&&(p.i=null,p.g.set(_r(p,M),S(B)),p.h+=B.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],M=Array.from(this.g.keys());for(var B=0;B<M.length;B++){var K=M[B];const me=encodeURIComponent(String(K)),Re=this.V(K);for(K=0;K<Re.length;K++){var ce=me;Re[K]!==""&&(ce+="="+encodeURIComponent(String(Re[K]))),p.push(ce)}}return this.i=p.join("&")};function _r(p,M){return M=String(M),p.j&&(M=M.toLowerCase()),M}function ni(p,M){M&&!p.j&&(_n(p),p.i=null,p.g.forEach(function(B,K){var ce=K.toLowerCase();K!=ce&&(Mr(this,K),ls(this,ce,B))},p)),p.j=M}function cd(p,M){const B=new so;if(c.Image){const K=new Image;K.onload=g(Kn,B,"TestLoadImage: loaded",!0,M,K),K.onerror=g(Kn,B,"TestLoadImage: error",!1,M,K),K.onabort=g(Kn,B,"TestLoadImage: abort",!1,M,K),K.ontimeout=g(Kn,B,"TestLoadImage: timeout",!1,M,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else M(!1)}function dc(p,M){const B=new so,K=new AbortController,ce=setTimeout(()=>{K.abort(),Kn(B,"TestPingServer: timeout",!1,M)},1e4);fetch(p,{signal:K.signal}).then(me=>{clearTimeout(ce),me.ok?Kn(B,"TestPingServer: ok",!0,M):Kn(B,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(ce),Kn(B,"TestPingServer: error",!1,M)})}function Kn(p,M,B,K,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),K(B)}catch{}}function hd(){this.g=new dl}function pc(p,M,B){const K=B||"";try{rs(p,function(ce,me){let Re=ce;f(ce)&&(Re=hl(ce)),M.push(K+me+"="+encodeURIComponent(Re))})}catch(ce){throw M.push(K+"type="+encodeURIComponent("_badmap")),ce}}function xi(p){this.l=p.Ub||null,this.j=p.eb||!1}C(xi,ro),xi.prototype.g=function(){return new fo(this.l,this.j)},xi.prototype.i=function(p){return function(){return p}}({});function fo(p,M){Ge.call(this),this.D=p,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(fo,Ge),n=fo.prototype,n.open=function(p,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=M,this.readyState=1,Vr(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(M.body=p),(this.D||c).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fr(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Vr(this)),this.g&&(this.readyState=3,Vr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mc(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function mc(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var M=p.value?p.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!p.done}))&&(this.response=this.responseText+=M)}p.done?Fr(this):Vr(this),this.readyState==3&&mc(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Fr(this))},n.Qa=function(p){this.g&&(this.response=p,Fr(this))},n.ga=function(){this.g&&Fr(this)};function Fr(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Vr(p)}n.setRequestHeader=function(p,M){this.u.append(p,M)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],M=this.h.entries();for(var B=M.next();!B.done;)B=B.value,p.push(B[0]+": "+B[1]),B=M.next();return p.join(`\r
`)};function Vr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ki(p){let M="";return V(p,function(B,K){M+=K,M+=":",M+=B,M+=`\r
`}),M}function us(p,M,B){e:{for(K in B){var K=!1;break e}K=!0}K||(B=ki(B),typeof p=="string"?B!=null&&encodeURIComponent(String(B)):xt(p,M,B))}function Vt(p){Ge.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Vt,Ge);var fd=/^https?$/i,Cl=["POST","PUT"];n=Vt.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,M,B,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);M=M?M.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lr.g(),this.v=this.o?Ko(this.o):Ko(Lr),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(M,String(p),!0),this.B=!1}catch(me){po(this,me);return}if(p=B||"",B=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var ce in K)B.set(ce,K[ce]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const me of K.keys())B.set(me,K.get(me));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(B.keys()).find(me=>me.toLowerCase()=="content-type"),ce=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Cl,M,void 0))||K||ce||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Re]of B)this.g.setRequestHeader(me,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(p),this.u=!1}catch(me){po(this,me)}};function po(p,M){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=M,p.m=5,ia(p),or(p)}function ia(p){p.A||(p.A=!0,tt(p,"complete"),tt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,tt(this,"complete"),tt(this,"abort"),or(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),Vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sl(this):this.bb())},n.bb=function(){Sl(this)};function Sl(p){if(p.h&&typeof l<"u"&&(!p.v[1]||Gn(p)!=4||p.Z()!=2)){if(p.u&&Gn(p)==4)$n(p.Ea,0,p);else if(tt(p,"readystatechange"),Gn(p)==4){p.h=!1;try{const Re=p.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var B;if(!(B=M)){var K;if(K=Re===0){var ce=String(p.D).match(co)[1]||null;!ce&&c.self&&c.self.location&&(ce=c.self.location.protocol.slice(0,-1)),K=!fd.test(ce?ce.toLowerCase():"")}B=K}if(B)tt(p,"complete"),tt(p,"success");else{p.m=6;try{var me=2<Gn(p)?p.g.statusText:""}catch{me=""}p.l=me+" ["+p.Z()+"]",ia(p)}}finally{or(p)}}}}function or(p,M){if(p.g){sa(p);const B=p.g,K=p.v[0]?()=>{}:null;p.g=null,p.v=null,M||tt(p,"ready");try{B.onreadystatechange=K}catch{}}}function sa(p){p.I&&(c.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function Gn(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var M=this.g.responseText;return p&&M.indexOf(p)==0&&(M=M.substring(p.length)),fl(M)}};function Il(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(p){const M={};p=(p.g&&2<=Gn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<p.length;K++){if(w(p[K]))continue;var B=x(p[K]);const ce=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const me=M[ce]||[];M[ce]=me,me.push(B)}P(M,function(K){return K.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ri(p,M,B){return B&&B.internalChannelParams&&B.internalChannelParams[p]||M}function bl(p){this.Aa=0,this.i=[],this.j=new so,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ri("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ri("baseRetryDelayMs",5e3,p),this.cb=ri("retryDelaySeedMs",1e4,p),this.Wa=ri("forwardChannelMaxRetries",2,p),this.wa=ri("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new uo(p&&p.concurrentRequestLimit),this.Da=new hd,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bl.prototype,n.la=8,n.G=1,n.connect=function(p,M,B,K){Jt(0),this.W=p,this.H=M||{},B&&K!==void 0&&(this.H.OSID=B,this.H.OAID=K),this.F=this.X,this.I=_c(this,null,this.W),ii(this)};function wn(p){if(aa(p),p.G==3){var M=p.U++,B=sr(p.I);if(xt(B,"SID",p.K),xt(B,"RID",M),xt(B,"TYPE","terminate"),Ri(p,B),M=new Dr(p,p.j,M),M.L=2,M.v=os(sr(B)),B=!1,c.navigator&&c.navigator.sendBeacon)try{B=c.navigator.sendBeacon(M.v.toString(),"")}catch{}!B&&c.Image&&(new Image().src=M.v,B=!0),B||(M.g=wc(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Pt(M)}vc(p)}function Br(p){p.g&&(Al(p),p.g.cancel(),p.g=null)}function aa(p){Br(p),p.u&&(c.clearTimeout(p.u),p.u=null),ca(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function ii(p){if(!ir(p.h)&&!p.s){p.s=!0;var M=p.Ga;Z||$(),ie||(Z(),ie=!0),J.add(M,p),p.B=0}}function dd(p,M){return oc(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=M.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Or(d(p.Ga,p,M),yc(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ce=new Dr(this,this.j,p);let me=this.o;if(this.S&&(me?(me=T(me),A(me,this.S)):me=this.S),this.m!==null||this.O||(ce.H=me,me=null),this.P)e:{for(var M=0,B=0;B<this.i.length;B++){t:{var K=this.i[B];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(M+=K,4096<M){M=B;break e}if(M===4096||B===this.i.length-1){M=B+1;break e}}M=1e3}else M=1e3;M=cs(this,ce,M),B=sr(this.I),xt(B,"RID",p),xt(B,"CVER",22),this.D&&xt(B,"X-HTTP-Session-Id",this.D),Ri(this,B),me&&(this.O?M="headers="+encodeURIComponent(String(ki(me)))+"&"+M:this.m&&us(B,this.m,me)),El(this.h,ce),this.Ua&&xt(B,"TYPE","init"),this.P?(xt(B,"$req",M),xt(B,"SID","null"),ce.T=!0,ea(ce,B,null)):ea(ce,B,M),this.G=2}}else this.G==3&&(p?la(this,p):this.i.length==0||ir(this.h)||la(this))};function la(p,M){var B;M?B=M.l:B=p.U++;const K=sr(p.I);xt(K,"SID",p.K),xt(K,"RID",B),xt(K,"AID",p.T),Ri(p,K),p.m&&p.o&&us(K,p.m,p.o),B=new Dr(p,p.j,B,p.B+1),p.m===null&&(B.H=p.o),M&&(p.i=M.D.concat(p.i)),M=cs(p,B,1e3),B.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),El(p.h,B),ea(B,K,M)}function Ri(p,M){p.H&&V(p.H,function(B,K){xt(M,K,B)}),p.l&&rs({},function(B,K){xt(M,K,B)})}function cs(p,M,B){B=Math.min(p.i.length,B);var K=p.l?d(p.l.Na,p.l,p):null;e:{var ce=p.i;let me=-1;for(;;){const Re=["count="+B];me==-1?0<B?(me=ce[0].g,Re.push("ofs="+me)):me=0:Re.push("ofs="+me);let It=!0;for(let sn=0;sn<B;sn++){let vt=ce[sn].g;const fn=ce[sn].map;if(vt-=me,0>vt)me=Math.max(0,ce[sn].g-100),It=!1;else try{pc(fn,Re,"req"+vt+"_")}catch{K&&K(fn)}}if(It){K=Re.join("&");break e}}}return p=p.i.splice(0,B),M.D=p,K}function mo(p){if(!p.g&&!p.u){p.Y=1;var M=p.Fa;Z||$(),ie||(Z(),ie=!0),J.add(M,p),p.v=0}}function ua(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Or(d(p.Fa,p),yc(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,gc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Or(d(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Br(this),gc(this))};function Al(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function gc(p){p.g=new Dr(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var M=sr(p.qa);xt(M,"RID","rpc"),xt(M,"SID",p.K),xt(M,"AID",p.T),xt(M,"CI",p.F?"0":"1"),!p.F&&p.ja&&xt(M,"TO",p.ja),xt(M,"TYPE","xmlhttp"),Ri(p,M),p.m&&p.o&&us(M,p.m,p.o),p.L&&(p.g.I=p.L);var B=p.g;p=p.ia,B.L=1,B.v=os(sr(M)),B.m=null,B.P=!0,_l(B,p)}n.Za=function(){this.C!=null&&(this.C=null,Br(this),ua(this),Jt(19))};function ca(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function ha(p,M){var B=null;if(p.g==M){ca(p),Al(p),p.g=null;var K=2}else if(jn(p.h,M))B=M.D,ac(p.h,M),K=1;else return;if(p.G!=0){if(M.o)if(K==1){B=M.m?M.m.length:0,M=Date.now()-M.F;var ce=p.B;K=io(),tt(K,new Qo(K,B)),ii(p)}else mo(p);else if(ce=M.s,ce==3||ce==0&&0<M.X||!(K==1&&dd(p,M)||K==2&&ua(p)))switch(B&&0<B.length&&(M=p.h,M.i=M.i.concat(B)),ce){case 1:Pi(p,5);break;case 4:Pi(p,10);break;case 3:Pi(p,6);break;default:Pi(p,2)}}}function yc(p,M){let B=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(B*=2),B*M}function Pi(p,M){if(p.j.info("Error code "+M),M==2){var B=d(p.fb,p),K=p.Xa;const ce=!K;K=new Ai(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ho(K,"https"),os(K),ce?cd(K.toString(),B):dc(K.toString(),B)}else Jt(2);p.G=0,p.l&&p.l.sa(M),vc(p),aa(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function vc(p){if(p.G=0,p.ka=[],p.l){const M=lc(p.h);(M.length!=0||p.i.length!=0)&&(E(p.ka,M),E(p.ka,p.i),p.h.i.length=0,S(p.i),p.i.length=0),p.l.ra()}}function _c(p,M,B){var K=B instanceof Ai?sr(B):new Ai(B);if(K.g!="")M&&(K.g=M+"."+K.g),is(K,K.s);else{var ce=c.location;K=ce.protocol,M=M?M+"."+ce.hostname:ce.hostname,ce=+ce.port;var me=new Ai(null);K&&ho(me,K),M&&(me.g=M),ce&&is(me,ce),B&&(me.l=B),K=me}return B=p.D,M=p.ya,B&&M&&xt(K,B,M),xt(K,"VER",p.la),Ri(p,K),K}function wc(p,M,B){if(M&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=p.Ca&&!p.pa?new Vt(new xi({eb:B})):new Vt(p.pa),M.Ha(p.J),M}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xl(){}n=xl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fa(){}fa.prototype.g=function(p,M){return new Fn(p,M)};function Fn(p,M){Ge.call(this),this.g=new bl(M),this.l=p,this.h=M&&M.messageUrlParams||null,p=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(p?p["X-WebChannel-Content-Type"]=M.messageContentType:p={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(p?p["X-WebChannel-Client-Profile"]=M.va:p={"X-WebChannel-Client-Profile":M.va}),this.g.S=p,(p=M&&M.Sb)&&!w(p)&&(this.g.m=p),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!w(M)&&(this.g.D=M,p=this.h,p!==null&&M in p&&(p=this.h,M in p&&delete p[M])),this.j=new si(this)}C(Fn,Ge),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){wn(this.g)},Fn.prototype.o=function(p){var M=this.g;if(typeof p=="string"){var B={};B.__data__=p,p=B}else this.u&&(B={},B.__data__=hl(p),p=B);M.i.push(new sc(M.Ya++,p)),M.G==3&&ii(M)},Fn.prototype.N=function(){this.g.l=null,delete this.j,wn(this.g),delete this.g,Fn.aa.N.call(this)};function Ec(p){Zr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var M=p.__sm__;if(M){e:{for(const B in M){p=B;break e}p=void 0}(this.i=p)&&(p=this.i,M=M!==null&&p in M?M[p]:void 0),this.data=M}else this.data=p}C(Ec,Zr);function Tc(){Jo.call(this),this.status=1}C(Tc,Jo);function si(p){this.g=p}C(si,xl),si.prototype.ua=function(){tt(this.g,"a")},si.prototype.ta=function(p){tt(this.g,new Ec(p))},si.prototype.sa=function(p){tt(this.g,new Tc)},si.prototype.ra=function(){tt(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,VC=function(){return new fa},FC=function(){return io()},jC=ei,Hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,xh=Xo,tc.COMPLETE="complete",MC=tc,Go.EventType=yr,yr.OPEN="a",yr.CLOSE="b",yr.ERROR="c",yr.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,iu=Go,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,DC=Vt}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});const Rw="@firebase/firestore",Pw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Ay("@firebase/firestore");function La(){return Do.logLevel}function Me(n,...e){if(Do.logLevel<=pt.DEBUG){const t=e.map(Ry);Do.debug(`Firestore (${Xa}): ${n}`,...t)}}function Ki(n,...e){if(Do.logLevel<=pt.ERROR){const t=e.map(Ry);Do.error(`Firestore (${Xa}): ${n}`,...t)}}function za(n,...e){if(Do.logLevel<=pt.WARN){const t=e.map(Ry);Do.warn(`Firestore (${Xa}): ${n}`,...t)}}function Ry(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,BC(n,r,t)}function BC(n,e,t){let r=`FIRESTORE (${Xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ki(r),new Error(r)}function Ct(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||BC(e,i,r)}function st(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nn.UNAUTHENTICATED))}shutdown(){}}class NR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class LR{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ct(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qi,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new UC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class DR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new DR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ow{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ct(this.o===void 0,3512);const r=o=>{o.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ow(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ow(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=FR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function ht(n,e){return n<e?-1:n>e?1:0}function Wg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ht(r,i);{const o=qC(),l=VR(o.encode(Nw(n,t)),o.encode(Nw(e,t)));return l!==0?l:ht(r,i)}}t+=r>65535?2:1}return ht(n.length,e.length)}function Nw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function VR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ht(n[t],e[t]);return ht(n.length,e.length)}function Ha(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=-62135596800,Dw=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Dw);return new Xt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lw)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dw}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new Xt(0,0))}static max(){return new at(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="__name__";class ci{constructor(e,t,r){t===void 0?t=0:t>e.length&&et(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&et(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=ci.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ht(e.length,t.length)}static compareSegments(e,t){const r=ci.isNumericId(e),i=ci.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ci.extractNumericId(e).compare(ci.extractNumericId(t)):Wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return js.fromString(e.substring(4,e.length-2))}}class Mt extends ci{construct(e,t,r){return new Mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Mt(t)}static emptyPath(){return new Mt([])}}const BR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends ci{construct(e,t,r){return new Sn(e,t,r)}static isValidIdentifier(e){return BR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mw}static keyField(){return new Sn([Mw])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new je(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new je(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new je(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new je(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Mt.fromString(e))}static fromName(e){return new Je(Mt.fromString(e).popFirst(5))}static empty(){return new Je(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function UR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(r===1e9?new Xt(t+1,0):new Xt(t,r));return new Bs(i,Je.empty(),e)}function qR(n){return new Bs(n.readTime,n.key,wu)}class Bs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bs(at.min(),Je.empty(),wu)}static max(){return new Bs(at.max(),Je.empty(),wu)}}function zR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(n.documentKey,e.documentKey),t!==0?t:ht(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==HR)throw n;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):we.reject(t)}static resolve(e){return new we((t,r)=>{t(e)})}static reject(e){return new we((t,r)=>{r(e)})}static waitFor(e){return new we((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=we.resolve(!1);for(const r of e)t=t.next(i=>i?we.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new we((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next(y=>{l[f]=y,++c,c===o&&r(l)},y=>i(y))}})}static doWhile(e,t){return new we((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function $R(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function el(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ef.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function Tf(n){return n==null}function Kh(n){return n===0&&1/n==-1/0}function KR(n){return typeof n=="number"&&Number.isInteger(n)&&!Kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="";function GR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jw(e)),e=JR(n.get(t),e);return jw(e)}function JR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case HC:t+="";break;default:t+=o}}return t}function jw(n){return n+HC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Js(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QR(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function WC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new Wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Cn.RED,this.left=i??Cn.EMPTY,this.right=o??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Cn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Cn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vw(this.data.getIterator())}getIteratorFrom(e){return new Vw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class Vw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new dr([])}unionWith(e){let t=new hn(Sn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $C("Invalid base64 string: "+o):o}}(e);return new An(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const YR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(n){if(Ct(!!n,39018),typeof n=="string"){let e=0;const t=YR.exec(n);if(Ct(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yt(n.seconds),nanos:Yt(n.nanos)}}function Yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qs(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="server_timestamp",GC="__type__",JC="__previous_value__",QC="__local_write_time__";function Oy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[GC])===null||t===void 0?void 0:t.stringValue)===KC}function Cf(n){const e=n.mapValue.fields[JC];return Oy(e)?Cf(e):e}function Eu(n){const e=Us(n.mapValue.fields[QC].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t,r,i,o,l,c,h,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=y}}const Gh="(default)";class Tu{constructor(e,t){this.projectId=e,this.database=t||Gh}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__type__",ZR="__max__",_h={mapValue:{}},XC="__vector__",Jh="value";function zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Oy(n)?4:tP(n)?9007199254740991:eP(n)?10:11:et(28295,{value:n})}function _i(n,e){if(n===e)return!0;const t=zs(n);if(t!==zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eu(n).isEqual(Eu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Us(i.timestampValue),c=Us(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qs(i.bytesValue).isEqual(qs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Yt(i.geoPointValue.latitude)===Yt(o.geoPointValue.latitude)&&Yt(i.geoPointValue.longitude)===Yt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Yt(i.integerValue)===Yt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Yt(i.doubleValue),c=Yt(o.doubleValue);return l===c?Kh(l)===Kh(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Ha(n.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Fw(l)!==Fw(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!_i(l[h],c[h])))return!1;return!0}(n,e);default:return et(52216,{left:n})}}function Cu(n,e){return(n.values||[]).find(t=>_i(t,e))!==void 0}function Wa(n,e){if(n===e)return 0;const t=zs(n),r=zs(e);if(t!==r)return ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Yt(o.integerValue||o.doubleValue),h=Yt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Bw(n.timestampValue,e.timestampValue);case 4:return Bw(Eu(n),Eu(e));case 5:return Wg(n.stringValue,e.stringValue);case 6:return function(o,l){const c=qs(o),h=qs(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const y=ht(c[f],h[f]);if(y!==0)return y}return ht(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=ht(Yt(o.latitude),Yt(l.latitude));return c!==0?c:ht(Yt(o.longitude),Yt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Uw(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,f,y;const m=o.fields||{},d=l.fields||{},g=(c=m[Jh])===null||c===void 0?void 0:c.arrayValue,C=(h=d[Jh])===null||h===void 0?void 0:h.arrayValue,S=ht(((f=g==null?void 0:g.values)===null||f===void 0?void 0:f.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return S!==0?S:Uw(g,C)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===_h.mapValue&&l===_h.mapValue)return 0;if(o===_h.mapValue)return 1;if(l===_h.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},y=Object.keys(f);h.sort(),y.sort();for(let m=0;m<h.length&&m<y.length;++m){const d=Wg(h[m],y[m]);if(d!==0)return d;const g=Wa(c[h[m]],f[y[m]]);if(g!==0)return g}return ht(h.length,y.length)}(n.mapValue,e.mapValue);default:throw et(23264,{Pe:t})}}function Bw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ht(n,e);const t=Us(n),r=Us(e),i=ht(t.seconds,r.seconds);return i!==0?i:ht(t.nanos,r.nanos)}function Uw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Wa(t[i],r[i]);if(o)return o}return ht(t.length,r.length)}function $a(n){return $g(n)}function $g(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Us(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=$g(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${$g(t.fields[l])}`;return i+"}"}(n.mapValue):et(61005,{value:n})}function kh(n){switch(zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cf(n);return e?16+kh(e):16;case 5:return 2*n.stringValue.length;case 6:return qs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+kh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Js(r.fields,(o,l)=>{i+=o.length+kh(l)}),i}(n.mapValue);default:throw et(13486,{value:n})}}function qw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kg(n){return!!n&&"integerValue"in n}function Ny(n){return!!n&&"arrayValue"in n}function zw(n){return!!n&&"nullValue"in n}function Hw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rh(n){return!!n&&"mapValue"in n}function eP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[YC])===null||t===void 0?void 0:t.stringValue)===XC}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Js(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=Sn.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=hu(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Js(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new nr(hu(this.value))}}function ZC(n){const e=[];return Js(n.fields,(t,r)=>{const i=new Sn([t]);if(Rh(r)){const o=ZC(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Ln(e,0,at.min(),at.min(),at.min(),nr.empty(),0)}static newFoundDocument(e,t,r,i){return new Ln(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new Ln(e,2,t,at.min(),at.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,at.min(),at.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.position=e,this.inclusive=t}}function Ww(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Je.comparator(Je.fromName(l.referenceValue),t.key):r=Wa(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $w(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t="asc"){this.field=e,this.dir=t}}function nP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{}class rn extends eS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iP(e,t,r):t==="array-contains"?new aP(e,r):t==="in"?new lP(e,r):t==="not-in"?new uP(e,r):t==="array-contains-any"?new cP(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sP(e,r):new oP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wa(t,this.value)):t!==null&&zs(this.value)===zs(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qr extends eS{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Qr(e,t)}matches(e){return tS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function tS(n){return n.op==="and"}function nS(n){return rP(n)&&tS(n)}function rP(n){for(const e of n.filters)if(e instanceof Qr)return!1;return!0}function Gg(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(nS(n))return n.filters.map(e=>Gg(e)).join(",");{const e=n.filters.map(t=>Gg(t)).join(",");return`${n.op}(${e})`}}function rS(n,e){return n instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.field.isEqual(i.field)&&_i(r.value,i.value)}(n,e):n instanceof Qr?function(r,i){return i instanceof Qr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&rS(l,i.filters[c]),!0):!1}(n,e):void et(19439)}function iS(n){return n instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`}(n):n instanceof Qr?function(t){return t.op.toString()+" {"+t.getFilters().map(iS).join(" ,")+"}"}(n):"Filter"}class iP extends rn{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class sP extends rn{constructor(e,t){super(e,"in",t),this.keys=sS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oP extends rn{constructor(e,t){super(e,"not-in",t),this.keys=sS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class aP extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ny(t)&&Cu(t.arrayValue,this.value)}}class lP extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class uP extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cu(this.value.arrayValue,t)}}class cP extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ny(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Ie=null}}function Kw(n,e=null,t=[],r=[],i=null,o=null,l=null){return new hP(n,e,t,r,i,o,l)}function Ly(n){const e=st(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$a(r)).join(",")),e.Ie=t}return e.Ie}function Dy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$w(n.startAt,e.startAt)&&$w(n.endAt,e.endAt)}function Jg(n){return Je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function fP(n,e,t,r,i,o,l,c){return new tl(n,e,t,r,i,o,l,c)}function My(n){return new tl(n)}function Gw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oS(n){return n.collectionGroup!==null}function fu(n){const e=st(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new hn(Sn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Su(o,r))}),t.has(Sn.keyField().canonicalString())||e.Ee.push(new Su(Sn.keyField(),r))}return e.Ee}function mi(n){const e=st(n);return e.de||(e.de=aS(e,fu(n))),e.de}function dP(n){const e=st(n);return e.Ae||(e.Ae=aS(e,n.explicitOrderBy)),e.Ae}function aS(n,e){if(n.limitType==="F")return Kw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Su(i.field,o)});const t=n.endAt?new Qh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Qh(n.startAt.position,n.startAt.inclusive):null;return Kw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qg(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yh(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sf(n,e){return Dy(mi(n),mi(e))&&n.limitType===e.limitType}function lS(n){return`${Ly(mi(n))}|lt:${n.limitType}`}function Da(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>iS(i)).join(", ")}]`),Tf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$a(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$a(i)).join(",")),`Target(${r})`}(mi(n))}; limitType=${n.limitType})`}function If(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of fu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const f=Ww(l,c,h);return l.inclusive?f<=0:f<0}(r.startAt,fu(r),i)||r.endAt&&!function(l,c,h){const f=Ww(l,c,h);return l.inclusive?f>=0:f>0}(r.endAt,fu(r),i))}(n,e)}function pP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uS(n){return(e,t)=>{let r=!1;for(const i of fu(n)){const o=mP(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mP(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?Wa(h,f):et(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return WC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new Wt(Je.comparator);function Gi(){return gP}const cS=new Wt(Je.comparator);function su(...n){let e=cS;for(const t of n)e=e.insert(t.key,t);return e}function hS(n){let e=cS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ro(){return du()}function fS(){return du()}function du(){return new Uo(n=>n.toString(),(n,e)=>n.isEqual(e))}const yP=new Wt(Je.comparator),vP=new hn(Je.comparator);function mt(...n){let e=vP;for(const t of n)e=e.add(t);return e}const _P=new hn(ht);function wP(){return _P}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function dS(n){return{integerValue:""+n}}function EP(n,e){return KR(e)?dS(e):jy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this._=void 0}}function TP(n,e,t){return n instanceof Iu?function(i,o){const l={fields:{[GC]:{stringValue:KC},[QC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Oy(o)&&(o=Cf(o)),o&&(l.fields[JC]=o),{mapValue:l}}(t,e):n instanceof bu?mS(n,e):n instanceof Au?gS(n,e):function(i,o){const l=pS(i,o),c=Jw(l)+Jw(i.Re);return Kg(l)&&Kg(i.Re)?dS(c):jy(i.serializer,c)}(n,e)}function CP(n,e,t){return n instanceof bu?mS(n,e):n instanceof Au?gS(n,e):t}function pS(n,e){return n instanceof Xh?function(r){return Kg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Iu extends bf{}class bu extends bf{constructor(e){super(),this.elements=e}}function mS(n,e){const t=yS(e);for(const r of n.elements)t.some(i=>_i(i,r))||t.push(r);return{arrayValue:{values:t}}}class Au extends bf{constructor(e){super(),this.elements=e}}function gS(n,e){let t=yS(e);for(const r of n.elements)t=t.filter(i=>!_i(i,r));return{arrayValue:{values:t}}}class Xh extends bf{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Jw(n){return Yt(n.integerValue||n.doubleValue)}function yS(n){return Ny(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t){this.field=e,this.transform=t}}function IP(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bu&&i instanceof bu||r instanceof Au&&i instanceof Au?Ha(r.elements,i.elements,_i):r instanceof Xh&&i instanceof Xh?_i(r.Re,i.Re):r instanceof Iu&&i instanceof Iu}(n.transform,e.transform)}class bP{constructor(e,t){this.version=e,this.transformResults=t}}class Jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ph(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Af{}function vS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fy(n.key,Jr.none()):new Vu(n.key,n.data,Jr.none());{const t=n.data,r=nr.empty();let i=new hn(Sn.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Qs(n.key,r,new dr(i.toArray()),Jr.none())}}function AP(n,e,t){n instanceof Vu?function(i,o,l){const c=i.value.clone(),h=Yw(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Qs?function(i,o,l){if(!Ph(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Yw(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(_S(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function pu(n,e,t,r){return n instanceof Vu?function(o,l,c,h){if(!Ph(o.precondition,l))return c;const f=o.value.clone(),y=Xw(o.fieldTransforms,h,l);return f.setAll(y),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qs?function(o,l,c,h){if(!Ph(o.precondition,l))return c;const f=Xw(o.fieldTransforms,h,l),y=l.data;return y.setAll(_S(o)),y.setAll(f),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(o,l,c){return Ph(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function xP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=pS(r.transform,i||null);o!=null&&(t===null&&(t=nr.empty()),t.set(r.field,o))}return t||null}function Qw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ha(r,i,(o,l)=>IP(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vu extends Af{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qs extends Af{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function _S(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Yw(n,e,t){const r=new Map;Ct(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,CP(l,c,t[i]))}return r}function Xw(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,TP(o,l,e))}return r}class Fy extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kP extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&AP(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=fS();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=vS(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mt())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(t,r)=>Qw(t,r))&&Ha(this.baseMutations,e.baseMutations,(t,r)=>Qw(t,r))}}class Vy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return yP}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Vy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,_t;function LP(n){switch(n){case _e.OK:return et(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return et(15467,{code:n})}}function wS(n){if(n===void 0)return Ki("GRPC error has no .code"),_e.UNKNOWN;switch(n){case nn.OK:return _e.OK;case nn.CANCELLED:return _e.CANCELLED;case nn.UNKNOWN:return _e.UNKNOWN;case nn.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case nn.INTERNAL:return _e.INTERNAL;case nn.UNAVAILABLE:return _e.UNAVAILABLE;case nn.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case nn.NOT_FOUND:return _e.NOT_FOUND;case nn.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case nn.ABORTED:return _e.ABORTED;case nn.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case nn.DATA_LOSS:return _e.DATA_LOSS;default:return et(39323,{code:n})}}(_t=nn||(nn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new js([4294967295,4294967295],0);function Zw(n){const e=qC().encode(n),t=new LC;return t.update(e),new Uint8Array(t.digest())}function e1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new js([t,r],0),new js([i,o],0)]}class By{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ou(`Invalid padding: ${t}`);if(r<0)throw new ou(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ou(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=js.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(js.fromNumber(r)));return i.compare(DP)===1&&(i=new js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Zw(e),[r,i]=e1(t);for(let o=0;o<this.hashCount;o++){const l=this.we(r,i,o);if(!this.be(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new By(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const t=Zw(e),[r,i]=e1(t);for(let o=0;o<this.hashCount;o++){const l=this.we(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xf(at.min(),i,new Wt(ht),Gi(),mt())}}class Bu{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bu(r,t,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class ES{constructor(e,t){this.targetId=e,this.Ce=t}}class TS{constructor(e,t,r=An.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class t1{constructor(){this.Fe=0,this.Me=n1(),this.xe=An.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=mt(),t=mt(),r=mt();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et(38017,{changeType:o})}}),new Bu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=n1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class MP{constructor(e){this.ze=e,this.je=new Map,this.He=Gi(),this.Je=wh(),this.Ye=wh(),this.Ze=new Wt(ht)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:et(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const o=i.target;if(Jg(o))if(r===0){const l=new Je(o.path);this.tt(t,l,Ln.newNoDocument(l,at.min()))}else Ct(r===1,20013,{expectedCount:r});else{const l=this.ut(t);if(l!==r){const c=this.ct(e),h=c?this.lt(c,e,l):1;if(h!==0){this.st(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=qs(r).toUint8Array()}catch(h){if(h instanceof $C)return za("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new By(l,i,o)}catch(h){return za(h instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,o,null),i++)}),i}It(e){const t=new Map;this.je.forEach((o,l)=>{const c=this._t(l);if(c){if(o.current&&Jg(c.target)){const h=new Je(c.target.path);this.Et(h).has(l)||this.dt(l,h)||this.tt(l,h,Ln.newNoDocument(h,e))}o.Le&&(t.set(l,o.qe()),o.Qe())}});let r=mt();this.Ye.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this._t(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const i=new xf(e,t,this.Ze,this.He,r);return this.He=Gi(),this.Je=wh(),this.Ye=wh(),this.Ze=new Wt(ht),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new t1,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new hn(ht),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new hn(ht),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new t1),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function wh(){return new Wt(Je.comparator)}function n1(){return new Wt(Je.comparator)}const jP={asc:"ASCENDING",desc:"DESCENDING"},FP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VP={and:"AND",or:"OR"};class BP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yg(n,e){return n.useProto3Json||Tf(e)?e:{value:e}}function Zh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UP(n,e){return Zh(n,e.toTimestamp())}function gi(n){return Ct(!!n,49232),at.fromTimestamp(function(t){const r=Us(t);return new Xt(r.seconds,r.nanos)}(n))}function Uy(n,e){return Xg(n,e).canonicalString()}function Xg(n,e){const t=function(i){return new Mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function SS(n){const e=Mt.fromString(n);return Ct(RS(e),10190,{key:e.toString()}),e}function Zg(n,e){return Uy(n.databaseId,e.path)}function zp(n,e){const t=SS(e);if(t.get(1)!==n.databaseId.projectId)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(bS(t))}function IS(n,e){return Uy(n.databaseId,e)}function qP(n){const e=SS(n);return e.length===4?Mt.emptyPath():bS(e)}function ey(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bS(n){return Ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function r1(n,e,t){return{name:Zg(n,e),fields:t.value.mapValue.fields}}function zP(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:et(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,y){return f.useProto3Json?(Ct(y===void 0||typeof y=="string",58123),An.fromBase64String(y||"")):(Ct(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),An.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const y=f.code===void 0?_e.UNKNOWN:wS(f.code);return new je(y,f.message||"")}(l);t=new TS(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zp(n,r.document.name),o=gi(r.document.updateTime),l=r.document.createTime?gi(r.document.createTime):at.min(),c=new nr({mapValue:{fields:r.document.fields}}),h=Ln.newFoundDocument(i,o,l,c),f=r.targetIds||[],y=r.removedTargetIds||[];t=new Oh(f,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zp(n,r.document),o=r.readTime?gi(r.readTime):at.min(),l=Ln.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Oh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zp(n,r.document),o=r.removedTargetIds||[];t=new Oh([],o,i,null)}else{if(!("filter"in e))return et(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new NP(i,o),c=r.targetId;t=new ES(c,l)}}return t}function HP(n,e){let t;if(e instanceof Vu)t={update:r1(n,e.key,e.value)};else if(e instanceof Fy)t={delete:Zg(n,e.key)};else if(e instanceof Qs)t={update:r1(n,e.key,e.data),updateMask:ZP(e.fieldMask)};else{if(!(e instanceof kP))return et(16599,{ft:e.type});t={verify:Zg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Iu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Au)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xh)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw et(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:UP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:et(27497)}(n,e.precondition)),t}function WP(n,e){return n&&n.length>0?(Ct(e!==void 0,14353),n.map(t=>function(i,o){let l=i.updateTime?gi(i.updateTime):gi(o);return l.isEqual(at.min())&&(l=gi(o)),new bP(l,i.transformResults||[])}(t,e))):[]}function $P(n,e){return{documents:[IS(n,e.path)]}}function AS(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=IS(n,i);const o=function(f){if(f.length!==0)return kS(Qr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(y=>function(d){return{field:As(d.field),direction:QP(d.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Yg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function KP(n,e,t,r){const{gt:i,parent:o}=AS(n,e),l={},c=[];let h=0;return t.forEach(f=>{const y="aggregate_"+h++;l[y]=f.alias,f.aggregateType==="count"?c.push({alias:y,count:{}}):f.aggregateType==="avg"?c.push({alias:y,avg:{field:As(f.fieldPath)}}):f.aggregateType==="sum"&&c.push({alias:y,sum:{field:As(f.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:c,structuredQuery:i.structuredQuery},parent:i.parent},yt:l,parent:o}}function GP(n){let e=qP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(m){const d=xS(m);return d instanceof Qr&&nS(d)?d.getFilters():[d]}(t.where));let l=[];t.orderBy&&(l=function(m){return m.map(d=>function(C){return new Su(Ma(C.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(d))}(t.orderBy));let c=null;t.limit&&(c=function(m){let d;return d=typeof m=="object"?m.value:m,Tf(d)?null:d}(t.limit));let h=null;t.startAt&&(h=function(m){const d=!!m.before,g=m.values||[];return new Qh(g,d)}(t.startAt));let f=null;return t.endAt&&(f=function(m){const d=!m.before,g=m.values||[];return new Qh(g,d)}(t.endAt)),fP(e,i,l,o,c,"F",h,f)}function JP(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ma(t.unaryFilter.field);return rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ma(t.unaryFilter.field);return rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ma(t.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ma(t.unaryFilter.field);return rn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}}(n):n.fieldFilter!==void 0?function(t){return rn.create(Ma(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Qr.create(t.compositeFilter.filters.map(r=>xS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return et(1026)}}(t.compositeFilter.op))}(n):et(30097,{filter:n})}function QP(n){return jP[n]}function YP(n){return FP[n]}function XP(n){return VP[n]}function As(n){return{fieldPath:n.canonicalString()}}function Ma(n){return Sn.fromServerFormat(n.fieldPath)}function kS(n){return n instanceof rn?function(t){if(t.op==="=="){if(Hw(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NAN"}};if(zw(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hw(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NOT_NAN"}};if(zw(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(t.field),op:YP(t.op),value:t.value}}}(n):n instanceof Qr?function(t){const r=t.getFilters().map(i=>kS(i));return r.length===1?r[0]:{compositeFilter:{op:XP(t.op),filters:r}}}(n):et(54877,{filter:n})}function ZP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,i,o=at.min(),l=at.min(),c=An.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.wt=e}}function tO(n){const e=GP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.Cn=new rO}addToCollectionParentIndex(e,t){return this.Cn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(Bs.min())}updateCollectionGroup(e,t,r){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class rO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hn(Mt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PS=41943040;class tr{static withCacheSize(e){return new tr(e,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(PS,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ka(0)}static lr(){return new Ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="LruGarbageCollector",iO=1048576;function o1([n,e],[t,r]){const i=ht(n,t);return i===0?ht(e,r):i}class sO{constructor(e){this.Er=e,this.buffer=new hn(o1),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();o1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Me(s1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){el(t)?Me(s1,"Ignoring IndexedDB error during garbage collection: ",t):await Za(t)}await this.mr(3e5)})}}class aO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return we.resolve(Ef.le);const r=new sO(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(i1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i1):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,o,l,c,h,f;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,l=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(f=Date.now(),La()<=pt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${m} documents in `+(f-h)+`ms
Total Duration: ${f-y}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}function lO(n,e){return new aO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?we.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pu(r.mutation,i,dr.empty(),Xt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mt()){const i=Ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=su();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Gi();const l=du(),c=function(){return du()}();return t.forEach((h,f)=>{const y=r.get(f.key);i.has(f.key)&&(y===void 0||y.mutation instanceof Qs)?o=o.insert(f.key,f):y!==void 0?(l.set(f.key,y.mutation.getFieldMask()),pu(y.mutation,f,y.mutation.getFieldMask(),Xt.now())):l.set(f.key,dr.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,y)=>l.set(f,y)),t.forEach((f,y)=>{var m;return c.set(f,new cO(y,(m=l.get(f))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){const r=du();let i=new Wt((l,c)=>l-c),o=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let y=r.get(h)||dr.empty();y=c.applyToLocalView(f,y),r.set(h,y);const m=(i.get(c.batchId)||mt()).add(h);i=i.insert(c.batchId,m)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,y=h.value,m=fS();y.forEach(d=>{if(!o.has(d)){const g=vS(t.get(d),r.get(d));g!==null&&m.set(d,g),o=o.add(d)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,m))}return we.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return Je.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):we.resolve(Ro());let c=wu,h=o;return l.next(f=>we.forEach(f,(y,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),o.get(y)?we.resolve():this.remoteDocumentCache.getEntry(e,y).next(d=>{h=h.insert(y,d)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,mt())).next(y=>({batchId:c,changes:hS(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(r=>{let i=su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=su();return this.indexManager.getCollectionParents(e,o).next(c=>we.forEach(c,h=>{const f=function(m,d){return new tl(d,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(y=>{y.forEach((m,d)=>{l=l.insert(m,d)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,f)=>{const y=f.getKey();l.get(y)===null&&(l=l.insert(y,Ln.newInvalidDocument(y)))});let c=su();return l.forEach((h,f)=>{const y=o.get(h);y!==void 0&&pu(y.mutation,f,dr.empty(),Xt.now()),If(t,f)&&(c=c.insert(h,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return we.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gi(i.createTime)}}(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:tO(i.bundledQuery),readTime:gi(i.readTime)}}(t)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.overlays=new Wt(Je.comparator),this.Qr=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ro();return we.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),we.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),we.resolve()}getOverlaysForCollection(e,t,r){const i=Ro(),o=t.length+1,l=new Je(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Wt((f,y)=>f-y);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let y=o.get(f.largestBatchId);y===null&&(y=Ro(),o=o.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const c=Ro(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,y)=>c.set(f,y)),!(c.size()>=i)););return we.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new PP(t,r));let o=this.Qr.get(t);o===void 0&&(o=mt(),this.Qr.set(t,o)),this.Qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.$r=new hn(gn.Ur),this.Kr=new hn(gn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new gn(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new gn(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new Je(new Mt([])),r=new gn(t,e),i=new gn(t,e+1),o=[];return this.Kr.forEachInRange([r,i],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Je(new Mt([])),r=new gn(t,e),i=new gn(t,e+1);let o=mt();return this.Kr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new gn(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Je.comparator(e.key,t.key)||ht(e.Zr,t.Zr)}static Wr(e,t){return ht(e.Zr,t.Zr)||Je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new hn(gn.Ur)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new RP(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Xr=this.Xr.add(new gn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(l)}lookupMutationBatch(e,t){return we.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),o=i<0?0:i;return we.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Py:this.nr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gn(t,0),i=new gn(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],l=>{const c=this.ei(l.Zr);o.push(c)}),we.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(ht);return t.forEach(i=>{const o=new gn(i,0),l=new gn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],c=>{r=r.add(c.Zr)})}),we.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Je.isDocumentKey(o)||(o=o.child(""));const l=new gn(new Je(o),0);let c=new hn(ht);return this.Xr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(h.Zr)),!0)},l),we.resolve(this.ni(c))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ct(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return we.forEach(t.mutations,i=>{const o=new gn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new gn(t,0),i=this.Xr.firstAfterOrEqual(r);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.ii=e,this.docs=function(){return new Wt(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return we.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=Gi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ln.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Gi();const l=t.path,c=new Je(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:y}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||zR(qR(y),r)<=0||(i.has(y.key)||If(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return we.resolve(o)}getAllFromCollectionGroup(e,t,r,i){et(9500)}si(e,t){return we.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yO(this)}getSize(e){return we.resolve(this.size)}}class yO extends uO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),we.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.persistence=e,this.oi=new Uo(t=>Ly(t),Dy),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this._i=0,this.ai=new qy,this.targetCount=0,this.ui=Ka.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),we.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.Tr(t),we.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.oi.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),we.waitFor(o).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return we.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),we.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),we.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),we.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return we.resolve(r)}containsKey(e,t){return we.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t){this.ci={},this.overlays={},this.li=new Ef(0),this.hi=!1,this.hi=!0,this.Pi=new pO,this.referenceDelegate=e(this),this.Ti=new vO(this),this.indexManager=new nO,this.remoteDocumentCache=function(i){return new gO(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new eO(t),this.Ei=new fO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new mO(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const i=new _O(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,t){return we.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class _O extends WR{constructor(e){super(),this.currentSequenceNumber=e}}class zy{constructor(e){this.persistence=e,this.Vi=new qy,this.mi=null}static fi(e){return new zy(e)}get gi(){if(this.mi)return this.mi;throw et(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),we.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),we.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.gi,r=>{const i=Je.fromPath(r);return this.pi(e,i).next(o=>{o||t.removeEntry(i,at.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return we.or([()=>we.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class ef{constructor(e,t){this.persistence=e,this.yi=new Uo(r=>GR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lO(this,t)}static fi(e,t){return new ef(e,t)}di(){}Ai(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return we.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?we.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,l=>this.Dr(e,l,t).next(c=>{c||(r++,o.removeEntry(l,at.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),we.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kh(e.data.value)),t}Dr(e,t,r){return we.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=mt(),i=mt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Hy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return fk()?8:$R(Mn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ws(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.bs(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new wO;return this.Ss(e,t,l).next(c=>{if(o.result=c,this.fs)return this.Ds(e,t,l,c.size)})}).next(()=>o.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(La()<=pt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Da(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),we.resolve()):(La()<=pt.DEBUG&&Me("QueryEngine","Query:",Da(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(La()<=pt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Da(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):we.resolve())}ws(e,t){if(Gw(t))return we.resolve(null);let r=mi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Yh(t,null,"F"),r=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=mt(...o);return this.ys.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.vs(t,c);return this.Cs(t,f,l,h.readTime)?this.ws(e,Yh(t,null,"F")):this.Fs(e,f,t,h)}))})))}bs(e,t,r,i){return Gw(t)||i.isEqual(at.min())?we.resolve(null):this.ys.getDocuments(e,r).next(o=>{const l=this.vs(t,o);return this.Cs(t,l,r,i)?we.resolve(null):(La()<=pt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Da(t)),this.Fs(e,l,t,UR(i,wu)).next(c=>c))})}vs(e,t){let r=new hn(uS(e));return t.forEach((i,o)=>{If(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return La()<=pt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Da(t)),this.ys.getDocumentsMatchingQuery(e,t,Bs.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LocalStore",TO=3e8;class CO{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Wt(ht),this.Os=new Uo(o=>Ly(o),Dy),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function SO(n,e,t,r){return new CO(n,e,t,r)}async function NS(n,e){const t=st(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=mt();for(const f of i){l.push(f.batchId);for(const y of f.mutations)h=h.add(y.key)}for(const f of o){c.push(f.batchId);for(const y of f.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(r,h).next(f=>({ks:f,removedBatchIds:l,addedBatchIds:c}))})})}function IO(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,h,f,y){const m=f.batch,d=m.keys();let g=we.resolve();return d.forEach(C=>{g=g.next(()=>y.getEntry(h,C)).next(S=>{const E=f.docVersions.get(C);Ct(E!==null,48541),S.version.compareTo(E)<0&&(m.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),y.addEntry(S)))})}),g.next(()=>c.mutationQueue.removeMutationBatch(h,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=mt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LS(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function bO(n,e){const t=st(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const c=[];e.targetChanges.forEach((y,m)=>{const d=i.get(m);if(!d)return;c.push(t.Ti.removeMatchingKeys(o,y.removedDocuments,m).next(()=>t.Ti.addMatchingKeys(o,y.addedDocuments,m)));let g=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(An.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):y.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(y.resumeToken,r)),i=i.insert(m,g),function(S,E,_){return S.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=TO?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,g,y)&&c.push(t.Ti.updateTargetData(o,g))});let h=Gi(),f=mt();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),c.push(AO(o,l,e.documentUpdates).next(y=>{h=y.qs,f=y.Qs})),!r.isEqual(at.min())){const y=t.Ti.getLastRemoteSnapshotVersion(o).next(m=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(y)}return we.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(t.xs=i,o))}function AO(n,e,t){let r=mt(),i=mt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Gi();return t.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(at.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):Me(Wy,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{qs:l,Qs:i}})}function xO(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Py),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kO(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(o=>o?(i=o,we.resolve(i)):t.Ti.allocateTargetId(r).next(l=>(i=new Ns(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function ty(n,e,t){const r=st(n),i=r.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!el(l))throw l;Me(Wy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function a1(n,e,t){const r=st(n);let i=at.min(),o=mt();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,y){const m=st(h),d=m.Os.get(y);return d!==void 0?we.resolve(m.xs.get(d)):m.Ti.getTargetData(f,y)}(r,l,mi(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,t?i:at.min(),t?o:mt())).next(c=>(RO(r,pP(e),c),{documents:c,$s:o})))}function RO(n,e,t){let r=n.Ns.get(e)||at.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ns.set(e,r)}class l1{constructor(){this.activeTargetIds=wP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PO{constructor(){this.xo=new l1,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new l1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="ConnectivityMonitor";class c1{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Me(u1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Me(u1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=null;function ny(){return Eh===null?Eh=function(){return 268435456+Math.round(2147483648*Math.random())}():Eh++,"0x"+Eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RestConnection",NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Gh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,o){const l=ny(),c=this.jo(e,t.toUriEncodedString());Me(Hp,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(h,i,o);const{host:f}=new URL(c),y=Gs(f);return this.Jo(e,c,h,r,y).then(m=>(Me(Hp,`Received RPC '${e}' ${l}: `,m),m),m=>{throw za(Hp,`RPC '${e}' ${l} failed with error: `,m,"url: ",c,"request:",r),m})}Yo(e,t,r,i,o,l){return this.zo(e,t,r,i,o)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,t){const r=NO[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class MO extends LO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=ny();return new Promise((c,h)=>{const f=new DC;f.setWithCredentials(!0),f.listenOnce(MC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case xh.NO_ERROR:const m=f.getResponseJson();Me(On,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(m)),c(m);break;case xh.TIMEOUT:Me(On,`RPC '${e}' ${l} timed out`),h(new je(_e.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const d=f.getStatus();if(Me(On,`RPC '${e}' ${l} failed with status:`,d,"response text:",f.getResponseText()),d>0){let g=f.getResponseJson();Array.isArray(g)&&(g=g[0]);const C=g==null?void 0:g.error;if(C&&C.status&&C.message){const S=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(w)>=0?w:_e.UNKNOWN}(C.status);h(new je(S,C.message))}else h(new je(_e.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new je(_e.UNAVAILABLE,"Connection failed."));break;default:et(9055,{h_:e,streamId:l,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Me(On,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(i);Me(On,`RPC '${e}' ${l} sending request:`,i),f.send(t,"POST",y,r,15)})}I_(e,t,r){const i=ny(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=VC(),c=FC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Ho(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=o.join("");Me(On,`Creating RPC '${e}' stream ${i}: ${y}`,h);const m=l.createWebChannel(y,h);this.E_(m);let d=!1,g=!1;const C=new DO({Zo:E=>{g?Me(On,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(d||(Me(On,`Opening RPC '${e}' stream ${i} transport.`),m.open(),d=!0),Me(On,`RPC '${e}' stream ${i} sending:`,E),m.send(E))},Xo:()=>m.close()}),S=(E,_,w)=>{E.listen(_,O=>{try{w(O)}catch(I){setTimeout(()=>{throw I},0)}})};return S(m,iu.EventType.OPEN,()=>{g||(Me(On,`RPC '${e}' stream ${i} transport opened.`),C.__())}),S(m,iu.EventType.CLOSE,()=>{g||(g=!0,Me(On,`RPC '${e}' stream ${i} transport closed`),C.u_(),this.d_(m))}),S(m,iu.EventType.ERROR,E=>{g||(g=!0,za(On,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),C.u_(new je(_e.UNAVAILABLE,"The operation could not be completed")))}),S(m,iu.EventType.MESSAGE,E=>{var _;if(!g){const w=E.data[0];Ct(!!w,16349);const O=w,I=(O==null?void 0:O.error)||((_=O[0])===null||_===void 0?void 0:_.error);if(I){Me(On,`RPC '${e}' stream ${i} received error:`,I);const L=I.status;let V=function(b){const A=nn[b];if(A!==void 0)return wS(A)}(L),P=I.message;V===void 0&&(V=_e.INTERNAL,P="Unknown error status: "+L+" with message "+I.message),g=!0,C.u_(new je(V,P)),m.close()}else Me(On,`RPC '${e}' stream ${i} received:`,w),C.c_(w)}}),S(c,jC.STAT_EVENT,E=>{E.stat===Hg.PROXY?Me(On,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Hg.NOPROXY&&Me(On,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n){return new BP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-r);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="PersistentStream";class MS{constructor(e,t,r,i,o,l,c,h){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new DS(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===t&&this.z_(r,i)},r=>{e(()=>{const i=new je(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Me(h1,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Me(h1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jO extends MS{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=zP(this.serializer,e),r=function(o){if(!("targetChange"in o))return at.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?at.min():l.readTime?gi(l.readTime):at.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=ey(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Jg(h)?{documents:$P(o,h)}:{query:AS(o,h).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=CS(o,l.resumeToken);const f=Yg(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(at.min())>0){c.readTime=Zh(o,l.snapshotVersion.toTimestamp());const f=Yg(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=JP(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=ey(this.serializer),t.removeTarget=e,this.Q_(t)}}class FO extends MS{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=WP(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=ey(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>HP(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{}class BO extends VO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,Xg(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(_e.UNKNOWN,o.toString())})}Yo(e,t,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Yo(e,Xg(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new je(_e.UNKNOWN,l.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class UO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ki(t),this.ua=!1):Me("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class qO{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(l=>{r.enqueueAndForget(async()=>{qo(this)&&(Me(Mo,"Restarting streams for network reachability change."),await async function(h){const f=st(h);f.da.add(4),await Uu(f),f.Va.set("Unknown"),f.da.delete(4),await Rf(f)}(this))})}),this.Va=new UO(r,i)}}async function Rf(n){if(qo(n))for(const e of n.Aa)await e(!0)}async function Uu(n){for(const e of n.Aa)await e(!1)}function jS(n,e){const t=st(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Jy(t)?Gy(t):nl(t).N_()&&Ky(t,e))}function $y(n,e){const t=st(n),r=nl(t);t.Ea.delete(e),r.N_()&&FS(t,e),t.Ea.size===0&&(r.N_()?r.k_():qo(t)&&t.Va.set("Unknown"))}function Ky(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).Z_(e)}function FS(n,e){n.ma.Ke(e),nl(n).X_(e)}function Gy(n){n.ma=new MP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.Va.ca()}function Jy(n){return qo(n)&&!nl(n).O_()&&n.Ea.size>0}function qo(n){return st(n).da.size===0}function VS(n){n.ma=void 0}async function zO(n){n.Va.set("Online")}async function HO(n){n.Ea.forEach((e,t)=>{Ky(n,e)})}async function WO(n,e){VS(n),Jy(n)?(n.Va.Pa(e),Gy(n)):n.Va.set("Unknown")}async function $O(n,e,t){if(n.Va.set("Online"),e instanceof TS&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ea.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ea.delete(c),i.ma.removeTarget(c))}(n,e)}catch(r){Me(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tf(n,r)}else if(e instanceof Oh?n.ma.Xe(e):e instanceof ES?n.ma.ot(e):n.ma.nt(e),!t.isEqual(at.min()))try{const r=await LS(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.ma.It(l);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const y=o.Ea.get(f);y&&o.Ea.set(f,y.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,f)=>{const y=o.Ea.get(h);if(!y)return;o.Ea.set(h,y.withResumeToken(An.EMPTY_BYTE_STRING,y.snapshotVersion)),FS(o,h);const m=new Ns(y.target,h,f,y.sequenceNumber);Ky(o,m)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){Me(Mo,"Failed to raise snapshot:",r),await tf(n,r)}}async function tf(n,e,t){if(!el(e))throw e;n.da.add(1),await Uu(n),n.Va.set("Offline"),t||(t=()=>LS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Me(Mo,"Retrying IndexedDB access"),await t(),n.da.delete(1),await Rf(n)})}function BS(n,e){return e().catch(t=>tf(n,t,e))}async function Pf(n){const e=st(n),t=Hs(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Py;for(;KO(e);)try{const i=await xO(e.localStore,r);if(i===null){e.Ia.length===0&&t.k_();break}r=i.batchId,GO(e,i)}catch(i){await tf(e,i)}US(e)&&qS(e)}function KO(n){return qo(n)&&n.Ia.length<10}function GO(n,e){n.Ia.push(e);const t=Hs(n);t.N_()&&t.ea&&t.ta(e.mutations)}function US(n){return qo(n)&&!Hs(n).O_()&&n.Ia.length>0}function qS(n){Hs(n).start()}async function JO(n){Hs(n).ia()}async function QO(n){const e=Hs(n);for(const t of n.Ia)e.ta(t.mutations)}async function YO(n,e,t){const r=n.Ia.shift(),i=Vy.from(r,e,t);await BS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Pf(n)}async function XO(n,e){e&&Hs(n).ea&&await async function(r,i){if(function(l){return LP(l)&&l!==_e.ABORTED}(i.code)){const o=r.Ia.shift();Hs(r).L_(),await BS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Pf(r)}}(n,e),US(n)&&qS(n)}async function f1(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Me(Mo,"RemoteStore received new credentials");const r=qo(t);t.da.add(3),await Uu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Rf(t)}async function ZO(n,e){const t=st(n);e?(t.da.delete(2),await Rf(t)):e||(t.da.add(2),await Uu(t),t.Va.set("Unknown"))}function nl(n){return n.fa||(n.fa=function(t,r,i){const o=st(t);return o.oa(),new jO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:zO.bind(null,n),n_:HO.bind(null,n),i_:WO.bind(null,n),Y_:$O.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),Jy(n)?Gy(n):n.Va.set("Unknown")):(await n.fa.stop(),VS(n))})),n.fa}function Hs(n){return n.ga||(n.ga=function(t,r,i){const o=st(t);return o.oa(),new FO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:JO.bind(null,n),i_:XO.bind(null,n),na:QO.bind(null,n),ra:YO.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await Pf(n)):(await n.ga.stop(),n.Ia.length>0&&(Me(Mo,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new Qy(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yy(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),el(n))return new je(_e.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{static emptySet(e){return new Fa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=su(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.pa=new Wt(Je.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):et(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ga{constructor(e,t,r,i,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Ga(e,t,Fa.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class tN{constructor(){this.queries=p1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=st(t),o=i.queries;i.queries=p1(),o.forEach((l,c)=>{for(const h of c.Sa)h.onError(r)})})(this,new je(_e.ABORTED,"Firestore shutting down"))}}function p1(){return new Uo(n=>lS(n),Sf)}async function zS(n,e){const t=st(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new eN,r=e.va()?0:1);try{switch(r){case 0:o.ba=await t.onListen(i,!0);break;case 1:o.ba=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Yy(l,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.Fa(t.onlineState),o.ba&&e.Ma(o.ba)&&Xy(t)}async function HS(n,e){const t=st(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nN(n,e){const t=st(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Ma(i)&&(r=!0);l.ba=i}}r&&Xy(t)}function rN(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Xy(n){n.Ca.forEach(e=>{e.next()})}var ry,m1;(m1=ry||(ry={})).xa="default",m1.Cache="cache";class WS{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ry.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.key=e}}class KS{constructor(e){this.key=e}}class iN{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=mt(),this.mutatedKeys=mt(),this.Za=uS(e),this.Xa=new Fa(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new d1,i=t?t.Xa:this.Xa;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,m)=>{const d=i.get(y),g=If(this.query,m)?m:null,C=!!d&&this.mutatedKeys.has(d.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;d&&g?d.data.isEqual(g.data)?C!==S&&(r.track({type:3,doc:g}),E=!0):this.ru(d,g)||(r.track({type:2,doc:g}),E=!0,(h&&this.Za(g,h)>0||f&&this.Za(g,f)<0)&&(c=!0)):!d&&g?(r.track({type:0,doc:g}),E=!0):d&&!g&&(r.track({type:1,doc:d}),E=!0,(h||f)&&(c=!0)),E&&(g?(l=l.add(g),o=S?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Xa:l,nu:r,Cs:c,mutatedKeys:o}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const l=e.nu.wa();l.sort((y,m)=>function(g,C){const S=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Vt:E})}};return S(g)-S(C)}(y.type,m.type)||this.Za(y.doc,m.doc)),this.iu(r),i=i!=null&&i;const c=t&&!i?this.su():[],h=this.Ya.size===0&&this.current&&!i?1:0,f=h!==this.Ja;return this.Ja=h,l.length!==0||f?{snapshot:new Ga(this.query,e.Xa,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new d1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=mt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new KS(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new $S(r))}),t}au(e){this.Ha=e.$s,this.Ya=mt();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ga.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Zy="SyncEngine";class sN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oN{constructor(e){this.key=e,this.cu=!1}}class aN{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.lu={},this.hu=new Uo(c=>lS(c),Sf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Wt(Je.comparator),this.Eu=new Map,this.du=new qy,this.Au={},this.Ru=new Map,this.Vu=Ka.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function lN(n,e,t=!0){const r=ZS(n);let i;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await GS(r,e,t,!0),i}async function uN(n,e){const t=ZS(n);await GS(t,e,!0,!1)}async function GS(n,e,t,r){const i=await kO(n.localStore,mi(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await cN(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&jS(n.remoteStore,i),c}async function cN(n,e,t,r,i){n.fu=(m,d,g)=>async function(S,E,_,w){let O=E.view.tu(_);O.Cs&&(O=await a1(S.localStore,E.query,!1).then(({documents:P})=>E.view.tu(P,O)));const I=w&&w.targetChanges.get(E.targetId),L=w&&w.targetMismatches.get(E.targetId)!=null,V=E.view.applyChanges(O,S.isPrimaryClient,I,L);return y1(S,E.targetId,V.ou),V.snapshot}(n,m,d,g);const o=await a1(n.localStore,e,!0),l=new iN(e,o.$s),c=l.tu(o.documents),h=Bu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=l.applyChanges(c,n.isPrimaryClient,h);y1(n,t,f.ou);const y=new sN(e,t,l);return n.hu.set(e,y),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),f.snapshot}async function hN(n,e,t){const r=st(n),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(l=>!Sf(l,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ty(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$y(r.remoteStore,i.targetId),iy(r,i.targetId)}).catch(Za)):(iy(r,i.targetId),await ty(r.localStore,i.targetId,!0))}async function fN(n,e){const t=st(n),r=t.hu.get(e),i=t.Pu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$y(t.remoteStore,r.targetId))}async function dN(n,e,t){const r=wN(n);try{const i=await function(l,c){const h=st(l),f=Xt.now(),y=c.reduce((g,C)=>g.add(C.key),mt());let m,d;return h.persistence.runTransaction("Locally write mutations","readwrite",g=>{let C=Gi(),S=mt();return h.Bs.getEntries(g,y).next(E=>{C=E,C.forEach((_,w)=>{w.isValidDocument()||(S=S.add(_))})}).next(()=>h.localDocuments.getOverlayedDocuments(g,C)).next(E=>{m=E;const _=[];for(const w of c){const O=xP(w,m.get(w.key).overlayedDocument);O!=null&&_.push(new Qs(w.key,O,ZC(O.value.mapValue),Jr.exists(!0)))}return h.mutationQueue.addMutationBatch(g,f,_,c)}).next(E=>{d=E;const _=E.applyToLocalDocumentSet(m,S);return h.documentOverlayCache.saveOverlays(g,E.batchId,_)})}).then(()=>({batchId:d.batchId,changes:hS(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let f=l.Au[l.currentUser.toKey()];f||(f=new Wt(ht)),f=f.insert(c,h),l.Au[l.currentUser.toKey()]=f}(r,i.batchId,t),await qu(r,i.changes),await Pf(r.remoteStore)}catch(i){const o=Yy(i,"Failed to persist write");t.reject(o)}}async function JS(n,e){const t=st(n);try{const r=await bO(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Eu.get(o);l&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.cu=!0:i.modifiedDocuments.size>0?Ct(l.cu,14607):i.removedDocuments.size>0&&(Ct(l.cu,42227),l.cu=!1))}),await qu(t,r,e)}catch(r){await Za(r)}}function g1(n,e,t){const r=st(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.hu.forEach((o,l)=>{const c=l.view.Fa(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=st(l);h.onlineState=c;let f=!1;h.queries.forEach((y,m)=>{for(const d of m.Sa)d.Fa(c)&&(f=!0)}),f&&Xy(h)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pN(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),o=i&&i.key;if(o){let l=new Wt(Je.comparator);l=l.insert(o,Ln.newNoDocument(o,at.min()));const c=mt().add(o),h=new xf(at.min(),new Map,new Wt(ht),l,c);await JS(r,h),r.Iu=r.Iu.remove(o),r.Eu.delete(e),ev(r)}else await ty(r.localStore,e,!1).then(()=>iy(r,e,t)).catch(Za)}async function mN(n,e){const t=st(n),r=e.batch.batchId;try{const i=await IO(t.localStore,e);YS(t,r,null),QS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await qu(t,i)}catch(i){await Za(i)}}async function gN(n,e,t){const r=st(n);try{const i=await function(l,c){const h=st(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return h.mutationQueue.lookupMutationBatch(f,c).next(m=>(Ct(m!==null,37113),y=m.keys(),h.mutationQueue.removeMutationBatch(f,m))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>h.localDocuments.getDocuments(f,y))})}(r.localStore,e);YS(r,e,t),QS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await qu(r,i)}catch(i){await Za(i)}}function QS(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function YS(n,e,t){const r=st(n);let i=r.Au[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function iy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||XS(n,r)})}function XS(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&($y(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),ev(n))}function y1(n,e,t){for(const r of t)r instanceof $S?(n.du.addReference(r.key,e),yN(n,r)):r instanceof KS?(Me(Zy,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||XS(n,r.key)):et(19791,{pu:r})}function yN(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(Me(Zy,"New document in limbo: "+t),n.Tu.add(r),ev(n))}function ev(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new Je(Mt.fromString(e)),r=n.Vu.next();n.Eu.set(r,new oN(t)),n.Iu=n.Iu.insert(t,r),jS(n.remoteStore,new Ns(mi(My(t.path)),r,"TargetPurposeLimboResolution",Ef.le))}}async function qu(n,e,t){const r=st(n),i=[],o=[],l=[];r.hu.isEmpty()||(r.hu.forEach((c,h)=>{l.push(r.fu(h,e,t).then(f=>{var y;if((f||t)&&r.isPrimaryClient){const m=f?!f.fromCache:(y=t==null?void 0:t.targetChanges.get(h.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){i.push(f);const m=Hy.Rs(h.targetId,f);o.push(m)}}))}),await Promise.all(l),r.lu.Y_(i),await async function(h,f){const y=st(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>we.forEach(f,d=>we.forEach(d.ds,g=>y.persistence.referenceDelegate.addReference(m,d.targetId,g)).next(()=>we.forEach(d.As,g=>y.persistence.referenceDelegate.removeReference(m,d.targetId,g)))))}catch(m){if(!el(m))throw m;Me(Wy,"Failed to update sequence numbers: "+m)}for(const m of f){const d=m.targetId;if(!m.fromCache){const g=y.xs.get(d),C=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(C);y.xs=y.xs.insert(d,S)}}}(r.localStore,o))}async function vN(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Me(Zy,"User change. New user:",e.toKey());const r=await NS(t.localStore,e);t.currentUser=e,function(o,l){o.Ru.forEach(c=>{c.forEach(h=>{h.reject(new je(_e.CANCELLED,l))})}),o.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qu(t,r.ks)}}function _N(n,e){const t=st(n),r=t.Eu.get(e);if(r&&r.cu)return mt().add(r.key);{let i=mt();const o=t.Pu.get(e);if(!o)return i;for(const l of o){const c=t.hu.get(l);i=i.unionWith(c.view.eu)}return i}}function ZS(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pN.bind(null,e),e.lu.Y_=nN.bind(null,e.eventManager),e.lu.gu=rN.bind(null,e.eventManager),e}function wN(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gN.bind(null,e),e}class nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return SO(this.persistence,new EO,e.initialUser,this.serializer)}Su(e){return new OS(zy.fi,this.serializer)}bu(e){return new PO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nf.provider={build:()=>new nf};class EN extends nf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ct(this.persistence.referenceDelegate instanceof ef,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oO(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new OS(r=>ef.fi(r,t),this.serializer)}}class sy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),await ZO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tN}()}createDatastore(e){const t=kf(e.databaseInfo.databaseId),r=function(o){return new MO(o)}(e.databaseInfo);return function(o,l,c,h){return new BO(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new qO(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>g1(this.syncEngine,t,0),function(){return c1.C()?new c1:new OO}())}createSyncEngine(e,t){return function(i,o,l,c,h,f,y){const m=new aN(i,o,l,c,h,f);return y&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=st(i);Me(Mo,"RemoteStore shutting down."),o.da.add(5),await Uu(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sy.provider={build:()=>new sy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="FirestoreClient";class TN{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=zC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{Me(Ws,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Me(Ws,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $p(n,e){n.asyncQueue.verifyOperationInProgress(),Me(Ws,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function v1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await CN(n);Me(Ws,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>f1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>f1(e.remoteStore,i)),n._onlineComponents=e}async function CN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me(Ws,"Using user provided OfflineComponentProvider");try{await $p(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;za("Error using user provided cache. Falling back to memory cache: "+t),await $p(n,new nf)}}else Me(Ws,"Using default OfflineComponentProvider"),await $p(n,new EN(void 0));return n._offlineComponents}async function tv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me(Ws,"Using user provided OnlineComponentProvider"),await v1(n,n._uninitializedComponentsProvider._online)):(Me(Ws,"Using default OnlineComponentProvider"),await v1(n,new sy))),n._onlineComponents}function SN(n){return tv(n).then(e=>e.syncEngine)}function IN(n){return tv(n).then(e=>e.datastore)}async function oy(n){const e=await tv(n),t=e.eventManager;return t.onListen=lN.bind(null,e.syncEngine),t.onUnlisten=hN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fN.bind(null,e.syncEngine),t}function bN(n,e,t={}){const r=new qi;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const y=new eI({next:d=>{y.xu(),l.enqueueAndForget(()=>HS(o,m)),d.fromCache&&h.source==="server"?f.reject(new je(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(d)},error:d=>f.reject(d)}),m=new WS(c,y,{includeMetadataChanges:!0,Qa:!0});return zS(o,m)}(await oy(n),n.asyncQueue,e,t,r)),r.promise}function AN(n,e,t){const r=new qi;return n.asyncQueue.enqueueAndForget(async()=>{try{const i=await IN(n);r.resolve(async function(l,c,h){var f;const y=st(l),{request:m,yt:d,parent:g}=KP(y.serializer,dP(c),h);y.connection.Uo||delete m.parent;const C=(await y.Yo("RunAggregationQuery",y.serializer.databaseId,g,m,1)).filter(E=>!!E.result);Ct(C.length===1,64727);const S=(f=C[0].result)===null||f===void 0?void 0:f.aggregateFields;return Object.keys(S).reduce((E,_)=>(E[d[_]]=S[_],E),{})}(i,e,t))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e,t){if(!t)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xN(n,e,t,r){if(e===!0&&r===!0)throw new je(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function w1(n){if(!Je.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E1(n){if(Je.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Of(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":et(12329,{type:typeof n})}function kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Of(n);throw new je(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kN(n,e){if(e<=0)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firestore.googleapis.com",T1=!0;class C1{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rI,this.ssl=T1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:T1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iO)throw new je(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OR;switch(r.type){case"firstParty":return new MR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=_1.get(t);r&&(Me("ComponentProvider","Removing Datastore"),_1.delete(t),r.terminate())}(this),Promise.resolve()}}function RN(n,e,t,r={}){var i;n=kr(n,Nf);const o=Gs(e),l=n._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o&&(Iy(`https://${h}`),by("Firestore",!0)),l.host!==rI&&l.host!==h&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:h,ssl:o,emulatorOptions:r});if(!No(f,c)&&(n._setSettings(f),r.mockUserToken)){let y,m;if(typeof r.mockUserToken=="string")y=r.mockUserToken,m=Nn.MOCK_USER;else{y=xC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new je(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nn(d)}n._authCredentials=new NR(new UC(y,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Fs extends Yi{constructor(e,t,r){super(e,t,My(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Je(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function PN(n,e,...t){if(n=Nt(n),nI("collection","path",e),n instanceof Nf){const r=Mt.fromString(e,...t);return E1(r),new Fs(n,null,r)}{if(!(n instanceof qn||n instanceof Fs))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return E1(r),new Fs(n.firestore,null,r)}}function ON(n,e,...t){if(n=Nt(n),arguments.length===1&&(e=zC.newId()),nI("doc","path",e),n instanceof Nf){const r=Mt.fromString(e,...t);return w1(r),new qn(n,null,new Je(r))}{if(!(n instanceof qn||n instanceof Fs))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return w1(r),new qn(n.firestore,n instanceof Fs?n.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="AsyncQueue";class I1{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new DS(this,"async_queue_retry"),this.rc=()=>{const r=Wp();r&&Me(S1,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=Wp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new qi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!el(e))throw e;Me(S1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ki("INTERNAL UNHANDLED ERROR: ",b1(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=Qy.createAndSchedule(this,e,t,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&et(47125,{cc:b1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function b1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class $s extends Nf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new I1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new I1(e),this._firestoreClient=void 0,await e}}}function NN(n,e){const t=typeof n=="object"?n:ky(),r=typeof n=="string"?n:Gh,i=wf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=IC("firestore");o&&RN(i,...o)}return i}function Lf(n){if(n._terminated)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LN(n),n._firestoreClient}function LN(n){var e,t,r;const i=n._freezeSettings(),o=function(c,h,f,y){return new XR(c,h,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,tI(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new TN(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class MN{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ja(An.fromBase64String(e))}catch(t){throw new je(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ja(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/^__.*__$/;class FN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class iI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{Ic:n})}}class iv{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new iv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return rf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(sI(this.Ic)&&jN.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class VN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kf(e)}bc(e,t,r,i=!1){return new iv({Ic:e,methodName:t,wc:r,path:Sn.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sv(n){const e=n._freezeSettings(),t=kf(n._databaseId);return new VN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BN(n,e,t,r,i,o={}){const l=n.bc(o.merge||o.mergeFields?2:0,e,t,i);av("Data must be an object, but it was:",l,r);const c=oI(r,l);let h,f;if(o.merge)h=new dr(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const m of o.mergeFields){const d=ay(e,m,t);if(!l.contains(d))throw new je(_e.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);lI(y,d)||y.push(d)}h=new dr(y),f=l.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,f=l.fieldTransforms;return new FN(new nr(c),h,f)}class jf extends Mf{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}class ov extends Mf{_toFieldTransform(e){return new SP(e.path,new Iu)}isEqual(e){return e instanceof ov}}function UN(n,e,t,r){const i=n.bc(1,e,t);av("Data must be an object, but it was:",i,r);const o=[],l=nr.empty();Js(r,(h,f)=>{const y=lv(e,h,t);f=Nt(f);const m=i.mc(y);if(f instanceof jf)o.push(y);else{const d=zu(f,m);d!=null&&(o.push(y),l.set(y,d))}});const c=new dr(o);return new iI(l,c,i.fieldTransforms)}function qN(n,e,t,r,i,o){const l=n.bc(1,e,t),c=[ay(e,r,t)],h=[i];if(o.length%2!=0)throw new je(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)c.push(ay(e,o[d])),h.push(o[d+1]);const f=[],y=nr.empty();for(let d=c.length-1;d>=0;--d)if(!lI(f,c[d])){const g=c[d];let C=h[d];C=Nt(C);const S=l.mc(g);if(C instanceof jf)f.push(g);else{const E=zu(C,S);E!=null&&(f.push(g),y.set(g,E))}}const m=new dr(f);return new iI(y,m,l.fieldTransforms)}function zN(n,e,t,r=!1){return zu(t,n.bc(r?4:3,e))}function zu(n,e){if(aI(n=Nt(n)))return av("Unsupported field value:",e,n),oI(n,e);if(n instanceof Mf)return function(r,i){if(!sI(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=zu(c,i.fc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xt.fromDate(r);return{timestampValue:Zh(i.serializer,o)}}if(r instanceof Xt){const o=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(i.serializer,o)}}if(r instanceof nv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ja)return{bytesValue:CS(i.serializer,r._byteString)};if(r instanceof qn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.gc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Uy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rv)return function(l,c){return{mapValue:{fields:{[YC]:{stringValue:XC},[Jh]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.gc("VectorValues must only contain numeric values.");return jy(c.serializer,f)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${Of(r)}`)}(n,e)}function oI(n,e){const t={};return WC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(n,(r,i)=>{const o=zu(i,e.Ac(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function aI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof nv||n instanceof Ja||n instanceof qn||n instanceof Mf||n instanceof rv)}function av(n,e,t){if(!aI(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Of(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function ay(n,e,t){if((e=Nt(e))instanceof Df)return e._internalPath;if(typeof e=="string")return lv(n,e);throw rf("Field path arguments must be of type string or ",n,!1,void 0,t)}const HN=new RegExp("[~\\*/\\[\\]]");function lv(n,e,t){if(e.search(HN)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Df(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new je(_e.INVALID_ARGUMENT,c+n+h)}function lI(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ff("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class WN extends uI{data(){return super.data()}}function Ff(n,e){return typeof e=="string"?lv(n,e):e instanceof Df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uv{}class cv extends uv{}function $N(n,e,...t){let r=[];e instanceof uv&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof hv).length,c=o.filter(h=>h instanceof Vf).length;if(l>1||l>0&&c>0)throw new je(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Vf extends cv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Vf(e,t,r)}_apply(e){const t=this._parse(e);return hI(e._query,t),new Yi(e.firestore,e.converter,Qg(e._query,t))}_parse(e){const t=sv(e.firestore);return function(o,l,c,h,f,y,m){let d;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new je(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){R1(m,y);const C=[];for(const S of m)C.push(k1(h,o,S));d={arrayValue:{values:C}}}else d=k1(h,o,m)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||R1(m,y),d=zN(c,l,m,y==="in"||y==="not-in");return rn.create(f,y,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function x1(n,e,t){const r=e,i=Ff("where",n);return Vf._create(i,r,t)}class hv extends uv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Qr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)hI(l,h),l=Qg(l,h)}(e._query,t),new Yi(e.firestore,e.converter,Qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fv extends cv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fv(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(o,l)}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new tl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function KN(n,e="asc"){const t=e,r=Ff("orderBy",n);return fv._create(r,t)}class dv extends cv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new dv(e,t,r)}_apply(e){return new Yi(e.firestore,e.converter,Yh(e._query,this._limit,this._limitType))}}function GN(n){return kN("limit",n),dv._create("limit",n,"F")}function k1(n,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new je(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oS(e)&&t.indexOf("/")!==-1)throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mt.fromString(t));if(!Je.isDocumentKey(r))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qw(n,new Je(r))}if(t instanceof qn)return qw(n,t._key);throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(t)}.`)}function R1(n,e){if(!Array.isArray(n)||n.length===0)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hI(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new je(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class JN{convertValue(e,t="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Js(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Jh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>Yt(l.doubleValue));return new rv(o)}convertGeoPoint(e){return new nv(Yt(e.latitude),Yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const t=Us(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mt.fromString(e);Ct(RS(r),9688,{name:e});const i=new Tu(r.get(1),r.get(3)),o=new Je(r.popFirst(5));return i.isEqual(t)||Ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function YN(){return new DN("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fI extends uI{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Nh extends fI{data(e={}){return super.data(e)}}class dI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nh(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Nh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new au(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Nh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new au(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,y=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:XN(c.type),doc:h,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:n})}}class Bf extends JN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function ZN(n){n=kr(n,Yi);const e=kr(n.firestore,$s),t=Lf(e),r=new Bf(e);return cI(n._query),bN(t,n._query).then(i=>new dI(e,r,n,i))}function e2(n,e,t){n=kr(n,qn);const r=kr(n.firestore,$s),i=QN(n.converter,e,t);return pv(r,[BN(sv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jr.none())])}function t2(n,e,t,...r){n=kr(n,qn);const i=kr(n.firestore,$s),o=sv(i);let l;return l=typeof(e=Nt(e))=="string"||e instanceof Df?qN(o,"updateDoc",n._key,e,t,r):UN(o,"updateDoc",n._key,e),pv(i,[l.toMutation(n._key,Jr.exists(!0))])}function P1(n){return pv(kr(n.firestore,$s),[new Fy(n._key,Jr.none())])}function n2(n,...e){var t,r,i;n=Nt(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||A1(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(A1(e[l])){const m=e[l];e[l]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[l+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[l+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let h,f,y;if(n instanceof qn)f=kr(n.firestore,$s),y=My(n._key.path),h={next:m=>{e[l]&&e[l](r2(f,n,m))},error:e[l+1],complete:e[l+2]};else{const m=kr(n,Yi);f=kr(m.firestore,$s),y=m._query;const d=new Bf(f);h={next:g=>{e[l]&&e[l](new dI(f,d,m,g))},error:e[l+1],complete:e[l+2]},cI(n._query)}return function(d,g,C,S){const E=new eI(S),_=new WS(g,E,C);return d.asyncQueue.enqueueAndForget(async()=>zS(await oy(d),_)),()=>{E.xu(),d.asyncQueue.enqueueAndForget(async()=>HS(await oy(d),_))}}(Lf(f),y,c,h)}function pv(n,e){return function(r,i){const o=new qi;return r.asyncQueue.enqueueAndForget(async()=>dN(await SN(r),i,o)),o.promise}(Lf(n),e)}function r2(n,e,t){const r=t.docs.get(e._key),i=new Bf(n);return new fI(n,i,e._key,r,new au(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(n){return s2(n,{count:YN()})}function s2(n,e){const t=kr(n.firestore,$s),r=Lf(t),i=QR(e,(o,l)=>new OP(l,o.aggregateType,o._internalFieldPath));return AN(r,n._query,i).then(o=>function(c,h,f){const y=new Bf(c);return new MN(h,y,f)}(t,n,o))}function o2(){return new ov("serverTimestamp")}(function(e,t=!0){(function(i){Xa=i})(Bo),Lo(new Vs("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new $s(new LR(r.getProvider("auth-internal")),new jR(l,r.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new je(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(f.options.projectId,y)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),pi(Rw,Pw,e),pi(Rw,Pw,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firebasestorage.googleapis.com",mI="storageBucket",a2=2*60*1e3,l2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt extends Ti{constructor(e,t,r=0){super(Kp(e),`Firebase Storage: ${t} (${Kp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function Kp(n){return"storage/"+n}function mv(){const n="An unknown error occurred, please check the error payload for server response.";return new Gt(Kt.UNKNOWN,n)}function u2(n){return new Gt(Kt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function c2(n){return new Gt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h2(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt(Kt.UNAUTHENTICATED,n)}function f2(){return new Gt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d2(n){return new Gt(Kt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function p2(){return new Gt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m2(){return new Gt(Kt.CANCELED,"User canceled the upload/download.")}function g2(n){return new Gt(Kt.INVALID_URL,"Invalid URL '"+n+"'.")}function y2(n){return new Gt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function v2(){return new Gt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mI+"' property when initializing the app?")}function _2(){return new Gt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function w2(){return new Gt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function E2(n){return new Gt(Kt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ly(n){return new Gt(Kt.INVALID_ARGUMENT,n)}function gI(){return new Gt(Kt.APP_DELETED,"The Firebase app was deleted.")}function T2(n){return new Gt(Kt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mu(n,e){return new Gt(Kt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Zl(n){throw new Gt(Kt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=pr.makeFromUrl(e,t)}catch{return new pr(e,"")}if(r.path==="")return r;throw y2(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function f(I){I.path_=decodeURIComponent(I.path)}const y="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",g=new RegExp(`^https?://${m}/${y}/b/${i}/o${d}`,"i"),C={bucket:1,path:3},S=t===pI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",_=new RegExp(`^https?://${S}/${i}/${E}`,"i"),O=[{regex:c,indices:h,postModify:o},{regex:g,indices:C,postModify:f},{regex:_,indices:{bucket:1,path:2},postModify:f}];for(let I=0;I<O.length;I++){const L=O[I],V=L.regex.exec(e);if(V){const P=V[L.indices.bucket];let T=V[L.indices.path];T||(T=""),r=new pr(P,T),L.postModify(r);break}}if(r==null)throw g2(e);return r}}class C2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function h(){return c===2}let f=!1;function y(...E){f||(f=!0,e.apply(null,E))}function m(E){i=setTimeout(()=>{i=null,n(g,h())},E)}function d(){o&&clearTimeout(o)}function g(E,..._){if(f){d();return}if(E){d(),y.call(null,E,..._);return}if(h()||l){d(),y.call(null,E,..._);return}r<64&&(r*=2);let O;c===1?(c=2,O=0):O=(r+Math.random())*1e3,m(O)}let C=!1;function S(E){C||(C=!0,d(),!f&&(i!==null?(E||(c=2),clearTimeout(i),m(0)):E||(c=1)))}return m(0),o=setTimeout(()=>{l=!0,S(!0)},t),S}function I2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(n){return n!==void 0}function A2(n){return typeof n=="object"&&!Array.isArray(n)}function gv(n){return typeof n=="string"||n instanceof String}function O1(n){return yv()&&n instanceof Blob}function yv(){return typeof Blob<"u"}function N1(n,e,t,r){if(r<e)throw ly(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ly(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function yI(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Oo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Oo||(Oo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,r,i,o,l,c,h,f,y,m,d=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=m,this.retry=d,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,S)=>{this.resolve_=C,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Th(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Oo.NO_ERROR,h=o.getStatus();if(!c||x2(h,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Oo.ABORT;r(!1,new Th(!1,null,y));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Th(f,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());b2(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=mv();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?gI():m2();l(h)}else{const h=p2();l(h)}};this.canceled_?t(!1,new Th(!1,null,!0)):this.backoffId_=S2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Th{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function R2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function P2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function N2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function L2(n,e,t,r,i,o,l=!0,c=!1){const h=yI(n.urlParams),f=n.url+h,y=Object.assign({},n.headers);return O2(y,e),R2(y,t),P2(y,o),N2(y,r),new k2(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M2(...n){const e=D2();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(yv())return new Blob(n);throw new Gt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function j2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(n){if(typeof atob>"u")throw E2("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gp{constructor(e,t){this.data=e,this.contentType=t||null}}function V2(n,e){switch(n){case fi.RAW:return new Gp(vI(e));case fi.BASE64:case fi.BASE64URL:return new Gp(_I(n,e));case fi.DATA_URL:return new Gp(U2(e),q2(e))}throw mv()}function vI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function B2(n){let e;try{e=decodeURIComponent(n)}catch{throw mu(fi.DATA_URL,"Malformed data URL.")}return vI(e)}function _I(n,e){switch(n){case fi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw mu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw mu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=F2(e)}catch(i){throw i.message.includes("polyfill")?i:mu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class wI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw mu(fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=z2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function U2(n){const e=new wI(n);return e.base64?_I(fi.BASE64,e.rest):B2(e.rest)}function q2(n){return new wI(n).contentType}function z2(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){let r=0,i="";O1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(O1(this.data_)){const r=this.data_,i=j2(r,e,t);return i===null?null:new xs(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new xs(r,!0)}}static getBlob(...e){if(yv()){const t=e.map(r=>r instanceof xs?r.data_:r);return new xs(M2.apply(null,t))}else{const t=e.map(l=>gv(l)?V2(fi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new xs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n){let e;try{e=JSON.parse(n)}catch{return null}return A2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function W2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function TI(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n,e){return e}class Un{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||$2}}let Ch=null;function K2(n){return!gv(n)||n.length<2?n:TI(n)}function CI(){if(Ch)return Ch;const n=[];n.push(new Un("bucket")),n.push(new Un("generation")),n.push(new Un("metageneration")),n.push(new Un("name","fullPath",!0));function e(o,l){return K2(l)}const t=new Un("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const i=new Un("size");return i.xform=r,n.push(i),n.push(new Un("timeCreated")),n.push(new Un("updated")),n.push(new Un("md5Hash",null,!0)),n.push(new Un("cacheControl",null,!0)),n.push(new Un("contentDisposition",null,!0)),n.push(new Un("contentEncoding",null,!0)),n.push(new Un("contentLanguage",null,!0)),n.push(new Un("contentType",null,!0)),n.push(new Un("metadata","customMetadata",!0)),Ch=n,Ch}function G2(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new pr(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function J2(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return G2(r,n),r}function SI(n,e,t){const r=EI(e);return r===null?null:J2(n,r,t)}function Q2(n,e,t,r){const i=EI(e);if(i===null||!gv(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const y=n.bucket,m=n.fullPath,d="/b/"+l(y)+"/o/"+l(m),g=Uf(d,t,r),C=yI({alt:"media",token:f});return g+C})[0]}function Y2(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class vv{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){if(!n)throw mv()}function X2(n,e){function t(r,i){const o=SI(n,i,e);return II(o!==null),o}return t}function Z2(n,e){function t(r,i){const o=SI(n,i,e);return II(o!==null),Q2(o,i,n.host,n._protocol)}return t}function bI(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=f2():i=h2():t.getStatus()===402?i=c2(n.bucket):t.getStatus()===403?i=d2(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function AI(n){const e=bI(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=u2(n.path)),o.serverResponse=i.serverResponse,o}return t}function eL(n,e,t){const r=e.fullServerUrl(),i=Uf(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new vv(i,o,Z2(n,t),l);return c.errorHandler=AI(e),c}function tL(n,e){const t=e.fullServerUrl(),r=Uf(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function l(h,f){}const c=new vv(r,i,l,o);return c.successCodes=[200,204],c.errorHandler=AI(e),c}function nL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function rL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=nL(null,e)),r}function iL(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let O="";for(let I=0;I<2;I++)O=O+Math.random().toString().slice(2);return O}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const f=rL(e,r,i),y=Y2(f,t),m="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,d=`\r
--`+h+"--",g=xs.getBlob(m,r,d);if(g===null)throw _2();const C={name:f.fullPath},S=Uf(o,n.host,n._protocol),E="POST",_=n.maxUploadRetryTime,w=new vv(S,E,X2(n,t),_);return w.urlParams=C,w.headers=l,w.body=g.uploadData(),w.errorHandler=bI(e),w}class sL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Zl("cannot .send() more than once");if(Gs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oL extends sL{initXhr(){this.xhr_.responseType="text"}}function _v(){return new oL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this._service=e,t instanceof pr?this._location=t:this._location=pr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jo(e,t)}get root(){const e=new pr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TI(this._location.path)}get storage(){return this._service}get parent(){const e=H2(this._location.path);if(e===null)return null;const t=new pr(this._location.bucket,e);return new jo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw T2(e)}}function aL(n,e,t){n._throwIfRoot("uploadBytes");const r=iL(n.storage,n._location,CI(),new xs(e,!0),t);return n.storage.makeRequestWithTokens(r,_v).then(i=>({metadata:i,ref:n}))}function lL(n){n._throwIfRoot("getDownloadURL");const e=eL(n.storage,n._location,CI());return n.storage.makeRequestWithTokens(e,_v).then(t=>{if(t===null)throw w2();return t})}function uL(n){n._throwIfRoot("deleteObject");const e=tL(n.storage,n._location);return n.storage.makeRequestWithTokens(e,_v)}function cL(n,e){const t=W2(n._location.path,e),r=new pr(n._location.bucket,t);return new jo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){return/^[A-Za-z]+:\/\//.test(n)}function fL(n,e){return new jo(n,e)}function xI(n,e){if(n instanceof wv){const t=n;if(t._bucket==null)throw v2();const r=new jo(t,t._bucket);return e!=null?xI(r,e):r}else return e!==void 0?cL(n,e):n}function dL(n,e){if(e&&hL(e)){if(n instanceof wv)return fL(n,e);throw ly("To use ref(service, url), the first argument must be a Storage instance.")}else return xI(n,e)}function L1(n,e){const t=e==null?void 0:e[mI];return t==null?null:pr.makeFromBucketSpec(t,n)}function pL(n,e,t,r={}){n.host=`${e}:${t}`;const i=Gs(e);i&&(Iy(`https://${n.host}/b`),by("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:xC(o,n.app.options.projectId))}class wv{constructor(e,t,r,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=pI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a2,this._maxUploadRetryTime=l2,this._requests=new Set,i!=null?this._bucket=pr.makeFromBucketSpec(i,this._host):this._bucket=L1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pr.makeFromBucketSpec(this._url,e):this._bucket=L1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){N1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){N1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jo(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new C2(gI());{const l=L2(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const D1="@firebase/storage",M1="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="storage";function mL(n,e,t){return n=Nt(n),aL(n,e,t)}function gL(n){return n=Nt(n),lL(n)}function yL(n){return n=Nt(n),uL(n)}function Jp(n,e){return n=Nt(n),dL(n,e)}function vL(n=ky(),e){n=Nt(n);const r=wf(n,kI).getImmediate({identifier:e}),i=IC("storage");return i&&_L(r,...i),r}function _L(n,e,t,r={}){pL(n,e,t,r)}function wL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wv(t,r,i,e,Bo)}function EL(){Lo(new Vs(kI,wL,"PUBLIC").setMultipleInstances(!0)),pi(D1,M1,""),pi(D1,M1,"esm2017")}EL();function Ev(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function RI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TL=RI,PI=new ju("auth","Firebase",RI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Ay("@firebase/auth");function CL(n,...e){sf.logLevel<=pt.WARN&&sf.warn(`Auth (${Bo}): ${n}`,...e)}function Lh(n,...e){sf.logLevel<=pt.ERROR&&sf.error(`Auth (${Bo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(n,...e){throw Tv(n,...e)}function yi(n,...e){return Tv(n,...e)}function OI(n,e,t){const r=Object.assign(Object.assign({},TL()),{[e]:t});return new ju("auth","Firebase",r).create(e,{appName:n.name})}function zi(n){return OI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PI.create(n,...e)}function Ze(n,e,...t){if(!n)throw Tv(e,...t)}function Bi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Lh(e),new Error(e)}function Ji(n,e){n||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SL(){return j1()==="http:"||j1()==="https:"}function j1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SL()||uk()||"connection"in navigator)?navigator.onLine:!0}function bL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ji(t>e,"Short delay should be less than long delay!"),this.isMobile=ok()||ck()}get(){return IL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n,e){Ji(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kL=new Hu(3e4,6e4);function Xi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ci(n,e,t,r,i={}){return LI(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Fu(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:h},o);return lk()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Gs(n.emulatorConfig.host)&&(f.credentials="include"),NI.fetch()(await DI(n,n.config.apiHost,t,c),f)})}async function LI(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},AL),e);try{const i=new PL(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Sh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Sh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Sh(n,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw OI(n,y,f);Yr(n,y)}}catch(i){if(i instanceof Ti)throw i;Yr(n,"network-request-failed",{message:String(i)})}}async function Wu(n,e,t,r,i={}){const o=await Ci(n,e,t,r,i);return"mfaPendingCredential"in o&&Yr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function DI(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?Cv(n.config,i):`${n.config.apiScheme}://${i}`;return xL.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function RL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),kL.get())})}}function Sh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=yi(n,e,r);return i.customData._tokenResponse=t,i}function F1(n){return n!==void 0&&n.enterprise!==void 0}class OL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NL(n,e){return Ci(n,"GET","/v2/recaptchaConfig",Xi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(n,e){return Ci(n,"POST","/v1/accounts:delete",e)}async function of(n,e){return Ci(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DL(n,e=!1){const t=Nt(n),r=await t.getIdToken(e),i=Sv(r);Ze(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:gu(Qp(i.auth_time)),issuedAtTime:gu(Qp(i.iat)),expirationTime:gu(Qp(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Qp(n){return Number(n)*1e3}function Sv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{const i=CC(t);return i?JSON.parse(i):(Lh("Failed to decode base64 JWT payload"),null)}catch(i){return Lh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function V1(n){const e=Sv(n);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ti&&ML(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ML({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Qa(n,of(t,{idToken:r}));Ze(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?MI(o.providerUserInfo):[],c=VL(n.providerData,l),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),y=h?f:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cy(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,m)}async function FL(n){const e=Nt(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function MI(n){return n.map(e=>{var{providerId:t}=e,r=Ev(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(n,e){const t=await LI(n,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await DI(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&Gs(n.emulatorConfig.host)&&(h.credentials="include"),NI.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UL(n,e){return Ci(n,"POST","/v2/accounts:revokeToken",Xi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ze(e.length!==0,"internal-error");const t=V1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await BL(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Va;return r&&(Ze(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ze(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ze(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Va,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n,e){Ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Qa(this,this.stsTokenManager.getToken(this.auth,e));return Ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DL(this,e)}reload(){return FL(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await Qa(this,LL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,c,h,f,y;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,g=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=t.photoURL)!==null&&l!==void 0?l:void 0,S=(c=t.tenantId)!==null&&c!==void 0?c:void 0,E=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,_=(f=t.createdAt)!==null&&f!==void 0?f:void 0,w=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:O,emailVerified:I,isAnonymous:L,providerData:V,stsTokenManager:P}=t;Ze(O&&P,e,"internal-error");const T=Va.fromJSON(this.name,P);Ze(typeof O=="string",e,"internal-error"),Is(m,e.name),Is(d,e.name),Ze(typeof I=="boolean",e,"internal-error"),Ze(typeof L=="boolean",e,"internal-error"),Is(g,e.name),Is(C,e.name),Is(S,e.name),Is(E,e.name),Is(_,e.name),Is(w,e.name);const b=new Gr({uid:O,auth:e,email:d,emailVerified:I,displayName:m,isAnonymous:L,photoURL:C,phoneNumber:g,tenantId:S,stsTokenManager:T,createdAt:_,lastLoginAt:w});return V&&Array.isArray(V)&&(b.providerData=V.map(A=>Object.assign({},A))),E&&(b._redirectEventId=E),b}static async _fromIdTokenResponse(e,t,r=!1){const i=new Va;i.updateFromServerResponse(t);const o=new Gr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await af(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ze(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?MI(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Va;c.updateFromIdToken(r);const h=new Gr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;function Ui(n){Ji(n instanceof Function,"Expected a class definition");let e=B1.get(n);return e?(Ji(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,B1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jI.type="NONE";const U1=jI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(n,e,t){return`firebase:${n}:${e}:${t}`}class Ba{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Dh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Dh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await of(this.auth,{idToken:e}).catch(()=>{});return t?Gr._fromGetAccountInfoResponse(this.auth,t,e):null}return Gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ba(Ui(U1),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Ui(U1);const l=Dh(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const y=await f._get(l);if(y){let m;if(typeof y=="string"){const d=await of(e,{idToken:y}).catch(()=>{});if(!d)break;m=await Gr._fromGetAccountInfoResponse(e,d,y)}else m=Gr._fromJSON(e,y);f!==o&&(c=m),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ba(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Ba(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zI(e))return"Blackberry";if(HI(e))return"Webos";if(VI(e))return"Safari";if((e.includes("chrome/")||BI(e))&&!e.includes("edge/"))return"Chrome";if(qI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FI(n=Mn()){return/firefox\//i.test(n)}function VI(n=Mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BI(n=Mn()){return/crios\//i.test(n)}function UI(n=Mn()){return/iemobile/i.test(n)}function qI(n=Mn()){return/android/i.test(n)}function zI(n=Mn()){return/blackberry/i.test(n)}function HI(n=Mn()){return/webos/i.test(n)}function Iv(n=Mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qL(n=Mn()){var e;return Iv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zL(){return hk()&&document.documentMode===10}function WI(n=Mn()){return Iv(n)||qI(n)||HI(n)||zI(n)||/windows phone/i.test(n)||UI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n,e=[]){let t;switch(n){case"Browser":t=q1(Mn());break;case"Worker":t=`${q1(Mn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(n,e={}){return Ci(n,"GET","/v2/passwordPolicy",Xi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=6;class KL{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:$L,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z1(this),this.idTokenSubscription=new z1(this),this.beforeStateQueue=new HL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await of(this,{idToken:e}),r=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(zi(this));const t=e?Nt(e):null;return t&&Ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WL(this),t=new KL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ui(e)||this._popupRedirectResolver;Ze(t,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$I(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ys(n){return Nt(n)}class z1{constructor(e){this.auth=e,this.observer=null,this.addObserver=_k(t=>this.observer=t)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JL(n){qf=n}function KI(n){return qf.loadJS(n)}function QL(){return qf.recaptchaEnterpriseScript}function YL(){return qf.gapiScript}function XL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZL{constructor(){this.enterprise=new eD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tD="recaptcha-enterprise",GI="NO_RECAPTCHA";class nD{constructor(e){this.type=tD,this.auth=Ys(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{NL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new OL(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;F1(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(GI)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZL().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&F1(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=QL();h.length!==0&&(h+=c),KI(h).then(()=>{i(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function H1(n,e,t,r=!1,i=!1){const o=new nD(n);let l;if(i)l=GI;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function lf(n,e,t,r,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await H1(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await H1(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n,e){const t=wf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(No(o,e??{}))return i;Yr(i,"already-initialized")}return t.initialize({options:e})}function iD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ui);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sD(n,e,t){const r=Ys(n);Ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=JI(e),{host:l,port:c}=oD(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},y=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ze(No(f,r.config.emulator)&&No(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Gs(l)?(Iy(`${o}//${l}${h}`),by("Auth",!0)):aD()}function JI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oD(n){const e=JI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:W1(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:W1(l)}}}function W1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function lD(n,e){return Ci(n,"POST","/v1/accounts:update",e)}async function uD(n,e){return Ci(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(n,e){return Wu(n,"POST","/v1/accounts:signInWithPassword",Xi(n,e))}async function hD(n,e){return Ci(n,"POST","/v1/accounts:sendOobCode",Xi(n,e))}async function fD(n,e){return hD(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(n,e){return Wu(n,"POST","/v1/accounts:signInWithEmailLink",Xi(n,e))}async function pD(n,e){return Wu(n,"POST","/v1/accounts:signInWithEmailLink",Xi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends bv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new xu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,t,"signInWithPassword",cD);case"emailLink":return dD(e,{email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,r,"signUpPassword",uD);case"emailLink":return pD(e,{idToken:t,email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n,e){return Wu(n,"POST","/v1/accounts:signInWithIdp",Xi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="http://localhost";class Fo extends bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Ev(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Fo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ua(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ua(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ua(e,t)}buildRequest(){const e={requestUri:mD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yD(n){const e=nu(ru(n)).link,t=e?nu(ru(e)).deep_link_id:null,r=nu(ru(n)).deep_link_id;return(r?nu(ru(r)).link:null)||r||t||e||n}class Av{constructor(e){var t,r,i,o,l,c;const h=nu(ru(e)),f=(t=h.apiKey)!==null&&t!==void 0?t:null,y=(r=h.oobCode)!==null&&r!==void 0?r:null,m=gD((i=h.mode)!==null&&i!==void 0?i:null);Ze(f&&y&&m,"argument-error"),this.apiKey=f,this.operation=m,this.code=y,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=yD(e);try{return new Av(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.providerId=rl.PROVIDER_ID}static credential(e,t){return xu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Av.parseLink(t);return Ze(r,"argument-error"),xu._fromEmailAndCode(e,r.code,r.tenantId)}}rl.PROVIDER_ID="password";rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends QI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends $u{constructor(){super("facebook.com")}static credential(e){return Fo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fo._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Rs.credential(t,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends $u{constructor(){super("github.com")}static credential(e){return Fo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends $u{constructor(){super("twitter.com")}static credential(e,t){return Fo._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Os.credential(t,r)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(n,e){return Wu(n,"POST","/v1/accounts:signUp",Xi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Gr._fromIdTokenResponse(e,r,i),l=$1(r);return new Vo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=$1(r);return new Vo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function $1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends Ti{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new uf(e,t,r,i)}}function YI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(n,o,e,r):o})}async function _D(n,e,t=!1){const r=await Qa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(n,e,t=!1){const{auth:r}=n;if(hr(r.app))return Promise.reject(zi(r));const i="reauthenticate";try{const o=await Qa(n,YI(r,i,e,n),t);Ze(o.idToken,r,"internal-error");const l=Sv(o.idToken);Ze(l,r,"internal-error");const{sub:c}=l;return Ze(n.uid===c,r,"user-mismatch"),Vo._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Yr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(n,e,t=!1){if(hr(n.app))return Promise.reject(zi(n));const r="signIn",i=await YI(n,r,e),o=await Vo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function ED(n,e){return XI(Ys(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(n){const e=Ys(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TD(n,e,t){const r=Ys(n);await lf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",fD)}async function CD(n,e,t){if(hr(n.app))return Promise.reject(zi(n));const r=Ys(n),l=await lf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vD).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&ZI(n),h}),c=await Vo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function K1(n,e,t){return hr(n.app)?Promise.reject(zi(n)):ED(Nt(n),rl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZI(n),r})}function SD(n,e){return ID(Nt(n),null,e)}async function ID(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(o.password=t);const l=await Qa(n,lD(r,o));await n._updateTokensIfNecessary(l,!0)}function bD(n,e,t,r){return Nt(n).onIdTokenChanged(e,t,r)}function AD(n,e,t){return Nt(n).beforeAuthStateChanged(e,t)}function Yp(n,e,t,r){return Nt(n).onAuthStateChanged(e,t,r)}function G1(n){return Nt(n).signOut()}async function xD(n){return Nt(n).delete()}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=1e3,RD=10;class tb extends eb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);zL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tb.type="LOCAL";const PD=tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends eb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nb.type="SESSION";const rb=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await OD(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=xv("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(m){const d=m;if(d.data.eventId===f)switch(d.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(d.data.response);break;default:clearTimeout(y),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function LD(n){vi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function DD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jD(){return ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firebaseLocalStorageDb",FD=1,hf="firebaseLocalStorage",ob="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hf(n,e){return n.transaction([hf],e?"readwrite":"readonly").objectStore(hf)}function VD(){const n=indexedDB.deleteDatabase(sb);return new Ku(n).toPromise()}function hy(){const n=indexedDB.open(sb,FD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hf,{keyPath:ob})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hf)?e(r):(r.close(),await VD(),e(await hy()))})})}async function J1(n,e,t){const r=Hf(n,!0).put({[ob]:e,value:t});return new Ku(r).toPromise()}async function BD(n,e){const t=Hf(n,!1).get(e),r=await new Ku(t).toPromise();return r===void 0?null:r.value}function Q1(n,e){const t=Hf(n,!0).delete(e);return new Ku(t).toPromise()}const UD=800,qD=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(jD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await DD(),!this.activeServiceWorker)return;this.sender=new ND(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hy();return await J1(e,cf,"1"),await Q1(e,cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>J1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>BD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Q1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Hf(i,!1).getAll();return new Ku(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const zD=ab;new Hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(n,e){return e?Ui(e):(Ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WD(n){return XI(n.auth,new kv(n),n.bypassAuthState)}function $D(n){const{auth:e,user:t}=n;return Ze(t,e,"internal-error"),wD(t,new kv(n),n.bypassAuthState)}async function KD(n){const{auth:e,user:t}=n;return Ze(t,e,"internal-error"),_D(t,new kv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WD;case"linkViaPopup":case"linkViaRedirect":return KD;case"reauthViaPopup":case"reauthViaRedirect":return $D;default:Yr(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new Hu(2e3,1e4);class ja extends lb{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=xv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GD.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="pendingRedirect",Mh=new Map;class QD extends lb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const r=await YD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YD(n,e){const t=eM(e),r=ZD(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function XD(n,e){Mh.set(n._key(),e)}function ZD(n){return Ui(n._redirectPersistence)}function eM(n){return Dh(JD,n.config.apiKey,n.name)}async function tM(n,e,t=!1){if(hr(n.app))return Promise.reject(zi(n));const r=Ys(n),i=HD(r,e),l=await new QD(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=10*60*1e3;class rM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ub(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y1(e))}saveEventToCache(e){this.cachedEventUids.add(Y1(e)),this.lastProcessedEventTime=Date.now()}}function Y1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ub({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ub(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(n,e={}){return Ci(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aM=/^https?/;async function lM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sM(n);for(const t of e)try{if(uM(t))return}catch{}Yr(n,"unauthorized-domain")}function uM(n){const e=uy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!aM.test(t))return!1;if(oM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new Hu(3e4,6e4);function X1(){const n=vi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hM(n){return new Promise((e,t)=>{var r,i,o;function l(){X1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X1(),t(yi(n,"network-request-failed"))},timeout:cM.get()})}if(!((i=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=vi().gapi)===null||o===void 0)&&o.load)l();else{const c=XL("iframefcb");return vi()[c]=()=>{gapi.load?l():t(yi(n,"network-request-failed"))},KI(`${YL()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw jh=null,e})}let jh=null;function fM(n){return jh=jh||hM(n),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new Hu(5e3,15e3),pM="__/auth/iframe",mM="emulator/auth/iframe",gM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vM(n){const e=n.config;Ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cv(e,mM):`https://${n.config.authDomain}/${pM}`,r={apiKey:e.apiKey,appName:n.name,v:Bo},i=yM.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Fu(r).slice(1)}`}async function _M(n){const e=await fM(n),t=vi().gapi;return Ze(t,n,"internal-error"),e.open({where:document.body,url:vM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gM,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=yi(n,"network-request-failed"),c=vi().setTimeout(()=>{o(l)},dM.get());function h(){vi().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EM=500,TM=600,CM="_blank",SM="http://localhost";class Z1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IM(n,e,t,r=EM,i=TM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},wM),{width:r.toString(),height:i.toString(),top:o,left:l}),f=Mn().toLowerCase();t&&(c=BI(f)?CM:t),FI(f)&&(e=e||SM,h.scrollbars="yes");const y=Object.entries(h).reduce((d,[g,C])=>`${d}${g}=${C},`,"");if(qL(f)&&c!=="_self")return bM(e||"",c),new Z1(null);const m=window.open(e||"",c,y);Ze(m,n,"popup-blocked");try{m.focus()}catch{}return new Z1(m)}function bM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="__/auth/handler",xM="emulator/auth/handler",kM=encodeURIComponent("fac");async function eE(n,e,t,r,i,o){Ze(n.config.authDomain,n,"auth-domain-config-required"),Ze(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bo,eventId:i};if(e instanceof QI){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",vk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,m]of Object.entries({}))l[y]=m}if(e instanceof $u){const y=e.getScopes().filter(m=>m!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await n._getAppCheckToken(),f=h?`#${kM}=${encodeURIComponent(h)}`:"";return`${RM(n)}?${Fu(c).slice(1)}${f}`}function RM({config:n}){return n.emulator?Cv(n,xM):`https://${n.authDomain}/${AM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="webStorageSupport";class PM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rb,this._completeRedirectFn=tM,this._overrideRedirectResult=XD}async _openPopup(e,t,r,i){var o;Ji((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await eE(e,t,r,uy(),i);return IM(e,l,xv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await eE(e,t,r,uy(),i);return LD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ji(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _M(e),r=new rM(e);return t.register("authEvent",i=>(Ze(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xp,{type:Xp},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Xp];l!==void 0&&t(!!l),Yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WI()||VI()||Iv()}}const OM=PM;var tE="@firebase/auth",nE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DM(n){Lo(new Vs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ze(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$I(n)},f=new GL(r,i,o,h);return iD(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lo(new Vs("auth-internal",e=>{const t=Ys(e.getProvider("auth").getImmediate());return(r=>new NM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(tE,nE,LM(n)),pi(tE,nE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=5*60,jM=AC("authIdTokenMaxAge")||MM;let rE=null;const FM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>jM)return;const i=t==null?void 0:t.token;rE!==i&&(rE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Fh(n=ky()){const e=wf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rD(n,{popupRedirectResolver:OM,persistence:[zD,PD,rb]}),r=AC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=FM(o.toString());AD(t,l,()=>l(t.currentUser)),bD(t,c=>l(c))}}const i=SC("auth");return i&&sD(t,`http://${i}`),t}function VM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=yi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",VM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DM("Browser");const BM={apiKey:"AIzaSyAoReJ73uMcZ6FahopnVZmfeMKld4jiIgY",authDomain:"viridian-3afda.firebaseapp.com",projectId:"viridian-3afda",storageBucket:"viridian-3afda.firebasestorage.app",messagingSenderId:"156480615416",appId:"1:156480615416:web:acda86fcfa52a332e51c0d"},cb=PC(BM),UM=vL(),qM=NN(cb),zM=Fh(cb);class HM{constructor(){le(this,"doNotInclude",["render","forceUpdate","setState"])}bind(e){var r;let t=Object.getPrototypeOf(e);for(;t&&t!==Object.prototype;){const i=Object.getOwnPropertyNames(t).filter(o=>typeof t[o]=="function"&&o!=="constructor");for(let o of i)this.doNotInclude.includes(o)||(e[o]=(r=e[o])==null?void 0:r.bind(e));t=Object.getPrototypeOf(t)}}setDoNotIncludeList(e){this.doNotInclude=e}leaveOut(e){this.doNotInclude.push(e)}include(e){this.doNotInclude=this.doNotInclude.filter(t=>t!==e)}}let zn=new HM;class Hi{constructor(){le(this,"list",[]);zn.bind(this)}setList(e){e=e.filter(t=>t!==void 0),this.list=e}getList(){return this.list}subscribe(e){e&&this.list.push(e)}unsubscribe(e){this.list=this.list.filter(t=>t!==e)}run(...e){for(let t of this.list)t&&t(...e)}}var eu={},iE;function WM(){if(iE)return eu;iE=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.parse=l,eu.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function l(d,g){const C=new o,S=d.length;if(S<2)return C;const E=(g==null?void 0:g.decode)||y;let _=0;do{const w=d.indexOf("=",_);if(w===-1)break;const O=d.indexOf(";",_),I=O===-1?S:O;if(w>I){_=d.lastIndexOf(";",w-1)+1;continue}const L=c(d,_,w),V=h(d,w,L),P=d.slice(L,V);if(C[P]===void 0){let T=c(d,w+1,I),b=h(d,I,T);const A=E(d.slice(T,b));C[P]=A}_=I+1}while(_<S);return C}function c(d,g,C){do{const S=d.charCodeAt(g);if(S!==32&&S!==9)return g}while(++g<C);return C}function h(d,g,C){for(;g>C;){const S=d.charCodeAt(--g);if(S!==32&&S!==9)return g+1}return C}function f(d,g,C){const S=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(d))throw new TypeError(`argument name is invalid: ${d}`);const E=S(g);if(!e.test(E))throw new TypeError(`argument val is invalid: ${g}`);let _=d+"="+E;if(!C)return _;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);_+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);_+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);_+="; Path="+C.path}if(C.expires){if(!m(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);_+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(_+="; HttpOnly"),C.secure&&(_+="; Secure"),C.partitioned&&(_+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return _}function y(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function m(d){return i.call(d)==="[object Date]"}return eu}WM();var sE="popstate";function $M(n={}){function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return fy("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ku(i)}return GM(e,t,null,n)}function Ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KM(){return Math.random().toString(36).substring(2,10)}function oE(n,e){return{usr:n.state,key:n.key,idx:e}}function fy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?il(e):e,state:t,key:e&&e.key||r||KM()}}function ku({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function GM(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c="POP",h=null,f=y();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function y(){return(l.state||{idx:null}).idx}function m(){c="POP";let E=y(),_=E==null?null:E-f;f=E,h&&h({action:c,location:S.location,delta:_})}function d(E,_){c="PUSH";let w=fy(S.location,E,_);f=y()+1;let O=oE(w,f),I=S.createHref(w);try{l.pushState(O,"",I)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(I)}o&&h&&h({action:c,location:S.location,delta:1})}function g(E,_){c="REPLACE";let w=fy(S.location,E,_);f=y();let O=oE(w,f),I=S.createHref(w);l.replaceState(O,"",I),o&&h&&h({action:c,location:S.location,delta:0})}function C(E){return JM(E)}let S={get action(){return c},get location(){return n(i,l)},listen(E){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(sE,m),h=E,()=>{i.removeEventListener(sE,m),h=null}},createHref(E){return e(i,E)},createURL:C,encodeLocation(E){let _=C(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:d,replace:g,go(E){return l.go(E)}};return S}function JM(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ku(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function hb(n,e,t="/"){return QM(n,e,t,!1)}function QM(n,e,t,r){let i=typeof e=="string"?il(e):e,o=Qi(i.pathname||"/",t);if(o==null)return null;let l=fb(n);YM(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=lj(o);c=oj(l[h],f,r)}return c}function fb(n,e=[],t=[],r=""){let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Ht(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let f=Wi([r,h.relativePath]),y=t.concat(h);o.children&&o.children.length>0&&(Ht(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),fb(o.children,e,y,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:ij(f,o.index),routesMeta:y})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of db(o.path))i(o,l,h)}),e}function db(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=db(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function YM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sj(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var XM=/^:[\w-]+$/,ZM=3,ej=2,tj=1,nj=10,rj=-2,aE=n=>n==="*";function ij(n,e){let t=n.split("/"),r=t.length;return t.some(aE)&&(r+=rj),e&&(r+=ej),t.filter(i=>!aE(i)).reduce((i,o)=>i+(XM.test(o)?ZM:o===""?tj:nj),r)}function sj(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function oj(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",m=ff({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},y),d=h.route;if(!m&&f&&t&&!r[r.length-1].route.index&&(m=ff({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Wi([o,m.pathname]),pathnameBase:fj(Wi([o,m.pathnameBase])),route:d}),m.pathnameBase!=="/"&&(o=Wi([o,m.pathnameBase]))}return l}function ff(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=aj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:y,isOptional:m},d)=>{if(y==="*"){let C=c[d]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const g=c[d];return m&&!g?f[y]=void 0:f[y]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function aj(n,e=!1,t=!0){wi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function uj(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?il(n):n;return{pathname:t?t.startsWith("/")?t:cj(t,e):e,search:dj(r),hash:pj(i)}}function cj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Zp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pb(n){let e=hj(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function mb(n,e,t,r=!1){let i;typeof n=="string"?i=il(n):(i={...n},Ht(!i.pathname||!i.pathname.includes("?"),Zp("?","pathname","search",i)),Ht(!i.pathname||!i.pathname.includes("#"),Zp("#","pathname","hash",i)),Ht(!i.search||!i.search.includes("#"),Zp("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let d=l.split("/");for(;d[0]==="..";)d.shift(),m-=1;i.pathname=d.join("/")}c=m>=0?e[m]:"/"}let h=uj(i,c),f=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||y)&&(h.pathname+="/"),h}var Wi=n=>n.join("/").replace(/\/\/+/g,"/"),fj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var gb=["POST","PUT","PATCH","DELETE"];new Set(gb);var gj=["GET",...gb];new Set(gj);var sl=ye.createContext(null);sl.displayName="DataRouter";var Wf=ye.createContext(null);Wf.displayName="DataRouterState";var yb=ye.createContext({isTransitioning:!1});yb.displayName="ViewTransition";var yj=ye.createContext(new Map);yj.displayName="Fetchers";var vj=ye.createContext(null);vj.displayName="Await";var Si=ye.createContext(null);Si.displayName="Navigation";var Gu=ye.createContext(null);Gu.displayName="Location";var Zi=ye.createContext({outlet:null,matches:[],isDataRoute:!1});Zi.displayName="Route";var Rv=ye.createContext(null);Rv.displayName="RouteError";function _j(n,{relative:e}={}){Ht(Ju(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ye.useContext(Si),{hash:i,pathname:o,search:l}=Qu(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Wi([t,o])),r.createHref({pathname:c,search:l,hash:i})}function Ju(){return ye.useContext(Gu)!=null}function zo(){return Ht(Ju(),"useLocation() may be used only in the context of a <Router> component."),ye.useContext(Gu).location}var vb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _b(n){ye.useContext(Si).static||ye.useLayoutEffect(n)}function wj(){let{isDataRoute:n}=ye.useContext(Zi);return n?Nj():Ej()}function Ej(){Ht(Ju(),"useNavigate() may be used only in the context of a <Router> component.");let n=ye.useContext(sl),{basename:e,navigator:t}=ye.useContext(Si),{matches:r}=ye.useContext(Zi),{pathname:i}=zo(),o=JSON.stringify(pb(r)),l=ye.useRef(!1);return _b(()=>{l.current=!0}),ye.useCallback((h,f={})=>{if(wi(l.current,vb),!l.current)return;if(typeof h=="number"){t.go(h);return}let y=mb(h,JSON.parse(o),i,f.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Wi([e,y.pathname])),(f.replace?t.replace:t.push)(y,f.state,f)},[e,t,o,i,n])}ye.createContext(null);function Qu(n,{relative:e}={}){let{matches:t}=ye.useContext(Zi),{pathname:r}=zo(),i=JSON.stringify(pb(t));return ye.useMemo(()=>mb(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Tj(n,e){return wb(n,e)}function wb(n,e,t,r){var _;Ht(Ju(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=ye.useContext(Si),{matches:o}=ye.useContext(Zi),l=o[o.length-1],c=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",y=l&&l.route;{let w=y&&y.path||"";Eb(h,!y||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let m=zo(),d;if(e){let w=typeof e=="string"?il(e):e;Ht(f==="/"||((_=w.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${w.pathname}" was given in the \`location\` prop.`),d=w}else d=m;let g=d.pathname||"/",C=g;if(f!=="/"){let w=f.replace(/^\//,"").split("/");C="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=hb(n,{pathname:C});wi(y||S!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),wi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Aj(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Wi([f,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Wi([f,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,t,r);return e&&E?ye.createElement(Gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},E):E}function Cj(){let n=Oj(),e=mj(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=ye.createElement(ye.Fragment,null,ye.createElement("p",null,"💿 Hey developer 👋"),ye.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ye.createElement("code",{style:o},"ErrorBoundary")," or"," ",ye.createElement("code",{style:o},"errorElement")," prop on your route.")),ye.createElement(ye.Fragment,null,ye.createElement("h2",null,"Unexpected Application Error!"),ye.createElement("h3",{style:{fontStyle:"italic"}},e),t?ye.createElement("pre",{style:i},t):null,l)}var Sj=ye.createElement(Cj,null),Ij=class extends ye.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?ye.createElement(Zi.Provider,{value:this.props.routeContext},ye.createElement(Rv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bj({routeContext:n,match:e,children:t}){let r=ye.useContext(sl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ye.createElement(Zi.Provider,{value:n},t)}function Aj(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let h=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Ht(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:y,errors:m}=t,d=f.route.loader&&!y.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||d){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((h,f,y)=>{let m,d=!1,g=null,C=null;t&&(m=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||Sj,l&&(c<0&&y===0?(Eb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,C=null):c===y&&(d=!0,C=f.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,y+1)),E=()=>{let _;return m?_=g:d?_=C:f.route.Component?_=ye.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,ye.createElement(bj,{match:f,routeContext:{outlet:h,matches:S,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?ye.createElement(Ij,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}function Pv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xj(n){let e=ye.useContext(sl);return Ht(e,Pv(n)),e}function kj(n){let e=ye.useContext(Wf);return Ht(e,Pv(n)),e}function Rj(n){let e=ye.useContext(Zi);return Ht(e,Pv(n)),e}function Ov(n){let e=Rj(n),t=e.matches[e.matches.length-1];return Ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Pj(){return Ov("useRouteId")}function Oj(){var r;let n=ye.useContext(Rv),e=kj("useRouteError"),t=Ov("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Nj(){let{router:n}=xj("useNavigate"),e=Ov("useNavigate"),t=ye.useRef(!1);return _b(()=>{t.current=!0}),ye.useCallback(async(i,o={})=>{wi(t.current,vb),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var lE={};function Eb(n,e,t){!e&&!lE[n]&&(lE[n]=!0,wi(!1,t))}ye.memo(Lj);function Lj({routes:n,future:e,state:t}){return wb(n,void 0,t,e)}function bs(n){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dj({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){Ht(!Ju(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=ye.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof t=="string"&&(t=il(t));let{pathname:h="/",search:f="",hash:y="",state:m=null,key:d="default"}=t,g=ye.useMemo(()=>{let C=Qi(h,l);return C==null?null:{location:{pathname:C,search:f,hash:y,state:m,key:d},navigationType:r}},[l,h,f,y,m,d,r]);return wi(g!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:ye.createElement(Si.Provider,{value:c},ye.createElement(Gu.Provider,{children:e,value:g}))}function uE({children:n,location:e}){return Tj(dy(n),e)}function dy(n,e=[]){let t=[];return ye.Children.forEach(n,(r,i)=>{if(!ye.isValidElement(r))return;let o=[...e,i];if(r.type===ye.Fragment){t.push.apply(t,dy(r.props.children,o));return}Ht(r.type===bs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=dy(r.props.children,o)),t.push(l)}),t}var Vh="get",Bh="application/x-www-form-urlencoded";function $f(n){return n!=null&&typeof n.tagName=="string"}function Mj(n){return $f(n)&&n.tagName.toLowerCase()==="button"}function jj(n){return $f(n)&&n.tagName.toLowerCase()==="form"}function Fj(n){return $f(n)&&n.tagName.toLowerCase()==="input"}function Vj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Bj(n,e){return n.button===0&&(!e||e==="_self")&&!Vj(n)}var Ih=null;function Uj(){if(Ih===null)try{new FormData(document.createElement("form"),0),Ih=!1}catch{Ih=!0}return Ih}var qj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function em(n){return n!=null&&!qj.has(n)?(wi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bh}"`),null):n}function zj(n,e){let t,r,i,o,l;if(jj(n)){let c=n.getAttribute("action");r=c?Qi(c,e):null,t=n.getAttribute("method")||Vh,i=em(n.getAttribute("enctype"))||Bh,o=new FormData(n)}else if(Mj(n)||Fj(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?Qi(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Vh,i=em(n.getAttribute("formenctype"))||em(c.getAttribute("enctype"))||Bh,o=new FormData(c,n),!Uj()){let{name:f,type:y,value:m}=n;if(y==="image"){let d=f?`${f}.`:"";o.append(`${d}x`,"0"),o.append(`${d}y`,"0")}else f&&o.append(f,m)}}else{if($f(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vh,r=null,i=Bh,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:l}}function Nv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Hj(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function $j(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await Hj(o,t);return l.links?l.links():[]}return[]}));return Qj(r.flat(1).filter(Wj).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cE(n,e,t,r,i,o){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,c=(h,f)=>{var y;return t[f].pathname!==h.pathname||((y=t[f].route.path)==null?void 0:y.endsWith("*"))&&t[f].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,f)=>l(h,f)||c(h,f)):o==="data"?e.filter((h,f)=>{var m;let y=r.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let d=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Kj(n,e,{includeHydrateFallback:t}={}){return Gj(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Gj(n){return[...new Set(n)]}function Jj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Qj(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(Jj(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Yj=new Set([100,101,204,205]);function Xj(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Qi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Tb(){let n=ye.useContext(sl);return Nv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Zj(){let n=ye.useContext(Wf);return Nv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Lv=ye.createContext(void 0);Lv.displayName="FrameworkContext";function Cb(){let n=ye.useContext(Lv);return Nv(n,"You must render this element inside a <HydratedRouter> element"),n}function eF(n,e){let t=ye.useContext(Lv),[r,i]=ye.useState(!1),[o,l]=ye.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:y,onTouchStart:m}=e,d=ye.useRef(null);ye.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let S=_=>{_.forEach(w=>{l(w.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return d.current&&E.observe(d.current),()=>{E.disconnect()}}},[n]),ye.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let g=()=>{i(!0)},C=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,d,{}]:[o,d,{onFocus:tu(c,g),onBlur:tu(h,C),onMouseEnter:tu(f,g),onMouseLeave:tu(y,C),onTouchStart:tu(m,g)}]:[!1,d,{}]}function tu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tF({page:n,...e}){let{router:t}=Tb(),r=ye.useMemo(()=>hb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?ye.createElement(rF,{page:n,matches:r,...e}):null}function nF(n){let{manifest:e,routeModules:t}=Cb(),[r,i]=ye.useState([]);return ye.useEffect(()=>{let o=!1;return $j(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),r}function rF({page:n,matches:e,...t}){let r=zo(),{manifest:i,routeModules:o}=Cb(),{basename:l}=Tb(),{loaderData:c,matches:h}=Zj(),f=ye.useMemo(()=>cE(n,e,h,i,r,"data"),[n,e,h,i,r]),y=ye.useMemo(()=>cE(n,e,h,i,r,"assets"),[n,e,h,i,r]),m=ye.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,S=!1;if(e.forEach(_=>{var O;let w=i.routes[_.route.id];!w||!w.hasLoader||(!f.some(I=>I.route.id===_.route.id)&&_.route.id in c&&((O=o[_.route.id])!=null&&O.shouldRevalidate)||w.hasClientLoader?S=!0:C.add(_.route.id))}),C.size===0)return[];let E=Xj(n,l);return S&&C.size>0&&E.searchParams.set("_routes",e.filter(_=>C.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[l,c,r,i,f,e,n,o]),d=ye.useMemo(()=>Kj(y,i),[y,i]),g=nF(y);return ye.createElement(ye.Fragment,null,m.map(C=>ye.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),d.map(C=>ye.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),g.map(({key:C,link:S})=>ye.createElement("link",{key:C,...S})))}function iF(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sb&&(window.__reactRouterVersion="7.6.2")}catch{}function sF({basename:n,children:e,window:t}){let r=ye.useRef();r.current==null&&(r.current=$M({window:t,v5Compat:!0}));let i=r.current,[o,l]=ye.useState({action:i.action,location:i.location}),c=ye.useCallback(h=>{ye.startTransition(()=>l(h))},[l]);return ye.useLayoutEffect(()=>i.listen(c),[i,c]),ye.createElement(Dj,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var Ib=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cn=ye.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:c,target:h,to:f,preventScrollReset:y,viewTransition:m,...d},g){let{basename:C}=ye.useContext(Si),S=typeof f=="string"&&Ib.test(f),E,_=!1;if(typeof f=="string"&&S&&(E=f,Sb))try{let b=new URL(window.location.href),A=f.startsWith("//")?new URL(b.protocol+f):new URL(f),x=Qi(A.pathname,C);A.origin===b.origin&&x!=null?f=x+A.search+A.hash:_=!0}catch{wi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=_j(f,{relative:i}),[O,I,L]=eF(r,d),V=uF(f,{replace:l,state:c,target:h,preventScrollReset:y,relative:i,viewTransition:m});function P(b){e&&e(b),b.defaultPrevented||V(b)}let T=ye.createElement("a",{...d,...L,href:E||w,onClick:_||o?e:P,ref:iF(g,I),target:h,"data-discover":!S&&t==="render"?"true":void 0});return O&&!S?ye.createElement(ye.Fragment,null,T,ye.createElement(tF,{page:w})):T});cn.displayName="Link";var oF=ye.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:c,children:h,...f},y){let m=Qu(l,{relative:f.relative}),d=zo(),g=ye.useContext(Wf),{navigator:C,basename:S}=ye.useContext(Si),E=g!=null&&pF(m)&&c===!0,_=C.encodeLocation?C.encodeLocation(m).pathname:m.pathname,w=d.pathname,O=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(w=w.toLowerCase(),O=O?O.toLowerCase():null,_=_.toLowerCase()),O&&S&&(O=Qi(O,S)||O);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let L=w===_||!i&&w.startsWith(_)&&w.charAt(I)==="/",V=O!=null&&(O===_||!i&&O.startsWith(_)&&O.charAt(_.length)==="/"),P={isActive:L,isPending:V,isTransitioning:E},T=L?e:void 0,b;typeof r=="function"?b=r(P):b=[r,L?"active":null,V?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(P):o;return ye.createElement(cn,{...f,"aria-current":T,className:b,ref:y,style:A,to:l,viewTransition:c},typeof h=="function"?h(P):h)});oF.displayName="NavLink";var aF=ye.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:l=Vh,action:c,onSubmit:h,relative:f,preventScrollReset:y,viewTransition:m,...d},g)=>{let C=fF(),S=dF(c,{relative:f}),E=l.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&Ib.test(c),w=O=>{if(h&&h(O),O.defaultPrevented)return;O.preventDefault();let I=O.nativeEvent.submitter,L=(I==null?void 0:I.getAttribute("formmethod"))||l;C(I||O.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:i,state:o,relative:f,preventScrollReset:y,viewTransition:m})};return ye.createElement("form",{ref:g,method:E,action:S,onSubmit:r?h:w,...d,"data-discover":!_&&n==="render"?"true":void 0})});aF.displayName="Form";function lF(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bb(n){let e=ye.useContext(sl);return Ht(e,lF(n)),e}function uF(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:l}={}){let c=wj(),h=zo(),f=Qu(n,{relative:o});return ye.useCallback(y=>{if(Bj(y,e)){y.preventDefault();let m=t!==void 0?t:ku(h)===ku(f);c(n,{replace:m,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[h,c,f,t,r,e,n,i,o,l])}var cF=0,hF=()=>`__${String(++cF)}__`;function fF(){let{router:n}=bb("useSubmit"),{basename:e}=ye.useContext(Si),t=Pj();return ye.useCallback(async(r,i={})=>{let{action:o,method:l,encType:c,formData:h,body:f}=zj(r,e);if(i.navigate===!1){let y=i.fetcherKey||hF();await n.fetch(y,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:f,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:f,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function dF(n,{relative:e}={}){let{basename:t}=ye.useContext(Si),r=ye.useContext(Zi);Ht(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Qu(n||".",{relative:e})},l=zo();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(y=>y==="")){c.delete("index"),h.filter(m=>m).forEach(m=>c.append("index",m));let y=c.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Wi([t,o.pathname])),ku(o)}function pF(n,e={}){let t=ye.useContext(yb);Ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bb("useViewTransitionState"),i=Qu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Qi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Qi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ff(i.pathname,l)!=null||ff(i.pathname,o)!=null}[...Yj];var mF=Sy();const gF=Cy(mF);class yF{constructor(e){zn.bind(this),this.props={...e},this.content=e.content||"",this.type="div"}setHtmlType(e){this.type=e}getHtmlType(){return this.type}setProp(e,t){this.props[e]=t}setProps(e){this.props={...e},e.content&&(this.content=e.content)}updateProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}addProps(e){this.props={...this.props,...e},e.content&&(this.content=e.content)}getProps(){return this.props}getProp(e){return this.props[e]}setStyle(e){this.props.style=e}updateStyle(e){this.props.style={...this.props.style,...e}}getStyle(){return this.props.style}setClass(e){this.props.className=e}getClass(){return this.props.className}setOnChange(e){this.props.onChange=e}setOnClick(e){this.props.onClick=e}getOnClick(){return this.props.onClick}setContent(e){this.content=e}getContent(){return this.content}getHtml(e){let{content:t,props:r}=e,i=e==null?void 0:e.type;t&&(this.content=t),r={...this.props,...r};const o={a:k.jsx("a",{...r,children:this.content}),button:k.jsx("button",{...r,children:this.content}),div:k.jsx("div",{...r,children:this.content}),h1:k.jsx("h1",{...r,children:this.content}),h2:k.jsx("h2",{...r,children:this.content}),h3:k.jsx("h3",{...r,children:this.content}),h4:k.jsx("h4",{...r,children:this.content}),h5:k.jsx("h5",{...r,children:this.content}),h6:k.jsx("h6",{...r,children:this.content}),img:k.jsx("img",{...r}),input:k.jsx("input",{...r}),p:k.jsx("p",{...r,children:this.content}),span:k.jsx("span",{...r,children:this.content}),table:k.jsx("table",{...r,children:this.content}),tr:k.jsx("tr",{...r,children:this.content}),td:k.jsx("td",{...r,children:this.content}),th:k.jsx("th",{...r,children:this.content}),ul:k.jsx("ul",{...r,children:this.content}),li:k.jsx("li",{...r,children:this.content}),ol:k.jsx("ol",{...r,children:this.content}),form:k.jsx("form",{...r,children:this.content}),textarea:k.jsx("textarea",{...r,children:this.content}),select:k.jsx("select",{...r,children:this.content}),option:k.jsx("option",{...r,children:this.content}),label:k.jsx("label",{...r,children:this.content}),nav:k.jsx("nav",{...r,children:this.content}),footer:k.jsx("footer",{...r,children:this.content}),header:k.jsx("header",{...r,children:this.content}),article:k.jsx("article",{...r,children:this.content}),section:k.jsx("section",{...r,children:this.content}),aside:k.jsx("aside",{...r,children:this.content}),main:k.jsx("main",{...r,children:this.content}),video:k.jsx("video",{...r,children:this.content}),audio:k.jsx("audio",{...r,children:this.content}),iframe:k.jsx("iframe",{...r,children:this.content}),canvas:k.jsx("canvas",{...r,children:this.content}),content:k.jsx(k.Fragment,{}),fragment:k.jsx(k.Fragment,{children:this.content}),link:k.jsx(cn,{...r,children:this.content})};if(i==="content"||this.type==="conent"){let c=this.content;o.content=k.jsx(c,{...r})}return i?o[i]:o[this.type]}}class vF extends Hi{constructor(){super(...arguments);le(this,"component");le(this,"setAttribute")}setObserverFunction(t){this.setAttribute=t}setComponent(t){this.component=t}getComponent(){return this.component}run(){for(let t of this.list)this.setAttribute(t.name,new yF(t))}}class ol{constructor(){le(this,"factory");le(this,"componentList");le(this,"themeFactory");le(this,"appComponent");le(this,"mainFunc");le(this,"appObserver",new Hi);zn.bind(this),this.getFactory(),this.getThemeFactory()}subscribeToAppObserver(e){this.appObserver.subscribe(e)}getMainFunc(){return this.mainFunc}getFactory(){}getThemeFactory(){}getAppComponent(){return this.appComponent}setAppComponent(e){this.appComponent=e,this.appObserver.run(e)}getComponentList(){var e,t;return this.componentList||(this.componentList=(t=(e=this.appComponent)==null?void 0:e.state)==null?void 0:t.componentList),this.componentList}}class _F extends ol{constructor(){super(...arguments);le(this,"type","appInterface")}}const Ab=new _F;class lt extends ye.Component{constructor(t){super(t);le(this,"resize");zn.bind(this),this.initialBuilderSetupFunctions=[],this.setInterface(),this.setInitialApp(),this.initialPropsSetupFunctions=[this.setInterface,this.setAppOnInterace,this.setInitialApp,this.setObj,this.setThemeFactory,this.setTheme,this.createReactRefsForComponents],this.setupObserver=new Hi,this.builderObserver=new vF,this.ObserverForSetupFunction=new Hi,this.builderObserver.setComponent(this),this.builderObserver.setObserverFunction(this.setHtmlBuilderSingleton),this.initialSetupFunctions=[this.builderObserver.run,this.additionalSetup],this.components=[]}setInitialApp(){var r,i,o,l,c,h;this.interface||(this.app=(r=this.props)==null?void 0:r.app);let t=this.interface.getAppComponent();t&&(this.app=t),this.app&&(this.propsState=(i=this.app)==null?void 0:i.state,this.dispatch=(o=this.app)==null?void 0:o.dispatch,this.componentList=(l=this.propsState)==null?void 0:l.componentList,this.APIService=(c=this.componentList)==null?void 0:c.getAPIService(),this.operationsFactory=(h=this.componentList)==null?void 0:h.getOperationsFactory())}setInterface(t){var r;this.interface=t||((r=this.props)==null?void 0:r.interface)||this.interface||Ab,this.interface.type==="appInterface"&&this.subscribeToAppObserverBool===void 0&&(this.subscribeToAppObserverBool=!0,this.interface.subscribeToAppObserver(this.setInitialApp))}setAppOnInterace(){this.interface&&(this.props.app&&this.interface.setAppComponent(this.props.app),this.app=this.interface.getAppComponent())}setComponents(t){this.components=t}getComponents(){return this.components}createReactRefsForComponents(){for(let t of this.components)this[t+"Ref"]||(this[t+"Ref"]=qe.createRef())}createPropObj(t,r){r=r||this.state.propType;let i,o=this[r||"props"][t+"Class"];return o||(o=this.theme&&typeof this.theme!="string"?this.theme[this.state[t+"Class"]]:this["default"+t+"Class"]||""),i={name:t,ref:this[t+"Ref"],style:this[t+"Click"]?{...this[r||"props"][t+"Style"],cursor:"pointer"}:this[r||"props"][t+"Style"],className:o,content:this[r||"props"][t],onClick:this[r||"props"][t+"Click"]||this[t+"Click"],obj:this.obj},i.onClick&&(i.onClick=i.onClick.bind(this,this.obj)),i}builderPropsSubscribe(t){this[t+"Props"]=this.createPropObj(t),this.builderObserver.subscribe(this[t+"Props"])}setInitialBuilderPropFunctions(){for(let t of this.components)this["set"+t+"props"]||(this["set"+t+"props"]=this.builderPropsSubscribe(t)),this.initialBuilderSetupFunctions.push(this["set"+t+"props"]);return this.initialBuilderSetupFunctions}loadObserver(){this.setupObserver.setList(this.initialSetupFunctions)}setInitialSetupFunctions(){const t=[...this.initialPropsSetupFunctions,...this.initialBuilderSetupFunctions,...this.initialSetupFunctions,this.additionalPostSetup],r=[...new Set(t)];return this.initialSetupFunctions=r,this.initialSetupFunctions}runInitialPropsSetup(){for(let t of this.initialPropsSetupFunctions)t&&t()}isArray(t){return Array.isArray(t)?t:[t]}setObj(){this.obj=this.props.obj}setThemeFactory(){this.interface!==void 0&&(this.themeFactory=this.interface.getThemeFactory())}setTheme(){var t,r;this.themeFactory&&(this.theme=this.themeFactory.getComponent(((t=this.props)==null?void 0:t.theme)||((r=this.state)==null?void 0:r.defaultTheme)||"default"))}clearLists(){this.setupObserver.setList([]),this.builderObserver.setList([])}setupItem(...t){this.clearLists(),this.preSetup(),this.runInitialPropsSetup(),this.setInitialBuilderPropFunctions(),this.setInitialSetupFunctions(),this.loadObserver(),this.setupObserver.run(...t)}preSetup(){}setAttribute(t,r){this[t]=r}setHtmlBuilderSingleton(t,r){this[t]||(this[t]=r)}getInnerContent(){return this.innerContent}getAdditionalInnerContent(){return this.innerContent}mapList(t){return k.jsx(k.Fragment,{children:t.filter(r=>r!==void 0&&r!==!1).map(r=>r)})}additionalSetup(){}additionalPostSetup(){}mapInnerContent(){return this.getInnerContent(),this.getAdditionalInnerContent(),this.innerContent=this.mapList(this.innerContent),this.innerContent}getHtml(){return this.html}getFactoryTypeString(t){let r=this.propsState.componentListInterface.getFactory().getRegistry(),i=r.find(o=>t.toLowerCase()===o);return i=i||r.find(o=>t.toLowerCase().includes(o)),i}getCapitalFirstLetter(t){var r;return((r=t==null?void 0:t.charAt(0))==null?void 0:r.toUpperCase())+(t==null?void 0:t.slice(1))}classNameToString(t){let r=t.name;return r.charAt(0).toLowerCase()+r.slice(1)}render(){return this.setupItem(),this.html=this.getHtml(),this.html}}class wF extends ol{}const xb=new wF;class vn extends lt{constructor(t){super(t);le(this,"type");le(this,"theme");le(this,"interface");this.wrapperRef=qe.createRef(),this.setWrapperRef=this.setWrapperRef,this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setApp,this.setType,this.setClassStr],this.state={defaultType:this.props.type?this.props.type:"fit",defaultTheme:this.props.theme?this.props.theme:"Default",typeKey:"type",themeKey:"theme"},this.interface=xb}componentDidMount(){this.props.popup&&document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){this.props.popup&&document.removeEventListener("mousedown",this.handleClickOutside)}handleClickOutside(t){this.wrapperRef&&!this.wrapperRef.current.contains(t.target)&&this.props.handleClose&&this.props.handleClose()}isPopup(t){if(this.props.popup){let r=this.closePopup.getHtml({content:this.props.closeUI||k.jsx(k.Fragment,{children:"X"}),props:{onClick:()=>{this.props.handleClose&&this.props.handleClose()}}}),i=this.popupContent.getHtml({content:k.jsxs(k.Fragment,{children:[r,t]}),props:{ref:this.wrapperRef}});t=this.backDrop.getHtml({content:i})}return t}setTheme(){this.theme=this.props[this.state.themeKey]?this.props[this.state.themeKey]:this.state.defaultTheme}setType(){this.type=this.props[this.state.typeKey]?this.props[this.state.typeKey]:this.state.defaultType}setClassStr(){this.defaultcardClass=this.type+this.theme+" scroller",this.defaultcardClass=this.props.popup?this.defaultcardClass+" cardPopup":this.defaultcardClass,this.props.popup&&(this.defaultbackDropClass="backDropPopup",this.defaultpopupContentClass="popupContent",this.defaultclosePopupClass="closePopup")}getHtml(){let t=this.getContent();return this.html=this.card.getHtml({content:t}),this.html=this.isPopup(this.html),this.html}getContent(){return this.content=this.props.content,this.content}preSetup(){let t=["card"];this.props.popup&&(t=[...t,"backDrop","popupContent","closePopup"]),this.setComponents(t)}}let EF=class{constructor(e){le(this,"operationsFactory");le(this,"dispatch");le(this,"json",{_id:"",backendKeys:[],backendAttributes:[],backendFilterKeys:[],orderMatters:!1,orderFilterKey:"",filterKey:"",removeOwnerQuery:[]});le(this,"componentList");le(this,"APIService");zn.bind(this),this.operationsFactory=e,this.json._id=this.createId()}getAssociatedItemsHelper(e){let t=this.json._id,r=this.json.type+"Id";return this.json.backendAttributes.length>0&&(t=this.json[this.json.backendAttributes[e]]),this.json.backendFilterKeys.length>0&&(r=this.json.backendFilterKeys[e]),{attribute:t,filterKey:r}}async getAssociatedItems(e){e=e||this.json.backendKeys;const t=e==null?void 0:e.map((r,i)=>{let{attribute:o,filterKey:l}=this.getAssociatedItemsHelper(i);return this.componentList.getList(r,o,l)});return await Promise.all(t)}async getAssociatedItemsFromBackend(e,t){e=e||this.json.backendKeys;let r=!0;const i=e==null?void 0:e.map((o,l)=>{this.json.removeOwnerQuery.includes(o)&&(r=!1);let{attribute:c,filterKey:h}=this.getAssociatedItemsHelper(l);return this.componentList.getComponentsFromBackend({type:o,ids:c,filterKeys:h,owner:r,...t})});return await Promise.all(i)}setComponentList(e){this.componentList=e,this.componentList.getAPIService&&this.setAPIService(this.componentList.getAPIService()),this.componentList.getDispatch&&this.setDispatch(this.componentList.getDispatch())}setDispatch(e){this.dispatch=e}getDispatch(){return this.dispatch}getComponentList(){return this.componentList}setAPIService(e){this.APIService=e}getAPIService(){return this.APIService}update(...e){this.APIService&&this.APIService.update([this],...e)}del(...e){this.componentList.del(this,{...e})}updateOrder(e,t){e=e||-1,e===!0&&(e=1);let r=this.componentList.getList(this.json.type,this.json[this.json.orderFilterKey],this.json.orderFilterKey);t=t||(this.json.orderKey?this.json[this.json.orderKey]:"order");let i=r.indexOf(this),o;e<0&&i===0?this.json[t]=r.length:e>0&&i===r.length-1?(this.json[t]=0,this.componentList.shiftOrderedList(this,t)):(o=r[i+e],o.setCompState({[t]:i},{run:!0,clean:!0}),this.json[t]=i+e),this.componentList.sortSelectedList(this.json.type,this.json.orderKey||"order"),this.componentList.resetOrder(this,t),this.update()}prepare(){this.operationsFactory.prepare({prepare:this})}setAttribute(e,t){this[e]=t}setAttributes(e){for(let t in e)this[t]=e[t]}getAttribute(e){return this[e]}getJsonAttribute(e){return this.json[e]}setCompState(e,t,r,i){this.subscribeToOperations(t),this.json={...this.json,...e},r&&this.dispatch({updated:this}),i&&i(e),t!=null&&t.run&&this.operationsFactory.runOperations()}getOperationsFactory(){return this.operationsFactory}setJson(e,t,r,i){this.subscribeToOperations(t),this.json=e,r&&this.dispatch({updated:this}),i&&i(this),t!=null&&t.run&&this.operationsFactory.runOperations()}getJson(){return this.json}subscribeToOperations(e){e&&this.operationsFactory.subscribeToOperations(e.operation||this.update,e.clean)}copyJson(e){return{...this.json,_id:"",...e}}copy(e){let t=this.copyJson(e);this.componentList.addComponents(t)}updateObjInsideJson(e,t){this.json[e]={...this.json[e],...t}}removeObjInsideJson(e,t){let r={};for(const i in this.json[e])t.includes(i)||(r[i]=this.json[e][i]);this.json[e]=r}randomFiveDigitNumber(){let e=Math.floor(Math.random()*9e4)+1e4;e=e.toString();let t=String.fromCharCode(97+Math.floor(Math.random()*26)),r=Math.floor(Math.random()*5);if(e=e.substring(0,r)+t+e.substring(r+1),Math.floor(Math.random()*2)===1){let o=String.fromCharCode(97+Math.floor(Math.random()*26)),l;do l=Math.floor(Math.random()*5);while(l===r);e=e.substring(0,l)+o+e.substring(l+1)}return e}createId(){const e=new Date,t=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),i=e.getFullYear().toString().slice(-2);return this.randomFiveDigitNumber().toString()+t+r+i}createUUID(e){let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789",i=r.length;for(let o=0;o<e;o++)t+=r.charAt(Math.floor(Math.random()*i));return t}};class TF{constructor(){le(this,"operationsFactory");le(this,"factory",{})}registerComponents(e){this.factory[e.name]=e.component}setOperationsFactory(e){this.operationsFactory=e}getRegistry(){return Object.keys(this.factory)}async getComponent(e){if(Object.keys(this.factory).includes(e.type)){let t=e.type,r=new this.factory[t](this.operationsFactory);return[void 0,"",!1].includes(e._id)&&(e._id=r.getJson()._id),r.setCompState({...e}),r}}}class CF extends Hi{clear(){this.list=[]}cleanSubscibe(e){this.clear(),this.subscribe(e)}run(...e){for(let t of this.list)t&&t(...e);this.clear()}}class hE{constructor(e){le(this,"register");le(this,"factory");le(this,"operationsObserver");zn.bind(this),this.add=[],this.lastChange=[],this.factory=e.getFactory(),this.operationsObserver=new CF}removeFromList(e){this.add=this.add.filter(t=>t!==e)}getOperationsObserver(){return this.operationsObserver}setOperationsObserver(e){this.operationsObserver=e}subscribeToOperations(e,t){t&&this.operationsObserver.clear(),this.operationsObserver.subscribe(e)}runOperations(...e){this.operationsObserver.run(...e)}setAddList(e){this.add=[...e],this.lastChange=[...this.add]}getAddList(){return this.add}getLastPrepare(){return this.lastChange}async prepare(e,t){let{prepare:r,amount:i,clean:o}=e;i=i||1;let l=Array.isArray(r)?r:[r];l=l.flatMap(h=>Array(i).fill(h));let c=[];for(let h of l){let f=await this.factory.getComponent({...h});c.push(f)}return l=[...c],this.setAddList(o?[...l]:[...this.add,...l]),t&&t(this.add),e.run&&await this.addToComponentList(),this.add}clear(){this.setAddList([])}removeFromRegister(e){this.setAddList(this.add.filter(t=>t!==e))}run(e){this.addToComponentList(e)}addToComponentList(e){let t=[...this.add];return this.clear(),this.register(t,{skipBackendUpdate:e}),t}setRegister(e){this.register=e}}class SF{constructor(e){le(this,"components",[]);le(this,"dispatch");le(this,"backArray",{});le(this,"operationsFactory");le(this,"componentListInterface");le(this,"componentsList",{});le(this,"completionObserver",new Hi);le(this,"factory");le(this,"APIService");zn.bind(this),this.operationsFactory=e.getOperationsFactory(),this.operationsFactory.setRegister(this.add),this.componentListInterface=e,this.factory=e.getFactory(),this.dispatch=e.dispatch,this.APIService=e.getAPIService(),this.APIService.setComponentList(this),this.completionObserver.subscribe(this.setComponentsList),this.completionObserver.subscribe(this.setOrderAfterAddorDel)}getFactory(){return this.factory}getDispatch(){return this.dispatch}setDispatch(e){this.dispatch=e}getCompletionObserver(){return this.completionObserver}setCompoletionObserver(e){this.completionObserver=e}subscribeToOperationCompletion(e){this.completionObserver.subscribe(e)}getAPIService(){return this.APIService}setAPIService(e){this.APIService=e}getComponents(){return this.components}filterOutErrors(e){let t=this.components.map(i=>i.getJson()._id);e=e.filter(i=>i!==void 0),e=e.map(i=>{if(i!==void 0&&t.includes(i.getJson()._id)){let o=this.components.find(l=>l.getJson()._id===i.getJson()._id);i.setJson({...o.getJson(),...i.getJson()})}return i}),e=e.filter(i=>!t.includes(i.getJson()._id));let r=this.factory.getRegistry();return e=e.filter(i=>r.includes(i.getJson().type)),e}add(e,t){return e=Array.isArray(e)?e:[e],e=this.filterOutErrors(e),e.forEach(r=>{r.setComponentList(this)}),this.components=[...this.components,...e],this.operationComplete(e,"add",t)}setComponentsList(){let e={};this.componentListInterface.getFactory().getRegistry().forEach(r=>{e[r]=[]});for(let r of this.components){let i=r.getJson().type;e[i].push(r)}this.componentsList=e}async addComponents(e,t){e.prepare||(e={prepare:Array.isArray(e)?e:[e]}),await this.operationsFactory.prepare({...e}),this.operationsFactory.addToComponentList(t);let r=e==null?void 0:e.prepare.map(o=>o._id);return await this.components.filter(o=>r.includes(o.getJson()._id))}del(e,t){return e=Array.isArray(e)?e:[e],this.components=this.components.filter(r=>!e.includes(r)),this.operationComplete(e,"del",t)}setOrderAfterAddorDel(e){for(let t of e){let r=t.getJson();if(r.orderMatters){let i=this.getList(r.type,r[r.orderFilterKey],r.orderFilterKey),o=r.orderKey?r[r.orderKey]:"order",l=t.getJson()[o],h=i.filter(y=>{let m=parseInt(y.getJson()[o]);return l=parseInt(l),m===l}).find(y=>!e.includes(y)),f=i.indexOf(t);h&&h!==t&&t.setCompState({[o]:f}),this.sortSelectedList(r.type,r.orderKey||"order"),this.resetOrder(t,o)}}}shiftOrderedList(e,t){let r=e.getJson();this.sortSelectedList(r.type,r.orderKey||"order");let i=this.getList(r.type,r[r.orderFilterKey],r.orderFilterKey);t=t||(r.orderKey?r[r.orderKey]:"order"),i=i.filter(o=>o!==e);for(let o=1;o<i.length;o++)i[o-1].setCompState({[t]:o},{run:!0,clean:!0})}resetOrder(e,t){let r=e.getJson();t=t||(r.orderKey?r[r.orderKey]:r.order);let i=this.getList(r.type,r[r.orderFilterKey],r.orderFilterKey);for(let o=0;o<i.length;o++)i[o][t]!==o&&(i[o].setCompState({[t]:o}),i[o]!==e&&i[o].update())}operationComplete(e,t,r){return this.completionObserver.run(e,t,r),this.backArray={[t]:e},r.skipBackendUpdate||this.updateBackend(e,t,r),e}updateBackend(e,t,r){this.dispatch({backend:!0,backendUpdate:{...this.backArray}});let i=[r.path,r.dispatchKey];t==="add"&&i.push(r.timeKey),this.APIService[t](e,...i),this.backArray={}}getOperationsFactory(){return this.operationsFactory}createQueryJson(e,t,r,i,o="type"){i=i||{},r===void 0&&t&&(r="_id"),t=Array.isArray(t)?t:[t],r=Array.isArray(r)?r:[r];let l={where:[{attribute:o,val:e}],...i};return t.length>0&&t[0]!==void 0&&(l.where=[...l.where,...t.map((c,h)=>({attribute:r[h]||r[0],val:c}))]),l}async getComponentsFromBackend(e,t){typeof e=="string"&&(e={type:e,owner:t===!1?t:!0});let r=await this.createQueryJson(e.type,e.ids,e.filterKeys,e.obj,e.typeAttribute);return await this.APIService[e.snapshot?"firebaseGetterSnapshot":"firebaseGetter"](r,e.path,e.owner)}async getComponentFromBackend(e){return(await this.getComponentsFromBackend(e))[0]}getList(e,t,r){r=r||"owner",e=Array.isArray(e)?e:[e];let i=[];for(let o of e){let l=this.componentsList[o]||[];i=[...i,...l]}return Array.isArray(t)||(t=t?[t]:[]),Array.isArray(r)||(r=[r]),t.length>0&&(i=i.filter(o=>r.some((l,c)=>{var y;const h=(y=o.getJson())==null?void 0:y[l],f=t[c]||t[0];return typeof h=="object"?Object.keys(h).includes(f):h===f}))),i}getComponent(e,t,r){return this.getList(e,t,r||"_id")[0]}clearList(){this.components=[],this.componentsList={}}clearSelectedList(e,t){let r=[...this.components],i=[];for(const o in r)r[o].getJson()[t]!==e&&i.push(r[o]);this.components=[...i],this.setComponentsList()}setComponentList(e){this.componentsList=e}setSelectedList(e,t){this.componentsList[e]=t}sortSelectedList(e,t,r){if(t&&this.componentsList[e]){let i=[...this.componentsList[e]];i=i.sort(function(o,l){const c=o.getJson()[t],h=l.getJson()[t],f=isNaN(Number(c))?c:Number(c),y=isNaN(Number(h))?h:Number(h);return typeof f=="number"&&typeof y=="number"?r?y-f:f-y:r?(""+y).localeCompare(""+f):(""+f).localeCompare(""+y)}),this.setSelectedList(e,i)}}sortSelectedListbyFirebaseDate(e,t){if(this.componentsList[e]){let r=[...this.componentsList[e]];r=r.sort(function(i,o){var h,f;let l=i.getJson().date||i.getJson().date!==""?(h=i.getJson().date)==null?void 0:h.seconds:new Date(0),c=o.getJson().date||o.getJson().date!==""?(f=o.getJson().date)==null?void 0:f.seconds:new Date(0);return t?c-l:l-c}),this.setSelectedList(e,r)}}}class IF{constructor(e,t){le(this,"DB");le(this,"url");le(this,"path",[]);le(this,"orderStr","date");zn.bind(this),this.setDB(e),this.setUrl(t),this.path=[this.DB,this.url+"users",this.url+"APP","components"]}setDB(e){this.DB=e}setUrl(e){this.url=e}setPath(e){this.path=e}setOrderStr(e){this.orderStr=e}async generateQueary(e,t,r){let i=e.where.map(h=>{if(h.attribute!==void 0)return x1(h.attribute,h.type||"==",h.val)}).filter(h=>h!==void 0);r&&i.push(x1("owner","==",r)),t=t||this.path;let o=[...i],l=e.order||this.orderStr;return l!=="noOrder"&&l!==void 0&&o.push(KN(l)),e.limit&&o.push(GN(e.limit)),$N(PN(...t),...o)}}class bF{constructor(e,t,r,i,o){le(this,"urlEndpoint","");le(this,"dispatch");le(this,"componentList");le(this,"userStr","flinnappsUser");le(this,"QuearyGenerator");le(this,"DB");le(this,"storage");le(this,"auth");le(this,"userEmail");le(this,"path",[]);le(this,"postObserver",new Hi);le(this,"dispatchObserver",new Hi);le(this,"readObserver",new Hi);zn.bind(this),this.urlEndpoint=e,this.DB=t,this.storage=r,this.auth=i,this.dispatch=o,this.path=[this.DB,`${this.urlEndpoint}users`,`${this.urlEndpoint}APP`,"components"],this.QuearyGenerator=new IF(this.DB,this.urlEndpoint)}setAuth(e){this.auth=e}setStorage(e){this.storage=e}setPath(e){this.path=e}setDB(e){this.DB=e,this.QuearyGenerator.setDB(e)}setDispatch(e){this.dispatch=e}setComponentList(e){this.componentList=e}setUserStr(e){this.userStr=e,this.QuearyGenerator.setUrl(e)}getPostObserver(){return this.postObserver}setPostObserver(e){this.postObserver=e}subscribeToPostObserver(e){this.postObserver.subscribe(e)}getReadObserver(){return this.readObserver}setReadObserver(e){this.readObserver=e}subscribeToReadObserver(e){this.readObserver.subscribe(e)}getPath(){return this.path}getDispatchObserver(){return this.dispatchObserver}setDispatchObserver(e){this.dispatchObserver=e}subscribeToDispatchObserver(e){this.dispatchObserver.subscribe(e)}getQueryGenerator(){return this.QuearyGenerator}setQueryGenerator(e){this.QuearyGenerator=e}async login(e,t){let r,i;if(await K1(this.auth,e,t).then(o=>{r=o.user}).catch(o=>{const l=o.message;i={error:l.slice(9,l.length-1)},console.log(i)}),r){let o=r;this.dispatch({login:!0}),await localStorage.setItem(this.userStr,JSON.stringify(o)),this.componentList!==void 0&&this.dispatch!==void 0&&(r=await this.getuser(e))}else r=i;return r}async register(e,t,r){let i;return await CD(this.auth,e,t).then(o=>{i=o.user}).catch(o=>{o.code;let l=o.message,c=l.length-1;i={error:l.slice(9,c)}}),i.error||(this.userEmail=i.email,localStorage.setItem(this.userStr,JSON.stringify(i))),i}async logout(){await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let e;await Yp(this.auth,t=>{t&&(e=t.uid)}),e&&await G1(this.auth),await localStorage.setItem(this.userStr,null),window.location.href="/"}sendForgotPasswordChange(e){const t=Fh();TD(t,e).then(()=>{}).catch(r=>{r.code,r.message})}async checkIfLoggedIn(){return new Promise((e,t)=>{Yp(this.auth,async r=>{if(r)e(r);else{await localStorage.setItem(this.userStr,null),await localStorage.clear(),localStorage.setItem(this.userStr,void 0);let i;await Yp(this.auth,o=>{o&&(i=o.uid)}),i&&await G1(this.auth),await window.location.reload()}})})}async getCurrentUser(){let e=await localStorage.getItem(this.userStr);return e=await JSON.parse(e),e}async setCurrentUser(e){await localStorage.setItem(this.userStr,JSON.stringify(e))}async loginToDel(e,t){await K1(this.auth,e,t).then(r=>{}).catch(r=>{r.code,r.message})}async delAccount(){const t=Fh().currentUser;await xD(t).then(()=>{}).catch(r=>{})}async notify(e,t){fetch(t,{method:"POST",mode:"no-cors",body:JSON.stringify(e),headers:{"Conent-Type":"application/json"}})}async changePassword(e){const r=Fh().currentUser;return await SD(r,e).then(()=>{}).catch(o=>{}),!0}async firebaseGetterSnapshot(e,t,r){r=r===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,r),o=[];return await n2(i,async l=>{o=await this.getRawData(l)}),o}async firebaseGetter(e,t,r){r=r===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,r),o=await ZN(i);return await this.getRawData(o)}async getRawData(e){let t=[];for(const i in e.docs){let o=e.docs[i].data();t.push(o)}let r=await this.componentList.addComponents(t,!0);return this.dispatch&&await this.dispatch({snapShot:{dataRetrieved:r}}),this.readObserver.run(r,t),r}async getCount(e,t,r){r=r===!0?this.userEmail:void 0;let i=await this.QuearyGenerator.generateQueary(e,t,r);return(await i2(i)).data().count}async getuser(e){this.userEmail=e;let t=await this.componentList.getComponentFromBackend({type:"user",ids:e});return t&&this.dispatch({currentUser:t,email:e,gotUser:!0}),t}async GetAllData(e,t){t=t||[this.db,this.urlEndpoint+"users"],this.firebaseGetter(e,t)}async uploadPics(e,t){const r=Jp(this.storage,t);await mL(r,e).then(i=>{console.log("Uploaded a file!")})}async downloadPics(e){let t;return await gL(Jp(this.storage,e)).then(r=>{t=r}),t}deletePics(e){const t=Jp(this.storage,e);yL(t).then(()=>{}).catch(r=>{})}prep(e){return e=Array.isArray(e)?e:[e],e=e.map(t=>{let r=t;return t.getJson&&(r=t.getJson()),r}),e=e.filter(t=>t!==void 0),e}async add(e,t,r,i){return e=await e.map(o=>((o.getJson().owner===""||o.getJson().owner===void 0)&&o.setCompState({owner:this.userEmail}),o)),await this.operate(e,e2,t,r||"added",i||"date")}async update(e,t,r,i){return await this.operate(e,t2,t,i||"updated",r||"lastUpdated")}async del(e,t,r){return await this.operate(e,P1,t,r||"deleted")}async operate(e,t,r,i,o){try{e=await this.prep(e),r=r||this.path;for(let l of e){o&&(l[o]=await o2()),await this.postObserver.run([l]);let c=[ON(...r,l._id)];t!==P1&&c.push(l),await t(...c)}return this.dispatch&&this.dispatch({[i]:e,dispatchComplete:!0}),this.dispatchObserver.run([{[i]:e}]),e}catch(l){console.log(l),console.error(e,"something went wrong with this operation")}}}class AF{constructor(e,t,r,i,o){le(this,"factory");le(this,"updater");le(this,"operationsFactory");le(this,"dispatch");le(this,"APIService");zn.bind(this),this.dispatch=e,this.getFactory(),this.getAPIService(t,r,i,o,e)}getFactory(){return this.factory===void 0&&(this.factory=new TF(this)),this.factory}getAPIService(e,t,r,i,o){return this.APIService===void 0&&(this.APIService=new bF(e,t,r,i,o)),this.APIService}createComponentList(){return new SF(this)}getOperationsFactory(){return this.operationsFactory===void 0&&(this.operationsFactory=new hE(this),this.factory.setOperationsFactory(this.operationsFactory)),this.operationsFactory}getNewOperationsFactory(){return new hE(this)}}class Ru extends lt{constructor(e){super(e),this.domList=["a","button","div","h1","h2","h3","h4","h5","h6","img","input","p","span","table","tr","td","th","ul","li","ol","form","textarea","select","option","label","nav","footer","header","article","section","aside","main","video","audio","iframe","canvas"],this.state={...this.state,wrapperClass:"FCWrapper",formClass:"FCInputForm",labelClass:"defaultLabel",errorClass:"defaultErrorMessage",interface:"form"}}setObj(){var e,t;if(!this.props.prepareOnClick){let r=this.props.obj||(this.props.inPopup?(e=this.propsState)==null?void 0:e.currentPopupComponent:(t=this.propsState)==null?void 0:t.currentComponent);this.obj=this.isArray(r)}}preSetup(){this.setComponents(["wrapper","form","label","error"])}getInnerContent(){return this.innerContent=[this.props.label&&this.label.getHtml(),this.getFormHtml(),this.props.errorText&&this.error.getHtml()],this.innerContent}getHtml(){this.mapInnerContent();let e=this.wrapper.getHtml({type:"div",content:this.innerContent});return this.html=k.jsx(k.Fragment,{children:e}),this.html}getFormHtml(){return this.getInputProps(this.props.type||"input"),this.additionalPropsSetup(),this.form.getHtml({type:this.props.type?this.props.type:"input",content:this.content,props:this.inputProps})}additionalPropsSetup(){}handleChange(e){let{name:t,value:r}=e.target;for(let i of this.obj){if(this.props.isPropArray){let o=i.getJson()[this.props.name]||[];Array.isArray(o)||(o=[o]),Array.isArray(o[0])||(o[0]=[o[0]]),o[0]=r,r=o}i.setCompState({[this.props.name]:r})}this.afterChange(e)}afterChange(e){if(this.props.update)for(let t of this.obj){let r=this.props.update===!0?void 0:{...this.props.update};t==null||t.update(r)}this.props.sendUpdate&&this.props.app&&this.app.dispatch({formUpdate:this.props.type}),this.props.callbackFunc&&this.props.callbackFunc(this.obj),this.additionalChanges(e),this.setState({})}additionalChanges(e){}async prepareOnClick(){var e;if(this.props.prepareOnClick&&this.props.app){let t=this.props.obj;t&&(t=this.isArray(t)),t=await((e=this.props.app)==null?void 0:e.state.componentList.getOperationsFactory().prepare({...t})),t&&(t=this.isArray(t)),this.obj=t}}objDispatch(e){for(let t of this.obj)t.setCompState({[this.props.name]:e});this.afterChange()}handleChangeWithoutEvent(e){for(let t in this.obj)t.setCompState({[e.name]:e.value});this.afterChange()}getInputProps(e){var t;return this.inputProps={onChange:this.props.handleChange?r=>{this.props.handleChange(r,this.obj)}:this.handleChange,value:this.obj[0]?(t=this.obj[0])==null?void 0:t.getJson()[this.props.name]:this.props.value,type:this.props.inputType||this.props.type,onFocus:this.props.onFocus||this.onFocus,placeholder:this.props.placeholder,name:this.props.name,min:this.props.min,max:this.props.max,cols:this.props.cols||"",rows:this.props.rows||5,resize:this.props.resize||"true",autoComplete:this.props.autoComplete?this.props.autoComplete:"off",id:this.props.id,checked:this.props.checked,spellCheck:this.props.type==="password"||this.props.spellCheck===void 0?!1:this.props.spellCheck,minLength:this.props.minLength,maxLength:this.props.maxLength},this.domList.includes(e)||(this.inputProps.handleChangeWithoutEvent=this.props.update?()=>{console.log("")}:this.props.handleChangeWithoutEvent?this.props.handleChangeWithoutEvent:this.handleChangeWithoutEvent,this.inputProps.selectOptions=this.props.selectOptions,this.inputProps.textOptions=this.props.textOptions,this.inputProps.unit=this.props.unit?this.props.unit:"$",this.inputProps.tickClass=this.props.tickClass,this.inputProps.handleHTMLChange=this.props.handleHTMLChange||this.objDispatch,this.inputProps.doesMath=this.props.doesMath,this.inputProps.objDispatch=this.objDispatch,this.inputProps.emitClickedOutside=this.props.emitClickedOutside,this.inputProps.updateOnClickOutside=this.props.updateOnClickOutside),this.props.required&&(this.inputProps.required=!0),this.props.disabled&&(this.inputProps.disabled=!0),this.inputProps}}class Ho extends Ru{constructor(e){super(e),this.state.formClass="FCDefaultButton"}buttonClick(){this.props.buttonClick?this.props.buttonClick(this.obj):this.buttonClickFunc(),this.props.callbackFunc&&this.props.callbackFunc(this.obj)}buttonClickFunc(){}additionalSetup(){this.form.setOnClick(this.buttonClick)}getFormHtml(){return this.form.setStyle({cursor:"pointer"}),this.content=this.props.content||this.content||k.jsx(k.Fragment,{children:"button"}),this.form.getHtml({type:"div",content:this.content})}}let kb=class{constructor(){le(this,"FCInputForm","defaultInputForm");le(this,"FCWrapper","defaultWrapper");le(this,"FCError","defaultErrorMessage");le(this,"FCLabel","defaultLabel");le(this,"FCDefaultButton","defaultButton");le(this,"FCDefaultDelButton","delButton");le(this,"FCImgButton","imgButton")}};const xF=Object.freeze(Object.defineProperty({__proto__:null,DefaultRegistry:kb},Symbol.toStringTag,{value:"Module"}));class Dv{constructor(e){le(this,"factory",{});zn.bind(this),e&&(this.registry=e,this.registerListWithFactory())}registerListWithFactory(){for(const e in this.registry)if(Object.prototype.hasOwnProperty.call(this.registry,e)){const t=e.charAt(0).toLowerCase()+e.slice(1);this.factory[t]=this.registry[e]}}getComponent(e){let t;return this.factory[e]&&(t=new this.factory[e]),t}registerComponent(e,t){this.factory[e]=t}}let kF=class extends Dv{constructor(){super(xF),this.factory.default=kb}};class Rb{constructor(){le(this,"factory",{})}getComponent(e,t){let r;return this.factory[e]&&(r=this.factory[e]),k.jsx(r,{...t})}registerComponent(e,t){this.factory[e]=t}}class RF extends Ho{buttonClickFunc(){let e=this.props.add;this.componentList.addComponents(e)}}class PF{constructor(){zn.bind(this)}doMath(e){e=e.replace(/\s+/g,"");const t=/(\d+)([+\-*/])(\d+)/,r=e.match(t);if(!r)throw new Error("Invalid input");const i=parseFloat(r[1]),o=r[2],l=parseFloat(r[3]);return{"+":i+l,"-":i-l,"*":i*l,"/":i/l}[o]}}let OF=new PF;class NF extends Ru{constructor(e){super(e)}componentDidMount(){document.addEventListener("keyup",this.doMath)}componentWillUnmount(){document.removeEventListener("keyup",this.doMath)}additionalChanges(e){let{name:t,value:r}=e.target;this.setState({val:r})}async doMath(e){if(e.key==="Enter"&&this.state.val!==void 0){let t=this.obj[0],r=await OF.doMath(this.state.val).toString();await t.setCompState({[this.props.name]:r}),t.update(),await this.setState({val:void 0})}}}let LF=class extends Ho{async buttonClickFunc(){let e=this.obj,t=e.type;this.props.popupSwitch.includes("add")&&(e=e[0]?e[0]:{type:this.getFactoryTypeString(this.props.popupSwitch.slice(3))},e={prepare:{...e},amount:this.props.amount,clean:this.props.clean},e=await this.operationsFactory.prepare(e),e.length===1&&(e=e[0],t=e.getJson().type)),Array.isArray(e)&&e.length===1&&(e=e[0]);let r=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(t)]:e},i={popupSwitch:this.props.popupSwitch,currentPopupComponent:e,...r};await this.dispatch({...i})}},DF=class extends Ho{buttonClickFunc(){for(let e of this.obj)e.update(this.props.updateParams);this.props.isPopup&&this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}},MF=class extends Ho{buttonClickFunc(){let e=this.operationsFactory.addToComponentList(this.props.skipBackendUpdate),t=this.props.setCurrnetItem&&{["current"+this.getCapitalFirstLetter(e[0].getJson().type)]:e[0]},r={};this.props.isPopup&&(r={popupSwitch:"",currentPopupComponent:void 0}),this.dispatch({...r,...t})}};var tm,fE;function jF(){if(fE)return tm;fE=1;function n(){this.__data__=[],this.size=0}return tm=n,tm}var nm,dE;function Pb(){if(dE)return nm;dE=1;function n(e,t){return e===t||e!==e&&t!==t}return nm=n,nm}var rm,pE;function Kf(){if(pE)return rm;pE=1;var n=Pb();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return rm=e,rm}var im,mE;function FF(){if(mE)return im;mE=1;var n=Kf(),e=Array.prototype,t=e.splice;function r(i){var o=this.__data__,l=n(o,i);if(l<0)return!1;var c=o.length-1;return l==c?o.pop():t.call(o,l,1),--this.size,!0}return im=r,im}var sm,gE;function VF(){if(gE)return sm;gE=1;var n=Kf();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return sm=e,sm}var om,yE;function BF(){if(yE)return om;yE=1;var n=Kf();function e(t){return n(this.__data__,t)>-1}return om=e,om}var am,vE;function UF(){if(vE)return am;vE=1;var n=Kf();function e(t,r){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,r])):i[o][1]=r,this}return am=e,am}var lm,_E;function Gf(){if(_E)return lm;_E=1;var n=jF(),e=FF(),t=VF(),r=BF(),i=UF();function o(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var f=l[c];this.set(f[0],f[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,lm=o,lm}var um,wE;function qF(){if(wE)return um;wE=1;var n=Gf();function e(){this.__data__=new n,this.size=0}return um=e,um}var cm,EE;function zF(){if(EE)return cm;EE=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return cm=n,cm}var hm,TE;function HF(){if(TE)return hm;TE=1;function n(e){return this.__data__.get(e)}return hm=n,hm}var fm,CE;function WF(){if(CE)return fm;CE=1;function n(e){return this.__data__.has(e)}return fm=n,fm}var dm,SE;function Ob(){if(SE)return dm;SE=1;var n=typeof mh=="object"&&mh&&mh.Object===Object&&mh;return dm=n,dm}var pm,IE;function es(){if(IE)return pm;IE=1;var n=Ob(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return pm=t,pm}var mm,bE;function Mv(){if(bE)return mm;bE=1;var n=es(),e=n.Symbol;return mm=e,mm}var gm,AE;function $F(){if(AE)return gm;AE=1;var n=Mv(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function o(l){var c=t.call(l,i),h=l[i];try{l[i]=void 0;var f=!0}catch{}var y=r.call(l);return f&&(c?l[i]=h:delete l[i]),y}return gm=o,gm}var ym,xE;function KF(){if(xE)return ym;xE=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return ym=t,ym}var vm,kE;function Jf(){if(kE)return vm;kE=1;var n=Mv(),e=$F(),t=KF(),r="[object Null]",i="[object Undefined]",o=n?n.toStringTag:void 0;function l(c){return c==null?c===void 0?i:r:o&&o in Object(c)?e(c):t(c)}return vm=l,vm}var _m,RE;function Nb(){if(RE)return _m;RE=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return _m=n,_m}var wm,PE;function Lb(){if(PE)return wm;PE=1;var n=Jf(),e=Nb(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function l(c){if(!e(c))return!1;var h=n(c);return h==r||h==i||h==t||h==o}return wm=l,wm}var Em,OE;function GF(){if(OE)return Em;OE=1;var n=es(),e=n["__core-js_shared__"];return Em=e,Em}var Tm,NE;function JF(){if(NE)return Tm;NE=1;var n=GF(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Tm=t,Tm}var Cm,LE;function Db(){if(LE)return Cm;LE=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Cm=t,Cm}var Sm,DE;function QF(){if(DE)return Sm;DE=1;var n=Lb(),e=JF(),t=Nb(),r=Db(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,f=c.hasOwnProperty,y=RegExp("^"+h.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(d){if(!t(d)||e(d))return!1;var g=n(d)?y:o;return g.test(r(d))}return Sm=m,Sm}var Im,ME;function YF(){if(ME)return Im;ME=1;function n(e,t){return e==null?void 0:e[t]}return Im=n,Im}var bm,jE;function al(){if(jE)return bm;jE=1;var n=QF(),e=YF();function t(r,i){var o=e(r,i);return n(o)?o:void 0}return bm=t,bm}var Am,FE;function jv(){if(FE)return Am;FE=1;var n=al(),e=es(),t=n(e,"Map");return Am=t,Am}var xm,VE;function Qf(){if(VE)return xm;VE=1;var n=al(),e=n(Object,"create");return xm=e,xm}var km,BE;function XF(){if(BE)return km;BE=1;var n=Qf();function e(){this.__data__=n?n(null):{},this.size=0}return km=e,km}var Rm,UE;function ZF(){if(UE)return Rm;UE=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Rm=n,Rm}var Pm,qE;function e4(){if(qE)return Pm;qE=1;var n=Qf(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(o){var l=this.__data__;if(n){var c=l[o];return c===e?void 0:c}return r.call(l,o)?l[o]:void 0}return Pm=i,Pm}var Om,zE;function t4(){if(zE)return Om;zE=1;var n=Qf(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var o=this.__data__;return n?o[i]!==void 0:t.call(o,i)}return Om=r,Om}var Nm,HE;function n4(){if(HE)return Nm;HE=1;var n=Qf(),e="__lodash_hash_undefined__";function t(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=n&&i===void 0?e:i,this}return Nm=t,Nm}var Lm,WE;function r4(){if(WE)return Lm;WE=1;var n=XF(),e=ZF(),t=e4(),r=t4(),i=n4();function o(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var f=l[c];this.set(f[0],f[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,Lm=o,Lm}var Dm,$E;function i4(){if($E)return Dm;$E=1;var n=r4(),e=Gf(),t=jv();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Dm=r,Dm}var Mm,KE;function s4(){if(KE)return Mm;KE=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Mm=n,Mm}var jm,GE;function Yf(){if(GE)return jm;GE=1;var n=s4();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return jm=e,jm}var Fm,JE;function o4(){if(JE)return Fm;JE=1;var n=Yf();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return Fm=e,Fm}var Vm,QE;function a4(){if(QE)return Vm;QE=1;var n=Yf();function e(t){return n(this,t).get(t)}return Vm=e,Vm}var Bm,YE;function l4(){if(YE)return Bm;YE=1;var n=Yf();function e(t){return n(this,t).has(t)}return Bm=e,Bm}var Um,XE;function u4(){if(XE)return Um;XE=1;var n=Yf();function e(t,r){var i=n(this,t),o=i.size;return i.set(t,r),this.size+=i.size==o?0:1,this}return Um=e,Um}var qm,ZE;function Mb(){if(ZE)return qm;ZE=1;var n=i4(),e=o4(),t=a4(),r=l4(),i=u4();function o(l){var c=-1,h=l==null?0:l.length;for(this.clear();++c<h;){var f=l[c];this.set(f[0],f[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=r,o.prototype.set=i,qm=o,qm}var zm,eT;function c4(){if(eT)return zm;eT=1;var n=Gf(),e=jv(),t=Mb(),r=200;function i(o,l){var c=this.__data__;if(c instanceof n){var h=c.__data__;if(!e||h.length<r-1)return h.push([o,l]),this.size=++c.size,this;c=this.__data__=new t(h)}return c.set(o,l),this.size=c.size,this}return zm=i,zm}var Hm,tT;function h4(){if(tT)return Hm;tT=1;var n=Gf(),e=qF(),t=zF(),r=HF(),i=WF(),o=c4();function l(c){var h=this.__data__=new n(c);this.size=h.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=r,l.prototype.has=i,l.prototype.set=o,Hm=l,Hm}var Wm,nT;function f4(){if(nT)return Wm;nT=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return Wm=e,Wm}var $m,rT;function d4(){if(rT)return $m;rT=1;function n(e){return this.__data__.has(e)}return $m=n,$m}var Km,iT;function p4(){if(iT)return Km;iT=1;var n=Mb(),e=f4(),t=d4();function r(i){var o=-1,l=i==null?0:i.length;for(this.__data__=new n;++o<l;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,Km=r,Km}var Gm,sT;function m4(){if(sT)return Gm;sT=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return Gm=n,Gm}var Jm,oT;function g4(){if(oT)return Jm;oT=1;function n(e,t){return e.has(t)}return Jm=n,Jm}var Qm,aT;function jb(){if(aT)return Qm;aT=1;var n=p4(),e=m4(),t=g4(),r=1,i=2;function o(l,c,h,f,y,m){var d=h&r,g=l.length,C=c.length;if(g!=C&&!(d&&C>g))return!1;var S=m.get(l),E=m.get(c);if(S&&E)return S==c&&E==l;var _=-1,w=!0,O=h&i?new n:void 0;for(m.set(l,c),m.set(c,l);++_<g;){var I=l[_],L=c[_];if(f)var V=d?f(L,I,_,c,l,m):f(I,L,_,l,c,m);if(V!==void 0){if(V)continue;w=!1;break}if(O){if(!e(c,function(P,T){if(!t(O,T)&&(I===P||y(I,P,h,f,m)))return O.push(T)})){w=!1;break}}else if(!(I===L||y(I,L,h,f,m))){w=!1;break}}return m.delete(l),m.delete(c),w}return Qm=o,Qm}var Ym,lT;function y4(){if(lT)return Ym;lT=1;var n=es(),e=n.Uint8Array;return Ym=e,Ym}var Xm,uT;function v4(){if(uT)return Xm;uT=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,o){r[++t]=[o,i]}),r}return Xm=n,Xm}var Zm,cT;function _4(){if(cT)return Zm;cT=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return Zm=n,Zm}var eg,hT;function w4(){if(hT)return eg;hT=1;var n=Mv(),e=y4(),t=Pb(),r=jb(),i=v4(),o=_4(),l=1,c=2,h="[object Boolean]",f="[object Date]",y="[object Error]",m="[object Map]",d="[object Number]",g="[object RegExp]",C="[object Set]",S="[object String]",E="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",O=n?n.prototype:void 0,I=O?O.valueOf:void 0;function L(V,P,T,b,A,x,N){switch(T){case w:if(V.byteLength!=P.byteLength||V.byteOffset!=P.byteOffset)return!1;V=V.buffer,P=P.buffer;case _:return!(V.byteLength!=P.byteLength||!x(new e(V),new e(P)));case h:case f:case d:return t(+V,+P);case y:return V.name==P.name&&V.message==P.message;case g:case S:return V==P+"";case m:var D=i;case C:var z=b&l;if(D||(D=o),V.size!=P.size&&!z)return!1;var G=N.get(V);if(G)return G==P;b|=c,N.set(V,P);var re=r(D(V),D(P),b,A,x,N);return N.delete(V),re;case E:if(I)return I.call(V)==I.call(P)}return!1}return eg=L,eg}var tg,fT;function E4(){if(fT)return tg;fT=1;function n(e,t){for(var r=-1,i=t.length,o=e.length;++r<i;)e[o+r]=t[r];return e}return tg=n,tg}var ng,dT;function Fv(){if(dT)return ng;dT=1;var n=Array.isArray;return ng=n,ng}var rg,pT;function T4(){if(pT)return rg;pT=1;var n=E4(),e=Fv();function t(r,i,o){var l=i(r);return e(r)?l:n(l,o(r))}return rg=t,rg}var ig,mT;function C4(){if(mT)return ig;mT=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,o=0,l=[];++r<i;){var c=e[r];t(c,r,e)&&(l[o++]=c)}return l}return ig=n,ig}var sg,gT;function S4(){if(gT)return sg;gT=1;function n(){return[]}return sg=n,sg}var og,yT;function I4(){if(yT)return og;yT=1;var n=C4(),e=S4(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(l){return l==null?[]:(l=Object(l),n(i(l),function(c){return r.call(l,c)}))}:e;return og=o,og}var ag,vT;function b4(){if(vT)return ag;vT=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return ag=n,ag}var lg,_T;function Xf(){if(_T)return lg;_T=1;function n(e){return e!=null&&typeof e=="object"}return lg=n,lg}var ug,wT;function A4(){if(wT)return ug;wT=1;var n=Jf(),e=Xf(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return ug=r,ug}var cg,ET;function x4(){if(ET)return cg;ET=1;var n=A4(),e=Xf(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,o=n(function(){return arguments}())?n:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return cg=o,cg}var lu={exports:{}},hg,TT;function k4(){if(TT)return hg;TT=1;function n(){return!1}return hg=n,hg}lu.exports;var CT;function Fb(){return CT||(CT=1,function(n,e){var t=es(),r=k4(),i=e&&!e.nodeType&&e,o=i&&!0&&n&&!n.nodeType&&n,l=o&&o.exports===i,c=l?t.Buffer:void 0,h=c?c.isBuffer:void 0,f=h||r;n.exports=f}(lu,lu.exports)),lu.exports}var fg,ST;function R4(){if(ST)return fg;ST=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var o=typeof r;return i=i??n,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return fg=t,fg}var dg,IT;function Vb(){if(IT)return dg;IT=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return dg=e,dg}var pg,bT;function P4(){if(bT)return pg;bT=1;var n=Jf(),e=Vb(),t=Xf(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",f="[object Map]",y="[object Number]",m="[object Object]",d="[object RegExp]",g="[object Set]",C="[object String]",S="[object WeakMap]",E="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",O="[object Float64Array]",I="[object Int8Array]",L="[object Int16Array]",V="[object Int32Array]",P="[object Uint8Array]",T="[object Uint8ClampedArray]",b="[object Uint16Array]",A="[object Uint32Array]",x={};x[w]=x[O]=x[I]=x[L]=x[V]=x[P]=x[T]=x[b]=x[A]=!0,x[r]=x[i]=x[E]=x[o]=x[_]=x[l]=x[c]=x[h]=x[f]=x[y]=x[m]=x[d]=x[g]=x[C]=x[S]=!1;function N(D){return t(D)&&e(D.length)&&!!x[n(D)]}return pg=N,pg}var mg,AT;function O4(){if(AT)return mg;AT=1;function n(e){return function(t){return e(t)}}return mg=n,mg}var uu={exports:{}};uu.exports;var xT;function N4(){return xT||(xT=1,function(n,e){var t=Ob(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,l=o&&t.process,c=function(){try{var h=i&&i.require&&i.require("util").types;return h||l&&l.binding&&l.binding("util")}catch{}}();n.exports=c}(uu,uu.exports)),uu.exports}var gg,kT;function Bb(){if(kT)return gg;kT=1;var n=P4(),e=O4(),t=N4(),r=t&&t.isTypedArray,i=r?e(r):n;return gg=i,gg}var yg,RT;function L4(){if(RT)return yg;RT=1;var n=b4(),e=x4(),t=Fv(),r=Fb(),i=R4(),o=Bb(),l=Object.prototype,c=l.hasOwnProperty;function h(f,y){var m=t(f),d=!m&&e(f),g=!m&&!d&&r(f),C=!m&&!d&&!g&&o(f),S=m||d||g||C,E=S?n(f.length,String):[],_=E.length;for(var w in f)(y||c.call(f,w))&&!(S&&(w=="length"||g&&(w=="offset"||w=="parent")||C&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,_)))&&E.push(w);return E}return yg=h,yg}var vg,PT;function D4(){if(PT)return vg;PT=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return vg=e,vg}var _g,OT;function M4(){if(OT)return _g;OT=1;function n(e,t){return function(r){return e(t(r))}}return _g=n,_g}var wg,NT;function j4(){if(NT)return wg;NT=1;var n=M4(),e=n(Object.keys,Object);return wg=e,wg}var Eg,LT;function F4(){if(LT)return Eg;LT=1;var n=D4(),e=j4(),t=Object.prototype,r=t.hasOwnProperty;function i(o){if(!n(o))return e(o);var l=[];for(var c in Object(o))r.call(o,c)&&c!="constructor"&&l.push(c);return l}return Eg=i,Eg}var Tg,DT;function V4(){if(DT)return Tg;DT=1;var n=Lb(),e=Vb();function t(r){return r!=null&&e(r.length)&&!n(r)}return Tg=t,Tg}var Cg,MT;function B4(){if(MT)return Cg;MT=1;var n=L4(),e=F4(),t=V4();function r(i){return t(i)?n(i):e(i)}return Cg=r,Cg}var Sg,jT;function U4(){if(jT)return Sg;jT=1;var n=T4(),e=I4(),t=B4();function r(i){return n(i,t,e)}return Sg=r,Sg}var Ig,FT;function q4(){if(FT)return Ig;FT=1;var n=U4(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(o,l,c,h,f,y){var m=c&e,d=n(o),g=d.length,C=n(l),S=C.length;if(g!=S&&!m)return!1;for(var E=g;E--;){var _=d[E];if(!(m?_ in l:r.call(l,_)))return!1}var w=y.get(o),O=y.get(l);if(w&&O)return w==l&&O==o;var I=!0;y.set(o,l),y.set(l,o);for(var L=m;++E<g;){_=d[E];var V=o[_],P=l[_];if(h)var T=m?h(P,V,_,l,o,y):h(V,P,_,o,l,y);if(!(T===void 0?V===P||f(V,P,c,h,y):T)){I=!1;break}L||(L=_=="constructor")}if(I&&!L){var b=o.constructor,A=l.constructor;b!=A&&"constructor"in o&&"constructor"in l&&!(typeof b=="function"&&b instanceof b&&typeof A=="function"&&A instanceof A)&&(I=!1)}return y.delete(o),y.delete(l),I}return Ig=i,Ig}var bg,VT;function z4(){if(VT)return bg;VT=1;var n=al(),e=es(),t=n(e,"DataView");return bg=t,bg}var Ag,BT;function H4(){if(BT)return Ag;BT=1;var n=al(),e=es(),t=n(e,"Promise");return Ag=t,Ag}var xg,UT;function W4(){if(UT)return xg;UT=1;var n=al(),e=es(),t=n(e,"Set");return xg=t,xg}var kg,qT;function $4(){if(qT)return kg;qT=1;var n=al(),e=es(),t=n(e,"WeakMap");return kg=t,kg}var Rg,zT;function K4(){if(zT)return Rg;zT=1;var n=z4(),e=jv(),t=H4(),r=W4(),i=$4(),o=Jf(),l=Db(),c="[object Map]",h="[object Object]",f="[object Promise]",y="[object Set]",m="[object WeakMap]",d="[object DataView]",g=l(n),C=l(e),S=l(t),E=l(r),_=l(i),w=o;return(n&&w(new n(new ArrayBuffer(1)))!=d||e&&w(new e)!=c||t&&w(t.resolve())!=f||r&&w(new r)!=y||i&&w(new i)!=m)&&(w=function(O){var I=o(O),L=I==h?O.constructor:void 0,V=L?l(L):"";if(V)switch(V){case g:return d;case C:return c;case S:return f;case E:return y;case _:return m}return I}),Rg=w,Rg}var Pg,HT;function G4(){if(HT)return Pg;HT=1;var n=h4(),e=jb(),t=w4(),r=q4(),i=K4(),o=Fv(),l=Fb(),c=Bb(),h=1,f="[object Arguments]",y="[object Array]",m="[object Object]",d=Object.prototype,g=d.hasOwnProperty;function C(S,E,_,w,O,I){var L=o(S),V=o(E),P=L?y:i(S),T=V?y:i(E);P=P==f?m:P,T=T==f?m:T;var b=P==m,A=T==m,x=P==T;if(x&&l(S)){if(!l(E))return!1;L=!0,b=!1}if(x&&!b)return I||(I=new n),L||c(S)?e(S,E,_,w,O,I):t(S,E,P,_,w,O,I);if(!(_&h)){var N=b&&g.call(S,"__wrapped__"),D=A&&g.call(E,"__wrapped__");if(N||D){var z=N?S.value():S,G=D?E.value():E;return I||(I=new n),O(z,G,_,w,I)}}return x?(I||(I=new n),r(S,E,_,w,O,I)):!1}return Pg=C,Pg}var Og,WT;function J4(){if(WT)return Og;WT=1;var n=G4(),e=Xf();function t(r,i,o,l,c){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,o,l,t,c)}return Og=t,Og}var Ng,$T;function Q4(){if($T)return Ng;$T=1;var n=J4();function e(t,r){return n(t,r)}return Ng=e,Ng}var Uh={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var Y4=Uh.exports,KT;function X4(){return KT||(KT=1,function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:Y4,function(){return function(t){var r={};function i(o){if(r[o])return r[o].exports;var l=r[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=r,i.d=function(o,l,c){i.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:c})},i.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(l,"a",l),l},i.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},i.p="",i(i.s=109)}([function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),l=i(18),c=i(19),h=i(45),f=i(46),y=i(47),m=i(48),d=i(49),g=i(12),C=i(32),S=i(33),E=i(31),_=i(1),w={Scope:_.Scope,create:_.create,find:_.find,query:_.query,register:_.register,Container:o.default,Format:l.default,Leaf:c.default,Embed:m.default,Scroll:h.default,Block:y.default,Inline:f.default,Text:d.default,Attributor:{Attribute:g.default,Class:C.default,Style:S.default,Store:E.default}};r.default=w},function(t,r,i){var o=this&&this.__extends||function(){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var O in w)w.hasOwnProperty(O)&&(_[O]=w[O])};return function(_,w){E(_,w);function O(){this.constructor=_}_.prototype=w===null?Object.create(w):(O.prototype=w.prototype,new O)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=function(E){o(_,E);function _(w){var O=this;return w="[Parchment] "+w,O=E.call(this,w)||this,O.message=w,O.name=O.constructor.name,O}return _}(Error);r.ParchmentError=l;var c={},h={},f={},y={};r.DATA_KEY="__blot";var m;(function(E){E[E.TYPE=3]="TYPE",E[E.LEVEL=12]="LEVEL",E[E.ATTRIBUTE=13]="ATTRIBUTE",E[E.BLOT=14]="BLOT",E[E.INLINE=7]="INLINE",E[E.BLOCK=11]="BLOCK",E[E.BLOCK_BLOT=10]="BLOCK_BLOT",E[E.INLINE_BLOT=6]="INLINE_BLOT",E[E.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",E[E.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",E[E.ANY=15]="ANY"})(m=r.Scope||(r.Scope={}));function d(E,_){var w=C(E);if(w==null)throw new l("Unable to create "+E+" blot");var O=w,I=E instanceof Node||E.nodeType===Node.TEXT_NODE?E:O.create(_);return new O(I,_)}r.create=d;function g(E,_){return _===void 0&&(_=!1),E==null?null:E[r.DATA_KEY]!=null?E[r.DATA_KEY].blot:_?g(E.parentNode,_):null}r.find=g;function C(E,_){_===void 0&&(_=m.ANY);var w;if(typeof E=="string")w=y[E]||c[E];else if(E instanceof Text||E.nodeType===Node.TEXT_NODE)w=y.text;else if(typeof E=="number")E&m.LEVEL&m.BLOCK?w=y.block:E&m.LEVEL&m.INLINE&&(w=y.inline);else if(E instanceof HTMLElement){var O=(E.getAttribute("class")||"").split(/\s+/);for(var I in O)if(w=h[O[I]],w)break;w=w||f[E.tagName]}return w==null?null:_&m.LEVEL&w.scope&&_&m.TYPE&w.scope?w:null}r.query=C;function S(){for(var E=[],_=0;_<arguments.length;_++)E[_]=arguments[_];if(E.length>1)return E.map(function(I){return S(I)});var w=E[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new l("Invalid definition");if(w.blotName==="abstract")throw new l("Cannot register abstract class");if(y[w.blotName||w.attrName]=w,typeof w.keyName=="string")c[w.keyName]=w;else if(w.className!=null&&(h[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(I){return I.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var O=Array.isArray(w.tagName)?w.tagName:[w.tagName];O.forEach(function(I){(f[I]==null||w.className==null)&&(f[I]=w)})}return w}r.register=S},function(t,r,i){var o=i(51),l=i(11),c=i(3),h=i(20),f="\0",y=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};y.prototype.insert=function(m,d){var g={};return m.length===0?this:(g.insert=m,d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(g.attributes=d),this.push(g))},y.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},y.prototype.retain=function(m,d){if(m<=0)return this;var g={retain:m};return d!=null&&typeof d=="object"&&Object.keys(d).length>0&&(g.attributes=d),this.push(g)},y.prototype.push=function(m){var d=this.ops.length,g=this.ops[d-1];if(m=c(!0,{},m),typeof g=="object"){if(typeof m.delete=="number"&&typeof g.delete=="number")return this.ops[d-1]={delete:g.delete+m.delete},this;if(typeof g.delete=="number"&&m.insert!=null&&(d-=1,g=this.ops[d-1],typeof g!="object"))return this.ops.unshift(m),this;if(l(m.attributes,g.attributes)){if(typeof m.insert=="string"&&typeof g.insert=="string")return this.ops[d-1]={insert:g.insert+m.insert},typeof m.attributes=="object"&&(this.ops[d-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof g.retain=="number")return this.ops[d-1]={retain:g.retain+m.retain},typeof m.attributes=="object"&&(this.ops[d-1].attributes=m.attributes),this}}return d===this.ops.length?this.ops.push(m):this.ops.splice(d,0,m),this},y.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},y.prototype.filter=function(m){return this.ops.filter(m)},y.prototype.forEach=function(m){this.ops.forEach(m)},y.prototype.map=function(m){return this.ops.map(m)},y.prototype.partition=function(m){var d=[],g=[];return this.forEach(function(C){var S=m(C)?d:g;S.push(C)}),[d,g]},y.prototype.reduce=function(m,d){return this.ops.reduce(m,d)},y.prototype.changeLength=function(){return this.reduce(function(m,d){return d.insert?m+h.length(d):d.delete?m-d.delete:m},0)},y.prototype.length=function(){return this.reduce(function(m,d){return m+h.length(d)},0)},y.prototype.slice=function(m,d){m=m||0,typeof d!="number"&&(d=1/0);for(var g=[],C=h.iterator(this.ops),S=0;S<d&&C.hasNext();){var E;S<m?E=C.next(m-S):(E=C.next(d-S),g.push(E)),S+=h.length(E)}return new y(g)},y.prototype.compose=function(m){var d=h.iterator(this.ops),g=h.iterator(m.ops),C=[],S=g.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){for(var E=S.retain;d.peekType()==="insert"&&d.peekLength()<=E;)E-=d.peekLength(),C.push(d.next());S.retain-E>0&&g.next(S.retain-E)}for(var _=new y(C);d.hasNext()||g.hasNext();)if(g.peekType()==="insert")_.push(g.next());else if(d.peekType()==="delete")_.push(d.next());else{var w=Math.min(d.peekLength(),g.peekLength()),O=d.next(w),I=g.next(w);if(typeof I.retain=="number"){var L={};typeof O.retain=="number"?L.retain=w:L.insert=O.insert;var V=h.attributes.compose(O.attributes,I.attributes,typeof O.retain=="number");if(V&&(L.attributes=V),_.push(L),!g.hasNext()&&l(_.ops[_.ops.length-1],L)){var P=new y(d.rest());return _.concat(P).chop()}}else typeof I.delete=="number"&&typeof O.retain=="number"&&_.push(I)}return _.chop()},y.prototype.concat=function(m){var d=new y(this.ops.slice());return m.ops.length>0&&(d.push(m.ops[0]),d.ops=d.ops.concat(m.ops.slice(1))),d},y.prototype.diff=function(m,d){if(this.ops===m.ops)return new y;var g=[this,m].map(function(w){return w.map(function(O){if(O.insert!=null)return typeof O.insert=="string"?O.insert:f;var I=w===m?"on":"with";throw new Error("diff() called "+I+" non-document")}).join("")}),C=new y,S=o(g[0],g[1],d),E=h.iterator(this.ops),_=h.iterator(m.ops);return S.forEach(function(w){for(var O=w[1].length;O>0;){var I=0;switch(w[0]){case o.INSERT:I=Math.min(_.peekLength(),O),C.push(_.next(I));break;case o.DELETE:I=Math.min(O,E.peekLength()),E.next(I),C.delete(I);break;case o.EQUAL:I=Math.min(E.peekLength(),_.peekLength(),O);var L=E.next(I),V=_.next(I);l(L.insert,V.insert)?C.retain(I,h.attributes.diff(L.attributes,V.attributes)):C.push(V).delete(I);break}O-=I}}),C.chop()},y.prototype.eachLine=function(m,d){d=d||`
`;for(var g=h.iterator(this.ops),C=new y,S=0;g.hasNext();){if(g.peekType()!=="insert")return;var E=g.peek(),_=h.length(E)-g.peekLength(),w=typeof E.insert=="string"?E.insert.indexOf(d,_)-_:-1;if(w<0)C.push(g.next());else if(w>0)C.push(g.next(w));else{if(m(C,g.next(1).attributes||{},S)===!1)return;S+=1,C=new y}}C.length()>0&&m(C,{},S)},y.prototype.transform=function(m,d){if(d=!!d,typeof m=="number")return this.transformPosition(m,d);for(var g=h.iterator(this.ops),C=h.iterator(m.ops),S=new y;g.hasNext()||C.hasNext();)if(g.peekType()==="insert"&&(d||C.peekType()!=="insert"))S.retain(h.length(g.next()));else if(C.peekType()==="insert")S.push(C.next());else{var E=Math.min(g.peekLength(),C.peekLength()),_=g.next(E),w=C.next(E);if(_.delete)continue;w.delete?S.push(w):S.retain(E,h.attributes.transform(_.attributes,w.attributes,d))}return S.chop()},y.prototype.transformPosition=function(m,d){d=!!d;for(var g=h.iterator(this.ops),C=0;g.hasNext()&&C<=m;){var S=g.peekLength(),E=g.peekType();if(g.next(),E==="delete"){m-=Math.min(S,m-C);continue}else E==="insert"&&(C<m||!d)&&(m+=S);C+=S}return m},t.exports=y},function(t,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h=function(g){return typeof Array.isArray=="function"?Array.isArray(g):o.call(g)==="[object Array]"},f=function(g){if(!g||o.call(g)!=="[object Object]")return!1;var C=i.call(g,"constructor"),S=g.constructor&&g.constructor.prototype&&i.call(g.constructor.prototype,"isPrototypeOf");if(g.constructor&&!C&&!S)return!1;var E;for(E in g);return typeof E>"u"||i.call(g,E)},y=function(g,C){l&&C.name==="__proto__"?l(g,C.name,{enumerable:!0,configurable:!0,value:C.newValue,writable:!0}):g[C.name]=C.newValue},m=function(g,C){if(C==="__proto__")if(i.call(g,C)){if(c)return c(g,C).value}else return;return g[C]};t.exports=function d(){var g,C,S,E,_,w,O=arguments[0],I=1,L=arguments.length,V=!1;for(typeof O=="boolean"&&(V=O,O=arguments[1]||{},I=2),(O==null||typeof O!="object"&&typeof O!="function")&&(O={});I<L;++I)if(g=arguments[I],g!=null)for(C in g)S=m(O,C),E=m(g,C),O!==E&&(V&&E&&(f(E)||(_=h(E)))?(_?(_=!1,w=S&&h(S)?S:[]):w=S&&f(S)?S:{},y(O,{name:C,newValue:d(V,w,E)})):typeof E<"u"&&y(O,{name:C,newValue:E}));return O}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function x(N,D){for(var z=0;z<D.length;z++){var G=D[z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(N,G.key,G)}}return function(N,D,z){return D&&x(N.prototype,D),z&&x(N,z),N}}(),l=function x(N,D,z){N===null&&(N=Function.prototype);var G=Object.getOwnPropertyDescriptor(N,D);if(G===void 0){var re=Object.getPrototypeOf(N);return re===null?void 0:x(re,D,z)}else{if("value"in G)return G.value;var Z=G.get;return Z===void 0?void 0:Z.call(z)}},c=i(3),h=O(c),f=i(2),y=O(f),m=i(0),d=O(m),g=i(16),C=O(g),S=i(6),E=O(S),_=i(7),w=O(_);function O(x){return x&&x.__esModule?x:{default:x}}function I(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")}function L(x,N){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:x}function V(x,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);x.prototype=Object.create(N&&N.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(x,N):x.__proto__=N)}var P=1,T=function(x){V(N,x);function N(){return I(this,N),L(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return o(N,[{key:"attach",value:function(){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new y.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(z,G){var re=d.default.query(z,d.default.Scope.BLOCK_ATTRIBUTE);re!=null&&this.attributes.attribute(re,G)}},{key:"formatAt",value:function(z,G,re,Z){this.format(re,Z)}},{key:"insertAt",value:function(z,G,re){if(typeof G=="string"&&G.endsWith(`
`)){var Z=d.default.create(b.blotName);this.parent.insertBefore(Z,z===0?this:this.next),Z.insertAt(0,G.slice(0,-1))}else l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,z,G,re)}}]),N}(d.default.Embed);T.scope=d.default.Scope.BLOCK_BLOT;var b=function(x){V(N,x);function N(D){I(this,N);var z=L(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,D));return z.cache={},z}return o(N,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(z,G){return G.length()===0?z:z.insert(G.value(),A(G))},new y.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(z,G){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,z,G),this.cache={}}},{key:"formatAt",value:function(z,G,re,Z){G<=0||(d.default.query(re,d.default.Scope.BLOCK)?z+G===this.length()&&this.format(re,Z):l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,z,Math.min(G,this.length()-z-1),re,Z),this.cache={})}},{key:"insertAt",value:function(z,G,re){if(re!=null)return l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,z,G,re);if(G.length!==0){var Z=G.split(`
`),ie=Z.shift();ie.length>0&&(z<this.length()-1||this.children.tail==null?l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,Math.min(z,this.length()-1),ie):this.children.tail.insertAt(this.children.tail.length(),ie),this.cache={});var J=this;Z.reduce(function($,F){return J=J.split($,!0),J.insertAt(0,F),F.length},z+ie.length)}}},{key:"insertBefore",value:function(z,G){var re=this.children.head;l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,z,G),re instanceof C.default&&re.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function(z,G){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"moveChildren",this).call(this,z,G),this.cache={}}},{key:"optimize",value:function(z){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,z),this.cache={}}},{key:"path",value:function(z){return l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,z,!0)}},{key:"removeChild",value:function(z){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"removeChild",this).call(this,z),this.cache={}}},{key:"split",value:function(z){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G&&(z===0||z>=this.length()-P)){var re=this.clone();return z===0?(this.parent.insertBefore(re,this),this):(this.parent.insertBefore(re,this.next),re)}else{var Z=l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"split",this).call(this,z,G);return this.cache={},Z}}}]),N}(d.default.Block);b.blotName="block",b.tagName="P",b.defaultChild="break",b.allowedChildren=[E.default,d.default.Embed,w.default];function A(x){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x==null||(typeof x.formats=="function"&&(N=(0,h.default)(N,x.formats())),x.parent==null||x.parent.blotName=="scroll"||x.parent.statics.scope!==x.statics.scope)?N:A(x.parent,N)}r.bubbleFormats=A,r.BlockEmbed=T,r.default=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},l=function(){function J($,F){var U=[],H=!0,ne=!1,te=void 0;try{for(var W=$[Symbol.iterator](),X;!(H=(X=W.next()).done)&&(U.push(X.value),!(F&&U.length===F));H=!0);}catch(Q){ne=!0,te=Q}finally{try{!H&&W.return&&W.return()}finally{if(ne)throw te}}return U}return function($,F){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return J($,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function J($,F){for(var U=0;U<F.length;U++){var H=F[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty($,H.key,H)}}return function($,F,U){return F&&J($.prototype,F),U&&J($,U),$}}();i(50);var h=i(2),f=A(h),y=i(14),m=A(y),d=i(8),g=A(d),C=i(9),S=A(C),E=i(0),_=A(E),w=i(15),O=A(w),I=i(3),L=A(I),V=i(10),P=A(V),T=i(34),b=A(T);function A(J){return J&&J.__esModule?J:{default:J}}function x(J,$,F){return $ in J?Object.defineProperty(J,$,{value:F,enumerable:!0,configurable:!0,writable:!0}):J[$]=F,J}function N(J,$){if(!(J instanceof $))throw new TypeError("Cannot call a class as a function")}var D=(0,P.default)("quill"),z=function(){c(J,null,[{key:"debug",value:function(F){F===!0&&(F="log"),P.default.level(F)}},{key:"find",value:function(F){return F.__quill||_.default.find(F)}},{key:"import",value:function(F){return this.imports[F]==null&&D.error("Cannot import "+F+". Are you sure it was registered?"),this.imports[F]}},{key:"register",value:function(F,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof F!="string"){var te=F.attrName||F.blotName;typeof te=="string"?this.register("formats/"+te,F,U):Object.keys(F).forEach(function(W){H.register(W,F[W],U)})}else this.imports[F]!=null&&!ne&&D.warn("Overwriting "+F+" with",U),this.imports[F]=U,(F.startsWith("blots/")||F.startsWith("formats/"))&&U.blotName!=="abstract"?_.default.register(U):F.startsWith("modules")&&typeof U.register=="function"&&U.register()}}]);function J($){var F=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,J),this.options=G($,U),this.container=this.options.container,this.container==null)return D.error("Invalid Quill container",$);this.options.debug&&J.debug(this.options.debug);var H=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=_.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new O.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,function(te){te===g.default.events.TEXT_CHANGE&&F.root.classList.toggle("ql-blank",F.editor.isBlank())}),this.emitter.on(g.default.events.SCROLL_UPDATE,function(te,W){var X=F.selection.lastRange,Q=X&&X.length===0?X.index:void 0;re.call(F,function(){return F.editor.update(null,W,Q)},te)});var ne=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+H+"<p><br></p></div>");this.setContents(ne),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(J,[{key:"addContainer",value:function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof F=="string"){var H=F;F=document.createElement("div"),F.classList.add(H)}return this.container.insertBefore(F,U),F}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(F,U,H){var ne=this,te=Z(F,U,H),W=l(te,4);return F=W[0],U=W[1],H=W[3],re.call(this,function(){return ne.editor.deleteText(F,U)},H,F,-1*U)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(F),this.container.classList.toggle("ql-disabled",!F)}},{key:"focus",value:function(){var F=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=F,this.scrollIntoView()}},{key:"format",value:function(F,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;return re.call(this,function(){var te=H.getSelection(!0),W=new f.default;if(te==null)return W;if(_.default.query(F,_.default.Scope.BLOCK))W=H.editor.formatLine(te.index,te.length,x({},F,U));else{if(te.length===0)return H.selection.format(F,U),W;W=H.editor.formatText(te.index,te.length,x({},F,U))}return H.setSelection(te,g.default.sources.SILENT),W},ne)}},{key:"formatLine",value:function(F,U,H,ne,te){var W=this,X=void 0,Q=Z(F,U,H,ne,te),ee=l(Q,4);return F=ee[0],U=ee[1],X=ee[2],te=ee[3],re.call(this,function(){return W.editor.formatLine(F,U,X)},te,F,0)}},{key:"formatText",value:function(F,U,H,ne,te){var W=this,X=void 0,Q=Z(F,U,H,ne,te),ee=l(Q,4);return F=ee[0],U=ee[1],X=ee[2],te=ee[3],re.call(this,function(){return W.editor.formatText(F,U,X)},te,F,0)}},{key:"getBounds",value:function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=void 0;typeof F=="number"?H=this.selection.getBounds(F,U):H=this.selection.getBounds(F.index,F.length);var ne=this.container.getBoundingClientRect();return{bottom:H.bottom-ne.top,height:H.height,left:H.left-ne.left,right:H.right-ne.left,top:H.top-ne.top,width:H.width}}},{key:"getContents",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-F,H=Z(F,U),ne=l(H,2);return F=ne[0],U=ne[1],this.editor.getContents(F,U)}},{key:"getFormat",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof F=="number"?this.editor.getFormat(F,U):this.editor.getFormat(F.index,F.length)}},{key:"getIndex",value:function(F){return F.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(F){return this.scroll.leaf(F)}},{key:"getLine",value:function(F){return this.scroll.line(F)}},{key:"getLines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof F!="number"?this.scroll.lines(F.index,F.length):this.scroll.lines(F,U)}},{key:"getModule",value:function(F){return this.theme.modules[F]}},{key:"getSelection",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return F&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-F,H=Z(F,U),ne=l(H,2);return F=ne[0],U=ne[1],this.editor.getText(F,U)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(F,U,H){var ne=this,te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:J.sources.API;return re.call(this,function(){return ne.editor.insertEmbed(F,U,H)},te,F)}},{key:"insertText",value:function(F,U,H,ne,te){var W=this,X=void 0,Q=Z(F,0,H,ne,te),ee=l(Q,4);return F=ee[0],X=ee[2],te=ee[3],re.call(this,function(){return W.editor.insertText(F,U,X)},te,F,U.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(F,U,H){this.clipboard.dangerouslyPasteHTML(F,U,H)}},{key:"removeFormat",value:function(F,U,H){var ne=this,te=Z(F,U,H),W=l(te,4);return F=W[0],U=W[1],H=W[3],re.call(this,function(){return ne.editor.removeFormat(F,U)},H,F)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(F){var U=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return re.call(this,function(){F=new f.default(F);var ne=U.getLength(),te=U.editor.deleteText(0,ne),W=U.editor.applyDelta(F),X=W.ops[W.ops.length-1];X!=null&&typeof X.insert=="string"&&X.insert[X.insert.length-1]===`
`&&(U.editor.deleteText(U.getLength()-1,1),W.delete(1));var Q=te.compose(W);return Q},H)}},{key:"setSelection",value:function(F,U,H){if(F==null)this.selection.setRange(null,U||J.sources.API);else{var ne=Z(F,U,H),te=l(ne,4);F=te[0],U=te[1],H=te[3],this.selection.setRange(new w.Range(F,U),H),H!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API,H=new f.default().insert(F);return this.setContents(H,U)}},{key:"update",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,U=this.scroll.update(F);return this.selection.update(F),U}},{key:"updateContents",value:function(F){var U=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.default.sources.API;return re.call(this,function(){return F=new f.default(F),U.editor.applyDelta(F,H)},H,!0)}}]),J}();z.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},z.events=g.default.events,z.sources=g.default.sources,z.version="1.3.7",z.imports={delta:f.default,parchment:_.default,"core/module":S.default,"core/theme":b.default};function G(J,$){if($=(0,L.default)(!0,{container:J,modules:{clipboard:!0,keyboard:!0,history:!0}},$),!$.theme||$.theme===z.DEFAULTS.theme)$.theme=b.default;else if($.theme=z.import("themes/"+$.theme),$.theme==null)throw new Error("Invalid theme "+$.theme+". Did you register it?");var F=(0,L.default)(!0,{},$.theme.DEFAULTS);[F,$].forEach(function(ne){ne.modules=ne.modules||{},Object.keys(ne.modules).forEach(function(te){ne.modules[te]===!0&&(ne.modules[te]={})})});var U=Object.keys(F.modules).concat(Object.keys($.modules)),H=U.reduce(function(ne,te){var W=z.import("modules/"+te);return W==null?D.error("Cannot load "+te+" module. Are you sure you registered it?"):ne[te]=W.DEFAULTS||{},ne},{});return $.modules!=null&&$.modules.toolbar&&$.modules.toolbar.constructor!==Object&&($.modules.toolbar={container:$.modules.toolbar}),$=(0,L.default)(!0,{},z.DEFAULTS,{modules:H},F,$),["bounds","container","scrollingContainer"].forEach(function(ne){typeof $[ne]=="string"&&($[ne]=document.querySelector($[ne]))}),$.modules=Object.keys($.modules).reduce(function(ne,te){return $.modules[te]&&(ne[te]=$.modules[te]),ne},{}),$}function re(J,$,F,U){if(this.options.strict&&!this.isEnabled()&&$===g.default.sources.USER)return new f.default;var H=F==null?null:this.getSelection(),ne=this.editor.delta,te=J();if(H!=null&&(F===!0&&(F=H.index),U==null?H=ie(H,te,$):U!==0&&(H=ie(H,F,U,$)),this.setSelection(H,g.default.sources.SILENT)),te.length()>0){var W,X=[g.default.events.TEXT_CHANGE,te,ne,$];if((W=this.emitter).emit.apply(W,[g.default.events.EDITOR_CHANGE].concat(X)),$!==g.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,X)}}return te}function Z(J,$,F,U,H){var ne={};return typeof J.index=="number"&&typeof J.length=="number"?typeof $!="number"?(H=U,U=F,F=$,$=J.length,J=J.index):($=J.length,J=J.index):typeof $!="number"&&(H=U,U=F,F=$,$=0),(typeof F>"u"?"undefined":o(F))==="object"?(ne=F,H=U):typeof F=="string"&&(U!=null?ne[F]=U:H=F),H=H||g.default.sources.API,[J,$,ne,H]}function ie(J,$,F,U){if(J==null)return null;var H=void 0,ne=void 0;if($ instanceof f.default){var te=[J.index,J.index+J.length].map(function(ee){return $.transformPosition(ee,U!==g.default.sources.USER)}),W=l(te,2);H=W[0],ne=W[1]}else{var X=[J.index,J.index+J.length].map(function(ee){return ee<$||ee===$&&U===g.default.sources.USER?ee:F>=0?ee+F:Math.max($,ee+F)}),Q=l(X,2);H=Q[0],ne=Q[1]}return new w.Range(H,ne-H)}r.expandConfig=G,r.overload=Z,r.default=z},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(_,w){for(var O=0;O<w.length;O++){var I=w[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,w,O){return w&&E(_.prototype,w),O&&E(_,O),_}}(),l=function E(_,w,O){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,w);if(I===void 0){var L=Object.getPrototypeOf(_);return L===null?void 0:E(L,w,O)}else{if("value"in I)return I.value;var V=I.get;return V===void 0?void 0:V.call(O)}},c=i(7),h=m(c),f=i(0),y=m(f);function m(E){return E&&E.__esModule?E:{default:E}}function d(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function g(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:E}function C(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var S=function(E){C(_,E);function _(){return d(this,_),g(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"formatAt",value:function(O,I,L,V){if(_.compare(this.statics.blotName,L)<0&&y.default.query(L,y.default.Scope.BLOT)){var P=this.isolate(O,I);V&&P.wrap(L,V)}else l(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,O,I,L,V)}},{key:"optimize",value:function(O){if(l(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,O),this.parent instanceof _&&_.compare(this.statics.blotName,this.parent.statics.blotName)>0){var I=this.parent.isolate(this.offset(),this.length());this.moveChildren(I),I.wrap(this)}}}],[{key:"compare",value:function(O,I){var L=_.order.indexOf(O),V=_.order.indexOf(I);return L>=0||V>=0?L-V:O===I?0:O<I?-1:1}}]),_}(y.default.Inline);S.allowedChildren=[S,y.default.Embed,h.default],S.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}function h(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function f(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function y(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var m=function(d){y(g,d);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(l.default.Text);r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function w(O,I){for(var L=0;L<I.length;L++){var V=I[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(O,V.key,V)}}return function(O,I,L){return I&&w(O.prototype,I),L&&w(O,L),O}}(),l=function w(O,I,L){O===null&&(O=Function.prototype);var V=Object.getOwnPropertyDescriptor(O,I);if(V===void 0){var P=Object.getPrototypeOf(O);return P===null?void 0:w(P,I,L)}else{if("value"in V)return V.value;var T=V.get;return T===void 0?void 0:T.call(L)}},c=i(54),h=m(c),f=i(10),y=m(f);function m(w){return w&&w.__esModule?w:{default:w}}function d(w,O){if(!(w instanceof O))throw new TypeError("Cannot call a class as a function")}function g(w,O){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:w}function C(w,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);w.prototype=Object.create(O&&O.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(w,O):w.__proto__=O)}var S=(0,y.default)("quill:events"),E=["selectionchange","mousedown","mouseup","click"];E.forEach(function(w){document.addEventListener(w,function(){for(var O=arguments.length,I=Array(O),L=0;L<O;L++)I[L]=arguments[L];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(V){if(V.__quill&&V.__quill.emitter){var P;(P=V.__quill.emitter).handleDOM.apply(P,I)}})})});var _=function(w){C(O,w);function O(){d(this,O);var I=g(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return I.listeners={},I.on("error",S.error),I}return o(O,[{key:"emit",value:function(){S.log.apply(S,arguments),l(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(L){for(var V=arguments.length,P=Array(V>1?V-1:0),T=1;T<V;T++)P[T-1]=arguments[T];(this.listeners[L.type]||[]).forEach(function(b){var A=b.node,x=b.handler;(L.target===A||A.contains(L.target))&&x.apply(void 0,[L].concat(P))})}},{key:"listenDOM",value:function(L,V,P){this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push({node:V,handler:P})}}]),O}(h.default);_.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},_.sources={API:"api",SILENT:"silent",USER:"user"},r.default=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function c(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,c),this.quill=h,this.options=f};l.DEFAULTS={},r.default=l},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],l="warn";function c(f){if(o.indexOf(f)<=o.indexOf(l)){for(var y,m=arguments.length,d=Array(m>1?m-1:0),g=1;g<m;g++)d[g-1]=arguments[g];(y=console)[f].apply(y,d)}}function h(f){return o.reduce(function(y,m){return y[m]=c.bind(console,m,f),y},{})}c.level=h.level=function(f){l=f},r.default=h},function(t,r,i){var o=Array.prototype.slice,l=i(52),c=i(53),h=t.exports=function(d,g,C){return C||(C={}),d===g?!0:d instanceof Date&&g instanceof Date?d.getTime()===g.getTime():!d||!g||typeof d!="object"&&typeof g!="object"?C.strict?d===g:d==g:m(d,g,C)};function f(d){return d==null}function y(d){return!(!d||typeof d!="object"||typeof d.length!="number"||typeof d.copy!="function"||typeof d.slice!="function"||d.length>0&&typeof d[0]!="number")}function m(d,g,C){var S,E;if(f(d)||f(g)||d.prototype!==g.prototype)return!1;if(c(d))return c(g)?(d=o.call(d),g=o.call(g),h(d,g,C)):!1;if(y(d)){if(!y(g)||d.length!==g.length)return!1;for(S=0;S<d.length;S++)if(d[S]!==g[S])return!1;return!0}try{var _=l(d),w=l(g)}catch{return!1}if(_.length!=w.length)return!1;for(_.sort(),w.sort(),S=_.length-1;S>=0;S--)if(_[S]!=w[S])return!1;for(S=_.length-1;S>=0;S--)if(E=_[S],!h(d[E],g[E],C))return!1;return typeof d==typeof g}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),l=function(){function c(h,f,y){y===void 0&&(y={}),this.attrName=h,this.keyName=f;var m=o.Scope.TYPE&o.Scope.ATTRIBUTE;y.scope!=null?this.scope=y.scope&o.Scope.LEVEL|m:this.scope=o.Scope.ATTRIBUTE,y.whitelist!=null&&(this.whitelist=y.whitelist)}return c.keys=function(h){return[].map.call(h.attributes,function(f){return f.name})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(h.setAttribute(this.keyName,f),!0):!1},c.prototype.canAdd=function(h,f){var y=o.query(h,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return y==null?!1:this.whitelist==null?!0:typeof f=="string"?this.whitelist.indexOf(f.replace(/["']/g,""))>-1:this.whitelist.indexOf(f)>-1},c.prototype.remove=function(h){h.removeAttribute(this.keyName)},c.prototype.value=function(h){var f=h.getAttribute(this.keyName);return this.canAdd(h,f)&&f?f:""},c}();r.default=l},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function T(b,A){var x=[],N=!0,D=!1,z=void 0;try{for(var G=b[Symbol.iterator](),re;!(N=(re=G.next()).done)&&(x.push(re.value),!(A&&x.length===A));N=!0);}catch(Z){D=!0,z=Z}finally{try{!N&&G.return&&G.return()}finally{if(D)throw z}}return x}return function(b,A){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return T(b,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function T(b,A){for(var x=0;x<A.length;x++){var N=A[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,A,x){return A&&T(b.prototype,A),x&&T(b,x),b}}(),c=function T(b,A,x){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,A);if(N===void 0){var D=Object.getPrototypeOf(b);return D===null?void 0:T(D,A,x)}else{if("value"in N)return N.value;var z=N.get;return z===void 0?void 0:z.call(x)}},h=i(2),f=w(h),y=i(0),m=w(y),d=i(4),g=w(d),C=i(6),S=w(C),E=i(7),_=w(E);function w(T){return T&&T.__esModule?T:{default:T}}function O(T,b){if(!(T instanceof b))throw new TypeError("Cannot call a class as a function")}function I(T,b){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:T}function L(T,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);T.prototype=Object.create(b&&b.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(T,b):T.__proto__=b)}var V=function(T){L(b,T);function b(){return O(this,b),I(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(S.default);V.blotName="code",V.tagName="CODE";var P=function(T){L(b,T);function b(){return O(this,b),I(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return l(b,[{key:"delta",value:function(){var x=this,N=this.domNode.textContent;return N.endsWith(`
`)&&(N=N.slice(0,-1)),N.split(`
`).reduce(function(D,z){return D.insert(z).insert(`
`,x.formats())},new f.default)}},{key:"format",value:function(x,N){if(!(x===this.statics.blotName&&N)){var D=this.descendant(_.default,this.length()-1),z=o(D,1),G=z[0];G!=null&&G.deleteAt(G.length()-1,1),c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,x,N)}}},{key:"formatAt",value:function(x,N,D,z){if(N!==0&&!(m.default.query(D,m.default.Scope.BLOCK)==null||D===this.statics.blotName&&z===this.statics.formats(this.domNode))){var G=this.newlineIndex(x);if(!(G<0||G>=x+N)){var re=this.newlineIndex(x,!0)+1,Z=G-re+1,ie=this.isolate(re,Z),J=ie.next;ie.format(D,z),J instanceof b&&J.formatAt(0,x-re+N-Z,D,z)}}}},{key:"insertAt",value:function(x,N,D){if(D==null){var z=this.descendant(_.default,x),G=o(z,2),re=G[0],Z=G[1];re.insertAt(Z,N)}}},{key:"length",value:function(){var x=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?x:x+1}},{key:"newlineIndex",value:function(x){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N)return this.domNode.textContent.slice(0,x).lastIndexOf(`
`);var D=this.domNode.textContent.slice(x).indexOf(`
`);return D>-1?x+D:-1}},{key:"optimize",value:function(x){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,x);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===N.statics.formats(N.domNode)&&(N.optimize(x),N.moveChildren(this),N.remove())}},{key:"replace",value:function(x){c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replace",this).call(this,x),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(N){var D=m.default.find(N);D==null?N.parentNode.removeChild(N):D instanceof m.default.Embed?D.remove():D.unwrap()})}}],[{key:"create",value:function(x){var N=c(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,x);return N.setAttribute("spellcheck",!1),N}},{key:"formats",value:function(){return!0}}]),b}(g.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",r.Code=V,r.default=P},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},l=function(){function J($,F){var U=[],H=!0,ne=!1,te=void 0;try{for(var W=$[Symbol.iterator](),X;!(H=(X=W.next()).done)&&(U.push(X.value),!(F&&U.length===F));H=!0);}catch(Q){ne=!0,te=Q}finally{try{!H&&W.return&&W.return()}finally{if(ne)throw te}}return U}return function($,F){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return J($,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function J($,F){for(var U=0;U<F.length;U++){var H=F[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty($,H.key,H)}}return function($,F,U){return F&&J($.prototype,F),U&&J($,U),$}}(),h=i(2),f=N(h),y=i(20),m=N(y),d=i(0),g=N(d),C=i(13),S=N(C),E=i(24),_=N(E),w=i(4),O=N(w),I=i(16),L=N(I),V=i(21),P=N(V),T=i(11),b=N(T),A=i(3),x=N(A);function N(J){return J&&J.__esModule?J:{default:J}}function D(J,$,F){return $ in J?Object.defineProperty(J,$,{value:F,enumerable:!0,configurable:!0,writable:!0}):J[$]=F,J}function z(J,$){if(!(J instanceof $))throw new TypeError("Cannot call a class as a function")}var G=/^[ -~]*$/,re=function(){function J($){z(this,J),this.scroll=$,this.delta=this.getDelta()}return c(J,[{key:"applyDelta",value:function(F){var U=this,H=!1;this.scroll.update();var ne=this.scroll.length();return this.scroll.batchStart(),F=ie(F),F.reduce(function(te,W){var X=W.retain||W.delete||W.insert.length||1,Q=W.attributes||{};if(W.insert!=null){if(typeof W.insert=="string"){var ee=W.insert;ee.endsWith(`
`)&&H&&(H=!1,ee=ee.slice(0,-1)),te>=ne&&!ee.endsWith(`
`)&&(H=!0),U.scroll.insertAt(te,ee);var ae=U.scroll.line(te),ge=l(ae,2),Se=ge[0],Pe=ge[1],Oe=(0,x.default)({},(0,w.bubbleFormats)(Se));if(Se instanceof O.default){var Ne=Se.descendant(g.default.Leaf,Pe),Ue=l(Ne,1),Xe=Ue[0];Oe=(0,x.default)(Oe,(0,w.bubbleFormats)(Xe))}Q=m.default.attributes.diff(Oe,Q)||{}}else if(o(W.insert)==="object"){var ue=Object.keys(W.insert)[0];if(ue==null)return te;U.scroll.insertAt(te,ue,W.insert[ue])}ne+=X}return Object.keys(Q).forEach(function(de){U.scroll.formatAt(te,X,de,Q[de])}),te+X},0),F.reduce(function(te,W){return typeof W.delete=="number"?(U.scroll.deleteAt(te,W.delete),te):te+(W.retain||W.insert.length||1)},0),this.scroll.batchEnd(),this.update(F)}},{key:"deleteText",value:function(F,U){return this.scroll.deleteAt(F,U),this.update(new f.default().retain(F).delete(U))}},{key:"formatLine",value:function(F,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(ne).forEach(function(te){if(!(H.scroll.whitelist!=null&&!H.scroll.whitelist[te])){var W=H.scroll.lines(F,Math.max(U,1)),X=U;W.forEach(function(Q){var ee=Q.length();if(!(Q instanceof S.default))Q.format(te,ne[te]);else{var ae=F-Q.offset(H.scroll),ge=Q.newlineIndex(ae+X)-ae+1;Q.formatAt(ae,ge,te,ne[te])}X-=ee})}}),this.scroll.optimize(),this.update(new f.default().retain(F).retain(U,(0,P.default)(ne)))}},{key:"formatText",value:function(F,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(ne).forEach(function(te){H.scroll.formatAt(F,U,te,ne[te])}),this.update(new f.default().retain(F).retain(U,(0,P.default)(ne)))}},{key:"getContents",value:function(F,U){return this.delta.slice(F,F+U)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(F,U){return F.concat(U.delta())},new f.default)}},{key:"getFormat",value:function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],ne=[];U===0?this.scroll.path(F).forEach(function(W){var X=l(W,1),Q=X[0];Q instanceof O.default?H.push(Q):Q instanceof g.default.Leaf&&ne.push(Q)}):(H=this.scroll.lines(F,U),ne=this.scroll.descendants(g.default.Leaf,F,U));var te=[H,ne].map(function(W){if(W.length===0)return{};for(var X=(0,w.bubbleFormats)(W.shift());Object.keys(X).length>0;){var Q=W.shift();if(Q==null)return X;X=Z((0,w.bubbleFormats)(Q),X)}return X});return x.default.apply(x.default,te)}},{key:"getText",value:function(F,U){return this.getContents(F,U).filter(function(H){return typeof H.insert=="string"}).map(function(H){return H.insert}).join("")}},{key:"insertEmbed",value:function(F,U,H){return this.scroll.insertAt(F,U,H),this.update(new f.default().retain(F).insert(D({},U,H)))}},{key:"insertText",value:function(F,U){var H=this,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U=U.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(F,U),Object.keys(ne).forEach(function(te){H.scroll.formatAt(F,U.length,te,ne[te])}),this.update(new f.default().retain(F).insert(U,(0,P.default)(ne)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var F=this.scroll.children.head;return F.statics.blotName!==O.default.blotName||F.children.length>1?!1:F.children.head instanceof L.default}},{key:"removeFormat",value:function(F,U){var H=this.getText(F,U),ne=this.scroll.line(F+U),te=l(ne,2),W=te[0],X=te[1],Q=0,ee=new f.default;W!=null&&(W instanceof S.default?Q=W.newlineIndex(X)-X+1:Q=W.length()-X,ee=W.delta().slice(X,X+Q-1).insert(`
`));var ae=this.getContents(F,U+Q),ge=ae.diff(new f.default().insert(H).concat(ee)),Se=new f.default().retain(F).concat(ge);return this.applyDelta(Se)}},{key:"update",value:function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ne=this.delta;if(U.length===1&&U[0].type==="characterData"&&U[0].target.data.match(G)&&g.default.find(U[0].target)){var te=g.default.find(U[0].target),W=(0,w.bubbleFormats)(te),X=te.offset(this.scroll),Q=U[0].oldValue.replace(_.default.CONTENTS,""),ee=new f.default().insert(Q),ae=new f.default().insert(te.value()),ge=new f.default().retain(X).concat(ee.diff(ae,H));F=ge.reduce(function(Se,Pe){return Pe.insert?Se.insert(Pe.insert,W):Se.push(Pe)},new f.default),this.delta=ne.compose(F)}else this.delta=this.getDelta(),(!F||!(0,b.default)(ne.compose(F),this.delta))&&(F=ne.diff(this.delta,H));return F}}]),J}();function Z(J,$){return Object.keys($).reduce(function(F,U){return J[U]==null||($[U]===J[U]?F[U]=$[U]:Array.isArray($[U])?$[U].indexOf(J[U])<0&&(F[U]=$[U].concat([J[U]])):F[U]=[$[U],J[U]]),F},{})}function ie(J){return J.reduce(function($,F){if(F.insert===1){var U=(0,P.default)(F.attributes);return delete U.image,$.insert({image:F.attributes.image},U)}if(F.attributes!=null&&(F.attributes.list===!0||F.attributes.bullet===!0)&&(F=(0,P.default)(F),F.attributes.list?F.attributes.list="ordered":(F.attributes.list="bullet",delete F.attributes.bullet)),typeof F.insert=="string"){var H=F.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return $.insert(H,F.attributes)}return $.push(F)},new f.default)}r.default=re},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function T(b,A){var x=[],N=!0,D=!1,z=void 0;try{for(var G=b[Symbol.iterator](),re;!(N=(re=G.next()).done)&&(x.push(re.value),!(A&&x.length===A));N=!0);}catch(Z){D=!0,z=Z}finally{try{!N&&G.return&&G.return()}finally{if(D)throw z}}return x}return function(b,A){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return T(b,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function T(b,A){for(var x=0;x<A.length;x++){var N=A[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,A,x){return A&&T(b.prototype,A),x&&T(b,x),b}}(),c=i(0),h=_(c),f=i(21),y=_(f),m=i(11),d=_(m),g=i(8),C=_(g),S=i(10),E=_(S);function _(T){return T&&T.__esModule?T:{default:T}}function w(T){if(Array.isArray(T)){for(var b=0,A=Array(T.length);b<T.length;b++)A[b]=T[b];return A}else return Array.from(T)}function O(T,b){if(!(T instanceof b))throw new TypeError("Cannot call a class as a function")}var I=(0,E.default)("quill:selection"),L=function T(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;O(this,T),this.index=b,this.length=A},V=function(){function T(b,A){var x=this;O(this,T),this.emitter=A,this.scroll=b,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new L(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){x.mouseDown||setTimeout(x.update.bind(x,C.default.sources.USER),1)}),this.emitter.on(C.default.events.EDITOR_CHANGE,function(N,D){N===C.default.events.TEXT_CHANGE&&D.length()>0&&x.update(C.default.sources.SILENT)}),this.emitter.on(C.default.events.SCROLL_BEFORE_UPDATE,function(){if(x.hasFocus()){var N=x.getNativeRange();N!=null&&N.start.node!==x.cursor.textNode&&x.emitter.once(C.default.events.SCROLL_UPDATE,function(){try{x.setNativeRange(N.start.node,N.start.offset,N.end.node,N.end.offset)}catch{}})}}),this.emitter.on(C.default.events.SCROLL_OPTIMIZE,function(N,D){if(D.range){var z=D.range,G=z.startNode,re=z.startOffset,Z=z.endNode,ie=z.endOffset;x.setNativeRange(G,re,Z,ie)}}),this.update(C.default.sources.SILENT)}return l(T,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var x=A.cursor.restore();if(!x)return;setTimeout(function(){A.setNativeRange(x.startNode,x.startOffset,x.endNode,x.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(C.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,x){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var N=this.getNativeRange();if(!(N==null||!N.native.collapsed||h.default.query(A,h.default.Scope.BLOCK))){if(N.start.node!==this.cursor.textNode){var D=h.default.find(N.start.node,!1);if(D==null)return;if(D instanceof h.default.Leaf){var z=D.split(N.start.offset);D.parent.insertBefore(this.cursor,z)}else D.insertBefore(this.cursor,N.start.node);this.cursor.attach()}this.cursor.format(A,x),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=this.scroll.length();A=Math.min(A,N-1),x=Math.min(A+x,N-1)-A;var D=void 0,z=this.scroll.leaf(A),G=o(z,2),re=G[0],Z=G[1];if(re==null)return null;var ie=re.position(Z,!0),J=o(ie,2);D=J[0],Z=J[1];var $=document.createRange();if(x>0){$.setStart(D,Z);var F=this.scroll.leaf(A+x),U=o(F,2);if(re=U[0],Z=U[1],re==null)return null;var H=re.position(Z,!0),ne=o(H,2);return D=ne[0],Z=ne[1],$.setEnd(D,Z),$.getBoundingClientRect()}else{var te="left",W=void 0;return D instanceof Text?(Z<D.data.length?($.setStart(D,Z),$.setEnd(D,Z+1)):($.setStart(D,Z-1),$.setEnd(D,Z),te="right"),W=$.getBoundingClientRect()):(W=re.domNode.getBoundingClientRect(),Z>0&&(te="right")),{bottom:W.top+W.height,height:W.height,left:W[te],right:W[te],top:W.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var x=A.getRangeAt(0);if(x==null)return null;var N=this.normalizeNative(x);return I.info("getNativeRange",N),N}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var x=this.normalizedToRange(A);return[x,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var x=this,N=[[A.start.node,A.start.offset]];A.native.collapsed||N.push([A.end.node,A.end.offset]);var D=N.map(function(re){var Z=o(re,2),ie=Z[0],J=Z[1],$=h.default.find(ie,!0),F=$.offset(x.scroll);return J===0?F:$ instanceof h.default.Container?F+$.length():F+$.index(ie,J)}),z=Math.min(Math.max.apply(Math,w(D)),this.scroll.length()-1),G=Math.min.apply(Math,[z].concat(w(D)));return new L(G,z-G)}},{key:"normalizeNative",value:function(A){if(!P(this.root,A.startContainer)||!A.collapsed&&!P(this.root,A.endContainer))return null;var x={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[x.start,x.end].forEach(function(N){for(var D=N.node,z=N.offset;!(D instanceof Text)&&D.childNodes.length>0;)if(D.childNodes.length>z)D=D.childNodes[z],z=0;else if(D.childNodes.length===z)D=D.lastChild,z=D instanceof Text?D.data.length:D.childNodes.length+1;else break;N.node=D,N.offset=z}),x}},{key:"rangeToNative",value:function(A){var x=this,N=A.collapsed?[A.index]:[A.index,A.index+A.length],D=[],z=this.scroll.length();return N.forEach(function(G,re){G=Math.min(z-1,G);var Z=void 0,ie=x.scroll.leaf(G),J=o(ie,2),$=J[0],F=J[1],U=$.position(F,re!==0),H=o(U,2);Z=H[0],F=H[1],D.push(Z,F)}),D.length<2&&(D=D.concat(D)),D}},{key:"scrollIntoView",value:function(A){var x=this.lastRange;if(x!=null){var N=this.getBounds(x.index,x.length);if(N!=null){var D=this.scroll.length()-1,z=this.scroll.line(Math.min(x.index,D)),G=o(z,1),re=G[0],Z=re;if(x.length>0){var ie=this.scroll.line(Math.min(x.index+x.length,D)),J=o(ie,1);Z=J[0]}if(!(re==null||Z==null)){var $=A.getBoundingClientRect();N.top<$.top?A.scrollTop-=$.top-N.top:N.bottom>$.bottom&&(A.scrollTop+=N.bottom-$.bottom)}}}}},{key:"setNativeRange",value:function(A,x){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x,z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(I.info("setNativeRange",A,x,N,D),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||N.parentNode==null))){var G=document.getSelection();if(G!=null)if(A!=null){this.hasFocus()||this.root.focus();var re=(this.getNativeRange()||{}).native;if(re==null||z||A!==re.startContainer||x!==re.startOffset||N!==re.endContainer||D!==re.endOffset){A.tagName=="BR"&&(x=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),N.tagName=="BR"&&(D=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode);var Z=document.createRange();Z.setStart(A,x),Z.setEnd(N,D),G.removeAllRanges(),G.addRange(Z)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C.default.sources.API;if(typeof x=="string"&&(N=x,x=!1),I.info("setRange",A),A!=null){var D=this.rangeToNative(A);this.setNativeRange.apply(this,w(D).concat([x]))}else this.setNativeRange(null);this.update(N)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C.default.sources.USER,x=this.lastRange,N=this.getRange(),D=o(N,2),z=D[0],G=D[1];if(this.lastRange=z,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,d.default)(x,this.lastRange)){var re;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var Z=[C.default.events.SELECTION_CHANGE,(0,y.default)(this.lastRange),(0,y.default)(x),A];if((re=this.emitter).emit.apply(re,[C.default.events.EDITOR_CHANGE].concat(Z)),A!==C.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,Z)}}}}]),T}();function P(T,b){try{b.parentNode}catch{return!1}return b instanceof Text&&(b=b.parentNode),T.contains(b)}r.Range=L,r.default=V},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function C(S,E){for(var _=0;_<E.length;_++){var w=E[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,w.key,w)}}return function(S,E,_){return E&&C(S.prototype,E),_&&C(S,_),S}}(),l=function C(S,E,_){S===null&&(S=Function.prototype);var w=Object.getOwnPropertyDescriptor(S,E);if(w===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:C(O,E,_)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(_)}},c=i(0),h=f(c);function f(C){return C&&C.__esModule?C:{default:C}}function y(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function d(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var g=function(C){d(S,C);function S(){return y(this,S),m(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"insertInto",value:function(_,w){_.children.length===0?l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertInto",this).call(this,_,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),S}(h.default.Embed);g.blotName="break",g.tagName="BR",r.default=g},function(t,r,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var C in g)g.hasOwnProperty(C)&&(d[C]=g[C])};return function(d,g){m(d,g);function C(){this.constructor=d}d.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(44),c=i(30),h=i(1),f=function(m){o(d,m);function d(g){var C=m.call(this,g)||this;return C.build(),C}return d.prototype.appendChild=function(g){this.insertBefore(g)},d.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(g){g.attach()})},d.prototype.build=function(){var g=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(C){try{var S=y(C);g.insertBefore(S,g.children.head||void 0)}catch(E){if(E instanceof h.ParchmentError)return;throw E}})},d.prototype.deleteAt=function(g,C){if(g===0&&C===this.length())return this.remove();this.children.forEachAt(g,C,function(S,E,_){S.deleteAt(E,_)})},d.prototype.descendant=function(g,C){var S=this.children.find(C),E=S[0],_=S[1];return g.blotName==null&&g(E)||g.blotName!=null&&E instanceof g?[E,_]:E instanceof d?E.descendant(g,_):[null,-1]},d.prototype.descendants=function(g,C,S){C===void 0&&(C=0),S===void 0&&(S=Number.MAX_VALUE);var E=[],_=S;return this.children.forEachAt(C,S,function(w,O,I){(g.blotName==null&&g(w)||g.blotName!=null&&w instanceof g)&&E.push(w),w instanceof d&&(E=E.concat(w.descendants(g,O,_))),_-=I}),E},d.prototype.detach=function(){this.children.forEach(function(g){g.detach()}),m.prototype.detach.call(this)},d.prototype.formatAt=function(g,C,S,E){this.children.forEachAt(g,C,function(_,w,O){_.formatAt(w,O,S,E)})},d.prototype.insertAt=function(g,C,S){var E=this.children.find(g),_=E[0],w=E[1];if(_)_.insertAt(w,C,S);else{var O=S==null?h.create("text",C):h.create(C,S);this.appendChild(O)}},d.prototype.insertBefore=function(g,C){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(S){return g instanceof S}))throw new h.ParchmentError("Cannot insert "+g.statics.blotName+" into "+this.statics.blotName);g.insertInto(this,C)},d.prototype.length=function(){return this.children.reduce(function(g,C){return g+C.length()},0)},d.prototype.moveChildren=function(g,C){this.children.forEach(function(S){g.insertBefore(S,C)})},d.prototype.optimize=function(g){if(m.prototype.optimize.call(this,g),this.children.length===0)if(this.statics.defaultChild!=null){var C=h.create(this.statics.defaultChild);this.appendChild(C),C.optimize(g)}else this.remove()},d.prototype.path=function(g,C){C===void 0&&(C=!1);var S=this.children.find(g,C),E=S[0],_=S[1],w=[[this,g]];return E instanceof d?w.concat(E.path(_,C)):(E!=null&&w.push([E,_]),w)},d.prototype.removeChild=function(g){this.children.remove(g)},d.prototype.replace=function(g){g instanceof d&&g.moveChildren(this),m.prototype.replace.call(this,g)},d.prototype.split=function(g,C){if(C===void 0&&(C=!1),!C){if(g===0)return this;if(g===this.length())return this.next}var S=this.clone();return this.parent.insertBefore(S,this.next),this.children.forEachAt(g,this.length(),function(E,_,w){E=E.split(_,C),S.appendChild(E)}),S},d.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},d.prototype.update=function(g,C){var S=this,E=[],_=[];g.forEach(function(w){w.target===S.domNode&&w.type==="childList"&&(E.push.apply(E,w.addedNodes),_.push.apply(_,w.removedNodes))}),_.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var O=h.find(w);O!=null&&(O.domNode.parentNode==null||O.domNode.parentNode===S.domNode)&&O.detach()}}),E.filter(function(w){return w.parentNode==S.domNode}).sort(function(w,O){return w===O?0:w.compareDocumentPosition(O)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var O=null;w.nextSibling!=null&&(O=h.find(w.nextSibling));var I=y(w);(I.next!=O||I.next==null)&&(I.parent!=null&&I.parent.removeChild(S),S.insertBefore(I,O||void 0))})},d}(c.default);function y(m){var d=h.find(m);if(d==null)try{d=h.create(m)}catch{d=h.create(h.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(C){d.domNode.appendChild(C)}),m.parentNode&&m.parentNode.replaceChild(d.domNode,m),d.attach()}return d}r.default=f},function(t,r,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var C in g)g.hasOwnProperty(C)&&(d[C]=g[C])};return function(d,g){m(d,g);function C(){this.constructor=d}d.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(12),c=i(31),h=i(17),f=i(1),y=function(m){o(d,m);function d(g){var C=m.call(this,g)||this;return C.attributes=new c.default(C.domNode),C}return d.formats=function(g){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return g.tagName.toLowerCase()},d.prototype.format=function(g,C){var S=f.query(g);S instanceof l.default?this.attributes.attribute(S,C):C&&S!=null&&(g!==this.statics.blotName||this.formats()[g]!==C)&&this.replaceWith(g,C)},d.prototype.formats=function(){var g=this.attributes.values(),C=this.statics.formats(this.domNode);return C!=null&&(g[this.statics.blotName]=C),g},d.prototype.replaceWith=function(g,C){var S=m.prototype.replaceWith.call(this,g,C);return this.attributes.copy(S),S},d.prototype.update=function(g,C){var S=this;m.prototype.update.call(this,g,C),g.some(function(E){return E.target===S.domNode&&E.type==="attributes"})&&this.attributes.build()},d.prototype.wrap=function(g,C){var S=m.prototype.wrap.call(this,g,C);return S instanceof d&&S.statics.scope===this.statics.scope&&this.attributes.move(S),S},d}(h.default);r.default=y},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var d in m)m.hasOwnProperty(d)&&(y[d]=m[d])};return function(y,m){f(y,m);function d(){this.constructor=y}y.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(30),c=i(1),h=function(f){o(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return y.value=function(m){return!0},y.prototype.index=function(m,d){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(d,1):-1},y.prototype.position=function(m,d){var g=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(g+=1),[this.parent.domNode,g]},y.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},y.scope=c.Scope.INLINE_BLOT,y}(l.default);r.default=h},function(t,r,i){var o=i(11),l=i(3),c={attributes:{compose:function(f,y,m){typeof f!="object"&&(f={}),typeof y!="object"&&(y={});var d=l(!0,{},y);m||(d=Object.keys(d).reduce(function(C,S){return d[S]!=null&&(C[S]=d[S]),C},{}));for(var g in f)f[g]!==void 0&&y[g]===void 0&&(d[g]=f[g]);return Object.keys(d).length>0?d:void 0},diff:function(f,y){typeof f!="object"&&(f={}),typeof y!="object"&&(y={});var m=Object.keys(f).concat(Object.keys(y)).reduce(function(d,g){return o(f[g],y[g])||(d[g]=y[g]===void 0?null:y[g]),d},{});return Object.keys(m).length>0?m:void 0},transform:function(f,y,m){if(typeof f!="object")return y;if(typeof y=="object"){if(!m)return y;var d=Object.keys(y).reduce(function(g,C){return f[C]===void 0&&(g[C]=y[C]),g},{});return Object.keys(d).length>0?d:void 0}}},iterator:function(f){return new h(f)},length:function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}};function h(f){this.ops=f,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(f){f||(f=1/0);var y=this.ops[this.index];if(y){var m=this.offset,d=c.length(y);if(f>=d-m?(f=d-m,this.index+=1,this.offset=0):this.offset+=f,typeof y.delete=="number")return{delete:f};var g={};return y.attributes&&(g.attributes=y.attributes),typeof y.retain=="number"?g.retain=f:typeof y.insert=="string"?g.insert=y.insert.substr(m,f):g.insert=y.insert,g}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,y=this.index,m=this.next(),d=this.ops.slice(this.index);return this.offset=f,this.index=y,[m].concat(d)}else return[]},t.exports=c},function(t,r){var i=function(){function o(S,E){return E!=null&&S instanceof E}var l;try{l=Map}catch{l=function(){}}var c;try{c=Set}catch{c=function(){}}var h;try{h=Promise}catch{h=function(){}}function f(S,E,_,w,O){typeof E=="object"&&(_=E.depth,w=E.prototype,O=E.includeNonEnumerable,E=E.circular);var I=[],L=[],V=typeof Buffer<"u";typeof E>"u"&&(E=!0),typeof _>"u"&&(_=1/0);function P(T,b){if(T===null)return null;if(b===0)return T;var A,x;if(typeof T!="object")return T;if(o(T,l))A=new l;else if(o(T,c))A=new c;else if(o(T,h))A=new h(function($,F){T.then(function(U){$(P(U,b-1))},function(U){F(P(U,b-1))})});else if(f.__isArray(T))A=[];else if(f.__isRegExp(T))A=new RegExp(T.source,C(T)),T.lastIndex&&(A.lastIndex=T.lastIndex);else if(f.__isDate(T))A=new Date(T.getTime());else{if(V&&Buffer.isBuffer(T))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(T.length):A=new Buffer(T.length),T.copy(A),A;o(T,Error)?A=Object.create(T):typeof w>"u"?(x=Object.getPrototypeOf(T),A=Object.create(x)):(A=Object.create(w),x=w)}if(E){var N=I.indexOf(T);if(N!=-1)return L[N];I.push(T),L.push(A)}o(T,l)&&T.forEach(function($,F){var U=P(F,b-1),H=P($,b-1);A.set(U,H)}),o(T,c)&&T.forEach(function($){var F=P($,b-1);A.add(F)});for(var D in T){var z;x&&(z=Object.getOwnPropertyDescriptor(x,D)),!(z&&z.set==null)&&(A[D]=P(T[D],b-1))}if(Object.getOwnPropertySymbols)for(var G=Object.getOwnPropertySymbols(T),D=0;D<G.length;D++){var re=G[D],Z=Object.getOwnPropertyDescriptor(T,re);Z&&!Z.enumerable&&!O||(A[re]=P(T[re],b-1),Z.enumerable||Object.defineProperty(A,re,{enumerable:!1}))}if(O)for(var ie=Object.getOwnPropertyNames(T),D=0;D<ie.length;D++){var J=ie[D],Z=Object.getOwnPropertyDescriptor(T,J);Z&&Z.enumerable||(A[J]=P(T[J],b-1),Object.defineProperty(A,J,{enumerable:!1}))}return A}return P(S,_)}f.clonePrototype=function(E){if(E===null)return null;var _=function(){};return _.prototype=E,new _};function y(S){return Object.prototype.toString.call(S)}f.__objToStr=y;function m(S){return typeof S=="object"&&y(S)==="[object Date]"}f.__isDate=m;function d(S){return typeof S=="object"&&y(S)==="[object Array]"}f.__isArray=d;function g(S){return typeof S=="object"&&y(S)==="[object RegExp]"}f.__isRegExp=g;function C(S){var E="";return S.global&&(E+="g"),S.ignoreCase&&(E+="i"),S.multiline&&(E+="m"),E}return f.__getRegExpFlags=C,f}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(x,N){var D=[],z=!0,G=!1,re=void 0;try{for(var Z=x[Symbol.iterator](),ie;!(z=(ie=Z.next()).done)&&(D.push(ie.value),!(N&&D.length===N));z=!0);}catch(J){G=!0,re=J}finally{try{!z&&Z.return&&Z.return()}finally{if(G)throw re}}return D}return function(x,N){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return A(x,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(x,N){for(var D=0;D<N.length;D++){var z=N[D];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(x,z.key,z)}}return function(x,N,D){return N&&A(x.prototype,N),D&&A(x,D),x}}(),c=function A(x,N,D){x===null&&(x=Function.prototype);var z=Object.getOwnPropertyDescriptor(x,N);if(z===void 0){var G=Object.getPrototypeOf(x);return G===null?void 0:A(G,N,D)}else{if("value"in z)return z.value;var re=z.get;return re===void 0?void 0:re.call(D)}},h=i(0),f=I(h),y=i(8),m=I(y),d=i(4),g=I(d),C=i(16),S=I(C),E=i(13),_=I(E),w=i(25),O=I(w);function I(A){return A&&A.__esModule?A:{default:A}}function L(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}function V(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:A}function P(A,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}function T(A){return A instanceof g.default||A instanceof d.BlockEmbed}var b=function(A){P(x,A);function x(N,D){L(this,x);var z=V(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N));return z.emitter=D.emitter,Array.isArray(D.whitelist)&&(z.whitelist=D.whitelist.reduce(function(G,re){return G[re]=!0,G},{})),z.domNode.addEventListener("DOMNodeInserted",function(){}),z.optimize(),z.enable(),z}return l(x,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(D,z){var G=this.line(D),re=o(G,2),Z=re[0],ie=re[1],J=this.line(D+z),$=o(J,1),F=$[0];if(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,D,z),F!=null&&Z!==F&&ie>0){if(Z instanceof d.BlockEmbed||F instanceof d.BlockEmbed){this.optimize();return}if(Z instanceof _.default){var U=Z.newlineIndex(Z.length(),!0);if(U>-1&&(Z=Z.split(U+1),Z===F)){this.optimize();return}}else if(F instanceof _.default){var H=F.newlineIndex(0);H>-1&&F.split(H+1)}var ne=F.children.head instanceof S.default?null:F.children.head;Z.moveChildren(F,ne),Z.remove()}this.optimize()}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",D)}},{key:"formatAt",value:function(D,z,G,re){this.whitelist!=null&&!this.whitelist[G]||(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,D,z,G,re),this.optimize())}},{key:"insertAt",value:function(D,z,G){if(!(G!=null&&this.whitelist!=null&&!this.whitelist[z])){if(D>=this.length())if(G==null||f.default.query(z,f.default.Scope.BLOCK)==null){var re=f.default.create(this.statics.defaultChild);this.appendChild(re),G==null&&z.endsWith(`
`)&&(z=z.slice(0,-1)),re.insertAt(0,z,G)}else{var Z=f.default.create(z,G);this.appendChild(Z)}else c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,D,z,G);this.optimize()}}},{key:"insertBefore",value:function(D,z){if(D.statics.scope===f.default.Scope.INLINE_BLOT){var G=f.default.create(this.statics.defaultChild);G.appendChild(D),D=G}c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,D,z)}},{key:"leaf",value:function(D){return this.path(D).pop()||[null,-1]}},{key:"line",value:function(D){return D===this.length()?this.line(D-1):this.descendant(T,D)}},{key:"lines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,G=function re(Z,ie,J){var $=[],F=J;return Z.children.forEachAt(ie,J,function(U,H,ne){T(U)?$.push(U):U instanceof f.default.Container&&($=$.concat(re(U,H,F))),F-=ne}),$};return G(this,D,z)}},{key:"optimize",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,D,z),D.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,D,z))}},{key:"path",value:function(D){return c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,D).slice(1)}},{key:"update",value:function(D){if(this.batch!==!0){var z=m.default.sources.USER;typeof D=="string"&&(z=D),Array.isArray(D)||(D=this.observer.takeRecords()),D.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,z,D),c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"update",this).call(this,D.concat([])),D.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,z,D)}}}]),x}(f.default.Scroll);b.blotName="scroll",b.className="ql-editor",b.tagName="DIV",b.defaultChild="block",b.allowedChildren=[g.default,d.BlockEmbed,O.default],r.default=b},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},l=function(){function W(X,Q){var ee=[],ae=!0,ge=!1,Se=void 0;try{for(var Pe=X[Symbol.iterator](),Oe;!(ae=(Oe=Pe.next()).done)&&(ee.push(Oe.value),!(Q&&ee.length===Q));ae=!0);}catch(Ne){ge=!0,Se=Ne}finally{try{!ae&&Pe.return&&Pe.return()}finally{if(ge)throw Se}}return ee}return function(X,Q){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return W(X,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function W(X,Q){for(var ee=0;ee<Q.length;ee++){var ae=Q[ee];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(X,ae.key,ae)}}return function(X,Q,ee){return Q&&W(X.prototype,Q),ee&&W(X,ee),X}}(),h=i(21),f=A(h),y=i(11),m=A(y),d=i(3),g=A(d),C=i(2),S=A(C),E=i(20),_=A(E),w=i(0),O=A(w),I=i(5),L=A(I),V=i(10),P=A(V),T=i(9),b=A(T);function A(W){return W&&W.__esModule?W:{default:W}}function x(W,X,Q){return X in W?Object.defineProperty(W,X,{value:Q,enumerable:!0,configurable:!0,writable:!0}):W[X]=Q,W}function N(W,X){if(!(W instanceof X))throw new TypeError("Cannot call a class as a function")}function D(W,X){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:W}function z(W,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);W.prototype=Object.create(X&&X.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(W,X):W.__proto__=X)}var G=(0,P.default)("quill:keyboard"),re=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Z=function(W){z(X,W),c(X,null,[{key:"match",value:function(ee,ae){return ae=te(ae),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ge){return!!ae[ge]!==ee[ge]&&ae[ge]!==null})?!1:ae.key===(ee.which||ee.keyCode)}}]);function X(Q,ee){N(this,X);var ae=D(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,Q,ee));return ae.bindings={},Object.keys(ae.options.bindings).forEach(function(ge){ge==="list autofill"&&Q.scroll.whitelist!=null&&!Q.scroll.whitelist.list||ae.options.bindings[ge]&&ae.addBinding(ae.options.bindings[ge])}),ae.addBinding({key:X.keys.ENTER,shiftKey:null},U),ae.addBinding({key:X.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ae.addBinding({key:X.keys.BACKSPACE},{collapsed:!0},J),ae.addBinding({key:X.keys.DELETE},{collapsed:!0},$)):(ae.addBinding({key:X.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},J),ae.addBinding({key:X.keys.DELETE},{collapsed:!0,suffix:/^.?$/},$)),ae.addBinding({key:X.keys.BACKSPACE},{collapsed:!1},F),ae.addBinding({key:X.keys.DELETE},{collapsed:!1},F),ae.addBinding({key:X.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},J),ae.listen(),ae}return c(X,[{key:"addBinding",value:function(ee){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=te(ee);if(Se==null||Se.key==null)return G.warn("Attempted to add invalid keyboard binding",Se);typeof ae=="function"&&(ae={handler:ae}),typeof ge=="function"&&(ge={handler:ge}),Se=(0,g.default)(Se,ae,ge),this.bindings[Se.key]=this.bindings[Se.key]||[],this.bindings[Se.key].push(Se)}},{key:"listen",value:function(){var ee=this;this.quill.root.addEventListener("keydown",function(ae){if(!ae.defaultPrevented){var ge=ae.which||ae.keyCode,Se=(ee.bindings[ge]||[]).filter(function(yt){return X.match(ae,yt)});if(Se.length!==0){var Pe=ee.quill.getSelection();if(!(Pe==null||!ee.quill.hasFocus())){var Oe=ee.quill.getLine(Pe.index),Ne=l(Oe,2),Ue=Ne[0],Xe=Ne[1],ue=ee.quill.getLeaf(Pe.index),de=l(ue,2),Ee=de[0],Ae=de[1],ve=Pe.length===0?[Ee,Ae]:ee.quill.getLeaf(Pe.index+Pe.length),$e=l(ve,2),De=$e[0],ze=$e[1],Ge=Ee instanceof O.default.Text?Ee.value().slice(0,Ae):"",tt=De instanceof O.default.Text?De.value().slice(ze):"",rt={collapsed:Pe.length===0,empty:Pe.length===0&&Ue.length()<=1,format:ee.quill.getFormat(Pe),offset:Xe,prefix:Ge,suffix:tt},$n=Se.some(function(yt){if(yt.collapsed!=null&&yt.collapsed!==rt.collapsed||yt.empty!=null&&yt.empty!==rt.empty||yt.offset!=null&&yt.offset!==rt.offset)return!1;if(Array.isArray(yt.format)){if(yt.format.every(function(Rt){return rt.format[Rt]==null}))return!1}else if(o(yt.format)==="object"&&!Object.keys(yt.format).every(function(Rt){return yt.format[Rt]===!0?rt.format[Rt]!=null:yt.format[Rt]===!1?rt.format[Rt]==null:(0,m.default)(yt.format[Rt],rt.format[Rt])}))return!1;return yt.prefix!=null&&!yt.prefix.test(rt.prefix)||yt.suffix!=null&&!yt.suffix.test(rt.suffix)?!1:yt.handler.call(ee,Pe,rt)!==!0});$n&&ae.preventDefault()}}}})}}]),X}(b.default);Z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Z.DEFAULTS={bindings:{bold:ne("bold"),italic:ne("italic"),underline:ne("underline"),indent:{key:Z.keys.TAB,format:["blockquote","indent","list"],handler:function(X,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","+1",L.default.sources.USER)}},outdent:{key:Z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(X,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","-1",L.default.sources.USER)}},"outdent backspace":{key:Z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(X,Q){Q.format.indent!=null?this.quill.format("indent","-1",L.default.sources.USER):Q.format.list!=null&&this.quill.format("list",!1,L.default.sources.USER)}},"indent code-block":H(!0),"outdent code-block":H(!1),"remove tab":{key:Z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(X){this.quill.deleteText(X.index-1,1,L.default.sources.USER)}},tab:{key:Z.keys.TAB,handler:function(X){this.quill.history.cutoff();var Q=new S.default().retain(X.index).delete(X.length).insert("	");this.quill.updateContents(Q,L.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(X.index+1,L.default.sources.SILENT)}},"list empty enter":{key:Z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(X,Q){this.quill.format("list",!1,L.default.sources.USER),Q.format.indent&&this.quill.format("indent",!1,L.default.sources.USER)}},"checklist enter":{key:Z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(X){var Q=this.quill.getLine(X.index),ee=l(Q,2),ae=ee[0],ge=ee[1],Se=(0,g.default)({},ae.formats(),{list:"checked"}),Pe=new S.default().retain(X.index).insert(`
`,Se).retain(ae.length()-ge-1).retain(1,{list:"unchecked"});this.quill.updateContents(Pe,L.default.sources.USER),this.quill.setSelection(X.index+1,L.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(X,Q){var ee=this.quill.getLine(X.index),ae=l(ee,2),ge=ae[0],Se=ae[1],Pe=new S.default().retain(X.index).insert(`
`,Q.format).retain(ge.length()-Se-1).retain(1,{header:null});this.quill.updateContents(Pe,L.default.sources.USER),this.quill.setSelection(X.index+1,L.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(X,Q){var ee=Q.prefix.length,ae=this.quill.getLine(X.index),ge=l(ae,2),Se=ge[0],Pe=ge[1];if(Pe>ee)return!0;var Oe=void 0;switch(Q.prefix.trim()){case"[]":case"[ ]":Oe="unchecked";break;case"[x]":Oe="checked";break;case"-":case"*":Oe="bullet";break;default:Oe="ordered"}this.quill.insertText(X.index," ",L.default.sources.USER),this.quill.history.cutoff();var Ne=new S.default().retain(X.index-Pe).delete(ee+1).retain(Se.length()-2-Pe).retain(1,{list:Oe});this.quill.updateContents(Ne,L.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(X.index-ee,L.default.sources.SILENT)}},"code exit":{key:Z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(X){var Q=this.quill.getLine(X.index),ee=l(Q,2),ae=ee[0],ge=ee[1],Se=new S.default().retain(X.index+ae.length()-ge-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Se,L.default.sources.USER)}},"embed left":ie(Z.keys.LEFT,!1),"embed left shift":ie(Z.keys.LEFT,!0),"embed right":ie(Z.keys.RIGHT,!1),"embed right shift":ie(Z.keys.RIGHT,!0)}};function ie(W,X){var Q,ee=W===Z.keys.LEFT?"prefix":"suffix";return Q={key:W,shiftKey:X,altKey:null},x(Q,ee,/^$/),x(Q,"handler",function(ge){var Se=ge.index;W===Z.keys.RIGHT&&(Se+=ge.length+1);var Pe=this.quill.getLeaf(Se),Oe=l(Pe,1),Ne=Oe[0];return Ne instanceof O.default.Embed?(W===Z.keys.LEFT?X?this.quill.setSelection(ge.index-1,ge.length+1,L.default.sources.USER):this.quill.setSelection(ge.index-1,L.default.sources.USER):X?this.quill.setSelection(ge.index,ge.length+1,L.default.sources.USER):this.quill.setSelection(ge.index+ge.length+1,L.default.sources.USER),!1):!0}),Q}function J(W,X){if(!(W.index===0||this.quill.getLength()<=1)){var Q=this.quill.getLine(W.index),ee=l(Q,1),ae=ee[0],ge={};if(X.offset===0){var Se=this.quill.getLine(W.index-1),Pe=l(Se,1),Oe=Pe[0];if(Oe!=null&&Oe.length()>1){var Ne=ae.formats(),Ue=this.quill.getFormat(W.index-1,1);ge=_.default.attributes.diff(Ne,Ue)||{}}}var Xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(X.prefix)?2:1;this.quill.deleteText(W.index-Xe,Xe,L.default.sources.USER),Object.keys(ge).length>0&&this.quill.formatLine(W.index-Xe,Xe,ge,L.default.sources.USER),this.quill.focus()}}function $(W,X){var Q=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(X.suffix)?2:1;if(!(W.index>=this.quill.getLength()-Q)){var ee={},ae=0,ge=this.quill.getLine(W.index),Se=l(ge,1),Pe=Se[0];if(X.offset>=Pe.length()-1){var Oe=this.quill.getLine(W.index+1),Ne=l(Oe,1),Ue=Ne[0];if(Ue){var Xe=Pe.formats(),ue=this.quill.getFormat(W.index,1);ee=_.default.attributes.diff(Xe,ue)||{},ae=Ue.length()}}this.quill.deleteText(W.index,Q,L.default.sources.USER),Object.keys(ee).length>0&&this.quill.formatLine(W.index+ae-1,Q,ee,L.default.sources.USER)}}function F(W){var X=this.quill.getLines(W),Q={};if(X.length>1){var ee=X[0].formats(),ae=X[X.length-1].formats();Q=_.default.attributes.diff(ae,ee)||{}}this.quill.deleteText(W,L.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(W.index,1,Q,L.default.sources.USER),this.quill.setSelection(W.index,L.default.sources.SILENT),this.quill.focus()}function U(W,X){var Q=this;W.length>0&&this.quill.scroll.deleteAt(W.index,W.length);var ee=Object.keys(X.format).reduce(function(ae,ge){return O.default.query(ge,O.default.Scope.BLOCK)&&!Array.isArray(X.format[ge])&&(ae[ge]=X.format[ge]),ae},{});this.quill.insertText(W.index,`
`,ee,L.default.sources.USER),this.quill.setSelection(W.index+1,L.default.sources.SILENT),this.quill.focus(),Object.keys(X.format).forEach(function(ae){ee[ae]==null&&(Array.isArray(X.format[ae])||ae!=="link"&&Q.quill.format(ae,X.format[ae],L.default.sources.USER))})}function H(W){return{key:Z.keys.TAB,shiftKey:!W,format:{"code-block":!0},handler:function(Q){var ee=O.default.query("code-block"),ae=Q.index,ge=Q.length,Se=this.quill.scroll.descendant(ee,ae),Pe=l(Se,2),Oe=Pe[0],Ne=Pe[1];if(Oe!=null){var Ue=this.quill.getIndex(Oe),Xe=Oe.newlineIndex(Ne,!0)+1,ue=Oe.newlineIndex(Ue+Ne+ge),de=Oe.domNode.textContent.slice(Xe,ue).split(`
`);Ne=0,de.forEach(function(Ee,Ae){W?(Oe.insertAt(Xe+Ne,ee.TAB),Ne+=ee.TAB.length,Ae===0?ae+=ee.TAB.length:ge+=ee.TAB.length):Ee.startsWith(ee.TAB)&&(Oe.deleteAt(Xe+Ne,ee.TAB.length),Ne-=ee.TAB.length,Ae===0?ae-=ee.TAB.length:ge-=ee.TAB.length),Ne+=Ee.length+1}),this.quill.update(L.default.sources.USER),this.quill.setSelection(ae,ge,L.default.sources.SILENT)}}}}function ne(W){return{key:W[0].toUpperCase(),shortKey:!0,handler:function(Q,ee){this.quill.format(W,!ee.format[W],L.default.sources.USER)}}}function te(W){if(typeof W=="string"||typeof W=="number")return te({key:W});if((typeof W>"u"?"undefined":o(W))==="object"&&(W=(0,f.default)(W,!1)),typeof W.key=="string")if(Z.keys[W.key.toUpperCase()]!=null)W.key=Z.keys[W.key.toUpperCase()];else if(W.key.length===1)W.key=W.key.toUpperCase().charCodeAt(0);else return null;return W.shortKey&&(W[re]=W.shortKey,delete W.shortKey),W}r.default=Z,r.SHORTKEY=re},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(w,O){var I=[],L=!0,V=!1,P=void 0;try{for(var T=w[Symbol.iterator](),b;!(L=(b=T.next()).done)&&(I.push(b.value),!(O&&I.length===O));L=!0);}catch(A){V=!0,P=A}finally{try{!L&&T.return&&T.return()}finally{if(V)throw P}}return I}return function(w,O){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return _(w,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function _(w,O,I){w===null&&(w=Function.prototype);var L=Object.getOwnPropertyDescriptor(w,O);if(L===void 0){var V=Object.getPrototypeOf(w);return V===null?void 0:_(V,O,I)}else{if("value"in L)return L.value;var P=L.get;return P===void 0?void 0:P.call(I)}},c=function(){function _(w,O){for(var I=0;I<O.length;I++){var L=O[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,O,I){return O&&_(w.prototype,O),I&&_(w,I),w}}(),h=i(0),f=d(h),y=i(7),m=d(y);function d(_){return _&&_.__esModule?_:{default:_}}function g(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function C(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function S(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var E=function(_){S(w,_),c(w,null,[{key:"value",value:function(){}}]);function w(O,I){g(this,w);var L=C(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,O));return L.selection=I,L.textNode=document.createTextNode(w.CONTENTS),L.domNode.appendChild(L.textNode),L._length=0,L}return c(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(I,L){if(this._length!==0)return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,I,L);for(var V=this,P=0;V!=null&&V.statics.scope!==f.default.Scope.BLOCK_BLOT;)P+=V.offset(V.parent),V=V.parent;V!=null&&(this._length=w.CONTENTS.length,V.optimize(),V.formatAt(P,w.CONTENTS.length,I,L),this._length=0)}},{key:"index",value:function(I,L){return I===this.textNode?0:l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,I,L)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var I=this.textNode,L=this.selection.getNativeRange(),V=void 0,P=void 0,T=void 0;if(L!=null&&L.start.node===I&&L.end.node===I){var b=[I,L.start.offset,L.end.offset];V=b[0],P=b[1],T=b[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var A=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof m.default?(V=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=w.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(f.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var x=[P,T].map(function(D){return Math.max(0,Math.min(V.data.length,D-1))}),N=o(x,2);return P=N[0],T=N[1],{startNode:V,startOffset:P,endNode:V,endOffset:T}}}}},{key:"update",value:function(I,L){var V=this;if(I.some(function(T){return T.type==="characterData"&&T.target===V.textNode})){var P=this.restore();P&&(L.range=P)}}},{key:"value",value:function(){return""}}]),w}(f.default.Embed);E.blotName="cursor",E.className="ql-cursor",E.tagName="span",E.CONTENTS="\uFEFF",r.default=E},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),l=f(o),c=i(4),h=f(c);function f(C){return C&&C.__esModule?C:{default:C}}function y(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function d(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var g=function(C){d(S,C);function S(){return y(this,S),m(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(l.default.Container);g.allowedChildren=[h.default,c.BlockEmbed,g],r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function E(_,w){for(var O=0;O<w.length;O++){var I=w[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,w,O){return w&&E(_.prototype,w),O&&E(_,O),_}}(),l=function E(_,w,O){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,w);if(I===void 0){var L=Object.getPrototypeOf(_);return L===null?void 0:E(L,w,O)}else{if("value"in I)return I.value;var V=I.get;return V===void 0?void 0:V.call(O)}},c=i(0),h=f(c);function f(E){return E&&E.__esModule?E:{default:E}}function y(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function m(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:E}function d(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var g=function(E){d(_,E);function _(){return y(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"value",value:function(O){var I=l(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,O);return I.startsWith("rgb(")?(I=I.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+I.split(",").map(function(L){return("00"+parseInt(L).toString(16)).slice(-2)}).join("")):I}}]),_}(h.default.Attributor.Style),C=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),S=new g("color","color",{scope:h.default.Scope.INLINE});r.ColorAttributor=g,r.ColorClass=C,r.ColorStyle=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function S(E,_){for(var w=0;w<_.length;w++){var O=_[w];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}return function(E,_,w){return _&&S(E.prototype,_),w&&S(E,w),E}}(),l=function S(E,_,w){E===null&&(E=Function.prototype);var O=Object.getOwnPropertyDescriptor(E,_);if(O===void 0){var I=Object.getPrototypeOf(E);return I===null?void 0:S(I,_,w)}else{if("value"in O)return O.value;var L=O.get;return L===void 0?void 0:L.call(w)}},c=i(6),h=f(c);function f(S){return S&&S.__esModule?S:{default:S}}function y(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function m(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function d(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var g=function(S){d(E,S);function E(){return y(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"format",value:function(w,O){if(w!==this.statics.blotName||!O)return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,w,O);O=this.constructor.sanitize(O),this.domNode.setAttribute("href",O)}}],[{key:"create",value:function(w){var O=l(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,w);return w=this.sanitize(w),O.setAttribute("href",w),O.setAttribute("rel","noopener noreferrer"),O.setAttribute("target","_blank"),O}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return C(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),E}(h.default);g.blotName="link",g.tagName="A",g.SANITIZED_URL="about:blank",g.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function C(S,E){var _=document.createElement("a");_.href=S;var w=_.href.slice(0,_.href.indexOf(":"));return E.indexOf(w)>-1}r.default=g,r.sanitize=C},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},l=function(){function E(_,w){for(var O=0;O<w.length;O++){var I=w[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,w,O){return w&&E(_.prototype,w),O&&E(_,O),_}}(),c=i(23),h=m(c),f=i(107),y=m(f);function m(E){return E&&E.__esModule?E:{default:E}}function d(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}var g=0;function C(E,_){E.setAttribute(_,E.getAttribute(_)!=="true")}var S=function(){function E(_){var w=this;d(this,E),this.select=_,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(O){switch(O.keyCode){case h.default.keys.ENTER:w.togglePicker();break;case h.default.keys.ESCAPE:w.escape(),O.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(E,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),C(this.label,"aria-expanded"),C(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var O=this,I=document.createElement("span");return I.tabIndex="0",I.setAttribute("role","button"),I.classList.add("ql-picker-item"),w.hasAttribute("value")&&I.setAttribute("data-value",w.getAttribute("value")),w.textContent&&I.setAttribute("data-label",w.textContent),I.addEventListener("click",function(){O.selectItem(I,!0)}),I.addEventListener("keydown",function(L){switch(L.keyCode){case h.default.keys.ENTER:O.selectItem(I,!0),L.preventDefault();break;case h.default.keys.ESCAPE:O.escape(),L.preventDefault();break}}),I}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=y.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,O=document.createElement("span");O.classList.add("ql-picker-options"),O.setAttribute("aria-hidden","true"),O.tabIndex="-1",O.id="ql-picker-options-"+g,g+=1,this.label.setAttribute("aria-controls",O.id),this.options=O,[].slice.call(this.select.options).forEach(function(I){var L=w.buildItem(I);O.appendChild(L),I.selected===!0&&w.selectItem(L)}),this.container.appendChild(O)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(O){w.container.setAttribute(O.name,O.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=this.container.querySelector(".ql-selected");if(w!==I&&(I!=null&&I.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),O))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var L=document.createEvent("Event");L.initEvent("change",!0,!0),this.select.dispatchEvent(L)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var O=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(O)}else this.selectItem(null);var I=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",I)}}]),E}();r.default=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),l=G(o),c=i(5),h=G(c),f=i(4),y=G(f),m=i(16),d=G(m),g=i(25),C=G(g),S=i(24),E=G(S),_=i(35),w=G(_),O=i(6),I=G(O),L=i(22),V=G(L),P=i(7),T=G(P),b=i(55),A=G(b),x=i(42),N=G(x),D=i(23),z=G(D);function G(re){return re&&re.__esModule?re:{default:re}}h.default.register({"blots/block":y.default,"blots/block/embed":f.BlockEmbed,"blots/break":d.default,"blots/container":C.default,"blots/cursor":E.default,"blots/embed":w.default,"blots/inline":I.default,"blots/scroll":V.default,"blots/text":T.default,"modules/clipboard":A.default,"modules/history":N.default,"modules/keyboard":z.default}),l.default.register(y.default,d.default,E.default,I.default,V.default,T.default),r.default=h.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),l=function(){function c(h){this.domNode=h,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(h){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var f;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?f=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?f=document.createElement(h):f=document.createElement(this.tagName[0])):f=document.createElement(this.tagName),this.className&&f.classList.add(this.className),f},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return o.create(h)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},c.prototype.deleteAt=function(h,f){var y=this.isolate(h,f);y.remove()},c.prototype.formatAt=function(h,f,y,m){var d=this.isolate(h,f);if(o.query(y,o.Scope.BLOT)!=null&&m)d.wrap(y,m);else if(o.query(y,o.Scope.ATTRIBUTE)!=null){var g=o.create(this.statics.scope);d.wrap(g),g.format(y,m)}},c.prototype.insertAt=function(h,f,y){var m=y==null?o.create("text",f):o.create(f,y),d=this.split(h);this.parent.insertBefore(m,d)},c.prototype.insertInto=function(h,f){f===void 0&&(f=null),this.parent!=null&&this.parent.children.remove(this);var y=null;h.children.insertBefore(this,f),f!=null&&(y=f.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=y)&&h.domNode.insertBefore(this.domNode,y),this.parent=h,this.attach()},c.prototype.isolate=function(h,f){var y=this.split(h);return y.split(f),y},c.prototype.length=function(){return 1},c.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},c.prototype.optimize=function(h){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},c.prototype.replaceWith=function(h,f){var y=typeof h=="string"?o.create(h,f):h;return y.replace(this),y},c.prototype.split=function(h,f){return h===0?this:this.next},c.prototype.update=function(h,f){},c.prototype.wrap=function(h,f){var y=typeof h=="string"?o.create(h,f):h;return this.parent!=null&&this.parent.insertBefore(y,this.next),y.appendChild(this),y},c.blotName="abstract",c}();r.default=l},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),l=i(32),c=i(33),h=i(1),f=function(){function y(m){this.attributes={},this.domNode=m,this.build()}return y.prototype.attribute=function(m,d){d?m.add(this.domNode,d)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},y.prototype.build=function(){var m=this;this.attributes={};var d=o.default.keys(this.domNode),g=l.default.keys(this.domNode),C=c.default.keys(this.domNode);d.concat(g).concat(C).forEach(function(S){var E=h.query(S,h.Scope.ATTRIBUTE);E instanceof o.default&&(m.attributes[E.attrName]=E)})},y.prototype.copy=function(m){var d=this;Object.keys(this.attributes).forEach(function(g){var C=d.attributes[g].value(d.domNode);m.format(g,C)})},y.prototype.move=function(m){var d=this;this.copy(m),Object.keys(this.attributes).forEach(function(g){d.attributes[g].remove(d.domNode)}),this.attributes={}},y.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(d,g){return d[g]=m.attributes[g].value(m.domNode),d},{})},y}();r.default=f},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var d in m)m.hasOwnProperty(d)&&(y[d]=m[d])};return function(y,m){f(y,m);function d(){this.constructor=y}y.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(12);function c(f,y){var m=f.getAttribute("class")||"";return m.split(/\s+/).filter(function(d){return d.indexOf(y+"-")===0})}var h=function(f){o(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return y.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(d){return d.split("-").slice(0,-1).join("-")})},y.prototype.add=function(m,d){return this.canAdd(m,d)?(this.remove(m),m.classList.add(this.keyName+"-"+d),!0):!1},y.prototype.remove=function(m){var d=c(m,this.keyName);d.forEach(function(g){m.classList.remove(g)}),m.classList.length===0&&m.removeAttribute("class")},y.prototype.value=function(m){var d=c(m,this.keyName)[0]||"",g=d.slice(this.keyName.length+1);return this.canAdd(m,g)?g:""},y}(l.default);r.default=h},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var d in m)m.hasOwnProperty(d)&&(y[d]=m[d])};return function(y,m){f(y,m);function d(){this.constructor=y}y.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(12);function c(f){var y=f.split("-"),m=y.slice(1).map(function(d){return d[0].toUpperCase()+d.slice(1)}).join("");return y[0]+m}var h=function(f){o(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return y.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(d){var g=d.split(":");return g[0].trim()})},y.prototype.add=function(m,d){return this.canAdd(m,d)?(m.style[c(this.keyName)]=d,!0):!1},y.prototype.remove=function(m){m.style[c(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},y.prototype.value=function(m){var d=m.style[c(this.keyName)];return this.canAdd(m,d)?d:""},y}(l.default);r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function h(f,y){for(var m=0;m<y.length;m++){var d=y[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return function(f,y,m){return y&&h(f.prototype,y),m&&h(f,m),f}}();function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(f,y){l(this,h),this.quill=f,this.options=y,this.modules={}}return o(h,[{key:"init",value:function(){var y=this;Object.keys(this.options.modules).forEach(function(m){y.modules[m]==null&&y.addModule(m)})}},{key:"addModule",value:function(y){var m=this.quill.constructor.import("modules/"+y);return this.modules[y]=new m(this.quill,this.options.modules[y]||{}),this.modules[y]}}]),h}();c.DEFAULTS={modules:{}},c.themes={default:c},r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function _(w,O){for(var I=0;I<O.length;I++){var L=O[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,O,I){return O&&_(w.prototype,O),I&&_(w,I),w}}(),l=function _(w,O,I){w===null&&(w=Function.prototype);var L=Object.getOwnPropertyDescriptor(w,O);if(L===void 0){var V=Object.getPrototypeOf(w);return V===null?void 0:_(V,O,I)}else{if("value"in L)return L.value;var P=L.get;return P===void 0?void 0:P.call(I)}},c=i(0),h=m(c),f=i(7),y=m(f);function m(_){return _&&_.__esModule?_:{default:_}}function d(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function g(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function C(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var S="\uFEFF",E=function(_){C(w,_);function w(O){d(this,w);var I=g(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,O));return I.contentNode=document.createElement("span"),I.contentNode.setAttribute("contenteditable",!1),[].slice.call(I.domNode.childNodes).forEach(function(L){I.contentNode.appendChild(L)}),I.leftGuard=document.createTextNode(S),I.rightGuard=document.createTextNode(S),I.domNode.appendChild(I.leftGuard),I.domNode.appendChild(I.contentNode),I.domNode.appendChild(I.rightGuard),I}return o(w,[{key:"index",value:function(I,L){return I===this.leftGuard?0:I===this.rightGuard?1:l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,I,L)}},{key:"restore",value:function(I){var L=void 0,V=void 0,P=I.data.split(S).join("");if(I===this.leftGuard)if(this.prev instanceof y.default){var T=this.prev.length();this.prev.insertAt(T,P),L={startNode:this.prev.domNode,startOffset:T+P.length}}else V=document.createTextNode(P),this.parent.insertBefore(h.default.create(V),this),L={startNode:V,startOffset:P.length};else I===this.rightGuard&&(this.next instanceof y.default?(this.next.insertAt(0,P),L={startNode:this.next.domNode,startOffset:P.length}):(V=document.createTextNode(P),this.parent.insertBefore(h.default.create(V),this.next),L={startNode:V,startOffset:P.length}));return I.data=S,L}},{key:"update",value:function(I,L){var V=this;I.forEach(function(P){if(P.type==="characterData"&&(P.target===V.leftGuard||P.target===V.rightGuard)){var T=V.restore(P.target);T&&(L.range=T)}})}}]),w}(h.default.Embed);r.default=E},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}var h={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},f=new l.default.Attributor.Attribute("align","align",h),y=new l.default.Attributor.Class("align","ql-align",h),m=new l.default.Attributor.Style("align","text-align",h);r.AlignAttribute=f,r.AlignClass=y,r.AlignStyle=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),l=h(o),c=i(26);function h(m){return m&&m.__esModule?m:{default:m}}var f=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),y=new c.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});r.BackgroundClass=f,r.BackgroundStyle=y},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}var h={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},f=new l.default.Attributor.Attribute("direction","dir",h),y=new l.default.Attributor.Class("direction","ql-direction",h),m=new l.default.Attributor.Style("direction","direction",h);r.DirectionAttribute=f,r.DirectionClass=y,r.DirectionStyle=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function _(w,O){for(var I=0;I<O.length;I++){var L=O[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,O,I){return O&&_(w.prototype,O),I&&_(w,I),w}}(),l=function _(w,O,I){w===null&&(w=Function.prototype);var L=Object.getOwnPropertyDescriptor(w,O);if(L===void 0){var V=Object.getPrototypeOf(w);return V===null?void 0:_(V,O,I)}else{if("value"in L)return L.value;var P=L.get;return P===void 0?void 0:P.call(I)}},c=i(0),h=f(c);function f(_){return _&&_.__esModule?_:{default:_}}function y(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function m(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function d(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var g={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},C=new h.default.Attributor.Class("font","ql-font",g),S=function(_){d(w,_);function w(){return y(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return o(w,[{key:"value",value:function(I){return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,I).replace(/["']/g,"")}}]),w}(h.default.Attributor.Style),E=new S("font","font-family",g);r.FontStyle=E,r.FontClass=C},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),l=c(o);function c(y){return y&&y.__esModule?y:{default:y}}var h=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),f=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=h,r.SizeStyle=f},function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function O(I,L){for(var V=0;V<L.length;V++){var P=L[V];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,L,V){return L&&O(I.prototype,L),V&&O(I,V),I}}(),l=i(0),c=d(l),h=i(5),f=d(h),y=i(9),m=d(y);function d(O){return O&&O.__esModule?O:{default:O}}function g(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}function C(O,I){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:O}function S(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);O.prototype=Object.create(I&&I.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(O,I):O.__proto__=I)}var E=function(O){S(I,O);function I(L,V){g(this,I);var P=C(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,L,V));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(f.default.events.EDITOR_CHANGE,function(T,b,A,x){T!==f.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||x===f.default.sources.USER?P.record(b,A):P.transform(b))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return o(I,[{key:"change",value:function(V,P){if(this.stack[V].length!==0){var T=this.stack[V].pop();this.stack[P].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[V],f.default.sources.USER),this.ignoreChange=!1;var b=w(T[V]);this.quill.setSelection(b)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(V,P){if(V.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(P),b=Date.now();if(this.lastRecorded+this.options.delay>b&&this.stack.undo.length>0){var A=this.stack.undo.pop();T=T.compose(A.undo),V=A.redo.compose(V)}else this.lastRecorded=b;this.stack.undo.push({redo:V,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(V){this.stack.undo.forEach(function(P){P.undo=V.transform(P.undo,!0),P.redo=V.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=V.transform(P.undo,!0),P.redo=V.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),I}(m.default);E.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function _(O){var I=O.ops[O.ops.length-1];return I==null?!1:I.insert!=null?typeof I.insert=="string"&&I.insert.endsWith(`
`):I.attributes!=null?Object.keys(I.attributes).some(function(L){return c.default.query(L,c.default.Scope.BLOCK)!=null}):!1}function w(O){var I=O.reduce(function(V,P){return V+=P.delete||0,V},0),L=O.length()-I;return _(O)&&(L-=1),L}r.default=E,r.getLastChangeIndex=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function U(H,ne){for(var te=0;te<ne.length;te++){var W=ne[te];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(H,W.key,W)}}return function(H,ne,te){return ne&&U(H.prototype,ne),te&&U(H,te),H}}(),l=function U(H,ne,te){H===null&&(H=Function.prototype);var W=Object.getOwnPropertyDescriptor(H,ne);if(W===void 0){var X=Object.getPrototypeOf(H);return X===null?void 0:U(X,ne,te)}else{if("value"in W)return W.value;var Q=W.get;return Q===void 0?void 0:Q.call(te)}},c=i(3),h=b(c),f=i(2),y=b(f),m=i(8),d=b(m),g=i(23),C=b(g),S=i(34),E=b(S),_=i(59),w=b(_),O=i(60),I=b(O),L=i(28),V=b(L),P=i(61),T=b(P);function b(U){return U&&U.__esModule?U:{default:U}}function A(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}function x(U,H){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:U}function N(U,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);U.prototype=Object.create(H&&H.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(U,H):U.__proto__=H)}var D=[!1,"center","right","justify"],z=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],G=[!1,"serif","monospace"],re=["1","2","3",!1],Z=["small",!1,"large","huge"],ie=function(U){N(H,U);function H(ne,te){A(this,H);var W=x(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,ne,te)),X=function Q(ee){if(!document.body.contains(ne.root))return document.body.removeEventListener("click",Q);W.tooltip!=null&&!W.tooltip.root.contains(ee.target)&&document.activeElement!==W.tooltip.textbox&&!W.quill.hasFocus()&&W.tooltip.hide(),W.pickers!=null&&W.pickers.forEach(function(ae){ae.container.contains(ee.target)||ae.close()})};return ne.emitter.listenDOM("click",document.body,X),W}return o(H,[{key:"addModule",value:function(te){var W=l(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"addModule",this).call(this,te);return te==="toolbar"&&this.extendToolbar(W),W}},{key:"buildButtons",value:function(te,W){te.forEach(function(X){var Q=X.getAttribute("class")||"";Q.split(/\s+/).forEach(function(ee){if(ee.startsWith("ql-")&&(ee=ee.slice(3),W[ee]!=null))if(ee==="direction")X.innerHTML=W[ee][""]+W[ee].rtl;else if(typeof W[ee]=="string")X.innerHTML=W[ee];else{var ae=X.value||"";ae!=null&&W[ee][ae]&&(X.innerHTML=W[ee][ae])}})})}},{key:"buildPickers",value:function(te,W){var X=this;this.pickers=te.map(function(ee){if(ee.classList.contains("ql-align"))return ee.querySelector("option")==null&&F(ee,D),new I.default(ee,W.align);if(ee.classList.contains("ql-background")||ee.classList.contains("ql-color")){var ae=ee.classList.contains("ql-background")?"background":"color";return ee.querySelector("option")==null&&F(ee,z,ae==="background"?"#ffffff":"#000000"),new w.default(ee,W[ae])}else return ee.querySelector("option")==null&&(ee.classList.contains("ql-font")?F(ee,G):ee.classList.contains("ql-header")?F(ee,re):ee.classList.contains("ql-size")&&F(ee,Z)),new V.default(ee)});var Q=function(){X.pickers.forEach(function(ae){ae.update()})};this.quill.on(d.default.events.EDITOR_CHANGE,Q)}}]),H}(E.default);ie.DEFAULTS=(0,h.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var H=this,ne=this.container.querySelector("input.ql-image[type=file]");ne==null&&(ne=document.createElement("input"),ne.setAttribute("type","file"),ne.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),ne.classList.add("ql-image"),ne.addEventListener("change",function(){if(ne.files!=null&&ne.files[0]!=null){var te=new FileReader;te.onload=function(W){var X=H.quill.getSelection(!0);H.quill.updateContents(new y.default().retain(X.index).delete(X.length).insert({image:W.target.result}),d.default.sources.USER),H.quill.setSelection(X.index+1,d.default.sources.SILENT),ne.value=""},te.readAsDataURL(ne.files[0])}}),this.container.appendChild(ne)),ne.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var J=function(U){N(H,U);function H(ne,te){A(this,H);var W=x(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,ne,te));return W.textbox=W.root.querySelector('input[type="text"]'),W.listen(),W}return o(H,[{key:"listen",value:function(){var te=this;this.textbox.addEventListener("keydown",function(W){C.default.match(W,"enter")?(te.save(),W.preventDefault()):C.default.match(W,"escape")&&(te.cancel(),W.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),W!=null?this.textbox.value=W:te!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+te)||""),this.root.setAttribute("data-mode",te)}},{key:"restoreFocus",value:function(){var te=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=te}},{key:"save",value:function(){var te=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var W=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",te,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",te,d.default.sources.USER)),this.quill.root.scrollTop=W;break}case"video":te=$(te);case"formula":{if(!te)break;var X=this.quill.getSelection(!0);if(X!=null){var Q=X.index+X.length;this.quill.insertEmbed(Q,this.root.getAttribute("data-mode"),te,d.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Q+1," ",d.default.sources.USER),this.quill.setSelection(Q+2,d.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),H}(T.default);function $(U){var H=U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return H?(H[1]||"https")+"://www.youtube.com/embed/"+H[2]+"?showinfo=0":(H=U.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(H[1]||"https")+"://player.vimeo.com/video/"+H[2]+"/":U}function F(U,H){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H.forEach(function(te){var W=document.createElement("option");te===ne?W.setAttribute("selected","selected"):W.setAttribute("value",te),U.appendChild(W)})}r.BaseTooltip=J,r.default=ie},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},l.prototype.contains=function(c){for(var h,f=this.iterator();h=f();)if(h===c)return!0;return!1},l.prototype.insertBefore=function(c,h){c&&(c.next=h,h!=null?(c.prev=h.prev,h.prev!=null&&(h.prev.next=c),h.prev=c,h===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},l.prototype.offset=function(c){for(var h=0,f=this.head;f!=null;){if(f===c)return h;h+=f.length(),f=f.next}return-1},l.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},l.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var h=c;return c!=null&&(c=c.next),h}},l.prototype.find=function(c,h){h===void 0&&(h=!1);for(var f,y=this.iterator();f=y();){var m=f.length();if(c<m||h&&c===m&&(f.next==null||f.next.length()!==0))return[f,c];c-=m}return[null,0]},l.prototype.forEach=function(c){for(var h,f=this.iterator();h=f();)c(h)},l.prototype.forEachAt=function(c,h,f){if(!(h<=0))for(var y=this.find(c),m=y[0],d=y[1],g,C=c-d,S=this.iterator(m);(g=S())&&C<c+h;){var E=g.length();c>C?f(g,c-C,Math.min(h,C+E-c)):f(g,0,Math.min(E,c+h-C)),C+=E}},l.prototype.map=function(c){return this.reduce(function(h,f){return h.push(c(f)),h},[])},l.prototype.reduce=function(c,h){for(var f,y=this.iterator();f=y();)h=c(h,f);return h},l}();r.default=o},function(t,r,i){var o=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var C in g)g.hasOwnProperty(C)&&(d[C]=g[C])};return function(d,g){m(d,g);function C(){this.constructor=d}d.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(17),c=i(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},f=100,y=function(m){o(d,m);function d(g){var C=m.call(this,g)||this;return C.scroll=C,C.observer=new MutationObserver(function(S){C.update(S)}),C.observer.observe(C.domNode,h),C.attach(),C}return d.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},d.prototype.deleteAt=function(g,C){this.update(),g===0&&C===this.length()?this.children.forEach(function(S){S.remove()}):m.prototype.deleteAt.call(this,g,C)},d.prototype.formatAt=function(g,C,S,E){this.update(),m.prototype.formatAt.call(this,g,C,S,E)},d.prototype.insertAt=function(g,C,S){this.update(),m.prototype.insertAt.call(this,g,C,S)},d.prototype.optimize=function(g,C){var S=this;g===void 0&&(g=[]),C===void 0&&(C={}),m.prototype.optimize.call(this,C);for(var E=[].slice.call(this.observer.takeRecords());E.length>0;)g.push(E.pop());for(var _=function(L,V){V===void 0&&(V=!0),!(L==null||L===S)&&L.domNode.parentNode!=null&&(L.domNode[c.DATA_KEY].mutations==null&&(L.domNode[c.DATA_KEY].mutations=[]),V&&_(L.parent))},w=function(L){L.domNode[c.DATA_KEY]==null||L.domNode[c.DATA_KEY].mutations==null||(L instanceof l.default&&L.children.forEach(w),L.optimize(C))},O=g,I=0;O.length>0;I+=1){if(I>=f)throw new Error("[Parchment] Maximum optimize iterations reached");for(O.forEach(function(L){var V=c.find(L.target,!0);V!=null&&(V.domNode===L.target&&(L.type==="childList"?(_(c.find(L.previousSibling,!1)),[].forEach.call(L.addedNodes,function(P){var T=c.find(P,!1);_(T,!1),T instanceof l.default&&T.children.forEach(function(b){_(b,!1)})})):L.type==="attributes"&&_(V.prev)),_(V))}),this.children.forEach(w),O=[].slice.call(this.observer.takeRecords()),E=O.slice();E.length>0;)g.push(E.pop())}},d.prototype.update=function(g,C){var S=this;C===void 0&&(C={}),g=g||this.observer.takeRecords(),g.map(function(E){var _=c.find(E.target,!0);return _==null?null:_.domNode[c.DATA_KEY].mutations==null?(_.domNode[c.DATA_KEY].mutations=[E],_):(_.domNode[c.DATA_KEY].mutations.push(E),null)}).forEach(function(E){E==null||E===S||E.domNode[c.DATA_KEY]==null||E.update(E.domNode[c.DATA_KEY].mutations||[],C)}),this.domNode[c.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,C),this.optimize(g,C)},d.blotName="scroll",d.defaultChild="block",d.scope=c.Scope.BLOCK_BLOT,d.tagName="DIV",d}(l.default);r.default=y},function(t,r,i){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var g in d)d.hasOwnProperty(g)&&(m[g]=d[g])};return function(m,d){y(m,d);function g(){this.constructor=m}m.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(18),c=i(1);function h(y,m){if(Object.keys(y).length!==Object.keys(m).length)return!1;for(var d in y)if(y[d]!==m[d])return!1;return!0}var f=function(y){o(m,y);function m(){return y!==null&&y.apply(this,arguments)||this}return m.formats=function(d){if(d.tagName!==m.tagName)return y.formats.call(this,d)},m.prototype.format=function(d,g){var C=this;d===this.statics.blotName&&!g?(this.children.forEach(function(S){S instanceof l.default||(S=S.wrap(m.blotName,!0)),C.attributes.copy(S)}),this.unwrap()):y.prototype.format.call(this,d,g)},m.prototype.formatAt=function(d,g,C,S){if(this.formats()[C]!=null||c.query(C,c.Scope.ATTRIBUTE)){var E=this.isolate(d,g);E.format(C,S)}else y.prototype.formatAt.call(this,d,g,C,S)},m.prototype.optimize=function(d){y.prototype.optimize.call(this,d);var g=this.formats();if(Object.keys(g).length===0)return this.unwrap();var C=this.next;C instanceof m&&C.prev===this&&h(g,C.formats())&&(C.moveChildren(this),C.remove())},m.blotName="inline",m.scope=c.Scope.INLINE_BLOT,m.tagName="SPAN",m}(l.default);r.default=f},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var d in m)m.hasOwnProperty(d)&&(y[d]=m[d])};return function(y,m){f(y,m);function d(){this.constructor=y}y.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(18),c=i(1),h=function(f){o(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return y.formats=function(m){var d=c.query(y.blotName).tagName;if(m.tagName!==d)return f.formats.call(this,m)},y.prototype.format=function(m,d){c.query(m,c.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!d?this.replaceWith(y.blotName):f.prototype.format.call(this,m,d))},y.prototype.formatAt=function(m,d,g,C){c.query(g,c.Scope.BLOCK)!=null?this.format(g,C):f.prototype.formatAt.call(this,m,d,g,C)},y.prototype.insertAt=function(m,d,g){if(g==null||c.query(d,c.Scope.INLINE)!=null)f.prototype.insertAt.call(this,m,d,g);else{var C=this.split(m),S=c.create(d,g);C.parent.insertBefore(S,C)}},y.prototype.update=function(m,d){navigator.userAgent.match(/Trident/)?this.build():f.prototype.update.call(this,m,d)},y.blotName="block",y.scope=c.Scope.BLOCK_BLOT,y.tagName="P",y}(l.default);r.default=h},function(t,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var m in y)y.hasOwnProperty(m)&&(f[m]=y[m])};return function(f,y){h(f,y);function m(){this.constructor=f}f.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(19),c=function(h){o(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.formats=function(y){},f.prototype.format=function(y,m){h.prototype.formatAt.call(this,0,this.length(),y,m)},f.prototype.formatAt=function(y,m,d,g){y===0&&m===this.length()?this.format(d,g):h.prototype.formatAt.call(this,y,m,d,g)},f.prototype.formats=function(){return this.statics.formats(this.domNode)},f}(l.default);r.default=c},function(t,r,i){var o=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var d in m)m.hasOwnProperty(d)&&(y[d]=m[d])};return function(y,m){f(y,m);function d(){this.constructor=y}y.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var l=i(19),c=i(1),h=function(f){o(y,f);function y(m){var d=f.call(this,m)||this;return d.text=d.statics.value(d.domNode),d}return y.create=function(m){return document.createTextNode(m)},y.value=function(m){var d=m.data;return d.normalize&&(d=d.normalize()),d},y.prototype.deleteAt=function(m,d){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+d)},y.prototype.index=function(m,d){return this.domNode===m?d:-1},y.prototype.insertAt=function(m,d,g){g==null?(this.text=this.text.slice(0,m)+d+this.text.slice(m),this.domNode.data=this.text):f.prototype.insertAt.call(this,m,d,g)},y.prototype.length=function(){return this.text.length},y.prototype.optimize=function(m){f.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof y&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},y.prototype.position=function(m,d){return[this.domNode,m]},y.prototype.split=function(m,d){if(d===void 0&&(d=!1),!d){if(m===0)return this;if(m===this.length())return this.next}var g=c.create(this.domNode.splitText(m));return this.parent.insertBefore(g,this.next),this.text=this.statics.value(this.domNode),g},y.prototype.update=function(m,d){var g=this;m.some(function(C){return C.type==="characterData"&&C.target===g.domNode})&&(this.text=this.statics.value(this.domNode))},y.prototype.value=function(){return this.text},y.blotName="text",y.scope=c.Scope.INLINE_BLOT,y}(l.default);r.default=h},function(t,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,h){return arguments.length>1&&!this.contains(c)==!h?h:l.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,h){return h=h||0,this.substr(h,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,h){var f=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>f.length)&&(h=f.length),h-=c.length;var y=f.indexOf(c,h);return y!==-1&&y===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var f=Object(this),y=f.length>>>0,m=arguments[1],d,g=0;g<y;g++)if(d=f[g],h.call(m,d,g,f))return d}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,r){var i=-1,o=1,l=0;function c(I,L,V){if(I==L)return I?[[l,I]]:[];(V<0||I.length<V)&&(V=null);var P=m(I,L),T=I.substring(0,P);I=I.substring(P),L=L.substring(P),P=d(I,L);var b=I.substring(I.length-P);I=I.substring(0,I.length-P),L=L.substring(0,L.length-P);var A=h(I,L);return T&&A.unshift([l,T]),b&&A.push([l,b]),C(A),V!=null&&(A=_(A,V)),A=w(A),A}function h(I,L){var V;if(!I)return[[o,L]];if(!L)return[[i,I]];var P=I.length>L.length?I:L,T=I.length>L.length?L:I,b=P.indexOf(T);if(b!=-1)return V=[[o,P.substring(0,b)],[l,T],[o,P.substring(b+T.length)]],I.length>L.length&&(V[0][0]=V[2][0]=i),V;if(T.length==1)return[[i,I],[o,L]];var A=g(I,L);if(A){var x=A[0],N=A[1],D=A[2],z=A[3],G=A[4],re=c(x,D),Z=c(N,z);return re.concat([[l,G]],Z)}return f(I,L)}function f(I,L){for(var V=I.length,P=L.length,T=Math.ceil((V+P)/2),b=T,A=2*T,x=new Array(A),N=new Array(A),D=0;D<A;D++)x[D]=-1,N[D]=-1;x[b+1]=0,N[b+1]=0;for(var z=V-P,G=z%2!=0,re=0,Z=0,ie=0,J=0,$=0;$<T;$++){for(var F=-$+re;F<=$-Z;F+=2){var U=b+F,H;F==-$||F!=$&&x[U-1]<x[U+1]?H=x[U+1]:H=x[U-1]+1;for(var ne=H-F;H<V&&ne<P&&I.charAt(H)==L.charAt(ne);)H++,ne++;if(x[U]=H,H>V)Z+=2;else if(ne>P)re+=2;else if(G){var te=b+z-F;if(te>=0&&te<A&&N[te]!=-1){var W=V-N[te];if(H>=W)return y(I,L,H,ne)}}}for(var X=-$+ie;X<=$-J;X+=2){var te=b+X,W;X==-$||X!=$&&N[te-1]<N[te+1]?W=N[te+1]:W=N[te-1]+1;for(var Q=W-X;W<V&&Q<P&&I.charAt(V-W-1)==L.charAt(P-Q-1);)W++,Q++;if(N[te]=W,W>V)J+=2;else if(Q>P)ie+=2;else if(!G){var U=b+z-X;if(U>=0&&U<A&&x[U]!=-1){var H=x[U],ne=b+H-U;if(W=V-W,H>=W)return y(I,L,H,ne)}}}}return[[i,I],[o,L]]}function y(I,L,V,P){var T=I.substring(0,V),b=L.substring(0,P),A=I.substring(V),x=L.substring(P),N=c(T,b),D=c(A,x);return N.concat(D)}function m(I,L){if(!I||!L||I.charAt(0)!=L.charAt(0))return 0;for(var V=0,P=Math.min(I.length,L.length),T=P,b=0;V<T;)I.substring(b,T)==L.substring(b,T)?(V=T,b=V):P=T,T=Math.floor((P-V)/2+V);return T}function d(I,L){if(!I||!L||I.charAt(I.length-1)!=L.charAt(L.length-1))return 0;for(var V=0,P=Math.min(I.length,L.length),T=P,b=0;V<T;)I.substring(I.length-T,I.length-b)==L.substring(L.length-T,L.length-b)?(V=T,b=V):P=T,T=Math.floor((P-V)/2+V);return T}function g(I,L){var V=I.length>L.length?I:L,P=I.length>L.length?L:I;if(V.length<4||P.length*2<V.length)return null;function T(Z,ie,J){for(var $=Z.substring(J,J+Math.floor(Z.length/4)),F=-1,U="",H,ne,te,W;(F=ie.indexOf($,F+1))!=-1;){var X=m(Z.substring(J),ie.substring(F)),Q=d(Z.substring(0,J),ie.substring(0,F));U.length<Q+X&&(U=ie.substring(F-Q,F)+ie.substring(F,F+X),H=Z.substring(0,J-Q),ne=Z.substring(J+X),te=ie.substring(0,F-Q),W=ie.substring(F+X))}return U.length*2>=Z.length?[H,ne,te,W,U]:null}var b=T(V,P,Math.ceil(V.length/4)),A=T(V,P,Math.ceil(V.length/2)),x;if(!b&&!A)return null;A?b?x=b[4].length>A[4].length?b:A:x=A:x=b;var N,D,z,G;I.length>L.length?(N=x[0],D=x[1],z=x[2],G=x[3]):(z=x[0],G=x[1],N=x[2],D=x[3]);var re=x[4];return[N,D,z,G,re]}function C(I){I.push([l,""]);for(var L=0,V=0,P=0,T="",b="",A;L<I.length;)switch(I[L][0]){case o:P++,b+=I[L][1],L++;break;case i:V++,T+=I[L][1],L++;break;case l:V+P>1?(V!==0&&P!==0&&(A=m(b,T),A!==0&&(L-V-P>0&&I[L-V-P-1][0]==l?I[L-V-P-1][1]+=b.substring(0,A):(I.splice(0,0,[l,b.substring(0,A)]),L++),b=b.substring(A),T=T.substring(A)),A=d(b,T),A!==0&&(I[L][1]=b.substring(b.length-A)+I[L][1],b=b.substring(0,b.length-A),T=T.substring(0,T.length-A))),V===0?I.splice(L-P,V+P,[o,b]):P===0?I.splice(L-V,V+P,[i,T]):I.splice(L-V-P,V+P,[i,T],[o,b]),L=L-V-P+(V?1:0)+(P?1:0)+1):L!==0&&I[L-1][0]==l?(I[L-1][1]+=I[L][1],I.splice(L,1)):L++,P=0,V=0,T="",b="";break}I[I.length-1][1]===""&&I.pop();var x=!1;for(L=1;L<I.length-1;)I[L-1][0]==l&&I[L+1][0]==l&&(I[L][1].substring(I[L][1].length-I[L-1][1].length)==I[L-1][1]?(I[L][1]=I[L-1][1]+I[L][1].substring(0,I[L][1].length-I[L-1][1].length),I[L+1][1]=I[L-1][1]+I[L+1][1],I.splice(L-1,1),x=!0):I[L][1].substring(0,I[L+1][1].length)==I[L+1][1]&&(I[L-1][1]+=I[L+1][1],I[L][1]=I[L][1].substring(I[L+1][1].length)+I[L+1][1],I.splice(L+1,1),x=!0)),L++;x&&C(I)}var S=c;S.INSERT=o,S.DELETE=i,S.EQUAL=l,t.exports=S;function E(I,L){if(L===0)return[l,I];for(var V=0,P=0;P<I.length;P++){var T=I[P];if(T[0]===i||T[0]===l){var b=V+T[1].length;if(L===b)return[P+1,I];if(L<b){I=I.slice();var A=L-V,x=[T[0],T[1].slice(0,A)],N=[T[0],T[1].slice(A)];return I.splice(P,1,x,N),[P+1,I]}else V=b}}throw new Error("cursor_pos is out of bounds!")}function _(I,L){var V=E(I,L),P=V[1],T=V[0],b=P[T],A=P[T+1];if(b==null)return I;if(b[0]!==l)return I;if(A!=null&&b[1]+A[1]===A[1]+b[1])return P.splice(T,2,A,b),O(P,T,2);if(A!=null&&A[1].indexOf(b[1])===0){P.splice(T,2,[A[0],b[1]],[0,b[1]]);var x=A[1].slice(b[1].length);return x.length>0&&P.splice(T+2,0,[A[0],x]),O(P,T,3)}else return I}function w(I){for(var L=!1,V=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},P=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},T=2;T<I.length;T+=1)I[T-2][0]===l&&P(I[T-2][1])&&I[T-1][0]===i&&V(I[T-1][1])&&I[T][0]===o&&V(I[T][1])&&(L=!0,I[T-1][1]=I[T-2][1].slice(-1)+I[T-1][1],I[T][1]=I[T-2][1].slice(-1)+I[T][1],I[T-2][1]=I[T-2][1].slice(0,-1));if(!L)return I;for(var b=[],T=0;T<I.length;T+=1)I[T][1].length>0&&b.push(I[T]);return b}function O(I,L,V){for(var P=L+V-1;P>=0&&P>=L-1;P--)if(P+1<I.length){var T=I[P],b=I[P+1];T[0]===b[1]&&I.splice(P,2,[T[0],T[1]+b[1]])}return I}},function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var l=[];for(var c in o)l.push(c);return l}},function(t,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=t.exports=i?o:l,r.supported=o;function o(c){return Object.prototype.toString.call(c)=="[object Arguments]"}r.unsupported=l;function l(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(t,r){var i=Object.prototype.hasOwnProperty,o="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(o=!1));function c(f,y,m){this.fn=f,this.context=y,this.once=m||!1}function h(){this._events=new l,this._eventsCount=0}h.prototype.eventNames=function(){var y=[],m,d;if(this._eventsCount===0)return y;for(d in m=this._events)i.call(m,d)&&y.push(o?d.slice(1):d);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(m)):y},h.prototype.listeners=function(y,m){var d=o?o+y:y,g=this._events[d];if(m)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var C=0,S=g.length,E=new Array(S);C<S;C++)E[C]=g[C].fn;return E},h.prototype.emit=function(y,m,d,g,C,S){var E=o?o+y:y;if(!this._events[E])return!1;var _=this._events[E],w=arguments.length,O,I;if(_.fn){switch(_.once&&this.removeListener(y,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,m),!0;case 3:return _.fn.call(_.context,m,d),!0;case 4:return _.fn.call(_.context,m,d,g),!0;case 5:return _.fn.call(_.context,m,d,g,C),!0;case 6:return _.fn.call(_.context,m,d,g,C,S),!0}for(I=1,O=new Array(w-1);I<w;I++)O[I-1]=arguments[I];_.fn.apply(_.context,O)}else{var L=_.length,V;for(I=0;I<L;I++)switch(_[I].once&&this.removeListener(y,_[I].fn,void 0,!0),w){case 1:_[I].fn.call(_[I].context);break;case 2:_[I].fn.call(_[I].context,m);break;case 3:_[I].fn.call(_[I].context,m,d);break;case 4:_[I].fn.call(_[I].context,m,d,g);break;default:if(!O)for(V=1,O=new Array(w-1);V<w;V++)O[V-1]=arguments[V];_[I].fn.apply(_[I].context,O)}}return!0},h.prototype.on=function(y,m,d){var g=new c(m,d||this),C=o?o+y:y;return this._events[C]?this._events[C].fn?this._events[C]=[this._events[C],g]:this._events[C].push(g):(this._events[C]=g,this._eventsCount++),this},h.prototype.once=function(y,m,d){var g=new c(m,d||this,!0),C=o?o+y:y;return this._events[C]?this._events[C].fn?this._events[C]=[this._events[C],g]:this._events[C].push(g):(this._events[C]=g,this._eventsCount++),this},h.prototype.removeListener=function(y,m,d,g){var C=o?o+y:y;if(!this._events[C])return this;if(!m)return--this._eventsCount===0?this._events=new l:delete this._events[C],this;var S=this._events[C];if(S.fn)S.fn===m&&(!g||S.once)&&(!d||S.context===d)&&(--this._eventsCount===0?this._events=new l:delete this._events[C]);else{for(var E=0,_=[],w=S.length;E<w;E++)(S[E].fn!==m||g&&!S[E].once||d&&S[E].context!==d)&&_.push(S[E]);_.length?this._events[C]=_.length===1?_[0]:_:--this._eventsCount===0?this._events=new l:delete this._events[C]}return this},h.prototype.removeAllListeners=function(y){var m;return y?(m=o?o+y:y,this._events[m]&&(--this._eventsCount===0?this._events=new l:delete this._events[m])):(this._events=new l,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=o,h.EventEmitter=h,typeof t<"u"&&(t.exports=h)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},l=function(){function ue(de,Ee){var Ae=[],ve=!0,$e=!1,De=void 0;try{for(var ze=de[Symbol.iterator](),Ge;!(ve=(Ge=ze.next()).done)&&(Ae.push(Ge.value),!(Ee&&Ae.length===Ee));ve=!0);}catch(tt){$e=!0,De=tt}finally{try{!ve&&ze.return&&ze.return()}finally{if($e)throw De}}return Ae}return function(de,Ee){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return ue(de,Ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function ue(de,Ee){for(var Ae=0;Ae<Ee.length;Ae++){var ve=Ee[Ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(de,ve.key,ve)}}return function(de,Ee,Ae){return Ee&&ue(de.prototype,Ee),Ae&&ue(de,Ae),de}}(),h=i(3),f=N(h),y=i(2),m=N(y),d=i(0),g=N(d),C=i(5),S=N(C),E=i(10),_=N(E),w=i(9),O=N(w),I=i(36),L=i(37),V=i(13),P=N(V),T=i(26),b=i(38),A=i(39),x=i(40);function N(ue){return ue&&ue.__esModule?ue:{default:ue}}function D(ue,de,Ee){return de in ue?Object.defineProperty(ue,de,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):ue[de]=Ee,ue}function z(ue,de){if(!(ue instanceof de))throw new TypeError("Cannot call a class as a function")}function G(ue,de){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:ue}function re(ue,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);ue.prototype=Object.create(de&&de.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,de):ue.__proto__=de)}var Z=(0,_.default)("quill:clipboard"),ie="__ql-matcher",J=[[Node.TEXT_NODE,Xe],[Node.TEXT_NODE,Oe],["br",ge],[Node.ELEMENT_NODE,Oe],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,Ne],[Node.ELEMENT_NODE,ee],[Node.ELEMENT_NODE,Ue],["li",Pe],["b",Q.bind(Q,"bold")],["i",Q.bind(Q,"italic")],["style",Se]],$=[I.AlignAttribute,b.DirectionAttribute].reduce(function(ue,de){return ue[de.keyName]=de,ue},{}),F=[I.AlignStyle,L.BackgroundStyle,T.ColorStyle,b.DirectionStyle,A.FontStyle,x.SizeStyle].reduce(function(ue,de){return ue[de.keyName]=de,ue},{}),U=function(ue){re(de,ue);function de(Ee,Ae){z(this,de);var ve=G(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Ee,Ae));return ve.quill.root.addEventListener("paste",ve.onPaste.bind(ve)),ve.container=ve.quill.addContainer("ql-clipboard"),ve.container.setAttribute("contenteditable",!0),ve.container.setAttribute("tabindex",-1),ve.matchers=[],J.concat(ve.options.matchers).forEach(function($e){var De=l($e,2),ze=De[0],Ge=De[1];!Ae.matchVisual&&Ge===Ne||ve.addMatcher(ze,Ge)}),ve}return c(de,[{key:"addMatcher",value:function(Ae,ve){this.matchers.push([Ae,ve])}},{key:"convert",value:function(Ae){if(typeof Ae=="string")return this.container.innerHTML=Ae.replace(/\>\r?\n +\</g,"><"),this.convert();var ve=this.quill.getFormat(this.quill.selection.savedRange.index);if(ve[P.default.blotName]){var $e=this.container.innerText;return this.container.innerHTML="",new m.default().insert($e,D({},P.default.blotName,ve[P.default.blotName]))}var De=this.prepareMatching(),ze=l(De,2),Ge=ze[0],tt=ze[1],rt=X(this.container,Ge,tt);return te(rt,`
`)&&rt.ops[rt.ops.length-1].attributes==null&&(rt=rt.compose(new m.default().retain(rt.length()-1).delete(1))),Z.log("convert",this.container.innerHTML,rt),this.container.innerHTML="",rt}},{key:"dangerouslyPasteHTML",value:function(Ae,ve){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.default.sources.API;if(typeof Ae=="string")this.quill.setContents(this.convert(Ae),ve),this.quill.setSelection(0,S.default.sources.SILENT);else{var De=this.convert(ve);this.quill.updateContents(new m.default().retain(Ae).concat(De),$e),this.quill.setSelection(Ae+De.length(),S.default.sources.SILENT)}}},{key:"onPaste",value:function(Ae){var ve=this;if(!(Ae.defaultPrevented||!this.quill.isEnabled())){var $e=this.quill.getSelection(),De=new m.default().retain($e.index),ze=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(S.default.sources.SILENT),setTimeout(function(){De=De.concat(ve.convert()).delete($e.length),ve.quill.updateContents(De,S.default.sources.USER),ve.quill.setSelection(De.length()-$e.length,S.default.sources.SILENT),ve.quill.scrollingContainer.scrollTop=ze,ve.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ae=this,ve=[],$e=[];return this.matchers.forEach(function(De){var ze=l(De,2),Ge=ze[0],tt=ze[1];switch(Ge){case Node.TEXT_NODE:$e.push(tt);break;case Node.ELEMENT_NODE:ve.push(tt);break;default:[].forEach.call(Ae.container.querySelectorAll(Ge),function(rt){rt[ie]=rt[ie]||[],rt[ie].push(tt)});break}}),[ve,$e]}}]),de}(O.default);U.DEFAULTS={matchers:[],matchVisual:!0};function H(ue,de,Ee){return(typeof de>"u"?"undefined":o(de))==="object"?Object.keys(de).reduce(function(Ae,ve){return H(Ae,ve,de[ve])},ue):ue.reduce(function(Ae,ve){return ve.attributes&&ve.attributes[de]?Ae.push(ve):Ae.insert(ve.insert,(0,f.default)({},D({},de,Ee),ve.attributes))},new m.default)}function ne(ue){if(ue.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return ue[de]||(ue[de]=window.getComputedStyle(ue))}function te(ue,de){for(var Ee="",Ae=ue.ops.length-1;Ae>=0&&Ee.length<de.length;--Ae){var ve=ue.ops[Ae];if(typeof ve.insert!="string")break;Ee=ve.insert+Ee}return Ee.slice(-1*de.length)===de}function W(ue){if(ue.childNodes.length===0)return!1;var de=ne(ue);return["block","list-item"].indexOf(de.display)>-1}function X(ue,de,Ee){return ue.nodeType===ue.TEXT_NODE?Ee.reduce(function(Ae,ve){return ve(ue,Ae)},new m.default):ue.nodeType===ue.ELEMENT_NODE?[].reduce.call(ue.childNodes||[],function(Ae,ve){var $e=X(ve,de,Ee);return ve.nodeType===ue.ELEMENT_NODE&&($e=de.reduce(function(De,ze){return ze(ve,De)},$e),$e=(ve[ie]||[]).reduce(function(De,ze){return ze(ve,De)},$e)),Ae.concat($e)},new m.default):new m.default}function Q(ue,de,Ee){return H(Ee,ue,!0)}function ee(ue,de){var Ee=g.default.Attributor.Attribute.keys(ue),Ae=g.default.Attributor.Class.keys(ue),ve=g.default.Attributor.Style.keys(ue),$e={};return Ee.concat(Ae).concat(ve).forEach(function(De){var ze=g.default.query(De,g.default.Scope.ATTRIBUTE);ze!=null&&($e[ze.attrName]=ze.value(ue),$e[ze.attrName])||(ze=$[De],ze!=null&&(ze.attrName===De||ze.keyName===De)&&($e[ze.attrName]=ze.value(ue)||void 0),ze=F[De],ze!=null&&(ze.attrName===De||ze.keyName===De)&&(ze=F[De],$e[ze.attrName]=ze.value(ue)||void 0))}),Object.keys($e).length>0&&(de=H(de,$e)),de}function ae(ue,de){var Ee=g.default.query(ue);if(Ee==null)return de;if(Ee.prototype instanceof g.default.Embed){var Ae={},ve=Ee.value(ue);ve!=null&&(Ae[Ee.blotName]=ve,de=new m.default().insert(Ae,Ee.formats(ue)))}else typeof Ee.formats=="function"&&(de=H(de,Ee.blotName,Ee.formats(ue)));return de}function ge(ue,de){return te(de,`
`)||de.insert(`
`),de}function Se(){return new m.default}function Pe(ue,de){var Ee=g.default.query(ue);if(Ee==null||Ee.blotName!=="list-item"||!te(de,`
`))return de;for(var Ae=-1,ve=ue.parentNode;!ve.classList.contains("ql-clipboard");)(g.default.query(ve)||{}).blotName==="list"&&(Ae+=1),ve=ve.parentNode;return Ae<=0?de:de.compose(new m.default().retain(de.length()-1).retain(1,{indent:Ae}))}function Oe(ue,de){return te(de,`
`)||(W(ue)||de.length()>0&&ue.nextSibling&&W(ue.nextSibling))&&de.insert(`
`),de}function Ne(ue,de){if(W(ue)&&ue.nextElementSibling!=null&&!te(de,`

`)){var Ee=ue.offsetHeight+parseFloat(ne(ue).marginTop)+parseFloat(ne(ue).marginBottom);ue.nextElementSibling.offsetTop>ue.offsetTop+Ee*1.5&&de.insert(`
`)}return de}function Ue(ue,de){var Ee={},Ae=ue.style||{};return Ae.fontStyle&&ne(ue).fontStyle==="italic"&&(Ee.italic=!0),Ae.fontWeight&&(ne(ue).fontWeight.startsWith("bold")||parseInt(ne(ue).fontWeight)>=700)&&(Ee.bold=!0),Object.keys(Ee).length>0&&(de=H(de,Ee)),parseFloat(Ae.textIndent||0)>0&&(de=new m.default().insert("	").concat(de)),de}function Xe(ue,de){var Ee=ue.data;if(ue.parentNode.tagName==="O:P")return de.insert(Ee.trim());if(Ee.trim().length===0&&ue.parentNode.classList.contains("ql-clipboard"))return de;if(!ne(ue.parentNode).whiteSpace.startsWith("pre")){var Ae=function($e,De){return De=De.replace(/[^\u00a0]/g,""),De.length<1&&$e?" ":De};Ee=Ee.replace(/\r\n/g," ").replace(/\n/g," "),Ee=Ee.replace(/\s\s+/g,Ae.bind(Ae,!0)),(ue.previousSibling==null&&W(ue.parentNode)||ue.previousSibling!=null&&W(ue.previousSibling))&&(Ee=Ee.replace(/^\s+/,Ae.bind(Ae,!1))),(ue.nextSibling==null&&W(ue.parentNode)||ue.nextSibling!=null&&W(ue.nextSibling))&&(Ee=Ee.replace(/\s+$/,Ae.bind(Ae,!1)))}return de.insert(Ee)}r.default=U,r.matchAttributor=ee,r.matchBlot=ae,r.matchNewline=Oe,r.matchSpacing=Ne,r.matchText=Xe},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function C(S,E){for(var _=0;_<E.length;_++){var w=E[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,w.key,w)}}return function(S,E,_){return E&&C(S.prototype,E),_&&C(S,_),S}}(),l=function C(S,E,_){S===null&&(S=Function.prototype);var w=Object.getOwnPropertyDescriptor(S,E);if(w===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:C(O,E,_)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(_)}},c=i(6),h=f(c);function f(C){return C&&C.__esModule?C:{default:C}}function y(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function d(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var g=function(C){d(S,C);function S(){return y(this,S),m(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,[{key:"optimize",value:function(_){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,_),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),S}(h.default);g.blotName="bold",g.tagName=["STRONG","B"],r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function x(N,D){var z=[],G=!0,re=!1,Z=void 0;try{for(var ie=N[Symbol.iterator](),J;!(G=(J=ie.next()).done)&&(z.push(J.value),!(D&&z.length===D));G=!0);}catch($){re=!0,Z=$}finally{try{!G&&ie.return&&ie.return()}finally{if(re)throw Z}}return z}return function(N,D){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return x(N,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function x(N,D){for(var z=0;z<D.length;z++){var G=D[z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(N,G.key,G)}}return function(N,D,z){return D&&x(N.prototype,D),z&&x(N,z),N}}(),c=i(2),h=_(c),f=i(0),y=_(f),m=i(5),d=_(m),g=i(10),C=_(g),S=i(9),E=_(S);function _(x){return x&&x.__esModule?x:{default:x}}function w(x,N,D){return N in x?Object.defineProperty(x,N,{value:D,enumerable:!0,configurable:!0,writable:!0}):x[N]=D,x}function O(x,N){if(!(x instanceof N))throw new TypeError("Cannot call a class as a function")}function I(x,N){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:x}function L(x,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);x.prototype=Object.create(N&&N.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(x,N):x.__proto__=N)}var V=(0,C.default)("quill:toolbar"),P=function(x){L(N,x);function N(D,z){O(this,N);var G=I(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,D,z));if(Array.isArray(G.options.container)){var re=document.createElement("div");b(re,G.options.container),D.container.parentNode.insertBefore(re,D.container),G.container=re}else typeof G.options.container=="string"?G.container=document.querySelector(G.options.container):G.container=G.options.container;if(!(G.container instanceof HTMLElement)){var Z;return Z=V.error("Container required for toolbar",G.options),I(G,Z)}return G.container.classList.add("ql-toolbar"),G.controls=[],G.handlers={},Object.keys(G.options.handlers).forEach(function(ie){G.addHandler(ie,G.options.handlers[ie])}),[].forEach.call(G.container.querySelectorAll("button, select"),function(ie){G.attach(ie)}),G.quill.on(d.default.events.EDITOR_CHANGE,function(ie,J){ie===d.default.events.SELECTION_CHANGE&&G.update(J)}),G.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){var ie=G.quill.selection.getRange(),J=o(ie,1),$=J[0];G.update($)}),G}return l(N,[{key:"addHandler",value:function(z,G){this.handlers[z]=G}},{key:"attach",value:function(z){var G=this,re=[].find.call(z.classList,function(ie){return ie.indexOf("ql-")===0});if(re){if(re=re.slice(3),z.tagName==="BUTTON"&&z.setAttribute("type","button"),this.handlers[re]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[re]==null){V.warn("ignoring attaching to disabled format",re,z);return}if(y.default.query(re)==null){V.warn("ignoring attaching to nonexistent format",re,z);return}}var Z=z.tagName==="SELECT"?"change":"click";z.addEventListener(Z,function(ie){var J=void 0;if(z.tagName==="SELECT"){if(z.selectedIndex<0)return;var $=z.options[z.selectedIndex];$.hasAttribute("selected")?J=!1:J=$.value||!1}else z.classList.contains("ql-active")?J=!1:J=z.value||!z.hasAttribute("value"),ie.preventDefault();G.quill.focus();var F=G.quill.selection.getRange(),U=o(F,1),H=U[0];if(G.handlers[re]!=null)G.handlers[re].call(G,J);else if(y.default.query(re).prototype instanceof y.default.Embed){if(J=prompt("Enter "+re),!J)return;G.quill.updateContents(new h.default().retain(H.index).delete(H.length).insert(w({},re,J)),d.default.sources.USER)}else G.quill.format(re,J,d.default.sources.USER);G.update(H)}),this.controls.push([re,z])}}},{key:"update",value:function(z){var G=z==null?{}:this.quill.getFormat(z);this.controls.forEach(function(re){var Z=o(re,2),ie=Z[0],J=Z[1];if(J.tagName==="SELECT"){var $=void 0;if(z==null)$=null;else if(G[ie]==null)$=J.querySelector("option[selected]");else if(!Array.isArray(G[ie])){var F=G[ie];typeof F=="string"&&(F=F.replace(/\"/g,'\\"')),$=J.querySelector('option[value="'+F+'"]')}$==null?(J.value="",J.selectedIndex=-1):$.selected=!0}else if(z==null)J.classList.remove("ql-active");else if(J.hasAttribute("value")){var U=G[ie]===J.getAttribute("value")||G[ie]!=null&&G[ie].toString()===J.getAttribute("value")||G[ie]==null&&!J.getAttribute("value");J.classList.toggle("ql-active",U)}else J.classList.toggle("ql-active",G[ie]!=null)})}}]),N}(E.default);P.DEFAULTS={};function T(x,N,D){var z=document.createElement("button");z.setAttribute("type","button"),z.classList.add("ql-"+N),D!=null&&(z.value=D),x.appendChild(z)}function b(x,N){Array.isArray(N[0])||(N=[N]),N.forEach(function(D){var z=document.createElement("span");z.classList.add("ql-formats"),D.forEach(function(G){if(typeof G=="string")T(z,G);else{var re=Object.keys(G)[0],Z=G[re];Array.isArray(Z)?A(z,re,Z):T(z,re,Z)}}),x.appendChild(z)})}function A(x,N,D){var z=document.createElement("select");z.classList.add("ql-"+N),D.forEach(function(G){var re=document.createElement("option");G!==!1?re.setAttribute("value",G):re.setAttribute("selected","selected"),z.appendChild(re)}),x.appendChild(z)}P.DEFAULTS={container:null,handlers:{clean:function(){var N=this,D=this.quill.getSelection();if(D!=null)if(D.length==0){var z=this.quill.getFormat();Object.keys(z).forEach(function(G){y.default.query(G,y.default.Scope.INLINE)!=null&&N.quill.format(G,!1)})}else this.quill.removeFormat(D,d.default.sources.USER)},direction:function(N){var D=this.quill.getFormat().align;N==="rtl"&&D==null?this.quill.format("align","right",d.default.sources.USER):!N&&D==="right"&&this.quill.format("align",!1,d.default.sources.USER),this.quill.format("direction",N,d.default.sources.USER)},indent:function(N){var D=this.quill.getSelection(),z=this.quill.getFormat(D),G=parseInt(z.indent||0);if(N==="+1"||N==="-1"){var re=N==="+1"?1:-1;z.direction==="rtl"&&(re*=-1),this.quill.format("indent",G+re,d.default.sources.USER)}},link:function(N){N===!0&&(N=prompt("Enter link URL:")),this.quill.format("link",N,d.default.sources.USER)},list:function(N){var D=this.quill.getSelection(),z=this.quill.getFormat(D);N==="check"?z.list==="checked"||z.list==="unchecked"?this.quill.format("list",!1,d.default.sources.USER):this.quill.format("list","unchecked",d.default.sources.USER):this.quill.format("list",N,d.default.sources.USER)}}},r.default=P,r.addControls=b},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function C(S,E){for(var _=0;_<E.length;_++){var w=E[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,w.key,w)}}return function(S,E,_){return E&&C(S.prototype,E),_&&C(S,_),S}}(),l=function C(S,E,_){S===null&&(S=Function.prototype);var w=Object.getOwnPropertyDescriptor(S,E);if(w===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:C(O,E,_)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(_)}},c=i(28),h=f(c);function f(C){return C&&C.__esModule?C:{default:C}}function y(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function d(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var g=function(C){d(S,C);function S(E,_){y(this,S);var w=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E));return w.label.innerHTML=_,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(O){O.classList.add("ql-primary")}),w}return o(S,[{key:"buildItem",value:function(_){var w=l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"buildItem",this).call(this,_);return w.style.backgroundColor=_.getAttribute("value")||"",w}},{key:"selectItem",value:function(_,w){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,_,w);var O=this.label.querySelector(".ql-color-label"),I=_&&_.getAttribute("data-value")||"";O&&(O.tagName==="line"?O.style.stroke=I:O.style.fill=I)}}]),S}(h.default);r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function C(S,E){for(var _=0;_<E.length;_++){var w=E[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,w.key,w)}}return function(S,E,_){return E&&C(S.prototype,E),_&&C(S,_),S}}(),l=function C(S,E,_){S===null&&(S=Function.prototype);var w=Object.getOwnPropertyDescriptor(S,E);if(w===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:C(O,E,_)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(_)}},c=i(28),h=f(c);function f(C){return C&&C.__esModule?C:{default:C}}function y(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function d(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var g=function(C){d(S,C);function S(E,_){y(this,S);var w=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(O){O.innerHTML=_[O.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return o(S,[{key:"selectItem",value:function(_,w){l(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"selectItem",this).call(this,_,w),_=_||this.defaultItem,this.label.innerHTML=_.innerHTML}}]),S}(h.default);r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function h(f,y){for(var m=0;m<y.length;m++){var d=y[m];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return function(f,y,m){return y&&h(f.prototype,y),m&&h(f,m),f}}();function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(f,y){var m=this;l(this,h),this.quill=f,this.boundsContainer=y||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return o(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(y){var m=y.left+y.width/2-this.root.offsetWidth/2,d=y.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=d+"px",this.root.classList.remove("ql-flip");var g=this.boundsContainer.getBoundingClientRect(),C=this.root.getBoundingClientRect(),S=0;if(C.right>g.right&&(S=g.right-C.right,this.root.style.left=m+S+"px"),C.left<g.left&&(S=g.left-C.left,this.root.style.left=m+S+"px"),C.bottom>g.bottom){var E=C.bottom-C.top,_=y.bottom-y.top+E;this.root.style.top=d-_+"px",this.root.classList.add("ql-flip")}return S}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();r.default=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function A(x,N){var D=[],z=!0,G=!1,re=void 0;try{for(var Z=x[Symbol.iterator](),ie;!(z=(ie=Z.next()).done)&&(D.push(ie.value),!(N&&D.length===N));z=!0);}catch(J){G=!0,re=J}finally{try{!z&&Z.return&&Z.return()}finally{if(G)throw re}}return D}return function(x,N){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return A(x,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function A(x,N,D){x===null&&(x=Function.prototype);var z=Object.getOwnPropertyDescriptor(x,N);if(z===void 0){var G=Object.getPrototypeOf(x);return G===null?void 0:A(G,N,D)}else{if("value"in z)return z.value;var re=z.get;return re===void 0?void 0:re.call(D)}},c=function(){function A(x,N){for(var D=0;D<N.length;D++){var z=N[D];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(x,z.key,z)}}return function(x,N,D){return N&&A(x.prototype,N),D&&A(x,D),x}}(),h=i(3),f=O(h),y=i(8),m=O(y),d=i(43),g=O(d),C=i(27),S=O(C),E=i(15),_=i(41),w=O(_);function O(A){return A&&A.__esModule?A:{default:A}}function I(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}function L(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:A}function V(A,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(A){V(x,A);function x(N,D){I(this,x),D.modules.toolbar!=null&&D.modules.toolbar.container==null&&(D.modules.toolbar.container=P);var z=L(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N,D));return z.quill.container.classList.add("ql-snow"),z}return c(x,[{key:"extendToolbar",value:function(D){D.container.classList.add("ql-snow"),this.buildButtons([].slice.call(D.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(D.container.querySelectorAll("select")),w.default),this.tooltip=new b(this.quill,this.options.bounds),D.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(z,G){D.handlers.link.call(D,!G.format.link)})}}]),x}(g.default);T.DEFAULTS=(0,f.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){if(x){var N=this.quill.getSelection();if(N==null||N.length==0)return;var D=this.quill.getText(N);/^\S+@\S+\.\S+$/.test(D)&&D.indexOf("mailto:")!==0&&(D="mailto:"+D);var z=this.quill.theme.tooltip;z.edit("link",D)}else this.quill.format("link",!1)}}}}});var b=function(A){V(x,A);function x(N,D){I(this,x);var z=L(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N,D));return z.preview=z.root.querySelector("a.ql-preview"),z}return c(x,[{key:"listen",value:function(){var D=this;l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(z){D.root.classList.contains("ql-editing")?D.save():D.edit("link",D.preview.textContent),z.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(z){if(D.linkRange!=null){var G=D.linkRange;D.restoreFocus(),D.quill.formatText(G,"link",!1,m.default.sources.USER),delete D.linkRange}z.preventDefault(),D.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(z,G,re){if(z!=null){if(z.length===0&&re===m.default.sources.USER){var Z=D.quill.scroll.descendant(S.default,z.index),ie=o(Z,2),J=ie[0],$=ie[1];if(J!=null){D.linkRange=new E.Range(z.index-$,J.length());var F=S.default.formats(J.domNode);D.preview.textContent=F,D.preview.setAttribute("href",F),D.show(),D.position(D.quill.getBounds(D.linkRange));return}}else delete D.linkRange;D.hide()}})}},{key:"show",value:function(){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),x}(d.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=T},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),l=ve(o),c=i(36),h=i(38),f=i(64),y=i(65),m=ve(y),d=i(66),g=ve(d),C=i(67),S=ve(C),E=i(37),_=i(26),w=i(39),O=i(40),I=i(56),L=ve(I),V=i(68),P=ve(V),T=i(27),b=ve(T),A=i(69),x=ve(A),N=i(70),D=ve(N),z=i(71),G=ve(z),re=i(72),Z=ve(re),ie=i(73),J=ve(ie),$=i(13),F=ve($),U=i(74),H=ve(U),ne=i(75),te=ve(ne),W=i(57),X=ve(W),Q=i(41),ee=ve(Q),ae=i(28),ge=ve(ae),Se=i(59),Pe=ve(Se),Oe=i(60),Ne=ve(Oe),Ue=i(61),Xe=ve(Ue),ue=i(108),de=ve(ue),Ee=i(62),Ae=ve(Ee);function ve($e){return $e&&$e.__esModule?$e:{default:$e}}l.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":E.BackgroundClass,"attributors/class/color":_.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":O.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":E.BackgroundStyle,"attributors/style/color":_.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":O.SizeStyle},!0),l.default.register({"formats/align":c.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":f.IndentClass,"formats/background":E.BackgroundStyle,"formats/color":_.ColorStyle,"formats/font":w.FontClass,"formats/size":O.SizeClass,"formats/blockquote":m.default,"formats/code-block":F.default,"formats/header":g.default,"formats/list":S.default,"formats/bold":L.default,"formats/code":$.Code,"formats/italic":P.default,"formats/link":b.default,"formats/script":x.default,"formats/strike":D.default,"formats/underline":G.default,"formats/image":Z.default,"formats/video":J.default,"formats/list/item":C.ListItem,"modules/formula":H.default,"modules/syntax":te.default,"modules/toolbar":X.default,"themes/bubble":de.default,"themes/snow":Ae.default,"ui/icons":ee.default,"ui/picker":ge.default,"ui/icon-picker":Ne.default,"ui/color-picker":Pe.default,"ui/tooltip":Xe.default},!0),r.default=l.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function S(E,_){for(var w=0;w<_.length;w++){var O=_[w];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}return function(E,_,w){return _&&S(E.prototype,_),w&&S(E,w),E}}(),l=function S(E,_,w){E===null&&(E=Function.prototype);var O=Object.getOwnPropertyDescriptor(E,_);if(O===void 0){var I=Object.getPrototypeOf(E);return I===null?void 0:S(I,_,w)}else{if("value"in O)return O.value;var L=O.get;return L===void 0?void 0:L.call(w)}},c=i(0),h=f(c);function f(S){return S&&S.__esModule?S:{default:S}}function y(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function m(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function d(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var g=function(S){d(E,S);function E(){return y(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"add",value:function(w,O){if(O==="+1"||O==="-1"){var I=this.value(w)||0;O=O==="+1"?I+1:I-1}return O===0?(this.remove(w),!0):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"add",this).call(this,w,O)}},{key:"canAdd",value:function(w,O){return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,w,O)||l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,w,parseInt(O))}},{key:"value",value:function(w){return parseInt(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,w))||void 0}}]),E}(h.default.Attributor.Class),C=new g("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=C},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}function h(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function f(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function y(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var m=function(d){y(g,d);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(l.default);m.blotName="blockquote",m.tagName="blockquote",r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(C,S){for(var E=0;E<S.length;E++){var _=S[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(C,_.key,_)}}return function(C,S,E){return S&&g(C.prototype,S),E&&g(C,E),C}}(),l=i(4),c=h(l);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")}function y(g,C){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:g}function m(g,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);g.prototype=Object.create(C&&C.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(g,C):g.__proto__=C)}var d=function(g){m(C,g);function C(){return f(this,C),y(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return o(C,null,[{key:"formats",value:function(E){return this.tagName.indexOf(E.tagName)+1}}]),C}(c.default);d.blotName="header",d.tagName=["H1","H2","H3","H4","H5","H6"],r.default=d},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function I(L,V){for(var P=0;P<V.length;P++){var T=V[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(L,T.key,T)}}return function(L,V,P){return V&&I(L.prototype,V),P&&I(L,P),L}}(),l=function I(L,V,P){L===null&&(L=Function.prototype);var T=Object.getOwnPropertyDescriptor(L,V);if(T===void 0){var b=Object.getPrototypeOf(L);return b===null?void 0:I(b,V,P)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(P)}},c=i(0),h=g(c),f=i(4),y=g(f),m=i(25),d=g(m);function g(I){return I&&I.__esModule?I:{default:I}}function C(I,L,V){return L in I?Object.defineProperty(I,L,{value:V,enumerable:!0,configurable:!0,writable:!0}):I[L]=V,I}function S(I,L){if(!(I instanceof L))throw new TypeError("Cannot call a class as a function")}function E(I,L){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:I}function _(I,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);I.prototype=Object.create(L&&L.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(I,L):I.__proto__=L)}var w=function(I){_(L,I);function L(){return S(this,L),E(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return o(L,[{key:"format",value:function(P,T){P===O.blotName&&!T?this.replaceWith(h.default.create(this.statics.scope)):l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"format",this).call(this,P,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,T){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,T),this):(this.parent.unwrap(),l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replaceWith",this).call(this,P,T))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:l(L.__proto__||Object.getPrototypeOf(L),"formats",this).call(this,P)}}]),L}(y.default);w.blotName="list-item",w.tagName="LI";var O=function(I){_(L,I),o(L,null,[{key:"create",value:function(P){var T=P==="ordered"?"OL":"UL",b=l(L.__proto__||Object.getPrototypeOf(L),"create",this).call(this,T);return(P==="checked"||P==="unchecked")&&b.setAttribute("data-checked",P==="checked"),b}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function L(V){S(this,L);var P=E(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,V)),T=function(A){if(A.target.parentNode===V){var x=P.statics.formats(V),N=h.default.find(A.target);x==="checked"?N.format("list","unchecked"):x==="unchecked"&&N.format("list","checked")}};return V.addEventListener("touchstart",T),V.addEventListener("mousedown",T),P}return o(L,[{key:"format",value:function(P,T){this.children.length>0&&this.children.tail.format(P,T)}},{key:"formats",value:function(){return C({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,T){if(P instanceof w)l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertBefore",this).call(this,P,T);else{var b=T==null?this.length():T.offset(this),A=this.split(b);A.parent.insertBefore(P,A)}}},{key:"optimize",value:function(P){l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,P);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var T=h.default.create(this.statics.defaultChild);P.moveChildren(T),this.appendChild(T)}l(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replace",this).call(this,P)}}]),L}(d.default);O.blotName="list",O.scope=h.default.Scope.BLOCK_BLOT,O.tagName=["OL","UL"],O.defaultChild="list-item",O.allowedChildren=[w],r.ListItem=w,r.default=O},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}function h(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function f(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function y(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var m=function(d){y(g,d);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(l.default);m.blotName="italic",m.tagName=["EM","I"],r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function C(S,E){for(var _=0;_<E.length;_++){var w=E[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,w.key,w)}}return function(S,E,_){return E&&C(S.prototype,E),_&&C(S,_),S}}(),l=function C(S,E,_){S===null&&(S=Function.prototype);var w=Object.getOwnPropertyDescriptor(S,E);if(w===void 0){var O=Object.getPrototypeOf(S);return O===null?void 0:C(O,E,_)}else{if("value"in w)return w.value;var I=w.get;return I===void 0?void 0:I.call(_)}},c=i(6),h=f(c);function f(C){return C&&C.__esModule?C:{default:C}}function y(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function m(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function d(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var g=function(C){d(S,C);function S(){return y(this,S),m(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return o(S,null,[{key:"create",value:function(_){return _==="super"?document.createElement("sup"):_==="sub"?document.createElement("sub"):l(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,_)}},{key:"formats",value:function(_){if(_.tagName==="SUB")return"sub";if(_.tagName==="SUP")return"super"}}]),S}(h.default);g.blotName="script",g.tagName=["SUB","SUP"],r.default=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}function h(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function f(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function y(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var m=function(d){y(g,d);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(l.default);m.blotName="strike",m.tagName="S",r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),l=c(o);function c(d){return d&&d.__esModule?d:{default:d}}function h(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function f(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function y(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var m=function(d){y(g,d);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(l.default);m.blotName="underline",m.tagName="U",r.default=m},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(_,w){for(var O=0;O<w.length;O++){var I=w[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,w,O){return w&&E(_.prototype,w),O&&E(_,O),_}}(),l=function E(_,w,O){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,w);if(I===void 0){var L=Object.getPrototypeOf(_);return L===null?void 0:E(L,w,O)}else{if("value"in I)return I.value;var V=I.get;return V===void 0?void 0:V.call(O)}},c=i(0),h=y(c),f=i(27);function y(E){return E&&E.__esModule?E:{default:E}}function m(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function d(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:E}function g(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var C=["alt","height","width"],S=function(E){g(_,E);function _(){return m(this,_),d(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"format",value:function(O,I){C.indexOf(O)>-1?I?this.domNode.setAttribute(O,I):this.domNode.removeAttribute(O):l(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,O,I)}}],[{key:"create",value:function(O){var I=l(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,O);return typeof O=="string"&&I.setAttribute("src",this.sanitize(O)),I}},{key:"formats",value:function(O){return C.reduce(function(I,L){return O.hasAttribute(L)&&(I[L]=O.getAttribute(L)),I},{})}},{key:"match",value:function(O){return/\.(jpe?g|gif|png)$/.test(O)||/^data:image\/.+;base64/.test(O)}},{key:"sanitize",value:function(O){return(0,f.sanitize)(O,["http","https","data"])?O:"//:0"}},{key:"value",value:function(O){return O.getAttribute("src")}}]),_}(h.default.Embed);S.blotName="image",S.tagName="IMG",r.default=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function E(_,w){for(var O=0;O<w.length;O++){var I=w[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,w,O){return w&&E(_.prototype,w),O&&E(_,O),_}}(),l=function E(_,w,O){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,w);if(I===void 0){var L=Object.getPrototypeOf(_);return L===null?void 0:E(L,w,O)}else{if("value"in I)return I.value;var V=I.get;return V===void 0?void 0:V.call(O)}},c=i(4),h=i(27),f=y(h);function y(E){return E&&E.__esModule?E:{default:E}}function m(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function d(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:E}function g(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var C=["height","width"],S=function(E){g(_,E);function _(){return m(this,_),d(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"format",value:function(O,I){C.indexOf(O)>-1?I?this.domNode.setAttribute(O,I):this.domNode.removeAttribute(O):l(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,O,I)}}],[{key:"create",value:function(O){var I=l(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,O);return I.setAttribute("frameborder","0"),I.setAttribute("allowfullscreen",!0),I.setAttribute("src",this.sanitize(O)),I}},{key:"formats",value:function(O){return C.reduce(function(I,L){return O.hasAttribute(L)&&(I[L]=O.getAttribute(L)),I},{})}},{key:"sanitize",value:function(O){return f.default.sanitize(O)}},{key:"value",value:function(O){return O.getAttribute("src")}}]),_}(c.BlockEmbed);S.blotName="video",S.className="ql-video",S.tagName="IFRAME",r.default=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function O(I,L){for(var V=0;V<L.length;V++){var P=L[V];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(I,P.key,P)}}return function(I,L,V){return L&&O(I.prototype,L),V&&O(I,V),I}}(),l=function O(I,L,V){I===null&&(I=Function.prototype);var P=Object.getOwnPropertyDescriptor(I,L);if(P===void 0){var T=Object.getPrototypeOf(I);return T===null?void 0:O(T,L,V)}else{if("value"in P)return P.value;var b=P.get;return b===void 0?void 0:b.call(V)}},c=i(35),h=g(c),f=i(5),y=g(f),m=i(9),d=g(m);function g(O){return O&&O.__esModule?O:{default:O}}function C(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}function S(O,I){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:O}function E(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);O.prototype=Object.create(I&&I.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(O,I):O.__proto__=I)}var _=function(O){E(I,O);function I(){return C(this,I),S(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,null,[{key:"create",value:function(V){var P=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,V);return typeof V=="string"&&(window.katex.render(V,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",V)),P}},{key:"value",value:function(V){return V.getAttribute("data-value")}}]),I}(h.default);_.blotName="formula",_.className="ql-formula",_.tagName="SPAN";var w=function(O){E(I,O),o(I,null,[{key:"register",value:function(){y.default.register(_,!0)}}]);function I(){C(this,I);var L=S(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return L}return I}(d.default);r.FormulaBlot=_,r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function V(P,T){for(var b=0;b<T.length;b++){var A=T[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,T,b){return T&&V(P.prototype,T),b&&V(P,b),P}}(),l=function V(P,T,b){P===null&&(P=Function.prototype);var A=Object.getOwnPropertyDescriptor(P,T);if(A===void 0){var x=Object.getPrototypeOf(P);return x===null?void 0:V(x,T,b)}else{if("value"in A)return A.value;var N=A.get;return N===void 0?void 0:N.call(b)}},c=i(0),h=S(c),f=i(5),y=S(f),m=i(9),d=S(m),g=i(13),C=S(g);function S(V){return V&&V.__esModule?V:{default:V}}function E(V,P){if(!(V instanceof P))throw new TypeError("Cannot call a class as a function")}function _(V,P){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:V}function w(V,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);V.prototype=Object.create(P&&P.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(V,P):V.__proto__=P)}var O=function(V){w(P,V);function P(){return E(this,P),_(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"replaceWith",value:function(b){this.domNode.textContent=this.domNode.textContent,this.attach(),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,b)}},{key:"highlight",value:function(b){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=b(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),P}(C.default);O.className="ql-syntax";var I=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),L=function(V){w(P,V),o(P,null,[{key:"register",value:function(){y.default.register(I,!0),y.default.register(O,!0)}}]);function P(T,b){E(this,P);var A=_(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,T,b));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var x=null;return A.quill.on(y.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(x),x=setTimeout(function(){A.highlight(),x=null},A.options.interval)}),A.highlight(),A}return o(P,[{key:"highlight",value:function(){var b=this;if(!this.quill.selection.composing){this.quill.update(y.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(O).forEach(function(x){x.highlight(b.options.highlight)}),this.quill.update(y.default.sources.SILENT),A!=null&&this.quill.setSelection(A,y.default.sources.SILENT)}}}]),P}(d.default);L.DEFAULTS={highlight:function(){return window.hljs==null?null:function(V){var P=window.hljs.highlightAuto(V);return P.value}}(),interval:1e3},r.CodeBlock=O,r.CodeToken=I,r.default=L},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function P(T,b,A){T===null&&(T=Function.prototype);var x=Object.getOwnPropertyDescriptor(T,b);if(x===void 0){var N=Object.getPrototypeOf(T);return N===null?void 0:P(N,b,A)}else{if("value"in x)return x.value;var D=x.get;return D===void 0?void 0:D.call(A)}},l=function(){function P(T,b){for(var A=0;A<b.length;A++){var x=b[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(T,x.key,x)}}return function(T,b,A){return b&&P(T.prototype,b),A&&P(T,A),T}}(),c=i(3),h=E(c),f=i(8),y=E(f),m=i(43),d=E(m),g=i(15),C=i(41),S=E(C);function E(P){return P&&P.__esModule?P:{default:P}}function _(P,T){if(!(P instanceof T))throw new TypeError("Cannot call a class as a function")}function w(P,T){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:P}function O(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);P.prototype=Object.create(T&&T.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(P,T):P.__proto__=T)}var I=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],L=function(P){O(T,P);function T(b,A){_(this,T),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=I);var x=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,b,A));return x.quill.container.classList.add("ql-bubble"),x}return l(T,[{key:"extendToolbar",value:function(A){this.tooltip=new V(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),S.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),S.default)}}]),T}(d.default);L.DEFAULTS=(0,h.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var V=function(P){O(T,P);function T(b,A){_(this,T);var x=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,b,A));return x.quill.on(y.default.events.EDITOR_CHANGE,function(N,D,z,G){if(N===y.default.events.SELECTION_CHANGE)if(D!=null&&D.length>0&&G===y.default.sources.USER){x.show(),x.root.style.left="0px",x.root.style.width="",x.root.style.width=x.root.offsetWidth+"px";var re=x.quill.getLines(D.index,D.length);if(re.length===1)x.position(x.quill.getBounds(D));else{var Z=re[re.length-1],ie=x.quill.getIndex(Z),J=Math.min(Z.length()-1,D.index+D.length-ie),$=x.quill.getBounds(new g.Range(ie,J));x.position($)}}else document.activeElement!==x.textbox&&x.quill.hasFocus()&&x.hide()}),x}return l(T,[{key:"listen",value:function(){var A=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(y.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var x=A.quill.getSelection();x!=null&&A.position(A.quill.getBounds(x))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var x=o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,A),N=this.root.querySelector(".ql-tooltip-arrow");if(N.style.marginLeft="",x===0)return x;N.style.marginLeft=-1*x-N.offsetWidth/2+"px"}}]),T}(m.BaseTooltip);V.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=V,r.default=L},function(t,r,i){t.exports=i(63)}]).default})}(Uh)),Uh.exports}var Kr,GT;function Z4(){if(GT)return Kr;GT=1;var n=Kr&&Kr.__extends||function(){var y=function(m,d){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,C){g.__proto__=C}||function(g,C){for(var S in C)C.hasOwnProperty(S)&&(g[S]=C[S])},y(m,d)};return function(m,d){y(m,d);function g(){this.constructor=m}m.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}(),e=Kr&&Kr.__assign||function(){return e=Object.assign||function(y){for(var m,d=1,g=arguments.length;d<g;d++){m=arguments[d];for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(y[C]=m[C])}return y},e.apply(this,arguments)},t=Kr&&Kr.__spreadArrays||function(){for(var y=0,m=0,d=arguments.length;m<d;m++)y+=arguments[m].length;for(var g=Array(y),C=0,m=0;m<d;m++)for(var S=arguments[m],E=0,_=S.length;E<_;E++,C++)g[C]=S[E];return g},r=Kr&&Kr.__importDefault||function(y){return y&&y.__esModule?y:{default:y}},i=r(vf()),o=r(Sy()),l=r(Q4()),c=r(X4()),h=function(y){n(m,y);function m(d){var g=y.call(this,d)||this;g.dirtyProps=["modules","formats","bounds","theme","children"],g.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],g.state={generation:0},g.selection=null,g.onEditorChange=function(S,E,_,w){var O,I,L,V;S==="text-change"?(I=(O=g).onEditorChangeText)===null||I===void 0||I.call(O,g.editor.root.innerHTML,E,w,g.unprivilegedEditor):S==="selection-change"&&((V=(L=g).onEditorChangeSelection)===null||V===void 0||V.call(L,E,w,g.unprivilegedEditor))};var C=g.isControlled()?d.value:d.defaultValue;return g.value=C??"",g}return m.prototype.validateProps=function(d){var g;if(i.default.Children.count(d.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(d.children)){var C=i.default.Children.only(d.children);if(((g=C)===null||g===void 0?void 0:g.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&d.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},m.prototype.shouldComponentUpdate=function(d,g){var C=this,S;if(this.validateProps(d),!this.editor||this.state.generation!==g.generation)return!0;if("value"in d){var E=this.getEditorContents(),_=(S=d.value,S??"");this.isEqualValue(_,E)||this.setEditorContents(this.editor,_)}return d.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,d.readOnly),t(this.cleanProps,this.dirtyProps).some(function(w){return!l.default(d[w],C.props[w])})},m.prototype.shouldComponentRegenerate=function(d){var g=this;return this.dirtyProps.some(function(C){return!l.default(d[C],g.props[C])})},m.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},m.prototype.componentWillUnmount=function(){this.destroyEditor()},m.prototype.componentDidUpdate=function(d,g){var C=this;if(this.editor&&this.shouldComponentRegenerate(d)){var S=this.editor.getContents(),E=this.editor.getSelection();this.regenerationSnapshot={delta:S,selection:E},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==g.generation){var _=this.regenerationSnapshot,S=_.delta,w=_.selection;delete this.regenerationSnapshot,this.instantiateEditor();var O=this.editor;O.setContents(S),f(function(){return C.setEditorSelection(O,w)})}},m.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},m.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},m.prototype.isControlled=function(){return"value"in this.props},m.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},m.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},m.prototype.createEditor=function(d,g){var C=new c.default(d,g);return g.tabIndex!=null&&this.setEditorTabIndex(C,g.tabIndex),this.hookEditor(C),C},m.prototype.hookEditor=function(d){this.unprivilegedEditor=this.makeUnprivilegedEditor(d),d.on("editor-change",this.onEditorChange)},m.prototype.unhookEditor=function(d){d.off("editor-change",this.onEditorChange)},m.prototype.getEditorContents=function(){return this.value},m.prototype.getEditorSelection=function(){return this.selection},m.prototype.isDelta=function(d){return d&&d.ops},m.prototype.isEqualValue=function(d,g){return this.isDelta(d)&&this.isDelta(g)?l.default(d.ops,g.ops):l.default(d,g)},m.prototype.setEditorContents=function(d,g){var C=this;this.value=g;var S=this.getEditorSelection();typeof g=="string"?d.setContents(d.clipboard.convert(g)):d.setContents(g),f(function(){return C.setEditorSelection(d,S)})},m.prototype.setEditorSelection=function(d,g){if(this.selection=g,g){var C=d.getLength();g.index=Math.max(0,Math.min(g.index,C-1)),g.length=Math.max(0,Math.min(g.length,C-1-g.index)),d.setSelection(g)}},m.prototype.setEditorTabIndex=function(d,g){var C,S;!((S=(C=d)===null||C===void 0?void 0:C.scroll)===null||S===void 0)&&S.domNode&&(d.scroll.domNode.tabIndex=g)},m.prototype.setEditorReadOnly=function(d,g){g?d.disable():d.enable()},m.prototype.makeUnprivilegedEditor=function(d){var g=d;return{getHTML:function(){return g.root.innerHTML},getLength:g.getLength.bind(g),getText:g.getText.bind(g),getContents:g.getContents.bind(g),getSelection:g.getSelection.bind(g),getBounds:g.getBounds.bind(g)}},m.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var d=o.default.findDOMNode(this.editingArea);if(!d)throw new Error("Cannot find element for editing area");if(d.nodeType===3)throw new Error("Editing area cannot be a text node");return d},m.prototype.renderEditingArea=function(){var d=this,g=this.props,C=g.children,S=g.preserveWhitespace,E=this.state.generation,_={key:E,ref:function(w){d.editingArea=w}};return i.default.Children.count(C)?i.default.cloneElement(i.default.Children.only(C),_):S?i.default.createElement("pre",e({},_)):i.default.createElement("div",e({},_))},m.prototype.render=function(){var d;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(d=this.props.className,d??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},m.prototype.onEditorChangeText=function(d,g,C,S){var E,_;if(this.editor){var w=this.isDelta(this.value)?S.getContents():S.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=g,this.value=w,(_=(E=this.props).onChange)===null||_===void 0||_.call(E,d,g,C,S))}},m.prototype.onEditorChangeSelection=function(d,g,C){var S,E,_,w,O,I;if(this.editor){var L=this.getEditorSelection(),V=!L&&d,P=L&&!d;l.default(d,L)||(this.selection=d,(E=(S=this.props).onChangeSelection)===null||E===void 0||E.call(S,d,g,C),V?(w=(_=this.props).onFocus)===null||w===void 0||w.call(_,d,g,C):P&&((I=(O=this.props).onBlur)===null||I===void 0||I.call(O,L,g,C)))}},m.prototype.focus=function(){this.editor&&this.editor.focus()},m.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},m.displayName="React Quill",m.Quill=c.default,m.defaultProps={theme:"snow",modules:{},readOnly:!1},m}(i.default.Component);function f(y){Promise.resolve().then(y)}return Kr=h,Kr}var e3=Z4();const t3=Cy(e3);class n3 extends Ru{constructor(e){super(e),this.quillRef=qe.createRef()}getFormHtml(){return k.jsx("div",{children:k.jsx(t3,{ref:this.quillRef,modules:{toolbar:[["bold","italic","underline","blockquote"],[{color:["#F4F5F8","#E6FFFD","#99AFD1","#ecd23a","#fd5259","#D7ABF7","#9EFFA0","#F4F5F888","#E6FFFD77","#99AFD188","#ecd23a88","#fd525988","#D7ABF788","#9EFFA088","#000000","#E6FFFD44","#99AFD155","#ecd23a55","#fd525955","#D7ABF755","#9EFFA055"]},{background:[!1,"black","#00274D","#C1A71B","#5F0C0C","#4B0082","#002E07"]}],[,"code-block"],[{list:"ordered"},{list:"bullet"},{align:[]}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[],["clean"]]},style:this.props.wrapperStyle?{...this.props.wrapperStyle}:{minHeight:"100%",padding:"8px",minWidth:"99%",width:"100%"},theme:"snow",value:this.obj[0].getJson()[this.props.name],onChange:this.objDispatch})})}}class Ub extends Ho{constructor(e){super(e)}createFileInfo(e){const t=new Date,r=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0");let l="images/"+`${Math.floor(Math.random()*9999)}-${r+i}`+e.target.files[0].name;return this.fileInfo={selectedFile:e.target.files[0],path:l,pic:URL.createObjectURL(e.target.files[0])},this.setState({...this.fileInfo}),this.fileInfo}async prepareOnChange(){let e=await this.operationsFactory.prepare({prepare:{...this.props.prepareOnChange},clean:!0});e=e[0],this.obj=e}async changeHandler(e){var r;await this.createFileInfo(e),this.props.prepareOnChange&&await this.prepareOnChange(),this.props.callBackFunc&&await this.props.callBackFunc(this.obj,this.fileInfo);let t;if(await this.APIService.uploadPics(this.fileInfo.selectedFile,this.fileInfo.path),!this.obj.getPicSrc){if(t=await this.APIService.downloadPics(this.fileInfo.path),!this.props.skipUpdate&&!this.state.skipUpdate)if((r=this.obj)!=null&&r.length)for(let i of this.obj)await i.setCompState({[this.props.uploadAttribute||"picURL"]:t});else await this.obj.setCompState({[this.props.uploadAttribute||"picURL"]:t});this.props.downloadPicsCallBackFunc&&this.props.downloadPicsCallBackFunc(this.obj,this.fileInfo)}return this.props.runOnChange&&this.onSubmit(),t}async onSubmit(){this.props.prepareOnChange&&await this.operationsFactory.addToComponentList(),await this.obj.update(),this.props.finishCallBackFunc&&this.props.finishCallBackFunc(this.obj),this.dispatch({imgUploaded:this.obj})}additionalSetup(){this.wrapper.setStyle({maxWidth:"300px",maxHeight:"30px",width:"fit-content"}),this.label.setStyle({display:"inline-block",height:"35px",maxWidth:"fit-content",cursor:"pointer",position:"relative"}),this.form.updateProps({accept:"image/png, image/gif, image/jpeg, image/jpg, image/webp, image/svg+xml, application/pdf",style:{position:"absolute",top:0,left:0,cursor:"pointer",width:"100%",height:"100%",opacity:0},size:"6",type:"file",name:"file",onChange:this.changeHandler})}getInnerContent(){let e=this.getFormHtml();return this.innerContent=[this.label.getHtml({content:e,type:"label"}),this.props.errorText&&this.error.getHtml()],this.innerContent}getFormHtml(){return this.content=this.props.content||k.jsx(k.Fragment,{children:"Upload"}),k.jsxs("div",{className:this.props.containerStyle||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]})}}class r3 extends Ub{constructor(e){super(e)}getFormHtml(){var t,r;this.content=this.props.content||k.jsx(k.Fragment,{children:"Upload"});let e=(r=(t=this.obj)==null?void 0:t[0])==null?void 0:r.getJson()[this.props.uploadImgAttribute||"picURL"];return k.jsxs(k.Fragment,{children:[k.jsxs("div",{style:this.props.containerStyle,className:this.props.containerClass||"defaultButton",children:[this.content,this.form.getHtml({type:"input"})]}),(this.state.pic||e)&&k.jsx("img",{style:this.props.uploadedImgStyle,className:this.props.uploadedImgClass||"uploadedImg",src:this.state.pic||e})]})}}let i3=class extends Ho{constructor(e){super(e),this.state.formClass="FCDefaultDelButton",this.content="Delete"}buttonClickFunc(){this.props.obj.del()}};class s3 extends Rb{constructor(){super(...arguments);le(this,"factory",{input:Ru,textarea:Ru,math:NF,addButton:RF,baseButton:Ho,popupButton:LF,updateButton:DF,runButton:MF,quill:n3,upload:Ub,showUpload:r3,del:i3})}}class Vv extends lt{constructor(){super();le(this,"addToProps",{});le(this,"addToInitialSetup",[]);le(this,"getterFunc");this.state={}}getProps(){return{interface:this.interface,app:this.app,theme:this.props.theme,type:this.props.type,...this.props,...this.addToProps}}setComponentList(){var t;this.componentList=(t=this.interface)==null?void 0:t.getComponentList()}setProps(){}getHtml(){this.setProps();let t=this.getProps();return this.setGetterFunc(this.props.getterFunc),this.getterFunc&&(this.html=this.getterFunc({...t},t.type||this.state.type)),k.jsx(k.Fragment,{children:this.html})}setGetterFunc(t){this.getterFunc=t||this.interface.getMainFunc()||this.getterFunc}addToFactory(){if(this.props.addToFactory){let t=this.interface.getFactory();for(let r of this.props.addToFactory)t.registerComponent(r.type,r.comp)}}preSetup(){this.componentPreSetup(),this.initialSetupFunctions=[...this.initialSetupFunctions,this.setComponentList,this.addToFactory,...this.addToInitialSetup]}componentPreSetup(){}}class qb extends ol{constructor(){super(...arguments);le(this,"mainFunc",this.getFormComponent)}getFactory(){return this.factory===void 0&&(this.factory=new s3),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new kF),this.themeFactory}getFormComponent(t,r){return r=r||"input",this.factory.getComponent(r,t)}}const zb=new qb;class At extends Vv{constructor(e){super(e),this.state={type:"input"},this.interface=zb}}class mr extends At{constructor(e){super(e),this.state={type:"popupButton"}}}class Yu extends At{constructor(e){super(e),this.state={type:"updateButton"}}}class Xs extends At{constructor(e){super(e),this.state={type:"runButton"}}}class o3 extends At{constructor(e){super(e),this.state={type:e.uploadType||"upload"}}}class ll extends At{constructor(e){super(e),this.state={type:e.uploadType||"del"}}}class Hn extends lt{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setCell,this.getUseId],this.state={...this.state,defaultTheme:"defaultColumn",interface:"map",wrapperClass:"MCCell",linkClass:"MCLink"},this.setItemPropsRan=!1}setCell(){this.cell=this.props.cell}preSetup(){this.setComponents(["link","wrapper","item","option"])}setitemprops(){let e={...this.createPropObj("item","cell"),className:this.cell.class||this.theme[this.state.classKey],style:this.cell.style};this.cell.itemClick&&(e.checkItemClick=!0),this.setItemPropsRan?this.item.setProps(e):(this.builderObserver.subscribe(e),this.setItemPropsRan=!0)}setwrapperprops(){let e={...this.createPropObj("wrapper","cell")};this.setWrapperPropsRan?this.wrapper.setProps(e):(this.builderObserver.subscribe(e),this.setWrapperPropsRan=!0)}getOption(){return k.jsx(k.Fragment,{})}getUseId(){return this.cell&&this.obj.getJson&&(this.useId=this.cell.useId===!1?"":this.cell.useId===void 0?this.obj.getJson()._id:this.obj.getJson()[this.cell.useId]),this.useId}getInnerContent(){return this.innerContent=[this.item.getHtml({type:this.state.itemType||"span",content:this.getOption()})],this.innerContent}getLinkUrl(){var t,r,i;return(t=this.cell)!=null&&t.to?this.cell.to:`/${(i=(r=this.obj)==null?void 0:r.getJson())==null?void 0:i.type}/${this.useId}`}getLinkFunc(){if(this.cell.forceUpdate){let e=()=>{this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}if(this.cell.linkClick){let e=()=>{this.cell.linkClick(this.obj),this.cell.forceUpdate&&this.dispatch({forceUpdate:this.cell.forceUpdate})};this.link.setOnClick(e)}}getHtml(){var t;this.mapInnerContent(),this.getLinkFunc(),this.cell.type;let e=(t=this.cell)!=null&&t.hasLink?this.link.getHtml({type:this.state.linkType||"link",content:this.innerContent,props:{to:this.getLinkUrl()}}):this.wrapper.getHtml({type:this.state.wrapperType||"span",content:this.innerContent});return this.html=k.jsx(k.Fragment,{children:e}),this.html}}class Bv extends Hn{constructor(e){super(e),this.state.classKey="MCDelItem",this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setDel]}setDel(){this.cell.itemClick=this.del}del(){let e=this.props.app;this.cell.popop?e.dispatch({popupSwitch:"del",delComponent:this.obj}):this.obj.del()}getOption(){return k.jsx("div",{children:"X"})}}class Uv extends Hn{constructor(e){super(e),this.state.classKey="MCEditItem",this.state.itemClick=this.edit}edit(){this.props.app.dispatch({popupSwitch:"edit",currentPopupComponent:this.obj})}getOption(){return"edit"}}class Zf extends Hn{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getName(){let e=this.cell;this.name=e.name,this.name||(this.name=e)}getOption(){return this.getName(),this.obj.getJson()[this.name]}}class a3 extends Zf{constructor(e){super(e),this.state.classKey="MCTextItem"}getOption(){return k.jsx(k.Fragment,{children:this.cell.name})}}class l3 extends Hn{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){let e=this.cell.custom;return k.jsx(e,{...this.props,masterCell:this})}}class Hb extends Hn{constructor(e){super(e),this.state.defaultClassName="MCImgItem",this.state.itemType="img"}getPicSrc(){var e,t;return this.obj.getJson&&(this.src=(t=this.obj)==null?void 0:t.getJson()[((e=this.state.cell)==null?void 0:e.src)||"picURL"]),this.cell.imgSrc&&(this.src=this.cell.imgSrc),this.src}additionalPostSetup(){this.getPicSrc(),this.src&&this.item.addProps({src:this.src,alt:"picture goes here"})}}class u3 extends Hn{constructor(e){super(e)}getOption(){({...this.cell,...this.props})}}class qv extends Hn{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setList,this.setFactory],this.state={...this.state,mapContainerClass:"MCMapContainer",interface:"map",mapSectionClass:"MCMapSection"},this.defaultTypes=["del","edit","img"]}setFactory(){this.factory=this.interface.getFactory()}getDefaultTypes(){return this.defaultTypes}checkCellForDefaults(e){let t=this.getDefaultTypes();return t[t.indexOf(e)]}textOrAttribute(e,t){return e.getJson&&(e!=null&&e.getJson()[t])?"attribute":"text"}getType(e,t){let r=e.type;return r||(r=this.checkCellForDefaults(e),r||(r=this.textOrAttribute(t,e))),r}getProps(e,t){return{obj:t,...this.props,interface:this.interface,cell:e,theme:this.props.theme}}getCellList(e){let t=this.props.cells;return k.jsx(k.Fragment,{children:t.map((r,i)=>{let o=this.getType(r,e),l=this.getProps(r,e);return k.jsx(k.Fragment,{children:this.factory.getComponent(o,l)})})})}getListHtml(){return k.jsx(k.Fragment,{children:this.list.map(e=>k.jsx(k.Fragment,{children:this.mapSection.getHtml({type:"div",content:this.getCellList(e)})}))})}setList(){this.list=this.props.list}preSetup(){this.setComponents(["mapContainer","mapSection","link"])}getHtml(){let e=this.mapContainer.getHtml({type:"div",content:this.getListHtml()});return this.html=k.jsx(k.Fragment,{children:e}),this.html}}class JT extends Bv{constructor(e){super(e),this.state.classKey="MCCustomDelItem"}getOption(){return k.jsx(this.cell.custom,{...this.props,masterCell:this})}}class c3 extends Bv{constructor(e){super(e),this.state.classKey="MCDelItem"}getOption(){return this.props.delText||"delete"}}const h3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFRGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDgiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0OCIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB0aWZmOkltYWdlTGVuZ3RoPSI0OCIKICAgdGlmZjpJbWFnZVdpZHRoPSI0OCIKICAgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIKICAgdGlmZjpYUmVzb2x1dGlvbj0iNzIvMSIKICAgdGlmZjpZUmVzb2x1dGlvbj0iNzIvMSIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDktMDhUMTQ6NDQ6MzYtMDY6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgeG1wTU06YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgeG1wTU06c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgeG1wTU06d2hlbj0iMjAyMy0wOC0wNFQxMDoyNTozOC0wNjowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMiAyLjEuMSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wOS0wOFQxNDo0NDozNi0wNjowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+zw4Y8wAAAYFpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZHPK0RRFMc/ZshgRJmFhcUkZGE0KLGxmMmvwmJmlF+bmee9GTUzXu89SbbKVlFi49eCv4CtslaKSMmWNbFhes7z1Ejm3M49n/u995zuPRc8iaySM8vDkMtbRmw4EpyanglWPlGFjwDthJOKqY/HhxKUtPdbypx4HXJqlT73r9XMq6YCZT7hAUU3LOER4bFlS3d4SzigZJLzwifCHYZcUPjG0VMuPzucdvnTYSMRi4KnXjiY/sWpX6xkjJywvJyWXHZJ+bmP8xK/mp+MS2wWb8IkxjARgowySJReuuiXuZcQ3XTKihL54e/8CRYlV5FZZwWDBdJksOgQdUmqqxI10VUZWVac/v/tq6n1dLvV/RGoeLTt11ao3ITChm1/HNh24RC8D3CeL+Yv7kPfm+gbRa1lD+rW4PSiqKW24WwdGu/1pJH8lrziHk2Dl2OonYaGK6iedXv2s8/RHSRW5asuYWcX2uR83dwXqRtoBLx59Y4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAU5SURBVGiB1ZpfbFNVHMc/bW/H7d3WGujaMeqy8ECMEcgiICDDOI0hEpco8iDECMHEByBRSAwvxCgJ0ZhIzEBjAma8QEyEBwUejEyibg/GYcKYYRCIQEHaVZa2621v/10f7m1pu/5d/9B9k5vc3nvOuZ9v77nn3+8YqIFsdpcIPA88CzhyDgBvzjEGjPh97ki1zzbMNaPN7rIBLwH9aPBihUVEgBHgIjDs97n9c+Go2IDN7rIAO4B3AWkuD82jEHACGPL73OFKMpZtwGZ3mYA3gT2AvSK88jUFHAXO+H3uRDkZyjJgs7s6gUHgmbmzVaSrwB6/z+0pldBUKoHN7loBDAE9VWMVkNEI/WstrZtfbG1f+qTZ/J8/sWgmpL4qStYxRQ4UNVH0DdjsrgHgENBSS+BMdTkF4ehH9q6VT7Wkvyc5oiYPfzX94PS5GR9w0O9z/1Aof8E3oMN/VixNtVriFITTRxzdy3rMWS2YWTAY+tdZ2uWwql6eUPpEyXpXkQOT+crIC6dXm8FC92uhJU5BOHXE0e3qFAq+3b5VYpscVuOXJ5TnRMk6mq86zQLUP9ghoL2mxDn6/MCizt6nF2Q1w6oKhpxK3bdKbPM9TCTHr0fXipL1giIHQpn3swzoTeW31PGDTem3PyOhvtWi1LHQZE5dMxg0E6nzlNb1iq0/DsuJwEyyV5SsZxU5oKbuGXPK3UKDmkp/MJncvs97d+JGNKvjyn0DABbRYHx5vaUVWA68kXkvbUDvYffWhRbocQnmbQNttsxrgRnNxPj10iYcdpOgn+7VWYHsN7CDOvWwPS7BfOoLZ/eh9xcu3rW1/YnMe8FQMvn2fu/dK9eicrEyJm/GFP20A3gndd0E6YHZl4B5dtbqlIJ32rW63rfa0haSk/G//o6mR6LRmKqevyQH1/UusHR2CLMYJm5Ew58cm/aq6ZrPclGyfqfIAcUEIErWzcCmesOnVNhEOLh25QLLYscjE+4H8ejOA1PuQDCZzCiiBbilyIFrKQO7gaWNgC9mIhZT1XOX5OCaFaLY5RRa3A/i0bc+8N6574nH85WhyIELJn0y8jEg5EtUD/iiJuKo5y/JwS6HIOz/9OG/heCBLlGynjSJkvUFYKDe8L/+EQke/nra+8oGqV0wPWpn8pmIx+Gn38MzwVBWtcmVAIybRMm6FeitN/x7B6fu37gdi169Hgtv2ljaRJnymETJ+jqwrN7w0ZjWhty+F49N3opFXutvzeoT+lZb2nzTidj4ZFShfN0z8mjiXXd4gBazwbB9ILsvAPD4ErHRy5GifUEeOao2UCn8N4c6ujauEbMGih5fIrZtn+fOP+54rMLHV2fgMcODbmBOagJ4QBsLeecrPOCt2EATwUOlBpoMHiox0ITwoBsYm6fwAGNGtAXWgl14E8NHgFGjvsQ9Ms/gQV+eT/UDw/MMHrRl+fSc+CLaEndaTQ4fQv/TjQB6cOFEZoomhgc4ngqIZA4lhtDW5/OqieCngJOpH2kDemTkaKFcTQIPMJgZxckdzJ1BCy4U1GOGHwfOZl6YtQZms7ucwPc3h7s3lFtqg+CngK25UZtZw2k9we5yS20QfJQCIae88wG/z32lnFIbBA9alCYv05wnNA385z8sFmIqGaXUozXHqF9otZCm0KpN0dpQMoSkyAGPKFkvAKuowQpGmRoHdvp97lulElYa6N6CFkOoZ6B7EDhb00B3pjK2GuwCWivNX0Ah4Dhwsm5bDXKlxxT60TZ8VLPZ42fgl4Zt9sgnfYV7PZVttxmtxXab/wFJap9Ow0di3gAAAABJRU5ErkJggg==";class f3 extends Uv{constructor(e){super(e),this.state.classKey="MCEditImgItem",this.state.itemType="img"}additionalPostSetup(){this.getImg(),this.item.setProps({src:this.src})}getImg(){return this.src=this.cell.imgSrc||h3,this.src}}class d3 extends Uv{constructor(e){super(e),this.state.classKey="MCCustomEditItem"}getOption(){return k.jsx(this.cell.custom,{...this.props,masterCell:this})}}let p3=class extends qv{constructor(e){super(e),this.mapContainer=qe.createRef(),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getPicObj,this.getAddComponentButton],this.state={...this.state,index:0,isDragging:void 0,defaultTheme:"interactiveMap"}}_addEventListeners(){var t;this.props;let e=[];for(let r of this.list){let i=document.getElementById(r.getJson()._id);i.addEventListener("mousedown",o=>{this.setState({isDragging:i})}),i.addEventListener("mouseup",o=>{this.setState({isDragging:void 0})}),e.push(i),this.setState({saveList:e})}(t=this.mapContainer)!=null&&t.current&&(this.mapContainer.current.addEventListener("mouseup",r=>{this.currentComp!==void 0&&this.currentComp.update(),this.setState({isDragging:void 0})}),this.mapContainer.current.addEventListener("mousemove",r=>{if(this.state.isDragging!==void 0){let i=this.state.isDragging,o=i.id,l=this.list.find(c=>c.getJson()._id===o);if((l==null?void 0:l.getJson().draggable)!==!1){const c=this.mapContainer.current.getBoundingClientRect(),h=r.pageX-c.left-25,f=r.pageY-c.top-25;l.setCompState({x:h,y:f}),this.currentComp=l,i.style.left=`${h}px`,i.style.top=`${f}px`}}}))}componentDidMount(){this._addEventListeners()}zoom(e){let t=this.mapContainer.current.getBoundingClientRect(),r=t.width*e,i=t.height*e;this.mapContainer.current.style.width=r+"px",this.mapContainer.current.style.height=i+"px";let o=this.state.saveList;for(let l of o){const c=l.style.left||"0",h=l.style.top||"0",f=c.match(/(-?\d*\.?\d+)/),y=h.match(/(-?\d*\.?\d+)/),m=f?parseFloat(f[0]):0,d=y?parseFloat(y[0]):0,g=m*e,C=d*e;l.style.left=g+"px",l.style.top=C+"px"}}componentDidUpdate(e,t){this.props.list.length!==e.list.length&&this._addEventListeners()}getAddComponentButton(){var e,t;if(this.addComponentButton=this.props.addComponentButton,this.addComponentButton!==void 0){let r=typeof this.addComponentButton=="string"?this.addComponentButton:this.addComponentButton.type||"addComponentButton",i=this.props.pinKey||((e=this.mapObj)==null?void 0:e.getJson().pinType)||"pin";this.addComponentButton=this.factory.getComponent(r,{...this.props,theme:this.props.theme||this.state.defaultTheme,mapId:this.mapObj?(t=this.mapObj)==null?void 0:t.getJson()._id:void 0,addType:i,addPinProps:this.props.addPinProps,pinAdded:this._addEventListeners})}}getPicObj(){var t;let e=this.props.imgAttribute||"picURL";this.mapObj&&(this.picSrc=(t=this.mapObj)==null?void 0:t.getJson()[e])}preSetup(){this.setComponents([])}async changePic(e){let t=this.props.list;e=e<0?e=t.length-1:e,e=e>=t.length?0:e,this.mapObj=t[e],await this.setState({index:e}),this._addEventListeners()}setList(){if(!this.listSet){let t=this.props.list[this.state.index];this.mapObj=t;let r=this.props.pinKey||(t==null?void 0:t.getJson().pinType)||"pin",i=this.props.pinAttribute||(t==null?void 0:t.getJson().type)+"Id"||"mapId",o=this.props.mapId||(t==null?void 0:t.getJson()._id);this.list=this.componentList.getList(r,o,i)}}preSetup(){this.setComponents(["mapContainer","right","left","image","zoomIn","zoomOut"])}getIndexAndChangeMap(e){let t=this.props.list.indexOf(this.mapObj)+e;this.changePic(t)}getListHtml(){let e=this.props,t=this.theme,r=this.factory;return k.jsx(k.Fragment,{children:this.list.map((i,o)=>{let l={obj:i,props:e,interface:this.interface,cell:e.pinCell,theme:this.props.them||this.state.defaultTheme,pinProps:this.props.pinProps};return k.jsx("div",{id:i.getJson()._id,className:e.mapSectionClass?e.mapSectionClass:t.MCMapSection,style:{...e.mapSectionStyle,left:i.getJson().x+"px",top:i.getJson().y+"px"},children:k.jsx(k.Fragment,{children:r.getComponent(e.pinType?e.pinType:"attribute",l)})},o)})})}getHtml(){if(this.props.list.length>0){let e=this.props,t=this.theme;return k.jsxs("div",{ref:this.mapContainer,className:e.mapContainerClass?e.mapContainerClass:t.MCMapContainer,style:{...e.mapContainerStyle},children:[k.jsx("img",{src:this.picSrc,className:e.mapClass?e.mapClass:t.MCMap,style:{...e.mapStyle}}),this.getListHtml(),e.addComponentButton&&k.jsx(k.Fragment,{children:this.addComponentButton}),k.jsx("div",{style:{position:"absolute",top:"0px",right:"0px"},onClick:()=>{this.zoom(.5)},children:"zoom out"}),k.jsx("div",{style:{position:"absolute",top:"20px",right:"0px"},onClick:()=>{this.zoom(2)},children:"zoom in"}),k.jsx("div",{style:{position:"absolute",top:"0px",left:"-20px"},onClick:()=>{this.getIndexAndChangeMap(-1)},children:"prev"}),k.jsx("div",{style:{position:"absolute",top:"20px",right:"-20px"},onClick:()=>{this.getIndexAndChangeMap(1)},children:"next"})]})}else this.list=[]}};class m3 extends Hn{constructor(e){super(e)}preSetup(){this.setComponents([])}async createObjType(){let e=this.operationsFactory,t=this.props.addType;await e.prepare({prepare:{type:t,mapId:this.props.mapId,...this.props.addPinProps},clean:!0,run:!0}),this.props.pinAdded()}getHtml(){let e=this.props.text||"+ Add Item";return k.jsxs("div",{onClick:this.createObjType,style:this.props.style,className:this.props.class||this.theme.MCAddButton,children:[e," "]})}}class g3 extends Hn{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getOption(){return this.state.obj}}class y3 extends Zf{constructor(e){super(e),this.state.classKey="MCAttributeItem"}getItemClass(){var i;let e=this.cell,t=e.activeAttribute?e.activeAttribute:"_id";if(this.state.obj.getJson()[t]===((i=e.activeItem)==null?void 0:i.getJson()[t])){let o=e.activeClass?e.activeClass:this.theme.MCActiveItem;this.item.setClass(this.item.getClass()+" "+o)}}additionalPostSetup(){this.getItemClass()}}class v3 extends Hb{constructor(e){super(e),this.state.classKey="MCLogoItem"}}class _3 extends Hn{constructor(e){super(e),this.state.itemType="div"}getList(){return this.list=this.props.cell.links.filter(e=>(e==null?void 0:e.name)!==void 0),this.list}getHome(){var e;if(!this.state.active){this.home=this.list.find(t=>t.path==="/");for(let t of this.list)t.active=(e=this.home)==null?void 0:e.name}}getOption(){let e=this.props.cell.links.filter(t=>(t==null?void 0:t.name)!==void 0&&t.display!==!1);return k.jsx(bn,{list:e,theme:this.cell.linksTheme||"links",mapSectionClass:this.props.cell.linkSectionClass||void 0,mapSectionStyle:this.props.cell.linkSectionStyle||void 0,cells:[{type:"linkItem",class:this.props.cell.linkItemClass||void 0,activeClass:this.props.cell.activeClass||void 0,style:this.props.cell.linkItemStyle||void 0,linkClick:t=>{for(let r of this.props.cell.links)r.active=t==null?void 0:t.name;this.setState({active:t==null?void 0:t.name})}}]})}additionalSetup(){this.getList(),this.getHome()}}class w3 extends Hn{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.setUpLinks],this.state.classKey="MCLinkItem",this.state.itemType="div"}setUpLinks(){this.cell.to=this.obj.path,this.useId="",this.cell.hasLink=!0}getActiveClass(){return this.activeClass=this.cell.activeClass||this.theme.MCActiveLink,this.activeClass}setActiveClass(){var r,i,o,l,c;const e=((r=this.obj)==null?void 0:r.path)==="/"||((i=this.obj)==null?void 0:i.path)==="/home",t=window.location.pathname;if(e){const h=t.split("/").filter(Boolean);if(h.length>0&&h[0]!=="home")return}if(((o=this.obj)==null?void 0:o.active)===((l=this.obj)==null?void 0:l.name)||t.includes((c=this.obj)==null?void 0:c.path)){let h=this.obj.name===""?"none":this.getActiveClass();h=h||"",this.item.setClass(this.item.getClass()+" "+h)}}additionalSetup(){this.setActiveClass()}getOption(){var e;return(e=this.props.obj)==null?void 0:e.name}}class E3 extends Hn{constructor(e){super(e),this.state.classKey="MCTextItem"}additionalPostSetup(){this.item.setOnClick(this.cell.logoutFunc||this.APIService.logout)}getOption(){return"logout"}}class T3 extends Hn{constructor(e){super(e),this.state.classKey="MCOrderedArrows",this.state.increment=1,this.state.decrement=-1}increasePosition(){this.obj.updateOrder(this.state.increment)}decreasePosition(){this.obj.updateOrder(this.state.decrement)}increaseArrowUI(){return this.increaseArrow=k.jsx("div",{className:"upward-arrow",onClick:this.decreasePosition}),this.increaseArrow}decreaseArrowUI(){return this.decreaseArrow=k.jsx("div",{style:{marginTop:"5px"},className:"downward-arrow",onClick:this.increasePosition}),this.decreaseArrow}getOption(){return this.increaseArrowUI(),this.decreaseArrowUI(),k.jsxs("div",{style:{marginTop:"-4px"},className:"fitCC",children:[this.increaseArrow,this.decreaseArrow]})}}class C3 extends Hn{constructor(e){super(e),this.state.displayState=!1,this.state.itemType="div"}displayOption(){return k.jsx("div",{style:{position:"absolute",left:"0px",top:"0px"},className:this.state.displayState?"downward-arrow":"right-arrow",onClick:()=>{this.wrapper.setStyle({...this.wrapper.getStyle(),height:"200px"}),this.setState({displayState:!this.state.displayState})}})}mapOption(){return k.jsx(bn,{name:this.props.name,filter:{attribute:this.props.filter.attribute,search:this.obj.getJson()._id},cells:[...this.props.cells]})}additionalPostSetup(){this.item.setStyle({...this.item.getStyle(),position:"relative"})}getOption(){return k.jsxs("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[this.displayOption(),"  ",this.state.displayState&&this.mapOption(),"  "]})}}class S3 extends Zf{constructor(){super(),this.state.classKey="MCBackgroundItem",this.state.wrapperClass="MCCellBackground",this.state.linkClass="MCBackgroundLink"}additionalPostSetup(){let t={width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",textAlign:"center",fontSize:"50px",background:`linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${this.cell.pirSRC||this.obj.getJson()[this.cell.picAttribute||"picURL"]}) no-repeat center center`,backgroundSize:"cover",textDecoration:"none"};this.wrapper.setStyle({...this.wrapper.getStyle(),...t}),this.link.setStyle({...this.wrapper.getStyle(),...t})}}class I3 extends Hn{constructor(e){super(e),this.state.classKey="MCCustom"}getOption(){return this.cell.custom}}const ed=0,Zs=1,ul=2,Wb=4;function QT(n){return()=>n}function b3(n){n()}function $b(n,e){return t=>n(e(t))}function YT(n,e){return()=>n(e)}function A3(n,e){return t=>n(e,t)}function zv(n){return n!==void 0}function x3(...n){return()=>{n.map(b3)}}function cl(){}function td(n,e){return e(n),n}function k3(n,e){return e(n)}function Ft(...n){return n}function bt(n,e){return n(Zs,e)}function ct(n,e){n(ed,e)}function Hv(n){n(ul)}function yn(n){return n(Wb)}function Ke(n,e){return bt(n,A3(e,ed))}function Ei(n,e){const t=n(Zs,r=>{t(),e(r)});return t}function XT(n){let e,t;return r=>i=>{e=i,t&&clearTimeout(t),t=setTimeout(()=>{r(e)},n)}}function Kb(n,e){return n===e}function jt(n=Kb){let e;return t=>r=>{n(e,r)||(e=r,t(r))}}function it(n){return e=>t=>{n(t)&&e(t)}}function Ve(n){return e=>$b(e,n)}function hi(n){return e=>()=>{e(n)}}function be(n,...e){const t=R3(...e);return(r,i)=>{switch(r){case ul:Hv(n);return;case Zs:return bt(n,t(i))}}}function di(n,e){return t=>r=>{t(e=n(e,r))}}function Ya(n){return e=>t=>{n>0?n--:e(t)}}function Ls(n){let e=null,t;return r=>i=>{e=i,!t&&(t=setTimeout(()=>{t=void 0,r(e)},n))}}function dt(...n){const e=new Array(n.length);let t=0,r=null;const i=Math.pow(2,n.length)-1;return n.forEach((o,l)=>{const c=Math.pow(2,l);bt(o,h=>{const f=t;t=t|c,e[l]=h,f!==i&&t===i&&r&&(r(),r=null)})}),o=>l=>{const c=()=>{o([l].concat(e))};t===i?c():r=c}}function R3(...n){return e=>n.reduceRight(k3,e)}function P3(n){let e,t;const r=()=>e==null?void 0:e();return function(i,o){switch(i){case Zs:return o?t===o?void 0:(r(),t=o,e=bt(n,o),e):(r(),cl);case ul:r(),t=null;return}}}function ke(n){let e=n;const t=wt();return(r,i)=>{switch(r){case ed:e=i;break;case Zs:{i(e);break}case Wb:return e}return t(r,i)}}function Dn(n,e){return td(ke(e),t=>Ke(n,t))}function wt(){const n=[];return(e,t)=>{switch(e){case ed:n.slice().forEach(r=>{r(t)});return;case ul:n.splice(0,n.length);return;case Zs:return n.push(t),()=>{const r=n.indexOf(t);r>-1&&n.splice(r,1)}}}}function gr(n){return td(wt(),e=>Ke(n,e))}function St(n,e=[],{singleton:t}={singleton:!0}){return{constructor:n,dependencies:e,id:O3(),singleton:t}}const O3=()=>Symbol();function N3(n){const e=new Map,t=({constructor:r,dependencies:i,id:o,singleton:l})=>{if(l&&e.has(o))return e.get(o);const c=r(i.map(h=>t(h)));return l&&e.set(o,c),c};return t(n)}function un(...n){const e=wt(),t=new Array(n.length);let r=0;const i=Math.pow(2,n.length)-1;return n.forEach((o,l)=>{const c=Math.pow(2,l);bt(o,h=>{t[l]=h,r=r|c,r===i&&ct(e,t)})}),function(o,l){switch(o){case ul:{Hv(e);return}case Zs:return r===i&&l(t),bt(e,l)}}}function ot(n,e=Kb){return be(n,jt(e))}function ZT(...n){return function(e,t){switch(e){case ul:return;case Zs:return x3(...n.map(r=>bt(r,t)))}}}var rr=(n=>(n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.WARN=2]="WARN",n[n.ERROR=3]="ERROR",n))(rr||{});const L3={0:"debug",3:"error",1:"log",2:"warn"},D3=()=>typeof globalThis>"u"?window:globalThis,eo=St(()=>{const n=ke(3);return{log:ke((e,t,r=1)=>{var i;const o=(i=D3().VIRTUOSO_LOG_LEVEL)!=null?i:yn(n);r>=o&&console[L3[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,t)}),logLevel:n}},[],{singleton:!0});function Wo(n,e,t){return Wv(n,e,t).callbackRef}function Wv(n,e,t){const r=qe.useRef(null);let i=l=>{};const o=qe.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const c=()=>{const h=l[0].target;h.offsetParent!==null&&n(h)};t?c():requestAnimationFrame(c)}):null,[n,t]);return i=l=>{l&&e?(o==null||o.observe(l),r.current=l):(r.current&&(o==null||o.unobserve(r.current)),r.current=null)},{callbackRef:i,ref:r}}function M3(n,e,t,r,i,o,l,c,h){const f=qe.useCallback(y=>{const m=j3(y.children,e,c?"offsetWidth":"offsetHeight",i);let d=y.parentElement;for(;!d.dataset.virtuosoScroller;)d=d.parentElement;const g=d.lastElementChild.dataset.viewportType==="window";let C;g&&(C=d.ownerDocument.defaultView);const S=l?c?l.scrollLeft:l.scrollTop:g?c?C.scrollX||C.document.documentElement.scrollLeft:C.scrollY||C.document.documentElement.scrollTop:c?d.scrollLeft:d.scrollTop,E=l?c?l.scrollWidth:l.scrollHeight:g?c?C.document.documentElement.scrollWidth:C.document.documentElement.scrollHeight:c?d.scrollWidth:d.scrollHeight,_=l?c?l.offsetWidth:l.offsetHeight:g?c?C.innerWidth:C.innerHeight:c?d.offsetWidth:d.offsetHeight;r({scrollHeight:E,scrollTop:Math.max(S,0),viewportHeight:_}),o==null||o(c?eC("column-gap",getComputedStyle(y).columnGap,i):eC("row-gap",getComputedStyle(y).rowGap,i)),m!==null&&n(m)},[n,e,i,o,l,r,c]);return Wv(f,t,h)}function j3(n,e,t,r){const i=n.length;if(i===0)return null;const o=[];for(let l=0;l<i;l++){const c=n.item(l);if(c.dataset.index===void 0)continue;const h=parseInt(c.dataset.index),f=parseFloat(c.dataset.knownSize),y=e(c,t);if(y===0&&r("Zero-sized element, this should not happen",{child:c},rr.ERROR),y===f)continue;const m=o[o.length-1];o.length===0||m.size!==y||m.endIndex!==h-1?o.push({endIndex:h,size:y,startIndex:h}):o[o.length-1].endIndex++}return o}function eC(n,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${n} was not resolved to pixel value correctly`,e,rr.WARN),e==="normal"?0:parseInt(e??"0",10)}function Gb(n,e,t){const r=qe.useRef(null),i=qe.useCallback(h=>{if(!(h!=null&&h.offsetParent))return;const f=h.getBoundingClientRect(),y=f.width;let m,d;if(e){const g=e.getBoundingClientRect(),C=f.top-g.top;d=g.height-Math.max(0,C),m=C+e.scrollTop}else{const g=l.current.ownerDocument.defaultView;d=g.innerHeight-Math.max(0,f.top),m=f.top+g.scrollY}r.current={offsetTop:m,visibleHeight:d,visibleWidth:y},n(r.current)},[n,e]),{callbackRef:o,ref:l}=Wv(i,!0,t),c=qe.useCallback(()=>{i(l.current)},[i,l]);return qe.useEffect(()=>{var h;if(e){e.addEventListener("scroll",c);const f=new ResizeObserver(()=>{requestAnimationFrame(c)});return f.observe(e),()=>{e.removeEventListener("scroll",c),f.unobserve(e)}}else{const f=(h=l.current)==null?void 0:h.ownerDocument.defaultView;return f==null||f.addEventListener("scroll",c),f==null||f.addEventListener("resize",c),()=>{f==null||f.removeEventListener("scroll",c),f==null||f.removeEventListener("resize",c)}}},[c,e,l]),o}const Wn=St(()=>{const n=wt(),e=wt(),t=ke(0),r=wt(),i=ke(0),o=wt(),l=wt(),c=ke(0),h=ke(0),f=ke(0),y=ke(0),m=wt(),d=wt(),g=ke(!1),C=ke(!1),S=ke(!1);return Ke(be(n,Ve(({scrollTop:E})=>E)),e),Ke(be(n,Ve(({scrollHeight:E})=>E)),l),Ke(e,i),{deviation:t,fixedFooterHeight:f,fixedHeaderHeight:h,footerHeight:y,headerHeight:c,horizontalDirection:C,scrollBy:d,scrollContainerState:n,scrollHeight:l,scrollingInProgress:g,scrollTo:m,scrollTop:e,skipAnimationFrameInResizeObserver:S,smoothScrollTargetReached:r,statefulScrollTop:i,viewportHeight:o}},[],{singleton:!0}),Pu={lvl:0};function Jb(n,e){const t=n.length;if(t===0)return[];let{index:r,value:i}=e(n[0]);const o=[];for(let l=1;l<t;l++){const{index:c,value:h}=e(n[l]);o.push({end:c-1,start:r,value:i}),r=c,i=h}return o.push({end:1/0,start:r,value:i}),o}function kt(n){return n===Pu}function Ou(n,e){if(!kt(n))return e===n.k?n.v:e<n.k?Ou(n.l,e):Ou(n.r,e)}function Xr(n,e,t="k"){if(kt(n))return[-1/0,void 0];if(Number(n[t])===e)return[n.k,n.v];if(Number(n[t])<e){const r=Xr(n.r,e,t);return r[0]===-1/0?[n.k,n.v]:r}return Xr(n.l,e,t)}function fr(n,e,t){return kt(n)?Xb(e,t,1):e===n.k?ln(n,{k:e,v:t}):e<n.k?tC(ln(n,{l:fr(n.l,e,t)})):tC(ln(n,{r:fr(n.r,e,t)}))}function qa(){return Pu}function nd(n,e,t){if(kt(n))return[];const r=Xr(n,e)[0];return F3(my(n,r,t))}function py(n,e){if(kt(n))return Pu;const{k:t,l:r,r:i}=n;if(e===t){if(kt(r))return i;if(kt(i))return r;{const[o,l]=Yb(r);return qh(ln(n,{k:o,l:Qb(r),v:l}))}}else return e<t?qh(ln(n,{l:py(r,e)})):qh(ln(n,{r:py(i,e)}))}function Po(n){return kt(n)?[]:[...Po(n.l),{k:n.k,v:n.v},...Po(n.r)]}function my(n,e,t){if(kt(n))return[];const{k:r,l:i,r:o,v:l}=n;let c=[];return r>e&&(c=c.concat(my(i,e,t))),r>=e&&r<=t&&c.push({k:r,v:l}),r<=t&&(c=c.concat(my(o,e,t))),c}function qh(n){const{l:e,lvl:t,r}=n;if(r.lvl>=t-1&&e.lvl>=t-1)return n;if(t>r.lvl+1){if(Lg(e))return Zb(ln(n,{lvl:t-1}));if(!kt(e)&&!kt(e.r))return ln(e.r,{l:ln(e,{r:e.r.l}),lvl:t,r:ln(n,{l:e.r.r,lvl:t-1})});throw new Error("Unexpected empty nodes")}else{if(Lg(n))return gy(ln(n,{lvl:t-1}));if(!kt(r)&&!kt(r.l)){const i=r.l,o=Lg(i)?r.lvl-1:r.lvl;return ln(i,{l:ln(n,{lvl:t-1,r:i.l}),lvl:i.lvl+1,r:gy(ln(r,{l:i.r,lvl:o}))})}else throw new Error("Unexpected empty nodes")}}function ln(n,e){return Xb(e.k!==void 0?e.k:n.k,e.v!==void 0?e.v:n.v,e.lvl!==void 0?e.lvl:n.lvl,e.l!==void 0?e.l:n.l,e.r!==void 0?e.r:n.r)}function Qb(n){return kt(n.r)?n.l:qh(ln(n,{r:Qb(n.r)}))}function Lg(n){return kt(n)||n.lvl>n.r.lvl}function Yb(n){return kt(n.r)?[n.k,n.v]:Yb(n.r)}function Xb(n,e,t,r=Pu,i=Pu){return{k:n,l:r,lvl:t,r:i,v:e}}function tC(n){return gy(Zb(n))}function Zb(n){const{l:e}=n;return!kt(e)&&e.lvl===n.lvl?ln(e,{r:ln(n,{l:e.r})}):n}function gy(n){const{lvl:e,r:t}=n;return!kt(t)&&!kt(t.r)&&t.lvl===e&&t.r.lvl===e?ln(t,{l:ln(n,{r:t.l}),lvl:e+1}):n}function F3(n){return Jb(n,({k:e,v:t})=>({index:e,value:t}))}function eA(n,e){return!!(n&&n.startIndex===e.startIndex&&n.endIndex===e.endIndex)}function Nu(n,e){return!!(n&&n[0]===e[0]&&n[1]===e[1])}const $v=St(()=>({recalcInProgress:ke(!1)}),[],{singleton:!0});function tA(n,e,t){return n[df(n,e,t)]}function df(n,e,t,r=0){let i=n.length-1;for(;r<=i;){const o=Math.floor((r+i)/2),l=n[o],c=t(l,e);if(c===0)return o;if(c===-1){if(i-r<2)return o-1;i=o-1}else{if(i===r)return o;r=o+1}}throw new Error(`Failed binary finding record in array - ${n.join(",")}, searched for ${e}`)}function V3(n,e,t,r){const i=df(n,e,r),o=df(n,t,r,i);return n.slice(i,o+1)}function Ks(n,e){return Math.round(n.getBoundingClientRect()[e])}function rd(n){return!kt(n.groupOffsetTree)}function Kv({index:n},e){return e===n?0:e<n?-1:1}function B3(){return{groupIndices:[],groupOffsetTree:qa(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:qa()}}function U3(n,e){let t=kt(n)?0:1/0;for(const r of e){const{endIndex:i,size:o,startIndex:l}=r;if(t=Math.min(t,l),kt(n)){n=fr(n,0,o);continue}const c=nd(n,l-1,i+1);if(c.some(G3(r)))continue;let h=!1,f=!1;for(const{end:y,start:m,value:d}of c)h?(i>=m||o===d)&&(n=py(n,m)):(f=d!==o,h=!0),y>i&&i>=m&&d!==o&&(n=fr(n,i+1,d));f&&(n=fr(n,l,o))}return[n,t]}function q3(n){return typeof n.groupIndex<"u"}function z3({offset:n},e){return e===n?0:e<n?-1:1}function Lu(n,e,t){if(e.length===0)return 0;const{index:r,offset:i,size:o}=tA(e,n,Kv),l=n-r,c=o*l+(l-1)*t+i;return c>0?c+t:c}function nA(n,e){if(!rd(e))return n;let t=0;for(;e.groupIndices[t]<=n+t;)t++;return n+t}function rA(n,e,t){if(q3(n))return e.groupIndices[n.groupIndex]+1;{const r=n.index==="LAST"?t:n.index;let i=nA(r,e);return i=Math.max(0,i,Math.min(t,i)),i}}function H3(n,e,t,r=0){return r>0&&(e=Math.max(e,tA(n,r,Kv).offset)),Jb(V3(n,e,t,z3),K3)}function W3(n,[e,t,r,i]){e.length>0&&r("received item sizes",e,rr.DEBUG);const o=n.sizeTree;let l=o,c=0;if(t.length>0&&kt(o)&&e.length===2){const d=e[0].size,g=e[1].size;l=t.reduce((C,S)=>fr(fr(C,S,d),S+1,g),l)}else[l,c]=U3(l,e);if(l===o)return n;const{lastIndex:h,lastOffset:f,lastSize:y,offsetTree:m}=yy(n.offsetTree,c,l,i);return{groupIndices:t,groupOffsetTree:t.reduce((d,g)=>fr(d,g,Lu(g,m,i)),qa()),lastIndex:h,lastOffset:f,lastSize:y,offsetTree:m,sizeTree:l}}function $3(n){return Po(n).map(({k:e,v:t},r,i)=>{const o=i[r+1];return{endIndex:o?o.k-1:1/0,size:t,startIndex:e}})}function nC(n,e){let t=0,r=0;for(;t<n;)t+=e[r+1]-e[r]-1,r++;return r-(t===n?0:1)}function yy(n,e,t,r){let i=n,o=0,l=0,c=0,h=0;if(e!==0){h=df(i,e-1,Kv),c=i[h].offset;const f=Xr(t,e-1);o=f[0],l=f[1],i.length&&i[h].size===Xr(t,e)[1]&&(h-=1),i=i.slice(0,h+1)}else i=[];for(const{start:f,value:y}of nd(t,e,1/0)){const m=f-o,d=m*l+c+m*r;i.push({index:f,offset:d,size:y}),o=f,c=d,l=y}return{lastIndex:o,lastOffset:c,lastSize:l,offsetTree:i}}function K3(n){return{index:n.index,value:n}}function G3(n){const{endIndex:e,size:t,startIndex:r}=n;return i=>i.start===r&&(i.end===e||i.end===1/0)&&i.value===t}const J3={offsetHeight:"height",offsetWidth:"width"},Ii=St(([{log:n},{recalcInProgress:e}])=>{const t=wt(),r=wt(),i=Dn(r,0),o=wt(),l=wt(),c=ke(0),h=ke([]),f=ke(void 0),y=ke(void 0),m=ke((L,V)=>Ks(L,J3[V])),d=ke(void 0),g=ke(0),C=B3(),S=Dn(be(t,dt(h,n,g),di(W3,C),jt()),C),E=Dn(be(h,jt(),di((L,V)=>({current:V,prev:L.current}),{current:[],prev:[]}),Ve(({prev:L})=>L)),[]);Ke(be(h,it(L=>L.length>0),dt(S,g),Ve(([L,V,P])=>{const T=L.reduce((b,A,x)=>fr(b,A,Lu(A,V.offsetTree,P)||x),qa());return{...V,groupIndices:L,groupOffsetTree:T}})),S),Ke(be(r,dt(S),it(([L,{lastIndex:V}])=>L<V),Ve(([L,{lastIndex:V,lastSize:P}])=>[{endIndex:V,size:P,startIndex:L}])),t),Ke(f,y);const _=Dn(be(f,Ve(L=>L===void 0)),!0);Ke(be(y,it(L=>L!==void 0&&kt(yn(S).sizeTree)),Ve(L=>[{endIndex:0,size:L,startIndex:0}])),t);const w=gr(be(t,dt(S),di(({sizes:L},[V,P])=>({changed:P!==L,sizes:P}),{changed:!1,sizes:C}),Ve(L=>L.changed)));bt(be(c,di((L,V)=>({diff:L.prev-V,prev:V}),{diff:0,prev:0}),Ve(L=>L.diff)),L=>{const{groupIndices:V}=yn(S);if(L>0)ct(e,!0),ct(o,L+nC(L,V));else if(L<0){const P=yn(E);P.length>0&&(L-=nC(-L,P)),ct(l,L)}}),bt(be(c,dt(n)),([L,V])=>{L<0&&V("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:c},rr.ERROR)});const O=gr(o);Ke(be(o,dt(S),Ve(([L,V])=>{const P=V.groupIndices.length>0,T=[],b=V.lastSize;if(P){const A=Ou(V.sizeTree,0);let x=0,N=0;for(;x<L;){const z=V.groupIndices[N],G=V.groupIndices.length===N+1?1/0:V.groupIndices[N+1]-z-1;T.push({endIndex:z,size:A,startIndex:z}),T.push({endIndex:z+1+G-1,size:b,startIndex:z+1}),N++,x+=G+1}const D=Po(V.sizeTree);return x!==L&&D.shift(),D.reduce((z,{k:G,v:re})=>{let Z=z.ranges;return z.prevSize!==0&&(Z=[...z.ranges,{endIndex:G+L-1,size:z.prevSize,startIndex:z.prevIndex}]),{prevIndex:G+L,prevSize:re,ranges:Z}},{prevIndex:L,prevSize:0,ranges:T}).ranges}return Po(V.sizeTree).reduce((A,{k:x,v:N})=>({prevIndex:x+L,prevSize:N,ranges:[...A.ranges,{endIndex:x+L-1,size:A.prevSize,startIndex:A.prevIndex}]}),{prevIndex:0,prevSize:b,ranges:[]}).ranges})),t);const I=gr(be(l,dt(S,g),Ve(([L,{offsetTree:V},P])=>{const T=-L;return Lu(T,V,P)})));return Ke(be(l,dt(S,g),Ve(([L,V,P])=>{if(V.groupIndices.length>0){if(kt(V.sizeTree))return V;let T=qa();const b=yn(E);let A=0,x=0,N=0;for(;A<-L;){N=b[x];const D=b[x+1]-N-1;x++,A+=D+1}if(T=Po(V.sizeTree).reduce((D,{k:z,v:G})=>fr(D,Math.max(0,z+L),G),T),A!==-L){const D=Ou(V.sizeTree,N);T=fr(T,0,D);const z=Xr(V.sizeTree,-L+1)[1];T=fr(T,1,z)}return{...V,sizeTree:T,...yy(V.offsetTree,0,T,P)}}else{const T=Po(V.sizeTree).reduce((b,{k:A,v:x})=>fr(b,Math.max(0,A+L),x),qa());return{...V,sizeTree:T,...yy(V.offsetTree,0,T,P)}}})),S),{beforeUnshiftWith:O,data:d,defaultItemSize:y,firstItemIndex:c,fixedItemSize:f,gap:g,groupIndices:h,itemSize:m,listRefresh:w,shiftWith:l,shiftWithOffset:I,sizeRanges:t,sizes:S,statefulTotalCount:i,totalCount:r,trackItemSizes:_,unshiftWith:o}},Ft(eo,$v),{singleton:!0});function Q3(n){return n.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{groupIndices:[],totalCount:0})}const iA=St(([{groupIndices:n,sizes:e,totalCount:t},{headerHeight:r,scrollTop:i}])=>{const o=wt(),l=wt(),c=gr(be(o,Ve(Q3)));return Ke(be(c,Ve(h=>h.totalCount)),t),Ke(be(c,Ve(h=>h.groupIndices)),n),Ke(be(un(i,e,r),it(([h,f])=>rd(f)),Ve(([h,f,y])=>Xr(f.groupOffsetTree,Math.max(h-y,0),"v")[0]),jt(),Ve(h=>[h])),l),{groupCounts:o,topItemsIndexes:l}},Ft(Ii,Wn)),to=St(([{log:n}])=>{const e=ke(!1),t=gr(be(e,it(r=>r),jt()));return bt(e,r=>{r&&yn(n)("props updated",{},rr.DEBUG)}),{didMount:t,propsReady:e}},Ft(eo),{singleton:!0}),Y3=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function sA(n){const e=typeof n=="number"?{index:n}:n;return e.align||(e.align="start"),(!e.behavior||!Y3)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Xu=St(([{gap:n,listRefresh:e,sizes:t,totalCount:r},{fixedFooterHeight:i,fixedHeaderHeight:o,footerHeight:l,headerHeight:c,scrollingInProgress:h,scrollTo:f,smoothScrollTargetReached:y,viewportHeight:m},{log:d}])=>{const g=wt(),C=wt(),S=ke(0);let E=null,_=null,w=null;function O(){E&&(E(),E=null),w&&(w(),w=null),_&&(clearTimeout(_),_=null),ct(h,!1)}return Ke(be(g,dt(t,m,r,S,c,l,d),dt(n,o,i),Ve(([[I,L,V,P,T,b,A,x],N,D,z])=>{const G=sA(I),{align:re,behavior:Z,offset:ie}=G,J=P-1,$=rA(G,L,J);let F=Lu($,L.offsetTree,N)+b;re==="end"?(F+=D+Xr(L.sizeTree,$)[1]-V+z,$===J&&(F+=A)):re==="center"?F+=(D+Xr(L.sizeTree,$)[1]-V+z)/2:F-=T,ie&&(F+=ie);const U=H=>{O(),H?(x("retrying to scroll to",{location:I},rr.DEBUG),ct(g,I)):(ct(C,!0),x("list did not change, scroll successful",{},rr.DEBUG))};if(O(),Z==="smooth"){let H=!1;w=bt(e,ne=>{H=H||ne}),E=Ei(y,()=>{U(H)})}else E=Ei(be(e,X3(150)),U);return _=setTimeout(()=>{O()},1200),ct(h,!0),x("scrolling from index to",{behavior:Z,index:$,top:F},rr.DEBUG),{behavior:Z,top:F}})),f),{scrollTargetReached:C,scrollToIndex:g,topListHeight:S}},Ft(Ii,Wn,eo),{singleton:!0});function X3(n){return e=>{const t=setTimeout(()=>{e(!1)},n);return r=>{r&&(e(!0),clearTimeout(t))}}}function Gv(n,e){n==0?e():requestAnimationFrame(()=>{Gv(n-1,e)})}function Jv(n,e){const t=e-1;return typeof n=="number"?n:n.index==="LAST"?t:n.index}const Zu=St(([{defaultItemSize:n,listRefresh:e,sizes:t},{scrollTop:r},{scrollTargetReached:i,scrollToIndex:o},{didMount:l}])=>{const c=ke(!0),h=ke(0),f=ke(!0);return Ke(be(l,dt(h),it(([y,m])=>!!m),hi(!1)),c),Ke(be(l,dt(h),it(([y,m])=>!!m),hi(!1)),f),bt(be(un(e,l),dt(c,t,n,f),it(([[,y],m,{sizeTree:d},g,C])=>y&&(!kt(d)||zv(g))&&!m&&!C),dt(h)),([,y])=>{Ei(i,()=>{ct(f,!0)}),Gv(4,()=>{Ei(r,()=>{ct(c,!0)}),ct(o,y)})}),{initialItemFinalLocationReached:f,initialTopMostItemIndex:h,scrolledToInitialItem:c}},Ft(Ii,Wn,Xu,to),{singleton:!0});function oA(n,e){return Math.abs(n-e)<1.01}const Du="up",yu="down",Z3="none",eV={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},tV=0,ec=St(([{footerHeight:n,headerHeight:e,scrollBy:t,scrollContainerState:r,scrollTop:i,viewportHeight:o}])=>{const l=ke(!1),c=ke(!0),h=wt(),f=wt(),y=ke(4),m=ke(tV),d=Dn(be(ZT(be(ot(i),Ya(1),hi(!0)),be(ot(i),Ya(1),hi(!1),XT(100))),jt()),!1),g=Dn(be(ZT(be(t,hi(!0)),be(t,hi(!1),XT(200))),jt()),!1);Ke(be(un(ot(i),ot(m)),Ve(([w,O])=>w<=O),jt()),c),Ke(be(c,Ls(50)),f);const C=gr(be(un(r,ot(o),ot(e),ot(n),ot(y)),di((w,[{scrollHeight:O,scrollTop:I},L,V,P,T])=>{const b=I+L-O>-T,A={scrollHeight:O,scrollTop:I,viewportHeight:L};if(b){let N,D;return I>w.state.scrollTop?(N="SCROLLED_DOWN",D=w.state.scrollTop-I):(N="SIZE_DECREASED",D=w.state.scrollTop-I||w.scrollTopDelta),{atBottom:!0,atBottomBecause:N,scrollTopDelta:D,state:A}}let x;return A.scrollHeight>w.state.scrollHeight?x="SIZE_INCREASED":L<w.state.viewportHeight?x="VIEWPORT_HEIGHT_DECREASING":I<w.state.scrollTop?x="SCROLLING_UPWARDS":x="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:x,state:A}},eV),jt((w,O)=>w&&w.atBottom===O.atBottom))),S=Dn(be(r,di((w,{scrollHeight:O,scrollTop:I,viewportHeight:L})=>{if(oA(w.scrollHeight,O))return{changed:!1,jump:0,scrollHeight:O,scrollTop:I};{const V=O-(I+L)<1;return w.scrollTop!==I&&V?{changed:!0,jump:w.scrollTop-I,scrollHeight:O,scrollTop:I}:{changed:!0,jump:0,scrollHeight:O,scrollTop:I}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),it(w=>w.changed),Ve(w=>w.jump)),0);Ke(be(C,Ve(w=>w.atBottom)),l),Ke(be(l,Ls(50)),h);const E=ke(yu);Ke(be(r,Ve(({scrollTop:w})=>w),jt(),di((w,O)=>yn(g)?{direction:w.direction,prevScrollTop:O}:{direction:O<w.prevScrollTop?Du:yu,prevScrollTop:O},{direction:yu,prevScrollTop:0}),Ve(w=>w.direction)),E),Ke(be(r,Ls(50),hi(Z3)),E);const _=ke(0);return Ke(be(d,it(w=>!w),hi(0)),_),Ke(be(i,Ls(100),dt(d),it(([w,O])=>!!O),di(([w,O],[I])=>[O,I],[0,0]),Ve(([w,O])=>O-w)),_),{atBottomState:C,atBottomStateChange:h,atBottomThreshold:y,atTopStateChange:f,atTopThreshold:m,isAtBottom:l,isAtTop:c,isScrolling:d,lastJumpDueToItemResize:S,scrollDirection:E,scrollVelocity:_}},Ft(Wn)),pf="top",mf="bottom",rC="none";function iC(n,e,t){return typeof n=="number"?t===Du&&e===pf||t===yu&&e===mf?n:0:t===Du?e===pf?n.main:n.reverse:e===mf?n.main:n.reverse}function sC(n,e){var t;return typeof n=="number"?n:(t=n[e])!=null?t:0}const Qv=St(([{deviation:n,fixedHeaderHeight:e,headerHeight:t,scrollTop:r,viewportHeight:i}])=>{const o=wt(),l=ke(0),c=ke(0),h=ke(0),f=Dn(be(un(ot(r),ot(i),ot(t),ot(o,Nu),ot(h),ot(l),ot(e),ot(n),ot(c)),Ve(([y,m,d,[g,C],S,E,_,w,O])=>{const I=y-w,L=E+_,V=Math.max(d-I,0);let P=rC;const T=sC(O,pf),b=sC(O,mf);return g-=w,g+=d+_,C+=d+_,C-=w,g>y+L-T&&(P=Du),C<y-V+m+b&&(P=yu),P!==rC?[Math.max(I-d-iC(S,pf,P)-T,0),I-V-_+m+iC(S,mf,P)+b]:null}),it(y=>y!=null),jt(Nu)),[0,0]);return{increaseViewportBy:c,listBoundary:o,overscan:h,topListHeight:l,visibleRange:f}},Ft(Wn),{singleton:!0});function nV(n,e,t){if(rd(e)){const r=nA(n,e);return[{index:Xr(e.groupOffsetTree,r)[0],offset:0,size:0},{data:t==null?void 0:t[0],index:r,offset:0,size:0}]}return[{data:t==null?void 0:t[0],index:n,offset:0,size:0}]}const Dg={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function zh(n,e,t,r,i,o){const{lastIndex:l,lastOffset:c,lastSize:h}=i;let f=0,y=0;if(n.length>0){f=n[0].offset;const S=n[n.length-1];y=S.offset+S.size}const m=t-l,d=c+m*h+(m-1)*r,g=f,C=d-y;return{bottom:y,firstItemIndex:o,items:oC(n,i,o),offsetBottom:C,offsetTop:f,top:g,topItems:oC(e,i,o),topListHeight:e.reduce((S,E)=>E.size+S,0),totalCount:t}}function aA(n,e,t,r,i,o){let l=0;if(t.groupIndices.length>0)for(const y of t.groupIndices){if(y-l>=n)break;l++}const c=n+l,h=Jv(e,c),f=Array.from({length:c}).map((y,m)=>({data:o[m+h],index:m+h,offset:0,size:0}));return zh(f,[],c,i,t,r)}function oC(n,e,t){if(n.length===0)return[];if(!rd(e))return n.map(f=>({...f,index:f.index+t,originalIndex:f.index}));const r=n[0].index,i=n[n.length-1].index,o=[],l=nd(e.groupOffsetTree,r,i);let c,h=0;for(const f of n){(!c||c.end<f.index)&&(c=l.shift(),h=e.groupIndices.indexOf(c.start));let y;f.index===c.start?y={index:h,type:"group"}:y={groupIndex:h,index:f.index-(h+1)+t},o.push({...y,data:f.data,offset:f.offset,originalIndex:f.index,size:f.size})}return o}const $o=St(([{data:n,firstItemIndex:e,gap:t,sizes:r,totalCount:i},o,{listBoundary:l,topListHeight:c,visibleRange:h},{initialTopMostItemIndex:f,scrolledToInitialItem:y},{topListHeight:m},d,{didMount:g},{recalcInProgress:C}])=>{const S=ke([]),E=ke(0),_=wt();Ke(o.topItemsIndexes,S);const w=Dn(be(un(g,C,ot(h,Nu),ot(i),ot(r),ot(f),y,ot(S),ot(e),ot(t),n),it(([V,P,,T,,,,,,,b])=>{const A=b&&b.length!==T;return V&&!P&&!A}),Ve(([,,[V,P],T,b,A,x,N,D,z,G])=>{const re=b,{offsetTree:Z,sizeTree:ie}=re,J=yn(E);if(T===0)return{...Dg,totalCount:T};if(V===0&&P===0)return J===0?{...Dg,totalCount:T}:aA(J,A,b,D,z,G||[]);if(kt(ie))return J>0?null:zh(nV(Jv(A,T),re,G),[],T,z,re,D);const $=[];if(N.length>0){const te=N[0],W=N[N.length-1];let X=0;for(const Q of nd(ie,te,W)){const ee=Q.value,ae=Math.max(Q.start,te),ge=Math.min(Q.end,W);for(let Se=ae;Se<=ge;Se++)$.push({data:G==null?void 0:G[Se],index:Se,offset:X,size:ee}),X+=ee}}if(!x)return zh([],$,T,z,re,D);const F=N.length>0?N[N.length-1]+1:0,U=H3(Z,V,P,F);if(U.length===0)return null;const H=T-1,ne=td([],te=>{for(const W of U){const X=W.value;let Q=X.offset,ee=W.start;const ae=X.size;if(X.offset<V){ee+=Math.floor((V-X.offset+z)/(ae+z));const Se=ee-W.start;Q+=Se*ae+Se*z}ee<F&&(Q+=(F-ee)*ae,ee=F);const ge=Math.min(W.end,H);for(let Se=ee;Se<=ge&&!(Q>=P);Se++)te.push({data:G==null?void 0:G[Se],index:Se,offset:Q,size:ae}),Q+=ae+z}});return zh(ne,$,T,z,re,D)}),it(V=>V!==null),jt()),Dg);Ke(be(n,it(zv),Ve(V=>V==null?void 0:V.length)),i),Ke(be(w,Ve(V=>V.topListHeight)),m),Ke(m,c),Ke(be(w,Ve(V=>[V.top,V.bottom])),l),Ke(be(w,Ve(V=>V.items)),_);const O=gr(be(w,it(({items:V})=>V.length>0),dt(i,n),it(([{items:V},P])=>V[V.length-1].originalIndex===P-1),Ve(([,V,P])=>[V-1,P]),jt(Nu),Ve(([V])=>V))),I=gr(be(w,Ls(200),it(({items:V,topItems:P})=>V.length>0&&V[0].originalIndex===P.length),Ve(({items:V})=>V[0].index),jt())),L=gr(be(w,it(({items:V})=>V.length>0),Ve(({items:V})=>{let P=0,T=V.length-1;for(;V[P].type==="group"&&P<T;)P++;for(;V[T].type==="group"&&T>P;)T--;return{endIndex:V[T].index,startIndex:V[P].index}}),jt(eA)));return{endReached:O,initialItemCount:E,itemsRendered:_,listState:w,rangeChanged:L,startReached:I,topItemsIndexes:S,...d}},Ft(Ii,iA,Qv,Zu,Xu,ec,to,$v),{singleton:!0}),lA=St(([{fixedFooterHeight:n,fixedHeaderHeight:e,footerHeight:t,headerHeight:r},{listState:i}])=>{const o=wt(),l=Dn(be(un(t,n,r,e,i),Ve(([c,h,f,y,m])=>c+h+f+y+m.offsetBottom+m.bottom)),0);return Ke(ot(l),o),{totalListHeight:l,totalListHeightChanged:o}},Ft(Wn,$o),{singleton:!0}),rV=St(([{viewportHeight:n},{totalListHeight:e}])=>{const t=ke(!1),r=Dn(be(un(t,n,e),it(([i])=>i),Ve(([,i,o])=>Math.max(0,i-o)),Ls(0),jt()),0);return{alignToBottom:t,paddingTopAddition:r}},Ft(Wn,lA),{singleton:!0});function aC(n){return n?n==="smooth"?"smooth":"auto":!1}const iV=(n,e)=>typeof n=="function"?aC(n(e)):e&&aC(n),sV=St(([{listRefresh:n,totalCount:e,fixedItemSize:t},{atBottomState:r,isAtBottom:i},{scrollToIndex:o},{scrolledToInitialItem:l},{didMount:c,propsReady:h},{log:f},{scrollingInProgress:y}])=>{const m=ke(!1),d=wt();let g=null;function C(E){ct(o,{align:"end",behavior:E,index:"LAST"})}bt(be(un(be(ot(e),Ya(1)),c),dt(ot(m),i,l,y),Ve(([[E,_],w,O,I,L])=>{let V=_&&I,P="auto";return V&&(P=iV(w,O||L),V=V&&!!P),{followOutputBehavior:P,shouldFollow:V,totalCount:E}}),it(({shouldFollow:E})=>E)),({followOutputBehavior:E,totalCount:_})=>{g&&(g(),g=null),yn(t)?requestAnimationFrame(()=>{yn(f)("following output to ",{totalCount:_},rr.DEBUG),C(E)}):g=Ei(n,()=>{yn(f)("following output to ",{totalCount:_},rr.DEBUG),C(E),g=null})});function S(E){const _=Ei(r,w=>{E&&!w.atBottom&&w.notAtBottomBecause==="SIZE_INCREASED"&&!g&&(yn(f)("scrolling to bottom due to increased size",{},rr.DEBUG),C("auto"))});setTimeout(_,100)}return bt(be(un(ot(m),e,h),it(([E,,_])=>E&&_),di(({value:E},[,_])=>({refreshed:E===_,value:_}),{refreshed:!1,value:0}),it(({refreshed:E})=>E),dt(m,e)),([,E])=>{yn(l)&&S(E!==!1)}),bt(d,()=>{S(yn(m)!==!1)}),bt(un(ot(m),r),([E,_])=>{E&&!_.atBottom&&_.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&C("auto")}),{autoscrollToBottom:d,followOutput:m}},Ft(Ii,ec,Xu,Zu,to,eo,Wn)),oV=St(([{data:n,firstItemIndex:e,gap:t,sizes:r},{initialTopMostItemIndex:i},{initialItemCount:o,listState:l},{didMount:c}])=>(Ke(be(c,dt(o),it(([,h])=>h!==0),dt(i,r,e,t,n),Ve(([[,h],f,y,m,d,g=[]])=>aA(h,f,y,m,d,g))),l),{}),Ft(Ii,Zu,$o,to),{singleton:!0}),aV=St(([{didMount:n},{scrollTo:e},{listState:t}])=>{const r=ke(0);return bt(be(n,dt(r),it(([,i])=>i!==0),Ve(([,i])=>({top:i}))),i=>{Ei(be(t,Ya(1),it(o=>o.items.length>1)),()=>{requestAnimationFrame(()=>{ct(e,i)})})}),{initialScrollTop:r}},Ft(to,Wn,$o),{singleton:!0}),lV=({itemBottom:n,itemTop:e,locationParams:{align:t,behavior:r,...i},viewportBottom:o,viewportTop:l})=>e<l?{...i,align:t??"start",behavior:r}:n>o?{...i,align:t??"end",behavior:r}:null,uV=St(([{gap:n,sizes:e,totalCount:t},{fixedFooterHeight:r,fixedHeaderHeight:i,headerHeight:o,scrollingInProgress:l,scrollTop:c,viewportHeight:h},{scrollToIndex:f}])=>{const y=wt();return Ke(be(y,dt(e,h,t,o,i,r,c),dt(n),Ve(([[m,d,g,C,S,E,_,w],O])=>{const{align:I,behavior:L,calculateViewLocation:V=lV,done:P,...T}=m,b=rA(m,d,C-1),A=Lu(b,d.offsetTree,O)+S+E,x=A+Xr(d.sizeTree,b)[1],N=w+E,D=w+g-_,z=V({itemBottom:x,itemTop:A,locationParams:{align:I,behavior:L,...T},viewportBottom:D,viewportTop:N});return z?P&&Ei(be(l,it(G=>!G),Ya(yn(l)?1:2)),P):P&&P(),z}),it(m=>m!==null)),f),{scrollIntoView:y}},Ft(Ii,Wn,Xu,$o,eo),{singleton:!0}),uA=St(([{scrollVelocity:n}])=>{const e=ke(!1),t=wt(),r=ke(!1);return Ke(be(n,dt(r,e,t),it(([i,o])=>!!o),Ve(([i,o,l,c])=>{const{enter:h,exit:f}=o;if(l){if(f(i,c))return!1}else if(h(i,c))return!0;return l}),jt()),e),bt(be(un(e,n,t),dt(r)),([[i,o,l],c])=>{i&&c&&c.change&&c.change(o,l)}),{isSeeking:e,scrollSeekConfiguration:r,scrollSeekRangeChanged:t,scrollVelocity:n}},Ft(ec),{singleton:!0}),Yv=St(([{scrollContainerState:n,scrollTo:e}])=>{const t=wt(),r=wt(),i=wt(),o=ke(!1),l=ke(void 0);return Ke(be(un(t,r),Ve(([{scrollHeight:c,scrollTop:h,viewportHeight:f},{offsetTop:y}])=>({scrollHeight:c,scrollTop:Math.max(0,h-y),viewportHeight:f}))),n),Ke(be(e,dt(r),Ve(([c,{offsetTop:h}])=>({...c,top:c.top+h}))),i),{customScrollParent:l,useWindowScroll:o,windowScrollContainerState:t,windowScrollTo:i,windowViewportRect:r}},Ft(Wn)),cV=St(([{sizeRanges:n,sizes:e},{headerHeight:t,scrollTop:r},{initialTopMostItemIndex:i},{didMount:o},{useWindowScroll:l,windowScrollContainerState:c,windowViewportRect:h}])=>{const f=wt(),y=ke(void 0),m=ke(null),d=ke(null);return Ke(c,m),Ke(h,d),bt(be(f,dt(e,r,l,m,d,t)),([g,C,S,E,_,w,O])=>{const I=$3(C.sizeTree);E&&_!==null&&w!==null&&(S=_.scrollTop-w.offsetTop),S-=O,g({ranges:I,scrollTop:S})}),Ke(be(y,it(zv),Ve(hV)),i),Ke(be(o,dt(y),it(([,g])=>g!==void 0),jt(),Ve(([,g])=>g.ranges)),n),{getState:f,restoreStateFrom:y}},Ft(Ii,Wn,Zu,to,Yv));function hV(n){return{align:"start",index:0,offset:n.scrollTop}}const fV=St(([{topItemsIndexes:n}])=>{const e=ke(0);return Ke(be(e,it(t=>t>=0),Ve(t=>Array.from({length:t}).map((r,i)=>i))),n),{topItemCount:e}},Ft($o));function cA(n){let e=!1,t;return()=>(e||(e=!0,t=n()),t)}const dV=cA(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),pV=St(([{deviation:n,scrollBy:e,scrollingInProgress:t,scrollTop:r},{isAtBottom:i,isScrolling:o,lastJumpDueToItemResize:l,scrollDirection:c},{listState:h},{beforeUnshiftWith:f,gap:y,shiftWithOffset:m,sizes:d},{log:g},{recalcInProgress:C}])=>{const S=gr(be(h,dt(l),di(([,_,w,O],[{bottom:I,items:L,offsetBottom:V,totalCount:P},T])=>{const b=I+V;let A=0;return w===P&&_.length>0&&L.length>0&&(L[0].originalIndex===0&&_[0].originalIndex===0||(A=b-O,A!==0&&(A+=T))),[A,L,P,b]},[0,[],0,0]),it(([_])=>_!==0),dt(r,c,t,i,g,C),it(([,_,w,O,,,I])=>!I&&!O&&_!==0&&w===Du),Ve(([[_],,,,,w])=>(w("Upward scrolling compensation",{amount:_},rr.DEBUG),_))));function E(_){_>0?(ct(e,{behavior:"auto",top:-_}),ct(n,0)):(ct(n,0),ct(e,{behavior:"auto",top:-_}))}return bt(be(S,dt(n,o)),([_,w,O])=>{O&&dV()?ct(n,w-_):E(-_)}),bt(be(un(Dn(o,!1),n,C),it(([_,w,O])=>!_&&!O&&w!==0),Ve(([_,w])=>w),Ls(1)),E),Ke(be(m,Ve(_=>({top:-_}))),e),bt(be(f,dt(d,y),Ve(([_,{groupIndices:w,lastSize:O,sizeTree:I},L])=>{function V(P){return P*(O+L)}if(w.length===0)return V(_);{let P=0;const T=Ou(I,0);let b=0,A=0;for(;b<_;){b++,P+=T;let x=w.length===A+1?1/0:w[A+1]-w[A]-1;b+x>_&&(P-=T,x=_-b+1),b+=x,P+=V(x),A++}return P}})),_=>{ct(n,_),requestAnimationFrame(()=>{ct(e,{top:_}),requestAnimationFrame(()=>{ct(n,0),ct(C,!1)})})}),{deviation:n}},Ft(Wn,ec,$o,Ii,eo,$v)),mV=St(([n,e,t,r,i,o,l,c,h,f])=>({...n,...e,...t,...r,...i,...o,...l,...c,...h,...f}),Ft(Qv,oV,to,uA,lA,aV,rV,Yv,uV,eo)),hA=St(([{data:n,defaultItemSize:e,firstItemIndex:t,fixedItemSize:r,gap:i,groupIndices:o,itemSize:l,sizeRanges:c,sizes:h,statefulTotalCount:f,totalCount:y,trackItemSizes:m},{initialItemFinalLocationReached:d,initialTopMostItemIndex:g,scrolledToInitialItem:C},S,E,_,{listState:w,topItemsIndexes:O,...I},{scrollToIndex:L},V,{topItemCount:P},{groupCounts:T},b])=>(Ke(I.rangeChanged,b.scrollSeekRangeChanged),Ke(be(b.windowViewportRect,Ve(A=>A.visibleHeight)),S.viewportHeight),{data:n,defaultItemHeight:e,firstItemIndex:t,fixedItemHeight:r,gap:i,groupCounts:T,initialItemFinalLocationReached:d,initialTopMostItemIndex:g,scrolledToInitialItem:C,sizeRanges:c,topItemCount:P,topItemsIndexes:O,totalCount:y,..._,groupIndices:o,itemSize:l,listState:w,scrollToIndex:L,statefulTotalCount:f,trackItemSizes:m,...I,...b,...S,sizes:h,...E}),Ft(Ii,Zu,Wn,cV,sV,$o,Xu,pV,fV,iA,mV));function gV(n,e){const t={},r={};let i=0;const o=n.length;for(;i<o;)r[n[i]]=1,i+=1;for(const l in e)Object.hasOwn(r,l)||(t[l]=e[l]);return t}const bh=typeof document<"u"?qe.useLayoutEffect:qe.useEffect;function fA(n,e,t){const r=Object.keys(e.required||{}),i=Object.keys(e.optional||{}),o=Object.keys(e.methods||{}),l=Object.keys(e.events||{}),c=qe.createContext({});function h(E,_){E.propsReady&&ct(E.propsReady,!1);for(const w of r){const O=E[e.required[w]];ct(O,_[w])}for(const w of i)if(w in _){const O=E[e.optional[w]];ct(O,_[w])}E.propsReady&&ct(E.propsReady,!0)}function f(E){return o.reduce((_,w)=>(_[w]=O=>{const I=E[e.methods[w]];ct(I,O)},_),{})}function y(E){return l.reduce((_,w)=>(_[w]=P3(E[e.events[w]]),_),{})}const m=qe.forwardRef((E,_)=>{const{children:w,...O}=E,[I]=qe.useState(()=>td(N3(n),P=>{h(P,O)})),[L]=qe.useState(YT(y,I));bh(()=>{for(const P of l)P in O&&bt(L[P],O[P]);return()=>{Object.values(L).map(Hv)}},[O,L,I]),bh(()=>{h(I,O)}),qe.useImperativeHandle(_,QT(f(I)));const V=t;return k.jsx(c.Provider,{value:I,children:t?k.jsx(V,{...gV([...r,...i,...l],O),children:w}):w})}),d=E=>{const _=qe.useContext(c);return qe.useCallback(w=>{ct(_[E],w)},[_,E])},g=E=>{const _=qe.useContext(c)[E],w=qe.useCallback(O=>bt(_,O),[_]);return qe.useSyncExternalStore(w,()=>yn(_),()=>yn(_))},C=E=>{const _=qe.useContext(c)[E],[w,O]=qe.useState(YT(yn,_));return bh(()=>bt(_,I=>{I!==w&&O(QT(I))}),[_,w]),w},S=qe.version.startsWith("18")?g:C;return{Component:m,useEmitter:(E,_)=>{const w=qe.useContext(c)[E];bh(()=>bt(w,_),[_,w])},useEmitterValue:S,usePublisher:d}}const dA=qe.createContext(void 0),pA=qe.createContext(void 0),mA=typeof document<"u"?qe.useLayoutEffect:qe.useEffect;function Mg(n){return"self"in n}function yV(n){return"body"in n}function gA(n,e,t,r=cl,i,o){const l=qe.useRef(null),c=qe.useRef(null),h=qe.useRef(null),f=qe.useCallback(d=>{let g,C,S;const E=d.target;if(yV(E)||Mg(E)){const w=Mg(E)?E:E.defaultView;S=o?w.scrollX:w.scrollY,g=o?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight,C=o?w.innerWidth:w.innerHeight}else S=o?E.scrollLeft:E.scrollTop,g=o?E.scrollWidth:E.scrollHeight,C=o?E.offsetWidth:E.offsetHeight;const _=()=>{n({scrollHeight:g,scrollTop:Math.max(S,0),viewportHeight:C})};d.suppressFlushSync?_():gF.flushSync(_),c.current!==null&&(S===c.current||S<=0||S===g-C)&&(c.current=null,e(!0),h.current&&(clearTimeout(h.current),h.current=null))},[n,e,o]);qe.useEffect(()=>{const d=i||l.current;return r(i||l.current),f({suppressFlushSync:!0,target:d}),d.addEventListener("scroll",f,{passive:!0}),()=>{r(null),d.removeEventListener("scroll",f)}},[l,f,t,r,i]);function y(d){const g=l.current;if(!g||(o?"offsetWidth"in g&&g.offsetWidth===0:"offsetHeight"in g&&g.offsetHeight===0))return;const C=d.behavior==="smooth";let S,E,_;Mg(g)?(E=Math.max(Ks(g.document.documentElement,o?"width":"height"),o?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight),S=o?g.innerWidth:g.innerHeight,_=o?window.scrollX:window.scrollY):(E=g[o?"scrollWidth":"scrollHeight"],S=Ks(g,o?"width":"height"),_=g[o?"scrollLeft":"scrollTop"]);const w=E-S;if(d.top=Math.ceil(Math.max(Math.min(w,d.top),0)),oA(S,E)||d.top===_){n({scrollHeight:E,scrollTop:_,viewportHeight:S}),C&&e(!0);return}C?(c.current=d.top,h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{h.current=null,c.current=null,e(!0)},1e3)):c.current=null,o&&(d={behavior:d.behavior,left:d.top}),g.scrollTo(d)}function m(d){o&&(d={behavior:d.behavior,left:d.top}),l.current.scrollBy(d)}return{scrollByCallback:m,scrollerRef:l,scrollToCallback:y}}const jg="-webkit-sticky",lC="sticky",Xv=cA(()=>{if(typeof document>"u")return lC;const n=document.createElement("div");return n.style.position=jg,n.style.position===jg?jg:lC});function Zv(n){return n}const vV=St(()=>{const n=ke(h=>`Item ${h}`),e=ke(null),t=ke(h=>`Group ${h}`),r=ke({}),i=ke(Zv),o=ke("div"),l=ke(cl),c=(h,f=null)=>Dn(be(r,Ve(y=>y[h]),jt()),f);return{components:r,computeItemKey:i,context:e,EmptyPlaceholder:c("EmptyPlaceholder"),FooterComponent:c("Footer"),GroupComponent:c("Group","div"),groupContent:t,HeaderComponent:c("Header"),HeaderFooterTag:o,ItemComponent:c("Item","div"),itemContent:n,ListComponent:c("List","div"),ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TopItemListComponent:c("TopItemList")}}),_V=St(([n,e])=>({...n,...e}),Ft(hA,vV)),wV=({height:n})=>k.jsx("div",{style:{height:n}}),EV={overflowAnchor:"none",position:Xv(),zIndex:1},yA={overflowAnchor:"none"},TV={...yA,display:"inline-block",height:"100%"},uC=qe.memo(function({showTopList:n=!1}){const e=ut("listState"),t=Ar("sizeRanges"),r=ut("useWindowScroll"),i=ut("customScrollParent"),o=Ar("windowScrollContainerState"),l=Ar("scrollContainerState"),c=i||r?o:l,h=ut("itemContent"),f=ut("context"),y=ut("groupContent"),m=ut("trackItemSizes"),d=ut("itemSize"),g=ut("log"),C=Ar("gap"),S=ut("horizontalDirection"),{callbackRef:E}=M3(t,d,m,n?cl:c,g,C,i,S,ut("skipAnimationFrameInResizeObserver")),[_,w]=qe.useState(0);e_("deviation",z=>{_!==z&&w(z)});const O=ut("EmptyPlaceholder"),I=ut("ScrollSeekPlaceholder")||wV,L=ut("ListComponent"),V=ut("ItemComponent"),P=ut("GroupComponent"),T=ut("computeItemKey"),b=ut("isSeeking"),A=ut("groupIndices").length>0,x=ut("alignToBottom"),N=ut("initialItemFinalLocationReached"),D=n?{}:{boxSizing:"border-box",...S?{display:"inline-block",height:"100%",marginLeft:_!==0?_:x?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:_!==0?_:x?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...N?{}:{visibility:"hidden"}};return!n&&e.totalCount===0&&O?k.jsx(O,{...In(O,f)}):k.jsx(L,{...In(L,f),"data-testid":n?"virtuoso-top-item-list":"virtuoso-item-list",ref:E,style:D,children:(n?e.topItems:e.items).map(z=>{const G=z.originalIndex,re=T(G+e.firstItemIndex,z.data,f);return b?ye.createElement(I,{...In(I,f),height:z.size,index:z.index,key:re,type:z.type||"item",...z.type==="group"?{}:{groupIndex:z.groupIndex}}):z.type==="group"?ye.createElement(P,{...In(P,f),"data-index":G,"data-item-index":z.index,"data-known-size":z.size,key:re,style:EV},y(z.index,f)):ye.createElement(V,{...In(V,f),...bV(V,z.data),"data-index":G,"data-item-group-index":z.groupIndex,"data-item-index":z.index,"data-known-size":z.size,key:re,style:S?TV:yA},A?h(z.index,z.groupIndex,z.data,f):h(z.index,z.data,f))})})}),CV={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},SV={outline:"none",overflowX:"auto",position:"relative"},id=n=>({height:"100%",position:"absolute",top:0,width:"100%",...n?{display:"flex",flexDirection:"column"}:{}}),IV={position:Xv(),top:0,width:"100%",zIndex:1};function In(n,e){if(typeof n!="string")return{context:e}}function bV(n,e){return{item:typeof n=="string"?void 0:e}}const AV=qe.memo(function(){const n=ut("HeaderComponent"),e=Ar("headerHeight"),t=ut("HeaderFooterTag"),r=Wo(qe.useMemo(()=>o=>{e(Ks(o,"height"))},[e]),!0,ut("skipAnimationFrameInResizeObserver")),i=ut("context");return n?k.jsx(t,{ref:r,children:k.jsx(n,{...In(n,i)})}):null}),xV=qe.memo(function(){const n=ut("FooterComponent"),e=Ar("footerHeight"),t=ut("HeaderFooterTag"),r=Wo(qe.useMemo(()=>o=>{e(Ks(o,"height"))},[e]),!0,ut("skipAnimationFrameInResizeObserver")),i=ut("context");return n?k.jsx(t,{ref:r,children:k.jsx(n,{...In(n,i)})}):null});function vA({useEmitter:n,useEmitterValue:e,usePublisher:t}){return qe.memo(function({children:r,style:i,...o}){const l=t("scrollContainerState"),c=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),f=e("scrollerRef"),y=e("context"),m=e("horizontalDirection")||!1,{scrollByCallback:d,scrollerRef:g,scrollToCallback:C}=gA(l,h,c,f,void 0,m);return n("scrollTo",C),n("scrollBy",d),k.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:g,style:{...m?SV:CV,...i},tabIndex:0,...o,...In(c,y),children:r})})}function _A({useEmitter:n,useEmitterValue:e,usePublisher:t}){return qe.memo(function({children:r,style:i,...o}){const l=t("windowScrollContainerState"),c=e("ScrollerComponent"),h=t("smoothScrollTargetReached"),f=e("totalListHeight"),y=e("deviation"),m=e("customScrollParent"),d=e("context"),g=qe.useRef(null),C=e("scrollerRef"),{scrollByCallback:S,scrollerRef:E,scrollToCallback:_}=gA(l,h,c,C,m);return mA(()=>{var w;return E.current=m||((w=g.current)==null?void 0:w.ownerDocument.defaultView),()=>{E.current=null}},[E,m]),n("windowScrollTo",_),n("scrollBy",S),k.jsx(c,{ref:g,"data-virtuoso-scroller":!0,style:{position:"relative",...i,...f!==0?{height:f+y}:{}},...o,...In(c,d),children:r})})}const kV=({children:n})=>{const e=qe.useContext(dA),t=Ar("viewportHeight"),r=Ar("fixedItemHeight"),i=ut("alignToBottom"),o=ut("horizontalDirection"),l=qe.useMemo(()=>$b(t,h=>Ks(h,o?"width":"height")),[t,o]),c=Wo(l,!0,ut("skipAnimationFrameInResizeObserver"));return qe.useEffect(()=>{e&&(t(e.viewportHeight),r(e.itemHeight))},[e,t,r]),k.jsx("div",{"data-viewport-type":"element",ref:c,style:id(i),children:n})},RV=({children:n})=>{const e=qe.useContext(dA),t=Ar("windowViewportRect"),r=Ar("fixedItemHeight"),i=ut("customScrollParent"),o=Gb(t,i,ut("skipAnimationFrameInResizeObserver")),l=ut("alignToBottom");return qe.useEffect(()=>{e&&(r(e.itemHeight),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,t,r]),k.jsx("div",{"data-viewport-type":"window",ref:o,style:id(l),children:n})},PV=({children:n})=>{const e=ut("TopItemListComponent")||"div",t=ut("headerHeight"),r={...IV,marginTop:`${t}px`},i=ut("context");return k.jsx(e,{style:r,...In(e,i),children:n})},OV=qe.memo(function(n){const e=ut("useWindowScroll"),t=ut("topItemsIndexes").length>0,r=ut("customScrollParent"),i=ut("context"),o=r||e?DV:LV,l=r||e?RV:kV;return k.jsxs(o,{...n,...In(o,i),children:[t&&k.jsx(PV,{children:k.jsx(uC,{showTopList:!0})}),k.jsxs(l,{children:[k.jsx(AV,{}),k.jsx(uC,{}),k.jsx(xV,{})]})]})}),{Component:NV,useEmitter:e_,useEmitterValue:ut,usePublisher:Ar}=fA(_V,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},OV),LV=vA({useEmitter:e_,useEmitterValue:ut,usePublisher:Ar}),DV=_A({useEmitter:e_,useEmitterValue:ut,usePublisher:Ar}),MV=NV,jV=St(()=>{const n=ke(f=>k.jsxs("td",{children:["Item $",f]})),e=ke(null),t=ke(f=>k.jsxs("td",{colSpan:1e3,children:["Group ",f]})),r=ke(null),i=ke(null),o=ke({}),l=ke(Zv),c=ke(cl),h=(f,y=null)=>Dn(be(o,Ve(m=>m[f]),jt()),y);return{components:o,computeItemKey:l,context:e,EmptyPlaceholder:h("EmptyPlaceholder"),FillerRow:h("FillerRow"),fixedFooterContent:i,fixedHeaderContent:r,itemContent:n,groupContent:t,ScrollerComponent:h("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder"),TableBodyComponent:h("TableBody","tbody"),TableComponent:h("Table","table"),TableFooterComponent:h("TableFoot","tfoot"),TableHeadComponent:h("TableHead","thead"),TableRowComponent:h("TableRow","tr"),GroupComponent:h("Group","tr")}});Ft(hA,jV);Xv();const cC={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},FV={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:hC,floor:gf,max:vu,min:Fg,round:fC}=Math;function dC(n,e,t){return Array.from({length:e-n+1}).map((r,i)=>({data:t===null?null:t[i+n],index:i+n}))}function VV(n){return{...FV,items:n}}function Ah(n,e){return n&&n.width===e.width&&n.height===e.height}function BV(n,e){return n&&n.column===e.column&&n.row===e.row}const UV=St(([{increaseViewportBy:n,listBoundary:e,overscan:t,visibleRange:r},{footerHeight:i,headerHeight:o,scrollBy:l,scrollContainerState:c,scrollTo:h,scrollTop:f,smoothScrollTargetReached:y,viewportHeight:m},d,g,{didMount:C,propsReady:S},{customScrollParent:E,useWindowScroll:_,windowScrollContainerState:w,windowScrollTo:O,windowViewportRect:I},L])=>{const V=ke(0),P=ke(0),T=ke(cC),b=ke({height:0,width:0}),A=ke({height:0,width:0}),x=wt(),N=wt(),D=ke(0),z=ke(null),G=ke({column:0,row:0}),re=wt(),Z=wt(),ie=ke(!1),J=ke(0),$=ke(!0),F=ke(!1),U=ke(!1);bt(be(C,dt(J),it(([Q,ee])=>!!ee)),()=>{ct($,!1)}),bt(be(un(C,$,A,b,J,F),it(([Q,ee,ae,ge,,Se])=>Q&&!ee&&ae.height!==0&&ge.height!==0&&!Se)),([,,,,Q])=>{ct(F,!0),Gv(1,()=>{ct(x,Q)}),Ei(be(f),()=>{ct(e,[0,0]),ct($,!0)})}),Ke(be(Z,it(Q=>Q!=null&&Q.scrollTop>0),hi(0)),P),bt(be(C,dt(Z),it(([,Q])=>Q!=null)),([,Q])=>{Q&&(ct(b,Q.viewport),ct(A,Q.item),ct(G,Q.gap),Q.scrollTop>0&&(ct(ie,!0),Ei(be(f,Ya(1)),ee=>{ct(ie,!1)}),ct(h,{top:Q.scrollTop})))}),Ke(be(b,Ve(({height:Q})=>Q)),m),Ke(be(un(ot(b,Ah),ot(A,Ah),ot(G,(Q,ee)=>Q&&Q.column===ee.column&&Q.row===ee.row),ot(f)),Ve(([Q,ee,ae,ge])=>({gap:ae,item:ee,scrollTop:ge,viewport:Q}))),re),Ke(be(un(ot(V),r,ot(G,BV),ot(A,Ah),ot(b,Ah),ot(z),ot(P),ot(ie),ot($),ot(J)),it(([,,,,,,,Q])=>!Q),Ve(([Q,[ee,ae],ge,Se,Pe,Oe,Ne,,Ue,Xe])=>{const{column:ue,row:de}=ge,{height:Ee,width:Ae}=Se,{width:ve}=Pe;if(Ne===0&&(Q===0||ve===0))return cC;if(Ae===0){const Rt=Jv(Xe,Q),Zt=Rt+Math.max(Ne-1,0);return VV(dC(Rt,Zt,Oe))}const $e=wA(ve,Ae,ue);let De,ze;Ue?ee===0&&ae===0&&Ne>0?(De=0,ze=Ne-1):(De=$e*gf((ee+de)/(Ee+de)),ze=$e*hC((ae+de)/(Ee+de))-1,ze=Fg(Q-1,vu(ze,$e-1)),De=Fg(ze,vu(0,De))):(De=0,ze=-1);const Ge=dC(De,ze,Oe),{bottom:tt,top:rt}=pC(Pe,ge,Se,Ge),$n=hC(Q/$e),yt=$n*Ee+($n-1)*de-tt;return{bottom:tt,itemHeight:Ee,items:Ge,itemWidth:Ae,offsetBottom:yt,offsetTop:rt,top:rt}})),T),Ke(be(z,it(Q=>Q!==null),Ve(Q=>Q.length)),V),Ke(be(un(b,A,T,G),it(([Q,ee,{items:ae}])=>ae.length>0&&ee.height!==0&&Q.height!==0),Ve(([Q,ee,{items:ae},ge])=>{const{bottom:Se,top:Pe}=pC(Q,ge,ee,ae);return[Pe,Se]}),jt(Nu)),e);const H=ke(!1);Ke(be(f,dt(H),Ve(([Q,ee])=>ee||Q!==0)),H);const ne=gr(be(un(T,V),it(([{items:Q}])=>Q.length>0),dt(H),it(([[Q,ee],ae])=>{const ge=Q.items[Q.items.length-1].index===ee-1;return(ae||Q.bottom>0&&Q.itemHeight>0&&Q.offsetBottom===0&&Q.items.length===ee)&&ge}),Ve(([[,Q]])=>Q-1),jt())),te=gr(be(ot(T),it(({items:Q})=>Q.length>0&&Q[0].index===0),hi(0),jt())),W=gr(be(ot(T),dt(ie),it(([{items:Q},ee])=>Q.length>0&&!ee),Ve(([{items:Q}])=>({endIndex:Q[Q.length-1].index,startIndex:Q[0].index})),jt(eA),Ls(0)));Ke(W,g.scrollSeekRangeChanged),Ke(be(x,dt(b,A,V,G),Ve(([Q,ee,ae,ge,Se])=>{const Pe=sA(Q),{align:Oe,behavior:Ne,offset:Ue}=Pe;let Xe=Pe.index;Xe==="LAST"&&(Xe=ge-1),Xe=vu(0,Xe,Fg(ge-1,Xe));let ue=vy(ee,Se,ae,Xe);return Oe==="end"?ue=fC(ue-ee.height+ae.height):Oe==="center"&&(ue=fC(ue-ee.height/2+ae.height/2)),Ue&&(ue+=Ue),{behavior:Ne,top:ue}})),h);const X=Dn(be(T,Ve(Q=>Q.offsetBottom+Q.bottom)),0);return Ke(be(I,Ve(Q=>({height:Q.visibleHeight,width:Q.visibleWidth}))),b),{customScrollParent:E,data:z,deviation:D,footerHeight:i,gap:G,headerHeight:o,increaseViewportBy:n,initialItemCount:P,itemDimensions:A,overscan:t,restoreStateFrom:Z,scrollBy:l,scrollContainerState:c,scrollHeight:N,scrollTo:h,scrollToIndex:x,scrollTop:f,smoothScrollTargetReached:y,totalCount:V,useWindowScroll:_,viewportDimensions:b,windowScrollContainerState:w,windowScrollTo:O,windowViewportRect:I,...g,gridState:T,horizontalDirection:U,initialTopMostItemIndex:J,totalListHeight:X,...d,endReached:ne,propsReady:S,rangeChanged:W,startReached:te,stateChanged:re,stateRestoreInProgress:ie,...L}},Ft(Qv,Wn,ec,uA,to,Yv,eo));function wA(n,e,t){return vu(1,gf((n+t)/(gf(e)+t)))}function pC(n,e,t,r){const{height:i}=t;if(i===void 0||r.length===0)return{bottom:0,top:0};const o=vy(n,e,t,r[0].index);return{bottom:vy(n,e,t,r[r.length-1].index)+i,top:o}}function vy(n,e,t,r){const i=wA(n.width,t.width,e.column),o=gf(r/i),l=o*t.height+vu(0,o-1)*e.row;return l>0?l+e.row:l}const qV=St(()=>{const n=ke(m=>`Item ${m}`),e=ke({}),t=ke(null),r=ke("virtuoso-grid-item"),i=ke("virtuoso-grid-list"),o=ke(Zv),l=ke("div"),c=ke(cl),h=(m,d=null)=>Dn(be(e,Ve(g=>g[m]),jt()),d),f=ke(!1),y=ke(!1);return Ke(ot(y),f),{components:e,computeItemKey:o,context:t,FooterComponent:h("Footer"),HeaderComponent:h("Header"),headerFooterTag:l,itemClassName:r,ItemComponent:h("Item","div"),itemContent:n,listClassName:i,ListComponent:h("List","div"),readyStateChanged:f,reportReadyState:y,ScrollerComponent:h("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:h("ScrollSeekPlaceholder","div")}}),zV=St(([n,e])=>({...n,...e}),Ft(UV,qV)),HV=qe.memo(function(){const n=Ut("gridState"),e=Ut("listClassName"),t=Ut("itemClassName"),r=Ut("itemContent"),i=Ut("computeItemKey"),o=Ut("isSeeking"),l=xr("scrollHeight"),c=Ut("ItemComponent"),h=Ut("ListComponent"),f=Ut("ScrollSeekPlaceholder"),y=Ut("context"),m=xr("itemDimensions"),d=xr("gap"),g=Ut("log"),C=Ut("stateRestoreInProgress"),S=xr("reportReadyState"),E=Wo(qe.useMemo(()=>_=>{const w=_.parentElement.parentElement.scrollHeight;l(w);const O=_.firstChild;if(O){const{height:I,width:L}=O.getBoundingClientRect();m({height:I,width:L})}d({column:mC("column-gap",getComputedStyle(_).columnGap,g),row:mC("row-gap",getComputedStyle(_).rowGap,g)})},[l,m,d,g]),!0,!1);return mA(()=>{n.itemHeight>0&&n.itemWidth>0&&S(!0)},[n]),C?null:k.jsx(h,{className:e,ref:E,...In(h,y),"data-testid":"virtuoso-item-list",style:{paddingBottom:n.offsetBottom,paddingTop:n.offsetTop},children:n.items.map(_=>{const w=i(_.index,_.data,y);return o?k.jsx(f,{...In(f,y),height:n.itemHeight,index:_.index,width:n.itemWidth},w):ye.createElement(c,{...In(c,y),className:t,"data-index":_.index,key:w},r(_.index,_.data,y))})})}),WV=qe.memo(function(){const n=Ut("HeaderComponent"),e=xr("headerHeight"),t=Ut("headerFooterTag"),r=Wo(qe.useMemo(()=>o=>{e(Ks(o,"height"))},[e]),!0,!1),i=Ut("context");return n?k.jsx(t,{ref:r,children:k.jsx(n,{...In(n,i)})}):null}),$V=qe.memo(function(){const n=Ut("FooterComponent"),e=xr("footerHeight"),t=Ut("headerFooterTag"),r=Wo(qe.useMemo(()=>o=>{e(Ks(o,"height"))},[e]),!0,!1),i=Ut("context");return n?k.jsx(t,{ref:r,children:k.jsx(n,{...In(n,i)})}):null}),KV=({children:n})=>{const e=qe.useContext(pA),t=xr("itemDimensions"),r=xr("viewportDimensions"),i=Wo(qe.useMemo(()=>o=>{r(o.getBoundingClientRect())},[r]),!0,!1);return qe.useEffect(()=>{e&&(r({height:e.viewportHeight,width:e.viewportWidth}),t({height:e.itemHeight,width:e.itemWidth}))},[e,r,t]),k.jsx("div",{ref:i,style:id(!1),children:n})},GV=({children:n})=>{const e=qe.useContext(pA),t=xr("windowViewportRect"),r=xr("itemDimensions"),i=Ut("customScrollParent"),o=Gb(t,i,!1);return qe.useEffect(()=>{e&&(r({height:e.itemHeight,width:e.itemWidth}),t({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,t,r]),k.jsx("div",{ref:o,style:id(!1),children:n})},JV=qe.memo(function({...n}){const e=Ut("useWindowScroll"),t=Ut("customScrollParent"),r=t||e?YV:QV,i=t||e?GV:KV,o=Ut("context");return k.jsx(r,{...n,...In(r,o),children:k.jsxs(i,{children:[k.jsx(WV,{}),k.jsx(HV,{}),k.jsx($V,{})]})})}),{useEmitter:EA,useEmitterValue:Ut,usePublisher:xr}=fA(zV,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},JV),QV=vA({useEmitter:EA,useEmitterValue:Ut,usePublisher:xr}),YV=_A({useEmitter:EA,useEmitterValue:Ut,usePublisher:xr});function mC(n,e,t){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&t(`${n} was not resolved to pixel value correctly`,e,rr.WARN),e==="normal"?0:parseInt(e??"0",10)}class XV extends qv{getListHtml(){return k.jsx(k.Fragment,{children:k.jsx(MV,{className:this.props.ViewPortMCClassName||"flinnTechVirtuoso",style:{height:this.props.vHeight||"100%"},totalCount:this.list.length,itemContent:e=>{const t=this.list[e];return this.mapSection.getHtml({type:"div",content:this.getCellList(t)})}})})}}class ZV extends Rb{constructor(){super(...arguments);le(this,"factory",{text:a3,attribute:Zf,custom:l3,customBuilt:I3,img:Hb,form:u3,del:Bv,delIcon:JT,delCustom:JT,delText:c3,edit:Uv,editIcon:f3,editCustom:d3,interactiveMap:p3,addComponentButton:m3,plain:g3,select:y3,logo:v3,links:_3,linkItem:w3,logout:E3,default:bn,map:qv,order:T3,innerMap:C3,backgroundImage:S3,viewPortMap:XV})}}class t_{constructor(){le(this,"MCMapContainer","Map-Container");le(this,"MCMapSection","Map-Section");le(this,"MCLink","Map-Link");le(this,"MCCell","Map-Cell");le(this,"MCCustomDelItem","Map-Custom-Del-Item");le(this,"MCDelItem","Map-Del-Item");le(this,"MCDelImgItem","Map-Del-imgItem");le(this,"MCCustomEditItem","Map-Custom-Edit-Item");le(this,"MCEditImgItem","Map-Edit-imgItem");le(this,"MCEditItem","Map-Edit-Item");le(this,"MCAttributeItem","Map-Attribute-Item");le(this,"MCImgItem","Map-imgItem");le(this,"MCTextItem","Map-Text-Item");le(this,"MCActiveItem","Map-Active-Item");le(this,"MCCustom","");le(this,"MCBackgroundItem","background-item");le(this,"MCCellBackground","cell-background");le(this,"MCBackgroundLink","cell-background");le(this,"MCLogoItem","navLogo")}}class sd extends t_{constructor(){super(...arguments);le(this,"MCSectionHover","DC-Map-Section:hover");le(this,"MCCustomDelItem","DC-Custom-Del-Item");le(this,"MCDelItem","DC-Del-Item");le(this,"MCDelImgItem","DC-Del-imgItem");le(this,"MCCustomEditItem","Map-Custom-Edit-Item");le(this,"MCEditImgItem","DC-Edit-imgItem");le(this,"MCEditItem","DC-Edit-Item")}}class od extends sd{constructor(){super(...arguments);le(this,"MCMapContainer","DR-Map-Container");le(this,"MCMapSection","DR-Map-Section")}}class e5 extends od{constructor(){super(...arguments);le(this,"MCMapContainer","DRW-Map-Container")}}class t5 extends od{constructor(){super(...arguments);le(this,"MCMapContainer","IM-Map-Container");le(this,"MCMapSection","IM-Map-Section");le(this,"MCMap","IM-Map");le(this,"MCAddButton","IM-addButton");le(this,"MCActiveItem","IM-Active-Item");le(this,"MCCell","IM-Cell")}}class n5 extends od{constructor(){super(...arguments);le(this,"MCActiveLink",this.MCActiveItem);le(this,"MCLinkItem",this.MCLink);le(this,"MCMapSection","SB-Map-Section")}}class r5 extends sd{constructor(){super(...arguments);le(this,"MCActiveLink",this.MCActiveItem);le(this,"MCLinkItem",this.MCLink);le(this,"MCMapSection","SB-link");le(this,"MCCell","SB-Cell-Link");le(this,"MCLink","SB-Map-Link");le(this,"MCLinkItem","SB-Map-Link")}}class i5 extends sd{constructor(){super(...arguments);le(this,"MCActiveLink",this.MCActiveItem);le(this,"MCLinkItem",this.MCLink)}}const s5=Object.freeze(Object.defineProperty({__proto__:null,DefaultColumn:sd,DefaultRegistry:t_,DefaultRow:od,DefaultWrapRow:e5,InteractiveMap:t5,Links:r5,SideBar:n5,TopBar:i5},Symbol.toStringTag,{value:"Module"}));class o5 extends Dv{constructor(){super(s5),this.factory.default=t_}}class a5{constructor(){le(this,"factory",{text:Mu,tag:TA,plain:h5,textAndTag:c5,textAndTag2:u5,bool:d5,textAttributeList:f5})}getFilter(e){if(e)return this.factory[e]}registerFilter(e,t){this.factory[e]=t}}function TA(n){let{list:e,attribute:t,tagList:r}=n;return e.length>0&&(e=e.filter(i=>!!r.find(l=>(t?l.getJson()[t]:l.getJson().connectedId)===i.getJson()._id))),e}function l5(n){let e=[];if(n.search&&n.list){const t=n.search.toLowerCase().split(" ").map(r=>r.trim());e=n.list.filter(r=>{const i=r.getJson()[n.attribute||"tags"];if(i){let o=i.split(n.splitStr||",");o=o.map(l=>l.toLowerCase());for(let l of t)if(o.includes(l))return!0}else return!1})}return e}function u5(n){let{list:e,attributes:t,search:r}=n,i=[],o=[],l=t.split(",");for(let h of l)o.push(Mu({...n,attribute:h}));let c=l5({...n});return i=[...o[0],...c,...o[1],...o[2]],i=n_(i),i}function c5(n){let{list:e,attribute:t,tagList:r,attribute2:i,attributeTag:o,search:l}=n,c=Mu({...n,attribute:t}),h=TA({...n,attribute:o}),f=Mu({...n,attribute:i});return e=[...c,...h,...f],n_(e)}function n_(n){const e=new Map;return n.forEach(t=>{const i=t.getJson()._id;e.has(i)||e.set(i,t)}),Array.from(e.values())}function Mu(n){let{list:e,attribute:t,search:r}=n;return r&&r.length>0&&(e=e.filter(i=>{var o;return(o=i.getJson()[t])==null?void 0:o.toLowerCase().includes(r==null?void 0:r.toLowerCase())})),e}function h5(n){let{list:e,attribute:t,search:r}=n;return r&&r.length>0&&(e=e.filter(i=>{var o;return(o=i[t])==null?void 0:o.toLowerCase().includes(r==null?void 0:r.toLowerCase())})),e}function f5(n){let{attributeList:e}=n,t=[];for(let r of e)t=[...t,...Mu({...n,attribute:r})];return t=n_(t),t}function d5(n){let{list:e,attribute:t,search:r}=n;return e=e.filter(i=>i.getJson()[t]===r),e}class CA extends ol{constructor(){super();le(this,"FilterFactory");this.getFilterFactory(),this.mainFunc=this.getMapComponent}getFactory(){return this.factory===void 0&&(this.factory=new ZV),this.factory}getThemeFactory(){return this.themeFactory===void 0&&(this.themeFactory=new o5),this.themeFactory}getFilterFactory(){return this.filterFactory===void 0&&(this.filterFactory=new a5),this.filterFactory}getMapComponent(t,r){return r=r||"default",this.factory.getComponent(r,t)}}class bn extends Vv{constructor(e){super(e),this.state={type:"map"},this.interface=SA}setFilterInfo(){this.filterFacotry=this.interface.getFilterFactory(),this.filters=this.props.filters,this.filterFunc=this.props.filterFunc,this.filter=this.props.filter}getFilterFunc(){var e;if(!this.filterFunc&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(r=>r.type==="filterFunc");t&&(this.filterFunc=t.func)}}getFilter(){var e;if(!this.filter&&this.filters!==void 0){let t=(e=this.filters)==null?void 0:e.find(r=>r.type==="filter");t&&(this.filter={...t})}}getList(){var t,r,i,o;let e=this.props.name;this.list=this.props.list?this.props.list:this.filter?(i=this.componentList)==null?void 0:i.getList(e,(t=this.filter)==null?void 0:t.search,(r=this.filter)==null?void 0:r.attribute):(o=this.componentList)==null?void 0:o.getList(e)}filterListByFilterFunc(){this.list&&(this.list=this.list.filter(e=>this.filterFunc?this.filterFunc(e):!0))}filterListByFilterFactory(){if(this.filters)for(let e of this.filters){let t=this.filterFacotry.getFilter(e.type);t&&(this.list=t({list:this.list,...e}))}}setProps(){let e=this.props.cells;this.addToProps={cells:e,list:this.list}}componentPreSetup(){this.addToInitialSetup=[this.setFilterInfo,this.getFilterFunc,this.getFilter,this.getList,this.filterListByFilterFunc,this.filterListByFilterFactory]}}const SA=new CA;class IA extends lt{constructor(e){super(e),this.initialPropsSetupFunctions=[...this.initialPropsSetupFunctions,this.getNavLists],this.state={}}getLinks(){var e,t;return this.props.links?this.props.links:(t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes}getDefaultNavItem(e){return{logo:{imgSrc:this.props.logoURL,label:this.props.logoLabel,...this.props},links:{links:this.getLinks(),...this.props,class:"fit"},logout:{logoutFunc:this.props.logoutFunc,auth:this.props.auth,wrapperClass:"SB-logout",...this.props}}[e]}getList(){let e=this.props.navList,t=e.getList();for(let r=0;r<t.length;r++)if(t[r].default){let i=this.getDefaultNavItem(t[r].type);i.type=t[r].type,e.update(r,i)}return this.props.type==="topBar"&&(t=t.filter(r=>r.type!=="links")),t}getHtml(){return k.jsx(bn,{theme:this.props.mapTheme,list:this.mapList,cells:this.list,...this.props.navMapProps})}getNavLists(){this.list=this.props.list?this.props.list:this.getList(),this.mapList=this.props.mapList?this.props.mapList:[{}]}}class p5{constructor(){le(this,"factory",{default:IA})}getComponent(e,t){let r;return this.factory[e]&&(r=this.factory[e]),k.jsx(r,{...t})}registerComponent(e,t){this.factory[e]=t}}class m5 extends lt{constructor(e){super(e),this.state={defaultStyle:"navMenu",renderComp:void 0}}async open(){let e=await this.props.open();this.props.type==="topBar"&&(this.state.renderComp?this.setState({renderComp:void 0}):this.setState({renderComp:e}))}render(){return this.props.app,k.jsxs("div",{children:[k.jsxs("div",{onClick:this.open,className:this.props.menuClass?this.props.menuClass:this.state.defaultStyle,children:[this.props.menuContent&&k.jsx(k.Fragment,{children:this.props.menuContent})," "]}),this.state.renderComp&&k.jsx(k.Fragment,{children:this.state.renderComp})]})}}class g5 extends vn{constructor(e){super(e),this.state={...this.state,defaultType:this.props.type?this.props.type:"sideBar",typeKey:"layout",defaultNavType:"default",phoneSize:850,left:-400}}getProps(){var e,t;return{mapTheme:this.props.mapTheme||this.state.defaultType,links:this.props.links||((t=(e=this.props.app)==null?void 0:e.state)==null?void 0:t.routes),...this.props}}getFactoryComponent(e){let t=this.props.mapType?this.props.mapType:this.state.defaultNavType;return this.props.factory.getComponent(t,e)}componentDidMount(){this.resize!==void 0&&(window.addEventListener("resize",this.resize),this.resize())}componentWillUnmount(){this.resize!==void 0&&window.removeEventListener("resize",this.resize)}resize(){if(window.innerWidth<850){this.setState({phone:!0,tablet:!1,defaultType:this.props.phoneLayout?this.props.phoneLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}if(window.innerWidth<1224){this.setState({phone:!1,tablet:!0,defaultType:this.props.tabletLayout?this.props.tabletLayout:this.state.ogType?this.state.ogType:this.state.defaultType,ogType:this.state.ogType?this.state.ogType:this.state.defaultType});return}window.innerWidth>1224&&(this.state.phone&&this.setState({phone:!1,defaultType:this.state.ogType}),this.state.tablet&&this.setState({tablet:!1,defaultType:this.state.ogType}))}async setStyleOnMenuClick(e){const t=r=>new Promise(i=>setTimeout(i,r));this.card.setStyle({...this.card.getStyle(),left:e.toString()+"px"}),await this.setState({left:e}),await t(10)}async setNavOpenClose(){if(this.state.left===-400)for(let e=-400;e<600;e=e+15){if(e>0){this.setState({left:0});break}await this.setStyleOnMenuClick(e)}else for(let e=0;e>-450;e=e-15){if(e<-400){this.setState({left:-400});break}await this.setStyleOnMenuClick(e)}}async openCloseLinks(){var r,i;let e=k.jsx(bn,{list:this.props.links||((i=(r=this.props.app)==null?void 0:r.state)==null?void 0:i.routes),cells:[{type:"link"}]});return k.jsx(vn,{content:e})}async openCloseNavFun(){return await{topBar:this.openCloseLinks,sideBar:this.setNavOpenClose}[this.state.defaultType]()}getMenu(){return this.props.menuComponent?k.jsx(this.props.menuComponent,{...this.props.menuComponentProps,open:this.openCloseNavFun,type:this.state.defaultType}):k.jsx(m5,{open:this.openCloseNavFun,type:this.state.defaultType,...this.props.menuComponentProps})}getContent(){let e=this.getProps(),t=this.getFactoryComponent(e);return this.content=k.jsxs(k.Fragment,{children:[t,this.props.type!=="type"&&(this.state.phone||window.innerWidth<this.state.phoneSize)&&k.jsx(k.Fragment,{children:this.getMenu()})]}),this.content}}class y5{constructor(){zn.bind(this),this.list=[{type:"logo",picURL:void 0,label:void 0,default:!0},{type:"links",linkJson:void 0,default:!0},{type:"logout",logoutFunc:void 0,auth:void 0,default:!0}]}setList(e){this.list=e}getList(){return this.list}insert(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,0,t)}add(e,t){t?this.list.unshift(e):this.list.push(e)}addCustomJSX(e,t,r){let i={type:"custom",custom:e};t?this.insert(t,i):this.add(i,r)}update(e,t){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list[e]={...this.list[e],...t}}remove(e){if(e<0||e>=this.list.length){console.error("Index out of bounds");return}this.list.splice(e,1)}}class bA extends ol{constructor(){super();le(this,"factory");le(this,"navList");zn.bind(this),this.getFactory(),this.getNavList(),this.mainFunc=this.getNav}getFactory(){return this.factory||(this.factory=new p5),this.factory}getNav(t){return k.jsx(g5,{factory:this.factory,navInterface:this,navList:this.navList,...t})}getNewNavList(){return new y5}setNavListForce(t){this.navList=t}getNavList(){return this.navList||(this.navList=this.getNewNavList()),this.navList}}const yf=new bA;class v5 extends Vv{constructor(e){super(e),this.interface=yf}}class _5{constructor(){le(this,"factory",{})}getComponent(e){return this.factory[e]}registerComponent(e,t){this.factory[e]=t}}class w5 extends _5{constructor(){super(...arguments);le(this,"factory",{})}}class E5 extends lt{constructor(e){super(e),this.state={}}checkPopupSwitch(e){var t,r;return this.popupSwitch=this.props.popupSwitch||((r=(t=this.props.app)==null?void 0:t.state)==null?void 0:r.popupSwitch),this.popupSwitch!==""&&this.popupSwitch!==void 0&&(e=!0),e}checkType(e){var i,o,l,c,h;let t=this.props.currentPopupComponent||((o=(i=this.props.app)==null?void 0:i.state)==null?void 0:o.currentPopupComponent),r=(l=this.popupFactory.getComponent(this.popupSwitch))==null?void 0:l.componentType;return r&&(t=this.isArray(t),e=((h=(c=t[0])==null?void 0:c.getJson())==null?void 0:h.type)===r&&t.length>0),e}render(){var r;let e=this.checkPopupSwitch(!1);e&&(e=this.checkType(e)),this.popupFactory=this.props.factory||this.props.app.state.popupFactory;let t=(r=this.popupFactory)==null?void 0:r.getComponent(this.popupSwitch);return k.jsx(k.Fragment,{children:e&&(t==null?void 0:t.content)&&k.jsx(vn,{content:k.jsx(t.content,{}),popup:!0,type:t.popupType||"biggerCard",theme:t.popupTheme||"Default",handleClose:()=>{if(t.handleClose)t.handleClose();else{let i=this.props.app.state.currentPopupComponent;i&&this.props.app.state.operationsFactory.removeFromList(i),this.props.app.dispatch({currentPopupComponent:void 0,popupSwitch:void 0})}}})})}}class T5 extends ol{constructor(){super();le(this,"factory");zn.bind(this),this.getFactory()}getFactory(){return this.factory||(this.factory=new w5),this.factory}createPopupMachine(t){return k.jsx(E5,{app:(t==null?void 0:t.app)||this.getAppComponent(),factory:this.factory})}}let gC=new T5;class C5{constructor(){le(this,"convertStringToLink",e=>e&&(!e.startsWith("http://")&&!e.startsWith("https://")?"https://"+e:e))}isLikelyUrl(e){return/\.(com|net|org|io|gov|edu|co)\b/.test(e)||/^(?:f|ht)tps?\:\/\//.test(e)||/^mailto\:/i.test(e)}checkURLforString(e){return window.location.href.includes(e)}getIdFromURL(e,t){let i=window.location.href.split("/"),o=i[i.length-1],l=e?o.split("-"):[o];return t?l[t]:l[0]}getTypeFromURL(){let t=window.location.href.split("/");return t[t.length-2]}}let _y=new C5;class AA extends lt{constructor(t,r){super(t);le(this,"dispatchItems",{});this.state={...this.state,type:r==null?void 0:r.type,ids:r==null?void 0:r.ids,filterKeys:r==null?void 0:r.filterKeys,path:r==null?void 0:r.path,snapShot:r==null?void 0:r.snapShot,owner:!0},(r==null?void 0:r.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:r,filterKeys:i,path:o,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getList(t,r,i),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:t,ids:r,filterKeys:i,path:o,snapShot:l,owner:c}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:r})}async componentDidMount(){this.getComponentsFromBackend();let t=this;window.addEventListener("popstate",function(r){t.onBackClick(r)})}onBackClick(t){this.getComponentsFromBackend()}componentDidUpdate(){this.getComponentsAgain()}async getComponentsAgain(t,r){this.getFromURL(),(this.app.state.urlChange||this.state.reRender&&this.urlId!==this.state.urlId)&&(await this.setState({urlId:this.urlId}),await this.dispatch({urlChange:void 0}),this.forceRerender=!1,this.getComponentsFromBackend())}async getFromURL(){this.urlType=_y.getTypeFromURL(),this.urlId=_y.getIdFromURL()}}class no extends AA{constructor(t,r){super(t,r);le(this,"dispatchItems",{});this.state={...this.state,type:r==null?void 0:r.type,ids:r==null?void 0:r.ids,filterKeys:r==null?void 0:r.filterKeys,path:r==null?void 0:r.path,snapShot:r==null?void 0:r.snapShot,owner:r==null?void 0:r.owner},(r==null?void 0:r.owner)===!1&&(this.state.owner=!1)}async getComponentsFromBackend(){let{type:t,ids:r,filterKeys:i,path:o,snapShot:l,owner:c}=this.state;this.compList=await this.componentList.getComponents(),this.compList.length>0&&await this.setState({gotComponents:!0}),this.compList=await this.componentList.getComponentsFromBackend({type:this.state.owner,ids:r,filterKeys:i,path:o,snapShot:l,typeAttribute:"owner"}),this.setState({gotComponents:!0,getComponentsFromBackend:!0,components:this.compList,urlId:r})}}class S5 extends AA{async getComponentsFromBackend(){await this.getFromURL(),await this.getFirstComponent(),this.comp&&await this.getAssociatedItems(),this.setGotComponents()}async getFirstComponent(e,t){let r=e||this.urlType,i=t||this.urlId;this.comp=this.componentList.getComponent(r,i),this.comp||(this.comp=await this.componentList.getComponentsFromBackend({type:r,ids:i,filterKeys:"_id",owner:this.state.owner}),this.comp=this.comp.length>0?this.comp[0]:void 0)}async getAssociatedItems(){this.compList=await this.comp.getAssociatedItems(this.state.itemTypes),this.compList.length>0&&this.setState({gotComponents:!0}),this.compList=await this.comp.getAssociatedItemsFromBackend(this.state.itemTypes),await this.setCurrentItems()}setCurrentItems(){this.dispatch({currentComponent:this.comp,["current"+this.getCapitalFirstLetter(this.comp.getJson().type)]:this.comp,...this.dispatchItems})}setGotComponents(){this.setState({gotComponents:!0,gotComponentsFromBackend:!0,components:this.compList,urlId:this.urlId})}}class xA extends lt{constructor(e){super(e),this.state={...this.state,email:"",password:""}}validate(){return!0}onChange(e){let{name:t,value:r}=e.target;this.setState({[t]:r})}onSub(){this.validate()&&this.APIService.login(this.state.email,this.state.password)}getSwitchLink(){return k.jsxs("div",{id:"signUpFT",children:["Don't have an Account? ",k.jsx(cn,{to:"/register",children:"Sign Up"})]})}preSetup(){this.setComponents(["container","header","form","submitButton"])}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Login"})}getFormHtml(){let e=k.jsxs(k.Fragment,{children:[k.jsx("div",{children:"Email"}),k.jsx("input",{className:"defaultInputFormAuth",name:"email",onChange:this.onChange,value:this.state.email}),k.jsx("div",{style:{marginTop:"10px"},children:"Password"}),k.jsx("input",{className:"defaultInputFormAuth",name:"password",type:"password",onChange:this.onChange,value:this.state.password})]});return this.form.setClass("defaultLoginForm"),this.form.getHtml({type:"div",content:e})}getSubmitHtml(){return this.submitButton.setClass("defaultLoginButton"),this.submitButton.setOnClick(this.onSub),this.submitButton.getHtml({type:"div",content:"Submit"})}getContainerHtml(){this.container.setClass(this.props.loginContainer||"fitCC");let e=k.jsxs(k.Fragment,{children:[this.getHeaderHtml(),this.getFormHtml(),this.getSubmitHtml(),this.getSwitchLink()]});return this.container.getHtml({type:"div",content:e})}getHtml(){let e=this.getContainerHtml();return k.jsx("div",{className:"fullCCLayoutRow",children:k.jsx(vn,{type:this.props.loginCardType||"biggerCard",content:e})})}}class I5 extends xA{async onSub(){if(this.validate()){let e=await this.APIService.register(this.state.email,this.state.password);if(!e.error){let t={type:"user",email:this.state.email,_id:this.state.email};e=await this.componentList.addComponents(t),window.history.pushState({},"","/"),this.dispatch({currentUser:e})}}}getHeaderHtml(){return this.header.getHtml({type:"h1",content:"Register"})}getSwitchLink(){return k.jsxs("div",{children:["Have an Account? ",k.jsx(cn,{to:"/login",children:"Login"})]})}}class b5 extends lt{constructor(e){super(e),this.state={...this.state,routes:[],loginComp:xA,registerComp:I5}}addToRouter(e){let t=[...this.state.routes,e];this.setState({routes:t})}getRouteMap(e,t){let r=k.jsx(k.Fragment,{});return e&&(e=[...e],r=e==null?void 0:e.map((i,o)=>(i.path||(i.path=this.classNameToString(i.comp),o===0&&(i.path="/")),k.jsxs(k.Fragment,{children:[k.jsx(bs,{path:i.path,element:k.jsx(i.comp,{props:{...t,...i.props}})}),k.jsx(bs,{path:i.path+"/:id",element:k.jsx(i.idComp,{props:{...t,...i.props}})})]})))),r}getRoutes(e,t){var i;let r=k.jsxs(uE,{children:[this.getRouteMap(e,t),this.state.routes.map((o,l)=>k.jsx(k.Fragment,{children:o}))]});return(i=this.app)!=null&&i.state.currentUser||(r=this.getUserAuthRoutes(t)),r}getUserAuthRoutes(e){let t=e.extraAuthRoutes,r=e.loginComp||this.state.loginComp,i=e.registerComp||this.state.registerComp;return k.jsxs(uE,{children:[k.jsx(bs,{path:"/",element:k.jsx(r,{props:{...e}})}),k.jsx(bs,{path:"/login",element:k.jsx(r,{props:{...e}})}),k.jsx(bs,{path:"/register",element:k.jsx(i,{props:{...e}})}),t==null?void 0:t.map((l,c)=>k.jsxs(k.Fragment,{children:[k.jsx(bs,{path:l.path,element:k.jsx(l.comp,{props:{...e,...l.props}})}),k.jsx(bs,{path:l.path+"/:id",element:k.jsx(l.idComp,{props:{...e,...l.props}})})]}))]})}getHtml(){var o;let e={...this.props};e.app=this.app;let t=(o=this.app)==null?void 0:o.state,r=this.props.routes||(t==null?void 0:t.routes),i=this.getRoutes(r,e);return k.jsx(k.Fragment,{children:i})}}class A5{constructor(){le(this,"registry",{})}getRegistry(){return this.registry}addToRegistry(e,t){this.registry[e]=t}getItemFromRegistry(e){return this.registry[e]}}class x5 extends lt{constructor(t,r,i){super(t);le(this,"endpoint");le(this,"db");le(this,"storage");le(this,"auth");le(this,"popupComponents");le(this,"popupComponentsProps");r=this.props.config||r,this.popupComponents=this.props.popupComponents,this.componentListInterface=new AF(this.dispatch,r.endpoint,r.db,r.storage,r.auth),this.componentList=this.componentListInterface.createComponentList(),this.factory=this.componentListInterface.getFactory(),this.operationsFactory=this.componentList.getOperationsFactory(),this.interfaceRegistry=new A5,this.initialPropsSetupFunctions=[this.propogateApp,...this.initialPropsSetupFunctions],this.state={componentList:this.componentList,componentListInterface:this.componentListInterface,operationsFactory:this.operationsFactory,factory:this.factory,theme:this.props.theme||"default",pageClass:this.props.pageClass||"fullScreen",pageStyle:this.props.pageStyle,extraRouteKey:this.props.extraRouteKey||"extraRoutes",navBarProps:this.props.NavBarProps||{},popupFactory:gC.getFactory(),popups:this.props.popups||[],global:this.props.global||{},routes:this.props.routes||[]},i&&this.registerListWithFactory(i)}async checkForUser(){let t=await this.APIService.getCurrentUser();t&&await this.APIService.checkIfLoggedIn()&&this.APIService.getuser(t.email)}componentDidMount(){this.checkForUser()}registerListWithFactory(t){for(let r of t){let o=new r().getJson().type;this.factory.registerComponents({name:o,component:r}),this.createPopupDefaultsByType(o)}}createPopupDefaultsByType(t){var r;if((r=this.popupComponents)!=null&&r[t]){let i=this.getCapitalFirstLetter(t),o={content:this.popupComponents[t],popupSwitch:"add"+i,componentType:t},l={...o,popupSwitch:"update"+i};this.state.popups=[...this.state.popups,o,l]}}dispatch(t){t=t||{},this.setState({...t})}setPopups(){for(let t of this.state.popups){let r=t.componentType;r&&(t={...t,...this.popupComponentsProps[r]}),t.popupSwitch||(t.popupSwitch=this.classNameToString(t.content)),this.state.popupFactory.registerComponent(t.popupSwitch,t)}}propogateApp(){this.app={state:this.state,dispatch:this.dispatch.bind(this),...this.state.global},SA.setAppComponent(this.app),zb.setAppComponent(this.app),xb.setAppComponent(this.app),yf.setAppComponent(this.app),Ab.setAppComponent(this.app)}getHtml(t){this.setPopups();let r=[...this.state.routes];return this.state[this.state.extraRouteKey]&&(r=[...r,...this.state[this.state.extraRouteKey]]),k.jsx("div",{className:this.state.pageClass,style:this.state.pageStyle,children:k.jsxs(sF,{children:[gC.createPopupMachine({app:this.app}),this.state.currentUser&&k.jsx(v5,{...this.state.navBarProps}),t?k.jsx(t.content,{props:{...t.props}}):k.jsx(k.Fragment,{}),k.jsx(b5,{routes:r,extraAuthRoutes:this.state.extraAuthRoutes})]})})}}class kA extends Dv{constructor(){super(...arguments);le(this,"factory",{form:qb,map:CA,nav:bA})}}new kA;new kA;class Rr extends EF{constructor(t){super(t);le(this,"json",{...this.json,type:"",name:"",owner:"",picURL:""})}}class k5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"user"})}}class R5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"contact",phone:"",email:"",conversationIds:[]})}}let P5=class extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"conversation",contactIds:[]})}};class O5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"template",content:""})}}class N5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"sequence",steps:[]})}}class L5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"step",delay:0,messageId:""})}}class RA extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,conversationIds:[],ownerMessage:!1})}}class D5 extends RA{constructor(){super(...arguments);le(this,"json",{...this.json,type:"textMessage",content:"",timestamp:""})}}class M5 extends RA{constructor(){super(...arguments);le(this,"json",{...this.json,type:"email",subject:"",body:"",timestamp:""})}}class j5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"potentialProspect",phone:"",email:"",researchId:"",conversationIds:[]})}}class F5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"research"})}}class PA extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"calendarEvent",name:"",dayIndex:0,startTime:"10:00",duration:90,day:"Monday"})}}class V5 extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"task",dueDate:"",completed:!1,completeDate:"",name:""})}}class OA extends Rr{constructor(){super(...arguments);le(this,"json",{...this.json,type:"homework",dueDate:"",completed:!1,completeDate:"",content:"",name:""})}}class B5 extends OA{constructor(){super(...arguments);le(this,"json",{...this.json,type:"goal"})}}class U5 extends PA{constructor(){super(...arguments);le(this,"json",{...this.json,type:"session"})}}const q5=Object.freeze(Object.defineProperty({__proto__:null,CalendarEvent:PA,Contact:R5,Conversations:P5,Email:M5,Goal:B5,Homework:OA,PotentialProspect:j5,Research:F5,Sequence:N5,Session:U5,Step:L5,Task:V5,Template:O5,TextMessage:D5,User:k5},Symbol.toStringTag,{value:"Module"}));class z5 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var c,h,f;let e=window.innerWidth>600;(c=this.propsState.popupSwitch)!=null&&c.includes("addContact")&&(e=!1);let t=e?this.propsState.currentContact:this.props.obj;const r=e?this.propsState.currentContact:this.propsState.currentPopupComponent,i=!e;let o=t?"Edit":"Add",l=k.jsx(Xs,{content:"Save",isPopup:!1,callbackFunc:async y=>{let m=this.propsState.currentPopupComponent;debugger;let d="Welcome to Viridian! Claim Your New Account",g=`http://localhost:5173/clientregister/${m.getJson()._id}`;debugger;let C=`
Hi ${m.getJson().firstName},

Congratulations! You've been successfully added to Viridian.

To get started, please click the link below to claim and activate your account:

${g}

If you have any questions or need help, just reply to this email and we'll be happy to assist.

Welcome aboard!

Best regards,
Viridian 
`;debugger;let S={from:this.propsState.currentUser.getJson()._id,to:m.getJson().email,subject:d,text:C};await fetch("https://gmailapiemailhandler-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}).then(_=>{if(!_.ok)throw new Error(`HTTP error! Status: ${_.status}`);return _.json()}).then(_=>{console.log("Reply sent successfully in thread.",_)}).catch(_=>{console.error("Error sending reply:",_)}),this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}});return((h=this.propsState.popupSwitch)!=null&&h.includes("updateContact")||window.innerWidth>600&&!((f=this.propsState.popupSwitch)!=null&&f.includes("addContact")))&&(l=k.jsx(Yu,{obj:r,content:"Save",isPopup:i,callbackFunc:this.props.callbackFunc})),k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsxs("h2",{children:[o," Contact"]})," ",k.jsxs("div",{className:"contact-Add-container",children:[k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"First Name"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:t,name:"firstName",inPopup:i})," "]})]}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Last Name"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:t,name:"lastName",inPopup:i})," "]})]}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Email"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:t,name:"email",inPopup:i})," "]})]}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Phone"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:t,name:"phone",inPopup:i})," "]})]}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Address"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:t,name:"address",inPopup:i})," "]})]}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Birth"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:t,name:"birth",inPopup:i})," "]})]}),k.jsxs("div",{className:"popupButton",style:{width:"100%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",k.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",l]})," "]})]})]})}}class H5 extends lt{constructor(t){super(t);le(this,"handleCheckContact",t=>{let r=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];r.includes(t)||r.push(t),this.dispatch({selectedContacts:r})});le(this,"handleUncheckContact",t=>{let r=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];r=r.filter(i=>i!==t),this.dispatch({selectedContacts:r})})}render(){const{obj:t}=this.props;let r=t.getJson(),o=(this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[]).includes(t);return k.jsx("div",{style:{display:"flex",flexDirection:"column"},children:k.jsxs("div",{className:"contact-item",style:{background:o?"#2374ab10":"#eaf4f1"},children:[k.jsx("div",{className:"contact-avatar",children:k.jsx("i",{className:"fa-solid fa-user"})}),k.jsxs("div",{className:"contact-info",children:[k.jsxs("div",{className:"contact-info-first-div row row-space-between padding-0",children:[k.jsx("div",{onClick:()=>{debugger;window.innerWidth>600?this.dispatch({currentContact:t}):this.dispatch({currentPopupComponent:t,popupSwitch:"updateContact"})},className:"contact-name",children:`${r.firstName} ${r.lastName}`}),k.jsx("div",{className:"contact-date",children:"Yesterday"})]}),k.jsx("div",{className:"contact-desc",children:r.company})]})]})})}}var Hh={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var W5=Hh.exports,yC;function $5(){return yC||(yC=1,function(n,e){((t,r)=>{n.exports=r()})(W5,function t(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,l=r.IS_PAPA_WORKER||!1,c={},h=0,f={};function y(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var A=L(b);A.chunkSize=parseInt(A.chunkSize),b.step||b.chunk||(A.chunkSize=null),this._handle=new S(A),(this._handle.streamer=this)._config=A}).call(this,T),this.parseChunk=function(b,A){var x=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<x){let D=this._config.newline;D||(N=this._config.quoteChar||'"',D=this._handle.guessLineEndings(b,N)),b=[...b.split(D).slice(x)].join(D)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(b))!==void 0&&(b=N),this.isFirstChunk=!1,this._halted=!1;var x=this._partialLine+b,N=(this._partialLine="",this._handle.parse(x,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=N.meta.cursor,x=(this._finished||(this._partialLine=x.substring(b-this._baseIndex),this._baseIndex=b),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)r.postMessage({results:N,workerId:f.WORKER_ID,finished:x});else if(P(this._config.chunk)&&!A){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!x||!P(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),x||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(b){P(this._config.error)?this._config.error(b):l&&this._config.error&&r.postMessage({workerId:f.WORKER_ID,error:b,finished:!1})}}function m(T){var b;(T=T||{}).chunkSize||(T.chunkSize=f.RemoteChunkSize),y.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),o||(b.onload=V(this._chunkLoaded,this),b.onerror=V(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var A,x=this._config.downloadRequestHeaders;for(A in x)b.setRequestHeader(A,x[A])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+N));try{b.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}o&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(A=>(A=A.getResponseHeader("Content-Range"))!==null?parseInt(A.substring(A.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(A){A=b.statusText||A,this._sendError(new Error(A))}}function d(T){(T=T||{}).chunkSize||(T.chunkSize=f.LocalChunkSize),y.call(this,T);var b,A,x=typeof FileReader<"u";this.stream=function(N){this._input=N,A=N.slice||N.webkitSlice||N.mozSlice,x?((b=new FileReader).onload=V(this._chunkLoaded,this),b.onerror=V(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),N=A.call(N,this._start,D)),b.readAsText(N,this._config.encoding));x||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(b.error)}}function g(T){var b;y.call(this,T=T||{}),this.stream=function(A){return b=A,this._nextChunk()},this._nextChunk=function(){var A,x;if(!this._finished)return A=this._config.chunkSize,b=A?(x=b.substring(0,A),b.substring(A)):(x=b,""),this._finished=!b,this.parseChunk(x)}}function C(T){y.call(this,T=T||{});var b=[],A=!0,x=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){x&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):A=!0},this._streamData=V(function(N){try{b.push(typeof N=="string"?N:N.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(D){this._streamError(D)}},this),this._streamError=V(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=V(function(){this._streamCleanUp(),x=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(T){var b,A,x,N,D=Math.pow(2,53),z=-D,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Z=this,ie=0,J=0,$=!1,F=!1,U=[],H={data:[],errors:[],meta:{}};function ne(Q){return T.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function te(){if(H&&x&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),x=!1),T.skipEmptyLines&&(H.data=H.data.filter(function(Se){return!ne(Se)})),W()){let Se=function(Pe,Oe){P(T.transformHeader)&&(Pe=T.transformHeader(Pe,Oe)),U.push(Pe)};var ge=Se;if(H)if(Array.isArray(H.data[0])){for(var Q=0;W()&&Q<H.data.length;Q++)H.data[Q].forEach(Se);H.data.splice(0,1)}else H.data.forEach(Se)}function ee(Se,Pe){for(var Oe=T.header?{}:[],Ne=0;Ne<Se.length;Ne++){var Ue=Ne,Xe=Se[Ne],Xe=((ue,de)=>(Ee=>(T.dynamicTypingFunction&&T.dynamicTyping[Ee]===void 0&&(T.dynamicTyping[Ee]=T.dynamicTypingFunction(Ee)),(T.dynamicTyping[Ee]||T.dynamicTyping)===!0))(ue)?de==="true"||de==="TRUE"||de!=="false"&&de!=="FALSE"&&((Ee=>{if(G.test(Ee)&&(Ee=parseFloat(Ee),z<Ee&&Ee<D))return 1})(de)?parseFloat(de):re.test(de)?new Date(de):de===""?null:de):de)(Ue=T.header?Ne>=U.length?"__parsed_extra":U[Ne]:Ue,Xe=T.transform?T.transform(Xe,Ue):Xe);Ue==="__parsed_extra"?(Oe[Ue]=Oe[Ue]||[],Oe[Ue].push(Xe)):Oe[Ue]=Xe}return T.header&&(Ne>U.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+U.length+" fields but parsed "+Ne,J+Pe):Ne<U.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+U.length+" fields but parsed "+Ne,J+Pe)),Oe}var ae;H&&(T.header||T.dynamicTyping||T.transform)&&(ae=1,!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(ee),ae=H.data.length):H.data=ee(H.data,0),T.header&&H.meta&&(H.meta.fields=U),J+=ae)}function W(){return T.header&&U.length===0}function X(Q,ee,ae,ge){Q={type:Q,code:ee,message:ae},ge!==void 0&&(Q.row=ge),H.errors.push(Q)}P(T.step)&&(N=T.step,T.step=function(Q){H=Q,W()?te():(te(),H.data.length!==0&&(ie+=Q.data.length,T.preview&&ie>T.preview?A.abort():(H.data=H.data[0],N(H,Z))))}),this.parse=function(Q,ee,ae){var ge=T.quoteChar||'"',ge=(T.newline||(T.newline=this.guessLineEndings(Q,ge)),x=!1,T.delimiter?P(T.delimiter)&&(T.delimiter=T.delimiter(Q),H.meta.delimiter=T.delimiter):((ge=((Se,Pe,Oe,Ne,Ue)=>{var Xe,ue,de,Ee;Ue=Ue||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var Ae=0;Ae<Ue.length;Ae++){for(var ve,$e=Ue[Ae],De=0,ze=0,Ge=0,tt=(de=void 0,new _({comments:Ne,delimiter:$e,newline:Pe,preview:10}).parse(Se)),rt=0;rt<tt.data.length;rt++)Oe&&ne(tt.data[rt])?Ge++:(ve=tt.data[rt].length,ze+=ve,de===void 0?de=ve:0<ve&&(De+=Math.abs(ve-de),de=ve));0<tt.data.length&&(ze/=tt.data.length-Ge),(ue===void 0||De<=ue)&&(Ee===void 0||Ee<ze)&&1.99<ze&&(ue=De,Xe=$e,Ee=ze)}return{successful:!!(T.delimiter=Xe),bestDelimiter:Xe}})(Q,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=ge.bestDelimiter:(x=!0,T.delimiter=f.DefaultDelimiter),H.meta.delimiter=T.delimiter),L(T));return T.preview&&T.header&&ge.preview++,b=Q,A=new _(ge),H=A.parse(b,ee,ae),te(),$?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,A.abort(),b=P(T.chunk)?"":b.substring(A.getCharIndex())},this.resume=function(){Z.streamer._halted?($=!1,Z.streamer.parseChunk(b,!0)):setTimeout(Z.resume,3)},this.aborted=function(){return F},this.abort=function(){F=!0,A.abort(),H.meta.aborted=!0,P(T.complete)&&T.complete(H),b=""},this.guessLineEndings=function(Se,ge){Se=Se.substring(0,1048576);var ge=new RegExp(E(ge)+"([^]*?)"+E(ge),"gm"),ae=(Se=Se.replace(ge,"")).split("\r"),ge=Se.split(`
`),Se=1<ge.length&&ge[0].length<ae[0].length;if(ae.length===1||Se)return`
`;for(var Pe=0,Oe=0;Oe<ae.length;Oe++)ae[Oe][0]===`
`&&Pe++;return Pe>=ae.length/2?`\r
`:"\r"}}function E(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(T){var b=(T=T||{}).delimiter,A=T.newline,x=T.comments,N=T.step,D=T.preview,z=T.fastMode,G=null,re=!1,Z=T.quoteChar==null?'"':T.quoteChar,ie=Z;if(T.escapeChar!==void 0&&(ie=T.escapeChar),(typeof b!="string"||-1<f.BAD_DELIMITERS.indexOf(b))&&(b=","),x===b)throw new Error("Comment character same as delimiter");x===!0?x="#":(typeof x!="string"||-1<f.BAD_DELIMITERS.indexOf(x))&&(x=!1),A!==`
`&&A!=="\r"&&A!==`\r
`&&(A=`
`);var J=0,$=!1;this.parse=function(F,U,H){if(typeof F!="string")throw new Error("Input must be a string");var ne=F.length,te=b.length,W=A.length,X=x.length,Q=P(N),ee=[],ae=[],ge=[],Se=J=0;if(!F)return De();if(z||z!==!1&&F.indexOf(Z)===-1){for(var Pe=F.split(A),Oe=0;Oe<Pe.length;Oe++){if(ge=Pe[Oe],J+=ge.length,Oe!==Pe.length-1)J+=A.length;else if(H)return De();if(!x||ge.substring(0,X)!==x){if(Q){if(ee=[],Ee(ge.split(b)),ze(),$)return De()}else Ee(ge.split(b));if(D&&D<=Oe)return ee=ee.slice(0,D),De(!0)}}return De()}for(var Ne=F.indexOf(b,J),Ue=F.indexOf(A,J),Xe=new RegExp(E(ie)+E(Z),"g"),ue=F.indexOf(Z,J);;)if(F[J]===Z)for(ue=J,J++;;){if((ue=F.indexOf(Z,ue+1))===-1)return H||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ee.length,index:J}),ve();if(ue===ne-1)return ve(F.substring(J,ue).replace(Xe,Z));if(Z===ie&&F[ue+1]===ie)ue++;else if(Z===ie||ue===0||F[ue-1]!==ie){Ne!==-1&&Ne<ue+1&&(Ne=F.indexOf(b,ue+1));var de=Ae((Ue=Ue!==-1&&Ue<ue+1?F.indexOf(A,ue+1):Ue)===-1?Ne:Math.min(Ne,Ue));if(F.substr(ue+1+de,te)===b){ge.push(F.substring(J,ue).replace(Xe,Z)),F[J=ue+1+de+te]!==Z&&(ue=F.indexOf(Z,J)),Ne=F.indexOf(b,J),Ue=F.indexOf(A,J);break}if(de=Ae(Ue),F.substring(ue+1+de,ue+1+de+W)===A){if(ge.push(F.substring(J,ue).replace(Xe,Z)),$e(ue+1+de+W),Ne=F.indexOf(b,J),ue=F.indexOf(Z,J),Q&&(ze(),$))return De();if(D&&ee.length>=D)return De(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ee.length,index:J}),ue++}}else if(x&&ge.length===0&&F.substring(J,J+X)===x){if(Ue===-1)return De();J=Ue+W,Ue=F.indexOf(A,J),Ne=F.indexOf(b,J)}else if(Ne!==-1&&(Ne<Ue||Ue===-1))ge.push(F.substring(J,Ne)),J=Ne+te,Ne=F.indexOf(b,J);else{if(Ue===-1)break;if(ge.push(F.substring(J,Ue)),$e(Ue+W),Q&&(ze(),$))return De();if(D&&ee.length>=D)return De(!0)}return ve();function Ee(Ge){ee.push(Ge),Se=J}function Ae(Ge){var tt=0;return tt=Ge!==-1&&(Ge=F.substring(ue+1,Ge))&&Ge.trim()===""?Ge.length:tt}function ve(Ge){return H||(Ge===void 0&&(Ge=F.substring(J)),ge.push(Ge),J=ne,Ee(ge),Q&&ze()),De()}function $e(Ge){J=Ge,Ee(ge),ge=[],Ue=F.indexOf(A,J)}function De(Ge){if(T.header&&!U&&ee.length&&!re){var tt=ee[0],rt=Object.create(null),$n=new Set(tt);let yt=!1;for(let Rt=0;Rt<tt.length;Rt++){let Zt=tt[Rt];if(rt[Zt=P(T.transformHeader)?T.transformHeader(Zt,Rt):Zt]){let Pr,ts=rt[Zt];for(;Pr=Zt+"_"+ts,ts++,$n.has(Pr););$n.add(Pr),tt[Rt]=Pr,rt[Zt]++,yt=!0,(G=G===null?{}:G)[Pr]=Zt}else rt[Zt]=1,tt[Rt]=Zt;$n.add(Zt)}yt&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:ee,errors:ae,meta:{delimiter:b,linebreak:A,aborted:$,truncated:!!Ge,cursor:Se+(U||0),renamedHeaders:G}}}function ze(){N(De()),ee=[],ae=[]}},this.abort=function(){$=!0},this.getCharIndex=function(){return J}}function w(T){var b=T.data,A=c[b.workerId],x=!1;if(b.error)A.userError(b.error,b.file);else if(b.results&&b.results.data){var N={abort:function(){x=!0,O(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(P(A.userStep)){for(var D=0;D<b.results.data.length&&(A.userStep({data:b.results.data[D],errors:b.results.errors,meta:b.results.meta},N),!x);D++);delete b.results}else P(A.userChunk)&&(A.userChunk(b.results,N,b.file),delete b.results)}b.finished&&!x&&O(b.workerId,b.results)}function O(T,b){var A=c[T];P(A.userComplete)&&A.userComplete(b),A.terminate(),delete c[T]}function I(){throw new Error("Not implemented.")}function L(T){if(typeof T!="object"||T===null)return T;var b,A=Array.isArray(T)?[]:{};for(b in T)A[b]=L(T[b]);return A}function V(T,b){return function(){T.apply(b,arguments)}}function P(T){return typeof T=="function"}return f.parse=function(T,b){var A=(b=b||{}).dynamicTyping||!1;if(P(A)&&(b.dynamicTypingFunction=A,A={}),b.dynamicTyping=A,b.transform=!!P(b.transform)&&b.transform,!b.worker||!f.WORKERS_SUPPORTED)return A=null,f.NODE_STREAM_INPUT,typeof T=="string"?(T=(x=>x.charCodeAt(0)!==65279?x:x.slice(1))(T),A=new(b.download?m:g)(b)):T.readable===!0&&P(T.read)&&P(T.on)?A=new C(b):(r.File&&T instanceof File||T instanceof Object)&&(A=new d(b)),A.stream(T);(A=(()=>{var x;return!!f.WORKERS_SUPPORTED&&(x=(()=>{var N=r.URL||r.webkitURL||null,D=t.toString();return f.BLOB_URL||(f.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(x=new r.Worker(x)).onmessage=w,x.id=h++,c[x.id]=x)})()).userStep=b.step,A.userChunk=b.chunk,A.userComplete=b.complete,A.userError=b.error,b.step=P(b.step),b.chunk=P(b.chunk),b.complete=P(b.complete),b.error=P(b.error),delete b.worker,A.postMessage({input:T,config:b,workerId:A.id})},f.unparse=function(T,b){var A=!1,x=!0,N=",",D=`\r
`,z='"',G=z+z,re=!1,Z=null,ie=!1,J=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||f.BAD_DELIMITERS.filter(function(U){return b.delimiter.indexOf(U)!==-1}).length||(N=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(A=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(re=b.skipEmptyLines),typeof b.newline=="string"&&(D=b.newline),typeof b.quoteChar=="string"&&(z=b.quoteChar),typeof b.header=="boolean"&&(x=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");Z=b.columns}b.escapeChar!==void 0&&(G=b.escapeChar+z),b.escapeFormulae instanceof RegExp?ie=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(ie=/^[=+\-@\t\r].*$/)}})(),new RegExp(E(z),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return $(null,T,re);if(typeof T[0]=="object")return $(Z||Object.keys(T[0]),T,re)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||Z),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),$(T.fields||[],T.data||[],re);throw new Error("Unable to serialize unrecognized input");function $(U,H,ne){var te="",W=(typeof U=="string"&&(U=JSON.parse(U)),typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(U)&&0<U.length),X=!Array.isArray(H[0]);if(W&&x){for(var Q=0;Q<U.length;Q++)0<Q&&(te+=N),te+=F(U[Q],Q);0<H.length&&(te+=D)}for(var ee=0;ee<H.length;ee++){var ae=(W?U:H[ee]).length,ge=!1,Se=W?Object.keys(H[ee]).length===0:H[ee].length===0;if(ne&&!W&&(ge=ne==="greedy"?H[ee].join("").trim()==="":H[ee].length===1&&H[ee][0].length===0),ne==="greedy"&&W){for(var Pe=[],Oe=0;Oe<ae;Oe++){var Ne=X?U[Oe]:Oe;Pe.push(H[ee][Ne])}ge=Pe.join("").trim()===""}if(!ge){for(var Ue=0;Ue<ae;Ue++){0<Ue&&!Se&&(te+=N);var Xe=W&&X?U[Ue]:Ue;te+=F(H[ee][Xe],Ue)}ee<H.length-1&&(!ne||0<ae&&!Se)&&(te+=D)}}return te}function F(U,H){var ne,te;return U==null?"":U.constructor===Date?JSON.stringify(U).slice(1,25):(te=!1,ie&&typeof U=="string"&&ie.test(U)&&(U="'"+U,te=!0),ne=U.toString().replace(J,G),(te=te||A===!0||typeof A=="function"&&A(U,H)||Array.isArray(A)&&A[H]||((W,X)=>{for(var Q=0;Q<X.length;Q++)if(-1<W.indexOf(X[Q]))return!0;return!1})(ne,f.BAD_DELIMITERS)||-1<ne.indexOf(N)||ne.charAt(0)===" "||ne.charAt(ne.length-1)===" ")?z+ne+z:ne)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!o&&!!r.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=_,f.ParserHandle=S,f.NetworkStreamer=m,f.FileStreamer=d,f.StringStreamer=g,f.ReadableStreamStreamer=C,r.jQuery&&((i=r.jQuery).fn.parse=function(T){var b=T.config||{},A=[];return this.each(function(D){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)A.push({file:this.files[z],inputElem:this,instanceConfig:i.extend({},b)})}),x(),this;function x(){if(A.length===0)P(T.complete)&&T.complete();else{var D,z,G,re,Z=A[0];if(P(T.before)){var ie=T.before(Z.file,Z.inputElem);if(typeof ie=="object"){if(ie.action==="abort")return D="AbortError",z=Z.file,G=Z.inputElem,re=ie.reason,void(P(T.error)&&T.error({name:D},z,G,re));if(ie.action==="skip")return void N();typeof ie.config=="object"&&(Z.instanceConfig=i.extend(Z.instanceConfig,ie.config))}else if(ie==="skip")return void N()}var J=Z.instanceConfig.complete;Z.instanceConfig.complete=function($){P(J)&&J($,Z.file,Z.inputElem),N()},f.parse(Z.file,Z.instanceConfig)}}function N(){A.splice(0,1),x()}}),l&&(r.onmessage=function(T){T=T.data,f.WORKER_ID===void 0&&T&&(f.WORKER_ID=T.workerId),typeof T.input=="string"?r.postMessage({workerId:f.WORKER_ID,results:f.parse(T.input,T.config),finished:!0}):(r.File&&T.input instanceof File||T.input instanceof Object)&&(T=f.parse(T.input,T.config))&&r.postMessage({workerId:f.WORKER_ID,results:T,finished:!0})}),(m.prototype=Object.create(y.prototype)).constructor=m,(d.prototype=Object.create(y.prototype)).constructor=d,(g.prototype=Object.create(g.prototype)).constructor=g,(C.prototype=Object.create(y.prototype)).constructor=C,f})}(Hh)),Hh.exports}$5();class K5 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit client-div",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),r=[];if(e)for(let o of e){let l=t.filter(c=>c.getJson().tags.includes(o));r=[...r,...l]}else r=[...t];this.dispatch({selectedContacts:r})}getInnerContent(){var r;let e=this.propsState.selectedContacts,t=this.propsState.componentList.getList("contact");return(e==null?void 0:e.length)>0,t!=null&&t.length&&""+(t==null?void 0:t.length),k.jsxs("div",{className:"map-container",children:[k.jsxs("div",{className:"Clients-name",children:[k.jsx("div",{children:"Clients"})," ",k.jsx(mr,{formClass:"dark-green-button",content:" Add Client",popupSwitch:"addContact"})]}),k.jsx("div",{className:"search-container",children:k.jsxs("div",{className:"search-bar",children:[k.jsx("i",{className:"fas fa-search search-icon"}),k.jsx("input",{onChange:i=>{this.dispatch({tags:i.target.value})},className:"search-input",placeholder:"Search"})]})}),k.jsxs("div",{children:[" ",k.jsx(bn,{filterFunc:i=>{if(!this.propsState.tags)return!0;let o=this.propsState.tags.split(",");for(let l of o)if(l!==""&&i.getJson().tags.includes(l))return!0;return!1},name:"contact",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:H5}],hasLink:!0})," "]}),((r=this.propsState.selectedContacts)==null?void 0:r.length)>0&&k.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[k.jsx("button",{className:"floating-select-btn",children:k.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),k.jsx("button",{onClick:()=>{for(let i of this.propsState.selectedContacts)i.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:k.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),k.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:k.jsx(mr,{formclassName:"FCImgButton",content:k.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class G5 extends lt{constructor(e){super(e)}formatTime24to12(e){if(!e)return"";const[t,r]=e.split(":");let i=parseInt(t,10);const o=r.padStart(2,"0"),l=i>=12?"PM":"AM";return i=i%12===0?12:i%12,`${i}:${o} ${l}`}render(){var i;const{obj:e}=this.props,t=e.getJson()||{},r=this.formatTime24to12(t.startTime);return k.jsx("div",{className:"appointment",style:{position:"relative"},children:k.jsx("div",{className:"row row-space-between",children:k.jsxs("div",{className:"appointment-left",children:[k.jsx("div",{style:{position:"absolute",right:"7px",top:"0px"},children:k.jsx(ll,{formClass:"none",content:"x",obj:e})}),k.jsx(mr,{formClass:"none",content:k.jsxs("div",{children:[k.jsx("div",{className:"appointment-right",children:k.jsx("div",{className:"appointment-date",children:t.day})}),k.jsx("div",{className:"row row-left padding-0 appointment-time",style:{fontSize:"12px"},children:r})]}),popupSwitch:"updateCalendarEvent",obj:e}),k.jsx(cn,{to:`../session/${(i=this.componentList.getComponent("session",t._id,"eventId"))==null?void 0:i.getJson()._id}`,className:"row row-left padding-0",children:"View Notes"})]})})})}}class J5 extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props,t=e.getJson()||{};return k.jsx("div",{className:"appointment",children:k.jsx("div",{className:"row row-space-between",children:k.jsxs("div",{className:"appointment-left",children:[k.jsx(ll,{content:"x",obj:e}),k.jsx(mr,{content:t==null?void 0:t.name,popupSwitch:"updateGoal",obj:e})]})})})}}class NA extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props,t=e.getJson()||{};return k.jsx("div",{className:"appointment",children:k.jsx("div",{className:"row row-space-between",children:k.jsxs("div",{className:"appointment-left",children:[k.jsx(ll,{content:"x",obj:e}),k.jsx(mr,{content:t==null?void 0:t.name,popupSwitch:"updateHomework",obj:e})]})})})}}class Q5 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var i,o,l,c,h,f,y,m;let e=window.innerWidth>600;(i=this.propsState.popupSwitch)!=null&&i.includes("addContact")&&(e=!1),e?this.propsState.currentContact:this.props.obj;const t=e?this.propsState.currentContact:this.propsState.currentPopupComponent,r=!e;return this.props.callbackFunc,((o=this.propsState.popupSwitch)!=null&&o.includes("updateContact")||window.innerWidth>600&&!((l=this.propsState.popupSwitch)!=null&&l.includes("addContact")))&&this.props.callbackFunc,k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsx("div",{children:k.jsxs("div",{className:"div client-profile-dash",children:[k.jsxs("div",{className:"row client-profile",children:[k.jsx("div",{className:"client-avatar",children:k.jsx("i",{className:"fa-solid fa-user"})}),k.jsxs("div",{className:"client-info",children:[k.jsxs("div",{className:"client-name",children:[(c=this.propsState.currentContact)==null?void 0:c.getJson().firstName," ",(f=(h=this.propsState)==null?void 0:h.currentContact)==null?void 0:f.getJson().lastName]}),k.jsx(mr,{obj:this.propsState.currentContact,content:k.jsx("div",{className:"client-desc",children:"Edit Profile"}),popupSwitch:"updateContact"})]})]}),k.jsxs("div",{className:"row row-left padding-0 client-contact-div",style:{position:"relative"},children:[k.jsxs("div",{className:"client-contact col col-left padding-0",children:[k.jsxs("div",{className:"client-contact-phone row",children:[k.jsx("div",{children:k.jsx("i",{className:"fa-solid fa-phone"})}),k.jsx("div",{children:(y=this.propsState.currentContact)==null?void 0:y.getJson().phone})]}),k.jsxs("div",{className:"client-contact-email row",children:[k.jsx("div",{children:k.jsx("i",{className:"fa-solid fa-envelope"})}),k.jsx("div",{children:(m=this.propsState.currentContact)==null?void 0:m.getJson().email})]})]}),k.jsx("div",{style:{position:"absolute",right:"0px",bottom:"0px"},children:k.jsx(ll,{content:"delete",obj:this.propsState.currentContact,callbackFunc:()=>{this.dispatch({currentContact:void 0})}})})]})]})}),k.jsxs("div",{className:"row row-align-start",children:[k.jsxs("div",{className:"col client-appointments",children:[k.jsx("div",{className:"appointment-title",children:"Appointment History"}),k.jsx(mr,{wrapperStyle:{width:"200px"},formClass:"dark-green-button",content:"+ Appointment",popupSwitch:"addCalendarEvent",obj:{type:"calendarEvent",contactId:this.propsState.currentContact.getJson()._id,name:this.propsState.currentContact.getJson().firstName+" "+this.propsState.currentContact.getJson().lastName}}),k.jsxs("div",{className:"row appointment-upcoming",children:[k.jsx("svg",{viewBox:"0 0 100 10",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("line",{x1:"0",y1:"5",x2:"100",y2:"5",stroke:"currentColor","stroke-width":"1"})}),k.jsx("div",{className:"appointment-upcoming-text",children:"Appointments"}),k.jsx("svg",{viewBox:"0 0 100 10",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("line",{x1:"0",y1:"5",x2:"100",y2:"5",stroke:"currentColor","stroke-width":"1"})})]}),k.jsx(bn,{name:"calendarEvent",cells:[{type:"custom",custom:G5}],filter:{search:this.propsState.currentContact.getJson()._id,attribute:"contactId"}})]}),k.jsxs("div",{className:"col client-second-col",children:[k.jsx(mr,{wrapperStyle:{width:"200px"},formClass:"dark-green-button",content:"addHomework",obj:{type:"homework",contactId:this.propsState.currentContact.getJson()._id},popupSwitch:"addHomework"}),k.jsx(mr,{wrapperStyle:{width:"200px"},formClass:"dark-green-button",content:"addGoal",obj:{type:"goal",contactId:this.propsState.currentContact.getJson()._id},popupSwitch:"addGoal"}),k.jsx(bn,{name:"homework",cells:[{type:"custom",custom:NA}],filter:{search:this.propsState.currentContact.getJson()._id,attribute:"contactId"}}),k.jsx(bn,{name:"goal",cells:[{type:"custom",custom:J5}],filter:{search:this.propsState.currentContact.getJson()._id,attribute:"contactId"}}),k.jsxs("div",{className:"row client-modules",children:[k.jsx("div",{className:"col",children:"Billing History"}),k.jsx("div",{className:"col"}),k.jsx("div",{className:"col"})]}),k.jsx("div",{className:"row client-form-responses",children:k.jsx("div",{className:"client-form-responses-cell"})})]})]})]})}}class Y5 extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit client-dash-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return k.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(K5,{})}),this.propsState.currentContact&&k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(Q5,{})})]})}}class X5 extends lt{getTimeStampStr(){var t,r;let e;try{e=(r=(t=this.props.obj)==null?void 0:t.getJson())==null?void 0:r.timeStamp}catch(i){return console.error("Error accessing timestamp property:",i),"Invalid Date"}if(e&&e instanceof Xt)try{return e.toDate().toLocaleDateString()}catch(i){return console.error("Error converting Firebase Timestamp to Date:",i),"Invalid Date"}else return e?(console.warn("Received timeValue is not a Firebase Timestamp:",e),String(e)):""}render(){return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"message-header",children:[k.jsx("span",{className:"sender",children:this.props.obj.getJson().senderName}),k.jsx("span",{className:"date",children:this.getTimeStampStr()})]}),k.jsx("div",{className:"snippet",children:this.props.obj.getJson().recentMessage})]})}}class Z5 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit messages-container"}}searchFilter(){}getInnerContent(){return k.jsx(bn,{name:"conversation",mapContainerClass:"message-list-scai",mapSectionClass:"message-item-scai",cells:[{type:"customBuilt",custom:k.jsx("div",{className:"chat-avatar",children:k.jsx("i",{className:"fa-solid fa-user"})}),wrapperStyle:{width:"50px"},itemStyle:{width:"50px"}},{type:"custom",custom:X5,itemClick:e=>{this.dispatch({currentConversation:e,showConversation:window.innerWidth<600?!0:void 0}),e.setCompState({seen:!0})}}],filterFunc:e=>{var o,l;let t=!1;this.propsState.searchText||(t=!0);let r=this.propsState.searchText;(o=e.getJson().senderName)!=null&&o.toLowerCase().includes(r==null?void 0:r.toLowerCase())&&(t=!0);let i=this.componentList.getList("email",e.getJson()._id,"conversationId");for(let c of i)(l=c.getJson().body)!=null&&l.toLowerCase().includes(r==null?void 0:r.toLowerCase())&&(t=!0);return t}})}render(){return k.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[k.jsx("div",{className:"header",children:"Messages"}),k.jsx("div",{className:"search-container",children:k.jsxs("div",{className:"search-bar",children:[k.jsx("i",{className:"fas fa-search search-icon"}),k.jsx("input",{type:"text",placeholder:"Search messages...",onChange:e=>{this.dispatch({searchText:e.target.value})},className:"search-input"})]})}),this.getInnerContent()]})}}class e6 extends lt{render(){let e=this.props.obj.getJson().ownerMessage?"outgoing":"incoming";return k.jsxs("div",{children:[k.jsx("div",{className:"date-divider",children:k.jsx("span",{className:"timestamp",children:this.props.obj.getJson().timeStamp})}),k.jsx("div",{className:"message-item "+e,children:k.jsx("div",{className:"message "+e,children:this.props.obj.getJson().body})})]})}}class t6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",currentConversation:null}}async componentDidMount(){await this.prepareMessages()}async prepareMessages(){let e=this.propsState.currentConversation;e||(e=this.componentList.getComponent("conversation"),await this.dispatch({currentConversation:e})),e?(await this.prepNewMessage(),this.setState({start:!0})):this.setState({message:"no current conversations"})}async prepNewMessage(){let e=this.propsState.currentConversation;const t=e.getJson().messageType||"email";let r=this.componentList.getList("email",this.propsState.currentConversation.getJson()._id,"conversationId");r=r[r.length-1];let i=r.getJson().originalMessageId,o=r.getJson().subject;const l=await this.operationsFactory.prepare({prepare:{type:t,conversationId:e.getJson()._id,originalMessageId:i,subject:o,ownerMessage:!0}});this.dispatch({currentComponent:l[0]})}getInnerContent(){const{currentConversation:e}=this.propsState;return k.jsxs("div",{className:"layoutColumn fit conversation-container",children:[window.innerWidth<600&&k.jsx("div",{className:"dark-button-1",onClick:()=>{this.dispatch({showConversation:void 0})},children:"< Back"}),this.state.message?k.jsx(k.Fragment,{children:this.state.message}):k.jsx(k.Fragment,{children:this.state.start&&k.jsxs("div",{style:{width:"100%"},children:[k.jsx(bn,{mapContainerClass:"message-list",name:(e==null?void 0:e.getJson().messageType)||"email",cells:[{type:"custom",custom:e6}],filter:{search:this.propsState.currentConversation.getJson()._id,attribute:"conversationId"}}),k.jsx(At,{wrapperClass:"search-bar",formClass:"search-input",name:"body",obj:this.propsState.currentComponent}),k.jsx(Xs,{content:k.jsx("div",{className:"chat-footer",children:k.jsx("input",{type:"text",className:"footer-input",placeholder:"Start typing..."})}),callbackFunc:()=>{let t=this.propsState.currentComponent;this.prepNewMessage();let r={originalMessageId:t.getJson().originalMessageId,from:t.getJson().owner,to:this.propsState.currentConversation.getJson().recipient,subject:t.getJson().subject,text:t.getJson().body};fetch("https://sendgridreplythread-7c5i3vsqma-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(i=>{if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);return i.json()}).then(i=>{console.log("Reply sent successfully in thread.",i)}).catch(i=>{console.error("Error sending reply:",i)})}})]})})]})}render(){var e,t;return k.jsxs("div",{className:this.props.pageClass||this.state.defaultClass,children:[k.jsxs("div",{className:"chat-header",children:[k.jsx("div",{className:"header-avatar",children:k.jsx("i",{className:"fa-solid fa-user"})}),k.jsxs("div",{className:"header-info",children:[k.jsx("div",{className:"header-name",children:(t=(e=this.propsState)==null?void 0:e.currentConversation)==null?void 0:t.getJson().senderName}),k.jsx("div",{className:"header-status",children:"View Profile"})]})]}),this.getInnerContent()]})}}class n6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}async componentDidMount(){await this.componentList.getComponentsFromBackend({type:"conversation",ids:this.propsState.currentUser.getJson()._id,filterKeys:"owner"}),this.setState({start:!0})}getInnerContent(){return k.jsxs("div",{className:"layoutRow",style:{width:"100%",height:"100%"},children:[k.jsx("div",{className:"messages-list-container",children:!this.propsState.showConversation&&k.jsx(k.Fragment,{children:this.state.start&&k.jsx(vn,{theme:"defaultCard",content:k.jsx(Z5,{})})})}),k.jsx("div",{className:"message-detail-container",children:(window.innerWidth>600||this.propsState.showConversation!==void 0)&&k.jsx(k.Fragment,{children:this.state.start&&k.jsx(vn,{theme:"defaultCard",content:k.jsx(t6,{})})})})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class wy extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.dispatch({currentTopic:void 0,currentSubTopic:void 0,currentComponent:void 0}),this.getComponentsFromBackend()}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:k.jsx("div",{className:"fit",children:this.state.getComponentsFromBackend&&k.jsx(vn,{theme:"defaultCard",content:k.jsx(n6,{})})})})}}class r6 extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return k.jsxs("div",{className:"sequence",children:[k.jsxs("div",{className:"title",children:[k.jsx(cn,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.name}),k.jsx(cn,{to:"/sequence/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]}),k.jsxs("div",{className:"del-icon",children:[k.jsx("i",{className:"fa-solid fa-xmark"}),k.jsx(ll,{obj:e})]})]})}}class i6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return k.jsxs("div",{className:"fit",children:[k.jsx("h4",{style:{marginBottom:"10px"},children:"Sequences"}),k.jsx(bn,{name:"sequence",cells:[{type:"custom",custom:r6}]})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class s6 extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return k.jsx("div",{className:"sequence",children:k.jsxs("div",{className:"title",children:[k.jsx(cn,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-left",children:t.content}),k.jsx(cn,{to:"/template/"+t._id,onClick:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})},className:"title-right",children:"View Details"})]})})}}class o6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return k.jsxs(k.Fragment,{children:[k.jsx("h4",{style:{marginBottom:"10px"},children:"Templates"}),k.jsx(bn,{name:"template",cells:[{type:"custom",custom:s6}]})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class a6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return k.jsxs("div",{className:"map-container",children:[k.jsxs("div",{className:"top-nav-float",children:[k.jsx("nav",{className:"top-nav",children:k.jsxs("div",{className:"nav-left",children:[k.jsx("div",{className:"nav-icon",children:k.jsx("i",{className:"fas fa-circle"})}),k.jsx("div",{className:"title-name",children:"Content"})]})}),k.jsx("div",{className:"search-container",children:k.jsxs("div",{className:"search-bar",children:[k.jsx("i",{className:"fas fa-search search-icon"}),k.jsx("input",{onChange:e=>{this.dispatch({tags:e.target.value})},className:"search-input",placeholder:"Search"})]})}),k.jsx("div",{className:"filter",children:k.jsxs("div",{className:"row row-space-between",children:[k.jsx(cn,{to:"/sequence",className:"btn-gray",children:"New Sequence"}),k.jsx(cn,{to:"/template",className:"btn-gray",children:"New Template"}),k.jsx("div",{className:"btn-gray",children:"New AI"})]})})]}),k.jsx("div",{children:k.jsx(vn,{theme:"defaultCard",content:k.jsx(i6,{})})}),k.jsx("div",{children:k.jsx(vn,{theme:"defaultCard",content:k.jsx(o6,{})})})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class l6 extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.propsState.currentUser.getJson()._id}}async componentDidMount(){this.getComponentsFromBackend()}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.state.gotComponents&&k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(a6,{})})})}}class vC extends S5{async componentDidMount(){await this.getComponentsFromBackend();const e=this.urlId;if(!e||e==="template"){const t=await this.operationsFactory.prepare({prepare:{type:"template"},clean:!0});this.dispatch({currentComponent:t[0]})}}getInnerContent(){return k.jsxs("div",{className:"fit",children:[k.jsx("h1",{children:"Template Details"}),k.jsx("div",{className:"input-container",children:k.jsx("div",{className:"input-bar",children:this.propsState.currentComponent&&k.jsx(At,{type:"quill",name:"content",obj:this.propsState.currentComponent})})}),k.jsx(Xs,{content:"Save Template"})]})}render(){return k.jsx("div",{className:this.props.pageClass||"fit",children:this.state.gotComponents&&this.getInnerContent()})}}class u6 extends lt{constructor(e){super(e)}render(){const{obj:e}=this.props;let t=e.getJson();return k.jsx("div",{className:"sequence",children:k.jsx("div",{onClick:()=>{debugger;let r=this.props.obj,i=this.propsState.selectedContacts,o=this.componentList.getList("step",[r.getJson()._id],["sequenceId"]);if(o=o.filter(l=>l.getJson().content!==""&&l.getJson().content)[0],(i==null?void 0:i.length)>0){debugger;let l=parseFloat(o.getJson().nextSend),c=new Date(Date.now()+l*60*60*1e3);c=Xt.fromDate(c);for(let h of i)h.setCompState({sequenceId:r.getJson()._id,finished:!1,emailNumber:0,nextSend:c},{run:!0});this.dispatch({popupSwitch:"",selectedContacts:[]})}},className:"title",children:k.jsx("div",{className:"title-left",children:t.name})})})}}class c6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){var e;return k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"65%"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsx("h2",{children:"Add to Sequence"})," ","contacts: ",((e=this.propsState.selectedContacts)==null?void 0:e.length)||"0",k.jsx(bn,{name:"sequence",cells:[{type:"custom",custom:u6}]})]})}}let h6=[{type:"email",body:"Hey John, just wanted to follow up on our conversation yesterday. Do you think the software is a good fit for your team? I'm happy to set up another demo or go over pricing options",conversationId:"123",_id:"email1",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Hey John, just wanted to follow up on our conversation yesterday. Do you think the software is a good fit for your team? I'm happy to set up another demo or go over pricing options",conversationId:"123",_id:"email1",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Can you get me a price estimate that I can bring back to my team?",conversationId:"123",_id:"email2",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"email",body:"Hi Jane, AI can find the contacts you need to reach out to TODAY. Let me know if you can connect today.",conversationId:"1234",_id:"email3",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"Sure I have time arround 3pm tomorrow afternoon",conversationId:"1234",_id:"email4",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"email",body:"Hey Taylor Just let me know if it would be good to meet today or not.",conversationId:"1235",_id:"email5",owner:"alan@salescapture.ai",timeStamp:"Yesterday 10:14 AM",subject:"hi",ownerMessage:!0},{type:"email",body:"No I can't to this week.",conversationId:"1235",_id:"email6",owner:"alan@salescapture.ai",subject:"hi",timeStamp:"Today 9:14 AM",ownerMessage:!1},{type:"conversation",_id:"123",recipient:"taylormdavidson@gmail.com",senderName:"John Doe",timeStamp:"Today 2:15 pm",recentMessage:"Hey, how's it going?",owner:"alan@salescapture.com"},{type:"conversation",_id:"1234",recipient:"taylormdavidson@gmail.com",senderName:"Jane Doe",timeStamp:"Today 2:15 pm",recentMessage:"Hey, how's it going?",owner:"alan@salescapture.com"},{type:"conversation",_id:"1235",recipient:"taylormdavidson@gmail.com",senderName:"Taylor Davidson",timeStamp:"Today 2:15 pm",recentMessage:"Can you get me a price estimate that I can bring back to my team?",owner:"alan@salescapture.com"},{type:"contact",_id:"contact1",mobile:"(365)446-2581",firstName:"Taylor",lastName:"Davidson",name:"Taylor Davidson",email:"taylormdavidson@gmail.com",owner:"alan@salescapture.com "},{type:"potentialProspect",_id:"prospect1",firstName:"Taylor Davidson",email:"taylormdavidson@gmail.com",owner:"alan@salescapture.com ",researchId:"research1"},{type:"research",_id:"research1",name:"research1",owner:"alan@salescapture.com "},{type:"task",name:"my task",dueDate:"April 25, 2025",_id:"task1"},{type:"task",name:"my task",dueDate:"April 25, 2025",_id:"task2"},{_id:1,name:"Jodie Soultfair",dayIndex:0,startTime:"10:00",duration:90,type:"calendarEvent"},{_id:2,name:"Cameron Bates",dayIndex:0,startTime:"11:30",duration:45,type:"calendarEvent"},{_id:3,name:"Tyler Sinclair",dayIndex:3,startTime:"13:00",duration:60,type:"calendarEvent"},{_id:4,name:"Stephanie Moore",dayIndex:5,startTime:"14:30",duration:60,type:"calendarEvent"},{_id:5,name:"Kevin Landry",dayIndex:4,startTime:"17:00",duration:60,type:"calendarEvent"}];class f6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit scroller"}}render(){this.props.obj;let e=k.jsx(Xs,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(e=k.jsx(Yu,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsx("br",{}),k.jsxs("div",{className:"content-home-add",children:[k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Subject:"}),k.jsx(At,{obj:this.propsState.currentPopupComponent,name:"subject",wrapperClass:"underline-form"})]}),k.jsx("div",{className:"row",children:k.jsx(At,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Trigger this step in:"}),k.jsx(At,{obj:this.propsState.currentPopupComponent,name:"nextSend",wrapperClass:"underline-form",wrapperStyle:{width:"10%",marginRight:"8px"}})," days"]}),k.jsxs("div",{className:"row",children:[this.propsState.popupSwitch.includes("update")&&k.jsx(ll,{obj:this.propsState.currentPopupComponent,formClass:"del-button-1",callbackFunc:()=>{this.dispatch({popupSwitch:"",currentPopupComponent:void 0})}}),k.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"},children:k.jsx(o3,{obj:this.propsState.currentPopupComponent,content:k.jsx("div",{style:{display:"flex",alignItems:"center",borderRadius:"50%",justifyContent:"center",fontSize:"19px",width:"37px",height:"37px",background:"#378c75",color:"#ade0d3"},children:k.jsx("div",{className:"icon-last",children:k.jsx("i",{className:"fa-solid fa-plus"})})})})}),k.jsx("div",{className:"col",children:e})]}),k.jsx("div",{})]})]})}}const d6="/assets/viridianLogo-BMzd4uKK.png",p6=()=>{const[n,e]=ye.useState(!1),t=ye.useRef(null),r=l=>{if(l.code){const c=l.code;console.log("Received authorization code:",c),i(c)}else console.error("Authorization failed or denied:",l),alert("Failed to connect Gmail. Please try again.")},i=l=>{fetch("http://localhost:3000/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l})}).then(h=>{if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return h.json()}).then(h=>{console.log("Backend response after token exchange:",h),h.success?(e(!0),alert("Gmail connected successfully!")):alert(`Failed to connect Gmail: ${h.error}`)}).catch(h=>{console.error("Error sending code to backend:",h),alert("Failed to complete connection. Please try again."),e(!1)})};ye.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,document.body.appendChild(l),l.onload=()=>{t.current=google.accounts.oauth2.initCodeClient({client_id:"592520451667-0sphkcuj07fg9scli2p8u78bjs1uk86k.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/gmail.modify",redirect_uri:"http://localhost:3000/google",callback:r}),console.log("Google Identity Services client initialized.")},()=>{document.body.removeChild(l)}},[]);const o=()=>{t.current?t.current.requestCode():(console.error("Google Identity Services client not initialized."),alert("Google services are not ready. Please try again in a moment."))};return k.jsxs("div",{style:{padding:"1.5rem",maxWidth:"24rem",margin:"0 auto",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",gap:"1rem"},children:[k.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",marginBottom:"1rem"},children:"Gmail Integration"}),n?k.jsx("p",{style:{color:"#10b981",textAlign:"center",fontWeight:"semibold",marginBottom:"1rem"},children:"Gmail Connected!"}):k.jsx("button",{onClick:o,disabled:!t.current,style:{width:"100%",backgroundColor:"#3b82f6",color:"#fff",fontWeight:"bold",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem",paddingRight:"1rem",borderRadius:"0.25rem",border:"none",cursor:t.current?"pointer":"not-allowed",opacity:t.current?1:.5,transition:"background-color 0.2s ease-in-out"},children:t.current?"Connect Gmail":"Loading..."}),k.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:"Connect your Gmail account to send emails directly through our platform."})]})};class m6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return k.jsx("div",{className:"mobile-container",children:k.jsx(p6,{})})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{marginLeft:"300px",width:"80%"},children:this.getInnerContent()})}}class g6 extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(m6,{})})})}}class y6 extends IA{getHtml(){return console.log("this.list",this.list),console.log("this.mapList",this.mapList),k.jsxs("div",{className:"bottom-nav",children:[k.jsxs(cn,{to:"/conversation",className:"bottom-nav-item",children:[k.jsx("i",{className:"fa-solid fa-message"}),k.jsx("span",{children:"Messages"})]}),k.jsxs(cn,{to:"/contacts",className:"bottom-nav-item",children:[k.jsx("i",{className:"fa-solid fa-address-book"}),k.jsx("span",{children:"Contacts"})]}),k.jsx("a",{href:"#",className:"bottom-nav-item",children:k.jsx("div",{id:"float-btn-plus",className:"float-btn",children:k.jsx("i",{className:"fas fa-plus"})})}),k.jsxs(cn,{to:"/research",className:"bottom-nav-item",children:[k.jsx("i",{className:"fa-solid fa-graduation-cap"}),k.jsx("span",{children:"Research"})]}),k.jsxs(cn,{to:"/content",className:"bottom-nav-item",children:[k.jsx("i",{className:"fa-solid fa-briefcase"}),k.jsx("span",{children:"Content"})]})]})}}class v6 extends lt{constructor(t){super(t);le(this,"handleCheckContact",t=>{let r=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];r.includes(t)||r.push(t),this.dispatch({selectedContacts:r})});le(this,"handleUncheckContact",t=>{let r=this.props.app.state.selectedContacts?[...this.props.app.state.selectedContacts]:[];r=r.filter(i=>i!==t),this.dispatch({selectedContacts:r})})}render(){var i,o;const{obj:t}=this.props;let r=t.getJson();return k.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[k.jsx("div",{className:"contact-item",children:k.jsxs("div",{className:"contact-info",children:[k.jsx(cn,{to:`../session/${(i=this.componentList.getComponent("session",r._id,"taskId"))==null?void 0:i.getJson()._id}`,className:"contact-name",children:`${r.name}`}),k.jsx("div",{className:"contact-desc",children:r.dueDate})]})}),k.jsx("div",{className:"contact-tag-container active",children:(o=r.tags)==null?void 0:o.split(",").map((l,c)=>{var h;return k.jsx(cn,{to:`../session/${(h=this.componentList.getComponent("session",r._id,"taskId"))==null?void 0:h.getJson()._id}`,className:"contact-tag-btn",children:l},c)})})]})}}class _6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}filterFunc(){var i;let e=((i=this.propsState.tags)==null?void 0:i.split(","))||"",t=this.componentList.getList("contact"),r=[];if(e)for(let o of e){let l=t.filter(c=>c.getJson().tags.includes(o));r=[...r,...l]}else r=[...t];this.dispatch({selectedContacts:r})}getInnerContent(){var e;return k.jsxs("div",{className:"mobile-container",children:[k.jsx("div",{className:"task-name",children:k.jsx("div",{children:"Tasks"})}),k.jsx(bn,{filterFunc:t=>{if(!this.propsState.tags)return!0;let r=this.propsState.tags.split(",");for(let i of r)if(i!==""&&t.getJson().tags.includes(i))return!0;return!1},name:"task",mapContainerclassName:"contact-list",mapSectionclassName:"contact",cells:[{type:"custom",custom:v6}],hasLink:!0}),((e=this.propsState.selectedContacts)==null?void 0:e.length)>0&&k.jsxs("div",{id:"floating-select-set",className:"floating-select-set",children:[k.jsx("button",{className:"floating-select-btn",children:k.jsx("span",{className:"floating-select-btn-text",children:"Export"})}),k.jsx("button",{onClick:()=>{for(let t of this.propsState.selectedContacts)t.del();this.dispatch({selectedContacts:[]})},className:"floating-select-btn",children:k.jsx("span",{className:"floating-select-btn-text",children:"Delete"})}),k.jsx("button",{className:"floating-select-btn floating-select-primary-btn",children:k.jsx(mr,{formclassName:"FCImgButton",content:k.jsx("span",{className:"floating-select-btn-text",children:"Add to Sequence"}),popupSwitch:"addToSequence"})})]})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Ey extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit task-container-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return k.jsx("div",{style:{marginLeft:"250px"},className:this.props.pageClass||this.state.defaultClass,children:k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(_6,{})})})}}const w6=(n,e)=>{const[t,r]=n.split(":").map(Number),l=(t*60+r-10*60)/60*60,c=e/60*60;return{top:`${l}px`,height:`${c}px`}};class E6 extends lt{constructor(e){super(e)}render(){var i;const{obj:e}=this.props;let t=e.getJson();const r=w6(t.startTime,t.duration);return k.jsx("div",{className:"weekly-calendar__event",style:r,children:k.jsx(cn,{to:`../session/${(i=this.componentList.getComponent("session",t._id,"eventId"))==null?void 0:i.getJson()._id}`,className:"weekly-calendar__event-name",children:t.name})},t._id)}}const T6=n=>{const e=n.getDay(),t=n.getDate()-e+(e===0?-6:1);return new Date(n.setDate(t))},C6=n=>{const e=[];for(let t=0;t<7;t++){const r=new Date(n);r.setDate(n.getDate()+t),e.push(r)}return e},S6=n=>{const e=n>=12?"PM":"AM";return`${n%12||12} ${e}`};class I6 extends lt{constructor(t){super(t);le(this,"handlePreviousWeek",()=>{this.setState(t=>{const r=new Date(t.currentWeekStart);return r.setDate(r.getDate()-7),{currentWeekStart:r}})});le(this,"handleNextWeek",()=>{this.setState(t=>{const r=new Date(t.currentWeekStart);return r.setDate(r.getDate()+7),{currentWeekStart:r}})});const i=T6(new Date);this.state={...this.state,defaultClass:"fit",title:"Contacts",currentWeekStart:i,events:[]}}filterFunc(){var o;let t=((o=this.propsState.tags)==null?void 0:o.split(","))||"",r=this.componentList.getList("contact"),i=[];if(t)for(let l of t){let c=r.filter(h=>h.getJson().tags.includes(l));i=[...i,...c]}else i=[...r];this.dispatch({selectedContacts:i})}getInnerContent(){const t=C6(this.state.currentWeekStart),r=Array.from({length:10},(i,o)=>10+o);return k.jsxs("div",{className:"weekly-calendar",children:[k.jsxs("div",{className:"weekly-calendar__header",children:[k.jsx("div",{className:"weekly-calendar__title",children:"Schedule"}),k.jsxs("div",{className:"weekly-calendar__nav",children:[k.jsx("button",{onClick:this.handlePreviousWeek,children:"<"}),k.jsx("button",{onClick:this.handleNextWeek,children:">"})]})]}),k.jsxs("div",{className:"weekly-calendar__grid",children:[k.jsx("div",{className:"weekly-calendar__time-axis",children:r.map(i=>k.jsx("div",{className:"weekly-calendar__time-slot-label",children:S6(i)},i))}),k.jsx("div",{className:"weekly-calendar__days",children:t.map((i,o)=>k.jsxs("div",{className:"weekly-calendar__day",children:[k.jsx("div",{className:"weekly-calendar__day-header",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),k.jsxs("div",{className:"weekly-calendar__events-container",children:[r.slice(0,-1).map((l,c)=>k.jsx("div",{className:"weekly-calendar__hour-line"},`line-${o}-${c}`)),k.jsx(bn,{name:"calendarEvent",filterFunc:l=>{let c=l.getJson();const h=new Date(this.state.currentWeekStart);return h.setDate(h.getDate()+c.dayIndex),h.toDateString()===i.toDateString()},cells:[{type:"custom",custom:E6}]})]})]},i.toISOString()))})]})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class Ty extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit schedule-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(I6,{})})})}}class b6 extends lt{constructor(e){var t,r;super(e),this.state={...this.state,day:(t=this.propsState.currentPopupComponent)==null?void 0:t.getJson().day,time:(r=this.propsState.currentPopupComponent)==null?void 0:r.getJson().startTime,defaultClass:"fit scroller"}}render(){var m,d,g;const e={display:"flex",marginBottom:"20px",alignItems:"center"},t={width:"30%",fontWeight:"600",fontSize:"14px"},r={width:"70%"},i={width:"100%",padding:"8px 12px",fontSize:"14px",border:"1px solid #ccc",borderRadius:"4px",boxSizing:"border-box"};let o=window.innerWidth>600;(m=this.propsState.popupSwitch)!=null&&m.includes("addCalendarEvent")&&(o=!1);let l=this.propsState.currentPopupComponent;const c=o?this.propsState.currentPopupComponent:this.propsState.currentPopupComponent,h=!o;let f=l?"Edit":"Add",y=k.jsx(Xs,{content:"Save",isPopup:h,callbackFunc:async()=>{debugger;let C=await this.operationsFactory.prepare({prepare:{type:"task",contactId:this.propsState.currentContact.getJson()._id,eventId:l.getJson()._id,name:l.getJson().name}});C=C[0],this.operationsFactory.prepare({prepare:{type:"session",contactId:this.propsState.currentContact.getJson()._id,eventId:l.getJson()._id,taskId:C.getJson()._id},run:!0})}});return((d=this.propsState.popupSwitch)!=null&&d.includes("updateCalendarEvent")||window.innerWidth>600&&!((g=this.propsState.popupSwitch)!=null&&g.includes("addCalendarEvent")))&&(y=k.jsx(Yu,{obj:c,content:"Save",isPopup:h,callbackFunc:this.props.callbackFunc})),k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px",height:"100%"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsxs("h2",{children:[f," Appointment"]})," ",k.jsxs("div",{className:"contact-Add-container",children:[k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Name"}),k.jsxs("div",{style:{width:"70%",marginLeft:"7px"},children:[" ",k.jsx(At,{obj:l,name:"name",inPopup:h})," "]})]}),k.jsxs("div",{className:"row",style:e,children:[k.jsx("div",{style:t,children:"Day of Week"}),k.jsx("div",{style:r,children:k.jsxs("select",{value:this.state.day||"",onChange:C=>{debugger;console.log("Day of week changed to",C.target.value);let S=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];this.setState({day:C.target.value});const E=S.findIndex(_=>_===C.target.value);l.setCompState({dayIndex:E,day:C.target.value})},style:i,children:[k.jsx("option",{value:"",children:"Select a day"}),k.jsx("option",{value:"Monday",children:"Monday"}),k.jsx("option",{value:"Tuesday",children:"Tuesday"}),k.jsx("option",{value:"Wednesday",children:"Wednesday"}),k.jsx("option",{value:"Thursday",children:"Thursday"}),k.jsx("option",{value:"Friday",children:"Friday"}),k.jsx("option",{value:"Saturday",children:"Saturday"}),k.jsx("option",{value:"Sunday",children:"Sunday"})]})})]}),k.jsxs("div",{className:"row",style:e,children:[k.jsx("div",{style:t,children:"Time of Day"}),k.jsx("div",{style:r,children:k.jsx("input",{type:"time",value:this.state.time||"",onChange:C=>{this.setState({time:C.target.value}),l.setCompState({startTime:C.target.value})},style:i})})]}),k.jsxs("div",{className:"row",style:e,children:[k.jsx("div",{style:t,children:"Duration"}),k.jsx("div",{style:r,children:k.jsx(At,{name:"duration",obj:l})})]}),k.jsxs("div",{className:"popupButton",style:{width:"50%",display:"flex",justifyContent:"flex-end",alignContent:"flex-end"},children:[" ",k.jsxs("div",{style:{paddingRight:"50px",paddingBottom:"20px"},children:[" ",y]})," "]})]})]})}}class LA extends lt{constructor(e){super(e),this.projectName="Homework",this.state={...this.state,defaultClass:"fit scroller"}}render(){let e=this.props.obj?"Edit":"Add",t=k.jsx(Xs,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return this.propsState.popupSwitch.includes("update")&&(t=k.jsx(Yu,{formClass:"dark-button-1",obj:this.propsState.currentPopupComponent,content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc})),k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsx("br",{}),k.jsxs("div",{className:"content-home-add",children:[k.jsxs("div",{children:[e," ",this.projectName]}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Name: "}),k.jsx(At,{obj:this.propsState.currentPopupComponent,name:"name",wrapperClass:"underline-form"})]}),k.jsx("div",{className:"row",children:k.jsx(At,{type:"quill",obj:this.propsState.currentPopupComponent,name:"content",wrapperClass:"contentWrapper"})}),k.jsxs("div",{className:"row",children:[k.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"}}),k.jsx("div",{className:"col",children:t})]}),k.jsx("div",{})]})]})}}class A6 extends LA{constructor(e){super(e),this.projectName="Goal",this.state={...this.state,defaultClass:"fit scroller"}}}class x6 extends lt{constructor(e){super(e),this.projectName="Homework",this.state={...this.state,defaultClass:"fit scroller"}}getSessionIdFromPath(){const t=window.location.pathname.match(/^\/session\/([^/]+)/);return t?t[1]:null}componentDidMount(){let e=this.getSessionIdFromPath(),t=this.componentList.getComponent("session",e);this.dispatch({currentSession:t})}render(){this.props.obj;let e=k.jsx(Xs,{formClass:"dark-button-1",content:"Save",isPopup:!0,callbackFunc:this.props.callbackFunc});return k.jsxs("div",{style:{padding:"10px",paddingBottom:"100px"},className:this.props.pageClass||this.state.defaultClass,children:[k.jsx("br",{}),this.propsState.currentSession&&k.jsx(k.Fragment,{children:k.jsxs("div",{className:"content-home-add",children:[k.jsx("div",{children:"Session"}),k.jsxs("div",{className:"row",children:[k.jsx("div",{children:"Name: "}),k.jsx(At,{obj:this.propsState.currentSession,name:"name",wrapperClass:"underline-form"})]}),k.jsx("div",{className:"row",children:k.jsx(At,{type:"quill",obj:this.propsState.currentSession,name:"content",wrapperClass:"contentWrapper"})}),k.jsxs("div",{className:"row",children:[k.jsx("div",{className:"col hover-basic",style:{cursor:"pointer",width:"37px",height:"37px"}}),k.jsx("div",{className:"col",children:e})]}),k.jsx("div",{})]})})]})}}class _C extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit task-container-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return k.jsx("div",{style:{marginLeft:"250px"},className:this.props.pageClass||this.state.defaultClass,children:k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(x6,{})})})}}class k6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit",title:"Contacts"}}getInnerContent(){return k.jsxs("div",{className:"mobile-container",children:[k.jsx("div",{className:"task-name",children:k.jsx("div",{children:"Register"})}),k.jsxs("div",{className:"register-input col",children:[k.jsx("input",{className:"vir-input-one-line",type:"text",value:this.state.email,onChange:e=>{let{value:t}=e.target;this.setState({email:t})},placeholder:"Enter Email"}),k.jsx("input",{className:"vir-input-one-line",type:this.state.showPasswords?"text":"password",value:this.state.password,onChange:e=>{let{value:t}=e.target;this.setState({password:t})},placeholder:"Enter password"}),k.jsx("input",{className:"vir-input-one-line",type:this.state.showPasswords?"text":"password",value:this.state.password2,onChange:e=>{let{value:t}=e.target;this.setState({password2:t})},placeholder:"Confirm password"}),k.jsx("div",{className:"vir-forget-pass",children:k.jsxs("label",{children:[k.jsx("input",{type:"checkbox",checked:this.state.showPasswords,onChange:e=>{this.setState({showPasswords:e.target.checked})}}),"Show Passwords"]})}),k.jsx("div",{onClick:async()=>{if(this.state.password!==this.state.password2)this.setState({message:"Please make sure both passwords are the same"});else{debugger;this.setState({message:""});let e=this.state.password,t=this.state.email;await this.componentList.getAPIService().register(t,e);let r=_y.getIdFromURL(),i=await this.componentList.getComponentFromBackend({type:"contact",ids:r,filterKeys:"_id"}),l=(await this.operationsFactory.prepare({prepare:{type:"user",role:"client",firstTime:!0,coachId:i.getJson().owner,email:i.getJson().email,owner:i.getJson().email,_id:i.getJson().email,collection:i.getJson().email}}))[0];this.dispatch({prepUser:l,clientRegisterState:"startQuestions",currentContact:i})}},className:"btn-vir",children:"Submit"})]}),this.state.message&&k.jsx("div",{className:"error-message",children:this.state.message})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class R6 extends lt{constructor(t){super(t);le(this,"handleBegin",()=>{this.dispatch({clientRegisterState:"clientInfo"})});this.state={...this.state,defaultClass:"fit"}}getInnerContent(){return k.jsxs("div",{className:"welcome-container",children:[k.jsx("h1",{className:"welcome-title",children:"Welcome to Viridian Coaching"}),k.jsx("p",{className:"welcome-subtitle",children:"Your coach has a few questions for you"}),k.jsx("button",{className:"begin-button",onClick:this.handleBegin,children:"Begin"})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class P6 extends lt{constructor(t){super(t);le(this,"handleChange",t=>r=>{this.setState({[t]:r.target.value})});le(this,"handleSubmit",()=>{this.propsState.currentContact.setCompState({birth:`${this.state.month}/${this.state.day}/${this.state.year}`},{run:!0}),this.dispatch({clientRegisterState:"aboutYou"})});this.state={...this.state,name:"",phone:"",email:"",day:"",month:"",year:""}}getInnerContent(){let t=this.propsState.currentContact;return k.jsxs("div",{className:"bio-container",children:[k.jsx("h1",{className:"bio-title",children:"Biographical Info"}),k.jsx(At,{obj:t,name:"firstName"}),k.jsx(At,{obj:t,name:"lastName"}),k.jsx("div",{className:"bio-input-icon",children:k.jsx("div",{className:"row",children:k.jsx(At,{obj:t,name:"phone"})})}),k.jsx("div",{className:"bio-input-icon",children:k.jsx("div",{className:"row",children:k.jsx(At,{obj:t,name:"email"})})}),k.jsxs("div",{className:"dob-container",children:[k.jsx("span",{className:"icon",children:k.jsx("i",{className:"fa-solid fa-cake-candles"})}),k.jsxs("select",{className:"dob-select",value:this.state.day,onChange:()=>{this.handleChange("day")},children:[k.jsx("option",{value:"",children:"Day"}),Array.from({length:31},(r,i)=>k.jsx("option",{value:i+1,children:i+1},i+1))]}),k.jsxs("select",{className:"dob-select",value:this.state.month,onChange:this.handleChange("month"),children:[k.jsx("option",{value:"",children:"Month"}),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((r,i)=>k.jsx("option",{value:i+1,children:r},i))]}),k.jsxs("select",{className:"dob-select",value:this.state.year,onChange:this.handleChange("year"),children:[k.jsx("option",{value:"",children:"Year"}),Array.from({length:100},(r,i)=>{const o=new Date().getFullYear()-i;return k.jsx("option",{value:o,children:o},o)})]})]}),k.jsx("button",{className:"submit-button",onClick:this.handleSubmit,children:"Submit"})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class O6 extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"dashboard-container scroller"}}render(){var l,c;const e=(l=this.propsState.currentUser)==null?void 0:l.getJson(),t=this.propsState.currentGoal,r=this.propsState.nextAppointment,i=this.propsState.billingStatus,o=this.propsState.coachProfile;return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,style:{padding:"20px",height:"100%",overflowY:"auto"},children:k.jsxs("div",{className:"row row-left",children:[k.jsxs("div",{className:"col vir-dash-first-col-first-row",children:[k.jsx("div",{className:"row dash-current-row-goal",children:k.jsxs("div",{className:"dashboard-card",children:[k.jsx("div",{className:"card-header",children:"Your Current Goal"}),k.jsx("div",{className:"card-content-vertical-align",children:k.jsxs("div",{className:"card-content",children:[k.jsx("h2",{className:"goal-title highlight-font",children:(t==null?void 0:t.getJson().title)||"No active goal"}),k.jsx(mr,{content:"Mark Complete",obj:t,popupSwitch:"completeGoal"})]})})]})}),k.jsxs("div",{className:"row vir-dash-first-col-second-row",children:[k.jsx("div",{className:"col",children:k.jsxs("div",{className:"dashboard-card",children:[k.jsx("div",{className:"card-header",children:"Next Appointment"}),k.jsx("div",{className:"card-content-vertical-align",children:k.jsx("div",{className:"card-content",children:r?k.jsxs(k.Fragment,{children:[k.jsxs("h3",{children:[r.getJson().dayOfWeek," | ",r.getJson().time]}),k.jsx("div",{children:r.getJson().date})]}):k.jsx("div",{className:"highlight-font",children:"No upcoming appointments"})})})]})}),k.jsx("div",{className:"col",children:k.jsxs("div",{className:"dashboard-card",children:[k.jsx("div",{className:"card-header",children:"Billing Status"}),k.jsx("div",{className:"card-content-vertical-align",children:k.jsxs("div",{className:"card-content col",children:[k.jsxs("h3",{className:"billing-amount",children:["$",((c=i==null?void 0:i.amount)==null?void 0:c.toFixed(2))||"0.00"]}),k.jsx(mr,{content:"Pay Now",popupSwitch:"payNow"})]})})]})})]})]}),k.jsxs("div",{className:"col vir-sec-col",children:[k.jsx("div",{className:"row",children:k.jsxs("div",{className:"dashboard-card",children:[k.jsx("div",{className:"card-header",children:"Your Life Coach"}),k.jsxs("div",{className:"card-content coach-info",children:[(o==null?void 0:o.avatarUrl)&&k.jsx("img",{className:"coach-avatar",src:o.avatarUrl,alt:"Coach avatar"}),k.jsxs("div",{className:"coach-name",children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]}),k.jsxs("div",{className:"coach-contact row row-left",children:[k.jsx("i",{className:"fa-solid fa-phone"})," ",o==null?void 0:o.phone]}),k.jsxs("div",{className:"coach-contact row row-left",children:[k.jsx("i",{className:"fa-solid fa-envelope"})," ",o==null?void 0:o.email]}),k.jsx(mr,{content:"Send Message",popupSwitch:"messageCoach"})]})]})}),k.jsx("div",{className:"row",children:k.jsxs("div",{className:"dashboard-card",children:[k.jsx("div",{className:"card-header",children:"Current Tasks"}),k.jsx("div",{className:"card-content",children:k.jsx(bn,{name:"homework",cells:[{type:"custom",custom:NA}],filter:{search:e._id,attribute:"contactId"}})})]})})]})]})})}}class DA extends no{constructor(e){super(e),this.state={...this.state,defaultClass:"fit client-dash-div",owner:this.app.state.currentUser.getJson()._id}}async componentDidMount(){await this.getComponentsFromBackend()}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.propsState.currentContact&&k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(O6,{})})})}}class N6 extends lt{constructor(t){super(t);le(this,"handleTextChange",t=>{this.setState({aboutText:t.target.value})});le(this,"handleCoachChange",t=>()=>{this.setState({hadCoach:t}),this.propsState.currentContact.setCompState({coachAnswer:t})});le(this,"handleBack",()=>{console.log("Go back")});le(this,"handleContinue",async()=>{await this.operationsFactory.run(),await this.propsState.currentContact.update(),this.dispatch({currentUser:this.propsState.currentContact,routes:[{comp:DA,name:"Dash",path:"/"},{comp:Ey,name:"Tasks",path:"/tasks"},{comp:wy,name:"Messages",path:"conversation"},{comp:Ty,name:"Schedule",path:"schedule"},{comp:g6,name:"Billing",path:"billing"}]})});this.state={...this.state,aboutText:"",hadCoach:null}}getInnerContent(){let t=this.propsState.currentContact;return k.jsxs("div",{className:"about-container",children:[k.jsx("h1",{className:"about-title",children:"About You"}),k.jsx("p",{className:"about-question",children:"What's your current occupation and life situation? (e.g. work, relationships, family, etc.)"}),k.jsx(At,{type:"quill",rows:4,obj:t,name:"work"}),k.jsxs("div",{className:"about-coach",children:[k.jsx("span",{className:"about-question",children:"Have you worked with a coach or therapist before?"}),k.jsxs("label",{className:"checkbox-label",children:[k.jsx("input",{type:"checkbox",checked:this.state.hadCoach==="yes",onChange:this.handleCoachChange("yes")}),"Yes"]}),k.jsxs("label",{className:"checkbox-label",children:[k.jsx("input",{type:"checkbox",checked:this.state.hadCoach==="no",onChange:this.handleCoachChange("no")}),"No"]})]}),k.jsxs("div",{className:"about-nav",children:[k.jsx("button",{className:"back-button",onClick:this.handleBack,children:"Go Back"}),k.jsx("button",{className:"continue-button",onClick:this.handleContinue,children:"Continue"})]})]})}render(){return k.jsx("div",{className:this.props.pageClass||this.state.defaultClass,children:this.getInnerContent()})}}class wC extends lt{constructor(e){super(e),this.state={...this.state,defaultClass:"fit task-container-div"}}render(){const e={default:k6,startQuestions:R6,clientInfo:P6,aboutYou:N6},t=this.propsState.clientRegisterState||"default",r=e[t]||e.default;return k.jsx("div",{style:{marginLeft:"250px"},className:this.props.pageClass||this.state.defaultClass,children:k.jsx(vn,{theme:"NoBorder",type:"fit",content:k.jsx(r,{})})})}}class L6 extends x5{constructor(e){super(e,{db:qM,endpoint:"viridian",auth:zM,storage:UM}),this.popupComponents={contact:z5,step:f6,calendarEvent:b6,homework:LA,goal:A6},this.popupComponentsProps={},yf.getFactory().registerComponent("bottomNavMap",y6),this.componentList.addComponents([...h6],!0),this.state={...this.state,navBarProps:{mapType:window.innerWidth<600?"bottomNavMap":void 0,type:window.innerWidth<600?"topBar":void 0,style:{backgroundColor:"white",color:"black"},cardStyle:{backgroundColor:"white",position:window.innerWidth<600&&"absolute",bottom:window.innerWidth<600&&"0px"},logoURL:window.innerWidth>600&&d6,linkItemStyle:{color:"black"}},routes:[{comp:Ey,name:"Tasks",path:"/"},{comp:wy,name:"Messages",path:"conversation"},{comp:Ty,name:"Schedule",path:"schedule"},{comp:Y5,name:"Clients",path:"clients"},{comp:l6,name:"Content",path:"content"},{comp:_C,name:"",path:"session",idComp:_C},{comp:vC,name:"",path:"template",idComp:vC}],extraAuthRoutes:[{comp:wC,path:"/clientregister",idComp:wC}],popups:[{content:c6,popupSwitch:"addToSequence"}]},this.registerListWithFactory([...Object.values(q5)]);let t=yf.getNavList();t.update(0,{class:"SCAILogo"}),t.update(1,{activeClass:"SCAILink"}),window.innerWidth<600&&(t.remove(2),t.remove(0))}async checkForUser(){var t;debugger;let e=await this.APIService.getCurrentUser();e&&await this.APIService.checkIfLoggedIn()&&await this.APIService.getuser(e.email),((t=this.state.currentUser)==null?void 0:t.getJson().role)==="client"&&this.dispatch({routes:[{comp:DA,name:"Dash",path:"/"},{comp:Ey,name:"Tasks",path:"/tasks"},{comp:wy,name:"Messages",path:"conversation"},{comp:Ty,name:"Schedule",path:"schedule"}]})}}Gx.createRoot(document.getElementById("root")).render(k.jsx(ye.StrictMode,{children:k.jsx(L6,{})}));
